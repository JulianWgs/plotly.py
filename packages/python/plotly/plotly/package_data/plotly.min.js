/**
* plotly.js v2.32.0-218-gbbbfb4a52
* Copyright 2012-2024, Plotly, Inc.
* All rights reserved.
* Licensed under the MIT license
*/
(function (g, f) {
    if ("object" == typeof exports && "object" == typeof module) {
      module.exports = f();
    } else if ("function" == typeof define && define.amd) {
      define("Plotly", [], f);
    } else if ("object" == typeof exports) {
      exports["Plotly"] = f();
    } else {
      g["Plotly"] = f();
    }
  }(this, () => {
var exports = {};
var module = { exports };
"use strict";var iq=Object.defineProperty;var BQe=Object.getOwnPropertyDescriptor;var NQe=Object.getOwnPropertyNames;var UQe=Object.prototype.hasOwnProperty;var Bs=(e,t)=>()=>(e&&(t=e(e=0)),t);var ie=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),VQe=(e,t)=>{for(var r in t)iq(e,r,{get:t[r],enumerable:!0})},HQe=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of NQe(t))!UQe.call(e,n)&&n!==r&&iq(e,n,{get:()=>t[n],enumerable:!(i=BQe(t,n))||i.enumerable});return e};var jb=e=>HQe(iq({},"__esModule",{value:!0}),e);var Mk=ie(FJ=>{"use strict";FJ.version="2.32.0-218-gbbbfb4a52"});var zJ=ie((qJ,Sk)=>{(function(t,r,i){r[t]=r[t]||i(),typeof Sk!="undefined"&&Sk.exports?Sk.exports=r[t]:typeof define=="function"&&define.amd&&define(function(){return r[t]})})("Promise",typeof window!="undefined"?window:qJ,function(){"use strict";var t,r,i,n=Object.prototype.toString,a=typeof setImmediate!="undefined"?function(w){return setImmediate(w)}:setTimeout;try{Object.defineProperty({},"x",{}),t=function(w,A,T,k){return Object.defineProperty(w,A,{value:T,writable:!0,configurable:k!==!1})}}catch(p){t=function(A,T,k){return A[T]=k,A}}i=function(){var w,A,T;function k(_,E){this.fn=_,this.self=E,this.next=void 0}return{add:function(E,S){T=new k(E,S),A?A.next=T:w=T,A=T,T=void 0},drain:function(){var E=w;for(w=A=r=void 0;E;)E.fn.call(E.self),E=E.next}}}();function o(p,w){i.add(p,w),r||(r=a(i.drain))}function s(p){var w,A=typeof p;return p!=null&&(A=="object"||A=="function")&&(w=p.then),typeof w=="function"?w:!1}function l(){for(var p=0;p<this.chain.length;p++)u(this,this.state===1?this.chain[p].success:this.chain[p].failure,this.chain[p]);this.chain.length=0}function u(p,w,A){var T,k;try{w===!1?A.reject(p.msg):(w===!0?T=p.msg:T=w.call(void 0,p.msg),T===A.promise?A.reject(TypeError("Promise-chain cycle")):(k=s(T))?k.call(T,A.resolve,A.reject):A.resolve(T))}catch(_){A.reject(_)}}function f(p){var w,A=this;if(!A.triggered){A.triggered=!0,A.def&&(A=A.def);try{(w=s(p))?o(function(){var T=new v(A);try{w.call(p,function(){f.apply(T,arguments)},function(){c.apply(T,arguments)})}catch(k){c.call(T,k)}}):(A.msg=p,A.state=1,A.chain.length>0&&o(l,A))}catch(T){c.call(new v(A),T)}}}function c(p){var w=this;w.triggered||(w.triggered=!0,w.def&&(w=w.def),w.msg=p,w.state=2,w.chain.length>0&&o(l,w))}function h(p,w,A,T){for(var k=0;k<w.length;k++)(function(E){p.resolve(w[E]).then(function(g){A(E,g)},T)})(k)}function v(p){this.def=p,this.triggered=!1}function d(p){this.promise=p,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function x(p){if(typeof p!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var w=new d(this);this.then=function(T,k){var _={success:typeof T=="function"?T:!0,failure:typeof k=="function"?k:!1};return _.promise=new this.constructor(function(S,g){if(typeof S!="function"||typeof g!="function")throw TypeError("Not a function");_.resolve=S,_.reject=g}),w.chain.push(_),w.state!==0&&o(l,w),_.promise},this.catch=function(T){return this.then(void 0,T)};try{p.call(void 0,function(T){f.call(w,T)},function(T){c.call(w,T)})}catch(A){c.call(w,A)}}var b=t({},"constructor",x,!1);return x.prototype=b,t(b,"__NPO__",0,!1),t(x,"resolve",function(w){var A=this;return w&&typeof w=="object"&&w.__NPO__===1?w:new A(function(k,_){if(typeof k!="function"||typeof _!="function")throw TypeError("Not a function");k(w)})}),t(x,"reject",function(w){return new this(function(T,k){if(typeof T!="function"||typeof k!="function")throw TypeError("Not a function");k(w)})}),t(x,"all",function(w){var A=this;return n.call(w)!="[object Array]"?A.reject(TypeError("Not an array")):w.length===0?A.resolve([]):new A(function(k,_){if(typeof k!="function"||typeof _!="function")throw TypeError("Not a function");var E=w.length,S=Array(E),g=0;h(A,w,function(M,P){S[M]=P,++g===E&&k(S)},_)})}),t(x,"race",function(w){var A=this;return n.call(w)!="[object Array]"?A.reject(TypeError("Not an array")):new A(function(k,_){if(typeof k!="function"||typeof _!="function")throw TypeError("Not a function");h(A,w,function(S,g){k(g)},_)})}),x})});var Mi=ie((n$t,Ek)=>{(function(){var e={version:"3.8.2"},t=[].slice,r=function(V){return t.call(V)},i=self.document;function n(V){return V&&(V.ownerDocument||V.document||V).documentElement}function a(V){return V&&(V.ownerDocument&&V.ownerDocument.defaultView||V.document&&V||V.defaultView)}if(i)try{r(i.documentElement.childNodes)[0].nodeType}catch(V){r=function(J){for(var se=J.length,xe=new Array(se);se--;)xe[se]=J[se];return xe}}if(Date.now||(Date.now=function(){return+new Date}),i)try{i.createElement("DIV").style.setProperty("opacity",0,"")}catch(V){var o=this.Element.prototype,s=o.setAttribute,l=o.setAttributeNS,u=this.CSSStyleDeclaration.prototype,f=u.setProperty;o.setAttribute=function(J,se){s.call(this,J,se+"")},o.setAttributeNS=function(J,se,xe){l.call(this,J,se,xe+"")},u.setProperty=function(J,se,xe){f.call(this,J,se+"",xe)}}e.ascending=c;function c(V,J){return V<J?-1:V>J?1:V>=J?0:NaN}e.descending=function(V,J){return J<V?-1:J>V?1:J>=V?0:NaN},e.min=function(V,J){var se=-1,xe=V.length,be,Ae;if(arguments.length===1){for(;++se<xe;)if((Ae=V[se])!=null&&Ae>=Ae){be=Ae;break}for(;++se<xe;)(Ae=V[se])!=null&&be>Ae&&(be=Ae)}else{for(;++se<xe;)if((Ae=J.call(V,V[se],se))!=null&&Ae>=Ae){be=Ae;break}for(;++se<xe;)(Ae=J.call(V,V[se],se))!=null&&be>Ae&&(be=Ae)}return be},e.max=function(V,J){var se=-1,xe=V.length,be,Ae;if(arguments.length===1){for(;++se<xe;)if((Ae=V[se])!=null&&Ae>=Ae){be=Ae;break}for(;++se<xe;)(Ae=V[se])!=null&&Ae>be&&(be=Ae)}else{for(;++se<xe;)if((Ae=J.call(V,V[se],se))!=null&&Ae>=Ae){be=Ae;break}for(;++se<xe;)(Ae=J.call(V,V[se],se))!=null&&Ae>be&&(be=Ae)}return be},e.extent=function(V,J){var se=-1,xe=V.length,be,Ae,Ge;if(arguments.length===1){for(;++se<xe;)if((Ae=V[se])!=null&&Ae>=Ae){be=Ge=Ae;break}for(;++se<xe;)(Ae=V[se])!=null&&(be>Ae&&(be=Ae),Ge<Ae&&(Ge=Ae))}else{for(;++se<xe;)if((Ae=J.call(V,V[se],se))!=null&&Ae>=Ae){be=Ge=Ae;break}for(;++se<xe;)(Ae=J.call(V,V[se],se))!=null&&(be>Ae&&(be=Ae),Ge<Ae&&(Ge=Ae))}return[be,Ge]};function h(V){return V===null?NaN:+V}function v(V){return!isNaN(V)}e.sum=function(V,J){var se=0,xe=V.length,be,Ae=-1;if(arguments.length===1)for(;++Ae<xe;)v(be=+V[Ae])&&(se+=be);else for(;++Ae<xe;)v(be=+J.call(V,V[Ae],Ae))&&(se+=be);return se},e.mean=function(V,J){var se=0,xe=V.length,be,Ae=-1,Ge=xe;if(arguments.length===1)for(;++Ae<xe;)v(be=h(V[Ae]))?se+=be:--Ge;else for(;++Ae<xe;)v(be=h(J.call(V,V[Ae],Ae)))?se+=be:--Ge;if(Ge)return se/Ge},e.quantile=function(V,J){var se=(V.length-1)*J+1,xe=Math.floor(se),be=+V[xe-1],Ae=se-xe;return Ae?be+Ae*(V[xe]-be):be},e.median=function(V,J){var se=[],xe=V.length,be,Ae=-1;if(arguments.length===1)for(;++Ae<xe;)v(be=h(V[Ae]))&&se.push(be);else for(;++Ae<xe;)v(be=h(J.call(V,V[Ae],Ae)))&&se.push(be);if(se.length)return e.quantile(se.sort(c),.5)},e.variance=function(V,J){var se=V.length,xe=0,be,Ae,Ge=0,Pe=-1,tt=0;if(arguments.length===1)for(;++Pe<se;)v(be=h(V[Pe]))&&(Ae=be-xe,xe+=Ae/++tt,Ge+=Ae*(be-xe));else for(;++Pe<se;)v(be=h(J.call(V,V[Pe],Pe)))&&(Ae=be-xe,xe+=Ae/++tt,Ge+=Ae*(be-xe));if(tt>1)return Ge/(tt-1)},e.deviation=function(){var V=e.variance.apply(this,arguments);return V&&Math.sqrt(V)};function d(V){return{left:function(J,se,xe,be){for(arguments.length<3&&(xe=0),arguments.length<4&&(be=J.length);xe<be;){var Ae=xe+be>>>1;V(J[Ae],se)<0?xe=Ae+1:be=Ae}return xe},right:function(J,se,xe,be){for(arguments.length<3&&(xe=0),arguments.length<4&&(be=J.length);xe<be;){var Ae=xe+be>>>1;V(J[Ae],se)>0?be=Ae:xe=Ae+1}return xe}}}var x=d(c);e.bisectLeft=x.left,e.bisect=e.bisectRight=x.right,e.bisector=function(V){return d(V.length===1?function(J,se){return c(V(J),se)}:V)},e.shuffle=function(V,J,se){(xe=arguments.length)<3&&(se=V.length,xe<2&&(J=0));for(var xe=se-J,be,Ae;xe;)Ae=Math.random()*xe--|0,be=V[xe+J],V[xe+J]=V[Ae+J],V[Ae+J]=be;return V},e.permute=function(V,J){for(var se=J.length,xe=new Array(se);se--;)xe[se]=V[J[se]];return xe},e.pairs=function(V){for(var J=0,se=V.length-1,xe,be=V[0],Ae=new Array(se<0?0:se);J<se;)Ae[J]=[xe=be,be=V[++J]];return Ae},e.transpose=function(V){if(!(Ae=V.length))return[];for(var J=-1,se=e.min(V,b),xe=new Array(se);++J<se;)for(var be=-1,Ae,Ge=xe[J]=new Array(Ae);++be<Ae;)Ge[be]=V[be][J];return xe};function b(V){return V.length}e.zip=function(){return e.transpose(arguments)},e.keys=function(V){var J=[];for(var se in V)J.push(se);return J},e.values=function(V){var J=[];for(var se in V)J.push(V[se]);return J},e.entries=function(V){var J=[];for(var se in V)J.push({key:se,value:V[se]});return J},e.merge=function(V){for(var J=V.length,se,xe=-1,be=0,Ae,Ge;++xe<J;)be+=V[xe].length;for(Ae=new Array(be);--J>=0;)for(Ge=V[J],se=Ge.length;--se>=0;)Ae[--be]=Ge[se];return Ae};var p=Math.abs;e.range=function(V,J,se){if(arguments.length<3&&(se=1,arguments.length<2&&(J=V,V=0)),(J-V)/se===1/0)throw new Error("infinite range");var xe=[],be=w(p(se)),Ae=-1,Ge;if(V*=be,J*=be,se*=be,se<0)for(;(Ge=V+se*++Ae)>J;)xe.push(Ge/be);else for(;(Ge=V+se*++Ae)<J;)xe.push(Ge/be);return xe};function w(V){for(var J=1;V*J%1;)J*=10;return J}function A(V,J){for(var se in J)Object.defineProperty(V.prototype,se,{value:J[se],enumerable:!1})}e.map=function(V,J){var se=new T;if(V instanceof T)V.forEach(function(Pe,tt){se.set(Pe,tt)});else if(Array.isArray(V)){var xe=-1,be=V.length,Ae;if(arguments.length===1)for(;++xe<be;)se.set(xe,V[xe]);else for(;++xe<be;)se.set(J.call(V,Ae=V[xe],xe),Ae)}else for(var Ge in V)se.set(Ge,V[Ge]);return se};function T(){this._=Object.create(null)}var k="__proto__",_="\0";A(T,{has:g,get:function(V){return this._[E(V)]},set:function(V,J){return this._[E(V)]=J},remove:C,keys:M,values:function(){var V=[];for(var J in this._)V.push(this._[J]);return V},entries:function(){var V=[];for(var J in this._)V.push({key:S(J),value:this._[J]});return V},size:P,empty:D,forEach:function(V){for(var J in this._)V.call(this,S(J),this._[J])}});function E(V){return(V+="")===k||V[0]===_?_+V:V}function S(V){return(V+="")[0]===_?V.slice(1):V}function g(V){return E(V)in this._}function C(V){return(V=E(V))in this._&&delete this._[V]}function M(){var V=[];for(var J in this._)V.push(S(J));return V}function P(){var V=0;for(var J in this._)++V;return V}function D(){for(var V in this._)return!1;return!0}e.nest=function(){var V={},J=[],se=[],xe,be;function Ae(Pe,tt,Mt){if(Mt>=J.length)return be?be.call(V,tt):xe?tt.sort(xe):tt;for(var Et=-1,rr=tt.length,tr=J[Mt++],Tr,Er,ir,gr=new T,wr;++Et<rr;)(wr=gr.get(Tr=tr(Er=tt[Et])))?wr.push(Er):gr.set(Tr,[Er]);return Pe?(Er=Pe(),ir=function(Pr,kr){Er.set(Pr,Ae(Pe,kr,Mt))}):(Er={},ir=function(Pr,kr){Er[Pr]=Ae(Pe,kr,Mt)}),gr.forEach(ir),Er}function Ge(Pe,tt){if(tt>=J.length)return Pe;var Mt=[],Et=se[tt++];return Pe.forEach(function(rr,tr){Mt.push({key:rr,values:Ge(tr,tt)})}),Et?Mt.sort(function(rr,tr){return Et(rr.key,tr.key)}):Mt}return V.map=function(Pe,tt){return Ae(tt,Pe,0)},V.entries=function(Pe){return Ge(Ae(e.map,Pe,0),0)},V.key=function(Pe){return J.push(Pe),V},V.sortKeys=function(Pe){return se[J.length-1]=Pe,V},V.sortValues=function(Pe){return xe=Pe,V},V.rollup=function(Pe){return be=Pe,V},V},e.set=function(V){var J=new q;if(V)for(var se=0,xe=V.length;se<xe;++se)J.add(V[se]);return J};function q(){this._=Object.create(null)}A(q,{has:g,add:function(V){return this._[E(V+="")]=!0,V},remove:C,values:M,size:P,empty:D,forEach:function(V){for(var J in this._)V.call(this,S(J))}}),e.behavior={};function O(V){return V}e.rebind=function(V,J){for(var se=1,xe=arguments.length,be;++se<xe;)V[be=arguments[se]]=U(V,J,J[be]);return V};function U(V,J,se){return function(){var xe=se.apply(J,arguments);return xe===J?V:xe}}function B(V,J){if(J in V)return J;J=J.charAt(0).toUpperCase()+J.slice(1);for(var se=0,xe=F.length;se<xe;++se){var be=F[se]+J;if(be in V)return be}}var F=["webkit","ms","moz","Moz","o","O"];function N(){}e.dispatch=function(){for(var V=new X,J=-1,se=arguments.length;++J<se;)V[arguments[J]]=K(V);return V};function X(){}X.prototype.on=function(V,J){var se=V.indexOf("."),xe="";if(se>=0&&(xe=V.slice(se+1),V=V.slice(0,se)),V)return arguments.length<2?this[V].on(xe):this[V].on(xe,J);if(arguments.length===2){if(J==null)for(V in this)this.hasOwnProperty(V)&&this[V].on(xe,null);return this}};function K(V){var J=[],se=new T;function xe(){for(var be=J,Ae=-1,Ge=be.length,Pe;++Ae<Ge;)(Pe=be[Ae].on)&&Pe.apply(this,arguments);return V}return xe.on=function(be,Ae){var Ge=se.get(be),Pe;return arguments.length<2?Ge&&Ge.on:(Ge&&(Ge.on=null,J=J.slice(0,Pe=J.indexOf(Ge)).concat(J.slice(Pe+1)),se.remove(be)),Ae&&J.push(se.set(be,{on:Ae})),V)},xe}e.event=null;function ne(){e.event.preventDefault()}function fe(){for(var V=e.event,J;J=V.sourceEvent;)V=J;return V}function ue(V){for(var J=new X,se=0,xe=arguments.length;++se<xe;)J[arguments[se]]=K(J);return J.of=function(be,Ae){return function(Ge){try{var Pe=Ge.sourceEvent=e.event;Ge.target=V,e.event=Ge,J[Ge.type].apply(be,Ae)}finally{e.event=Pe}}},J}e.requote=function(V){return V.replace(ee,"\\$&")};var ee=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Z={}.__proto__?function(V,J){V.__proto__=J}:function(V,J){for(var se in J)V[se]=J[se]};function oe(V){return Z(V,he),V}var ce=function(V,J){return J.querySelector(V)},le=function(V,J){return J.querySelectorAll(V)},me=function(V,J){var se=V.matches||V[B(V,"matchesSelector")];return me=function(xe,be){return se.call(xe,be)},me(V,J)};typeof Sizzle=="function"&&(ce=function(V,J){return Sizzle(V,J)[0]||null},le=Sizzle,me=Sizzle.matchesSelector),e.selection=function(){return e.select(i.documentElement)};var he=e.selection.prototype=[];he.select=function(V){var J=[],se,xe,be,Ae;V=te(V);for(var Ge=-1,Pe=this.length;++Ge<Pe;){J.push(se=[]),se.parentNode=(be=this[Ge]).parentNode;for(var tt=-1,Mt=be.length;++tt<Mt;)(Ae=be[tt])?(se.push(xe=V.call(Ae,Ae.__data__,tt,Ge)),xe&&"__data__"in Ae&&(xe.__data__=Ae.__data__)):se.push(null)}return oe(J)};function te(V){return typeof V=="function"?V:function(){return ce(V,this)}}he.selectAll=function(V){var J=[],se,xe;V=ge(V);for(var be=-1,Ae=this.length;++be<Ae;)for(var Ge=this[be],Pe=-1,tt=Ge.length;++Pe<tt;)(xe=Ge[Pe])&&(J.push(se=r(V.call(xe,xe.__data__,Pe,be))),se.parentNode=xe);return oe(J)};function ge(V){return typeof V=="function"?V:function(){return le(V,this)}}var ae="http://www.w3.org/1999/xhtml",_e={svg:"http://www.w3.org/2000/svg",xhtml:ae,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};e.ns={prefix:_e,qualify:function(V){var J=V.indexOf(":"),se=V;return J>=0&&(se=V.slice(0,J))!=="xmlns"&&(V=V.slice(J+1)),_e.hasOwnProperty(se)?{space:_e[se],local:V}:V}},he.attr=function(V,J){if(arguments.length<2){if(typeof V=="string"){var se=this.node();return V=e.ns.qualify(V),V.local?se.getAttributeNS(V.space,V.local):se.getAttribute(V)}for(J in V)this.each(Ce(J,V[J]));return this}return this.each(Ce(V,J))};function Ce(V,J){V=e.ns.qualify(V);function se(){this.removeAttribute(V)}function xe(){this.removeAttributeNS(V.space,V.local)}function be(){this.setAttribute(V,J)}function Ae(){this.setAttributeNS(V.space,V.local,J)}function Ge(){var tt=J.apply(this,arguments);tt==null?this.removeAttribute(V):this.setAttribute(V,tt)}function Pe(){var tt=J.apply(this,arguments);tt==null?this.removeAttributeNS(V.space,V.local):this.setAttributeNS(V.space,V.local,tt)}return J==null?V.local?xe:se:typeof J=="function"?V.local?Pe:Ge:V.local?Ae:be}function qe(V){return V.trim().replace(/\s+/g," ")}he.classed=function(V,J){if(arguments.length<2){if(typeof V=="string"){var se=this.node(),xe=(V=Re(V)).length,be=-1;if(J=se.classList){for(;++be<xe;)if(!J.contains(V[be]))return!1}else for(J=se.getAttribute("class");++be<xe;)if(!rt(V[be]).test(J))return!1;return!0}for(J in V)this.each(Ie(J,V[J]));return this}return this.each(Ie(V,J))};function rt(V){return new RegExp("(?:^|\\s+)"+e.requote(V)+"(?:\\s+|$)","g")}function Re(V){return(V+"").trim().split(/^|\s+/)}function Ie(V,J){V=Re(V).map(ot);var se=V.length;function xe(){for(var Ae=-1;++Ae<se;)V[Ae](this,J)}function be(){for(var Ae=-1,Ge=J.apply(this,arguments);++Ae<se;)V[Ae](this,Ge)}return typeof J=="function"?be:xe}function ot(V){var J=rt(V);return function(se,xe){if(be=se.classList)return xe?be.add(V):be.remove(V);var be=se.getAttribute("class")||"";xe?(J.lastIndex=0,J.test(be)||se.setAttribute("class",qe(be+" "+V))):se.setAttribute("class",qe(be.replace(J," ")))}}he.style=function(V,J,se){var xe=arguments.length;if(xe<3){if(typeof V!="string"){xe<2&&(J="");for(se in V)this.each(lt(se,V[se],J));return this}if(xe<2){var be=this.node();return a(be).getComputedStyle(be,null).getPropertyValue(V)}se=""}return this.each(lt(V,J,se))};function lt(V,J,se){function xe(){this.style.removeProperty(V)}function be(){this.style.setProperty(V,J,se)}function Ae(){var Ge=J.apply(this,arguments);Ge==null?this.style.removeProperty(V):this.style.setProperty(V,Ge,se)}return J==null?xe:typeof J=="function"?Ae:be}he.property=function(V,J){if(arguments.length<2){if(typeof V=="string")return this.node()[V];for(J in V)this.each(ht(J,V[J]));return this}return this.each(ht(V,J))};function ht(V,J){function se(){delete this[V]}function xe(){this[V]=J}function be(){var Ae=J.apply(this,arguments);Ae==null?delete this[V]:this[V]=Ae}return J==null?se:typeof J=="function"?be:xe}he.text=function(V){return arguments.length?this.each(typeof V=="function"?function(){var J=V.apply(this,arguments);this.textContent=J==null?"":J}:V==null?function(){this.textContent=""}:function(){this.textContent=V}):this.node().textContent},he.html=function(V){return arguments.length?this.each(typeof V=="function"?function(){var J=V.apply(this,arguments);this.innerHTML=J==null?"":J}:V==null?function(){this.innerHTML=""}:function(){this.innerHTML=V}):this.node().innerHTML},he.append=function(V){return V=xt(V),this.select(function(){return this.appendChild(V.apply(this,arguments))})};function xt(V){function J(){var xe=this.ownerDocument,be=this.namespaceURI;return be===ae&&xe.documentElement.namespaceURI===ae?xe.createElement(V):xe.createElementNS(be,V)}function se(){return this.ownerDocument.createElementNS(V.space,V.local)}return typeof V=="function"?V:(V=e.ns.qualify(V)).local?se:J}he.insert=function(V,J){return V=xt(V),J=te(J),this.select(function(){return this.insertBefore(V.apply(this,arguments),J.apply(this,arguments)||null)})},he.remove=function(){return this.each(Vt)};function Vt(){var V=this.parentNode;V&&V.removeChild(this)}he.data=function(V,J){var se=-1,xe=this.length,be,Ae;if(!arguments.length){for(V=new Array(xe=(be=this[0]).length);++se<xe;)(Ae=be[se])&&(V[se]=Ae.__data__);return V}function Ge(Et,rr){var tr,Tr=Et.length,Er=rr.length,ir=Math.min(Tr,Er),gr=new Array(Er),wr=new Array(Er),Pr=new Array(Tr),kr,pr;if(J){var mn=new T,Tn=new Array(Tr),zn;for(tr=-1;++tr<Tr;)(kr=Et[tr])&&(mn.has(zn=J.call(kr,kr.__data__,tr))?Pr[tr]=kr:mn.set(zn,kr),Tn[tr]=zn);for(tr=-1;++tr<Er;)(kr=mn.get(zn=J.call(rr,pr=rr[tr],tr)))?kr!==!0&&(gr[tr]=kr,kr.__data__=pr):wr[tr]=Ht(pr),mn.set(zn,!0);for(tr=-1;++tr<Tr;)tr in Tn&&mn.get(Tn[tr])!==!0&&(Pr[tr]=Et[tr])}else{for(tr=-1;++tr<ir;)kr=Et[tr],pr=rr[tr],kr?(kr.__data__=pr,gr[tr]=kr):wr[tr]=Ht(pr);for(;tr<Er;++tr)wr[tr]=Ht(rr[tr]);for(;tr<Tr;++tr)Pr[tr]=Et[tr]}wr.update=gr,wr.parentNode=gr.parentNode=Pr.parentNode=Et.parentNode,Pe.push(wr),tt.push(gr),Mt.push(Pr)}var Pe=et([]),tt=oe([]),Mt=oe([]);if(typeof V=="function")for(;++se<xe;)Ge(be=this[se],V.call(be,be.parentNode.__data__,se));else for(;++se<xe;)Ge(be=this[se],V);return tt.enter=function(){return Pe},tt.exit=function(){return Mt},tt};function Ht(V){return{__data__:V}}he.datum=function(V){return arguments.length?this.property("__data__",V):this.property("__data__")},he.filter=function(V){var J=[],se,xe,be;typeof V!="function"&&(V=Me(V));for(var Ae=0,Ge=this.length;Ae<Ge;Ae++){J.push(se=[]),se.parentNode=(xe=this[Ae]).parentNode;for(var Pe=0,tt=xe.length;Pe<tt;Pe++)(be=xe[Pe])&&V.call(be,be.__data__,Pe,Ae)&&se.push(be)}return oe(J)};function Me(V){return function(){return me(this,V)}}he.order=function(){for(var V=-1,J=this.length;++V<J;)for(var se=this[V],xe=se.length-1,be=se[xe],Ae;--xe>=0;)(Ae=se[xe])&&(be&&be!==Ae.nextSibling&&be.parentNode.insertBefore(Ae,be),be=Ae);return this},he.sort=function(V){V=Ke.apply(this,arguments);for(var J=-1,se=this.length;++J<se;)this[J].sort(V);return this.order()};function Ke(V){return arguments.length||(V=c),function(J,se){return J&&se?V(J.__data__,se.__data__):!J-!se}}he.each=function(V){return We(this,function(J,se,xe){V.call(J,J.__data__,se,xe)})};function We(V,J){for(var se=0,xe=V.length;se<xe;se++)for(var be=V[se],Ae=0,Ge=be.length,Pe;Ae<Ge;Ae++)(Pe=be[Ae])&&J(Pe,Ae,se);return V}he.call=function(V){var J=r(arguments);return V.apply(J[0]=this,J),this},he.empty=function(){return!this.node()},he.node=function(){for(var V=0,J=this.length;V<J;V++)for(var se=this[V],xe=0,be=se.length;xe<be;xe++){var Ae=se[xe];if(Ae)return Ae}return null},he.size=function(){var V=0;return We(this,function(){++V}),V};function et(V){return Z(V,vt),V}var vt=[];e.selection.enter=et,e.selection.enter.prototype=vt,vt.append=he.append,vt.empty=he.empty,vt.node=he.node,vt.call=he.call,vt.size=he.size,vt.select=function(V){for(var J=[],se,xe,be,Ae,Ge,Pe=-1,tt=this.length;++Pe<tt;){be=(Ae=this[Pe]).update,J.push(se=[]),se.parentNode=Ae.parentNode;for(var Mt=-1,Et=Ae.length;++Mt<Et;)(Ge=Ae[Mt])?(se.push(be[Mt]=xe=V.call(Ae.parentNode,Ge.__data__,Mt,Pe)),xe.__data__=Ge.__data__):se.push(null)}return oe(J)},vt.insert=function(V,J){return arguments.length<2&&(J=at(this)),he.insert.call(this,V,J)};function at(V){var J,se;return function(xe,be,Ae){var Ge=V[Ae].update,Pe=Ge.length,tt;for(Ae!=se&&(se=Ae,J=0),be>=J&&(J=be+1);!(tt=Ge[J])&&++J<Pe;);return tt}}e.select=function(V){var J;return typeof V=="string"?(J=[ce(V,i)],J.parentNode=i.documentElement):(J=[V],J.parentNode=n(V)),oe([J])},e.selectAll=function(V){var J;return typeof V=="string"?(J=r(le(V,i)),J.parentNode=i.documentElement):(J=r(V),J.parentNode=null),oe([J])},he.on=function(V,J,se){var xe=arguments.length;if(xe<3){if(typeof V!="string"){xe<2&&(J=!1);for(se in V)this.each(Xe(se,V[se],J));return this}if(xe<2)return(xe=this.node()["__on"+V])&&xe._;se=!1}return this.each(Xe(V,J,se))};function Xe(V,J,se){var xe="__on"+V,be=V.indexOf("."),Ae=_t;be>0&&(V=V.slice(0,be));var Ge=dt.get(V);Ge&&(V=Ge,Ae=$t);function Pe(){var Et=this[xe];Et&&(this.removeEventListener(V,Et,Et.$),delete this[xe])}function tt(){var Et=Ae(J,r(arguments));Pe.call(this),this.addEventListener(V,this[xe]=Et,Et.$=se),Et._=J}function Mt(){var Et=new RegExp("^__on([^.]+)"+e.requote(V)+"$"),rr;for(var tr in this)if(rr=tr.match(Et)){var Tr=this[tr];this.removeEventListener(rr[1],Tr,Tr.$),delete this[tr]}}return be?J?tt:Pe:J?N:Mt}var dt=e.map({mouseenter:"mouseover",mouseleave:"mouseout"});i&&dt.forEach(function(V){"on"+V in i&&dt.remove(V)});function _t(V,J){return function(se){var xe=e.event;e.event=se,J[0]=this.__data__;try{V.apply(this,J)}finally{e.event=xe}}}function $t(V,J){var se=_t(V,J);return function(xe){var be=this,Ae=xe.relatedTarget;(!Ae||Ae!==be&&!(Ae.compareDocumentPosition(be)&8))&&se.call(be,xe)}}var Ut,fr=0;function ar(V){var J=".dragsuppress-"+ ++fr,se="click"+J,xe=e.select(a(V)).on("touchmove"+J,ne).on("dragstart"+J,ne).on("selectstart"+J,ne);if(Ut==null&&(Ut="onselectstart"in V?!1:B(V.style,"userSelect")),Ut){var be=n(V).style,Ae=be[Ut];be[Ut]="none"}return function(Ge){if(xe.on(J,null),Ut&&(be[Ut]=Ae),Ge){var Pe=function(){xe.on(se,null)};xe.on(se,function(){ne(),Pe()},!0),setTimeout(Pe,0)}}}e.mouse=function(V){return It(V,fe())};var cr=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function It(V,J){J.changedTouches&&(J=J.changedTouches[0]);var se=V.ownerSVGElement||V;if(se.createSVGPoint){var xe=se.createSVGPoint();if(cr<0){var be=a(V);if(be.scrollX||be.scrollY){se=e.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Ae=se[0][0].getScreenCTM();cr=!(Ae.f||Ae.e),se.remove()}}return cr?(xe.x=J.pageX,xe.y=J.pageY):(xe.x=J.clientX,xe.y=J.clientY),xe=xe.matrixTransform(V.getScreenCTM().inverse()),[xe.x,xe.y]}var Ge=V.getBoundingClientRect();return[J.clientX-Ge.left-V.clientLeft,J.clientY-Ge.top-V.clientTop]}e.touch=function(V,J,se){if(arguments.length<3&&(se=J,J=fe().changedTouches),J){for(var xe=0,be=J.length,Ae;xe<be;++xe)if((Ae=J[xe]).identifier===se)return It(V,Ae)}},e.behavior.drag=function(){var V=ue(be,"drag","dragstart","dragend"),J=null,se=Ae(N,e.mouse,a,"mousemove","mouseup"),xe=Ae(gt,e.touch,O,"touchmove","touchend");function be(){this.on("mousedown.drag",se).on("touchstart.drag",xe)}function Ae(Ge,Pe,tt,Mt,Et){return function(){var rr=this,tr=e.event.target.correspondingElement||e.event.target,Tr=rr.parentNode,Er=V.of(rr,arguments),ir=0,gr=Ge(),wr=".drag"+(gr==null?"":"-"+gr),Pr,kr=e.select(tt(tr)).on(Mt+wr,Tn).on(Et+wr,zn),pr=ar(tr),mn=Pe(Tr,gr);J?(Pr=J.apply(rr,arguments),Pr=[Pr.x-mn[0],Pr.y-mn[1]]):Pr=[0,0],Er({type:"dragstart"});function Tn(){var Kn=Pe(Tr,gr),Ci,qi;Kn&&(Ci=Kn[0]-mn[0],qi=Kn[1]-mn[1],ir|=Ci|qi,mn=Kn,Er({type:"drag",x:Kn[0]+Pr[0],y:Kn[1]+Pr[1],dx:Ci,dy:qi}))}function zn(){Pe(Tr,gr)&&(kr.on(Mt+wr,null).on(Et+wr,null),pr(ir),Er({type:"dragend"}))}}}return be.origin=function(Ge){return arguments.length?(J=Ge,be):J},e.rebind(be,V,"on")};function gt(){return e.event.changedTouches[0].identifier}e.touches=function(V,J){return arguments.length<2&&(J=fe().touches),J?r(J).map(function(se){var xe=It(V,se);return xe.identifier=se.identifier,xe}):[]};var kt=1e-6,Je=kt*kt,Ze=Math.PI,At=2*Ze,Se=At-kt,pe=Ze/2,Te=Ze/180,it=180/Ze;function Dt(V){return V>0?1:V<0?-1:0}function Wt(V,J,se){return(J[0]-V[0])*(se[1]-V[1])-(J[1]-V[1])*(se[0]-V[0])}function er(V){return V>1?0:V<-1?Ze:Math.acos(V)}function qr(V){return V>1?pe:V<-1?-pe:Math.asin(V)}function Vr(V){return((V=Math.exp(V))-1/V)/2}function mr(V){return((V=Math.exp(V))+1/V)/2}function Fr(V){return((V=Math.exp(2*V))-1)/(V+1)}function nn(V){return(V=Math.sin(V/2))*V}var jn=Math.SQRT2,xn=2,pn=4;e.interpolateZoom=function(V,J){var se=V[0],xe=V[1],be=V[2],Ae=J[0],Ge=J[1],Pe=J[2],tt=Ae-se,Mt=Ge-xe,Et=tt*tt+Mt*Mt,rr,tr;if(Et<Je)tr=Math.log(Pe/be)/jn,rr=function(Pr){return[se+Pr*tt,xe+Pr*Mt,be*Math.exp(jn*Pr*tr)]};else{var Tr=Math.sqrt(Et),Er=(Pe*Pe-be*be+pn*Et)/(2*be*xn*Tr),ir=(Pe*Pe-be*be-pn*Et)/(2*Pe*xn*Tr),gr=Math.log(Math.sqrt(Er*Er+1)-Er),wr=Math.log(Math.sqrt(ir*ir+1)-ir);tr=(wr-gr)/jn,rr=function(Pr){var kr=Pr*tr,pr=mr(gr),mn=be/(xn*Tr)*(pr*Fr(jn*kr+gr)-Vr(gr));return[se+mn*tt,xe+mn*Mt,be*pr/mr(jn*kr+gr)]}}return rr.duration=tr*1e3,rr},e.behavior.zoom=function(){var V={x:0,y:0,k:1},J,se,xe,be=[960,500],Ae=ki,Ge=250,Pe=0,tt="mousedown.zoom",Mt="mousemove.zoom",Et="mouseup.zoom",rr,tr="touchstart.zoom",Tr,Er=ue(kr,"zoomstart","zoom","zoomend"),ir,gr,wr,Pr;bi||(bi="onwheel"in i?(qn=function(){return-e.event.deltaY*(e.event.deltaMode?120:1)},"wheel"):"onmousewheel"in i?(qn=function(){return e.event.wheelDelta},"mousewheel"):(qn=function(){return-e.event.detail},"MozMousePixelScroll"));function kr(kn){kn.on(tt,va).on(bi+".zoom",Do).on("dblclick.zoom",So).on(tr,mo)}kr.event=function(kn){kn.each(function(){var da=Er.of(this,arguments),Sa=V;gs?e.select(this).transition().each("start.zoom",function(){V=this.__chart__||{x:0,y:0,k:1},qi(da)}).tween("zoom:zoom",function(){var La=be[0],As=be[1],Gs=se?se[0]:La/2,ml=se?se[1]:As/2,fs=e.interpolateZoom([(Gs-V.x)/V.k,(ml-V.y)/V.k,La/V.k],[(Gs-Sa.x)/Sa.k,(ml-Sa.y)/Sa.k,La/Sa.k]);return function(Xl){var Ye=fs(Xl),Yt=La/Ye[2];this.__chart__=V={x:Gs-Ye[0]*Yt,y:ml-Ye[1]*Yt,k:Yt},xa(da)}}).each("interrupt.zoom",function(){Gi(da)}).each("end.zoom",function(){Gi(da)}):(this.__chart__=V,qi(da),xa(da),Gi(da))})},kr.translate=function(kn){return arguments.length?(V={x:+kn[0],y:+kn[1],k:V.k},Ci(),kr):[V.x,V.y]},kr.scale=function(kn){return arguments.length?(V={x:V.x,y:V.y,k:null},Tn(+kn),Ci(),kr):V.k},kr.scaleExtent=function(kn){return arguments.length?(Ae=kn==null?ki:[+kn[0],+kn[1]],kr):Ae},kr.center=function(kn){return arguments.length?(xe=kn&&[+kn[0],+kn[1]],kr):xe},kr.size=function(kn){return arguments.length?(be=kn&&[+kn[0],+kn[1]],kr):be},kr.duration=function(kn){return arguments.length?(Ge=+kn,kr):Ge},kr.x=function(kn){return arguments.length?(gr=kn,ir=kn.copy(),V={x:0,y:0,k:1},kr):gr},kr.y=function(kn){return arguments.length?(Pr=kn,wr=kn.copy(),V={x:0,y:0,k:1},kr):Pr};function pr(kn){return[(kn[0]-V.x)/V.k,(kn[1]-V.y)/V.k]}function mn(kn){return[kn[0]*V.k+V.x,kn[1]*V.k+V.y]}function Tn(kn){V.k=Math.max(Ae[0],Math.min(Ae[1],kn))}function zn(kn,da){da=mn(da),V.x+=kn[0]-da[0],V.y+=kn[1]-da[1]}function Kn(kn,da,Sa,La){kn.__chart__={x:V.x,y:V.y,k:V.k},Tn(Math.pow(2,La)),zn(se=da,Sa),kn=e.select(kn),Ge>0&&(kn=kn.transition().duration(Ge)),kn.call(kr.event)}function Ci(){gr&&gr.domain(ir.range().map(function(kn){return(kn-V.x)/V.k}).map(ir.invert)),Pr&&Pr.domain(wr.range().map(function(kn){return(kn-V.y)/V.k}).map(wr.invert))}function qi(kn){Pe++||kn({type:"zoomstart"})}function xa(kn){Ci(),kn({type:"zoom",scale:V.k,translate:[V.x,V.y]})}function Gi(kn){--Pe||(kn({type:"zoomend"}),se=null)}function va(){var kn=this,da=Er.of(kn,arguments),Sa=0,La=e.select(a(kn)).on(Mt,ml).on(Et,fs),As=pr(e.mouse(kn)),Gs=ar(kn);pa.call(kn),qi(da);function ml(){Sa=1,zn(e.mouse(kn),As),xa(da)}function fs(){La.on(Mt,null).on(Et,null),Gs(Sa),Gi(da)}}function mo(){var kn=this,da=Er.of(kn,arguments),Sa={},La=0,As,Gs=".zoom-"+e.event.changedTouches[0].identifier,ml="touchmove"+Gs,fs="touchend"+Gs,Xl=[],Ye=e.select(kn),Yt=ar(kn);Or(),qi(da),Ye.on(tt,null).on(tr,Or);function lr(){var Kr=e.touches(kn);return As=V.k,Kr.forEach(function(_n){_n.identifier in Sa&&(Sa[_n.identifier]=pr(_n))}),Kr}function Or(){var Kr=e.event.target;e.select(Kr).on(ml,$r).on(fs,jr),Xl.push(Kr);for(var _n=e.event.changedTouches,ti=0,Zn=_n.length;ti<Zn;++ti)Sa[_n[ti].identifier]=null;var In=lr(),ia=Date.now();if(In.length===1){if(ia-Tr<500){var Gn=In[0];Kn(kn,Gn,Sa[Gn.identifier],Math.floor(Math.log(V.k)/Math.LN2)+1),ne()}Tr=ia}else if(In.length>1){var Gn=In[0],Vn=In[1],bn=Gn[0]-Vn[0],Br=Gn[1]-Vn[1];La=bn*bn+Br*Br}}function $r(){var Kr=e.touches(kn),_n,ti,Zn,In;pa.call(kn);for(var ia=0,Gn=Kr.length;ia<Gn;++ia,In=null)if(Zn=Kr[ia],In=Sa[Zn.identifier]){if(ti)break;_n=Zn,ti=In}if(In){var Vn=(Vn=Zn[0]-_n[0])*Vn+(Vn=Zn[1]-_n[1])*Vn,bn=La&&Math.sqrt(Vn/La);_n=[(_n[0]+Zn[0])/2,(_n[1]+Zn[1])/2],ti=[(ti[0]+In[0])/2,(ti[1]+In[1])/2],Tn(bn*As)}Tr=null,zn(_n,ti),xa(da)}function jr(){if(e.event.touches.length){for(var Kr=e.event.changedTouches,_n=0,ti=Kr.length;_n<ti;++_n)delete Sa[Kr[_n].identifier];for(var Zn in Sa)return void lr()}e.selectAll(Xl).on(Gs,null),Ye.on(tt,va).on(tr,mo),Yt(),Gi(da)}}function Do(){var kn=Er.of(this,arguments);rr?clearTimeout(rr):(pa.call(this),J=pr(se=xe||e.mouse(this)),qi(kn)),rr=setTimeout(function(){rr=null,Gi(kn)},50),ne(),Tn(Math.pow(2,qn()*.002)*V.k),zn(se,J),xa(kn)}function So(){var kn=e.mouse(this),da=Math.log(V.k)/Math.LN2;Kn(this,kn,pr(kn),e.event.shiftKey?Math.ceil(da)-1:Math.floor(da)+1)}return e.rebind(kr,Er,"on")};var ki=[0,1/0],qn,bi;e.color=Si;function Si(){}Si.prototype.toString=function(){return this.rgb()+""},e.hsl=nt;function nt(V,J,se){return this instanceof nt?(this.h=+V,this.s=+J,void(this.l=+se)):arguments.length<2?V instanceof nt?new nt(V.h,V.s,V.l):Qi(""+V,ya,nt):new nt(V,J,se)}var ze=nt.prototype=new Si;ze.brighter=function(V){return V=Math.pow(.7,arguments.length?V:1),new nt(this.h,this.s,this.l/V)},ze.darker=function(V){return V=Math.pow(.7,arguments.length?V:1),new nt(this.h,this.s,V*this.l)},ze.rgb=function(){return ut(this.h,this.s,this.l)};function ut(V,J,se){var xe,be;V=isNaN(V)?0:(V%=360)<0?V+360:V,J=isNaN(J)||J<0?0:J>1?1:J,se=se<0?0:se>1?1:se,be=se<=.5?se*(1+J):se+J-se*J,xe=2*se-be;function Ae(Pe){return Pe>360?Pe-=360:Pe<0&&(Pe+=360),Pe<60?xe+(be-xe)*Pe/60:Pe<180?be:Pe<240?xe+(be-xe)*(240-Pe)/60:xe}function Ge(Pe){return Math.round(Ae(Pe)*255)}return new Xi(Ge(V+120),Ge(V),Ge(V-120))}e.hcl=mt;function mt(V,J,se){return this instanceof mt?(this.h=+V,this.c=+J,void(this.l=+se)):arguments.length<2?V instanceof mt?new mt(V.h,V.c,V.l):V instanceof yr?wn(V.l,V.a,V.b):wn((V=Nn((V=e.rgb(V)).r,V.g,V.b)).l,V.a,V.b):new mt(V,J,se)}var Ot=mt.prototype=new Si;Ot.brighter=function(V){return new mt(this.h,this.c,Math.min(100,this.l+vr*(arguments.length?V:1)))},Ot.darker=function(V){return new mt(this.h,this.c,Math.max(0,this.l-vr*(arguments.length?V:1)))},Ot.rgb=function(){return nr(this.h,this.c,this.l).rgb()};function nr(V,J,se){return isNaN(V)&&(V=0),isNaN(J)&&(J=0),new yr(se,Math.cos(V*=Te)*J,Math.sin(V)*J)}e.lab=yr;function yr(V,J,se){return this instanceof yr?(this.l=+V,this.a=+J,void(this.b=+se)):arguments.length<2?V instanceof yr?new yr(V.l,V.a,V.b):V instanceof mt?nr(V.h,V.c,V.l):Nn((V=Xi(V)).r,V.g,V.b):new yr(V,J,se)}var vr=18,Rr=.95047,Gr=1,Yr=1.08883,Xr=yr.prototype=new Si;Xr.brighter=function(V){return new yr(Math.min(100,this.l+vr*(arguments.length?V:1)),this.a,this.b)},Xr.darker=function(V){return new yr(Math.max(0,this.l-vr*(arguments.length?V:1)),this.a,this.b)},Xr.rgb=function(){return on(this.l,this.a,this.b)};function on(V,J,se){var xe=(V+16)/116,be=xe+J/500,Ae=xe-se/200;return be=Vi(be)*Rr,xe=Vi(xe)*Gr,Ae=Vi(Ae)*Yr,new Xi(Zi(3.2404542*be-1.5371385*xe-.4985314*Ae),Zi(-.969266*be+1.8760108*xe+.041556*Ae),Zi(.0556434*be-.2040259*xe+1.0572252*Ae))}function wn(V,J,se){return V>0?new mt(Math.atan2(se,J)*it,Math.sqrt(J*J+se*se),V):new mt(NaN,NaN,V)}function Vi(V){return V>.206893034?V*V*V:(V-4/29)/7.787037}function vi(V){return V>.008856?Math.pow(V,1/3):7.787037*V+4/29}function Zi(V){return Math.round(255*(V<=.00304?12.92*V:1.055*Math.pow(V,1/2.4)-.055))}e.rgb=Xi;function Xi(V,J,se){return this instanceof Xi?(this.r=~~V,this.g=~~J,void(this.b=~~se)):arguments.length<2?V instanceof Xi?new Xi(V.r,V.g,V.b):Qi(""+V,Xi,ut):new Xi(V,J,se)}function ta(V){return new Xi(V>>16,V>>8&255,V&255)}function Ya(V){return ta(V)+""}var Pi=Xi.prototype=new Si;Pi.brighter=function(V){V=Math.pow(.7,arguments.length?V:1);var J=this.r,se=this.g,xe=this.b,be=30;return!J&&!se&&!xe?new Xi(be,be,be):(J&&J<be&&(J=be),se&&se<be&&(se=be),xe&&xe<be&&(xe=be),new Xi(Math.min(255,J/V),Math.min(255,se/V),Math.min(255,xe/V)))},Pi.darker=function(V){return V=Math.pow(.7,arguments.length?V:1),new Xi(V*this.r,V*this.g,V*this.b)},Pi.hsl=function(){return ya(this.r,this.g,this.b)},Pi.toString=function(){return"#"+Bn(this.r)+Bn(this.g)+Bn(this.b)};function Bn(V){return V<16?"0"+Math.max(0,V).toString(16):Math.min(255,V).toString(16)}function Qi(V,J,se){var xe=0,be=0,Ae=0,Ge,Pe,tt;if(Ge=/([a-z]+)\((.*)\)/.exec(V=V.toLowerCase()),Ge)switch(Pe=Ge[2].split(","),Ge[1]){case"hsl":return se(parseFloat(Pe[0]),parseFloat(Pe[1])/100,parseFloat(Pe[2])/100);case"rgb":return J(Bt(Pe[0]),Bt(Pe[1]),Bt(Pe[2]))}return(tt=ur.get(V))?J(tt.r,tt.g,tt.b):(V!=null&&V.charAt(0)==="#"&&!isNaN(tt=parseInt(V.slice(1),16))&&(V.length===4?(xe=(tt&3840)>>4,xe=xe>>4|xe,be=tt&240,be=be>>4|be,Ae=tt&15,Ae=Ae<<4|Ae):V.length===7&&(xe=(tt&16711680)>>16,be=(tt&65280)>>8,Ae=tt&255)),J(xe,be,Ae))}function ya(V,J,se){var xe=Math.min(V/=255,J/=255,se/=255),be=Math.max(V,J,se),Ae=be-xe,Ge,Pe,tt=(be+xe)/2;return Ae?(Pe=tt<.5?Ae/(be+xe):Ae/(2-be-xe),V==be?Ge=(J-se)/Ae+(J<se?6:0):J==be?Ge=(se-V)/Ae+2:Ge=(V-J)/Ae+4,Ge*=60):(Ge=NaN,Pe=tt>0&&tt<1?0:Ge),new nt(Ge,Pe,tt)}function Nn(V,J,se){V=je(V),J=je(J),se=je(se);var xe=vi((.4124564*V+.3575761*J+.1804375*se)/Rr),be=vi((.2126729*V+.7151522*J+.072175*se)/Gr),Ae=vi((.0193339*V+.119192*J+.9503041*se)/Yr);return yr(116*be-16,500*(xe-be),200*(be-Ae))}function je(V){return(V/=255)<=.04045?V/12.92:Math.pow((V+.055)/1.055,2.4)}function Bt(V){var J=parseFloat(V);return V.charAt(V.length-1)==="%"?Math.round(J*2.55):J}var ur=e.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ur.forEach(function(V,J){ur.set(V,ta(J))});function br(V){return typeof V=="function"?V:function(){return V}}e.functor=br,e.xhr=Jr(O);function Jr(V){return function(J,se,xe){return arguments.length===2&&typeof se=="function"&&(xe=se,se=null),ln(J,se,V,xe)}}function ln(V,J,se,xe){var be={},Ae=e.dispatch("beforesend","progress","load","error"),Ge={},Pe=new XMLHttpRequest,tt=null;self.XDomainRequest&&!("withCredentials"in Pe)&&/^(http(s)?:)?\/\//.test(V)&&(Pe=new XDomainRequest),"onload"in Pe?Pe.onload=Pe.onerror=Mt:Pe.onreadystatechange=function(){Pe.readyState>3&&Mt()};function Mt(){var Et=Pe.status,rr;if(!Et&&Cr(Pe)||Et>=200&&Et<300||Et===304){try{rr=se.call(be,Pe)}catch(tr){Ae.error.call(be,tr);return}Ae.load.call(be,rr)}else Ae.error.call(be,Pe)}return Pe.onprogress=function(Et){var rr=e.event;e.event=Et;try{Ae.progress.call(be,Pe)}finally{e.event=rr}},be.header=function(Et,rr){return Et=(Et+"").toLowerCase(),arguments.length<2?Ge[Et]:(rr==null?delete Ge[Et]:Ge[Et]=rr+"",be)},be.mimeType=function(Et){return arguments.length?(J=Et==null?null:Et+"",be):J},be.responseType=function(Et){return arguments.length?(tt=Et,be):tt},be.response=function(Et){return se=Et,be},["get","post"].forEach(function(Et){be[Et]=function(){return be.send.apply(be,[Et].concat(r(arguments)))}}),be.send=function(Et,rr,tr){if(arguments.length===2&&typeof rr=="function"&&(tr=rr,rr=null),Pe.open(Et,V,!0),J!=null&&!("accept"in Ge)&&(Ge.accept=J+",*/*"),Pe.setRequestHeader)for(var Tr in Ge)Pe.setRequestHeader(Tr,Ge[Tr]);return J!=null&&Pe.overrideMimeType&&Pe.overrideMimeType(J),tt!=null&&(Pe.responseType=tt),tr!=null&&be.on("error",tr).on("load",function(Er){tr(null,Er)}),Ae.beforesend.call(be,Pe),Pe.send(rr==null?null:rr),be},be.abort=function(){return Pe.abort(),be},e.rebind(be,Ae,"on"),xe==null?be:be.get(yn(xe))}function yn(V){return V.length===1?function(J,se){V(J==null?se:null)}:V}function Cr(V){var J=V.responseType;return J&&J!=="text"?V.response:V.responseText}e.dsv=function(V,J){var se=new RegExp('["'+V+`
]`),xe=V.charCodeAt(0);function be(Mt,Et,rr){arguments.length<3&&(rr=Et,Et=null);var tr=ln(Mt,J,Et==null?Ae:Ge(Et),rr);return tr.row=function(Tr){return arguments.length?tr.response((Et=Tr)==null?Ae:Ge(Tr)):Et},tr}function Ae(Mt){return be.parse(Mt.responseText)}function Ge(Mt){return function(Et){return be.parse(Et.responseText,Mt)}}be.parse=function(Mt,Et){var rr;return be.parseRows(Mt,function(tr,Tr){if(rr)return rr(tr,Tr-1);var Er=function(ir){for(var gr={},wr=tr.length,Pr=0;Pr<wr;++Pr)gr[tr[Pr]]=ir[Pr];return gr};rr=Et?function(ir,gr){return Et(Er(ir),gr)}:Er})},be.parseRows=function(Mt,Et){var rr={},tr={},Tr=[],Er=Mt.length,ir=0,gr=0,wr,Pr;function kr(){if(ir>=Er)return tr;if(Pr)return Pr=!1,rr;var mn=ir;if(Mt.charCodeAt(mn)===34){for(var Tn=mn;Tn++<Er;)if(Mt.charCodeAt(Tn)===34){if(Mt.charCodeAt(Tn+1)!==34)break;++Tn}ir=Tn+2;var zn=Mt.charCodeAt(Tn+1);return zn===13?(Pr=!0,Mt.charCodeAt(Tn+2)===10&&++ir):zn===10&&(Pr=!0),Mt.slice(mn+1,Tn).replace(/""/g,'"')}for(;ir<Er;){var zn=Mt.charCodeAt(ir++),Kn=1;if(zn===10)Pr=!0;else if(zn===13)Pr=!0,Mt.charCodeAt(ir)===10&&(++ir,++Kn);else if(zn!==xe)continue;return Mt.slice(mn,ir-Kn)}return Mt.slice(mn)}for(;(wr=kr())!==tr;){for(var pr=[];wr!==rr&&wr!==tr;)pr.push(wr),wr=kr();Et&&(pr=Et(pr,gr++))==null||Tr.push(pr)}return Tr},be.format=function(Mt){if(Array.isArray(Mt[0]))return be.formatRows(Mt);var Et=new q,rr=[];return Mt.forEach(function(tr){for(var Tr in tr)Et.has(Tr)||rr.push(Et.add(Tr))}),[rr.map(tt).join(V)].concat(Mt.map(function(tr){return rr.map(function(Tr){return tt(tr[Tr])}).join(V)})).join(`
`)},be.formatRows=function(Mt){return Mt.map(Pe).join(`
`)};function Pe(Mt){return Mt.map(tt).join(V)}function tt(Mt){return se.test(Mt)?'"'+Mt.replace(/\"/g,'""')+'"':Mt}return be},e.csv=e.dsv(",","text/csv"),e.tsv=e.dsv("	","text/tab-separated-values");var vn,gi,Wn,zi,fa=this[B(this,"requestAnimationFrame")]||function(V){setTimeout(V,17)};e.timer=function(){to.apply(this,arguments)};function to(V,J,se){var xe=arguments.length;xe<2&&(J=0),xe<3&&(se=Date.now());var be=se+J,Ae={c:V,t:be,n:null};return gi?gi.n=Ae:vn=Ae,gi=Ae,Wn||(zi=clearTimeout(zi),Wn=1,fa(ma)),Ae}function ma(){var V=uo(),J=Ka()-V;J>24?(isFinite(J)&&(clearTimeout(zi),zi=setTimeout(ma,J)),Wn=0):(Wn=1,fa(ma))}e.timer.flush=function(){uo(),Ka()};function uo(){for(var V=Date.now(),J=vn;J;)V>=J.t&&J.c(V-J.t)&&(J.c=null),J=J.n;return V}function Ka(){for(var V,J=vn,se=1/0;J;)J.c?(J.t<se&&(se=J.t),J=(V=J).n):J=V?V.n=J.n:vn=J.n;return gi=V,se}e.round=function(V,J){return J?Math.round(V*(J=Math.pow(10,J)))/J:Math.round(V)},e.geom={};function jo(V){return V[0]}function Ho(V){return V[1]}e.geom.hull=function(V){var J=jo,se=Ho;if(arguments.length)return xe(V);function xe(be){if(be.length<3)return[];var Ae=br(J),Ge=br(se),Pe,tt=be.length,Mt=[],Et=[];for(Pe=0;Pe<tt;Pe++)Mt.push([+Ae.call(this,be[Pe],Pe),+Ge.call(this,be[Pe],Pe),Pe]);for(Mt.sort(ss),Pe=0;Pe<tt;Pe++)Et.push([Mt[Pe][0],-Mt[Pe][1]]);var rr=xs(Mt),tr=xs(Et),Tr=tr[0]===rr[0],Er=tr[tr.length-1]===rr[rr.length-1],ir=[];for(Pe=rr.length-1;Pe>=0;--Pe)ir.push(be[Mt[rr[Pe]][2]]);for(Pe=+Tr;Pe<tr.length-Er;++Pe)ir.push(be[Mt[tr[Pe]][2]]);return ir}return xe.x=function(be){return arguments.length?(J=be,xe):J},xe.y=function(be){return arguments.length?(se=be,xe):se},xe};function xs(V){for(var J=V.length,se=[0,1],xe=2,be=2;be<J;be++){for(;xe>1&&Wt(V[se[xe-2]],V[se[xe-1]],V[be])<=0;)--xe;se[xe++]=be}return se.slice(0,xe)}function ss(V,J){return V[0]-J[0]||V[1]-J[1]}e.geom.polygon=function(V){return Z(V,al),V};var al=e.geom.polygon.prototype=[];al.area=function(){for(var V=-1,J=this.length,se,xe=this[J-1],be=0;++V<J;)se=xe,xe=this[V],be+=se[1]*xe[0]-se[0]*xe[1];return be*.5},al.centroid=function(V){var J=-1,se=this.length,xe=0,be=0,Ae,Ge=this[se-1],Pe;for(arguments.length||(V=-1/(6*this.area()));++J<se;)Ae=Ge,Ge=this[J],Pe=Ae[0]*Ge[1]-Ge[0]*Ae[1],xe+=(Ae[0]+Ge[0])*Pe,be+=(Ae[1]+Ge[1])*Pe;return[xe*V,be*V]},al.clip=function(V){for(var J,se=Co(V),xe=-1,be=this.length-Co(this),Ae,Ge,Pe=this[be-1],tt,Mt,Et;++xe<be;){for(J=V.slice(),V.length=0,tt=this[xe],Mt=J[(Ge=J.length-se)-1],Ae=-1;++Ae<Ge;)Et=J[Ae],so(Et,Pe,tt)?(so(Mt,Pe,tt)||V.push(vs(Mt,Et,Pe,tt)),V.push(Et)):so(Mt,Pe,tt)&&V.push(vs(Mt,Et,Pe,tt)),Mt=Et;se&&V.push(V[0]),Pe=tt}return V};function so(V,J,se){return(se[0]-J[0])*(V[1]-J[1])<(se[1]-J[1])*(V[0]-J[0])}function vs(V,J,se,xe){var be=V[0],Ae=se[0],Ge=J[0]-be,Pe=xe[0]-Ae,tt=V[1],Mt=se[1],Et=J[1]-tt,rr=xe[1]-Mt,tr=(Pe*(tt-Mt)-rr*(be-Ae))/(rr*Ge-Pe*Et);return[be+tr*Ge,tt+tr*Et]}function Co(V){var J=V[0],se=V[V.length-1];return!(J[0]-se[0]||J[1]-se[1])}var ds,$o,es,Oa=[],vo,Al,ru=[];function Vu(){Lo(this),this.edge=this.site=this.circle=null}function ls(V){var J=Oa.pop()||new Vu;return J.site=V,J}function dn(V){Aa(V),es.remove(V),Oa.push(V),Lo(V)}function wi(V){var J=V.circle,se=J.x,xe=J.cy,be={x:se,y:xe},Ae=V.P,Ge=V.N,Pe=[V];dn(V);for(var tt=Ae;tt.circle&&p(se-tt.circle.x)<kt&&p(xe-tt.circle.cy)<kt;)Ae=tt.P,Pe.unshift(tt),dn(tt),tt=Ae;Pe.unshift(tt),Aa(tt);for(var Mt=Ge;Mt.circle&&p(se-Mt.circle.x)<kt&&p(xe-Mt.circle.cy)<kt;)Ge=Mt.N,Pe.push(Mt),dn(Mt),Mt=Ge;Pe.push(Mt),Aa(Mt);var Et=Pe.length,rr;for(rr=1;rr<Et;++rr)Mt=Pe[rr],tt=Pe[rr-1],pl(Mt.edge,tt.site,Mt.site,be);tt=Pe[0],Mt=Pe[Et-1],Mt.edge=Ff(tt.site,Mt.site,null,be),oi(tt),oi(Mt)}function sc(V){for(var J=V.x,se=V.y,xe,be,Ae,Ge,Pe=es._;Pe;)if(Ae=Pl(Pe,se)-J,Ae>kt)Pe=Pe.L;else if(Ge=J-us(Pe,se),Ge>kt){if(!Pe.R){xe=Pe;break}Pe=Pe.R}else{Ae>-kt?(xe=Pe.P,be=Pe):Ge>-kt?(xe=Pe,be=Pe.N):xe=be=Pe;break}var tt=ls(V);if(es.insert(xe,tt),!(!xe&&!be)){if(xe===be){Aa(xe),be=ls(xe.site),es.insert(tt,be),tt.edge=be.edge=Ff(xe.site,tt.site),oi(xe),oi(be);return}if(!be){tt.edge=Ff(xe.site,tt.site);return}Aa(xe),Aa(be);var Mt=xe.site,Et=Mt.x,rr=Mt.y,tr=V.x-Et,Tr=V.y-rr,Er=be.site,ir=Er.x-Et,gr=Er.y-rr,wr=2*(tr*gr-Tr*ir),Pr=tr*tr+Tr*Tr,kr=ir*ir+gr*gr,pr={x:(gr*Pr-Tr*kr)/wr+Et,y:(tr*kr-ir*Pr)/wr+rr};pl(be.edge,Mt,Er,pr),tt.edge=Ff(Mt,V,null,pr),be.edge=Ff(V,Er,null,pr),oi(xe),oi(be)}}function Pl(V,J){var se=V.site,xe=se.x,be=se.y,Ae=be-J;if(!Ae)return xe;var Ge=V.P;if(!Ge)return-1/0;se=Ge.site;var Pe=se.x,tt=se.y,Mt=tt-J;if(!Mt)return Pe;var Et=Pe-xe,rr=1/Ae-1/Mt,tr=Et/Mt;return rr?(-tr+Math.sqrt(tr*tr-2*rr*(Et*Et/(-2*Mt)-tt+Mt/2+be-Ae/2)))/rr+xe:(xe+Pe)/2}function us(V,J){var se=V.N;if(se)return Pl(se,J);var xe=V.site;return xe.y===J?xe.x:1/0}function dl(V){this.site=V,this.edges=[]}dl.prototype.prepare=function(){for(var V=this.edges,J=V.length,se;J--;)se=V[J].edge,(!se.b||!se.a)&&V.splice(J,1);return V.sort(Rl),V.length};function ts(V){for(var J=V[0][0],se=V[1][0],xe=V[0][1],be=V[1][1],Ae,Ge,Pe,tt,Mt=$o,Et=Mt.length,rr,tr,Tr,Er,ir,gr;Et--;)if(rr=Mt[Et],!(!rr||!rr.prepare()))for(Tr=rr.edges,Er=Tr.length,tr=0;tr<Er;)gr=Tr[tr].end(),Pe=gr.x,tt=gr.y,ir=Tr[++tr%Er].start(),Ae=ir.x,Ge=ir.y,(p(Pe-Ae)>kt||p(tt-Ge)>kt)&&(Tr.splice(tr,0,new hf(jc(rr.site,gr,p(Pe-J)<kt&&be-tt>kt?{x:J,y:p(Ae-J)<kt?Ge:be}:p(tt-be)<kt&&se-Pe>kt?{x:p(Ge-be)<kt?Ae:se,y:be}:p(Pe-se)<kt&&tt-xe>kt?{x:se,y:p(Ae-se)<kt?Ge:xe}:p(tt-xe)<kt&&Pe-J>kt?{x:p(Ge-xe)<kt?Ae:J,y:xe}:null),rr.site,null)),++Er)}function Rl(V,J){return J.angle-V.angle}function wu(){Lo(this),this.x=this.y=this.arc=this.site=this.cy=null}function oi(V){var J=V.P,se=V.N;if(!(!J||!se)){var xe=J.site,be=V.site,Ae=se.site;if(xe!==Ae){var Ge=be.x,Pe=be.y,tt=xe.x-Ge,Mt=xe.y-Pe,Et=Ae.x-Ge,gr=Ae.y-Pe,rr=2*(tt*gr-Mt*Et);if(!(rr>=-Je)){var tr=tt*tt+Mt*Mt,Tr=Et*Et+gr*gr,Er=(gr*tr-Mt*Tr)/rr,ir=(tt*Tr-Et*tr)/rr,gr=ir+Pe,wr=ru.pop()||new wu;wr.arc=V,wr.site=be,wr.x=Er+Ge,wr.y=gr+Math.sqrt(Er*Er+ir*ir),wr.cy=gr,V.circle=wr;for(var Pr=null,kr=Al._;kr;)if(wr.y<kr.y||wr.y===kr.y&&wr.x<=kr.x)if(kr.L)kr=kr.L;else{Pr=kr.P;break}else if(kr.R)kr=kr.R;else{Pr=kr;break}Al.insert(Pr,wr),Pr||(vo=wr)}}}}function Aa(V){var J=V.circle;J&&(J.P||(vo=J.N),Al.remove(J),ru.push(J),Lo(J),V.circle=null)}function Ca(V,J,se,xe){return function(be){var Ae=be.a,Ge=be.b,Pe=Ae.x,tt=Ae.y,Mt=Ge.x,Et=Ge.y,rr=0,tr=1,Tr=Mt-Pe,Er=Et-tt,ir;if(ir=V-Pe,!(!Tr&&ir>0)){if(ir/=Tr,Tr<0){if(ir<rr)return;ir<tr&&(tr=ir)}else if(Tr>0){if(ir>tr)return;ir>rr&&(rr=ir)}if(ir=se-Pe,!(!Tr&&ir<0)){if(ir/=Tr,Tr<0){if(ir>tr)return;ir>rr&&(rr=ir)}else if(Tr>0){if(ir<rr)return;ir<tr&&(tr=ir)}if(ir=J-tt,!(!Er&&ir>0)){if(ir/=Er,Er<0){if(ir<rr)return;ir<tr&&(tr=ir)}else if(Er>0){if(ir>tr)return;ir>rr&&(rr=ir)}if(ir=xe-tt,!(!Er&&ir<0)){if(ir/=Er,Er<0){if(ir>tr)return;ir>rr&&(rr=ir)}else if(Er>0){if(ir<rr)return;ir<tr&&(tr=ir)}return rr>0&&(be.a={x:Pe+rr*Tr,y:tt+rr*Er}),tr<1&&(be.b={x:Pe+tr*Tr,y:tt+tr*Er}),be}}}}}}function Fs(V){for(var J=ds,se=Ca(V[0][0],V[0][1],V[1][0],V[1][1]),xe=J.length,be;xe--;)be=J[xe],(!If(be,V)||!se(be)||p(be.a.x-be.b.x)<kt&&p(be.a.y-be.b.y)<kt)&&(be.a=be.b=null,J.splice(xe,1))}function If(V,J){var se=V.b;if(se)return!0;var xe=V.a,be=J[0][0],Ae=J[1][0],Ge=J[0][1],Pe=J[1][1],tt=V.l,Mt=V.r,Et=tt.x,rr=tt.y,tr=Mt.x,Tr=Mt.y,Er=(Et+tr)/2,ir=(rr+Tr)/2,gr,wr;if(Tr===rr){if(Er<be||Er>=Ae)return;if(Et>tr){if(!xe)xe={x:Er,y:Ge};else if(xe.y>=Pe)return;se={x:Er,y:Pe}}else{if(!xe)xe={x:Er,y:Pe};else if(xe.y<Ge)return;se={x:Er,y:Ge}}}else if(gr=(Et-tr)/(Tr-rr),wr=ir-gr*Er,gr<-1||gr>1)if(Et>tr){if(!xe)xe={x:(Ge-wr)/gr,y:Ge};else if(xe.y>=Pe)return;se={x:(Pe-wr)/gr,y:Pe}}else{if(!xe)xe={x:(Pe-wr)/gr,y:Pe};else if(xe.y<Ge)return;se={x:(Ge-wr)/gr,y:Ge}}else if(rr<Tr){if(!xe)xe={x:be,y:gr*be+wr};else if(xe.x>=Ae)return;se={x:Ae,y:gr*Ae+wr}}else{if(!xe)xe={x:Ae,y:gr*Ae+wr};else if(xe.x<be)return;se={x:be,y:gr*be+wr}}return V.a=xe,V.b=se,!0}function Ma(V,J){this.l=V,this.r=J,this.a=this.b=null}function Ff(V,J,se,xe){var be=new Ma(V,J);return ds.push(be),se&&pl(be,V,J,se),xe&&pl(be,J,V,xe),$o[V.i].edges.push(new hf(be,V,J)),$o[J.i].edges.push(new hf(be,J,V)),be}function jc(V,J,se){var xe=new Ma(V,null);return xe.a=J,xe.b=se,ds.push(xe),xe}function pl(V,J,se,xe){!V.a&&!V.b?(V.a=xe,V.l=J,V.r=se):V.l===se?V.b=xe:V.a=xe}function hf(V,J,se){var xe=V.a,be=V.b;this.edge=V,this.site=J,this.angle=se?Math.atan2(se.y-J.y,se.x-J.x):V.l===J?Math.atan2(be.x-xe.x,xe.y-be.y):Math.atan2(xe.x-be.x,be.y-xe.y)}hf.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function tl(){this._=null}function Lo(V){V.U=V.C=V.L=V.R=V.P=V.N=null}tl.prototype={insert:function(V,J){var se,xe,be;if(V){if(J.P=V,J.N=V.N,V.N&&(V.N.P=J),V.N=J,V.R){for(V=V.R;V.L;)V=V.L;V.L=J}else V.R=J;se=V}else this._?(V=Sh(this._),J.P=null,J.N=V,V.P=V.L=J,se=V):(J.P=J.N=null,this._=J,se=null);for(J.L=J.R=null,J.U=se,J.C=!0,V=J;se&&se.C;)xe=se.U,se===xe.L?(be=xe.R,be&&be.C?(se.C=be.C=!1,xe.C=!0,V=xe):(V===se.R&&(nu(this,se),V=se,se=V.U),se.C=!1,xe.C=!0,Tu(this,xe))):(be=xe.L,be&&be.C?(se.C=be.C=!1,xe.C=!0,V=xe):(V===se.L&&(Tu(this,se),V=se,se=V.U),se.C=!1,xe.C=!0,nu(this,xe))),se=V.U;this._.C=!1},remove:function(V){V.N&&(V.N.P=V.P),V.P&&(V.P.N=V.N),V.N=V.P=null;var J=V.U,se,xe=V.L,be=V.R,Ae,Ge;if(xe?be?Ae=Sh(be):Ae=xe:Ae=be,J?J.L===V?J.L=Ae:J.R=Ae:this._=Ae,xe&&be?(Ge=Ae.C,Ae.C=V.C,Ae.L=xe,xe.U=Ae,Ae!==be?(J=Ae.U,Ae.U=V.U,V=Ae.R,J.L=V,Ae.R=be,be.U=Ae):(Ae.U=J,J=Ae,V=Ae.R)):(Ge=V.C,V=Ae),V&&(V.U=J),!Ge){if(V&&V.C){V.C=!1;return}do{if(V===this._)break;if(V===J.L){if(se=J.R,se.C&&(se.C=!1,J.C=!0,nu(this,J),se=J.R),se.L&&se.L.C||se.R&&se.R.C){(!se.R||!se.R.C)&&(se.L.C=!1,se.C=!0,Tu(this,se),se=J.R),se.C=J.C,J.C=se.R.C=!1,nu(this,J),V=this._;break}}else if(se=J.L,se.C&&(se.C=!1,J.C=!0,Tu(this,J),se=J.L),se.L&&se.L.C||se.R&&se.R.C){(!se.L||!se.L.C)&&(se.R.C=!1,se.C=!0,nu(this,se),se=J.L),se.C=J.C,J.C=se.L.C=!1,Tu(this,J),V=this._;break}se.C=!0,V=J,J=J.U}while(!V.C);V&&(V.C=!1)}}};function nu(V,J){var se=J,xe=J.R,be=se.U;be?be.L===se?be.L=xe:be.R=xe:V._=xe,xe.U=be,se.U=xe,se.R=xe.L,se.R&&(se.R.U=se),xe.L=se}function Tu(V,J){var se=J,xe=J.L,be=se.U;be?be.L===se?be.L=xe:be.R=xe:V._=xe,xe.U=be,se.U=xe,se.L=xe.R,se.L&&(se.L.U=se),xe.R=se}function Sh(V){for(;V.L;)V=V.L;return V}function Hu(V,J){var se=V.sort(ov).pop(),xe,be,Ae;for(ds=[],$o=new Array(V.length),es=new tl,Al=new tl;;)if(Ae=vo,se&&(!Ae||se.y<Ae.y||se.y===Ae.y&&se.x<Ae.x))(se.x!==xe||se.y!==be)&&($o[se.i]=new dl(se),sc(se),xe=se.x,be=se.y),se=V.pop();else if(Ae)wi(Ae.arc);else break;J&&(Fs(J),ts(J));var Ge={cells:$o,edges:ds};return es=Al=ds=$o=null,Ge}function ov(V,J){return J.y-V.y||J.x-V.x}e.geom.voronoi=function(V){var J=jo,se=Ho,xe=J,be=se,Ae=Sc;if(V)return Ge(V);function Ge(tt){var Mt=new Array(tt.length),Et=Ae[0][0],rr=Ae[0][1],tr=Ae[1][0],Tr=Ae[1][1];return Hu(Pe(tt),Ae).cells.forEach(function(Er,ir){var gr=Er.edges,wr=Er.site,Pr=Mt[ir]=gr.length?gr.map(function(kr){var pr=kr.start();return[pr.x,pr.y]}):wr.x>=Et&&wr.x<=tr&&wr.y>=rr&&wr.y<=Tr?[[Et,Tr],[tr,Tr],[tr,rr],[Et,rr]]:[];Pr.point=tt[ir]}),Mt}function Pe(tt){return tt.map(function(Mt,Et){return{x:Math.round(xe(Mt,Et)/kt)*kt,y:Math.round(be(Mt,Et)/kt)*kt,i:Et}})}return Ge.links=function(tt){return Hu(Pe(tt)).edges.filter(function(Mt){return Mt.l&&Mt.r}).map(function(Mt){return{source:tt[Mt.l.i],target:tt[Mt.r.i]}})},Ge.triangles=function(tt){var Mt=[];return Hu(Pe(tt)).cells.forEach(function(Et,rr){for(var tr=Et.site,Tr=Et.edges.sort(Rl),Er=-1,ir=Tr.length,gr,wr,Pr=Tr[ir-1].edge,kr=Pr.l===tr?Pr.r:Pr.l;++Er<ir;)gr=Pr,wr=kr,Pr=Tr[Er].edge,kr=Pr.l===tr?Pr.r:Pr.l,rr<wr.i&&rr<kr.i&&fo(tr,wr,kr)<0&&Mt.push([tt[rr],tt[wr.i],tt[kr.i]])}),Mt},Ge.x=function(tt){return arguments.length?(xe=br(J=tt),Ge):J},Ge.y=function(tt){return arguments.length?(be=br(se=tt),Ge):se},Ge.clipExtent=function(tt){return arguments.length?(Ae=tt==null?Sc:tt,Ge):Ae===Sc?null:Ae},Ge.size=function(tt){return arguments.length?Ge.clipExtent(tt&&[[0,0],tt]):Ae===Sc?null:Ae&&Ae[1]},Ge};var Sc=[[-1e6,-1e6],[1e6,1e6]];function fo(V,J,se){return(V.x-se.x)*(J.y-V.y)-(V.x-J.x)*(se.y-V.y)}e.geom.delaunay=function(V){return e.geom.voronoi().triangles(V)},e.geom.quadtree=function(V,J,se,xe,be){var Ae=jo,Ge=Ho,Pe;if(Pe=arguments.length)return Ae=qf,Ge=Eh,Pe===3&&(be=se,xe=J,se=J=0),tt(V);function tt(Mt){var Et,rr=br(Ae),tr=br(Ge),Tr,Er,ir,gr,wr,Pr,kr,pr;if(J!=null)wr=J,Pr=se,kr=xe,pr=be;else if(kr=pr=-(wr=Pr=1/0),Tr=[],Er=[],gr=Mt.length,Pe)for(ir=0;ir<gr;++ir)Et=Mt[ir],Et.x<wr&&(wr=Et.x),Et.y<Pr&&(Pr=Et.y),Et.x>kr&&(kr=Et.x),Et.y>pr&&(pr=Et.y),Tr.push(Et.x),Er.push(Et.y);else for(ir=0;ir<gr;++ir){var mn=+rr(Et=Mt[ir],ir),Tn=+tr(Et,ir);mn<wr&&(wr=mn),Tn<Pr&&(Pr=Tn),mn>kr&&(kr=mn),Tn>pr&&(pr=Tn),Tr.push(mn),Er.push(Tn)}var zn=kr-wr,Kn=pr-Pr;zn>Kn?pr=Pr+zn:kr=wr+Kn;function Ci(Gi,va,mo,Do,So,kn,da,Sa){if(!(isNaN(mo)||isNaN(Do)))if(Gi.leaf){var La=Gi.x,As=Gi.y;if(La!=null)if(p(La-mo)+p(As-Do)<.01)qi(Gi,va,mo,Do,So,kn,da,Sa);else{var Gs=Gi.point;Gi.x=Gi.y=Gi.point=null,qi(Gi,Gs,La,As,So,kn,da,Sa),qi(Gi,va,mo,Do,So,kn,da,Sa)}else Gi.x=mo,Gi.y=Do,Gi.point=va}else qi(Gi,va,mo,Do,So,kn,da,Sa)}function qi(Gi,va,mo,Do,So,kn,da,Sa){var La=(So+da)*.5,As=(kn+Sa)*.5,Gs=mo>=La,ml=Do>=As,fs=ml<<1|Gs;Gi.leaf=!1,Gi=Gi.nodes[fs]||(Gi.nodes[fs]=Us()),Gs?So=La:da=La,ml?kn=As:Sa=As,Ci(Gi,va,mo,Do,So,kn,da,Sa)}var xa=Us();if(xa.add=function(Gi){Ci(xa,Gi,+rr(Gi,++ir),+tr(Gi,ir),wr,Pr,kr,pr)},xa.visit=function(Gi){_s(Gi,xa,wr,Pr,kr,pr)},xa.find=function(Gi){return kh(xa,Gi[0],Gi[1],wr,Pr,kr,pr)},ir=-1,J==null){for(;++ir<gr;)Ci(xa,Mt[ir],Tr[ir],Er[ir],wr,Pr,kr,pr);--ir}else Mt.forEach(xa.add);return Tr=Er=Mt=Et=null,xa}return tt.x=function(Mt){return arguments.length?(Ae=Mt,tt):Ae},tt.y=function(Mt){return arguments.length?(Ge=Mt,tt):Ge},tt.extent=function(Mt){return arguments.length?(Mt==null?J=se=xe=be=null:(J=+Mt[0][0],se=+Mt[0][1],xe=+Mt[1][0],be=+Mt[1][1]),tt):J==null?null:[[J,se],[xe,be]]},tt.size=function(Mt){return arguments.length?(Mt==null?J=se=xe=be=null:(J=se=0,xe=+Mt[0],be=+Mt[1]),tt):J==null?null:[xe-J,be-se]},tt};function qf(V){return V.x}function Eh(V){return V.y}function Us(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function _s(V,J,se,xe,be,Ae){if(!V(J,se,xe,be,Ae)){var Ge=(se+be)*.5,Pe=(xe+Ae)*.5,tt=J.nodes;tt[0]&&_s(V,tt[0],se,xe,Ge,Pe),tt[1]&&_s(V,tt[1],Ge,xe,be,Pe),tt[2]&&_s(V,tt[2],se,Pe,Ge,Ae),tt[3]&&_s(V,tt[3],Ge,Pe,be,Ae)}}function kh(V,J,se,xe,be,Ae,Ge){var Pe=1/0,tt;return function Mt(Et,rr,tr,Tr,Er){if(!(rr>Ae||tr>Ge||Tr<xe||Er<be)){if(ir=Et.point){var ir,gr=J-Et.x,wr=se-Et.y,Pr=gr*gr+wr*wr;if(Pr<Pe){var kr=Math.sqrt(Pe=Pr);xe=J-kr,be=se-kr,Ae=J+kr,Ge=se+kr,tt=ir}}for(var pr=Et.nodes,mn=(rr+Tr)*.5,Tn=(tr+Er)*.5,zn=J>=mn,Kn=se>=Tn,Ci=Kn<<1|zn,qi=Ci+4;Ci<qi;++Ci)if(Et=pr[Ci&3])switch(Ci&3){case 0:Mt(Et,rr,tr,mn,Tn);break;case 1:Mt(Et,mn,tr,Tr,Tn);break;case 2:Mt(Et,rr,Tn,mn,Er);break;case 3:Mt(Et,mn,Tn,Tr,Er);break}}}(V,xe,be,Ae,Ge),tt}e.interpolateRgb=vf;function vf(V,J){V=e.rgb(V),J=e.rgb(J);var se=V.r,xe=V.g,be=V.b,Ae=J.r-se,Ge=J.g-xe,Pe=J.b-be;return function(tt){return"#"+Bn(Math.round(se+Ae*tt))+Bn(Math.round(xe+Ge*tt))+Bn(Math.round(be+Pe*tt))}}e.interpolateObject=Mo;function Mo(V,J){var se={},xe={},be;for(be in V)be in J?se[be]=qs(V[be],J[be]):xe[be]=V[be];for(be in J)be in V||(xe[be]=J[be]);return function(Ae){for(be in se)xe[be]=se[be](Ae);return xe}}e.interpolateNumber=ps;function ps(V,J){return V=+V,J=+J,function(se){return V*(1-se)+J*se}}e.interpolateString=yo;function yo(V,J){var se=Po.lastIndex=Ec.lastIndex=0,xe,be,Ae,Ge=-1,Pe=[],tt=[];for(V=V+"",J=J+"";(xe=Po.exec(V))&&(be=Ec.exec(J));)(Ae=be.index)>se&&(Ae=J.slice(se,Ae),Pe[Ge]?Pe[Ge]+=Ae:Pe[++Ge]=Ae),(xe=xe[0])===(be=be[0])?Pe[Ge]?Pe[Ge]+=be:Pe[++Ge]=be:(Pe[++Ge]=null,tt.push({i:Ge,x:ps(xe,be)})),se=Ec.lastIndex;return se<J.length&&(Ae=J.slice(se),Pe[Ge]?Pe[Ge]+=Ae:Pe[++Ge]=Ae),Pe.length<2?tt[0]?(J=tt[0].x,function(Mt){return J(Mt)+""}):function(){return J}:(J=tt.length,function(Mt){for(var Et=0,rr;Et<J;++Et)Pe[(rr=tt[Et]).i]=rr.x(Mt);return Pe.join("")})}var Po=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ec=new RegExp(Po.source,"g");e.interpolate=qs;function qs(V,J){for(var se=e.interpolators.length,xe;--se>=0&&!(xe=e.interpolators[se](V,J)););return xe}e.interpolators=[function(V,J){var se=typeof J;return(se==="string"?ur.has(J.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(J)?vf:yo:J instanceof Si?vf:Array.isArray(J)?Hl:se==="object"&&isNaN(J)?Mo:ps)(V,J)}],e.interpolateArray=Hl;function Hl(V,J){var se=[],xe=[],be=V.length,Ae=J.length,Ge=Math.min(V.length,J.length),Pe;for(Pe=0;Pe<Ge;++Pe)se.push(qs(V[Pe],J[Pe]));for(;Pe<be;++Pe)xe[Pe]=V[Pe];for(;Pe<Ae;++Pe)xe[Pe]=J[Pe];return function(tt){for(Pe=0;Pe<Ge;++Pe)xe[Pe]=se[Pe](tt);return xe}}var df=function(){return O},bd=e.map({linear:df,poly:sv,quad:function(){return zv},cubic:function(){return pf},sin:function(){return Ch},exp:function(){return lv},circle:function(){return Mu},elastic:Ov,back:uv,bounce:function(){return Lh}}),Au=e.map({in:O,out:Gl,"in-out":po,"out-in":function(V){return po(Gl(V))}});e.ease=function(V){var J=V.indexOf("-"),se=J>=0?V.slice(0,J):V,xe=J>=0?V.slice(J+1):"in";return se=bd.get(se)||df,xe=Au.get(xe)||O,Xp(xe(se.apply(null,t.call(arguments,1))))};function Xp(V){return function(J){return J<=0?0:J>=1?1:V(J)}}function Gl(V){return function(J){return 1-V(1-J)}}function po(V){return function(J){return .5*(J<.5?V(2*J):2-V(2-2*J))}}function zv(V){return V*V}function pf(V){return V*V*V}function Yl(V){if(V<=0)return 0;if(V>=1)return 1;var J=V*V,se=J*V;return 4*(V<.5?se:3*(V-J)+se-.75)}function sv(V){return function(J){return Math.pow(J,V)}}function Ch(V){return 1-Math.cos(V*pe)}function lv(V){return Math.pow(2,10*(V-1))}function Mu(V){return 1-Math.sqrt(1-V*V)}function Ov(V,J){var se;return arguments.length<2&&(J=.45),arguments.length?se=J/At*Math.asin(1/V):(V=1,se=J/4),function(xe){return 1+V*Math.pow(2,-10*xe)*Math.sin((xe-se)*At/J)}}function uv(V){return V||(V=1.70158),function(J){return J*J*((V+1)*J-V)}}function Lh(V){return V<1/2.75?7.5625*V*V:V<2/2.75?7.5625*(V-=1.5/2.75)*V+.75:V<2.5/2.75?7.5625*(V-=2.25/2.75)*V+.9375:7.5625*(V-=2.625/2.75)*V+.984375}e.interpolateHcl=fv;function fv(V,J){V=e.hcl(V),J=e.hcl(J);var se=V.h,xe=V.c,be=V.l,Ae=J.h-se,Ge=J.c-xe,Pe=J.l-be;return isNaN(Ge)&&(Ge=0,xe=isNaN(xe)?J.c:xe),isNaN(Ae)?(Ae=0,se=isNaN(se)?J.h:se):Ae>180?Ae-=360:Ae<-180&&(Ae+=360),function(tt){return nr(se+Ae*tt,xe+Ge*tt,be+Pe*tt)+""}}e.interpolateHsl=wd;function wd(V,J){V=e.hsl(V),J=e.hsl(J);var se=V.h,xe=V.s,be=V.l,Ae=J.h-se,Ge=J.s-xe,Pe=J.l-be;return isNaN(Ge)&&(Ge=0,xe=isNaN(xe)?J.s:xe),isNaN(Ae)?(Ae=0,se=isNaN(se)?J.h:se):Ae>180?Ae-=360:Ae<-180&&(Ae+=360),function(tt){return ut(se+Ae*tt,xe+Ge*tt,be+Pe*tt)+""}}e.interpolateLab=Zd;function Zd(V,J){V=e.lab(V),J=e.lab(J);var se=V.l,xe=V.a,be=V.b,Ae=J.l-se,Ge=J.a-xe,Pe=J.b-be;return function(tt){return on(se+Ae*tt,xe+Ge*tt,be+Pe*tt)+""}}e.interpolateRound=zf;function zf(V,J){return J-=V,function(se){return Math.round(V+J*se)}}e.transform=function(V){var J=i.createElementNS(e.ns.prefix.svg,"g");return(e.transform=function(se){if(se!=null){J.setAttribute("transform",se);var xe=J.transform.baseVal.consolidate()}return new Bv(xe?xe.matrix:kc)})(V)};function Bv(V){var J=[V.a,V.b],se=[V.c,V.d],xe=Ph(J),be=lc(J,se),Ae=Ph(Gu(se,J,-be))||0;J[0]*se[1]<se[0]*J[1]&&(J[0]*=-1,J[1]*=-1,xe*=-1,be*=-1),this.rotate=(xe?Math.atan2(J[1],J[0]):Math.atan2(-se[0],se[1]))*it,this.translate=[V.e,V.f],this.scale=[xe,Ae],this.skew=Ae?Math.atan2(be,Ae)*it:0}Bv.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function lc(V,J){return V[0]*J[0]+V[1]*J[1]}function Ph(V){var J=Math.sqrt(lc(V,V));return J&&(V[0]/=J,V[1]/=J),J}function Gu(V,J,se){return V[0]+=se*J[0],V[1]+=se*J[1],V}var kc={a:1,b:0,c:0,d:1,e:0,f:0};e.interpolateTransform=hv;function Of(V){return V.length?V.pop()+",":""}function Nv(V,J,se,xe){if(V[0]!==J[0]||V[1]!==J[1]){var be=se.push("translate(",null,",",null,")");xe.push({i:be-4,x:ps(V[0],J[0])},{i:be-2,x:ps(V[1],J[1])})}else(J[0]||J[1])&&se.push("translate("+J+")")}function Uv(V,J,se,xe){V!==J?(V-J>180?J+=360:J-V>180&&(V+=360),xe.push({i:se.push(Of(se)+"rotate(",null,")")-2,x:ps(V,J)})):J&&se.push(Of(se)+"rotate("+J+")")}function Vv(V,J,se,xe){V!==J?xe.push({i:se.push(Of(se)+"skewX(",null,")")-2,x:ps(V,J)}):J&&se.push(Of(se)+"skewX("+J+")")}function cv(V,J,se,xe){if(V[0]!==J[0]||V[1]!==J[1]){var be=se.push(Of(se)+"scale(",null,",",null,")");xe.push({i:be-4,x:ps(V[0],J[0])},{i:be-2,x:ps(V[1],J[1])})}else(J[0]!==1||J[1]!==1)&&se.push(Of(se)+"scale("+J+")")}function hv(V,J){var se=[],xe=[];return V=e.transform(V),J=e.transform(J),Nv(V.translate,J.translate,se,xe),Uv(V.rotate,J.rotate,se,xe),Vv(V.skew,J.skew,se,xe),cv(V.scale,J.scale,se,xe),V=J=null,function(be){for(var Ae=-1,Ge=xe.length,Pe;++Ae<Ge;)se[(Pe=xe[Ae]).i]=Pe.x(be);return se.join("")}}function Hv(V,J){return J=(J-=V=+V)||1/J,function(se){return(se-V)/J}}function iu(V,J){return J=(J-=V=+V)||1/J,function(se){return Math.max(0,Math.min(1,(se-V)/J))}}e.layout={},e.layout.bundle=function(){return function(V){for(var J=[],se=-1,xe=V.length;++se<xe;)J.push(vv(V[se]));return J}};function vv(V){for(var J=V.source,se=V.target,xe=au(J,se),be=[J];J!==xe;)J=J.parent,be.push(J);for(var Ae=be.length;se!==xe;)be.splice(Ae,0,se),se=se.parent;return be}function ol(V){for(var J=[],se=V.parent;se!=null;)J.push(V),V=se,se=se.parent;return J.push(V),J}function au(V,J){if(V===J)return V;for(var se=ol(V),xe=ol(J),be=se.pop(),Ae=xe.pop(),Ge=null;be===Ae;)Ge=be,be=se.pop(),Ae=xe.pop();return Ge}e.layout.chord=function(){var V={},J,se,xe,be,Ae=0,Ge,Pe,tt;function Mt(){var rr={},tr=[],Tr=e.range(be),Er=[],ir,gr,wr,Pr,kr;for(J=[],se=[],ir=0,Pr=-1;++Pr<be;){for(gr=0,kr=-1;++kr<be;)gr+=xe[Pr][kr];tr.push(gr),Er.push(e.range(be)),ir+=gr}for(Ge&&Tr.sort(function(xa,Gi){return Ge(tr[xa],tr[Gi])}),Pe&&Er.forEach(function(xa,Gi){xa.sort(function(va,mo){return Pe(xe[Gi][va],xe[Gi][mo])})}),ir=(At-Ae*be)/ir,gr=0,Pr=-1;++Pr<be;){for(wr=gr,kr=-1;++kr<be;){var pr=Tr[Pr],mn=Er[pr][kr],Tn=xe[pr][mn],zn=gr,Kn=gr+=Tn*ir;rr[pr+"-"+mn]={index:pr,subindex:mn,startAngle:zn,endAngle:Kn,value:Tn}}se[pr]={index:pr,startAngle:wr,endAngle:gr,value:tr[pr]},gr+=Ae}for(Pr=-1;++Pr<be;)for(kr=Pr-1;++kr<be;){var Ci=rr[Pr+"-"+kr],qi=rr[kr+"-"+Pr];(Ci.value||qi.value)&&J.push(Ci.value<qi.value?{source:qi,target:Ci}:{source:Ci,target:qi})}tt&&Et()}function Et(){J.sort(function(rr,tr){return tt((rr.source.value+rr.target.value)/2,(tr.source.value+tr.target.value)/2)})}return V.matrix=function(rr){return arguments.length?(be=(xe=rr)&&xe.length,J=se=null,V):xe},V.padding=function(rr){return arguments.length?(Ae=rr,J=se=null,V):Ae},V.sortGroups=function(rr){return arguments.length?(Ge=rr,J=se=null,V):Ge},V.sortSubgroups=function(rr){return arguments.length?(Pe=rr,J=null,V):Pe},V.sortChords=function(rr){return arguments.length?(tt=rr,J&&Et(),V):tt},V.chords=function(){return J||Mt(),J},V.groups=function(){return se||Mt(),se},V},e.layout.force=function(){var V={},J=e.dispatch("start","tick","end"),se,xe=[1,1],be,Ae,Ge=.9,Pe=zs,tt=jd,Mt=-30,Et=Kd,rr=.1,tr=.64,Tr=[],Er=[],ir,gr,wr;function Pr(pr){return function(mn,Tn,zn,Kn){if(mn.point!==pr){var Ci=mn.cx-pr.x,qi=mn.cy-pr.y,xa=Kn-Tn,Gi=Ci*Ci+qi*qi;if(xa*xa/tr<Gi){if(Gi<Et){var va=mn.charge/Gi;pr.px-=Ci*va,pr.py-=qi*va}return!0}if(mn.point&&Gi&&Gi<Et){var va=mn.pointCharge/Gi;pr.px-=Ci*va,pr.py-=qi*va}}return!mn.charge}}V.tick=function(){if((Ae*=.99)<.005)return se=null,J.end({type:"end",alpha:Ae=0}),!0;var pr=Tr.length,mn=Er.length,Tn,zn,Kn,Ci,qi,xa,Gi,va,mo;for(zn=0;zn<mn;++zn)Kn=Er[zn],Ci=Kn.source,qi=Kn.target,va=qi.x-Ci.x,mo=qi.y-Ci.y,(xa=va*va+mo*mo)&&(xa=Ae*gr[zn]*((xa=Math.sqrt(xa))-ir[zn])/xa,va*=xa,mo*=xa,qi.x-=va*(Gi=Ci.weight+qi.weight?Ci.weight/(Ci.weight+qi.weight):.5),qi.y-=mo*Gi,Ci.x+=va*(Gi=1-Gi),Ci.y+=mo*Gi);if((Gi=Ae*rr)&&(va=xe[0]/2,mo=xe[1]/2,zn=-1,Gi))for(;++zn<pr;)Kn=Tr[zn],Kn.x+=(va-Kn.x)*Gi,Kn.y+=(mo-Kn.y)*Gi;if(Mt)for(Dl(Tn=e.geom.quadtree(Tr),Ae,wr),zn=-1;++zn<pr;)(Kn=Tr[zn]).fixed||Tn.visit(Pr(Kn));for(zn=-1;++zn<pr;)Kn=Tr[zn],Kn.fixed?(Kn.x=Kn.px,Kn.y=Kn.py):(Kn.x-=(Kn.px-(Kn.px=Kn.x))*Ge,Kn.y-=(Kn.py-(Kn.py=Kn.y))*Ge);J.tick({type:"tick",alpha:Ae})},V.nodes=function(pr){return arguments.length?(Tr=pr,V):Tr},V.links=function(pr){return arguments.length?(Er=pr,V):Er},V.size=function(pr){return arguments.length?(xe=pr,V):xe},V.linkDistance=function(pr){return arguments.length?(Pe=typeof pr=="function"?pr:+pr,V):Pe},V.distance=V.linkDistance,V.linkStrength=function(pr){return arguments.length?(tt=typeof pr=="function"?pr:+pr,V):tt},V.friction=function(pr){return arguments.length?(Ge=+pr,V):Ge},V.charge=function(pr){return arguments.length?(Mt=typeof pr=="function"?pr:+pr,V):Mt},V.chargeDistance=function(pr){return arguments.length?(Et=pr*pr,V):Math.sqrt(Et)},V.gravity=function(pr){return arguments.length?(rr=+pr,V):rr},V.theta=function(pr){return arguments.length?(tr=pr*pr,V):Math.sqrt(tr)},V.alpha=function(pr){return arguments.length?(pr=+pr,Ae?pr>0?Ae=pr:(se.c=null,se.t=NaN,se=null,J.end({type:"end",alpha:Ae=0})):pr>0&&(J.start({type:"start",alpha:Ae=pr}),se=to(V.tick)),V):Ae},V.start=function(){var pr,mn=Tr.length,Tn=Er.length,zn=xe[0],Kn=xe[1],Ci,qi;for(pr=0;pr<mn;++pr)(qi=Tr[pr]).index=pr,qi.weight=0;for(pr=0;pr<Tn;++pr)qi=Er[pr],typeof qi.source=="number"&&(qi.source=Tr[qi.source]),typeof qi.target=="number"&&(qi.target=Tr[qi.target]),++qi.source.weight,++qi.target.weight;for(pr=0;pr<mn;++pr)qi=Tr[pr],isNaN(qi.x)&&(qi.x=xa("x",zn)),isNaN(qi.y)&&(qi.y=xa("y",Kn)),isNaN(qi.px)&&(qi.px=qi.x),isNaN(qi.py)&&(qi.py=qi.y);if(ir=[],typeof Pe=="function")for(pr=0;pr<Tn;++pr)ir[pr]=+Pe.call(this,Er[pr],pr);else for(pr=0;pr<Tn;++pr)ir[pr]=Pe;if(gr=[],typeof tt=="function")for(pr=0;pr<Tn;++pr)gr[pr]=+tt.call(this,Er[pr],pr);else for(pr=0;pr<Tn;++pr)gr[pr]=tt;if(wr=[],typeof Mt=="function")for(pr=0;pr<mn;++pr)wr[pr]=+Mt.call(this,Tr[pr],pr);else for(pr=0;pr<mn;++pr)wr[pr]=Mt;function xa(Gi,va){if(!Ci){for(Ci=new Array(mn),So=0;So<mn;++So)Ci[So]=[];for(So=0;So<Tn;++So){var mo=Er[So];Ci[mo.source.index].push(mo.target),Ci[mo.target.index].push(mo.source)}}for(var Do=Ci[pr],So=-1,kn=Do.length,da;++So<kn;)if(!isNaN(da=Do[So][Gi]))return da;return Math.random()*va}return V.resume()},V.resume=function(){return V.alpha(.1)},V.stop=function(){return V.alpha(0)},V.drag=function(){if(be||(be=e.behavior.drag().origin(O).on("dragstart.force",Bf).on("drag.force",kr).on("dragend.force",Vs)),!arguments.length)return be;this.on("mouseover.force",Kc).on("mouseout.force",Nf).call(be)};function kr(pr){pr.px=e.event.x,pr.py=e.event.y,V.resume()}return e.rebind(V,J,"on")};function Bf(V){V.fixed|=2}function Vs(V){V.fixed&=-7}function Kc(V){V.fixed|=4,V.px=V.x,V.py=V.y}function Nf(V){V.fixed&=-5}function Dl(V,J,se){var xe=0,be=0;if(V.charge=0,!V.leaf)for(var Ae=V.nodes,Ge=Ae.length,Pe=-1,tt;++Pe<Ge;)tt=Ae[Pe],tt!=null&&(Dl(tt,J,se),V.charge+=tt.charge,xe+=tt.charge*tt.cx,be+=tt.charge*tt.cy);if(V.point){V.leaf||(V.point.x+=Math.random()-.5,V.point.y+=Math.random()-.5);var Mt=J*se[V.point.index];V.charge+=V.pointCharge=Mt,xe+=Mt*V.point.x,be+=Mt*V.point.y}V.cx=xe/V.charge,V.cy=be/V.charge}var zs=20,jd=1,Kd=1/0;e.layout.hierarchy=function(){var V=Qc,J=Jd,se=Jc;function xe(be){var Ae=[be],Ge=[],Pe;for(be.depth=0;(Pe=Ae.pop())!=null;)if(Ge.push(Pe),(Mt=J.call(xe,Pe,Pe.depth))&&(tt=Mt.length)){for(var tt,Mt,Et;--tt>=0;)Ae.push(Et=Mt[tt]),Et.parent=Pe,Et.depth=Pe.depth+1;se&&(Pe.value=0),Pe.children=Mt}else se&&(Pe.value=+se.call(xe,Pe,Pe.depth)||0),delete Pe.children;return ou(be,function(rr){var tr,Tr;V&&(tr=rr.children)&&tr.sort(V),se&&(Tr=rr.parent)&&(Tr.value+=rr.value)}),Ge}return xe.sort=function(be){return arguments.length?(V=be,xe):V},xe.children=function(be){return arguments.length?(J=be,xe):J},xe.value=function(be){return arguments.length?(se=be,xe):se},xe.revalue=function(be){return se&&(gf(be,function(Ae){Ae.children&&(Ae.value=0)}),ou(be,function(Ae){var Ge;Ae.children||(Ae.value=+se.call(xe,Ae,Ae.depth)||0),(Ge=Ae.parent)&&(Ge.value+=Ae.value)})),be},xe};function Su(V,J){return e.rebind(V,J,"sort","children","value"),V.nodes=V,V.links=Eu,V}function gf(V,J){for(var se=[V];(V=se.pop())!=null;)if(J(V),(be=V.children)&&(xe=be.length))for(var xe,be;--xe>=0;)se.push(be[xe])}function ou(V,J){for(var se=[V],xe=[];(V=se.pop())!=null;)if(xe.push(V),(Ge=V.children)&&(Ae=Ge.length))for(var be=-1,Ae,Ge;++be<Ae;)se.push(Ge[be]);for(;(V=xe.pop())!=null;)J(V)}function Jd(V){return V.children}function Jc(V){return V.value}function Qc(V,J){return J.value-V.value}function Eu(V){return e.merge(V.map(function(J){return(J.children||[]).map(function(se){return{source:J,target:se}})}))}e.layout.partition=function(){var V=e.layout.hierarchy(),J=[1,1];function se(Ae,Ge,Pe,tt){var Mt=Ae.children;if(Ae.x=Ge,Ae.y=Ae.depth*tt,Ae.dx=Pe,Ae.dy=tt,Mt&&(rr=Mt.length)){var Et=-1,rr,tr,Tr;for(Pe=Ae.value?Pe/Ae.value:0;++Et<rr;)se(tr=Mt[Et],Ge,Tr=tr.value*Pe,tt),Ge+=Tr}}function xe(Ae){var Ge=Ae.children,Pe=0;if(Ge&&(Mt=Ge.length))for(var tt=-1,Mt;++tt<Mt;)Pe=Math.max(Pe,xe(Ge[tt]));return 1+Pe}function be(Ae,Ge){var Pe=V.call(this,Ae,Ge);return se(Pe[0],0,J[0],J[1]/xe(Pe[0])),Pe}return be.size=function(Ae){return arguments.length?(J=Ae,be):J},Su(be,V)},e.layout.pie=function(){var V=Number,J=Gv,se=0,xe=At,be=0;function Ae(Ge){var Pe=Ge.length,tt=Ge.map(function(Pr,kr){return+V.call(Ae,Pr,kr)}),Mt=+(typeof se=="function"?se.apply(this,arguments):se),Et=(typeof xe=="function"?xe.apply(this,arguments):xe)-Mt,rr=Math.min(Math.abs(Et)/Pe,+(typeof be=="function"?be.apply(this,arguments):be)),tr=rr*(Et<0?-1:1),Tr=e.sum(tt),Er=Tr?(Et-Pe*tr)/Tr:0,ir=e.range(Pe),gr=[],wr;return J!=null&&ir.sort(J===Gv?function(Pr,kr){return tt[kr]-tt[Pr]}:function(Pr,kr){return J(Ge[Pr],Ge[kr])}),ir.forEach(function(Pr){gr[Pr]={data:Ge[Pr],value:wr=tt[Pr],startAngle:Mt,endAngle:Mt+=wr*Er+tr,padAngle:rr}}),gr}return Ae.value=function(Ge){return arguments.length?(V=Ge,Ae):V},Ae.sort=function(Ge){return arguments.length?(J=Ge,Ae):J},Ae.startAngle=function(Ge){return arguments.length?(se=Ge,Ae):se},Ae.endAngle=function(Ge){return arguments.length?(xe=Ge,Ae):xe},Ae.padAngle=function(Ge){return arguments.length?(be=Ge,Ae):be},Ae};var Gv={};e.layout.stack=function(){var V=O,J=Cc,se=Rh,xe=Yv,be=dv,Ae=pv;function Ge(Pe,tt){if(!(Er=Pe.length))return Pe;var Mt=Pe.map(function(Pr,kr){return V.call(Ge,Pr,kr)}),Et=Mt.map(function(Pr){return Pr.map(function(kr,pr){return[be.call(Ge,kr,pr),Ae.call(Ge,kr,pr)]})}),rr=J.call(Ge,Et,tt);Mt=e.permute(Mt,rr),Et=e.permute(Et,rr);var tr=se.call(Ge,Et,tt),Tr=Mt[0].length,Er,ir,gr,wr;for(gr=0;gr<Tr;++gr)for(xe.call(Ge,Mt[0][gr],wr=tr[gr],Et[0][gr][1]),ir=1;ir<Er;++ir)xe.call(Ge,Mt[ir][gr],wr+=Et[ir-1][gr][1],Et[ir][gr][1]);return Pe}return Ge.values=function(Pe){return arguments.length?(V=Pe,Ge):V},Ge.order=function(Pe){return arguments.length?(J=typeof Pe=="function"?Pe:$c.get(Pe)||Cc,Ge):J},Ge.offset=function(Pe){return arguments.length?(se=typeof Pe=="function"?Pe:Uf.get(Pe)||Rh,Ge):se},Ge.x=function(Pe){return arguments.length?(be=Pe,Ge):be},Ge.y=function(Pe){return arguments.length?(Ae=Pe,Ge):Ae},Ge.out=function(Pe){return arguments.length?(xe=Pe,Ge):xe},Ge};function dv(V){return V.x}function pv(V){return V.y}function Yv(V,J,se){V.y0=J,V.y=se}var $c=e.map({"inside-out":function(V){var J=V.length,se,xe,be=V.map(Td),Ae=V.map(No),Ge=e.range(J).sort(function(rr,tr){return be[rr]-be[tr]}),Pe=0,tt=0,Mt=[],Et=[];for(se=0;se<J;++se)xe=Ge[se],Pe<tt?(Pe+=Ae[xe],Mt.push(xe)):(tt+=Ae[xe],Et.push(xe));return Et.reverse().concat(Mt)},reverse:function(V){return e.range(V.length).reverse()},default:Cc}),Uf=e.map({silhouette:function(V){var J=V.length,se=V[0].length,xe=[],be=0,Ae,Ge,Pe,tt=[];for(Ge=0;Ge<se;++Ge){for(Ae=0,Pe=0;Ae<J;Ae++)Pe+=V[Ae][Ge][1];Pe>be&&(be=Pe),xe.push(Pe)}for(Ge=0;Ge<se;++Ge)tt[Ge]=(be-xe[Ge])/2;return tt},wiggle:function(V){var J=V.length,se=V[0],xe=se.length,be,Ae,Ge,Pe,tt,Mt,Et,rr,tr,Tr=[];for(Tr[0]=rr=tr=0,Ae=1;Ae<xe;++Ae){for(be=0,Pe=0;be<J;++be)Pe+=V[be][Ae][1];for(be=0,tt=0,Et=se[Ae][0]-se[Ae-1][0];be<J;++be){for(Ge=0,Mt=(V[be][Ae][1]-V[be][Ae-1][1])/(2*Et);Ge<be;++Ge)Mt+=(V[Ge][Ae][1]-V[Ge][Ae-1][1])/Et;tt+=Mt*V[be][Ae][1]}Tr[Ae]=rr-=Pe?tt/Pe*Et:0,rr<tr&&(tr=rr)}for(Ae=0;Ae<xe;++Ae)Tr[Ae]-=tr;return Tr},expand:function(V){var J=V.length,se=V[0].length,xe=1/J,be,Ae,Ge,Pe=[];for(Ae=0;Ae<se;++Ae){for(be=0,Ge=0;be<J;be++)Ge+=V[be][Ae][1];if(Ge)for(be=0;be<J;be++)V[be][Ae][1]/=Ge;else for(be=0;be<J;be++)V[be][Ae][1]=xe}for(Ae=0;Ae<se;++Ae)Pe[Ae]=0;return Pe},zero:Rh});function Cc(V){return e.range(V.length)}function Rh(V){for(var J=-1,se=V[0].length,xe=[];++J<se;)xe[J]=0;return xe}function Td(V){for(var J=1,se=0,xe=V[0][1],be,Ae=V.length;J<Ae;++J)(be=V[J][1])>xe&&(se=J,xe=be);return se}function No(V){return V.reduce(eh,0)}function eh(V,J){return V+J[1]}e.layout.histogram=function(){var V=!0,J=Number,se=th,xe=Lc;function be(Ae,tr){for(var Pe=[],tt=Ae.map(J,this),Mt=se.call(this,tt,tr),Et=xe.call(this,Mt,tt,tr),rr,tr=-1,Tr=tt.length,Er=Et.length-1,ir=V?1:1/Tr,gr;++tr<Er;)rr=Pe[tr]=[],rr.dx=Et[tr+1]-(rr.x=Et[tr]),rr.y=0;if(Er>0)for(tr=-1;++tr<Tr;)gr=tt[tr],gr>=Mt[0]&&gr<=Mt[1]&&(rr=Pe[e.bisect(Et,gr,1,Er)-1],rr.y+=ir,rr.push(Ae[tr]));return Pe}return be.value=function(Ae){return arguments.length?(J=Ae,be):J},be.range=function(Ae){return arguments.length?(se=br(Ae),be):se},be.bins=function(Ae){return arguments.length?(xe=typeof Ae=="number"?function(Ge){return Pc(Ge,Ae)}:br(Ae),be):xe},be.frequency=function(Ae){return arguments.length?(V=!!Ae,be):V},be};function Lc(V,J){return Pc(V,Math.ceil(Math.log(J.length)/Math.LN2+1))}function Pc(V,J){for(var se=-1,xe=+V[0],be=(V[1]-xe)/J,Ae=[];++se<=J;)Ae[se]=be*se+xe;return Ae}function th(V){return[e.min(V),e.max(V)]}e.layout.pack=function(){var V=e.layout.hierarchy().sort(yf),J=0,se=[1,1],xe;function be(Ae,Ge){var Pe=V.call(this,Ae,Ge),tt=Pe[0],Mt=se[0],Et=se[1],rr=xe==null?Math.sqrt:typeof xe=="function"?xe:function(){return xe};if(tt.x=tt.y=0,ou(tt,function(Tr){Tr.r=+rr(Tr.value)}),ou(tt,gv),J){var tr=J*(xe?1:Math.max(2*tt.r/Mt,2*tt.r/Et))/2;ou(tt,function(Tr){Tr.r+=tr}),ou(tt,gv),ou(tt,function(Tr){Tr.r-=tr})}return Gf(tt,Mt/2,Et/2,xe?1:1/Math.max(2*tt.r/Mt,2*tt.r/Et)),Pe}return be.size=function(Ae){return arguments.length?(se=Ae,be):se},be.radius=function(Ae){return arguments.length?(xe=Ae==null||typeof Ae=="function"?Ae:+Ae,be):xe},be.padding=function(Ae){return arguments.length?(J=+Ae,be):J},Su(be,V)};function yf(V,J){return V.value-J.value}function uc(V,J){var se=V._pack_next;V._pack_next=J,J._pack_prev=V,J._pack_next=se,se._pack_prev=J}function Wv(V,J){V._pack_next=J,J._pack_prev=V}function Hs(V,J){var se=J.x-V.x,xe=J.y-V.y,be=V.r+J.r;return .999*be*be>se*se+xe*xe}function gv(V){if(!(J=V.children)||!(tr=J.length))return;var J,se=1/0,xe=-1/0,be=1/0,Ae=-1/0,Ge,Pe,tt,Mt,Et,rr,tr;function Tr(pr){se=Math.min(pr.x-pr.r,se),xe=Math.max(pr.x+pr.r,xe),be=Math.min(pr.y-pr.r,be),Ae=Math.max(pr.y+pr.r,Ae)}if(J.forEach(Vf),Ge=J[0],Ge.x=-Ge.r,Ge.y=0,Tr(Ge),tr>1&&(Pe=J[1],Pe.x=Pe.r,Pe.y=0,Tr(Pe),tr>2))for(tt=J[2],bs(Ge,Pe,tt),Tr(tt),uc(Ge,tt),Ge._pack_prev=tt,uc(tt,Pe),Pe=Ge._pack_next,Mt=3;Mt<tr;Mt++){bs(Ge,Pe,tt=J[Mt]);var Er=0,ir=1,gr=1;for(Et=Pe._pack_next;Et!==Pe;Et=Et._pack_next,ir++)if(Hs(Et,tt)){Er=1;break}if(Er==1)for(rr=Ge._pack_prev;rr!==Et._pack_prev&&!Hs(rr,tt);rr=rr._pack_prev,gr++);Er?(ir<gr||ir==gr&&Pe.r<Ge.r?Wv(Ge,Pe=Et):Wv(Ge=rr,Pe),Mt--):(uc(Ge,tt),Pe=tt,Tr(tt))}var wr=(se+xe)/2,Pr=(be+Ae)/2,kr=0;for(Mt=0;Mt<tr;Mt++)tt=J[Mt],tt.x-=wr,tt.y-=Pr,kr=Math.max(kr,tt.r+Math.sqrt(tt.x*tt.x+tt.y*tt.y));V.r=kr,J.forEach(Hf)}function Vf(V){V._pack_next=V._pack_prev=V}function Hf(V){delete V._pack_next,delete V._pack_prev}function Gf(V,J,se,xe){var be=V.children;if(V.x=J+=xe*V.x,V.y=se+=xe*V.y,V.r*=xe,be)for(var Ae=-1,Ge=be.length;++Ae<Ge;)Gf(be[Ae],J,se,xe)}function bs(V,J,se){var xe=V.r+se.r,be=J.x-V.x,Ae=J.y-V.y;if(xe&&(be||Ae)){var Ge=J.r+se.r,Pe=be*be+Ae*Ae;Ge*=Ge,xe*=xe;var tt=.5+(xe-Ge)/(2*Pe),Mt=Math.sqrt(Math.max(0,2*Ge*(xe+Pe)-(xe-=Pe)*xe-Ge*Ge))/(2*Pe);se.x=V.x+tt*be+Mt*Ae,se.y=V.y+tt*Ae-Mt*be}else se.x=V.x+xe,se.y=V.y}e.layout.tree=function(){var V=e.layout.hierarchy().sort(null).value(null),J=yl,se=[1,1],xe=null;function be(Et,rr){var tr=V.call(this,Et,rr),Tr=tr[0],Er=Ae(Tr);if(ou(Er,Ge),Er.parent.m=-Er.z,gf(Er,Pe),xe)gf(Tr,Mt);else{var ir=Tr,gr=Tr,wr=Tr;gf(Tr,function(mn){mn.x<ir.x&&(ir=mn),mn.x>gr.x&&(gr=mn),mn.depth>wr.depth&&(wr=mn)});var Pr=J(ir,gr)/2-ir.x,kr=se[0]/(gr.x+J(gr,ir)/2+Pr),pr=se[1]/(wr.depth||1);gf(Tr,function(mn){mn.x=(mn.x+Pr)*kr,mn.y=mn.depth*pr})}return tr}function Ae(Et){for(var rr={A:null,children:[Et]},tr=[rr],Tr;(Tr=tr.pop())!=null;)for(var Er=Tr.children,ir,gr=0,wr=Er.length;gr<wr;++gr)tr.push((Er[gr]=ir={_:Er[gr],parent:Tr,children:(ir=Er[gr].children)&&ir.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:gr}).a=ir);return rr.children[0]}function Ge(Et){var rr=Et.children,tr=Et.parent.children,Tr=Et.i?tr[Et.i-1]:null;if(rr.length){Dh(Et);var Er=(rr[0].z+rr[rr.length-1].z)/2;Tr?(Et.z=Tr.z+J(Et._,Tr._),Et.m=Et.z-Er):Et.z=Er}else Tr&&(Et.z=Tr.z+J(Et._,Tr._));Et.parent.A=tt(Et,Tr,Et.parent.A||tr[0])}function Pe(Et){Et._.x=Et.z+Et.parent.m,Et.m+=Et.parent.m}function tt(Et,rr,tr){if(rr){for(var Tr=Et,Er=Et,ir=rr,gr=Tr.parent.children[0],wr=Tr.m,Pr=Er.m,kr=ir.m,pr=gr.m,mn;ir=Yf(ir),Tr=Yu(Tr),ir&&Tr;)gr=Yu(gr),Er=Yf(Er),Er.a=Et,mn=ir.z+kr-Tr.z-wr+J(ir._,Tr._),mn>0&&(Wu(Ue(ir,Et,tr),Et,mn),wr+=mn,Pr+=mn),kr+=ir.m,wr+=Tr.m,pr+=gr.m,Pr+=Er.m;ir&&!Yf(Er)&&(Er.t=ir,Er.m+=kr-Pr),Tr&&!Yu(gr)&&(gr.t=Tr,gr.m+=wr-pr,tr=Et)}return tr}function Mt(Et){Et.x*=se[0],Et.y=Et.depth*se[1]}return be.separation=function(Et){return arguments.length?(J=Et,be):J},be.size=function(Et){return arguments.length?(xe=(se=Et)==null?Mt:null,be):xe?null:se},be.nodeSize=function(Et){return arguments.length?(xe=(se=Et)==null?null:Mt,be):xe?se:null},Su(be,V)};function yl(V,J){return V.parent==J.parent?1:2}function Yu(V){var J=V.children;return J.length?J[0]:V.t}function Yf(V){var J=V.children,se;return(se=J.length)?J[se-1]:V.t}function Wu(V,J,se){var xe=se/(J.i-V.i);J.c-=xe,J.s+=se,V.c+=xe,J.z+=se,J.m+=se}function Dh(V){for(var J=0,se=0,xe=V.children,be=xe.length,Ae;--be>=0;)Ae=xe[be],Ae.z+=J,Ae.m+=J,J+=Ae.s+(se+=Ae.c)}function Ue(V,J,se){return V.a.parent===J.parent?V.a:se}e.layout.cluster=function(){var V=e.layout.hierarchy().sort(null).value(null),J=yl,se=[1,1],xe=!1;function be(Ae,Ge){var Pe=V.call(this,Ae,Ge),tt=Pe[0],Mt,Et=0;ou(tt,function(ir){var gr=ir.children;gr&&gr.length?(ir.x=Gt(gr),ir.y=st(gr)):(ir.x=Mt?Et+=J(ir,Mt):0,ir.y=0,Mt=ir)});var rr=Rt(tt),tr=hr(tt),Tr=rr.x-J(rr,tr)/2,Er=tr.x+J(tr,rr)/2;return ou(tt,xe?function(ir){ir.x=(ir.x-tt.x)*se[0],ir.y=(tt.y-ir.y)*se[1]}:function(ir){ir.x=(ir.x-Tr)/(Er-Tr)*se[0],ir.y=(1-(tt.y?ir.y/tt.y:1))*se[1]}),Pe}return be.separation=function(Ae){return arguments.length?(J=Ae,be):J},be.size=function(Ae){return arguments.length?(xe=(se=Ae)==null,be):xe?null:se},be.nodeSize=function(Ae){return arguments.length?(xe=(se=Ae)!=null,be):xe?se:null},Su(be,V)};function st(V){return 1+e.max(V,function(J){return J.y})}function Gt(V){return V.reduce(function(J,se){return J+se.x},0)/V.length}function Rt(V){var J=V.children;return J&&J.length?Rt(J[0]):V}function hr(V){var J=V.children,se;return J&&(se=J.length)?hr(J[se-1]):V}e.layout.treemap=function(){var V=e.layout.hierarchy(),J=Math.round,se=[1,1],xe=null,be=Lr,Ae=!1,Ge,Pe="squarify",tt=.5*(1+Math.sqrt(5));function Mt(ir,gr){for(var wr=-1,Pr=ir.length,kr,pr;++wr<Pr;)pr=(kr=ir[wr]).value*(gr<0?0:gr),kr.area=isNaN(pr)||pr<=0?0:pr}function Et(ir){var gr=ir.children;if(gr&&gr.length){var wr=be(ir),Pr=[],kr=gr.slice(),pr,mn=1/0,Tn,zn=Pe==="slice"?wr.dx:Pe==="dice"?wr.dy:Pe==="slice-dice"?ir.depth&1?wr.dy:wr.dx:Math.min(wr.dx,wr.dy),Kn;for(Mt(kr,wr.dx*wr.dy/ir.value),Pr.area=0;(Kn=kr.length)>0;)Pr.push(pr=kr[Kn-1]),Pr.area+=pr.area,Pe!=="squarify"||(Tn=tr(Pr,zn))<=mn?(kr.pop(),mn=Tn):(Pr.area-=Pr.pop().area,Tr(Pr,zn,wr,!1),zn=Math.min(wr.dx,wr.dy),Pr.length=Pr.area=0,mn=1/0);Pr.length&&(Tr(Pr,zn,wr,!0),Pr.length=Pr.area=0),gr.forEach(Et)}}function rr(ir){var gr=ir.children;if(gr&&gr.length){var wr=be(ir),Pr=gr.slice(),kr,pr=[];for(Mt(Pr,wr.dx*wr.dy/ir.value),pr.area=0;kr=Pr.pop();)pr.push(kr),pr.area+=kr.area,kr.z!=null&&(Tr(pr,kr.z?wr.dx:wr.dy,wr,!Pr.length),pr.length=pr.area=0);gr.forEach(rr)}}function tr(ir,gr){for(var wr=ir.area,Pr,kr=0,pr=1/0,mn=-1,Tn=ir.length;++mn<Tn;)(Pr=ir[mn].area)&&(Pr<pr&&(pr=Pr),Pr>kr&&(kr=Pr));return wr*=wr,gr*=gr,wr?Math.max(gr*kr*tt/wr,wr/(gr*pr*tt)):1/0}function Tr(ir,gr,wr,Pr){var kr=-1,pr=ir.length,mn=wr.x,Tn=wr.y,zn=gr?J(ir.area/gr):0,Kn;if(gr==wr.dx){for((Pr||zn>wr.dy)&&(zn=wr.dy);++kr<pr;)Kn=ir[kr],Kn.x=mn,Kn.y=Tn,Kn.dy=zn,mn+=Kn.dx=Math.min(wr.x+wr.dx-mn,zn?J(Kn.area/zn):0);Kn.z=!0,Kn.dx+=wr.x+wr.dx-mn,wr.y+=zn,wr.dy-=zn}else{for((Pr||zn>wr.dx)&&(zn=wr.dx);++kr<pr;)Kn=ir[kr],Kn.x=mn,Kn.y=Tn,Kn.dx=zn,Tn+=Kn.dy=Math.min(wr.y+wr.dy-Tn,zn?J(Kn.area/zn):0);Kn.z=!1,Kn.dy+=wr.y+wr.dy-Tn,wr.x+=zn,wr.dx-=zn}}function Er(ir){var gr=Ge||V(ir),wr=gr[0];return wr.x=wr.y=0,wr.value?(wr.dx=se[0],wr.dy=se[1]):wr.dx=wr.dy=0,Ge&&V.revalue(wr),Mt([wr],wr.dx*wr.dy/wr.value),(Ge?rr:Et)(wr),Ae&&(Ge=gr),gr}return Er.size=function(ir){return arguments.length?(se=ir,Er):se},Er.padding=function(ir){if(!arguments.length)return xe;function gr(kr){var pr=ir.call(Er,kr,kr.depth);return pr==null?Lr(kr):zr(kr,typeof pr=="number"?[pr,pr,pr,pr]:pr)}function wr(kr){return zr(kr,ir)}var Pr;return be=(xe=ir)==null?Lr:(Pr=typeof ir)=="function"?gr:(Pr==="number"&&(ir=[ir,ir,ir,ir]),wr),Er},Er.round=function(ir){return arguments.length?(J=ir?Math.round:Number,Er):J!=Number},Er.sticky=function(ir){return arguments.length?(Ae=ir,Ge=null,Er):Ae},Er.ratio=function(ir){return arguments.length?(tt=ir,Er):tt},Er.mode=function(ir){return arguments.length?(Pe=ir+"",Er):Pe},Su(Er,V)};function Lr(V){return{x:V.x,y:V.y,dx:V.dx,dy:V.dy}}function zr(V,J){var se=V.x+J[3],xe=V.y+J[0],be=V.dx-J[1]-J[3],Ae=V.dy-J[0]-J[2];return be<0&&(se+=be/2,be=0),Ae<0&&(xe+=Ae/2,Ae=0),{x:se,y:xe,dx:be,dy:Ae}}e.random={normal:function(V,J){var se=arguments.length;return se<2&&(J=1),se<1&&(V=0),function(){var xe,be,Ae;do xe=Math.random()*2-1,be=Math.random()*2-1,Ae=xe*xe+be*be;while(!Ae||Ae>1);return V+J*xe*Math.sqrt(-2*Math.log(Ae)/Ae)}},logNormal:function(){var V=e.random.normal.apply(e,arguments);return function(){return Math.exp(V())}},bates:function(V){var J=e.random.irwinHall(V);return function(){return J()/V}},irwinHall:function(V){return function(){for(var J=0,se=0;se<V;se++)J+=Math.random();return J}}},e.scale={};function Zr(V){var J=V[0],se=V[V.length-1];return J<se?[J,se]:[se,J]}function an(V){return V.rangeExtent?V.rangeExtent():Zr(V.range())}function Sn(V,J,se,xe){var be=se(V[0],V[1]),Ae=xe(J[0],J[1]);return function(Ge){return Ae(be(Ge))}}function Nr(V,J){var se=0,xe=V.length-1,be=V[se],Ae=V[xe],Ge;return Ae<be&&(Ge=se,se=xe,xe=Ge,Ge=be,be=Ae,Ae=Ge),V[se]=J.floor(be),V[xe]=J.ceil(Ae),V}function tn(V){return V?{floor:function(J){return Math.floor(J/V)*V},ceil:function(J){return Math.ceil(J/V)*V}}:rn}var rn={floor:O,ceil:O};function An(V,J,se,xe){var be=[],Ae=[],Ge=0,Pe=Math.min(V.length,J.length)-1;for(V[Pe]<V[0]&&(V=V.slice().reverse(),J=J.slice().reverse());++Ge<=Pe;)be.push(se(V[Ge-1],V[Ge])),Ae.push(xe(J[Ge-1],J[Ge]));return function(tt){var Mt=e.bisect(V,tt,1,Pe)-1;return Ae[Mt](be[Mt](tt))}}e.scale.linear=function(){return Xn([0,1],[0,1],qs,!1)};function Xn(V,J,se,xe){var be,Ae;function Ge(){var tt=Math.min(V.length,J.length)>2?An:Sn,Mt=xe?iu:Hv;return be=tt(V,J,Mt,se),Ae=tt(J,V,Mt,qs),Pe}function Pe(tt){return be(tt)}return Pe.invert=function(tt){return Ae(tt)},Pe.domain=function(tt){return arguments.length?(V=tt.map(Number),Ge()):V},Pe.range=function(tt){return arguments.length?(J=tt,Ge()):J},Pe.rangeRound=function(tt){return Pe.range(tt).interpolate(zf)},Pe.clamp=function(tt){return arguments.length?(xe=tt,Ge()):xe},Pe.interpolate=function(tt){return arguments.length?(se=tt,Ge()):se},Pe.ticks=function(tt){return ji(V,tt)},Pe.tickFormat=function(tt,Mt){return d3_scale_linearTickFormat(V,tt,Mt)},Pe.nice=function(tt){return Fi(V,tt),Ge()},Pe.copy=function(){return Xn(V,J,se,xe)},Ge()}function Oi(V,J){return e.rebind(V,J,"range","rangeRound","interpolate","clamp")}function Fi(V,J){return Nr(V,tn(Hi(V,J)[2])),Nr(V,tn(Hi(V,J)[2])),V}function Hi(V,J){J==null&&(J=10);var se=Zr(V),xe=se[1]-se[0],be=Math.pow(10,Math.floor(Math.log(xe/J)/Math.LN10)),Ae=J/xe*be;return Ae<=.15?be*=10:Ae<=.35?be*=5:Ae<=.75&&(be*=2),se[0]=Math.ceil(se[0]/be)*be,se[1]=Math.floor(se[1]/be)*be+be*.5,se[2]=be,se}function ji(V,J){return e.range.apply(e,Hi(V,J))}var Un={s:1,g:1,p:1,r:1,e:1};function ri(V){return-Math.floor(Math.log(V)/Math.LN10+.01)}function Ki(V,J){var se=ri(J[2]);return V in Un?Math.abs(se-ri(Math.max(p(J[0]),p(J[1]))))+ +(V!=="e"):se-(V==="%")*2}e.scale.log=function(){return ca(e.scale.linear().domain([0,1]),10,!0,[1,10])};function ca(V,J,se,xe){function be(Pe){return(se?Math.log(Pe<0?0:Pe):-Math.log(Pe>0?0:-Pe))/Math.log(J)}function Ae(Pe){return se?Math.pow(J,Pe):-Math.pow(J,-Pe)}function Ge(Pe){return V(be(Pe))}return Ge.invert=function(Pe){return Ae(V.invert(Pe))},Ge.domain=function(Pe){return arguments.length?(se=Pe[0]>=0,V.domain((xe=Pe.map(Number)).map(be)),Ge):xe},Ge.base=function(Pe){return arguments.length?(J=+Pe,V.domain(xe.map(be)),Ge):J},Ge.nice=function(){var Pe=Nr(xe.map(be),se?Math:Ja);return V.domain(Pe),xe=Pe.map(Ae),Ge},Ge.ticks=function(){var Pe=Zr(xe),tt=[],Mt=Pe[0],Et=Pe[1],rr=Math.floor(be(Mt)),tr=Math.ceil(be(Et)),Tr=J%1?2:J;if(isFinite(tr-rr)){if(se){for(;rr<tr;rr++)for(var Er=1;Er<Tr;Er++)tt.push(Ae(rr)*Er);tt.push(Ae(rr))}else for(tt.push(Ae(rr));rr++<tr;)for(var Er=Tr-1;Er>0;Er--)tt.push(Ae(rr)*Er);for(rr=0;tt[rr]<Mt;rr++);for(tr=tt.length;tt[tr-1]>Et;tr--);tt=tt.slice(rr,tr)}return tt},Ge.copy=function(){return ca(V.copy(),J,se,xe)},Oi(Ge,V)}var Ja={floor:function(V){return-Math.ceil(-V)},ceil:function(V){return-Math.floor(-V)}};e.scale.pow=function(){return _o(e.scale.linear(),1,[0,1])};function _o(V,J,se){var xe=go(J),be=go(1/J);function Ae(Ge){return V(xe(Ge))}return Ae.invert=function(Ge){return be(V.invert(Ge))},Ae.domain=function(Ge){return arguments.length?(V.domain((se=Ge.map(Number)).map(xe)),Ae):se},Ae.ticks=function(Ge){return ji(se,Ge)},Ae.tickFormat=function(Ge,Pe){return d3_scale_linearTickFormat(se,Ge,Pe)},Ae.nice=function(Ge){return Ae.domain(Fi(se,Ge))},Ae.exponent=function(Ge){return arguments.length?(xe=go(J=Ge),be=go(1/J),V.domain(se.map(xe)),Ae):J},Ae.copy=function(){return _o(V.copy(),J,se)},Oi(Ae,V)}function go(V){return function(J){return J<0?-Math.pow(-J,V):Math.pow(J,V)}}e.scale.sqrt=function(){return e.scale.pow().exponent(.5)},e.scale.ordinal=function(){return bo([],{t:"range",a:[[]]})};function bo(V,J){var se,xe,be;function Ae(Pe){return xe[((se.get(Pe)||(J.t==="range"?se.set(Pe,V.push(Pe)):NaN))-1)%xe.length]}function Ge(Pe,tt){return e.range(V.length).map(function(Mt){return Pe+tt*Mt})}return Ae.domain=function(Pe){if(!arguments.length)return V;V=[],se=new T;for(var tt=-1,Mt=Pe.length,Et;++tt<Mt;)se.has(Et=Pe[tt])||se.set(Et,V.push(Et));return Ae[J.t].apply(Ae,J.a)},Ae.range=function(Pe){return arguments.length?(xe=Pe,be=0,J={t:"range",a:arguments},Ae):xe},Ae.rangePoints=function(Pe,tt){arguments.length<2&&(tt=0);var Mt=Pe[0],Et=Pe[1],rr=V.length<2?(Mt=(Mt+Et)/2,0):(Et-Mt)/(V.length-1+tt);return xe=Ge(Mt+rr*tt/2,rr),be=0,J={t:"rangePoints",a:arguments},Ae},Ae.rangeRoundPoints=function(Pe,tt){arguments.length<2&&(tt=0);var Mt=Pe[0],Et=Pe[1],rr=V.length<2?(Mt=Et=Math.round((Mt+Et)/2),0):(Et-Mt)/(V.length-1+tt)|0;return xe=Ge(Mt+Math.round(rr*tt/2+(Et-Mt-(V.length-1+tt)*rr)/2),rr),be=0,J={t:"rangeRoundPoints",a:arguments},Ae},Ae.rangeBands=function(Pe,tt,Mt){arguments.length<2&&(tt=0),arguments.length<3&&(Mt=tt);var Et=Pe[1]<Pe[0],rr=Pe[Et-0],tr=Pe[1-Et],Tr=(tr-rr)/(V.length-tt+2*Mt);return xe=Ge(rr+Tr*Mt,Tr),Et&&xe.reverse(),be=Tr*(1-tt),J={t:"rangeBands",a:arguments},Ae},Ae.rangeRoundBands=function(Pe,tt,Mt){arguments.length<2&&(tt=0),arguments.length<3&&(Mt=tt);var Et=Pe[1]<Pe[0],rr=Pe[Et-0],tr=Pe[1-Et],Tr=Math.floor((tr-rr)/(V.length-tt+2*Mt));return xe=Ge(rr+Math.round((tr-rr-(V.length-tt)*Tr)/2),Tr),Et&&xe.reverse(),be=Math.round(Tr*(1-tt)),J={t:"rangeRoundBands",a:arguments},Ae},Ae.rangeBand=function(){return be},Ae.rangeExtent=function(){return Zr(J.a[0])},Ae.copy=function(){return bo(V,J)},Ae.domain(V)}e.scale.category10=function(){return e.scale.ordinal().range(Na)},e.scale.category20=function(){return e.scale.ordinal().range(ws)},e.scale.category20b=function(){return e.scale.ordinal().range(Ko)},e.scale.category20c=function(){return e.scale.ordinal().range(Uo)};var Na=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Ya),ws=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Ya),Ko=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Ya),Uo=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Ya);e.scale.quantile=function(){return hi([],[])};function hi(V,J){var se;function xe(){var Ae=0,Ge=J.length;for(se=[];++Ae<Ge;)se[Ae-1]=e.quantile(V,Ae/Ge);return be}function be(Ae){if(!isNaN(Ae=+Ae))return J[e.bisect(se,Ae)]}return be.domain=function(Ae){return arguments.length?(V=Ae.map(h).filter(v).sort(c),xe()):V},be.range=function(Ae){return arguments.length?(J=Ae,xe()):J},be.quantiles=function(){return se},be.invertExtent=function(Ae){return Ae=J.indexOf(Ae),Ae<0?[NaN,NaN]:[Ae>0?se[Ae-1]:V[0],Ae<se.length?se[Ae]:V[V.length-1]]},be.copy=function(){return hi(V,J)},xe()}e.scale.quantize=function(){return ea(0,1,[0,1])};function ea(V,J,se){var xe,be;function Ae(Pe){return se[Math.max(0,Math.min(be,Math.floor(xe*(Pe-V))))]}function Ge(){return xe=se.length/(J-V),be=se.length-1,Ae}return Ae.domain=function(Pe){return arguments.length?(V=+Pe[0],J=+Pe[Pe.length-1],Ge()):[V,J]},Ae.range=function(Pe){return arguments.length?(se=Pe,Ge()):se},Ae.invertExtent=function(Pe){return Pe=se.indexOf(Pe),Pe=Pe<0?NaN:Pe/xe+V,[Pe,Pe+1/xe]},Ae.copy=function(){return ea(V,J,se)},Ge()}e.scale.threshold=function(){return Ts([.5],[0,1])};function Ts(V,J){function se(xe){if(xe<=xe)return J[e.bisect(V,xe)]}return se.domain=function(xe){return arguments.length?(V=xe,se):V},se.range=function(xe){return arguments.length?(J=xe,se):J},se.invertExtent=function(xe){return xe=J.indexOf(xe),[V[xe-1],V[xe]]},se.copy=function(){return Ts(V,J)},se}e.scale.identity=function(){return Ml([0,1])};function Ml(V){function J(se){return+se}return J.invert=J,J.domain=J.range=function(se){return arguments.length?(V=se.map(J),J):V},J.ticks=function(se){return ji(V,se)},J.tickFormat=function(se,xe){return d3_scale_linearTickFormat(V,se,xe)},J.copy=function(){return Ml(V)},J}e.svg={};function Wl(){return 0}e.svg.arc=function(){var V=Xu,J=Wf,se=Wl,xe=su,be=lu,Ae=Rc,Ge=Dc;function Pe(){var Mt=Math.max(0,+V.apply(this,arguments)),Et=Math.max(0,+J.apply(this,arguments)),rr=be.apply(this,arguments)-pe,tr=Ae.apply(this,arguments)-pe,Tr=Math.abs(tr-rr),Er=rr>tr?0:1;if(Et<Mt&&(ir=Et,Et=Mt,Mt=ir),Tr>=Se)return tt(Et,Er)+(Mt?tt(Mt,1-Er):"")+"Z";var ir,gr,wr,Pr,kr=0,pr=0,mn,Tn,zn,Kn,Ci,qi,xa,Gi,va=[];if((Pr=(+Ge.apply(this,arguments)||0)/2)&&(wr=xe===su?Math.sqrt(Mt*Mt+Et*Et):+xe.apply(this,arguments),Er||(pr*=-1),Et&&(pr=qr(wr/Et*Math.sin(Pr))),Mt&&(kr=qr(wr/Mt*Math.sin(Pr)))),Et){mn=Et*Math.cos(rr+pr),Tn=Et*Math.sin(rr+pr),zn=Et*Math.cos(tr-pr),Kn=Et*Math.sin(tr-pr);var mo=Math.abs(tr-rr-2*pr)<=Ze?0:1;if(pr&&fc(mn,Tn,zn,Kn)===Er^mo){var Do=(rr+tr)/2;mn=Et*Math.cos(Do),Tn=Et*Math.sin(Do),zn=Kn=null}}else mn=Tn=0;if(Mt){Ci=Mt*Math.cos(tr-kr),qi=Mt*Math.sin(tr-kr),xa=Mt*Math.cos(rr+kr),Gi=Mt*Math.sin(rr+kr);var So=Math.abs(rr-tr+2*kr)<=Ze?0:1;if(kr&&fc(Ci,qi,xa,Gi)===1-Er^So){var kn=(rr+tr)/2;Ci=Mt*Math.cos(kn),qi=Mt*Math.sin(kn),xa=Gi=null}}else Ci=qi=0;if(Tr>kt&&(ir=Math.min(Math.abs(Et-Mt)/2,+se.apply(this,arguments)))>.001){gr=Mt<Et^Er?0:1;var da=ir,Sa=ir;if(Tr<Ze){var La=xa==null?[Ci,qi]:zn==null?[mn,Tn]:vs([mn,Tn],[xa,Gi],[zn,Kn],[Ci,qi]),As=mn-La[0],Gs=Tn-La[1],ml=zn-La[0],fs=Kn-La[1],Xl=1/Math.sin(Math.acos((As*ml+Gs*fs)/(Math.sqrt(As*As+Gs*Gs)*Math.sqrt(ml*ml+fs*fs)))/2),Ye=Math.sqrt(La[0]*La[0]+La[1]*La[1]);Sa=Math.min(ir,(Mt-Ye)/(Xl-1)),da=Math.min(ir,(Et-Ye)/(Xl+1))}if(zn!=null){var Yt=Ih(xa==null?[Ci,qi]:[xa,Gi],[mn,Tn],Et,da,Er),lr=Ih([zn,Kn],[Ci,qi],Et,da,Er);ir===da?va.push("M",Yt[0],"A",da,",",da," 0 0,",gr," ",Yt[1],"A",Et,",",Et," 0 ",1-Er^fc(Yt[1][0],Yt[1][1],lr[1][0],lr[1][1]),",",Er," ",lr[1],"A",da,",",da," 0 0,",gr," ",lr[0]):va.push("M",Yt[0],"A",da,",",da," 0 1,",gr," ",lr[0])}else va.push("M",mn,",",Tn);if(xa!=null){var Or=Ih([mn,Tn],[xa,Gi],Mt,-Sa,Er),$r=Ih([Ci,qi],zn==null?[mn,Tn]:[zn,Kn],Mt,-Sa,Er);ir===Sa?va.push("L",$r[0],"A",Sa,",",Sa," 0 0,",gr," ",$r[1],"A",Mt,",",Mt," 0 ",Er^fc($r[1][0],$r[1][1],Or[1][0],Or[1][1]),",",1-Er," ",Or[1],"A",Sa,",",Sa," 0 0,",gr," ",Or[0]):va.push("L",$r[0],"A",Sa,",",Sa," 0 0,",gr," ",Or[0])}else va.push("L",Ci,",",qi)}else va.push("M",mn,",",Tn),zn!=null&&va.push("A",Et,",",Et," 0 ",mo,",",Er," ",zn,",",Kn),va.push("L",Ci,",",qi),xa!=null&&va.push("A",Mt,",",Mt," 0 ",So,",",1-Er," ",xa,",",Gi);return va.push("Z"),va.join("")}function tt(Mt,Et){return"M0,"+Mt+"A"+Mt+","+Mt+" 0 1,"+Et+" 0,"+-Mt+"A"+Mt+","+Mt+" 0 1,"+Et+" 0,"+Mt}return Pe.innerRadius=function(Mt){return arguments.length?(V=br(Mt),Pe):V},Pe.outerRadius=function(Mt){return arguments.length?(J=br(Mt),Pe):J},Pe.cornerRadius=function(Mt){return arguments.length?(se=br(Mt),Pe):se},Pe.padRadius=function(Mt){return arguments.length?(xe=Mt==su?su:br(Mt),Pe):xe},Pe.startAngle=function(Mt){return arguments.length?(be=br(Mt),Pe):be},Pe.endAngle=function(Mt){return arguments.length?(Ae=br(Mt),Pe):Ae},Pe.padAngle=function(Mt){return arguments.length?(Ge=br(Mt),Pe):Ge},Pe.centroid=function(){var Mt=(+V.apply(this,arguments)+ +J.apply(this,arguments))/2,Et=(+be.apply(this,arguments)+ +Ae.apply(this,arguments))/2-pe;return[Math.cos(Et)*Mt,Math.sin(Et)*Mt]},Pe};var su="auto";function Xu(V){return V.innerRadius}function Wf(V){return V.outerRadius}function lu(V){return V.startAngle}function Rc(V){return V.endAngle}function Dc(V){return V&&V.padAngle}function fc(V,J,se,xe){return(V-se)*J-(J-xe)*V>0?0:1}function Ih(V,J,se,xe,be){var Ae=V[0]-J[0],Ge=V[1]-J[1],Pe=(be?xe:-xe)/Math.sqrt(Ae*Ae+Ge*Ge),tt=Pe*Ge,Mt=-Pe*Ae,Et=V[0]+tt,rr=V[1]+Mt,tr=J[0]+tt,Tr=J[1]+Mt,Er=(Et+tr)/2,ir=(rr+Tr)/2,gr=tr-Et,wr=Tr-rr,Pr=gr*gr+wr*wr,kr=se-xe,pr=Et*Tr-tr*rr,mn=(wr<0?-1:1)*Math.sqrt(Math.max(0,kr*kr*Pr-pr*pr)),Tn=(pr*wr-gr*mn)/Pr,zn=(-pr*gr-wr*mn)/Pr,Kn=(pr*wr+gr*mn)/Pr,Ci=(-pr*gr+wr*mn)/Pr,qi=Tn-Er,xa=zn-ir,Gi=Kn-Er,va=Ci-ir;return qi*qi+xa*xa>Gi*Gi+va*va&&(Tn=Kn,zn=Ci),[[Tn-tt,zn-Mt],[Tn*se/kr,zn*se/kr]]}function rh(){return!0}function cc(V){var J=jo,se=Ho,xe=rh,be=Zu,Ae=be.key,Ge=.7;function Pe(tt){var Mt=[],Et=[],rr=-1,tr=tt.length,Tr,Er=br(J),ir=br(se);function gr(){Mt.push("M",be(V(Et),Ge))}for(;++rr<tr;)xe.call(this,Tr=tt[rr],rr)?Et.push([+Er.call(this,Tr,rr),+ir.call(this,Tr,rr)]):Et.length&&(gr(),Et=[]);return Et.length&&gr(),Mt.length?Mt.join(""):null}return Pe.x=function(tt){return arguments.length?(J=tt,Pe):J},Pe.y=function(tt){return arguments.length?(se=tt,Pe):se},Pe.defined=function(tt){return arguments.length?(xe=tt,Pe):xe},Pe.interpolate=function(tt){return arguments.length?(typeof tt=="function"?Ae=be=tt:Ae=(be=mf.get(tt)||Zu).key,Pe):Ae},Pe.tension=function(tt){return arguments.length?(Ge=tt,Pe):Ge},Pe}e.svg.line=function(){return cc(O)};var mf=e.map({linear:Zu,"linear-closed":Fh,step:Xv,"step-before":qh,"step-after":Zv,basis:Xf,"basis-open":zh,"basis-closed":jv,bundle:Oh,cardinal:nh,"cardinal-open":Ic,"cardinal-closed":ku,monotone:zt});mf.forEach(function(V,J){J.key=V,J.closed=/-closed$/.test(V)});function Zu(V){return V.length>1?V.join("L"):V+"Z"}function Fh(V){return V.join("L")+"Z"}function Xv(V){for(var J=0,se=V.length,xe=V[0],be=[xe[0],",",xe[1]];++J<se;)be.push("H",(xe[0]+(xe=V[J])[0])/2,"V",xe[1]);return se>1&&be.push("H",xe[0]),be.join("")}function qh(V){for(var J=0,se=V.length,xe=V[0],be=[xe[0],",",xe[1]];++J<se;)be.push("V",(xe=V[J])[1],"H",xe[0]);return be.join("")}function Zv(V){for(var J=0,se=V.length,xe=V[0],be=[xe[0],",",xe[1]];++J<se;)be.push("H",(xe=V[J])[0],"V",xe[1]);return be.join("")}function Ic(V,J){return V.length<4?Zu(V):V[1]+ih(V.slice(1,-1),ah(V,J))}function ku(V,J){return V.length<3?Fh(V):V[0]+ih((V.push(V[0]),V),ah([V[V.length-2]].concat(V,[V[1]]),J))}function nh(V,J){return V.length<3?Zu(V):V[0]+ih(V,ah(V,J))}function ih(V,J){if(J.length<1||V.length!=J.length&&V.length!=J.length+2)return Zu(V);var se=V.length!=J.length,xe="",be=V[0],Ae=V[1],Ge=J[0],Pe=Ge,tt=1;if(se&&(xe+="Q"+(Ae[0]-Ge[0]*2/3)+","+(Ae[1]-Ge[1]*2/3)+","+Ae[0]+","+Ae[1],be=V[1],tt=2),J.length>1){Pe=J[1],Ae=V[tt],tt++,xe+="C"+(be[0]+Ge[0])+","+(be[1]+Ge[1])+","+(Ae[0]-Pe[0])+","+(Ae[1]-Pe[1])+","+Ae[0]+","+Ae[1];for(var Mt=2;Mt<J.length;Mt++,tt++)Ae=V[tt],Pe=J[Mt],xe+="S"+(Ae[0]-Pe[0])+","+(Ae[1]-Pe[1])+","+Ae[0]+","+Ae[1]}if(se){var Et=V[tt];xe+="Q"+(Ae[0]+Pe[0]*2/3)+","+(Ae[1]+Pe[1]*2/3)+","+Et[0]+","+Et[1]}return xe}function ah(V,J){for(var se=[],xe=(1-J)/2,be,Ae=V[0],Ge=V[1],Pe=1,tt=V.length;++Pe<tt;)be=Ae,Ae=Ge,Ge=V[Pe],se.push([xe*(Ge[0]-be[0]),xe*(Ge[1]-be[1])]);return se}function Xf(V){if(V.length<3)return Zu(V);var J=1,se=V.length,xe=V[0],be=xe[0],Ae=xe[1],Ge=[be,be,be,(xe=V[1])[0]],Pe=[Ae,Ae,Ae,xe[1]],tt=[be,",",Ae,"L",uu(Le,Ge),",",uu(Le,Pe)];for(V.push(V[se-1]);++J<=se;)xe=V[J],Ge.shift(),Ge.push(xe[0]),Pe.shift(),Pe.push(xe[1]),De(tt,Ge,Pe);return V.pop(),tt.push("L",xe),tt.join("")}function zh(V){if(V.length<4)return Zu(V);for(var J=[],se=-1,xe=V.length,be,Ae=[0],Ge=[0];++se<3;)be=V[se],Ae.push(be[0]),Ge.push(be[1]);for(J.push(uu(Le,Ae)+","+uu(Le,Ge)),--se;++se<xe;)be=V[se],Ae.shift(),Ae.push(be[0]),Ge.shift(),Ge.push(be[1]),De(J,Ae,Ge);return J.join("")}function jv(V){for(var J,se=-1,xe=V.length,be=xe+4,Ae,Ge=[],Pe=[];++se<4;)Ae=V[se%xe],Ge.push(Ae[0]),Pe.push(Ae[1]);for(J=[uu(Le,Ge),",",uu(Le,Pe)],--se;++se<be;)Ae=V[se%xe],Ge.shift(),Ge.push(Ae[0]),Pe.shift(),Pe.push(Ae[1]),De(J,Ge,Pe);return J.join("")}function Oh(V,J){var se=V.length-1;if(se)for(var xe=V[0][0],be=V[0][1],Ae=V[se][0]-xe,Ge=V[se][1]-be,Pe=-1,tt,Mt;++Pe<=se;)tt=V[Pe],Mt=Pe/se,tt[0]=J*tt[0]+(1-J)*(xe+Mt*Ae),tt[1]=J*tt[1]+(1-J)*(be+Mt*Ge);return Xf(V)}function uu(V,J){return V[0]*J[0]+V[1]*J[1]+V[2]*J[2]+V[3]*J[3]}var de=[0,2/3,1/3,0],we=[0,1/3,2/3,0],Le=[0,1/6,2/3,1/6];function De(V,J,se){V.push("C",uu(de,J),",",uu(de,se),",",uu(we,J),",",uu(we,se),",",uu(Le,J),",",uu(Le,se))}function He(V,J){return(J[1]-V[1])/(J[0]-V[0])}function Ve(V){for(var J=0,se=V.length-1,xe=[],be=V[0],Ae=V[1],Ge=xe[0]=He(be,Ae);++J<se;)xe[J]=(Ge+(Ge=He(be=Ae,Ae=V[J+1])))/2;return xe[J]=Ge,xe}function Qe(V){for(var J=[],se,xe,be,Ae,Ge=Ve(V),Pe=-1,tt=V.length-1;++Pe<tt;)se=He(V[Pe],V[Pe+1]),p(se)<kt?Ge[Pe]=Ge[Pe+1]=0:(xe=Ge[Pe]/se,be=Ge[Pe+1]/se,Ae=xe*xe+be*be,Ae>9&&(Ae=se*3/Math.sqrt(Ae),Ge[Pe]=Ae*xe,Ge[Pe+1]=Ae*be));for(Pe=-1;++Pe<=tt;)Ae=(V[Math.min(tt,Pe+1)][0]-V[Math.max(0,Pe-1)][0])/(6*(1+Ge[Pe]*Ge[Pe])),J.push([Ae||0,Ge[Pe]*Ae||0]);return J}function zt(V){return V.length<3?Zu(V):V[0]+ih(V,Qe(V))}e.svg.line.radial=function(){var V=cc(Jt);return V.radius=V.x,delete V.x,V.angle=V.y,delete V.y,V};function Jt(V){for(var J,se=-1,xe=V.length,be,Ae;++se<xe;)J=V[se],be=J[0],Ae=J[1]-pe,J[0]=be*Math.cos(Ae),J[1]=be*Math.sin(Ae);return V}function qt(V){var J=jo,se=jo,xe=0,be=Ho,Ae=rh,Ge=Zu,Pe=Ge.key,tt=Ge,Mt="L",Et=.7;function rr(tr){var Tr=[],Er=[],ir=[],gr=-1,wr=tr.length,Pr,kr=br(J),pr=br(xe),mn=J===se?function(){return zn}:br(se),Tn=xe===be?function(){return Kn}:br(be),zn,Kn;function Ci(){Tr.push("M",Ge(V(ir),Et),Mt,tt(V(Er.reverse()),Et),"Z")}for(;++gr<wr;)Ae.call(this,Pr=tr[gr],gr)?(Er.push([zn=+kr.call(this,Pr,gr),Kn=+pr.call(this,Pr,gr)]),ir.push([+mn.call(this,Pr,gr),+Tn.call(this,Pr,gr)])):Er.length&&(Ci(),Er=[],ir=[]);return Er.length&&Ci(),Tr.length?Tr.join(""):null}return rr.x=function(tr){return arguments.length?(J=se=tr,rr):se},rr.x0=function(tr){return arguments.length?(J=tr,rr):J},rr.x1=function(tr){return arguments.length?(se=tr,rr):se},rr.y=function(tr){return arguments.length?(xe=be=tr,rr):be},rr.y0=function(tr){return arguments.length?(xe=tr,rr):xe},rr.y1=function(tr){return arguments.length?(be=tr,rr):be},rr.defined=function(tr){return arguments.length?(Ae=tr,rr):Ae},rr.interpolate=function(tr){return arguments.length?(typeof tr=="function"?Pe=Ge=tr:Pe=(Ge=mf.get(tr)||Zu).key,tt=Ge.reverse||Ge,Mt=Ge.closed?"M":"L",rr):Pe},rr.tension=function(tr){return arguments.length?(Et=tr,rr):Et},rr}qh.reverse=Zv,Zv.reverse=qh,e.svg.area=function(){return qt(O)},e.svg.area.radial=function(){var V=qt(Jt);return V.radius=V.x,delete V.x,V.innerRadius=V.x0,delete V.x0,V.outerRadius=V.x1,delete V.x1,V.angle=V.y,delete V.y,V.startAngle=V.y0,delete V.y0,V.endAngle=V.y1,delete V.y1,V};function Qt(V){return V.source}function or(V){return V.target}e.svg.chord=function(){var V=Qt,J=or,se=_r,xe=lu,be=Rc;function Ae(Et,rr){var tr=Ge(this,V,Et,rr),Tr=Ge(this,J,Et,rr);return"M"+tr.p0+tt(tr.r,tr.p1,tr.a1-tr.a0)+(Pe(tr,Tr)?Mt(tr.r,tr.p1,tr.r,tr.p0):Mt(tr.r,tr.p1,Tr.r,Tr.p0)+tt(Tr.r,Tr.p1,Tr.a1-Tr.a0)+Mt(Tr.r,Tr.p1,tr.r,tr.p0))+"Z"}function Ge(Et,rr,tr,Tr){var Er=rr.call(Et,tr,Tr),ir=se.call(Et,Er,Tr),gr=xe.call(Et,Er,Tr)-pe,wr=be.call(Et,Er,Tr)-pe;return{r:ir,a0:gr,a1:wr,p0:[ir*Math.cos(gr),ir*Math.sin(gr)],p1:[ir*Math.cos(wr),ir*Math.sin(wr)]}}function Pe(Et,rr){return Et.a0==rr.a0&&Et.a1==rr.a1}function tt(Et,rr,tr){return"A"+Et+","+Et+" 0 "+ +(tr>Ze)+",1 "+rr}function Mt(Et,rr,tr,Tr){return"Q 0,0 "+Tr}return Ae.radius=function(Et){return arguments.length?(se=br(Et),Ae):se},Ae.source=function(Et){return arguments.length?(V=br(Et),Ae):V},Ae.target=function(Et){return arguments.length?(J=br(Et),Ae):J},Ae.startAngle=function(Et){return arguments.length?(xe=br(Et),Ae):xe},Ae.endAngle=function(Et){return arguments.length?(be=br(Et),Ae):be},Ae};function _r(V){return V.radius}e.svg.diagonal=function(){var V=Qt,J=or,se=Sr;function xe(be,Ae){var Ge=V.call(this,be,Ae),Pe=J.call(this,be,Ae),tt=(Ge.y+Pe.y)/2,Mt=[Ge,{x:Ge.x,y:tt},{x:Pe.x,y:tt},Pe];return Mt=Mt.map(se),"M"+Mt[0]+"C"+Mt[1]+" "+Mt[2]+" "+Mt[3]}return xe.source=function(be){return arguments.length?(V=br(be),xe):V},xe.target=function(be){return arguments.length?(J=br(be),xe):J},xe.projection=function(be){return arguments.length?(se=be,xe):se},xe};function Sr(V){return[V.x,V.y]}e.svg.diagonal.radial=function(){var V=e.svg.diagonal(),J=Sr,se=V.projection;return V.projection=function(xe){return arguments.length?se(Hr(J=xe)):J},V};function Hr(V){return function(){var J=V.apply(this,arguments),se=J[0],xe=J[1]-pe;return[se*Math.cos(xe),se*Math.sin(xe)]}}e.svg.symbol=function(){var V=Ln,J=un;function se(xe,be){return(Ji.get(V.call(this,xe,be))||yi)(J.call(this,xe,be))}return se.type=function(xe){return arguments.length?(V=br(xe),se):V},se.size=function(xe){return arguments.length?(J=br(xe),se):J},se};function un(){return 64}function Ln(){return"circle"}function yi(V){var J=Math.sqrt(V/Ze);return"M0,"+J+"A"+J+","+J+" 0 1,1 0,"+-J+"A"+J+","+J+" 0 1,1 0,"+J+"Z"}var Ji=e.map({circle:yi,cross:function(V){var J=Math.sqrt(V/5)/2;return"M"+-3*J+","+-J+"H"+-J+"V"+-3*J+"H"+J+"V"+-J+"H"+3*J+"V"+J+"H"+J+"V"+3*J+"H"+-J+"V"+J+"H"+-3*J+"Z"},diamond:function(V){var J=Math.sqrt(V/(2*sa)),se=J*sa;return"M0,"+-J+"L"+se+",0 0,"+J+" "+-se+",0Z"},square:function(V){var J=Math.sqrt(V)/2;return"M"+-J+","+-J+"L"+J+","+-J+" "+J+","+J+" "+-J+","+J+"Z"},"triangle-down":function(V){var J=Math.sqrt(V/ra),se=J*ra/2;return"M0,"+se+"L"+J+","+-se+" "+-J+","+-se+"Z"},"triangle-up":function(V){var J=Math.sqrt(V/ra),se=J*ra/2;return"M0,"+-se+"L"+J+","+se+" "+-J+","+se+"Z"}});e.svg.symbolTypes=Ji.keys();var ra=Math.sqrt(3),sa=Math.tan(30*Te);he.transition=function(V){for(var J=gs||++qa,se=Wa(V),xe=[],be,Ae,Ge=sl||{time:Date.now(),ease:Yl,delay:0,duration:250},Pe=-1,tt=this.length;++Pe<tt;){xe.push(be=[]);for(var Mt=this[Pe],Et=-1,rr=Mt.length;++Et<rr;)(Ae=Mt[Et])&&Il(Ae,Et,se,J,Ge),be.push(Ae)}return Jo(xe,se,J)},he.interrupt=function(V){return this.each(V==null?pa:Ro(Wa(V)))};var pa=Ro(Wa());function Ro(V){return function(){var J,se,xe;(J=this[V])&&(xe=J[se=J.active])&&(xe.timer.c=null,xe.timer.t=NaN,--J.count?delete J[se]:delete this[V],J.active+=.5,xe.event&&xe.event.interrupt.call(this,this.__data__,xe.index))}}function Jo(V,J,se){return Z(V,ba),V.namespace=J,V.id=se,V}var ba=[],qa=0,gs,sl;ba.call=he.call,ba.empty=he.empty,ba.node=he.node,ba.size=he.size,e.transition=function(V,J){return V&&V.transition?gs?V.transition(J):V:e.selection().transition(V)},e.transition.prototype=ba,ba.select=function(V){var J=this.id,se=this.namespace,xe=[],be,Ae,Ge;V=te(V);for(var Pe=-1,tt=this.length;++Pe<tt;){xe.push(be=[]);for(var Mt=this[Pe],Et=-1,rr=Mt.length;++Et<rr;)(Ge=Mt[Et])&&(Ae=V.call(Ge,Ge.__data__,Et,Pe))?("__data__"in Ge&&(Ae.__data__=Ge.__data__),Il(Ae,Et,se,J,Ge[se][J]),be.push(Ae)):be.push(null)}return Jo(xe,se,J)},ba.selectAll=function(V){var J=this.id,se=this.namespace,xe=[],be,Ae,Ge,Pe,tt;V=ge(V);for(var Mt=-1,Et=this.length;++Mt<Et;)for(var rr=this[Mt],tr=-1,Tr=rr.length;++tr<Tr;)if(Ge=rr[tr]){tt=Ge[se][J],Ae=V.call(Ge,Ge.__data__,tr,Mt),xe.push(be=[]);for(var Er=-1,ir=Ae.length;++Er<ir;)(Pe=Ae[Er])&&Il(Pe,Er,se,J,tt),be.push(Pe)}return Jo(xe,se,J)},ba.filter=function(V){var J=[],se,xe,be;typeof V!="function"&&(V=Me(V));for(var Ae=0,Ge=this.length;Ae<Ge;Ae++){J.push(se=[]);for(var xe=this[Ae],Pe=0,tt=xe.length;Pe<tt;Pe++)(be=xe[Pe])&&V.call(be,be.__data__,Pe,Ae)&&se.push(be)}return Jo(J,this.namespace,this.id)},ba.tween=function(V,J){var se=this.id,xe=this.namespace;return arguments.length<2?this.node()[xe][se].tween.get(V):We(this,J==null?function(be){be[xe][se].tween.remove(V)}:function(be){be[xe][se].tween.set(V,J)})};function rl(V,J,se,xe){var be=V.id,Ae=V.namespace;return We(V,typeof se=="function"?function(Ge,Pe,tt){Ge[Ae][be].tween.set(J,xe(se.call(Ge,Ge.__data__,Pe,tt)))}:(se=xe(se),function(Ge){Ge[Ae][be].tween.set(J,se)}))}ba.attr=function(V,J){if(arguments.length<2){for(J in V)this.attr(J,V[J]);return this}var se=V=="transform"?hv:qs,xe=e.ns.qualify(V);function be(){this.removeAttribute(xe)}function Ae(){this.removeAttributeNS(xe.space,xe.local)}function Ge(tt){return tt==null?be:(tt+="",function(){var Mt=this.getAttribute(xe),Et;return Mt!==tt&&(Et=se(Mt,tt),function(rr){this.setAttribute(xe,Et(rr))})})}function Pe(tt){return tt==null?Ae:(tt+="",function(){var Mt=this.getAttributeNS(xe.space,xe.local),Et;return Mt!==tt&&(Et=se(Mt,tt),function(rr){this.setAttributeNS(xe.space,xe.local,Et(rr))})})}return rl(this,"attr."+V,J,xe.local?Pe:Ge)},ba.attrTween=function(V,J){var se=e.ns.qualify(V);function xe(Ae,Ge){var Pe=J.call(this,Ae,Ge,this.getAttribute(se));return Pe&&function(tt){this.setAttribute(se,Pe(tt))}}function be(Ae,Ge){var Pe=J.call(this,Ae,Ge,this.getAttributeNS(se.space,se.local));return Pe&&function(tt){this.setAttributeNS(se.space,se.local,Pe(tt))}}return this.tween("attr."+V,se.local?be:xe)},ba.style=function(V,J,se){var xe=arguments.length;if(xe<3){if(typeof V!="string"){xe<2&&(J="");for(se in V)this.style(se,V[se],J);return this}se=""}function be(){this.style.removeProperty(V)}function Ae(Ge){return Ge==null?be:(Ge+="",function(){var Pe=a(this).getComputedStyle(this,null).getPropertyValue(V),tt;return Pe!==Ge&&(tt=qs(Pe,Ge),function(Mt){this.style.setProperty(V,tt(Mt),se)})})}return rl(this,"style."+V,J,Ae)},ba.styleTween=function(V,J,se){arguments.length<3&&(se="");function xe(be,Ae){var Ge=J.call(this,be,Ae,a(this).getComputedStyle(this,null).getPropertyValue(V));return Ge&&function(Pe){this.style.setProperty(V,Ge(Pe),se)}}return this.tween("style."+V,xe)},ba.text=function(V){return rl(this,"text",V,ro)};function ro(V){return V==null&&(V=""),function(){this.textContent=V}}ba.remove=function(){var V=this.namespace;return this.each("end.transition",function(){var J;this[V].count<2&&(J=this.parentNode)&&J.removeChild(this)})},ba.ease=function(V){var J=this.id,se=this.namespace;return arguments.length<1?this.node()[se][J].ease:(typeof V!="function"&&(V=e.ease.apply(e,arguments)),We(this,function(xe){xe[se][J].ease=V}))},ba.delay=function(V){var J=this.id,se=this.namespace;return arguments.length<1?this.node()[se][J].delay:We(this,typeof V=="function"?function(xe,be,Ae){xe[se][J].delay=+V.call(xe,xe.__data__,be,Ae)}:(V=+V,function(xe){xe[se][J].delay=V}))},ba.duration=function(V){var J=this.id,se=this.namespace;return arguments.length<1?this.node()[se][J].duration:We(this,typeof V=="function"?function(xe,be,Ae){xe[se][J].duration=Math.max(1,V.call(xe,xe.__data__,be,Ae))}:(V=Math.max(1,V),function(xe){xe[se][J].duration=V}))},ba.each=function(V,J){var se=this.id,xe=this.namespace;if(arguments.length<2){var be=sl,Ae=gs;try{gs=se,We(this,function(Ge,Pe,tt){sl=Ge[xe][se],V.call(Ge,Ge.__data__,Pe,tt)})}finally{sl=be,gs=Ae}}else We(this,function(Ge){var Pe=Ge[xe][se];(Pe.event||(Pe.event=e.dispatch("start","end","interrupt"))).on(V,J)});return this},ba.transition=function(){for(var V=this.id,J=++qa,se=this.namespace,xe=[],be,Ae,Ge,Pe,tt=0,Mt=this.length;tt<Mt;tt++){xe.push(be=[]);for(var Ae=this[tt],Et=0,rr=Ae.length;Et<rr;Et++)(Ge=Ae[Et])&&(Pe=Ge[se][V],Il(Ge,Et,se,J,{time:Pe.time,ease:Pe.ease,delay:Pe.delay+Pe.duration,duration:Pe.duration})),be.push(Ge)}return Jo(xe,se,J)};function Wa(V){return V==null?"__transition__":"__transition_"+V+"__"}function Il(V,J,se,xe,be){var Ae=V[se]||(V[se]={active:0,count:0}),Ge=Ae[xe],Pe,tt,Mt,Et,rr;function tr(ir){var gr=Ge.delay;if(tt.t=gr+Pe,gr<=ir)return Tr(ir-gr);tt.c=Tr}function Tr(ir){var gr=Ae.active,wr=Ae[gr];wr&&(wr.timer.c=null,wr.timer.t=NaN,--Ae.count,delete Ae[gr],wr.event&&wr.event.interrupt.call(V,V.__data__,wr.index));for(var Pr in Ae)if(+Pr<xe){var kr=Ae[Pr];kr.timer.c=null,kr.timer.t=NaN,--Ae.count,delete Ae[Pr]}tt.c=Er,to(function(){return tt.c&&Er(ir||1)&&(tt.c=null,tt.t=NaN),1},0,Pe),Ae.active=xe,Ge.event&&Ge.event.start.call(V,V.__data__,J),rr=[],Ge.tween.forEach(function(pr,mn){(mn=mn.call(V,V.__data__,J))&&rr.push(mn)}),Et=Ge.ease,Mt=Ge.duration}function Er(ir){for(var gr=ir/Mt,wr=Et(gr),Pr=rr.length;Pr>0;)rr[--Pr].call(V,wr);if(gr>=1)return Ge.event&&Ge.event.end.call(V,V.__data__,J),--Ae.count?delete Ae[xe]:delete V[se],1}Ge||(Pe=be.time,tt=to(tr,0,Pe),Ge=Ae[xe]={tween:new T,time:Pe,timer:tt,delay:be.delay,duration:be.duration,ease:be.ease,index:J},be=null,++Ae.count)}e.svg.axis=function(){var V=e.scale.linear(),J=Sl,se=6,xe=6,be=3,Ae=[10],Ge=null,Pe;function tt(Mt){Mt.each(function(){var Et=e.select(this),rr=this.__chart__||V,tr=this.__chart__=V.copy(),Tr=Ge==null?tr.ticks?tr.ticks.apply(tr,Ae):tr.domain():Ge,Er=Pe==null?tr.tickFormat?tr.tickFormat.apply(tr,Ae):O:Pe,ir=Et.selectAll(".tick").data(Tr,tr),gr=ir.enter().insert("g",".domain").attr("class","tick").style("opacity",kt),wr=e.transition(ir.exit()).style("opacity",kt).remove(),Pr=e.transition(ir.order()).style("opacity",1),kr=Math.max(se,0)+be,pr,mn=an(tr),Tn=Et.selectAll(".domain").data([0]),zn=(Tn.enter().append("path").attr("class","domain"),e.transition(Tn));gr.append("line"),gr.append("text");var Kn=gr.select("line"),Ci=Pr.select("line"),qi=ir.select("text").text(Er),xa=gr.select("text"),Gi=Pr.select("text"),va=J==="top"||J==="left"?-1:1,mo,Do,So,kn;if(J==="bottom"||J==="top"?(pr=fu,mo="x",So="y",Do="x2",kn="y2",qi.attr("dy",va<0?"0em":".71em").style("text-anchor","middle"),zn.attr("d","M"+mn[0]+","+va*xe+"V0H"+mn[1]+"V"+va*xe)):(pr=Fl,mo="y",So="x",Do="y2",kn="x2",qi.attr("dy",".32em").style("text-anchor",va<0?"end":"start"),zn.attr("d","M"+va*xe+","+mn[0]+"H0V"+mn[1]+"H"+va*xe)),Kn.attr(kn,va*se),xa.attr(So,va*kr),Ci.attr(Do,0).attr(kn,va*se),Gi.attr(mo,0).attr(So,va*kr),tr.rangeBand){var da=tr,Sa=da.rangeBand()/2;rr=tr=function(La){return da(La)+Sa}}else rr.rangeBand?rr=tr:wr.call(pr,tr,rr);gr.call(pr,rr,tr),Pr.call(pr,tr,tr)})}return tt.scale=function(Mt){return arguments.length?(V=Mt,tt):V},tt.orient=function(Mt){return arguments.length?(J=Mt in Cu?Mt+"":Sl,tt):J},tt.ticks=function(){return arguments.length?(Ae=r(arguments),tt):Ae},tt.tickValues=function(Mt){return arguments.length?(Ge=Mt,tt):Ge},tt.tickFormat=function(Mt){return arguments.length?(Pe=Mt,tt):Pe},tt.tickSize=function(Mt){var Et=arguments.length;return Et?(se=+Mt,xe=+arguments[Et-1],tt):se},tt.innerTickSize=function(Mt){return arguments.length?(se=+Mt,tt):se},tt.outerTickSize=function(Mt){return arguments.length?(xe=+Mt,tt):xe},tt.tickPadding=function(Mt){return arguments.length?(be=+Mt,tt):be},tt.tickSubdivide=function(){return arguments.length&&tt},tt};var Sl="bottom",Cu={top:1,right:1,bottom:1,left:1};function fu(V,J,se){V.attr("transform",function(xe){var be=J(xe);return"translate("+(isFinite(be)?be:se(xe))+",0)"})}function Fl(V,J,se){V.attr("transform",function(xe){var be=J(xe);return"translate(0,"+(isFinite(be)?be:se(xe))+")"})}e.svg.brush=function(){var V=ue(Et,"brushstart","brush","brushend"),J=null,se=null,xe=[0,0],be=[0,0],Ae,Ge,Pe=!0,tt=!0,Mt=xf[0];function Et(ir){ir.each(function(){var gr=e.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Er).on("touchstart.brush",Er),wr=gr.selectAll(".background").data([0]);wr.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),gr.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Pr=gr.selectAll(".resize").data(Mt,O);Pr.exit().remove(),Pr.enter().append("g").attr("class",function(Tn){return"resize "+Tn}).style("cursor",function(Tn){return El[Tn]}).append("rect").attr("x",function(Tn){return/[ew]$/.test(Tn)?-3:null}).attr("y",function(Tn){return/^[ns]/.test(Tn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Pr.style("display",Et.empty()?"none":null);var kr=e.transition(gr),pr=e.transition(wr),mn;J&&(mn=an(J),pr.attr("x",mn[0]).attr("width",mn[1]-mn[0]),tr(kr)),se&&(mn=an(se),pr.attr("y",mn[0]).attr("height",mn[1]-mn[0]),Tr(kr)),rr(kr)})}Et.event=function(ir){ir.each(function(){var gr=V.of(this,arguments),wr={x:xe,y:be,i:Ae,j:Ge},Pr=this.__chart__||wr;this.__chart__=wr,gs?e.select(this).transition().each("start.brush",function(){Ae=Pr.i,Ge=Pr.j,xe=Pr.x,be=Pr.y,gr({type:"brushstart"})}).tween("brush:brush",function(){var kr=Hl(xe,wr.x),pr=Hl(be,wr.y);return Ae=Ge=null,function(mn){xe=wr.x=kr(mn),be=wr.y=pr(mn),gr({type:"brush",mode:"resize"})}}).each("end.brush",function(){Ae=wr.i,Ge=wr.j,gr({type:"brush",mode:"resize"}),gr({type:"brushend"})}):(gr({type:"brushstart"}),gr({type:"brush",mode:"resize"}),gr({type:"brushend"}))})};function rr(ir){ir.selectAll(".resize").attr("transform",function(gr){return"translate("+xe[+/e$/.test(gr)]+","+be[+/^s/.test(gr)]+")"})}function tr(ir){ir.select(".extent").attr("x",xe[0]),ir.selectAll(".extent,.n>rect,.s>rect").attr("width",xe[1]-xe[0])}function Tr(ir){ir.select(".extent").attr("y",be[0]),ir.selectAll(".extent,.e>rect,.w>rect").attr("height",be[1]-be[0])}function Er(){var ir=this,gr=e.select(e.event.target),wr=V.of(ir,arguments),Pr=e.select(ir),kr=gr.datum(),pr=!/^(n|s)$/.test(kr)&&J,mn=!/^(e|w)$/.test(kr)&&se,Tn=gr.classed("extent"),zn=ar(ir),Kn,Ci=e.mouse(ir),qi,xa=e.select(a(ir)).on("keydown.brush",mo).on("keyup.brush",Do);if(e.event.changedTouches?xa.on("touchmove.brush",So).on("touchend.brush",da):xa.on("mousemove.brush",So).on("mouseup.brush",da),Pr.interrupt().selectAll("*").interrupt(),Tn)Ci[0]=xe[0]-Ci[0],Ci[1]=be[0]-Ci[1];else if(kr){var Gi=+/w$/.test(kr),va=+/^n/.test(kr);qi=[xe[1-Gi]-Ci[0],be[1-va]-Ci[1]],Ci[0]=xe[Gi],Ci[1]=be[va]}else e.event.altKey&&(Kn=Ci.slice());Pr.style("pointer-events","none").selectAll(".resize").style("display",null),e.select("body").style("cursor",gr.style("cursor")),wr({type:"brushstart"}),So();function mo(){e.event.keyCode==32&&(Tn||(Kn=null,Ci[0]-=xe[1],Ci[1]-=be[1],Tn=2),ne())}function Do(){e.event.keyCode==32&&Tn==2&&(Ci[0]+=xe[1],Ci[1]+=be[1],Tn=0,ne())}function So(){var Sa=e.mouse(ir),La=!1;qi&&(Sa[0]+=qi[0],Sa[1]+=qi[1]),Tn||(e.event.altKey?(Kn||(Kn=[(xe[0]+xe[1])/2,(be[0]+be[1])/2]),Ci[0]=xe[+(Sa[0]<Kn[0])],Ci[1]=be[+(Sa[1]<Kn[1])]):Kn=null),pr&&kn(Sa,J,0)&&(tr(Pr),La=!0),mn&&kn(Sa,se,1)&&(Tr(Pr),La=!0),La&&(rr(Pr),wr({type:"brush",mode:Tn?"move":"resize"}))}function kn(Sa,La,As){var Gs=an(La),ml=Gs[0],fs=Gs[1],Xl=Ci[As],Ye=As?be:xe,Yt=Ye[1]-Ye[0],lr,Or;if(Tn&&(ml-=Xl,fs-=Yt+Xl),lr=(As?tt:Pe)?Math.max(ml,Math.min(fs,Sa[As])):Sa[As],Tn?Or=(lr+=Xl)+Yt:(Kn&&(Xl=Math.max(ml,Math.min(fs,2*Kn[As]-lr))),Xl<lr?(Or=lr,lr=Xl):Or=Xl),Ye[0]!=lr||Ye[1]!=Or)return As?Ge=null:Ae=null,Ye[0]=lr,Ye[1]=Or,!0}function da(){So(),Pr.style("pointer-events","all").selectAll(".resize").style("display",Et.empty()?"none":null),e.select("body").style("cursor",null),xa.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),zn(),wr({type:"brushend"})}}return Et.x=function(ir){return arguments.length?(J=ir,Mt=xf[!J<<1|!se],Et):J},Et.y=function(ir){return arguments.length?(se=ir,Mt=xf[!J<<1|!se],Et):se},Et.clamp=function(ir){return arguments.length?(J&&se?(Pe=!!ir[0],tt=!!ir[1]):J?Pe=!!ir:se&&(tt=!!ir),Et):J&&se?[Pe,tt]:J?Pe:se?tt:null},Et.extent=function(ir){var gr,wr,Pr,kr,pr;return arguments.length?(J&&(gr=ir[0],wr=ir[1],se&&(gr=gr[0],wr=wr[0]),Ae=[gr,wr],J.invert&&(gr=J(gr),wr=J(wr)),wr<gr&&(pr=gr,gr=wr,wr=pr),(gr!=xe[0]||wr!=xe[1])&&(xe=[gr,wr])),se&&(Pr=ir[0],kr=ir[1],J&&(Pr=Pr[1],kr=kr[1]),Ge=[Pr,kr],se.invert&&(Pr=se(Pr),kr=se(kr)),kr<Pr&&(pr=Pr,Pr=kr,kr=pr),(Pr!=be[0]||kr!=be[1])&&(be=[Pr,kr])),Et):(J&&(Ae?(gr=Ae[0],wr=Ae[1]):(gr=xe[0],wr=xe[1],J.invert&&(gr=J.invert(gr),wr=J.invert(wr)),wr<gr&&(pr=gr,gr=wr,wr=pr))),se&&(Ge?(Pr=Ge[0],kr=Ge[1]):(Pr=be[0],kr=be[1],se.invert&&(Pr=se.invert(Pr),kr=se.invert(kr)),kr<Pr&&(pr=Pr,Pr=kr,kr=pr))),J&&se?[[gr,Pr],[wr,kr]]:J?[gr,wr]:se&&[Pr,kr])},Et.clear=function(){return Et.empty()||(xe=[0,0],be=[0,0],Ae=Ge=null),Et},Et.empty=function(){return!!J&&xe[0]==xe[1]||!!se&&be[0]==be[1]},e.rebind(Et,V,"on")};var El={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},xf=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];e.text=Jr(function(V){return V.responseText}),e.json=function(V,J){return ln(V,"application/json",ju,J)};function ju(V){return JSON.parse(V.responseText)}e.html=function(V,J){return ln(V,"text/html",Ku,J)};function Ku(V){var J=i.createRange();return J.selectNode(i.body),J.createContextualFragment(V.responseText)}e.xml=Jr(function(V){return V.responseXML}),typeof define=="function"&&define.amd?define(e):typeof Ek=="object"&&Ek.exports?Ek.exports=e:this.d3=e}).apply(self)});var aq=ie((kk,OJ)=>{(function(e,t){typeof kk=="object"&&typeof OJ!="undefined"?t(kk):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.d3=e.d3||{}))})(kk,function(e){"use strict";var t=new Date,r=new Date;function i(Me,Ke,We,et){function vt(at){return Me(at=arguments.length===0?new Date:new Date(+at)),at}return vt.floor=function(at){return Me(at=new Date(+at)),at},vt.ceil=function(at){return Me(at=new Date(at-1)),Ke(at,1),Me(at),at},vt.round=function(at){var Xe=vt(at),dt=vt.ceil(at);return at-Xe<dt-at?Xe:dt},vt.offset=function(at,Xe){return Ke(at=new Date(+at),Xe==null?1:Math.floor(Xe)),at},vt.range=function(at,Xe,dt){var _t=[],$t;if(at=vt.ceil(at),dt=dt==null?1:Math.floor(dt),!(at<Xe)||!(dt>0))return _t;do _t.push($t=new Date(+at)),Ke(at,dt),Me(at);while($t<at&&at<Xe);return _t},vt.filter=function(at){return i(function(Xe){if(Xe>=Xe)for(;Me(Xe),!at(Xe);)Xe.setTime(Xe-1)},function(Xe,dt){if(Xe>=Xe)if(dt<0)for(;++dt<=0;)for(;Ke(Xe,-1),!at(Xe););else for(;--dt>=0;)for(;Ke(Xe,1),!at(Xe););})},We&&(vt.count=function(at,Xe){return t.setTime(+at),r.setTime(+Xe),Me(t),Me(r),Math.floor(We(t,r))},vt.every=function(at){return at=Math.floor(at),!isFinite(at)||!(at>0)?null:at>1?vt.filter(et?function(Xe){return et(Xe)%at===0}:function(Xe){return vt.count(0,Xe)%at===0}):vt}),vt}var n=i(function(){},function(Me,Ke){Me.setTime(+Me+Ke)},function(Me,Ke){return Ke-Me});n.every=function(Me){return Me=Math.floor(Me),!isFinite(Me)||!(Me>0)?null:Me>1?i(function(Ke){Ke.setTime(Math.floor(Ke/Me)*Me)},function(Ke,We){Ke.setTime(+Ke+We*Me)},function(Ke,We){return(We-Ke)/Me}):n};var a=n.range,o=1e3,s=6e4,l=36e5,u=864e5,f=6048e5,c=i(function(Me){Me.setTime(Me-Me.getMilliseconds())},function(Me,Ke){Me.setTime(+Me+Ke*o)},function(Me,Ke){return(Ke-Me)/o},function(Me){return Me.getUTCSeconds()}),h=c.range,v=i(function(Me){Me.setTime(Me-Me.getMilliseconds()-Me.getSeconds()*o)},function(Me,Ke){Me.setTime(+Me+Ke*s)},function(Me,Ke){return(Ke-Me)/s},function(Me){return Me.getMinutes()}),d=v.range,x=i(function(Me){Me.setTime(Me-Me.getMilliseconds()-Me.getSeconds()*o-Me.getMinutes()*s)},function(Me,Ke){Me.setTime(+Me+Ke*l)},function(Me,Ke){return(Ke-Me)/l},function(Me){return Me.getHours()}),b=x.range,p=i(function(Me){Me.setHours(0,0,0,0)},function(Me,Ke){Me.setDate(Me.getDate()+Ke)},function(Me,Ke){return(Ke-Me-(Ke.getTimezoneOffset()-Me.getTimezoneOffset())*s)/u},function(Me){return Me.getDate()-1}),w=p.range;function A(Me){return i(function(Ke){Ke.setDate(Ke.getDate()-(Ke.getDay()+7-Me)%7),Ke.setHours(0,0,0,0)},function(Ke,We){Ke.setDate(Ke.getDate()+We*7)},function(Ke,We){return(We-Ke-(We.getTimezoneOffset()-Ke.getTimezoneOffset())*s)/f})}var T=A(0),k=A(1),_=A(2),E=A(3),S=A(4),g=A(5),C=A(6),M=T.range,P=k.range,D=_.range,q=E.range,O=S.range,U=g.range,B=C.range,F=i(function(Me){Me.setDate(1),Me.setHours(0,0,0,0)},function(Me,Ke){Me.setMonth(Me.getMonth()+Ke)},function(Me,Ke){return Ke.getMonth()-Me.getMonth()+(Ke.getFullYear()-Me.getFullYear())*12},function(Me){return Me.getMonth()}),N=F.range,X=i(function(Me){Me.setMonth(0,1),Me.setHours(0,0,0,0)},function(Me,Ke){Me.setFullYear(Me.getFullYear()+Ke)},function(Me,Ke){return Ke.getFullYear()-Me.getFullYear()},function(Me){return Me.getFullYear()});X.every=function(Me){return!isFinite(Me=Math.floor(Me))||!(Me>0)?null:i(function(Ke){Ke.setFullYear(Math.floor(Ke.getFullYear()/Me)*Me),Ke.setMonth(0,1),Ke.setHours(0,0,0,0)},function(Ke,We){Ke.setFullYear(Ke.getFullYear()+We*Me)})};var K=X.range,ne=i(function(Me){Me.setUTCSeconds(0,0)},function(Me,Ke){Me.setTime(+Me+Ke*s)},function(Me,Ke){return(Ke-Me)/s},function(Me){return Me.getUTCMinutes()}),fe=ne.range,ue=i(function(Me){Me.setUTCMinutes(0,0,0)},function(Me,Ke){Me.setTime(+Me+Ke*l)},function(Me,Ke){return(Ke-Me)/l},function(Me){return Me.getUTCHours()}),ee=ue.range,Z=i(function(Me){Me.setUTCHours(0,0,0,0)},function(Me,Ke){Me.setUTCDate(Me.getUTCDate()+Ke)},function(Me,Ke){return(Ke-Me)/u},function(Me){return Me.getUTCDate()-1}),oe=Z.range;function ce(Me){return i(function(Ke){Ke.setUTCDate(Ke.getUTCDate()-(Ke.getUTCDay()+7-Me)%7),Ke.setUTCHours(0,0,0,0)},function(Ke,We){Ke.setUTCDate(Ke.getUTCDate()+We*7)},function(Ke,We){return(We-Ke)/f})}var le=ce(0),me=ce(1),he=ce(2),te=ce(3),ge=ce(4),ae=ce(5),_e=ce(6),Ce=le.range,qe=me.range,rt=he.range,Re=te.range,Ie=ge.range,ot=ae.range,lt=_e.range,ht=i(function(Me){Me.setUTCDate(1),Me.setUTCHours(0,0,0,0)},function(Me,Ke){Me.setUTCMonth(Me.getUTCMonth()+Ke)},function(Me,Ke){return Ke.getUTCMonth()-Me.getUTCMonth()+(Ke.getUTCFullYear()-Me.getUTCFullYear())*12},function(Me){return Me.getUTCMonth()}),xt=ht.range,Vt=i(function(Me){Me.setUTCMonth(0,1),Me.setUTCHours(0,0,0,0)},function(Me,Ke){Me.setUTCFullYear(Me.getUTCFullYear()+Ke)},function(Me,Ke){return Ke.getUTCFullYear()-Me.getUTCFullYear()},function(Me){return Me.getUTCFullYear()});Vt.every=function(Me){return!isFinite(Me=Math.floor(Me))||!(Me>0)?null:i(function(Ke){Ke.setUTCFullYear(Math.floor(Ke.getUTCFullYear()/Me)*Me),Ke.setUTCMonth(0,1),Ke.setUTCHours(0,0,0,0)},function(Ke,We){Ke.setUTCFullYear(Ke.getUTCFullYear()+We*Me)})};var Ht=Vt.range;e.timeDay=p,e.timeDays=w,e.timeFriday=g,e.timeFridays=U,e.timeHour=x,e.timeHours=b,e.timeInterval=i,e.timeMillisecond=n,e.timeMilliseconds=a,e.timeMinute=v,e.timeMinutes=d,e.timeMonday=k,e.timeMondays=P,e.timeMonth=F,e.timeMonths=N,e.timeSaturday=C,e.timeSaturdays=B,e.timeSecond=c,e.timeSeconds=h,e.timeSunday=T,e.timeSundays=M,e.timeThursday=S,e.timeThursdays=O,e.timeTuesday=_,e.timeTuesdays=D,e.timeWednesday=E,e.timeWednesdays=q,e.timeWeek=T,e.timeWeeks=M,e.timeYear=X,e.timeYears=K,e.utcDay=Z,e.utcDays=oe,e.utcFriday=ae,e.utcFridays=ot,e.utcHour=ue,e.utcHours=ee,e.utcMillisecond=n,e.utcMilliseconds=a,e.utcMinute=ne,e.utcMinutes=fe,e.utcMonday=me,e.utcMondays=qe,e.utcMonth=ht,e.utcMonths=xt,e.utcSaturday=_e,e.utcSaturdays=lt,e.utcSecond=c,e.utcSeconds=h,e.utcSunday=le,e.utcSundays=Ce,e.utcThursday=ge,e.utcThursdays=Ie,e.utcTuesday=he,e.utcTuesdays=rt,e.utcWednesday=te,e.utcWednesdays=Re,e.utcWeek=le,e.utcWeeks=Ce,e.utcYear=Vt,e.utcYears=Ht,Object.defineProperty(e,"__esModule",{value:!0})})});var Kb=ie((Ck,BJ)=>{(function(e,t){typeof Ck=="object"&&typeof BJ!="undefined"?t(Ck,aq()):typeof define=="function"&&define.amd?define(["exports","d3-time"],t):(e=e||self,t(e.d3=e.d3||{},e.d3))})(Ck,function(e,t){"use strict";function r(gt){if(0<=gt.y&&gt.y<100){var kt=new Date(-1,gt.m,gt.d,gt.H,gt.M,gt.S,gt.L);return kt.setFullYear(gt.y),kt}return new Date(gt.y,gt.m,gt.d,gt.H,gt.M,gt.S,gt.L)}function i(gt){if(0<=gt.y&&gt.y<100){var kt=new Date(Date.UTC(-1,gt.m,gt.d,gt.H,gt.M,gt.S,gt.L));return kt.setUTCFullYear(gt.y),kt}return new Date(Date.UTC(gt.y,gt.m,gt.d,gt.H,gt.M,gt.S,gt.L))}function n(gt,kt,Je){return{y:gt,m:kt,d:Je,H:0,M:0,S:0,L:0}}function a(gt){var kt=gt.dateTime,Je=gt.date,Ze=gt.time,At=gt.periods,Se=gt.days,pe=gt.shortDays,Te=gt.months,it=gt.shortMonths,Dt=h(At),Wt=v(At),er=h(Se),qr=v(Se),Vr=h(pe),mr=v(pe),Fr=h(Te),nn=v(Te),jn=h(it),xn=v(it),pn={a:Gr,A:Yr,b:Xr,B:on,c:null,d:F,e:F,f:fe,H:N,I:X,j:K,L:ne,m:ue,M:ee,p:wn,q:Vi,Q:Xe,s:dt,S:Z,u:oe,U:ce,V:le,w:me,W:he,x:null,X:null,y:te,Y:ge,Z:ae,"%":at},ki={a:vi,A:Zi,b:Xi,B:ta,c:null,d:_e,e:_e,f:Ie,H:Ce,I:qe,j:rt,L:Re,m:ot,M:lt,p:Ya,q:Pi,Q:Xe,s:dt,S:ht,u:xt,U:Vt,V:Ht,w:Me,W:Ke,x:null,X:null,y:We,Y:et,Z:vt,"%":at},qn={a:ut,A:mt,b:Ot,B:nr,c:yr,d:S,e:S,f:q,H:C,I:C,j:g,L:D,m:E,M,p:ze,q:_,Q:U,s:B,S:P,u:x,U:b,V:p,w:d,W:w,x:vr,X:Rr,y:T,Y:A,Z:k,"%":O};pn.x=bi(Je,pn),pn.X=bi(Ze,pn),pn.c=bi(kt,pn),ki.x=bi(Je,ki),ki.X=bi(Ze,ki),ki.c=bi(kt,ki);function bi(Bn,Qi){return function(ya){var Nn=[],je=-1,Bt=0,ur=Bn.length,br,Jr,ln;for(ya instanceof Date||(ya=new Date(+ya));++je<ur;)Bn.charCodeAt(je)===37&&(Nn.push(Bn.slice(Bt,je)),(Jr=o[br=Bn.charAt(++je)])!=null?br=Bn.charAt(++je):Jr=br==="e"?" ":"0",(ln=Qi[br])&&(br=ln(ya,Jr)),Nn.push(br),Bt=je+1);return Nn.push(Bn.slice(Bt,je)),Nn.join("")}}function Si(Bn,Qi){return function(ya){var Nn=n(1900,void 0,1),je=nt(Nn,Bn,ya+="",0),Bt,ur;if(je!=ya.length)return null;if("Q"in Nn)return new Date(Nn.Q);if("s"in Nn)return new Date(Nn.s*1e3+("L"in Nn?Nn.L:0));if(Qi&&!("Z"in Nn)&&(Nn.Z=0),"p"in Nn&&(Nn.H=Nn.H%12+Nn.p*12),Nn.m===void 0&&(Nn.m="q"in Nn?Nn.q:0),"V"in Nn){if(Nn.V<1||Nn.V>53)return null;"w"in Nn||(Nn.w=1),"Z"in Nn?(Bt=i(n(Nn.y,0,1)),ur=Bt.getUTCDay(),Bt=ur>4||ur===0?t.utcMonday.ceil(Bt):t.utcMonday(Bt),Bt=t.utcDay.offset(Bt,(Nn.V-1)*7),Nn.y=Bt.getUTCFullYear(),Nn.m=Bt.getUTCMonth(),Nn.d=Bt.getUTCDate()+(Nn.w+6)%7):(Bt=r(n(Nn.y,0,1)),ur=Bt.getDay(),Bt=ur>4||ur===0?t.timeMonday.ceil(Bt):t.timeMonday(Bt),Bt=t.timeDay.offset(Bt,(Nn.V-1)*7),Nn.y=Bt.getFullYear(),Nn.m=Bt.getMonth(),Nn.d=Bt.getDate()+(Nn.w+6)%7)}else("W"in Nn||"U"in Nn)&&("w"in Nn||(Nn.w="u"in Nn?Nn.u%7:"W"in Nn?1:0),ur="Z"in Nn?i(n(Nn.y,0,1)).getUTCDay():r(n(Nn.y,0,1)).getDay(),Nn.m=0,Nn.d="W"in Nn?(Nn.w+6)%7+Nn.W*7-(ur+5)%7:Nn.w+Nn.U*7-(ur+6)%7);return"Z"in Nn?(Nn.H+=Nn.Z/100|0,Nn.M+=Nn.Z%100,i(Nn)):r(Nn)}}function nt(Bn,Qi,ya,Nn){for(var je=0,Bt=Qi.length,ur=ya.length,br,Jr;je<Bt;){if(Nn>=ur)return-1;if(br=Qi.charCodeAt(je++),br===37){if(br=Qi.charAt(je++),Jr=qn[br in o?Qi.charAt(je++):br],!Jr||(Nn=Jr(Bn,ya,Nn))<0)return-1}else if(br!=ya.charCodeAt(Nn++))return-1}return Nn}function ze(Bn,Qi,ya){var Nn=Dt.exec(Qi.slice(ya));return Nn?(Bn.p=Wt[Nn[0].toLowerCase()],ya+Nn[0].length):-1}function ut(Bn,Qi,ya){var Nn=Vr.exec(Qi.slice(ya));return Nn?(Bn.w=mr[Nn[0].toLowerCase()],ya+Nn[0].length):-1}function mt(Bn,Qi,ya){var Nn=er.exec(Qi.slice(ya));return Nn?(Bn.w=qr[Nn[0].toLowerCase()],ya+Nn[0].length):-1}function Ot(Bn,Qi,ya){var Nn=jn.exec(Qi.slice(ya));return Nn?(Bn.m=xn[Nn[0].toLowerCase()],ya+Nn[0].length):-1}function nr(Bn,Qi,ya){var Nn=Fr.exec(Qi.slice(ya));return Nn?(Bn.m=nn[Nn[0].toLowerCase()],ya+Nn[0].length):-1}function yr(Bn,Qi,ya){return nt(Bn,kt,Qi,ya)}function vr(Bn,Qi,ya){return nt(Bn,Je,Qi,ya)}function Rr(Bn,Qi,ya){return nt(Bn,Ze,Qi,ya)}function Gr(Bn){return pe[Bn.getDay()]}function Yr(Bn){return Se[Bn.getDay()]}function Xr(Bn){return it[Bn.getMonth()]}function on(Bn){return Te[Bn.getMonth()]}function wn(Bn){return At[+(Bn.getHours()>=12)]}function Vi(Bn){return 1+~~(Bn.getMonth()/3)}function vi(Bn){return pe[Bn.getUTCDay()]}function Zi(Bn){return Se[Bn.getUTCDay()]}function Xi(Bn){return it[Bn.getUTCMonth()]}function ta(Bn){return Te[Bn.getUTCMonth()]}function Ya(Bn){return At[+(Bn.getUTCHours()>=12)]}function Pi(Bn){return 1+~~(Bn.getUTCMonth()/3)}return{format:function(Bn){var Qi=bi(Bn+="",pn);return Qi.toString=function(){return Bn},Qi},parse:function(Bn){var Qi=Si(Bn+="",!1);return Qi.toString=function(){return Bn},Qi},utcFormat:function(Bn){var Qi=bi(Bn+="",ki);return Qi.toString=function(){return Bn},Qi},utcParse:function(Bn){var Qi=Si(Bn+="",!0);return Qi.toString=function(){return Bn},Qi}}}var o={"-":"",_:" ",0:"0"},s=/^\s*\d+/,l=/^%/,u=/[\\^$*+?|[\]().{}]/g;function f(gt,kt,Je){var Ze=gt<0?"-":"",At=(Ze?-gt:gt)+"",Se=At.length;return Ze+(Se<Je?new Array(Je-Se+1).join(kt)+At:At)}function c(gt){return gt.replace(u,"\\$&")}function h(gt){return new RegExp("^(?:"+gt.map(c).join("|")+")","i")}function v(gt){for(var kt={},Je=-1,Ze=gt.length;++Je<Ze;)kt[gt[Je].toLowerCase()]=Je;return kt}function d(gt,kt,Je){var Ze=s.exec(kt.slice(Je,Je+1));return Ze?(gt.w=+Ze[0],Je+Ze[0].length):-1}function x(gt,kt,Je){var Ze=s.exec(kt.slice(Je,Je+1));return Ze?(gt.u=+Ze[0],Je+Ze[0].length):-1}function b(gt,kt,Je){var Ze=s.exec(kt.slice(Je,Je+2));return Ze?(gt.U=+Ze[0],Je+Ze[0].length):-1}function p(gt,kt,Je){var Ze=s.exec(kt.slice(Je,Je+2));return Ze?(gt.V=+Ze[0],Je+Ze[0].length):-1}function w(gt,kt,Je){var Ze=s.exec(kt.slice(Je,Je+2));return Ze?(gt.W=+Ze[0],Je+Ze[0].length):-1}function A(gt,kt,Je){var Ze=s.exec(kt.slice(Je,Je+4));return Ze?(gt.y=+Ze[0],Je+Ze[0].length):-1}function T(gt,kt,Je){var Ze=s.exec(kt.slice(Je,Je+2));return Ze?(gt.y=+Ze[0]+(+Ze[0]>68?1900:2e3),Je+Ze[0].length):-1}function k(gt,kt,Je){var Ze=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(kt.slice(Je,Je+6));return Ze?(gt.Z=Ze[1]?0:-(Ze[2]+(Ze[3]||"00")),Je+Ze[0].length):-1}function _(gt,kt,Je){var Ze=s.exec(kt.slice(Je,Je+1));return Ze?(gt.q=Ze[0]*3-3,Je+Ze[0].length):-1}function E(gt,kt,Je){var Ze=s.exec(kt.slice(Je,Je+2));return Ze?(gt.m=Ze[0]-1,Je+Ze[0].length):-1}function S(gt,kt,Je){var Ze=s.exec(kt.slice(Je,Je+2));return Ze?(gt.d=+Ze[0],Je+Ze[0].length):-1}function g(gt,kt,Je){var Ze=s.exec(kt.slice(Je,Je+3));return Ze?(gt.m=0,gt.d=+Ze[0],Je+Ze[0].length):-1}function C(gt,kt,Je){var Ze=s.exec(kt.slice(Je,Je+2));return Ze?(gt.H=+Ze[0],Je+Ze[0].length):-1}function M(gt,kt,Je){var Ze=s.exec(kt.slice(Je,Je+2));return Ze?(gt.M=+Ze[0],Je+Ze[0].length):-1}function P(gt,kt,Je){var Ze=s.exec(kt.slice(Je,Je+2));return Ze?(gt.S=+Ze[0],Je+Ze[0].length):-1}function D(gt,kt,Je){var Ze=s.exec(kt.slice(Je,Je+3));return Ze?(gt.L=+Ze[0],Je+Ze[0].length):-1}function q(gt,kt,Je){var Ze=s.exec(kt.slice(Je,Je+6));return Ze?(gt.L=Math.floor(Ze[0]/1e3),Je+Ze[0].length):-1}function O(gt,kt,Je){var Ze=l.exec(kt.slice(Je,Je+1));return Ze?Je+Ze[0].length:-1}function U(gt,kt,Je){var Ze=s.exec(kt.slice(Je));return Ze?(gt.Q=+Ze[0],Je+Ze[0].length):-1}function B(gt,kt,Je){var Ze=s.exec(kt.slice(Je));return Ze?(gt.s=+Ze[0],Je+Ze[0].length):-1}function F(gt,kt){return f(gt.getDate(),kt,2)}function N(gt,kt){return f(gt.getHours(),kt,2)}function X(gt,kt){return f(gt.getHours()%12||12,kt,2)}function K(gt,kt){return f(1+t.timeDay.count(t.timeYear(gt),gt),kt,3)}function ne(gt,kt){return f(gt.getMilliseconds(),kt,3)}function fe(gt,kt){return ne(gt,kt)+"000"}function ue(gt,kt){return f(gt.getMonth()+1,kt,2)}function ee(gt,kt){return f(gt.getMinutes(),kt,2)}function Z(gt,kt){return f(gt.getSeconds(),kt,2)}function oe(gt){var kt=gt.getDay();return kt===0?7:kt}function ce(gt,kt){return f(t.timeSunday.count(t.timeYear(gt)-1,gt),kt,2)}function le(gt,kt){var Je=gt.getDay();return gt=Je>=4||Je===0?t.timeThursday(gt):t.timeThursday.ceil(gt),f(t.timeThursday.count(t.timeYear(gt),gt)+(t.timeYear(gt).getDay()===4),kt,2)}function me(gt){return gt.getDay()}function he(gt,kt){return f(t.timeMonday.count(t.timeYear(gt)-1,gt),kt,2)}function te(gt,kt){return f(gt.getFullYear()%100,kt,2)}function ge(gt,kt){return f(gt.getFullYear()%1e4,kt,4)}function ae(gt){var kt=gt.getTimezoneOffset();return(kt>0?"-":(kt*=-1,"+"))+f(kt/60|0,"0",2)+f(kt%60,"0",2)}function _e(gt,kt){return f(gt.getUTCDate(),kt,2)}function Ce(gt,kt){return f(gt.getUTCHours(),kt,2)}function qe(gt,kt){return f(gt.getUTCHours()%12||12,kt,2)}function rt(gt,kt){return f(1+t.utcDay.count(t.utcYear(gt),gt),kt,3)}function Re(gt,kt){return f(gt.getUTCMilliseconds(),kt,3)}function Ie(gt,kt){return Re(gt,kt)+"000"}function ot(gt,kt){return f(gt.getUTCMonth()+1,kt,2)}function lt(gt,kt){return f(gt.getUTCMinutes(),kt,2)}function ht(gt,kt){return f(gt.getUTCSeconds(),kt,2)}function xt(gt){var kt=gt.getUTCDay();return kt===0?7:kt}function Vt(gt,kt){return f(t.utcSunday.count(t.utcYear(gt)-1,gt),kt,2)}function Ht(gt,kt){var Je=gt.getUTCDay();return gt=Je>=4||Je===0?t.utcThursday(gt):t.utcThursday.ceil(gt),f(t.utcThursday.count(t.utcYear(gt),gt)+(t.utcYear(gt).getUTCDay()===4),kt,2)}function Me(gt){return gt.getUTCDay()}function Ke(gt,kt){return f(t.utcMonday.count(t.utcYear(gt)-1,gt),kt,2)}function We(gt,kt){return f(gt.getUTCFullYear()%100,kt,2)}function et(gt,kt){return f(gt.getUTCFullYear()%1e4,kt,4)}function vt(){return"+0000"}function at(){return"%"}function Xe(gt){return+gt}function dt(gt){return Math.floor(+gt/1e3)}var _t;$t({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function $t(gt){return _t=a(gt),e.timeFormat=_t.format,e.timeParse=_t.parse,e.utcFormat=_t.utcFormat,e.utcParse=_t.utcParse,_t}var Ut="%Y-%m-%dT%H:%M:%S.%LZ";function fr(gt){return gt.toISOString()}var ar=Date.prototype.toISOString?fr:e.utcFormat(Ut);function cr(gt){var kt=new Date(gt);return isNaN(kt)?null:kt}var It=+new Date("2000-01-01T00:00:00.000Z")?cr:e.utcParse(Ut);e.isoFormat=ar,e.isoParse=It,e.timeFormatDefaultLocale=$t,e.timeFormatLocale=a,Object.defineProperty(e,"__esModule",{value:!0})})});var oq=ie((Lk,NJ)=>{(function(e,t){typeof Lk=="object"&&typeof NJ!="undefined"?t(Lk):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis!="undefined"?globalThis:e||self,t(e.d3=e.d3||{}))})(Lk,function(e){"use strict";function t(E){return Math.abs(E=Math.round(E))>=1e21?E.toLocaleString("en").replace(/,/g,""):E.toString(10)}function r(E,S){if((g=(E=S?E.toExponential(S-1):E.toExponential()).indexOf("e"))<0)return null;var g,C=E.slice(0,g);return[C.length>1?C[0]+C.slice(2):C,+E.slice(g+1)]}function i(E){return E=r(Math.abs(E)),E?E[1]:NaN}function n(E,S){return function(g,C){for(var M=g.length,P=[],D=0,q=E[0],O=0;M>0&&q>0&&(O+q+1>C&&(q=Math.max(1,C-O)),P.push(g.substring(M-=q,M+q)),!((O+=q+1)>C));)q=E[D=(D+1)%E.length];return P.reverse().join(S)}}function a(E){return function(S){return S.replace(/[0-9]/g,function(g){return E[+g]})}}var o=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function s(E){if(!(S=o.exec(E)))throw new Error("invalid format: "+E);var S;return new l({fill:S[1],align:S[2],sign:S[3],symbol:S[4],zero:S[5],width:S[6],comma:S[7],precision:S[8]&&S[8].slice(1),trim:S[9],type:S[10]})}s.prototype=l.prototype;function l(E){this.fill=E.fill===void 0?" ":E.fill+"",this.align=E.align===void 0?">":E.align+"",this.sign=E.sign===void 0?"-":E.sign+"",this.symbol=E.symbol===void 0?"":E.symbol+"",this.zero=!!E.zero,this.width=E.width===void 0?void 0:+E.width,this.comma=!!E.comma,this.precision=E.precision===void 0?void 0:+E.precision,this.trim=!!E.trim,this.type=E.type===void 0?"":E.type+""}l.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function u(E){e:for(var S=E.length,g=1,C=-1,M;g<S;++g)switch(E[g]){case".":C=M=g;break;case"0":C===0&&(C=g),M=g;break;default:if(!+E[g])break e;C>0&&(C=0);break}return C>0?E.slice(0,C)+E.slice(M+1):E}var f;function c(E,S){var g=r(E,S);if(!g)return E+"";var C=g[0],M=g[1],P=M-(f=Math.max(-8,Math.min(8,Math.floor(M/3)))*3)+1,D=C.length;return P===D?C:P>D?C+new Array(P-D+1).join("0"):P>0?C.slice(0,P)+"."+C.slice(P):"0."+new Array(1-P).join("0")+r(E,Math.max(0,S+P-1))[0]}function h(E,S){var g=r(E,S);if(!g)return E+"";var C=g[0],M=g[1];return M<0?"0."+new Array(-M).join("0")+C:C.length>M+1?C.slice(0,M+1)+"."+C.slice(M+1):C+new Array(M-C.length+2).join("0")}var v={"%":function(E,S){return(E*100).toFixed(S)},b:function(E){return Math.round(E).toString(2)},c:function(E){return E+""},d:t,e:function(E,S){return E.toExponential(S)},f:function(E,S){return E.toFixed(S)},g:function(E,S){return E.toPrecision(S)},o:function(E){return Math.round(E).toString(8)},p:function(E,S){return h(E*100,S)},r:h,s:c,X:function(E){return Math.round(E).toString(16).toUpperCase()},x:function(E){return Math.round(E).toString(16)}};function d(E){return E}var x=Array.prototype.map,b=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function p(E){var S=E.grouping===void 0||E.thousands===void 0?d:n(x.call(E.grouping,Number),E.thousands+""),g=E.currency===void 0?"":E.currency[0]+"",C=E.currency===void 0?"":E.currency[1]+"",M=E.decimal===void 0?".":E.decimal+"",P=E.numerals===void 0?d:a(x.call(E.numerals,String)),D=E.percent===void 0?"%":E.percent+"",q=E.minus===void 0?"-":E.minus+"",O=E.nan===void 0?"NaN":E.nan+"";function U(F){F=s(F);var N=F.fill,X=F.align,K=F.sign,ne=F.symbol,fe=F.zero,ue=F.width,ee=F.comma,Z=F.precision,oe=F.trim,ce=F.type;ce==="n"?(ee=!0,ce="g"):v[ce]||(Z===void 0&&(Z=12),oe=!0,ce="g"),(fe||N==="0"&&X==="=")&&(fe=!0,N="0",X="=");var le=ne==="$"?g:ne==="#"&&/[boxX]/.test(ce)?"0"+ce.toLowerCase():"",me=ne==="$"?C:/[%p]/.test(ce)?D:"",he=v[ce],te=/[defgprs%]/.test(ce);Z=Z===void 0?6:/[gprs]/.test(ce)?Math.max(1,Math.min(21,Z)):Math.max(0,Math.min(20,Z));function ge(ae){var _e=le,Ce=me,qe,rt,Re;if(ce==="c")Ce=he(ae)+Ce,ae="";else{ae=+ae;var Ie=ae<0||1/ae<0;if(ae=isNaN(ae)?O:he(Math.abs(ae),Z),oe&&(ae=u(ae)),Ie&&+ae==0&&K!=="+"&&(Ie=!1),_e=(Ie?K==="("?K:q:K==="-"||K==="("?"":K)+_e,Ce=(ce==="s"?b[8+f/3]:"")+Ce+(Ie&&K==="("?")":""),te){for(qe=-1,rt=ae.length;++qe<rt;)if(Re=ae.charCodeAt(qe),48>Re||Re>57){Ce=(Re===46?M+ae.slice(qe+1):ae.slice(qe))+Ce,ae=ae.slice(0,qe);break}}}ee&&!fe&&(ae=S(ae,1/0));var ot=_e.length+ae.length+Ce.length,lt=ot<ue?new Array(ue-ot+1).join(N):"";switch(ee&&fe&&(ae=S(lt+ae,lt.length?ue-Ce.length:1/0),lt=""),X){case"<":ae=_e+ae+Ce+lt;break;case"=":ae=_e+lt+ae+Ce;break;case"^":ae=lt.slice(0,ot=lt.length>>1)+_e+ae+Ce+lt.slice(ot);break;default:ae=lt+_e+ae+Ce;break}return P(ae)}return ge.toString=function(){return F+""},ge}function B(F,N){var X=U((F=s(F),F.type="f",F)),K=Math.max(-8,Math.min(8,Math.floor(i(N)/3)))*3,ne=Math.pow(10,-K),fe=b[8+K/3];return function(ue){return X(ne*ue)+fe}}return{format:U,formatPrefix:B}}var w;A({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function A(E){return w=p(E),e.format=w.format,e.formatPrefix=w.formatPrefix,w}function T(E){return Math.max(0,-i(Math.abs(E)))}function k(E,S){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(i(S)/3)))*3-i(Math.abs(E)))}function _(E,S){return E=Math.abs(E),S=Math.abs(S)-E,Math.max(0,i(S)-i(E))+1}e.FormatSpecifier=l,e.formatDefaultLocale=A,e.formatLocale=p,e.formatSpecifier=s,e.precisionFixed=T,e.precisionPrefix=k,e.precisionRound=_,Object.defineProperty(e,"__esModule",{value:!0})})});var VJ=ie((i$t,UJ)=>{"use strict";UJ.exports=function(e){for(var t=e.length,r,i=0;i<t;i++)if(r=e.charCodeAt(i),(r<9||r>13)&&r!==32&&r!==133&&r!==160&&r!==5760&&r!==6158&&(r<8192||r>8205)&&r!==8232&&r!==8233&&r!==8239&&r!==8287&&r!==8288&&r!==12288&&r!==65279)return!1;return!0}});var la=ie((a$t,HJ)=>{"use strict";var GQe=VJ();HJ.exports=function(e){var t=typeof e;if(t==="string"){var r=e;if(e=+e,e===0&&GQe(r))return!1}else if(t!=="number")return!1;return e-e<1}});var eo=ie((o$t,GJ)=>{"use strict";GJ.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}});var sq=ie((Pk,YJ)=>{(function(e,t){typeof Pk=="object"&&typeof YJ!="undefined"?t(Pk):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis!="undefined"?globalThis:e||self,t(e["base64-arraybuffer"]={}))})(Pk,function(e){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=typeof Uint8Array=="undefined"?[]:new Uint8Array(256),i=0;i<t.length;i++)r[t.charCodeAt(i)]=i;var n=function(o){var s=new Uint8Array(o),l,u=s.length,f="";for(l=0;l<u;l+=3)f+=t[s[l]>>2],f+=t[(s[l]&3)<<4|s[l+1]>>4],f+=t[(s[l+1]&15)<<2|s[l+2]>>6],f+=t[s[l+2]&63];return u%3===2?f=f.substring(0,f.length-1)+"=":u%3===1&&(f=f.substring(0,f.length-2)+"=="),f},a=function(o){var s=o.length*.75,l=o.length,u,f=0,c,h,v,d;o[o.length-1]==="="&&(s--,o[o.length-2]==="="&&s--);var x=new ArrayBuffer(s),b=new Uint8Array(x);for(u=0;u<l;u+=4)c=r[o.charCodeAt(u)],h=r[o.charCodeAt(u+1)],v=r[o.charCodeAt(u+2)],d=r[o.charCodeAt(u+3)],b[f++]=c<<2|h>>4,b[f++]=(h&15)<<4|v>>2,b[f++]=(v&3)<<6|d&63;return x};e.decode=a,e.encode=n,Object.defineProperty(e,"__esModule",{value:!0})})});var Rg=ie((s$t,WJ)=>{"use strict";WJ.exports=function(t){return window&&window.process&&window.process.versions?Object.prototype.toString.call(t)==="[object Object]":Object.prototype.toString.call(t)==="[object Object]"&&Object.getPrototypeOf(t).hasOwnProperty("hasOwnProperty")}});var hh=ie(Qp=>{"use strict";var YQe=sq().decode,WQe=Rg(),lq=Array.isArray,XQe=ArrayBuffer,ZQe=DataView;function XJ(e){return XQe.isView(e)&&!(e instanceof ZQe)}Qp.isTypedArray=XJ;function Rk(e){return lq(e)||XJ(e)}Qp.isArrayOrTypedArray=Rk;function jQe(e){return!Rk(e[0])}Qp.isArray1D=jQe;Qp.ensureArray=function(e,t){return lq(e)||(e=[]),e.length=t,e};var vc={u1c:typeof Uint8ClampedArray=="undefined"?void 0:Uint8ClampedArray,i1:typeof Int8Array=="undefined"?void 0:Int8Array,u1:typeof Uint8Array=="undefined"?void 0:Uint8Array,i2:typeof Int16Array=="undefined"?void 0:Int16Array,u2:typeof Uint16Array=="undefined"?void 0:Uint16Array,i4:typeof Int32Array=="undefined"?void 0:Int32Array,u4:typeof Uint32Array=="undefined"?void 0:Uint32Array,f4:typeof Float32Array=="undefined"?void 0:Float32Array,f8:typeof Float64Array=="undefined"?void 0:Float64Array};vc.uint8c=vc.u1c;vc.uint8=vc.u1;vc.int8=vc.i1;vc.uint16=vc.u2;vc.int16=vc.i2;vc.uint32=vc.u4;vc.int32=vc.i4;vc.float32=vc.f4;vc.float64=vc.f8;function uq(e){return e.constructor===ArrayBuffer}Qp.isArrayBuffer=uq;Qp.decodeTypedArraySpec=function(e){var t=[],r=KQe(e),i=r.dtype,n=vc[i];if(!n)throw new Error('Error in dtype: "'+i+'"');var a=n.BYTES_PER_ELEMENT,o=r.bdata;uq(o)||(o=YQe(o));var s=r.shape===void 0?[o.byteLength/a]:(""+r.shape).split(",");s.reverse();var l=s.length,u,f,c=+s[0],h=a*c,v=0;if(l===1)t=new n(o);else if(l===2)for(u=+s[1],f=0;f<u;f++)t[f]=new n(o,v,c),v+=h;else if(l===3){u=+s[1];for(var d=+s[2],x=0;x<d;x++)for(t[x]=[],f=0;f<u;f++)t[x][f]=new n(o,v,c),v+=h}else throw new Error("ndim: "+l+'is not supported with the shape:"'+r.shape+'"');return t.bdata=r.bdata,t.dtype=r.dtype,t.shape=s.reverse().join(","),e._inputArray=t,t};Qp.isTypedArraySpec=function(e){return WQe(e)&&e.hasOwnProperty("dtype")&&typeof e.dtype=="string"&&e.hasOwnProperty("bdata")&&(typeof e.bdata=="string"||uq(e.bdata))&&(e.shape===void 0||e.hasOwnProperty("shape")&&(typeof e.shape=="string"||typeof e.shape=="number"))};function KQe(e){return{bdata:e.bdata,dtype:e.dtype,shape:e.shape}}Qp.concat=function(){var e=[],t=!0,r=0,i,n,a,o,s,l,u,f;for(a=0;a<arguments.length;a++)o=arguments[a],l=o.length,l&&(n?e.push(o):(n=o,s=l),lq(o)?i=!1:(t=!1,r?i!==o.constructor&&(i=!1):i=o.constructor),r+=l);if(!r)return[];if(!e.length)return n;if(t)return n.concat.apply(n,e);if(i){for(u=new i(r),u.set(n),a=0;a<e.length;a++)o=e[a],u.set(o,s),s+=o.length;return u}for(u=new Array(r),f=0;f<n.length;f++)u[f]=n[f];for(a=0;a<e.length;a++){for(o=e[a],f=0;f<o.length;f++)u[s+f]=o[f];s+=f}return u};Qp.maxRowLength=function(e){return ZJ(e,Math.max,0)};Qp.minRowLength=function(e){return ZJ(e,Math.min,1/0)};function ZJ(e,t,r){if(Rk(e))if(Rk(e[0])){for(var i=r,n=0;n<e.length;n++)i=t(i,e[n].length);return i}else return e.length;return 0}});var sA=ie((u$t,$J)=>{"use strict";var jJ=la(),cq=hh().isArrayOrTypedArray;$J.exports=function(t,r){if(jJ(r))r=String(r);else if(typeof r!="string"||r.substr(r.length-4)==="[-1]")throw"bad property string";var i=r.split("."),n,a,o,s;for(s=0;s<i.length;s++)if(String(i[s]).slice(0,2)==="__")throw"bad property string";for(s=0;s<i.length;){if(n=String(i[s]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),n){if(n[1])i[s]=n[1];else if(s===0)i.splice(0,1);else throw"bad property string";for(a=n[2].substr(1,n[2].length-2).split("]["),o=0;o<a.length;o++)s++,i.splice(s,0,Number(a[o]))}s++}return typeof t!="object"?e$e(t,r,i):{set:JJ(t,i,r),get:KJ(t,i),astr:r,parts:i,obj:t}};function KJ(e,t){return function(){var r=e,i,n,a,o,s;for(o=0;o<t.length-1;o++){if(i=t[o],i===-1){for(n=!0,a=[],s=0;s<r.length;s++)a[s]=KJ(r[s],t.slice(o+1))(),a[s]!==a[0]&&(n=!1);return n?a[0]:a}if(typeof i=="number"&&!cq(r)||(r=r[i],typeof r!="object"||r===null))return}if(!(typeof r!="object"||r===null)&&(a=r[t[o]],a!==null))return a}}var JQe=/(^|\.)args\[/;function fq(e,t){return e===void 0||e===null&&!t.match(JQe)}function JJ(e,t,r){return function(i){var n=e,a="",o=[[e,a]],s=fq(i,r),l,u;for(u=0;u<t.length-1;u++){if(l=t[u],typeof l=="number"&&!cq(n))throw"array index but container is not an array";if(l===-1){if(s=!$Qe(n,t.slice(u+1),i,r),s)break;return}if(!QJ(n,l,t[u+1],s))break;if(n=n[l],typeof n!="object"||n===null)throw"container is not an object";a=QQe(a,l),o.push([n,a])}if(s){if(u===t.length-1&&(delete n[t[u]],Array.isArray(n)&&+t[u]===n.length-1))for(;n.length&&n[n.length-1]===void 0;)n.pop()}else n[t[u]]=i}}function QQe(e,t){var r=t;return jJ(t)?r="["+t+"]":e&&(r="."+t),e+r}function $Qe(e,t,r,i){var n=cq(r),a=!0,o=r,s=i.replace("-1",0),l=n?!1:fq(r,s),u=t[0],f;for(f=0;f<e.length;f++)s=i.replace("-1",f),n&&(o=r[f%r.length],l=fq(o,s)),l&&(a=!1),QJ(e,f,u,l)&&JJ(e[f],t,i.replace("-1",f))(o);return a}function QJ(e,t,r,i){if(e[t]===void 0){if(i)return!1;typeof r=="number"?e[t]=[]:e[t]={}}return!0}function e$e(e,t,r){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:r,obj:e}}});var nQ=ie((f$t,rQ)=>{"use strict";var Jb=sA(),t$e=/^\w*$/,r$e=0,eQ=1,Dk=2,tQ=3,tx=4;rQ.exports=function(t,r,i,n){i=i||"name",n=n||"value";var a,o,s,l={};r&&r.length?(s=Jb(t,r),o=s.get()):o=t,r=r||"";var u={};if(o)for(a=0;a<o.length;a++)u[o[a][i]]=a;var f=t$e.test(n),c={set:function(h,v){var d=v===null?tx:r$e;if(!o){if(!s||d===tx)return;o=[],s.set(o)}var x=u[h];if(x===void 0){if(d===tx)return;d=d|tQ,x=o.length,u[h]=x}else v!==(f?o[x][n]:Jb(o[x],n).get())&&(d=d|Dk);var b=o[x]=o[x]||{};return b[i]=h,f?b[n]=v:Jb(b,n).set(v),v!==null&&(d=d&~tx),l[x]=l[x]|d,c},get:function(h){if(o){var v=u[h];if(v!==void 0)return f?o[v][n]:Jb(o[v],n).get()}},rename:function(h,v){var d=u[h];return d===void 0||(l[d]=l[d]|eQ,u[v]=d,delete u[h],o[d][i]=v),c},remove:function(h){var v=u[h];if(v===void 0)return c;var d=o[v];if(Object.keys(d).length>2)return l[v]=l[v]|Dk,c.set(h,null);if(f){for(a=v;a<o.length;a++)l[a]=l[a]|tQ;for(a=v;a<o.length;a++)u[o[a][i]]--;o.splice(v,1),delete u[h]}else Jb(d,n).set(null),l[v]=l[v]|Dk|tx;return c},constructUpdate:function(){for(var h,v,d={},x=Object.keys(l),b=0;b<x.length;b++)v=x[b],h=r+"["+v+"]",o[v]?(l[v]&eQ&&(d[h+"."+i]=o[v][i]),l[v]&Dk&&(f?d[h+"."+n]=l[v]&tx?null:o[v][n]:d[h+"."+n]=l[v]&tx?null:Jb(o[v],n).get())):d[h]=null;return d}};return c}});var aQ=ie((c$t,iQ)=>{"use strict";var n$e=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,i$e=/^[^\.\[\]]+$/;iQ.exports=function(e,t){for(;t;){var r=e.match(n$e);if(r)e=r[1];else if(e.match(i$e))e="";else throw new Error("bad relativeAttr call:"+[e,t]);if(t.charAt(0)==="^")t=t.slice(1);else break}return e&&t.charAt(0)!=="["?e+"."+t:e+t}});var Ik=ie((h$t,oQ)=>{"use strict";var a$e=la();oQ.exports=function(t,r){if(t>0)return Math.log(t)/Math.LN10;var i=Math.log(Math.min(r[0],r[1]))/Math.LN10;return a$e(i)||(i=Math.log(Math.max(r[0],r[1]))/Math.LN10-6),i}});var uQ=ie((v$t,lQ)=>{"use strict";var sQ=hh().isArrayOrTypedArray,lA=Rg();lQ.exports=function e(t,r){for(var i in r){var n=r[i],a=t[i];if(a!==n)if(i.charAt(0)==="_"||typeof n=="function"){if(i in t)continue;t[i]=n}else if(sQ(n)&&sQ(a)&&lA(n[0])){if(i==="customdata"||i==="ids")continue;for(var o=Math.min(n.length,a.length),s=0;s<o;s++)a[s]!==n[s]&&lA(n[s])&&lA(a[s])&&e(a[s],n[s])}else lA(n)&&lA(a)&&(e(a,n),Object.keys(a).length||delete t[i])}}});var Qb=ie((d$t,fQ)=>{"use strict";function o$e(e,t){var r=e%t;return r<0?r+t:r}function s$e(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}fQ.exports={mod:o$e,modHalf:s$e}});var Kf=ie((p$t,Fk)=>{(function(e){var t=/^\s+/,r=/\s+$/,i=0,n=e.round,a=e.min,o=e.max,s=e.random;function l(te,ge){if(te=te||"",ge=ge||{},te instanceof l)return te;if(!(this instanceof l))return new l(te,ge);var ae=u(te);this._originalInput=te,this._r=ae.r,this._g=ae.g,this._b=ae.b,this._a=ae.a,this._roundA=n(100*this._a)/100,this._format=ge.format||ae.format,this._gradientType=ge.gradientType,this._r<1&&(this._r=n(this._r)),this._g<1&&(this._g=n(this._g)),this._b<1&&(this._b=n(this._b)),this._ok=ae.ok,this._tc_id=i++}l.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var te=this.toRgb();return(te.r*299+te.g*587+te.b*114)/1e3},getLuminance:function(){var te=this.toRgb(),ge,ae,_e,Ce,qe,rt;return ge=te.r/255,ae=te.g/255,_e=te.b/255,ge<=.03928?Ce=ge/12.92:Ce=e.pow((ge+.055)/1.055,2.4),ae<=.03928?qe=ae/12.92:qe=e.pow((ae+.055)/1.055,2.4),_e<=.03928?rt=_e/12.92:rt=e.pow((_e+.055)/1.055,2.4),.2126*Ce+.7152*qe+.0722*rt},setAlpha:function(te){return this._a=F(te),this._roundA=n(100*this._a)/100,this},toHsv:function(){var te=v(this._r,this._g,this._b);return{h:te.h*360,s:te.s,v:te.v,a:this._a}},toHsvString:function(){var te=v(this._r,this._g,this._b),ge=n(te.h*360),ae=n(te.s*100),_e=n(te.v*100);return this._a==1?"hsv("+ge+", "+ae+"%, "+_e+"%)":"hsva("+ge+", "+ae+"%, "+_e+"%, "+this._roundA+")"},toHsl:function(){var te=c(this._r,this._g,this._b);return{h:te.h*360,s:te.s,l:te.l,a:this._a}},toHslString:function(){var te=c(this._r,this._g,this._b),ge=n(te.h*360),ae=n(te.s*100),_e=n(te.l*100);return this._a==1?"hsl("+ge+", "+ae+"%, "+_e+"%)":"hsla("+ge+", "+ae+"%, "+_e+"%, "+this._roundA+")"},toHex:function(te){return x(this._r,this._g,this._b,te)},toHexString:function(te){return"#"+this.toHex(te)},toHex8:function(te){return b(this._r,this._g,this._b,this._a,te)},toHex8String:function(te){return"#"+this.toHex8(te)},toRgb:function(){return{r:n(this._r),g:n(this._g),b:n(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+n(this._r)+", "+n(this._g)+", "+n(this._b)+")":"rgba("+n(this._r)+", "+n(this._g)+", "+n(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:n(N(this._r,255)*100)+"%",g:n(N(this._g,255)*100)+"%",b:n(N(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+n(N(this._r,255)*100)+"%, "+n(N(this._g,255)*100)+"%, "+n(N(this._b,255)*100)+"%)":"rgba("+n(N(this._r,255)*100)+"%, "+n(N(this._g,255)*100)+"%, "+n(N(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:U[x(this._r,this._g,this._b,!0)]||!1},toFilter:function(te){var ge="#"+p(this._r,this._g,this._b,this._a),ae=ge,_e=this._gradientType?"GradientType = 1, ":"";if(te){var Ce=l(te);ae="#"+p(Ce._r,Ce._g,Ce._b,Ce._a)}return"progid:DXImageTransform.Microsoft.gradient("+_e+"startColorstr="+ge+",endColorstr="+ae+")"},toString:function(te){var ge=!!te;te=te||this._format;var ae=!1,_e=this._a<1&&this._a>=0,Ce=!ge&&_e&&(te==="hex"||te==="hex6"||te==="hex3"||te==="hex4"||te==="hex8"||te==="name");return Ce?te==="name"&&this._a===0?this.toName():this.toRgbString():(te==="rgb"&&(ae=this.toRgbString()),te==="prgb"&&(ae=this.toPercentageRgbString()),(te==="hex"||te==="hex6")&&(ae=this.toHexString()),te==="hex3"&&(ae=this.toHexString(!0)),te==="hex4"&&(ae=this.toHex8String(!0)),te==="hex8"&&(ae=this.toHex8String()),te==="name"&&(ae=this.toName()),te==="hsl"&&(ae=this.toHslString()),te==="hsv"&&(ae=this.toHsvString()),ae||this.toHexString())},clone:function(){return l(this.toString())},_applyModification:function(te,ge){var ae=te.apply(null,[this].concat([].slice.call(ge)));return this._r=ae._r,this._g=ae._g,this._b=ae._b,this.setAlpha(ae._a),this},lighten:function(){return this._applyModification(k,arguments)},brighten:function(){return this._applyModification(_,arguments)},darken:function(){return this._applyModification(E,arguments)},desaturate:function(){return this._applyModification(w,arguments)},saturate:function(){return this._applyModification(A,arguments)},greyscale:function(){return this._applyModification(T,arguments)},spin:function(){return this._applyModification(S,arguments)},_applyCombination:function(te,ge){return te.apply(null,[this].concat([].slice.call(ge)))},analogous:function(){return this._applyCombination(D,arguments)},complement:function(){return this._applyCombination(g,arguments)},monochromatic:function(){return this._applyCombination(q,arguments)},splitcomplement:function(){return this._applyCombination(P,arguments)},triad:function(){return this._applyCombination(C,arguments)},tetrad:function(){return this._applyCombination(M,arguments)}},l.fromRatio=function(te,ge){if(typeof te=="object"){var ae={};for(var _e in te)te.hasOwnProperty(_e)&&(_e==="a"?ae[_e]=te[_e]:ae[_e]=ee(te[_e]));te=ae}return l(te,ge)};function u(te){var ge={r:0,g:0,b:0},ae=1,_e=null,Ce=null,qe=null,rt=!1,Re=!1;return typeof te=="string"&&(te=me(te)),typeof te=="object"&&(le(te.r)&&le(te.g)&&le(te.b)?(ge=f(te.r,te.g,te.b),rt=!0,Re=String(te.r).substr(-1)==="%"?"prgb":"rgb"):le(te.h)&&le(te.s)&&le(te.v)?(_e=ee(te.s),Ce=ee(te.v),ge=d(te.h,_e,Ce),rt=!0,Re="hsv"):le(te.h)&&le(te.s)&&le(te.l)&&(_e=ee(te.s),qe=ee(te.l),ge=h(te.h,_e,qe),rt=!0,Re="hsl"),te.hasOwnProperty("a")&&(ae=te.a)),ae=F(ae),{ok:rt,format:te.format||Re,r:a(255,o(ge.r,0)),g:a(255,o(ge.g,0)),b:a(255,o(ge.b,0)),a:ae}}function f(te,ge,ae){return{r:N(te,255)*255,g:N(ge,255)*255,b:N(ae,255)*255}}function c(te,ge,ae){te=N(te,255),ge=N(ge,255),ae=N(ae,255);var _e=o(te,ge,ae),Ce=a(te,ge,ae),qe,rt,Re=(_e+Ce)/2;if(_e==Ce)qe=rt=0;else{var Ie=_e-Ce;switch(rt=Re>.5?Ie/(2-_e-Ce):Ie/(_e+Ce),_e){case te:qe=(ge-ae)/Ie+(ge<ae?6:0);break;case ge:qe=(ae-te)/Ie+2;break;case ae:qe=(te-ge)/Ie+4;break}qe/=6}return{h:qe,s:rt,l:Re}}function h(te,ge,ae){var _e,Ce,qe;te=N(te,360),ge=N(ge,100),ae=N(ae,100);function rt(ot,lt,ht){return ht<0&&(ht+=1),ht>1&&(ht-=1),ht<1/6?ot+(lt-ot)*6*ht:ht<1/2?lt:ht<2/3?ot+(lt-ot)*(2/3-ht)*6:ot}if(ge===0)_e=Ce=qe=ae;else{var Re=ae<.5?ae*(1+ge):ae+ge-ae*ge,Ie=2*ae-Re;_e=rt(Ie,Re,te+1/3),Ce=rt(Ie,Re,te),qe=rt(Ie,Re,te-1/3)}return{r:_e*255,g:Ce*255,b:qe*255}}function v(te,ge,ae){te=N(te,255),ge=N(ge,255),ae=N(ae,255);var _e=o(te,ge,ae),Ce=a(te,ge,ae),qe,rt,Re=_e,Ie=_e-Ce;if(rt=_e===0?0:Ie/_e,_e==Ce)qe=0;else{switch(_e){case te:qe=(ge-ae)/Ie+(ge<ae?6:0);break;case ge:qe=(ae-te)/Ie+2;break;case ae:qe=(te-ge)/Ie+4;break}qe/=6}return{h:qe,s:rt,v:Re}}function d(te,ge,ae){te=N(te,360)*6,ge=N(ge,100),ae=N(ae,100);var _e=e.floor(te),Ce=te-_e,qe=ae*(1-ge),rt=ae*(1-Ce*ge),Re=ae*(1-(1-Ce)*ge),Ie=_e%6,ot=[ae,rt,qe,qe,Re,ae][Ie],lt=[Re,ae,ae,rt,qe,qe][Ie],ht=[qe,qe,Re,ae,ae,rt][Ie];return{r:ot*255,g:lt*255,b:ht*255}}function x(te,ge,ae,_e){var Ce=[ue(n(te).toString(16)),ue(n(ge).toString(16)),ue(n(ae).toString(16))];return _e&&Ce[0].charAt(0)==Ce[0].charAt(1)&&Ce[1].charAt(0)==Ce[1].charAt(1)&&Ce[2].charAt(0)==Ce[2].charAt(1)?Ce[0].charAt(0)+Ce[1].charAt(0)+Ce[2].charAt(0):Ce.join("")}function b(te,ge,ae,_e,Ce){var qe=[ue(n(te).toString(16)),ue(n(ge).toString(16)),ue(n(ae).toString(16)),ue(Z(_e))];return Ce&&qe[0].charAt(0)==qe[0].charAt(1)&&qe[1].charAt(0)==qe[1].charAt(1)&&qe[2].charAt(0)==qe[2].charAt(1)&&qe[3].charAt(0)==qe[3].charAt(1)?qe[0].charAt(0)+qe[1].charAt(0)+qe[2].charAt(0)+qe[3].charAt(0):qe.join("")}function p(te,ge,ae,_e){var Ce=[ue(Z(_e)),ue(n(te).toString(16)),ue(n(ge).toString(16)),ue(n(ae).toString(16))];return Ce.join("")}l.equals=function(te,ge){return!te||!ge?!1:l(te).toRgbString()==l(ge).toRgbString()},l.random=function(){return l.fromRatio({r:s(),g:s(),b:s()})};function w(te,ge){ge=ge===0?0:ge||10;var ae=l(te).toHsl();return ae.s-=ge/100,ae.s=X(ae.s),l(ae)}function A(te,ge){ge=ge===0?0:ge||10;var ae=l(te).toHsl();return ae.s+=ge/100,ae.s=X(ae.s),l(ae)}function T(te){return l(te).desaturate(100)}function k(te,ge){ge=ge===0?0:ge||10;var ae=l(te).toHsl();return ae.l+=ge/100,ae.l=X(ae.l),l(ae)}function _(te,ge){ge=ge===0?0:ge||10;var ae=l(te).toRgb();return ae.r=o(0,a(255,ae.r-n(255*-(ge/100)))),ae.g=o(0,a(255,ae.g-n(255*-(ge/100)))),ae.b=o(0,a(255,ae.b-n(255*-(ge/100)))),l(ae)}function E(te,ge){ge=ge===0?0:ge||10;var ae=l(te).toHsl();return ae.l-=ge/100,ae.l=X(ae.l),l(ae)}function S(te,ge){var ae=l(te).toHsl(),_e=(ae.h+ge)%360;return ae.h=_e<0?360+_e:_e,l(ae)}function g(te){var ge=l(te).toHsl();return ge.h=(ge.h+180)%360,l(ge)}function C(te){var ge=l(te).toHsl(),ae=ge.h;return[l(te),l({h:(ae+120)%360,s:ge.s,l:ge.l}),l({h:(ae+240)%360,s:ge.s,l:ge.l})]}function M(te){var ge=l(te).toHsl(),ae=ge.h;return[l(te),l({h:(ae+90)%360,s:ge.s,l:ge.l}),l({h:(ae+180)%360,s:ge.s,l:ge.l}),l({h:(ae+270)%360,s:ge.s,l:ge.l})]}function P(te){var ge=l(te).toHsl(),ae=ge.h;return[l(te),l({h:(ae+72)%360,s:ge.s,l:ge.l}),l({h:(ae+216)%360,s:ge.s,l:ge.l})]}function D(te,ge,ae){ge=ge||6,ae=ae||30;var _e=l(te).toHsl(),Ce=360/ae,qe=[l(te)];for(_e.h=(_e.h-(Ce*ge>>1)+720)%360;--ge;)_e.h=(_e.h+Ce)%360,qe.push(l(_e));return qe}function q(te,ge){ge=ge||6;for(var ae=l(te).toHsv(),_e=ae.h,Ce=ae.s,qe=ae.v,rt=[],Re=1/ge;ge--;)rt.push(l({h:_e,s:Ce,v:qe})),qe=(qe+Re)%1;return rt}l.mix=function(te,ge,ae){ae=ae===0?0:ae||50;var _e=l(te).toRgb(),Ce=l(ge).toRgb(),qe=ae/100,rt={r:(Ce.r-_e.r)*qe+_e.r,g:(Ce.g-_e.g)*qe+_e.g,b:(Ce.b-_e.b)*qe+_e.b,a:(Ce.a-_e.a)*qe+_e.a};return l(rt)},l.readability=function(te,ge){var ae=l(te),_e=l(ge);return(e.max(ae.getLuminance(),_e.getLuminance())+.05)/(e.min(ae.getLuminance(),_e.getLuminance())+.05)},l.isReadable=function(te,ge,ae){var _e=l.readability(te,ge),Ce,qe;switch(qe=!1,Ce=he(ae),Ce.level+Ce.size){case"AAsmall":case"AAAlarge":qe=_e>=4.5;break;case"AAlarge":qe=_e>=3;break;case"AAAsmall":qe=_e>=7;break}return qe},l.mostReadable=function(te,ge,ae){var _e=null,Ce=0,qe,rt,Re,Ie;ae=ae||{},rt=ae.includeFallbackColors,Re=ae.level,Ie=ae.size;for(var ot=0;ot<ge.length;ot++)qe=l.readability(te,ge[ot]),qe>Ce&&(Ce=qe,_e=l(ge[ot]));return l.isReadable(te,_e,{level:Re,size:Ie})||!rt?_e:(ae.includeFallbackColors=!1,l.mostReadable(te,["#fff","#000"],ae))};var O=l.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},U=l.hexNames=B(O);function B(te){var ge={};for(var ae in te)te.hasOwnProperty(ae)&&(ge[te[ae]]=ae);return ge}function F(te){return te=parseFloat(te),(isNaN(te)||te<0||te>1)&&(te=1),te}function N(te,ge){ne(te)&&(te="100%");var ae=fe(te);return te=a(ge,o(0,parseFloat(te))),ae&&(te=parseInt(te*ge,10)/100),e.abs(te-ge)<1e-6?1:te%ge/parseFloat(ge)}function X(te){return a(1,o(0,te))}function K(te){return parseInt(te,16)}function ne(te){return typeof te=="string"&&te.indexOf(".")!=-1&&parseFloat(te)===1}function fe(te){return typeof te=="string"&&te.indexOf("%")!=-1}function ue(te){return te.length==1?"0"+te:""+te}function ee(te){return te<=1&&(te=te*100+"%"),te}function Z(te){return e.round(parseFloat(te)*255).toString(16)}function oe(te){return K(te)/255}var ce=function(){var te="[-\\+]?\\d+%?",ge="[-\\+]?\\d*\\.\\d+%?",ae="(?:"+ge+")|(?:"+te+")",_e="[\\s|\\(]+("+ae+")[,|\\s]+("+ae+")[,|\\s]+("+ae+")\\s*\\)?",Ce="[\\s|\\(]+("+ae+")[,|\\s]+("+ae+")[,|\\s]+("+ae+")[,|\\s]+("+ae+")\\s*\\)?";return{CSS_UNIT:new RegExp(ae),rgb:new RegExp("rgb"+_e),rgba:new RegExp("rgba"+Ce),hsl:new RegExp("hsl"+_e),hsla:new RegExp("hsla"+Ce),hsv:new RegExp("hsv"+_e),hsva:new RegExp("hsva"+Ce),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function le(te){return!!ce.CSS_UNIT.exec(te)}function me(te){te=te.replace(t,"").replace(r,"").toLowerCase();var ge=!1;if(O[te])te=O[te],ge=!0;else if(te=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var ae;return(ae=ce.rgb.exec(te))?{r:ae[1],g:ae[2],b:ae[3]}:(ae=ce.rgba.exec(te))?{r:ae[1],g:ae[2],b:ae[3],a:ae[4]}:(ae=ce.hsl.exec(te))?{h:ae[1],s:ae[2],l:ae[3]}:(ae=ce.hsla.exec(te))?{h:ae[1],s:ae[2],l:ae[3],a:ae[4]}:(ae=ce.hsv.exec(te))?{h:ae[1],s:ae[2],v:ae[3]}:(ae=ce.hsva.exec(te))?{h:ae[1],s:ae[2],v:ae[3],a:ae[4]}:(ae=ce.hex8.exec(te))?{r:K(ae[1]),g:K(ae[2]),b:K(ae[3]),a:oe(ae[4]),format:ge?"name":"hex8"}:(ae=ce.hex6.exec(te))?{r:K(ae[1]),g:K(ae[2]),b:K(ae[3]),format:ge?"name":"hex"}:(ae=ce.hex4.exec(te))?{r:K(ae[1]+""+ae[1]),g:K(ae[2]+""+ae[2]),b:K(ae[3]+""+ae[3]),a:oe(ae[4]+""+ae[4]),format:ge?"name":"hex8"}:(ae=ce.hex3.exec(te))?{r:K(ae[1]+""+ae[1]),g:K(ae[2]+""+ae[2]),b:K(ae[3]+""+ae[3]),format:ge?"name":"hex"}:!1}function he(te){var ge,ae;return te=te||{level:"AA",size:"small"},ge=(te.level||"AA").toUpperCase(),ae=(te.size||"small").toLowerCase(),ge!=="AA"&&ge!=="AAA"&&(ge="AA"),ae!=="small"&&ae!=="large"&&(ae="small"),{level:ge,size:ae}}typeof Fk!="undefined"&&Fk.exports?Fk.exports=l:typeof define=="function"&&define.amd?define(function(){return l}):window.tinycolor=l})(Math)});var aa=ie(cA=>{"use strict";var cQ=Rg(),uA=Array.isArray;function l$e(e,t){var r,i;for(r=0;r<e.length;r++){if(i=e[r],i!==null&&typeof i=="object")return!1;i!==void 0&&(t[r]=i)}return!0}cA.extendFlat=function(){return fA(arguments,!1,!1,!1)};cA.extendDeep=function(){return fA(arguments,!0,!1,!1)};cA.extendDeepAll=function(){return fA(arguments,!0,!0,!1)};cA.extendDeepNoArrays=function(){return fA(arguments,!0,!1,!0)};function fA(e,t,r,i){var n=e[0],a=e.length,o,s,l,u,f,c,h;if(a===2&&uA(n)&&uA(e[1])&&n.length===0){if(h=l$e(e[1],n),h)return n;n.splice(0,n.length)}for(var v=1;v<a;v++){o=e[v];for(s in o)l=n[s],u=o[s],i&&uA(u)?n[s]=u:t&&u&&(cQ(u)||(f=uA(u)))?(f?(f=!1,c=l&&uA(l)?l:[]):c=l&&cQ(l)?l:{},n[s]=fA([c,u],t,r,i)):(typeof u!="undefined"||r)&&(n[s]=u)}return n}});var Xs=ie((y$t,hQ)=>{"use strict";hQ.exports=function(e){var t=e.variantValues,r=e.editType,i=e.colorEditType;i===void 0&&(i=r);var n={editType:r,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal"};e.noNumericWeightValues&&(n.valType="enumerated",n.values=n.extras,n.extras=void 0,n.min=void 0,n.max=void 0);var a={family:{valType:"string",noBlank:!0,strict:!0,editType:r},size:{valType:"number",min:1,editType:r},color:{valType:"color",editType:i},weight:n,style:{editType:r,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:e.noFontVariant?void 0:{editType:r,valType:"enumerated",values:t||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},textcase:e.noFontTextcase?void 0:{editType:r,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal"},lineposition:e.noFontLineposition?void 0:{editType:r,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none"},shadow:e.noFontShadow?void 0:{editType:r,valType:"string",dflt:e.autoShadowDflt?"auto":"none"},editType:r};return e.autoSize&&(a.size.dflt="auto"),e.autoColor&&(a.color.dflt="auto"),e.arrayOk&&(a.family.arrayOk=!0,a.weight.arrayOk=!0,a.style.arrayOk=!0,e.noFontVariant||(a.variant.arrayOk=!0),e.noFontTextcase||(a.textcase.arrayOk=!0),e.noFontLineposition||(a.lineposition.arrayOk=!0),e.noFontShadow||(a.shadow.arrayOk=!0),a.size.arrayOk=!0,a.color.arrayOk=!0),a}});var hA=ie((m$t,vQ)=>{"use strict";vQ.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}});var Dg=ie((x$t,gQ)=>{"use strict";var dQ=hA(),pQ=Xs(),hq=pQ({editType:"none"});hq.family.dflt=dQ.HOVERFONT;hq.size.dflt=dQ.HOVERFONTSIZE;gQ.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:hq,grouptitlefont:pQ({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}});var $b=ie((_$t,yQ)=>{"use strict";var u$e=Xs(),qk=Dg().hoverlabel,zk=aa().extendFlat;yQ.exports={hoverlabel:{bgcolor:zk({},qk.bgcolor,{arrayOk:!0}),bordercolor:zk({},qk.bordercolor,{arrayOk:!0}),font:u$e({arrayOk:!0,editType:"none"}),align:zk({},qk.align,{arrayOk:!0}),namelength:zk({},qk.namelength,{arrayOk:!0}),editType:"none"}}});var rs=ie((b$t,mQ)=>{"use strict";var f$e=Xs(),c$e=$b();mQ.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:f$e({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:c$e.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}});var rx=ie((w$t,bQ)=>{"use strict";var h$e=Kf(),Ok={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},xQ=Ok.RdBu;function v$e(e,t){if(t||(t=xQ),!e)return t;function r(){try{e=Ok[e]||JSON.parse(e)}catch(i){e=t}}return typeof e=="string"&&(r(),typeof e=="string"&&r()),_Q(e)?e:t}function _Q(e){var t=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||+e[0][0]!=0||+e[e.length-1][0]!=1)return!1;for(var r=0;r<e.length;r++){var i=e[r];if(i.length!==2||+i[0]<t||!h$e(i[1]).isValid())return!1;t=+i[0]}return!0}function d$e(e){return Ok[e]!==void 0?!0:_Q(e)}bQ.exports={scales:Ok,defaultScale:xQ,get:v$e,isValid:d$e}});var Qu=ie(nx=>{"use strict";nx.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];nx.defaultLine="#444";nx.lightLine="#eee";nx.background="#fff";nx.borderLine="#BEC8D9";nx.lightFraction=100*10/11});var _i=ie((A$t,wQ)=>{"use strict";var ed=Kf(),p$e=la(),g$e=hh().isTypedArray,Jf=wQ.exports={},Bk=Qu();Jf.defaults=Bk.defaults;var y$e=Jf.defaultLine=Bk.defaultLine;Jf.lightLine=Bk.lightLine;var dq=Jf.background=Bk.background;Jf.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"};Jf.rgb=function(e){return Jf.tinyRGB(ed(e))};Jf.opacity=function(e){return e?ed(e).getAlpha():0};Jf.addOpacity=function(e,t){var r=ed(e).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+t+")"};Jf.combine=function(e,t){var r=ed(e).toRgb();if(r.a===1)return ed(e).toRgbString();var i=ed(t||dq).toRgb(),n=i.a===1?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a},a={r:n.r*(1-r.a)+r.r*r.a,g:n.g*(1-r.a)+r.g*r.a,b:n.b*(1-r.a)+r.b*r.a};return ed(a).toRgbString()};Jf.interpolate=function(e,t,r){var i=ed(e).toRgb(),n=ed(t).toRgb(),a={r:r*i.r+(1-r)*n.r,g:r*i.g+(1-r)*n.g,b:r*i.b+(1-r)*n.b};return ed(a).toRgbString()};Jf.contrast=function(e,t,r){var i=ed(e);i.getAlpha()!==1&&(i=ed(Jf.combine(e,dq)));var n=i.isDark()?t?i.lighten(t):dq:r?i.darken(r):y$e;return n.toString()};Jf.stroke=function(e,t){var r=ed(t);e.style({stroke:Jf.tinyRGB(r),"stroke-opacity":r.getAlpha()})};Jf.fill=function(e,t){var r=ed(t);e.style({fill:Jf.tinyRGB(r),"fill-opacity":r.getAlpha()})};Jf.clean=function(e){if(!(!e||typeof e!="object")){var t=Object.keys(e),r,i,n,a;for(r=0;r<t.length;r++)if(n=t[r],a=e[n],n.substr(n.length-5)==="color")if(Array.isArray(a))for(i=0;i<a.length;i++)a[i]=vq(a[i]);else e[n]=vq(a);else if(n.substr(n.length-10)==="colorscale"&&Array.isArray(a))for(i=0;i<a.length;i++)Array.isArray(a[i])&&(a[i][1]=vq(a[i][1]));else if(Array.isArray(a)){var o=a[0];if(!Array.isArray(o)&&o&&typeof o=="object")for(i=0;i<a.length;i++)Jf.clean(a[i])}else a&&typeof a=="object"&&!g$e(a)&&Jf.clean(a)}};function vq(e){if(p$e(e)||typeof e!="string")return e;var t=e.trim();if(t.substr(0,3)!=="rgb")return e;var r=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return e;var i=r[1].trim().split(/\s*[\s,]\s*/),n=t.charAt(3)==="a"&&i.length===4;if(!n&&i.length!==3)return e;for(var a=0;a<i.length;a++){if(!i[a].length||(i[a]=Number(i[a]),!(i[a]>=0)))return e;if(a===3)i[a]>1&&(i[a]=1);else if(i[a]>=1)return e}var o=Math.round(i[0]*255)+", "+Math.round(i[1]*255)+", "+Math.round(i[2]*255);return n?"rgba("+o+", "+i[3]+")":"rgb("+o+")"}});var jy=ie((M$t,TQ)=>{"use strict";TQ.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}});var e2=ie(AQ=>{"use strict";AQ.counter=function(e,t,r,i){var n=(t||"")+(r?"":"$"),a=i===!1?"":"^";return e==="xy"?new RegExp(a+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+n):new RegExp(a+e+"([2-9]|[1-9][0-9]+)?"+n)}});var kQ=ie(td=>{"use strict";var pq=la(),MQ=Kf(),SQ=aa().extendFlat,m$e=rs(),x$e=rx(),_$e=_i(),b$e=jy().DESELECTDIM,t2=sA(),EQ=e2().counter,w$e=Qb().modHalf,I0=hh().isArrayOrTypedArray,Ky=hh().isTypedArraySpec,Jy=hh().decodeTypedArraySpec;td.valObjectMeta={data_array:{coerceFunction:function(e,t,r){t.set(I0(e)?e:Ky(e)?Jy(e):r)}},enumerated:{coerceFunction:function(e,t,r,i){i.coerceNumber&&(e=+e),i.values.indexOf(e)===-1?t.set(r):t.set(e)},validateFunction:function(e,t){t.coerceNumber&&(e=+e);for(var r=t.values,i=0;i<r.length;i++){var n=String(r[i]);if(n.charAt(0)==="/"&&n.charAt(n.length-1)==="/"){var a=new RegExp(n.substr(1,n.length-2));if(a.test(e))return!0}else if(e===r[i])return!0}return!1}},boolean:{coerceFunction:function(e,t,r){e===!0||e===!1?t.set(e):t.set(r)}},number:{coerceFunction:function(e,t,r,i){Ky(e)&&(e=Jy(e)),!pq(e)||i.min!==void 0&&e<i.min||i.max!==void 0&&e>i.max?t.set(r):t.set(+e)}},integer:{coerceFunction:function(e,t,r,i){if((i.extras||[]).indexOf(e)!==-1){t.set(e);return}Ky(e)&&(e=Jy(e)),e%1||!pq(e)||i.min!==void 0&&e<i.min||i.max!==void 0&&e>i.max?t.set(r):t.set(+e)}},string:{coerceFunction:function(e,t,r,i){if(typeof e!="string"){var n=typeof e=="number";i.strict===!0||!n?t.set(r):t.set(String(e))}else i.noBlank&&!e?t.set(r):t.set(e)}},color:{coerceFunction:function(e,t,r){Ky(e)&&(e=Jy(e)),MQ(e).isValid()?t.set(e):t.set(r)}},colorlist:{coerceFunction:function(e,t,r){function i(n){return MQ(n).isValid()}!Array.isArray(e)||!e.length?t.set(r):e.every(i)?t.set(e):t.set(r)}},colorscale:{coerceFunction:function(e,t,r){t.set(x$e.get(e,r))}},angle:{coerceFunction:function(e,t,r){Ky(e)&&(e=Jy(e)),e==="auto"?t.set("auto"):pq(e)?t.set(w$e(+e,360)):t.set(r)}},subplotid:{coerceFunction:function(e,t,r,i){var n=i.regex||EQ(r);if(typeof e=="string"&&n.test(e)){t.set(e);return}t.set(r)},validateFunction:function(e,t){var r=t.dflt;return e===r?!0:typeof e!="string"?!1:!!EQ(r).test(e)}},flaglist:{coerceFunction:function(e,t,r,i){if((i.extras||[]).indexOf(e)!==-1){t.set(e);return}if(typeof e!="string"){t.set(r);return}for(var n=e.split("+"),a=0;a<n.length;){var o=n[a];i.flags.indexOf(o)===-1||n.indexOf(o)<a?n.splice(a,1):a++}n.length?t.set(n.join("+")):t.set(r)}},any:{coerceFunction:function(e,t,r){e===void 0?t.set(r):t.set(Ky(e)?Jy(e):e)}},info_array:{coerceFunction:function(e,t,r,i){function n(w,A,T){var k,_={set:function(E){k=E}};return T===void 0&&(T=A.dflt),td.valObjectMeta[A.valType].coerceFunction(w,_,T,A),k}if(Ky(e)&&(e=Jy(e)),!I0(e)){t.set(r);return}var a=i.dimensions===2||i.dimensions==="1-2"&&Array.isArray(e)&&I0(e[0]),o=i.items,s=[],l=Array.isArray(o),u=l&&a&&I0(o[0]),f=a&&l&&!u,c=l&&!f?o.length:e.length,h,v,d,x,b,p;if(r=Array.isArray(r)?r:[],a)for(h=0;h<c;h++)for(s[h]=[],d=I0(e[h])?e[h]:[],f?b=o.length:l?b=o[h].length:b=d.length,v=0;v<b;v++)f?x=o[v]:l?x=o[h][v]:x=o,p=n(d[v],x,(r[h]||[])[v]),p!==void 0&&(s[h][v]=p);else for(h=0;h<c;h++)p=n(e[h],l?o[h]:o,r[h]),p!==void 0&&(s[h]=p);t.set(s)},validateFunction:function(e,t){if(!I0(e))return!1;var r=t.items,i=Array.isArray(r),n=t.dimensions===2;if(!t.freeLength&&e.length!==r.length)return!1;for(var a=0;a<e.length;a++)if(n){if(!I0(e[a])||!t.freeLength&&e[a].length!==r[a].length)return!1;for(var o=0;o<e[a].length;o++)if(!Nk(e[a][o],i?r[a][o]:r))return!1}else if(!Nk(e[a],i?r[a]:r))return!1;return!0}}};td.coerce=function(e,t,r,i,n){var a=t2(r,i).get(),o=t2(e,i),s=t2(t,i),l=o.get(),u=t._template;if(l===void 0&&u&&(l=t2(u,i).get(),u=0),n===void 0&&(n=a.dflt),a.arrayOk){if(I0(l))return s.set(l),l;if(Ky(l))return l=Jy(l),s.set(l),l}var f=td.valObjectMeta[a.valType].coerceFunction;f(l,s,n,a);var c=s.get();return u&&c===n&&!Nk(l,a)&&(l=t2(u,i).get(),f(l,s,n,a),c=s.get()),c};td.coerce2=function(e,t,r,i,n){var a=t2(e,i),o=td.coerce(e,t,r,i,n),s=a.get();return s!=null?o:!1};td.coerceFont=function(e,t,r,i){i||(i={}),r=SQ({},r),r=SQ(r,i.overrideDflt||{});var n={family:e(t+".family",r.family),size:e(t+".size",r.size),color:e(t+".color",r.color),weight:e(t+".weight",r.weight),style:e(t+".style",r.style)};if(i.noFontVariant||(n.variant=e(t+".variant",r.variant)),i.noFontLineposition||(n.lineposition=e(t+".lineposition",r.lineposition)),i.noFontTextcase||(n.textcase=e(t+".textcase",r.textcase)),!i.noFontShadow){var a=r.shadow;a==="none"&&i.autoShadowDflt&&(a="auto"),n.shadow=e(t+".shadow",a)}return n};td.coercePattern=function(e,t,r,i){var n=e(t+".shape");if(n){e(t+".solidity"),e(t+".size");var a=e(t+".fillmode"),o=a==="overlay";if(!i){var s=e(t+".bgcolor",o?r:void 0);e(t+".fgcolor",o?_$e.contrast(s):r)}e(t+".fgopacity",o?.5:1)}};td.coerceHoverinfo=function(e,t,r){var i=t._module.attributes,n=i.hoverinfo?i:m$e,a=n.hoverinfo,o;if(r._dataLength===1){var s=a.dflt==="all"?a.flags.slice():a.dflt.split("+");s.splice(s.indexOf("name"),1),o=s.join("+")}return td.coerce(e,t,n,"hoverinfo",o)};td.coerceSelectionMarkerOpacity=function(e,t){if(e.marker){var r=e.marker.opacity;if(r!==void 0){var i,n;!I0(r)&&!e.selected&&!e.unselected&&(i=r,n=b$e*r),t("selected.marker.opacity",i),t("unselected.marker.opacity",n)}}};function Nk(e,t){var r=td.valObjectMeta[t.valType];if(t.arrayOk&&I0(e))return!0;if(r.validateFunction)return r.validateFunction(e,t);var i={},n=i,a={set:function(o){n=o}};return r.coerceFunction(e,a,i,t),n!==i}td.validate=Nk});var ix=ie((k$t,RQ)=>{"use strict";var CQ={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},LQ={};function PQ(e,t){for(var r in e){var i=e[r];i.valType?t[r]=i.dflt:(t[r]||(t[r]={}),PQ(i,t[r]))}}PQ(CQ,LQ);RQ.exports={configAttributes:CQ,dfltConfig:LQ}});var yq=ie((C$t,DQ)=>{"use strict";var gq=Mi(),T$e=la(),vA=[];DQ.exports=function(e,t){if(vA.indexOf(e)!==-1)return;vA.push(e);var r=1e3;T$e(t)?r=t:t==="long"&&(r=3e3);var i=gq.select("body").selectAll(".plotly-notifier").data([0]);i.enter().append("div").classed("plotly-notifier",!0);var n=i.selectAll(".notifier-note").data(vA);function a(o){o.duration(700).style("opacity",0).each("end",function(s){var l=vA.indexOf(s);l!==-1&&vA.splice(l,1),gq.select(this).remove()})}n.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(o){var s=gq.select(this);s.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){s.transition().call(a)});for(var l=s.append("p"),u=o.split(/<br\s*\/?>/g),f=0;f<u.length;f++)f&&l.append("br"),l.append("span").text(u[f]);t==="stick"?s.transition().duration(350).style("opacity",1):s.transition().duration(700).style("opacity",1).transition().delay(r).call(a)})}});var Qy=ie((L$t,IQ)=>{"use strict";var r2=ix().dfltConfig,mq=yq(),xq=IQ.exports={};xq.log=function(){var e;if(r2.logging>1){var t=["LOG:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.trace.apply(console,t)}if(r2.notifyOnLogging>1){var r=[];for(e=0;e<arguments.length;e++)r.push(arguments[e]);mq(r.join("<br>"),"long")}};xq.warn=function(){var e;if(r2.logging>0){var t=["WARN:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.trace.apply(console,t)}if(r2.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++)r.push(arguments[e]);mq(r.join("<br>"),"stick")}};xq.error=function(){var e;if(r2.logging>0){var t=["ERROR:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.error.apply(console,t)}if(r2.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++)r.push(arguments[e]);mq(r.join("<br>"),"stick")}}});var Uk=ie((P$t,FQ)=>{"use strict";FQ.exports=function(){}});var _q=ie((R$t,qQ)=>{"use strict";qQ.exports=function(t,r){if(r instanceof RegExp){for(var i=r.toString(),n=0;n<t.length;n++)if(t[n]instanceof RegExp&&t[n].toString()===i)return t;t.push(r)}else(r||r===0)&&t.indexOf(r)===-1&&t.push(r);return t}});var OQ=ie((D$t,zQ)=>{zQ.exports=A$e;function A$e(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var NQ=ie((I$t,BQ)=>{BQ.exports=M$e;function M$e(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}});var VQ=ie((F$t,UQ)=>{UQ.exports=S$e;function S$e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}});var bq=ie((q$t,HQ)=>{HQ.exports=E$e;function E$e(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var YQ=ie((z$t,GQ)=>{GQ.exports=k$e;function k$e(e,t){if(e===t){var r=t[1],i=t[2],n=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=a,e[11]=t[14],e[12]=n,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}});var XQ=ie((O$t,WQ)=>{WQ.exports=C$e;function C$e(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],f=t[8],c=t[9],h=t[10],v=t[11],d=t[12],x=t[13],b=t[14],p=t[15],w=r*s-i*o,A=r*l-n*o,T=r*u-a*o,k=i*l-n*s,_=i*u-a*s,E=n*u-a*l,S=f*x-c*d,g=f*b-h*d,C=f*p-v*d,M=c*b-h*x,P=c*p-v*x,D=h*p-v*b,q=w*D-A*P+T*M+k*C-_*g+E*S;return q?(q=1/q,e[0]=(s*D-l*P+u*M)*q,e[1]=(n*P-i*D-a*M)*q,e[2]=(x*E-b*_+p*k)*q,e[3]=(h*_-c*E-v*k)*q,e[4]=(l*C-o*D-u*g)*q,e[5]=(r*D-n*C+a*g)*q,e[6]=(b*T-d*E-p*A)*q,e[7]=(f*E-h*T+v*A)*q,e[8]=(o*P-s*C+u*S)*q,e[9]=(i*C-r*P-a*S)*q,e[10]=(d*_-x*T+p*w)*q,e[11]=(c*T-f*_-v*w)*q,e[12]=(s*g-o*M-l*S)*q,e[13]=(r*M-i*g+n*S)*q,e[14]=(x*A-d*k-b*w)*q,e[15]=(f*k-c*A+h*w)*q,e):null}});var jQ=ie((B$t,ZQ)=>{ZQ.exports=L$e;function L$e(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],f=t[8],c=t[9],h=t[10],v=t[11],d=t[12],x=t[13],b=t[14],p=t[15];return e[0]=s*(h*p-v*b)-c*(l*p-u*b)+x*(l*v-u*h),e[1]=-(i*(h*p-v*b)-c*(n*p-a*b)+x*(n*v-a*h)),e[2]=i*(l*p-u*b)-s*(n*p-a*b)+x*(n*u-a*l),e[3]=-(i*(l*v-u*h)-s*(n*v-a*h)+c*(n*u-a*l)),e[4]=-(o*(h*p-v*b)-f*(l*p-u*b)+d*(l*v-u*h)),e[5]=r*(h*p-v*b)-f*(n*p-a*b)+d*(n*v-a*h),e[6]=-(r*(l*p-u*b)-o*(n*p-a*b)+d*(n*u-a*l)),e[7]=r*(l*v-u*h)-o*(n*v-a*h)+f*(n*u-a*l),e[8]=o*(c*p-v*x)-f*(s*p-u*x)+d*(s*v-u*c),e[9]=-(r*(c*p-v*x)-f*(i*p-a*x)+d*(i*v-a*c)),e[10]=r*(s*p-u*x)-o*(i*p-a*x)+d*(i*u-a*s),e[11]=-(r*(s*v-u*c)-o*(i*v-a*c)+f*(i*u-a*s)),e[12]=-(o*(c*b-h*x)-f*(s*b-l*x)+d*(s*h-l*c)),e[13]=r*(c*b-h*x)-f*(i*b-n*x)+d*(i*h-n*c),e[14]=-(r*(s*b-l*x)-o*(i*b-n*x)+d*(i*l-n*s)),e[15]=r*(s*h-l*c)-o*(i*h-n*c)+f*(i*l-n*s),e}});var JQ=ie((N$t,KQ)=>{KQ.exports=P$e;function P$e(e){var t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],f=e[9],c=e[10],h=e[11],v=e[12],d=e[13],x=e[14],b=e[15],p=t*o-r*a,w=t*s-i*a,A=t*l-n*a,T=r*s-i*o,k=r*l-n*o,_=i*l-n*s,E=u*d-f*v,S=u*x-c*v,g=u*b-h*v,C=f*x-c*d,M=f*b-h*d,P=c*b-h*x;return p*P-w*M+A*C+T*g-k*S+_*E}});var $Q=ie((U$t,QQ)=>{QQ.exports=R$e;function R$e(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],f=t[7],c=t[8],h=t[9],v=t[10],d=t[11],x=t[12],b=t[13],p=t[14],w=t[15],A=r[0],T=r[1],k=r[2],_=r[3];return e[0]=A*i+T*s+k*c+_*x,e[1]=A*n+T*l+k*h+_*b,e[2]=A*a+T*u+k*v+_*p,e[3]=A*o+T*f+k*d+_*w,A=r[4],T=r[5],k=r[6],_=r[7],e[4]=A*i+T*s+k*c+_*x,e[5]=A*n+T*l+k*h+_*b,e[6]=A*a+T*u+k*v+_*p,e[7]=A*o+T*f+k*d+_*w,A=r[8],T=r[9],k=r[10],_=r[11],e[8]=A*i+T*s+k*c+_*x,e[9]=A*n+T*l+k*h+_*b,e[10]=A*a+T*u+k*v+_*p,e[11]=A*o+T*f+k*d+_*w,A=r[12],T=r[13],k=r[14],_=r[15],e[12]=A*i+T*s+k*c+_*x,e[13]=A*n+T*l+k*h+_*b,e[14]=A*a+T*u+k*v+_*p,e[15]=A*o+T*f+k*d+_*w,e}});var t$=ie((V$t,e$)=>{e$.exports=D$e;function D$e(e,t,r){var i=r[0],n=r[1],a=r[2],o,s,l,u,f,c,h,v,d,x,b,p;return t===e?(e[12]=t[0]*i+t[4]*n+t[8]*a+t[12],e[13]=t[1]*i+t[5]*n+t[9]*a+t[13],e[14]=t[2]*i+t[6]*n+t[10]*a+t[14],e[15]=t[3]*i+t[7]*n+t[11]*a+t[15]):(o=t[0],s=t[1],l=t[2],u=t[3],f=t[4],c=t[5],h=t[6],v=t[7],d=t[8],x=t[9],b=t[10],p=t[11],e[0]=o,e[1]=s,e[2]=l,e[3]=u,e[4]=f,e[5]=c,e[6]=h,e[7]=v,e[8]=d,e[9]=x,e[10]=b,e[11]=p,e[12]=o*i+f*n+d*a+t[12],e[13]=s*i+c*n+x*a+t[13],e[14]=l*i+h*n+b*a+t[14],e[15]=u*i+v*n+p*a+t[15]),e}});var n$=ie((H$t,r$)=>{r$.exports=I$e;function I$e(e,t,r){var i=r[0],n=r[1],a=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}});var a$=ie((G$t,i$)=>{i$.exports=F$e;function F$e(e,t,r,i){var n=i[0],a=i[1],o=i[2],s=Math.sqrt(n*n+a*a+o*o),l,u,f,c,h,v,d,x,b,p,w,A,T,k,_,E,S,g,C,M,P,D,q,O;return Math.abs(s)<1e-6?null:(s=1/s,n*=s,a*=s,o*=s,l=Math.sin(r),u=Math.cos(r),f=1-u,c=t[0],h=t[1],v=t[2],d=t[3],x=t[4],b=t[5],p=t[6],w=t[7],A=t[8],T=t[9],k=t[10],_=t[11],E=n*n*f+u,S=a*n*f+o*l,g=o*n*f-a*l,C=n*a*f-o*l,M=a*a*f+u,P=o*a*f+n*l,D=n*o*f+a*l,q=a*o*f-n*l,O=o*o*f+u,e[0]=c*E+x*S+A*g,e[1]=h*E+b*S+T*g,e[2]=v*E+p*S+k*g,e[3]=d*E+w*S+_*g,e[4]=c*C+x*M+A*P,e[5]=h*C+b*M+T*P,e[6]=v*C+p*M+k*P,e[7]=d*C+w*M+_*P,e[8]=c*D+x*q+A*O,e[9]=h*D+b*q+T*O,e[10]=v*D+p*q+k*O,e[11]=d*D+w*q+_*O,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}});var s$=ie((Y$t,o$)=>{o$.exports=q$e;function q$e(e,t,r){var i=Math.sin(r),n=Math.cos(r),a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],f=t[9],c=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*n+u*i,e[5]=o*n+f*i,e[6]=s*n+c*i,e[7]=l*n+h*i,e[8]=u*n-a*i,e[9]=f*n-o*i,e[10]=c*n-s*i,e[11]=h*n-l*i,e}});var u$=ie((W$t,l$)=>{l$.exports=z$e;function z$e(e,t,r){var i=Math.sin(r),n=Math.cos(r),a=t[0],o=t[1],s=t[2],l=t[3],u=t[8],f=t[9],c=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*n-u*i,e[1]=o*n-f*i,e[2]=s*n-c*i,e[3]=l*n-h*i,e[8]=a*i+u*n,e[9]=o*i+f*n,e[10]=s*i+c*n,e[11]=l*i+h*n,e}});var c$=ie((X$t,f$)=>{f$.exports=O$e;function O$e(e,t,r){var i=Math.sin(r),n=Math.cos(r),a=t[0],o=t[1],s=t[2],l=t[3],u=t[4],f=t[5],c=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*n+u*i,e[1]=o*n+f*i,e[2]=s*n+c*i,e[3]=l*n+h*i,e[4]=u*n-a*i,e[5]=f*n-o*i,e[6]=c*n-s*i,e[7]=h*n-l*i,e}});var v$=ie((Z$t,h$)=>{h$.exports=B$e;function B$e(e,t,r){var i,n,a,o=r[0],s=r[1],l=r[2],u=Math.sqrt(o*o+s*s+l*l);return Math.abs(u)<1e-6?null:(u=1/u,o*=u,s*=u,l*=u,i=Math.sin(t),n=Math.cos(t),a=1-n,e[0]=o*o*a+n,e[1]=s*o*a+l*i,e[2]=l*o*a-s*i,e[3]=0,e[4]=o*s*a-l*i,e[5]=s*s*a+n,e[6]=l*s*a+o*i,e[7]=0,e[8]=o*l*a+s*i,e[9]=s*l*a-o*i,e[10]=l*l*a+n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}});var p$=ie((j$t,d$)=>{d$.exports=N$e;function N$e(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=i+i,l=n+n,u=a+a,f=i*s,c=i*l,h=i*u,v=n*l,d=n*u,x=a*u,b=o*s,p=o*l,w=o*u;return e[0]=1-(v+x),e[1]=c+w,e[2]=h-p,e[3]=0,e[4]=c-w,e[5]=1-(f+x),e[6]=d+b,e[7]=0,e[8]=h+p,e[9]=d-b,e[10]=1-(f+v),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}});var y$=ie((K$t,g$)=>{g$.exports=U$e;function U$e(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var x$=ie((J$t,m$)=>{m$.exports=V$e;function V$e(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}});var b$=ie((Q$t,_$)=>{_$.exports=H$e;function H$e(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var T$=ie(($$t,w$)=>{w$.exports=G$e;function G$e(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var M$=ie((eer,A$)=>{A$.exports=Y$e;function Y$e(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var wq=ie((ter,S$)=>{S$.exports=W$e;function W$e(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=r+r,s=i+i,l=n+n,u=r*o,f=i*o,c=i*s,h=n*o,v=n*s,d=n*l,x=a*o,b=a*s,p=a*l;return e[0]=1-c-d,e[1]=f+p,e[2]=h-b,e[3]=0,e[4]=f-p,e[5]=1-u-d,e[6]=v+x,e[7]=0,e[8]=h+b,e[9]=v-x,e[10]=1-u-c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var k$=ie((rer,E$)=>{E$.exports=X$e;function X$e(e,t,r,i,n,a,o){var s=1/(r-t),l=1/(n-i),u=1/(a-o);return e[0]=a*2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a*2*l,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(n+i)*l,e[10]=(o+a)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*u,e[15]=0,e}});var L$=ie((ner,C$)=>{C$.exports=Z$e;function Z$e(e,t,r,i,n){var a=1/Math.tan(t/2),o=1/(i-n);return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(n+i)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*n*i*o,e[15]=0,e}});var R$=ie((ier,P$)=>{P$.exports=j$e;function j$e(e,t,r,i){var n=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+s),u=2/(n+a);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-((o-s)*l*.5),e[9]=(n-a)*u*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e}});var I$=ie((aer,D$)=>{D$.exports=K$e;function K$e(e,t,r,i,n,a,o){var s=1/(t-r),l=1/(i-n),u=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*s,e[13]=(n+i)*l,e[14]=(o+a)*u,e[15]=1,e}});var q$=ie((oer,F$)=>{var J$e=bq();F$.exports=Q$e;function Q$e(e,t,r,i){var n,a,o,s,l,u,f,c,h,v,d=t[0],x=t[1],b=t[2],p=i[0],w=i[1],A=i[2],T=r[0],k=r[1],_=r[2];return Math.abs(d-T)<1e-6&&Math.abs(x-k)<1e-6&&Math.abs(b-_)<1e-6?J$e(e):(f=d-T,c=x-k,h=b-_,v=1/Math.sqrt(f*f+c*c+h*h),f*=v,c*=v,h*=v,n=w*h-A*c,a=A*f-p*h,o=p*c-w*f,v=Math.sqrt(n*n+a*a+o*o),v?(v=1/v,n*=v,a*=v,o*=v):(n=0,a=0,o=0),s=c*o-h*a,l=h*n-f*o,u=f*a-c*n,v=Math.sqrt(s*s+l*l+u*u),v?(v=1/v,s*=v,l*=v,u*=v):(s=0,l=0,u=0),e[0]=n,e[1]=s,e[2]=f,e[3]=0,e[4]=a,e[5]=l,e[6]=c,e[7]=0,e[8]=o,e[9]=u,e[10]=h,e[11]=0,e[12]=-(n*d+a*x+o*b),e[13]=-(s*d+l*x+u*b),e[14]=-(f*d+c*x+h*b),e[15]=1,e)}});var O$=ie((ser,z$)=>{z$.exports=$$e;function $$e(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}});var Tq=ie((ler,B$)=>{B$.exports={create:OQ(),clone:NQ(),copy:VQ(),identity:bq(),transpose:YQ(),invert:XQ(),adjoint:jQ(),determinant:JQ(),multiply:$Q(),translate:t$(),scale:n$(),rotate:a$(),rotateX:s$(),rotateY:u$(),rotateZ:c$(),fromRotation:v$(),fromRotationTranslation:p$(),fromScaling:y$(),fromTranslation:x$(),fromXRotation:b$(),fromYRotation:T$(),fromZRotation:M$(),fromQuat:wq(),frustum:k$(),perspective:L$(),perspectiveFromFieldOfView:R$(),ortho:I$(),lookAt:q$(),str:O$()}});var Vk=ie(Fu=>{"use strict";var eet=Tq();Fu.init2dArray=function(e,t){for(var r=new Array(e),i=0;i<e;i++)r[i]=new Array(t);return r};Fu.transposeRagged=function(e){var t=0,r=e.length,i,n;for(i=0;i<r;i++)t=Math.max(t,e[i].length);var a=new Array(t);for(i=0;i<t;i++)for(a[i]=new Array(r),n=0;n<r;n++)a[i][n]=e[n][i];return a};Fu.dot=function(e,t){if(!(e.length&&t.length)||e.length!==t.length)return null;var r=e.length,i,n;if(e[0].length)for(i=new Array(r),n=0;n<r;n++)i[n]=Fu.dot(e[n],t);else if(t[0].length){var a=Fu.transposeRagged(t);for(i=new Array(a.length),n=0;n<a.length;n++)i[n]=Fu.dot(e,a[n])}else for(i=0,n=0;n<r;n++)i+=e[n]*t[n];return i};Fu.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]};Fu.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]};Fu.rotationXYMatrix=function(e,t,r){return Fu.dot(Fu.dot(Fu.translationMatrix(t,r),Fu.rotationMatrix(e)),Fu.translationMatrix(-t,-r))};Fu.apply3DTransform=function(e){return function(){var t=arguments,r=arguments.length===1?t[0]:[t[0],t[1],t[2]||0];return Fu.dot(e,[r[0],r[1],r[2],1]).slice(0,3)}};Fu.apply2DTransform=function(e){return function(){var t=arguments;t.length===3&&(t=t[0]);var r=arguments.length===1?t[0]:[t[0],t[1]];return Fu.dot(e,[r[0],r[1],1]).slice(0,2)}};Fu.apply2DTransform2=function(e){var t=Fu.apply2DTransform(e);return function(r){return t(r.slice(0,2)).concat(t(r.slice(2,4)))}};Fu.convertCssMatrix=function(e){if(e){var t=e.length;if(t===16)return e;if(t===6)return[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};Fu.inverseTransformMatrix=function(e){var t=[];return eet.invert(t,e),[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}});var dA=ie((fer,G$)=>{"use strict";var tet=Mi(),ret=Qy(),net=Vk(),iet=Tq();function aet(e){var t;if(typeof e=="string"){if(t=document.getElementById(e),t===null)throw new Error("No DOM element with id '"+e+"' exists on the page.");return t}else if(e==null)throw new Error("DOM element provided is null or undefined");return e}function oet(e){var t=tet.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")}function N$(e){var t=e&&e.parentNode;t&&t.removeChild(e)}function set(e,t){U$("global",e,t)}function U$(e,t,r){var i="plotly.js-style-"+e,n=document.getElementById(i);n||(n=document.createElement("style"),n.setAttribute("id",i),n.appendChild(document.createTextNode("")),document.head.appendChild(n));var a=n.sheet;a.insertRule?a.insertRule(t+"{"+r+"}",0):a.addRule?a.addRule(t,r,0):ret.warn("addStyleRule failed")}function uet(e){var t="plotly.js-style-"+e,r=document.getElementById(t);r&&N$(r)}function fet(e){var t=H$(e),r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach(function(i){var n=V$(i);if(n){var a=net.convertCssMatrix(n);r=iet.multiply(r,r,a)}}),r}function V$(e){var t=window.getComputedStyle(e,null),r=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");return r==="none"?null:r.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(i){return+i})}function H$(e){for(var t=[];cet(e);)t.push(e),e=e.parentNode,typeof ShadowRoot=="function"&&e instanceof ShadowRoot&&(e=e.host);return t}function cet(e){return e&&(e instanceof Element||e instanceof HTMLElement)}function het(e,t){return e&&t&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}G$.exports={getGraphDiv:aet,isPlotDiv:oet,removeElement:N$,addStyleRule:set,addRelatedStyleRule:U$,deleteRelatedStyleRule:uet,getFullTransformMatrix:fet,getElementTransformMatrix:V$,getElementAndAncestors:H$,equalDomRects:het}});var pA=ie((cer,Y$)=>{"use strict";Y$.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}});var Zs=ie((her,Q$)=>{"use strict";var X$=aa().extendFlat,vet=Rg(),Z$={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},j$={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},det=Z$.flags.slice().concat(["fullReplot"]),pet=j$.flags.slice().concat("layoutReplot");Q$.exports={traces:Z$,layout:j$,traceFlags:function(){return W$(det)},layoutFlags:function(){return W$(pet)},update:function(e,t){var r=t.editType;if(r&&r!=="none")for(var i=r.split("+"),n=0;n<i.length;n++)e[i[n]]=!0},overrideAll:K$};function W$(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!1;return t}function K$(e,t,r){var i=X$({},e);for(var n in i){var a=i[n];vet(a)&&(i[n]=J$(a,t,r,n))}return r==="from-root"&&(i.editType=t),i}function J$(e,t,r,i){if(e.valType){var n=X$({},e);if(n.editType=t,Array.isArray(e.items)){n.items=new Array(e.items.length);for(var a=0;a<e.items.length;a++)n.items[a]=J$(e.items[a],t,"from-root")}return n}else return K$(e,t,i.charAt(0)==="_"?"nested":"from-root")}});var dc=ie(Aq=>{"use strict";Aq.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"};Aq.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}});var Mq=ie((der,$$)=>{"use strict";$$.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}});var Ba=ie(Hk=>{"use strict";var eee=Mq(),per=eee.FORMAT_LINK,ger=eee.DATE_FORMAT_LINK;function Sq(e){var t=e.description?" "+e.description:"",r=e.keys||[];if(r.length>0){for(var i=[],n=0;n<r.length;n++)i[n]="`"+r[n]+"`";t=t+"Finally, the template string has access to ",r.length===1?t=t+"variable "+i[0]:t=t+"variables "+i.slice(0,-1).join(", ")+" and "+i.slice(-1)+"."}return t}Hk.hovertemplateAttrs=function(e,t){e=e||{},t=t||{};var r=Sq(t),i={valType:"string",dflt:"",editType:e.editType||"none"};return e.arrayOk!==!1&&(i.arrayOk=!0),i};Hk.texttemplateAttrs=function(e,t){e=e||{},t=t||{};var r=Sq(t),i={valType:"string",dflt:"",editType:e.editType||"calc"};return e.arrayOk!==!1&&(i.arrayOk=!0),i};Hk.shapeTexttemplateAttrs=function(e,t){e=e||{},t=t||{};var r=e.newshape?"new ":"",i=Sq(t),n={valType:"string",dflt:"",editType:e.editType||"arraydraw"};return n}});var Wk=ie((mer,ree)=>{"use strict";function $y(e,t){return t?t.d2l(e):e}function tee(e,t){return t?t.l2d(e):e}function get(e){return e.x0}function yet(e){return e.x1}function met(e){return e.y0}function xet(e){return e.y1}function Gk(e,t){return $y(e.x1,t)-$y(e.x0,t)}function Yk(e,t,r){return $y(e.y1,r)-$y(e.y0,r)}function _et(e,t){return Math.abs(Gk(e,t))}function bet(e,t,r){return Math.abs(Yk(e,t,r))}function wet(e,t,r){return e.type!=="line"?void 0:Math.sqrt(Math.pow(Gk(e,t),2)+Math.pow(Yk(e,t,r),2))}function Tet(e,t){return tee(($y(e.x1,t)+$y(e.x0,t))/2,t)}function Aet(e,t,r){return tee(($y(e.y1,r)+$y(e.y0,r))/2,r)}function Met(e,t,r){return e.type!=="line"?void 0:Yk(e,t,r)/Gk(e,t)}ree.exports={x0:get,x1:yet,y0:met,y1:xet,slope:Met,dx:Gk,dy:Yk,width:_et,height:bet,length:wet,xcenter:Tet,ycenter:Aet}});var aee=ie((xer,iee)=>{"use strict";var Eet=Zs().overrideAll,ax=rs(),nee=Xs(),ket=dc().dash,em=aa().extendFlat,Cet=Ba().shapeTexttemplateAttrs,Let=Wk();iee.exports=Eet({newshape:{visible:em({},ax.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:em({},ax.legend,{}),legendgroup:em({},ax.legendgroup,{}),legendgrouptitle:{text:em({},ax.legendgrouptitle.text,{}),font:nee({})},legendrank:em({},ax.legendrank,{}),legendwidth:em({},ax.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:em({},ket,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:em({},ax.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:Cet({newshape:!0},{keys:Object.keys(Let)}),font:nee({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")});var see=ie((_er,oee)=>{"use strict";var Pet=dc().dash,Ret=aa().extendFlat;oee.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:Ret({},Pet,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}});var Xk=ie((ber,lee)=>{"use strict";lee.exports=function(e){var t=e.editType;return{t:{valType:"number",dflt:0,editType:t},r:{valType:"number",dflt:0,editType:t},b:{valType:"number",dflt:0,editType:t},l:{valType:"number",dflt:0,editType:t},editType:t}}});var ox=ie((wer,hee)=>{"use strict";var Eq=Xs(),Det=pA(),Zk=Qu(),uee=aee(),fee=see(),Iet=Xk(),cee=aa().extendFlat,jk=Eq({editType:"calc"});jk.family.dflt='"Open Sans", verdana, arial, sans-serif';jk.size.dflt=12;jk.color.dflt=Zk.defaultLine;hee.exports={font:jk,title:{text:{valType:"string",editType:"layoutstyle"},font:Eq({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:cee(Iet({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:Zk.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:Zk.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:Zk.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:uee.newshape,activeshape:uee.activeshape,newselection:fee.newselection,activeselection:fee.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:cee({},Det.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:Eq({editType:"layoutstyle"})}}});var Ti=ie(ja=>{"use strict";var n2=Qy(),vee=Uk(),dee=_q(),Fet=Rg(),qet=dA().addStyleRule,pee=aa(),zet=rs(),Oet=ox(),Bet=pee.extendFlat,Kk=pee.extendDeepAll;ja.modules={};ja.allCategories={};ja.allTypes=[];ja.subplotsRegistry={};ja.transformsRegistry={};ja.componentsRegistry={};ja.layoutArrayContainers=[];ja.layoutArrayRegexes=[];ja.traceLayoutAttributes={};ja.localeRegistry={};ja.apiMethodRegistry={};ja.collectableSubplotTypes=null;ja.register=function(t){if(ja.collectableSubplotTypes=null,t)t&&!Array.isArray(t)&&(t=[t]);else throw new Error("No argument passed to Plotly.register.");for(var r=0;r<t.length;r++){var i=t[r];if(!i)throw new Error("Invalid module was attempted to be registered!");switch(i.moduleType){case"trace":Net(i);break;case"transform":Het(i);break;case"component":Vet(i);break;case"locale":Get(i);break;case"apiMethod":var n=i.name;ja.apiMethodRegistry[n]=i.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}};ja.getModule=function(e){var t=ja.modules[_ee(e)];return t?t._module:!1};ja.traceIs=function(e,t){if(e=_ee(e),e==="various")return!1;var r=ja.modules[e];return r||(e&&n2.log("Unrecognized trace type "+e+"."),r=ja.modules[zet.type.dflt]),!!r.categories[t]};ja.getTransformIndices=function(e,t){for(var r=[],i=e.transforms||[],n=0;n<i.length;n++)i[n].type===t&&r.push(n);return r};ja.hasTransform=function(e,t){for(var r=e.transforms||[],i=0;i<r.length;i++)if(r[i].type===t)return!0;return!1};ja.getComponentMethod=function(e,t){var r=ja.componentsRegistry[e];return r&&r[t]||vee};ja.call=function(){var e=arguments[0],t=[].slice.call(arguments,1);return ja.apiMethodRegistry[e].apply(null,t)};function Net(e){var t=e.name,r=e.categories,i=e.meta;if(ja.modules[t]){n2.log("Type "+t+" already registered");return}ja.subplotsRegistry[e.basePlotModule.name]||Uet(e.basePlotModule);for(var n={},a=0;a<r.length;a++)n[r[a]]=!0,ja.allCategories[r[a]]=!0;ja.modules[t]={_module:e,categories:n},i&&Object.keys(i).length&&(ja.modules[t].meta=i),ja.allTypes.push(t);for(var o in ja.componentsRegistry)yee(o,t);e.layoutAttributes&&Bet(ja.traceLayoutAttributes,e.layoutAttributes);var s=e.basePlotModule,l=s.name;if(l==="mapbox"){var u=s.constants.styleRules;for(var f in u)qet(".js-plotly-plot .plotly .mapboxgl-"+f,u[f])}(l==="geo"||l==="mapbox")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function Uet(e){var t=e.name;if(ja.subplotsRegistry[t]){n2.log("Plot type "+t+" already registered.");return}gee(e),ja.subplotsRegistry[t]=e;for(var r in ja.componentsRegistry)xee(r,e.name)}function Vet(e){if(typeof e.name!="string")throw new Error("Component module *name* must be a string.");var t=e.name;ja.componentsRegistry[t]=e,e.layoutAttributes&&(e.layoutAttributes._isLinkedToArray&&dee(ja.layoutArrayContainers,t),gee(e));for(var r in ja.modules)yee(t,r);for(var i in ja.subplotsRegistry)xee(t,i);for(var n in ja.transformsRegistry)mee(t,n);e.schema&&e.schema.layout&&Kk(Oet,e.schema.layout)}function Het(e){if(typeof e.name!="string")throw new Error("Transform module *name* must be a string.");var t="Transform module "+e.name,r=typeof e.transform=="function",i=typeof e.calcTransform=="function";if(!r&&!i)throw new Error(t+" is missing a *transform* or *calcTransform* method.");r&&i&&n2.log([t+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),Fet(e.attributes)||n2.log(t+" registered without an *attributes* object."),typeof e.supplyDefaults!="function"&&n2.log(t+" registered without a *supplyDefaults* method."),ja.transformsRegistry[e.name]=e;for(var n in ja.componentsRegistry)mee(n,e.name)}function Get(e){var t=e.name,r=t.split("-")[0],i=e.dictionary,n=e.format,a=i&&Object.keys(i).length,o=n&&Object.keys(n).length,s=ja.localeRegistry,l=s[t];if(l||(s[t]=l={}),r!==t){var u=s[r];u||(s[r]=u={}),a&&u.dictionary===l.dictionary&&(u.dictionary=i),o&&u.format===l.format&&(u.format=n)}a&&(l.dictionary=i),o&&(l.format=n)}function gee(e){if(e.layoutAttributes){var t=e.layoutAttributes._arrayAttrRegexps;if(t)for(var r=0;r<t.length;r++)dee(ja.layoutArrayRegexes,t[r])}}function yee(e,t){var r=ja.componentsRegistry[e].schema;if(!(!r||!r.traces)){var i=r.traces[t];i&&Kk(ja.modules[t]._module.attributes,i)}}function mee(e,t){var r=ja.componentsRegistry[e].schema;if(!(!r||!r.transforms)){var i=r.transforms[t];i&&Kk(ja.transformsRegistry[t].attributes,i)}}function xee(e,t){var r=ja.componentsRegistry[e].schema;if(!(!r||!r.subplots)){var i=ja.subplotsRegistry[t],n=i.layoutAttributes,a=i.attr==="subplot"?i.name:i.attr;Array.isArray(a)&&(a=a[0]);var o=r.subplots[a];n&&o&&Kk(n,o)}}function _ee(e){return typeof e=="object"&&(e=e.type),e}});var Cee=ie(qu=>{"use strict";var Yet=Kb().timeFormat,Eee=la(),kq=Qy(),rm=Qb().mod,o2=eo(),rp=o2.BADNUM,rd=o2.ONEDAY,gA=o2.ONEHOUR,tm=o2.ONEMIN,a2=o2.ONESEC,yA=o2.EPOCHJD,Ig=Ti(),bee=Kb().utcFormat,Wet=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,Xet=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,wee=new Date().getFullYear()-70;function Fg(e){return e&&Ig.componentsRegistry.calendars&&typeof e=="string"&&e!=="gregorian"}qu.dateTick0=function(e,t){var r=Zet(e,!!t);if(t<2)return r;var i=qu.dateTime2ms(r,e);return i+=rd*(t-1),qu.ms2DateTime(i,0,e)};function Zet(e,t){return Fg(e)?t?Ig.getComponentMethod("calendars","CANONICAL_SUNDAY")[e]:Ig.getComponentMethod("calendars","CANONICAL_TICK")[e]:t?"2000-01-02":"2000-01-01"}qu.dfltRange=function(e){return Fg(e)?Ig.getComponentMethod("calendars","DFLTRANGE")[e]:["2000-01-01","2001-01-01"]};qu.isJSDate=function(e){return typeof e=="object"&&e!==null&&typeof e.getTime=="function"};var Qk,$k;qu.dateTime2ms=function(e,t){if(qu.isJSDate(e)){var r=e.getTimezoneOffset()*tm,i=(e.getUTCMinutes()-e.getMinutes())*tm+(e.getUTCSeconds()-e.getSeconds())*a2+(e.getUTCMilliseconds()-e.getMilliseconds());if(i){var n=3*tm;r=r-n/2+rm(i-r+n/2,n)}return e=Number(e)-r,e>=Qk&&e<=$k?e:rp}if(typeof e!="string"&&typeof e!="number")return rp;e=String(e);var a=Fg(t),o=e.charAt(0);a&&(o==="G"||o==="g")&&(e=e.substr(1),t="");var s=a&&t.substr(0,7)==="chinese",l=e.match(s?Xet:Wet);if(!l)return rp;var u=l[1],f=l[3]||"1",c=Number(l[5]||1),h=Number(l[7]||0),v=Number(l[9]||0),d=Number(l[11]||0);if(a){if(u.length===2)return rp;u=Number(u);var x;try{var b=Ig.getComponentMethod("calendars","getCal")(t);if(s){var p=f.charAt(f.length-1)==="i";f=parseInt(f,10),x=b.newDate(u,b.toMonthIndex(u,f,p),c)}else x=b.newDate(u,Number(f),c)}catch(A){return rp}return x?(x.toJD()-yA)*rd+h*gA+v*tm+d*a2:rp}u.length===2?u=(Number(u)+2e3-wee)%100+wee:u=Number(u),f-=1;var w=new Date(Date.UTC(2e3,f,c,h,v));return w.setUTCFullYear(u),w.getUTCMonth()!==f||w.getUTCDate()!==c?rp:w.getTime()+d*a2};Qk=qu.MIN_MS=qu.dateTime2ms("-9999");$k=qu.MAX_MS=qu.dateTime2ms("9999-12-31 23:59:59.9999");qu.isDateTime=function(e,t){return qu.dateTime2ms(e,t)!==rp};function i2(e,t){return String(e+Math.pow(10,t)).substr(1)}var Jk=90*rd,Tee=3*gA,Aee=5*tm;qu.ms2DateTime=function(e,t,r){if(typeof e!="number"||!(e>=Qk&&e<=$k))return rp;t||(t=0);var i=Math.floor(rm(e+.05,1)*10),n=Math.round(e-i/10),a,o,s,l,u,f;if(Fg(r)){var c=Math.floor(n/rd)+yA,h=Math.floor(rm(e,rd));try{a=Ig.getComponentMethod("calendars","getCal")(r).fromJD(c).formatDate("yyyy-mm-dd")}catch(v){a=bee("G%Y-%m-%d")(new Date(n))}if(a.charAt(0)==="-")for(;a.length<11;)a="-0"+a.substr(1);else for(;a.length<10;)a="0"+a;o=t<Jk?Math.floor(h/gA):0,s=t<Jk?Math.floor(h%gA/tm):0,l=t<Tee?Math.floor(h%tm/a2):0,u=t<Aee?h%a2*10+i:0}else f=new Date(n),a=bee("%Y-%m-%d")(f),o=t<Jk?f.getUTCHours():0,s=t<Jk?f.getUTCMinutes():0,l=t<Tee?f.getUTCSeconds():0,u=t<Aee?f.getUTCMilliseconds()*10+i:0;return kee(a,o,s,l,u)};qu.ms2DateTimeLocal=function(e){if(!(e>=Qk+rd&&e<=$k-rd))return rp;var t=Math.floor(rm(e+.05,1)*10),r=new Date(Math.round(e-t/10)),i=Yet("%Y-%m-%d")(r),n=r.getHours(),a=r.getMinutes(),o=r.getSeconds(),s=r.getUTCMilliseconds()*10+t;return kee(i,n,a,o,s)};function kee(e,t,r,i,n){if((t||r||i||n)&&(e+=" "+i2(t,2)+":"+i2(r,2),(i||n)&&(e+=":"+i2(i,2),n))){for(var a=4;n%10===0;)a-=1,n/=10;e+="."+i2(n,a)}return e}qu.cleanDate=function(e,t,r){if(e===rp)return t;if(qu.isJSDate(e)||typeof e=="number"&&isFinite(e)){if(Fg(r))return kq.error("JS Dates and milliseconds are incompatible with world calendars",e),t;if(e=qu.ms2DateTimeLocal(+e),!e&&t!==void 0)return t}else if(!qu.isDateTime(e,r))return kq.error("unrecognized date",e),t;return e};var jet=/%\d?f/g,Ket=/%h/g,Jet={1:"1",2:"1",3:"2",4:"2"};function Mee(e,t,r,i){e=e.replace(jet,function(a){var o=Math.min(+a.charAt(1)||6,6),s=(t/1e3%1+2).toFixed(o).substr(2).replace(/0+$/,"")||"0";return s});var n=new Date(Math.floor(t+.05));if(e=e.replace(Ket,function(){return Jet[r("%q")(n)]}),Fg(i))try{e=Ig.getComponentMethod("calendars","worldCalFmt")(e,t,i)}catch(a){return"Invalid"}return r(e)(n)}var Qet=[59,59.9,59.99,59.999,59.9999];function $et(e,t){var r=rm(e+.05,rd),i=i2(Math.floor(r/gA),2)+":"+i2(rm(Math.floor(r/tm),60),2);if(t!=="M"){Eee(t)||(t=0);var n=Math.min(rm(e/a2,60),Qet[t]),a=(100+n).toFixed(t).substr(1);t>0&&(a=a.replace(/0+$/,"").replace(/[\.]$/,"")),i+=":"+a}return i}qu.formatDate=function(e,t,r,i,n,a){if(n=Fg(n)&&n,!t)if(r==="y")t=a.year;else if(r==="m")t=a.month;else if(r==="d")t=a.dayMonth+`
`+a.year;else return $et(e,r)+`
`+Mee(a.dayMonthYear,e,i,n);return Mee(t,e,i,n)};var See=3*rd;qu.incrementMonth=function(e,t,r){r=Fg(r)&&r;var i=rm(e,rd);if(e=Math.round(e-i),r)try{var n=Math.round(e/rd)+yA,a=Ig.getComponentMethod("calendars","getCal")(r),o=a.fromJD(n);return t%12?a.add(o,t,"m"):a.add(o,t/12,"y"),(o.toJD()-yA)*rd+i}catch(l){kq.error("invalid ms "+e+" in calendar "+r)}var s=new Date(e+See);return s.setUTCMonth(s.getUTCMonth()+t)+i-See};qu.findExactDates=function(e,t){for(var r=0,i=0,n=0,a=0,o,s,l=Fg(t)&&Ig.getComponentMethod("calendars","getCal")(t),u=0;u<e.length;u++){if(s=e[u],!Eee(s)){a++;continue}if(!(s%rd))if(l)try{o=l.fromJD(s/rd+yA),o.day()===1?o.month()===1?r++:i++:n++}catch(c){}else o=new Date(s),o.getUTCDate()===1?o.getUTCMonth()===0?r++:i++:n++}i+=r,n+=i;var f=e.length-a;return{exactYears:r/f,exactMonths:i/f,exactDays:n/f}}});var mA=ie((Mer,Lee)=>{"use strict";Lee.exports=function(t){return t}});var eC=ie(qg=>{"use strict";var ett=la(),ttt=Qy(),rtt=mA(),ntt=eo().BADNUM,Cq=1e-9;qg.findBin=function(e,t,r){if(ett(t.start))return r?Math.ceil((e-t.start)/t.size-Cq)-1:Math.floor((e-t.start)/t.size+Cq);var i=0,n=t.length,a=0,o=n>1?(t[n-1]-t[0])/(n-1):1,s,l;for(o>=0?l=r?itt:att:l=r?stt:ott,e+=o*Cq*(r?-1:1)*(o>=0?1:-1);i<n&&a++<100;)s=Math.floor((i+n)/2),l(t[s],e)?i=s+1:n=s;return a>90&&ttt.log("Long binary search..."),i-1};function itt(e,t){return e<t}function att(e,t){return e<=t}function ott(e,t){return e>t}function stt(e,t){return e>=t}qg.sorterAsc=function(e,t){return e-t};qg.sorterDes=function(e,t){return t-e};qg.distinctVals=function(e){var t=e.slice();t.sort(qg.sorterAsc);var r;for(r=t.length-1;r>-1&&t[r]===ntt;r--);for(var i=t[r]-t[0]||1,n=i/(r||1)/1e4,a=[],o,s=0;s<=r;s++){var l=t[s],u=l-o;o===void 0?(a.push(l),o=l):u>n&&(i=Math.min(i,u),a.push(l),o=l)}return{vals:a,minDiff:i}};qg.roundUp=function(e,t,r){for(var i=0,n=t.length-1,a,o=0,s=r?0:1,l=r?1:0,u=r?Math.ceil:Math.floor;i<n&&o++<100;)a=u((i+n)/2),t[a]<=e?i=a+s:n=a-l;return t[i]};qg.sort=function(e,t){for(var r=0,i=0,n=1;n<e.length;n++){var a=t(e[n],e[n-1]);if(a<0?r=1:a>0&&(i=1),r&&i)return e.sort(t)}return i?e:e.reverse()};qg.findIndexOfMin=function(e,t){t=t||rtt;for(var r=1/0,i,n=0;n<e.length;n++){var a=t(e[n]);a<r&&(r=a,i=n)}return i}});var sx=ie((Eer,Pee)=>{"use strict";Pee.exports=function(t){return Object.keys(t).sort()}});var Ree=ie(Qf=>{"use strict";var xA=la(),ltt=hh().isArrayOrTypedArray;Qf.aggNums=function(e,t,r,i){var n,a;if((!i||i>r.length)&&(i=r.length),xA(t)||(t=!1),ltt(r[0])){for(a=new Array(i),n=0;n<i;n++)a[n]=Qf.aggNums(e,t,r[n]);r=a}for(n=0;n<i;n++)xA(t)?xA(r[n])&&(t=e(+t,+r[n])):t=r[n];return t};Qf.len=function(e){return Qf.aggNums(function(t){return t+1},0,e)};Qf.mean=function(e,t){return t||(t=Qf.len(e)),Qf.aggNums(function(r,i){return r+i},0,e)/t};Qf.midRange=function(e){if(!(e===void 0||e.length===0))return(Qf.aggNums(Math.max,null,e)+Qf.aggNums(Math.min,null,e))/2};Qf.variance=function(e,t,r){return t||(t=Qf.len(e)),xA(r)||(r=Qf.mean(e,t)),Qf.aggNums(function(i,n){return i+Math.pow(n-r,2)},0,e)/t};Qf.stdev=function(e,t,r){return Math.sqrt(Qf.variance(e,t,r))};Qf.median=function(e){var t=e.slice().sort();return Qf.interp(t,.5)};Qf.interp=function(e,t){if(!xA(t))throw"n should be a finite number";if(t=t*e.length-.5,t<0)return e[0];if(t>e.length-1)return e[e.length-1];var r=t%1;return r*e[Math.ceil(t)]+(1-r)*e[Math.floor(t)]}});var zee=ie((Cer,qee)=>{"use strict";var Dee=Qb(),Lq=Dee.mod,utt=Dee.modHalf,_A=Math.PI,nm=2*_A;function ftt(e){return e/180*_A}function ctt(e){return e/_A*180}function Pq(e){return Math.abs(e[1]-e[0])>nm-1e-14}function Iee(e,t){return utt(t-e,nm)}function htt(e,t){return Math.abs(Iee(e,t))}function Fee(e,t){if(Pq(t))return!0;var r,i;t[0]<t[1]?(r=t[0],i=t[1]):(r=t[1],i=t[0]),r=Lq(r,nm),i=Lq(i,nm),r>i&&(i+=nm);var n=Lq(e,nm),a=n+nm;return n>=r&&n<=i||a>=r&&a<=i}function vtt(e,t,r,i){if(!Fee(t,i))return!1;var n,a;return r[0]<r[1]?(n=r[0],a=r[1]):(n=r[1],a=r[0]),e>=n&&e<=a}function Rq(e,t,r,i,n,a,o){n=n||0,a=a||0;var s=Pq([r,i]),l,u,f,c,h;s?(l=0,u=_A,f=nm):r<i?(l=r,f=i):(l=i,f=r),e<t?(c=e,h=t):(c=t,h=e);function v(p,w){return[p*Math.cos(w)+n,a-p*Math.sin(w)]}var d=Math.abs(f-l)<=_A?0:1;function x(p,w,A){return"A"+[p,p]+" "+[0,d,A]+" "+v(p,w)}var b;return s?c===null?b="M"+v(h,l)+x(h,u,0)+x(h,f,0)+"Z":b="M"+v(c,l)+x(c,u,0)+x(c,f,0)+"ZM"+v(h,l)+x(h,u,1)+x(h,f,1)+"Z":c===null?(b="M"+v(h,l)+x(h,f,0),o&&(b+="L0,0Z")):b="M"+v(c,l)+"L"+v(h,l)+x(h,f,0)+"L"+v(c,f)+x(c,l,1)+"Z",b}function dtt(e,t,r,i,n){return Rq(null,e,t,r,i,n,0)}function ptt(e,t,r,i,n){return Rq(null,e,t,r,i,n,1)}function gtt(e,t,r,i,n,a){return Rq(e,t,r,i,n,a,1)}qee.exports={deg2rad:ftt,rad2deg:ctt,angleDelta:Iee,angleDist:htt,isFullCircle:Pq,isAngleInsideSector:Fee,isPtInsideSector:vtt,pathArc:dtt,pathSector:ptt,pathAnnulus:gtt}});var Oee=ie(lx=>{"use strict";lx.isLeftAnchor=function(t){return t.xanchor==="left"||t.xanchor==="auto"&&t.x<=1/3};lx.isCenterAnchor=function(t){return t.xanchor==="center"||t.xanchor==="auto"&&t.x>1/3&&t.x<2/3};lx.isRightAnchor=function(t){return t.xanchor==="right"||t.xanchor==="auto"&&t.x>=2/3};lx.isTopAnchor=function(t){return t.yanchor==="top"||t.yanchor==="auto"&&t.y>=2/3};lx.isMiddleAnchor=function(t){return t.yanchor==="middle"||t.yanchor==="auto"&&t.y>1/3&&t.y<2/3};lx.isBottomAnchor=function(t){return t.yanchor==="bottom"||t.yanchor==="auto"&&t.y<=1/3}});var Uee=ie(ux=>{"use strict";var Dq=Qb().mod;ux.segmentsIntersect=Nee;function Nee(e,t,r,i,n,a,o,s){var l=r-e,u=n-e,f=o-n,c=i-t,h=a-t,v=s-a,d=l*v-f*c;if(d===0)return null;var x=(u*v-f*h)/d,b=(u*c-l*h)/d;return b<0||b>1||x<0||x>1?null:{x:e+l*x,y:t+c*x}}ux.segmentDistance=function(t,r,i,n,a,o,s,l){if(Nee(t,r,i,n,a,o,s,l))return 0;var u=i-t,f=n-r,c=s-a,h=l-o,v=u*u+f*f,d=c*c+h*h,x=Math.min(tC(u,f,v,a-t,o-r),tC(u,f,v,s-t,l-r),tC(c,h,d,t-a,r-o),tC(c,h,d,i-a,n-o));return Math.sqrt(x)};function tC(e,t,r,i,n){var a=i*e+n*t;if(a<0)return i*i+n*n;if(a>r){var o=i-e,s=n-t;return o*o+s*s}else{var l=i*t-n*e;return l*l/r}}var rC,Iq,Bee;ux.getTextLocation=function(t,r,i,n){if((t!==Iq||n!==Bee)&&(rC={},Iq=t,Bee=n),rC[i])return rC[i];var a=t.getPointAtLength(Dq(i-n/2,r)),o=t.getPointAtLength(Dq(i+n/2,r)),s=Math.atan((o.y-a.y)/(o.x-a.x)),l=t.getPointAtLength(Dq(i,r)),u=(l.x*4+a.x+o.x)/6,f=(l.y*4+a.y+o.y)/6,c={x:u,y:f,theta:s};return rC[i]=c,c};ux.clearLocationCache=function(){Iq=null};ux.getVisibleSegment=function(t,r,i){var n=r.left,a=r.right,o=r.top,s=r.bottom,l=0,u=t.getTotalLength(),f=u,c,h;function v(x){var b=t.getPointAtLength(x);x===0?c=b:x===u&&(h=b);var p=b.x<n?n-b.x:b.x>a?b.x-a:0,w=b.y<o?o-b.y:b.y>s?b.y-s:0;return Math.sqrt(p*p+w*w)}for(var d=v(l);d;){if(l+=d+i,l>f)return;d=v(l)}for(d=v(f);d;){if(f-=d+i,l>f)return;d=v(f)}return{min:l,max:f,len:f-l,total:u,isClosed:l===0&&f===u&&Math.abs(c.x-h.x)<.1&&Math.abs(c.y-h.y)<.1}};ux.findPointOnPath=function(t,r,i,n){n=n||{};for(var a=n.pathLength||t.getTotalLength(),o=n.tolerance||.001,s=n.iterationLimit||30,l=t.getPointAtLength(0)[i]>t.getPointAtLength(a)[i]?-1:1,u=0,f=0,c=a,h,v,d;u<s;){if(h=(f+c)/2,v=t.getPointAtLength(h),d=v[i]-r,Math.abs(d)<o)return v;l*d>0?c=h:f=h,u++}return v}});var nC=ie(bA=>{"use strict";var zg={};bA.throttle=function(t,r,i){var n=zg[t],a=Date.now();if(!n){for(var o in zg)zg[o].ts<a-6e4&&delete zg[o];n=zg[t]={ts:0,timer:null}}Vee(n);function s(){i(),n.ts=Date.now(),n.onDone&&(n.onDone(),n.onDone=null)}if(a>n.ts+r){s();return}n.timer=setTimeout(function(){s(),n.timer=null},r)};bA.done=function(e){var t=zg[e];return!t||!t.timer?Promise.resolve():new Promise(function(r){var i=t.onDone;t.onDone=function(){i&&i(),r(),t.onDone=null}})};bA.clear=function(e){if(e)Vee(zg[e]),delete zg[e];else for(var t in zg)bA.clear(t)};function Vee(e){e&&e.timer!==null&&(clearTimeout(e.timer),e.timer=null)}});var Gee=ie((Der,Hee)=>{"use strict";Hee.exports=function(t){t._responsiveChartHandler&&(window.removeEventListener("resize",t._responsiveChartHandler),delete t._responsiveChartHandler)}});var Yee=ie((Ier,iC)=>{"use strict";iC.exports=Fq;iC.exports.isMobile=Fq;iC.exports.default=Fq;var ytt=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,mtt=/CrOS/,xtt=/android|ipad|playbook|silk/i;function Fq(e){e||(e={});let t=e.ua;if(!t&&typeof navigator!="undefined"&&(t=navigator.userAgent),t&&t.headers&&typeof t.headers["user-agent"]=="string"&&(t=t.headers["user-agent"]),typeof t!="string")return!1;let r=ytt.test(t)&&!mtt.test(t)||!!e.tablet&&xtt.test(t);return!r&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.indexOf("Macintosh")!==-1&&t.indexOf("Safari")!==-1&&(r=!0),r}});var Xee=ie((Fer,Wee)=>{"use strict";var _tt=la(),btt=Yee();Wee.exports=function(t){var r;if(t&&t.hasOwnProperty("userAgent")?r=t.userAgent:r=wtt(),typeof r!="string")return!0;var i=btt({ua:{headers:{"user-agent":r}},tablet:!0,featureDetect:!1});if(!i)for(var n=r.split(" "),a=1;a<n.length;a++){var o=n[a];if(o.indexOf("Safari")!==-1)for(var s=a-1;s>-1;s--){var l=n[s];if(l.substr(0,8)==="Version/"){var u=l.substr(8).split(".")[0];if(_tt(u)&&(u=+u),u>=13)return!0}}}return i};function wtt(){var e;return typeof navigator!="undefined"&&(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),e}});var jee=ie((qer,Zee)=>{"use strict";var Ttt=Mi();Zee.exports=function(t,r,i){var n=t.selectAll("g."+i.replace(/\s/g,".")).data(r,function(o){return o[0].trace.uid});n.exit().remove(),n.enter().append("g").attr("class",i),n.order();var a=t.classed("rangeplot")?"nodeRangePlot3":"node3";return n.each(function(o){o[0][a]=Ttt.select(this)}),n}});var Jee=ie((zer,Kee)=>{"use strict";var Att=Ti();Kee.exports=function(t,r){for(var i=t._context.locale,n=0;n<2;n++){for(var a=t._context.locales,o=0;o<2;o++){var s=(a[i]||{}).dictionary;if(s){var l=s[r];if(l)return l}a=Att.localeRegistry}var u=i.split("-")[0];if(u===i)break;i=u}return r}});var qq=ie((Oer,Qee)=>{"use strict";Qee.exports=function(t){for(var r={},i=[],n=0,a=0;a<t.length;a++){var o=t[a];r[o]!==1&&(r[o]=1,i[n++]=o)}return i}});var ete=ie((Ber,$ee)=>{"use strict";$ee.exports=function(t){for(var r=Ett(t)?Stt:Mtt,i=[],n=0;n<t.length;n++){var a=t[n];r(a)&&i.push(a)}return i};function Mtt(e){return e.visible===!0}function Stt(e){var t=e[0].trace;return t.visible===!0&&t._length!==0}function Ett(e){return Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace}});var rte=ie((Ner,tte)=>{"use strict";tte.exports=function(t,r){if(!r)return t;var i=1/Math.abs(r),n=i>1?(i*t+i*r)/i:t+r,a=String(n).length;if(a>16){var o=String(r).length,s=String(t).length;if(a>=s+o){var l=parseFloat(n).toPrecision(12);l.indexOf("e+")===-1&&(n=+l)}}return n}});var ite=ie((Uer,nte)=>{"use strict";var ktt=la(),Ctt=eo().BADNUM,Ltt=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;nte.exports=function(t){return typeof t=="string"&&(t=t.replace(Ltt,"")),ktt(t)?Number(t):Ctt}});var Zt=ie((Ver,yte)=>{"use strict";var wA=Mi(),Ptt=Kb().utcFormat,Rtt=oq().format,fte=la(),cte=eo(),hte=cte.FP_SAFE,Dtt=-hte,ate=cte.BADNUM,Mr=yte.exports={};Mr.adjustFormat=function(t){return!t||/^\d[.]\df/.test(t)||/[.]\d%/.test(t)?t:t==="0.f"?"~f":/^\d%/.test(t)?"~%":/^\ds/.test(t)?"~s":!/^[~,.0$]/.test(t)&&/[&fps]/.test(t)?"~"+t:t};var ote={};Mr.warnBadFormat=function(e){var t=String(e);ote[t]||(ote[t]=1,Mr.warn('encountered bad format: "'+t+'"'))};Mr.noFormat=function(e){return String(e)};Mr.numberFormat=function(e){var t;try{t=Rtt(Mr.adjustFormat(e))}catch(r){return Mr.warnBadFormat(e),Mr.noFormat}return t};Mr.nestedProperty=sA();Mr.keyedContainer=nQ();Mr.relativeAttr=aQ();Mr.isPlainObject=Rg();Mr.toLogRange=Ik();Mr.relinkPrivateKeys=uQ();var im=hh();Mr.isArrayBuffer=im.isArrayBuffer;Mr.isTypedArray=im.isTypedArray;Mr.isArrayOrTypedArray=im.isArrayOrTypedArray;Mr.isArray1D=im.isArray1D;Mr.ensureArray=im.ensureArray;Mr.concat=im.concat;Mr.maxRowLength=im.maxRowLength;Mr.minRowLength=im.minRowLength;var vte=Qb();Mr.mod=vte.mod;Mr.modHalf=vte.modHalf;var am=kQ();Mr.valObjectMeta=am.valObjectMeta;Mr.coerce=am.coerce;Mr.coerce2=am.coerce2;Mr.coerceFont=am.coerceFont;Mr.coercePattern=am.coercePattern;Mr.coerceHoverinfo=am.coerceHoverinfo;Mr.coerceSelectionMarkerOpacity=am.coerceSelectionMarkerOpacity;Mr.validate=am.validate;var kd=Cee();Mr.dateTime2ms=kd.dateTime2ms;Mr.isDateTime=kd.isDateTime;Mr.ms2DateTime=kd.ms2DateTime;Mr.ms2DateTimeLocal=kd.ms2DateTimeLocal;Mr.cleanDate=kd.cleanDate;Mr.isJSDate=kd.isJSDate;Mr.formatDate=kd.formatDate;Mr.incrementMonth=kd.incrementMonth;Mr.dateTick0=kd.dateTick0;Mr.dfltRange=kd.dfltRange;Mr.findExactDates=kd.findExactDates;Mr.MIN_MS=kd.MIN_MS;Mr.MAX_MS=kd.MAX_MS;var fx=eC();Mr.findBin=fx.findBin;Mr.sorterAsc=fx.sorterAsc;Mr.sorterDes=fx.sorterDes;Mr.distinctVals=fx.distinctVals;Mr.roundUp=fx.roundUp;Mr.sort=fx.sort;Mr.findIndexOfMin=fx.findIndexOfMin;Mr.sortObjectKeys=sx();var om=Ree();Mr.aggNums=om.aggNums;Mr.len=om.len;Mr.mean=om.mean;Mr.median=om.median;Mr.midRange=om.midRange;Mr.variance=om.variance;Mr.stdev=om.stdev;Mr.interp=om.interp;var $p=Vk();Mr.init2dArray=$p.init2dArray;Mr.transposeRagged=$p.transposeRagged;Mr.dot=$p.dot;Mr.translationMatrix=$p.translationMatrix;Mr.rotationMatrix=$p.rotationMatrix;Mr.rotationXYMatrix=$p.rotationXYMatrix;Mr.apply3DTransform=$p.apply3DTransform;Mr.apply2DTransform=$p.apply2DTransform;Mr.apply2DTransform2=$p.apply2DTransform2;Mr.convertCssMatrix=$p.convertCssMatrix;Mr.inverseTransformMatrix=$p.inverseTransformMatrix;var F0=zee();Mr.deg2rad=F0.deg2rad;Mr.rad2deg=F0.rad2deg;Mr.angleDelta=F0.angleDelta;Mr.angleDist=F0.angleDist;Mr.isFullCircle=F0.isFullCircle;Mr.isAngleInsideSector=F0.isAngleInsideSector;Mr.isPtInsideSector=F0.isPtInsideSector;Mr.pathArc=F0.pathArc;Mr.pathSector=F0.pathSector;Mr.pathAnnulus=F0.pathAnnulus;var l2=Oee();Mr.isLeftAnchor=l2.isLeftAnchor;Mr.isCenterAnchor=l2.isCenterAnchor;Mr.isRightAnchor=l2.isRightAnchor;Mr.isTopAnchor=l2.isTopAnchor;Mr.isMiddleAnchor=l2.isMiddleAnchor;Mr.isBottomAnchor=l2.isBottomAnchor;var u2=Uee();Mr.segmentsIntersect=u2.segmentsIntersect;Mr.segmentDistance=u2.segmentDistance;Mr.getTextLocation=u2.getTextLocation;Mr.clearLocationCache=u2.clearLocationCache;Mr.getVisibleSegment=u2.getVisibleSegment;Mr.findPointOnPath=u2.findPointOnPath;var sC=aa();Mr.extendFlat=sC.extendFlat;Mr.extendDeep=sC.extendDeep;Mr.extendDeepAll=sC.extendDeepAll;Mr.extendDeepNoArrays=sC.extendDeepNoArrays;var zq=Qy();Mr.log=zq.log;Mr.warn=zq.warn;Mr.error=zq.error;var Itt=e2();Mr.counterRegex=Itt.counter;var Oq=nC();Mr.throttle=Oq.throttle;Mr.throttleDone=Oq.done;Mr.clearThrottle=Oq.clear;var q0=dA();Mr.getGraphDiv=q0.getGraphDiv;Mr.isPlotDiv=q0.isPlotDiv;Mr.removeElement=q0.removeElement;Mr.addStyleRule=q0.addStyleRule;Mr.addRelatedStyleRule=q0.addRelatedStyleRule;Mr.deleteRelatedStyleRule=q0.deleteRelatedStyleRule;Mr.getFullTransformMatrix=q0.getFullTransformMatrix;Mr.getElementTransformMatrix=q0.getElementTransformMatrix;Mr.getElementAndAncestors=q0.getElementAndAncestors;Mr.equalDomRects=q0.equalDomRects;Mr.clearResponsive=Gee();Mr.preserveDrawingBuffer=Xee();Mr.makeTraceGroups=jee();Mr._=Jee();Mr.notifier=yq();Mr.filterUnique=qq();Mr.filterVisible=ete();Mr.pushUnique=_q();Mr.increment=rte();Mr.cleanNumber=ite();Mr.ensureNumber=function(t){return fte(t)?(t=Number(t),t>hte||t<Dtt?ate:t):ate};Mr.isIndex=function(e,t){return t!==void 0&&e>=t?!1:fte(e)&&e>=0&&e%1===0};Mr.noop=Uk();Mr.identity=mA();Mr.repeat=function(e,t){for(var r=new Array(t),i=0;i<t;i++)r[i]=e;return r};Mr.swapAttrs=function(e,t,r,i){r||(r="x"),i||(i="y");for(var n=0;n<t.length;n++){var a=t[n],o=Mr.nestedProperty(e,a.replace("?",r)),s=Mr.nestedProperty(e,a.replace("?",i)),l=o.get();o.set(s.get()),s.set(l)}};Mr.raiseToTop=function(t){t.parentNode.appendChild(t)};Mr.cancelTransition=function(e){return e.transition().duration(0)};Mr.constrain=function(e,t,r){return t>r?Math.max(r,Math.min(t,e)):Math.max(t,Math.min(r,e))};Mr.bBoxIntersect=function(e,t,r){return r=r||0,e.left<=t.right+r&&t.left<=e.right+r&&e.top<=t.bottom+r&&t.top<=e.bottom+r};Mr.simpleMap=function(e,t,r,i,n){for(var a=e.length,o=new Array(a),s=0;s<a;s++)o[s]=t(e[s],r,i,n);return o};Mr.randstr=function e(t,r,i,n){if(i||(i=16),r===void 0&&(r=24),r<=0)return"0";var a=Math.log(Math.pow(2,r))/Math.log(i),o="",s,l,u;for(s=2;a===1/0;s*=2)a=Math.log(Math.pow(2,r/s))/Math.log(i)*s;var f=a-Math.floor(a);for(s=0;s<Math.floor(a);s++)u=Math.floor(Math.random()*i).toString(i),o=u+o;f&&(l=Math.pow(i,f),u=Math.floor(Math.random()*l).toString(i),o=u+o);var c=parseInt(o,i);return t&&t[o]||c!==1/0&&c>=Math.pow(2,r)?n>10?(Mr.warn("randstr failed uniqueness"),o):e(t,r,i,(n||0)+1):o};Mr.OptionControl=function(e,t){e||(e={}),t||(t="opt");var r={};return r.optionList=[],r._newoption=function(i){i[t]=e,r[i.name]=i,r.optionList.push(i)},r["_"+t]=e,r};Mr.smooth=function(e,t){if(t=Math.round(t)||0,t<2)return e;var r=e.length,i=2*r,n=2*t-1,a=new Array(n),o=new Array(r),s,l,u,f;for(s=0;s<n;s++)a[s]=(1-Math.cos(Math.PI*(s+1)/t))/(2*t);for(s=0;s<r;s++){for(f=0,l=0;l<n;l++)u=s+l+1-t,u<-r?u-=i*Math.round(u/i):u>=i&&(u-=i*Math.floor(u/i)),u<0?u=-1-u:u>=r&&(u=i-1-u),f+=e[u]*a[l];o[s]=f}return o};Mr.syncOrAsync=function(e,t,r){var i,n;function a(){return Mr.syncOrAsync(e,t,r)}for(;e.length;)if(n=e.splice(0,1)[0],i=n(t),i&&i.then)return i.then(a);return r&&r(t)};Mr.stripTrailingSlash=function(e){return e.substr(-1)==="/"?e.substr(0,e.length-1):e};Mr.noneOrAll=function(e,t,r){if(e){var i=!1,n=!0,a,o;for(a=0;a<r.length;a++)o=e[r[a]],o!=null?i=!0:n=!1;if(i&&!n)for(a=0;a<r.length;a++)e[r[a]]=t[r[a]]}};Mr.mergeArray=function(e,t,r,i){var n=typeof i=="function";if(Mr.isArrayOrTypedArray(e))for(var a=Math.min(e.length,t.length),o=0;o<a;o++){var s=e[o];t[o][r]=n?i(s):s}};Mr.mergeArrayCastPositive=function(e,t,r){return Mr.mergeArray(e,t,r,function(i){var n=+i;return isFinite(n)&&n>0?n:0})};Mr.fillArray=function(e,t,r,i){if(i=i||Mr.identity,Mr.isArrayOrTypedArray(e))for(var n=0;n<t.length;n++)t[n][r]=i(e[n])};Mr.castOption=function(e,t,r,i){i=i||Mr.identity;var n=Mr.nestedProperty(e,r).get();return Mr.isArrayOrTypedArray(n)?Array.isArray(t)&&Mr.isArrayOrTypedArray(n[t[0]])?i(n[t[0]][t[1]]):i(n[t]):n};Mr.extractOption=function(e,t,r,i){if(r in e)return e[r];var n=Mr.nestedProperty(t,i).get();if(!Array.isArray(n))return n};function dte(e){var t={};for(var r in e)for(var i=e[r],n=0;n<i.length;n++)t[i[n]]=+r;return t}Mr.tagSelected=function(e,t,r){var i=t.selectedpoints,n=t._indexToPoints,a;n&&(a=dte(n));function o(c){return c!==void 0&&c<e.length}for(var s=0;s<i.length;s++){var l=i[s];if(Mr.isIndex(l)||Mr.isArrayOrTypedArray(l)&&Mr.isIndex(l[0])&&Mr.isIndex(l[1])){var u=a?a[l]:l,f=r?r[u]:u;o(f)&&(e[f].selected=1)}}};Mr.selIndices2selPoints=function(e){var t=e.selectedpoints,r=e._indexToPoints;if(r){for(var i=dte(r),n=[],a=0;a<t.length;a++){var o=t[a];if(Mr.isIndex(o)){var s=i[o];Mr.isIndex(s)&&n.push(s)}}return n}else return t};Mr.getTargetArray=function(e,t){var r=t.target;if(typeof r=="string"&&r){var i=Mr.nestedProperty(e,r).get();return Mr.isArrayOrTypedArray(i)?i:!1}else if(Mr.isArrayOrTypedArray(r))return r;return!1};function pte(e,t,r){var i={};typeof t!="object"&&(t={});var n=r==="pieLike"?-1:3,a=Object.keys(e),o,s,l;for(o=0;o<a.length;o++)s=a[o],l=e[s],!(s.charAt(0)==="_"||typeof l=="function")&&(s==="module"?i[s]=l:Array.isArray(l)?s==="colorscale"||n===-1?i[s]=l.slice():i[s]=l.slice(0,n):Mr.isTypedArray(l)?n===-1?i[s]=l.subarray():i[s]=l.subarray(0,n):l&&typeof l=="object"?i[s]=pte(e[s],t[s],r):i[s]=l);for(a=Object.keys(t),o=0;o<a.length;o++)s=a[o],l=t[s],(typeof l!="object"||!(s in i)||typeof i[s]!="object")&&(i[s]=l);return i}Mr.minExtend=pte;Mr.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)};Mr.containsAny=function(e,t){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])!==-1)return!0;return!1};Mr.isIE=function(){return typeof window.navigator.msSaveBlob!="undefined"};var Ftt=/Version\/[\d\.]+.*Safari/;Mr.isSafari=function(){return Ftt.test(window.navigator.userAgent)};var qtt=/iPad|iPhone|iPod/;Mr.isIOS=function(){return qtt.test(window.navigator.userAgent)};var ztt=/Firefox\/(\d+)\.\d+/;Mr.getFirefoxVersion=function(){var e=ztt.exec(window.navigator.userAgent);if(e&&e.length===2){var t=parseInt(e[1]);if(!isNaN(t))return t}return null};Mr.isD3Selection=function(e){return e instanceof wA.selection};Mr.ensureSingle=function(e,t,r,i){var n=e.select(t+(r?"."+r:""));if(n.size())return n;var a=e.append(t);return r&&a.classed(r,!0),i&&a.call(i),a};Mr.ensureSingleById=function(e,t,r,i){var n=e.select(t+"#"+r);if(n.size())return n;var a=e.append(t).attr("id",r);return i&&a.call(i),a};Mr.objectFromPath=function(e,t){for(var r=e.split("."),i,n=i={},a=0;a<r.length;a++){var o=r[a],s=null,l=r[a].match(/(.*)\[([0-9]+)\]/);l?(o=l[1],s=l[2],i=i[o]=[],a===r.length-1?i[s]=t:i[s]={},i=i[s]):(a===r.length-1?i[o]=t:i[o]={},i=i[o])}return n};var Ott=/^([^\[\.]+)\.(.+)?/,Btt=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function aC(e){return e.slice(0,2)==="__"}Mr.expandObjectPaths=function(e){var t,r,i,n,a,o,s;if(typeof e=="object"&&!Array.isArray(e)){for(r in e)if(e.hasOwnProperty(r))if(t=r.match(Ott)){if(n=e[r],i=t[1],aC(i))continue;delete e[r],e[i]=Mr.extendDeepNoArrays(e[i]||{},Mr.objectFromPath(r,Mr.expandObjectPaths(n))[i])}else if(t=r.match(Btt)){if(n=e[r],i=t[1],aC(i))continue;if(a=parseInt(t[2]),delete e[r],e[i]=e[i]||[],t[3]===".")s=t[4],o=e[i][a]=e[i][a]||{},Mr.extendDeepNoArrays(o,Mr.objectFromPath(s,Mr.expandObjectPaths(n)));else{if(aC(i))continue;e[i][a]=Mr.expandObjectPaths(n)}}else{if(aC(r))continue;e[r]=Mr.expandObjectPaths(e[r])}}return e};Mr.numSeparate=function(e,t,r){if(r||(r=!1),typeof t!="string"||t.length===0)throw new Error("Separator string required for formatting!");typeof e=="number"&&(e=String(e));var i=/(\d+)(\d{3})/,n=t.charAt(0),a=t.charAt(1),o=e.split("."),s=o[0],l=o.length>1?n+o[1]:"";if(a&&(o.length>1||s.length>4||r))for(;i.test(s);)s=s.replace(i,"$1"+a+"$2");return s+l};Mr.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var gte=/^\w*$/;Mr.templateString=function(e,t){var r={};return e.replace(Mr.TEMPLATE_STRING_REGEX,function(i,n){var a;return gte.test(n)?a=t[n]:(r[n]=r[n]||Mr.nestedProperty(t,n).get,a=r[n]()),Mr.isValidTextValue(a)?a:""})};var Ntt={max:10,count:0,name:"hovertemplate"};Mr.hovertemplateString=function(){return Bq.apply(Ntt,arguments)};var Utt={max:10,count:0,name:"texttemplate"};Mr.texttemplateString=function(){return Bq.apply(Utt,arguments)};var Vtt=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;function Htt(e){var t=e.match(Vtt);return t?{key:t[1],op:t[2],number:Number(t[3])}:{key:e,op:null,number:null}}var Gtt={max:10,count:0,name:"texttemplate",parseMultDiv:!0};Mr.texttemplateStringForShapes=function(){return Bq.apply(Gtt,arguments)};var ste=/^[:|\|]/;function Bq(e,t,r){var i=this,n=arguments;t||(t={});var a={};return e.replace(Mr.TEMPLATE_STRING_REGEX,function(o,s,l){var u=s==="xother"||s==="yother",f=s==="_xother"||s==="_yother",c=s==="_xother_"||s==="_yother_",h=s==="xother_"||s==="yother_",v=u||f||h||c,d=s;(f||c)&&(d=d.substring(1)),(h||c)&&(d=d.substring(0,d.length-1));var x=null,b=null;if(i.parseMultDiv){var p=Htt(d);d=p.key,x=p.op,b=p.number}var w;if(v){if(w=t[d],w===void 0)return""}else{var A,T;for(T=3;T<n.length;T++)if(A=n[T],!!A){if(A.hasOwnProperty(d)){w=A[d];break}if(gte.test(d)||(w=Mr.nestedProperty(A,d).get(),w=a[d]||Mr.nestedProperty(A,d).get(),w&&(a[d]=w)),w!==void 0)break}}if(w!==void 0&&(x==="*"&&(w*=b),x==="/"&&(w/=b)),w===void 0&&i)return i.count<i.max&&(Mr.warn("Variable '"+d+"' in "+i.name+" could not be found!"),w=o),i.count===i.max&&Mr.warn("Too many "+i.name+" warnings - additional warnings will be suppressed"),i.count++,o;if(l){var k;if(l[0]===":"&&(k=r?r.numberFormat:Mr.numberFormat,w!==""&&(w=k(l.replace(ste,""))(w))),l[0]==="|"){k=r?r.timeFormat:Ptt;var _=Mr.dateTime2ms(w);w=Mr.formatDate(_,l.replace(ste,""),!1,k)}}else{var E=d+"Label";t.hasOwnProperty(E)&&(w=t[E])}return v&&(w="("+w+")",(f||c)&&(w=" "+w),(h||c)&&(w=w+" ")),w})}var oC=48,lte=57;Mr.subplotSort=function(e,t){for(var r=Math.min(e.length,t.length)+1,i=0,n=0,a=0;a<r;a++){var o=e.charCodeAt(a)||0,s=t.charCodeAt(a)||0,l=o>=oC&&o<=lte,u=s>=oC&&s<=lte;if(l&&(i=10*i+o-oC),u&&(n=10*n+s-oC),!l||!u){if(i!==n)return i-n;if(o!==s)return o-s}}return n-i};var s2=2e9;Mr.seedPseudoRandom=function(){s2=2e9};Mr.pseudoRandom=function(){var e=s2;return s2=(69069*s2+1)%4294967296,Math.abs(s2-e)<429496729?Mr.pseudoRandom():s2/4294967296};Mr.fillText=function(e,t,r){var i=Array.isArray(r)?function(o){r.push(o)}:function(o){r.text=o},n=Mr.extractOption(e,t,"htx","hovertext");if(Mr.isValidTextValue(n))return i(n);var a=Mr.extractOption(e,t,"tx","text");if(Mr.isValidTextValue(a))return i(a)};Mr.isValidTextValue=function(e){return e||e===0};Mr.formatPercent=function(e,t){t=t||0;for(var r=(Math.round(100*e*Math.pow(10,t))*Math.pow(.1,t)).toFixed(t)+"%",i=0;i<t;i++)r.indexOf(".")!==-1&&(r=r.replace("0%","%"),r=r.replace(".%","%"));return r};Mr.isHidden=function(e){var t=window.getComputedStyle(e).display;return!t||t==="none"};Mr.strTranslate=function(e,t){return e||t?"translate("+e+","+t+")":""};Mr.strRotate=function(e){return e?"rotate("+e+")":""};Mr.strScale=function(e){return e!==1?"scale("+e+")":""};Mr.getTextTransform=function(e){var t=e.noCenter,r=e.textX,i=e.textY,n=e.targetX,a=e.targetY,o=e.anchorX||0,s=e.anchorY||0,l=e.rotate,u=e.scale;return u?u>1&&(u=1):u=0,Mr.strTranslate(n-u*(r+o),a-u*(i+s))+Mr.strScale(u)+(l?"rotate("+l+(t?"":" "+r+" "+i)+")":"")};Mr.setTransormAndDisplay=function(e,t){e.attr("transform",Mr.getTextTransform(t)),e.style("display",t.scale?null:"none")};Mr.ensureUniformFontSize=function(e,t){var r=Mr.extendFlat({},t);return r.size=Math.max(t.size,e._fullLayout.uniformtext.minsize||0),r};Mr.join2=function(e,t,r){var i=e.length;return i>1?e.slice(0,-1).join(t)+r+e[i-1]:e.join(t)};Mr.bigFont=function(e){return Math.round(1.2*e)};var ute=Mr.getFirefoxVersion(),Ytt=ute!==null&&ute<86;Mr.getPositionFromD3Event=function(){return Ytt?[wA.event.layerX,wA.event.layerY]:[wA.event.offsetX,wA.event.offsetY]}});var _te=ie(()=>{"use strict";var Wtt=Zt(),mte={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(Nq in mte)xte=Nq.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),Wtt.addStyleRule(xte,mte[Nq]);var xte,Nq});var Uq=ie((Yer,bte)=>{bte.exports=!0});var Hq=ie((Wer,wte)=>{"use strict";var Xtt=Uq(),Vq;typeof window.matchMedia=="function"?Vq=!window.matchMedia("(hover: none)").matches:Vq=Xtt;wte.exports=Vq});var cx=ie((Xer,Gq)=>{"use strict";var f2=typeof Reflect=="object"?Reflect:null,Tte=f2&&typeof f2.apply=="function"?f2.apply:function(t,r,i){return Function.prototype.apply.call(t,r,i)},lC;f2&&typeof f2.ownKeys=="function"?lC=f2.ownKeys:Object.getOwnPropertySymbols?lC=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:lC=function(t){return Object.getOwnPropertyNames(t)};function Ztt(e){console&&console.warn&&console.warn(e)}var Mte=Number.isNaN||function(t){return t!==t};function _l(){_l.init.call(this)}Gq.exports=_l;Gq.exports.once=Qtt;_l.EventEmitter=_l;_l.prototype._events=void 0;_l.prototype._eventsCount=0;_l.prototype._maxListeners=void 0;var Ate=10;function uC(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(_l,"defaultMaxListeners",{enumerable:!0,get:function(){return Ate},set:function(e){if(typeof e!="number"||e<0||Mte(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Ate=e}});_l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};_l.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Mte(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Ste(e){return e._maxListeners===void 0?_l.defaultMaxListeners:e._maxListeners}_l.prototype.getMaxListeners=function(){return Ste(this)};_l.prototype.emit=function(t){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var n=t==="error",a=this._events;if(a!==void 0)n=n&&a.error===void 0;else if(!n)return!1;if(n){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=a[t];if(l===void 0)return!1;if(typeof l=="function")Tte(l,this,r);else for(var u=l.length,f=Pte(l,u),i=0;i<u;++i)Tte(f[i],this,r);return!0};function Ete(e,t,r,i){var n,a,o;if(uC(r),a=e._events,a===void 0?(a=e._events=Object.create(null),e._eventsCount=0):(a.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),o=a[t]),o===void 0)o=a[t]=r,++e._eventsCount;else if(typeof o=="function"?o=a[t]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),n=Ste(e),n>0&&o.length>n&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=o.length,Ztt(s)}return e}_l.prototype.addListener=function(t,r){return Ete(this,t,r,!1)};_l.prototype.on=_l.prototype.addListener;_l.prototype.prependListener=function(t,r){return Ete(this,t,r,!0)};function jtt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function kte(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=jtt.bind(i);return n.listener=r,i.wrapFn=n,n}_l.prototype.once=function(t,r){return uC(r),this.on(t,kte(this,t,r)),this};_l.prototype.prependOnceListener=function(t,r){return uC(r),this.prependListener(t,kte(this,t,r)),this};_l.prototype.removeListener=function(t,r){var i,n,a,o,s;if(uC(r),n=this._events,n===void 0)return this;if(i=n[t],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||r));else if(typeof i!="function"){for(a=-1,o=i.length-1;o>=0;o--)if(i[o]===r||i[o].listener===r){s=i[o].listener,a=o;break}if(a<0)return this;a===0?i.shift():Ktt(i,a),i.length===1&&(n[t]=i[0]),n.removeListener!==void 0&&this.emit("removeListener",t,s||r)}return this};_l.prototype.off=_l.prototype.removeListener;_l.prototype.removeAllListeners=function(t){var r,i,n;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var a=Object.keys(i),o;for(n=0;n<a.length;++n)o=a[n],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(n=r.length-1;n>=0;n--)this.removeListener(t,r[n]);return this};function Cte(e,t,r){var i=e._events;if(i===void 0)return[];var n=i[t];return n===void 0?[]:typeof n=="function"?r?[n.listener||n]:[n]:r?Jtt(n):Pte(n,n.length)}_l.prototype.listeners=function(t){return Cte(this,t,!0)};_l.prototype.rawListeners=function(t){return Cte(this,t,!1)};_l.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Lte.call(e,t)};_l.prototype.listenerCount=Lte;function Lte(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}_l.prototype.eventNames=function(){return this._eventsCount>0?lC(this._events):[]};function Pte(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}function Ktt(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Jtt(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function Qtt(e,t){return new Promise(function(r,i){function n(o){e.removeListener(t,a),i(o)}function a(){typeof e.removeListener=="function"&&e.removeListener("error",n),r([].slice.call(arguments))}Rte(e,t,a,{once:!0}),t!=="error"&&$tt(e,n,{once:!0})})}function $tt(e,t,r){typeof e.on=="function"&&Rte(e,"error",t,r)}function Rte(e,t,r,i){if(typeof e.on=="function")i.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function n(a){i.once&&e.removeEventListener(t,n),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}});var c2=ie((Zer,Dte)=>{"use strict";var Yq=cx().EventEmitter,ert={init:function(e){if(e._ev instanceof Yq)return e;var t=new Yq,r=new Yq;return e._ev=t,e._internalEv=r,e.on=t.on.bind(t),e.once=t.once.bind(t),e.removeListener=t.removeListener.bind(t),e.removeAllListeners=t.removeAllListeners.bind(t),e._internalOn=r.on.bind(r),e._internalOnce=r.once.bind(r),e._removeInternalListener=r.removeListener.bind(r),e._removeAllInternalListeners=r.removeAllListeners.bind(r),e.emit=function(i,n){typeof jQuery!="undefined"&&jQuery(e).trigger(i,n),t.emit(i,n),r.emit(i,n)},e},triggerHandler:function(e,t,r){var i,n;typeof jQuery!="undefined"&&(i=jQuery(e).triggerHandler(t,r));var a=e._ev;if(!a)return i;var o=a._events[t];if(!o)return i;function s(u){if(u.listener){if(a.removeListener(t,u.listener),!u.fired)return u.fired=!0,u.listener.apply(a,[r])}else return u.apply(a,[r])}o=Array.isArray(o)?o:[o];var l;for(l=0;l<o.length-1;l++)s(o[l]);return n=s(o[l]),i!==void 0?i:n},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}};Dte.exports=ert});var qte=ie((jer,Fte)=>{"use strict";var Ite=Zt(),trt=ix().dfltConfig;function rrt(e,t){for(var r=[],i,n=0;n<t.length;n++)i=t[n],i===e?r[n]=i:typeof i=="object"?r[n]=Array.isArray(i)?Ite.extendDeep([],i):Ite.extendDeepAll({},i):r[n]=i;return r}var Og={};Og.add=function(e,t,r,i,n){var a,o;if(e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},o=e.undoQueue.index,e.autoplay){e.undoQueue.inSequence||(e.autoplay=!1);return}!e.undoQueue.sequence||e.undoQueue.beginSequence?(a={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(o,e.undoQueue.queue.length-o,a),e.undoQueue.index+=1):a=e.undoQueue.queue[o-1],e.undoQueue.beginSequence=!1,a&&(a.undo.calls.unshift(t),a.undo.args.unshift(r),a.redo.calls.push(i),a.redo.args.push(n)),e.undoQueue.queue.length>trt.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--)};Og.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0};Og.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1};Og.undo=function(t){var r,i;if(!(t.undoQueue===void 0||isNaN(t.undoQueue.index)||t.undoQueue.index<=0)){for(t.undoQueue.index--,r=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,i=0;i<r.undo.calls.length;i++)Og.plotDo(t,r.undo.calls[i],r.undo.args[i]);t.undoQueue.inSequence=!1,t.autoplay=!1}};Og.redo=function(t){var r,i;if(!(t.undoQueue===void 0||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length)){for(r=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,i=0;i<r.redo.calls.length;i++)Og.plotDo(t,r.redo.calls[i],r.redo.args[i]);t.undoQueue.inSequence=!1,t.autoplay=!1,t.undoQueue.index++}};Og.plotDo=function(e,t,r){e.autoplay=!0,r=rrt(e,r),t.apply(null,r)};Fte.exports=Og});var Wq=ie((Ker,zte)=>{"use strict";zte.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}});var sm=ie($u=>{"use strict";var vh=Ti(),MA=Zt(),AA=rs(),Xq=ox(),nrt=Wq(),irt=pA(),art=ix().configAttributes,Ote=Zs(),np=MA.extendDeepAll,h2=MA.isPlainObject,ort=MA.isArrayOrTypedArray,fC=MA.nestedProperty,srt=MA.valObjectMeta,Zq="_isSubplotObj",cC="_isLinkedToArray",lrt="_arrayAttrRegexps",Nte="_deprecated",jq=[Zq,cC,lrt,Nte];$u.IS_SUBPLOT_OBJ=Zq;$u.IS_LINKED_TO_ARRAY=cC;$u.DEPRECATED=Nte;$u.UNDERSCORE_ATTRS=jq;$u.get=function(){var e={};vh.allTypes.forEach(function(r){e[r]=frt(r)});var t={};return Object.keys(vh.transformsRegistry).forEach(function(r){t[r]=hrt(r)}),{defs:{valObjects:srt,metaKeys:jq.concat(["description","role","editType","impliedEdits"]),editType:{traces:Ote.traces,layout:Ote.layout},impliedEdits:{}},traces:e,layout:crt(),transforms:t,frames:vrt(),animation:hx(irt),config:hx(art)}};$u.crawl=function(e,t,r,i){var n=r||0;i=i||"",Object.keys(e).forEach(function(a){var o=e[a];if(jq.indexOf(a)===-1){var s=(i?i+".":"")+a;t(o,a,e,n,s),!$u.isValObject(o)&&h2(o)&&a!=="impliedEdits"&&$u.crawl(o,t,n+1,s)}})};$u.isValObject=function(e){return e&&e.valType!==void 0};$u.findArrayAttributes=function(e){var t=[],r=[],i=[],n,a;function o(h,v,d,x){r=r.slice(0,x).concat([v]),i=i.slice(0,x).concat([h&&h._isLinkedToArray]);var b=h&&(h.valType==="data_array"||h.arrayOk===!0)&&!(r[x-1]==="colorbar"&&(v==="ticktext"||v==="tickvals"));b&&s(n,0,"")}function s(h,v,d){var x=h[r[v]],b=d+r[v];if(v===r.length-1)ort(x)&&t.push(a+b);else if(i[v]){if(Array.isArray(x))for(var p=0;p<x.length;p++)h2(x[p])&&s(x[p],v+1,b+"["+p+"].")}else h2(x)&&s(x,v+1,b+".")}n=e,a="",$u.crawl(AA,o),e._module&&e._module.attributes&&$u.crawl(e._module.attributes,o);var l=e.transforms;if(l)for(var u=0;u<l.length;u++){var f=l[u],c=f._module;c&&(a="transforms["+u+"].",n=f,$u.crawl(c.attributes,o))}return t};$u.getTraceValObject=function(e,t){var r=t[0],i=1,n,a;if(r==="transforms"){if(t.length===1)return AA.transforms;var o=e.transforms;if(!Array.isArray(o)||!o.length)return!1;var s=t[1];if(!TA(s)||s>=o.length)return!1;n=(vh.transformsRegistry[o[s].type]||{}).attributes,a=n&&n[t[2]],i=3}else{var l=e._module;if(l||(l=(vh.modules[e.type||AA.type.dflt]||{})._module),!l)return!1;if(n=l.attributes,a=n&&n[r],!a){var u=l.basePlotModule;u&&u.attributes&&(a=u.attributes[r])}a||(a=AA[r])}return Ute(a,t,i)};$u.getLayoutValObject=function(e,t){var r=urt(e,t[0]);return Ute(r,t,1)};function urt(e,t){var r,i,n,a,o=e._basePlotModules;if(o){var s;for(r=0;r<o.length;r++){if(n=o[r],n.attrRegex&&n.attrRegex.test(t)){if(n.layoutAttrOverrides)return n.layoutAttrOverrides;!s&&n.layoutAttributes&&(s=n.layoutAttributes)}var l=n.baseLayoutAttrOverrides;if(l&&t in l)return l[t]}if(s)return s}var u=e._modules;if(u){for(r=0;r<u.length;r++)if(a=u[r].layoutAttributes,a&&t in a)return a[t]}for(i in vh.componentsRegistry){if(n=vh.componentsRegistry[i],n.name==="colorscale"&&t.indexOf("coloraxis")===0)return n.layoutAttributes[t];if(!n.schema&&t===n.name)return n.layoutAttributes}return t in Xq?Xq[t]:!1}function Ute(e,t,r){if(!e)return!1;if(e._isLinkedToArray){if(TA(t[r]))r++;else if(r<t.length)return!1}for(;r<t.length;r++){var i=e[t[r]];if(h2(i))e=i;else break;if(r===t.length-1)break;if(e._isLinkedToArray){if(r++,!TA(t[r]))return!1}else if(e.valType==="info_array"){r++;var n=t[r];if(!TA(n))return!1;var a=e.items;if(Array.isArray(a)){if(n>=a.length)return!1;if(e.dimensions===2){if(r++,t.length===r)return e;var o=t[r];if(!TA(o))return!1;e=a[n][o]}else e=a[n]}else e=a}}return e}function TA(e){return e===Math.round(e)&&e>=0}function frt(e){var t,r;t=vh.modules[e]._module,r=t.basePlotModule;var i={};i.type=null;var n=np({},AA),a=np({},t.attributes);$u.crawl(a,function(l,u,f,c,h){fC(n,h).set(void 0),l===void 0&&fC(a,h).set(void 0)}),np(i,n),vh.traceIs(e,"noOpacity")&&delete i.opacity,vh.traceIs(e,"showLegend")||(delete i.showlegend,delete i.legendgroup),vh.traceIs(e,"noHover")&&(delete i.hoverinfo,delete i.hoverlabel),t.selectPoints||delete i.selectedpoints,np(i,a),r.attributes&&np(i,r.attributes),i.type=e;var o={meta:t.meta||{},categories:t.categories||{},animatable:!!t.animatable,type:e,attributes:hx(i)};if(t.layoutAttributes){var s={};np(s,t.layoutAttributes),o.layoutAttributes=hx(s)}return t.animatable||$u.crawl(o,function(l){$u.isValObject(l)&&"anim"in l&&delete l.anim}),o}function crt(){var e={},t,r;np(e,Xq);for(t in vh.subplotsRegistry)if(r=vh.subplotsRegistry[t],!!r.layoutAttributes)if(Array.isArray(r.attr))for(var i=0;i<r.attr.length;i++)Bte(e,r,r.attr[i]);else{var n=r.attr==="subplot"?r.name:r.attr;Bte(e,r,n)}for(t in vh.componentsRegistry){r=vh.componentsRegistry[t];var a=r.schema;if(a&&(a.subplots||a.layout)){var o=a.subplots;if(o&&o.xaxis&&!o.yaxis)for(var s in o.xaxis)delete e.yaxis[s];delete e.xaxis.shift,delete e.xaxis.autoshift}else r.name==="colorscale"?np(e,r.layoutAttributes):r.layoutAttributes&&Vte(e,r.layoutAttributes,r.name)}return{layoutAttributes:hx(e)}}function hrt(e){var t=vh.transformsRegistry[e],r=np({},t.attributes);return Object.keys(vh.componentsRegistry).forEach(function(i){var n=vh.componentsRegistry[i];n.schema&&n.schema.transforms&&n.schema.transforms[e]&&Object.keys(n.schema.transforms[e]).forEach(function(a){Vte(r,n.schema.transforms[e][a],a)})}),{attributes:hx(r)}}function vrt(){var e={frames:np({},nrt)};return hx(e),e.frames}function hx(e){return drt(e),prt(e),grt(e),e}function drt(e){function t(i){return{valType:"string",editType:"none"}}function r(i,n,a){$u.isValObject(i)?(i.arrayOk===!0||i.valType==="data_array")&&(a[n+"src"]=t(n)):h2(i)&&(i.role="object")}$u.crawl(e,r)}function prt(e){function t(r,i,n){if(r){var a=r[cC];a&&(delete r[cC],n[i]={items:{}},n[i].items[a]=r,n[i].role="object")}}$u.crawl(e,t)}function grt(e){function t(r){for(var i in r)if(h2(r[i]))t(r[i]);else if(Array.isArray(r[i]))for(var n=0;n<r[i].length;n++)t(r[i][n]);else r[i]instanceof RegExp&&(r[i]=r[i].toString())}t(e)}function Bte(e,t,r){var i=fC(e,r),n=np({},t.layoutAttributes);n[Zq]=!0,i.set(n)}function Vte(e,t,r){var i=fC(e,r);i.set(np(i.get()||{},t))}});var ko=ie(vx=>{"use strict";var v2=Zt(),yrt=rs(),lm="templateitemname",Kq={name:{valType:"string",editType:"none"}};Kq[lm]={valType:"string",editType:"calc"};vx.templatedArray=function(e,t){return t._isLinkedToArray=e,t.name=Kq.name,t[lm]=Kq[lm],t};vx.traceTemplater=function(e){var t={},r,i;for(r in e)i=e[r],Array.isArray(i)&&i.length&&(t[r]=0);function n(a){r=v2.coerce(a,{},yrt,"type");var o={type:r,_template:null};if(r in t){i=e[r];var s=t[r]%i.length;t[r]++,o._template=i[s]}return o}return{newTrace:n}};vx.newContainer=function(e,t,r){var i=e._template,n=i&&(i[t]||r&&i[r]);v2.isPlainObject(n)||(n=null);var a=e[t]={_template:n};return a};vx.arrayTemplater=function(e,t,r){var i=e._template,n=i&&i[Gte(t)],a=i&&i[t];(!Array.isArray(a)||!a.length)&&(a=[]);var o={};function s(u){var f={name:u.name,_input:u},c=f[lm]=u[lm];if(!Hte(c))return f._template=n,f;for(var h=0;h<a.length;h++){var v=a[h];if(v.name===c)return o[c]=1,f._template=v,f}return f[r]=u[r]||!1,f._template=!1,f}function l(){for(var u=[],f=0;f<a.length;f++){var c=a[f],h=c.name;if(Hte(h)&&!o[h]){var v={_template:c,name:h,_input:{_templateitemname:h}};v[lm]=c[lm],u.push(v),o[h]=1}}return u}return{newItem:s,defaultItems:l}};function Hte(e){return e&&typeof e=="string"}function Gte(e){var t=e.length-1;return e.charAt(t)!=="s"&&v2.warn("bad argument to arrayDefaultKey: "+e),e.substr(0,e.length-1)+"defaults"}vx.arrayDefaultKey=Gte;vx.arrayEditor=function(e,t,r){var i=(v2.nestedProperty(e,t).get()||[]).length,n=r._index,a=n>=i&&(r._input||{})._templateitemname;a&&(n=i);var o=t+"["+n+"]",s;function l(){s={},a&&(s[o]={},s[o][lm]=a)}l();function u(v,d){s[v]=d}function f(v,d){a?v2.nestedProperty(s[o],v).set(d):s[o+"."+v]=d}function c(){var v=s;return l(),v}function h(v,d){v&&f(v,d);var x=c();for(var b in x)v2.nestedProperty(e,b).set(x[b])}return{modifyBase:u,modifyItem:f,getUpdateObj:c,applyUpdate:h}}});var Af=ie(($er,Yte)=>{"use strict";var SA=e2().counter;Yte.exports={idRegex:{x:SA("x","( domain)?"),y:SA("y","( domain)?")},attrRegex:SA("[xy]axis"),xAxisMatch:SA("xaxis"),yAxisMatch:SA("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}});var zl=ie(nd=>{"use strict";var mrt=Ti(),Jq=Af();nd.id2name=function(t){if(!(typeof t!="string"||!t.match(Jq.AX_ID_PATTERN))){var r=t.split(" ")[0].substr(1);return r==="1"&&(r=""),t.charAt(0)+"axis"+r}};nd.name2id=function(t){if(t.match(Jq.AX_NAME_PATTERN)){var r=t.substr(5);return r==="1"&&(r=""),t.charAt(0)+r}};nd.cleanId=function(t,r,i){var n=/( domain)$/.test(t);if(!(typeof t!="string"||!t.match(Jq.AX_ID_PATTERN))&&!(r&&t.charAt(0)!==r)&&!(n&&!i)){var a=t.split(" ")[0].substr(1).replace(/^0+/,"");return a==="1"&&(a=""),t.charAt(0)+a+(n&&i?" domain":"")}};nd.list=function(e,t,r){var i=e._fullLayout;if(!i)return[];var n=nd.listIds(e,t),a=new Array(n.length),o;for(o=0;o<n.length;o++){var s=n[o];a[o]=i[s.charAt(0)+"axis"+s.substr(1)]}if(!r){var l=i._subplots.gl3d||[];for(o=0;o<l.length;o++){var u=i[l[o]];t?a.push(u[t+"axis"]):a.push(u.xaxis,u.yaxis,u.zaxis)}}return a};nd.listIds=function(e,t){var r=e._fullLayout;if(!r)return[];var i=r._subplots;return t?i[t+"axis"]:i.xaxis.concat(i.yaxis)};nd.getFromId=function(e,t,r){var i=e._fullLayout;return t=t===void 0||typeof t!="string"?t:t.replace(" domain",""),r==="x"?t=t.replace(/y[0-9]*/,""):r==="y"&&(t=t.replace(/x[0-9]*/,"")),i[nd.id2name(t)]};nd.getFromTrace=function(e,t,r){var i=e._fullLayout,n=null;if(mrt.traceIs(t,"gl3d")){var a=t.scene;a.substr(0,5)==="scene"&&(n=i[a][r+"axis"])}else n=nd.getFromId(e,t[r+"axis"]||r);return n};nd.idSort=function(e,t){var r=e.charAt(0),i=t.charAt(0);return r!==i?r>i?1:-1:+(e.substr(1)||1)-+(t.substr(1)||1)};nd.ref2id=function(e){return/^[xyz]/.test(e)?e.split(" ")[0]:!1};function Wte(e,t){if(t&&t.length){for(var r=0;r<t.length;r++)if(t[r][e])return!0}return!1}nd.isLinked=function(e,t){return Wte(t,e._axisMatchGroups)||Wte(t,e._axisConstraintGroups)}});var um=ie((ttr,Xte)=>{"use strict";function xrt(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".outline-controllers").remove()}function _rt(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".select-outline").remove(),e._fullLayout._outlining=!1}Xte.exports={clearOutlineControllers:xrt,clearOutline:_rt}});var hC=ie((rtr,Zte)=>{"use strict";Zte.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}});var pc=ie(vC=>{"use strict";var EA=Ti(),brt=Af().SUBPLOT_PATTERN;vC.getSubplotCalcData=function(e,t,r){var i=EA.subplotsRegistry[t];if(!i)return[];for(var n=i.attr,a=[],o=0;o<e.length;o++){var s=e[o],l=s[0].trace;l[n]===r&&a.push(s)}return a};vC.getModuleCalcData=function(e,t,r){var i=[],n=[],a;if(typeof t=="string"?a=EA.getModule(t).plot:typeof t=="function"?a=t:a=t.plot,!a)return[i,e];for(var o=r,s=0;s<e.length;s++){var l=e[s],u=l[0].trace,f=u.zorder!==void 0;u.visible!==!0||u._length===0||(u._module&&u._module.plot===a&&(!f||u.zorder===o)?i.push(l):n.push(l))}return[i,n]};vC.getSubplotData=function(t,r,i){if(!EA.subplotsRegistry[r])return[];var n=EA.subplotsRegistry[r].attr,a=[],o,s,l;if(r==="gl2d"){var u=i.match(brt);s="x"+u[1],l="y"+u[2]}for(var f=0;f<t.length;f++)o=t[f],r==="gl2d"&&EA.traceIs(o,"gl2d")?o[n[0]]===s&&o[n[1]]===l&&a.push(o):o[n]===i&&a.push(o);return a}});var Qte=ie(dx=>{"use strict";var wrt=Ti(),d2=Zt();dx.manageCommandObserver=function(e,t,r,i){var n={},a=!0;t&&t._commandObserver&&(n=t._commandObserver),n.cache||(n.cache={}),n.lookupTable={};var o=dx.hasSimpleAPICommandBindings(e,r,n.lookupTable);if(t&&t._commandObserver){if(o)return n;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,n}if(o){jte(e,o,n.cache),n.check=function(){if(a){var f=jte(e,o,n.cache);return f.changed&&i&&n.lookupTable[f.value]!==void 0&&(n.disable(),Promise.resolve(i({value:f.value,type:o.type,prop:o.prop,traces:o.traces,index:n.lookupTable[f.value]})).then(n.enable,n.enable)),f.changed}};for(var s=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],l=0;l<s.length;l++)e._internalOn(s[l],n.check);n.remove=function(){for(var u=0;u<s.length;u++)e._removeInternalListener(s[u],n.check)}}else d2.log("Unable to automatically bind plot updates to API command"),n.lookupTable={},n.remove=function(){};return n.disable=function(){a=!1},n.enable=function(){a=!0},t&&(t._commandObserver=n),n};dx.hasSimpleAPICommandBindings=function(e,t,r){var i,n=t.length,a;for(i=0;i<n;i++){var o,s=t[i],l=s.method,u=s.args;if(Array.isArray(u)||(u=[]),!l)return!1;var f=dx.computeAPICommandBindings(e,l,u);if(f.length!==1)return!1;if(!a)a=f[0],Array.isArray(a.traces)&&a.traces.sort();else{if(o=f[0],o.type!==a.type||o.prop!==a.prop)return!1;if(Array.isArray(a.traces))if(Array.isArray(o.traces)){o.traces.sort();for(var c=0;c<a.traces.length;c++)if(a.traces[c]!==o.traces[c])return!1}else return!1;else if(o.prop!==a.prop)return!1}o=f[0];var h=o.value;if(Array.isArray(h))if(h.length===1)h=h[0];else return!1;r&&(r[h]=i)}return a};function jte(e,t,r){var i,n,a,o=!1;if(t.type==="data")i=e._fullData[t.traces!==null?t.traces[0]:0];else if(t.type==="layout")i=e._fullLayout;else return!1;return n=d2.nestedProperty(i,t.prop).get(),a=r[t.type]=r[t.type]||{},a.hasOwnProperty(t.prop)&&a[t.prop]!==n&&(o=!0),a[t.prop]=n,{changed:o,value:n}}dx.executeAPICommand=function(e,t,r){if(t==="skip")return Promise.resolve();var i=wrt.apiMethodRegistry[t],n=[e];Array.isArray(r)||(r=[]);for(var a=0;a<r.length;a++)n.push(r[a]);return i.apply(null,n).catch(function(o){return d2.warn("API call to Plotly."+t+" rejected.",o),Promise.reject(o)})};dx.computeAPICommandBindings=function(e,t,r){var i;switch(Array.isArray(r)||(r=[]),t){case"restyle":i=Jte(e,r);break;case"relayout":i=Kte(e,r);break;case"update":i=Jte(e,[r[0],r[2]]).concat(Kte(e,[r[1]]));break;case"animate":i=Trt(e,r);break;default:i=[]}return i};function Trt(e,t){return Array.isArray(t[0])&&t[0].length===1&&["string","number"].indexOf(typeof t[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]:[]}function Kte(e,t){var r=[],i=t[0],n={};if(typeof i=="string")n[i]=t[1];else if(d2.isPlainObject(i))n=i;else return r;return Qq(n,function(a,o,s){r.push({type:"layout",prop:a,value:s})},"",0),r}function Jte(e,t){var r,i,n,a,o=[];if(i=t[0],n=t[1],r=t[2],a={},typeof i=="string")a[i]=n;else if(d2.isPlainObject(i))a=i,r===void 0&&(r=n);else return o;return r===void 0&&(r=null),Qq(a,function(s,l,u){var f,c;if(Array.isArray(u)){c=u.slice();var h=Math.min(c.length,e.data.length);r&&(h=Math.min(h,r.length)),f=[];for(var v=0;v<h;v++)f[v]=r?r[v]:v}else c=u,f=r?r.slice():null;if(f===null)Array.isArray(c)&&(c=c[0]);else if(Array.isArray(f)){if(!Array.isArray(c)){var d=c;c=[];for(var x=0;x<f.length;x++)c[x]=d}c.length=Math.min(f.length,c.length)}o.push({type:"data",prop:s,traces:f,value:c})},"",0),o}function Qq(e,t,r,i){Object.keys(e).forEach(function(n){var a=e[n];if(n[0]!=="_"){var o=r+(i>0?".":"")+n;d2.isPlainObject(a)?Qq(a,t,o,i+1):t(o,n,a)}})}});var js=ie((atr,hre)=>{"use strict";var ire=Mi(),Art=Kb().timeFormatLocale,Mrt=oq().formatLocale,kA=la(),Srt=sq(),Yo=Ti(),are=sm(),Ert=ko(),Li=Zt(),ore=_i(),$te=eo().BADNUM,id=zl(),krt=um().clearOutline,Crt=hC(),ez=pA(),Lrt=Wq(),Prt=pc().getModuleCalcData,$q=Li.relinkPrivateKeys,p2=Li._,fi=hre.exports={};Li.extendFlat(fi,Yo);fi.attributes=rs();fi.attributes.type.values=fi.allTypes;fi.fontAttrs=Xs();fi.layoutAttributes=ox();var pC=fi.transformsRegistry,gC=Qte();fi.executeAPICommand=gC.executeAPICommand;fi.computeAPICommandBindings=gC.computeAPICommandBindings;fi.manageCommandObserver=gC.manageCommandObserver;fi.hasSimpleAPICommandBindings=gC.hasSimpleAPICommandBindings;fi.redrawText=function(e){return e=Li.getGraphDiv(e),new Promise(function(t){setTimeout(function(){e._fullLayout&&(Yo.getComponentMethod("annotations","draw")(e),Yo.getComponentMethod("legend","draw")(e),Yo.getComponentMethod("colorbar","draw")(e),t(fi.previousPromises(e)))},300)})};fi.resize=function(e){e=Li.getGraphDiv(e);var t,r=new Promise(function(i,n){(!e||Li.isHidden(e))&&n(new Error("Resize must be passed a displayed plot div element.")),e._redrawTimer&&clearTimeout(e._redrawTimer),e._resolveResize&&(t=e._resolveResize),e._resolveResize=i,e._redrawTimer=setTimeout(function(){if(!e.layout||e.layout.width&&e.layout.height||Li.isHidden(e)){i(e);return}delete e.layout.width,delete e.layout.height;var a=e.changed;e.autoplay=!0,Yo.call("relayout",e,{autosize:!0}).then(function(){e.changed=a,e._resolveResize===i&&(delete e._resolveResize,i(e))})},100)});return t&&t(r),r};fi.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then(function(){e._promises=[]})};fi.addLinks=function(e){if(!(!e._context.showLink&&!e._context.showSources)){var t=e._fullLayout,r=Li.ensureSingle(t._paper,"text","js-plot-link-container",function(l){l.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:ore.defaultLine,"pointer-events":"all"}).each(function(){var u=ire.select(this);u.append("tspan").classed("js-link-to-tool",!0),u.append("tspan").classed("js-link-spacer",!0),u.append("tspan").classed("js-sourcelinks",!0)})}),i=r.node(),n={y:t._paper.attr("height")-9};document.body.contains(i)&&i.getComputedTextLength()>=t.width-20?(n["text-anchor"]="start",n.x=5):(n["text-anchor"]="end",n.x=t._paper.attr("width")-7),r.attr(n);var a=r.select(".js-link-to-tool"),o=r.select(".js-link-spacer"),s=r.select(".js-sourcelinks");e._context.showSources&&e._context.showSources(e),e._context.showLink&&Rrt(e,a),o.text(a.text()&&s.text()?" - ":"")}};function Rrt(e,t){t.text("");var r=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" \xBB");if(e._context.sendData)r.on("click",function(){fi.sendDataToCloud(e)});else{var i=window.location.pathname.split("/"),n=window.location.search;r.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+i[2].split(".")[0]+"/"+i[1]+n})}}fi.sendDataToCloud=function(e){var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;if(t){e.emit("plotly_beforeexport");var r=ire.select(e).append("div").attr("id","hiddenform").style("display","none"),i=r.append("form").attr({action:t+"/external",method:"post",target:"_blank"}),n=i.append("input").attr({type:"text",name:"data"});return n.node().value=fi.graphJson(e,!1,"keepdata"),i.node().submit(),r.remove(),e.emit("plotly_afterexport"),!1}};var Drt=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],Irt=["year","month","dayMonth","dayMonthYear"];fi.supplyDefaults=function(e,t){var r=t&&t.skipUpdateCalc,i=e._fullLayout||{};if(i._skipDefaults){delete i._skipDefaults;return}var n=e._fullLayout={},a=e.layout||{},o=e._fullData||[],s=e._fullData=[],l=e.data||[],u=e.calcdata||[],f=e._context||{},c;e._transitionData||fi.createTransitionData(e),n._dfltTitle={plot:p2(e,"Click to enter Plot title"),x:p2(e,"Click to enter X axis title"),y:p2(e,"Click to enter Y axis title"),colorbar:p2(e,"Click to enter Colorscale title"),annotation:p2(e,"new text")},n._traceWord=p2(e,"trace");var h=ere(e,Drt);if(n._mapboxAccessToken=f.mapboxAccessToken,i._initialAutoSizeIsDone){var v=i.width,d=i.height;fi.supplyLayoutGlobalDefaults(a,n,h),a.width||(n.width=v),a.height||(n.height=d),fi.sanitizeMargins(n)}else{fi.supplyLayoutGlobalDefaults(a,n,h);var x=!a.width||!a.height,b=n.autosize,p=f.autosizable,w=x&&(b||p);w?fi.plotAutoSize(e,a,n):x&&fi.sanitizeMargins(n),!b&&x&&(a.width=n.width,a.height=n.height)}n._d3locale=zrt(h,n.separators),n._extraFormat=ere(e,Irt),n._initialAutoSizeIsDone=!0,n._dataLength=l.length,n._modules=[],n._visibleModules=[],n._basePlotModules=[];var A=n._subplots=qrt(),T=n._splomAxes={x:{},y:{}},k=n._splomSubplots={};n._splomGridDflt={},n._scatterStackOpts={},n._firstScatter={},n._alignmentOpts={},n._colorAxes={},n._requestRangeslider={},n._traceUids=Frt(o,l),n._globalTransforms=(e._context||{}).globalTransforms,fi.supplyDataDefaults(l,s,a,n);var _=Object.keys(T.x),E=Object.keys(T.y);if(_.length>1&&E.length>1){for(Yo.getComponentMethod("grid","sizeDefaults")(a,n),c=0;c<_.length;c++)Li.pushUnique(A.xaxis,_[c]);for(c=0;c<E.length;c++)Li.pushUnique(A.yaxis,E[c]);for(var S in k)Li.pushUnique(A.cartesian,S)}if(n._has=fi._hasPlotType.bind(n),o.length===s.length)for(c=0;c<s.length;c++)$q(s[c],o[c]);fi.supplyLayoutModuleDefaults(a,n,s,e._transitionData);var g=n._visibleModules,C=[];for(c=0;c<g.length;c++){var M=g[c].crossTraceDefaults;M&&Li.pushUnique(C,M)}for(c=0;c<C.length;c++)C[c](s,n);n._hasOnlyLargeSploms=n._basePlotModules.length===1&&n._basePlotModules[0].name==="splom"&&_.length>15&&E.length>15&&n.shapes.length===0&&n.images.length===0,fi.linkSubplots(s,n,o,i),fi.cleanPlot(s,n,o,i);var P=!!(i._has&&i._has("gl2d")),D=!!(n._has&&n._has("gl2d")),q=!!(i._has&&i._has("cartesian")),O=!!(n._has&&n._has("cartesian")),U=q||P,B=O||D;U&&!B?i._bgLayer.remove():B&&!U&&(n._shouldCreateBgLayer=!0),i._zoomlayer&&!e._dragging&&krt({_fullLayout:i}),Ort(s,n),$q(n,i),Yo.getComponentMethod("colorscale","crossTraceDefaults")(s,n),n._preGUI||(n._preGUI={}),n._tracePreGUI||(n._tracePreGUI={});var F=n._tracePreGUI,N={},X;for(X in F)N[X]="old";for(c=0;c<s.length;c++)X=s[c]._fullInput.uid,N[X]||(F[X]={}),N[X]="new";for(X in N)N[X]==="old"&&delete F[X];lre(n),Yo.getComponentMethod("rangeslider","makeData")(n),!r&&u.length===s.length&&fi.supplyDefaultsUpdateCalc(u,s)};fi.supplyDefaultsUpdateCalc=function(e,t){for(var r=0;r<t.length;r++){var i=t[r],n=(e[r]||[])[0];if(n&&n.trace){var a=n.trace;if(a._hasCalcTransform){var o=a._arrayAttrs,s,l,u;for(s=0;s<o.length;s++)l=o[s],u=Li.nestedProperty(a,l).get().slice(),Li.nestedProperty(i,l).set(u)}n.trace=i}}};function Frt(e,t){var r=t.length,i=[],n,a;for(n=0;n<e.length;n++){var o=e[n]._fullInput;o!==a&&i.push(o),a=o}var s=i.length,l=new Array(r),u={};function f(v,d){l[d]=v,u[v]=1}function c(v,d){if(v&&typeof v=="string"&&!u[v])return f(v,d),!0}for(n=0;n<r;n++){var h=t[n].uid;typeof h=="number"&&(h=String(h)),!c(h,n)&&(n<s&&c(i[n].uid,n)||f(Li.randstr(u),n))}return l}function qrt(){var e=Yo.collectableSubplotTypes,t={},r,i;if(!e){e=[];var n=Yo.subplotsRegistry;for(var a in n){var o=n[a],s=o.attr;if(s&&(e.push(a),Array.isArray(s)))for(i=0;i<s.length;i++)Li.pushUnique(e,s[i])}}for(r=0;r<e.length;r++)t[e[r]]=[];return t}function ere(e,t){var r=e._context.locale;r||(r="en-US");var i=!1,n={};function a(c){for(var h=!0,v=0;v<t.length;v++){var d=t[v];n[d]||(c[d]?n[d]=c[d]:h=!1)}h&&(i=!0)}for(var o=0;o<2;o++){for(var s=e._context.locales,l=0;l<2;l++){var u=(s[r]||{}).format;if(u&&(a(u),i))break;s=Yo.localeRegistry}var f=r.split("-")[0];if(i||f===r)break;r=f}return i||a(Yo.localeRegistry.en.format),n}function zrt(e,t){return e.decimal=t.charAt(0),e.thousands=t.charAt(1),{numberFormat:function(r){try{r=Mrt(e).format(Li.adjustFormat(r))}catch(i){return Li.warnBadFormat(r),Li.noFormat}return r},timeFormat:Art(e).utcFormat}}function Ort(e,t){var r,i=[];t.meta&&(r=t._meta={meta:t.meta,layout:{meta:t.meta}});for(var n=0;n<e.length;n++){var a=e[n];a.meta?i[a.index]=a._meta={meta:a.meta}:t.meta&&(a._meta={meta:t.meta}),t.meta&&(a._meta.layout={meta:t.meta})}i.length&&(r||(r=t._meta={}),r.data=i)}fi.createTransitionData=function(e){e._transitionData||(e._transitionData={}),e._transitionData._frames||(e._transitionData._frames=[]),e._transitionData._frameHash||(e._transitionData._frameHash={}),e._transitionData._counter||(e._transitionData._counter=0),e._transitionData._interruptCallbacks||(e._transitionData._interruptCallbacks=[])};fi._hasPlotType=function(e){var t,r=this._basePlotModules||[];for(t=0;t<r.length;t++)if(r[t].name===e)return!0;var i=this._modules||[];for(t=0;t<i.length;t++){var n=i[t].name;if(n===e)return!0;var a=Yo.modules[n];if(a&&a.categories[e])return!0}return!1};fi.cleanPlot=function(e,t,r,i){var n,a,o=i._basePlotModules||[];for(n=0;n<o.length;n++){var s=o[n];s.clean&&s.clean(e,t,r,i)}var l=i._has&&i._has("gl"),u=t._has&&t._has("gl");l&&!u&&i._glcontainer!==void 0&&(i._glcontainer.selectAll(".gl-canvas").remove(),i._glcontainer.selectAll(".no-webgl").remove(),i._glcanvas=null);var f=!!i._infolayer;e:for(n=0;n<r.length;n++){var c=r[n],h=c.uid;for(a=0;a<e.length;a++){var v=e[a];if(h===v.uid)continue e}f&&i._infolayer.select(".cb"+h).remove()}};fi.linkSubplots=function(e,t,r,i){var n,a,o=i._plots||{},s=t._plots={},l=t._subplots,u={_fullData:e,_fullLayout:t},f=l.cartesian.concat(l.gl2d||[]);for(n=0;n<f.length;n++){var c=f[n],h=o[c],v=id.getFromId(u,c,"x"),d=id.getFromId(u,c,"y"),x;for(h?x=s[c]=h:(x=s[c]={},x.id=c),v._counterAxes.push(d._id),d._counterAxes.push(v._id),v._subplotsWith.push(c),d._subplotsWith.push(c),x.xaxis=v,x.yaxis=d,x._hasClipOnAxisFalse=!1,a=0;a<e.length;a++){var b=e[a];if(b.xaxis===x.xaxis._id&&b.yaxis===x.yaxis._id&&b.cliponaxis===!1){x._hasClipOnAxisFalse=!0;break}}}var p=id.list(u,null,!0),w;for(n=0;n<p.length;n++){w=p[n];var A=null;w.overlaying&&(A=id.getFromId(u,w.overlaying),A&&A.overlaying&&(w.overlaying=!1,A=null)),w._mainAxis=A||w,A&&(w.domain=A.domain.slice()),w._anchorAxis=w.anchor==="free"?null:id.getFromId(u,w.anchor)}for(n=0;n<p.length;n++)if(w=p[n],w._counterAxes.sort(id.idSort),w._subplotsWith.sort(Li.subplotSort),w._mainSubplot=Brt(w,t),w._counterAxes.length&&(w.spikemode&&w.spikemode.indexOf("across")!==-1||w.automargin&&w.mirror&&w.anchor!=="free"||Yo.getComponentMethod("rangeslider","isVisible")(w))){var T=1,k=0;for(a=0;a<w._counterAxes.length;a++){var _=id.getFromId(u,w._counterAxes[a]);T=Math.min(T,_.domain[0]),k=Math.max(k,_.domain[1])}T<k&&(w._counterDomainMin=T,w._counterDomainMax=k)}};function Brt(e,t){var r={_fullLayout:t},i=e._id.charAt(0)==="x",n=e._mainAxis._anchorAxis,a="",o="",s="";if(n&&(s=n._mainAxis._id,a=i?e._id+s:s+e._id),!a||!t._plots[a]){a="";for(var l=e._counterAxes,u=0;u<l.length;u++){var f=l[u],c=i?e._id+f:f+e._id;o||(o=c);var h=id.getFromId(r,f);if(s&&h.overlaying===s){a=c;break}}}return a||o}fi.clearExpandedTraceDefaultColors=function(e){var t,r,i;function n(o,s,l,u){r[u]=s,r.length=u+1,o.valType==="color"&&o.dflt===void 0&&t.push(r.join("."))}for(r=[],t=e._module._colorAttrs,t||(e._module._colorAttrs=t=[],are.crawl(e._module.attributes,n)),i=0;i<t.length;i++){var a=Li.nestedProperty(e,"_input."+t[i]);a.get()||Li.nestedProperty(e,t[i]).set(null)}};fi.supplyDataDefaults=function(e,t,r,i){var n=i._modules,a=i._visibleModules,o=i._basePlotModules,s=0,l=0,u,f,c;i._transformModules=[];function h(E){t.push(E);var S=E._module;S&&(Li.pushUnique(n,S),E.visible===!0&&Li.pushUnique(a,S),Li.pushUnique(o,E._module.basePlotModule),s++,E._input.visible!==!1&&l++)}var v={},d=[],x=(r.template||{}).data||{},b=Ert.traceTemplater(x);for(u=0;u<e.length;u++){if(c=e[u],f=b.newTrace(c),f.uid=i._traceUids[u],fi.supplyTraceDefaults(c,f,l,i,u),f.index=u,f._input=c,f._expandedIndex=s,f.transforms&&f.transforms.length)for(var p=c.visible!==!1&&f.visible===!1,w=Nrt(f,t,r,i),A=0;A<w.length;A++){var T=w[A],k={_template:f._template,type:f.type,uid:f.uid+A};p&&T.visible===!1&&delete T.visible,fi.supplyTraceDefaults(T,k,s,i,u),$q(k,T),k.index=u,k._input=c,k._fullInput=f,k._expandedIndex=s,k._expandedInput=T,h(k)}else f._fullInput=f,f._expandedInput=f,h(f);Yo.traceIs(f,"carpetAxis")&&(v[f.carpet]=f),Yo.traceIs(f,"carpetDependent")&&d.push(u)}for(u=0;u<d.length;u++)if(f=t[d[u]],!!f.visible){var _=v[f.carpet];if(f._carpet=_,!_||!_.visible){f.visible=!1;continue}f.xaxis=_.xaxis,f.yaxis=_.yaxis}};fi.supplyAnimationDefaults=function(e){e=e||{};var t,r={};function i(n,a){return Li.coerce(e||{},r,ez,n,a)}if(i("mode"),i("direction"),i("fromcurrent"),Array.isArray(e.frame))for(r.frame=[],t=0;t<e.frame.length;t++)r.frame[t]=fi.supplyAnimationFrameDefaults(e.frame[t]||{});else r.frame=fi.supplyAnimationFrameDefaults(e.frame||{});if(Array.isArray(e.transition))for(r.transition=[],t=0;t<e.transition.length;t++)r.transition[t]=fi.supplyAnimationTransitionDefaults(e.transition[t]||{});else r.transition=fi.supplyAnimationTransitionDefaults(e.transition||{});return r};fi.supplyAnimationFrameDefaults=function(e){var t={};function r(i,n){return Li.coerce(e||{},t,ez.frame,i,n)}return r("duration"),r("redraw"),t};fi.supplyAnimationTransitionDefaults=function(e){var t={};function r(i,n){return Li.coerce(e||{},t,ez.transition,i,n)}return r("duration"),r("easing"),t};fi.supplyFrameDefaults=function(e){var t={};function r(i,n){return Li.coerce(e,t,Lrt,i,n)}return r("group"),r("name"),r("traces"),r("baseframe"),r("data"),r("layout"),t};fi.supplyTraceDefaults=function(e,t,r,i,n){var a=i.colorway||ore.defaults,o=a[r%a.length],s;function l(A,T){return Li.coerce(e,t,fi.attributes,A,T)}var u=l("visible");l("type"),l("name",i._traceWord+" "+n),l("uirevision",i.uirevision);var f=fi.getModule(t);if(t._module=f,f){var c=f.basePlotModule,h=c.attr,v=c.attributes;if(h&&v){var d=i._subplots,x="";if(u||c.name!=="gl2d"){if(Array.isArray(h))for(s=0;s<h.length;s++){var b=h[s],p=Li.coerce(e,t,v,b);d[b]&&Li.pushUnique(d[b],p),x+=p}else x=Li.coerce(e,t,v,h);d[c.name]&&Li.pushUnique(d[c.name],x)}}}if(u){if(l("customdata"),l("ids"),l("meta"),Yo.traceIs(t,"showLegend")?(Li.coerce(e,t,f.attributes.showlegend?f.attributes:fi.attributes,"showlegend"),l("legend"),l("legendwidth"),l("legendgroup"),l("legendgrouptitle.text"),l("legendrank"),t._dfltShowLegend=!0):t._dfltShowLegend=!1,f&&f.supplyDefaults(e,t,o,i),Yo.traceIs(t,"noOpacity")||l("opacity"),Yo.traceIs(t,"notLegendIsolatable")&&(t.visible=!!t.visible),Yo.traceIs(t,"noHover")||(t.hovertemplate||Li.coerceHoverinfo(e,t,i),t.type!=="parcats"&&Yo.getComponentMethod("fx","supplyDefaults")(e,t,o,i)),f&&f.selectPoints){var w=l("selectedpoints");Li.isTypedArray(w)&&(t.selectedpoints=Array.from(w))}fi.supplyTransformDefaults(e,t,i)}return t};function sre(e){var t=e.transforms;if(Array.isArray(t)&&t.length)for(var r=0;r<t.length;r++){var i=t[r],n=i._module||pC[i.type];if(n&&n.makesData)return!0}return!1}fi.hasMakesDataTransform=sre;fi.supplyTransformDefaults=function(e,t,r){if(t._length||sre(e)){var i=r._globalTransforms||[],n=r._transformModules||[];if(!(!Array.isArray(e.transforms)&&i.length===0))for(var a=e.transforms||[],o=i.concat(a),s=t.transforms=[],l=0;l<o.length;l++){var u=o[l],f=u.type,c=pC[f],h,v=!(u._module&&u._module===c),d=c&&typeof c.transform=="function";c||Li.warn("Unrecognized transform type "+f+"."),c&&c.supplyDefaults&&(v||d)?(h=c.supplyDefaults(u,t,r,e),h.type=f,h._module=c,Li.pushUnique(n,c)):h=Li.extendFlat({},u),s.push(h)}}};function Nrt(e,t,r,i){for(var n=e.transforms,a=[e],o=0;o<n.length;o++){var s=n[o],l=pC[s.type];l&&l.transform&&(a=l.transform(a,{transform:s,fullTrace:e,fullData:t,layout:r,fullLayout:i,transformIndex:o}))}return a}fi.supplyLayoutGlobalDefaults=function(e,t,r){function i(c,h){return Li.coerce(e,t,fi.layoutAttributes,c,h)}var n=e.template;Li.isPlainObject(n)&&(t.template=n,t._template=n.layout,t._dataTemplate=n.data),i("autotypenumbers");var a=Li.coerceFont(i,"font"),o=a.size;Li.coerceFont(i,"title.font",a,{overrideDflt:{size:Math.round(o*1.4)}}),i("title.text",t._dfltTitle.plot),i("title.xref");var s=i("title.yref");i("title.pad.t"),i("title.pad.r"),i("title.pad.b"),i("title.pad.l");var l=i("title.automargin");i("title.x"),i("title.xanchor"),i("title.y"),i("title.yanchor"),l&&(s==="paper"&&(t.title.y!==0&&(t.title.y=1),t.title.yanchor==="auto"&&(t.title.yanchor=t.title.y===0?"top":"bottom")),s==="container"&&(t.title.y==="auto"&&(t.title.y=1),t.title.yanchor==="auto"&&(t.title.yanchor=t.title.y<.5?"bottom":"top")));var u=i("uniformtext.mode");u&&i("uniformtext.minsize"),i("autosize",!(e.width&&e.height)),i("width"),i("height"),i("minreducedwidth"),i("minreducedheight"),i("margin.l"),i("margin.r"),i("margin.t"),i("margin.b"),i("margin.pad"),i("margin.autoexpand"),e.width&&e.height&&fi.sanitizeMargins(t),Yo.getComponentMethod("grid","sizeDefaults")(e,t),i("paper_bgcolor"),i("separators",r.decimal+r.thousands),i("hidesources"),i("colorway"),i("datarevision");var f=i("uirevision");i("editrevision",f),i("selectionrevision",f),Yo.getComponentMethod("modebar","supplyLayoutDefaults")(e,t),Yo.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(e,t,i),Yo.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(e,t,i),i("meta"),Li.isPlainObject(e.transition)&&(i("transition.duration"),i("transition.easing"),i("transition.ordering")),Yo.getComponentMethod("calendars","handleDefaults")(e,t,"calendar"),Yo.getComponentMethod("fx","supplyLayoutGlobalDefaults")(e,t,i),Li.coerce(e,t,Crt,"scattermode")};function dC(e){return typeof e=="string"&&e.substr(e.length-2)==="px"&&parseFloat(e)}fi.plotAutoSize=function(t,r,i){var n=t._context||{},a=n.frameMargins,o,s,l=Li.isPlotDiv(t);if(l&&t.emit("plotly_autosize"),n.fillFrame)o=window.innerWidth,s=window.innerHeight,document.body.style.overflow="hidden";else{var u=l?window.getComputedStyle(t):{};if(o=dC(u.width)||dC(u.maxWidth)||i.width,s=dC(u.height)||dC(u.maxHeight)||i.height,kA(a)&&a>0){var f=1-2*a;o=Math.round(f*o),s=Math.round(f*s)}}var c=fi.layoutAttributes.width.min,h=fi.layoutAttributes.height.min;o<c&&(o=c),s<h&&(s=h);var v=!r.width&&Math.abs(i.width-o)>1,d=!r.height&&Math.abs(i.height-s)>1;(d||v)&&(v&&(i.width=o),d&&(i.height=s)),t._initialAutoSize||(t._initialAutoSize={width:o,height:s}),fi.sanitizeMargins(i)};fi.supplyLayoutModuleDefaults=function(e,t,r,i){var n=Yo.componentsRegistry,a=t._basePlotModules,o,s,l,u=Yo.subplotsRegistry.cartesian;for(o in n)l=n[o],l.includeBasePlot&&l.includeBasePlot(e,t);a.length||a.push(u),t._has("cartesian")&&(Yo.getComponentMethod("grid","contentDefaults")(e,t),u.finalizeSubplots(e,t));for(var f in t._subplots)t._subplots[f].sort(Li.subplotSort);for(s=0;s<a.length;s++)l=a[s],l.supplyLayoutDefaults&&l.supplyLayoutDefaults(e,t,r);var c=t._modules;for(s=0;s<c.length;s++)l=c[s],l.supplyLayoutDefaults&&l.supplyLayoutDefaults(e,t,r);var h=t._transformModules;for(s=0;s<h.length;s++)l=h[s],l.supplyLayoutDefaults&&l.supplyLayoutDefaults(e,t,r,i);for(o in n)l=n[o],l.supplyLayoutDefaults&&l.supplyLayoutDefaults(e,t,r)};fi.purge=function(e){var t=e._fullLayout||{};t._glcontainer!==void 0&&(t._glcontainer.selectAll(".gl-canvas").remove(),t._glcontainer.remove(),t._glcanvas=null),t._modeBar&&t._modeBar.destroy(),e._transitionData&&(e._transitionData._interruptCallbacks&&(e._transitionData._interruptCallbacks.length=0),e._transitionData._animationRaf&&window.cancelAnimationFrame(e._transitionData._animationRaf)),Li.clearThrottle(),Li.clearResponsive(e),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._promises,delete e._redrawTimer,delete e._hmlumcount,delete e._hmpixcount,delete e._transitionData,delete e._transitioning,delete e._initialAutoSize,delete e._transitioningWithDuration,delete e._dragging,delete e._dragged,delete e._dragdata,delete e._hoverdata,delete e._snapshotInProgress,delete e._editing,delete e._mouseDownTime,delete e._legendMouseDownTime,e.removeAllListeners&&e.removeAllListeners()};fi.style=function(e){var t=e._fullLayout._visibleModules,r=[],i;for(i=0;i<t.length;i++){var n=t[i];n.style&&Li.pushUnique(r,n.style)}for(i=0;i<r.length;i++)r[i](e)};fi.sanitizeMargins=function(e){if(!(!e||!e.margin)){var t=e.width,r=e.height,i=e.margin,n=t-(i.l+i.r),a=r-(i.t+i.b),o;n<0&&(o=(t-1)/(i.l+i.r),i.l=Math.floor(o*i.l),i.r=Math.floor(o*i.r)),a<0&&(o=(r-1)/(i.t+i.b),i.t=Math.floor(o*i.t),i.b=Math.floor(o*i.b))}};fi.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}};fi.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1};function lre(e){var t=e.margin;if(!e._size){var r=e._size={l:Math.round(t.l),r:Math.round(t.r),t:Math.round(t.t),b:Math.round(t.b),p:Math.round(t.pad)};r.w=Math.round(e.width)-r.l-r.r,r.h=Math.round(e.height)-r.t-r.b}e._pushmargin||(e._pushmargin={}),e._pushmarginIds||(e._pushmarginIds={}),e._reservedMargin||(e._reservedMargin={})}var ure=2,fre=2;fi.autoMargin=function(e,t,r){var i=e._fullLayout,n=i.width,a=i.height,o=i.margin,s=i.minreducedwidth,l=i.minreducedheight,u=Li.constrain(n-o.l-o.r,ure,s),f=Li.constrain(a-o.t-o.b,fre,l),c=Math.max(0,n-u),h=Math.max(0,a-f),v=i._pushmargin,d=i._pushmarginIds;if(o.autoexpand!==!1){if(!r)delete v[t],delete d[t];else{var x=r.pad;if(x===void 0&&(x=Math.min(12,o.l,o.r,o.t,o.b)),c){var b=(r.l+r.r)/c;b>1&&(r.l/=b,r.r/=b)}if(h){var p=(r.t+r.b)/h;p>1&&(r.t/=p,r.b/=p)}var w=r.xl!==void 0?r.xl:r.x,A=r.xr!==void 0?r.xr:r.x,T=r.yt!==void 0?r.yt:r.y,k=r.yb!==void 0?r.yb:r.y;v[t]={l:{val:w,size:r.l+x},r:{val:A,size:r.r+x},b:{val:k,size:r.b+x},t:{val:T,size:r.t+x}},d[t]=1}if(!i._replotting)return fi.doAutoMargin(e)}};function Urt(e){if("_redrawFromAutoMarginCount"in e._fullLayout)return!1;var t=id.list(e,"",!0);for(var r in t)if(t[r].autoshift||t[r].shift)return!0;return!1}fi.doAutoMargin=function(e){var t=e._fullLayout,r=t.width,i=t.height;t._size||(t._size={}),lre(t);var n=t._size,a=t.margin,o={t:0,b:0,l:0,r:0},s=Li.extendFlat({},n),l=a.l,u=a.r,f=a.t,c=a.b,h=t._pushmargin,v=t._pushmarginIds,d=t.minreducedwidth,x=t.minreducedheight;if(a.autoexpand!==!1){for(var b in h)v[b]||delete h[b];var p=e._fullLayout._reservedMargin;for(var w in p)for(var A in p[w]){var T=p[w][A];o[A]=Math.max(o[A],T)}h.base={l:{val:0,size:l},r:{val:1,size:u},t:{val:1,size:f},b:{val:0,size:c}};for(var k in o){var _=0;for(var E in h)E!=="base"&&kA(h[E][k].size)&&(_=h[E][k].size>_?h[E][k].size:_);var S=Math.max(0,a[k]-_);o[k]=Math.max(0,o[k]-S)}for(var g in h){var C=h[g].l||{},M=h[g].b||{},P=C.val,D=C.size,q=M.val,O=M.size,U=r-o.r-o.l,B=i-o.t-o.b;for(var F in h){if(kA(D)&&h[F].r){var N=h[F].r.val,X=h[F].r.size;if(N>P){var K=(D*N+(X-U)*P)/(N-P),ne=(X*(1-P)+(D-U)*(1-N))/(N-P);K+ne>l+u&&(l=K,u=ne)}}if(kA(O)&&h[F].t){var fe=h[F].t.val,ue=h[F].t.size;if(fe>q){var ee=(O*fe+(ue-B)*q)/(fe-q),Z=(ue*(1-q)+(O-B)*(1-fe))/(fe-q);ee+Z>c+f&&(c=ee,f=Z)}}}}}var oe=Li.constrain(r-a.l-a.r,ure,d),ce=Li.constrain(i-a.t-a.b,fre,x),le=Math.max(0,r-oe),me=Math.max(0,i-ce);if(le){var he=(l+u)/le;he>1&&(l/=he,u/=he)}if(me){var te=(c+f)/me;te>1&&(c/=te,f/=te)}if(n.l=Math.round(l)+o.l,n.r=Math.round(u)+o.r,n.t=Math.round(f)+o.t,n.b=Math.round(c)+o.b,n.p=Math.round(a.pad),n.w=Math.round(r)-n.l-n.r,n.h=Math.round(i)-n.t-n.b,!t._replotting&&(fi.didMarginChange(s,n)||Urt(e))){"_redrawFromAutoMarginCount"in t?t._redrawFromAutoMarginCount++:t._redrawFromAutoMarginCount=1;var ge=3*(1+Object.keys(v).length);if(t._redrawFromAutoMarginCount<ge)return Yo.call("_doPlot",e);t._size=s,Li.warn("Too many auto-margin redraws.")}Vrt(e)};function Vrt(e){var t=id.list(e,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(r){for(var i=0;i<t.length;i++){var n=t[i][r];n&&n()}})}var tre=["l","r","t","b","p","w","h"];fi.didMarginChange=function(e,t){for(var r=0;r<tre.length;r++){var i=tre[r],n=e[i],a=t[i];if(!kA(n)||Math.abs(a-n)>1)return!0}return!1};fi.graphJson=function(e,t,r,i,n,a){(n&&t&&!e._fullData||n&&!t&&!e._fullLayout)&&fi.supplyDefaults(e);var o=n?e._fullData:e.data,s=n?e._fullLayout:e.layout,l=(e._transitionData||{})._frames;function u(h,v){if(typeof h=="function")return v?"_function_":null;if(Li.isPlainObject(h)){var d={},x;return Object.keys(h).sort().forEach(function(A){if(["_","["].indexOf(A.charAt(0))===-1){if(typeof h[A]=="function"){v&&(d[A]="_function");return}if(r==="keepdata"){if(A.substr(A.length-3)==="src")return}else if(r==="keepstream"){if(x=h[A+"src"],typeof x=="string"&&x.indexOf(":")>0&&!Li.isPlainObject(h.stream))return}else if(r!=="keepall"&&(x=h[A+"src"],typeof x=="string"&&x.indexOf(":")>0))return;d[A]=u(h[A],v)}}),d}var b=Array.isArray(h),p=Li.isTypedArray(h);if((b||p)&&h.dtype&&h.shape){var w=h.bdata;return u({dtype:h.dtype,shape:h.shape,bdata:Li.isArrayBuffer(w)?Srt.encode(w):w},v)}return b?h.map(function(A){return u(A,v)}):p?Li.simpleMap(h,Li.identity):Li.isJSDate(h)?Li.ms2DateTimeLocal(+h):h}var f={data:(o||[]).map(function(h){var v=u(h);return t&&delete v.fit,v})};if(!t&&(f.layout=u(s),n)){var c=s._size;f.layout.computed={margin:{b:c.b,l:c.l,r:c.r,t:c.t}}}return l&&(f.frames=u(l)),a&&(f.config=u(e._context,!0)),i==="object"?f:JSON.stringify(f)};fi.modifyFrames=function(e,t){var r,i,n,a=e._transitionData._frames,o=e._transitionData._frameHash;for(r=0;r<t.length;r++)switch(i=t[r],i.type){case"replace":n=i.value;var s=(a[i.index]||{}).name,l=n.name;a[i.index]=o[l]=n,l!==s&&(delete o[s],o[l]=n);break;case"insert":n=i.value,o[n.name]=n,a.splice(i.index,0,n);break;case"delete":n=a[i.index],delete o[n.name],a.splice(i.index,1);break}return Promise.resolve()};fi.computeFrame=function(e,t){var r=e._transitionData._frameHash,i,n,a,o;if(!t)throw new Error("computeFrame must be given a string frame name");var s=r[t.toString()];if(!s)return!1;for(var l=[s],u=[s.name];s.baseframe&&(s=r[s.baseframe.toString()])&&u.indexOf(s.name)===-1;)l.push(s),u.push(s.name);for(var f={};s=l.pop();)if(s.layout&&(f.layout=fi.extendLayout(f.layout,s.layout)),s.data){if(f.data||(f.data=[]),n=s.traces,!n)for(n=[],i=0;i<s.data.length;i++)n[i]=i;for(f.traces||(f.traces=[]),i=0;i<s.data.length;i++)a=n[i],a!=null&&(o=f.traces.indexOf(a),o===-1&&(o=f.data.length,f.traces[o]=a),f.data[o]=fi.extendTrace(f.data[o],s.data[i]))}return f};fi.recomputeFrameHash=function(e){for(var t=e._transitionData._frameHash={},r=e._transitionData._frames,i=0;i<r.length;i++){var n=r[i];n&&n.name&&(t[n.name]=n)}};fi.extendObjectWithContainers=function(e,t,r){var i,n,a,o,s,l,u,f,c=Li.extendDeepNoArrays({},t||{}),h=Li.expandObjectPaths(c),v={};if(r&&r.length)for(a=0;a<r.length;a++)i=Li.nestedProperty(h,r[a]),n=i.get(),n===void 0?Li.nestedProperty(v,r[a]).set(null):(i.set(null),Li.nestedProperty(v,r[a]).set(n));if(e=Li.extendDeepNoArrays(e||{},h),r&&r.length){for(a=0;a<r.length;a++)if(s=Li.nestedProperty(v,r[a]),u=s.get(),!!u){for(l=Li.nestedProperty(e,r[a]),f=l.get(),Array.isArray(f)||(f=[],l.set(f)),o=0;o<u.length;o++){var d=u[o];d===null?f[o]=null:f[o]=fi.extendObjectWithContainers(f[o],d)}l.set(f)}}return e};fi.dataArrayContainers=["transforms","dimensions"];fi.layoutArrayContainers=Yo.layoutArrayContainers;fi.extendTrace=function(e,t){return fi.extendObjectWithContainers(e,t,fi.dataArrayContainers)};fi.extendLayout=function(e,t){return fi.extendObjectWithContainers(e,t,fi.layoutArrayContainers)};fi.transition=function(e,t,r,i,n,a){var o={redraw:n.redraw},s={},l=[];return o.prepareFn=function(){for(var u=Array.isArray(t)?t.length:0,f=i.slice(0,u),c=0;c<f.length;c++){var h=f[c],v=e._fullData[h],d=v._module;if(d){if(d.animatable){var x=d.basePlotModule.name;s[x]||(s[x]=[]),s[x].push(h)}e.data[f[c]]=fi.extendTrace(e.data[f[c]],t[c])}}var b=Li.expandObjectPaths(Li.extendDeepNoArrays({},r)),p=/^[xy]axis[0-9]*$/;for(var w in b)p.test(w)&&delete b[w].range;fi.extendLayout(e.layout,b),delete e.calcdata,fi.supplyDefaults(e),fi.doCalcdata(e);var A=Li.expandObjectPaths(r);if(A){var T=e._fullLayout._plots;for(var k in T){var _=T[k],E=_.xaxis,S=_.yaxis,g=E.range.slice(),C=S.range.slice(),M=null,P=null,D=null,q=null;Array.isArray(A[E._name+".range"])?M=A[E._name+".range"].slice():Array.isArray((A[E._name]||{}).range)&&(M=A[E._name].range.slice()),Array.isArray(A[S._name+".range"])?P=A[S._name+".range"].slice():Array.isArray((A[S._name]||{}).range)&&(P=A[S._name].range.slice()),g&&M&&(E.r2l(g[0])!==E.r2l(M[0])||E.r2l(g[1])!==E.r2l(M[1]))&&(D={xr0:g,xr1:M}),C&&P&&(S.r2l(C[0])!==S.r2l(P[0])||S.r2l(C[1])!==S.r2l(P[1]))&&(q={yr0:C,yr1:P}),(D||q)&&l.push(Li.extendFlat({plotinfo:_},D,q))}}return Promise.resolve()},o.runFn=function(u){var f,c=e._fullLayout._basePlotModules,h=l.length,v;if(r)for(v=0;v<c.length;v++)c[v].transitionAxes&&c[v].transitionAxes(e,l,a,u);h?(f=Li.extendFlat({},a),f.duration=0,delete s.cartesian):f=a;for(var d in s){var x=s[d],b=e._fullData[x[0]]._module;b.basePlotModule.plot(e,x,f,u)}},cre(e,a,o)};fi.transitionFromReact=function(e,t,r,i){var n=e._fullLayout,a=n.transition,o={},s=[];return o.prepareFn=function(){var l=n._plots;o.redraw=!1,t.anim==="some"&&(o.redraw=!0),r.anim==="some"&&(o.redraw=!0);for(var u in l){var f=l[u],c=f.xaxis,h=f.yaxis,v=i[c._name].range.slice(),d=i[h._name].range.slice(),x=c.range.slice(),b=h.range.slice();c.setScale(),h.setScale();var p=null,w=null;(c.r2l(v[0])!==c.r2l(x[0])||c.r2l(v[1])!==c.r2l(x[1]))&&(p={xr0:v,xr1:x}),(h.r2l(d[0])!==h.r2l(b[0])||h.r2l(d[1])!==h.r2l(b[1]))&&(w={yr0:d,yr1:b}),(p||w)&&s.push(Li.extendFlat({plotinfo:f},p,w))}return Promise.resolve()},o.runFn=function(l){for(var u=e._fullData,f=e._fullLayout,c=f._basePlotModules,h,v,d,x=[],b=0;b<u.length;b++)x.push(b);function p(){if(e._fullLayout)for(var A=0;A<c.length;A++)c[A].transitionAxes&&c[A].transitionAxes(e,s,h,l)}function w(){if(e._fullLayout)for(var A=0;A<c.length;A++)c[A].plot(e,d,v,l)}s.length&&t.anim?a.ordering==="traces first"?(h=Li.extendFlat({},a,{duration:0}),d=x,v=a,setTimeout(p,a.duration),w()):(h=a,d=null,v=Li.extendFlat({},a,{duration:0}),setTimeout(w,h.duration),p()):s.length?(h=a,p()):t.anim&&(d=x,v=a,w())},cre(e,a,o)};function cre(e,t,r){var i=!1;function n(c){var h=Promise.resolve();if(!c)return h;for(;c.length;)h=h.then(c.shift());return h}function a(c){if(c)for(;c.length;)c.shift()}function o(){return e.emit("plotly_transitioning",[]),new Promise(function(c){e._transitioning=!0,t.duration>0&&(e._transitioningWithDuration=!0),e._transitionData._interruptCallbacks.push(function(){i=!0}),r.redraw&&e._transitionData._interruptCallbacks.push(function(){return Yo.call("redraw",e)}),e._transitionData._interruptCallbacks.push(function(){e.emit("plotly_transitioninterrupted",[])});var h=0,v=0;function d(){return h++,function(){v++,!i&&v===h&&s(c)}}r.runFn(d),setTimeout(d())})}function s(c){if(e._transitionData)return a(e._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(r.redraw)return Yo.call("redraw",e)}).then(function(){e._transitioning=!1,e._transitioningWithDuration=!1,e.emit("plotly_transitioned",[])}).then(c)}function l(){if(e._transitionData)return e._transitioning=!1,n(e._transitionData._interruptCallbacks)}var u=[fi.previousPromises,l,r.prepareFn,fi.rehover,fi.reselect,o],f=Li.syncOrAsync(u,e);return(!f||!f.then)&&(f=Promise.resolve()),f.then(function(){return e})}fi.doCalcdata=function(e,t){var r=id.list(e),i=e._fullData,n=e._fullLayout,a,o,s,l,u=new Array(i.length),f=(e.calcdata||[]).slice();for(e.calcdata=u,n._numBoxes=0,n._numViolins=0,n._violinScaleGroupStats={},e._hmpixcount=0,e._hmlumcount=0,n._piecolormap={},n._sunburstcolormap={},n._treemapcolormap={},n._iciclecolormap={},n._funnelareacolormap={},s=0;s<i.length;s++)if(Array.isArray(t)&&t.indexOf(s)===-1){u[s]=f[s];continue}for(s=0;s<i.length;s++)a=i[s],a._arrayAttrs=are.findArrayAttributes(a),a._extremes={};var c=n._subplots.polar||[];for(s=0;s<c.length;s++)r.push(n[c[s]].radialaxis,n[c[s]].angularaxis);for(var h in n._colorAxes){var v=n[h];v.cauto!==!1&&(delete v.cmin,delete v.cmax)}var d=!1;function x(w){if(a=i[w],o=a._module,a.visible===!0&&a.transforms){if(o&&o.calc){var A=o.calc(e,a);A[0]&&A[0].t&&A[0].t._scene&&delete A[0].t._scene.dirty}for(l=0;l<a.transforms.length;l++){var T=a.transforms[l];o=pC[T.type],o&&o.calcTransform&&(a._hasCalcTransform=!0,d=!0,o.calcTransform(e,a,T))}}}function b(w,A){if(a=i[w],o=a._module,!!o.isContainer===A){var T=[];if(a.visible===!0&&a._length!==0){delete a._indexToPoints;var k=a.transforms||[];for(l=k.length-1;l>=0;l--)if(k[l].enabled){a._indexToPoints=k[l]._indexToPoints;break}o&&o.calc&&(T=o.calc(e,a))}(!Array.isArray(T)||!T[0])&&(T=[{x:$te,y:$te}]),T[0].t||(T[0].t={}),T[0].trace=a,u[w]=T}}for(rre(r,i,n),s=0;s<i.length;s++)b(s,!0);for(s=0;s<i.length;s++)x(s);for(d&&rre(r,i,n),s=0;s<i.length;s++)b(s,!0);for(s=0;s<i.length;s++)b(s,!1);nre(e);var p=Grt(r,e);if(p.length){for(n._numBoxes=0,n._numViolins=0,s=0;s<p.length;s++)b(p[s],!0);for(s=0;s<p.length;s++)b(p[s],!1);nre(e)}Yo.getComponentMethod("fx","calc")(e),Yo.getComponentMethod("errorbars","calc")(e)};var Hrt=/(total|sum|min|max|mean|median) (ascending|descending)/;function Grt(e,t){var r=[],i,n,a,o,s;function l(F,N,X){var K=N._id.charAt(0);if(F==="histogram2dcontour"){var ne=N._counterAxes[0],fe=id.getFromId(t,ne),ue=K==="x"||ne==="x"&&fe.type==="category",ee=K==="y"||ne==="y"&&fe.type==="category";return function(Z,oe){return Z===0||oe===0||ue&&Z===X[oe].length-1||ee&&oe===X.length-1?-1:(K==="y"?oe:Z)-1}}else return function(Z,oe){return K==="y"?oe:Z}}var u={min:function(F){return Li.aggNums(Math.min,null,F)},max:function(F){return Li.aggNums(Math.max,null,F)},sum:function(F){return Li.aggNums(function(N,X){return N+X},null,F)},total:function(F){return Li.aggNums(function(N,X){return N+X},null,F)},mean:function(F){return Li.mean(F)},median:function(F){return Li.median(F)}};function f(F,N){return F[1]-N[1]}function c(F,N){return N[1]-F[1]}for(i=0;i<e.length;i++){var h=e[i];if(h.type==="category"){var v=h.categoryorder.match(Hrt);if(v){var d=v[1],x=v[2],b=h._id.charAt(0),p=b==="x",w=[];for(n=0;n<h._categories.length;n++)w.push([h._categories[n],[]]);for(n=0;n<h._traceIndices.length;n++){var A=h._traceIndices[n],T=t._fullData[A];if(T.visible===!0){var k=T.type;Yo.traceIs(T,"histogram")&&(delete T._xautoBinFinished,delete T._yautoBinFinished);var _=k==="splom",E=k==="scattergl",S=t.calcdata[A];for(a=0;a<S.length;a++){var g=S[a],C,M;if(_){var P=T._axesDim[h._id];if(!p){var D=T._diag[P][0];D&&(h=t._fullLayout[id.id2name(D)])}var q=g.trace.dimensions[P].values;for(o=0;o<q.length;o++)for(C=h._categoriesMap[q[o]],s=0;s<g.trace.dimensions.length;s++)if(s!==P){var O=g.trace.dimensions[s];w[C][1].push(O.values[o])}}else if(E){for(o=0;o<g.t.x.length;o++)p?(C=g.t.x[o],M=g.t.y[o]):(C=g.t.y[o],M=g.t.x[o]),w[C][1].push(M);g.t&&g.t._scene&&delete g.t._scene.dirty}else if(g.hasOwnProperty("z")){M=g.z;var U=l(T.type,h,M);for(o=0;o<M.length;o++)for(s=0;s<M[o].length;s++)C=U(s,o),C+1&&w[C][1].push(M[o][s])}else for(C=g.p,C===void 0&&(C=g[b]),M=g.s,M===void 0&&(M=g.v),M===void 0&&(M=p?g.y:g.x),Array.isArray(M)||(M===void 0?M=[]:M=[M]),o=0;o<M.length;o++)w[C][1].push(M[o])}}}h._categoriesValue=w;var B=[];for(n=0;n<w.length;n++)B.push([w[n][0],u[d](w[n][1])]);B.sort(x==="descending"?c:f),h._categoriesAggregatedValue=B,h._initialCategories=B.map(function(F){return F[0]}),r=r.concat(h.sortByInitialCategories())}}}return r}function rre(e,t,r){var i={};function n(l){l.clearCalc(),l.type==="multicategory"&&l.setupMultiCategory(t),i[l._id]=1}Li.simpleMap(e,n);for(var a=r._axisMatchGroups||[],o=0;o<a.length;o++)for(var s in a[o])i[s]||n(r[id.id2name(s)])}function nre(e){var t=e._fullLayout,r=t._visibleModules,i={},n,a,o;for(a=0;a<r.length;a++){var s=r[a],l=s.crossTraceCalc;if(l){var u=s.basePlotModule.name;i[u]?Li.pushUnique(i[u],l):i[u]=[l]}}for(o in i){var f=i[o],c=t._subplots[o];if(Array.isArray(c))for(n=0;n<c.length;n++){var h=c[n],v=o==="cartesian"?t._plots[h]:t[h];for(a=0;a<f.length;a++)f[a](e,v,h)}else for(a=0;a<f.length;a++)f[a](e)}}fi.rehover=function(e){e._fullLayout._rehover&&e._fullLayout._rehover()};fi.redrag=function(e){e._fullLayout._redrag&&e._fullLayout._redrag()};fi.reselect=function(e){var t=e._fullLayout,r=(e.layout||{}).selections,i=t._previousSelections;t._previousSelections=r;var n=t._reselect||JSON.stringify(r)!==JSON.stringify(i);Yo.getComponentMethod("selections","reselect")(e,n)};fi.generalUpdatePerTraceModule=function(e,t,r,i){var n=t.traceHash,a={},o;for(o=0;o<r.length;o++){var s=r[o],l=s[0].trace;l.visible&&(a[l.type]=a[l.type]||[],a[l.type].push(s))}for(var u in n)if(!a[u]){var f=n[u][0],c=f[0].trace;c.visible=!1,a[u]=[f]}for(var h in a){var v=a[h],d=v[0][0].trace._module;d.plot(e,t,Li.filterVisible(v),i)}t.traceHash=a};fi.plotBasePlot=function(e,t,r,i,n){var a=Yo.getModule(e),o=Prt(t.calcdata,a)[0];a.plot(t,o,i,n)};fi.cleanBasePlot=function(e,t,r,i,n){var a=n._has&&n._has(e),o=r._has&&r._has(e);a&&!o&&n["_"+e+"layer"].selectAll("g.trace").remove()}});var Cd=ie(px=>{"use strict";px.xmlns="http://www.w3.org/2000/xmlns/";px.svg="http://www.w3.org/2000/svg";px.xlink="http://www.w3.org/1999/xlink";px.svgAttrs={xmlns:px.svg,"xmlns:xlink":px.xlink}});var Mf=ie((str,vre)=>{"use strict";vre.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}});var ks=ie(ip=>{"use strict";var ef=Mi(),Bg=Zt(),Yrt=Bg.strTranslate,tz=Cd(),Wrt=Mf().LINE_SPACING,Xrt=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;ip.convertToTspans=function(e,t,r){var i=e.text(),n=!e.attr("data-notex")&&t&&t._context.typesetMath&&typeof MathJax!="undefined"&&i.match(Xrt),a=ef.select(e.node().parentNode);if(a.empty())return;var o=e.attr("class")?e.attr("class").split(" ")[0]:"text";o+="-math",a.selectAll("svg."+o).remove(),a.selectAll("g."+o+"-group").remove(),e.style("display",null).attr({"data-unformatted":i,"data-math":"N"});function s(){a.empty()||(o=e.attr("class")+"-math",a.select("svg."+o).remove()),e.text("").style("white-space","pre");var l=ont(e.node(),i);l&&e.style("pointer-events","all"),ip.positionText(e),r&&r.call(e)}return n?(t&&t._promises||[]).push(new Promise(function(l){e.style("display","none");var u=parseInt(e.node().style.fontSize,10),f={fontSize:u};Jrt(n[2],f,function(c,h,v){a.selectAll("svg."+o).remove(),a.selectAll("g."+o+"-group").remove();var d=c&&c.select("svg");if(!d||!d.node()){s(),l();return}var x=a.append("g").classed(o+"-group",!0).attr({"pointer-events":"none","data-unformatted":i,"data-math":"Y"});x.node().appendChild(d.node()),h&&h.node()&&d.node().insertBefore(h.node().cloneNode(!0),d.node().firstChild);var b=v.width,p=v.height;d.attr({class:o,height:p,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var w=e.node().style.fill||"black",A=d.select("g");A.attr({fill:w,stroke:w});var T=A.node().getBoundingClientRect(),k=T.width,_=T.height;(k>b||_>p)&&(d.style("overflow","hidden"),T=d.node().getBoundingClientRect(),k=T.width,_=T.height);var E=+e.attr("x"),S=+e.attr("y"),g=u||e.node().getBoundingClientRect().height,C=-g/4;if(o[0]==="y")x.attr({transform:"rotate("+[-90,E,S]+")"+Yrt(-k/2,C-_/2)});else if(o[0]==="l")S=C-_/2;else if(o[0]==="a"&&o.indexOf("atitle")!==0)E=0,S=C;else{var M=e.attr("text-anchor");E=E-k*(M==="middle"?.5:M==="end"?1:0),S=S+C-_/2}d.attr({x:E,y:S}),r&&r.call(e,x),l(x)})})):s(),e};var Zrt=/(<|&lt;|&#60;)/g,jrt=/(>|&gt;|&#62;)/g;function Krt(e){return e.replace(Zrt,"\\lt ").replace(jrt,"\\gt ")}var dre=[["$","$"],["\\(","\\)"]];function Jrt(e,t,r){var i=parseInt((MathJax.version||"").split(".")[0]);if(i!==2&&i!==3){Bg.warn("No MathJax version:",MathJax.version);return}var n,a,o,s,l=function(){return a=Bg.extendDeepAll({},MathJax.Hub.config),o=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:dre},displayAlign:"left"})},u=function(){a=Bg.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=dre},f=function(){if(n=MathJax.Hub.config.menuSettings.renderer,n!=="SVG")return MathJax.Hub.setRenderer("SVG")},c=function(){n=MathJax.config.startup.output,n!=="svg"&&(MathJax.config.startup.output="svg")},h=function(){var w="math-output-"+Bg.randstr({},64);s=ef.select("body").append("div").attr({id:w}).style({visibility:"hidden",position:"absolute","font-size":t.fontSize+"px"}).text(Krt(e));var A=s.node();return i===2?MathJax.Hub.Typeset(A):MathJax.typeset([A])},v=function(){var w=s.select(i===2?".MathJax_SVG":".MathJax"),A=!w.empty()&&s.select("svg").node();if(!A)Bg.log("There was an error in the tex syntax.",e),r();else{var T=A.getBoundingClientRect(),k;i===2?k=ef.select("body").select("#MathJax_SVG_glyphs"):k=w.select("defs"),r(w,k,T)}s.remove()},d=function(){if(n!=="SVG")return MathJax.Hub.setRenderer(n)},x=function(){n!=="svg"&&(MathJax.config.startup.output=n)},b=function(){return o!==void 0&&(MathJax.Hub.processSectionDelay=o),MathJax.Hub.Config(a)},p=function(){MathJax.config=a};i===2?MathJax.Hub.Queue(l,f,h,v,d,b):i===3&&(u(),c(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){h(),v(),x(),p()}))}var mre={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},Qrt={sub:"0.3em",sup:"-0.6em"},$rt={sub:"-0.21em",sup:"0.42em"},pre="\u200B",gre=["http:","https:","mailto:","",void 0,":"],xre=ip.NEWLINES=/(\r\n?|\n)/g,nz=/(<[^<>]*>)/,iz=/<(\/?)([^ >]*)(\s+(.*))?>/i,ent=/<br(\s+.*)?>/i;ip.BR_TAG_ALL=/<br(\s+.*)?>/gi;var _re=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,bre=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,wre=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,tnt=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function gx(e,t){if(!e)return null;var r=e.match(t),i=r&&(r[3]||r[4]);return i&&yC(i)}var rnt=/(^|;)\s*color:/;ip.plainText=function(e,t){t=t||{};for(var r=t.len!==void 0&&t.len!==-1?t.len:1/0,i=t.allowedTags!==void 0?t.allowedTags:["br"],n="...",a=n.length,o=e.split(nz),s=[],l="",u=0,f=0;f<o.length;f++){var c=o[f],h=c.match(iz),v=h&&h[2].toLowerCase();if(v)i.indexOf(v)!==-1&&(s.push(c),l=v);else{var d=c.length;if(u+d<r)s.push(c),u+=d;else if(u<r){var x=r-u;l&&(l!=="br"||x<=a||d<=a)&&s.pop(),r>a?s.push(c.substr(0,x-a)+n):s.push(c.substr(0,x));break}l=""}}return s.join("")};var nnt={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},int=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function yC(e){return e.replace(int,function(t,r){var i;return r.charAt(0)==="#"?i=ant(r.charAt(1)==="x"?parseInt(r.substr(2),16):parseInt(r.substr(1),10)):i=nnt[r],i||t})}ip.convertEntities=yC;function ant(e){if(!(e>1114111)){var t=String.fromCodePoint;if(t)return t(e);var r=String.fromCharCode;return e<=65535?r(e):r((e>>10)+55232,e%1024+56320)}}function ont(e,t){t=t.replace(xre," ");var r=!1,i=[],n,a=-1;function o(){a++;var _=document.createElementNS(tz.svg,"tspan");ef.select(_).attr({class:"line",dy:a*Wrt+"em"}),e.appendChild(_),n=_;var E=i;if(i=[{node:_}],E.length>1)for(var S=1;S<E.length;S++)s(E[S])}function s(_){var E=_.type,S={},g;if(E==="a"){g="a";var C=_.target,M=_.href,P=_.popup;M&&(S={"xlink:xlink:show":C==="_blank"||C.charAt(0)!=="_"?"new":"replace",target:C,"xlink:xlink:href":M},P&&(S.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+P+'");return false;'))}else g="tspan";_.style&&(S.style=_.style);var D=document.createElementNS(tz.svg,g);if(E==="sup"||E==="sub"){l(n,pre),n.appendChild(D);var q=document.createElementNS(tz.svg,"tspan");l(q,pre),ef.select(q).attr("dy",$rt[E]),S.dy=Qrt[E],n.appendChild(D),n.appendChild(q)}else n.appendChild(D);ef.select(D).attr(S),n=_.node=D,i.push(_)}function l(_,E){_.appendChild(document.createTextNode(E))}function u(_){if(i.length===1){Bg.log("Ignoring unexpected end tag </"+_+">.",t);return}var E=i.pop();_!==E.type&&Bg.log("Start tag <"+E.type+"> doesnt match end tag <"+_+">. Pretending it did match.",t),n=i[i.length-1].node}var f=ent.test(t);f?o():(n=e,i=[{node:e}]);for(var c=t.split(nz),h=0;h<c.length;h++){var v=c[h],d=v.match(iz),x=d&&d[2].toLowerCase(),b=mre[x];if(x==="br")o();else if(b===void 0)l(n,yC(v));else if(d[1])u(x);else{var p=d[4],w={type:x},A=gx(p,_re);if(A?(A=A.replace(rnt,"$1 fill:"),b&&(A+=";"+b)):b&&(A=b),A&&(w.style=A),x==="a"){r=!0;var T=gx(p,bre);if(T){var k=Tre(T);k&&(w.href=k,w.target=gx(p,wre)||"_blank",w.popup=gx(p,tnt))}}s(w)}}return r}function Tre(e){var t=encodeURI(decodeURI(e)),r=document.createElement("a"),i=document.createElement("a");r.href=e,i.href=t;var n=r.protocol,a=i.protocol;return gre.indexOf(n)!==-1&&gre.indexOf(a)!==-1?t:""}ip.sanitizeHTML=function(t){t=t.replace(xre," ");for(var r=document.createElement("p"),i=r,n=[],a=t.split(nz),o=0;o<a.length;o++){var s=a[o],l=s.match(iz),u=l&&l[2].toLowerCase();if(u in mre)if(l[1])n.length&&(i=n.pop());else{var f=l[4],c=gx(f,_re),h=c?{style:c}:{};if(u==="a"){var v=gx(f,bre);if(v){var d=Tre(v);if(d){h.href=d;var x=gx(f,wre);x&&(h.target=x)}}}var b=document.createElement(u);i.appendChild(b),ef.select(b).attr(h),i=b,n.push(b)}else i.appendChild(document.createTextNode(yC(s)))}var p="innerHTML";return r[p]};ip.lineCount=function(t){return t.selectAll("tspan.line").size()||1};ip.positionText=function(t,r,i){return t.each(function(){var n=ef.select(this);function a(l,u){return u===void 0?(u=n.attr(l),u===null&&(n.attr(l,0),u=0)):n.attr(l,u),u}var o=a("x",r),s=a("y",i);this.nodeName==="text"&&n.selectAll("tspan.line").attr({x:o,y:s})})};function yre(e,t,r){var i=r.horizontalAlign,n=r.verticalAlign||"top",a=e.node().getBoundingClientRect(),o=t.node().getBoundingClientRect(),s,l,u;return n==="bottom"?l=function(){return a.bottom-s.height}:n==="middle"?l=function(){return a.top+(a.height-s.height)/2}:l=function(){return a.top},i==="right"?u=function(){return a.right-s.width}:i==="center"?u=function(){return a.left+(a.width-s.width)/2}:u=function(){return a.left},function(){s=this.node().getBoundingClientRect();var f=u()-o.left,c=l()-o.top,h=r.gd||{};if(r.gd){h._fullLayout._calcInverseTransform(h);var v=Bg.apply3DTransform(h._fullLayout._invTransform)(f,c);f=v[0],c=v[1]}return this.style({top:c+"px",left:f+"px","z-index":1e3}),this}}var rz="1px ";ip.makeTextShadow=function(e){var t=rz,r=rz,i=rz;return t+r+i+e+", -"+t+"-"+r+i+e+", "+t+"-"+r+i+e+", -"+t+r+i+e};ip.makeEditable=function(e,t){var r=t.gd,i=t.delegate,n=ef.dispatch("edit","input","cancel"),a=i||e;if(e.style({"pointer-events":i?"none":"all"}),e.size()!==1)throw new Error("boo");function o(){l(),e.style({opacity:0});var u=a.attr("class"),f;u?f="."+u.split(" ")[0]+"-math-group":f="[class*=-math-group]",f&&ef.select(e.node().parentNode).select(f).style({opacity:0})}function s(u){var f=u.node(),c=document.createRange();c.selectNodeContents(f);var h=window.getSelection();h.removeAllRanges(),h.addRange(c),f.focus()}function l(){var u=ef.select(r),f=u.select(".svg-container"),c=f.append("div"),h=e.node().style,v=parseFloat(h.fontSize||12),d=t.text;d===void 0&&(d=e.attr("data-unformatted")),c.classed("plugin-editable editable",!0).style({position:"absolute","font-family":h.fontFamily||"Arial","font-size":v,color:t.fill||h.fill||"black",opacity:1,"background-color":t.background||"transparent",outline:"#ffffff33 1px solid",margin:[-v/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(d).call(yre(e,f,t)).on("blur",function(){r._editing=!1,e.text(this.textContent).style({opacity:1});var x=ef.select(this).attr("class"),b;x?b="."+x.split(" ")[0]+"-math-group":b="[class*=-math-group]",b&&ef.select(e.node().parentNode).select(b).style({opacity:0});var p=this.textContent;ef.select(this).transition().duration(0).remove(),ef.select(document).on("mouseup",null),n.edit.call(e,p)}).on("focus",function(){var x=this;r._editing=!0,ef.select(document).on("mouseup",function(){if(ef.event.target===x)return!1;document.activeElement===c.node()&&c.node().blur()})}).on("keyup",function(){ef.event.which===27?(r._editing=!1,e.style({opacity:1}),ef.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),n.cancel.call(e,this.textContent)):(n.input.call(e,this.textContent),ef.select(this).call(yre(e,f,t)))}).on("keydown",function(){ef.event.which===13&&this.blur()}).call(s)}return t.immediate?o():a.on("click",o),ef.rebind(e,n,"on")}});var Hh=ie((utr,Pre)=>{"use strict";var snt=Mi(),xC=Kf(),LA=la(),mC=Zt(),Are=_i(),lnt=rx().isValid;function unt(e,t,r){var i=t?mC.nestedProperty(e,t).get()||{}:e,n=i[r||"color"];n&&n._inputArray&&(n=n._inputArray);var a=!1;if(mC.isArrayOrTypedArray(n)){for(var o=0;o<n.length;o++)if(LA(n[o])){a=!0;break}}return mC.isPlainObject(i)&&(a||i.showscale===!0||LA(i.cmin)&&LA(i.cmax)||lnt(i.colorscale)||mC.isPlainObject(i.colorbar))}var Mre=["showscale","autocolorscale","colorscale","reversescale","colorbar"],CA=["min","max","mid","auto"];function Ere(e){var t=e._colorAx,r=t||e,i={},n,a,o;for(a=0;a<Mre.length;a++)o=Mre[a],i[o]=r[o];if(t)for(n="c",a=0;a<CA.length;a++)o=CA[a],i[o]=r["c"+o];else{var s;for(a=0;a<CA.length;a++){if(o=CA[a],s="c"+o,s in r){i[o]=r[s];continue}s="z"+o,s in r&&(i[o]=r[s])}n=s.charAt(0)}return i._sync=function(l,u){var f=CA.indexOf(l)!==-1?n+l:l;r[f]=r["_"+f]=u},i}function kre(e){for(var t=Ere(e),r=t.min,i=t.max,n=t.reversescale?Cre(t.colorscale):t.colorscale,a=n.length,o=new Array(a),s=new Array(a),l=0;l<a;l++){var u=n[l];o[l]=r+u[0]*(i-r),s[l]=u[1]}return{domain:o,range:s}}function Cre(e){for(var t=e.length,r=new Array(t),i=t-1,n=0;i>=0;i--,n++){var a=e[i];r[n]=[1-a[0],a[1]]}return r}function Lre(e,t){t=t||{};for(var r=e.domain,i=e.range,n=i.length,a=new Array(n),o=0;o<n;o++){var s=xC(i[o]).toRgb();a[o]=[s.r,s.g,s.b,s.a]}var l=snt.scale.linear().domain(r).range(a).clamp(!0),u=t.noNumericCheck,f=t.returnArray,c;return u&&f?c=l:u?c=function(h){return Sre(l(h))}:f?c=function(h){return LA(h)?l(h):xC(h).isValid()?h:Are.defaultLine}:c=function(h){return LA(h)?Sre(l(h)):xC(h).isValid()?h:Are.defaultLine},c.domain=l.domain,c.range=function(){return i},c}function fnt(e,t){return Lre(kre(e),t)}function Sre(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return xC(t).toRgbString()}Pre.exports={hasColorscale:unt,extractOpts:Ere,extractScale:kre,flipScale:Cre,makeColorScaleFunc:Lre,makeColorScaleFuncFromTrace:fnt}});var kl=ie((ftr,Ire)=>{"use strict";var Rre=Mq(),cnt=Rre.FORMAT_LINK,hnt=Rre.DATE_FORMAT_LINK;function vnt(e,t){return{valType:"string",dflt:"",editType:"none",description:(t?az:Dre)("hover text",e)+["By default the values are formatted using "+(t?"generic number format":"`"+e+"axis.hoverformat`")+"."].join(" ")}}function az(e,t){return["Sets the "+e+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+cnt+"."].join(" ")}function Dre(e,t){return az(e,t)+[" And for dates see: "+hnt+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}Ire.exports={axisHoverFormat:vnt,descriptionOnlyNumbers:az,descriptionWithDates:Dre}});var gc=ie((ctr,Kre)=>{"use strict";var oz=Xs(),g2=Qu(),jre=dc().dash,lz=aa().extendFlat,Fre=ko().templatedArray,qre=kl().descriptionWithDates,dnt=eo().ONEDAY,z0=Af(),pnt=z0.HOUR_PATTERN,gnt=z0.WEEKDAY_PATTERN,sz={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},ynt=lz({},sz,{values:sz.values.slice().concat(["sync"])});function zre(e){return{valType:"integer",min:0,dflt:e?5:0,editType:"ticks"}}var Ore={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},Bre={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},Nre={valType:"data_array",editType:"ticks"},Ure={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function Vre(e){var t={valType:"number",min:0,editType:"ticks"};return e||(t.dflt=5),t}function Hre(e){var t={valType:"number",min:0,editType:"ticks"};return e||(t.dflt=1),t}var Gre={valType:"color",dflt:g2.defaultLine,editType:"ticks"},Yre={valType:"color",dflt:g2.lightLine,editType:"ticks"};function Wre(e){var t={valType:"number",min:0,editType:"ticks"};return e||(t.dflt=1),t}var Xre=lz({},jre,{editType:"ticks"}),Zre={valType:"boolean",editType:"ticks"};Kre.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:g2.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:oz({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[z0.idRegex.x.toString(),z0.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[z0.idRegex.x.toString(),z0.idRegex.y.toString()],editType:"calc"},rangebreaks:Fre("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[gnt,pnt,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:dnt},editType:"calc"}),tickmode:ynt,nticks:zre(),tick0:Ore,dtick:Bre,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:Nre,ticktext:{valType:"data_array",editType:"ticks"},ticks:Ure,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:Vre(),tickwidth:Hre(),tickcolor:Gre,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:lz({},jre,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:oz({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:qre("tick label")},tickformatstops:Fre("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:qre("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:g2.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:Zre,gridcolor:Yre,gridwidth:Wre(),griddash:Xre,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:g2.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:g2.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",z0.idRegex.x.toString(),z0.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",z0.idRegex.x.toString(),z0.idRegex.y.toString()],editType:"plot"},minor:{tickmode:sz,nticks:zre("minor"),tick0:Ore,dtick:Bre,tickvals:Nre,ticks:Ure,ticklen:Vre("minor"),tickwidth:Hre("minor"),tickcolor:Gre,gridcolor:Yre,gridwidth:Wre("minor"),griddash:Xre,showgrid:Zre,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:oz({editType:"ticks"})}}});var _C=ie((htr,Qre)=>{"use strict";var bl=gc(),uz=Xs(),Jre=aa().extendFlat,mnt=Zs().overrideAll;Qre.exports=mnt({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:bl.linecolor,outlinewidth:bl.linewidth,bordercolor:bl.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:bl.minor.tickmode,nticks:bl.nticks,tick0:bl.tick0,dtick:bl.dtick,tickvals:bl.tickvals,ticktext:bl.ticktext,ticks:Jre({},bl.ticks,{dflt:""}),ticklabeloverflow:Jre({},bl.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:bl.ticklen,tickwidth:bl.tickwidth,tickcolor:bl.tickcolor,ticklabelstep:bl.ticklabelstep,showticklabels:bl.showticklabels,labelalias:bl.labelalias,tickfont:uz({}),tickangle:bl.tickangle,tickformat:bl.tickformat,tickformatstops:bl.tickformatstops,tickprefix:bl.tickprefix,showtickprefix:bl.showtickprefix,ticksuffix:bl.ticksuffix,showticksuffix:bl.showticksuffix,separatethousands:bl.separatethousands,exponentformat:bl.exponentformat,minexponent:bl.minexponent,showexponent:bl.showexponent,title:{text:{valType:"string"},font:uz({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:uz({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")});var Ls=ie((dtr,ene)=>{"use strict";var xnt=_C(),_nt=e2().counter,bnt=sx(),$re=rx().scales,vtr=bnt($re);function bC(e){return"`"+e+"`"}ene.exports=function(t,r){t=t||"",r=r||{};var i=r.cLetter||"c",n="onlyIfNumerical"in r?r.onlyIfNumerical:!!t,a="noScale"in r?r.noScale:t==="marker.line",o="showScaleDflt"in r?r.showScaleDflt:i==="z",s=typeof r.colorscaleDflt=="string"?$re[r.colorscaleDflt]:null,l=r.editTypeOverride||"",u=t?t+".":"",f,c;"colorAttr"in r?(f=r.colorAttr,c=r.colorAttr):(f={z:"z",c:"color"}[i],c="in "+bC(u+f));var h=n?" Has an effect only if "+c+" is set to a numerical array.":"",v=i+"auto",d=i+"min",x=i+"max",b=i+"mid",p=bC(u+v),w=bC(u+d),A=bC(u+x),T=w+" and "+A,k={};k[d]=k[x]=void 0;var _={};_[v]=!1;var E={};return f==="color"&&(E.color={valType:"color",arrayOk:!0,editType:l||"style"},r.anim&&(E.color.anim=!0)),E[v]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:k},E[d]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:_},E[x]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:_},E[b]={valType:"number",dflt:null,editType:"calc",impliedEdits:k},E.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:!1}},E.autocolorscale={valType:"boolean",dflt:r.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},E.reversescale={valType:"boolean",dflt:!1,editType:"plot"},a||(E.showscale={valType:"boolean",dflt:o,editType:"calc"},E.colorbar=xnt),r.noColorAxis||(E.coloraxis={valType:"subplotid",regex:_nt("coloraxis"),dflt:null,editType:"calc"}),E}});var cz=ie((ptr,tne)=>{"use strict";var wnt=aa().extendFlat,Tnt=Ls(),fz=rx().scales;tne.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:fz.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:fz.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:fz.RdBu,editType:"calc"}},coloraxis:wnt({_isSubplotObj:!0,editType:"calc"},Tnt("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}});var hz=ie((gtr,rne)=>{"use strict";var Ant=Zt();rne.exports=function(t){return Ant.isPlainObject(t.colorbar)}});var pz=ie(dz=>{"use strict";var vz=la(),nne=Zt(),ine=eo(),Mnt=ine.ONEDAY,Snt=ine.ONEWEEK;dz.dtick=function(e,t){var r=t==="log",i=t==="date",n=t==="category",a=i?Mnt:1;if(!e)return a;if(vz(e))return e=Number(e),e<=0?a:n?Math.max(1,Math.round(e)):i?Math.max(.1,e):e;if(typeof e!="string"||!(i||r))return a;var o=e.charAt(0),s=e.substr(1);return s=vz(s)?Number(s):0,s<=0||!(i&&o==="M"&&s===Math.round(s)||r&&o==="L"||r&&o==="D"&&(s===1||s===2))?a:e};dz.tick0=function(e,t,r,i){if(t==="date")return nne.cleanDate(e,nne.dateTick0(r,i%Snt===0?1:0));if(!(i==="D1"||i==="D2"))return vz(e)?Number(e):0}});var yx=ie((mtr,one)=>{"use strict";var ane=pz(),Ent=Zt().isArrayOrTypedArray,knt=hh().isTypedArraySpec,Cnt=hh().decodeTypedArraySpec;one.exports=function(t,r,i,n,a){a||(a={});var o=a.isMinor,s=o?t.minor||{}:t,l=o?r.minor:r,u=o?"minor.":"";function f(w){var A=s[w];return knt(A)&&(A=Cnt(A)),A!==void 0?A:(l._template||{})[w]}var c=f("tick0"),h=f("dtick"),v=f("tickvals"),d=Ent(v)?"array":h?"linear":"auto",x=i(u+"tickmode",d);if(x==="auto"||x==="sync")i(u+"nticks");else if(x==="linear"){var b=l.dtick=ane.dtick(h,n);l.tick0=ane.tick0(c,n,r.calendar,b)}else if(n!=="multicategory"){var p=i(u+"tickvals");p===void 0?l.tickmode="auto":o||i("ticktext")}}});var y2=ie((xtr,lne)=>{"use strict";var gz=Zt(),sne=gc();lne.exports=function(t,r,i,n){var a=n.isMinor,o=a?t.minor||{}:t,s=a?r.minor:r,l=a?sne.minor:sne,u=a?"minor.":"",f=gz.coerce2(o,s,l,"ticklen",a?(r.ticklen||5)*.6:void 0),c=gz.coerce2(o,s,l,"tickwidth",a?r.tickwidth||1:void 0),h=gz.coerce2(o,s,l,"tickcolor",(a?r.tickcolor:void 0)||s.color),v=i(u+"ticks",!a&&n.outerTicks||f||c||h?"outside":"");v||(delete s.ticklen,delete s.tickwidth,delete s.tickcolor)}});var yz=ie((_tr,une)=>{"use strict";une.exports=function(t){var r=["showexponent","showtickprefix","showticksuffix"],i=r.filter(function(a){return t[a]!==void 0}),n=function(a){return t[a]===t[i[0]]};if(i.every(n)||i.length===1)return t[i[0]]}});var dh=ie((btr,fne)=>{"use strict";var wC=Zt(),Lnt=ko();fne.exports=function(t,r,i){var n=i.name,a=i.inclusionAttr||"visible",o=r[n],s=wC.isArrayOrTypedArray(t[n])?t[n]:[],l=r[n]=[],u=Lnt.arrayTemplater(r,n,a),f,c;for(f=0;f<s.length;f++){var h=s[f];wC.isPlainObject(h)?c=u.newItem(h):(c=u.newItem({}),c[a]=!1),c._index=f,c[a]!==!1&&i.handleItemDefaults(h,c,r,i),l.push(c)}var v=u.defaultItems();for(f=0;f<v.length;f++)c=v[f],c._index=l.length,i.handleItemDefaults({},c,r,i,{}),l.push(c);if(wC.isArrayOrTypedArray(o)){var d=Math.min(o.length,l.length);for(f=0;f<d;f++)wC.relinkPrivateKeys(l[f],o[f])}return l}});var fm=ie((wtr,hne)=>{"use strict";var mz=Zt(),Pnt=_i().contrast,cne=gc(),Rnt=yz(),Dnt=dh();hne.exports=function(t,r,i,n,a){a||(a={});var o=i("labelalias");mz.isPlainObject(o)||delete r.labelalias;var s=Rnt(t),l=i("showticklabels");if(l){var u=a.font||{},f=r.color,c=r.ticklabelposition||"",h=c.indexOf("inside")!==-1?Pnt(a.bgColor):f&&f!==cne.color.dflt?f:u.color;if(mz.coerceFont(i,"tickfont",u,{overrideDflt:{color:h}}),!a.noTicklabelstep&&n!=="multicategory"&&n!=="log"&&i("ticklabelstep"),!a.noAng){var v=i("tickangle");!a.noAutotickangles&&v==="auto"&&i("autotickangles")}if(n!=="category"){var d=i("tickformat");Dnt(t,r,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:Int}),r.tickformatstops.length||delete r.tickformatstops,!a.noExp&&!d&&n!=="date"&&(i("showexponent",s),i("exponentformat"),i("minexponent"),i("separatethousands"))}}};function Int(e,t){function r(n,a){return mz.coerce(e,t,cne.tickformatstops,n,a)}var i=r("enabled");i&&(r("dtickrange"),r("value"))}});var cm=ie((Ttr,vne)=>{"use strict";var Fnt=yz();vne.exports=function(t,r,i,n,a){a||(a={});var o=a.tickSuffixDflt,s=Fnt(t),l=i("tickprefix");l&&i("showtickprefix",s);var u=i("ticksuffix",o);u&&i("showticksuffix",s)}});var xz=ie((Atr,dne)=>{"use strict";var hm=Zt(),qnt=ko(),znt=yx(),Ont=y2(),Bnt=fm(),Nnt=cm(),Unt=_C();dne.exports=function(t,r,i){var n=qnt.newContainer(r,"colorbar"),a=t.colorbar||{};function o(M,P){return hm.coerce(a,n,Unt,M,P)}var s=i.margin||{t:0,b:0,l:0,r:0},l=i.width-s.l-s.r,u=i.height-s.t-s.b,f=o("orientation"),c=f==="v",h=o("thicknessmode");o("thickness",h==="fraction"?30/(c?l:u):30);var v=o("lenmode");o("len",v==="fraction"?1:c?u:l);var d=o("yref"),x=o("xref"),b=d==="paper",p=x==="paper",w,A,T,k="left";c?(T="middle",k=p?"left":"right",w=p?1.02:1,A=.5):(T=b?"bottom":"top",k="center",w=.5,A=b?1.02:1),hm.coerce(a,n,{x:{valType:"number",min:p?-2:0,max:p?3:1,dflt:w}},"x"),hm.coerce(a,n,{y:{valType:"number",min:b?-2:0,max:b?3:1,dflt:A}},"y"),o("xanchor",k),o("xpad"),o("yanchor",T),o("ypad"),hm.noneOrAll(a,n,["x","y"]),o("outlinecolor"),o("outlinewidth"),o("bordercolor"),o("borderwidth"),o("bgcolor");var _=hm.coerce(a,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:c?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");o("ticklabeloverflow",_.indexOf("inside")!==-1?"hide past domain":"hide past div"),znt(a,n,o,"linear");var E=i.font,S={noAutotickangles:!0,outerTicks:!1,font:E};_.indexOf("inside")!==-1&&(S.bgColor="black"),Nnt(a,n,o,"linear",S),Bnt(a,n,o,"linear",S),Ont(a,n,o,"linear",S),o("title.text",i._dfltTitle.colorbar);var g=n.showticklabels?n.tickfont:E,C=hm.extendFlat({},E,{family:g.family,size:hm.bigFont(g.size)});hm.coerceFont(o,"title.font",C),o("title.side",c?"top":"right")}});var $f=ie((Mtr,yne)=>{"use strict";var pne=la(),bz=Zt(),Vnt=hz(),Hnt=xz(),gne=rx().isValid,Gnt=Ti().traceIs;function _z(e,t){var r=t.slice(0,t.length-1);return t?bz.nestedProperty(e,r).get()||{}:e}yne.exports=function e(t,r,i,n,a){var o=a.prefix,s=a.cLetter,l="_module"in r,u=_z(t,o),f=_z(r,o),c=_z(r._template||{},o)||{},h=function(){return delete t.coloraxis,delete r.coloraxis,e(t,r,i,n,a)};if(l){var v=i._colorAxes||{},d=n(o+"coloraxis");if(d){var x=Gnt(r,"contour")&&bz.nestedProperty(r,"contours.coloring").get()||"heatmap",b=v[d];b?(b[2].push(h),b[0]!==x&&(b[0]=!1,bz.warn(["Ignoring coloraxis:",d,"setting","as it is linked to incompatible colorscales."].join(" ")))):v[d]=[x,r,[h]];return}}var p=u[s+"min"],w=u[s+"max"],A=pne(p)&&pne(w)&&p<w,T=n(o+s+"auto",!A);T?n(o+s+"mid"):(n(o+s+"min"),n(o+s+"max"));var k=u.colorscale,_=c.colorscale,E;if(k!==void 0&&(E=!gne(k)),_!==void 0&&(E=!gne(_)),n(o+"autocolorscale",E),n(o+"colorscale"),n(o+"reversescale"),o!=="marker.line."){var S;o&&l&&(S=Vnt(u));var g=n(o+"showscale",S);g&&(o&&c&&(f._template=c),Hnt(u,f,i))}}});var bne=ie((Str,_ne)=>{"use strict";var mne=Zt(),Ynt=ko(),xne=cz(),Wnt=$f();_ne.exports=function(t,r){function i(c,h){return mne.coerce(t,r,xne,c,h)}i("colorscale.sequential"),i("colorscale.sequentialminus"),i("colorscale.diverging");var n=r._colorAxes,a,o;function s(c,h){return mne.coerce(a,o,xne.coloraxis,c,h)}for(var l in n){var u=n[l];if(u[0])a=t[l]||{},o=Ynt.newContainer(r,l,"coloraxis"),o._name=l,Wnt(a,o,r,s,{prefix:"",cLetter:"c"});else{for(var f=0;f<u[2].length;f++)u[2][f]();delete r._colorAxes[l]}}}});var Tne=ie((Etr,wne)=>{"use strict";var Xnt=Zt(),Znt=Hh().hasColorscale,jnt=Hh().extractOpts;wne.exports=function(t,r){function i(f,c){var h=f["_"+c];h!==void 0&&(f[c]=h)}function n(f,c){var h=c.container?Xnt.nestedProperty(f,c.container).get():f;if(h)if(h.coloraxis)h._colorAx=r[h.coloraxis];else{var v=jnt(h),d=v.auto;(d||v.min===void 0)&&i(h,c.min),(d||v.max===void 0)&&i(h,c.max),v.autocolorscale&&i(h,"colorscale")}}for(var a=0;a<t.length;a++){var o=t[a],s=o._module.colorbar;if(s)if(Array.isArray(s))for(var l=0;l<s.length;l++)n(o,s[l]);else n(o,s);Znt(o,"marker.line")&&n(o,{container:"marker.line",min:"cmin",max:"cmax"})}for(var u in r._colorAxes)n(r[u],{min:"cmin",max:"cmax"})}});var xv=ie((ktr,Mne)=>{"use strict";var Ane=la(),wz=Zt(),Knt=Hh().extractOpts;Mne.exports=function(t,r,i){var n=t._fullLayout,a=i.vals,o=i.containerStr,s=o?wz.nestedProperty(r,o).get():r,l=Knt(s),u=l.auto!==!1,f=l.min,c=l.max,h=l.mid,v=function(){return wz.aggNums(Math.min,null,a)},d=function(){return wz.aggNums(Math.max,null,a)};if(f===void 0?f=v():u&&(s._colorAx&&Ane(f)?f=Math.min(f,v()):f=v()),c===void 0?c=d():u&&(s._colorAx&&Ane(c)?c=Math.max(c,d()):c=d()),u&&h!==void 0&&(c-h>h-f?f=h-(c-h):c-h<h-f&&(c=h+(h-f))),f===c&&(f-=.5,c+=.5),l._sync("min",f),l._sync("max",c),l.autocolorscale){var x;f*c<0?x=n.colorscale.diverging:f>=0?x=n.colorscale.sequential:x=n.colorscale.sequentialminus,l._sync("colorscale",x)}}});var ul=ie((Ctr,Sne)=>{"use strict";var TC=rx(),m2=Hh();Sne.exports={moduleType:"component",name:"colorscale",attributes:Ls(),layoutAttributes:cz(),supplyLayoutDefaults:bne(),handleDefaults:$f(),crossTraceDefaults:Tne(),calc:xv(),scales:TC.scales,defaultScale:TC.defaultScale,getScale:TC.get,isValidScale:TC.isValid,hasColorscale:m2.hasColorscale,extractOpts:m2.extractOpts,extractScale:m2.extractScale,flipScale:m2.flipScale,makeColorScaleFunc:m2.makeColorScaleFunc,makeColorScaleFuncFromTrace:m2.makeColorScaleFuncFromTrace}});var Ks=ie((Ltr,kne)=>{"use strict";var Ene=Zt(),Jnt=hh().isTypedArraySpec;kne.exports={hasLines:function(e){return e.visible&&e.mode&&e.mode.indexOf("lines")!==-1},hasMarkers:function(e){return e.visible&&(e.mode&&e.mode.indexOf("markers")!==-1||e.type==="splom")},hasText:function(e){return e.visible&&e.mode&&e.mode.indexOf("text")!==-1},isBubble:function(e){var t=e.marker;return Ene.isPlainObject(t)&&(Ene.isArrayOrTypedArray(t.size)||Jnt(t.size))}}});var PA=ie((Ptr,Cne)=>{"use strict";var Qnt=la();Cne.exports=function(t,r){r||(r=2);var i=t.marker,n=i.sizeref||1,a=i.sizemin||0,o=i.sizemode==="area"?function(s){return Math.sqrt(s/n)}:function(s){return s/n};return function(s){var l=o(s/r);return Qnt(l)&&l>0?Math.max(l,a):0}}});var ad=ie(ph=>{"use strict";var Lne=Zt();ph.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo};ph.isTraceInSubplots=function(e,t){if(e.type==="splom"){for(var r=e.xaxes||[],i=e.yaxes||[],n=0;n<r.length;n++)for(var a=0;a<i.length;a++)if(t.indexOf(r[n]+i[a])!==-1)return!0;return!1}return t.indexOf(ph.getSubplot(e))!==-1};ph.flat=function(e,t){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=t;return r};ph.p2c=function(e,t){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=e[i].p2c(t);return r};ph.getDistanceFunction=function(e,t,r,i){return e==="closest"?i||ph.quadrature(t,r):e.charAt(0)==="x"?t:r};ph.getClosest=function(e,t,r){if(r.index!==!1)r.index>=0&&r.index<e.length?r.distance=0:r.index=!1;else for(var i=0;i<e.length;i++){var n=t(e[i]);n<=r.distance&&(r.index=i,r.distance=n)}return r};ph.inbox=function(e,t,r){return e*t<0||e===0?r:1/0};ph.quadrature=function(e,t){return function(r){var i=e(r),n=t(r);return Math.sqrt(i*i+n*n)}};ph.makeEventData=function(e,t,r){var i="index"in e?e.index:e.pointNumber,n={data:t._input,fullData:t,curveNumber:t.index,pointNumber:i};if(t._indexToPoints){var a=t._indexToPoints[i];a.length===1?n.pointIndex=a[0]:n.pointIndices=a}else n.pointIndex=i;return t._module.eventData?n=t._module.eventData(n,e,t,r,i):("xVal"in e?n.x=e.xVal:"x"in e&&(n.x=e.x),"yVal"in e?n.y=e.yVal:"y"in e&&(n.y=e.y),e.xa&&(n.xaxis=e.xa),e.ya&&(n.yaxis=e.ya),e.zLabelVal!==void 0&&(n.z=e.zLabelVal)),ph.appendArrayPointValue(n,t,i),n};ph.appendArrayPointValue=function(e,t,r){var i=t._arrayAttrs;if(i)for(var n=0;n<i.length;n++){var a=i[n],o=Pne(a);if(e[o]===void 0){var s=Lne.nestedProperty(t,a).get(),l=Rne(s,r);l!==void 0&&(e[o]=l)}}};ph.appendArrayMultiPointValues=function(e,t,r){var i=t._arrayAttrs;if(i)for(var n=0;n<i.length;n++){var a=i[n],o=Pne(a);if(e[o]===void 0){for(var s=Lne.nestedProperty(t,a).get(),l=new Array(r.length),u=0;u<r.length;u++)l[u]=Rne(s,r[u]);e[o]=l}}};var $nt={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function Pne(e){return $nt[e]||e}function Rne(e,t){if(Array.isArray(t)){if(Array.isArray(e)&&Array.isArray(e[t[0]]))return e[t[0]][t[1]]}else return e[t]}var eit={x:!0,y:!0},tit={"x unified":!0,"y unified":!0};ph.isUnifiedHover=function(e){return typeof e!="string"?!1:!!tit[e]};ph.isXYhover=function(e){return typeof e!="string"?!1:!!eit[e]}});var RA=ie((Dtr,Dne)=>{Dne.exports=nit;var Tz={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},rit=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function nit(e){var t=[];return e.replace(rit,function(r,i,n){var a=i.toLowerCase();for(n=ait(n),a=="m"&&n.length>2&&(t.push([i].concat(n.splice(0,2))),a="l",i=i=="m"?"l":"L");;){if(n.length==Tz[a])return n.unshift(i),t.push(n);if(n.length<Tz[a])throw new Error("malformed path data");t.push([i].concat(n.splice(0,Tz[a])))}}),t}var iit=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function ait(e){var t=e.match(iit);return t?t.map(Number):[]}});var Nne=ie((Itr,Bne)=>{"use strict";var oit=RA(),ei=Mi().round,Ua="M0,0Z",Ine=Math.sqrt(2),vm=Math.sqrt(3),Az=Math.PI,Mz=Math.cos,Sz=Math.sin;Bne.exports={circle:{n:0,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e,2),n="M"+i+",0A"+i+","+i+" 0 1,1 0,-"+i+"A"+i+","+i+" 0 0,1 "+i+",0Z";return r?Ha(t,r,n):n}},square:{n:1,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e,2);return Ha(t,r,"M"+i+","+i+"H-"+i+"V-"+i+"H"+i+"Z")}},diamond:{n:2,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*1.3,2);return Ha(t,r,"M"+i+",0L0,"+i+"L-"+i+",0L0,-"+i+"Z")}},cross:{n:3,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*.4,2),n=ei(e*1.2,2);return Ha(t,r,"M"+n+","+i+"H"+i+"V"+n+"H-"+i+"V"+i+"H-"+n+"V-"+i+"H-"+i+"V-"+n+"H"+i+"V-"+i+"H"+n+"Z")}},x:{n:4,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*.8/Ine,2),n="l"+i+","+i,a="l"+i+",-"+i,o="l-"+i+",-"+i,s="l-"+i+","+i;return Ha(t,r,"M0,"+i+n+a+o+a+o+s+o+s+n+s+n+"Z")}},"triangle-up":{n:5,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*2/vm,2),n=ei(e/2,2),a=ei(e,2);return Ha(t,r,"M-"+i+","+n+"H"+i+"L0,-"+a+"Z")}},"triangle-down":{n:6,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*2/vm,2),n=ei(e/2,2),a=ei(e,2);return Ha(t,r,"M-"+i+",-"+n+"H"+i+"L0,"+a+"Z")}},"triangle-left":{n:7,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*2/vm,2),n=ei(e/2,2),a=ei(e,2);return Ha(t,r,"M"+n+",-"+i+"V"+i+"L-"+a+",0Z")}},"triangle-right":{n:8,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*2/vm,2),n=ei(e/2,2),a=ei(e,2);return Ha(t,r,"M-"+n+",-"+i+"V"+i+"L"+a+",0Z")}},"triangle-ne":{n:9,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*.6,2),n=ei(e*1.2,2);return Ha(t,r,"M-"+n+",-"+i+"H"+i+"V"+n+"Z")}},"triangle-se":{n:10,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*.6,2),n=ei(e*1.2,2);return Ha(t,r,"M"+i+",-"+n+"V"+i+"H-"+n+"Z")}},"triangle-sw":{n:11,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*.6,2),n=ei(e*1.2,2);return Ha(t,r,"M"+n+","+i+"H-"+i+"V-"+n+"Z")}},"triangle-nw":{n:12,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*.6,2),n=ei(e*1.2,2);return Ha(t,r,"M-"+i+","+n+"V-"+i+"H"+n+"Z")}},pentagon:{n:13,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*.951,2),n=ei(e*.588,2),a=ei(-e,2),o=ei(e*-.309,2),s=ei(e*.809,2);return Ha(t,r,"M"+i+","+o+"L"+n+","+s+"H-"+n+"L-"+i+","+o+"L0,"+a+"Z")}},hexagon:{n:14,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e,2),n=ei(e/2,2),a=ei(e*vm/2,2);return Ha(t,r,"M"+a+",-"+n+"V"+n+"L0,"+i+"L-"+a+","+n+"V-"+n+"L0,-"+i+"Z")}},hexagon2:{n:15,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e,2),n=ei(e/2,2),a=ei(e*vm/2,2);return Ha(t,r,"M-"+n+","+a+"H"+n+"L"+i+",0L"+n+",-"+a+"H-"+n+"L-"+i+",0Z")}},octagon:{n:16,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*.924,2),n=ei(e*.383,2);return Ha(t,r,"M-"+n+",-"+i+"H"+n+"L"+i+",-"+n+"V"+n+"L"+n+","+i+"H-"+n+"L-"+i+","+n+"V-"+n+"Z")}},star:{n:17,f:function(e,t,r){if(Va(t))return Ua;var i=e*1.4,n=ei(i*.225,2),a=ei(i*.951,2),o=ei(i*.363,2),s=ei(i*.588,2),l=ei(-i,2),u=ei(i*-.309,2),f=ei(i*.118,2),c=ei(i*.809,2),h=ei(i*.382,2);return Ha(t,r,"M"+n+","+u+"H"+a+"L"+o+","+f+"L"+s+","+c+"L0,"+h+"L-"+s+","+c+"L-"+o+","+f+"L-"+a+","+u+"H-"+n+"L0,"+l+"Z")}},hexagram:{n:18,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*.66,2),n=ei(e*.38,2),a=ei(e*.76,2);return Ha(t,r,"M-"+a+",0l-"+n+",-"+i+"h"+a+"l"+n+",-"+i+"l"+n+","+i+"h"+a+"l-"+n+","+i+"l"+n+","+i+"h-"+a+"l-"+n+","+i+"l-"+n+",-"+i+"h-"+a+"Z")}},"star-triangle-up":{n:19,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*vm*.8,2),n=ei(e*.8,2),a=ei(e*1.6,2),o=ei(e*4,2),s="A "+o+","+o+" 0 0 1 ";return Ha(t,r,"M-"+i+","+n+s+i+","+n+s+"0,-"+a+s+"-"+i+","+n+"Z")}},"star-triangle-down":{n:20,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*vm*.8,2),n=ei(e*.8,2),a=ei(e*1.6,2),o=ei(e*4,2),s="A "+o+","+o+" 0 0 1 ";return Ha(t,r,"M"+i+",-"+n+s+"-"+i+",-"+n+s+"0,"+a+s+i+",-"+n+"Z")}},"star-square":{n:21,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*1.1,2),n=ei(e*2,2),a="A "+n+","+n+" 0 0 1 ";return Ha(t,r,"M-"+i+",-"+i+a+"-"+i+","+i+a+i+","+i+a+i+",-"+i+a+"-"+i+",-"+i+"Z")}},"star-diamond":{n:22,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*1.4,2),n=ei(e*1.9,2),a="A "+n+","+n+" 0 0 1 ";return Ha(t,r,"M-"+i+",0"+a+"0,"+i+a+i+",0"+a+"0,-"+i+a+"-"+i+",0Z")}},"diamond-tall":{n:23,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*.7,2),n=ei(e*1.4,2);return Ha(t,r,"M0,"+n+"L"+i+",0L0,-"+n+"L-"+i+",0Z")}},"diamond-wide":{n:24,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*1.4,2),n=ei(e*.7,2);return Ha(t,r,"M0,"+n+"L"+i+",0L0,-"+n+"L-"+i+",0Z")}},hourglass:{n:25,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e,2);return Ha(t,r,"M"+i+","+i+"H-"+i+"L"+i+",-"+i+"H-"+i+"Z")},noDot:!0},bowtie:{n:26,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e,2);return Ha(t,r,"M"+i+","+i+"V-"+i+"L-"+i+","+i+"V-"+i+"Z")},noDot:!0},"circle-cross":{n:27,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e,2);return Ha(t,r,"M0,"+i+"V-"+i+"M"+i+",0H-"+i+"M"+i+",0A"+i+","+i+" 0 1,1 0,-"+i+"A"+i+","+i+" 0 0,1 "+i+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e,2),n=ei(e/Ine,2);return Ha(t,r,"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+i+",0A"+i+","+i+" 0 1,1 0,-"+i+"A"+i+","+i+" 0 0,1 "+i+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e,2);return Ha(t,r,"M0,"+i+"V-"+i+"M"+i+",0H-"+i+"M"+i+","+i+"H-"+i+"V-"+i+"H"+i+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e,2);return Ha(t,r,"M"+i+","+i+"L-"+i+",-"+i+"M"+i+",-"+i+"L-"+i+","+i+"M"+i+","+i+"H-"+i+"V-"+i+"H"+i+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*1.3,2);return Ha(t,r,"M"+i+",0L0,"+i+"L-"+i+",0L0,-"+i+"ZM0,-"+i+"V"+i+"M-"+i+",0H"+i)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*1.3,2),n=ei(e*.65,2);return Ha(t,r,"M"+i+",0L0,"+i+"L-"+i+",0L0,-"+i+"ZM-"+n+",-"+n+"L"+n+","+n+"M-"+n+","+n+"L"+n+",-"+n)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*1.4,2);return Ha(t,r,"M0,"+i+"V-"+i+"M"+i+",0H-"+i)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e,2);return Ha(t,r,"M"+i+","+i+"L-"+i+",-"+i+"M"+i+",-"+i+"L-"+i+","+i)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*1.2,2),n=ei(e*.85,2);return Ha(t,r,"M0,"+i+"V-"+i+"M"+i+",0H-"+i+"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e/2,2),n=ei(e,2);return Ha(t,r,"M"+i+","+n+"V-"+n+"M"+(i-n)+",-"+n+"V"+n+"M"+n+","+i+"H-"+n+"M-"+n+","+(i-n)+"H"+n)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*1.2,2),n=ei(e*1.6,2),a=ei(e*.8,2);return Ha(t,r,"M-"+i+","+a+"L0,0M"+i+","+a+"L0,0M0,-"+n+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*1.2,2),n=ei(e*1.6,2),a=ei(e*.8,2);return Ha(t,r,"M-"+i+",-"+a+"L0,0M"+i+",-"+a+"L0,0M0,"+n+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*1.2,2),n=ei(e*1.6,2),a=ei(e*.8,2);return Ha(t,r,"M"+a+","+i+"L0,0M"+a+",-"+i+"L0,0M-"+n+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*1.2,2),n=ei(e*1.6,2),a=ei(e*.8,2);return Ha(t,r,"M-"+a+","+i+"L0,0M-"+a+",-"+i+"L0,0M"+n+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*1.4,2);return Ha(t,r,"M"+i+",0H-"+i)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*1.4,2);return Ha(t,r,"M0,"+i+"V-"+i)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e,2);return Ha(t,r,"M"+i+",-"+i+"L-"+i+","+i)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e,2);return Ha(t,r,"M"+i+","+i+"L-"+i+",-"+i)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e,2),n=ei(e*2,2);return Ha(t,r,"M0,0L-"+i+","+n+"H"+i+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e,2),n=ei(e*2,2);return Ha(t,r,"M0,0L-"+i+",-"+n+"H"+i+"Z")},noDot:!0},"arrow-left":{n:47,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*2,2),n=ei(e,2);return Ha(t,r,"M0,0L"+i+",-"+n+"V"+n+"Z")},noDot:!0},"arrow-right":{n:48,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*2,2),n=ei(e,2);return Ha(t,r,"M0,0L-"+i+",-"+n+"V"+n+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e,2),n=ei(e*2,2);return Ha(t,r,"M-"+i+",0H"+i+"M0,0L-"+i+","+n+"H"+i+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e,2),n=ei(e*2,2);return Ha(t,r,"M-"+i+",0H"+i+"M0,0L-"+i+",-"+n+"H"+i+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*2,2),n=ei(e,2);return Ha(t,r,"M0,-"+n+"V"+n+"M0,0L"+i+",-"+n+"V"+n+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(e,t,r){if(Va(t))return Ua;var i=ei(e*2,2),n=ei(e,2);return Ha(t,r,"M0,-"+n+"V"+n+"M0,0L-"+i+",-"+n+"V"+n+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(e,t,r){if(Va(t))return Ua;var i=Az/2.5,n=2*e*Mz(i),a=2*e*Sz(i);return Ha(t,r,"M0,0L"+-n+","+a+"L"+n+","+a+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(e,t,r){if(Va(t))return Ua;var i=Az/4,n=2*e*Mz(i),a=2*e*Sz(i);return Ha(t,r,"M0,0L"+-n+","+a+"A "+2*e+","+2*e+" 0 0 1 "+n+","+a+"Z")},backoff:.4,noDot:!0}};function Va(e){return e===null}var Fne,qne,zne,One;function Ha(e,t,r){if((!e||e%360===0)&&!t)return r;if(zne===e&&One===t&&Fne===r)return qne;zne=e,One=t,Fne=r;function i(b,p){var w=Mz(b),A=Sz(b),T=p[0],k=p[1]+(t||0);return[T*w-k*A,T*A+k*w]}for(var n=e/180*Az,a=0,o=0,s=oit(r),l="",u=0;u<s.length;u++){var f=s[u],c=f[0],h=a,v=o;if(c==="M"||c==="L")a=+f[1],o=+f[2];else if(c==="m"||c==="l")a+=+f[1],o+=+f[2];else if(c==="H")a=+f[1];else if(c==="h")a+=+f[1];else if(c==="V")o=+f[1];else if(c==="v")o+=+f[1];else if(c==="A"){a=+f[1],o=+f[2];var d=i(n,[+f[6],+f[7]]);f[6]=d[0],f[7]=d[1],f[3]=+f[3]+e}(c==="H"||c==="V")&&(c="L"),(c==="h"||c==="v")&&(c="l"),(c==="m"||c==="l")&&(a-=h,o-=v);var x=i(n,[a,o]);(c==="H"||c==="V")&&(c="L"),(c==="M"||c==="L"||c==="m"||c==="l")&&(f[1]=x[0],f[2]=x[1]),f[0]=c,l+=f[0]+f.slice(1).join(",")}return qne=l,l}});var oa=ie((Ftr,oie)=>{"use strict";var ec=Mi(),Ps=Zt(),sit=Ps.numberFormat,bx=la(),Rz=Kf(),MC=Ti(),Bc=_i(),lit=ul(),IA=Ps.strTranslate,SC=ks(),uit=Cd(),fit=Mf(),cit=fit.LINE_SPACING,Kne=jy().DESELECTDIM,hit=Ks(),vit=PA(),dit=ad().appendArrayPointValue,ui=oie.exports={};ui.font=function(e,t){var r=t.variant,i=t.style,n=t.weight,a=t.color,o=t.size,s=t.family,l=t.shadow,u=t.lineposition,f=t.textcase;s&&e.style("font-family",s),o+1&&e.style("font-size",o+"px"),a&&e.call(Bc.fill,a),n&&e.style("font-weight",n),i&&e.style("font-style",i),r&&e.style("font-variant",r),f&&e.style("text-transform",Ez(git(f))),l&&e.style("text-shadow",l==="auto"?SC.makeTextShadow(Bc.contrast(a)):Ez(l)),u&&e.style("text-decoration-line",Ez(yit(u)))};function Ez(e){return e==="none"?void 0:e}var pit={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function git(e){return pit[e]}function yit(e){return e.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")}ui.setPosition=function(e,t,r){e.attr("x",t).attr("y",r)};ui.setSize=function(e,t,r){e.attr("width",t).attr("height",r)};ui.setRect=function(e,t,r,i,n){e.call(ui.setPosition,t,r).call(ui.setSize,i,n)};ui.translatePoint=function(e,t,r,i){var n=r.c2p(e.x),a=i.c2p(e.y);if(bx(n)&&bx(a)&&t.node())t.node().nodeName==="text"?t.attr("x",n).attr("y",a):t.attr("transform",IA(n,a));else return!1;return!0};ui.translatePoints=function(e,t,r){e.each(function(i){var n=ec.select(this);ui.translatePoint(i,n,t,r)})};ui.hideOutsideRangePoint=function(e,t,r,i,n,a){t.attr("display",r.isPtWithinRange(e,n)&&i.isPtWithinRange(e,a)?null:"none")};ui.hideOutsideRangePoints=function(e,t){if(t._hasClipOnAxisFalse){var r=t.xaxis,i=t.yaxis;e.each(function(n){var a=n[0].trace,o=a.xcalendar,s=a.ycalendar,l=MC.traceIs(a,"bar-like")?".bartext":".point,.textpoint";e.selectAll(l).each(function(u){ui.hideOutsideRangePoint(u,ec.select(this),r,i,o,s)})})}};ui.crispRound=function(e,t,r){return!t||!bx(t)?r||0:e._context.staticPlot?t:t<1?1:Math.round(t)};ui.singleLineStyle=function(e,t,r,i,n){t.style("fill","none");var a=(((e||[])[0]||{}).trace||{}).line||{},o=r||a.width||0,s=n||a.dash||"";Bc.stroke(t,i||a.color),ui.dashLine(t,s,o)};ui.lineGroupStyle=function(e,t,r,i){e.style("fill","none").each(function(n){var a=(((n||[])[0]||{}).trace||{}).line||{},o=t||a.width||0,s=i||a.dash||"";ec.select(this).call(Bc.stroke,r||a.color).call(ui.dashLine,s,o)})};ui.dashLine=function(e,t,r){r=+r||0,t=ui.dashStyle(t,r),e.style({"stroke-dasharray":t,"stroke-width":r+"px"})};ui.dashStyle=function(e,t){t=+t||1;var r=Math.max(t,3);return e==="solid"?e="":e==="dot"?e=r+"px,"+r+"px":e==="dash"?e=3*r+"px,"+3*r+"px":e==="longdash"?e=5*r+"px,"+5*r+"px":e==="dashdot"?e=3*r+"px,"+r+"px,"+r+"px,"+r+"px":e==="longdashdot"&&(e=5*r+"px,"+2*r+"px,"+r+"px,"+2*r+"px"),e};function Jne(e,t,r,i){var n=t.fillpattern,a=t.fillgradient,o=n&&ui.getPatternAttr(n.shape,0,"");if(o){var s=ui.getPatternAttr(n.bgcolor,0,null),l=ui.getPatternAttr(n.fgcolor,0,null),u=n.fgopacity,f=ui.getPatternAttr(n.size,0,8),c=ui.getPatternAttr(n.solidity,0,.3),h=t.uid;ui.pattern(e,"point",r,h,o,f,c,void 0,n.fillmode,s,l,u)}else if(a&&a.type!=="none"){var v=a.type,d="scatterfill-"+t.uid;if(i&&(d="legendfill-"+t.uid),!i&&(a.start!==void 0||a.stop!==void 0)){var x,b;v==="horizontal"?(x={x:a.start,y:0},b={x:a.stop,y:0}):v==="vertical"&&(x={x:0,y:a.start},b={x:0,y:a.stop}),x.x=t._xA.c2p(x.x===void 0?t._extremes.x.min[0].val:x.x,!0),x.y=t._yA.c2p(x.y===void 0?t._extremes.y.min[0].val:x.y,!0),b.x=t._xA.c2p(b.x===void 0?t._extremes.x.max[0].val:b.x,!0),b.y=t._yA.c2p(b.y===void 0?t._extremes.y.max[0].val:b.y,!0),e.call(eie,r,d,"linear",a.colorscale,"fill",x,b,!0,!1)}else v==="horizontal"&&(v=v+"reversed"),e.call(ui.gradient,r,d,v,a.colorscale,"fill")}else t.fillcolor&&e.call(Bc.fill,t.fillcolor)}ui.singleFillStyle=function(e,t){var r=ec.select(e.node()),i=r.data(),n=((i[0]||[])[0]||{}).trace||{};Jne(e,n,t,!1)};ui.fillGroupStyle=function(e,t,r){e.style("stroke-width",0).each(function(i){var n=ec.select(this);i[0].trace&&Jne(n,i[0].trace,t,r)})};var Une=Nne();ui.symbolNames=[];ui.symbolFuncs=[];ui.symbolBackOffs=[];ui.symbolNeedLines={};ui.symbolNoDot={};ui.symbolNoFill={};ui.symbolList=[];Object.keys(Une).forEach(function(e){var t=Une[e],r=t.n;ui.symbolList.push(r,String(r),e,r+100,String(r+100),e+"-open"),ui.symbolNames[r]=e,ui.symbolFuncs[r]=t.f,ui.symbolBackOffs[r]=t.backoff||0,t.needLine&&(ui.symbolNeedLines[r]=!0),t.noDot?ui.symbolNoDot[r]=!0:ui.symbolList.push(r+200,String(r+200),e+"-dot",r+300,String(r+300),e+"-open-dot"),t.noFill&&(ui.symbolNoFill[r]=!0)});var mit=ui.symbolNames.length,xit="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";ui.symbolNumber=function(e){if(bx(e))e=+e;else if(typeof e=="string"){var t=0;e.indexOf("-open")>0&&(t=100,e=e.replace("-open","")),e.indexOf("-dot")>0&&(t+=200,e=e.replace("-dot","")),e=ui.symbolNames.indexOf(e),e>=0&&(e+=t)}return e%100>=mit||e>=400?0:Math.floor(Math.max(e,0))};function Qne(e,t,r,i){var n=e%100;return ui.symbolFuncs[n](t,r,i)+(e>=200?xit:"")}var Vne=sit("~f"),$ne={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};ui.gradient=function(e,t,r,i,n,a){var o=$ne[i];return eie(e,t,r,o.type,n,a,o.start,o.stop,!1,o.reversed)};function eie(e,t,r,i,n,a,o,s,l,u){var f=n.length,c;i==="linear"?c={node:"linearGradient",attrs:{x1:o.x,y1:o.y,x2:s.x,y2:s.y,gradientUnits:l?"userSpaceOnUse":"objectBoundingBox"},reversed:u}:i==="radial"&&(c={node:"radialGradient",reversed:u});for(var h=new Array(f),v=0;v<f;v++)c.reversed?h[f-1-v]=[Vne((1-n[v][0])*100),n[v][1]]:h[v]=[Vne(n[v][0]*100),n[v][1]];var d=t._fullLayout,x="g"+d._uid+"-"+r,b=d._defs.select(".gradients").selectAll("#"+x).data([i+h.join(";")],Ps.identity);b.exit().remove(),b.enter().append(c.node).each(function(){var p=ec.select(this);c.attrs&&p.attr(c.attrs),p.attr("id",x);var w=p.selectAll("stop").data(h);w.exit().remove(),w.enter().append("stop"),w.each(function(A){var T=Rz(A[1]);ec.select(this).attr({offset:A[0]+"%","stop-color":Bc.tinyRGB(T),"stop-opacity":T.getAlpha()})})}),e.style(a,Dz(x,t)).style(a+"-opacity",null),e.classed("gradient_filled",!0)}ui.pattern=function(e,t,r,i,n,a,o,s,l,u,f,c){var h=t==="legend";s&&(l==="overlay"?(u=s,f=Bc.contrast(u)):(u=void 0,f=s));var v=r._fullLayout,d="p"+v._uid+"-"+i,x,b,p=function(D,q,O,U,B){return U+(B-U)*(D-q)/(O-q)},w,A,T,k,_={},E=Rz(f),S=Bc.tinyRGB(E),g=E.getAlpha(),C=c*g;switch(n){case"/":x=a*Math.sqrt(2),b=a*Math.sqrt(2),w="M-"+x/4+","+b/4+"l"+x/2+",-"+b/2+"M0,"+b+"L"+x+",0M"+x/4*3+","+b/4*5+"l"+x/2+",-"+b/2,A=o*a,k="path",_={d:w,opacity:C,stroke:S,"stroke-width":A+"px"};break;case"\\":x=a*Math.sqrt(2),b=a*Math.sqrt(2),w="M"+x/4*3+",-"+b/4+"l"+x/2+","+b/2+"M0,0L"+x+","+b+"M-"+x/4+","+b/4*3+"l"+x/2+","+b/2,A=o*a,k="path",_={d:w,opacity:C,stroke:S,"stroke-width":A+"px"};break;case"x":x=a*Math.sqrt(2),b=a*Math.sqrt(2),w="M-"+x/4+","+b/4+"l"+x/2+",-"+b/2+"M0,"+b+"L"+x+",0M"+x/4*3+","+b/4*5+"l"+x/2+",-"+b/2+"M"+x/4*3+",-"+b/4+"l"+x/2+","+b/2+"M0,0L"+x+","+b+"M-"+x/4+","+b/4*3+"l"+x/2+","+b/2,A=a-a*Math.sqrt(1-o),k="path",_={d:w,opacity:C,stroke:S,"stroke-width":A+"px"};break;case"|":x=a,b=a,k="path",w="M"+x/2+",0L"+x/2+","+b,A=o*a,k="path",_={d:w,opacity:C,stroke:S,"stroke-width":A+"px"};break;case"-":x=a,b=a,k="path",w="M0,"+b/2+"L"+x+","+b/2,A=o*a,k="path",_={d:w,opacity:C,stroke:S,"stroke-width":A+"px"};break;case"+":x=a,b=a,k="path",w="M"+x/2+",0L"+x/2+","+b+"M0,"+b/2+"L"+x+","+b/2,A=a-a*Math.sqrt(1-o),k="path",_={d:w,opacity:C,stroke:S,"stroke-width":A+"px"};break;case".":x=a,b=a,o<Math.PI/4?T=Math.sqrt(o*a*a/Math.PI):T=p(o,Math.PI/4,1,a/2,a/Math.sqrt(2)),k="circle",_={cx:x/2,cy:b/2,r:T,opacity:C,fill:S};break}var M=[n||"noSh",u||"noBg",f||"noFg",a,o].join(";"),P=v._defs.select(".patterns").selectAll("#"+d).data([M],Ps.identity);P.exit().remove(),P.enter().append("pattern").each(function(){var D=ec.select(this);if(D.attr({id:d,width:x+"px",height:b+"px",patternUnits:"userSpaceOnUse",patternTransform:h?"scale(0.8)":""}),u){var q=Rz(u),O=Bc.tinyRGB(q),U=q.getAlpha(),B=D.selectAll("rect").data([0]);B.exit().remove(),B.enter().append("rect").attr({width:x+"px",height:b+"px",fill:O,"fill-opacity":U})}var F=D.selectAll(k).data([0]);F.exit().remove(),F.enter().append(k).attr(_)}),e.style("fill",Dz(d,r)).style("fill-opacity",null),e.classed("pattern_filled",!0)};ui.initGradients=function(e){var t=e._fullLayout,r=Ps.ensureSingle(t._defs,"g","gradients");r.selectAll("linearGradient,radialGradient").remove(),ec.select(e).selectAll(".gradient_filled").classed("gradient_filled",!1)};ui.initPatterns=function(e){var t=e._fullLayout,r=Ps.ensureSingle(t._defs,"g","patterns");r.selectAll("pattern").remove(),ec.select(e).selectAll(".pattern_filled").classed("pattern_filled",!1)};ui.getPatternAttr=function(e,t,r){return e&&Ps.isArrayOrTypedArray(e)?t<e.length?e[t]:r:e};ui.pointStyle=function(e,t,r,i){if(e.size()){var n=ui.makePointStyleFns(t);e.each(function(a){ui.singlePointStyle(a,ec.select(this),t,n,r,i)})}};ui.singlePointStyle=function(e,t,r,i,n,a){var o=r.marker,s=o.line;if(a&&a.i>=0&&e.i===void 0&&(e.i=a.i),t.style("opacity",i.selectedOpacityFn?i.selectedOpacityFn(e):e.mo===void 0?o.opacity:e.mo),i.ms2mrc){var l;e.ms==="various"||o.size==="various"?l=3:l=i.ms2mrc(e.ms),e.mrc=l,i.selectedSizeFn&&(l=e.mrc=i.selectedSizeFn(e));var u=ui.symbolNumber(e.mx||o.symbol)||0;e.om=u%200>=100;var f=Fz(e,r),c=Iz(e,r);t.attr("d",Qne(u,l,f,c))}var h=!1,v,d,x;if(e.so)x=s.outlierwidth,d=s.outliercolor,v=o.outliercolor;else{var b=(s||{}).width;x=(e.mlw+1||b+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in e?d=e.mlcc=i.lineScale(e.mlc):Ps.isArrayOrTypedArray(s.color)?d=Bc.defaultLine:d=s.color,Ps.isArrayOrTypedArray(o.color)&&(v=Bc.defaultLine,h=!0),"mc"in e?v=e.mcc=i.markerScale(e.mc):v=o.color||o.colors||"rgba(0,0,0,0)",i.selectedColorFn&&(v=i.selectedColorFn(e))}if(e.om)t.call(Bc.stroke,v).style({"stroke-width":(x||1)+"px",fill:"none"});else{t.style("stroke-width",(e.isBlank?0:x)+"px");var p=o.gradient,w=e.mgt;w?h=!0:w=p&&p.type,Ps.isArrayOrTypedArray(w)&&(w=w[0],$ne[w]||(w=0));var A=o.pattern,T=A&&ui.getPatternAttr(A.shape,e.i,"");if(w&&w!=="none"){var k=e.mgc;k?h=!0:k=p.color;var _=r.uid;h&&(_+="-"+e.i),ui.gradient(t,n,_,w,[[0,k],[1,v]],"fill")}else if(T){var E=!1,S=A.fgcolor;!S&&a&&a.color&&(S=a.color,E=!0);var g=ui.getPatternAttr(S,e.i,a&&a.color||null),C=ui.getPatternAttr(A.bgcolor,e.i,null),M=A.fgopacity,P=ui.getPatternAttr(A.size,e.i,8),D=ui.getPatternAttr(A.solidity,e.i,.3);E=E||e.mcc||Ps.isArrayOrTypedArray(A.shape)||Ps.isArrayOrTypedArray(A.bgcolor)||Ps.isArrayOrTypedArray(A.fgcolor)||Ps.isArrayOrTypedArray(A.size)||Ps.isArrayOrTypedArray(A.solidity);var q=r.uid;E&&(q+="-"+e.i),ui.pattern(t,"point",n,q,T,P,D,e.mcc,A.fillmode,C,g,M)}else Ps.isArrayOrTypedArray(v)?Bc.fill(t,v[e.i]):Bc.fill(t,v);x&&Bc.stroke(t,d)}};ui.makePointStyleFns=function(e){var t={},r=e.marker;return t.markerScale=ui.tryColorscale(r,""),t.lineScale=ui.tryColorscale(r,"line"),MC.traceIs(e,"symbols")&&(t.ms2mrc=hit.isBubble(e)?vit(e):function(){return(r.size||6)/2}),e.selectedpoints&&Ps.extendFlat(t,ui.makeSelectedPointStyleFns(e)),t};ui.makeSelectedPointStyleFns=function(e){var t={},r=e.selected||{},i=e.unselected||{},n=e.marker||{},a=r.marker||{},o=i.marker||{},s=n.opacity,l=a.opacity,u=o.opacity,f=l!==void 0,c=u!==void 0;(Ps.isArrayOrTypedArray(s)||f||c)&&(t.selectedOpacityFn=function(T){var k=T.mo===void 0?n.opacity:T.mo;return T.selected?f?l:k:c?u:Kne*k});var h=n.color,v=a.color,d=o.color;(v||d)&&(t.selectedColorFn=function(T){var k=T.mcc||h;return T.selected?v||k:d||k});var x=n.size,b=a.size,p=o.size,w=b!==void 0,A=p!==void 0;return MC.traceIs(e,"symbols")&&(w||A)&&(t.selectedSizeFn=function(T){var k=T.mrc||x/2;return T.selected?w?b/2:k:A?p/2:k}),t};ui.makeSelectedTextStyleFns=function(e){var t={},r=e.selected||{},i=e.unselected||{},n=e.textfont||{},a=r.textfont||{},o=i.textfont||{},s=n.color,l=a.color,u=o.color;return t.selectedTextColorFn=function(f){var c=f.tc||s;return f.selected?l||c:u||(l?c:Bc.addOpacity(c,Kne))},t};ui.selectedPointStyle=function(e,t){if(!(!e.size()||!t.selectedpoints)){var r=ui.makeSelectedPointStyleFns(t),i=t.marker||{},n=[];r.selectedOpacityFn&&n.push(function(a,o){a.style("opacity",r.selectedOpacityFn(o))}),r.selectedColorFn&&n.push(function(a,o){Bc.fill(a,r.selectedColorFn(o))}),r.selectedSizeFn&&n.push(function(a,o){var s=o.mx||i.symbol||0,l=r.selectedSizeFn(o);a.attr("d",Qne(ui.symbolNumber(s),l,Fz(o,t),Iz(o,t))),o.mrc2=l}),n.length&&e.each(function(a){for(var o=ec.select(this),s=0;s<n.length;s++)n[s](o,a)})}};ui.tryColorscale=function(e,t){var r=t?Ps.nestedProperty(e,t).get():e;if(r){var i=r.color;if((r.colorscale||r._colorAx)&&Ps.isArrayOrTypedArray(i))return lit.makeColorScaleFuncFromTrace(r)}return Ps.identity};var kz={start:1,end:-1,middle:0,bottom:1,top:-1};function tie(e,t,r,i,n){var a=ec.select(e.node().parentNode),o=t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle",s=t.indexOf("left")!==-1?"end":t.indexOf("right")!==-1?"start":"middle",l=i?i/.8+1:0,u=(SC.lineCount(e)-1)*cit+1,f=kz[s]*l,c=r*.75+kz[o]*l+(kz[o]-1)*u*r/2;e.attr("text-anchor",s),n||a.attr("transform",IA(f,c))}function rie(e,t){var r=e.ts||t.textfont.size;return bx(r)&&r>0?r:0}ui.textPointStyle=function(e,t,r){if(e.size()){var i;if(t.selectedpoints){var n=ui.makeSelectedTextStyleFns(t);i=n.selectedTextColorFn}var a=t.texttemplate,o=r._fullLayout;e.each(function(s){var l=ec.select(this),u=a?Ps.extractOption(s,t,"txt","texttemplate"):Ps.extractOption(s,t,"tx","text");if(!u&&u!==0){l.remove();return}if(a){var f=t._module.formatLabels,c=f?f(s,t,o):{},h={};dit(h,t,s.i);var v=t._meta||{};u=Ps.texttemplateString(u,c,o._d3locale,h,s,v)}var d=s.tp||t.textposition,x=rie(s,t),b=i?i(s):s.tc||t.textfont.color;l.call(ui.font,{family:s.tf||t.textfont.family,weight:s.tw||t.textfont.weight,style:s.ty||t.textfont.style,variant:s.tv||t.textfont.variant,textcase:s.tC||t.textfont.textcase,lineposition:s.tE||t.textfont.lineposition,shadow:s.tS||t.textfont.shadow,size:x,color:b}).text(u).call(SC.convertToTspans,r).call(tie,d,x,s.mrc)})}};ui.selectedTextStyle=function(e,t){if(!(!e.size()||!t.selectedpoints)){var r=ui.makeSelectedTextStyleFns(t);e.each(function(i){var n=ec.select(this),a=r.selectedTextColorFn(i),o=i.tp||t.textposition,s=rie(i,t);Bc.fill(n,a);var l=MC.traceIs(t,"bar-like");tie(n,o,s,i.mrc2||i.mrc,l)})}};var Hne=.5;ui.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");var r="M"+e[0],i=[],n;for(n=1;n<e.length-1;n++)i.push(AC(e[n-1],e[n],e[n+1],t));for(r+="Q"+i[0][0]+" "+e[1],n=2;n<e.length-1;n++)r+="C"+i[n-2][1]+" "+i[n-1][0]+" "+e[n];return r+="Q"+i[e.length-3][1]+" "+e[e.length-1],r};ui.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";var r="M"+e[0],i=e.length-1,n=[AC(e[i],e[0],e[1],t)],a;for(a=1;a<i;a++)n.push(AC(e[a-1],e[a],e[a+1],t));for(n.push(AC(e[i-1],e[i],e[0],t)),a=1;a<=i;a++)r+="C"+n[a-1][1]+" "+n[a][0]+" "+e[a];return r+="C"+n[i][1]+" "+n[0][0]+" "+e[0]+"Z",r};var nie,iie;function x2(e,t,r){return r&&(e=aie(e)),t?_x(e[1]):xx(e[0])}function xx(e){var t=ec.round(e,2);return nie=t,t}function _x(e){var t=ec.round(e,2);return iie=t,t}function AC(e,t,r,i){var n=e[0]-t[0],a=e[1]-t[1],o=r[0]-t[0],s=r[1]-t[1],l=Math.pow(n*n+a*a,Hne/2),u=Math.pow(o*o+s*s,Hne/2),f=(u*u*n-l*l*o)*i,c=(u*u*a-l*l*s)*i,h=3*u*(l+u),v=3*l*(l+u);return[[xx(t[0]+(h&&f/h)),_x(t[1]+(h&&c/h))],[xx(t[0]-(v&&f/v)),_x(t[1]-(v&&c/v))]]}var _it={hv:function(e,t,r){return"H"+xx(t[0])+"V"+x2(t,1,r)},vh:function(e,t,r){return"V"+_x(t[1])+"H"+x2(t,0,r)},hvh:function(e,t,r){return"H"+xx((e[0]+t[0])/2)+"V"+_x(t[1])+"H"+x2(t,0,r)},vhv:function(e,t,r){return"V"+_x((e[1]+t[1])/2)+"H"+xx(t[0])+"V"+x2(t,1,r)}},bit=function(e,t,r){return"L"+x2(t,0,r)+","+x2(t,1,r)};ui.steps=function(e){var t=_it[e]||bit;return function(r){for(var i="M"+xx(r[0][0])+","+_x(r[0][1]),n=r.length,a=1;a<n;a++)i+=t(r[a-1],r[a],a===n-1);return i}};function aie(e,t){var r=e.backoff,i=e.trace,n=e.d,a=e.i;if(r&&i&&i.marker&&i.marker.angle%360===0&&i.line&&i.line.shape!=="spline"){var o=Ps.isArrayOrTypedArray(r),s=e,l=t?t[0]:nie||0,u=t?t[1]:iie||0,f=s[0],c=s[1],h=f-l,v=c-u,d=Math.atan2(v,h),x=o?r[a]:r;if(x==="auto"){var b=s.i;i.type==="scatter"&&b--;var p=s.marker,w=p.symbol;Ps.isArrayOrTypedArray(w)&&(w=w[b]);var A=p.size;Ps.isArrayOrTypedArray(A)&&(A=A[b]),x=p?ui.symbolBackOffs[ui.symbolNumber(w)]*A:0,x+=ui.getMarkerStandoff(n[b],i)||0}var T=f-x*Math.cos(d),k=c-x*Math.sin(d);(T<=f&&T>=l||T>=f&&T<=l)&&(k<=c&&k>=u||k>=c&&k<=u)&&(e=[T,k])}return e}ui.applyBackoff=aie;ui.makeTester=function(){var e=Ps.ensureSingleById(ec.select("body"),"svg","js-plotly-tester",function(r){r.attr(uit.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),t=Ps.ensureSingle(e,"path","js-reference-point",function(r){r.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});ui.tester=e,ui.testref=t};ui.savedBBoxes={};var Cz=0,wit=1e4;ui.bBox=function(e,t,r){r||(r=Gne(e));var i;if(r){if(i=ui.savedBBoxes[r],i)return Ps.extendFlat({},i)}else if(e.childNodes.length===1){var n=e.childNodes[0];if(r=Gne(n),r){var a=+n.getAttribute("x")||0,o=+n.getAttribute("y")||0,s=n.getAttribute("transform");if(!s){var l=ui.bBox(n,!1,r);return a&&(l.left+=a,l.right+=a),o&&(l.top+=o,l.bottom+=o),l}if(r+="~"+a+"~"+o+"~"+s,i=ui.savedBBoxes[r],i)return Ps.extendFlat({},i)}}var u,f;t?u=e:(f=ui.tester.node(),u=e.cloneNode(!0),f.appendChild(u)),ec.select(u).attr("transform",null).call(SC.positionText,0,0);var c=u.getBoundingClientRect(),h=ui.testref.node().getBoundingClientRect();t||f.removeChild(u);var v={height:c.height,width:c.width,left:c.left-h.left,top:c.top-h.top,right:c.right-h.left,bottom:c.bottom-h.top};return Cz>=wit&&(ui.savedBBoxes={},Cz=0),r&&(ui.savedBBoxes[r]=v),Cz++,Ps.extendFlat({},v)};function Gne(e){var t=e.getAttribute("data-unformatted");if(t!==null)return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}ui.setClipUrl=function(e,t,r){e.attr("clip-path",Dz(t,r))};function Dz(e,t){if(!e)return null;var r=t._context,i=r._exportedPlot?"":r._baseUrl||"";return i?"url('"+i+"#"+e+"')":"url(#"+e+")"}ui.getTranslate=function(e){var t=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,r=e.attr?"attr":"getAttribute",i=e[r]("transform")||"",n=i.replace(t,function(a,o,s){return[o,s].join(" ")}).split(" ");return{x:+n[0]||0,y:+n[1]||0}};ui.setTranslate=function(e,t,r){var i=/(\btranslate\(.*?\);?)/,n=e.attr?"attr":"getAttribute",a=e.attr?"attr":"setAttribute",o=e[n]("transform")||"";return t=t||0,r=r||0,o=o.replace(i,"").trim(),o+=IA(t,r),o=o.trim(),e[a]("transform",o),o};ui.getScale=function(e){var t=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,r=e.attr?"attr":"getAttribute",i=e[r]("transform")||"",n=i.replace(t,function(a,o,s){return[o,s].join(" ")}).split(" ");return{x:+n[0]||1,y:+n[1]||1}};ui.setScale=function(e,t,r){var i=/(\bscale\(.*?\);?)/,n=e.attr?"attr":"getAttribute",a=e.attr?"attr":"setAttribute",o=e[n]("transform")||"";return t=t||1,r=r||1,o=o.replace(i,"").trim(),o+="scale("+t+","+r+")",o=o.trim(),e[a]("transform",o),o};var Tit=/\s*sc.*/;ui.setPointGroupScale=function(e,t,r){if(t=t||1,r=r||1,!!e){var i=t===1&&r===1?"":"scale("+t+","+r+")";e.each(function(){var n=(this.getAttribute("transform")||"").replace(Tit,"");n+=i,n=n.trim(),this.setAttribute("transform",n)})}};var Ait=/translate\([^)]*\)\s*$/;ui.setTextPointsScale=function(e,t,r){e&&e.each(function(){var i,n=ec.select(this),a=n.select("text");if(a.node()){var o=parseFloat(a.attr("x")||0),s=parseFloat(a.attr("y")||0),l=(n.attr("transform")||"").match(Ait);t===1&&r===1?i=[]:i=[IA(o,s),"scale("+t+","+r+")",IA(-o,-s)],l&&i.push(l),n.attr("transform",i.join(""))}})};function Iz(e,t){var r;return e&&(r=e.mf),r===void 0&&(r=t.marker&&t.marker.standoff||0),!t._geo&&!t._xA?-r:r}ui.getMarkerStandoff=Iz;var DA=Math.atan2,mx=Math.cos,_2=Math.sin;function Yne(e,t){var r=t[0],i=t[1];return[r*mx(e)-i*_2(e),r*_2(e)+i*mx(e)]}var Wne,Xne,Zne,jne,Lz,Pz;function Fz(e,t){var r=e.ma;r===void 0&&(r=t.marker.angle,(!r||Ps.isArrayOrTypedArray(r))&&(r=0));var i,n,a=t.marker.angleref;if(a==="previous"||a==="north"){if(t._geo){var o=t._geo.project(e.lonlat);i=o[0],n=o[1]}else{var s=t._xA,l=t._yA;if(s&&l)i=s.c2p(e.x),n=l.c2p(e.y);else return 90}if(t._geo){var u=e.lonlat[0],f=e.lonlat[1],c=t._geo.project([u,f+1e-5]),h=t._geo.project([u+1e-5,f]),v=DA(h[1]-n,h[0]-i),d=DA(c[1]-n,c[0]-i),x;if(a==="north")x=r/180*Math.PI;else if(a==="previous"){var b=u/180*Math.PI,p=f/180*Math.PI,w=Wne/180*Math.PI,A=Xne/180*Math.PI,T=w-b,k=mx(A)*_2(T),_=_2(A)*mx(p)-mx(A)*_2(p)*mx(T);x=-DA(k,_)-Math.PI,Wne=u,Xne=f}var E=Yne(v,[mx(x),0]),S=Yne(d,[_2(x),0]);r=DA(E[1]+S[1],E[0]+S[0])/Math.PI*180,a==="previous"&&!(Pz===t.uid&&e.i===Lz+1)&&(r=null)}if(a==="previous"&&!t._geo)if(Pz===t.uid&&e.i===Lz+1&&bx(i)&&bx(n)){var g=i-Zne,C=n-jne,M=t.line&&t.line.shape||"",P=M.slice(M.length-1);P==="h"&&(C=0),P==="v"&&(g=0),r+=DA(C,g)/Math.PI*180+90}else r=null}return Zne=i,jne=n,Lz=e.i,Pz=t.uid,r}ui.getMarkerAngle=Fz});var wx=ie((qtr,hie)=>{"use strict";var EC=Mi(),Mit=la(),Sit=js(),sie=Ti(),b2=Zt(),lie=b2.strTranslate,qz=oa(),uie=_i(),zz=ks(),fie=jy(),Eit=Mf().OPPOSITE_SIDE,cie=/ [XY][0-9]* /;function kit(e,t,r){var i=r.propContainer,n=r.propName,a=r.placeholder,o=r.traceIndex,s=r.avoid||{},l=r.attributes,u=r.transform,f=r.containerGroup,c=e._fullLayout,h=1,v=!1,d=i.title,x=(d&&d.text?d.text:"").trim(),b=d&&d.font?d.font:{},p=b.family,w=b.size,A=b.color,T=b.weight,k=b.style,_=b.variant,E=b.textcase,S=b.lineposition,g=b.shadow,C;n==="title.text"?C="titleText":n.indexOf("axis")!==-1?C="axisTitleText":n.indexOf("colorbar"!==-1)&&(C="colorbarTitleText");var M=e._context.edits[C];x===""?h=0:x.replace(cie," % ")===a.replace(cie," % ")&&(h=.2,v=!0,M||(x="")),r._meta?x=b2.templateString(x,r._meta):c._meta&&(x=b2.templateString(x,c._meta));var P=x||M,D;f||(f=b2.ensureSingle(c._infolayer,"g","g-"+t),D=c._hColorbarMoveTitle);var q=f.selectAll("text").data(P?[0]:[]);if(q.enter().append("text"),q.text(x).attr("class",t),q.exit().remove(),!P)return f;function O(N){b2.syncOrAsync([U,B],N)}function U(N){var X;return!u&&D&&(u={}),u?(X="",u.rotate&&(X+="rotate("+[u.rotate,l.x,l.y]+")"),(u.offset||D)&&(X+=lie(0,(u.offset||0)-(D||0)))):X=null,N.attr("transform",X),N.style("opacity",h*uie.opacity(A)).call(qz.font,{color:uie.rgb(A),size:EC.round(w,2),family:p,weight:T,style:k,variant:_,textcase:E,shadow:g,lineposition:S}).attr(l).call(zz.convertToTspans,e),Sit.previousPromises(e)}function B(N){var X=EC.select(N.node().parentNode);if(s&&s.selection&&s.side&&x){X.attr("transform",null);var K=Eit[s.side],ne=s.side==="left"||s.side==="top"?-1:1,fe=Mit(s.pad)?s.pad:2,ue=qz.bBox(X.node()),ee={t:0,b:0,l:0,r:0},Z=e._fullLayout._reservedMargin;for(var oe in Z)for(var ce in Z[oe]){var le=Z[oe][ce];ee[ce]=Math.max(ee[ce],le)}var me={left:ee.l,top:ee.t,right:c.width-ee.r,bottom:c.height-ee.b},he=s.maxShift||ne*(me[s.side]-ue[s.side]),te=0;if(he<0)te=he;else{var ge=s.offsetLeft||0,ae=s.offsetTop||0;ue.left-=ge,ue.right-=ge,ue.top-=ae,ue.bottom-=ae,s.selection.each(function(){var Ce=qz.bBox(this);b2.bBoxIntersect(ue,Ce,fe)&&(te=Math.max(te,ne*(Ce[s.side]-ue[K])+fe))}),te=Math.min(he,te),i._titleScoot=Math.abs(te)}if(te>0||he<0){var _e={left:[-te,0],right:[te,0],top:[0,-te],bottom:[0,te]}[s.side];X.attr("transform",lie(_e[0],_e[1]))}}}q.call(O);function F(){h=0,v=!0,q.text(a).on("mouseover.opacity",function(){EC.select(this).transition().duration(fie.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){EC.select(this).transition().duration(fie.HIDE_PLACEHOLDER).style("opacity",0)})}return M&&(x?q.on(".opacity",null):F(),q.call(zz.makeEditable,{gd:e}).on("edit",function(N){o!==void 0?sie.call("_guiRestyle",e,n,N,o):sie.call("_guiRelayout",e,n,N)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(O)}).on("input",function(N){this.text(N||" ").call(zz.positionText,l.x,l.y)})),q.classed("js-placeholder",v),f}hie.exports={draw:kit}});var N0=ie((ztr,yie)=>{"use strict";var Cit=Mi(),Lit=Kb().utcFormat,Js=Zt(),Pit=Js.numberFormat,O0=la(),dm=Js.cleanNumber,Rit=Js.ms2DateTime,vie=Js.dateTime2ms,B0=Js.ensureNumber,die=Js.isArrayOrTypedArray,pm=eo(),kC=pm.FP_SAFE,e0=pm.BADNUM,Dit=pm.LOG_CLIP,Iit=pm.ONEWEEK,CC=pm.ONEDAY,LC=pm.ONEHOUR,pie=pm.ONEMIN,gie=pm.ONESEC,PC=zl(),IC=Af(),RC=IC.HOUR_PATTERN,DC=IC.WEEKDAY_PATTERN;function FA(e){return Math.pow(10,e)}function Oz(e){return e!=null}yie.exports=function(t,r){r=r||{};var i=t._id||"x",n=i.charAt(0);function a(T,k){if(T>0)return Math.log(T)/Math.LN10;if(T<=0&&k&&t.range&&t.range.length===2){var _=t.range[0],E=t.range[1];return .5*(_+E-2*Dit*Math.abs(_-E))}else return e0}function o(T,k,_,E){if((E||{}).msUTC&&O0(T))return+T;var S=vie(T,_||t.calendar);if(S===e0)if(O0(T)){T=+T;var g=Math.floor(Js.mod(T+.05,1)*10),C=Math.round(T-g/10);S=vie(new Date(C))+g/10}else return e0;return S}function s(T,k,_){return Rit(T,k,_||t.calendar)}function l(T){return t._categories[Math.round(T)]}function u(T){if(Oz(T)){if(t._categoriesMap===void 0&&(t._categoriesMap={}),t._categoriesMap[T]!==void 0)return t._categoriesMap[T];t._categories.push(typeof T=="number"?String(T):T);var k=t._categories.length-1;return t._categoriesMap[T]=k,k}return e0}function f(T,k){for(var _=new Array(k),E=0;E<k;E++){var S=(T[0]||[])[E],g=(T[1]||[])[E];_[E]=c([S,g])}return _}function c(T){if(t._categoriesMap)return t._categoriesMap[T]}function h(T){var k=c(T);if(k!==void 0)return k;if(O0(T))return+T}function v(T){return O0(T)?+T:c(T)}function d(T,k,_){return Cit.round(_+k*T,2)}function x(T,k,_){return(T-_)/k}var b=function(k){return O0(k)?d(k,t._m,t._b):e0},p=function(T){return x(T,t._m,t._b)};if(t.rangebreaks){var w=n==="y";b=function(T){if(!O0(T))return e0;var k=t._rangebreaks.length;if(!k)return d(T,t._m,t._b);var _=w;t.range[0]>t.range[1]&&(_=!_);for(var E=_?-1:1,S=E*T,g=0,C=0;C<k;C++){var M=E*t._rangebreaks[C].min,P=E*t._rangebreaks[C].max;if(S<M)break;if(S>P)g=C+1;else{g=S<(M+P)/2?C:C+1;break}}var D=t._B[g]||0;return isFinite(D)?d(T,t._m2,D):0},p=function(T){var k=t._rangebreaks.length;if(!k)return x(T,t._m,t._b);for(var _=0,E=0;E<k&&!(T<t._rangebreaks[E].pmin);E++)T>t._rangebreaks[E].pmax&&(_=E+1);return x(T,t._m2,t._B[_])}}t.c2l=t.type==="log"?a:B0,t.l2c=t.type==="log"?FA:B0,t.l2p=b,t.p2l=p,t.c2p=t.type==="log"?function(T,k){return b(a(T,k))}:b,t.p2c=t.type==="log"?function(T){return FA(p(T))}:p,["linear","-"].indexOf(t.type)!==-1?(t.d2r=t.r2d=t.d2c=t.r2c=t.d2l=t.r2l=dm,t.c2d=t.c2r=t.l2d=t.l2r=B0,t.d2p=t.r2p=function(T){return t.l2p(dm(T))},t.p2d=t.p2r=p,t.cleanPos=B0):t.type==="log"?(t.d2r=t.d2l=function(T,k){return a(dm(T),k)},t.r2d=t.r2c=function(T){return FA(dm(T))},t.d2c=t.r2l=dm,t.c2d=t.l2r=B0,t.c2r=a,t.l2d=FA,t.d2p=function(T,k){return t.l2p(t.d2r(T,k))},t.p2d=function(T){return FA(p(T))},t.r2p=function(T){return t.l2p(dm(T))},t.p2r=p,t.cleanPos=B0):t.type==="date"?(t.d2r=t.r2d=Js.identity,t.d2c=t.r2c=t.d2l=t.r2l=o,t.c2d=t.c2r=t.l2d=t.l2r=s,t.d2p=t.r2p=function(T,k,_){return t.l2p(o(T,0,_))},t.p2d=t.p2r=function(T,k,_){return s(p(T),k,_)},t.cleanPos=function(T){return Js.cleanDate(T,e0,t.calendar)}):t.type==="category"?(t.d2c=t.d2l=u,t.r2d=t.c2d=t.l2d=l,t.d2r=t.d2l_noadd=h,t.r2c=function(T){var k=v(T);return k!==void 0?k:t.fraction2r(.5)},t.l2r=t.c2r=B0,t.r2l=v,t.d2p=function(T){return t.l2p(t.r2c(T))},t.p2d=function(T){return l(p(T))},t.r2p=t.d2p,t.p2r=p,t.cleanPos=function(T){return typeof T=="string"&&T!==""?T:B0(T)}):t.type==="multicategory"&&(t.r2d=t.c2d=t.l2d=l,t.d2r=t.d2l_noadd=h,t.r2c=function(T){var k=h(T);return k!==void 0?k:t.fraction2r(.5)},t.r2c_just_indices=c,t.l2r=t.c2r=B0,t.r2l=h,t.d2p=function(T){return t.l2p(t.r2c(T))},t.p2d=function(T){return l(p(T))},t.r2p=t.d2p,t.p2r=p,t.cleanPos=function(T){return Array.isArray(T)||typeof T=="string"&&T!==""?T:B0(T)},t.setupMultiCategory=function(T){var k=t._traceIndices,_,E,S=t._matchGroup;if(S&&t._categories.length===0){for(var g in S)if(g!==i){var C=r[PC.id2name(g)];k=k.concat(C._traceIndices)}}var M=[[0,{}],[0,{}]],P=[];for(_=0;_<k.length;_++){var D=T[k[_]];if(n in D){var q=D[n],O=D._length||Js.minRowLength(q);if(die(q[0])&&die(q[1]))for(E=0;E<O;E++){var U=q[0][E],B=q[1][E];Oz(U)&&Oz(B)&&(P.push([U,B]),U in M[0][1]||(M[0][1][U]=M[0][0]++),B in M[1][1]||(M[1][1][B]=M[1][0]++))}}}for(P.sort(function(F,N){var X=M[0][1],K=X[F[0]]-X[N[0]];if(K)return K;var ne=M[1][1];return ne[F[1]]-ne[N[1]]}),_=0;_<P.length;_++)u(P[_])}),t.fraction2r=function(T){var k=t.r2l(t.range[0]),_=t.r2l(t.range[1]);return t.l2r(k+T*(_-k))},t.r2fraction=function(T){var k=t.r2l(t.range[0]),_=t.r2l(t.range[1]);return(t.r2l(T)-k)/(_-k)},t.limitRange=function(T){var k=t.minallowed,_=t.maxallowed;if(!(k===void 0&&_===void 0)){T||(T="range");var E=Js.nestedProperty(t,T).get(),S=Js.simpleMap(E,t.r2l),g=S[1]<S[0];g&&S.reverse();var C=Js.simpleMap([k,_],t.r2l);if(k!==void 0&&S[0]<C[0]&&(E[g?1:0]=k),_!==void 0&&S[1]>C[1]&&(E[g?0:1]=_),E[0]===E[1]){var M=t.l2r(k),P=t.l2r(_);if(k!==void 0){var D=M+1;_!==void 0&&(D=Math.min(D,P)),E[g?1:0]=D}if(_!==void 0){var q=P+1;k!==void 0&&(q=Math.max(q,M)),E[g?0:1]=q}}}},t.cleanRange=function(T,k){t._cleanRange(T,k),t.limitRange(T)},t._cleanRange=function(T,k){k||(k={}),T||(T="range");var _=Js.nestedProperty(t,T).get(),E,S;if(t.type==="date"?S=Js.dfltRange(t.calendar):n==="y"?S=IC.DFLTRANGEY:t._name==="realaxis"?S=[0,1]:S=k.dfltRange||IC.DFLTRANGEX,S=S.slice(),(t.rangemode==="tozero"||t.rangemode==="nonnegative")&&(S[0]=0),!_||_.length!==2){Js.nestedProperty(t,T).set(S);return}var g=_[0]===null,C=_[1]===null;for(t.type==="date"&&!t.autorange&&(_[0]=Js.cleanDate(_[0],e0,t.calendar),_[1]=Js.cleanDate(_[1],e0,t.calendar)),E=0;E<2;E++)if(t.type==="date"){if(!Js.isDateTime(_[E],t.calendar)){t[T]=S;break}if(t.r2l(_[0])===t.r2l(_[1])){var M=Js.constrain(t.r2l(_[0]),Js.MIN_MS+1e3,Js.MAX_MS-1e3);_[0]=t.l2r(M-1e3),_[1]=t.l2r(M+1e3);break}}else{if(!O0(_[E]))if(!(g||C)&&O0(_[1-E]))_[E]=_[1-E]*(E?10:.1);else{t[T]=S;break}if(_[E]<-kC?_[E]=-kC:_[E]>kC&&(_[E]=kC),_[0]===_[1]){var P=Math.max(1,Math.abs(_[0]*1e-6));_[0]-=P,_[1]+=P}}},t.setScale=function(T){var k=r._size;if(t.overlaying){var _=PC.getFromId({_fullLayout:r},t.overlaying);t.domain=_.domain}var E=T&&t._r?"_r":"range",S=t.calendar;t.cleanRange(E);var g=t.r2l(t[E][0],S),C=t.r2l(t[E][1],S),M=n==="y";if(M?(t._offset=k.t+(1-t.domain[1])*k.h,t._length=k.h*(t.domain[1]-t.domain[0]),t._m=t._length/(g-C),t._b=-t._m*C):(t._offset=k.l+t.domain[0]*k.w,t._length=k.w*(t.domain[1]-t.domain[0]),t._m=t._length/(C-g),t._b=-t._m*g),t._rangebreaks=[],t._lBreaks=0,t._m2=0,t._B=[],t.rangebreaks){var P,D;if(t._rangebreaks=t.locateBreaks(Math.min(g,C),Math.max(g,C)),t._rangebreaks.length){for(P=0;P<t._rangebreaks.length;P++)D=t._rangebreaks[P],t._lBreaks+=Math.abs(D.max-D.min);var q=M;g>C&&(q=!q),q&&t._rangebreaks.reverse();var O=q?-1:1;for(t._m2=O*t._length/(Math.abs(C-g)-t._lBreaks),t._B.push(-t._m2*(M?C:g)),P=0;P<t._rangebreaks.length;P++)D=t._rangebreaks[P],t._B.push(t._B[t._B.length-1]-O*t._m2*(D.max-D.min));for(P=0;P<t._rangebreaks.length;P++)D=t._rangebreaks[P],D.pmin=b(D.min),D.pmax=b(D.max)}}if(!isFinite(t._m)||!isFinite(t._b)||t._length<0)throw r._replotting=!1,new Error("Something went wrong with axis scaling")},t.maskBreaks=function(T){var k=t.rangebreaks||[],_,E,S,g,C;k._cachedPatterns||(k._cachedPatterns=k.map(function(X){return X.enabled&&X.bounds?Js.simpleMap(X.bounds,X.pattern?dm:t.d2c):null})),k._cachedValues||(k._cachedValues=k.map(function(X){return X.enabled&&X.values?Js.simpleMap(X.values,t.d2c).sort(Js.sorterAsc):null}));for(var M=0;M<k.length;M++){var P=k[M];if(P.enabled){if(P.bounds){var D=P.pattern;switch(_=k._cachedPatterns[M],E=_[0],S=_[1],D){case DC:C=new Date(T),g=C.getUTCDay(),E>S&&(S+=7,g<E&&(g+=7));break;case RC:C=new Date(T);var q=C.getUTCHours(),O=C.getUTCMinutes(),U=C.getUTCSeconds(),B=C.getUTCMilliseconds();g=q+(O/60+U/3600+B/36e5),E>S&&(S+=24,g<E&&(g+=24));break;case"":g=T;break}if(g>=E&&g<S)return e0}else for(var F=k._cachedValues[M],N=0;N<F.length;N++)if(E=F[N],S=E+P.dvalue,T>=E&&T<S)return e0}}return T},t.locateBreaks=function(T,k){var _,E,S,g,C=[];if(!t.rangebreaks)return C;var M=t.rangebreaks.slice().sort(function(ne,fe){return ne.pattern===DC&&fe.pattern===RC?-1:fe.pattern===DC&&ne.pattern===RC?1:0}),P=function(ne,fe){if(ne=Js.constrain(ne,T,k),fe=Js.constrain(fe,T,k),ne!==fe){for(var ue=!0,ee=0;ee<C.length;ee++){var Z=C[ee];ne<Z.max&&fe>=Z.min&&(ne<Z.min&&(Z.min=ne),fe>Z.max&&(Z.max=fe),ue=!1)}ue&&C.push({min:ne,max:fe})}};for(_=0;_<M.length;_++){var D=M[_];if(D.enabled)if(D.bounds){var q=T,O=k;D.pattern&&(q=Math.floor(q)),E=Js.simpleMap(D.bounds,D.pattern?dm:t.r2l),S=E[0],g=E[1];var U=new Date(q),B,F;switch(D.pattern){case DC:F=Iit,B=((g<S?7:0)+(g-S))*CC,q+=S*CC-(U.getUTCDay()*CC+U.getUTCHours()*LC+U.getUTCMinutes()*pie+U.getUTCSeconds()*gie+U.getUTCMilliseconds());break;case RC:F=CC,B=((g<S?24:0)+(g-S))*LC,q+=S*LC-(U.getUTCHours()*LC+U.getUTCMinutes()*pie+U.getUTCSeconds()*gie+U.getUTCMilliseconds());break;default:q=Math.min(E[0],E[1]),O=Math.max(E[0],E[1]),F=O-q,B=F}for(var N=q;N<O;N+=F)P(N,N+B)}else for(var X=Js.simpleMap(D.values,t.d2c),K=0;K<X.length;K++)S=X[K],g=S+D.dvalue,P(S,g)}return C.sort(function(ne,fe){return ne.min-fe.min}),C},t.makeCalcdata=function(T,k,_){var E,S,g,C,M=t.type,P=M==="date"&&T[k+"calendar"];if(k in T){if(E=T[k],C=T._length||Js.minRowLength(E),Js.isTypedArray(E)&&(M==="linear"||M==="log")){if(C===E.length)return E;if(E.subarray)return E.subarray(0,C)}if(M==="multicategory")return f(E,C);for(S=new Array(C),g=0;g<C;g++)S[g]=t.d2c(E[g],0,P,_)}else{var D=k+"0"in T?t.d2c(T[k+"0"],0,P):0,q=T["d"+k]?Number(T["d"+k]):1;for(E=T[{x:"y",y:"x"}[k]],C=T._length||E.length,S=new Array(C),g=0;g<C;g++)S[g]=D+g*q}if(t.rangebreaks)for(g=0;g<C;g++)S[g]=t.maskBreaks(S[g]);return S},t.isValidRange=function(T,k){return Array.isArray(T)&&T.length===2&&(k&&T[0]===null||O0(t.r2l(T[0])))&&(k&&T[1]===null||O0(t.r2l(T[1])))},t.getAutorangeDflt=function(T,k){var _=!t.isValidRange(T,"nullOk");return _&&k&&k.reverseDflt?_="reversed":T&&(T[0]===null&&T[1]===null?_=!0:T[0]===null&&T[1]!==null?_="min":T[0]!==null&&T[1]===null&&(_="max")),_},t.isReversed=function(){var T=t.autorange;return T==="reversed"||T==="min reversed"||T==="max reversed"},t.isPtWithinRange=function(T,k){var _=t.c2l(T[n],null,k),E=t.r2l(t.range[0]),S=t.r2l(t.range[1]);return E<S?E<=_&&_<=S:S<=_&&_<=E},t._emptyCategories=function(){t._categories=[],t._categoriesMap={}},t.clearCalc=function(){var T=t._matchGroup;if(T){var k=null,_=null;for(var E in T){var S=r[PC.id2name(E)];if(S._categories){k=S._categories,_=S._categoriesMap;break}}k&&_?(t._categories=k,t._categoriesMap=_):t._emptyCategories()}else t._emptyCategories();if(t._initialCategories)for(var g=0;g<t._initialCategories.length;g++)u(t._initialCategories[g])},t.sortByInitialCategories=function(){var T=[];if(t._emptyCategories(),t._initialCategories)for(var k=0;k<t._initialCategories.length;k++)u(t._initialCategories[k]);T=T.concat(t._traceIndices);var _=t._matchGroup;for(var E in _)if(i!==E){var S=r[PC.id2name(E)];S._categories=t._categories,S._categoriesMap=t._categoriesMap,T=T.concat(S._traceIndices)}return T};var A=r._d3locale;t.type==="date"&&(t._dateFormat=A?A.timeFormat:Lit,t._extraFormat=r._extraFormat),t._separators=r.separators,t._numFormat=A?A.numberFormat:Pit,delete t._minDtick,delete t._forceTick0}});var w2=ie((Otr,bie)=>{"use strict";var mie=la(),Bz=Zt(),Fit=eo().BADNUM,FC=Bz.isArrayOrTypedArray,qit=Bz.isDateTime,zit=Bz.cleanNumber,xie=Math.round;bie.exports=function(t,r,i){var n=t,a=i.noMultiCategory;if(FC(n)&&!n.length)return"-";if(!a&&Vit(n))return"multicategory";if(a&&Array.isArray(n[0])){for(var o=[],s=0;s<n.length;s++)if(FC(n[s]))for(var l=0;l<n[s].length;l++)o.push(n[s][l]);n=o}if(Nit(n,r))return"date";var u=i.autotypenumbers!=="strict";return Uit(n,u)?"category":Bit(n,u)?"linear":"-"};function Oit(e,t){return t?mie(e):typeof e=="number"}function Bit(e,t){for(var r=e.length,i=0;i<r;i++)if(Oit(e[i],t))return!0;return!1}function Nit(e,t){for(var r=e.length,i=_ie(r),n=0,a=0,o={},s=0;s<r;s+=i){var l=xie(s),u=e[l],f=String(u);o[f]||(o[f]=1,qit(u,t)&&n++,mie(u)&&a++)}return n>a*2}function _ie(e){return Math.max(1,(e-1)/1e3)}function Uit(e,t){for(var r=e.length,i=_ie(r),n=0,a=0,o={},s=0;s<r;s+=i){var l=xie(s),u=e[l],f=String(u);if(!o[f]){o[f]=1;var c=typeof u;c==="boolean"?a++:(t?zit(u)!==Fit:c==="number")?n++:c==="string"&&a++}}return a>n*2}function Vit(e){return FC(e[0])&&FC(e[1])}});var Ld=ie((Btr,Cie)=>{"use strict";var Hit=Mi(),Mie=la(),gm=Zt(),qC=eo().FP_SAFE,Git=Ti(),Yit=oa(),Sie=zl(),Wit=Sie.getFromId,Xit=Sie.isLinked;Cie.exports={applyAutorangeOptions:kie,getAutoRange:Nz,makePadFn:Uz,doAutoRange:jit,findExtremes:Kit,concatExtremes:Gz};function Nz(e,t){var r,i,n=[],a=e._fullLayout,o=Uz(a,t,0),s=Uz(a,t,1),l=Gz(e,t),u=l.min,f=l.max;if(u.length===0||f.length===0)return gm.simpleMap(t.range,t.r2l);var c=u[0].val,h=f[0].val;for(r=1;r<u.length&&c===h;r++)c=Math.min(c,u[r].val);for(r=1;r<f.length&&c===h;r++)h=Math.max(h,f[r].val);var v=t.autorange,d=v==="reversed"||v==="min reversed"||v==="max reversed";if(!d&&t.range){var x=gm.simpleMap(t.range,t.r2l);d=x[1]<x[0]}t.autorange==="reversed"&&(t.autorange=!0);var b=t.rangemode,p=b==="tozero",w=b==="nonnegative",A=t._length,T=A/10,k=0,_,E,S,g,C,M;for(r=0;r<u.length;r++)for(_=u[r],i=0;i<f.length;i++)E=f[i],M=E.val-_.val-wie(t,_.val,E.val),M>0&&(C=A-o(_)-s(E),C>T?M/C>k&&(S=_,g=E,k=M/C):M/A>k&&(S={val:_.val,nopad:1},g={val:E.val,nopad:1},k=M/A));function P(B,F){return Math.max(B,s(F))}if(c===h){var D=c-1,q=c+1;if(p)if(c===0)n=[0,1];else{var O=(c>0?f:u).reduce(P,0),U=c/(1-Math.min(.5,O/A));n=c>0?[0,U]:[U,0]}else w?n=[Math.max(0,D),Math.max(1,q)]:n=[D,q]}else p?(S.val>=0&&(S={val:0,nopad:1}),g.val<=0&&(g={val:0,nopad:1})):w&&(S.val-k*o(S)<0&&(S={val:0,nopad:1}),g.val<=0&&(g={val:1,nopad:1})),k=(g.val-S.val-wie(t,_.val,E.val))/(A-o(S)-s(g)),n=[S.val-k*o(S),g.val+k*s(g)];return n=kie(n,t),t.limitRange&&t.limitRange(),d&&n.reverse(),gm.simpleMap(n,t.l2r||Number)}function wie(e,t,r){var i=0;if(e.rangebreaks)for(var n=e.locateBreaks(t,r),a=0;a<n.length;a++){var o=n[a];i+=o.max-o.min}return i}function Uz(e,t,r){var i=.05*t._length,n=t._anchorAxis||{};if((t.ticklabelposition||"").indexOf("inside")!==-1||(n.ticklabelposition||"").indexOf("inside")!==-1){var a=t.isReversed();if(!a){var o=gm.simpleMap(t.range,t.r2l);a=o[1]<o[0]}a&&(r=!r)}var s=0;return Xit(e,t._id)||(s=Zit(e,t,r)),i=Math.max(s,i),t.constrain==="domain"&&t._inputDomain&&(i*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])),function(u){return u.nopad?0:u.pad+(u.extrapad?i:s)}}var Tie=3;function Zit(e,t,r){var i=0,n=t._id.charAt(0)==="x";for(var a in e._plots){var o=e._plots[a];if(!(t._id!==o.xaxis._id&&t._id!==o.yaxis._id)){var s=(n?o.yaxis:o.xaxis)||{};if((s.ticklabelposition||"").indexOf("inside")!==-1&&(!r&&(s.side==="left"||s.side==="bottom")||r&&(s.side==="top"||s.side==="right"))){if(s._vals){var l=gm.deg2rad(s._tickAngles[s._id+"tick"]||0),u=Math.abs(Math.cos(l)),f=Math.abs(Math.sin(l));if(!s._vals[0].bb){var c=s._id+"tick",h=s._selections[c];h.each(function(w){var A=Hit.select(this),T=A.select(".text-math-group");T.empty()&&(w.bb=Yit.bBox(A.node()))})}for(var v=0;v<s._vals.length;v++){var d=s._vals[v],x=d.bb;if(x){var b=2*Tie+x.width,p=2*Tie+x.height;i=Math.max(i,n?Math.max(b*u,p*f):Math.max(p*u,b*f))}}}s.ticks==="inside"&&s.ticklabelposition==="inside"&&(i+=s.ticklen||0)}}}return i}function Gz(e,t,r){var i=t._id,n=e._fullData,a=e._fullLayout,o=[],s=[],l,u,f;function c(b,p){for(l=0;l<p.length;l++){var w=b[p[l]],A=(w._extremes||{})[i];if(w.visible===!0&&A){for(u=0;u<A.min.length;u++)f=A.min[u],Vz(o,f.val,f.pad,{extrapad:f.extrapad});for(u=0;u<A.max.length;u++)f=A.max[u],Hz(s,f.val,f.pad,{extrapad:f.extrapad})}}}if(c(n,t._traceIndices),c(a.annotations||[],t._annIndices||[]),c(a.shapes||[],t._shapeIndices||[]),t._matchGroup&&!r){for(var h in t._matchGroup)if(h!==t._id){var v=Wit(e,h),d=Gz(e,v,!0),x=t._length/v._length;for(u=0;u<d.min.length;u++)f=d.min[u],Vz(o,f.val,f.pad*x,{extrapad:f.extrapad});for(u=0;u<d.max.length;u++)f=d.max[u],Hz(s,f.val,f.pad*x,{extrapad:f.extrapad})}}return{min:o,max:s}}function jit(e,t,r){if(t.setScale(),t.autorange){t.range=r?r.slice():Nz(e,t),t._r=t.range.slice(),t._rl=gm.simpleMap(t._r,t.r2l);var i=t._input,n={};n[t._attr+".range"]=t.range,n[t._attr+".autorange"]=t.autorange,Git.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,n),i.range=t.range.slice(),i.autorange=t.autorange}var a=t._anchorAxis;if(a&&a.rangeslider){var o=a.rangeslider[t._name];o&&o.rangemode==="auto"&&(o.range=Nz(e,t)),a._input.rangeslider[t._name]=gm.extendFlat({},o)}}function Kit(e,t,r){r||(r={}),e._m||e.setScale();var i=[],n=[],a=t.length,o=r.padded||!1,s=r.tozero&&(e.type==="linear"||e.type==="-"),l=e.type==="log",u=!1,f=r.vpadLinearized||!1,c,h,v,d,x,b,p,w,A;function T(P){if(Array.isArray(P))return u=!0,function(q){return Math.max(Number(P[q]||0),0)};var D=Math.max(Number(P||0),0);return function(){return D}}var k=T((e._m>0?r.ppadplus:r.ppadminus)||r.ppad||0),_=T((e._m>0?r.ppadminus:r.ppadplus)||r.ppad||0),E=T(r.vpadplus||r.vpad),S=T(r.vpadminus||r.vpad);if(!u){if(w=1/0,A=-1/0,l)for(c=0;c<a;c++)h=t[c],h<w&&h>0&&(w=h),h>A&&h<qC&&(A=h);else for(c=0;c<a;c++)h=t[c],h<w&&h>-qC&&(w=h),h>A&&h<qC&&(A=h);t=[w,A],a=2}var g={tozero:s,extrapad:o};function C(P){v=t[P],Mie(v)&&(b=k(P),p=_(P),f?(d=e.c2l(v)-S(P),x=e.c2l(v)+E(P)):(w=v-S(P),A=v+E(P),l&&w<A/10&&(w=A/10),d=e.c2l(w),x=e.c2l(A)),s&&(d=Math.min(0,d),x=Math.max(0,x)),Aie(d)&&Vz(i,d,p,g),Aie(x)&&Hz(n,x,b,g))}var M=Math.min(6,a);for(c=0;c<M;c++)C(c);for(c=a-1;c>=M;c--)C(c);return{min:i,max:n,opts:r}}function Vz(e,t,r,i){Eie(e,t,r,i,Jit)}function Hz(e,t,r,i){Eie(e,t,r,i,Qit)}function Eie(e,t,r,i,n){for(var a=i.tozero,o=i.extrapad,s=!0,l=0;l<e.length&&s;l++){var u=e[l];if(n(u.val,t)&&u.pad>=r&&(u.extrapad||!o)){s=!1;break}else n(t,u.val)&&u.pad<=r&&(o||!u.extrapad)&&(e.splice(l,1),l--)}if(s){var f=a&&t===0;e.push({val:t,pad:f?0:r,extrapad:f?!1:o})}}function Aie(e){return Mie(e)&&Math.abs(e)<qC}function Jit(e,t){return e<=t}function Qit(e,t){return e>=t}function $it(e,t){var r=t.autorangeoptions;return r&&r.minallowed!==void 0&&zC(t,r.minallowed,r.maxallowed)?r.minallowed:r&&r.clipmin!==void 0&&zC(t,r.clipmin,r.clipmax)?Math.max(e,t.d2l(r.clipmin)):e}function eat(e,t){var r=t.autorangeoptions;return r&&r.maxallowed!==void 0&&zC(t,r.minallowed,r.maxallowed)?r.maxallowed:r&&r.clipmax!==void 0&&zC(t,r.clipmin,r.clipmax)?Math.min(e,t.d2l(r.clipmax)):e}function zC(e,t,r){return t!==void 0&&r!==void 0?(t=e.d2l(t),r=e.d2l(r),t<r):!0}function kie(e,t){if(!t||!t.autorangeoptions)return e;var r=e[0],i=e[1],n=t.autorangeoptions.include;if(n!==void 0){var a=t.d2l(r),o=t.d2l(i);gm.isArrayOrTypedArray(n)||(n=[n]);for(var s=0;s<n.length;s++){var l=t.d2l(n[s]);a>=l&&(a=l,r=l),o<=l&&(o=l,i=l)}}return r=$it(r,t),i=eat(i,t),[r,i]}});var Wi=ie((Ntr,Jie)=>{"use strict";var ap=Mi(),tf=la(),T2=js(),zA=Ti(),Da=Zt(),A2=Da.strTranslate,Tx=ks(),tat=wx(),OA=_i(),Pd=oa(),rat=gc(),Lie=pz(),Gh=eo(),nat=Gh.ONEMAXYEAR,NC=Gh.ONEAVGYEAR,Zz=Gh.ONEMINYEAR,iat=Gh.ONEMAXQUARTER,jz=Gh.ONEAVGQUARTER,Kz=Gh.ONEMINQUARTER,aat=Gh.ONEMAXMONTH,M2=Gh.ONEAVGMONTH,Jz=Gh.ONEMINMONTH,op=Gh.ONEWEEK,_v=Gh.ONEDAY,Ax=_v/2,Ng=Gh.ONEHOUR,UC=Gh.ONEMIN,Qz=Gh.ONESEC,Mx=Gh.MINUS_SIGN,GC=Gh.BADNUM,$z={K:"zeroline"},eO={K:"gridline",L:"path"},tO={K:"minor-gridline",L:"path"},Uie={K:"tick",L:"path"},Pie={K:"tick",L:"text"},Rie={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},YC=Mf(),qA=YC.MID_SHIFT,Sx=YC.CAP_SHIFT,BA=YC.LINE_SPACING,oat=YC.OPPOSITE_SIDE,VC=3,Fn=Jie.exports={};Fn.setConvert=N0();var sat=w2(),Ug=zl(),lat=Ug.idSort,uat=Ug.isLinked;Fn.id2name=Ug.id2name;Fn.name2id=Ug.name2id;Fn.cleanId=Ug.cleanId;Fn.list=Ug.list;Fn.listIds=Ug.listIds;Fn.getFromId=Ug.getFromId;Fn.getFromTrace=Ug.getFromTrace;var Vie=Ld();Fn.getAutoRange=Vie.getAutoRange;Fn.findExtremes=Vie.findExtremes;var fat=1e-4;function aO(e){var t=(e[1]-e[0])*fat;return[e[0]-t,e[1]+t]}Fn.coerceRef=function(e,t,r,i,n,a){var o=i.charAt(i.length-1),s=r._fullLayout._subplots[o+"axis"],l=i+"ref",u={};return n||(n=s[0]||(typeof a=="string"?a:a[0])),a||(a=n),s=s.concat(s.map(function(f){return f+" domain"})),u[l]={valType:"enumerated",values:s.concat(a?typeof a=="string"?[a]:a:[]),dflt:n},Da.coerce(e,t,u,l)};Fn.getRefType=function(e){return e===void 0?e:e==="paper"?"paper":e==="pixel"?"pixel":/( domain)$/.test(e)?"domain":"range"};Fn.coercePosition=function(e,t,r,i,n,a){var o,s,l=Fn.getRefType(i);if(l!=="range")o=Da.ensureNumber,s=r(n,a);else{var u=Fn.getFromId(t,i);a=u.fraction2r(a),s=r(n,a),o=u.cleanPos}e[n]=o(s)};Fn.cleanPosition=function(e,t,r){var i=r==="paper"||r==="pixel"?Da.ensureNumber:Fn.getFromId(t,r).cleanPos;return i(e)};Fn.redrawComponents=function(e,t){t=t||Fn.listIds(e);var r=e._fullLayout;function i(n,a,o,s){for(var l=zA.getComponentMethod(n,a),u={},f=0;f<t.length;f++)for(var c=r[Fn.id2name(t[f])],h=c[o],v=0;v<h.length;v++){var d=h[v];if(!u[d]&&(l(e,d),u[d]=1,s))return}}i("annotations","drawOne","_annIndices"),i("shapes","drawOne","_shapeIndices"),i("images","draw","_imgIndices",!0),i("selections","drawOne","_selectionIndices")};var cat=Fn.getDataConversions=function(e,t,r,i){var n,a=r==="x"||r==="y"||r==="z"?r:i;if(Da.isArrayOrTypedArray(a)){if(n={type:sat(i,void 0,{autotypenumbers:e._fullLayout.autotypenumbers}),_categories:[]},Fn.setConvert(n),n.type==="category")for(var o=0;o<i.length;o++)n.d2c(i[o])}else n=Fn.getFromTrace(e,t,a);return n?{d2c:n.d2c,c2d:n.c2d}:a==="ids"?{d2c:Iie,c2d:Iie}:{d2c:Die,c2d:Die}};function Die(e){return+e}function Iie(e){return String(e)}Fn.getDataToCoordFunc=function(e,t,r,i){return cat(e,t,r,i).d2c};Fn.counterLetter=function(e){var t=e.charAt(0);if(t==="x")return"y";if(t==="y")return"x"};Fn.minDtick=function(e,t,r,i){["log","category","multicategory"].indexOf(e.type)!==-1||!i?e._minDtick=0:e._minDtick===void 0?(e._minDtick=t,e._forceTick0=r):e._minDtick&&((e._minDtick/t+1e-6)%1<2e-6&&((r-e._forceTick0)/t%1+1.000001)%1<2e-6?(e._minDtick=t,e._forceTick0=r):((t/e._minDtick+1e-6)%1>2e-6||((r-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6)&&(e._minDtick=0))};Fn.saveRangeInitial=function(e,t){for(var r=Fn.list(e,"",!0),i=!1,n=0;n<r.length;n++){var a=r[n],o=a._rangeInitial0===void 0&&a._rangeInitial1===void 0,s=o||a.range[0]!==a._rangeInitial0||a.range[1]!==a._rangeInitial1,l=a.autorange;(o&&l!==!0||t&&s)&&(a._rangeInitial0=l==="min"||l==="max reversed"?void 0:a.range[0],a._rangeInitial1=l==="max"||l==="min reversed"?void 0:a.range[1],a._autorangeInitial=l,i=!0)}return i};Fn.saveShowSpikeInitial=function(e,t){for(var r=Fn.list(e,"",!0),i=!1,n="on",a=0;a<r.length;a++){var o=r[a],s=o._showSpikeInitial===void 0,l=s||o.showspikes!==o._showspikes;(s||t&&l)&&(o._showSpikeInitial=o.showspikes,i=!0),n==="on"&&!o.showspikes&&(n="off")}return e._fullLayout._cartesianSpikesEnabled=n,i};Fn.autoBin=function(e,t,r,i,n,a){var o=Da.aggNums(Math.min,null,e),s=Da.aggNums(Math.max,null,e);if(t.type==="category"||t.type==="multicategory")return{start:o-.5,end:s+.5,size:Math.max(1,Math.round(a)||1),_dataSpan:s-o};n||(n=t.calendar);var l;if(t.type==="log"?l={type:"linear",range:[o,s]}:l={type:t.type,range:Da.simpleMap([o,s],t.c2r,0,n),calendar:n},Fn.setConvert(l),a=a&&Lie.dtick(a,l.type),a)l.dtick=a,l.tick0=Lie.tick0(void 0,l.type,n);else{var u;if(r)u=(s-o)/r;else{var f=Da.distinctVals(e),c=Math.pow(10,Math.floor(Math.log(f.minDiff)/Math.LN10)),h=c*Da.roundUp(f.minDiff/c,[.9,1.9,4.9,9.9],!0);u=Math.max(h,2*Da.stdev(e)/Math.pow(e.length,i?.25:.4)),tf(u)||(u=1)}Fn.autoTicks(l,u)}var v=l.dtick,d=Fn.tickIncrement(Fn.tickFirst(l),v,"reverse",n),x,b;if(typeof v=="number")d=hat(d,e,l,o,s),b=1+Math.floor((s-d)/v),x=d+b*v;else for(l.dtick.charAt(0)==="M"&&(d=vat(d,e,v,o,n)),x=d,b=0;x<=s;)x=Fn.tickIncrement(x,v,!1,n),b++;return{start:t.c2r(d,0,n),end:t.c2r(x,0,n),size:v,_dataSpan:s-o}};function hat(e,t,r,i,n){var a=0,o=0,s=0,l=0;function u(v){return(1+(v-e)*100/r.dtick)%100<2}for(var f=0;f<t.length;f++)t[f]%1===0?s++:tf(t[f])||l++,u(t[f])&&a++,u(t[f]+r.dtick/2)&&o++;var c=t.length-l;if(s===c&&r.type!=="date")r.dtick<1?e=i-.5*r.dtick:(e-=.5,e+r.dtick<i&&(e+=r.dtick));else if(o<c*.1&&(a>c*.3||u(i)||u(n))){var h=r.dtick/2;e+=e+h<i?h:-h}return e}function vat(e,t,r,i,n){var a=Da.findExactDates(t,n),o=.8;if(a.exactDays>o){var s=Number(r.substr(1));a.exactYears>o&&s%12===0?e=Fn.tickIncrement(e,"M6","reverse")+_v*1.5:a.exactMonths>o?e=Fn.tickIncrement(e,"M1","reverse")+_v*15.5:e-=Ax;var l=Fn.tickIncrement(e,r);if(l<=i)return l}return e}Fn.prepMinorTicks=function(e,t,r){if(!t.minor.dtick){delete e.dtick;var i=t.dtick&&tf(t._tmin),n;if(i){var a=Fn.tickIncrement(t._tmin,t.dtick,!0);n=[t._tmin,a*.99+t._tmin*.01]}else{var o=Da.simpleMap(t.range,t.r2l);n=[o[0],.8*o[0]+.2*o[1]]}if(e.range=Da.simpleMap(n,t.l2r),e._isMinor=!0,Fn.prepTicks(e,r),i){var s=tf(t.dtick),l=tf(e.dtick),u=s?t.dtick:+t.dtick.substring(1),f=l?e.dtick:+e.dtick.substring(1);s&&l?Yz(u,f)?u===2*op&&f===2*_v&&(e.dtick=op):u===2*op&&f===3*_v?e.dtick=op:u===op&&!(t._input.minor||{}).nticks?e.dtick=_v:Fie(u/f,2.5)?e.dtick=u/2:e.dtick=u:String(t.dtick).charAt(0)==="M"?l?e.dtick="M1":Yz(u,f)?u>=12&&f===2&&(e.dtick="M3"):e.dtick=t.dtick:String(e.dtick).charAt(0)==="L"?String(t.dtick).charAt(0)==="L"?Yz(u,f)||(e.dtick=Fie(u/f,2.5)?t.dtick/2:t.dtick):e.dtick="D1":e.dtick==="D2"&&+t.dtick>1&&(e.dtick=1)}e.range=t.range}t.minor._tick0Init===void 0&&(e.tick0=t.tick0)};function Yz(e,t){return Math.abs((e/t+.5)%1-.5)<.001}function Fie(e,t){return Math.abs(e/t-1)<.001}Fn.prepTicks=function(e,t){var r=Da.simpleMap(e.range,e.r2l,void 0,void 0,t);if(e.tickmode==="auto"||!e.dtick){var i=e.nticks,n;i||(e.type==="category"||e.type==="multicategory"?(n=e.tickfont?Da.bigFont(e.tickfont.size||12):15,i=e._length/n):(n=e._id.charAt(0)==="y"?40:80,i=Da.constrain(e._length/n,4,9)+1),e._name==="radialaxis"&&(i*=2)),e.minor&&e.minor.tickmode!=="array"||e.tickmode==="array"&&(i*=100),e._roughDTick=Math.abs(r[1]-r[0])/i,Fn.autoTicks(e,e._roughDTick),e._minDtick>0&&e.dtick<e._minDtick*2&&(e.dtick=e._minDtick,e.tick0=e.l2r(e._forceTick0))}e.ticklabelmode==="period"&&dat(e),e.tick0||(e.tick0=e.type==="date"?"2000-01-01":0),e.type==="date"&&e.dtick<.1&&(e.dtick=.1),Wie(e)};function Wz(e){return+e.substring(1)}function dat(e){var t;function r(){return!(tf(e.dtick)||e.dtick.charAt(0)!=="M")}var i=r(),n=Fn.getTickFormat(e);if(n){var a=e._dtickInit!==e.dtick;/%[fLQsSMX]/.test(n)||(/%[HI]/.test(n)?(t=Ng,a&&!i&&e.dtick<Ng&&(e.dtick=Ng)):/%p/.test(n)?(t=Ax,a&&!i&&e.dtick<Ax&&(e.dtick=Ax)):/%[Aadejuwx]/.test(n)?(t=_v,a&&!i&&e.dtick<_v&&(e.dtick=_v)):/%[UVW]/.test(n)?(t=op,a&&!i&&e.dtick<op&&(e.dtick=op)):/%[Bbm]/.test(n)?(t=M2,a&&(i?Wz(e.dtick)<1:e.dtick<Jz)&&(e.dtick="M1")):/%[q]/.test(n)?(t=jz,a&&(i?Wz(e.dtick)<3:e.dtick<Kz)&&(e.dtick="M3")):/%[Yy]/.test(n)&&(t=NC,a&&(i?Wz(e.dtick)<12:e.dtick<Zz)&&(e.dtick="M12")))}i=r(),i&&e.tick0===e._dowTick0&&(e.tick0=e._rawTick0),e._definedDelta=t}function pat(e,t,r){for(var i=0;i<e.length;i++){var n=e[i].value,a=i,o=i+1;i<e.length-1?(a=i,o=i+1):i>0?(a=i-1,o=i):(a=i,o=i);var s=e[a].value,l=e[o].value,u=Math.abs(l-s),f=r||u,c=0;f>=Zz?u>=Zz&&u<=nat?c=u:c=NC:r===jz&&f>=Kz?u>=Kz&&u<=iat?c=u:c=jz:f>=Jz?u>=Jz&&u<=aat?c=u:c=M2:r===op&&f>=op?c=op:f>=_v?c=_v:r===Ax&&f>=Ax?c=Ax:r===Ng&&f>=Ng&&(c=Ng);var h;c>=u&&(c=u,h=!0);var v=n+c;if(t.rangebreaks&&c>0){for(var d=84,x=0,b=0;b<d;b++){var p=(b+.5)/d;t.maskBreaks(n*(1-p)+p*v)!==GC&&x++}c*=x/d,c||(e[i].drop=!0),h&&u>op&&(c=u)}(c>0||i===0)&&(e[i].periodX=n+c/2)}}Fn.calcTicks=function(t,r){for(var i=t.type,n=t.calendar,a=t.ticklabelstep,o=t.ticklabelmode==="period",s=Da.simpleMap(t.range,t.r2l,void 0,void 0,r),l=s[1]<s[0],u=Math.min(s[0],s[1]),f=Math.max(s[0],s[1]),c=Math.max(1e3,t._length||0),h=[],v=[],d=[],x=[],b=t.minor&&(t.minor.ticks||t.minor.showgrid),p=1;p>=(b?0:1);p--){var w=!p;p?(t._dtickInit=t.dtick,t._tick0Init=t.tick0):(t.minor._dtickInit=t.minor.dtick,t.minor._tick0Init=t.minor.tick0);var A=p?t:Da.extendFlat({},t,t.minor);if(w?Fn.prepMinorTicks(A,t,r):Fn.prepTicks(A,r),A.tickmode==="array"){p?(d=[],h=qie(t,!w)):(x=[],v=qie(t,!w));continue}if(A.tickmode==="sync"){d=[],h=gat(t);continue}var T=aO(s),k=T[0],_=T[1],E=tf(A.dtick),S=i==="log"&&!(E||A.dtick.charAt(0)==="L"),g=Fn.tickFirst(A,r);if(p){if(t._tmin=g,g<k!==l)break;(i==="category"||i==="multicategory")&&(_=l?Math.max(-.5,_):Math.min(t._categories.length-.5,_))}var C=null,M=g,P;if(p){var D;E?D=t.dtick:i==="date"?typeof t.dtick=="string"&&t.dtick.charAt(0)==="M"&&(D=M2*t.dtick.substring(1)):D=t._roughDTick,P=Math.round((t.r2l(M)-t.r2l(t.tick0))/D)-1}var q=A.dtick;for(A.rangebreaks&&A._tick0Init!==A.tick0&&(M=Xz(M,t),l||(M=Fn.tickIncrement(M,q,!l,n))),p&&o&&(M=Fn.tickIncrement(M,q,!l,n),P--);l?M>=_:M<=_;M=Fn.tickIncrement(M,q,l,n)){if(p&&P++,A.rangebreaks&&!l){if(M<k)continue;if(A.maskBreaks(M)===GC&&Xz(M,A)>=f)break}if(d.length>c||M===C)break;C=M;var O={value:M};p?(S&&M!==(M|0)&&(O.simpleLabel=!0),a>1&&P%a&&(O.skipLabel=!0),d.push(O)):(O.minor=!0,x.push(O))}}if(b){var U=t.minor.ticks==="inside"&&t.ticks==="outside"||t.minor.ticks==="outside"&&t.ticks==="inside";if(!U){for(var B=d.map(function(_e){return _e.value}),F=[],N=0;N<x.length;N++){var X=x[N],K=X.value;if(B.indexOf(K)===-1){for(var ne=!1,fe=0;!ne&&fe<d.length;fe++)1e7+d[fe].value===1e7+K&&(ne=!0);ne||F.push(X)}}x=F}}o&&pat(d,t,t._definedDelta);var ue;if(t.rangebreaks){var ee=t._id.charAt(0)==="y",Z=1;t.tickmode==="auto"&&(Z=t.tickfont?t.tickfont.size:12);var oe=NaN;for(ue=d.length-1;ue>-1;ue--){if(d[ue].drop){d.splice(ue,1);continue}d[ue].value=Xz(d[ue].value,t);var ce=t.c2p(d[ue].value);(ee?oe>ce-Z:oe<ce+Z)?d.splice(l?ue+1:ue,1):oe=ce}}lO(t)&&Math.abs(s[1]-s[0])===360&&d.pop(),t._tmax=(d[d.length-1]||{}).value,t._prevDateHead="",t._inCalcTicks=!0;var le,me=function(_e){_e.text="",t._prevDateHead=le};d=d.concat(x);var he,te;for(ue=0;ue<d.length;ue++){var ge=d[ue].minor,ae=d[ue].value;ge?v.push({x:ae,minor:!0}):(le=t._prevDateHead,he=Fn.tickText(t,ae,!1,d[ue].simpleLabel),te=d[ue].periodX,te!==void 0&&(he.periodX=te,(te>f||te<u)&&(te>f&&(he.periodX=f),te<u&&(he.periodX=u),me(he))),d[ue].skipLabel&&me(he),h.push(he))}return h=h.concat(v),t._inCalcTicks=!1,o&&h.length&&(h[0].noTick=!0),h};function Hie(e,t){return e.rangebreaks&&(t=t.filter(function(r){return e.maskBreaks(r.x)!==GC})),t}function gat(e){var t=e._mainAxis,r=[];if(t._vals){for(var i=0;i<t._vals.length;i++)if(!t._vals[i].noTick){var n=t.l2p(t._vals[i].x),a=e.p2l(n),o=Fn.tickText(e,a);t._vals[i].minor&&(o.minor=!0,o.text=""),r.push(o)}}return r=Hie(e,r),r}function qie(e,t){var r=Da.simpleMap(e.range,e.r2l),i=aO(r),n=Math.min(i[0],i[1]),a=Math.max(i[0],i[1]),o=e.type==="category"?e.d2l_noadd:e.d2l;e.type==="log"&&String(e.dtick).charAt(0)!=="L"&&(e.dtick="L"+Math.pow(10,Math.floor(Math.min(e.range[0],e.range[1]))-1));for(var s=[],l=0;l<=1;l++)if(!(t!==void 0&&(t&&l||t===!1&&!l))&&!(l&&!e.minor)){var u=l?e.minor.tickvals:e.tickvals,f=l?[]:e.ticktext;if(u){Da.isArrayOrTypedArray(f)||(f=[]);for(var c=0;c<u.length;c++){var h=o(u[c]);if(h>n&&h<a){var v=Fn.tickText(e,h,!1,String(f[c]));l&&(v.minor=!0,v.text=""),s.push(v)}}}}return s=Hie(e,s),s}var OC=[2,5,10],zie=[1,2,3,6,12],Oie=[1,2,5,10,15,30],yat=[1,2,3,7,14],Gie=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Yie=[-.301,0,.301,.699,1],mat=[15,30,45,90,180];function U0(e,t,r){return t*Da.roundUp(e/t,r)}Fn.autoTicks=function(e,t,r){var i;function n(c){return Math.pow(c,Math.floor(Math.log(t)/Math.LN10))}if(e.type==="date"){e.tick0=Da.dateTick0(e.calendar,0);var a=2*t;if(a>NC)t/=NC,i=n(10),e.dtick="M"+12*U0(t,i,OC);else if(a>M2)t/=M2,e.dtick="M"+U0(t,1,zie);else if(a>_v){if(e.dtick=U0(t,_v,e._hasDayOfWeekBreaks?[1,2,7,14]:yat),!r){var o=Fn.getTickFormat(e),s=e.ticklabelmode==="period";s&&(e._rawTick0=e.tick0),/%[uVW]/.test(o)?e.tick0=Da.dateTick0(e.calendar,2):e.tick0=Da.dateTick0(e.calendar,1),s&&(e._dowTick0=e.tick0)}}else a>Ng?e.dtick=U0(t,Ng,zie):a>UC?e.dtick=U0(t,UC,Oie):a>Qz?e.dtick=U0(t,Qz,Oie):(i=n(10),e.dtick=U0(t,i,OC))}else if(e.type==="log"){e.tick0=0;var l=Da.simpleMap(e.range,e.r2l);if(e._isMinor&&(t*=1.5),t>.7)e.dtick=Math.ceil(t);else if(Math.abs(l[1]-l[0])<1){var u=1.5*Math.abs((l[1]-l[0])/t);t=Math.abs(Math.pow(10,l[1])-Math.pow(10,l[0]))/u,i=n(10),e.dtick="L"+U0(t,i,OC)}else e.dtick=t>.3?"D2":"D1"}else e.type==="category"||e.type==="multicategory"?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):lO(e)?(e.tick0=0,i=1,e.dtick=U0(t,i,mat)):(e.tick0=0,i=n(10),e.dtick=U0(t,i,OC));if(e.dtick===0&&(e.dtick=1),!tf(e.dtick)&&typeof e.dtick!="string"){var f=e.dtick;throw e.dtick=1,"ax.dtick error: "+String(f)}};function Wie(e){var t=e.dtick;if(e._tickexponent=0,!tf(t)&&typeof t!="string"&&(t=1),(e.type==="category"||e.type==="multicategory")&&(e._tickround=null),e.type==="date"){var r=e.r2l(e.tick0),i=e.l2r(r).replace(/(^-|i)/g,""),n=i.length;if(String(t).charAt(0)==="M")n>10||i.substr(5)!=="01-01"?e._tickround="d":e._tickround=+t.substr(1)%12===0?"y":"m";else if(t>=_v&&n<=10||t>=_v*15)e._tickround="d";else if(t>=UC&&n<=16||t>=Ng)e._tickround="M";else if(t>=Qz&&n<=19||t>=UC)e._tickround="S";else{var a=e.l2r(r+t).replace(/^-/,"").length;e._tickround=Math.max(n,a)-20,e._tickround<0&&(e._tickround=4)}}else if(tf(t)||t.charAt(0)==="L"){var o=e.range.map(e.r2d||Number);tf(t)||(t=Number(t.substr(1))),e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var s=Math.max(Math.abs(o[0]),Math.abs(o[1])),l=Math.floor(Math.log(s)/Math.LN10+.01),u=e.minexponent===void 0?3:e.minexponent;Math.abs(l)>u&&(HC(e.exponentformat)&&!oO(l)?e._tickexponent=3*Math.round((l-1)/3):e._tickexponent=l)}else e._tickround=null}Fn.tickIncrement=function(e,t,r,i){var n=r?-1:1;if(tf(t))return Da.increment(e,n*t);var a=t.charAt(0),o=n*Number(t.substr(1));if(a==="M")return Da.incrementMonth(e,o,i);if(a==="L")return Math.log(Math.pow(10,e)+o)/Math.LN10;if(a==="D"){var s=t==="D2"?Yie:Gie,l=e+n*.01,u=Da.roundUp(Da.mod(l,1),s,r);return Math.floor(l)+Math.log(ap.round(Math.pow(10,u),1))/Math.LN10}throw"unrecognized dtick "+String(t)};Fn.tickFirst=function(e,t){var r=e.r2l||Number,i=Da.simpleMap(e.range,r,void 0,void 0,t),n=i[1]<i[0],a=n?Math.floor:Math.ceil,o=aO(i)[0],s=e.dtick,l=r(e.tick0);if(tf(s)){var u=a((o-l)/s)*s+l;return(e.type==="category"||e.type==="multicategory")&&(u=Da.constrain(u,0,e._categories.length-1)),u}var f=s.charAt(0),c=Number(s.substr(1));if(f==="M"){for(var h=0,v=l,d,x,b;h<10;){if(d=Fn.tickIncrement(v,s,n,e.calendar),(d-o)*(v-o)<=0)return n?Math.min(v,d):Math.max(v,d);x=(o-(v+d)/2)/(d-v),b=f+(Math.abs(Math.round(x))||1)*c,v=Fn.tickIncrement(v,b,x<0?!n:n,e.calendar),h++}return Da.error("tickFirst did not converge",e),v}else{if(f==="L")return Math.log(a((Math.pow(10,o)-l)/c)*c+l)/Math.LN10;if(f==="D"){var p=s==="D2"?Yie:Gie,w=Da.roundUp(Da.mod(o,1),p,n);return Math.floor(o)+Math.log(ap.round(Math.pow(10,w),1))/Math.LN10}else throw"unrecognized dtick "+String(s)}};Fn.tickText=function(e,t,r,i){var n=Xie(e,t),a=e.tickmode==="array",o=r||a,s=e.type,l=s==="category"?e.d2l_noadd:e.d2l,u,f=function(b){var p=e.l2p(b);return p>=0&&p<=e._length?b:null};if(a&&Da.isArrayOrTypedArray(e.ticktext)){var c=Da.simpleMap(e.range,e.r2l),h=(Math.abs(c[1]-c[0])-(e._lBreaks||0))/1e4;for(u=0;u<e.ticktext.length&&!(Math.abs(t-l(e.tickvals[u]))<h);u++);if(u<e.ticktext.length)return n.text=String(e.ticktext[u]),n.xbnd=[f(n.x-.5),f(n.x+e.dtick-.5)],n}function v(b){if(b===void 0)return!0;if(r)return b==="none";var p={first:e._tmin,last:e._tmax}[b];return b!=="all"&&t!==p}var d=r?"never":e.exponentformat!=="none"&&v(e.showexponent)?"hide":"";if(s==="date"?xat(e,n,r,o):s==="log"?_at(e,n,r,o,d):s==="category"?bat(e,n):s==="multicategory"?wat(e,n,r):lO(e)?Aat(e,n,r,o,d):Tat(e,n,r,o,d),i||(e.tickprefix&&!v(e.showtickprefix)&&(n.text=e.tickprefix+n.text),e.ticksuffix&&!v(e.showticksuffix)&&(n.text+=e.ticksuffix)),e.labelalias&&e.labelalias.hasOwnProperty(n.text)){var x=e.labelalias[n.text];typeof x=="string"&&(n.text=x)}return(e.tickson==="boundaries"||e.showdividers)&&(n.xbnd=[f(n.x-.5),f(n.x+e.dtick-.5)]),n};Fn.hoverLabelText=function(e,t,r){r&&(e=Da.extendFlat({},e,{hoverformat:r}));var i=Da.isArrayOrTypedArray(t)?t[0]:t,n=Da.isArrayOrTypedArray(t)?t[1]:void 0;if(n!==void 0&&n!==i)return Fn.hoverLabelText(e,i,r)+" - "+Fn.hoverLabelText(e,n,r);var a=e.type==="log"&&i<=0,o=Fn.tickText(e,e.c2l(a?-i:i),"hover").text;return a?i===0?"0":Mx+o:o};function Xie(e,t,r){var i=e.tickfont||{};return{x:t,dx:0,dy:0,text:r||"",fontSize:i.size,font:i.family,fontWeight:i.weight,fontStyle:i.style,fontVariant:i.variant,fontTextcase:i.textcase,fontLineposition:i.lineposition,fontShadow:i.shadow,fontColor:i.color}}function xat(e,t,r,i){var n=e._tickround,a=r&&e.hoverformat||Fn.getTickFormat(e);i=!a&&i,i&&(tf(n)?n=4:n={y:"m",m:"d",d:"M",M:"S",S:4}[n]);var o=Da.formatDate(t.x,a,n,e._dateFormat,e.calendar,e._extraFormat),s,l=o.indexOf(`
`);if(l!==-1&&(s=o.substr(l+1),o=o.substr(0,l)),i&&(s!==void 0&&(o==="00:00:00"||o==="00:00")?(o=s,s=""):o.length===8&&(o=o.replace(/:00$/,""))),s)if(r)n==="d"?o+=", "+s:o=s+(o?", "+o:"");else if(!e._inCalcTicks||e._prevDateHead!==s)e._prevDateHead=s,o+="<br>"+s;else{var u=UA(e),f=e._trueSide||e.side;(!u&&f==="top"||u&&f==="bottom")&&(o+="<br> ")}t.text=o}function _at(e,t,r,i,n){var a=e.dtick,o=t.x,s=e.tickformat,l=typeof a=="string"&&a.charAt(0);if(n==="never"&&(n=""),i&&l!=="L"&&(a="L3",l="L"),s||l==="L")t.text=NA(Math.pow(10,o),e,n,i);else if(tf(a)||l==="D"&&Da.mod(o+.01,1)<.1){var u=Math.round(o),f=Math.abs(u),c=e.exponentformat;c==="power"||HC(c)&&oO(u)?(u===0?t.text=1:u===1?t.text="10":t.text="10<sup>"+(u>1?"":Mx)+f+"</sup>",t.fontSize*=1.25):(c==="e"||c==="E")&&f>2?t.text="1"+c+(u>0?"+":Mx)+f:(t.text=NA(Math.pow(10,o),e,"","fakehover"),a==="D1"&&e._id.charAt(0)==="y"&&(t.dy-=t.fontSize/6))}else if(l==="D")t.text=String(Math.round(Math.pow(10,Da.mod(o,1)))),t.fontSize*=.75;else throw"unrecognized dtick "+String(a);if(e.dtick==="D1"){var h=String(t.text).charAt(0);(h==="0"||h==="1")&&(e._id.charAt(0)==="y"?t.dx-=t.fontSize/4:(t.dy+=t.fontSize/2,t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(o<0?.5:.25)))}}function bat(e,t){var r=e._categories[Math.round(t.x)];r===void 0&&(r=""),t.text=String(r)}function wat(e,t,r){var i=Math.round(t.x),n=e._categories[i]||[],a=n[1]===void 0?"":String(n[1]),o=n[0]===void 0?"":String(n[0]);r?t.text=o+" - "+a:(t.text=a,t.text2=o)}function Tat(e,t,r,i,n){n==="never"?n="":e.showexponent==="all"&&Math.abs(t.x/e.dtick)<1e-6&&(n="hide"),t.text=NA(t.x,e,n,i)}function Aat(e,t,r,i,n){if(e.thetaunit==="radians"&&!r){var a=t.x/180;if(a===0)t.text="0";else{var o=Mat(a);if(o[1]>=100)t.text=NA(Da.deg2rad(t.x),e,n,i);else{var s=t.x<0;o[1]===1?o[0]===1?t.text="\u03C0":t.text=o[0]+"\u03C0":t.text=["<sup>",o[0],"</sup>","\u2044","<sub>",o[1],"</sub>","\u03C0"].join(""),s&&(t.text=Mx+t.text)}}}else t.text=NA(t.x,e,n,i)}function Mat(e){function t(s,l){return Math.abs(s-l)<=1e-6}function r(s,l){return t(l,0)?s:r(l,s%l)}function i(s){for(var l=1;!t(Math.round(s*l)/l,s);)l*=10;return l}var n=i(e),a=e*n,o=Math.abs(r(a,n));return[Math.round(a/o),Math.round(n/o)]}var Sat=["f","p","n","\u03BC","m","","k","M","G","T"];function HC(e){return e==="SI"||e==="B"}function oO(e){return e>14||e<-15}function NA(e,t,r,i){var n=e<0,a=t._tickround,o=r||t.exponentformat||"B",s=t._tickexponent,l=Fn.getTickFormat(t),u=t.separatethousands;if(i){var f={exponentformat:o,minexponent:t.minexponent,dtick:t.showexponent==="none"?t.dtick:tf(e)&&Math.abs(e)||1,range:t.showexponent==="none"?t.range.map(t.r2d):[0,e||1]};Wie(f),a=(Number(f._tickround)||0)+4,s=f._tickexponent,t.hoverformat&&(l=t.hoverformat)}if(l)return t._numFormat(l)(e).replace(/-/g,Mx);var c=Math.pow(10,-a)/2;if(o==="none"&&(s=0),e=Math.abs(e),e<c)e="0",n=!1;else{if(e+=c,s&&(e*=Math.pow(10,-s),a+=s),a===0)e=String(Math.floor(e));else if(a<0){e=String(Math.round(e)),e=e.substr(0,e.length+a);for(var h=a;h<0;h++)e+="0"}else{e=String(e);var v=e.indexOf(".")+1;v&&(e=e.substr(0,v+a).replace(/\.?0+$/,""))}e=Da.numSeparate(e,t._separators,u)}if(s&&o!=="hide"){HC(o)&&oO(s)&&(o="power");var d;s<0?d=Mx+-s:o!=="power"?d="+"+s:d=String(s),o==="e"||o==="E"?e+=o+d:o==="power"?e+="\xD710<sup>"+d+"</sup>":o==="B"&&s===9?e+="B":HC(o)&&(e+=Sat[s/3+5])}return n?Mx+e:e}Fn.getTickFormat=function(e){var t;function r(l){return typeof l!="string"?l:Number(l.replace("M",""))*M2}function i(l,u){var f=["L","D"];if(typeof l==typeof u){if(typeof l=="number")return l-u;var c=f.indexOf(l.charAt(0)),h=f.indexOf(u.charAt(0));return c===h?Number(l.replace(/(L|D)/g,""))-Number(u.replace(/(L|D)/g,"")):c-h}else return typeof l=="number"?1:-1}function n(l,u,f){var c=f||function(d){return d},h=u[0],v=u[1];return(!h&&typeof h!="number"||c(h)<=c(l))&&(!v&&typeof v!="number"||c(v)>=c(l))}function a(l,u){var f=u[0]===null,c=u[1]===null,h=i(l,u[0])>=0,v=i(l,u[1])<=0;return(f||h)&&(c||v)}var o,s;if(e.tickformatstops&&e.tickformatstops.length>0)switch(e.type){case"date":case"linear":{for(t=0;t<e.tickformatstops.length;t++)if(s=e.tickformatstops[t],s.enabled&&n(e.dtick,s.dtickrange,r)){o=s;break}break}case"log":{for(t=0;t<e.tickformatstops.length;t++)if(s=e.tickformatstops[t],s.enabled&&a(e.dtick,s.dtickrange)){o=s;break}break}default:}return o?o.value:e.tickformat};Fn.getSubplots=function(e,t){var r=e._fullLayout._subplots,i=r.cartesian.concat(r.gl2d||[]),n=t?Fn.findSubplotsWithAxis(i,t):i;return n.sort(function(a,o){var s=a.substr(1).split("y"),l=o.substr(1).split("y");return s[0]===l[0]?+s[1]-+l[1]:+s[0]-+l[0]}),n};Fn.findSubplotsWithAxis=function(e,t){for(var r=new RegExp(t._id.charAt(0)==="x"?"^"+t._id+"y":t._id+"$"),i=[],n=0;n<e.length;n++){var a=e[n];r.test(a)&&i.push(a)}return i};Fn.makeClipPaths=function(e){var t=e._fullLayout;if(!t._hasOnlyLargeSploms){var r={_offset:0,_length:t.width,_id:""},i={_offset:0,_length:t.height,_id:""},n=Fn.list(e,"x",!0),a=Fn.list(e,"y",!0),o=[],s,l;for(s=0;s<n.length;s++)for(o.push({x:n[s],y:i}),l=0;l<a.length;l++)s===0&&o.push({x:r,y:a[l]}),o.push({x:n[s],y:a[l]});var u=t._clips.selectAll(".axesclip").data(o,function(f){return f.x._id+f.y._id});u.enter().append("clipPath").classed("axesclip",!0).attr("id",function(f){return"clip"+t._uid+f.x._id+f.y._id}).append("rect"),u.exit().remove(),u.each(function(f){ap.select(this).select("rect").attr({x:f.x._offset||0,y:f.y._offset||0,width:f.x._length||1,height:f.y._length||1})})}};Fn.draw=function(e,t,r){var i=e._fullLayout;t==="redraw"&&i._paper.selectAll("g.subplot").each(function(l){var u=l[0],f=i._plots[u];if(f){var c=f.xaxis,h=f.yaxis;f.xaxislayer.selectAll("."+c._id+"tick").remove(),f.yaxislayer.selectAll("."+h._id+"tick").remove(),f.xaxislayer.selectAll("."+c._id+"tick2").remove(),f.yaxislayer.selectAll("."+h._id+"tick2").remove(),f.xaxislayer.selectAll("."+c._id+"divider").remove(),f.yaxislayer.selectAll("."+h._id+"divider").remove(),f.minorGridlayer&&f.minorGridlayer.selectAll("path").remove(),f.gridlayer&&f.gridlayer.selectAll("path").remove(),f.zerolinelayer&&f.zerolinelayer.selectAll("path").remove(),i._infolayer.select(".g-"+c._id+"title").remove(),i._infolayer.select(".g-"+h._id+"title").remove()}});var n=!t||t==="redraw"?Fn.listIds(e):t,a=Fn.list(e),o=a.filter(function(l){return l.autoshift}).map(function(l){return l.overlaying});n.map(function(l){var u=Fn.getFromId(e,l);if(u.tickmode==="sync"&&u.overlaying){var f=n.findIndex(function(c){return c===u.overlaying});f>=0&&n.unshift(n.splice(f,1).shift())}});var s={false:{left:0,right:0}};return Da.syncOrAsync(n.map(function(l){return function(){if(l){var u=Fn.getFromId(e,l);r||(r={}),r.axShifts=s,r.overlayingShiftedAx=o;var f=Fn.drawOne(e,u,r);return u._shiftPusher&&iO(u,u._fullDepth||0,s,!0),u._r=u.range.slice(),u._rl=Da.simpleMap(u._r,u.r2l),f}}}))};Fn.drawOne=function(e,t,r){r=r||{};var i=r.axShifts||{},n=r.overlayingShiftedAx||[],a,o,s;t.setScale();var l=e._fullLayout,u=t._id,f=u.charAt(0),c=Fn.counterLetter(u),h=l._plots[t._mainSubplot];if(!h)return;if(t._shiftPusher=t.autoshift||n.indexOf(t._id)!==-1||n.indexOf(t.overlaying)!==-1,t._shiftPusher&t.anchor==="free"){var v=t.linewidth/2||0;t.ticks==="inside"&&(v+=t.ticklen),iO(t,v,i,!0),iO(t,t.shift||0,i,!1)}(r.skipTitle!==!0||t._shift===void 0)&&(t._shift=Bat(t,i));var d=h[f+"axislayer"],x=t._mainLinePosition,b=x+=t._shift,p=t._mainMirrorPosition,w=t._vals=Fn.calcTicks(t),A=[t.mirror,b,p].join("_");for(a=0;a<w.length;a++)w[a].axInfo=A;t._selections={},t._tickAngles&&(t._prevTickAngles=t._tickAngles),t._tickAngles={},t._depth=null;var T={};function k(Re){var Ie=u+(Re||"tick");return T[Ie]||(T[Ie]=Lat(t,Ie,b)),T[Ie]}if(t.visible){var _=Fn.makeTransTickFn(t),E=Fn.makeTransTickLabelFn(t),S,g,C=t.ticks==="inside",M=t.ticks==="outside";if(t.tickson==="boundaries"){var P=Eat(t,w);g=Fn.clipEnds(t,P),S=C?g:P}else g=Fn.clipEnds(t,w),S=C&&t.ticklabelmode!=="period"?g:w;var D=t._gridVals=g,q=Cat(t,w);if(!l._hasOnlyLargeSploms){var O=t._subplotsWith,U={};for(a=0;a<O.length;a++){o=O[a],s=l._plots[o];var B=s[c+"axis"],F=B._mainAxis._id;if(!U[F]){U[F]=1;var N=f==="x"?"M0,"+B._offset+"v"+B._length:"M"+B._offset+",0h"+B._length;Fn.drawGrid(e,t,{vals:D,counterAxis:B,layer:s.gridlayer.select("."+u),minorLayer:s.minorGridlayer.select("."+u),path:N,transFn:_}),Fn.drawZeroLine(e,t,{counterAxis:B,layer:s.zerolinelayer,path:N,transFn:_})}}}var X,K=Fn.getTickSigns(t),ne=Fn.getTickSigns(t,"minor");if(t.ticks||t.minor&&t.minor.ticks){var fe=Fn.makeTickPath(t,b,K[2]),ue=Fn.makeTickPath(t,b,ne[2],{minor:!0}),ee,Z,oe,ce;if(t._anchorAxis&&t.mirror&&t.mirror!==!0?(ee=Fn.makeTickPath(t,p,K[3]),Z=Fn.makeTickPath(t,p,ne[3],{minor:!0}),oe=fe+ee,ce=ue+Z):(ee="",Z="",oe=fe,ce=ue),t.showdividers&&M&&t.tickson==="boundaries"){var le={};for(a=0;a<q.length;a++)le[q[a].x]=1;X=function(Re){return le[Re.x]?ee:oe}}else X=function(Re){return Re.minor?ce:oe}}if(Fn.drawTicks(e,t,{vals:S,layer:d,path:X,transFn:_}),t.mirror==="allticks"){var me=Object.keys(t._linepositions||{});for(a=0;a<me.length;a++){o=me[a],s=l._plots[o];var he=t._linepositions[o]||[],te=he[0],ge=he[1],ae=he[2],_e=Fn.makeTickPath(t,te,ae?K[0]:ne[0],{minor:ae})+Fn.makeTickPath(t,ge,ae?K[1]:ne[1],{minor:ae});Fn.drawTicks(e,t,{vals:S,layer:s[f+"axislayer"],path:_e,transFn:_})}}var Ce=[];if(Ce.push(function(){return Fn.drawLabels(e,t,{vals:w,layer:d,plotinfo:s,transFn:E,labelFns:Fn.makeLabelFns(t,b)})}),t.type==="multicategory"){var qe={x:2,y:10}[f];Ce.push(function(){var Re={x:"height",y:"width"}[f],Ie=k()[Re]+qe+(t._tickAngles[u+"tick"]?t.tickfont.size*BA:0);return Fn.drawLabels(e,t,{vals:kat(t,w),layer:d,cls:u+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:_,labelFns:Fn.makeLabelFns(t,b+Ie*K[4])})}),Ce.push(function(){return t._depth=K[4]*(k("tick2")[t.side]-b),Rat(e,t,{vals:q,layer:d,path:Fn.makeTickPath(t,b,K[4],{len:t._depth}),transFn:_})})}else t.title.hasOwnProperty("standoff")&&Ce.push(function(){t._depth=K[4]*(k()[t.side]-b)});var rt=zA.getComponentMethod("rangeslider","isVisible")(t);return!r.skipTitle&&!(rt&&t.side==="bottom")&&Ce.push(function(){return Dat(e,t)}),Ce.push(function(){var Re=t.side.charAt(0),Ie=oat[t.side].charAt(0),ot=Fn.getPxPosition(e,t),lt=M?t.ticklen:0,ht,xt,Vt,Ht;(t.automargin||rt||t._shiftPusher)&&(t.type==="multicategory"?ht=k("tick2"):(ht=k(),f==="x"&&Re==="b"&&(t._depth=Math.max(ht.width>0?ht.bottom-ot:0,lt))));var Me=0,Ke=0;if(t._shiftPusher&&(Me=Math.max(lt,ht.height>0?Re==="l"?ot-ht.left:ht.right-ot:0),t.title.text!==l._dfltTitle[f]&&(Ke=(t._titleStandoff||0)+(t._titleScoot||0),Re==="l"&&(Ke+=Nie(t))),t._fullDepth=Math.max(Me,Ke)),t.automargin){xt={x:0,y:0,r:0,l:0,t:0,b:0};var We=[0,1],et=typeof t._shift=="number"?t._shift:0;if(f==="x"){if(Re==="b"?xt[Re]=t._depth:(xt[Re]=t._depth=Math.max(ht.width>0?ot-ht.top:0,lt),We.reverse()),ht.width>0){var vt=ht.right-(t._offset+t._length);vt>0&&(xt.xr=1,xt.r=vt);var at=t._offset-ht.left;at>0&&(xt.xl=0,xt.l=at)}}else if(Re==="l"?(t._depth=Math.max(ht.height>0?ot-ht.left:0,lt),xt[Re]=t._depth-et):(t._depth=Math.max(ht.height>0?ht.right-ot:0,lt),xt[Re]=t._depth+et,We.reverse()),ht.height>0){var Xe=ht.bottom-(t._offset+t._length);Xe>0&&(xt.yb=0,xt.b=Xe);var dt=t._offset-ht.top;dt>0&&(xt.yt=1,xt.t=dt)}xt[c]=t.anchor==="free"?t.position:t._anchorAxis.domain[We[0]],t.title.text!==l._dfltTitle[f]&&(xt[Re]+=Nie(t)+(t.title.standoff||0)),t.mirror&&t.anchor!=="free"&&(Vt={x:0,y:0,r:0,l:0,t:0,b:0},Vt[Ie]=t.linewidth,t.mirror&&t.mirror!==!0&&(Vt[Ie]+=lt),t.mirror===!0||t.mirror==="ticks"?Vt[c]=t._anchorAxis.domain[We[1]]:(t.mirror==="all"||t.mirror==="allticks")&&(Vt[c]=[t._counterDomainMin,t._counterDomainMax][We[1]]))}rt&&(Ht=zA.getComponentMethod("rangeslider","autoMarginOpts")(e,t)),typeof t.automargin=="string"&&(Bie(xt,t.automargin),Bie(Vt,t.automargin)),T2.autoMargin(e,sO(t),xt),T2.autoMargin(e,jie(t),Vt),T2.autoMargin(e,Kie(t),Ht)}),Da.syncOrAsync(Ce)}};function Bie(e,t){if(e){var r=Object.keys(Rie).reduce(function(i,n){return t.indexOf(n)!==-1&&Rie[n].forEach(function(a){i[a]=1}),i},{});Object.keys(e).forEach(function(i){r[i]||(i.length===1?e[i]=0:delete e[i])})}}function Eat(e,t){var r=[],i,n=function(a,o){var s=a.xbnd[o];s!==null&&r.push(Da.extendFlat({},a,{x:s}))};if(t.length){for(i=0;i<t.length;i++)n(t[i],0);n(t[i-1],1)}return r}function kat(e,t){for(var r=[],i={},n=0;n<t.length;n++){var a=t[n];i[a.text2]?i[a.text2].push(a.x):i[a.text2]=[a.x]}for(var o in i)r.push(Xie(e,Da.interp(i[o],.5),o));return r}function Cat(e,t){var r=[],i,n,a=t.length&&t[t.length-1].x<t[0].x,o=function(l,u){var f=l.xbnd[u];f!==null&&r.push(Da.extendFlat({},l,{x:f}))};if(e.showdividers&&t.length){for(i=0;i<t.length;i++){var s=t[i];s.text2!==n&&o(s,a?1:0),n=s.text2}o(t[i-1],a?0:1)}return r}function Lat(e,t,r){var i,n,a,o;if(e._selections[t].size())i=1/0,n=-1/0,a=1/0,o=-1/0,e._selections[t].each(function(){var l=nO(this),u=Pd.bBox(l.node().parentNode);i=Math.min(i,u.top),n=Math.max(n,u.bottom),a=Math.min(a,u.left),o=Math.max(o,u.right)});else{var s=Fn.makeLabelFns(e,r);i=n=s.yFn({dx:0,dy:0,fontSize:0}),a=o=s.xFn({dx:0,dy:0,fontSize:0})}return{top:i,bottom:n,left:a,right:o,height:n-i,width:o-a}}Fn.getTickSigns=function(e,t){var r=e._id.charAt(0),i={x:"top",y:"right"}[r],n=e.side===i?1:-1,a=[-1,1,n,-n],o=t?(e.minor||{}).ticks:e.ticks;return o!=="inside"==(r==="x")&&(a=a.map(function(s){return-s})),e.side&&a.push({l:-1,t:-1,r:1,b:1}[e.side.charAt(0)]),a};Fn.makeTransTickFn=function(e){return e._id.charAt(0)==="x"?function(t){return A2(e._offset+e.l2p(t.x),0)}:function(t){return A2(0,e._offset+e.l2p(t.x))}};Fn.makeTransTickLabelFn=function(e){var t=Pat(e),r=t[0],i=t[1];return e._id.charAt(0)==="x"?function(n){return A2(r+e._offset+e.l2p(rO(n)),i)}:function(n){return A2(i,r+e._offset+e.l2p(rO(n)))}};function rO(e){return e.periodX!==void 0?e.periodX:e.x}function Pat(e){var t=e.ticklabelposition||"",r=function(v){return t.indexOf(v)!==-1},i=r("top"),n=r("left"),a=r("right"),o=r("bottom"),s=r("inside"),l=o||n||i||a;if(!l&&!s)return[0,0];var u=e.side,f=l?(e.tickwidth||0)/2:0,c=VC,h=e.tickfont?e.tickfont.size:12;return(o||i)&&(f+=h*Sx,c+=(e.linewidth||0)/2),(n||a)&&(f+=(e.linewidth||0)/2,c+=VC),s&&u==="top"&&(c-=h*(1-Sx)),(n||i)&&(f=-f),(u==="bottom"||u==="right")&&(c=-c),[l?f:0,s?c:0]}Fn.makeTickPath=function(e,t,r,i){i||(i={});var n=i.minor;if(n&&!e.minor)return"";var a=i.len!==void 0?i.len:n?e.minor.ticklen:e.ticklen,o=e._id.charAt(0),s=(e.linewidth||1)/2;return o==="x"?"M0,"+(t+s*r)+"v"+a*r:"M"+(t+s*r)+",0h"+a*r};Fn.makeLabelFns=function(e,t,r){var i=e.ticklabelposition||"",n=function(P){return i.indexOf(P)!==-1},a=n("top"),o=n("left"),s=n("right"),l=n("bottom"),u=l||o||a||s,f=n("inside"),c=i==="inside"&&e.ticks==="inside"||!f&&e.ticks==="outside"&&e.tickson!=="boundaries",h=0,v=0,d=c?e.ticklen:0;if(f?d*=-1:u&&(d=0),c&&(h+=d,r)){var x=Da.deg2rad(r);h=d*Math.cos(x)+1,v=d*Math.sin(x)}e.showticklabels&&(c||e.showline)&&(h+=.2*e.tickfont.size),h+=(e.linewidth||1)/2*(f?-1:1);var b={labelStandoff:h,labelShift:v},p,w,A,T,k=0,_=e.side,E=e._id.charAt(0),S=e.tickangle,g;if(E==="x")g=!f&&_==="bottom"||f&&_==="top",T=g?1:-1,f&&(T*=-1),p=v*T,w=t+h*T,A=g?1:-.2,Math.abs(S)===90&&(f?A+=qA:S===-90&&_==="bottom"?A=Sx:S===90&&_==="top"?A=qA:A=.5,k=qA/2*(S/90)),b.xFn=function(P){return P.dx+p+k*P.fontSize},b.yFn=function(P){return P.dy+w+P.fontSize*A},b.anchorFn=function(P,D){if(u){if(o)return"end";if(s)return"start"}return!tf(D)||D===0||D===180?"middle":D*T<0!==f?"end":"start"},b.heightFn=function(P,D,q){return D<-60||D>60?-.5*q:e.side==="top"!==f?-q:0};else if(E==="y"){if(g=!f&&_==="left"||f&&_==="right",T=g?1:-1,f&&(T*=-1),p=h,w=v*T,A=0,!f&&Math.abs(S)===90&&(S===-90&&_==="left"||S===90&&_==="right"?A=Sx:A=.5),f){var C=tf(S)?+S:0;if(C!==0){var M=Da.deg2rad(C);k=Math.abs(Math.sin(M))*Sx*T,A=0}}b.xFn=function(P){return P.dx+t-(p+P.fontSize*A)*T+k*P.fontSize},b.yFn=function(P){return P.dy+w+P.fontSize*qA},b.anchorFn=function(P,D){return tf(D)&&Math.abs(D)===90?"middle":g?"end":"start"},b.heightFn=function(P,D,q){return e.side==="right"&&(D*=-1),D<-30?-q:D<30?-.5*q:0}}return b};function WC(e){return[e.text,e.x,e.axInfo,e.font,e.fontSize,e.fontColor].join("_")}Fn.drawTicks=function(e,t,r){r=r||{};var i=t._id+"tick",n=[].concat(t.minor&&t.minor.ticks?r.vals.filter(function(o){return o.minor&&!o.noTick}):[]).concat(t.ticks?r.vals.filter(function(o){return!o.minor&&!o.noTick}):[]),a=r.layer.selectAll("path."+i).data(n,WC);a.exit().remove(),a.enter().append("path").classed(i,1).classed("ticks",1).classed("crisp",r.crisp!==!1).each(function(o){return OA.stroke(ap.select(this),o.minor?t.minor.tickcolor:t.tickcolor)}).style("stroke-width",function(o){return Pd.crispRound(e,o.minor?t.minor.tickwidth:t.tickwidth,1)+"px"}).attr("d",r.path).style("display",null),XC(t,[Uie]),a.attr("transform",r.transFn)};Fn.drawGrid=function(e,t,r){if(r=r||{},t.tickmode!=="sync"){var i=t._id+"grid",n=t.minor&&t.minor.showgrid,a=n?r.vals.filter(function(p){return p.minor}):[],o=t.showgrid?r.vals.filter(function(p){return!p.minor}):[],s=r.counterAxis;if(s&&Fn.shouldShowZeroLine(e,t,s))for(var l=t.tickmode==="array",u=0;u<o.length;u++){var f=o[u].x;if(l?!f:Math.abs(f)<t.dtick/100)if(o=o.slice(0,u).concat(o.slice(u+1)),l)u--;else break}t._gw=Pd.crispRound(e,t.gridwidth,1);for(var c=n?Pd.crispRound(e,t.minor.gridwidth,1):0,h=r.layer,v=r.minorLayer,d=1;d>=0;d--){var x=d?h:v;if(x){var b=x.selectAll("path."+i).data(d?o:a,WC);b.exit().remove(),b.enter().append("path").classed(i,1).classed("crisp",r.crisp!==!1),b.attr("transform",r.transFn).attr("d",r.path).each(function(p){return OA.stroke(ap.select(this),p.minor?t.minor.gridcolor:t.gridcolor||"#ddd")}).style("stroke-dasharray",function(p){return Pd.dashStyle(p.minor?t.minor.griddash:t.griddash,p.minor?t.minor.gridwidth:t.gridwidth)}).style("stroke-width",function(p){return(p.minor?c:t._gw)+"px"}).style("display",null),typeof r.path=="function"&&b.attr("d",r.path)}}XC(t,[eO,tO])}};Fn.drawZeroLine=function(e,t,r){r=r||r;var i=t._id+"zl",n=Fn.shouldShowZeroLine(e,t,r.counterAxis),a=r.layer.selectAll("path."+i).data(n?[{x:0,id:t._id}]:[]);a.exit().remove(),a.enter().append("path").classed(i,1).classed("zl",1).classed("crisp",r.crisp!==!1).each(function(){r.layer.selectAll("path").sort(function(o,s){return lat(o.id,s.id)})}),a.attr("transform",r.transFn).attr("d",r.path).call(OA.stroke,t.zerolinecolor||OA.defaultLine).style("stroke-width",Pd.crispRound(e,t.zerolinewidth,t._gw||1)+"px").style("display",null),XC(t,[$z])};Fn.drawLabels=function(e,t,r){r=r||{};var i=e._fullLayout,n=t._id,a=r.cls||n+"tick",o=r.vals.filter(function(F){return F.text}),s=r.labelFns,l=r.secondary?0:t.tickangle,u=(t._prevTickAngles||{})[a],f=r.layer.selectAll("g."+a).data(t.showticklabels?o:[],WC),c=[];f.enter().append("g").classed(a,1).append("text").attr("text-anchor","middle").each(function(F){var N=ap.select(this),X=e._promises.length;N.call(Tx.positionText,s.xFn(F),s.yFn(F)).call(Pd.font,{family:F.font,size:F.fontSize,color:F.fontColor,weight:F.fontWeight,style:F.fontStyle,variant:F.fontVariant,textcase:F.fontTextcase,lineposition:F.fontLineposition,shadow:F.fontShadow}).text(F.text).call(Tx.convertToTspans,e),e._promises[X]?c.push(e._promises.pop().then(function(){h(N,l)})):h(N,l)}),XC(t,[Pie]),f.exit().remove(),r.repositionOnUpdate&&f.each(function(F){ap.select(this).select("text").call(Tx.positionText,s.xFn(F),s.yFn(F))});function h(F,N){F.each(function(X){var K=ap.select(this),ne=K.select(".text-math-group"),fe=s.anchorFn(X,N),ue=r.transFn.call(K.node(),X)+(tf(N)&&+N!=0?" rotate("+N+","+s.xFn(X)+","+(s.yFn(X)-X.fontSize/2)+")":""),ee=Tx.lineCount(K),Z=BA*X.fontSize,oe=s.heightFn(X,tf(N)?+N:0,(ee-1)*Z);if(oe&&(ue+=A2(0,oe)),ne.empty()){var ce=K.select("text");ce.attr({transform:ue,"text-anchor":fe}),ce.style("opacity",1),t._adjustTickLabelsOverflow&&t._adjustTickLabelsOverflow()}else{var le=Pd.bBox(ne.node()).width,me=le*{end:-.5,start:.5}[fe];ne.attr("transform",ue+A2(me,0))}})}t._adjustTickLabelsOverflow=function(){var F=t.ticklabeloverflow;if(!(!F||F==="allow")){var N=F.indexOf("hide")!==-1,X=t._id.charAt(0)==="x",K=0,ne=X?e._fullLayout.width:e._fullLayout.height;if(F.indexOf("domain")!==-1){var fe=Da.simpleMap(t.range,t.r2l);K=t.l2p(fe[0])+t._offset,ne=t.l2p(fe[1])+t._offset}var ue=Math.min(K,ne),ee=Math.max(K,ne),Z=t.side,oe=1/0,ce=-1/0;f.each(function(te){var ge=ap.select(this),ae=ge.select(".text-math-group");if(ae.empty()){var _e=Pd.bBox(ge.node()),Ce=0;X?(_e.right>ee||_e.left<ue)&&(Ce=1):(_e.bottom>ee||_e.top+(t.tickangle?0:te.fontSize/4)<ue)&&(Ce=1);var qe=ge.select("text");Ce?N&&qe.style("opacity",0):(qe.style("opacity",1),Z==="bottom"||Z==="right"?oe=Math.min(oe,X?_e.top:_e.left):oe=-1/0,Z==="top"||Z==="left"?ce=Math.max(ce,X?_e.bottom:_e.right):ce=1/0)}});for(var le in i._plots){var me=i._plots[le];if(!(t._id!==me.xaxis._id&&t._id!==me.yaxis._id)){var he=X?me.yaxis:me.xaxis;he&&(he["_visibleLabelMin_"+t._id]=oe,he["_visibleLabelMax_"+t._id]=ce)}}}},t._hideCounterAxisInsideTickLabels=function(F){var N=t._id.charAt(0)==="x",X=[];for(var K in i._plots){var ne=i._plots[K];t._id!==ne.xaxis._id&&t._id!==ne.yaxis._id||X.push(N?ne.yaxis:ne.xaxis)}X.forEach(function(fe,ue){fe&&UA(fe)&&(F||[$z,tO,eO,Uie,Pie]).forEach(function(ee){var Z=ee.K==="tick"&&ee.L==="text"&&t.ticklabelmode==="period",oe=i._plots[t._mainSubplot],ce;ee.K===$z.K?ce=oe.zerolinelayer.selectAll("."+t._id+"zl"):ee.K===tO.K?ce=oe.minorGridlayer.selectAll("."+t._id):ee.K===eO.K?ce=oe.gridlayer.selectAll("."+t._id):ce=oe[t._id.charAt(0)+"axislayer"],ce.each(function(){var le=ap.select(this);ee.L&&(le=le.selectAll(ee.L)),le.each(function(me){var he=t.l2p(Z?rO(me):me.x)+t._offset,te=ap.select(this);he<t["_visibleLabelMax_"+fe._id]&&he>t["_visibleLabelMin_"+fe._id]?te.style("display","none"):ee.K==="tick"&&!ue&&te.style("display",null)})})})})},h(f,u+1?u:l);function v(){return c.length&&Promise.all(c)}var d=null;function x(){if(h(f,l),o.length&&t.autotickangles&&(t.type!=="log"||String(t.dtick).charAt(0)!=="D")){d=t.autotickangles[0];var F=0,N=[],X,K=1;f.each(function(ht){F=Math.max(F,ht.fontSize);var xt=t.l2p(ht.x),Vt=nO(this),Ht=Pd.bBox(Vt.node());K=Math.max(K,Tx.lineCount(Vt)),N.push({top:0,bottom:10,height:10,left:xt-Ht.width/2,right:xt+Ht.width/2+2,width:Ht.width+2})});var ne=(t.tickson==="boundaries"||t.showdividers)&&!r.secondary,fe=o.length,ue=Math.abs((o[fe-1].x-o[0].x)*t._m)/(fe-1),ee=ne?ue/2:ue,Z=ne?t.ticklen:F*1.25*K,oe=Math.sqrt(Math.pow(ee,2)+Math.pow(Z,2)),ce=ee/oe,le=t.autotickangles.map(function(ht){return ht*Math.PI/180}),me=le.find(function(ht){return Math.abs(Math.cos(ht))<=ce});me===void 0&&(me=le.reduce(function(ht,xt){return Math.abs(Math.cos(ht))<Math.abs(Math.cos(xt))?ht:xt},le[0]));var he=me*(180/Math.PI);if(ne){var te=2;for(t.ticks&&(te+=t.tickwidth/2),X=0;X<N.length;X++){var ge=o[X].xbnd,ae=N[X];if(ge[0]!==null&&ae.left-t.l2p(ge[0])<te||ge[1]!==null&&t.l2p(ge[1])-ae.right<te){d=he;break}}}else{var _e=t.ticklabelposition||"",Ce=function(ht){return _e.indexOf(ht)!==-1},qe=Ce("top"),rt=Ce("left"),Re=Ce("right"),Ie=Ce("bottom"),ot=Ie||rt||qe||Re,lt=ot?(t.tickwidth||0)+2*VC:0;for(X=0;X<N.length-1;X++)if(Da.bBoxIntersect(N[X],N[X+1],lt)){d=he;break}}d&&h(f,d)}}t._selections&&(t._selections[a]=f);var b=[v];t.automargin&&i._redrawFromAutoMarginCount&&u===90?(d=u,b.push(function(){h(f,u)})):b.push(x),t._tickAngles&&b.push(function(){t._tickAngles[a]=d===null?tf(l)?l:0:d});var p=function(){var F=0,N=0;return f.each(function(X,K){var ne=nO(this),fe=ne.select(".text-math-group");if(fe.empty()){var ue;t._vals[K]&&(ue=t._vals[K].bb||Pd.bBox(ne.node()),t._vals[K].bb=ue),F=Math.max(F,ue.width),N=Math.max(N,ue.height)}}),{labelsMaxW:F,labelsMaxH:N}},w=t._anchorAxis;if(w&&(w.autorange||w.insiderange)&&UA(t)&&!uat(i,t._id)&&(i._insideTickLabelsUpdaterange||(i._insideTickLabelsUpdaterange={}),w.autorange&&(i._insideTickLabelsUpdaterange[w._name+".autorange"]=w.autorange,b.push(p)),w.insiderange)){var A=p(),T=t._id.charAt(0)==="y"?A.labelsMaxW:A.labelsMaxH;T+=2*VC,t.ticklabelposition==="inside"&&(T+=t.ticklen||0);var k=t.side==="right"||t.side==="top"?1:-1,_=k===1?1:0,E=k===1?0:1,S=[];S[E]=w.range[E];var g=w.range,C=w.r2p(g[_]),M=w.r2p(g[E]),P=i._insideTickLabelsUpdaterange[w._name+".range"];if(P){var D=w.r2p(P[_]),q=w.r2p(P[E]),O=k*(t._id.charAt(0)==="y"?1:-1);O*C<O*D&&(C=D,S[_]=g[_]=P[_]),O*M>O*q&&(M=q,S[E]=g[E]=P[E])}var U=Math.abs(M-C);U-T>0?(U-=T,T*=1+T/U):T=0,t._id.charAt(0)!=="y"&&(T=-T),S[_]=w.p2r(w.r2p(g[_])+k*T),w.autorange==="min"||w.autorange==="max reversed"?(S[0]=null,w._rangeInitial0=void 0,w._rangeInitial1=void 0):(w.autorange==="max"||w.autorange==="min reversed")&&(S[1]=null,w._rangeInitial0=void 0,w._rangeInitial1=void 0),i._insideTickLabelsUpdaterange[w._name+".range"]=S}var B=Da.syncOrAsync(b);return B&&B.then&&e._promises.push(B),B};function Rat(e,t,r){var i=t._id+"divider",n=r.vals,a=r.layer.selectAll("path."+i).data(n,WC);a.exit().remove(),a.enter().insert("path",":first-child").classed(i,1).classed("crisp",1).call(OA.stroke,t.dividercolor).style("stroke-width",Pd.crispRound(e,t.dividerwidth,1)+"px"),a.attr("transform",r.transFn).attr("d",r.path)}Fn.getPxPosition=function(e,t){var r=e._fullLayout._size,i=t._id.charAt(0),n=t.side,a;if(t.anchor!=="free"?a=t._anchorAxis:i==="x"?a={_offset:r.t+(1-(t.position||0))*r.h,_length:0}:i==="y"&&(a={_offset:r.l+(t.position||0)*r.w+t._shift,_length:0}),n==="top"||n==="left")return a._offset;if(n==="bottom"||n==="right")return a._offset+a._length};function Nie(e){var t=e.title.font.size,r=(e.title.text.match(Tx.BR_TAG_ALL)||[]).length;return e.title.hasOwnProperty("standoff")?t*(Sx+r*BA):r?t*(r+1)*BA:t}function Dat(e,t){var r=e._fullLayout,i=t._id,n=i.charAt(0),a=t.title.font.size,o,s=(t.title.text.match(Tx.BR_TAG_ALL)||[]).length;if(t.title.hasOwnProperty("standoff"))t.side==="bottom"||t.side==="right"?o=t._depth+t.title.standoff+a*Sx:(t.side==="top"||t.side==="left")&&(o=t._depth+t.title.standoff+a*(qA+s*BA));else{var l=UA(t);if(t.type==="multicategory")o=t._depth;else{var u=1.5*a;l&&(u=.5*a,t.ticks==="outside"&&(u+=t.ticklen)),o=10+u+(t.linewidth?t.linewidth-1:0)}l||(n==="x"?o+=t.side==="top"?a*(t.showticklabels?1:0):a*(t.showticklabels?1.5:.5):o+=t.side==="right"?a*(t.showticklabels?1:.5):a*(t.showticklabels?.5:0))}var f=Fn.getPxPosition(e,t),c,h,v;n==="x"?(h=t._offset+t._length/2,v=t.side==="top"?f-o:f+o):(v=t._offset+t._length/2,h=t.side==="right"?f+o:f-o,c={rotate:"-90",offset:0});var d;if(t.type!=="multicategory"){var x=t._selections[t._id+"tick"];if(d={selection:x,side:t.side},x&&x.node()&&x.node().parentNode){var b=Pd.getTranslate(x.node().parentNode);d.offsetLeft=b.x,d.offsetTop=b.y}t.title.hasOwnProperty("standoff")&&(d.pad=0)}return t._titleStandoff=o,tat.draw(e,i+"title",{propContainer:t,propName:t._name+".title.text",placeholder:r._dfltTitle[n],avoid:d,transform:c,attributes:{x:h,y:v,"text-anchor":"middle"}})}Fn.shouldShowZeroLine=function(e,t,r){var i=Da.simpleMap(t.range,t.r2l);return i[0]*i[1]<=0&&t.zeroline&&(t.type==="linear"||t.type==="-")&&!(t.rangebreaks&&t.maskBreaks(0)===GC)&&(Zie(t,0)||!Iat(e,t,r,i)||Fat(e,t))};Fn.clipEnds=function(e,t){return t.filter(function(r){return Zie(e,r.x)})};function Zie(e,t){var r=e.l2p(t);return r>1&&r<e._length-1}function Iat(e,t,r,i){var n=r._mainAxis;if(!n)return;var a=e._fullLayout,o=t._id.charAt(0),s=Fn.counterLetter(t._id),l=t._offset+(Math.abs(i[0])<Math.abs(i[1])==(o==="x")?0:t._length);function u(d){if(!d.showline||!d.linewidth)return!1;var x=Math.max((d.linewidth+t.zerolinewidth)/2,1);function b(A){return typeof A=="number"&&Math.abs(A-l)<x}if(b(d._mainLinePosition)||b(d._mainMirrorPosition))return!0;var p=d._linepositions||{};for(var w in p)if(b(p[w][0])||b(p[w][1]))return!0}var f=a._plots[r._mainSubplot];if(!(f.mainplotinfo||f).overlays.length)return u(r,l);for(var c=Fn.list(e,s),h=0;h<c.length;h++){var v=c[h];if(v._mainAxis===n&&u(v,l))return!0}}function Fat(e,t){for(var r=e._fullData,i=t._mainSubplot,n=t._id.charAt(0),a=0;a<r.length;a++){var o=r[a];if(o.visible===!0&&o.xaxis+o.yaxis===i&&(zA.traceIs(o,"bar-like")&&o.orientation==={x:"h",y:"v"}[n]||o.fill&&o.fill.charAt(o.fill.length-1)===n))return!0}return!1}function nO(e){var t=ap.select(e),r=t.select(".text-math-group");return r.empty()?t.select("text"):r}Fn.allowAutoMargin=function(e){for(var t=Fn.list(e,"",!0),r=0;r<t.length;r++){var i=t[r];i.automargin&&(T2.allowAutoMargin(e,sO(i)),i.mirror&&T2.allowAutoMargin(e,jie(i))),zA.getComponentMethod("rangeslider","isVisible")(i)&&T2.allowAutoMargin(e,Kie(i))}};function sO(e){return e._id+".automargin"}function jie(e){return sO(e)+".mirror"}function Kie(e){return e._id+".rangeslider"}Fn.swap=function(e,t){for(var r=qat(e,t),i=0;i<r.length;i++)zat(e,r[i].x,r[i].y)};function qat(e,t){var r=[],i,n;for(i=0;i<t.length;i++){var a=[],o=e._fullData[t[i]].xaxis,s=e._fullData[t[i]].yaxis;if(!(!o||!s)){for(n=0;n<r.length;n++)(r[n].x.indexOf(o)!==-1||r[n].y.indexOf(s)!==-1)&&a.push(n);if(!a.length){r.push({x:[o],y:[s]});continue}var l=r[a[0]],u;if(a.length>1)for(n=1;n<a.length;n++)u=r[a[n]],BC(l.x,u.x),BC(l.y,u.y);BC(l.x,[o]),BC(l.y,[s])}}return r}function BC(e,t){for(var r=0;r<t.length;r++)e.indexOf(t[r])===-1&&e.push(t[r])}function zat(e,t,r){var i=[],n=[],a=e.layout,o,s;for(o=0;o<t.length;o++)i.push(Fn.getFromId(e,t[o]));for(o=0;o<r.length;o++)n.push(Fn.getFromId(e,r[o]));var l=Object.keys(rat),u=["anchor","domain","overlaying","position","side","tickangle","editType"],f=["linear","log"];for(o=0;o<l.length;o++){var c=l[o],h=i[0][c],v=n[0][c],d=!0,x=!1,b=!1;if(!(c.charAt(0)==="_"||typeof h=="function"||u.indexOf(c)!==-1)){for(s=1;s<i.length&&d;s++){var p=i[s][c];c==="type"&&f.indexOf(h)!==-1&&f.indexOf(p)!==-1&&h!==p?x=!0:p!==h&&(d=!1)}for(s=1;s<n.length&&d;s++){var w=n[s][c];c==="type"&&f.indexOf(v)!==-1&&f.indexOf(w)!==-1&&v!==w?b=!0:n[s][c]!==v&&(d=!1)}d&&(x&&(a[i[0]._name].type="linear"),b&&(a[n[0]._name].type="linear"),Oat(a,c,i,n,e._fullLayout._dfltTitle))}}for(o=0;o<e._fullLayout.annotations.length;o++){var A=e._fullLayout.annotations[o];t.indexOf(A.xref)!==-1&&r.indexOf(A.yref)!==-1&&Da.swapAttrs(a.annotations[o],["?"])}}function Oat(e,t,r,i,n){var a=Da.nestedProperty,o=a(e[r[0]._name],t).get(),s=a(e[i[0]._name],t).get(),l;for(t==="title"&&(o&&o.text===n.x&&(o.text=n.y),s&&s.text===n.y&&(s.text=n.x)),l=0;l<r.length;l++)a(e,r[l]._name+"."+t).set(s);for(l=0;l<i.length;l++)a(e,i[l]._name+"."+t).set(o)}function lO(e){return e._id==="angularaxis"}function Xz(e,t){for(var r=t._rangebreaks.length,i=0;i<r;i++){var n=t._rangebreaks[i];if(e>=n.min&&e<n.max)return n.max}return e}function UA(e){return(e.ticklabelposition||"").indexOf("inside")!==-1}function XC(e,t){UA(e._anchorAxis||{})&&e._hideCounterAxisInsideTickLabels&&e._hideCounterAxisInsideTickLabels(t)}function iO(e,t,r,i){var n=e.anchor!=="free"&&(e.overlaying===void 0||e.overlaying===!1)?e._id:e.overlaying,a;i?a=e.side==="right"?t:-t:a=t,n in r||(r[n]={}),e.side in r[n]||(r[n][e.side]=0),r[n][e.side]+=a}function Bat(e,t){return e.autoshift?t[e.overlaying][e.side]:e.shift||0}});var uO=ie((Utr,Qie)=>{"use strict";Qie.exports=function(t,r,i){var n,a;if(i){var o=r==="reversed"||r==="min reversed"||r==="max reversed";n=i[o?1:0],a=i[o?0:1]}var s=t("autorangeoptions.minallowed",a===null?n:void 0),l=t("autorangeoptions.maxallowed",n===null?a:void 0);s===void 0&&t("autorangeoptions.clipmin"),l===void 0&&t("autorangeoptions.clipmax"),t("autorangeoptions.include")}});var fO=ie((Vtr,$ie)=>{"use strict";var Nat=uO();$ie.exports=function(t,r,i,n){var a=r._template||{},o=r.type||a.type||"-";i("minallowed"),i("maxallowed");var s=i("range");if(!s){var l;!n.noInsiderange&&o!=="log"&&(l=i("insiderange"),l&&(l[0]===null||l[1]===null)&&(r.insiderange=!1,l=void 0),l&&(s=i("range",l)))}var u=r.getAutorangeDflt(s,n),f=i("autorange",u),c;s&&(s[0]===null&&s[1]===null||(s[0]===null||s[1]===null)&&(f==="reversed"||f===!0)||s[0]!==null&&(f==="min"||f==="max reversed")||s[1]!==null&&(f==="max"||f==="min reversed"))&&(s=void 0,delete r.range,r.autorange=!0,c=!0),c||(u=r.getAutorangeDflt(s,n),f=i("autorange",u)),f&&(Nat(i,f,s),(o==="linear"||o==="-")&&i("rangemode")),r.cleanRange()}});var cO=ie((Htr,eae)=>{var Uat={left:0,top:0};eae.exports=Vat;function Vat(e,t,r){t=t||e.currentTarget||e.srcElement,Array.isArray(r)||(r=[0,0]);var i=e.clientX||0,n=e.clientY||0,a=Hat(t);return r[0]=i-a.left,r[1]=n-a.top,r}function Hat(e){return e===window||e===document||e===document.body?Uat:e.getBoundingClientRect()}});var VA=ie((Gtr,tae)=>{"use strict";var Gat=Uq();function Yat(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(r){e=!1}return e}tae.exports=Gat&&Yat()});var nae=ie((Ytr,rae)=>{"use strict";rae.exports=function(t,r,i,n,a){var o=(t-i)/(n-i),s=o+r/(n-i),l=(o+s)/2;return a==="left"||a==="bottom"?o:a==="center"||a==="middle"?l:a==="right"||a==="top"?s:o<2/3-l?o:s>4/3-l?s:l}});var oae=ie((Wtr,aae)=>{"use strict";var iae=Zt(),Wat=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];aae.exports=function(t,r,i,n){return i==="left"?t=0:i==="center"?t=1:i==="right"?t=2:t=iae.constrain(Math.floor(t*3),0,2),n==="bottom"?r=0:n==="middle"?r=1:n==="top"?r=2:r=iae.constrain(Math.floor(r*3),0,2),Wat[r][t]}});var lae=ie((Xtr,sae)=>{"use strict";var Xat=c2(),Zat=nC(),jat=dA().getGraphDiv,Kat=hA(),hO=sae.exports={};hO.wrapped=function(e,t,r){e=jat(e),e._fullLayout&&Zat.clear(e._fullLayout._uid+Kat.HOVERID),hO.raw(e,t,r)};hO.raw=function(t,r){var i=t._fullLayout,n=t._hoverdata;r||(r={}),!(r.target&&!t._dragged&&Xat.triggerHandler(t,"plotly_beforehover",r)===!1)&&(i._hoverlayer.selectAll("g").remove(),i._hoverlayer.selectAll("line").remove(),i._hoverlayer.selectAll("circle").remove(),t._hoverdata=void 0,r.target&&n&&t.emit("plotly_unhover",{event:r,points:n}))}});var Yh=ie((Ztr,cae)=>{"use strict";var Jat=cO(),vO=Hq(),Qat=VA(),$at=Zt().removeElement,eot=Af(),Ex=cae.exports={};Ex.align=nae();Ex.getCursor=oae();var uae=lae();Ex.unhover=uae.wrapped;Ex.unhoverRaw=uae.raw;Ex.init=function(t){var r=t.gd,i=1,n=r._context.doubleClickDelay,a=t.element,o,s,l,u,f,c,h,v;r._mouseDownTime||(r._mouseDownTime=0),a.style.pointerEvents="all",a.onmousedown=b,Qat?(a._ontouchstart&&a.removeEventListener("touchstart",a._ontouchstart),a._ontouchstart=b,a.addEventListener("touchstart",b,{passive:!1})):a.ontouchstart=b;function d(A,T,k){return Math.abs(A)<k&&(A=0),Math.abs(T)<k&&(T=0),[A,T]}var x=t.clampFn||d;function b(A){r._dragged=!1,r._dragging=!0;var T=dO(A);o=T[0],s=T[1],h=A.target,c=A,v=A.buttons===2||A.ctrlKey,typeof A.clientX=="undefined"&&typeof A.clientY=="undefined"&&(A.clientX=o,A.clientY=s),l=new Date().getTime(),l-r._mouseDownTime<n?i+=1:(i=1,r._mouseDownTime=l),t.prepFn&&t.prepFn(A,o,s),vO&&!v?(f=fae(),f.style.cursor=window.getComputedStyle(a).cursor):vO||(f=document,u=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(a).cursor),document.addEventListener("mouseup",w),document.addEventListener("touchend",w),t.dragmode!==!1&&(A.preventDefault(),document.addEventListener("mousemove",p),document.addEventListener("touchmove",p,{passive:!1}))}function p(A){A.preventDefault();var T=dO(A),k=t.minDrag||eot.MINDRAG,_=x(T[0]-o,T[1]-s,k),E=_[0],S=_[1];(E||S)&&(r._dragged=!0,Ex.unhover(r,A)),r._dragged&&t.moveFn&&!v&&(r._dragdata={element:a,dx:E,dy:S},t.moveFn(E,S))}function w(A){if(delete r._dragdata,t.dragmode!==!1&&(A.preventDefault(),document.removeEventListener("mousemove",p),document.removeEventListener("touchmove",p)),document.removeEventListener("mouseup",w),document.removeEventListener("touchend",w),vO?$at(f):u&&(f.documentElement.style.cursor=u,u=null),!r._dragging){r._dragged=!1;return}if(r._dragging=!1,new Date().getTime()-r._mouseDownTime>n&&(i=Math.max(i-1,1)),r._dragged)t.doneFn&&t.doneFn();else if(t.clickFn&&t.clickFn(i,c),!v){var T;try{T=new MouseEvent("click",A)}catch(_){var k=dO(A);T=document.createEvent("MouseEvents"),T.initMouseEvent("click",A.bubbles,A.cancelable,A.view,A.detail,A.screenX,A.screenY,k[0],k[1],A.ctrlKey,A.altKey,A.shiftKey,A.metaKey,A.button,A.relatedTarget)}h.dispatchEvent(T)}r._dragging=!1,r._dragged=!1}};function fae(){var e=document.createElement("div");e.className="dragcover";var t=e.style;return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t.zIndex=999999999,t.background="none",document.body.appendChild(e),e}Ex.coverSlip=fae;function dO(e){return Jat(e.changedTouches?e.changedTouches[0]:e,document.body)}});var t0=ie((jtr,hae)=>{"use strict";hae.exports=function(t,r){(t.attr("class")||"").split(" ").forEach(function(i){i.indexOf("cursor-")===0&&t.classed(i,!1)}),r&&t.classed("cursor-"+r,!0)}});var pae=ie((Ktr,dae)=>{"use strict";var pO=t0(),HA="data-savedcursor",vae="!!";dae.exports=function(t,r){var i=t.attr(HA);if(r){if(!i){for(var n=(t.attr("class")||"").split(" "),a=0;a<n.length;a++){var o=n[a];o.indexOf("cursor-")===0&&t.attr(HA,o.substr(7)).classed(o,!1)}t.attr(HA)||t.attr(HA,vae)}pO(t,r)}else i&&(t.attr(HA,null),i===vae?pO(t):pO(t,i))}});var yO=ie((Jtr,gae)=>{"use strict";var gO=Xs(),tot=Qu();gae.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:tot.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:gO({editType:"legend"}),grouptitlefont:gO({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:gO({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}});var jC=ie(ZC=>{"use strict";ZC.isGrouped=function(t){return(t.traceorder||"").indexOf("grouped")!==-1};ZC.isVertical=function(t){return t.orientation!=="h"};ZC.isReversed=function(t){return(t.traceorder||"").indexOf("reversed")!==-1}});var _O=ie(($tr,yae)=>{"use strict";var mO=Ti(),Rd=Zt(),rot=ko(),not=rs(),iot=yO(),aot=ox(),xO=jC();function oot(e,t,r,i){var n=t[e]||{},a=rot.newContainer(r,e);function o(B,F){return Rd.coerce(n,a,iot,B,F)}var s=Rd.coerceFont(o,"font",r.font);o("bgcolor",r.paper_bgcolor),o("bordercolor");var l=o("visible");if(l){for(var u,f=function(B,F){var N=u._input,X=u;return Rd.coerce(N,X,not,B,F)},c=r.font||{},h=Rd.coerceFont(o,"grouptitlefont",c,{overrideDflt:{size:Math.round(c.size*1.1)}}),v=0,d=!1,x="normal",b=(r.shapes||[]).filter(function(B){return B.showlegend}),p=i.concat(b).filter(function(B){return e===(B.legend||"legend")}),w=0;w<p.length;w++)if(u=p[w],!!u.visible){var A=u._isShape;(u.showlegend||u._dfltShowLegend&&!(u._module&&u._module.attributes&&u._module.attributes.showlegend&&u._module.attributes.showlegend.dflt===!1))&&(v++,u.showlegend&&(d=!0,(!A&&mO.traceIs(u,"pie-like")||u._input.showlegend===!0)&&v++),Rd.coerceFont(f,"legendgrouptitle.font",h)),(!A&&mO.traceIs(u,"bar")&&r.barmode==="stack"||["tonextx","tonexty"].indexOf(u.fill)!==-1)&&(x=xO.isGrouped({traceorder:x})?"grouped+reversed":"reversed"),u.legendgroup!==void 0&&u.legendgroup!==""&&(x=xO.isReversed({traceorder:x})?"reversed+grouped":"grouped")}var T=Rd.coerce(t,r,aot,"showlegend",d&&v>(e==="legend"?1:0));if(T===!1&&(r[e]=void 0),!(T===!1&&!n.uirevision)&&(o("uirevision",r.uirevision),T!==!1)){o("borderwidth");var k=o("orientation"),_=o("yref"),E=o("xref"),S=k==="h",g=_==="paper",C=E==="paper",M,P,D,q="left";S?(M=0,mO.getComponentMethod("rangeslider","isVisible")(t.xaxis)?g?(P=1.1,D="bottom"):(P=1,D="top"):g?(P=-.1,D="top"):(P=0,D="bottom")):(P=1,D="auto",C?M=1.02:(M=1,q="right")),Rd.coerce(n,a,{x:{valType:"number",editType:"legend",min:C?-2:0,max:C?3:1,dflt:M}},"x"),Rd.coerce(n,a,{y:{valType:"number",editType:"legend",min:g?-2:0,max:g?3:1,dflt:P}},"y"),o("traceorder",x),xO.isGrouped(r[e])&&o("tracegroupgap"),o("entrywidth"),o("entrywidthmode"),o("indentation"),o("itemsizing"),o("itemwidth"),o("itemclick"),o("itemdoubleclick"),o("groupclick"),o("xanchor",q),o("yanchor",D),o("valign"),Rd.noneOrAll(n,a,["x","y"]);var O=o("title.text");if(O){o("title.side",S?"left":"top");var U=Rd.extendFlat({},s,{size:Rd.bigFont(s.size)});Rd.coerceFont(o,"title.font",U)}}}}yae.exports=function(t,r,i){var n,a=i.slice(),o=r.shapes;if(o)for(n=0;n<o.length;n++){var s=o[n];if(s.showlegend){var l={_input:s._input,visible:s.visible,showlegend:s.showlegend,legend:s.legend};a.push(l)}}var u=["legend"];for(n=0;n<a.length;n++)Rd.pushUnique(u,a[n].legend);for(r._legends=[],n=0;n<u.length;n++){var f=u[n];oot(f,t,r,a),r[f]&&r[f].visible&&(r[f]._id=f),r._legends.push(f)}}});var xae=ie((err,mae)=>{"use strict";var ym=Ti(),KC=Zt(),sot=KC.pushUnique,bO=!0;mae.exports=function(t,r,i){var n=r._fullLayout;if(r._dragged||r._editing)return;var a=n.legend.itemclick,o=n.legend.itemdoubleclick,s=n.legend.groupclick;i===1&&a==="toggle"&&o==="toggleothers"&&bO&&r.data&&r._context.showTips&&KC.notifier(KC._(r,"Double-click on legend to isolate one trace"),"long"),bO=!1;var l;if(i===1?l=a:i===2&&(l=o),!l)return;var u=s==="togglegroup",f=n.hiddenlabels?n.hiddenlabels.slice():[],c=t.data()[0][0];if(c.groupTitle&&c.noClick)return;var h=r._fullData,v=(n.shapes||[]).filter(function(ot){return ot.showlegend}),d=h.concat(v),x=c.trace;x._isShape&&(x=x._fullInput);var b=x.legendgroup,p,w,A,T,k,_,E={},S=[],g=[],C=[];function M(ot,lt){var ht=S.indexOf(ot),xt=E.visible;return xt||(xt=E.visible=[]),S.indexOf(ot)===-1&&(S.push(ot),ht=S.length-1),xt[ht]=lt,ht}var P=(n.shapes||[]).map(function(ot){return ot._input}),D=!1;function q(ot,lt){P[ot].visible=lt,D=!0}function O(ot,lt){if(!(c.groupTitle&&!u)){var ht=ot._fullInput||ot,xt=ht._isShape,Vt=ht.index;if(Vt===void 0&&(Vt=ht._index),ym.hasTransform(ht,"groupby")){var Ht=g[Vt];if(!Ht){var Me=ym.getTransformIndices(ht,"groupby"),Ke=Me[Me.length-1];Ht=KC.keyedContainer(ht,"transforms["+Ke+"].styles","target","value.visible"),g[Vt]=Ht}var We=Ht.get(ot._group);We===void 0&&(We=!0),We!==!1&&Ht.set(ot._group,lt),C[Vt]=M(Vt,ht.visible!==!1)}else{var et=ht.visible===!1?!1:lt;xt?q(Vt,et):M(Vt,et)}}}var U=x.legend,B=x._fullInput,F=B&&B._isShape;if(!F&&ym.traceIs(x,"pie-like")){var N=c.label,X=f.indexOf(N);if(l==="toggle")X===-1?f.push(N):f.splice(X,1);else if(l==="toggleothers"){var K=X!==-1,ne=[];for(p=0;p<r.calcdata.length;p++){var fe=r.calcdata[p];for(w=0;w<fe.length;w++){var ue=fe[w],ee=ue.label;U===fe[0].trace.legend&&N!==ee&&(f.indexOf(ee)===-1&&(K=!0),sot(f,ee),ne.push(ee))}}if(!K)for(var Z=0;Z<ne.length;Z++){var oe=f.indexOf(ne[Z]);oe!==-1&&f.splice(oe,1)}}ym.call("_guiRelayout",r,"hiddenlabels",f)}else{var ce=b&&b.length,le=[],me;if(ce)for(p=0;p<d.length;p++)me=d[p],me.visible&&me.legendgroup===b&&le.push(p);if(l==="toggle"){var he;switch(x.visible){case!0:he="legendonly";break;case!1:he=!1;break;case"legendonly":he=!0;break}if(ce)if(u)for(p=0;p<d.length;p++){var te=d[p];te.visible!==!1&&te.legendgroup===b&&O(te,he)}else O(x,he);else O(x,he)}else if(l==="toggleothers"){var ge,ae,_e,Ce,qe,rt=!0;for(p=0;p<d.length;p++)if(qe=d[p],ge=qe===x,_e=qe.showlegend!==!0,!(ge||_e)&&(ae=ce&&qe.legendgroup===b,!ae&&qe.legend===U&&qe.visible===!0&&!ym.traceIs(qe,"notLegendIsolatable"))){rt=!1;break}for(p=0;p<d.length;p++)if(qe=d[p],!(qe.visible===!1||qe.legend!==U)&&!ym.traceIs(qe,"notLegendIsolatable"))switch(x.visible){case"legendonly":O(qe,!0);break;case!0:Ce=rt?!0:"legendonly",ge=qe===x,_e=qe.showlegend!==!0&&!qe.legendgroup,ae=ge||ce&&qe.legendgroup===b,O(qe,ae||_e?!0:Ce);break}}for(p=0;p<g.length;p++)if(A=g[p],!!A){var Re=A.constructUpdate(),Ie=Object.keys(Re);for(w=0;w<Ie.length;w++)T=Ie[w],_=E[T]=E[T]||[],_[C[p]]=Re[T]}for(k=Object.keys(E),p=0;p<k.length;p++)for(T=k[p],w=0;w<S.length;w++)E[T].hasOwnProperty(w)||(E[T][w]=void 0);D?ym.call("_guiUpdate",r,E,{shapes:P},S):ym.call("_guiRestyle",r,E,S)}}});var wO=ie((trr,_ae)=>{"use strict";_ae.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}});var Tae=ie((rrr,wae)=>{"use strict";var bae=Ti(),TO=jC();wae.exports=function(t,r,i){var n=r._inHover,a=TO.isGrouped(r),o=TO.isReversed(r),s={},l=[],u=!1,f={},c=0,h=0,v,d;function x(B,F,N){if(r.visible!==!1&&!(i&&B!==r._id))if(F===""||!TO.isGrouped(r)){var X="~~i"+c;l.push(X),s[X]=[N],c++}else l.indexOf(F)===-1?(l.push(F),u=!0,s[F]=[N]):s[F].push(N)}for(v=0;v<t.length;v++){var b=t[v],p=b[0],w=p.trace,A=w.legend,T=w.legendgroup;if(!(!n&&(!w.visible||!w.showlegend)))if(bae.traceIs(w,"pie-like"))for(f[T]||(f[T]={}),d=0;d<b.length;d++){var k=b[d].label;f[T][k]||(x(A,T,{label:k,color:b[d].color,i:b[d].i,trace:w,pts:b[d].pts}),f[T][k]=!0,h=Math.max(h,(k||"").length))}else x(A,T,p),h=Math.max(h,(w.name||"").length)}if(!l.length)return[];var _=!u||!a,E=[];for(v=0;v<l.length;v++){var S=s[l[v]];_?E.push(S[0]):E.push(S)}for(_&&(E=[E]),v=0;v<E.length;v++){var g=1/0;for(d=0;d<E[v].length;d++){var C=E[v][d].trace.legendrank;g>C&&(g=C)}E[v][0]._groupMinRank=g,E[v][0]._preGroupSort=v}var M=function(B,F){return B[0]._groupMinRank-F[0]._groupMinRank||B[0]._preGroupSort-F[0]._preGroupSort},P=function(B,F){return B.trace.legendrank-F.trace.legendrank||B._preSort-F._preSort};for(E.forEach(function(B,F){B[0]._preGroupSort=F}),E.sort(M),v=0;v<E.length;v++){E[v].forEach(function(B,F){B._preSort=F}),E[v].sort(P);var D=E[v][0].trace,q=null;for(d=0;d<E[v].length;d++){var O=E[v][d].trace.legendgrouptitle;if(O&&O.text){q=O,n&&(O.font=r._groupTitleFont);break}}if(o&&E[v].reverse(),q){var U=!1;for(d=0;d<E[v].length;d++)if(bae.traceIs(E[v][d].trace,"pie-like")){U=!0;break}E[v].unshift({i:-1,groupTitle:q,noClick:U,trace:{showlegend:D.showlegend,legendgroup:D.legendgroup,visible:r.groupclick==="toggleitem"?!0:D.visible}})}for(d=0;d<E[v].length;d++)E[v][d]=[E[v][d]]}return r._lgroupsLength=E.length,r._maxNameLength=h,E}});var mm=ie(kx=>{"use strict";var JC=Zt();function Aae(e){return e.indexOf("e")!==-1?e.replace(/[.]?0+e/,"e"):e.indexOf(".")!==-1?e.replace(/[.]?0+$/,""):e}kx.formatPiePercent=function(t,r){var i=Aae((t*100).toPrecision(3));return JC.numSeparate(i,r)+"%"};kx.formatPieValue=function(t,r){var i=Aae(t.toPrecision(10));return JC.numSeparate(i,r)};kx.getFirstFilled=function(t,r){if(JC.isArrayOrTypedArray(t))for(var i=0;i<r.length;i++){var n=t[r[i]];if(n||n===0||n==="")return n}};kx.castOption=function(t,r){if(JC.isArrayOrTypedArray(t))return kx.getFirstFilled(t,r);if(t)return t};kx.getRotationAngle=function(e){return(e==="auto"?0:e)*Math.PI/180}});var Sae=ie((irr,Mae)=>{"use strict";var lot=oa(),uot=_i();Mae.exports=function(t,r,i,n){var a=i.marker.pattern;a&&a.shape?lot.pointStyle(t,i,n,r):uot.fill(t,r.color)}});var S2=ie((arr,Cae)=>{"use strict";var Eae=_i(),kae=mm().castOption,fot=Sae();Cae.exports=function(t,r,i,n){var a=i.marker.line,o=kae(a.color,r.pts)||Eae.defaultLine,s=kae(a.width,r.pts)||0;t.call(fot,r,i,n).style("stroke-width",s).call(Eae.stroke,o)}});var EO=ie((orr,Fae)=>{"use strict";var Wh=Mi(),AO=Ti(),gh=Zt(),Lae=gh.strTranslate,bv=oa(),sp=_i(),MO=Hh().extractOpts,QC=Ks(),cot=S2(),hot=mm().castOption,vot=wO(),Pae=12,Rae=5,Cx=2,dot=10,E2=5;Fae.exports=function(t,r,i){var n=r._fullLayout;i||(i=n.legend);var a=i.itemsizing==="constant",o=i.itemwidth,s=(o+vot.itemGap*2)/2,l=Lae(s,0),u=function(E,S,g,C){var M;if(E+1)M=E;else if(S&&S.width>0)M=S.width;else return 0;return a?C:Math.min(M,g)};t.each(function(E){var S=Wh.select(this),g=gh.ensureSingle(S,"g","layers");g.style("opacity",E[0].trace.opacity);var C=i.indentation,M=i.valign,P=E[0].lineHeight,D=E[0].height;if(M==="middle"&&C===0||!P||!D)g.attr("transform",null);else{var q={top:1,bottom:-1}[M],O=q*(.5*(P-D+3))||0,U=i.indentation;g.attr("transform",Lae(U,O))}var B=g.selectAll("g.legendfill").data([E]);B.enter().append("g").classed("legendfill",!0);var F=g.selectAll("g.legendlines").data([E]);F.enter().append("g").classed("legendlines",!0);var N=g.selectAll("g.legendsymbols").data([E]);N.enter().append("g").classed("legendsymbols",!0),N.selectAll("g.legendpoints").data([E]).enter().append("g").classed("legendpoints",!0)}).each(_).each(h).each(d).each(v).each(b).each(T).each(A).each(f).each(c).each(p).each(w);function f(E){var S=Dae(E),g=S.showFill,C=S.showLine,M=S.showGradientLine,P=S.showGradientFill,D=S.anyFill,q=S.anyLine,O=E[0],U=O.trace,B,F,N=MO(U),X=N.colorscale,K=N.reversescale,ne=function(le){if(le.size())if(g)bv.fillGroupStyle(le,r,!0);else{var me="legendfill-"+U.uid;bv.gradient(le,r,me,SO(K),X,"fill")}},fe=function(le){if(le.size()){var me="legendline-"+U.uid;bv.lineGroupStyle(le),bv.gradient(le,r,me,SO(K),X,"stroke")}},ue=QC.hasMarkers(U)||!D?"M5,0":q?"M5,-2":"M5,-3",ee=Wh.select(this),Z=ee.select(".legendfill").selectAll("path").data(g||P?[E]:[]);if(Z.enter().append("path").classed("js-fill",!0),Z.exit().remove(),Z.attr("d",ue+"h"+o+"v6h-"+o+"z").call(ne),C||M){var oe=u(void 0,U.line,dot,Rae);F=gh.minExtend(U,{line:{width:oe}}),B=[gh.minExtend(O,{trace:F})]}var ce=ee.select(".legendlines").selectAll("path").data(C||M?[B]:[]);ce.enter().append("path").classed("js-line",!0),ce.exit().remove(),ce.attr("d",ue+(M?"l"+o+",0.0001":"h"+o)).call(C?bv.lineGroupStyle:fe)}function c(E){var S=Dae(E),g=S.anyFill,C=S.anyLine,M=S.showLine,P=S.showMarker,D=E[0],q=D.trace,O=!P&&!C&&!g&&QC.hasText(q),U,B;function F(Z,oe,ce,le){var me=gh.nestedProperty(q,Z).get(),he=gh.isArrayOrTypedArray(me)&&oe?oe(me):me;if(a&&he&&le!==void 0&&(he=le),ce){if(he<ce[0])return ce[0];if(he>ce[1])return ce[1]}return he}function N(Z){return D._distinct&&D.index&&Z[D.index]?Z[D.index]:Z[0]}if(P||O||M){var X={},K={};if(P){X.mc=F("marker.color",N),X.mx=F("marker.symbol",N),X.mo=F("marker.opacity",gh.mean,[.2,1]),X.mlc=F("marker.line.color",N),X.mlw=F("marker.line.width",gh.mean,[0,5],Cx),K.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var ne=F("marker.size",gh.mean,[2,16],Pae);X.ms=ne,K.marker.size=ne}M&&(K.line={width:F("line.width",N,[0,10],Rae)}),O&&(X.tx="Aa",X.tp=F("textposition",N),X.ts=10,X.tc=F("textfont.color",N),X.tf=F("textfont.family",N),X.tw=F("textfont.weight",N),X.ty=F("textfont.style",N),X.tv=F("textfont.variant",N),X.tC=F("textfont.textcase",N),X.tE=F("textfont.lineposition",N),X.tS=F("textfont.shadow",N)),U=[gh.minExtend(D,X)],B=gh.minExtend(q,K),B.selectedpoints=null,B.texttemplate=null}var fe=Wh.select(this).select("g.legendpoints"),ue=fe.selectAll("path.scatterpts").data(P?U:[]);ue.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",l),ue.exit().remove(),ue.call(bv.pointStyle,B,r),P&&(U[0].mrc=3);var ee=fe.selectAll("g.pointtext").data(O?U:[]);ee.enter().append("g").classed("pointtext",!0).append("text").attr("transform",l),ee.exit().remove(),ee.selectAll("text").call(bv.textPointStyle,B,r)}function h(E){var S=E[0].trace,g=S.type==="waterfall";if(E[0]._distinct&&g){var C=E[0].trace[E[0].dir].marker;return E[0].mc=C.color,E[0].mlw=C.line.width,E[0].mlc=C.line.color,x(E,this,"waterfall")}var M=[];S.visible&&g&&(M=E[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var P=Wh.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(M);P.enter().append("path").classed("legendwaterfall",!0).attr("transform",l).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(D){var q=Wh.select(this),O=S[D[0]].marker,U=u(void 0,O.line,E2,Cx);q.attr("d",D[1]).style("stroke-width",U+"px").call(sp.fill,O.color),U&&q.call(sp.stroke,O.line.color)})}function v(E){x(E,this)}function d(E){x(E,this,"funnel")}function x(E,S,g){var C=E[0].trace,M=C.marker||{},P=M.line||{},D=M.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",q=g?C.visible&&C.type===g:AO.traceIs(C,"bar"),O=Wh.select(S).select("g.legendpoints").selectAll("path.legend"+g).data(q?[E]:[]);O.enter().append("path").classed("legend"+g,!0).attr("d",D).attr("transform",l),O.exit().remove(),O.each(function(U){var B=Wh.select(this),F=U[0],N=u(F.mlw,M.line,E2,Cx);B.style("stroke-width",N+"px");var X=F.mcc;if(!i._inHover&&"mc"in F){var K=MO(M),ne=K.mid;ne===void 0&&(ne=(K.max+K.min)/2),X=bv.tryColorscale(M,"")(ne)}var fe=X||F.mc||M.color,ue=M.pattern,ee=ue&&bv.getPatternAttr(ue.shape,0,"");if(ee){var Z=bv.getPatternAttr(ue.bgcolor,0,null),oe=bv.getPatternAttr(ue.fgcolor,0,null),ce=ue.fgopacity,le=Iae(ue.size,8,10),me=Iae(ue.solidity,.5,1),he="legend-"+C.uid;B.call(bv.pattern,"legend",r,he,ee,le,me,X,ue.fillmode,Z,oe,ce)}else B.call(sp.fill,fe);N&&sp.stroke(B,F.mlc||P.color)})}function b(E){var S=E[0].trace,g=Wh.select(this).select("g.legendpoints").selectAll("path.legendbox").data(S.visible&&AO.traceIs(S,"box-violin")?[E]:[]);g.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",l),g.exit().remove(),g.each(function(){var C=Wh.select(this);if((S.boxpoints==="all"||S.points==="all")&&sp.opacity(S.fillcolor)===0&&sp.opacity((S.line||{}).color)===0){var M=gh.minExtend(S,{marker:{size:a?Pae:gh.constrain(S.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});g.call(bv.pointStyle,M,r)}else{var P=u(void 0,S.line,E2,Cx);C.style("stroke-width",P+"px").call(sp.fill,S.fillcolor),P&&sp.stroke(C,S.line.color)}})}function p(E){var S=E[0].trace,g=Wh.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(S.visible&&S.type==="candlestick"?[E,E]:[]);g.enter().append("path").classed("legendcandle",!0).attr("d",function(C,M){return M?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",l).style("stroke-miterlimit",1),g.exit().remove(),g.each(function(C,M){var P=Wh.select(this),D=S[M?"increasing":"decreasing"],q=u(void 0,D.line,E2,Cx);P.style("stroke-width",q+"px").call(sp.fill,D.fillcolor),q&&sp.stroke(P,D.line.color)})}function w(E){var S=E[0].trace,g=Wh.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(S.visible&&S.type==="ohlc"?[E,E]:[]);g.enter().append("path").classed("legendohlc",!0).attr("d",function(C,M){return M?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",l).style("stroke-miterlimit",1),g.exit().remove(),g.each(function(C,M){var P=Wh.select(this),D=S[M?"increasing":"decreasing"],q=u(void 0,D.line,E2,Cx);P.style("fill","none").call(bv.dashLine,D.line.dash,q),q&&sp.stroke(P,D.line.color)})}function A(E){k(E,this,"pie")}function T(E){k(E,this,"funnelarea")}function k(E,S,g){var C=E[0],M=C.trace,P=g?M.visible&&M.type===g:AO.traceIs(M,g),D=Wh.select(S).select("g.legendpoints").selectAll("path.legend"+g).data(P?[E]:[]);if(D.enter().append("path").classed("legend"+g,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",l),D.exit().remove(),D.size()){var q=M.marker||{},O=u(hot(q.line.width,C.pts),q.line,E2,Cx),U="pieLike",B=gh.minExtend(M,{marker:{line:{width:O}}},U),F=gh.minExtend(C,{trace:B},U);cot(D,F,B,r)}}function _(E){var S=E[0].trace,g,C=[];if(S.visible)switch(S.type){case"histogram2d":case"heatmap":C=[["M-15,-2V4H15V-2Z"]],g=!0;break;case"choropleth":case"choroplethmapbox":C=[["M-6,-6V6H6V-6Z"]],g=!0;break;case"densitymapbox":C=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],g="radial";break;case"cone":C=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],g=!1;break;case"streamtube":C=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],g=!1;break;case"surface":C=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],g=!0;break;case"mesh3d":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],g=!1;break;case"volume":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],g=!0;break;case"isosurface":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],g=!1;break}var M=Wh.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(C);M.enter().append("path").classed("legend3dandfriends",!0).attr("transform",l).style("stroke-miterlimit",1),M.exit().remove(),M.each(function(P,D){var q=Wh.select(this),O=MO(S),U=O.colorscale,B=O.reversescale,F=function(ne){if(ne.size()){var fe="legendfill-"+S.uid;bv.gradient(ne,r,fe,SO(B,g==="radial"),U,"fill")}},N;if(U){if(!g){var K=U.length;N=D===0?U[B?K-1:0][1]:D===1?U[B?0:K-1][1]:U[Math.floor((K-1)/2)][1]}}else{var X=S.vertexcolor||S.facecolor||S.color;N=gh.isArrayOrTypedArray(X)?X[D]||X[0]:X}q.attr("d",P[0]),N?q.call(sp.fill,N):q.call(F)})}};function SO(e,t){var r=t?"radial":"horizontal";return r+(e?"":"reversed")}function Dae(e){var t=e[0].trace,r=t.contours,i=QC.hasLines(t),n=QC.hasMarkers(t),a=t.visible&&t.fill&&t.fill!=="none",o=!1,s=!1;if(r){var l=r.coloring;l==="lines"?o=!0:i=l==="none"||l==="heatmap"||r.showlines,r.type==="constraint"?a=r._operation!=="=":(l==="fill"||l==="heatmap")&&(s=!0)}return{showMarker:n,showLine:i,showFill:a,showGradientLine:o,showGradientFill:s,anyLine:i||o,anyFill:a||s}}function Iae(e,t,r){return e&&gh.isArrayOrTypedArray(e)?t:e>r?r:e}});var PO=ie((srr,Yae)=>{"use strict";var od=Mi(),zu=Zt(),CO=js(),xm=Ti(),qae=c2(),kO=Yh(),rf=oa(),e4=_i(),Lx=ks(),zae=xae(),Sf=wO(),LO=Mf(),Hae=LO.LINE_SPACING,C2=LO.FROM_TL,Oae=LO.FROM_BR,Bae=Tae(),pot=EO(),Nae=jC(),k2=1,got=/^legend[0-9]*$/;Yae.exports=function(t,r){if(r)Uae(t,r);else{var i=t._fullLayout,n=i._legends,a=i._infolayer.selectAll('[class^="legend"]');a.each(function(){var u=od.select(this),f=u.attr("class"),c=f.split(" ")[0];c.match(got)&&n.indexOf(c)===-1&&u.remove()});for(var o=0;o<n.length;o++){var s=n[o],l=t._fullLayout[s];Uae(t,l)}}};function yot(e,t,r){if(!(t.title.side!=="top center"&&t.title.side!=="top right")){var i=t.title.font,n=i.size*Hae,a=0,o=e.node(),s=rf.bBox(o).width;t.title.side==="top center"?a=.5*(t._width-2*r-2*Sf.titlePad-s):t.title.side==="top right"&&(a=t._width-2*r-2*Sf.titlePad-s),Lx.positionText(e,r+Sf.titlePad+a,r+n)}}function Uae(e,t){var r=t||{},i=e._fullLayout,n=i4(r),a,o,s=r._inHover;if(s?(o=r.layer,a="hover"):(o=i._infolayer,a=n),!!o){a+=i._uid,e._legendMouseDownTime||(e._legendMouseDownTime=0);var l;if(s){if(!r.entries)return;l=Bae(r.entries,r)}else{for(var u=(e.calcdata||[]).slice(),f=i.shapes,c=0;c<f.length;c++){var h=f[c];if(h.showlegend){var v={_isShape:!0,_fullInput:h,index:h._index,name:h.name||h.label.text||"shape "+h._index,legend:h.legend,legendgroup:h.legendgroup,legendgrouptitle:h.legendgrouptitle,legendrank:h.legendrank,legendwidth:h.legendwidth,showlegend:h.showlegend,visible:h.visible,opacity:h.opacity,mode:h.type==="line"?"lines":"markers",line:h.line,marker:{line:h.line,color:h.fillcolor,size:12,symbol:h.type==="rect"?"square":h.type==="circle"?"circle":"hexagon2"}};u.push([{trace:v}])}}l=i.showlegend&&Bae(u,r,i._legends.length>1)}var d=i.hiddenlabels||[];if(!s&&(!i.showlegend||!l.length))return o.selectAll("."+n).remove(),i._topdefs.select("#"+a).remove(),CO.autoMargin(e,n);var x=zu.ensureSingle(o,"g",n,function(S){s||S.attr("pointer-events","all")}),b=zu.ensureSingleById(i._topdefs,"clipPath",a,function(S){S.append("rect")}),p=zu.ensureSingle(x,"rect","bg",function(S){S.attr("shape-rendering","crispEdges")});p.call(e4.stroke,r.bordercolor).call(e4.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px");var w=zu.ensureSingle(x,"g","scrollbox"),A=r.title;r._titleWidth=0,r._titleHeight=0;var T;A.text?(T=zu.ensureSingle(w,"text",n+"titletext"),T.attr("text-anchor","start").call(rf.font,A.font).text(A.text),t4(T,w,e,r,k2)):w.selectAll("."+n+"titletext").remove();var k=zu.ensureSingle(x,"rect","scrollbar",function(S){S.attr(Sf.scrollBarEnterAttrs).call(e4.fill,Sf.scrollBarColor)}),_=w.selectAll("g.groups").data(l);_.enter().append("g").attr("class","groups"),_.exit().remove();var E=_.selectAll("g.traces").data(zu.identity);E.enter().append("g").attr("class","traces"),E.exit().remove(),E.style("opacity",function(S){var g=S[0].trace;return xm.traceIs(g,"pie-like")?d.indexOf(S[0].label)!==-1?.5:1:g.visible==="legendonly"?.5:1}).each(function(){od.select(this).call(mot,e,r)}).call(pot,e,r).each(function(){s||od.select(this).call(xot,e,n)}),zu.syncOrAsync([CO.previousPromises,function(){return wot(e,_,E,r)},function(){var S=i._size,g=r.borderwidth,C=r.xref==="paper",M=r.yref==="paper";if(A.text&&yot(T,r,g),!s){var P,D;C?P=S.l+S.w*r.x-C2[r4(r)]*r._width:P=i.width*r.x-C2[r4(r)]*r._width,M?D=S.t+S.h*(1-r.y)-C2[n4(r)]*r._effHeight:D=i.height*(1-r.y)-C2[n4(r)]*r._effHeight;var q=Tot(e,n,P,D);if(q)return;if(i.margin.autoexpand){var O=P,U=D;P=C?zu.constrain(P,0,i.width-r._width):O,D=M?zu.constrain(D,0,i.height-r._effHeight):U,P!==O&&zu.log("Constrain "+n+".x to make legend fit inside graph"),D!==U&&zu.log("Constrain "+n+".y to make legend fit inside graph")}rf.setTranslate(x,P,D)}if(k.on(".drag",null),x.on("wheel",null),s||r._height<=r._maxHeight||e._context.staticPlot){var B=r._effHeight;s&&(B=r._height),p.attr({width:r._width-g,height:B-g,x:g/2,y:g/2}),rf.setTranslate(w,0,0),b.select("rect").attr({width:r._width-2*g,height:B-2*g,x:g,y:g}),rf.setClipUrl(w,a,e),rf.setRect(k,0,0,0,0),delete r._scrollY}else{var F=Math.max(Sf.scrollBarMinHeight,r._effHeight*r._effHeight/r._height),N=r._effHeight-F-2*Sf.scrollBarMargin,X=r._height-r._effHeight,K=N/X,ne=Math.min(r._scrollY||0,X);p.attr({width:r._width-2*g+Sf.scrollBarWidth+Sf.scrollBarMargin,height:r._effHeight-g,x:g/2,y:g/2}),b.select("rect").attr({width:r._width-2*g+Sf.scrollBarWidth+Sf.scrollBarMargin,height:r._effHeight-2*g,x:g,y:g+ne}),rf.setClipUrl(w,a,e),me(ne,F,K),x.on("wheel",function(){ne=zu.constrain(r._scrollY+od.event.deltaY/N*X,0,X),me(ne,F,K),ne!==0&&ne!==X&&od.event.preventDefault()});var fe,ue,ee,Z=function(_e,Ce,qe){var rt=(qe-Ce)/K+_e;return zu.constrain(rt,0,X)},oe=function(_e,Ce,qe){var rt=(Ce-qe)/K+_e;return zu.constrain(rt,0,X)},ce=od.behavior.drag().on("dragstart",function(){var _e=od.event.sourceEvent;_e.type==="touchstart"?fe=_e.changedTouches[0].clientY:fe=_e.clientY,ee=ne}).on("drag",function(){var _e=od.event.sourceEvent;_e.buttons===2||_e.ctrlKey||(_e.type==="touchmove"?ue=_e.changedTouches[0].clientY:ue=_e.clientY,ne=Z(ee,fe,ue),me(ne,F,K))});k.call(ce);var le=od.behavior.drag().on("dragstart",function(){var _e=od.event.sourceEvent;_e.type==="touchstart"&&(fe=_e.changedTouches[0].clientY,ee=ne)}).on("drag",function(){var _e=od.event.sourceEvent;_e.type==="touchmove"&&(ue=_e.changedTouches[0].clientY,ne=oe(ee,fe,ue),me(ne,F,K))});w.call(le)}function me(_e,Ce,qe){r._scrollY=e._fullLayout[n]._scrollY=_e,rf.setTranslate(w,0,-_e),rf.setRect(k,r._width,Sf.scrollBarMargin+_e*qe,Sf.scrollBarWidth,Ce),b.select("rect").attr("y",g+_e)}if(e._context.edits.legendPosition){var he,te,ge,ae;x.classed("cursor-move",!0),kO.init({element:x.node(),gd:e,prepFn:function(_e){if(_e.target!==k.node()){var Ce=rf.getTranslate(x);ge=Ce.x,ae=Ce.y}},moveFn:function(_e,Ce){if(ge!==void 0&&ae!==void 0){var qe=ge+_e,rt=ae+Ce;rf.setTranslate(x,qe,rt),he=kO.align(qe,r._width,S.l,S.l+S.w,r.xanchor),te=kO.align(rt+r._height,-r._height,S.t+S.h,S.t,r.yanchor)}},doneFn:function(){if(he!==void 0&&te!==void 0){var _e={};_e[n+".x"]=he,_e[n+".y"]=te,xm.call("_guiRelayout",e,_e)}},clickFn:function(_e,Ce){var qe=o.selectAll("g.traces").filter(function(){var rt=this.getBoundingClientRect();return Ce.clientX>=rt.left&&Ce.clientX<=rt.right&&Ce.clientY>=rt.top&&Ce.clientY<=rt.bottom});qe.size()>0&&Gae(e,x,qe,_e,Ce)}})}}],e)}}function $C(e,t,r){var i=e[0],n=i.width,a=t.entrywidthmode,o=i.trace.legendwidth||t.entrywidth;return a==="fraction"?t._maxWidth*o:r+(o||n)}function Gae(e,t,r,i,n){var a=r.data()[0][0].trace,o={event:n,node:r.node(),curveNumber:a.index,expandedIndex:a._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};a._group&&(o.group=a._group),xm.traceIs(a,"pie-like")&&(o.label=r.datum()[0].label);var s=qae.triggerHandler(e,"plotly_legendclick",o);if(i===1){if(s===!1)return;t._clickTimeout=setTimeout(function(){e._fullLayout&&zae(r,e,i)},e._context.doubleClickDelay)}else if(i===2){t._clickTimeout&&clearTimeout(t._clickTimeout),e._legendMouseDownTime=0;var l=qae.triggerHandler(e,"plotly_legenddoubleclick",o);l!==!1&&s!==!1&&zae(r,e,i)}}function mot(e,t,r){var i=i4(r),n=e.data()[0][0],a=n.trace,o=xm.traceIs(a,"pie-like"),s=!r._inHover&&t._context.edits.legendText&&!o,l=r._maxNameLength,u,f;n.groupTitle?(u=n.groupTitle.text,f=n.groupTitle.font):(f=r.font,r.entries?u=n.text:(u=o?n.label:a.name,a._meta&&(u=zu.templateString(u,a._meta))));var c=zu.ensureSingle(e,"text",i+"text");c.attr("text-anchor","start").call(rf.font,f).text(s?Vae(u,l):u);var h=r.indentation+r.itemwidth+Sf.itemGap*2;Lx.positionText(c,h,0),s?c.call(Lx.makeEditable,{gd:t,text:u}).call(t4,e,t,r).on("edit",function(v){this.text(Vae(v,l)).call(t4,e,t,r);var d=n.trace._fullInput||{},x={};if(xm.hasTransform(d,"groupby")){var b=xm.getTransformIndices(d,"groupby"),p=b[b.length-1],w=zu.keyedContainer(d,"transforms["+p+"].styles","target","value.name");w.set(n.trace._group,v),x=w.constructUpdate()}else x.name=v;return d._isShape?xm.call("_guiRelayout",t,"shapes["+a.index+"].name",x.name):xm.call("_guiRestyle",t,x,a.index)}):t4(c,e,t,r)}function Vae(e,t){var r=Math.max(4,t);if(e&&e.trim().length>=r/2)return e;e=e||"";for(var i=r-e.length;i>0;i--)e+=" ";return e}function xot(e,t,r){var i=t._context.doubleClickDelay,n,a=1,o=zu.ensureSingle(e,"rect",r+"toggle",function(s){t._context.staticPlot||s.style("cursor","pointer").attr("pointer-events","all"),s.call(e4.fill,"rgba(0,0,0,0)")});t._context.staticPlot||(o.on("mousedown",function(){n=new Date().getTime(),n-t._legendMouseDownTime<i?a+=1:(a=1,t._legendMouseDownTime=n)}),o.on("mouseup",function(){if(!(t._dragged||t._editing)){var s=t._fullLayout[r];new Date().getTime()-t._legendMouseDownTime>i&&(a=Math.max(a-1,1)),Gae(t,s,e,a,od.event)}}))}function t4(e,t,r,i,n){i._inHover&&e.attr("data-notex",!0),Lx.convertToTspans(e,r,function(){_ot(t,r,i,n)})}function _ot(e,t,r,i){var n=e.data()[0][0];if(!r._inHover&&n&&!n.trace.showlegend){e.remove();return}var a=e.select("g[class*=math-group]"),o=a.node(),s=i4(r);r||(r=t._fullLayout[s]);var l=r.borderwidth,u;i===k2?u=r.title.font:n.groupTitle?u=n.groupTitle.font:u=r.font;var f=u.size*Hae,c,h;if(o){var v=rf.bBox(o);c=v.height,h=v.width,i===k2?rf.setTranslate(a,l,l+c*.75):rf.setTranslate(a,0,c*.25)}else{var d="."+s+(i===k2?"title":"")+"text",x=e.select(d),b=Lx.lineCount(x),p=x.node();if(c=f*b,h=p?rf.bBox(p).width:0,i===k2)r.title.side==="left"&&(h+=Sf.itemGap*2),Lx.positionText(x,l+Sf.titlePad,l+f);else{var w=Sf.itemGap*2+r.indentation+r.itemwidth;n.groupTitle&&(w=Sf.itemGap,h-=r.indentation+r.itemwidth),Lx.positionText(x,w,-f*((b-1)/2-.3))}}i===k2?(r._titleWidth=h,r._titleHeight=c):(n.lineHeight=f,n.height=Math.max(c,16)+3,n.width=h)}function bot(e){var t=0,r=0,i=e.title.side;return i&&(i.indexOf("left")!==-1&&(t=e._titleWidth),i.indexOf("top")!==-1&&(r=e._titleHeight)),[t,r]}function wot(e,t,r,i){var n=e._fullLayout,a=i4(i);i||(i=n[a]);var o=n._size,s=Nae.isVertical(i),l=Nae.isGrouped(i),u=i.entrywidthmode==="fraction",f=i.borderwidth,c=2*f,h=Sf.itemGap,v=i.indentation+i.itemwidth+h*2,d=2*(f+h),x=n4(i),b=i.y<0||i.y===0&&x==="top",p=i.y>1||i.y===1&&x==="bottom",w=i.tracegroupgap,A={};i._maxHeight=Math.max(b||p?n.height/2:o.h,30);var T=0;i._width=0,i._height=0;var k=bot(i);if(s)r.each(function(ee){var Z=ee[0].height;rf.setTranslate(this,f+k[0],f+k[1]+i._height+Z/2+h),i._height+=Z,i._width=Math.max(i._width,ee[0].width)}),T=v+i._width,i._width+=h+v+c,i._height+=d,l&&(t.each(function(ee,Z){rf.setTranslate(this,0,Z*i.tracegroupgap)}),i._height+=(i._lgroupsLength-1)*i.tracegroupgap);else{var _=r4(i),E=i.x<0||i.x===0&&_==="right",S=i.x>1||i.x===1&&_==="left",g=p||b,C=n.width/2;i._maxWidth=Math.max(E?g&&_==="left"?o.l+o.w:C:S?g&&_==="right"?o.r+o.w:C:o.w,2*v);var M=0,P=0;r.each(function(ee){var Z=$C(ee,i,v);M=Math.max(M,Z),P+=Z}),T=null;var D=0;if(l){var q=0,O=0,U=0;t.each(function(){var ee=0,Z=0;od.select(this).selectAll("g.traces").each(function(ce){var le=$C(ce,i,v),me=ce[0].height;rf.setTranslate(this,k[0],k[1]+f+h+me/2+Z),Z+=me,ee=Math.max(ee,le),A[ce[0].trace.legendgroup]=ee});var oe=ee+h;O>0&&oe+f+O>i._maxWidth?(D=Math.max(D,O),O=0,U+=q+w,q=Z):q=Math.max(q,Z),rf.setTranslate(this,O,U),O+=oe}),i._width=Math.max(D,O)+f,i._height=U+q+d}else{var B=r.size(),F=P+c+(B-1)*h<i._maxWidth,N=0,X=0,K=0,ne=0;r.each(function(ee){var Z=ee[0].height,oe=$C(ee,i,v,l),ce=F?oe:M;u||(ce+=h),ce+f+X-h>=i._maxWidth&&(D=Math.max(D,ne),X=0,K+=N,i._height+=N,N=0),rf.setTranslate(this,k[0]+f+X,k[1]+f+K+Z/2+h),ne=X+oe+h,X+=ce,N=Math.max(N,Z)}),F?(i._width=X+c,i._height=N+d):(i._width=Math.max(D,ne)+c,i._height+=N+d)}}i._width=Math.ceil(Math.max(i._width+k[0],i._titleWidth+2*(f+Sf.titlePad))),i._height=Math.ceil(Math.max(i._height+k[1],i._titleHeight+2*(f+Sf.itemGap))),i._effHeight=Math.min(i._height,i._maxHeight);var fe=e._context.edits,ue=fe.legendText||fe.legendPosition;r.each(function(ee){var Z=od.select(this).select("."+a+"toggle"),oe=ee[0].height,ce=ee[0].trace.legendgroup,le=$C(ee,i,v);l&&ce!==""&&(le=A[ce]);var me=ue?v:T||le;!s&&!u&&(me+=h/2),rf.setRect(Z,0,-oe/2,me,oe)})}function Tot(e,t,r,i){var n=e._fullLayout,a=n[t],o=r4(a),s=n4(a),l=a.xref==="paper",u=a.yref==="paper";e._fullLayout._reservedMargin[t]={};var f=a.y<.5?"b":"t",c=a.x<.5?"l":"r",h={r:n.width-r,l:r+a._width,b:n.height-i,t:i+a._effHeight};if(l&&u)return CO.autoMargin(e,t,{x:a.x,y:a.y,l:a._width*C2[o],r:a._width*Oae[o],b:a._effHeight*Oae[s],t:a._effHeight*C2[s]});l?e._fullLayout._reservedMargin[t][f]=h[f]:u||a.orientation==="v"?e._fullLayout._reservedMargin[t][c]=h[c]:e._fullLayout._reservedMargin[t][f]=h[f]}function r4(e){return zu.isRightAnchor(e)?"right":zu.isCenterAnchor(e)?"center":"left"}function n4(e){return zu.isBottomAnchor(e)?"bottom":zu.isMiddleAnchor(e)?"middle":"top"}function i4(e){return e._id||"legend"}});var FO=ie(IO=>{"use strict";var Px=Mi(),Vg=la(),Wae=Kf(),du=Zt(),Aot=du.pushUnique,RO=du.strTranslate,Mot=du.strRotate,Sot=c2(),lp=ks(),Eot=pae(),V0=oa(),tc=_i(),a4=Yh(),H0=Wi(),P2=Ti(),r0=ad(),Rx=hA(),kot=_O(),Cot=PO(),eoe=Rx.YANGLE,DO=Math.PI*eoe/180,Lot=1/Math.sin(DO),Pot=Math.cos(DO),Rot=Math.sin(DO),Cl=Rx.HOVERARROWSIZE,To=Rx.HOVERTEXTPAD,Xae={box:!0,ohlc:!0,violin:!0,candlestick:!0},Dot={scatter:!0,scattergl:!0,splom:!0};function Zae(e,t){return e.distance-t.distance}IO.hover=function(t,r,i,n){t=du.getGraphDiv(t);var a=r.target;du.throttle(t._fullLayout._uid+Rx.HOVERID,Rx.HOVERMINTIME,function(){Iot(t,r,i,n,a)})};IO.loneHover=function(t,r){var i=!0;Array.isArray(t)||(i=!1,t=[t]);var n=r.gd,a=aoe(n),o=ooe(n),s=t.map(function(b){var p=b._x0||b.x0||b.x||0,w=b._x1||b.x1||b.x||0,A=b._y0||b.y0||b.y||0,T=b._y1||b.y1||b.y||0,k=b.eventData;if(k){var _=Math.min(p,w),E=Math.max(p,w),S=Math.min(A,T),g=Math.max(A,T),C=b.trace;if(P2.traceIs(C,"gl3d")){var M=n._fullLayout[C.scene]._scene.container,P=M.offsetLeft,D=M.offsetTop;_+=P,E+=P,S+=D,g+=D}k.bbox={x0:_+o,x1:E+o,y0:S+a,y1:g+a},r.inOut_bbox&&r.inOut_bbox.push(k.bbox)}else k=!1;return{color:b.color||tc.defaultLine,x0:b.x0||b.x||0,x1:b.x1||b.x||0,y0:b.y0||b.y||0,y1:b.y1||b.y||0,xLabel:b.xLabel,yLabel:b.yLabel,zLabel:b.zLabel,text:b.text,name:b.name,idealAlign:b.idealAlign,borderColor:b.borderColor,fontFamily:b.fontFamily,fontSize:b.fontSize,fontColor:b.fontColor,fontWeight:b.fontWeight,fontStyle:b.fontStyle,fontVariant:b.fontVariant,nameLength:b.nameLength,textAlign:b.textAlign,trace:b.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:b.hovertemplate||!1,hovertemplateLabels:b.hovertemplateLabels||!1,eventData:k}}),l=!1,u=roe(s,{gd:n,hovermode:"closest",rotateLabels:l,bgColor:r.bgColor||tc.background,container:Px.select(r.container),outerContainer:r.outerContainer||r.container}),f=u.hoverLabels,c=5,h=0,v=0;f.sort(function(b,p){return b.y0-p.y0}).each(function(b,p){var w=b.y0-b.by/2;w-c<h?b.offset=h-w+c:b.offset=0,h=w+b.by+b.offset,p===r.anchorIndex&&(v=b.offset)}).each(function(b){b.offset-=v});var d=n._fullLayout._invScaleX,x=n._fullLayout._invScaleY;return ioe(f,l,d,x),i?f:f.node()};function Iot(e,t,r,i,n){r||(r="xy");var a=Array.isArray(r)?r:[r],o,s=e._fullLayout,l=s.hoversubplots,u=s._plots||[],f=u[r],c=s._has("cartesian"),h=t.hovermode||s.hovermode,v=(h||"").charAt(0)==="x",d=(h||"").charAt(0)==="y",x,b;if(c&&(v||d)&&l==="axis"){for(var p=a.length,w=0;w<p;w++)if(o=a[w],u[o]){x=H0.getFromId(e,o,"x"),b=H0.getFromId(e,o,"y");var A=(v?x:b)._subplotsWith;if(A&&A.length)for(var T=0;T<A.length;T++)Aot(a,A[T])}}if(f&&l!=="single"){var k=f.overlays.map(function(pn){return pn.id});a=a.concat(k)}for(var _=a.length,E=new Array(_),S=new Array(_),g=!1,C=0;C<_;C++)if(o=a[C],u[o])g=!0,E[C]=u[o].xaxis,S[C]=u[o].yaxis;else if(s[o]&&s[o]._subplot){var M=s[o]._subplot;E[C]=M.xaxis,S[C]=M.yaxis}else{du.warn("Unrecognized subplot: "+o);return}if(h&&!g&&(h="closest"),["x","y","closest","x unified","y unified"].indexOf(h)===-1||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return a4.unhoverRaw(e,t);var P=s.hoverdistance;P===-1&&(P=1/0);var D=s.spikedistance;D===-1&&(D=1/0);var q=[],O=[],U,B,F,N,X,K,ne,fe,ue,ee,Z,oe,ce,le={hLinePoint:null,vLinePoint:null},me=!1;if(Array.isArray(t))for(h="array",F=0;F<t.length;F++)X=e.calcdata[t[F].curveNumber||0],X&&(K=X[0].trace,X[0].trace.hoverinfo!=="skip"&&(O.push(X),K.orientation==="h"&&(me=!0)));else{var he=e.calcdata.slice();for(he.sort(function(pn,ki){var qn=pn[0].trace.zorder||0,bi=ki[0].trace.zorder||0;return qn-bi}),N=0;N<he.length;N++)X=he[N],K=X[0].trace,K.hoverinfo!=="skip"&&r0.isTraceInSubplots(K,a)&&(O.push(X),K.orientation==="h"&&(me=!0));var te=!n,ge,ae;if(te)"xpx"in t?ge=t.xpx:ge=E[0]._length/2,"ypx"in t?ae=t.ypx:ae=S[0]._length/2;else{if(Sot.triggerHandler(e,"plotly_beforehover",t)===!1)return;var _e=n.getBoundingClientRect();ge=t.clientX-_e.left,ae=t.clientY-_e.top,s._calcInverseTransform(e);var Ce=du.apply3DTransform(s._invTransform)(ge,ae);if(ge=Ce[0],ae=Ce[1],ge<0||ge>E[0]._length||ae<0||ae>S[0]._length)return a4.unhoverRaw(e,t)}if(t.pointerX=ge+E[0]._offset,t.pointerY=ae+S[0]._offset,"xval"in t?U=r0.flat(a,t.xval):U=r0.p2c(E,ge),"yval"in t?B=r0.flat(a,t.yval):B=r0.p2c(S,ae),!Vg(U[0])||!Vg(B[0]))return du.warn("Fx.hover failed",t,e),a4.unhoverRaw(e,t)}var qe=1/0;function rt(pn,ki){for(N=0;N<O.length;N++)if(X=O[N],!(!X||!X[0]||!X[0].trace)&&(K=X[0].trace,!(K.visible!==!0||K._length===0)&&["carpet","contourcarpet"].indexOf(K._module.name)===-1)){if(ue=h,r0.isUnifiedHover(ue)&&(ue=ue.charAt(0)),K.type==="splom"?(fe=0,ne=a[fe]):(ne=r0.getSubplot(K),fe=a.indexOf(ne)),oe={cd:X,trace:K,xa:E[fe],ya:S[fe],maxHoverDistance:P,maxSpikeDistance:D,index:!1,distance:Math.min(qe,P),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:tc.defaultLine,name:K.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},s[ne]&&(oe.subplot=s[ne]._subplot),s._splomScenes&&s._splomScenes[K.uid]&&(oe.scene=s._splomScenes[K.uid]),ue==="array"){var qn=t[N];"pointNumber"in qn?(oe.index=qn.pointNumber,ue="closest"):(ue="","xval"in qn&&(ee=qn.xval,ue="x"),"yval"in qn&&(Z=qn.yval,ue=ue?"closest":"y"))}else pn!==void 0&&ki!==void 0?(ee=pn,Z=ki):(ee=U[fe],Z=B[fe]);if(ce=q.length,P!==0)if(K._module&&K._module.hoverPoints){var bi=K._module.hoverPoints(oe,ee,Z,ue,{finiteRange:!0,hoverLayer:s._hoverlayer,hoversubplots:l,gd:e});if(bi)for(var Si,nt=0;nt<bi.length;nt++)Si=bi[nt],Vg(Si.x0)&&Vg(Si.y0)&&q.push(Oot(Si,h))}else du.log("Unrecognized trace type in hover:",K);if(h==="closest"&&q.length>ce&&(q.splice(0,ce),qe=q[0].distance),c&&D!==0&&q.length===0){oe.distance=D,oe.index=!1;var ze=K._module.hoverPoints(oe,ee,Z,"closest",{hoverLayer:s._hoverlayer});if(ze&&(ze=ze.filter(function(vr){return vr.spikeDistance<=D})),ze&&ze.length){var ut,mt=ze.filter(function(vr){return vr.xa.showspikes&&vr.xa.spikesnap!=="hovered data"});if(mt.length){var Ot=mt[0];Vg(Ot.x0)&&Vg(Ot.y0)&&(ut=Ie(Ot),(!le.vLinePoint||le.vLinePoint.spikeDistance>ut.spikeDistance)&&(le.vLinePoint=ut))}var nr=ze.filter(function(vr){return vr.ya.showspikes&&vr.ya.spikesnap!=="hovered data"});if(nr.length){var yr=nr[0];Vg(yr.x0)&&Vg(yr.y0)&&(ut=Ie(yr),(!le.hLinePoint||le.hLinePoint.spikeDistance>ut.spikeDistance)&&(le.hLinePoint=ut))}}}}}rt();function Re(pn,ki,qn){for(var bi=null,Si=1/0,nt,ze=0;ze<pn.length;ze++)x&&x._id!==pn[ze].xa._id||b&&b._id!==pn[ze].ya._id||(nt=pn[ze].spikeDistance,qn&&ze===0&&(nt=-1/0),nt<=Si&&nt<=ki&&(bi=pn[ze],Si=nt));return bi}function Ie(pn){return pn?{xa:pn.xa,ya:pn.ya,x:pn.xSpike!==void 0?pn.xSpike:(pn.x0+pn.x1)/2,y:pn.ySpike!==void 0?pn.ySpike:(pn.y0+pn.y1)/2,distance:pn.distance,spikeDistance:pn.spikeDistance,curveNumber:pn.trace.index,color:pn.color,pointNumber:pn.index}:null}var ot={fullLayout:s,container:s._hoverlayer,event:t},lt=e._spikepoints,ht={vLinePoint:le.vLinePoint,hLinePoint:le.hLinePoint};e._spikepoints=ht;var xt=function(){var pn=q.filter(function(qn){return x&&x._id===qn.xa._id&&b&&b._id===qn.ya._id}),ki=q.filter(function(qn){return!(x&&x._id===qn.xa._id&&b&&b._id===qn.ya._id)});pn.sort(Zae),ki.sort(Zae),q=pn.concat(ki),q=Not(q,h)};xt();var Vt=h.charAt(0),Ht=(Vt==="x"||Vt==="y")&&q[0]&&Dot[q[0].trace.type];if(c&&D!==0&&q.length!==0){var Me=q.filter(function(pn){return pn.ya.showspikes}),Ke=Re(Me,D,Ht);le.hLinePoint=Ie(Ke);var We=q.filter(function(pn){return pn.xa.showspikes}),et=Re(We,D,Ht);le.vLinePoint=Ie(et)}if(q.length===0){var vt=a4.unhoverRaw(e,t);return c&&(le.hLinePoint!==null||le.vLinePoint!==null)&&Jae(lt)&&Kae(e,le,ot),vt}if(c&&Jae(lt)&&Kae(e,le,ot),r0.isXYhover(ue)&&q[0].length!==0&&q[0].trace.type!=="splom"){var at=q[0];Xae[at.trace.type]?q=q.filter(function(pn){return pn.trace.index===at.trace.index}):q=[at];var Xe=q.length,dt=$ae("x",at,s),_t=$ae("y",at,s);rt(dt,_t);var $t=[],Ut={},fr=0,ar=function(pn){var ki=Xae[pn.trace.type]?toe(pn):pn.trace.index;if(!Ut[ki])fr++,Ut[ki]=fr,$t.push(pn);else{var qn=Ut[ki]-1,bi=$t[qn];qn>0&&Math.abs(pn.distance)<Math.abs(bi.distance)&&($t[qn]=pn)}},cr;for(cr=0;cr<Xe;cr++)ar(q[cr]);for(cr=q.length-1;cr>Xe-1;cr--)ar(q[cr]);q=$t,xt()}var It=e._hoverdata,gt=[],kt=aoe(e),Je=ooe(e);for(F=0;F<q.length;F++){var Ze=q[F],At=r0.makeEventData(Ze,Ze.trace,Ze.cd);if(Ze.hovertemplate!==!1){var Se=!1;Ze.cd[Ze.index]&&Ze.cd[Ze.index].ht&&(Se=Ze.cd[Ze.index].ht),Ze.hovertemplate=Se||Ze.trace.hovertemplate||!1}if(Ze.xa&&Ze.ya){var pe=Ze.x0+Ze.xa._offset,Te=Ze.x1+Ze.xa._offset,it=Ze.y0+Ze.ya._offset,Dt=Ze.y1+Ze.ya._offset,Wt=Math.min(pe,Te),er=Math.max(pe,Te),qr=Math.min(it,Dt),Vr=Math.max(it,Dt);At.bbox={x0:Wt+Je,x1:er+Je,y0:qr+kt,y1:Vr+kt}}Ze.eventData=[At],gt.push(At)}e._hoverdata=gt;var mr=h==="y"&&(O.length>1||q.length>1)||h==="closest"&&me&&q.length>1,Fr=tc.combine(s.plot_bgcolor||tc.background,s.paper_bgcolor),nn=roe(q,{gd:e,hovermode:h,rotateLabels:mr,bgColor:Fr,container:s._hoverlayer,outerContainer:s._paper.node(),commonLabelOpts:s.hoverlabel,hoverdistance:s.hoverdistance}),jn=nn.hoverLabels;if(r0.isUnifiedHover(h)||(qot(jn,mr,s,nn.commonLabelBoundingBox),ioe(jn,mr,s._invScaleX,s._invScaleY)),n&&n.tagName){var xn=P2.getComponentMethod("annotations","hasClickToShow")(e,gt);Eot(Px.select(n),xn?"pointer":"")}!n||i||!Bot(e,t,It)||(It&&e.emit("plotly_unhover",{event:t,points:It}),e.emit("plotly_hover",{event:t,points:e._hoverdata,xaxes:E,yaxes:S,xvals:U,yvals:B}))}function toe(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa?e.xa._id:"",e.ya?e.ya._id:""].join(",")}var Fot=/<extra>([\s\S]*)<\/extra>/;function roe(e,t){var r=t.gd,i=r._fullLayout,n=t.hovermode,a=t.rotateLabels,o=t.bgColor,s=t.container,l=t.outerContainer,u=t.commonLabelOpts||{};if(e.length===0)return[[]];var f=t.fontFamily||Rx.HOVERFONT,c=t.fontSize||Rx.HOVERFONTSIZE,h=t.fontWeight||i.font.weight,v=t.fontStyle||i.font.style,d=t.fontVariant||i.font.variant,x=t.fontTextcase||i.font.textcase,b=t.fontLineposition||i.font.lineposition,p=t.fontShadow||i.font.shadow,w=e[0],A=w.xa,T=w.ya,k=n.charAt(0),_=k+"Label",E=w[_];if(E===void 0&&A.type==="multicategory")for(var S=0;S<e.length&&(E=e[S][_],E===void 0);S++);var g=L2(r,l),C=g.top,M=g.width,P=g.height,D=E!==void 0&&w.distance<=t.hoverdistance&&(n==="x"||n==="y");if(D){var q=!0,O,U;for(O=0;O<e.length;O++)if(q&&e[O].zLabel===void 0&&(q=!1),U=e[O].hoverinfo||e[O].trace.hoverinfo,U){var B=Array.isArray(U)?U:U.split("+");if(B.indexOf("all")===-1&&B.indexOf(n)===-1){D=!1;break}}q&&(D=!1)}var F=s.selectAll("g.axistext").data(D?[0]:[]);F.enter().append("g").classed("axistext",!0),F.exit().remove();var N={minX:0,maxX:0,minY:0,maxY:0};if(F.each(function(){var We=Px.select(this),et=du.ensureSingle(We,"path","",function(Wt){Wt.style({"stroke-width":"1px"})}),vt=du.ensureSingle(We,"text","",function(Wt){Wt.attr("data-notex",1)}),at=u.bgcolor||tc.defaultLine,Xe=u.bordercolor||tc.contrast(at),dt=tc.contrast(at),_t=u.font,$t={weight:_t.weight||h,style:_t.style||v,variant:_t.variant||d,textcase:_t.textcase||x,lineposition:_t.lineposition||b,shadow:_t.shadow||p,family:_t.family||f,size:_t.size||c,color:_t.color||dt};et.style({fill:at,stroke:Xe}),vt.text(E).call(V0.font,$t).call(lp.positionText,0,0).call(lp.convertToTspans,r),We.attr("transform","");var Ut=L2(r,vt.node()),fr,ar;if(n==="x"){var cr=A.side==="top"?"-":"";vt.attr("text-anchor","middle").call(lp.positionText,0,A.side==="top"?C-Ut.bottom-Cl-To:C-Ut.top+Cl+To),fr=A._offset+(w.x0+w.x1)/2,ar=T._offset+(A.side==="top"?0:T._length);var It=Ut.width/2+To,gt=fr;fr<It?gt=It:fr>i.width-It&&(gt=i.width-It),et.attr("d","M"+(fr-gt)+",0L"+(fr-gt+Cl)+","+cr+Cl+"H"+It+"v"+cr+(To*2+Ut.height)+"H"+-It+"V"+cr+Cl+"H"+(fr-gt-Cl)+"Z"),fr=gt,N.minX=fr-It,N.maxX=fr+It,A.side==="top"?(N.minY=ar-(To*2+Ut.height),N.maxY=ar-To):(N.minY=ar+To,N.maxY=ar+(To*2+Ut.height))}else{var kt,Je,Ze;T.side==="right"?(kt="start",Je=1,Ze="",fr=A._offset+A._length):(kt="end",Je=-1,Ze="-",fr=A._offset),ar=T._offset+(w.y0+w.y1)/2,vt.attr("text-anchor",kt),et.attr("d","M0,0L"+Ze+Cl+","+Cl+"V"+(To+Ut.height/2)+"h"+Ze+(To*2+Ut.width)+"V-"+(To+Ut.height/2)+"H"+Ze+Cl+"V-"+Cl+"Z"),N.minY=ar-(To+Ut.height/2),N.maxY=ar+(To+Ut.height/2),T.side==="right"?(N.minX=fr+Cl,N.maxX=fr+Cl+(To*2+Ut.width)):(N.minX=fr-Cl-(To*2+Ut.width),N.maxX=fr-Cl);var At=Ut.height/2,Se=C-Ut.top-At,pe="clip"+i._uid+"commonlabel"+T._id,Te;if(fr<Ut.width+2*To+Cl){Te="M-"+(Cl+To)+"-"+At+"h-"+(Ut.width-To)+"V"+At+"h"+(Ut.width-To)+"Z";var it=Ut.width-fr+To;lp.positionText(vt,it,Se),kt==="end"&&vt.selectAll("tspan").each(function(){var Wt=Px.select(this),er=V0.tester.append("text").text(Wt.text()).call(V0.font,$t),qr=L2(r,er.node());Math.round(qr.width)<Math.round(Ut.width)&&Wt.attr("x",it-qr.width),er.remove()})}else lp.positionText(vt,Je*(To+Cl),Se),Te=null;var Dt=i._topclips.selectAll("#"+pe).data(Te?[0]:[]);Dt.enter().append("clipPath").attr("id",pe).append("path"),Dt.exit().remove(),Dt.select("path").attr("d",Te),V0.setClipUrl(vt,Te?pe:null,r)}We.attr("transform",RO(fr,ar))}),r0.isUnifiedHover(n)){s.selectAll("g.hovertext").remove();var X=e.filter(function(We){return We.hoverinfo!=="none"});if(X.length===0)return[];var K=i.hoverlabel,ne=K.font,fe={showlegend:!0,legend:{title:{text:E,font:ne},font:ne,bgcolor:K.bgcolor,bordercolor:K.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:i.legend?i.legend.traceorder:void 0,orientation:"v"}},ue={font:ne};kot(fe,ue,r._fullData);var ee=ue.legend;ee.entries=[];for(var Z=0;Z<X.length;Z++){var oe=X[Z];if(oe.hoverinfo!=="none"){var ce=jae(oe,!0,n,i,E),le=ce[0],me=ce[1];oe.name=me,me!==""?oe.text=me+" : "+le:oe.text=le;var he=oe.cd[oe.index];he&&(he.mc&&(oe.mc=he.mc),he.mcc&&(oe.mc=he.mcc),he.mlc&&(oe.mlc=he.mlc),he.mlcc&&(oe.mlc=he.mlcc),he.mlw&&(oe.mlw=he.mlw),he.mrc&&(oe.mrc=he.mrc),he.dir&&(oe.dir=he.dir)),oe._distinct=!0,ee.entries.push([oe])}}ee.entries.sort(function(We,et){return We[0].trace.index-et[0].trace.index}),ee.layer=s,ee._inHover=!0,ee._groupTitleFont=K.grouptitlefont,Cot(r,ee);var te=s.select("g.legend"),ge=L2(r,te.node()),ae=ge.width+2*To,_e=ge.height+2*To,Ce=X[0],qe=(Ce.x0+Ce.x1)/2,rt=(Ce.y0+Ce.y1)/2,Re=!(P2.traceIs(Ce.trace,"bar-like")||P2.traceIs(Ce.trace,"box-violin")),Ie,ot;k==="y"?Re?(ot=rt-To,Ie=rt+To):(ot=Math.min.apply(null,X.map(function(We){return Math.min(We.y0,We.y1)})),Ie=Math.max.apply(null,X.map(function(We){return Math.max(We.y0,We.y1)}))):ot=Ie=du.mean(X.map(function(We){return(We.y0+We.y1)/2}))-_e/2;var lt,ht;k==="x"?Re?(lt=qe+To,ht=qe-To):(lt=Math.max.apply(null,X.map(function(We){return Math.max(We.x0,We.x1)})),ht=Math.min.apply(null,X.map(function(We){return Math.min(We.x0,We.x1)}))):lt=ht=du.mean(X.map(function(We){return(We.x0+We.x1)/2}))-ae/2;var xt=A._offset,Vt=T._offset;Ie+=Vt,lt+=xt,ht+=xt-ae,ot+=Vt-_e;var Ht,Me;return lt+ae<M&&lt>=0?Ht=lt:ht+ae<M&&ht>=0?Ht=ht:xt+ae<M?Ht=xt:lt-qe<qe-ht+ae?Ht=M-ae:Ht=0,Ht+=To,Ie+_e<P&&Ie>=0?Me=Ie:ot+_e<P&&ot>=0?Me=ot:Vt+_e<P?Me=Vt:Ie-rt<rt-ot+_e?Me=P-_e:Me=0,Me+=To,te.attr("transform",RO(Ht-1,Me-1)),te}var Ke=s.selectAll("g.hovertext").data(e,function(We){return toe(We)});return Ke.enter().append("g").classed("hovertext",!0).each(function(){var We=Px.select(this);We.append("rect").call(tc.fill,tc.addOpacity(o,.8)),We.append("text").classed("name",!0),We.append("path").style("stroke-width","1px"),We.append("text").classed("nums",!0).call(V0.font,{weight:h,style:v,variant:d,textcase:x,lineposition:b,shadow:p,family:f,size:c})}),Ke.exit().remove(),Ke.each(function(We){var et=Px.select(this).attr("transform",""),vt=We.color;Array.isArray(vt)&&(vt=vt[We.eventData[0].pointNumber]);var at=We.bgcolor||vt,Xe=tc.combine(tc.opacity(at)?at:tc.defaultLine,o),dt=tc.combine(tc.opacity(vt)?vt:tc.defaultLine,o),_t=We.borderColor||tc.contrast(Xe),$t=jae(We,D,n,i,E,et),Ut=$t[0],fr=$t[1],ar=et.select("text.nums").call(V0.font,{family:We.fontFamily||f,size:We.fontSize||c,color:We.fontColor||_t,weight:We.fontWeight||h,style:We.fontStyle||v,variant:We.fontVariant||d,textcase:We.fontTextcase||x,lineposition:We.fontLineposition||b,shadow:We.fontShadow||p}).text(Ut).attr("data-notex",1).call(lp.positionText,0,0).call(lp.convertToTspans,r),cr=et.select("text.name"),It=0,gt=0;if(fr&&fr!==Ut){cr.call(V0.font,{family:We.fontFamily||f,size:We.fontSize||c,color:dt,weight:We.fontWeight||h,style:We.fontStyle||v,variant:We.fontVariant||d,textcase:We.fontTextcase||x,lineposition:We.fontLineposition||b,shadow:We.fontShadow||p}).text(fr).attr("data-notex",1).call(lp.positionText,0,0).call(lp.convertToTspans,r);var kt=L2(r,cr.node());It=kt.width+2*To,gt=kt.height+2*To}else cr.remove(),et.select("rect").remove();et.select("path").style({fill:Xe,stroke:_t});var Je=We.xa._offset+(We.x0+We.x1)/2,Ze=We.ya._offset+(We.y0+We.y1)/2,At=Math.abs(We.x1-We.x0),Se=Math.abs(We.y1-We.y0),pe=L2(r,ar.node()),Te=pe.width/i._invScaleX,it=pe.height/i._invScaleY;We.ty0=(C-pe.top)/i._invScaleY,We.bx=Te+2*To,We.by=Math.max(it+2*To,gt),We.anchor="start",We.txwidth=Te,We.tx2width=It,We.offset=0;var Dt=(Te+Cl+To+It)*i._invScaleX,Wt,er;if(a)We.pos=Je,Wt=Ze+Se/2+Dt<=P,er=Ze-Se/2-Dt>=0,(We.idealAlign==="top"||!Wt)&&er?(Ze-=Se/2,We.anchor="end"):Wt?(Ze+=Se/2,We.anchor="start"):We.anchor="middle",We.crossPos=Ze;else{if(We.pos=Ze,Wt=Je+At/2+Dt<=M,er=Je-At/2-Dt>=0,(We.idealAlign==="left"||!Wt)&&er)Je-=At/2,We.anchor="end";else if(Wt)Je+=At/2,We.anchor="start";else{We.anchor="middle";var qr=Dt/2,Vr=Je+qr-M,mr=Je-qr;Vr>0&&(Je-=Vr),mr<0&&(Je+=-mr)}We.crossPos=Je}ar.attr("text-anchor",We.anchor),It&&cr.attr("text-anchor",We.anchor),et.attr("transform",RO(Je,Ze)+(a?Mot(eoe):""))}),{hoverLabels:Ke,commonLabelBoundingBox:N}}function jae(e,t,r,i,n,a){var o="",s="";e.nameOverride!==void 0&&(e.name=e.nameOverride),e.name&&(e.trace._meta&&(e.name=du.templateString(e.name,e.trace._meta)),o=Qae(e.name,e.nameLength));var l=r.charAt(0),u=l==="x"?"y":"x";e.zLabel!==void 0?(e.xLabel!==void 0&&(s+="x: "+e.xLabel+"<br>"),e.yLabel!==void 0&&(s+="y: "+e.yLabel+"<br>"),e.trace.type!=="choropleth"&&e.trace.type!=="choroplethmapbox"&&(s+=(s?"z: ":"")+e.zLabel)):t&&e[l+"Label"]===n?s=e[u+"Label"]||"":e.xLabel===void 0?e.yLabel!==void 0&&e.trace.type!=="scattercarpet"&&(s=e.yLabel):e.yLabel===void 0?s=e.xLabel:s="("+e.xLabel+", "+e.yLabel+")",(e.text||e.text===0)&&!Array.isArray(e.text)&&(s+=(s?"<br>":"")+e.text),e.extraText!==void 0&&(s+=(s?"<br>":"")+e.extraText),a&&s===""&&!e.hovertemplate&&(o===""&&a.remove(),s=o);var f=e.hovertemplate||!1;if(f){var c=e.hovertemplateLabels||e;e[l+"Label"]!==n&&(c[l+"other"]=c[l+"Val"],c[l+"otherLabel"]=c[l+"Label"]),s=du.hovertemplateString(f,c,i._d3locale,e.eventData[0]||{},e.trace._meta),s=s.replace(Fot,function(h,v){return o=Qae(v,e.nameLength),""})}return[s,o]}function qot(e,t,r,i){var n=t?"xa":"ya",a=t?"ya":"xa",o=0,s=1,l=e.size(),u=new Array(l),f=0,c=i.minX,h=i.maxX,v=i.minY,d=i.maxY,x=function(U){return U*r._invScaleX},b=function(U){return U*r._invScaleY};e.each(function(U){var B=U[n],F=U[a],N=B._id.charAt(0)==="x",X=B.range;f===0&&X&&X[0]>X[1]!==N&&(s=-1);var K=0,ne=N?r.width:r.height;if(r.hovermode==="x"||r.hovermode==="y"){var fe=noe(U,t),ue=U.anchor,ee=ue==="end"?-1:1,Z,oe;if(ue==="middle")Z=U.crossPos+(N?b(fe.y-U.by/2):x(U.bx/2+U.tx2width/2)),oe=Z+(N?b(U.by):x(U.bx));else if(N)Z=U.crossPos+b(Cl+fe.y)-b(U.by/2-Cl),oe=Z+b(U.by);else{var ce=x(ee*Cl+fe.x),le=ce+x(ee*U.bx);Z=U.crossPos+Math.min(ce,le),oe=U.crossPos+Math.max(ce,le)}N?v!==void 0&&d!==void 0&&Math.min(oe,d)-Math.max(Z,v)>1&&(F.side==="left"?(K=F._mainLinePosition,ne=r.width):ne=F._mainLinePosition):c!==void 0&&h!==void 0&&Math.min(oe,h)-Math.max(Z,c)>1&&(F.side==="top"?(K=F._mainLinePosition,ne=r.height):ne=F._mainLinePosition)}u[f++]=[{datum:U,traceIndex:U.trace.index,dp:0,pos:U.pos,posref:U.posref,size:U.by*(N?Lot:1)/2,pmin:K,pmax:ne}]}),u.sort(function(U,B){return U[0].posref-B[0].posref||s*(B[0].traceIndex-U[0].traceIndex)});var p,w,A,T,k,_,E;function S(U){var B=U[0],F=U[U.length-1];if(w=B.pmin-B.pos-B.dp+B.size,A=F.pos+F.dp+F.size-B.pmax,w>.01){for(k=U.length-1;k>=0;k--)U[k].dp+=w;p=!1}if(!(A<.01)){if(w<-.01){for(k=U.length-1;k>=0;k--)U[k].dp-=A;p=!1}if(p){var N=0;for(T=0;T<U.length;T++)_=U[T],_.pos+_.dp+_.size>B.pmax&&N++;for(T=U.length-1;T>=0&&!(N<=0);T--)_=U[T],_.pos>B.pmax-1&&(_.del=!0,N--);for(T=0;T<U.length&&!(N<=0);T++)if(_=U[T],_.pos<B.pmin+1)for(_.del=!0,N--,A=_.size*2,k=U.length-1;k>=0;k--)U[k].dp-=A;for(T=U.length-1;T>=0&&!(N<=0);T--)_=U[T],_.pos+_.dp+_.size>B.pmax&&(_.del=!0,N--)}}}for(;!p&&o<=l;){for(o++,p=!0,T=0;T<u.length-1;){var g=u[T],C=u[T+1],M=g[g.length-1],P=C[0];if(w=M.pos+M.dp+M.size-P.pos-P.dp+P.size,w>.01&&M.pmin===P.pmin&&M.pmax===P.pmax){for(k=C.length-1;k>=0;k--)C[k].dp+=w;for(g.push.apply(g,C),u.splice(T+1,1),E=0,k=g.length-1;k>=0;k--)E+=g[k].dp;for(A=E/g.length,k=g.length-1;k>=0;k--)g[k].dp-=A;p=!1}else T++}u.forEach(S)}for(T=u.length-1;T>=0;T--){var D=u[T];for(k=D.length-1;k>=0;k--){var q=D[k],O=q.datum;O.offset=q.dp,O.del=q.del}}}function noe(e,t){var r=0,i=e.offset;return t&&(i*=-Rot,r=e.offset*Pot),{x:r,y:i}}function zot(e){var t={start:1,end:-1,middle:0}[e.anchor],r=t*(Cl+To),i=r+t*(e.txwidth+To),n=e.anchor==="middle";return n&&(r-=e.tx2width/2,i+=e.txwidth/2+To),{alignShift:t,textShiftX:r,text2ShiftX:i}}function ioe(e,t,r,i){var n=function(o){return o*r},a=function(o){return o*i};e.each(function(o){var s=Px.select(this);if(o.del)return s.remove();var l=s.select("text.nums"),u=o.anchor,f=u==="end"?-1:1,c=zot(o),h=noe(o,t),v=h.x,d=h.y,x=u==="middle";s.select("path").attr("d",x?"M-"+n(o.bx/2+o.tx2width/2)+","+a(d-o.by/2)+"h"+n(o.bx)+"v"+a(o.by)+"h-"+n(o.bx)+"Z":"M0,0L"+n(f*Cl+v)+","+a(Cl+d)+"v"+a(o.by/2-Cl)+"h"+n(f*o.bx)+"v-"+a(o.by)+"H"+n(f*Cl+v)+"V"+a(d-Cl)+"Z");var b=v+c.textShiftX,p=d+o.ty0-o.by/2+To,w=o.textAlign||"auto";w!=="auto"&&(w==="left"&&u!=="start"?(l.attr("text-anchor","start"),b=x?-o.bx/2-o.tx2width/2+To:-o.bx-To):w==="right"&&u!=="end"&&(l.attr("text-anchor","end"),b=x?o.bx/2-o.tx2width/2-To:o.bx+To)),l.call(lp.positionText,n(b),a(p)),o.tx2width&&(s.select("text.name").call(lp.positionText,n(c.text2ShiftX+c.alignShift*To+v),a(d+o.ty0-o.by/2+To)),s.select("rect").call(V0.setRect,n(c.text2ShiftX+(c.alignShift-1)*o.tx2width/2+v),a(d-o.by/2-1),n(o.tx2width),a(o.by+2)))})}function Oot(e,t){var r=e.index,i=e.trace||{},n=e.cd[0],a=e.cd[r]||{};function o(h){return h||Vg(h)&&h===0}var s=Array.isArray(r)?function(h,v){var d=du.castOption(n,r,h);return o(d)?d:du.extractOption({},i,"",v)}:function(h,v){return du.extractOption(a,i,h,v)};function l(h,v,d){var x=s(v,d);o(x)&&(e[h]=x)}if(l("hoverinfo","hi","hoverinfo"),l("bgcolor","hbg","hoverlabel.bgcolor"),l("borderColor","hbc","hoverlabel.bordercolor"),l("fontFamily","htf","hoverlabel.font.family"),l("fontSize","hts","hoverlabel.font.size"),l("fontColor","htc","hoverlabel.font.color"),l("fontWeight","htw","hoverlabel.font.weight"),l("fontStyle","hty","hoverlabel.font.style"),l("fontVariant","htv","hoverlabel.font.variant"),l("nameLength","hnl","hoverlabel.namelength"),l("textAlign","hta","hoverlabel.align"),e.posref=t==="y"||t==="closest"&&i.orientation==="h"?e.xa._offset+(e.x0+e.x1)/2:e.ya._offset+(e.y0+e.y1)/2,e.x0=du.constrain(e.x0,0,e.xa._length),e.x1=du.constrain(e.x1,0,e.xa._length),e.y0=du.constrain(e.y0,0,e.ya._length),e.y1=du.constrain(e.y1,0,e.ya._length),e.xLabelVal!==void 0&&(e.xLabel="xLabel"in e?e.xLabel:H0.hoverLabelText(e.xa,e.xLabelVal,i.xhoverformat),e.xVal=e.xa.c2d(e.xLabelVal)),e.yLabelVal!==void 0&&(e.yLabel="yLabel"in e?e.yLabel:H0.hoverLabelText(e.ya,e.yLabelVal,i.yhoverformat),e.yVal=e.ya.c2d(e.yLabelVal)),e.zLabelVal!==void 0&&e.zLabel===void 0&&(e.zLabel=String(e.zLabelVal)),!isNaN(e.xerr)&&!(e.xa.type==="log"&&e.xerr<=0)){var u=H0.tickText(e.xa,e.xa.c2l(e.xerr),"hover").text;e.xerrneg!==void 0?e.xLabel+=" +"+u+" / -"+H0.tickText(e.xa,e.xa.c2l(e.xerrneg),"hover").text:e.xLabel+=" \xB1 "+u,t==="x"&&(e.distance+=1)}if(!isNaN(e.yerr)&&!(e.ya.type==="log"&&e.yerr<=0)){var f=H0.tickText(e.ya,e.ya.c2l(e.yerr),"hover").text;e.yerrneg!==void 0?e.yLabel+=" +"+f+" / -"+H0.tickText(e.ya,e.ya.c2l(e.yerrneg),"hover").text:e.yLabel+=" \xB1 "+f,t==="y"&&(e.distance+=1)}var c=e.hoverinfo||e.trace.hoverinfo;return c&&c!=="all"&&(c=Array.isArray(c)?c:c.split("+"),c.indexOf("x")===-1&&(e.xLabel=void 0),c.indexOf("y")===-1&&(e.yLabel=void 0),c.indexOf("z")===-1&&(e.zLabel=void 0),c.indexOf("text")===-1&&(e.text=void 0),c.indexOf("name")===-1&&(e.name=void 0)),e}function Kae(e,t,r){var i=r.container,n=r.fullLayout,a=n._size,o=r.event,s=!!t.hLinePoint,l=!!t.vLinePoint,u,f;if(i.selectAll(".spikeline").remove(),!!(l||s)){var c=tc.combine(n.plot_bgcolor,n.paper_bgcolor);if(s){var h=t.hLinePoint,v,d;u=h&&h.xa,f=h&&h.ya;var x=f.spikesnap;x==="cursor"?(v=o.pointerX,d=o.pointerY):(v=u._offset+h.x,d=f._offset+h.y);var b=Wae.readability(h.color,c)<1.5?tc.contrast(c):h.color,p=f.spikemode,w=f.spikethickness,A=f.spikecolor||b,T=H0.getPxPosition(e,f),k,_;if(p.indexOf("toaxis")!==-1||p.indexOf("across")!==-1){if(p.indexOf("toaxis")!==-1&&(k=T,_=v),p.indexOf("across")!==-1){var E=f._counterDomainMin,S=f._counterDomainMax;f.anchor==="free"&&(E=Math.min(E,f.position),S=Math.max(S,f.position)),k=a.l+E*a.w,_=a.l+S*a.w}i.insert("line",":first-child").attr({x1:k,x2:_,y1:d,y2:d,"stroke-width":w,stroke:A,"stroke-dasharray":V0.dashStyle(f.spikedash,w)}).classed("spikeline",!0).classed("crisp",!0),i.insert("line",":first-child").attr({x1:k,x2:_,y1:d,y2:d,"stroke-width":w+2,stroke:c}).classed("spikeline",!0).classed("crisp",!0)}p.indexOf("marker")!==-1&&i.insert("circle",":first-child").attr({cx:T+(f.side!=="right"?w:-w),cy:d,r:w,fill:A}).classed("spikeline",!0)}if(l){var g=t.vLinePoint,C,M;u=g&&g.xa,f=g&&g.ya;var P=u.spikesnap;P==="cursor"?(C=o.pointerX,M=o.pointerY):(C=u._offset+g.x,M=f._offset+g.y);var D=Wae.readability(g.color,c)<1.5?tc.contrast(c):g.color,q=u.spikemode,O=u.spikethickness,U=u.spikecolor||D,B=H0.getPxPosition(e,u),F,N;if(q.indexOf("toaxis")!==-1||q.indexOf("across")!==-1){if(q.indexOf("toaxis")!==-1&&(F=B,N=M),q.indexOf("across")!==-1){var X=u._counterDomainMin,K=u._counterDomainMax;u.anchor==="free"&&(X=Math.min(X,u.position),K=Math.max(K,u.position)),F=a.t+(1-K)*a.h,N=a.t+(1-X)*a.h}i.insert("line",":first-child").attr({x1:C,x2:C,y1:F,y2:N,"stroke-width":O,stroke:U,"stroke-dasharray":V0.dashStyle(u.spikedash,O)}).classed("spikeline",!0).classed("crisp",!0),i.insert("line",":first-child").attr({x1:C,x2:C,y1:F,y2:N,"stroke-width":O+2,stroke:c}).classed("spikeline",!0).classed("crisp",!0)}q.indexOf("marker")!==-1&&i.insert("circle",":first-child").attr({cx:C,cy:B-(u.side!=="top"?O:-O),r:O,fill:U}).classed("spikeline",!0)}}}function Bot(e,t,r){if(!r||r.length!==e._hoverdata.length)return!0;for(var i=r.length-1;i>=0;i--){var n=r[i],a=e._hoverdata[i];if(n.curveNumber!==a.curveNumber||String(n.pointNumber)!==String(a.pointNumber)||String(n.pointNumbers)!==String(a.pointNumbers))return!0}return!1}function Jae(e,t){return!t||t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint}function Qae(e,t){return lp.plainText(e||"",{len:t,allowedTags:["br","sub","sup","b","i","em"]})}function Not(e,t){for(var r=t.charAt(0),i=[],n=[],a=[],o=0;o<e.length;o++){var s=e[o];P2.traceIs(s.trace,"bar-like")||P2.traceIs(s.trace,"box-violin")?a.push(s):s.trace[r+"period"]?n.push(s):i.push(s)}return i.concat(n).concat(a)}function $ae(e,t,r){var i=t[e+"a"],n=t[e+"Val"],a=t.cd[0];if(i.type==="category"||i.type==="multicategory")n=i._categoriesMap[n];else if(i.type==="date"){var o=t.trace[e+"periodalignment"];if(o){var s=t.cd[t.index],l=s[e+"Start"];l===void 0&&(l=s[e]);var u=s[e+"End"];u===void 0&&(u=s[e]);var f=u-l;o==="end"?n+=f:o==="middle"&&(n+=f/2)}n=i.d2c(n)}return a&&a.t&&a.t.posLetter===i._id&&(r.boxmode==="group"||r.violinmode==="group")&&(n+=a.t.dPos),n}function aoe(e){return e.offsetTop+e.clientTop}function ooe(e){return e.offsetLeft+e.clientLeft}function L2(e,t){var r=e._fullLayout,i=t.getBoundingClientRect(),n=i.left,a=i.top,o=n+i.width,s=a+i.height,l=du.apply3DTransform(r._invTransform)(n,a),u=du.apply3DTransform(r._invTransform)(o,s),f=l[0],c=l[1],h=u[0],v=u[1];return{x:f,y:c,width:h-f,height:v-c,top:Math.min(c,v),left:Math.min(f,h),right:Math.max(f,h),bottom:Math.max(c,v)}}});var GA=ie((urr,soe)=>{"use strict";var Uot=Zt(),Vot=_i(),Hot=ad().isUnifiedHover;soe.exports=function(t,r,i,n){n=n||{};var a=r.legend;function o(s){n.font[s]||(n.font[s]=a?r.legend.font[s]:r.font[s])}r&&Hot(r.hovermode)&&(n.font||(n.font={}),o("size"),o("family"),o("color"),o("weight"),o("style"),o("variant"),a?(n.bgcolor||(n.bgcolor=Vot.combine(r.legend.bgcolor,r.paper_bgcolor)),n.bordercolor||(n.bordercolor=r.legend.bordercolor)):n.bgcolor||(n.bgcolor=r.paper_bgcolor)),i("hoverlabel.bgcolor",n.bgcolor),i("hoverlabel.bordercolor",n.bordercolor),i("hoverlabel.namelength",n.namelength),Uot.coerceFont(i,"hoverlabel.font",n.font),i("hoverlabel.align",n.align)}});var uoe=ie((frr,loe)=>{"use strict";var Got=Zt(),Yot=GA(),Wot=Dg();loe.exports=function(t,r){function i(n,a){return Got.coerce(t,r,Wot,n,a)}Yot(t,r,i)}});var hoe=ie((crr,coe)=>{"use strict";var foe=Zt(),Xot=$b(),Zot=GA();coe.exports=function(t,r,i,n){function a(s,l){return foe.coerce(t,r,Xot,s,l)}var o=foe.extendFlat({},n.hoverlabel);r.hovertemplate&&(o.namelength=-1),Zot(t,r,a,o)}});var qO=ie((hrr,voe)=>{"use strict";var jot=Zt(),Kot=Dg();voe.exports=function(t,r){function i(n,a){return r[n]!==void 0?r[n]:jot.coerce(t,r,Kot,n,a)}return i("clickmode"),i("hoversubplots"),i("hovermode")}});var goe=ie((vrr,poe)=>{"use strict";var doe=Zt(),Jot=Dg(),Qot=qO(),$ot=GA();poe.exports=function(t,r){function i(u,f){return doe.coerce(t,r,Jot,u,f)}var n=Qot(t,r);n&&(i("hoverdistance"),i("spikedistance"));var a=i("dragmode");a==="select"&&i("selectdirection");var o=r._has("mapbox"),s=r._has("geo"),l=r._basePlotModules.length;r.dragmode==="zoom"&&((o||s)&&l===1||o&&s&&l===2)&&(r.dragmode="pan"),$ot(t,r,i),doe.coerceFont(i,"hoverlabel.grouptitlefont",r.hoverlabel.font)}});var xoe=ie((drr,moe)=>{"use strict";var zO=Zt(),yoe=Ti();moe.exports=function(t){var r=t.calcdata,i=t._fullLayout;function n(u){return function(f){return zO.coerceHoverinfo({hoverinfo:f},{_module:u._module},i)}}for(var a=0;a<r.length;a++){var o=r[a],s=o[0].trace;if(!yoe.traceIs(s,"pie-like")){var l=yoe.traceIs(s,"2dMap")?est:zO.fillArray;l(s.hoverinfo,o,"hi",n(s)),s.hovertemplate&&l(s.hovertemplate,o,"ht"),s.hoverlabel&&(l(s.hoverlabel.bgcolor,o,"hbg"),l(s.hoverlabel.bordercolor,o,"hbc"),l(s.hoverlabel.font.size,o,"hts"),l(s.hoverlabel.font.color,o,"htc"),l(s.hoverlabel.font.family,o,"htf"),l(s.hoverlabel.font.weight,o,"htw"),l(s.hoverlabel.font.style,o,"hty"),l(s.hoverlabel.font.variant,o,"htv"),l(s.hoverlabel.namelength,o,"hnl"),l(s.hoverlabel.align,o,"hta"))}}};function est(e,t,r,i){i=i||zO.identity,Array.isArray(e)&&(t[0][r]=i(e))}});var boe=ie((prr,_oe)=>{"use strict";var tst=Ti(),rst=FO().hover;_oe.exports=function(t,r,i){var n=tst.getComponentMethod("annotations","onClick")(t,t._hoverdata);i!==void 0&&rst(t,r,i,!0);function a(){t.emit("plotly_click",{points:t._hoverdata,event:r})}t._hoverdata&&r&&r.target&&(n&&n.then?n.then(a):a(),r.stopImmediatePropagation&&r.stopImmediatePropagation())}});var Ol=ie((grr,Aoe)=>{"use strict";var nst=Mi(),o4=Zt(),ist=Yh(),YA=ad(),woe=Dg(),Toe=FO();Aoe.exports={moduleType:"component",name:"fx",constants:hA(),schema:{layout:woe},attributes:$b(),layoutAttributes:woe,supplyLayoutGlobalDefaults:uoe(),supplyDefaults:hoe(),supplyLayoutDefaults:goe(),calc:xoe(),getDistanceFunction:YA.getDistanceFunction,getClosest:YA.getClosest,inbox:YA.inbox,quadrature:YA.quadrature,appendArrayPointValue:YA.appendArrayPointValue,castHoverOption:ost,castHoverinfo:sst,hover:Toe.hover,unhover:ist.unhover,loneHover:Toe.loneHover,loneUnhover:ast,click:boe()};function ast(e){var t=o4.isD3Selection(e)?e:nst.select(e);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()}function ost(e,t,r){return o4.castOption(e,t,"hoverlabel."+r)}function sst(e,t,r){function i(n){return o4.coerceHoverinfo({hoverinfo:n},{_module:e._module},t)}return o4.castOption(e,r,"hoverinfo",i)}});var n0=ie(Hg=>{"use strict";Hg.selectMode=function(e){return e==="lasso"||e==="select"};Hg.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"};Hg.openMode=function(e){return e==="drawline"||e==="drawopenpath"};Hg.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"};Hg.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"};Hg.selectingOrDrawing=function(e){return Hg.freeMode(e)||Hg.rectMode(e)}});var WA=ie((mrr,Moe)=>{"use strict";Moe.exports=function(t){var r=t._fullLayout;r._glcanvas&&r._glcanvas.size()&&r._glcanvas.each(function(i){i.regl&&i.regl.clear({color:!0,depth:!0})})}});var s4=ie((xrr,Soe)=>{"use strict";Soe.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}});var u4=ie((_rr,Eoe)=>{"use strict";var l4=32;Eoe.exports={CIRCLE_SIDES:l4,i000:0,i090:l4/4,i180:l4/2,i270:l4/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}});var f4=ie((brr,Coe)=>{"use strict";var lst=Zt().strTranslate;function koe(e,t){switch(e.type){case"log":return e.p2d(t);case"date":return e.p2r(t,0,e.calendar);default:return e.p2r(t)}}function ust(e,t){switch(e.type){case"log":return e.d2p(t);case"date":return e.r2p(t,0,e.calendar);default:return e.r2p(t)}}function fst(e){var t=e._id.charAt(0)==="y"?1:0;return function(r){return koe(e,r[t])}}function cst(e){return lst(e.xaxis._offset,e.yaxis._offset)}Coe.exports={p2r:koe,r2p:ust,axValue:fst,getTransform:cst}});var _m=ie(Gg=>{"use strict";var hst=RA(),Roe=u4(),R2=Roe.CIRCLE_SIDES,OO=Roe.SQRT2,Doe=f4(),Loe=Doe.p2r,Poe=Doe.r2p,vst=[0,3,4,5,6,1,2],dst=[0,3,4,1,2];Gg.writePaths=function(e){var t=e.length;if(!t)return"M0,0Z";for(var r="",i=0;i<t;i++)for(var n=e[i].length,a=0;a<n;a++){var o=e[i][a][0];if(o==="Z")r+="Z";else for(var s=e[i][a].length,l=0;l<s;l++){var u=l;o==="Q"||o==="S"?u=dst[l]:o==="C"&&(u=vst[l]),r+=e[i][a][u],l>0&&l<s-1&&(r+=",")}}return r};Gg.readPaths=function(e,t,r,i){var n=hst(e),a=[],o=-1,s=function(){o++,a[o]=[]},l,u=0,f=0,c,h,v=function(){c=u,h=f};v();for(var d=0;d<n.length;d++){var x=[],b,p,w,A,T=n[d][0],k=T;switch(T){case"M":s(),u=+n[d][1],f=+n[d][2],x.push([k,u,f]),v();break;case"Q":case"S":b=+n[d][1],w=+n[d][2],u=+n[d][3],f=+n[d][4],x.push([k,u,f,b,w]);break;case"C":b=+n[d][1],w=+n[d][2],p=+n[d][3],A=+n[d][4],u=+n[d][5],f=+n[d][6],x.push([k,u,f,b,w,p,A]);break;case"T":case"L":u=+n[d][1],f=+n[d][2],x.push([k,u,f]);break;case"H":k="L",u=+n[d][1],x.push([k,u,f]);break;case"V":k="L",f=+n[d][1],x.push([k,u,f]);break;case"A":k="L";var _=+n[d][1],E=+n[d][2];+n[d][4]||(_=-_,E=-E);var S=u-_,g=f;for(l=1;l<=R2/2;l++){var C=2*Math.PI*l/R2;x.push([k,S+_*Math.cos(C),g+E*Math.sin(C)])}break;case"Z":(u!==c||f!==h)&&(u=c,f=h,x.push([k,u,f]));break}for(var M=(r||{}).domain,P=t._fullLayout._size,D=r&&r.xsizemode==="pixel",q=r&&r.ysizemode==="pixel",O=i===!1,U=0;U<x.length;U++){for(l=0;l+2<7;l+=2){var B=x[U][l+1],F=x[U][l+2];B===void 0||F===void 0||(u=B,f=F,r&&(r.xaxis&&r.xaxis.p2r?(O&&(B-=r.xaxis._offset),D?B=Poe(r.xaxis,r.xanchor)+B:B=Loe(r.xaxis,B)):(O&&(B-=P.l),M?B=M.x[0]+B/P.w:B=B/P.w),r.yaxis&&r.yaxis.p2r?(O&&(F-=r.yaxis._offset),q?F=Poe(r.yaxis,r.yanchor)-F:F=Loe(r.yaxis,F)):(O&&(F-=P.t),M?F=M.y[1]-F/P.h:F=1-F/P.h)),x[U][l+1]=B,x[U][l+2]=F)}a[o].push(x[U].slice())}}return a};function XA(e,t){return Math.abs(e-t)<=1e-6}function c4(e,t){var r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+i*i)}Gg.pointsOnRectangle=function(e){var t=e.length;if(t!==5)return!1;for(var r=1;r<3;r++){var i=e[0][r]-e[1][r],n=e[3][r]-e[2][r];if(!XA(i,n))return!1;var a=e[0][r]-e[3][r],o=e[1][r]-e[2][r];if(!XA(a,o))return!1}return!XA(e[0][1],e[1][1])&&!XA(e[0][1],e[3][1])?!1:!!(c4(e[0],e[1])*c4(e[0],e[3]))};Gg.pointsOnEllipse=function(e){var t=e.length;if(t!==R2+1)return!1;t=R2;for(var r=0;r<t;r++){var i=(t*2-r)%t,n=(t/2+i)%t,a=(t/2+r)%t;if(!XA(c4(e[r],e[a]),c4(e[i],e[n])))return!1}return!0};Gg.handleEllipse=function(e,t,r){if(!e)return[t,r];var i=Gg.ellipseOver({x0:t[0],y0:t[1],x1:r[0],y1:r[1]}),n=(i.x1+i.x0)/2,a=(i.y1+i.y0)/2,o=(i.x1-i.x0)/2,s=(i.y1-i.y0)/2;o||(o=s=s/OO),s||(s=o=o/OO);for(var l=[],u=0;u<R2;u++){var f=u*2*Math.PI/R2;l.push([n+o*Math.cos(f),a+s*Math.sin(f)])}return l};Gg.ellipseOver=function(e){var t=e.x0,r=e.y0,i=e.x1,n=e.y1,a=i-t,o=n-r;t-=a,r-=o;var s=(t+i)/2,l=(r+n)/2,u=OO;return a*=u,o*=u,{x0:s-a,y0:l-o,x1:s+a,y1:l+o}};Gg.fixDatesForPaths=function(e,t,r){var i=t.type==="date",n=r.type==="date";if(!i&&!n)return e;for(var a=0;a<e.length;a++)for(var o=0;o<e[a].length;o++)for(var s=0;s+2<e[a][o].length;s+=2)i&&(e[a][o][s+1]=e[a][o][s+1].replace(" ","_")),n&&(e[a][o][s+2]=e[a][o][s+2].replace(" ","_"));return e}});var d4=ie((Trr,Uoe)=>{"use strict";var Ooe=n0(),pst=Ooe.drawMode,gst=Ooe.openMode,D2=u4(),Ioe=D2.i000,Foe=D2.i090,qoe=D2.i180,zoe=D2.i270,yst=D2.cos45,mst=D2.sin45,Boe=f4(),h4=Boe.p2r,bm=Boe.r2p,xst=um(),_st=xst.clearOutline,v4=_m(),bst=v4.readPaths,wst=v4.writePaths,Tst=v4.ellipseOver,Ast=v4.fixDatesForPaths;function Mst(e,t){if(e.length){var r=e[0][0];if(r){var i=t.gd,n=t.isActiveShape,a=t.dragmode,o=(i.layout||{}).shapes||[];if(!pst(a)&&n!==void 0){var s=i._fullLayout._activeShapeIndex;if(s<o.length)switch(i._fullLayout.shapes[s].type){case"rect":a="drawrect";break;case"circle":a="drawcircle";break;case"line":a="drawline";break;case"path":var l=o[s].path||"";l[l.length-1]==="Z"?a="drawclosedpath":a="drawopenpath";break}}var u=Noe(e,t,a);_st(i);for(var f=t.editHelpers,c=(f||{}).modifyItem,h=[],v=0;v<o.length;v++){var d=i._fullLayout.shapes[v];if(h[v]=d._input,n!==void 0&&v===i._fullLayout._activeShapeIndex){var x=u;switch(d.type){case"line":case"rect":case"circle":c("x0",x.x0),c("x1",x.x1),c("y0",x.y0),c("y1",x.y1);break;case"path":c("path",x.path);break}}}return n===void 0?(h.push(u),h):f?f.getUpdateObj():{}}}}function Noe(e,t,r){var i=e[0][0],n=t.gd,a=i.getAttribute("d"),o=n._fullLayout.newshape,s=t.plotinfo,l=t.isActiveShape,u=s.xaxis,f=s.yaxis,c=!!s.domain||!s.xaxis,h=!!s.domain||!s.yaxis,v=gst(r),d=bst(a,n,s,l),x={editable:!0,visible:o.visible,name:o.name,showlegend:o.showlegend,legend:o.legend,legendwidth:o.legendwidth,legendgroup:o.legendgroup,legendgrouptitle:{text:o.legendgrouptitle.text,font:o.legendgrouptitle.font},legendrank:o.legendrank,label:o.label,xref:c?"paper":u._id,yref:h?"paper":f._id,layer:o.layer,opacity:o.opacity,line:{color:o.line.color,width:o.line.width,dash:o.line.dash}};v||(x.fillcolor=o.fillcolor,x.fillrule=o.fillrule);var b;if(d.length===1&&(b=d[0]),b&&b.length===5&&r==="drawrect")x.type="rect",x.x0=b[0][1],x.y0=b[0][2],x.x1=b[2][1],x.y1=b[2][2];else if(b&&r==="drawline")x.type="line",x.x0=b[0][1],x.y0=b[0][2],x.x1=b[1][1],x.y1=b[1][2];else if(b&&r==="drawcircle"){x.type="circle";var p=b[Ioe][1],w=b[Foe][1],A=b[qoe][1],T=b[zoe][1],k=b[Ioe][2],_=b[Foe][2],E=b[qoe][2],S=b[zoe][2],g=s.xaxis&&(s.xaxis.type==="date"||s.xaxis.type==="log"),C=s.yaxis&&(s.yaxis.type==="date"||s.yaxis.type==="log");g&&(p=bm(s.xaxis,p),w=bm(s.xaxis,w),A=bm(s.xaxis,A),T=bm(s.xaxis,T)),C&&(k=bm(s.yaxis,k),_=bm(s.yaxis,_),E=bm(s.yaxis,E),S=bm(s.yaxis,S));var M=(w+T)/2,P=(k+E)/2,D=(T-w+A-p)/2,q=(S-_+E-k)/2,O=Tst({x0:M,y0:P,x1:M+D*yst,y1:P+q*mst});g&&(O.x0=h4(s.xaxis,O.x0),O.x1=h4(s.xaxis,O.x1)),C&&(O.y0=h4(s.yaxis,O.y0),O.y1=h4(s.yaxis,O.y1)),x.x0=O.x0,x.y0=O.y0,x.x1=O.x1,x.y1=O.y1}else x.type="path",u&&f&&Ast(d,u,f),x.path=wst(d),b=null;return x}Uoe.exports={newShapes:Mst,createShapeObj:Noe}});var NO=ie((Arr,Voe)=>{"use strict";var Sst=n0(),Est=Sst.selectMode,kst=um(),Cst=kst.clearOutline,BO=_m(),Lst=BO.readPaths,Pst=BO.writePaths,Rst=BO.fixDatesForPaths;Voe.exports=function(t,r){if(t.length){var i=t[0][0];if(i){var n=i.getAttribute("d"),a=r.gd,o=a._fullLayout.newselection,s=r.plotinfo,l=s.xaxis,u=s.yaxis,f=r.isActiveSelection,c=r.dragmode,h=(a.layout||{}).selections||[];if(!Est(c)&&f!==void 0){var v=a._fullLayout._activeSelectionIndex;if(v<h.length)switch(a._fullLayout.selections[v].type){case"rect":c="select";break;case"path":c="lasso";break}}var d=Lst(n,a,s,f),x={xref:l._id,yref:u._id,opacity:o.opacity,line:{color:o.line.color,width:o.line.width,dash:o.line.dash}},b;d.length===1&&(b=d[0]),b&&b.length===5&&c==="select"?(x.type="rect",x.x0=b[0][1],x.y0=b[0][2],x.x1=b[2][1],x.y1=b[2][2]):(x.type="path",l&&u&&Rst(d,l,u),x.path=Pst(d),b=null),Cst(a);for(var p=r.editHelpers,w=(p||{}).modifyItem,A=[],T=0;T<h.length;T++){var k=a._fullLayout.selections[T];if(!k){A[T]=k;continue}if(A[T]=k._input,f!==void 0&&T===a._fullLayout._activeSelectionIndex){var _=x;switch(k.type){case"rect":w("x0",_.x0),w("x1",_.x1),w("y0",_.y0),w("y1",_.y1);break;case"path":w("path",_.path);break}}}return f===void 0?(A.push(x),A):p?p.getUpdateObj():{}}}}});var ZA=ie((Mrr,Hoe)=>{"use strict";Hoe.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}});var wm=ie(yc=>{"use strict";var Dx=ZA(),Goe=Zt(),p4=Wi();yc.rangeToShapePosition=function(e){return e.type==="log"?e.r2d:function(t){return t}};yc.shapePositionToRange=function(e){return e.type==="log"?e.d2r:function(t){return t}};yc.decodeDate=function(e){return function(t){return t.replace&&(t=t.replace("_"," ")),e(t)}};yc.encodeDate=function(e){return function(t){return e(t).replace(" ","_")}};yc.extractPathCoords=function(e,t,r){var i=[],n=e.match(Dx.segmentRE);return n.forEach(function(a){var o=t[a.charAt(0)].drawn;if(o!==void 0){var s=a.substr(1).match(Dx.paramRE);if(!(!s||s.length<o)){var l=s[o],u=r?l:Goe.cleanNumber(l);i.push(u)}}}),i};yc.getDataToPixel=function(e,t,r,i){var n=e._fullLayout._size,a;if(t)if(i==="domain")a=function(s){return t._length*(r?1-s:s)+t._offset};else{var o=yc.shapePositionToRange(t);a=function(s){return t._offset+t.r2p(o(s,!0))},t.type==="date"&&(a=yc.decodeDate(a))}else r?a=function(s){return n.t+n.h*(1-s)}:a=function(s){return n.l+n.w*s};return a};yc.getPixelToData=function(e,t,r,i){var n=e._fullLayout._size,a;if(t)if(i==="domain")a=function(s){var l=(s-t._offset)/t._length;return r?1-l:l};else{var o=yc.rangeToShapePosition(t);a=function(s){return o(t.p2r(s-t._offset))}}else r?a=function(s){return 1-(s-n.t)/n.h}:a=function(s){return(s-n.l)/n.w};return a};yc.roundPositionForSharpStrokeRendering=function(e,t){var r=Math.round(t%2)===1,i=Math.round(e);return r?i+.5:i};yc.makeShapesOptionsAndPlotinfo=function(e,t){var r=e._fullLayout.shapes[t]||{},i=e._fullLayout._plots[r.xref+r.yref],n=!!i;return n?i._hadPlotinfo=!0:(i={},r.xref&&r.xref!=="paper"&&(i.xaxis=e._fullLayout[r.xref+"axis"]),r.yref&&r.yref!=="paper"&&(i.yaxis=e._fullLayout[r.yref+"axis"])),i.xsizemode=r.xsizemode,i.ysizemode=r.ysizemode,i.xanchor=r.xanchor,i.yanchor=r.yanchor,{options:r,plotinfo:i}};yc.makeSelectionsOptionsAndPlotinfo=function(e,t){var r=e._fullLayout.selections[t]||{},i=e._fullLayout._plots[r.xref+r.yref],n=!!i;return n?i._hadPlotinfo=!0:(i={},r.xref&&(i.xaxis=e._fullLayout[r.xref+"axis"]),r.yref&&(i.yaxis=e._fullLayout[r.yref+"axis"])),{options:r,plotinfo:i}};yc.getPathString=function(e,t){var r=t.type,i=p4.getRefType(t.xref),n=p4.getRefType(t.yref),a=p4.getFromId(e,t.xref),o=p4.getFromId(e,t.yref),s=e._fullLayout._size,l,u,f,c,h,v,d,x;if(a?i==="domain"?u=function(g){return a._offset+a._length*g}:(l=yc.shapePositionToRange(a),u=function(g){return a._offset+a.r2p(l(g,!0))}):u=function(g){return s.l+s.w*g},o?n==="domain"?c=function(g){return o._offset+o._length*(1-g)}:(f=yc.shapePositionToRange(o),c=function(g){return o._offset+o.r2p(f(g,!0))}):c=function(g){return s.t+s.h*(1-g)},r==="path")return a&&a.type==="date"&&(u=yc.decodeDate(u)),o&&o.type==="date"&&(c=yc.decodeDate(c)),Dst(t,u,c);if(t.xsizemode==="pixel"){var b=u(t.xanchor);h=b+t.x0,v=b+t.x1}else h=u(t.x0),v=u(t.x1);if(t.ysizemode==="pixel"){var p=c(t.yanchor);d=p-t.y0,x=p-t.y1}else d=c(t.y0),x=c(t.y1);if(r==="line")return"M"+h+","+d+"L"+v+","+x;if(r==="rect")return"M"+h+","+d+"H"+v+"V"+x+"H"+h+"Z";var w=(h+v)/2,A=(d+x)/2,T=Math.abs(w-h),k=Math.abs(A-d),_="A"+T+","+k,E=w+T+","+A,S=w+","+(A-k);return"M"+E+_+" 0 1,1 "+S+_+" 0 0,1 "+E+"Z"};function Dst(e,t,r){var i=e.path,n=e.xsizemode,a=e.ysizemode,o=e.xanchor,s=e.yanchor;return i.replace(Dx.segmentRE,function(l){var u=0,f=l.charAt(0),c=Dx.paramIsX[f],h=Dx.paramIsY[f],v=Dx.numParams[f],d=l.substr(1).replace(Dx.paramRE,function(x){return c[u]?n==="pixel"?x=t(o)+Number(x):x=t(x):h[u]&&(a==="pixel"?x=r(s)-Number(x):x=r(x)),u++,u>v&&(x="X"),x});return u>v&&(d=d.replace(/[\s,]*X.*/,""),Goe.log("Ignoring extra params in segment "+l)),f+d})}});var VO=ie((Err,Zoe)=>{"use strict";var Ist=Zt(),I2=Wi(),Yoe=ks(),Woe=oa(),Fst=_m().readPaths,UO=wm(),qst=UO.getPathString,Xoe=Wk(),zst=Mf().FROM_TL;Zoe.exports=function(t,r,i,n){if(n.selectAll(".shape-label").remove(),!!(i.label.text||i.label.texttemplate)){var a;if(i.label.texttemplate){var o={};if(i.type!=="path"){var s=I2.getFromId(t,i.xref),l=I2.getFromId(t,i.yref);for(var u in Xoe){var f=Xoe[u](i,s,l);f!==void 0&&(o[u]=f)}}a=Ist.texttemplateStringForShapes(i.label.texttemplate,{},t._fullLayout._d3locale,o)}else a=i.label.text;var c={"data-index":r},h=i.label.font,v={"data-notex":1},d=n.append("g").attr(c).classed("shape-label",!0),x=d.append("text").attr(v).classed("shape-label-text",!0).text(a),b,p,w,A;if(i.path){var T=qst(t,i),k=Fst(T,t);b=1/0,w=1/0,p=-1/0,A=-1/0;for(var _=0;_<k.length;_++)for(var E=0;E<k[_].length;E++)for(var S=k[_][E],g=1;g<S.length;g+=2){var C=S[g],M=S[g+1];b=Math.min(b,C),p=Math.max(p,C),w=Math.min(w,M),A=Math.max(A,M)}}else{var P=I2.getFromId(t,i.xref),D=I2.getRefType(i.xref),q=I2.getFromId(t,i.yref),O=I2.getRefType(i.yref),U=UO.getDataToPixel(t,P,!1,D),B=UO.getDataToPixel(t,q,!0,O);b=U(i.x0),p=U(i.x1),w=B(i.y0),A=B(i.y1)}var F=i.label.textangle;F==="auto"&&(i.type==="line"?F=Ost(b,w,p,A):F=0),x.call(function(ue){return ue.call(Woe.font,h).attr({}),Yoe.convertToTspans(ue,t),ue});var N=Woe.bBox(x.node()),X=Bst(b,w,p,A,i,F,N),K=X.textx,ne=X.texty,fe=X.xanchor;x.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[fe],y:ne,x:K,transform:"rotate("+F+","+K+","+ne+")"}).call(Yoe.positionText,K,ne)}};function Ost(e,t,r,i){var n,a;return a=Math.abs(r-e),r>=e?n=t-i:n=i-t,-180/Math.PI*Math.atan2(n,a)}function Bst(e,t,r,i,n,a,o){var s=n.label.textposition,l=n.label.textangle,u=n.label.padding,f=n.type,c=Math.PI/180*a,h=Math.sin(c),v=Math.cos(c),d=n.label.xanchor,x=n.label.yanchor,b,p,w,A;if(f==="line"){s==="start"?(b=e,p=t):s==="end"?(b=r,p=i):(b=(e+r)/2,p=(t+i)/2),d==="auto"&&(s==="start"?l==="auto"?r>e?d="left":r<e?d="right":d="center":r>e?d="right":r<e?d="left":d="center":s==="end"?l==="auto"?r>e?d="right":r<e?d="left":d="center":r>e?d="left":r<e?d="right":d="center":d="center");var T={left:1,center:0,right:-1},k={bottom:-1,middle:0,top:1};if(l==="auto"){var _=k[x];w=-u*h*_,A=u*v*_}else{var E=T[d],S=k[x];w=u*E,A=u*S}b=b+w,p=p+A}else w=u+3,s.indexOf("right")!==-1?(b=Math.max(e,r)-w,d==="auto"&&(d="right")):s.indexOf("left")!==-1?(b=Math.min(e,r)+w,d==="auto"&&(d="left")):(b=(e+r)/2,d==="auto"&&(d="center")),s.indexOf("top")!==-1?p=Math.min(t,i):s.indexOf("bottom")!==-1?p=Math.max(t,i):p=(t+i)/2,A=u,x==="bottom"?p=p-A:x==="top"&&(p=p+A);var g=zst[x],C=n.label.font.size,M=o.height,P=(M*g-C)*h,D=-(M*g-C)*v;return{textx:b+P,texty:p+D,xanchor:d}}});var m4=ie((krr,rse)=>{"use strict";var Nst=Zt(),Ust=Nst.strTranslate,joe=Yh(),Qoe=n0(),Vst=Qoe.drawMode,$oe=Qoe.selectMode,ese=Ti(),Koe=_i(),y4=u4(),Hst=y4.i000,Gst=y4.i090,Yst=y4.i180,Wst=y4.i270,Xst=um(),tse=Xst.clearOutlineControllers,GO=_m(),g4=GO.pointsOnRectangle,HO=GO.pointsOnEllipse,Zst=GO.writePaths,jst=d4().newShapes,Kst=d4().createShapeObj,Jst=NO(),Qst=VO();rse.exports=function e(t,r,i,n){n||(n=0);var a=i.gd;function o(){e(t,r,i,n++),(HO(t[0])||i.hasText)&&s({redrawing:!0})}function s(B){var F={};i.isActiveShape!==void 0&&(i.isActiveShape=!1,F=jst(r,i)),i.isActiveSelection!==void 0&&(i.isActiveSelection=!1,F=Jst(r,i),a._fullLayout._reselect=!0),Object.keys(F).length&&ese.call((B||{}).redrawing?"relayout":"_guiRelayout",a,F)}var l=a._fullLayout,u=l._zoomlayer,f=i.dragmode,c=Vst(f),h=$oe(f);(c||h)&&(a._fullLayout._outlining=!0),tse(a),r.attr("d",Zst(t));var v,d,x,b,p;if(!n&&(i.isActiveShape||i.isActiveSelection)){p=$st([],t);var w=u.append("g").attr("class","outline-controllers");C(w),U()}if(c&&i.hasText){var A=u.select(".label-temp"),T=Kst(r,i,i.dragmode);Qst(a,"label-temp",T,A)}function k(B){x=+B.srcElement.getAttribute("data-i"),b=+B.srcElement.getAttribute("data-j"),v[x][b].moveFn=_}function _(B,F){if(t.length){var N=p[x][b][1],X=p[x][b][2],K=t[x],ne=K.length;if(g4(K)){var fe=B,ue=F;if(i.isActiveSelection){var ee=Joe(K,b);ee[1]===K[b][1]?ue=0:fe=0}for(var Z=0;Z<ne;Z++)if(Z!==b){var oe=K[Z];oe[1]===K[b][1]&&(oe[1]=N+fe),oe[2]===K[b][2]&&(oe[2]=X+ue)}if(K[b][1]=N+fe,K[b][2]=X+ue,!g4(K))for(var ce=0;ce<ne;ce++)for(var le=0;le<K[ce].length;le++)K[ce][le]=p[x][ce][le]}else K[b][1]=N+B,K[b][2]=X+F;o()}}function E(){s()}function S(){if(t.length&&t[x]&&t[x].length){for(var B=[],F=0;F<t[x].length;F++)F!==b&&B.push(t[x][F]);B.length>1&&!(B.length===2&&B[1][0]==="Z")&&(b===0&&(B[0][0]="M"),t[x]=B,o(),s())}}function g(B,F){if(B===2){x=+F.srcElement.getAttribute("data-i"),b=+F.srcElement.getAttribute("data-j");var N=t[x];!g4(N)&&!HO(N)&&S()}}function C(B){v=[];for(var F=0;F<t.length;F++){var N=t[F],X=g4(N),K=!X&&HO(N);v[F]=[];for(var ne=N.length,fe=0;fe<ne;fe++)if(N[fe][0]!=="Z"&&!(K&&fe!==Hst&&fe!==Gst&&fe!==Yst&&fe!==Wst)){var ue=X&&i.isActiveSelection,ee;ue&&(ee=Joe(N,fe));var Z=N[fe][1],oe=N[fe][2],ce=B.append(ue?"rect":"circle").attr("data-i",F).attr("data-j",fe).style({fill:Koe.background,stroke:Koe.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(ue){var le=ee[1]-Z,me=ee[2]-oe,he=me?5:Math.max(Math.min(25,Math.abs(le)-5),5),te=le?5:Math.max(Math.min(25,Math.abs(me)-5),5);ce.classed(me?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",he).attr("height",te).attr("x",Z-he/2).attr("y",oe-te/2).attr("transform",Ust(le/2,me/2))}else ce.classed("cursor-grab",!0).attr("r",5).attr("cx",Z).attr("cy",oe);v[F][fe]={element:ce.node(),gd:a,prepFn:k,doneFn:E,clickFn:g},joe.init(v[F][fe])}}}function M(B,F){if(t.length)for(var N=0;N<t.length;N++)for(var X=0;X<t[N].length;X++)for(var K=0;K+2<t[N][X].length;K+=2)t[N][X][K+1]=p[N][X][K+1]+B,t[N][X][K+2]=p[N][X][K+2]+F}function P(B,F){M(B,F),o()}function D(B){x=+B.srcElement.getAttribute("data-i"),x||(x=0),d[x].moveFn=P}function q(){s()}function O(B){B===2&&elt(a)}function U(){if(d=[],!!t.length){var B=0;d[B]={element:r[0][0],gd:a,prepFn:D,doneFn:q,clickFn:O},joe.init(d[B])}}};function $st(e,t){for(var r=0;r<t.length;r++){var i=t[r];e[r]=[];for(var n=0;n<i.length;n++){e[r][n]=[];for(var a=0;a<i[n].length;a++)e[r][n][a]=i[n][a]}}return e}function Joe(e,t){var r=e[t][1],i=e[t][2],n=e.length,a,o,s;return a=(t+1)%n,o=e[a][1],s=e[a][2],o===r&&s===i&&(a=(t+2)%n,o=e[a][1],s=e[a][2]),[a,o,s]}function elt(e){if($oe(e._fullLayout.dragmode)){tse(e);var t=e._fullLayout._activeSelectionIndex,r=(e.layout||{}).selections||[];if(t<r.length){for(var i=[],n=0;n<r.length;n++)n!==t&&i.push(r[n]);delete e._fullLayout._activeSelectionIndex;var a=e._fullLayout.selections[t];e._fullLayout._deselect={xref:a.xref,yref:a.yref},ese.call("_guiRelayout",e,{selections:i})}}}});var w4=ie((Crr,hse)=>{"use strict";var tlt=Mi(),lse=Ti(),nse=Zt(),F2=Wi(),rlt=_m().readPaths,nlt=m4(),_4=VO(),use=um().clearOutlineControllers,YO=_i(),XO=oa(),ilt=ko().arrayEditor,ise=Yh(),ase=t0(),Ix=ZA(),sd=wm(),WO=sd.getPathString;hse.exports={draw:ZO,drawOne:fse,eraseActiveShape:slt,drawLabel:_4};function ZO(e){var t=e._fullLayout;t._shapeUpperLayer.selectAll("path").remove(),t._shapeLowerLayer.selectAll("path").remove(),t._shapeUpperLayer.selectAll("text").remove(),t._shapeLowerLayer.selectAll("text").remove();for(var r in t._plots){var i=t._plots[r].shapelayer;i&&(i.selectAll("path").remove(),i.selectAll("text").remove())}for(var n=0;n<t.shapes.length;n++)t.shapes[n].visible===!0&&fse(e,n)}function x4(e){return!!e._fullLayout._outlining}function b4(e){return!e._context.edits.shapePosition}function fse(e,t){e._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+t+'"]').remove();var r=sd.makeShapesOptionsAndPlotinfo(e,t),i=r.options,n=r.plotinfo;if(!i._input||i.visible!==!0)return;if(i.layer==="above")o(e._fullLayout._shapeUpperLayer);else if(i.xref==="paper"||i.yref==="paper")o(e._fullLayout._shapeLowerLayer);else if(i.layer==="between")o(n.shapelayerBetween);else if(n._hadPlotinfo){var a=n.mainplotinfo||n;o(a.shapelayer)}else o(e._fullLayout._shapeLowerLayer);function o(s){var l=WO(e,i),u={"data-index":t,"fill-rule":i.fillrule,d:l},f=i.opacity,c=i.fillcolor,h=i.line.width?i.line.color:"rgba(0,0,0,0)",v=i.line.width,d=i.line.dash;!v&&i.editable===!0&&(v=5,d="solid");var x=l[l.length-1]!=="Z",b=b4(e)&&i.editable&&e._fullLayout._activeShapeIndex===t;b&&(c=x?"rgba(0,0,0,0)":e._fullLayout.activeshape.fillcolor,f=e._fullLayout.activeshape.opacity);var p=s.append("g").classed("shape-group",!0).attr({"data-index":t}),w=p.append("path").attr(u).style("opacity",f).call(YO.stroke,h).call(YO.fill,c).call(XO.dashLine,d,v);cse(p,e,i),_4(e,t,i,p);var A;if((b||e._context.edits.shapePosition)&&(A=ilt(e.layout,"shapes",i)),b){w.style({cursor:"move"});var T={element:w.node(),plotinfo:n,gd:e,editHelpers:A,hasText:i.label.text||i.label.texttemplate,isActiveShape:!0},k=rlt(l,e);nlt(k,w,T)}else e._context.edits.shapePosition?alt(e,w,i,t,s,A):i.editable===!0&&w.style("pointer-events",x||YO.opacity(c)*f<=.5?"stroke":"all");w.node().addEventListener("click",function(){return olt(e,w)})}}function cse(e,t,r){var i=(r.xref+r.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");XO.setClipUrl(e,i?"clip"+t._fullLayout._uid+i:null,t)}function alt(e,t,r,i,n,a){var o=10,s=10,l=r.xsizemode==="pixel",u=r.ysizemode==="pixel",f=r.type==="line",c=r.type==="path",h=a.modifyItem,v,d,x,b,p,w,A,T,k,_,E,S,g,C,M,P=tlt.select(t.node().parentNode),D=F2.getFromId(e,r.xref),q=F2.getRefType(r.xref),O=F2.getFromId(e,r.yref),U=F2.getRefType(r.yref),B=sd.getDataToPixel(e,D,!1,q),F=sd.getDataToPixel(e,O,!0,U),N=sd.getPixelToData(e,D,!1,q),X=sd.getPixelToData(e,O,!0,U),K=ue(),ne={element:K.node(),gd:e,prepFn:oe,doneFn:ce,clickFn:le},fe;ise.init(ne),K.node().onmousemove=Z;function ue(){return f?ee():t}function ee(){var _e=10,Ce=Math.max(r.line.width,_e),qe=n.append("g").attr("data-index",i).attr("drag-helper",!0);qe.append("path").attr("d",t.attr("d")).style({cursor:"move","stroke-width":Ce,"stroke-opacity":"0"});var rt={"fill-opacity":"0"},Re=Math.max(Ce/2,_e);return qe.append("circle").attr({"data-line-point":"start-point",cx:l?B(r.xanchor)+r.x0:B(r.x0),cy:u?F(r.yanchor)-r.y0:F(r.y0),r:Re}).style(rt).classed("cursor-grab",!0),qe.append("circle").attr({"data-line-point":"end-point",cx:l?B(r.xanchor)+r.x1:B(r.x1),cy:u?F(r.yanchor)-r.y1:F(r.y1),r:Re}).style(rt).classed("cursor-grab",!0),qe}function Z(_e){if(x4(e)){fe=null;return}if(f)_e.target.tagName==="path"?fe="move":fe=_e.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Ce=ne.element.getBoundingClientRect(),qe=Ce.right-Ce.left,rt=Ce.bottom-Ce.top,Re=_e.clientX-Ce.left,Ie=_e.clientY-Ce.top,ot=!c&&qe>o&&rt>s&&!_e.shiftKey?ise.getCursor(Re/qe,1-Ie/rt):"move";ase(t,ot),fe=ot.split("-")[0]}}function oe(_e){x4(e)||(l&&(p=B(r.xanchor)),u&&(w=F(r.yanchor)),r.type==="path"?M=r.path:(v=l?r.x0:B(r.x0),d=u?r.y0:F(r.y0),x=l?r.x1:B(r.x1),b=u?r.y1:F(r.y1)),v<x?(k=v,g="x0",_=x,C="x1"):(k=x,g="x1",_=v,C="x0"),!u&&d<b||u&&d>b?(A=d,E="y0",T=b,S="y1"):(A=b,E="y1",T=d,S="y0"),Z(_e),te(n,r),ae(t,r,e),ne.moveFn=fe==="move"?me:he,ne.altKey=_e.altKey)}function ce(){x4(e)||(ase(t),ge(n),cse(t,e,r),lse.call("_guiRelayout",e,a.getUpdateObj()))}function le(){x4(e)||ge(n)}function me(_e,Ce){if(r.type==="path"){var qe=function(Ie){return Ie},rt=qe,Re=qe;l?h("xanchor",r.xanchor=N(p+_e)):(rt=function(ot){return N(B(ot)+_e)},D&&D.type==="date"&&(rt=sd.encodeDate(rt))),u?h("yanchor",r.yanchor=X(w+Ce)):(Re=function(ot){return X(F(ot)+Ce)},O&&O.type==="date"&&(Re=sd.encodeDate(Re))),h("path",r.path=ose(M,rt,Re))}else l?h("xanchor",r.xanchor=N(p+_e)):(h("x0",r.x0=N(v+_e)),h("x1",r.x1=N(x+_e))),u?h("yanchor",r.yanchor=X(w+Ce)):(h("y0",r.y0=X(d+Ce)),h("y1",r.y1=X(b+Ce)));t.attr("d",WO(e,r)),te(n,r),_4(e,i,r,P)}function he(_e,Ce){if(c){var qe=function(Xe){return Xe},rt=qe,Re=qe;l?h("xanchor",r.xanchor=N(p+_e)):(rt=function(dt){return N(B(dt)+_e)},D&&D.type==="date"&&(rt=sd.encodeDate(rt))),u?h("yanchor",r.yanchor=X(w+Ce)):(Re=function(dt){return X(F(dt)+Ce)},O&&O.type==="date"&&(Re=sd.encodeDate(Re))),h("path",r.path=ose(M,rt,Re))}else if(f){if(fe==="resize-over-start-point"){var Ie=v+_e,ot=u?d-Ce:d+Ce;h("x0",r.x0=l?Ie:N(Ie)),h("y0",r.y0=u?ot:X(ot))}else if(fe==="resize-over-end-point"){var lt=x+_e,ht=u?b-Ce:b+Ce;h("x1",r.x1=l?lt:N(lt)),h("y1",r.y1=u?ht:X(ht))}}else{var xt=function(Xe){return fe.indexOf(Xe)!==-1},Vt=xt("n"),Ht=xt("s"),Me=xt("w"),Ke=xt("e"),We=Vt?A+Ce:A,et=Ht?T+Ce:T,vt=Me?k+_e:k,at=Ke?_+_e:_;u&&(Vt&&(We=A-Ce),Ht&&(et=T-Ce)),(!u&&et-We>s||u&&We-et>s)&&(h(E,r[E]=u?We:X(We)),h(S,r[S]=u?et:X(et))),at-vt>o&&(h(g,r[g]=l?vt:N(vt)),h(C,r[C]=l?at:N(at)))}t.attr("d",WO(e,r)),te(n,r),_4(e,i,r,P)}function te(_e,Ce){(l||u)&&qe();function qe(){var rt=Ce.type!=="path",Re=_e.selectAll(".visual-cue").data([0]),Ie=1;Re.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":Ie}).classed("visual-cue",!0);var ot=B(l?Ce.xanchor:nse.midRange(rt?[Ce.x0,Ce.x1]:sd.extractPathCoords(Ce.path,Ix.paramIsX))),lt=F(u?Ce.yanchor:nse.midRange(rt?[Ce.y0,Ce.y1]:sd.extractPathCoords(Ce.path,Ix.paramIsY)));if(ot=sd.roundPositionForSharpStrokeRendering(ot,Ie),lt=sd.roundPositionForSharpStrokeRendering(lt,Ie),l&&u){var ht="M"+(ot-1-Ie)+","+(lt-1-Ie)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";Re.attr("d",ht)}else if(l){var xt="M"+(ot-1-Ie)+","+(lt-9-Ie)+"v18 h2 v-18 Z";Re.attr("d",xt)}else{var Vt="M"+(ot-9-Ie)+","+(lt-1-Ie)+"h18 v2 h-18 Z";Re.attr("d",Vt)}}}function ge(_e){_e.selectAll(".visual-cue").remove()}function ae(_e,Ce,qe){var rt=Ce.xref,Re=Ce.yref,Ie=F2.getFromId(qe,rt),ot=F2.getFromId(qe,Re),lt="";rt!=="paper"&&!Ie.autorange&&(lt+=rt),Re!=="paper"&&!ot.autorange&&(lt+=Re),XO.setClipUrl(_e,lt?"clip"+qe._fullLayout._uid+lt:null,qe)}}function ose(e,t,r){return e.replace(Ix.segmentRE,function(i){var n=0,a=i.charAt(0),o=Ix.paramIsX[a],s=Ix.paramIsY[a],l=Ix.numParams[a],u=i.substr(1).replace(Ix.paramRE,function(f){return n>=l||(o[n]?f=t(f):s[n]&&(f=r(f)),n++),f});return a+u})}function olt(e,t){if(b4(e)){var r=t.node(),i=+r.getAttribute("data-index");if(i>=0){if(i===e._fullLayout._activeShapeIndex){sse(e);return}e._fullLayout._activeShapeIndex=i,e._fullLayout._deactivateShape=sse,ZO(e)}}}function sse(e){if(b4(e)){var t=e._fullLayout._activeShapeIndex;t>=0&&(use(e),delete e._fullLayout._activeShapeIndex,ZO(e))}}function slt(e){if(b4(e)){use(e);var t=e._fullLayout._activeShapeIndex,r=(e.layout||{}).shapes||[];if(t<r.length){for(var i=[],n=0;n<r.length;n++)n!==t&&i.push(r[n]);return delete e._fullLayout._activeShapeIndex,lse.call("_guiRelayout",e,{shapes:i})}}}});var QO=ie((Lrr,mse)=>{"use strict";var up=Ti(),vse=js(),dse=zl(),Wo=s4(),llt=w4().eraseActiveShape,q2=Zt(),Ao=q2._,Xo=mse.exports={};Xo.toImage={name:"toImage",title:function(e){var t=e._context.toImageButtonOptions||{},r=t.format||"png";return r==="png"?Ao(e,"Download plot as a png"):Ao(e,"Download plot")},icon:Wo.camera,click:function(e){var t=e._context.toImageButtonOptions,r={format:t.format||"png"};q2.notifier(Ao(e,"Taking snapshot - this may take a few seconds"),"long"),r.format!=="svg"&&q2.isIE()&&(q2.notifier(Ao(e,"IE only supports svg.  Changing format to svg."),"long"),r.format="svg"),["filename","width","height","scale"].forEach(function(i){i in t&&(r[i]=t[i])}),up.call("downloadImage",e,r).then(function(i){q2.notifier(Ao(e,"Snapshot succeeded")+" - "+i,"long")}).catch(function(){q2.notifier(Ao(e,"Sorry, there was a problem downloading your snapshot!"),"long")})}};Xo.sendDataToCloud={name:"sendDataToCloud",title:function(e){return Ao(e,"Edit in Chart Studio")},icon:Wo.disk,click:function(e){vse.sendDataToCloud(e)}};Xo.editInChartStudio={name:"editInChartStudio",title:function(e){return Ao(e,"Edit in Chart Studio")},icon:Wo.pencil,click:function(e){vse.sendDataToCloud(e)}};Xo.zoom2d={name:"zoom2d",_cat:"zoom",title:function(e){return Ao(e,"Zoom")},attr:"dragmode",val:"zoom",icon:Wo.zoombox,click:Xh};Xo.pan2d={name:"pan2d",_cat:"pan",title:function(e){return Ao(e,"Pan")},attr:"dragmode",val:"pan",icon:Wo.pan,click:Xh};Xo.select2d={name:"select2d",_cat:"select",title:function(e){return Ao(e,"Box Select")},attr:"dragmode",val:"select",icon:Wo.selectbox,click:Xh};Xo.lasso2d={name:"lasso2d",_cat:"lasso",title:function(e){return Ao(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:Wo.lasso,click:Xh};Xo.drawclosedpath={name:"drawclosedpath",title:function(e){return Ao(e,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:Wo.drawclosedpath,click:Xh};Xo.drawopenpath={name:"drawopenpath",title:function(e){return Ao(e,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:Wo.drawopenpath,click:Xh};Xo.drawline={name:"drawline",title:function(e){return Ao(e,"Draw line")},attr:"dragmode",val:"drawline",icon:Wo.drawline,click:Xh};Xo.drawrect={name:"drawrect",title:function(e){return Ao(e,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:Wo.drawrect,click:Xh};Xo.drawcircle={name:"drawcircle",title:function(e){return Ao(e,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:Wo.drawcircle,click:Xh};Xo.eraseshape={name:"eraseshape",title:function(e){return Ao(e,"Erase active shape")},icon:Wo.eraseshape,click:llt};Xo.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(e){return Ao(e,"Zoom in")},attr:"zoom",val:"in",icon:Wo.zoom_plus,click:Xh};Xo.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(e){return Ao(e,"Zoom out")},attr:"zoom",val:"out",icon:Wo.zoom_minus,click:Xh};Xo.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(e){return Ao(e,"Autoscale")},attr:"zoom",val:"auto",icon:Wo.autoscale,click:Xh};Xo.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(e){return Ao(e,"Reset axes")},attr:"zoom",val:"reset",icon:Wo.home,click:Xh};Xo.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(e){return Ao(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:Wo.tooltip_basic,gravity:"ne",click:Xh};Xo.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(e){return Ao(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:Wo.tooltip_compare,gravity:"ne",click:Xh};function Xh(e,t){var r=t.currentTarget,i=r.getAttribute("data-attr"),n=r.getAttribute("data-val")||!0,a=e._fullLayout,o={},s=dse.list(e,null,!0),l=a._cartesianSpikesEnabled,u,f;if(i==="zoom"){var c=n==="in"?.5:2,h=(1+c)/2,v=(1-c)/2,d;for(f=0;f<s.length;f++)if(u=s[f],!u.fixedrange)if(d=u._name,n==="auto")o[d+".autorange"]=!0;else if(n==="reset")u._rangeInitial0===void 0&&u._rangeInitial1===void 0?o[d+".autorange"]=!0:u._rangeInitial0===void 0?(o[d+".autorange"]=u._autorangeInitial,o[d+".range"]=[null,u._rangeInitial1]):u._rangeInitial1===void 0?(o[d+".range"]=[u._rangeInitial0,null],o[d+".autorange"]=u._autorangeInitial):o[d+".range"]=[u._rangeInitial0,u._rangeInitial1],u._showSpikeInitial!==void 0&&(o[d+".showspikes"]=u._showSpikeInitial,l==="on"&&!u._showSpikeInitial&&(l="off"));else{var x=[u.r2l(u.range[0]),u.r2l(u.range[1])],b=[h*x[0]+v*x[1],h*x[1]+v*x[0]];o[d+".range[0]"]=u.l2r(b[0]),o[d+".range[1]"]=u.l2r(b[1])}}else i==="hovermode"&&(n==="x"||n==="y")&&(n=a._isHoriz?"y":"x",r.setAttribute("data-val",n)),o[i]=n;a._cartesianSpikesEnabled=l,up.call("_guiRelayout",e,o)}Xo.zoom3d={name:"zoom3d",_cat:"zoom",title:function(e){return Ao(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:Wo.zoombox,click:A4};Xo.pan3d={name:"pan3d",_cat:"pan",title:function(e){return Ao(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:Wo.pan,click:A4};Xo.orbitRotation={name:"orbitRotation",title:function(e){return Ao(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:Wo["3d_rotate"],click:A4};Xo.tableRotation={name:"tableRotation",title:function(e){return Ao(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:Wo["z-axis"],click:A4};function A4(e,t){for(var r=t.currentTarget,i=r.getAttribute("data-attr"),n=r.getAttribute("data-val")||!0,a=e._fullLayout._subplots.gl3d||[],o={},s=i.split("."),l=0;l<a.length;l++)o[a[l]+"."+s[1]]=n;var u=n==="pan"?n:"zoom";o.dragmode=u,up.call("_guiRelayout",e,o)}Xo.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(e){return Ao(e,"Reset camera to default")},attr:"resetDefault",icon:Wo.home,click:jO};Xo.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(e){return Ao(e,"Reset camera to last save")},attr:"resetLastSave",icon:Wo.movie,click:jO};function jO(e,t){for(var r=t.currentTarget,i=r.getAttribute("data-attr"),n=i==="resetLastSave",a=i==="resetDefault",o=e._fullLayout,s=o._subplots.gl3d||[],l={},u=0;u<s.length;u++){var f=s[u],c=f+".camera",h=f+".aspectratio",v=f+".aspectmode",d=o[f]._scene,x;n?(l[c+".up"]=d.viewInitial.up,l[c+".eye"]=d.viewInitial.eye,l[c+".center"]=d.viewInitial.center,x=!0):a&&(l[c+".up"]=null,l[c+".eye"]=null,l[c+".center"]=null,x=!0),x&&(l[h+".x"]=d.viewInitial.aspectratio.x,l[h+".y"]=d.viewInitial.aspectratio.y,l[h+".z"]=d.viewInitial.aspectratio.z,l[v]=d.viewInitial.aspectmode)}up.call("_guiRelayout",e,l)}Xo.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(e){return Ao(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Wo.tooltip_basic,gravity:"ne",click:ult};function pse(e,t){var r=t.currentTarget,i=r._previousVal,n=e._fullLayout,a=n._subplots.gl3d||[],o=["xaxis","yaxis","zaxis"],s={},l={};if(i)l=i,r._previousVal=null;else{for(var u=0;u<a.length;u++){var f=a[u],c=n[f],h=f+".hovermode";s[h]=c.hovermode,l[h]=!1;for(var v=0;v<3;v++){var d=o[v],x=f+"."+d+".showspikes";l[x]=!1,s[x]=c[d].showspikes}}r._previousVal=s}return l}function ult(e,t){var r=pse(e,t);up.call("_guiRelayout",e,r)}Xo.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(e){return Ao(e,"Zoom in")},attr:"zoom",val:"in",icon:Wo.zoom_plus,click:KO};Xo.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(e){return Ao(e,"Zoom out")},attr:"zoom",val:"out",icon:Wo.zoom_minus,click:KO};Xo.resetGeo={name:"resetGeo",_cat:"reset",title:function(e){return Ao(e,"Reset")},attr:"reset",val:null,icon:Wo.autoscale,click:KO};Xo.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(e){return Ao(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Wo.tooltip_basic,gravity:"ne",click:JO};function KO(e,t){for(var r=t.currentTarget,i=r.getAttribute("data-attr"),n=r.getAttribute("data-val")||!0,a=e._fullLayout,o=a._subplots.geo||[],s=0;s<o.length;s++){var l=o[s],u=a[l];if(i==="zoom"){var f=u.projection.scale,c=n==="in"?2*f:.5*f;up.call("_guiRelayout",e,l+".projection.scale",c)}}i==="reset"&&T4(e,"geo")}Xo.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(e){return Ao(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Wo.tooltip_basic,gravity:"ne",click:JO};Xo.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(e){return Ao(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:Wo.tooltip_basic,gravity:"ne",click:JO};function gse(e){var t=e._fullLayout;return t.hovermode?!1:t._has("cartesian")?t._isHoriz?"y":"x":"closest"}function JO(e){var t=gse(e);up.call("_guiRelayout",e,"hovermode",t)}Xo.resetViewSankey={name:"resetSankeyGroup",title:function(e){return Ao(e,"Reset view")},icon:Wo.home,click:function(e){for(var t={"node.groups":[],"node.x":[],"node.y":[]},r=0;r<e._fullData.length;r++){var i=e._fullData[r]._viewInitial;t["node.groups"].push(i.node.groups.slice()),t["node.x"].push(i.node.x.slice()),t["node.y"].push(i.node.y.slice())}up.call("restyle",e,t)}};Xo.toggleHover={name:"toggleHover",title:function(e){return Ao(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Wo.tooltip_basic,gravity:"ne",click:function(e,t){var r=pse(e,t);r.hovermode=gse(e),up.call("_guiRelayout",e,r)}};Xo.resetViews={name:"resetViews",title:function(e){return Ao(e,"Reset views")},icon:Wo.home,click:function(e,t){var r=t.currentTarget;r.setAttribute("data-attr","zoom"),r.setAttribute("data-val","reset"),Xh(e,t),r.setAttribute("data-attr","resetLastSave"),jO(e,t),T4(e,"geo"),T4(e,"mapbox")}};Xo.toggleSpikelines={name:"toggleSpikelines",title:function(e){return Ao(e,"Toggle Spike Lines")},icon:Wo.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout,r=t._cartesianSpikesEnabled;t._cartesianSpikesEnabled=r==="on"?"off":"on",up.call("_guiRelayout",e,flt(e))}};function flt(e){for(var t=e._fullLayout,r=t._cartesianSpikesEnabled==="on",i=dse.list(e,null,!0),n={},a=0;a<i.length;a++){var o=i[a];n[o._name+".showspikes"]=r?!0:o._showSpikeInitial}return n}Xo.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(e){return Ao(e,"Reset view")},attr:"reset",icon:Wo.home,click:function(e){T4(e,"mapbox")}};Xo.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(e){return Ao(e,"Zoom in")},attr:"zoom",val:"in",icon:Wo.zoom_plus,click:yse};Xo.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(e){return Ao(e,"Zoom out")},attr:"zoom",val:"out",icon:Wo.zoom_minus,click:yse};function yse(e,t){for(var r=t.currentTarget,i=r.getAttribute("data-val"),n=e._fullLayout,a=n._subplots.mapbox||[],o=1.05,s={},l=0;l<a.length;l++){var u=a[l],f=n[u].zoom,c=i==="in"?o*f:f/o;s[u+".zoom"]=c}up.call("_guiRelayout",e,s)}function T4(e,t){for(var r=e._fullLayout,i=r._subplots[t]||[],n={},a=0;a<i.length;a++)for(var o=i[a],s=r[o]._subplot,l=s.viewInitial,u=Object.keys(l),f=0;f<u.length;f++){var c=u[f];n[o+"."+c]=l[c]}up.call("_guiRelayout",e,n)}});var $O=ie((Prr,wse)=>{"use strict";var xse=QO(),clt=Object.keys(xse),_se=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],bse=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(_se),z2=[],hlt=function(e){if(bse.indexOf(e._cat||e.name)===-1){var t=e.name,r=(e._cat||e.name).toLowerCase();z2.indexOf(t)===-1&&z2.push(t),z2.indexOf(r)===-1&&z2.push(r)}};clt.forEach(function(e){hlt(xse[e])});z2.sort();wse.exports={DRAW_MODES:_se,backButtons:bse,foreButtons:z2}});var e7=ie((Drr,Tse)=>{"use strict";var Rrr=$O();Tse.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}});var Mse=ie((Irr,Ase)=>{"use strict";var vlt=Zt(),jA=_i(),dlt=ko(),plt=e7();Ase.exports=function(t,r){var i=t.modebar||{},n=dlt.newContainer(r,"modebar");function a(s,l){return vlt.coerce(i,n,plt,s,l)}a("orientation"),a("bgcolor",jA.addOpacity(r.paper_bgcolor,.5));var o=jA.contrast(jA.rgb(r.modebar.bgcolor));a("color",jA.addOpacity(o,.3)),a("activecolor",jA.addOpacity(o,.7)),a("uirevision",r.uirevision),a("add"),a("remove")}});var Cse=ie((Frr,kse)=>{"use strict";var t7=Mi(),glt=la(),Yg=Zt(),Sse=s4(),ylt=Mk().version,mlt=new DOMParser;function Ese(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}var G0=Ese.prototype;G0.update=function(e,t){this.graphInfo=e;var r=this.graphInfo._context,i=this.graphInfo._fullLayout,n="modebar-"+i._uid;this.element.setAttribute("id",n),this._uid=n,this.element.className="modebar",r.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),i.modebar.orientation==="v"&&(this.element.className+=" vertical",t=t.reverse());var a=i.modebar,o=r.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";Yg.deleteRelatedStyleRule(n),Yg.addRelatedStyleRule(n,o+"#"+n+" .modebar-group","background-color: "+a.bgcolor),Yg.addRelatedStyleRule(n,"#"+n+" .modebar-btn .icon path","fill: "+a.color),Yg.addRelatedStyleRule(n,"#"+n+" .modebar-btn:hover .icon path","fill: "+a.activecolor),Yg.addRelatedStyleRule(n,"#"+n+" .modebar-btn.active .icon path","fill: "+a.activecolor);var s=!this.hasButtons(t),l=this.hasLogo!==r.displaylogo,u=this.locale!==r.locale;if(this.locale=r.locale,(s||l||u)&&(this.removeAllButtons(),this.updateButtons(t),r.watermark||r.displaylogo)){var f=this.getLogo();r.watermark&&(f.className=f.className+" watermark"),i.modebar.orientation==="v"?this.element.insertBefore(f,this.element.childNodes[0]):this.element.appendChild(f),this.hasLogo=!0}this.updateActiveButton()};G0.updateButtons=function(e){var t=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(r){var i=t.createGroup();r.forEach(function(n){var a=n.name;if(!a)throw new Error("must provide button 'name' in button config");if(t.buttonsNames.indexOf(a)!==-1)throw new Error("button name '"+a+"' is taken");t.buttonsNames.push(a);var o=t.createButton(n);t.buttonElements.push(o),i.appendChild(o)}),t.element.appendChild(i)})};G0.createGroup=function(){var e=document.createElement("div");return e.className="modebar-group",e};G0.createButton=function(e){var t=this,r=document.createElement("a");r.setAttribute("rel","tooltip"),r.className="modebar-btn";var i=e.title;i===void 0?i=e.name:typeof i=="function"&&(i=i(this.graphInfo)),(i||i===0)&&r.setAttribute("data-title",i),e.attr!==void 0&&r.setAttribute("data-attr",e.attr);var n=e.val;n!==void 0&&(typeof n=="function"&&(n=n(this.graphInfo)),r.setAttribute("data-val",n));var a=e.click;if(typeof a!="function")throw new Error("must provide button 'click' function in button config");r.addEventListener("click",function(s){e.click(t.graphInfo,s),t.updateActiveButton(s.currentTarget)}),r.setAttribute("data-toggle",e.toggle||!1),e.toggle&&t7.select(r).classed("active",!0);var o=e.icon;return typeof o=="function"?r.appendChild(o()):r.appendChild(this.createIcon(o||Sse.question)),r.setAttribute("data-gravity",e.gravity||"n"),r};G0.createIcon=function(e){var t=glt(e.height)?Number(e.height):e.ascent-e.descent,r="http://www.w3.org/2000/svg",i;if(e.path){i=document.createElementNS(r,"svg"),i.setAttribute("viewBox",[0,0,e.width,t].join(" ")),i.setAttribute("class","icon");var n=document.createElementNS(r,"path");n.setAttribute("d",e.path),e.transform?n.setAttribute("transform",e.transform):e.ascent!==void 0&&n.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")"),i.appendChild(n)}if(e.svg){var a=mlt.parseFromString(e.svg,"application/xml");i=a.childNodes[0]}return i.setAttribute("height","1em"),i.setAttribute("width","1em"),i};G0.updateActiveButton=function(e){var t=this.graphInfo._fullLayout,r=e!==void 0?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(i){var n=i.getAttribute("data-val")||!0,a=i.getAttribute("data-attr"),o=i.getAttribute("data-toggle")==="true",s=t7.select(i);if(o)a===r&&s.classed("active",!s.classed("active"));else{var l=a===null?a:Yg.nestedProperty(t,a).get();s.classed("active",l===n)}})};G0.hasButtons=function(e){var t=this.buttons;if(!t||e.length!==t.length)return!1;for(var r=0;r<e.length;++r){if(e[r].length!==t[r].length)return!1;for(var i=0;i<e[r].length;i++)if(e[r][i].name!==t[r][i].name)return!1}return!0};function xlt(e){return e+" (v"+ylt+")"}G0.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");return t.href="https://plotly.com/",t.target="_blank",t.setAttribute("data-title",xlt(Yg._(this.graphInfo,"Produced with Plotly.js"))),t.className="modebar-btn plotlyjsicon modebar-btn--logo",t.appendChild(this.createIcon(Sse.newplotlylogo)),e.appendChild(t),e};G0.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1};G0.destroy=function(){Yg.removeElement(this.container.querySelector(".modebar")),Yg.deleteRelatedStyleRule(this._uid)};function _lt(e,t){var r=e._fullLayout,i=new Ese({graphInfo:e,container:r._modebardiv.node(),buttons:t});return r._privateplot&&t7.select(i.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),i}kse.exports=_lt});var Rse=ie((qrr,Pse)=>{"use strict";var blt=zl(),Lse=Ks(),r7=Ti(),wlt=ad().isUnifiedHover,Tlt=Cse(),M4=QO(),Alt=$O().DRAW_MODES,Mlt=Zt().extendDeep;Pse.exports=function(t){var r=t._fullLayout,i=t._context,n=r._modeBar;if(!i.displayModeBar&&!i.watermark){n&&(n.destroy(),delete r._modeBar);return}if(!Array.isArray(i.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(i.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var a=i.modeBarButtons,o;Array.isArray(a)&&a.length?o=Plt(a):!i.displayModeBar&&i.watermark?o=[]:o=Slt(t),n?n.update(t,o):r._modeBar=Tlt(t,o)};function Slt(e){var t=e._fullLayout,r=e._fullData,i=e._context;function n(F,N){if(typeof N=="string"){if(N.toLowerCase()===F.toLowerCase())return!0}else{var X=N.name,K=N._cat||N.name;if(X===F||K===F.toLowerCase())return!0}return!1}var a=t.modebar.add;typeof a=="string"&&(a=[a]);var o=t.modebar.remove;typeof o=="string"&&(o=[o]);var s=i.modeBarButtonsToAdd.concat(a.filter(function(F){for(var N=0;N<i.modeBarButtonsToRemove.length;N++)if(n(F,i.modeBarButtonsToRemove[N]))return!1;return!0})),l=i.modeBarButtonsToRemove.concat(o.filter(function(F){for(var N=0;N<i.modeBarButtonsToAdd.length;N++)if(n(F,i.modeBarButtonsToAdd[N]))return!1;return!0})),u=t._has("cartesian"),f=t._has("gl3d"),c=t._has("geo"),h=t._has("pie"),v=t._has("funnelarea"),d=t._has("gl2d"),x=t._has("ternary"),b=t._has("mapbox"),p=t._has("polar"),w=t._has("smith"),A=t._has("sankey"),T=Elt(t),k=wlt(t.hovermode),_=[];function E(F){if(F.length){for(var N=[],X=0;X<F.length;X++){for(var K=F[X],ne=M4[K],fe=ne.name.toLowerCase(),ue=(ne._cat||ne.name).toLowerCase(),ee=!1,Z=0;Z<l.length;Z++){var oe=l[Z].toLowerCase();if(oe===fe||oe===ue){ee=!0;break}}ee||N.push(M4[K])}_.push(N)}}var S=["toImage"];i.showEditInChartStudio?S.push("editInChartStudio"):i.showSendToCloud&&S.push("sendDataToCloud"),E(S);var g=[],C=[],M=[],P=[];(u||d||h||v||x)+c+f+b+p+w>1?(C=["toggleHover"],M=["resetViews"]):c?(g=["zoomInGeo","zoomOutGeo"],C=["hoverClosestGeo"],M=["resetGeo"]):f?(C=["hoverClosest3d"],M=["resetCameraDefault3d","resetCameraLastSave3d"]):b?(g=["zoomInMapbox","zoomOutMapbox"],C=["toggleHover"],M=["resetViewMapbox"]):d?C=["hoverClosestGl2d"]:h?C=["hoverClosestPie"]:A?(C=["hoverClosestCartesian","hoverCompareCartesian"],M=["resetViewSankey"]):C=["toggleHover"],u&&(C=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(Clt(r)||k)&&(C=[]),(u||d)&&!T&&(g=["zoomIn2d","zoomOut2d","autoScale2d"],M[0]!=="resetViews"&&(M=["resetScale2d"])),f?P=["zoom3d","pan3d","orbitRotation","tableRotation"]:(u||d)&&!T||x?P=["zoom2d","pan2d"]:b||c?P=["pan2d"]:p&&(P=["zoom2d"]),klt(r)&&P.push("select2d","lasso2d");var D=[],q=function(F){D.indexOf(F)===-1&&C.indexOf(F)!==-1&&D.push(F)};if(Array.isArray(s)){for(var O=[],U=0;U<s.length;U++){var B=s[U];typeof B=="string"?(B=B.toLowerCase(),Alt.indexOf(B)!==-1?(t._has("mapbox")||t._has("cartesian"))&&P.push(B):B==="togglespikelines"?q("toggleSpikelines"):B==="togglehover"?q("toggleHover"):B==="hovercompare"?q("hoverCompareCartesian"):B==="hoverclosest"?(q("hoverClosestCartesian"),q("hoverClosestGeo"),q("hoverClosest3d"),q("hoverClosestGl2d"),q("hoverClosestPie")):B==="v1hovermode"&&(q("toggleHover"),q("hoverClosestCartesian"),q("hoverCompareCartesian"),q("hoverClosestGeo"),q("hoverClosest3d"),q("hoverClosestGl2d"),q("hoverClosestPie"))):O.push(B)}s=O}return E(P),E(g.concat(M)),E(D),Llt(_,s)}function Elt(e){for(var t=blt.list({_fullLayout:e},null,!0),r=0;r<t.length;r++)if(!t[r].fixedrange)return!1;return!0}function klt(e){for(var t=!1,r=0;r<e.length&&!t;r++){var i=e[r];!i._module||!i._module.selectPoints||(r7.traceIs(i,"scatter-like")?(Lse.hasMarkers(i)||Lse.hasText(i))&&(t=!0):r7.traceIs(i,"box-violin")?(i.boxpoints==="all"||i.points==="all")&&(t=!0):t=!0)}return t}function Clt(e){for(var t=0;t<e.length;t++)if(!r7.traceIs(e[t],"noHover"))return!1;return!0}function Llt(e,t){if(t.length)if(Array.isArray(t[0]))for(var r=0;r<t.length;r++)e.push(t[r]);else e.push(t);return e}function Plt(e){for(var t=Mlt([],e),r=0;r<t.length;r++)for(var i=t[r],n=0;n<i.length;n++){var a=i[n];if(typeof a=="string")if(M4[a]!==void 0)t[r][n]=M4[a];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return t}});var n7=ie((zrr,Dse)=>{"use strict";Dse.exports={moduleType:"component",name:"modebar",layoutAttributes:e7(),supplyLayoutDefaults:Mse(),manage:Rse()}});var i7=ie((Orr,Ise)=>{"use strict";var Rlt=Mf().FROM_BL;Ise.exports=function(t,r,i){i===void 0&&(i=Rlt[t.constraintoward||"center"]);var n=[t.r2l(t.range[0]),t.r2l(t.range[1])],a=n[0]+(n[1]-n[0])*i;t.range=t._input.range=[t.l2r(a+(n[0]-a)*r),t.l2r(a+(n[1]-a)*r)],t.setScale()}});var Tm=ie(KA=>{"use strict";var Fx=Zt(),a7=Ld(),i0=zl().id2name,Dlt=gc(),Fse=i7(),Ilt=N0(),Flt=eo().ALMOST_EQUAL,qlt=Mf().FROM_BL;KA.handleDefaults=function(e,t,r){var i=r.axIds,n=r.axHasImage,a=t._axisConstraintGroups=[],o=t._axisMatchGroups=[],s,l,u,f,c,h,v,d;for(s=0;s<i.length;s++)f=i0(i[s]),c=e[f],h=t[f],zlt(c,h,{axIds:i,layoutOut:t,hasImage:n[f]});function x(S,g){for(s=0;s<S.length;s++){l=S[s];for(u in l)t[i0(u)][g]=l}}for(x(o,"_matchGroup"),s=0;s<a.length;s++){l=a[s];for(u in l)if(h=t[i0(u)],h.fixedrange){for(var b in l){var p=i0(b);(e[p]||{}).fixedrange===!1&&Fx.warn("fixedrange was specified as false for axis "+p+" but was overridden because another axis in its constraint group has fixedrange true"),t[p].fixedrange=!0}break}}for(s=0;s<a.length;){l=a[s];for(u in l){h=t[i0(u)],h._matchGroup&&Object.keys(h._matchGroup).length===Object.keys(l).length&&(a.splice(s,1),s--);break}s++}x(a,"_constraintGroup");var w=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],A=!1,T=!1;function k(){d=h[v],v==="rangebreaks"&&(T=h._hasDayOfWeekBreaks)}for(s=0;s<o.length;s++){l=o[s];for(var _=0;_<w.length;_++){v=w[_],d=null;var E;for(u in l)if(f=i0(u),c=e[f],h=t[f],v in h){if(!h.matches&&(E=h,v in c)){k();break}d===null&&v in c&&k()}if(v==="range"&&d&&c.range&&c.range.length===2&&c.range[0]!==null&&c.range[1]!==null&&(A=!0),v==="autorange"&&d===null&&A&&(d=!1),d===null&&v in E&&(d=E[v]),d!==null)for(u in l)h=t[i0(u)],h[v]=v==="range"?d.slice():d,v==="rangebreaks"&&(h._hasDayOfWeekBreaks=T,Ilt(h,t))}}};function zlt(e,t,r){var i=r.axIds,n=r.layoutOut,a=r.hasImage,o=n._axisConstraintGroups,s=n._axisMatchGroups,l=t._id,u=l.charAt(0),f=((n._splomAxes||{})[u]||{})[l]||{},c=t._id,h=c.charAt(0)==="x";t._matchGroup=null,t._constraintGroup=null;function v(P,D){return Fx.coerce(e,t,Dlt,P,D)}v("constrain",a?"domain":"range"),Fx.coerce(e,t,{constraintoward:{valType:"enumerated",values:h?["left","center","right"]:["bottom","middle","top"],dflt:h?"center":"middle"}},"constraintoward");var d=t.type,x,b,p=[];for(x=0;x<i.length;x++)if(b=i[x],b!==c){var w=n[i0(b)];w.type===d&&p.push(b)}var A=Ose(o,c);if(A){var T=[];for(x=0;x<p.length;x++)b=p[x],A[b]||T.push(b);p=T}var k=p.length,_,E;k&&(e.matches||f.matches)&&(_=Fx.coerce(e,t,{matches:{valType:"enumerated",values:p,dflt:p.indexOf(f.matches)!==-1?f.matches:void 0}},"matches"));var S=a&&!h?t.anchor:void 0;if(k&&!_&&(e.scaleanchor||S)&&(E=Fx.coerce(e,t,{scaleanchor:{valType:"enumerated",values:p.concat([!1])}},"scaleanchor",S)),_){t._matchGroup=o7(s,c,_,1);var g=n[i0(_)],C=qse(n,t)/qse(n,g);h!==(_.charAt(0)==="x")&&(C=(h?"x":"y")+C),o7(o,c,_,C)}else e.matches&&i.indexOf(e.matches)!==-1&&Fx.warn("ignored "+t._name+'.matches: "'+e.matches+'" to avoid an infinite loop');if(E){var M=v("scaleratio");M||(M=t.scaleratio=1),o7(o,c,E,M)}else e.scaleanchor&&i.indexOf(e.scaleanchor)!==-1&&Fx.warn("ignored "+t._name+'.scaleanchor: "'+e.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function qse(e,t){var r=t.domain;return r||(r=e[i0(t.overlaying)].domain),r[1]-r[0]}function Ose(e,t){for(var r=0;r<e.length;r++)if(e[r][t])return e[r];return null}function o7(e,t,r,i){var n,a,o,s,l,u=Ose(e,t);u===null?(u={},u[t]=1,l=e.length,e.push(u)):l=e.indexOf(u);var f=Object.keys(u);for(n=0;n<e.length;n++)if(o=e[n],n!==l&&o[r]){var c=o[r];for(a=0;a<f.length;a++)s=f[a],o[s]=s7(c,s7(i,u[s]));e.splice(l,1);return}if(i!==1)for(a=0;a<f.length;a++){var h=f[a];u[h]=s7(i,u[h])}u[r]=1}function s7(e,t){var r="",i="",n,a;typeof e=="string"&&(r=e.match(/^[xy]*/)[0],n=r.length,e=+e.substr(n)),typeof t=="string"&&(i=t.match(/^[xy]*/)[0],a=i.length,t=+t.substr(a));var o=e*t;return!n&&!a?o:!n||!a||r.charAt(0)===i.charAt(0)?r+i+e*t:n===a?o:(n>a?r.substr(a):i.substr(n))+o}function Olt(e,t){for(var r=t._size,i=r.h/r.w,n={},a=Object.keys(e),o=0;o<a.length;o++){var s=a[o],l=e[s];if(typeof l=="string"){var u=l.match(/^[xy]*/)[0],f=u.length;l=+l.substr(f);for(var c=u.charAt(0)==="y"?i:1/i,h=0;h<f;h++)l*=c}n[s]=l}return n}KA.enforce=function(t){var r=t._fullLayout,i=r._axisConstraintGroups||[],n,a,o,s,l,u,f,c;for(n=0;n<i.length;n++){o=Olt(i[n],r);var h=Object.keys(o),v=1/0,d=0,x=1/0,b={},p={},w=!1;for(a=0;a<h.length;a++)s=h[a],p[s]=l=r[i0(s)],l._inputDomain?l.domain=l._inputDomain.slice():l._inputDomain=l.domain.slice(),l._inputRange||(l._inputRange=l.range.slice()),l.setScale(),b[s]=u=Math.abs(l._m)/o[s],v=Math.min(v,u),(l.constrain==="domain"||!l._constraintShrinkable)&&(x=Math.min(x,u)),delete l._constraintShrinkable,d=Math.max(d,u),l.constrain==="domain"&&(w=!0);if(!(v>Flt*d&&!w)){for(a=0;a<h.length;a++)if(s=h[a],u=b[s],l=p[s],f=l.constrain,u!==x||f==="domain")if(c=u/x,f==="range")Fse(l,c);else{var A=l._inputDomain,T=(l.domain[1]-l.domain[0])/(A[1]-A[0]),k=(l.r2l(l.range[1])-l.r2l(l.range[0]))/(l.r2l(l._inputRange[1])-l.r2l(l._inputRange[0]));if(c/=T,c*k<1){l.domain=l._input.domain=A.slice(),Fse(l,c);continue}if(k<1&&(l.range=l._input.range=l._inputRange.slice(),c*=k),l.autorange){var _=l.r2l(l.range[0]),E=l.r2l(l.range[1]),S=(_+E)/2,g=S,C=S,M=Math.abs(E-S),P=S-M*c*1.0001,D=S+M*c*1.0001,q=a7.makePadFn(r,l,0),O=a7.makePadFn(r,l,1);zse(l,c);var U=Math.abs(l._m),B=a7.concatExtremes(t,l),F=B.min,N=B.max,X,K;for(K=0;K<F.length;K++)X=F[K].val-q(F[K])/U,X>P&&X<g&&(g=X);for(K=0;K<N.length;K++)X=N[K].val+O(N[K])/U,X<D&&X>C&&(C=X);var ne=(C-g)/(2*M);c/=ne,g=l.l2r(g),C=l.l2r(C),l.range=l._input.range=_<E?[g,C]:[C,g]}zse(l,c)}}}};KA.getAxisGroup=function(t,r){for(var i=t._axisMatchGroups,n=0;n<i.length;n++){var a=i[n];if(a[r])return"g"+n}return r};KA.clean=function(t,r){if(r._inputDomain){for(var i=!1,n=r._id,a=t._fullLayout._axisConstraintGroups,o=0;o<a.length;o++)if(a[o][n]){i=!0;break}(!i||r.constrain!=="domain")&&(r._input.domain=r.domain=r._inputDomain,delete r._inputDomain)}};function zse(e,t){var r=e._inputDomain,i=qlt[e.constraintoward],n=r[0]+(r[1]-r[0])*i;e.domain=e._input.domain=[n+(r[0]-n)/t,n+(r[1]-n)/t],e.setScale()}});var $A=ie(rc=>{"use strict";var Hse=Mi(),Zh=Ti(),Dd=js(),fp=Zt(),Bse=ks(),l7=WA(),JA=_i(),O2=oa(),Blt=wx(),Gse=n7(),QA=Wi(),Wg=Mf(),Yse=Tm(),Nlt=Yse.enforce,Ult=Yse.clean,Nse=Ld().doAutoRange,Wse="start",Vlt="middle",Xse="end";rc.layoutStyles=function(e){return fp.syncOrAsync([Dd.doAutoMargin,Glt],e)};function Hlt(e,t,r){for(var i=0;i<r.length;i++){var n=r[i][0],a=r[i][1];if(!(n[0]>=e[1]||n[1]<=e[0])&&a[0]<t[1]&&a[1]>t[0])return!0}return!1}function Glt(e){var t=e._fullLayout,r=t._size,i=r.p,n=QA.list(e,"",!0),a,o,s,l,u,f;if(t._paperdiv.style({width:e._context.responsive&&t.autosize&&!e._context._hasZeroWidth&&!e.layout.width?"100%":t.width+"px",height:e._context.responsive&&t.autosize&&!e._context._hasZeroHeight&&!e.layout.height?"100%":t.height+"px"}).selectAll(".main-svg").call(O2.setSize,t.width,t.height),e._context.setBackground(e,t.paper_bgcolor),rc.drawMainTitle(e),Gse.manage(e),!t._has("cartesian"))return Dd.previousPromises(e);function c(he,te,ge){var ae=he._lw/2;if(he._id.charAt(0)==="x"){if(te){if(ge==="top")return te._offset-i-ae}else return r.t+r.h*(1-(he.position||0))+ae%1;return te._offset+te._length+i+ae}if(te){if(ge==="right")return te._offset+te._length+i+ae}else return r.l+r.w*(he.position||0)+ae%1;return te._offset-i-ae}for(a=0;a<n.length;a++){l=n[a];var h=l._anchorAxis;l._linepositions={},l._lw=O2.crispRound(e,l.linewidth,1),l._mainLinePosition=c(l,h,l.side),l._mainMirrorPosition=l.mirror&&h?c(l,h,Wg.OPPOSITE_SIDE[l.side]):null}var v=[],d=[],x=[],b=JA.opacity(t.paper_bgcolor)===1&&JA.opacity(t.plot_bgcolor)===1&&t.paper_bgcolor===t.plot_bgcolor;for(o in t._plots)if(s=t._plots[o],s.mainplot)s.bg&&s.bg.remove(),s.bg=void 0;else{var p=s.xaxis.domain,w=s.yaxis.domain,A=s.plotgroup;if(Hlt(p,w,x)){var T=A.node(),k=s.bg=fp.ensureSingle(A,"rect","bg");T.insertBefore(k.node(),T.childNodes[0]),d.push(o)}else A.select("rect.bg").remove(),x.push([p,w]),b||(v.push(o),d.push(o))}var _=t._bgLayer.selectAll(".bg").data(v);for(_.enter().append("rect").classed("bg",!0),_.exit().remove(),_.each(function(he){t._plots[he].bg=Hse.select(this)}),a=0;a<d.length;a++)s=t._plots[d[a]],u=s.xaxis,f=s.yaxis,s.bg&&u._offset!==void 0&&f._offset!==void 0&&s.bg.call(O2.setRect,u._offset-i,f._offset-i,u._length+2*i,f._length+2*i).call(JA.fill,t.plot_bgcolor).style("stroke-width",0);if(!t._hasOnlyLargeSploms)for(o in t._plots){s=t._plots[o],u=s.xaxis,f=s.yaxis;var E=s.clipId="clip"+t._uid+o+"plot",S=fp.ensureSingleById(t._clips,"clipPath",E,function(he){he.classed("plotclip",!0).append("rect")});s.clipRect=S.select("rect").attr({width:u._length,height:f._length}),O2.setTranslate(s.plot,u._offset,f._offset);var g,C;s._hasClipOnAxisFalse?(g=null,C=E):(g=E,C=null),O2.setClipUrl(s.plot,g,e),s.layerClipId=C}var M,P,D,q,O,U,B,F,N,X,K,ne,fe;function ue(he){return"M"+M+","+he+"H"+P}function ee(he){return"M"+u._offset+","+he+"h"+u._length}function Z(he){return"M"+he+","+F+"V"+B}function oe(he){return f._shift!==void 0&&(he+=f._shift),"M"+he+","+f._offset+"v"+f._length}function ce(he,te,ge){if(!he.showline||o!==he._mainSubplot)return"";if(!he._anchorAxis)return ge(he._mainLinePosition);var ae=te(he._mainLinePosition);return he.mirror&&(ae+=te(he._mainMirrorPosition)),ae}for(o in t._plots){s=t._plots[o],u=s.xaxis,f=s.yaxis;var le="M0,0";Use(u,o)&&(O=S4(u,"left",f,n),M=u._offset-(O?i+O:0),U=S4(u,"right",f,n),P=u._offset+u._length+(U?i+U:0),D=c(u,f,"bottom"),q=c(u,f,"top"),fe=!u._anchorAxis||o!==u._mainSubplot,fe&&(u.mirror==="allticks"||u.mirror==="all")&&(u._linepositions[o]=[D,q]),le=ce(u,ue,ee),fe&&u.showline&&(u.mirror==="all"||u.mirror==="allticks")&&(le+=ue(D)+ue(q)),s.xlines.style("stroke-width",u._lw+"px").call(JA.stroke,u.showline?u.linecolor:"rgba(0,0,0,0)")),s.xlines.attr("d",le);var me="M0,0";Use(f,o)&&(K=S4(f,"bottom",u,n),B=f._offset+f._length+(K?i:0),ne=S4(f,"top",u,n),F=f._offset-(ne?i:0),N=c(f,u,"left"),X=c(f,u,"right"),fe=!f._anchorAxis||o!==f._mainSubplot,fe&&(f.mirror==="allticks"||f.mirror==="all")&&(f._linepositions[o]=[N,X]),me=ce(f,Z,oe),fe&&f.showline&&(f.mirror==="all"||f.mirror==="allticks")&&(me+=Z(N)+Z(X)),s.ylines.style("stroke-width",f._lw+"px").call(JA.stroke,f.showline?f.linecolor:"rgba(0,0,0,0)")),s.ylines.attr("d",me)}return QA.makeClipPaths(e),Dd.previousPromises(e)}function Use(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||e.mirror==="all"||e.mirror==="allticks")}function Vse(e,t,r){if(!r.showline||!r._lw)return!1;if(r.mirror==="all"||r.mirror==="allticks")return!0;var i=r._anchorAxis;if(!i)return!1;var n=Wg.FROM_BL[t];return r.side===t?i.domain[n]===e.domain[n]:r.mirror&&i.domain[1-n]===e.domain[1-n]}function S4(e,t,r,i){if(Vse(e,t,r))return r._lw;for(var n=0;n<i.length;n++){var a=i[n];if(a._mainAxis===r._mainAxis&&Vse(e,t,a))return a._lw}return 0}rc.drawMainTitle=function(e){var t=e._fullLayout.title,r=e._fullLayout,i=Qlt(r),n=$lt(r),a=Klt(r,n),o=jlt(r,i);if(Blt.draw(e,"gtitle",{propContainer:r,propName:"title.text",placeholder:r._dfltTitle.plot,attributes:{x:o,y:a,"text-anchor":i,dy:n}}),t.text&&t.automargin){var s=Hse.selectAll(".gtitle"),l=O2.bBox(s.node()).height,u=Xlt(e,t,l);if(u>0){Zlt(e,a,u,l),s.attr({x:o,y:a,"text-anchor":i,dy:Jlt(t.yanchor)}).call(Bse.positionText,o,a);var f=(t.text.match(Bse.BR_TAG_ALL)||[]).length;if(f){var c=Wg.LINE_SPACING*f+Wg.MID_SHIFT;t.y===0&&(c=-c),s.selectAll(".line").each(function(){var h=+this.getAttribute("dy").slice(0,-2)-c+"em";this.setAttribute("dy",h)})}}}};function Ylt(e,t,r,i,n){var a=t.yref==="paper"?e._fullLayout._size.h:e._fullLayout.height,o=fp.isTopAnchor(t)?i:i-n,s=r==="b"?a-o:o;return fp.isTopAnchor(t)&&r==="t"||fp.isBottomAnchor(t)&&r==="b"?!1:s<n}function Wlt(e,t,r,i,n){var a=0;return r==="middle"&&(a+=n/2),e==="t"?(r==="top"&&(a+=n),a+=i-t*i):(r==="bottom"&&(a+=n),a+=t*i),a}function Xlt(e,t,r){var i=t.y,n=t.yanchor,a=i>.5?"t":"b",o=e._fullLayout.margin[a],s=0;return t.yref==="paper"?s=r+t.pad.t+t.pad.b:t.yref==="container"&&(s=Wlt(a,i,n,e._fullLayout.height,r)+t.pad.t+t.pad.b),s>o?s:0}function Zlt(e,t,r,i){var n="title.automargin",a=e._fullLayout.title,o=a.y>.5?"t":"b",s={x:a.x,y:a.y,t:0,b:0},l={};a.yref==="paper"&&Ylt(e,a,o,t,i)?s[o]=r:a.yref==="container"&&(l[o]=r,e._fullLayout._reservedMargin[n]=l),Dd.allowAutoMargin(e,n),Dd.autoMargin(e,n,s)}function jlt(e,t){var r=e.title,i=e._size,n=0;switch(t===Wse?n=r.pad.l:t===Xse&&(n=-r.pad.r),r.xref){case"paper":return i.l+i.w*r.x+n;case"container":default:return e.width*r.x+n}}function Klt(e,t){var r=e.title,i=e._size,n=0;if(t==="0em"||!t?n=-r.pad.b:t===Wg.CAP_SHIFT+"em"&&(n=r.pad.t),r.y==="auto")return i.t/2;switch(r.yref){case"paper":return i.t+i.h-i.h*r.y+n;case"container":default:return e.height-e.height*r.y+n}}function Jlt(e){return e==="top"?Wg.CAP_SHIFT+.3+"em":e==="bottom"?"-0.3em":Wg.MID_SHIFT+"em"}function Qlt(e){var t=e.title,r=Vlt;return fp.isRightAnchor(t)?r=Xse:fp.isLeftAnchor(t)&&(r=Wse),r}function $lt(e){var t=e.title,r="0em";return fp.isTopAnchor(t)?r=Wg.CAP_SHIFT+"em":fp.isMiddleAnchor(t)&&(r=Wg.MID_SHIFT+"em"),r}rc.doTraceStyle=function(e){var t=e.calcdata,r=[],i;for(i=0;i<t.length;i++){var n=t[i],a=n[0]||{},o=a.trace||{},s=o._module||{},l=s.arraysToCalcdata;l&&l(n,o);var u=s.editStyle;u&&r.push({fn:u,cd0:a})}if(r.length){for(i=0;i<r.length;i++){var f=r[i];f.fn(e,f.cd0)}l7(e),rc.redrawReglTraces(e)}return Dd.style(e),Zh.getComponentMethod("legend","draw")(e),Dd.previousPromises(e)};rc.doColorBars=function(e){return Zh.getComponentMethod("colorbar","draw")(e),Dd.previousPromises(e)};rc.layoutReplot=function(e){var t=e.layout;return e.layout=void 0,Zh.call("_doPlot",e,"",t)};rc.doLegend=function(e){return Zh.getComponentMethod("legend","draw")(e),Dd.previousPromises(e)};rc.doTicksRelayout=function(e){return QA.draw(e,"redraw"),e._fullLayout._hasOnlyLargeSploms&&(Zh.subplotsRegistry.splom.updateGrid(e),l7(e),rc.redrawReglTraces(e)),rc.drawMainTitle(e),Dd.previousPromises(e)};rc.doModeBar=function(e){var t=e._fullLayout;Gse.manage(e);for(var r=0;r<t._basePlotModules.length;r++){var i=t._basePlotModules[r].updateFx;i&&i(e)}return Dd.previousPromises(e)};rc.doCamera=function(e){for(var t=e._fullLayout,r=t._subplots.gl3d,i=0;i<r.length;i++){var n=t[r[i]],a=n._scene;a.setViewport(n)}};rc.drawData=function(e){var t=e._fullLayout;l7(e);for(var r=t._basePlotModules,i=0;i<r.length;i++)r[i].plot(e);return rc.redrawReglTraces(e),Dd.style(e),Zh.getComponentMethod("selections","draw")(e),Zh.getComponentMethod("shapes","draw")(e),Zh.getComponentMethod("annotations","draw")(e),Zh.getComponentMethod("images","draw")(e),t._replotting=!1,Dd.previousPromises(e)};rc.redrawReglTraces=function(e){var t=e._fullLayout;if(t._has("regl")){var r=e._fullData,i=[],n=[],a,o;for(t._hasOnlyLargeSploms&&t._splomGrid.draw(),a=0;a<r.length;a++){var s=r[a];s.visible===!0&&s._length!==0&&(s.type==="splom"?t._splomScenes[s.uid].draw():s.type==="scattergl"?fp.pushUnique(i,s.xaxis+s.yaxis):s.type==="scatterpolargl"&&fp.pushUnique(n,s.subplot))}for(a=0;a<i.length;a++)o=t._plots[i[a]],o._scene&&o._scene.draw();for(a=0;a<n.length;a++)o=t[n[a]]._subplot,o._scene&&o._scene.draw()}};rc.doAutoRangeAndConstraints=function(e){for(var t=QA.list(e,"",!0),r,i={},n=0;n<t.length;n++)if(r=t[n],!i[r._id]){i[r._id]=1,Ult(e,r),Nse(e,r);var a=r._matchGroup;if(a)for(var o in a){var s=QA.getFromId(e,o);Nse(e,s,r.range),i[o]=1}}Nlt(e)};rc.finalDraw=function(e){Zh.getComponentMethod("rangeslider","draw")(e),Zh.getComponentMethod("rangeselector","draw")(e)};rc.drawMarginPushers=function(e){Zh.getComponentMethod("legend","draw")(e),Zh.getComponentMethod("rangeselector","draw")(e),Zh.getComponentMethod("sliders","draw")(e),Zh.getComponentMethod("updatemenus","draw")(e),Zh.getComponentMethod("colorbar","draw")(e)}});var c7=ie((Urr,Qse)=>{"use strict";var eut=_m().readPaths,tut=m4(),Zse=um().clearOutlineControllers,u7=_i(),jse=oa(),rut=ko().arrayEditor,Kse=wm(),nut=Kse.getPathString;Qse.exports={draw:E4,drawOne:Jse,activateLastSelection:out};function E4(e){var t=e._fullLayout;Zse(e),t._selectionLayer.selectAll("path").remove();for(var r in t._plots){var i=t._plots[r].selectionLayer;i&&i.selectAll("path").remove()}for(var n=0;n<t.selections.length;n++)Jse(e,n)}function k4(e){return e._context.editSelection}function Jse(e,t){e._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+t+'"]').remove();var r=Kse.makeSelectionsOptionsAndPlotinfo(e,t),i=r.options,n=r.plotinfo;if(!i._input)return;a(e._fullLayout._selectionLayer);function a(o){var s=nut(e,i),l={"data-index":t,"fill-rule":"evenodd",d:s},u=i.opacity,f="rgba(0,0,0,0)",c=i.line.color||u7.contrast(e._fullLayout.plot_bgcolor),h=i.line.width,v=i.line.dash;h||(h=5,v="solid");var d=k4(e)&&e._fullLayout._activeSelectionIndex===t;d&&(f=e._fullLayout.activeselection.fillcolor,u=e._fullLayout.activeselection.opacity);for(var x=[],b=1;b>=0;b--){var p=o.append("path").attr(l).style("opacity",b?.1:u).call(u7.stroke,c).call(u7.fill,f).call(jse.dashLine,b?"solid":v,b?4+h:h);if(iut(p,e,i),d){var w=rut(e.layout,"selections",i);p.style({cursor:"move"});var A={element:p.node(),plotinfo:n,gd:e,editHelpers:w,isActiveSelection:!0},T=eut(s,e);tut(T,p,A)}else p.style("pointer-events",b?"all":"none");x[b]=p}var k=x[0],_=x[1];_.node().addEventListener("click",function(){return aut(e,k)})}}function iut(e,t,r){var i=r.xref+r.yref;jse.setClipUrl(e,"clip"+t._fullLayout._uid+i,t)}function aut(e,t){if(k4(e)){var r=t.node(),i=+r.getAttribute("data-index");if(i>=0){if(i===e._fullLayout._activeSelectionIndex){f7(e);return}e._fullLayout._activeSelectionIndex=i,e._fullLayout._deactivateSelection=f7,E4(e)}}}function out(e){if(k4(e)){var t=e._fullLayout.selections.length-1;e._fullLayout._activeSelectionIndex=t,e._fullLayout._deactivateSelection=f7,E4(e)}}function f7(e){if(k4(e)){var t=e._fullLayout._activeSelectionIndex;t>=0&&(Zse(e),delete e._fullLayout._activeSelectionIndex,E4(e))}}});var ele=ie((Vrr,$se)=>{function sut(){var e,t=0,r=!1;function i(n,a){return e.list.push({type:n,data:a?JSON.parse(JSON.stringify(a)):void 0}),e}return e={list:[],segmentId:function(){return t++},checkIntersection:function(n,a){return i("check",{seg1:n,seg2:a})},segmentChop:function(n,a){return i("div_seg",{seg:n,pt:a}),i("chop",{seg:n,pt:a})},statusRemove:function(n){return i("pop_seg",{seg:n})},segmentUpdate:function(n){return i("seg_update",{seg:n})},segmentNew:function(n,a){return i("new_seg",{seg:n,primary:a})},segmentRemove:function(n){return i("rem_seg",{seg:n})},tempStatus:function(n,a,o){return i("temp_status",{seg:n,above:a,below:o})},rewind:function(n){return i("rewind",{seg:n})},status:function(n,a,o){return i("status",{seg:n,above:a,below:o})},vert:function(n){return n===r?e:(r=n,i("vert",{x:n}))},log:function(n){return typeof n!="string"&&(n=JSON.stringify(n,!1,"  ")),i("log",{txt:n})},reset:function(){return i("reset")},selected:function(n){return i("selected",{segs:n})},chainStart:function(n){return i("chain_start",{seg:n})},chainRemoveHead:function(n,a){return i("chain_rem_head",{index:n,pt:a})},chainRemoveTail:function(n,a){return i("chain_rem_tail",{index:n,pt:a})},chainNew:function(n,a){return i("chain_new",{pt1:n,pt2:a})},chainMatch:function(n){return i("chain_match",{index:n})},chainClose:function(n){return i("chain_close",{index:n})},chainAddHead:function(n,a){return i("chain_add_head",{index:n,pt:a})},chainAddTail:function(n,a){return i("chain_add_tail",{index:n,pt:a})},chainConnect:function(n,a){return i("chain_con",{index1:n,index2:a})},chainReverse:function(n){return i("chain_rev",{index:n})},chainJoin:function(n,a){return i("chain_join",{index1:n,index2:a})},done:function(){return i("done")}},e}$se.exports=sut});var rle=ie((Hrr,tle)=>{function lut(e){typeof e!="number"&&(e=1e-10);var t={epsilon:function(r){return typeof r=="number"&&(e=r),e},pointAboveOrOnLine:function(r,i,n){var a=i[0],o=i[1],s=n[0],l=n[1],u=r[0],f=r[1];return(s-a)*(f-o)-(l-o)*(u-a)>=-e},pointBetween:function(r,i,n){var a=r[1]-i[1],o=n[0]-i[0],s=r[0]-i[0],l=n[1]-i[1],u=s*o+a*l;if(u<e)return!1;var f=o*o+l*l;return!(u-f>-e)},pointsSameX:function(r,i){return Math.abs(r[0]-i[0])<e},pointsSameY:function(r,i){return Math.abs(r[1]-i[1])<e},pointsSame:function(r,i){return t.pointsSameX(r,i)&&t.pointsSameY(r,i)},pointsCompare:function(r,i){return t.pointsSameX(r,i)?t.pointsSameY(r,i)?0:r[1]<i[1]?-1:1:r[0]<i[0]?-1:1},pointsCollinear:function(r,i,n){var a=r[0]-i[0],o=r[1]-i[1],s=i[0]-n[0],l=i[1]-n[1];return Math.abs(a*l-s*o)<e},linesIntersect:function(r,i,n,a){var o=i[0]-r[0],s=i[1]-r[1],l=a[0]-n[0],u=a[1]-n[1],f=o*u-s*l;if(Math.abs(f)<e)return!1;var c=r[0]-n[0],h=r[1]-n[1],v=(l*h-u*c)/f,d=(o*h-s*c)/f,x={alongA:0,alongB:0,pt:[r[0]+v*o,r[1]+v*s]};return v<=-e?x.alongA=-2:v<e?x.alongA=-1:v-1<=-e?x.alongA=0:v-1<e?x.alongA=1:x.alongA=2,d<=-e?x.alongB=-2:d<e?x.alongB=-1:d-1<=-e?x.alongB=0:d-1<e?x.alongB=1:x.alongB=2,x},pointInsideRegion:function(r,i){for(var n=r[0],a=r[1],o=i[i.length-1][0],s=i[i.length-1][1],l=!1,u=0;u<i.length;u++){var f=i[u][0],c=i[u][1];c-a>e!=s-a>e&&(o-f)*(a-c)/(s-c)+f-n>e&&(l=!l),o=f,s=c}return l}};return t}tle.exports=lut});var ile=ie((Grr,nle)=>{var uut={create:function(){var e={root:{root:!0,next:null},exists:function(t){return!(t===null||t===e.root)},isEmpty:function(){return e.root.next===null},getHead:function(){return e.root.next},insertBefore:function(t,r){for(var i=e.root,n=e.root.next;n!==null;){if(r(n)){t.prev=n.prev,t.next=n,n.prev.next=t,n.prev=t;return}i=n,n=n.next}i.next=t,t.prev=i,t.next=null},findTransition:function(t){for(var r=e.root,i=e.root.next;i!==null&&!t(i);)r=i,i=i.next;return{before:r===e.root?null:r,after:i,insert:function(n){return n.prev=r,n.next=i,r.next=n,i!==null&&(i.prev=n),n}}}};return e},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}};nle.exports=uut});var ole=ie((Yrr,ale)=>{var eM=ile();function fut(e,t,r){function i(d,x){return{id:r?r.segmentId():-1,start:d,end:x,myFill:{above:null,below:null},otherFill:null}}function n(d,x,b){return{id:r?r.segmentId():-1,start:d,end:x,myFill:{above:b.myFill.above,below:b.myFill.below},otherFill:null}}var a=eM.create();function o(d,x,b,p,w,A){var T=t.pointsCompare(x,w);return T!==0?T:t.pointsSame(b,A)?0:d!==p?d?1:-1:t.pointAboveOrOnLine(b,p?w:A,p?A:w)?1:-1}function s(d,x){a.insertBefore(d,function(b){var p=o(d.isStart,d.pt,x,b.isStart,b.pt,b.other.pt);return p<0})}function l(d,x){var b=eM.node({isStart:!0,pt:d.start,seg:d,primary:x,other:null,status:null});return s(b,d.end),b}function u(d,x,b){var p=eM.node({isStart:!1,pt:x.end,seg:x,primary:b,other:d,status:null});d.other=p,s(p,d.pt)}function f(d,x){var b=l(d,x);return u(b,d,x),b}function c(d,x){r&&r.segmentChop(d.seg,x),d.other.remove(),d.seg.end=x,d.other.pt=x,s(d.other,d.pt)}function h(d,x){var b=n(x,d.seg.end,d.seg);return c(d,x),f(b,d.primary)}function v(d,x){var b=eM.create();function p(O,U){var B=O.seg.start,F=O.seg.end,N=U.seg.start,X=U.seg.end;return t.pointsCollinear(B,N,X)?t.pointsCollinear(F,N,X)||t.pointAboveOrOnLine(F,N,X)?1:-1:t.pointAboveOrOnLine(B,N,X)?1:-1}function w(O){return b.findTransition(function(U){var B=p(O,U.ev);return B>0})}function A(O,U){var B=O.seg,F=U.seg,N=B.start,X=B.end,K=F.start,ne=F.end;r&&r.checkIntersection(B,F);var fe=t.linesIntersect(N,X,K,ne);if(fe===!1){if(!t.pointsCollinear(N,X,K)||t.pointsSame(N,ne)||t.pointsSame(X,K))return!1;var ue=t.pointsSame(N,K),ee=t.pointsSame(X,ne);if(ue&&ee)return U;var Z=!ue&&t.pointBetween(N,K,ne),oe=!ee&&t.pointBetween(X,K,ne);if(ue)return oe?h(U,X):h(O,ne),U;Z&&(ee||(oe?h(U,X):h(O,ne)),h(U,N))}else fe.alongA===0&&(fe.alongB===-1?h(O,K):fe.alongB===0?h(O,fe.pt):fe.alongB===1&&h(O,ne)),fe.alongB===0&&(fe.alongA===-1?h(U,N):fe.alongA===0?h(U,fe.pt):fe.alongA===1&&h(U,X));return!1}for(var T=[];!a.isEmpty();){var k=a.getHead();if(r&&r.vert(k.pt[0]),k.isStart){let O=function(){if(E){var U=A(k,E);if(U)return U}return S?A(k,S):!1};var q=O;r&&r.segmentNew(k.seg,k.primary);var _=w(k),E=_.before?_.before.ev:null,S=_.after?_.after.ev:null;r&&r.tempStatus(k.seg,E?E.seg:!1,S?S.seg:!1);var g=O();if(g){if(e){var C;k.seg.myFill.below===null?C=!0:C=k.seg.myFill.above!==k.seg.myFill.below,C&&(g.seg.myFill.above=!g.seg.myFill.above)}else g.seg.otherFill=k.seg.myFill;r&&r.segmentUpdate(g.seg),k.other.remove(),k.remove()}if(a.getHead()!==k){r&&r.rewind(k.seg);continue}if(e){var C;k.seg.myFill.below===null?C=!0:C=k.seg.myFill.above!==k.seg.myFill.below,S?k.seg.myFill.below=S.seg.myFill.above:k.seg.myFill.below=d,C?k.seg.myFill.above=!k.seg.myFill.below:k.seg.myFill.above=k.seg.myFill.below}else if(k.seg.otherFill===null){var M;S?k.primary===S.primary?M=S.seg.otherFill.above:M=S.seg.myFill.above:M=k.primary?x:d,k.seg.otherFill={above:M,below:M}}r&&r.status(k.seg,E?E.seg:!1,S?S.seg:!1),k.other.status=_.insert(eM.node({ev:k}))}else{var P=k.status;if(P===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(b.exists(P.prev)&&b.exists(P.next)&&A(P.prev.ev,P.next.ev),r&&r.statusRemove(P.ev.seg),P.remove(),!k.primary){var D=k.seg.myFill;k.seg.myFill=k.seg.otherFill,k.seg.otherFill=D}T.push(k.seg)}a.getHead().remove()}return r&&r.done(),T}return e?{addRegion:function(d){for(var x,b=d[d.length-1],p=0;p<d.length;p++){x=b,b=d[p];var w=t.pointsCompare(x,b);w!==0&&f(i(w<0?x:b,w<0?b:x),!0)}},calculate:function(d){return v(d,!1)}}:{calculate:function(d,x,b,p){return d.forEach(function(w){f(n(w.start,w.end,w),!0)}),b.forEach(function(w){f(n(w.start,w.end,w),!1)}),v(x,p)}}}ale.exports=fut});var lle=ie((Wrr,sle)=>{function cut(e,t,r){var i=[],n=[];return e.forEach(function(a){var o=a.start,s=a.end;if(t.pointsSame(o,s)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}r&&r.chainStart(a);var l={index:0,matches_head:!1,matches_pt1:!1},u={index:0,matches_head:!1,matches_pt1:!1},f=l;function c(q,O,U){return f.index=q,f.matches_head=O,f.matches_pt1=U,f===l?(f=u,!1):(f=null,!0)}for(var h=0;h<i.length;h++){var v=i[h],d=v[0],x=v[1],b=v[v.length-1],p=v[v.length-2];if(t.pointsSame(d,o)){if(c(h,!0,!0))break}else if(t.pointsSame(d,s)){if(c(h,!0,!1))break}else if(t.pointsSame(b,o)){if(c(h,!1,!0))break}else if(t.pointsSame(b,s)&&c(h,!1,!1))break}if(f===l){i.push([o,s]),r&&r.chainNew(o,s);return}if(f===u){r&&r.chainMatch(l.index);var w=l.index,A=l.matches_pt1?s:o,T=l.matches_head,v=i[w],k=T?v[0]:v[v.length-1],_=T?v[1]:v[v.length-2],E=T?v[v.length-1]:v[0],S=T?v[v.length-2]:v[1];if(t.pointsCollinear(_,k,A)&&(T?(r&&r.chainRemoveHead(l.index,A),v.shift()):(r&&r.chainRemoveTail(l.index,A),v.pop()),k=_),t.pointsSame(E,A)){i.splice(w,1),t.pointsCollinear(S,E,k)&&(T?(r&&r.chainRemoveTail(l.index,k),v.pop()):(r&&r.chainRemoveHead(l.index,k),v.shift())),r&&r.chainClose(l.index),n.push(v);return}T?(r&&r.chainAddHead(l.index,A),v.unshift(A)):(r&&r.chainAddTail(l.index,A),v.push(A));return}function g(q){r&&r.chainReverse(q),i[q].reverse()}function C(q,O){var U=i[q],B=i[O],F=U[U.length-1],N=U[U.length-2],X=B[0],K=B[1];t.pointsCollinear(N,F,X)&&(r&&r.chainRemoveTail(q,F),U.pop(),F=N),t.pointsCollinear(F,X,K)&&(r&&r.chainRemoveHead(O,X),B.shift()),r&&r.chainJoin(q,O),i[q]=U.concat(B),i.splice(O,1)}var M=l.index,P=u.index;r&&r.chainConnect(M,P);var D=i[M].length<i[P].length;l.matches_head?u.matches_head?D?(g(M),C(M,P)):(g(P),C(P,M)):C(P,M):u.matches_head?C(M,P):D?(g(M),C(P,M)):(g(P),C(M,P))}),n}sle.exports=cut});var fle=ie((Xrr,ule)=>{function tM(e,t,r){var i=[];return e.forEach(function(n){var a=(n.myFill.above?8:0)+(n.myFill.below?4:0)+(n.otherFill&&n.otherFill.above?2:0)+(n.otherFill&&n.otherFill.below?1:0);t[a]!==0&&i.push({id:r?r.segmentId():-1,start:n.start,end:n.end,myFill:{above:t[a]===1,below:t[a]===2},otherFill:null})}),r&&r.selected(i),i}var hut={union:function(e,t){return tM(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return tM(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return tM(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return tM(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return tM(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}};ule.exports=hut});var hle=ie((Zrr,cle)=>{var vut={toPolygon:function(e,t){function r(a){if(a.length<=0)return e.segments({inverted:!1,regions:[]});function o(u){var f=u.slice(0,u.length-1);return e.segments({inverted:!1,regions:[f]})}for(var s=o(a[0]),l=1;l<a.length;l++)s=e.selectDifference(e.combine(s,o(a[l])));return s}if(t.type==="Polygon")return e.polygon(r(t.coordinates));if(t.type==="MultiPolygon"){for(var i=e.segments({inverted:!1,regions:[]}),n=0;n<t.coordinates.length;n++)i=e.selectUnion(e.combine(i,r(t.coordinates[n])));return e.polygon(i)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,t,r){r=e.polygon(e.segments(r));function i(v,d){return t.pointInsideRegion([(v[0][0]+v[1][0])*.5,(v[0][1]+v[1][1])*.5],d)}function n(v){return{region:v,children:[]}}var a=n(null);function o(v,d){for(var x=0;x<v.children.length;x++){var b=v.children[x];if(i(d,b.region)){o(b,d);return}}for(var p=n(d),x=0;x<v.children.length;x++){var b=v.children[x];i(b.region,d)&&(p.children.push(b),v.children.splice(x,1),x--)}v.children.push(p)}for(var s=0;s<r.regions.length;s++){var l=r.regions[s];l.length<3||o(a,l)}function u(v,d){for(var x=0,b=v[v.length-1][0],p=v[v.length-1][1],w=[],A=0;A<v.length;A++){var T=v[A][0],k=v[A][1];w.push([T,k]),x+=k*b-T*p,b=T,p=k}var _=x<0;return _!==d&&w.reverse(),w.push([w[0][0],w[0][1]]),w}var f=[];function c(v){var d=[u(v.region,!1)];f.push(d);for(var x=0;x<v.children.length;x++)d.push(h(v.children[x]))}function h(v){for(var d=0;d<v.children.length;d++)c(v.children[d]);return u(v.region,!0)}for(var s=0;s<a.children.length;s++)c(a.children[s]);return f.length<=0?{type:"Polygon",coordinates:[]}:f.length==1?{type:"Polygon",coordinates:f[0]}:{type:"MultiPolygon",coordinates:f}}};cle.exports=vut});var gle=ie((jrr,ple)=>{var dut=ele(),put=rle(),vle=ole(),gut=lle(),rM=fle(),dle=hle(),cp=!1,nM=put(),ld;ld={buildLog:function(e){return e===!0?cp=dut():e===!1&&(cp=!1),cp===!1?!1:cp.list},epsilon:function(e){return nM.epsilon(e)},segments:function(e){var t=vle(!0,nM,cp);return e.regions.forEach(t.addRegion),{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){var r=vle(!1,nM,cp);return{combined:r.calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:rM.union(e.combined,cp),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:rM.intersect(e.combined,cp),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:rM.difference(e.combined,cp),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:rM.differenceRev(e.combined,cp),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:rM.xor(e.combined,cp),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:gut(e.segments,nM,cp),inverted:e.inverted}},polygonFromGeoJSON:function(e){return dle.toPolygon(ld,e)},polygonToGeoJSON:function(e){return dle.fromPolygon(ld,nM,e)},union:function(e,t){return iM(e,t,ld.selectUnion)},intersect:function(e,t){return iM(e,t,ld.selectIntersect)},difference:function(e,t){return iM(e,t,ld.selectDifference)},differenceRev:function(e,t){return iM(e,t,ld.selectDifferenceRev)},xor:function(e,t){return iM(e,t,ld.selectXor)}};function iM(e,t,r){var i=ld.segments(e),n=ld.segments(t),a=ld.combine(i,n),o=r(a);return ld.polygon(o)}typeof window=="object"&&(window.PolyBool=ld);ple.exports=ld});var mle=ie((Krr,yle)=>{yle.exports=function(t,r,i,n){var a=t[0],o=t[1],s=!1;i===void 0&&(i=0),n===void 0&&(n=r.length);for(var l=n-i,u=0,f=l-1;u<l;f=u++){var c=r[u+i][0],h=r[u+i][1],v=r[f+i][0],d=r[f+i][1],x=h>o!=d>o&&a<(v-c)*(o-h)/(d-h)+c;x&&(s=!s)}return s}});var aM=ie((Jrr,xle)=>{"use strict";var h7=Vk().dot,C4=eo().BADNUM,L4=xle.exports={};L4.tester=function(t){var r=t.slice(),i=r[0][0],n=i,a=r[0][1],o=a,s;for((r[r.length-1][0]!==r[0][0]||r[r.length-1][1]!==r[0][1])&&r.push(r[0]),s=1;s<r.length;s++)i=Math.min(i,r[s][0]),n=Math.max(n,r[s][0]),a=Math.min(a,r[s][1]),o=Math.max(o,r[s][1]);var l=!1,u;r.length===5&&(r[0][0]===r[1][0]?r[2][0]===r[3][0]&&r[0][1]===r[3][1]&&r[1][1]===r[2][1]&&(l=!0,u=function(d){return d[0]===r[0][0]}):r[0][1]===r[1][1]&&r[2][1]===r[3][1]&&r[0][0]===r[3][0]&&r[1][0]===r[2][0]&&(l=!0,u=function(d){return d[1]===r[0][1]}));function f(d,x){var b=d[0],p=d[1];return!(b===C4||b<i||b>n||p===C4||p<a||p>o||x&&u(d))}function c(d,x){var b=d[0],p=d[1];if(b===C4||b<i||b>n||p===C4||p<a||p>o)return!1;var w=r.length,A=r[0][0],T=r[0][1],k=0,_,E,S,g,C;for(_=1;_<w;_++)if(E=A,S=T,A=r[_][0],T=r[_][1],g=Math.min(E,A),!(b<g||b>Math.max(E,A)||p>Math.max(S,T)))if(p<Math.min(S,T))b!==g&&k++;else{if(A===E?C=p:C=S+(b-E)*(T-S)/(A-E),p===C)return!(_===1&&x);p<=C&&b!==g&&k++}return k%2===1}var h=!0,v=r[0];for(s=1;s<r.length;s++)if(v[0]!==r[s][0]||v[1]!==r[s][1]){h=!1;break}return{xmin:i,xmax:n,ymin:a,ymax:o,pts:r,contains:l?f:c,isRect:l,degenerate:h}};L4.isSegmentBent=function(t,r,i,n){var a=t[r],o=[t[i][0]-a[0],t[i][1]-a[1]],s=h7(o,o),l=Math.sqrt(s),u=[-o[1]/l,o[0]/l],f,c,h;for(f=r+1;f<i;f++)if(c=[t[f][0]-a[0],t[f][1]-a[1]],h=h7(c,o),h<0||h>s||Math.abs(h7(c,u))>n)return!0;return!1};L4.filter=function(t,r){var i=[t[0]],n=0,a=0;function o(l){t.push(l);var u=i.length,f=n;i.splice(a+1);for(var c=f+1;c<t.length;c++)(c===t.length-1||L4.isSegmentBent(t,f,c+1,r))&&(i.push(t[c]),i.length<u-2&&(n=c,a=i.length-1),f=c)}if(t.length>1){var s=t.pop();o(s)}return{addPt:o,raw:t,filtered:i}}});var ble=ie((Qrr,_le)=>{"use strict";_le.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}});var Hle=ie(($rr,Vle)=>{"use strict";var wle=gle(),yut=mle(),lM=Ti(),mut=oa().dashStyle,oM=_i(),xut=Ol(),_ut=ad().makeEventData,vM=n0(),but=vM.freeMode,wut=vM.rectMode,uM=vM.drawMode,g7=vM.openMode,y7=vM.selectMode,Tle=wm(),Ale=ZA(),Cle=m4(),Lle=um().clearOutline,Ple=_m(),v7=Ple.handleEllipse,Tut=Ple.readPaths,Aut=d4().newShapes,Mut=NO(),Sut=c7().activateLastSelection,R4=Zt(),Eut=R4.sorterAsc,Rle=aM(),sM=nC(),hp=zl().getFromId,kut=WA(),Cut=$A().redrawReglTraces,D4=ble(),Y0=D4.MINSELECT,Lut=Rle.filter,m7=Rle.tester,x7=f4(),Mle=x7.p2r,Put=x7.axValue,Rut=x7.getTransform;function _7(e){return e.subplot!==void 0}function Dut(e,t,r,i,n){var a=!_7(i),o=but(n),s=wut(n),l=g7(n),u=uM(n),f=y7(n),c=n==="drawline",h=n==="drawcircle",v=c||h,d=i.gd,x=d._fullLayout,b=f&&x.newselection.mode==="immediate"&&a,p=x._zoomlayer,w=i.element.getBoundingClientRect(),A=i.plotinfo,T=Rut(A),k=t-w.left,_=r-w.top;x._calcInverseTransform(d);var E=R4.apply3DTransform(x._invTransform)(k,_);k=E[0],_=E[1];var S=x._invScaleX,g=x._invScaleY,C=k,M=_,P="M"+k+","+_,D=i.xaxes[0],q=i.yaxes[0],O=D._length,U=q._length,B=e.altKey&&!(uM(n)&&l),F,N,X,K,ne,fe,ue;Ile(e,d,i),o&&(F=Lut([[k,_]],D4.BENDPX));var ee=p.selectAll("path.select-outline-"+A.id).data([1]),Z=u?x.newshape:x.newselection;u&&(i.hasText=Z.label.text||Z.label.texttemplate);var oe=u&&!l?Z.fillcolor:"rgba(0,0,0,0)",ce=Z.line.color||(a?oM.contrast(d._fullLayout.plot_bgcolor):"#7f7f7f");ee.enter().append("path").attr("class","select-outline select-outline-"+A.id).style({opacity:u?Z.opacity/2:1,"stroke-dasharray":mut(Z.line.dash,Z.line.width),"stroke-width":Z.line.width+"px","shape-rendering":"crispEdges"}).call(oM.stroke,ce).call(oM.fill,oe).attr("fill-rule","evenodd").classed("cursor-move",!!u).attr("transform",T).attr("d",P+"Z");var le=p.append("path").attr("class","zoombox-corners").style({fill:oM.background,stroke:oM.defaultLine,"stroke-width":1}).attr("transform",T).attr("d","M0,0Z");if(u&&i.hasText){var me=p.select(".label-temp");me.empty()&&(me=p.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var he=x._uid+D4.SELECTID,te=[],ge=I4(d,i.xaxes,i.yaxes,i.subplot);b&&!e.shiftKey&&(i._clearSubplotSelections=function(){if(a){var _e=D._id,Ce=q._id;Ble(d,_e,Ce,ge);for(var qe=(d.layout||{}).selections||[],rt=[],Re=!1,Ie=0;Ie<qe.length;Ie++){var ot=x.selections[Ie];ot.xref!==_e||ot.yref!==Ce?rt.push(qe[Ie]):Re=!0}Re&&(d._fullLayout._noEmitSelectedAtStart=!0,lM.call("_guiRelayout",d,{selections:rt}))}});var ae=Xut(i);i.moveFn=function(_e,Ce){i._clearSubplotSelections&&(i._clearSubplotSelections(),i._clearSubplotSelections=void 0),C=Math.max(0,Math.min(O,S*_e+k)),M=Math.max(0,Math.min(U,g*Ce+_));var qe=Math.abs(C-k),rt=Math.abs(M-_);if(s){var Re,Ie,ot;if(f){var lt=x.selectdirection;switch(lt==="any"?rt<Math.min(qe*.6,Y0)?Re="h":qe<Math.min(rt*.6,Y0)?Re="v":Re="d":Re=lt,Re){case"h":Ie=h?U/2:0,ot=U;break;case"v":Ie=h?O/2:0,ot=O;break}}if(u)switch(x.newshape.drawdirection){case"vertical":Re="h",Ie=h?U/2:0,ot=U;break;case"horizontal":Re="v",Ie=h?O/2:0,ot=O;break;case"ortho":qe<rt?(Re="h",Ie=_,ot=M):(Re="v",Ie=k,ot=C);break;default:Re="d"}Re==="h"?(K=v?v7(h,[C,Ie],[C,ot]):[[k,Ie],[k,ot],[C,ot],[C,Ie]],K.xmin=v?C:Math.min(k,C),K.xmax=v?C:Math.max(k,C),K.ymin=Math.min(Ie,ot),K.ymax=Math.max(Ie,ot),le.attr("d","M"+K.xmin+","+(_-Y0)+"h-4v"+2*Y0+"h4ZM"+(K.xmax-1)+","+(_-Y0)+"h4v"+2*Y0+"h-4Z")):Re==="v"?(K=v?v7(h,[Ie,M],[ot,M]):[[Ie,_],[Ie,M],[ot,M],[ot,_]],K.xmin=Math.min(Ie,ot),K.xmax=Math.max(Ie,ot),K.ymin=v?M:Math.min(_,M),K.ymax=v?M:Math.max(_,M),le.attr("d","M"+(k-Y0)+","+K.ymin+"v-4h"+2*Y0+"v4ZM"+(k-Y0)+","+(K.ymax-1)+"v4h"+2*Y0+"v-4Z")):Re==="d"&&(K=v?v7(h,[k,_],[C,M]):[[k,_],[k,M],[C,M],[C,_]],K.xmin=Math.min(k,C),K.xmax=Math.max(k,C),K.ymin=Math.min(_,M),K.ymax=Math.max(_,M),le.attr("d","M0,0Z"))}else o&&(F.addPt([C,M]),K=F.filtered);if(i.selectionDefs&&i.selectionDefs.length?(X=Fle(i.mergedPolygons,K,B),K.subtract=B,N=b7(i.selectionDefs.concat([K]))):(X=[K],N=m7(K)),Cle(zle(X,l),ee,i),f){var ht=p7(d,!1),xt=ht.eventData?ht.eventData.points.slice():[];ht=p7(d,!1,N,ge,i),N=ht.selectionTesters,ue=ht.eventData;var Vt;F?Vt=F.filtered:Vt=Nle(X),sM.throttle(he,D4.SELECTDELAY,function(){te=Ole(N,ge);for(var Ht=te.slice(),Me=0;Me<xt.length;Me++){for(var Ke=xt[Me],We=!1,et=0;et<Ht.length;et++)if(Ht[et].curveNumber===Ke.curveNumber&&Ht[et].pointNumber===Ke.pointNumber){We=!0;break}We||Ht.push(Ke)}Ht.length&&(ue||(ue={}),ue.points=Ht),ae(ue,Vt),Zut(d,ue)})}},i.clickFn=function(_e,Ce){if(le.remove(),d._fullLayout._activeShapeIndex>=0){d._fullLayout._deactivateShape(d);return}if(!u){var qe=x.clickmode;sM.done(he).then(function(){if(sM.clear(he),_e===2){for(ee.remove(),ne=0;ne<ge.length;ne++)fe=ge[ne],fe._module.selectPoints(fe,!1);if(cM(d,ge),fM(i),T7(d),ge.length){var rt=ge[0].xaxis,Re=ge[0].yaxis;if(rt&&Re){for(var Ie=[],ot=d._fullLayout.selections,lt=0;lt<ot.length;lt++){var ht=ot[lt];ht&&(ht.xref!==rt._id||ht.yref!==Re._id)&&Ie.push(ht)}Ie.length<ot.length&&(d._fullLayout._noEmitSelectedAtStart=!0,lM.call("_guiRelayout",d,{selections:Ie}))}}}else qe.indexOf("select")>-1&&Dle(Ce,d,i.xaxes,i.yaxes,i.subplot,i,ee),qe==="event"&&hM(d,void 0);xut.click(d,Ce,A.id)}).catch(R4.error)}},i.doneFn=function(){le.remove(),sM.done(he).then(function(){sM.clear(he),!b&&K&&i.selectionDefs&&(K.subtract=B,i.selectionDefs.push(K),i.mergedPolygons.length=0,[].push.apply(i.mergedPolygons,X)),(b||u)&&fM(i,b),i.doneFnCompleted&&i.doneFnCompleted(te),f&&hM(d,ue)}).catch(R4.error)}}function Dle(e,t,r,i,n,a,o){var s=t._hoverdata,l=t._fullLayout,u=l.clickmode,f=u.indexOf("event")>-1,c=[],h,v,d,x,b,p,w,A,T,k;if(Out(s)){Ile(e,t,a),h=I4(t,r,i,n);var _=But(s,h),E=_.pointNumbers.length>0;if(E?Nut(h,_):Uut(h)&&(w=Ele(_))){for(o&&o.remove(),k=0;k<h.length;k++)v=h[k],v._module.selectPoints(v,!1);cM(t,h),fM(a),f&&T7(t)}else{A=e.shiftKey&&(w!==void 0?w:Ele(_)),d=Iut(_.pointNumber,_.searchInfo,A);var S=a.selectionDefs.concat([d]);for(x=b7(S,x),k=0;k<h.length;k++)if(b=h[k]._module.selectPoints(h[k],x),p=qle(b,h[k]),c.length)for(var g=0;g<p.length;g++)c.push(p[g]);else c=p;if(T={points:c},cM(t,h,T),d&&a&&a.selectionDefs.push(d),o){var C=a.mergedPolygons,M=g7(a.dragmode);Cle(zle(C,M),o,a)}f&&hM(t,T)}}}function Iut(e,t,r){return{pointNumber:e,searchInfo:t,subtract:!!r}}function d7(e){return"pointNumber"in e&&"searchInfo"in e}function Fut(e){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(t,r,i,n){var a=e.searchInfo.cd[0].trace._expandedIndex,o=n.cd[0].trace._expandedIndex;return o===a&&i===e.pointNumber},isRect:!1,degenerate:!1,subtract:!!e.subtract}}function b7(e){if(!e.length)return;for(var t=[],r=d7(e[0])?0:e[0][0][0],i=r,n=d7(e[0])?0:e[0][0][1],a=n,o=0;o<e.length;o++)if(d7(e[o]))t.push(Fut(e[o]));else{var s=m7(e[o]);s.subtract=!!e[o].subtract,t.push(s),r=Math.min(r,s.xmin),i=Math.max(i,s.xmax),n=Math.min(n,s.ymin),a=Math.max(a,s.ymax)}function l(u,f,c,h){for(var v=!1,d=0;d<t.length;d++)t[d].contains(u,f,c,h)&&(v=!t[d].subtract);return v}return{xmin:r,xmax:i,ymin:n,ymax:a,pts:[],contains:l,isRect:!1,degenerate:!1}}function Ile(e,t,r){var i=t._fullLayout,n=r.plotinfo,a=r.dragmode,o=i._lastSelectedSubplot&&i._lastSelectedSubplot===n.id,s=(e.shiftKey||e.altKey)&&!(uM(a)&&g7(a));o&&s&&n.selection&&n.selection.selectionDefs&&!r.selectionDefs?(r.selectionDefs=n.selection.selectionDefs,r.mergedPolygons=n.selection.mergedPolygons):(!s||!n.selection)&&fM(r),o||(Lle(t),i._lastSelectedSubplot=n.id)}function qut(e){return e._fullLayout._activeShapeIndex>=0}function zut(e){return e._fullLayout._activeSelectionIndex>=0}function fM(e,t){var r=e.dragmode,i=e.plotinfo,n=e.gd;qut(n)&&n._fullLayout._deactivateShape(n),zut(n)&&n._fullLayout._deactivateSelection(n);var a=n._fullLayout,o=a._zoomlayer,s=uM(r),l=y7(r);if(s||l){var u=o.selectAll(".select-outline-"+i.id);if(u&&n._fullLayout._outlining){var f;s&&(f=Aut(u,e)),f&&lM.call("_guiRelayout",n,{shapes:f});var c;l&&!_7(e)&&(c=Mut(u,e)),c&&(n._fullLayout._noEmitSelectedAtStart=!0,lM.call("_guiRelayout",n,{selections:c}).then(function(){t&&Sut(n)})),n._fullLayout._outlining=!1}}i.selection={},i.selection.selectionDefs=e.selectionDefs=[],i.selection.mergedPolygons=e.mergedPolygons=[]}function Sle(e){return e._id}function I4(e,t,r,i){if(!e.calcdata)return[];var n=[],a=t.map(Sle),o=r.map(Sle),s,l,u;for(u=0;u<e.calcdata.length;u++)if(s=e.calcdata[u],l=s[0].trace,!(l.visible!==!0||!l._module||!l._module.selectPoints))if(_7({subplot:i})&&(l.subplot===i||l.geo===i))n.push(P4(l._module,s,t[0],r[0]));else if(l.type==="splom"){if(l._xaxes[a[0]]&&l._yaxes[o[0]]){var f=P4(l._module,s,t[0],r[0]);f.scene=e._fullLayout._splomScenes[l.uid],n.push(f)}}else if(l.type==="sankey"){var c=P4(l._module,s,t[0],r[0]);n.push(c)}else{if(a.indexOf(l.xaxis)===-1&&(!l._xA||!l._xA.overlaying)||o.indexOf(l.yaxis)===-1&&(!l._yA||!l._yA.overlaying))continue;n.push(P4(l._module,s,hp(e,l.xaxis),hp(e,l.yaxis)))}return n}function P4(e,t,r,i){return{_module:e,cd:t,xaxis:r,yaxis:i}}function Out(e){return e&&Array.isArray(e)&&e[0].hoverOnBox!==!0}function But(e,t){var r=e[0],i=-1,n=[],a,o;for(o=0;o<t.length;o++)if(a=t[o],r.fullData._expandedIndex===a.cd[0].trace._expandedIndex){if(r.hoverOnBox===!0)break;r.pointNumber!==void 0?i=r.pointNumber:r.binNumber!==void 0&&(i=r.binNumber,n=r.pointNumbers);break}return{pointNumber:i,pointNumbers:n,searchInfo:a}}function Ele(e){var t=e.searchInfo.cd[0].trace,r=e.pointNumber,i=e.pointNumbers,n=i.length>0,a=n?i[0]:r;return t.selectedpoints?t.selectedpoints.indexOf(a)>-1:!1}function Nut(e,t){var r=[],i,n,a,o;for(o=0;o<e.length;o++)i=e[o],i.cd[0].trace.selectedpoints&&i.cd[0].trace.selectedpoints.length>0&&r.push(i);if(r.length===1&&(a=r[0]===t.searchInfo,a&&(n=t.searchInfo.cd[0].trace,n.selectedpoints.length===t.pointNumbers.length))){for(o=0;o<t.pointNumbers.length;o++)if(n.selectedpoints.indexOf(t.pointNumbers[o])<0)return!1;return!0}return!1}function Uut(e){var t=0,r,i,n;for(n=0;n<e.length;n++)if(r=e[n],i=r.cd[0].trace,i.selectedpoints&&(i.selectedpoints.length>1||(t+=i.selectedpoints.length,t>1)))return!1;return t===1}function cM(e,t,r){var i;for(i=0;i<t.length;i++){var n=t[i].cd[0].trace._fullInput,a=e._fullLayout._tracePreGUI[n.uid]||{};a.selectedpoints===void 0&&(a.selectedpoints=n._input.selectedpoints||null)}var o;if(r){var s=r.points||[];for(i=0;i<t.length;i++)o=t[i].cd[0].trace,o._input.selectedpoints=o._fullInput.selectedpoints=[],o._fullInput!==o&&(o.selectedpoints=[]);for(var l=0;l<s.length;l++){var u=s[l],f=u.data,c=u.fullData,h=u.pointIndex,v=u.pointIndices;v?([].push.apply(f.selectedpoints,v),o._fullInput!==o&&[].push.apply(c.selectedpoints,v)):(f.selectedpoints.push(h),o._fullInput!==o&&c.selectedpoints.push(h))}}else for(i=0;i<t.length;i++)o=t[i].cd[0].trace,delete o.selectedpoints,delete o._input.selectedpoints,o._fullInput!==o&&delete o._fullInput.selectedpoints;Vut(e,t)}function Vut(e,t){for(var r=!1,i=0;i<t.length;i++){var n=t[i],a=n.cd;lM.traceIs(a[0].trace,"regl")&&(r=!0);var o=n._module,s=o.styleOnSelect||o.style;s&&(s(e,a,a[0].node3),a[0].nodeRangePlot3&&s(e,a,a[0].nodeRangePlot3))}r&&(kut(e),Cut(e))}function Fle(e,t,r){for(var i=r?wle.difference:wle.union,n=i({regions:e},{regions:[t]}),a=n.regions.reverse(),o=0;o<a.length;o++){var s=a[o];s.subtract=w7(s,a.slice(0,o))}return a}function qle(e,t){if(Array.isArray(e))for(var r=t.cd,i=t.cd[0].trace,n=0;n<e.length;n++)e[n]=_ut(e[n],i,r);return e}function zle(e,t){for(var r=[],i=0;i<e.length;i++){r[i]=[];for(var n=0;n<e[i].length;n++){r[i][n]=[],r[i][n][0]=n?"L":"M";for(var a=0;a<e[i][n].length;a++)r[i][n].push(e[i][n][a])}t||r[i].push(["Z",r[i][0][1],r[i][0][2]])}return r}function Ole(e,t){for(var r=[],i,n=[],a,o=0;o<t.length;o++){var s=t[o];a=s._module.selectPoints(s,e),n.push(a),i=qle(a,s),r=r.concat(i)}return r}function p7(e,t,r,i,n){var a=!!i,o,s,l;n&&(o=n.plotinfo,s=n.xaxes[0]._id,l=n.yaxes[0]._id);var u=[],f=[],c=kle(e),h=e._fullLayout;if(o){var v=h._zoomlayer,d=h.dragmode,x=uM(d),b=y7(d);if(x||b){var p=hp(e,s,"x"),w=hp(e,l,"y");if(p&&w){var A=v.selectAll(".select-outline-"+o.id);if(A&&e._fullLayout._outlining&&A.length){for(var T=A[0][0],k=T.getAttribute("d"),_=Tut(k,e,o),E=[],S=0;S<_.length;S++){for(var g=_[S],C=[],M=0;M<g.length;M++)C.push([Am(p,g[M][1]),Am(w,g[M][2])]);C.xref=s,C.yref=l,C.subtract=w7(C,E),E.push(C)}c=c.concat(E)}}}}var P=s&&l?[s+l]:h._subplots.cartesian;Hut(e);for(var D={},q=0;q<P.length;q++){var O=P[q],U=O.indexOf("y"),B=O.slice(0,U),F=O.slice(U),N=s&&l?r:void 0;if(N=Yut(c,B,F,N),N){var X=i;if(!a){var K=hp(e,B,"x"),ne=hp(e,F,"y");X=I4(e,[K],[ne],O);for(var fe=0;fe<X.length;fe++){var ue=X[fe],ee=ue.cd[0],Z=ee.trace;if(ue._module.name==="scattergl"&&!ee.t.xpx){var oe=Z.x,ce=Z.y,le=Z._length;ee.t.xpx=[],ee.t.ypx=[];for(var me=0;me<le;me++)ee.t.xpx[me]=K.c2p(oe[me]),ee.t.ypx[me]=ne.c2p(ce[me])}ue._module.name==="splom"&&(D[Z.uid]||(D[Z.uid]=!0))}}var he=Ole(N,X);u=u.concat(he),f=f.concat(X)}}var te={points:u};cM(e,f,te);var ge=h.clickmode,ae=ge.indexOf("event")>-1&&t;if(!o&&t){var _e=kle(e,!0);if(_e.length){var Ce=_e[0].xref,qe=_e[0].yref;if(Ce&&qe){var rt=Nle(_e),Re=Ule([hp(e,Ce,"x"),hp(e,qe,"y")]);Re(te,rt)}}e._fullLayout._noEmitSelectedAtStart?e._fullLayout._noEmitSelectedAtStart=!1:ae&&hM(e,te),h._reselect=!1}if(!o&&h._deselect){var Ie=h._deselect;s=Ie.xref,l=Ie.yref,Gut(s,l,f)||Ble(e,s,l,i),ae&&(te.points.length?hM(e,te):T7(e)),h._deselect=!1}return{eventData:te,selectionTesters:r}}function Hut(e){var t=e.calcdata;if(t)for(var r=0;r<t.length;r++){var i=t[r][0],n=i.trace,a=e._fullLayout._splomScenes;if(a){var o=a[n.uid];o&&(o.selectBatch=[])}}}function Gut(e,t,r){for(var i=0;i<r.length;i++){var n=r[i];if(n.xaxis&&n.xaxis._id===e&&n.yaxis&&n.yaxis._id===t)return!0}return!1}function Ble(e,t,r,i){i=I4(e,[hp(e,t,"x")],[hp(e,r,"y")],t+r);for(var n=0;n<i.length;n++){var a=i[n];a._module.selectPoints(a,!1)}cM(e,i)}function Yut(e,t,r,i){for(var n,a=0;a<e.length;a++){var o=e[a];if(!(t!==o.xref||r!==o.yref))if(n){var s=!!o.subtract;n=Fle(n,o,s),i=b7(n)}else n=[o],i=m7(o)}return i}function kle(e,t){for(var r=[],i=e._fullLayout,n=i.selections,a=n.length,o=0;o<a;o++)if(!(t&&o!==i._activeSelectionIndex)){var s=n[o];if(s){var l=s.xref,u=s.yref,f=hp(e,l,"x"),c=hp(e,u,"y"),h,v,d,x,b;if(s.type==="rect"){b=[];var p=Am(f,s.x0),w=Am(f,s.x1),A=Am(c,s.y0),T=Am(c,s.y1);b=[[p,A],[p,T],[w,T],[w,A]],h=Math.min(p,w),v=Math.max(p,w),d=Math.min(A,T),x=Math.max(A,T),b.xmin=h,b.xmax=v,b.ymin=d,b.ymax=x,b.xref=l,b.yref=u,b.subtract=!1,b.isRect=!0,r.push(b)}else if(s.type==="path")for(var k=s.path.split("Z"),_=[],E=0;E<k.length;E++){var S=k[E];if(S){S+="Z";var g=Tle.extractPathCoords(S,Ale.paramIsX,"raw"),C=Tle.extractPathCoords(S,Ale.paramIsY,"raw");h=1/0,v=-1/0,d=1/0,x=-1/0,b=[];for(var M=0;M<g.length;M++){var P=Am(f,g[M]),D=Am(c,C[M]);b.push([P,D]),h=Math.min(P,h),v=Math.max(P,v),d=Math.min(D,d),x=Math.max(D,x)}b.xmin=h,b.xmax=v,b.ymin=d,b.ymax=x,b.xref=l,b.yref=u,b.subtract=w7(b,_),_.push(b),r.push(b)}}}}return r}function w7(e,t){for(var r=!1,i=0;i<t.length;i++)for(var n=t[i],a=0;a<e.length;a++)if(yut(e[a],n)){r=!r;break}return r}function Am(e,t){return e.type==="date"&&(t=t.replace("_"," ")),e.type==="log"?e.c2p(t):e.r2p(t,null,e.calendar)}function Nle(e){for(var t=e.length,r=[],i=0;i<t;i++){var n=e[i];r=r.concat(n),r=r.concat([n[0]])}return Wut(r)}function Wut(e){return e.isRect=e.length===5&&e[0][0]===e[4][0]&&e[0][1]===e[4][1]&&e[0][0]===e[1][0]&&e[2][0]===e[3][0]&&e[0][1]===e[3][1]&&e[1][1]===e[2][1]||e[0][1]===e[1][1]&&e[2][1]===e[3][1]&&e[0][0]===e[3][0]&&e[1][0]===e[2][0],e.isRect&&(e.xmin=Math.min(e[0][0],e[2][0]),e.xmax=Math.max(e[0][0],e[2][0]),e.ymin=Math.min(e[0][1],e[2][1]),e.ymax=Math.max(e[0][1],e[2][1])),e}function Ule(e){return function(t,r){for(var i,n,a=0;a<e.length;a++){var o=e[a],s=o._id,l=s.charAt(0);if(r.isRect){i||(i={});var u=r[l+"min"],f=r[l+"max"];u!==void 0&&f!==void 0&&(i[s]=[Mle(o,u),Mle(o,f)].sort(Eut))}else n||(n={}),n[s]=r.map(Put(o))}i&&(t.range=i),n&&(t.lassoPoints=n)}}function Xut(e){var t=e.plotinfo;return t.fillRangeItems||Ule(e.xaxes.concat(e.yaxes))}function Zut(e,t){e.emit("plotly_selecting",t)}function hM(e,t){t&&(t.selections=(e.layout||{}).selections||[]),e.emit("plotly_selected",t)}function T7(e){e.emit("plotly_deselect",null)}Vle.exports={reselect:p7,prepSelect:Dut,clearOutline:Lle,clearSelectionsCache:fM,selectOnClick:Dle}});var A7=ie((enr,Gle)=>{"use strict";Gle.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]});var dM=ie((tnr,Yle)=>{"use strict";Yle.exports={axisRefDescription:function(e,t,r){return["If set to a",e,"axis id (e.g. *"+e+"* or","*"+e+"2*), the `"+e+"` position refers to a",e,"coordinate. If set to *paper*, the `"+e+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+r+"). If set to a",e,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+e+"2 domain* refers to the domain of the second",e," axis and a",e,"position of 0.5 refers to the","point between the",t,"and the",r,"of the domain of the","second",e,"axis."].join(" ")}}});var qx=ie((nnr,Zle)=>{"use strict";var Wle=A7(),Xle=Xs(),F4=Af(),jut=ko().templatedArray,rnr=dM();Zle.exports=jut("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:Xle({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:Wle.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:Wle.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",F4.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",F4.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",F4.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",F4.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:Xle({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})});var W0=ie((inr,jle)=>{"use strict";jle.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}});var X0=ie((anr,Kle)=>{"use strict";Kle.exports=function(t){return{valType:"color",editType:"style",anim:!0}}});var Bl=ie((onr,rue)=>{"use strict";var Jle=kl().axisHoverFormat,Kut=Ba().texttemplateAttrs,Jut=Ba().hovertemplateAttrs,Qle=Ls(),Qut=Xs(),$ut=dc().dash,eft=dc().pattern,tft=oa(),rft=W0(),q4=aa().extendFlat,nft=X0();function $le(e){return{valType:"any",dflt:0,editType:"calc"}}function eue(e){return{valType:"any",editType:"calc"}}function tue(e){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}rue.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:$le("x"),yperiod:$le("y"),xperiod0:eue("x0"),yperiod0:eue("y0"),xperiodalignment:tue("x"),yperiodalignment:tue("y"),xhoverformat:Jle("x"),yhoverformat:Jle("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:Kut({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:Jut({},{keys:rft.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:q4({},$ut,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:nft(!0),fillgradient:q4({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:eft,marker:q4({symbol:{valType:"enumerated",values:tft.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:q4({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},Qle("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},Qle("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:Qut({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}});var M7=ie((lnr,aue)=>{"use strict";var nue=qx(),iue=Bl().line,ift=dc().dash,z4=aa().extendFlat,aft=Zs().overrideAll,oft=ko().templatedArray,snr=dM();aue.exports=aft(oft("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:z4({},nue.xref,{}),yref:z4({},nue.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:iue.color,width:z4({},iue.width,{min:1,dflt:1}),dash:z4({},ift,{dflt:"dot"})}}),"arraydraw","from-root")});var uue=ie((unr,lue)=>{"use strict";var oue=Zt(),O4=Wi(),sft=dh(),lft=M7(),sue=wm();lue.exports=function(t,r){sft(t,r,{name:"selections",handleItemDefaults:uft});for(var i=r.selections,n=0;n<i.length;n++){var a=i[n];a&&a.path===void 0&&(a.x0===void 0||a.x1===void 0||a.y0===void 0||a.y1===void 0)&&(r.selections[n]=null)}};function uft(e,t,r){function i(_,E){return oue.coerce(e,t,lft,_,E)}var n=i("path"),a=n?"path":"rect",o=i("type",a),s=o!=="path";s&&delete t.path,i("opacity"),i("line.color"),i("line.width"),i("line.dash");for(var l=["x","y"],u=0;u<2;u++){var f=l[u],c={_fullLayout:r},h,v,d,x=O4.coerceRef(e,t,c,f);if(h=O4.getFromId(c,x),h._selectionIndices.push(t._index),d=sue.rangeToShapePosition(h),v=sue.shapePositionToRange(h),s){var b=f+"0",p=f+"1",w=e[b],A=e[p];e[b]=v(e[b],!0),e[p]=v(e[p],!0),O4.coercePosition(t,c,i,x,b),O4.coercePosition(t,c,i,x,p);var T=t[b],k=t[p];T!==void 0&&k!==void 0&&(t[b]=d(T),t[p]=d(k),e[b]=w,e[p]=A)}}s&&oue.noneOrAll(e,t,["x0","x1","y0","y1"])}});var cue=ie((fnr,fue)=>{"use strict";fue.exports=function(t,r,i){i("newselection.mode");var n=i("newselection.line.width");n&&(i("newselection.line.color"),i("newselection.line.dash")),i("activeselection.fillcolor"),i("activeselection.opacity")}});var pM=ie((cnr,due)=>{"use strict";var fft=Ti(),hue=Zt(),vue=zl();due.exports=function(t){return function(i,n){var a=i[t];if(Array.isArray(a))for(var o=fft.subplotsRegistry.cartesian,s=o.idRegex,l=n._subplots,u=l.xaxis,f=l.yaxis,c=l.cartesian,h=n._has("cartesian")||n._has("gl2d"),v=0;v<a.length;v++){var d=a[v];if(hue.isPlainObject(d)){var x=vue.cleanId(d.xref,"x",!1),b=vue.cleanId(d.yref,"y",!1),p=s.x.test(x),w=s.y.test(b);if(p||w){h||hue.pushUnique(n._basePlotModules,o);var A=!1;p&&u.indexOf(x)===-1&&(u.push(x),A=!0),w&&f.indexOf(b)===-1&&(f.push(b),A=!0),A&&p&&w&&c.push(x+b)}}}}}});var Ef=ie((hnr,gue)=>{"use strict";var pue=c7(),gM=Hle();gue.exports={moduleType:"component",name:"selections",layoutAttributes:M7(),supplyLayoutDefaults:uue(),supplyDrawNewSelectionDefaults:cue(),includeBasePlot:pM()("selections"),draw:pue.draw,drawOne:pue.drawOne,reselect:gM.reselect,prepSelect:gM.prepSelect,clearOutline:gM.clearOutline,clearSelectionsCache:gM.clearSelectionsCache,selectOnClick:gM.selectOnClick}});var R7=ie((vnr,que)=>{"use strict";var L7=Mi(),vp=Zt(),yue=vp.numberFormat,cft=Kf(),hft=VA(),B4=Ti(),Sue=vp.strTranslate,vft=ks(),mue=_i(),Mm=oa(),dft=Ol(),xue=Wi(),pft=t0(),gft=Yh(),Eue=n0(),N4=Eue.selectingOrDrawing,yft=Eue.freeMode,mft=Mf().FROM_TL,xft=WA(),_ft=$A().redrawReglTraces,bft=js(),E7=zl().getFromId,wft=Ef().prepSelect,Tft=Ef().clearOutline,Aft=Ef().selectOnClick,S7=i7(),P7=Af(),_ue=P7.MINDRAG,wv=P7.MINZOOM,bue=!0;function Mft(e,t,r,i,n,a,o,s){var l=e._fullLayout._zoomlayer,u=o+s==="nsew",f=(o+s).length===1,c,h,v,d,x,b,p,w,A,T,k,_,E,S,g,C,M,P,D,q,O,U,B;r+=t.yaxis._shift;function F(){if(c=t.xaxis,h=t.yaxis,A=c._length,T=h._length,p=c._offset,w=h._offset,v={},v[c._id]=c,d={},d[h._id]=h,o&&s)for(var at=t.overlays,Xe=0;Xe<at.length;Xe++){var dt=at[Xe].xaxis;v[dt._id]=dt;var _t=at[Xe].yaxis;d[_t._id]=_t}x=Mue(v),b=Mue(d),E=wue(x,s),S=wue(b,o),g=!S&&!E,_=Aue(e,e._fullLayout._axisMatchGroups,v,d),k=Aue(e,e._fullLayout._axisConstraintGroups,v,d,_);var $t=k.isSubplotConstrained||_.isSubplotConstrained;C=s||$t,M=o||$t;var Ut=e._fullLayout;P=Ut._has("scattergl"),D=Ut._has("splom"),q=Ut._has("svg")}F();var N=kft(S+E,e._fullLayout.dragmode,u),X=Cue(t,o+s+"drag",N,r,i,n,a);if(g&&!u)return X.onmousedown=null,X.style.pointerEvents="none",X;var K={element:X,gd:e,plotinfo:t};K.prepFn=function(at,Xe,dt){var _t=K.dragmode,$t=e._fullLayout.dragmode;$t!==_t&&(K.dragmode=$t),F(),U=e._fullLayout._invScaleX,B=e._fullLayout._invScaleY,g||(u?at.shiftKey?$t==="pan"?$t="zoom":N4($t)||($t="pan"):at.ctrlKey&&($t="pan"):$t="pan"),yft($t)?K.minDrag=1:K.minDrag=void 0,N4($t)?(K.xaxes=x,K.yaxes=b,wft(at,Xe,dt,K,$t)):(K.clickFn=fe,N4(_t)&&ne(),g||($t==="zoom"?(K.moveFn=_e,K.doneFn=qe,K.minDrag=1,ae(at,Xe,dt)):$t==="pan"&&(K.moveFn=ht,K.doneFn=Me))),e._fullLayout._redrag=function(){var Ut=e._dragdata;if(Ut&&Ut.element===X){var fr=e._fullLayout.dragmode;N4(fr)||(F(),Ke([0,0,A,T]),K.moveFn(Ut.dx,Ut.dy))}}};function ne(){K.plotinfo.selection=!1,Tft(e)}function fe(at,Xe){var dt=K.gd;if(dt._fullLayout._activeShapeIndex>=0){dt._fullLayout._deactivateShape(dt);return}var _t=dt._fullLayout.clickmode;if(C7(dt),at===2&&!f&&Ht(),u)_t.indexOf("select")>-1&&Aft(Xe,dt,x,b,t.id,K),_t.indexOf("event")>-1&&dft.click(dt,Xe,t.id);else if(at===1&&f){var $t=o?h:c,Ut=o==="s"||s==="w"?0:1,fr=$t._name+".range["+Ut+"]",ar=Sft($t,Ut),cr="left",It="middle";if($t.fixedrange)return;o?(It=o==="n"?"top":"bottom",$t.side==="right"&&(cr="right")):s==="e"&&(cr="right"),dt._context.showAxisRangeEntryBoxes&&L7.select(X).call(vft.makeEditable,{gd:dt,immediate:!0,background:dt._fullLayout.paper_bgcolor,text:String(ar),fill:$t.tickfont?$t.tickfont.color:"#444",horizontalAlign:cr,verticalAlign:It}).on("edit",function(gt){var kt=$t.d2r(gt);kt!==void 0&&B4.call("_guiRelayout",dt,fr,kt)})}}gft.init(K);var ue,ee,Z,oe,ce,le,me,he,te,ge;function ae(at,Xe,dt){var _t=X.getBoundingClientRect();ue=Xe-_t.left,ee=dt-_t.top,e._fullLayout._calcInverseTransform(e);var $t=vp.apply3DTransform(e._fullLayout._invTransform)(ue,ee);ue=$t[0],ee=$t[1],Z={l:ue,r:ue,w:0,t:ee,b:ee,h:0},oe=e._hmpixcount?e._hmlumcount/e._hmpixcount:cft(e._fullLayout.plot_bgcolor).getLuminance(),ce="M0,0H"+A+"V"+T+"H0V0",le=!1,me="xy",ge=!1,he=Lue(l,oe,p,w,ce),te=Pue(l,p,w)}function _e(at,Xe){if(e._transitioningWithDuration)return!1;var dt=Math.max(0,Math.min(A,U*at+ue)),_t=Math.max(0,Math.min(T,B*Xe+ee)),$t=Math.abs(dt-ue),Ut=Math.abs(_t-ee);Z.l=Math.min(ue,dt),Z.r=Math.max(ue,dt),Z.t=Math.min(ee,_t),Z.b=Math.max(ee,_t);function fr(){me="",Z.r=Z.l,Z.t=Z.b,te.attr("d","M0,0Z")}if(k.isSubplotConstrained)$t>wv||Ut>wv?(me="xy",$t/A>Ut/T?(Ut=$t*T/A,ee>_t?Z.t=ee-Ut:Z.b=ee+Ut):($t=Ut*A/T,ue>dt?Z.l=ue-$t:Z.r=ue+$t),te.attr("d",U4(Z))):fr();else if(_.isSubplotConstrained)if($t>wv||Ut>wv){me="xy";var ar=Math.min(Z.l/A,(T-Z.b)/T),cr=Math.max(Z.r/A,(T-Z.t)/T);Z.l=ar*A,Z.r=cr*A,Z.b=(1-ar)*T,Z.t=(1-cr)*T,te.attr("d",U4(Z))}else fr();else!S||Ut<Math.min(Math.max($t*.6,_ue),wv)?$t<_ue||!E?fr():(Z.t=0,Z.b=T,me="x",te.attr("d",Cft(Z,ee))):!E||$t<Math.min(Ut*.6,wv)?(Z.l=0,Z.r=A,me="y",te.attr("d",Lft(Z,ue))):(me="xy",te.attr("d",U4(Z)));Z.w=Z.r-Z.l,Z.h=Z.b-Z.t,me&&(ge=!0),e._dragged=ge,Rue(he,te,Z,ce,le,oe),Ce(),e.emit("plotly_relayouting",O),le=!0}function Ce(){O={},(me==="xy"||me==="x")&&(k7(x,Z.l/A,Z.r/A,O,k.xaxes),xt("x",O)),(me==="xy"||me==="y")&&(k7(b,(T-Z.b)/T,(T-Z.t)/T,O,k.yaxes),xt("y",O))}function qe(){Ce(),C7(e),Me(),Iue(e)}var rt=[0,0,A,T],Re=null,Ie=P7.REDRAWDELAY,ot=t.mainplot?e._fullLayout._plots[t.mainplot]:t;function lt(at){if(!e._context._scrollZoom.cartesian&&!e._fullLayout._enablescrollzoom)return;if(ne(),e._transitioningWithDuration){at.preventDefault(),at.stopPropagation();return}F(),clearTimeout(Re);var Xe=-at.deltaY;if(isFinite(Xe)||(Xe=at.wheelDelta/10),!isFinite(Xe)){vp.log("Did not find wheel motion attributes: ",at);return}var dt=Math.exp(-Math.min(Math.max(Xe,-20),20)/200),_t=ot.draglayer.select(".nsewdrag").node().getBoundingClientRect(),$t=(at.clientX-_t.left)/_t.width,Ut=(_t.bottom-at.clientY)/_t.height,fr;function ar(cr,It,gt){if(cr.fixedrange)return;var kt=vp.simpleMap(cr.range,cr.r2l),Je=kt[0]+(kt[1]-kt[0])*It;function Ze(At){return cr.l2r(Je+(At-Je)*gt)}cr.range=kt.map(Ze)}if(C){for(s||($t=.5),fr=0;fr<x.length;fr++)ar(x[fr],$t,dt);xt("x"),rt[2]*=dt,rt[0]+=rt[2]*$t*(1/dt-1)}if(M){for(o||(Ut=.5),fr=0;fr<b.length;fr++)ar(b[fr],Ut,dt);xt("y"),rt[3]*=dt,rt[1]+=rt[3]*(1-Ut)*(1/dt-1)}Ke(rt),Vt(),e.emit("plotly_relayouting",O),Re=setTimeout(function(){e._fullLayout&&(rt=[0,0,A,T],Me())},Ie),at.preventDefault()}o.length*s.length!==1&&Fue(X,lt);function ht(at,Xe){if(at=at*U,Xe=Xe*B,e._transitioningWithDuration)return;if(e._fullLayout._replotting=!0,E==="ew"||S==="ns"){var dt=E?-at:0,_t=S?-Xe:0;if(_.isSubplotConstrained){if(E&&S){var $t=(at/A-Xe/T)/2;at=$t*A,Xe=-$t*T,dt=-at,_t=-Xe}S?dt=-_t*A/T:_t=-dt*T/A}E&&(Tue(x,at),xt("x")),S&&(Tue(b,Xe),xt("y")),Ke([dt,_t,A,T]),Vt(),e.emit("plotly_relayouting",O);return}function Ut(Ze,At,Se){for(var pe=1-At,Te,it,Dt=0;Dt<Ze.length;Dt++){var Wt=Ze[Dt];if(!Wt.fixedrange){Te=Wt,it=Wt._rl[pe]+(Wt._rl[At]-Wt._rl[pe])/Eft(Se/Wt._length);var er=Wt.l2r(it);er!==!1&&er!==void 0&&(Wt.range[At]=er)}}return Te._length*(Te._rl[At]-it)/(Te._rl[At]-Te._rl[pe])}var fr=E==="w"==(S==="n")?1:-1;if(E&&S&&(k.isSubplotConstrained||_.isSubplotConstrained)){var ar=(at/A+fr*Xe/T)/2;at=ar*A,Xe=fr*ar*T}var cr,It;if(E==="w"?at=Ut(x,0,at):E==="e"?at=Ut(x,1,-at):E||(at=0),S==="n"?Xe=Ut(b,1,Xe):S==="s"?Xe=Ut(b,0,-Xe):S||(Xe=0),cr=E==="w"?at:0,It=S==="n"?Xe:0,k.isSubplotConstrained&&!_.isSubplotConstrained||_.isSubplotConstrained&&E&&S&&fr>0){var gt;if(_.isSubplotConstrained||!E&&S.length===1){for(gt=0;gt<x.length;gt++)x[gt].range=x[gt]._r.slice(),S7(x[gt],1-Xe/T);at=Xe*A/T,cr=at/2}if(_.isSubplotConstrained||!S&&E.length===1){for(gt=0;gt<b.length;gt++)b[gt].range=b[gt]._r.slice(),S7(b[gt],1-at/A);Xe=at*T/A,It=Xe/2}}(!_.isSubplotConstrained||!S)&&xt("x"),(!_.isSubplotConstrained||!E)&&xt("y");var kt=A-at,Je=T-Xe;_.isSubplotConstrained&&!(E&&S)&&(E?(It=cr?0:at*T/A,Je=kt*T/A):(cr=It?0:Xe*A/T,kt=Je*A/T)),Ke([cr,It,kt,Je]),Vt(),e.emit("plotly_relayouting",O)}function xt(at,Xe){for(var dt=_.isSubplotConstrained?{x:b,y:x}[at]:_[at+"axes"],_t=_.isSubplotConstrained?{x,y:b}[at]:[],$t=0;$t<dt.length;$t++){var Ut=dt[$t],fr=Ut._id,ar=_.xLinks[fr]||_.yLinks[fr],cr=_t[0]||v[ar]||d[ar];cr&&(Xe?(Xe[Ut._name+".range[0]"]=Xe[cr._name+".range[0]"],Xe[Ut._name+".range[1]"]=Xe[cr._name+".range[1]"]):Ut.range=cr.range.slice())}}function Vt(){var at=[],Xe;function dt(fr){for(Xe=0;Xe<fr.length;Xe++)fr[Xe].fixedrange||at.push(fr[Xe]._id)}function _t(fr,ar){for(Xe=0;Xe<fr.length;Xe++){var cr=fr[Xe],It=cr[ar];!cr.fixedrange&&It.tickmode==="sync"&&at.push(It._id)}}for(C&&(dt(x),dt(k.xaxes),dt(_.xaxes),_t(t.overlays,"xaxis")),M&&(dt(b),dt(k.yaxes),dt(_.yaxes),_t(t.overlays,"yaxis")),O={},Xe=0;Xe<at.length;Xe++){var $t=at[Xe],Ut=E7(e,$t);xue.drawOne(e,Ut,{skipTitle:!0}),O[Ut._name+".range[0]"]=Ut.range[0],O[Ut._name+".range[1]"]=Ut.range[1]}xue.redrawComponents(e,at)}function Ht(){if(!e._transitioningWithDuration){var at=e._context.doubleClick,Xe=[];E&&(Xe=Xe.concat(x)),S&&(Xe=Xe.concat(b)),_.xaxes&&(Xe=Xe.concat(_.xaxes)),_.yaxes&&(Xe=Xe.concat(_.yaxes));var dt={},_t,$t;if(at==="reset+autosize")for(at="autosize",$t=0;$t<Xe.length;$t++){_t=Xe[$t];var Ut=_t._rangeInitial0,fr=_t._rangeInitial1,ar=Ut!==void 0||fr!==void 0;if(ar&&(Ut!==void 0&&Ut!==_t.range[0]||fr!==void 0&&fr!==_t.range[1])||!ar&&_t.autorange!==!0){at="reset";break}}if(at==="autosize")for($t=0;$t<Xe.length;$t++)_t=Xe[$t],_t.fixedrange||(dt[_t._name+".autorange"]=!0);else if(at==="reset"){for((E||k.isSubplotConstrained)&&(Xe=Xe.concat(k.xaxes)),S&&!k.isSubplotConstrained&&(Xe=Xe.concat(k.yaxes)),k.isSubplotConstrained&&(E?S||(Xe=Xe.concat(b)):Xe=Xe.concat(x)),$t=0;$t<Xe.length;$t++)if(_t=Xe[$t],!_t.fixedrange){var cr=_t._name,It=_t._autorangeInitial;_t._rangeInitial0===void 0&&_t._rangeInitial1===void 0?dt[cr+".autorange"]=!0:_t._rangeInitial0===void 0?(dt[cr+".autorange"]=It,dt[cr+".range"]=[null,_t._rangeInitial1]):_t._rangeInitial1===void 0?(dt[cr+".range"]=[_t._rangeInitial0,null],dt[cr+".autorange"]=It):dt[cr+".range"]=[_t._rangeInitial0,_t._rangeInitial1]}}e.emit("plotly_doubleclick",null),B4.call("_guiRelayout",e,dt)}}function Me(){Ke([0,0,A,T]),vp.syncOrAsync([bft.previousPromises,function(){e._fullLayout._replotting=!1,B4.call("_guiRelayout",e,O)}],e)}function Ke(at){var Xe=e._fullLayout,dt=Xe._plots,_t=Xe._subplots.cartesian,$t,Ut,fr,ar;if(D&&B4.subplotsRegistry.splom.drag(e),P){for($t=0;$t<_t.length;$t++)if(Ut=dt[_t[$t]],fr=Ut.xaxis,ar=Ut.yaxis,Ut._scene){var cr=vp.simpleMap(fr.range,fr.r2l),It=vp.simpleMap(ar.range,ar.r2l);fr.limitRange&&fr.limitRange(),ar.limitRange&&ar.limitRange(),cr=fr.range,It=ar.range,Ut._scene.update({range:[cr[0],It[0],cr[1],It[1]]})}}if((D||P)&&(xft(e),_ft(e)),q){var gt=at[2]/c._length,kt=at[3]/h._length;for($t=0;$t<_t.length;$t++){Ut=dt[_t[$t]],fr=Ut.xaxis,ar=Ut.yaxis;var Je=(C||_.isSubplotConstrained)&&!fr.fixedrange&&v[fr._id],Ze=(M||_.isSubplotConstrained)&&!ar.fixedrange&&d[ar._id],At,Se,pe,Te;if(Je?(At=gt,pe=s||_.isSubplotConstrained?at[0]:vt(fr,At)):_.xaHash[fr._id]?(At=gt,pe=at[0]*fr._length/c._length):_.yaHash[fr._id]?(At=kt,pe=S==="ns"?-at[1]*fr._length/h._length:vt(fr,At,{n:"top",s:"bottom"}[S])):(At=We(fr,gt,kt),pe=et(fr,At)),At>1&&(fr.maxallowed!==void 0&&C===(fr.range[0]<fr.range[1]?"e":"w")||fr.minallowed!==void 0&&C===(fr.range[0]<fr.range[1]?"w":"e"))&&(At=1,pe=0),Ze?(Se=kt,Te=o||_.isSubplotConstrained?at[1]:vt(ar,Se)):_.yaHash[ar._id]?(Se=kt,Te=at[1]*ar._length/h._length):_.xaHash[ar._id]?(Se=gt,Te=E==="ew"?-at[0]*ar._length/c._length:vt(ar,Se,{e:"right",w:"left"}[E])):(Se=We(ar,gt,kt),Te=et(ar,Se)),Se>1&&(ar.maxallowed!==void 0&&M===(ar.range[0]<ar.range[1]?"n":"s")||ar.minallowed!==void 0&&M===(ar.range[0]<ar.range[1]?"s":"n"))&&(Se=1,Te=0),!(!At&&!Se)){At||(At=1),Se||(Se=1);var it=fr._offset-pe/At,Dt=ar._offset-Te/Se;Ut.clipRect.call(Mm.setTranslate,pe,Te).call(Mm.setScale,At,Se),Ut.plot.call(Mm.setTranslate,it,Dt).call(Mm.setScale,1/At,1/Se),(At!==Ut.xScaleFactor||Se!==Ut.yScaleFactor)&&(Mm.setPointGroupScale(Ut.zoomScalePts,At,Se),Mm.setTextPointsScale(Ut.zoomScaleTxt,At,Se)),Mm.hideOutsideRangePoints(Ut.clipOnAxisFalseTraces,Ut),Ut.xScaleFactor=At,Ut.yScaleFactor=Se}}}}function We(at,Xe,dt){return at.fixedrange?0:C&&k.xaHash[at._id]?Xe:M&&(k.isSubplotConstrained?k.xaHash:k.yaHash)[at._id]?dt:0}function et(at,Xe){return Xe?(at.range=at._r.slice(),S7(at,Xe),vt(at,Xe)):0}function vt(at,Xe,dt){return at._length*(1-Xe)*mft[dt||at.constraintoward||"middle"]}return X}function kue(e,t,r,i){var n=vp.ensureSingle(e.draglayer,t,r,function(a){a.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",e.id)});return n.call(pft,i),n.node()}function Cue(e,t,r,i,n,a,o){var s=kue(e,"rect",t,r);return L7.select(s).call(Mm.setRect,i,n,a,o),s}function wue(e,t){for(var r=0;r<e.length;r++)if(!e[r].fixedrange)return t;return""}function Sft(e,t){var r=e.range[t],i=Math.abs(r-e.range[1-t]),n;return e.type==="date"?r:e.type==="log"?(n=Math.ceil(Math.max(0,-Math.log(i)/Math.LN10))+3,yue("."+n+"g")(Math.pow(10,r))):(n=Math.floor(Math.log(Math.abs(r))/Math.LN10)-Math.floor(Math.log(i)/Math.LN10)+4,yue("."+String(n)+"g")(r))}function k7(e,t,r,i,n){for(var a=0;a<e.length;a++){var o=e[a];if(!o.fixedrange)if(o.rangebreaks){var s=o._id.charAt(0)==="y",l=s?1-t:t,u=s?1-r:r;i[o._name+".range[0]"]=o.l2r(o.p2l(l*o._length)),i[o._name+".range[1]"]=o.l2r(o.p2l(u*o._length))}else{var f=o._rl[0],c=o._rl[1]-f;i[o._name+".range[0]"]=o.l2r(f+c*t),i[o._name+".range[1]"]=o.l2r(f+c*r)}}if(n&&n.length){var h=(t+(1-r))/2;k7(n,h,1-h,i,[])}}function Tue(e,t){for(var r=0;r<e.length;r++){var i=e[r];if(!i.fixedrange){if(i.rangebreaks){var n=0,a=i._length,o=i.p2l(n+t)-i.p2l(n),s=i.p2l(a+t)-i.p2l(a),l=(o+s)/2;i.range=[i.l2r(i._rl[0]-l),i.l2r(i._rl[1]-l)]}else i.range=[i.l2r(i._rl[0]-t/i._m),i.l2r(i._rl[1]-t/i._m)];i.limitRange&&i.limitRange()}}}function Eft(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-.3)+3.222))}function kft(e,t,r){return e?e==="nsew"?r?"":t==="pan"?"move":"crosshair":e.toLowerCase()+"-resize":"pointer"}function Lue(e,t,r,i,n){return e.append("path").attr("class","zoombox").style({fill:t>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",Sue(r,i)).attr("d",n+"Z")}function Pue(e,t,r){return e.append("path").attr("class","zoombox-corners").style({fill:mue.background,stroke:mue.defaultLine,"stroke-width":1,opacity:0}).attr("transform",Sue(t,r)).attr("d","M0,0Z")}function Rue(e,t,r,i,n,a){e.attr("d",i+"M"+r.l+","+r.t+"v"+r.h+"h"+r.w+"v-"+r.h+"h-"+r.w+"Z"),Due(e,t,n,a)}function Due(e,t,r,i){r||(e.transition().style("fill",i>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),t.transition().style("opacity",1).duration(200))}function C7(e){L7.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Iue(e){bue&&e.data&&e._context.showTips&&(vp.notifier(vp._(e,"Double-click to zoom back out"),"long"),bue=!1)}function Cft(e,t){return"M"+(e.l-.5)+","+(t-wv-.5)+"h-3v"+(2*wv+1)+"h3ZM"+(e.r+.5)+","+(t-wv-.5)+"h3v"+(2*wv+1)+"h-3Z"}function Lft(e,t){return"M"+(t-wv-.5)+","+(e.t-.5)+"v-3h"+(2*wv+1)+"v3ZM"+(t-wv-.5)+","+(e.b+.5)+"v3h"+(2*wv+1)+"v-3Z"}function U4(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,wv)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function Aue(e,t,r,i,n){for(var a=!1,o={},s={},l,u,f,c,h=(n||{}).xaHash,v=(n||{}).yaHash,d=0;d<t.length;d++){var x=t[d];for(l in r)if(x[l]){for(f in x)!(n&&(h[f]||v[f]))&&!(f.charAt(0)==="x"?r:i)[f]&&(o[f]=l);for(u in i)!(n&&(h[u]||v[u]))&&x[u]&&(a=!0)}for(u in i)if(x[u])for(c in x)!(n&&(h[c]||v[c]))&&!(c.charAt(0)==="x"?r:i)[c]&&(s[c]=u)}a&&(vp.extendFlat(o,s),s={});var b={},p=[];for(f in o){var w=E7(e,f);p.push(w),b[w._id]=w}var A={},T=[];for(c in s){var k=E7(e,c);T.push(k),A[k._id]=k}return{xaHash:b,yaHash:A,xaxes:p,yaxes:T,xLinks:o,yLinks:s,isSubplotConstrained:a}}function Fue(e,t){if(!hft)e.onwheel!==void 0?e.onwheel=t:e.onmousewheel!==void 0?e.onmousewheel=t:e.isAddedWheelEvent||(e.isAddedWheelEvent=!0,e.addEventListener("wheel",t,{passive:!1}));else{var r=e.onwheel!==void 0?"wheel":"mousewheel";e._onwheel&&e.removeEventListener(r,e._onwheel),e._onwheel=t,e.addEventListener(r,t,{passive:!1})}}function Mue(e){var t=[];for(var r in e)t.push(e[r]);return t}que.exports={makeDragBox:Mft,makeDragger:kue,makeRectDragger:Cue,makeZoombox:Lue,makeCorners:Pue,updateZoombox:Rue,xyCorners:U4,transitionZoombox:Due,removeZoombox:C7,showDoubleClickNotifier:Iue,attachWheelEventHandler:Fue}});var D7=ie(H4=>{"use strict";var Pft=Mi(),V4=Ol(),Rft=Yh(),Dft=t0(),a0=R7().makeDragBox,nc=Af().DRAGGERSIZE;H4.initInteractions=function(t){var r=t._fullLayout;if(t._context.staticPlot){Pft.select(t).selectAll(".drag").remove();return}if(!(!r._has("cartesian")&&!r._has("splom"))){var i=Object.keys(r._plots||{}).sort(function(a,o){if((r._plots[a].mainplot&&!0)===(r._plots[o].mainplot&&!0)){var s=a.split("y"),l=o.split("y");return s[0]===l[0]?Number(s[1]||1)-Number(l[1]||1):Number(s[0]||1)-Number(l[0]||1)}return r._plots[a].mainplot?1:-1});i.forEach(function(a){var o=r._plots[a],s=o.xaxis,l=o.yaxis;if(!o.mainplot){var u=a0(t,o,s._offset,l._offset,s._length,l._length,"ns","ew");u.onmousemove=function(h){t._fullLayout._rehover=function(){t._fullLayout._hoversubplot===a&&t._fullLayout._plots[a]&&V4.hover(t,h,a)},V4.hover(t,h,a),t._fullLayout._lasthover=u,t._fullLayout._hoversubplot=a},u.onmouseout=function(h){t._dragging||(t._fullLayout._hoversubplot=null,Rft.unhover(t,h))},t._context.showAxisDragHandles&&(a0(t,o,s._offset-nc,l._offset-nc,nc,nc,"n","w"),a0(t,o,s._offset+s._length,l._offset-nc,nc,nc,"n","e"),a0(t,o,s._offset-nc,l._offset+l._length,nc,nc,"s","w"),a0(t,o,s._offset+s._length,l._offset+l._length,nc,nc,"s","e"))}if(t._context.showAxisDragHandles){if(a===s._mainSubplot){var f=s._mainLinePosition;s.side==="top"&&(f-=nc),a0(t,o,s._offset+s._length*.1,f,s._length*.8,nc,"","ew"),a0(t,o,s._offset,f,s._length*.1,nc,"","w"),a0(t,o,s._offset+s._length*.9,f,s._length*.1,nc,"","e")}if(a===l._mainSubplot){var c=l._mainLinePosition;l.side!=="right"&&(c-=nc),a0(t,o,c,l._offset+l._length*.1,nc,l._length*.8,"ns",""),a0(t,o,c,l._offset+l._length*.9,nc,l._length*.1,"s",""),a0(t,o,c,l._offset,nc,l._length*.1,"n","")}}});var n=r._hoverlayer.node();n.onmousemove=function(a){a.target=t._fullLayout._lasthover,V4.hover(t,a,r._hoversubplot)},n.onclick=function(a){a.target=t._fullLayout._lasthover,V4.click(t,a)},n.onmousedown=function(a){t._fullLayout._lasthover.onmousedown(a)},H4.updateFx(t)}};H4.updateFx=function(e){var t=e._fullLayout,r=t.dragmode==="pan"?"move":"crosshair";Dft(t._draggers,r)}});var Bue=ie((pnr,Oue)=>{"use strict";var zue=Ti();Oue.exports=function(t){for(var r=zue.layoutArrayContainers,i=zue.layoutArrayRegexes,n=t.split("[")[0],a,o,s=0;s<i.length;s++)if(o=t.match(i[s]),o&&o.index===0){a=o[0];break}if(a||(a=r[r.indexOf(n)]),!a)return!1;var l=t.substr(a.length);return l?(o=l.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),o?{array:a,index:Number(o[1]),property:o[3]||""}:!1):{array:a,index:"",property:""}}});var Uue=ie(mM=>{"use strict";var Ift=Rg(),I7=Uk(),yM=Qy(),Fft=eC().sorterAsc,F7=Ti();mM.containerArrayMatch=Bue();var qft=mM.isAddVal=function(t){return t==="add"||Ift(t)},Nue=mM.isRemoveVal=function(t){return t===null||t==="remove"};mM.applyContainerArrayChanges=function(t,r,i,n,a){var o=r.astr,s=F7.getComponentMethod(o,"supplyLayoutDefaults"),l=F7.getComponentMethod(o,"draw"),u=F7.getComponentMethod(o,"drawOne"),f=n.replot||n.recalc||s===I7||l===I7,c=t.layout,h=t._fullLayout;if(i[""]){Object.keys(i).length>1&&yM.warn("Full array edits are incompatible with other edits",o);var v=i[""][""];if(Nue(v))r.set(null);else if(Array.isArray(v))r.set(v);else return yM.warn("Unrecognized full array edit value",o,v),!0;return f?!1:(s(c,h),l(t),!0)}var d=Object.keys(i).map(Number).sort(Fft),x=r.get(),b=x||[],p=a(h,o).get(),w=[],A=-1,T=b.length,k,_,E,S,g,C,M,P;for(k=0;k<d.length;k++){if(E=d[k],S=i[E],g=Object.keys(S),C=S[""],M=qft(C),E<0||E>b.length-(M?0:1)){yM.warn("index out of range",o,E);continue}if(C!==void 0)g.length>1&&yM.warn("Insertion & removal are incompatible with edits to the same index.",o,E),Nue(C)?w.push(E):M?(C==="add"&&(C={}),b.splice(E,0,C),p&&p.splice(E,0,{})):yM.warn("Unrecognized full object edit value",o,E,C),A===-1&&(A=E);else for(_=0;_<g.length;_++)P=o+"["+E+"].",a(b[E],g[_],P).set(S[g[_]])}for(k=w.length-1;k>=0;k--)b.splice(w[k],1),p&&p.splice(w[k],1);if(b.length?x||r.set(b):r.set(null),f)return!1;if(s(c,h),u!==I7){var D;if(A===-1)D=d;else{for(T=Math.max(b.length,T),D=[],k=0;k<d.length&&(E=d[k],!(E>=A));k++)D.push(E);for(k=A;k<T;k++)D.push(k)}for(k=0;k<D.length;k++)u(t,D[k])}else l(t);return!0}});var Zue=ie(dp=>{"use strict";var Yue=la(),zft=wq(),Wue=Ti(),Av=Zt(),_M=js(),Xue=zl(),zx=_i(),bM=Xue.cleanId,Oft=Xue.getFromTrace,xM=Wue.traceIs;dp.clearPromiseQueue=function(e){Array.isArray(e._promises)&&e._promises.length>0&&Av.log("Clearing previous rejected promises from queue."),e._promises=[]};dp.cleanLayout=function(e){var t,r;e||(e={}),e.xaxis1&&(e.xaxis||(e.xaxis=e.xaxis1),delete e.xaxis1),e.yaxis1&&(e.yaxis||(e.yaxis=e.yaxis1),delete e.yaxis1),e.scene1&&(e.scene||(e.scene=e.scene1),delete e.scene1);var i=(_M.subplotsRegistry.cartesian||{}).attrRegex,n=(_M.subplotsRegistry.polar||{}).attrRegex,a=(_M.subplotsRegistry.ternary||{}).attrRegex,o=(_M.subplotsRegistry.gl3d||{}).attrRegex,s=Object.keys(e);for(t=0;t<s.length;t++){var l=s[t];if(i&&i.test(l)){var u=e[l];u.anchor&&u.anchor!=="free"&&(u.anchor=bM(u.anchor)),u.overlaying&&(u.overlaying=bM(u.overlaying)),u.type||(u.isdate?u.type="date":u.islog?u.type="log":u.isdate===!1&&u.islog===!1&&(u.type="linear")),(u.autorange==="withzero"||u.autorange==="tozero")&&(u.autorange=!0,u.rangemode="tozero"),u.insiderange&&delete u.range,delete u.islog,delete u.isdate,delete u.categories,G4(u,"domain")&&delete u.domain,u.autotick!==void 0&&(u.tickmode===void 0&&(u.tickmode=u.autotick?"auto":"linear"),delete u.autotick),Tv(u)}else if(n&&n.test(l)){var f=e[l];Tv(f.radialaxis)}else if(a&&a.test(l)){var c=e[l];Tv(c.aaxis),Tv(c.baxis),Tv(c.caxis)}else if(o&&o.test(l)){var h=e[l],v=h.cameraposition;if(Array.isArray(v)&&v[0].length===4){var d=v[0],x=v[1],b=v[2],p=zft([],d),w=[];for(r=0;r<3;++r)w[r]=x[r]+b*p[2+4*r];h.camera={eye:{x:w[0],y:w[1],z:w[2]},center:{x:x[0],y:x[1],z:x[2]},up:{x:0,y:0,z:1}},delete h.cameraposition}Tv(h.xaxis),Tv(h.yaxis),Tv(h.zaxis)}}var A=Array.isArray(e.annotations)?e.annotations.length:0;for(t=0;t<A;t++){var T=e.annotations[t];Av.isPlainObject(T)&&(T.ref&&(T.ref==="paper"?(T.xref="paper",T.yref="paper"):T.ref==="data"&&(T.xref="x",T.yref="y"),delete T.ref),B2(T,"xref"),B2(T,"yref"))}var k=Array.isArray(e.shapes)?e.shapes.length:0;for(t=0;t<k;t++){var _=e.shapes[t];Av.isPlainObject(_)&&(B2(_,"xref"),B2(_,"yref"))}var E=Array.isArray(e.images)?e.images.length:0;for(t=0;t<E;t++){var S=e.images[t];Av.isPlainObject(S)&&(B2(S,"xref"),B2(S,"yref"))}var g=e.legend;return g&&(g.x>3?(g.x=1.02,g.xanchor="left"):g.x<-2&&(g.x=-.02,g.xanchor="right"),g.y>3?(g.y=1.02,g.yanchor="bottom"):g.y<-2&&(g.y=-.02,g.yanchor="top")),Tv(e),e.dragmode==="rotate"&&(e.dragmode="orbit"),zx.clean(e),e.template&&e.template.layout&&dp.cleanLayout(e.template.layout),e};function B2(e,t){var r=e[t],i=t.charAt(0);r&&r!=="paper"&&(e[t]=bM(r,i,!0))}function Tv(e){e&&((typeof e.title=="string"||typeof e.title=="number")&&(e.title={text:e.title}),t("titlefont","font"),t("titleposition","position"),t("titleside","side"),t("titleoffset","offset"));function t(r,i){var n=e[r],a=e.title&&e.title[i];n&&!a&&(e.title||(e.title={}),e.title[i]=e[r],delete e[r])}}dp.cleanData=function(e){for(var t=0;t<e.length;t++){var r=e[t],i;if(r.type==="histogramy"&&"xbins"in r&&!("ybins"in r)&&(r.ybins=r.xbins,delete r.xbins),r.error_y&&"opacity"in r.error_y){var n=zx.defaults,a=r.error_y.color||(xM(r,"bar")?zx.defaultLine:n[t%n.length]);r.error_y.color=zx.addOpacity(zx.rgb(a),zx.opacity(a)*r.error_y.opacity),delete r.error_y.opacity}if("bardir"in r&&(r.bardir==="h"&&(xM(r,"bar")||r.type.substr(0,9)==="histogram")&&(r.orientation="h",dp.swapXYData(r)),delete r.bardir),r.type==="histogramy"&&dp.swapXYData(r),(r.type==="histogramx"||r.type==="histogramy")&&(r.type="histogram"),"scl"in r&&!("colorscale"in r)&&(r.colorscale=r.scl,delete r.scl),"reversescl"in r&&!("reversescale"in r)&&(r.reversescale=r.reversescl,delete r.reversescl),r.xaxis&&(r.xaxis=bM(r.xaxis,"x")),r.yaxis&&(r.yaxis=bM(r.yaxis,"y")),xM(r,"gl3d")&&r.scene&&(r.scene=_M.subplotsRegistry.gl3d.cleanId(r.scene)),!xM(r,"pie-like")&&!xM(r,"bar-like"))if(Array.isArray(r.textposition))for(i=0;i<r.textposition.length;i++)r.textposition[i]=Hue(r.textposition[i]);else r.textposition&&(r.textposition=Hue(r.textposition));var o=Wue.getModule(r);if(o&&o.colorbar){var s=o.colorbar.container,l=s?r[s]:r;l&&l.colorscale&&(l.colorscale==="YIGnBu"&&(l.colorscale="YlGnBu"),l.colorscale==="YIOrRd"&&(l.colorscale="YlOrRd"))}if(r.type==="surface"&&Av.isPlainObject(r.contours)){var u=["x","y","z"];for(i=0;i<u.length;i++){var f=r.contours[u[i]];Av.isPlainObject(f)&&(f.highlightColor&&(f.highlightcolor=f.highlightColor,delete f.highlightColor),f.highlightWidth&&(f.highlightwidth=f.highlightWidth,delete f.highlightWidth))}}if(r.type==="candlestick"||r.type==="ohlc"){var c=(r.increasing||{}).showlegend!==!1,h=(r.decreasing||{}).showlegend!==!1,v=Vue(r.increasing),d=Vue(r.decreasing);if(v!==!1&&d!==!1){var x=Bft(v,d,c,h);x&&(r.name=x)}else(v||d)&&!r.name&&(r.name=v||d)}if(Array.isArray(r.transforms)){var b=r.transforms;for(i=0;i<b.length;i++){var p=b[i];if(Av.isPlainObject(p))switch(p.type){case"filter":p.filtersrc&&(p.target=p.filtersrc,delete p.filtersrc),p.calendar&&(p.valuecalendar||(p.valuecalendar=p.calendar),delete p.calendar);break;case"groupby":if(p.styles=p.styles||p.style,p.styles&&!Array.isArray(p.styles)){var w=p.styles,A=Object.keys(w);p.styles=[];for(var T=0;T<A.length;T++)p.styles.push({target:A[T],value:w[A[T]]})}break}}}G4(r,"line")&&delete r.line,"marker"in r&&(G4(r.marker,"line")&&delete r.marker.line,G4(r,"marker")&&delete r.marker),zx.clean(r),r.autobinx&&(delete r.autobinx,delete r.xbins),r.autobiny&&(delete r.autobiny,delete r.ybins),Tv(r),r.colorbar&&Tv(r.colorbar),r.marker&&r.marker.colorbar&&Tv(r.marker.colorbar),r.line&&r.line.colorbar&&Tv(r.line.colorbar),r.aaxis&&Tv(r.aaxis),r.baxis&&Tv(r.baxis)}};function Vue(e){if(!Av.isPlainObject(e))return!1;var t=e.name;return delete e.name,delete e.showlegend,(typeof t=="string"||typeof t=="number")&&String(t)}function Bft(e,t,r,i){if(r&&!i)return e;if(i&&!r||!e.trim())return t;if(!t.trim())return e;var n=Math.min(e.length,t.length),a;for(a=0;a<n&&e.charAt(a)===t.charAt(a);a++);var o=e.substr(0,a);return o.trim()}function Hue(e){var t="middle",r="center";return typeof e=="string"&&(e.indexOf("top")!==-1?t="top":e.indexOf("bottom")!==-1&&(t="bottom"),e.indexOf("left")!==-1?r="left":e.indexOf("right")!==-1&&(r="right")),t+" "+r}function G4(e,t){return t in e&&typeof e[t]=="object"&&Object.keys(e[t]).length===0}dp.swapXYData=function(e){var t;if(Av.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(e.z)&&Array.isArray(e.z[0])&&(e.transpose?delete e.transpose:e.transpose=!0),e.error_x&&e.error_y){var r=e.error_y,i="copy_ystyle"in r?r.copy_ystyle:!(r.color||r.thickness||r.width);Av.swapAttrs(e,["error_?.copy_ystyle"]),i&&Av.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}if(typeof e.hoverinfo=="string"){var n=e.hoverinfo.split("+");for(t=0;t<n.length;t++)n[t]==="x"?n[t]="y":n[t]==="y"&&(n[t]="x");e.hoverinfo=n.join("+")}};dp.coerceTraceIndices=function(e,t){if(Yue(t))return[t];if(!Array.isArray(t)||!t.length)return e.data.map(function(n,a){return a});if(Array.isArray(t)){for(var r=[],i=0;i<t.length;i++)Av.isIndex(t[i],e.data.length)?r.push(t[i]):Av.warn("trace index (",t[i],") is not a number or is out of bounds");return r}return t};dp.manageArrayContainers=function(e,t,r){var i=e.obj,n=e.parts,a=n.length,o=n[a-1],s=Yue(o);if(s&&t===null){var l=n.slice(0,a-1).join("."),u=Av.nestedProperty(i,l).get();u.splice(o,1)}else s&&e.get()===void 0&&e.get()===void 0&&(r[e.astr]=null),e.set(t)};var Nft=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function Gue(e){var t=e.search(Nft);if(t>0)return e.substr(0,t)}dp.hasParent=function(e,t){for(var r=Gue(t);r;){if(r in e)return!0;r=Gue(r)}return!1};var Uft=["x","y","z"];dp.clearAxisTypes=function(e,t,r){for(var i=0;i<t.length;i++)for(var n=e._fullData[i],a=0;a<3;a++){var o=Oft(e,n,Uft[a]);if(o&&o.type!=="log"){var s=o._name,l=o._id.substr(1);if(l.substr(0,5)==="scene"){if(r[l]!==void 0)continue;s=l+"."+s}var u=s+".type";r[s]===void 0&&r[u]===void 0&&Av.nestedProperty(e.layout,u).set(null)}}}});var rL=ie(Vo=>{"use strict";var X4=Mi(),Vft=la(),Hft=Hq(),ci=Zt(),Qs=ci.nestedProperty,O7=c2(),Mv=qte(),pp=Ti(),eL=sm(),Ta=js(),jh=Wi(),Gft=fO(),Yft=gc(),q7=oa(),Wft=_i(),Xft=D7().initInteractions,Zft=Cd(),jft=Ef().clearOutline,$ue=ix().dfltConfig,Y4=Uue(),nf=Zue(),ms=$A(),Sm=Zs(),Kft=Af().AX_NAME_PATTERN,z7=0,jue=5;function Jft(e,t,r,i){var n;if(e=ci.getGraphDiv(e),O7.init(e),ci.isPlainObject(t)){var a=t;t=a.data,r=a.layout,i=a.config,n=a.frames}var o=O7.triggerHandler(e,"plotly_beforeplot",[t,r,i]);if(o===!1)return Promise.reject();!t&&!r&&!ci.isPlotDiv(e)&&ci.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",e);function s(){if(n)return Vo.addFrames(e,n)}tfe(e,i),r||(r={}),X4.select(e).classed("js-plotly-plot",!0),q7.makeTester(),Array.isArray(e._promises)||(e._promises=[]);var l=(e.data||[]).length===0&&Array.isArray(t);Array.isArray(t)&&(nf.cleanData(t),l?e.data=t:e.data.push.apply(e.data,t),e.empty=!1),(!e.layout||l)&&(e.layout=nf.cleanLayout(r)),Ta.supplyDefaults(e);var u=e._fullLayout,f=u._has("cartesian");u._replotting=!0,(l||u._shouldCreateBgLayer)&&(xct(e),u._shouldCreateBgLayer&&delete u._shouldCreateBgLayer),q7.initGradients(e),q7.initPatterns(e),l&&jh.saveShowSpikeInitial(e);var c=!e.calcdata||e.calcdata.length!==(e._fullData||[]).length;c&&Ta.doCalcdata(e);for(var h=0;h<e.calcdata.length;h++)e.calcdata[h][0].trace=e._fullData[h];e._context.responsive?e._responsiveChartHandler||(e._responsiveChartHandler=function(){ci.isHidden(e)||Ta.resize(e)},window.addEventListener("resize",e._responsiveChartHandler)):ci.clearResponsive(e);var v=ci.extendFlat({},u._size),d=0;function x(){for(var E=u._basePlotModules,S=0;S<E.length;S++)E[S].drawFramework&&E[S].drawFramework(e);!u._glcanvas&&u._has("gl")&&(u._glcanvas=u._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(P){return P.key}),u._glcanvas.enter().append("canvas").attr("class",function(P){return"gl-canvas gl-canvas-"+P.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var g=e._context.plotGlPixelRatio;if(u._glcanvas){u._glcanvas.attr("width",u.width*g).attr("height",u.height*g).style("width",u.width+"px").style("height",u.height+"px");var C=u._glcanvas.data()[0].regl;if(C&&(Math.floor(u.width*g)!==C._gl.drawingBufferWidth||Math.floor(u.height*g)!==C._gl.drawingBufferHeight)){var M="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(d)ci.error(M);else return ci.log(M+" Clearing graph and plotting again."),Ta.cleanPlot([],{},e._fullData,u),Ta.supplyDefaults(e),u=e._fullLayout,Ta.doCalcdata(e),d++,x()}}return u.modebar.orientation==="h"?u._modebardiv.style("height",null).style("width","100%"):u._modebardiv.style("width",null).style("height",u.height+"px"),Ta.previousPromises(e)}function b(){if(Ta.clearAutoMarginIds(e),ms.drawMarginPushers(e),jh.allowAutoMargin(e),e._fullLayout.title.text&&e._fullLayout.title.automargin&&Ta.allowAutoMargin(e,"title.automargin"),u._has("pie"))for(var E=e._fullData,S=0;S<E.length;S++){var g=E[S];g.type==="pie"&&g.automargin&&Ta.allowAutoMargin(e,"pie."+g.uid+".automargin")}return Ta.doAutoMargin(e),Ta.previousPromises(e)}function p(){if(Ta.didMarginChange(v,u._size))return ci.syncOrAsync([b,ms.layoutStyles],e)}function w(){if(!c){A();return}return ci.syncOrAsync([pp.getComponentMethod("shapes","calcAutorange"),pp.getComponentMethod("annotations","calcAutorange"),A],e)}function A(){e._transitioning||(ms.doAutoRangeAndConstraints(e),l&&jh.saveRangeInitial(e),pp.getComponentMethod("rangeslider","calcAutorange")(e))}function T(){return jh.draw(e,l?"":"redraw")}var k=[Ta.previousPromises,s,x,b,p];f&&k.push(w),k.push(ms.layoutStyles),f&&k.push(T,function(S){var g=S._fullLayout._insideTickLabelsUpdaterange;if(g)return S._fullLayout._insideTickLabelsUpdaterange=void 0,wM(S,g).then(function(){jh.saveRangeInitial(S,!0)})}),k.push(ms.drawData,ms.finalDraw,Xft,Ta.addLinks,Ta.rehover,Ta.redrag,Ta.reselect,Ta.doAutoMargin,Ta.previousPromises);var _=ci.syncOrAsync(k,e);return(!_||!_.then)&&(_=Promise.resolve()),_.then(function(){return TM(e),e})}function TM(e){var t=e._fullLayout;t._redrawFromAutoMarginCount?t._redrawFromAutoMarginCount--:e.emit("plotly_afterplot")}function Qft(e){return ci.extendFlat($ue,e)}function efe(e,t){try{e._fullLayout._paper.style("background",t)}catch(r){ci.error(r)}}function $ft(e,t){var r=Wft.combine(t,"white");efe(e,r)}function tfe(e,t){if(!e._context){e._context=ci.extendDeep({},$ue);var r=X4.select("base");e._context._baseUrl=r.size()&&r.attr("href")?window.location.href.split("#")[0]:""}var i=e._context,n,a,o;if(t){for(a=Object.keys(t),n=0;n<a.length;n++)o=a[n],!(o==="editable"||o==="edits")&&o in i&&(o==="setBackground"&&t[o]==="opaque"?i[o]=$ft:i[o]=t[o]);t.plot3dPixelRatio&&!i.plotGlPixelRatio&&(i.plotGlPixelRatio=i.plot3dPixelRatio);var s=t.editable;if(s!==void 0)for(i.editable=s,a=Object.keys(i.edits),n=0;n<a.length;n++)i.edits[a[n]]=s;if(t.edits)for(a=Object.keys(t.edits),n=0;n<a.length;n++)o=a[n],o in i.edits&&(i.edits[o]=t.edits[o]);i._exportedPlot=t._exportedPlot}i.staticPlot&&(i.editable=!1,i.edits={},i.autosizable=!1,i.scrollZoom=!1,i.doubleClick=!1,i.showTips=!1,i.showLink=!1,i.displayModeBar=!1),i.displayModeBar==="hover"&&!Hft&&(i.displayModeBar=!0),(i.setBackground==="transparent"||typeof i.setBackground!="function")&&(i.setBackground=efe),i._hasZeroHeight=i._hasZeroHeight||e.clientHeight===0,i._hasZeroWidth=i._hasZeroWidth||e.clientWidth===0;var l=i.scrollZoom,u=i._scrollZoom={};if(l===!0)u.cartesian=1,u.gl3d=1,u.geo=1,u.mapbox=1;else if(typeof l=="string"){var f=l.split("+");for(n=0;n<f.length;n++)u[f[n]]=1}else l!==!1&&(u.gl3d=1,u.geo=1,u.mapbox=1)}function ect(e){if(e=ci.getGraphDiv(e),!ci.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);return nf.cleanData(e.data),nf.cleanLayout(e.layout),e.calcdata=void 0,Vo._doPlot(e).then(function(){return e.emit("plotly_redraw"),e})}function tct(e,t,r,i){return e=ci.getGraphDiv(e),Ta.cleanPlot([],{},e._fullData||[],e._fullLayout||{}),Ta.purge(e),Vo._doPlot(e,t,r,i)}function Z4(e,t){var r=t+1,i=[],n,a;for(n=0;n<e.length;n++)a=e[n],a<0?i.push(r+a):i.push(a);return i}function j4(e,t,r){var i,n;for(i=0;i<t.length;i++){if(n=t[i],n!==parseInt(n,10))throw new Error("all values in "+r+" must be integers");if(n>=e.data.length||n<-e.data.length)throw new Error(r+" must be valid indices for gd.data.");if(t.indexOf(n,i+1)>-1||n>=0&&t.indexOf(-e.data.length+n)>-1||n<0&&t.indexOf(e.data.length+n)>-1)throw new Error("each index in "+r+" must be unique.")}}function rfe(e,t,r){if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(typeof t=="undefined")throw new Error("currentIndices is a required argument.");if(Array.isArray(t)||(t=[t]),j4(e,t,"currentIndices"),typeof r!="undefined"&&!Array.isArray(r)&&(r=[r]),typeof r!="undefined"&&j4(e,r,"newIndices"),typeof r!="undefined"&&t.length!==r.length)throw new Error("current and new indices must be of equal length.")}function rct(e,t,r){var i,n;if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(typeof t=="undefined")throw new Error("traces must be defined.");for(Array.isArray(t)||(t=[t]),i=0;i<t.length;i++)if(n=t[i],typeof n!="object"||Array.isArray(n)||n===null)throw new Error("all values in traces array must be non-array objects");if(typeof r!="undefined"&&!Array.isArray(r)&&(r=[r]),typeof r!="undefined"&&r.length!==t.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function nct(e,t,r,i){var n=ci.isPlainObject(i);if(!Array.isArray(e.data))throw new Error("gd.data must be an array");if(!ci.isPlainObject(t))throw new Error("update must be a key:value object");if(typeof r=="undefined")throw new Error("indices must be an integer or array of integers");j4(e,r,"indices");for(var a in t){if(!Array.isArray(t[a])||t[a].length!==r.length)throw new Error("attribute "+a+" must be an array of length equal to indices array length");if(n&&(!(a in i)||!Array.isArray(i[a])||i[a].length!==t[a].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function ict(e,t,r,i){var n=ci.isPlainObject(i),a=[],o,s,l,u,f;Array.isArray(r)||(r=[r]),r=Z4(r,e.data.length-1);for(var c in t)for(var h=0;h<r.length;h++){if(o=e.data[r[h]],l=Qs(o,c),s=l.get(),u=t[c][h],!ci.isArrayOrTypedArray(u))throw new Error("attribute: "+c+" index: "+h+" must be an array");if(!ci.isArrayOrTypedArray(s))throw new Error("cannot extend missing or non-array attribute: "+c);if(s.constructor!==u.constructor)throw new Error("cannot extend array with an array of a different type: "+c);f=n?i[c][h]:i,Vft(f)||(f=-1),a.push({prop:l,target:s,insert:u,maxp:Math.floor(f)})}return a}function nfe(e,t,r,i,n){nct(e,t,r,i);for(var a=ict(e,t,r,i),o={},s={},l=0;l<a.length;l++){var u=a[l].prop,f=a[l].maxp,c=n(a[l].target,a[l].insert,f);u.set(c[0]),Array.isArray(o[u.astr])||(o[u.astr]=[]),o[u.astr].push(c[1]),Array.isArray(s[u.astr])||(s[u.astr]=[]),s[u.astr].push(a[l].target.length)}return{update:o,maxPoints:s}}function ife(e,t){var r=new e.constructor(e.length+t.length);return r.set(e),r.set(t,e.length),r}function afe(e,t,r,i){e=ci.getGraphDiv(e);function n(l,u,f){var c,h;if(ci.isTypedArray(l))if(f<0){var v=new l.constructor(0),d=ife(l,u);f<0?(c=d,h=v):(c=v,h=d)}else if(c=new l.constructor(f),h=new l.constructor(l.length+u.length-f),f===u.length)c.set(u),h.set(l);else if(f<u.length){var x=u.length-f;c.set(u.subarray(x)),h.set(l),h.set(u.subarray(0,x),l.length)}else{var b=f-u.length,p=l.length-b;c.set(l.subarray(p)),c.set(u,b),h.set(l.subarray(0,p))}else c=l.concat(u),h=f>=0&&f<c.length?c.splice(0,c.length-f):[];return[c,h]}var a=nfe(e,t,r,i,n),o=Vo.redraw(e),s=[e,a.update,r,a.maxPoints];return Mv.add(e,Vo.prependTraces,s,afe,arguments),o}function ofe(e,t,r,i){e=ci.getGraphDiv(e);function n(l,u,f){var c,h;if(ci.isTypedArray(l))if(f<=0){var v=new l.constructor(0),d=ife(u,l);f<0?(c=d,h=v):(c=v,h=d)}else if(c=new l.constructor(f),h=new l.constructor(l.length+u.length-f),f===u.length)c.set(u),h.set(l);else if(f<u.length){var x=u.length-f;c.set(u.subarray(0,x)),h.set(u.subarray(x)),h.set(l,x)}else{var b=f-u.length;c.set(u),c.set(l.subarray(0,b),u.length),h.set(l.subarray(b))}else c=u.concat(l),h=f>=0&&f<c.length?c.splice(f,c.length):[];return[c,h]}var a=nfe(e,t,r,i,n),o=Vo.redraw(e),s=[e,a.update,r,a.maxPoints];return Mv.add(e,Vo.extendTraces,s,ofe,arguments),o}function sfe(e,t,r){e=ci.getGraphDiv(e);var i=[],n=Vo.deleteTraces,a=sfe,o=[e,i],s=[e,t],l,u;for(rct(e,t,r),Array.isArray(t)||(t=[t]),t=t.map(function(f){return ci.extendFlat({},f)}),nf.cleanData(t),l=0;l<t.length;l++)e.data.push(t[l]);for(l=0;l<t.length;l++)i.push(-t.length+l);if(typeof r=="undefined")return u=Vo.redraw(e),Mv.add(e,n,o,a,s),u;Array.isArray(r)||(r=[r]);try{rfe(e,i,r)}catch(f){throw e.data.splice(e.data.length-t.length,t.length),f}return Mv.startSequence(e),Mv.add(e,n,o,a,s),u=Vo.moveTraces(e,i,r),Mv.stopSequence(e),u}function lfe(e,t){e=ci.getGraphDiv(e);var r=[],i=Vo.addTraces,n=lfe,a=[e,r,t],o=[e,t],s,l;if(typeof t=="undefined")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(t)||(t=[t]),j4(e,t,"indices"),t=Z4(t,e.data.length-1),t.sort(ci.sorterDes),s=0;s<t.length;s+=1)l=e.data.splice(t[s],1)[0],r.push(l);var u=Vo.redraw(e);return Mv.add(e,i,a,n,o),u}function B7(e,t,r){e=ci.getGraphDiv(e);var i=[],n=[],a=B7,o=B7,s=[e,r,t],l=[e,t,r],u;if(rfe(e,t,r),t=Array.isArray(t)?t:[t],typeof r=="undefined")for(r=[],u=0;u<t.length;u++)r.push(-t.length+u);for(r=Array.isArray(r)?r:[r],t=Z4(t,e.data.length-1),r=Z4(r,e.data.length-1),u=0;u<e.data.length;u++)t.indexOf(u)===-1&&i.push(e.data[u]);for(u=0;u<t.length;u++)n.push({newIndex:r[u],trace:e.data[t[u]]});for(n.sort(function(c,h){return c.newIndex-h.newIndex}),u=0;u<n.length;u+=1)i.splice(n[u].newIndex,0,n[u].trace);e.data=i;var f=Vo.redraw(e);return Mv.add(e,a,s,o,l),f}function K4(e,t,r,i){e=ci.getGraphDiv(e),nf.clearPromiseQueue(e);var n={};if(typeof t=="string")n[t]=r;else if(ci.isPlainObject(t))n=ci.extendFlat({},t),i===void 0&&(i=r);else return ci.warn("Restyle fail.",t,r,i),Promise.reject();Object.keys(n).length&&(e.changed=!0);var a=nf.coerceTraceIndices(e,i),o=ufe(e,n,a),s=o.flags;s.calc&&(e.calcdata=void 0),s.clearAxisTypes&&nf.clearAxisTypes(e,a,{});var l=[];s.fullReplot?l.push(Vo._doPlot):(l.push(Ta.previousPromises),Ta.supplyDefaults(e),s.markerSize&&(Ta.doCalcdata(e),tL(l)),s.style&&l.push(ms.doTraceStyle),s.colorbars&&l.push(ms.doColorBars),l.push(TM)),l.push(Ta.rehover,Ta.redrag,Ta.reselect),Mv.add(e,K4,[e,o.undoit,o.traces],K4,[e,o.redoit,o.traces]);var u=ci.syncOrAsync(l,e);return(!u||!u.then)&&(u=Promise.resolve()),u.then(function(){return e.emit("plotly_restyle",o.eventData),e})}function Xg(e){return e===void 0?null:e}function W4(e,t){return t?function(r,i,n){var a=Qs(r,i),o=a.set;return a.set=function(s){var l=(n||"")+i;J4(l,a.get(),s,e),o(s)},a}:Qs}function J4(e,t,r,i){if(Array.isArray(t)||Array.isArray(r))for(var n=Array.isArray(t)?t:[],a=Array.isArray(r)?r:[],o=Math.max(n.length,a.length),s=0;s<o;s++)J4(e+"["+s+"]",n[s],a[s],i);else if(ci.isPlainObject(t)||ci.isPlainObject(r)){var l=ci.isPlainObject(t)?t:{},u=ci.isPlainObject(r)?r:{},f=ci.extendFlat({},l,u);for(var c in f)J4(e+"."+c,l[c],u[c],i)}else i[e]===void 0&&(i[e]=Xg(t))}function act(e,t,r){for(var i in r){var n=Qs(e,i);J4(i,n.get(),r[i],t)}}function ufe(e,t,r){var i=e._fullLayout,n=e._fullData,a=e.data,o=i._guiEditing,s=W4(i._preGUI,o),l=ci.extendDeepAll({},t),u;ffe(t);var f=Sm.traceFlags(),c={},h={},v;function d(){return r.map(function(){})}function x(te){var ge=jh.id2name(te);v.indexOf(ge)===-1&&v.push(ge)}function b(te){return"LAYOUT"+te+".autorange"}function p(te){return"LAYOUT"+te+".range"}function w(te){for(var ge=te;ge<n.length;ge++)if(n[ge]._input===a[te])return n[ge]}function A(te,ge,ae){if(Array.isArray(te)){te.forEach(function(rt){A(rt,ge,ae)});return}if(!(te in t||nf.hasParent(t,te))){var _e;if(te.substr(0,6)==="LAYOUT")_e=s(e.layout,te.replace("LAYOUT",""));else{var Ce=r[ae],qe=i._tracePreGUI[w(Ce)._fullInput.uid];_e=W4(qe,o)(a[Ce],te)}te in h||(h[te]=d()),h[te][ae]===void 0&&(h[te][ae]=Xg(_e.get())),ge!==void 0&&_e.set(ge)}}function T(te){return function(ge){return n[ge][te]}}function k(te){return function(ge,ae){return ge===!1?n[r[ae]][te]:null}}for(var _ in t){if(nf.hasParent(t,_))throw new Error("cannot set "+_+" and a parent attribute simultaneously");var E=t[_],S,g,C,M,P,D;if((_==="autobinx"||_==="autobiny")&&(_=_.charAt(_.length-1)+"bins",Array.isArray(E)?E=E.map(k(_)):E===!1?E=r.map(T(_)):E=null),c[_]=E,_.substr(0,6)==="LAYOUT"){C=s(e.layout,_.replace("LAYOUT","")),h[_]=[Xg(C.get())],C.set(Array.isArray(E)?E[0]:E),f.calc=!0;continue}for(h[_]=d(),u=0;u<r.length;u++){S=a[r[u]],g=w(r[u]);var q=i._tracePreGUI[g._fullInput.uid];if(C=W4(q,o)(S,_),M=C.get(),P=Array.isArray(E)?E[u%E.length]:E,P!==void 0){var O=C.parts[C.parts.length-1],U=_.substr(0,_.length-O.length-1),B=U?U+".":"",F=U?Qs(g,U).get():g;if(D=eL.getTraceValObject(g,C.parts),D&&D.impliedEdits&&P!==null)for(var N in D.impliedEdits)A(ci.relativeAttr(_,N),D.impliedEdits[N],u);else if((O==="thicknessmode"||O==="lenmode")&&M!==P&&(P==="fraction"||P==="pixels")&&F){var X=i._size,K=F.orient,ne=K==="top"||K==="bottom";if(O==="thicknessmode"){var fe=ne?X.h:X.w;A(B+"thickness",F.thickness*(P==="fraction"?1/fe:fe),u)}else{var ue=ne?X.w:X.h;A(B+"len",F.len*(P==="fraction"?1/ue:ue),u)}}else if(_==="type"&&(P==="pie"!=(M==="pie")||P==="funnelarea"!=(M==="funnelarea"))){var ee="x",Z="y";(P==="bar"||M==="bar")&&S.orientation==="h"&&(ee="y",Z="x"),ci.swapAttrs(S,["?","?src"],"labels",ee),ci.swapAttrs(S,["d?","?0"],"label",ee),ci.swapAttrs(S,["?","?src"],"values",Z),M==="pie"||M==="funnelarea"?(Qs(S,"marker.color").set(Qs(S,"marker.colors").get()),i._pielayer.selectAll("g.trace").remove()):pp.traceIs(S,"cartesian")&&Qs(S,"marker.colors").set(Qs(S,"marker.color").get())}h[_][u]=Xg(M);var oe=["swapxy","swapxyaxes","orientation","orientationaxes"];if(oe.indexOf(_)!==-1){if(_==="orientation"){C.set(P);var ce=S.x&&!S.y?"h":"v";if((C.get()||ce)===g.orientation)continue}else _==="orientationaxes"&&(S.orientation={v:"h",h:"v"}[g.orientation]);nf.swapXYData(S),f.calc=f.clearAxisTypes=!0}else Ta.dataArrayContainers.indexOf(C.parts[0])!==-1?(nf.manageArrayContainers(C,P,h),f.calc=!0):(D?D.arrayOk&&!pp.traceIs(g,"regl")&&(ci.isArrayOrTypedArray(P)||ci.isArrayOrTypedArray(M))?f.calc=!0:Sm.update(f,D):f.calc=!0,C.set(P))}}if(["swapxyaxes","orientationaxes"].indexOf(_)!==-1&&jh.swap(e,r),_==="orientationaxes"){var le=Qs(e.layout,"hovermode"),me=le.get();me==="x"?le.set("y"):me==="y"?le.set("x"):me==="x unified"?le.set("y unified"):me==="y unified"&&le.set("x unified")}if(["orientation","type"].indexOf(_)!==-1){for(v=[],u=0;u<r.length;u++){var he=a[r[u]];pp.traceIs(he,"cartesian")&&(x(he.xaxis||"x"),x(he.yaxis||"y"))}A(v.map(b),!0,0),A(v.map(p),[0,1],0)}}return(f.calc||f.plot)&&(f.fullReplot=!0),{flags:f,undoit:h,redoit:c,traces:r,eventData:ci.extendDeepNoArrays([],[l,r])}}function ffe(e){var t=ci.counterRegex("axis",".title",!1,!1),r=/colorbar\.title$/,i=Object.keys(e),n,a,o;for(n=0;n<i.length;n++)a=i[n],o=e[a],(a==="title"||t.test(a)||r.test(a))&&(typeof o=="string"||typeof o=="number")?s(a,a.replace("title","title.text")):a.indexOf("titlefont")>-1&&a.indexOf("grouptitlefont")===-1?s(a,a.replace("titlefont","title.font")):a.indexOf("titleposition")>-1?s(a,a.replace("titleposition","title.position")):a.indexOf("titleside")>-1?s(a,a.replace("titleside","title.side")):a.indexOf("titleoffset")>-1&&s(a,a.replace("titleoffset","title.offset"));function s(l,u){e[u]=e[l],delete e[l]}}function wM(e,t,r){e=ci.getGraphDiv(e),nf.clearPromiseQueue(e);var i={};if(typeof t=="string")i[t]=r;else if(ci.isPlainObject(t))i=ci.extendFlat({},t);else return ci.warn("Relayout fail.",t,r),Promise.reject();Object.keys(i).length&&(e.changed=!0);var n=pfe(e,i),a=n.flags;a.calc&&(e.calcdata=void 0);var o=[Ta.previousPromises];a.layoutReplot?o.push(ms.layoutReplot):Object.keys(i).length&&(cfe(e,a,n)||Ta.supplyDefaults(e),a.legend&&o.push(ms.doLegend),a.layoutstyle&&o.push(ms.layoutStyles),a.axrange&&tL(o,n.rangesAltered),a.ticks&&o.push(ms.doTicksRelayout),a.modebar&&o.push(ms.doModeBar),a.camera&&o.push(ms.doCamera),a.colorbars&&o.push(ms.doColorBars),o.push(TM)),o.push(Ta.rehover,Ta.redrag,Ta.reselect),Mv.add(e,wM,[e,n.undoit],wM,[e,n.redoit]);var s=ci.syncOrAsync(o,e);return(!s||!s.then)&&(s=Promise.resolve(e)),s.then(function(){return e.emit("plotly_relayout",n.eventData),e})}function cfe(e,t,r){var i=e._fullLayout;if(!t.axrange)return!1;for(var n in t)if(n!=="axrange"&&t[n])return!1;var a,o,s=function(v,d){return ci.coerce(a,o,Yft,v,d)},l={};for(var u in r.rangesAltered){var f=jh.id2name(u);if(a=e.layout[f],o=i[f],Gft(a,o,s,l),o._matchGroup){for(var c in o._matchGroup)if(c!==u){var h=i[jh.id2name(c)];h.autorange=o.autorange,h.range=o.range.slice(),h._input.range=o.range.slice()}}}return!0}function tL(e,t){var r=t?function(i){var n=[],a=!0;for(var o in t){var s=jh.getFromId(i,o);if(n.push(o),(s.ticklabelposition||"").indexOf("inside")!==-1&&s._anchorAxis&&n.push(s._anchorAxis._id),s._matchGroup)for(var l in s._matchGroup)t[l]||n.push(l)}return jh.draw(i,n,{skipTitle:a})}:function(i){return jh.draw(i,"redraw")};e.push(jft,ms.doAutoRangeAndConstraints,r,ms.drawData,ms.finalDraw)}var hfe=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,vfe=/^[xyz]axis[0-9]*\.autorange$/,dfe=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function pfe(e,t){var r=e.layout,i=e._fullLayout,n=i._guiEditing,a=W4(i._preGUI,n),o=Object.keys(t),s=jh.list(e),l=ci.extendDeepAll({},t),u={},f,c,h;for(ffe(t),o=Object.keys(t),c=0;c<o.length;c++)if(o[c].indexOf("allaxes")===0){for(h=0;h<s.length;h++){var v=s[h]._id.substr(1),d=v.indexOf("scene")!==-1?v+".":"",x=o[c].replace("allaxes",d+s[h]._name);t[x]||(t[x]=t[o[c]])}delete t[o[c]]}var b=Sm.layoutFlags(),p={},w={};function A(qe,rt){if(Array.isArray(qe)){qe.forEach(function(Ie){A(Ie,rt)});return}if(!(qe in t||nf.hasParent(t,qe))){var Re=a(r,qe);qe in w||(w[qe]=Xg(Re.get())),rt!==void 0&&Re.set(rt)}}var T={},k;function _(qe){var rt=jh.name2id(qe.split(".")[0]);return T[rt]=1,rt}for(var E in t){if(nf.hasParent(t,E))throw new Error("cannot set "+E+" and a parent attribute simultaneously");for(var S=a(r,E),g=t[E],C=S.parts.length,M=C-1;M>0&&typeof S.parts[M]!="string";)M--;var P=S.parts[M],D=S.parts[M-1]+"."+P,q=S.parts.slice(0,M).join("."),O=Qs(e.layout,q).get(),U=Qs(i,q).get(),B=S.get();if(g!==void 0){p[E]=g,w[E]=P==="reverse"?g:Xg(B);var F=eL.getLayoutValObject(i,S.parts);if(F&&F.impliedEdits&&g!==null)for(var N in F.impliedEdits)A(ci.relativeAttr(E,N),F.impliedEdits[N]);if(["width","height"].indexOf(E)!==-1)if(g){A("autosize",null);var X=E==="height"?"width":"height";A(X,i[X])}else i[E]=e._initialAutoSize[E];else if(E==="autosize")A("width",g?null:i.width),A("height",g?null:i.height);else if(D.match(hfe))_(D),Qs(i,q+"._inputRange").set(null);else if(D.match(vfe)){_(D),Qs(i,q+"._inputRange").set(null);var K=Qs(i,q).get();K._inputDomain&&(K._input.domain=K._inputDomain.slice())}else D.match(dfe)&&Qs(i,q+"._inputDomain").set(null);if(P==="type"){k=O;var ne=U.type==="linear"&&g==="log",fe=U.type==="log"&&g==="linear";if(ne||fe){if(!k||!k.range)A(q+".autorange",!0);else if(U.autorange)ne&&(k.range=k.range[1]>k.range[0]?[1,2]:[2,1]);else{var ue=k.range[0],ee=k.range[1];ne?(ue<=0&&ee<=0&&A(q+".autorange",!0),ue<=0?ue=ee/1e6:ee<=0&&(ee=ue/1e6),A(q+".range[0]",Math.log(ue)/Math.LN10),A(q+".range[1]",Math.log(ee)/Math.LN10)):(A(q+".range[0]",Math.pow(10,ue)),A(q+".range[1]",Math.pow(10,ee)))}Array.isArray(i._subplots.polar)&&i._subplots.polar.length&&i[S.parts[0]]&&S.parts[1]==="radialaxis"&&delete i[S.parts[0]]._subplot.viewInitial["radialaxis.range"],pp.getComponentMethod("annotations","convertCoords")(e,U,g,A),pp.getComponentMethod("images","convertCoords")(e,U,g,A)}else A(q+".autorange",!0),A(q+".range",null);Qs(i,q+"._inputRange").set(null)}else if(P.match(Kft)){var Z=Qs(i,E).get(),oe=(g||{}).type;(!oe||oe==="-")&&(oe="linear"),pp.getComponentMethod("annotations","convertCoords")(e,Z,oe,A),pp.getComponentMethod("images","convertCoords")(e,Z,oe,A)}var ce=Y4.containerArrayMatch(E);if(ce){f=ce.array,c=ce.index;var le=ce.property,me=F||{editType:"calc"};c!==""&&le===""&&(Y4.isAddVal(g)?w[E]=null:Y4.isRemoveVal(g)?w[E]=(Qs(r,f).get()||[])[c]:ci.warn("unrecognized full object value",t)),Sm.update(b,me),u[f]||(u[f]={});var he=u[f][c];he||(he=u[f][c]={}),he[le]=g,delete t[E]}else P==="reverse"?(O.range?O.range.reverse():(A(q+".autorange",!0),O.range=[1,0]),U.autorange?b.calc=!0:b.plot=!0):(E==="dragmode"&&(g===!1&&B!==!1||g!==!1&&B===!1)||i._has("scatter-like")&&i._has("regl")&&E==="dragmode"&&(g==="lasso"||g==="select")&&!(B==="lasso"||B==="select")||i._has("gl2d")?b.plot=!0:F?Sm.update(b,F):b.calc=!0,S.set(g))}}for(f in u){var te=Y4.applyContainerArrayChanges(e,a(r,f),u[f],b,a);te||(b.plot=!0)}for(var ge in T){k=jh.getFromId(e,ge);var ae=k&&k._constraintGroup;if(ae){b.calc=!0;for(var _e in ae)T[_e]||(jh.getFromId(e,_e)._constraintShrinkable=!0)}}(gfe(e)||t.height||t.width)&&(b.plot=!0);var Ce=i.shapes;for(c=0;c<Ce.length;c++)if(Ce[c].showlegend){b.calc=!0;break}return(b.plot||b.calc)&&(b.layoutReplot=!0),{flags:b,rangesAltered:T,undoit:w,redoit:p,eventData:l}}function gfe(e){var t=e._fullLayout,r=t.width,i=t.height;return e.layout.autosize&&Ta.plotAutoSize(e,e.layout,t),t.width!==r||t.height!==i}function Q4(e,t,r,i){e=ci.getGraphDiv(e),nf.clearPromiseQueue(e),ci.isPlainObject(t)||(t={}),ci.isPlainObject(r)||(r={}),Object.keys(t).length&&(e.changed=!0),Object.keys(r).length&&(e.changed=!0);var n=nf.coerceTraceIndices(e,i),a=ufe(e,ci.extendFlat({},t),n),o=a.flags,s=pfe(e,ci.extendFlat({},r)),l=s.flags;(o.calc||l.calc)&&(e.calcdata=void 0),o.clearAxisTypes&&nf.clearAxisTypes(e,n,r);var u=[];l.layoutReplot?u.push(ms.layoutReplot):o.fullReplot?u.push(Vo._doPlot):(u.push(Ta.previousPromises),cfe(e,l,s)||Ta.supplyDefaults(e),o.style&&u.push(ms.doTraceStyle),(o.colorbars||l.colorbars)&&u.push(ms.doColorBars),l.legend&&u.push(ms.doLegend),l.layoutstyle&&u.push(ms.layoutStyles),l.axrange&&tL(u,s.rangesAltered),l.ticks&&u.push(ms.doTicksRelayout),l.modebar&&u.push(ms.doModeBar),l.camera&&u.push(ms.doCamera),u.push(TM)),u.push(Ta.rehover,Ta.redrag,Ta.reselect),Mv.add(e,Q4,[e,a.undoit,s.undoit,a.traces],Q4,[e,a.redoit,s.redoit,a.traces]);var f=ci.syncOrAsync(u,e);return(!f||!f.then)&&(f=Promise.resolve(e)),f.then(function(){return e.emit("plotly_update",{data:a.eventData,layout:s.eventData}),e})}function U7(e){return function(r){r._fullLayout._guiEditing=!0;var i=e.apply(null,arguments);return r._fullLayout._guiEditing=!1,i}}var oct=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],sct=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Kue(e,t){for(var r=0;r<t.length;r++){var i=t[r],n=e.match(i.pattern);if(n){var a=n[1]||"";return{head:a,tail:e.substr(a.length+1),attr:i.attr}}}}function Jue(e,t){var r=Qs(t,e).get();if(r!==void 0)return r;var i=e.split(".");for(i.pop();i.length>1;)if(i.pop(),r=Qs(t,i.join(".")+".uirevision").get(),r!==void 0)return r;return t.uirevision}function lct(e,t){for(var r=0;r<t.length;r++)if(t[r]._fullInput.uid===e)return r;return-1}function uct(e,t,r){for(var i=0;i<t.length;i++)if(t[i].uid===e)return i;return!t[r]||t[r].uid?-1:r}function Que(e,t){var r=ci.isPlainObject(e),i=Array.isArray(e);return r||i?(r&&ci.isPlainObject(t)||i&&Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t):e===t}function fct(e,t,r,i){var n=i._preGUI,a,o,s,l,u,f,c,h,v,d,x=[],b={},p={};for(a in n){if(u=Kue(a,oct),u){if(v=u.head,d=u.tail,o=u.attr||v+".uirevision",s=Qs(i,o).get(),l=s&&Jue(o,t),l&&l===s){if(f=n[a],f===null&&(f=void 0),c=Qs(t,a),h=c.get(),Que(h,f)){h===void 0&&d==="autorange"&&x.push(v),c.set(Xg(Qs(i,a).get()));continue}else if(d==="autorange"||d.substr(0,6)==="range["){var w=n[v+".range[0]"],A=n[v+".range[1]"],T=n[v+".autorange"];if(T||T===null&&w===null&&A===null){if(!(v in b)){var k=Qs(t,v).get();b[v]=k&&(k.autorange||k.autorange!==!1&&(!k.range||k.range.length!==2))}if(b[v]){c.set(Xg(Qs(i,a).get()));continue}}}}}else ci.warn("unrecognized GUI edit: "+a);delete n[a],u&&u.tail.substr(0,6)==="range["&&(p[u.head]=1)}for(var _=0;_<x.length;_++){var E=x[_];if(p[E]){var S=Qs(t,E).get();S&&delete S.autorange}}var g=i._tracePreGUI;for(var C in g){var M=g[C],P=null,D;for(a in M){if(!P){var q=lct(C,r);if(q<0){delete g[C];break}var O=r[q];D=O._fullInput;var U=uct(C,e,D.index);if(U<0){delete g[C];break}P=e[U]}if(u=Kue(a,sct),u){if(u.attr?(s=Qs(i,u.attr).get(),l=s&&Jue(u.attr,t)):(s=D.uirevision,l=P.uirevision,l===void 0&&(l=t.uirevision)),l&&l===s&&(f=M[a],f===null&&(f=void 0),c=Qs(P,a),h=c.get(),Que(h,f))){c.set(Xg(Qs(D,a).get()));continue}}else ci.warn("unrecognized GUI edit: "+a+" in trace uid "+C);delete M[a]}}}function cct(e,t,r,i){var n,a;function o(){return Vo.addFrames(e,n)}e=ci.getGraphDiv(e),nf.clearPromiseQueue(e);var s=e._fullData,l=e._fullLayout;if(!ci.isPlotDiv(e)||!s||!l)a=Vo.newPlot(e,t,r,i);else{if(ci.isPlainObject(t)){var u=t;t=u.data,r=u.layout,i=u.config,n=u.frames}var f=!1;if(i){var c=ci.extendDeep({},e._context);e._context=void 0,tfe(e,i),f=N7(c,e._context)}e.data=t||[],nf.cleanData(e.data),e.layout=r||{},nf.cleanLayout(e.layout),fct(e.data,e.layout,s,l),Ta.supplyDefaults(e,{skipUpdateCalc:!0});var h=e._fullData,v=e._fullLayout,d=v.datarevision===void 0,x=v.transition,b=vct(e,l,v,d,x),p=b.newDataRevision,w=hct(e,s,h,d,x,p);if(gfe(e)&&(b.layoutReplot=!0),w.calc||b.calc){e.calcdata=void 0;for(var A=Object.getOwnPropertyNames(v),T=0;T<A.length;T++){var k=A[T],_=k.substring(0,5);if(_==="xaxis"||_==="yaxis"){var E=v[k]._emptyCategories;E&&E()}}}else Ta.supplyDefaultsUpdateCalc(e.calcdata,h);var S=[];if(n&&(e._transitionData={},Ta.createTransitionData(e),S.push(o)),v.transition&&!f&&(w.anim||b.anim))b.ticks&&S.push(ms.doTicksRelayout),Ta.doCalcdata(e),ms.doAutoRangeAndConstraints(e),S.push(function(){return Ta.transitionFromReact(e,w,b,l)});else if(w.fullReplot||b.layoutReplot||f)e._fullLayout._skipDefaults=!0,S.push(Vo._doPlot);else{for(var g in b.arrays){var C=b.arrays[g];if(C.length){var M=pp.getComponentMethod(g,"drawOne");if(M!==ci.noop)for(var P=0;P<C.length;P++)M(e,C[P]);else{var D=pp.getComponentMethod(g,"draw");if(D===ci.noop)throw new Error("cannot draw components: "+g);D(e)}}}S.push(Ta.previousPromises),w.style&&S.push(ms.doTraceStyle),(w.colorbars||b.colorbars)&&S.push(ms.doColorBars),b.legend&&S.push(ms.doLegend),b.layoutstyle&&S.push(ms.layoutStyles),b.axrange&&tL(S),b.ticks&&S.push(ms.doTicksRelayout),b.modebar&&S.push(ms.doModeBar),b.camera&&S.push(ms.doCamera),S.push(TM)}S.push(Ta.rehover,Ta.redrag,Ta.reselect),a=ci.syncOrAsync(S,e),(!a||!a.then)&&(a=Promise.resolve(e))}return a.then(function(){return e.emit("plotly_react",{data:t,layout:r}),e})}function hct(e,t,r,i,n,a){var o=t.length===r.length;if(!n&&!o)return{fullReplot:!0,calc:!0};var s=Sm.traceFlags();s.arrays={},s.nChanges=0,s.nChangesAnim=0;var l,u;function f(v){var d=eL.getTraceValObject(u,v);return!u._module.animatable&&d.anim&&(d.anim=!1),d}var c={getValObject:f,flags:s,immutable:i,transition:n,newDataRevision:a,gd:e},h={};for(l=0;l<t.length;l++)if(r[l]){if(u=r[l]._fullInput,Ta.hasMakesDataTransform(u)&&(u=r[l]),h[u.uid])continue;h[u.uid]=1,$4(t[l]._fullInput,u,[],c)}return(s.calc||s.plot)&&(s.fullReplot=!0),n&&s.nChanges&&s.nChangesAnim&&(s.anim=s.nChanges===s.nChangesAnim&&o?"all":"some"),s}function vct(e,t,r,i,n){var a=Sm.layoutFlags();a.arrays={},a.rangesAltered={},a.nChanges=0,a.nChangesAnim=0;function o(l){return eL.getLayoutValObject(r,l)}var s={getValObject:o,flags:a,immutable:i,transition:n,gd:e};return $4(t,r,[],s),(a.plot||a.calc)&&(a.layoutReplot=!0),n&&a.nChanges&&a.nChangesAnim&&(a.anim=a.nChanges===a.nChangesAnim?"all":"some"),a}function $4(e,t,r,i){var n,a,o,s=i.getValObject,l=i.flags,u=i.immutable,f=i.inArray,c=i.arrayIndex;function h(){var q=n.editType;if(f&&q.indexOf("arraydraw")!==-1){ci.pushUnique(l.arrays[f],c);return}Sm.update(l,n),q!=="none"&&l.nChanges++,i.transition&&n.anim&&l.nChangesAnim++,(hfe.test(o)||vfe.test(o))&&(l.rangesAltered[r[0]]=1),dfe.test(o)&&Qs(t,"_inputDomain").set(null),a==="datarevision"&&(l.newDataRevision=1)}function v(q){return q.valType==="data_array"||q.arrayOk}for(a in e){if(l.calc&&!i.transition)return;var d=e[a],x=t[a],b=r.concat(a);if(o=b.join("."),!(a.charAt(0)==="_"||typeof d=="function"||d===x)){if((a==="tick0"||a==="dtick")&&r[0]!=="geo"){var p=t.tickmode;if(p==="auto"||p==="array"||!p)continue}if(!(a==="range"&&t.autorange)&&!((a==="zmin"||a==="zmax")&&t.type==="contourcarpet")&&(n=s(b),!!n&&!(n._compareAsJSON&&JSON.stringify(d)===JSON.stringify(x)))){var w=n.valType,A,T=v(n),k=Array.isArray(d),_=Array.isArray(x);if(k&&_){var E="_input_"+a,S=e[E],g=t[E];if(Array.isArray(S)&&S===g)continue}if(x===void 0)T&&k?l.calc=!0:h();else if(n._isLinkedToArray){var C=[],M=!1;f||(l.arrays[a]=C);var P=Math.min(d.length,x.length),D=Math.max(d.length,x.length);if(P!==D)if(n.editType==="arraydraw")M=!0;else{h();continue}for(A=0;A<P;A++)$4(d[A],x[A],b.concat(A),ci.extendFlat({inArray:a,arrayIndex:A},i));if(M)for(A=P;A<D;A++)C.push(A)}else!w&&ci.isPlainObject(d)?$4(d,x,b,i):T?k&&_?(u&&(l.calc=!0),(u||i.newDataRevision)&&h()):k!==_?l.calc=!0:h():k&&_?(d.length!==x.length||String(d)!==String(x))&&h():h()}}}for(a in t)if(!(a in e||a.charAt(0)==="_"||typeof t[a]=="function"))if(n=s(r.concat(a)),v(n)&&Array.isArray(t[a])){l.calc=!0;return}else h()}function N7(e,t){var r;for(r in e)if(r.charAt(0)!=="_"){var i=e[r],n=t[r];if(i!==n)if(ci.isPlainObject(i)&&ci.isPlainObject(n)){if(N7(i,n))return!0}else if(Array.isArray(i)&&Array.isArray(n)){if(i.length!==n.length)return!0;for(var a=0;a<i.length;a++)if(i[a]!==n[a])if(ci.isPlainObject(i[a])&&ci.isPlainObject(n[a])){if(N7(i[a],n[a]))return!0}else return!0}else return!0}}function dct(e,t,r){if(e=ci.getGraphDiv(e),!ci.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var i=e._transitionData;i._frameQueue||(i._frameQueue=[]),r=Ta.supplyAnimationDefaults(r);var n=r.transition,a=r.frame;i._frameWaitingCnt===void 0&&(i._frameWaitingCnt=0);function o(u){return Array.isArray(n)?u>=n.length?n[0]:n[u]:n}function s(u){return Array.isArray(a)?u>=a.length?a[0]:a[u]:a}function l(u,f){var c=0;return function(){if(u&&++c===f)return u()}}return new Promise(function(u,f){function c(){if(i._frameQueue.length!==0){for(;i._frameQueue.length;){var P=i._frameQueue.pop();P.onInterrupt&&P.onInterrupt()}e.emit("plotly_animationinterrupted",[])}}function h(P){if(P.length!==0){for(var D=0;D<P.length;D++){var q;P[D].type==="byname"?q=Ta.computeFrame(e,P[D].name):q=P[D].data;var O=s(D),U=o(D);U.duration=Math.min(U.duration,O.duration);var B={frame:q,name:P[D].name,frameOpts:O,transitionOpts:U};D===P.length-1&&(B.onComplete=l(u,2),B.onInterrupt=f),i._frameQueue.push(B)}r.mode==="immediate"&&(i._lastFrameAt=-1/0),i._animationRaf||x()}}function v(){e.emit("plotly_animated"),window.cancelAnimationFrame(i._animationRaf),i._animationRaf=null}function d(){i._currentFrame&&i._currentFrame.onComplete&&i._currentFrame.onComplete();var P=i._currentFrame=i._frameQueue.shift();if(P){var D=P.name?P.name.toString():null;e._fullLayout._currentFrame=D,i._lastFrameAt=Date.now(),i._timeToNext=P.frameOpts.duration,Ta.transition(e,P.frame.data,P.frame.layout,nf.coerceTraceIndices(e,P.frame.traces),P.frameOpts,P.transitionOpts).then(function(){P.onComplete&&P.onComplete()}),e.emit("plotly_animatingframe",{name:D,frame:P.frame,animation:{frame:P.frameOpts,transition:P.transitionOpts}})}else v()}function x(){e.emit("plotly_animating"),i._lastFrameAt=-1/0,i._timeToNext=0,i._runningTransitions=0,i._currentFrame=null;var P=function(){i._animationRaf=window.requestAnimationFrame(P),Date.now()-i._lastFrameAt>i._timeToNext&&d()};P()}var b=0;function p(P){return Array.isArray(n)?b>=n.length?P.transitionOpts=n[b]:P.transitionOpts=n[0]:P.transitionOpts=n,b++,P}var w,A,T=[],k=t==null,_=Array.isArray(t),E=!k&&!_&&ci.isPlainObject(t);if(E)T.push({type:"object",data:p(ci.extendFlat({},t))});else if(k||["string","number"].indexOf(typeof t)!==-1)for(w=0;w<i._frames.length;w++)A=i._frames[w],A&&(k||String(A.group)===String(t))&&T.push({type:"byname",name:String(A.name),data:p({name:A.name})});else if(_)for(w=0;w<t.length;w++){var S=t[w];["number","string"].indexOf(typeof S)!==-1?(S=String(S),T.push({type:"byname",name:S,data:p({name:S})})):ci.isPlainObject(S)&&T.push({type:"object",data:p(ci.extendFlat({},S))})}for(w=0;w<T.length;w++)if(A=T[w],A.type==="byname"&&!i._frameHash[A.data.name]){ci.warn('animate failure: frame not found: "'+A.data.name+'"'),f();return}["next","immediate"].indexOf(r.mode)!==-1&&c(),r.direction==="reverse"&&T.reverse();var g=e._fullLayout._currentFrame;if(g&&r.fromcurrent){var C=-1;for(w=0;w<T.length;w++)if(A=T[w],A.type==="byname"&&A.name===g){C=w;break}if(C>0&&C<T.length-1){var M=[];for(w=0;w<T.length;w++)A=T[w],(T[w].type!=="byname"||w>C)&&M.push(A);T=M}}T.length>0?h(T):(e.emit("plotly_animated"),u())})}function pct(e,t,r){if(e=ci.getGraphDiv(e),t==null)return Promise.resolve();if(!ci.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var i,n,a,o,s=e._transitionData._frames,l=e._transitionData._frameHash;if(!Array.isArray(t))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t);var u=s.length+t.length*2,f=[],c={};for(i=t.length-1;i>=0;i--)if(ci.isPlainObject(t[i])){var h=t[i].name,v=(l[h]||c[h]||{}).name,d=t[i].name,x=l[v]||c[v];v&&d&&typeof d=="number"&&x&&z7<jue&&(z7++,ci.warn('addFrames: overwriting frame "'+(l[v]||c[v]).name+'" with a frame whose name of type "number" also equates to "'+v+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),z7===jue&&ci.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),c[h]={name:h},f.push({frame:Ta.supplyFrameDefaults(t[i]),index:r&&r[i]!==void 0&&r[i]!==null?r[i]:u+i})}f.sort(function(E,S){return E.index>S.index?-1:E.index<S.index?1:0});var b=[],p=[],w=s.length;for(i=f.length-1;i>=0;i--){if(n=f[i].frame,typeof n.name=="number"&&ci.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!n.name)for(;l[n.name="frame "+e._transitionData._counter++];);if(l[n.name]){for(a=0;a<s.length&&(s[a]||{}).name!==n.name;a++);b.push({type:"replace",index:a,value:n}),p.unshift({type:"replace",index:a,value:s[a]})}else o=Math.max(0,Math.min(f[i].index,w)),b.push({type:"insert",index:o,value:n}),p.unshift({type:"delete",index:o}),w++}var A=Ta.modifyFrames,T=Ta.modifyFrames,k=[e,p],_=[e,b];return Mv&&Mv.add(e,A,k,T,_),Ta.modifyFrames(e,b)}function gct(e,t){if(e=ci.getGraphDiv(e),!ci.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);var r,i,n=e._transitionData._frames,a=[],o=[];if(!t)for(t=[],r=0;r<n.length;r++)t.push(r);for(t=t.slice(),t.sort(),r=t.length-1;r>=0;r--)i=t[r],a.push({type:"delete",index:i}),o.unshift({type:"insert",index:i,value:n[i]});var s=Ta.modifyFrames,l=Ta.modifyFrames,u=[e,o],f=[e,a];return Mv&&Mv.add(e,s,u,l,f),Ta.modifyFrames(e,a)}function yct(e){e=ci.getGraphDiv(e);var t=e._fullLayout||{},r=e._fullData||[];return Ta.cleanPlot([],{},r,t),Ta.purge(e),O7.purge(e),t._container&&t._container.remove(),delete e._context,e}function mct(e){var t=e._fullLayout,r=e.getBoundingClientRect();if(!ci.equalDomRects(r,t._lastBBox)){var i=t._invTransform=ci.inverseTransformMatrix(ci.getFullTransformMatrix(e));t._invScaleX=Math.sqrt(i[0][0]*i[0][0]+i[0][1]*i[0][1]+i[0][2]*i[0][2]),t._invScaleY=Math.sqrt(i[1][0]*i[1][0]+i[1][1]*i[1][1]+i[1][2]*i[1][2]),t._lastBBox=r}}function xct(e){var t=X4.select(e),r=e._fullLayout;if(r._calcInverseTransform=mct,r._calcInverseTransform(e),r._container=t.selectAll(".plot-container").data([0]),r._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),r._paperdiv=r._container.selectAll(".svg-container").data([0]),r._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),r._glcontainer=r._paperdiv.selectAll(".gl-container").data([{}]),r._glcontainer.enter().append("div").classed("gl-container",!0),r._paperdiv.selectAll(".main-svg").remove(),r._paperdiv.select(".modebar-container").remove(),r._paper=r._paperdiv.insert("svg",":first-child").classed("main-svg",!0),r._toppaper=r._paperdiv.append("svg").classed("main-svg",!0),r._modebardiv=r._paperdiv.append("div"),delete r._modeBar,r._hoverpaper=r._paperdiv.append("svg").classed("main-svg",!0),!r._uid){var i={};X4.selectAll("defs").each(function(){this.id&&(i[this.id.split("-")[1]]=1)}),r._uid=ci.randstr(i)}r._paperdiv.selectAll(".main-svg").attr(Zft.svgAttrs),r._defs=r._paper.append("defs").attr("id","defs-"+r._uid),r._clips=r._defs.append("g").classed("clips",!0),r._topdefs=r._toppaper.append("defs").attr("id","topdefs-"+r._uid),r._topclips=r._topdefs.append("g").classed("clips",!0),r._bgLayer=r._paper.append("g").classed("bglayer",!0),r._draggers=r._paper.append("g").classed("draglayer",!0);var n=r._paper.append("g").classed("layer-below",!0);r._imageLowerLayer=n.append("g").classed("imagelayer",!0),r._shapeLowerLayer=n.append("g").classed("shapelayer",!0),r._cartesianlayer=r._paper.append("g").classed("cartesianlayer",!0),r._polarlayer=r._paper.append("g").classed("polarlayer",!0),r._smithlayer=r._paper.append("g").classed("smithlayer",!0),r._ternarylayer=r._paper.append("g").classed("ternarylayer",!0),r._geolayer=r._paper.append("g").classed("geolayer",!0),r._funnelarealayer=r._paper.append("g").classed("funnelarealayer",!0),r._pielayer=r._paper.append("g").classed("pielayer",!0),r._iciclelayer=r._paper.append("g").classed("iciclelayer",!0),r._treemaplayer=r._paper.append("g").classed("treemaplayer",!0),r._sunburstlayer=r._paper.append("g").classed("sunburstlayer",!0),r._indicatorlayer=r._toppaper.append("g").classed("indicatorlayer",!0),r._glimages=r._paper.append("g").classed("glimages",!0);var a=r._toppaper.append("g").classed("layer-above",!0);r._imageUpperLayer=a.append("g").classed("imagelayer",!0),r._shapeUpperLayer=a.append("g").classed("shapelayer",!0),r._selectionLayer=r._toppaper.append("g").classed("selectionlayer",!0),r._infolayer=r._toppaper.append("g").classed("infolayer",!0),r._menulayer=r._toppaper.append("g").classed("menulayer",!0),r._zoomlayer=r._toppaper.append("g").classed("zoomlayer",!0),r._hoverlayer=r._hoverpaper.append("g").classed("hoverlayer",!0),r._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),e.emit("plotly_framework")}Vo.animate=dct;Vo.addFrames=pct;Vo.deleteFrames=gct;Vo.addTraces=sfe;Vo.deleteTraces=lfe;Vo.extendTraces=afe;Vo.moveTraces=B7;Vo.prependTraces=ofe;Vo.newPlot=tct;Vo._doPlot=Jft;Vo.purge=yct;Vo.react=cct;Vo.redraw=ect;Vo.relayout=wM;Vo.restyle=K4;Vo.setPlotConfig=Qft;Vo.update=Q4;Vo._guiRelayout=U7(wM);Vo._guiRestyle=U7(K4);Vo._guiUpdate=U7(Q4);Vo._storeDirectGUIEdit=act});var Zg=ie(o0=>{"use strict";var _ct=Ti();o0.getDelay=function(e){return e._has&&(e._has("gl3d")||e._has("gl2d")||e._has("mapbox"))?500:0};o0.getRedrawFunc=function(e){return function(){_ct.getComponentMethod("colorbar","draw")(e)}};o0.encodeSVG=function(e){return"data:image/svg+xml,"+encodeURIComponent(e)};o0.encodeJSON=function(e){return"data:application/json,"+encodeURIComponent(e)};var yfe=window.URL||window.webkitURL;o0.createObjectURL=function(e){return yfe.createObjectURL(e)};o0.revokeObjectURL=function(e){return yfe.revokeObjectURL(e)};o0.createBlob=function(e,t){if(t==="svg")return new window.Blob([e],{type:"image/svg+xml;charset=utf-8"});if(t==="full-json")return new window.Blob([e],{type:"application/json;charset=utf-8"});var r=bct(window.atob(e));return new window.Blob([r],{type:"image/"+t})};o0.octetStream=function(e){document.location.href="data:application/octet-stream"+e};function bct(e){for(var t=e.length,r=new ArrayBuffer(t),i=new Uint8Array(r),n=0;n<t;n++)i[n]=e.charCodeAt(n);return r}o0.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/;o0.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."});var iL=ie((_nr,mfe)=>{"use strict";var H7=Mi(),wct=Zt(),Tct=oa(),Act=_i(),nL=Cd(),V7=/"/g,AM="TOBESTRIPPED",Mct=new RegExp('("'+AM+")|("+AM+'")',"g");function Sct(e){var t=H7.select("body").append("div").style({display:"none"}).html(""),r=e.replace(/(&[^;]*;)/gi,function(i){return i==="&lt;"?"&#60;":i==="&rt;"?"&#62;":i.indexOf("<")!==-1||i.indexOf(">")!==-1?"":t.html(i).text()});return t.remove(),r}function Ect(e){return e.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}mfe.exports=function(t,r,i){var n=t._fullLayout,a=n._paper,o=n._toppaper,s=n.width,l=n.height,u;a.insert("rect",":first-child").call(Tct.setRect,0,0,s,l).call(Act.fill,n.paper_bgcolor);var f=n._basePlotModules||[];for(u=0;u<f.length;u++){var c=f[u];c.toSVG&&c.toSVG(t)}if(o){var h=o.node().childNodes,v=Array.prototype.slice.call(h);for(u=0;u<v.length;u++){var d=v[u];d.childNodes.length&&a.node().appendChild(d)}}n._draggers&&n._draggers.remove(),a.node().style.background="",a.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var b=H7.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){b.remove();return}else b.style({visibility:null,display:null});var p=this.style.fontFamily;p&&p.indexOf('"')!==-1&&b.style("font-family",p.replace(V7,AM));var w=this.style.fontWeight;w&&(w==="normal"||w==="400")&&b.style("font-weight",void 0);var A=this.style.fontStyle;A&&A==="normal"&&b.style("font-style",void 0);var T=this.style.fontVariant;T&&T==="normal"&&b.style("font-variant",void 0)}),a.selectAll(".gradient_filled,.pattern_filled").each(function(){var b=H7.select(this),p=this.style.fill;p&&p.indexOf("url(")!==-1&&b.style("fill",p.replace(V7,AM));var w=this.style.stroke;w&&w.indexOf("url(")!==-1&&b.style("stroke",w.replace(V7,AM))}),(r==="pdf"||r==="eps")&&a.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),a.node().setAttributeNS(nL.xmlns,"xmlns",nL.svg),a.node().setAttributeNS(nL.xmlns,"xmlns:xlink",nL.xlink),r==="svg"&&i&&(a.attr("width",i*s),a.attr("height",i*l),a.attr("viewBox","0 0 "+s+" "+l));var x=new window.XMLSerializer().serializeToString(a.node());return x=Sct(x),x=Ect(x),x=x.replace(Mct,"'"),wct.isIE()&&(x=x.replace(/"/gi,"'"),x=x.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),x=x.replace(/(\\')/gi,'"')),x}});var aL=ie((bnr,_fe)=>{"use strict";var xfe=Zt(),kct=cx().EventEmitter,N2=Zg();function Cct(e){var t=e.emitter||new kct,r=new Promise(function(i,n){var a=window.Image,o=e.svg,s=e.format||"png";if(xfe.isIE()&&s!=="svg"){var l=new Error(N2.MSG_IE_BAD_FORMAT);return n(l),e.promise?r:t.emit("error",l)}var u=e.canvas,f=e.scale||1,c=e.width||300,h=e.height||150,v=f*c,d=f*h,x=u.getContext("2d",{willReadFrequently:!0}),b=new a,p,w;s==="svg"||xfe.isSafari()?w=N2.encodeSVG(o):(p=N2.createBlob(o,"svg"),w=N2.createObjectURL(p)),u.width=v,u.height=d,b.onload=function(){var A;switch(p=null,N2.revokeObjectURL(w),s!=="svg"&&x.drawImage(b,0,0,v,d),s){case"jpeg":A=u.toDataURL("image/jpeg");break;case"png":A=u.toDataURL("image/png");break;case"webp":A=u.toDataURL("image/webp");break;case"svg":A=w;break;default:var T="Image format is not jpeg, png, svg or webp.";if(n(new Error(T)),!e.promise)return t.emit("error",T)}i(A),e.promise||t.emit("success",A)},b.onerror=function(A){if(p=null,N2.revokeObjectURL(w),n(A),!e.promise)return t.emit("error",A)},b.src=w});return e.promise?r:t}_fe.exports=Cct});var Y7=ie((wnr,Tfe)=>{"use strict";var bfe=la(),wfe=rL(),Lct=js(),Z0=Zt(),MM=Zg(),Pct=iL(),Rct=aL(),Dct=Mk().version,G7={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function Ict(e,t){t=t||{};var r,i,n,a;Z0.isPlainObject(e)?(r=e.data||[],i=e.layout||{},n=e.config||{},a={}):(e=Z0.getGraphDiv(e),r=Z0.extendDeep([],e.data),i=Z0.extendDeep({},e.layout),n=e._context,a=e._fullLayout||{});function o(_){return!(_ in t)||Z0.validate(t[_],G7[_])}if(!o("width")&&t.width!==null||!o("height")&&t.height!==null)throw new Error("Height and width should be pixel values.");if(!o("format"))throw new Error("Export format is not "+Z0.join2(G7.format.values,", "," or ")+".");var s={};function l(_,E){return Z0.coerce(t,s,G7,_,E)}var u=l("format"),f=l("width"),c=l("height"),h=l("scale"),v=l("setBackground"),d=l("imageDataOnly"),x=document.createElement("div");x.style.position="absolute",x.style.left="-5000px",document.body.appendChild(x);var b=Z0.extendFlat({},i);f?b.width=f:t.width===null&&bfe(a.width)&&(b.width=a.width),c?b.height=c:t.height===null&&bfe(a.height)&&(b.height=a.height);var p=Z0.extendFlat({},n,{_exportedPlot:!0,staticPlot:!0,setBackground:v}),w=MM.getRedrawFunc(x);function A(){return new Promise(function(_){setTimeout(_,MM.getDelay(x._fullLayout))})}function T(){return new Promise(function(_,E){var S=Pct(x,u,h),g=x._fullLayout.width,C=x._fullLayout.height;function M(){wfe.purge(x),document.body.removeChild(x)}if(u==="full-json"){var P=Lct.graphJson(x,!1,"keepdata","object",!0,!0);return P.version=Dct,P=JSON.stringify(P),M(),_(d?P:MM.encodeJSON(P))}if(M(),u==="svg")return _(d?S:MM.encodeSVG(S));var D=document.createElement("canvas");D.id=Z0.randstr(),Rct({format:u,width:g,height:C,scale:h,canvas:D,svg:S,promise:!0}).then(_).catch(E)})}function k(_){return d?_.replace(MM.IMAGE_URL_PREFIX,""):_}return new Promise(function(_,E){wfe.newPlot(x,r,b,p).then(w).then(A).then(T).then(function(S){_(k(S))}).catch(function(S){E(S)})})}Tfe.exports=Ict});var Efe=ie((Tnr,Sfe)=>{"use strict";var yp=Zt(),Fct=js(),qct=sm(),zct=ix().dfltConfig,gp=yp.isPlainObject,Em=Array.isArray,Afe=yp.isArrayOrTypedArray;Sfe.exports=function(t,r){t===void 0&&(t=[]),r===void 0&&(r={});var i=qct.get(),n=[],a={_context:yp.extendFlat({},zct)},o,s;Em(t)?(a.data=yp.extendDeep([],t),o=t):(a.data=[],o=[],n.push(af("array","data"))),gp(r)?(a.layout=yp.extendDeep({},r),s=r):(a.layout={},s={},arguments.length>1&&n.push(af("object","layout"))),Fct.supplyDefaults(a);for(var l=a._fullData,u=o.length,f=0;f<u;f++){var c=o[f],h=["data",f];if(!gp(c)){n.push(af("object",h));continue}var v=l[f],d=v.type,x=i.traces[d].attributes;x.type={valType:"enumerated",values:[d]},v.visible===!1&&c.visible!==!1&&n.push(af("invisible",h)),SM(c,v,x,n,h);var b=c.transforms,p=v.transforms;if(b){Em(b)||n.push(af("array",h,["transforms"])),h.push("transforms");for(var w=0;w<b.length;w++){var A=["transforms",w],T=b[w].type;if(!gp(b[w])){n.push(af("object",h,A));continue}var k=i.transforms[T]?i.transforms[T].attributes:{};k.type={valType:"enumerated",values:Object.keys(i.transforms)},SM(b[w],p[w],k,n,h,A)}}}var _=a._fullLayout,E=Oct(i,l);return SM(s,_,E,n,"layout"),n.length===0?void 0:n};function SM(e,t,r,i,n,a){a=a||[];for(var o=Object.keys(e),s=0;s<o.length;s++){var l=o[s];if(l!=="transforms"){var u=a.slice();u.push(l);var f=e[l],c=t[l],h=Uct(r,l),v=(h||{}).valType,d=v==="info_array",x=v==="colorscale",b=(h||{}).items;if(!Nct(r,l))i.push(af("schema",n,u));else if(gp(f)&&gp(c)&&v!=="any")SM(f,c,h,i,n,u);else if(d&&Em(f)){f.length>c.length&&i.push(af("unused",n,u.concat(c.length)));var p=c.length,w=Array.isArray(b);w&&(p=Math.min(p,b.length));var A,T,k,_,E;if(h.dimensions===2)for(T=0;T<p;T++)if(Em(f[T])){f[T].length>c[T].length&&i.push(af("unused",n,u.concat(T,c[T].length)));var S=c[T].length;for(A=0;A<(w?Math.min(S,b[T].length):S);A++)k=w?b[T][A]:b,_=f[T][A],E=c[T][A],yp.validate(_,k)?E!==_&&E!==+_&&i.push(af("dynamic",n,u.concat(T,A),_,E)):i.push(af("value",n,u.concat(T,A),_))}else i.push(af("array",n,u.concat(T),f[T]));else for(T=0;T<p;T++)k=w?b[T]:b,_=f[T],E=c[T],yp.validate(_,k)?E!==_&&E!==+_&&i.push(af("dynamic",n,u.concat(T),_,E)):i.push(af("value",n,u.concat(T),_))}else if(h.items&&!d&&Em(f)){var g=b[Object.keys(b)[0]],C=[],M,P;for(M=0;M<c.length;M++){var D=c[M]._index||M;if(P=u.slice(),P.push(D),gp(f[D])&&gp(c[M])){C.push(D);var q=f[D],O=c[M];gp(q)&&q.visible!==!1&&O.visible===!1?i.push(af("invisible",n,P)):SM(q,O,g,i,n,P)}}for(M=0;M<f.length;M++)P=u.slice(),P.push(M),gp(f[M])?C.indexOf(M)===-1&&i.push(af("unused",n,P)):i.push(af("object",n,P,f[M]))}else!gp(f)&&gp(c)?i.push(af("object",n,u,f)):!Afe(f)&&Afe(c)&&!d&&!x?i.push(af("array",n,u,f)):l in t?yp.validate(f,h)?h.valType==="enumerated"&&(h.coerceNumber&&f!==+c||f!==c)&&i.push(af("dynamic",n,u,f,c)):i.push(af("value",n,u,f)):i.push(af("unused",n,u,f))}}return i}function Oct(e,t){for(var r=e.layout.layoutAttributes,i=0;i<t.length;i++){var n=t[i],a=e.traces[n.type],o=a.layoutAttributes;o&&(n.subplot?yp.extendFlat(r[a.attributes.subplot.dflt],o):yp.extendFlat(r,o))}return r}var Bct={object:function(e,t){var r;return e==="layout"&&t===""?r="The layout argument":e[0]==="data"&&t===""?r="Trace "+e[1]+" in the data argument":r=Ox(e)+"key "+t,r+" must be linked to an object container"},array:function(e,t){var r;return e==="data"?r="The data argument":r=Ox(e)+"key "+t,r+" must be linked to an array container"},schema:function(e,t){return Ox(e)+"key "+t+" is not part of the schema"},unused:function(e,t,r){var i=gp(r)?"container":"key";return Ox(e)+i+" "+t+" did not get coerced"},dynamic:function(e,t,r,i){return[Ox(e)+"key",t,"(set to '"+r+"')","got reset to","'"+i+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?Ox(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,r){return[Ox(e)+"key "+t,"is set to an invalid value ("+r+")"].join(" ")}};function Ox(e){return Em(e)?"In data trace "+e[1]+", ":"In "+e+", "}function af(e,t,r,i,n){r=r||"";var a,o;Em(t)?(a=t[0],o=t[1]):(a=t,o=null);var s=Hct(r),l=Bct[e](t,s,i,n);return yp.log(l),{code:e,container:a,trace:o,path:r,astr:s,msg:l}}function Nct(e,t){var r=Mfe(t),i=r.keyMinusId,n=r.id;return i in e&&e[i]._isSubplotObj&&n?!0:t in e}function Uct(e,t){if(t in e)return e[t];var r=Mfe(t);return e[r.keyMinusId]}var Vct=yp.counterRegex("([a-z]+)");function Mfe(e){var t=e.match(Vct);return{keyMinusId:t&&t[1],id:t&&t[2]}}function Hct(e){if(!Em(e))return String(e);for(var t="",r=0;r<e.length;r++){var i=e[r];typeof i=="number"?t=t.substr(0,t.length-1)+"["+i+"]":t+=i,r<e.length-1&&(t+=".")}return t}});var Lfe=ie((Anr,Cfe)=>{"use strict";var kfe=Zt(),EM=Zg();function Gct(e,t,r){var i=document.createElement("a"),n="download"in i,a=new Promise(function(o,s){var l,u;if(kfe.isIE())return l=EM.createBlob(e,"svg"),window.navigator.msSaveBlob(l,t),l=null,o(t);if(n)return l=EM.createBlob(e,r),u=EM.createObjectURL(l),i.href=u,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),EM.revokeObjectURL(u),l=null,o(t);if(kfe.isSafari()){var f=r==="svg"?",":";base64,";return EM.octetStream(f+encodeURIComponent(e)),o(t)}s(new Error("download error"))});return a}Cfe.exports=Gct});var X7=ie((Mnr,Pfe)=>{"use strict";var W7=Zt(),Yct=Y7(),Wct=Lfe(),Xct=Zg();function Zct(e,t){var r;return W7.isPlainObject(e)||(r=W7.getGraphDiv(e)),t=t||{},t.format=t.format||"png",t.width=t.width||null,t.height=t.height||null,t.imageDataOnly=!0,new Promise(function(i,n){r&&r._snapshotInProgress&&n(new Error("Snapshotting already in progress.")),W7.isIE()&&t.format!=="svg"&&n(new Error(Xct.MSG_IE_BAD_FORMAT)),r&&(r._snapshotInProgress=!0);var a=Yct(e,t),o=t.filename||e.fn||"newplot";o+="."+t.format.replace("-","."),a.then(function(s){return r&&(r._snapshotInProgress=!1),Wct(s,o,t.format)}).then(function(s){i(s)}).catch(function(s){r&&(r._snapshotInProgress=!1),n(s)})})}Pfe.exports=Zct});var qfe=ie(Z7=>{"use strict";var ud=Zt(),fd=ud.isPlainObject,Rfe=sm(),Dfe=js(),jct=rs(),Ife=ko(),Ffe=ix().dfltConfig;Z7.makeTemplate=function(e){e=ud.isPlainObject(e)?e:ud.getGraphDiv(e),e=ud.extendDeep({_context:Ffe},{data:e.data,layout:e.layout}),Dfe.supplyDefaults(e);var t=e.data||[],r=e.layout||{};r._basePlotModules=e._fullLayout._basePlotModules,r._modules=e._fullLayout._modules;var i={data:{},layout:{}};t.forEach(function(v){var d={};kM(v,d,Jct.bind(null,v));var x=ud.coerce(v,{},jct,"type"),b=i.data[x];b||(b=i.data[x]=[]),b.push(d)}),kM(r,i.layout,Kct.bind(null,r)),delete i.layout.template;var n=r.template;if(fd(n)){var a=n.layout,o,s,l,u,f,c;fd(a)&&oL(a,i.layout);var h=n.data;if(fd(h)){for(s in i.data)if(l=h[s],Array.isArray(l)){for(f=i.data[s],c=f.length,u=l.length,o=0;o<c;o++)oL(l[o%u],f[o]);for(o=c;o<u;o++)f.push(ud.extendDeep({},l[o]))}for(s in h)s in i.data||(i.data[s]=ud.extendDeep([],h[s]))}}return i};function oL(e,t){e=ud.extendDeep({},e);var r=Object.keys(e).sort(),i,n;function a(f,c,h){if(fd(c)&&fd(f))oL(f,c);else if(Array.isArray(c)&&Array.isArray(f)){var v=Ife.arrayTemplater({_template:e},h);for(n=0;n<c.length;n++){var d=c[n],x=v.newItem(d)._template;x&&oL(x,d)}var b=v.defaultItems();for(n=0;n<b.length;n++)c.push(b[n]._template);for(n=0;n<c.length;n++)delete c[n].templateitemname}}for(i=0;i<r.length;i++){var o=r[i],s=e[o];if(o in t?a(s,t[o],o):t[o]=s,sL(o)===o)for(var l in t){var u=sL(l);l!==u&&u===o&&!(l in e)&&a(s,t[l],o)}}}function sL(e){return e.replace(/[0-9]+$/,"")}function kM(e,t,r,i,n){var a=n&&r(n);for(var o in e){var s=e[o],l=mp(e,o,i),u=mp(e,o,n),f=r(u);if(!f){var c=sL(o);c!==o&&(u=mp(e,c,n),f=r(u))}if(!(a&&a===f)&&!(!f||f._noTemplating||f.valType==="data_array"||f.arrayOk&&Array.isArray(s)))if(!f.valType&&fd(s))kM(s,t,r,l,u);else if(f._isLinkedToArray&&Array.isArray(s))for(var h=!1,v=0,d={},x=0;x<s.length;x++){var b=s[x];if(fd(b)){var p=b.name;if(p)d[p]||(kM(b,t,r,mp(s,v,l),mp(s,v,u)),v++,d[p]=1);else if(!h){var w=Ife.arrayDefaultKey(o),A=mp(e,w,i),T=mp(s,v,l);kM(b,t,r,T,mp(s,v,u));var k=ud.nestedProperty(t,T),_=ud.nestedProperty(t,A);_.set(k.get()),k.set(null),h=!0}}}else{var E=ud.nestedProperty(t,l);E.set(s)}}}function Kct(e,t){return Rfe.getLayoutValObject(e,ud.nestedProperty({},t).parts)}function Jct(e,t){return Rfe.getTraceValObject(e,ud.nestedProperty({},t).parts)}function mp(e,t,r){var i;return r?Array.isArray(e)?i=r+"["+t+"]":i=r+"."+t:i=t,i}Z7.validateTemplate=function(e,t){var r=ud.extendDeep({},{_context:Ffe,data:e.data,layout:e.layout}),i=r.layout||{};fd(t)||(t=i.template||{});var n=t.layout,a=t.data,o=[];r.layout=i,r.layout.template=t,Dfe.supplyDefaults(r);var s=r._fullLayout,l=r._fullData,u={};function f(A,T){for(var k in A)if(k.charAt(0)!=="_"&&fd(A[k])){var _=sL(k),E=[],S;for(S=0;S<T.length;S++)E.push(mp(A,k,T[S])),_!==k&&E.push(mp(A,_,T[S]));for(S=0;S<E.length;S++)u[E[S]]=1;f(A[k],E)}}function c(A,T){for(var k in A)if(k.indexOf("defaults")===-1&&fd(A[k])){var _=mp(A,k,T);u[_]?c(A[k],_):o.push({code:"unused",path:_})}}if(fd(n)?(f(s,["layout"]),c(n,"layout")):o.push({code:"layout"}),!fd(a))o.push({code:"data"});else{for(var h={},v,d=0;d<l.length;d++){var x=l[d];v=x.type,h[v]=(h[v]||0)+1,x._fullInput._template||o.push({code:"missing",index:x._fullInput.index,traceType:v})}for(v in a){var b=a[v].length,p=h[v]||0;b>p?o.push({code:"unused",traceType:v,templateCount:b,dataCount:p}):p>b&&o.push({code:"reused",traceType:v,templateCount:b,dataCount:p})}}function w(A,T){for(var k in A)if(k.charAt(0)!=="_"){var _=A[k],E=mp(A,k,T);fd(_)?(Array.isArray(A)&&_._template===!1&&_.templateitemname&&o.push({code:"missing",path:E,templateitemname:_.templateitemname}),w(_,E)):Array.isArray(_)&&Qct(_)&&w(_,E)}}if(w({data:l,layout:s},""),o.length)return o.map($ct)};function Qct(e){for(var t=0;t<e.length;t++)if(fd(e[t]))return!0}function $ct(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":e.path?t="There are no templates for item "+e.path+" with name "+e.templateitemname:t="There are no templates for trace "+e.index+", of type "+e.traceType+".";break;case"unused":e.path?t="The template item at "+e.path+" was not used in constructing the plot.":e.dataCount?t="Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type.":t="The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data.";break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type.";break}return e.msg=t,e}});var Ofe=ie(wl=>{"use strict";var kf=rL();wl._doPlot=kf._doPlot;wl.newPlot=kf.newPlot;wl.restyle=kf.restyle;wl.relayout=kf.relayout;wl.redraw=kf.redraw;wl.update=kf.update;wl._guiRestyle=kf._guiRestyle;wl._guiRelayout=kf._guiRelayout;wl._guiUpdate=kf._guiUpdate;wl._storeDirectGUIEdit=kf._storeDirectGUIEdit;wl.react=kf.react;wl.extendTraces=kf.extendTraces;wl.prependTraces=kf.prependTraces;wl.addTraces=kf.addTraces;wl.deleteTraces=kf.deleteTraces;wl.moveTraces=kf.moveTraces;wl.purge=kf.purge;wl.addFrames=kf.addFrames;wl.deleteFrames=kf.deleteFrames;wl.animate=kf.animate;wl.setPlotConfig=kf.setPlotConfig;var eht=dA().getGraphDiv,tht=w4().eraseActiveShape;wl.deleteActiveShape=function(e){return tht(eht(e))};wl.toImage=Y7();wl.validate=Efe();wl.downloadImage=X7();var zfe=qfe();wl.makeTemplate=zfe.makeTemplate;wl.validateTemplate=zfe.validateTemplate});var U2=ie((knr,Bfe)=>{"use strict";var j7=Zt(),rht=Ti();Bfe.exports=function(t,r,i,n){var a=n("x"),o=n("y"),s,l=rht.getComponentMethod("calendars","handleTraceDefaults");if(l(t,r,["x","y"],i),a){var u=j7.minRowLength(a);o?s=Math.min(u,j7.minRowLength(o)):(s=u,n("y0"),n("dy"))}else{if(!o)return 0;s=j7.minRowLength(o),n("x0"),n("dx")}return r._length=s,s}});var s0=ie((Cnr,Vfe)=>{"use strict";var Nfe=Zt().dateTick0,nht=eo(),iht=nht.ONEWEEK;function Ufe(e,t){return e%iht===0?Nfe(t,1):Nfe(t,0)}Vfe.exports=function(t,r,i,n,a){if(a||(a={x:!0,y:!0}),a.x){var o=n("xperiod");o&&(n("xperiod0",Ufe(o,r.xcalendar)),n("xperiodalignment"))}if(a.y){var s=n("yperiod");s&&(n("yperiod0",Ufe(s,r.ycalendar)),n("yperiodalignment"))}}});var Yfe=ie((Lnr,Gfe)=>{"use strict";var Hfe=["orientation","groupnorm","stackgaps"];Gfe.exports=function(t,r,i,n){var a=i._scatterStackOpts,o=n("stackgroup");if(o){var s=r.xaxis+r.yaxis,l=a[s];l||(l=a[s]={});var u=l[o],f=!1;u?u.traces.push(r):(u=l[o]={traceIndices:[],traces:[r]},f=!0);for(var c={orientation:r.x&&!r.y?"h":"v"},h=0;h<Hfe.length;h++){var v=Hfe[h],d=v+"Found";if(!u[d]){var x=t[v]!==void 0,b=v==="orientation";if((x||f)&&(u[v]=n(v,c[v]),b&&(u.fillDflt=u[v]==="h"?"tonextx":"tonexty"),x&&(u[d]=!0,!f&&(delete u.traces[0][v],b))))for(var p=0;p<u.traces.length-1;p++){var w=u.traces[p];w._input.fill!==w.fill&&(w.fill=u.fillDflt)}}}return u}}});var xp=ie((Pnr,jfe)=>{"use strict";var Wfe=_i(),Xfe=Hh().hasColorscale,Zfe=$f(),aht=Ks();jfe.exports=function(t,r,i,n,a,o){var s=aht.isBubble(t),l=(t.line||{}).color,u;if(o=o||{},l&&(i=l),a("marker.symbol"),a("marker.opacity",s?.7:1),a("marker.size"),o.noAngle||(a("marker.angle"),o.noAngleRef||a("marker.angleref"),o.noStandOff||a("marker.standoff")),a("marker.color",i),Xfe(t,"marker")&&Zfe(t,r,n,a,{prefix:"marker.",cLetter:"c"}),o.noSelect||(a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size")),o.noLine||(l&&!Array.isArray(l)&&r.marker.color!==l?u=l:s?u=Wfe.background:u=Wfe.defaultLine,a("marker.line.color",u),Xfe(t,"marker.line")&&Zfe(t,r,n,a,{prefix:"marker.line.",cLetter:"c"}),a("marker.line.width",s?1:0)),s&&(a("marker.sizeref"),a("marker.sizemin"),a("marker.sizemode")),o.gradient){var f=a("marker.gradient.type");f!=="none"&&a("marker.gradient.color")}}});var l0=ie((Rnr,Kfe)=>{"use strict";var oht=Zt().isArrayOrTypedArray,sht=Hh().hasColorscale,lht=$f();Kfe.exports=function(t,r,i,n,a,o){o||(o={});var s=(t.marker||{}).color;if(s&&s._inputArray&&(s=s._inputArray),a("line.color",i),sht(t,"line"))lht(t,r,n,a,{prefix:"line.",cLetter:"c"});else{var l=(oht(s)?!1:s)||i;a("line.color",l)}a("line.width"),o.noDash||a("line.dash"),o.backoff&&a("line.backoff")}});var V2=ie((Dnr,Jfe)=>{"use strict";Jfe.exports=function(t,r,i){var n=i("line.shape");n==="spline"&&i("line.smoothing")}});var u0=ie((Inr,Qfe)=>{"use strict";var uht=Zt();Qfe.exports=function(e,t,r,i,n){n=n||{},i("textposition"),uht.coerceFont(i,"textfont",n.font||r.font,n),n.noSelect||(i("selected.textfont.color"),i("unselected.textfont.color"))}});var j0=ie((Fnr,ece)=>{"use strict";var lL=_i(),$fe=Zt().isArrayOrTypedArray;function fht(e){for(var t=lL.interpolate(e[0][1],e[1][1],.5),r=2;r<e.length;r++){var i=lL.interpolate(e[r-1][1],e[r][1],.5);t=lL.interpolate(t,i,e[r-1][0]/e[r][0])}return t}ece.exports=function(t,r,i,n,a){a||(a={});var o=!1;if(r.marker){var s=r.marker.color,l=(r.marker.line||{}).color;s&&!$fe(s)?o=s:l&&!$fe(l)&&(o=l)}var u;if(a.moduleHasFillgradient){var f=n("fillgradient.type");if(f!=="none"){n("fillgradient.start"),n("fillgradient.stop");var c=n("fillgradient.colorscale");c&&(u=fht(c))}}n("fillcolor",lL.addOpacity((r.line||{}).color||o||u||i,.5))}});var ice=ie((qnr,nce)=>{"use strict";var tce=Zt(),cht=Ti(),hht=Bl(),vht=W0(),H2=Ks(),dht=U2(),pht=s0(),ght=Yfe(),yht=xp(),mht=l0(),rce=V2(),xht=u0(),_ht=j0(),bht=Zt().coercePattern;nce.exports=function(t,r,i,n){function a(v,d){return tce.coerce(t,r,hht,v,d)}var o=dht(t,r,n,a);if(o||(r.visible=!1),!!r.visible){pht(t,r,n,a),a("xhoverformat"),a("yhoverformat"),a("zorder");var s=ght(t,r,n,a);n.scattermode==="group"&&r.orientation===void 0&&a("orientation","v");var l=!s&&o<vht.PTS_LINESONLY?"lines+markers":"lines";a("text"),a("hovertext"),a("mode",l),H2.hasMarkers(r)&&yht(t,r,i,n,a,{gradient:!0}),H2.hasLines(r)&&(mht(t,r,i,n,a,{backoff:!0}),rce(t,r,a),a("connectgaps"),a("line.simplify")),H2.hasText(r)&&(a("texttemplate"),xht(t,r,n,a));var u=[];(H2.hasMarkers(r)||H2.hasText(r))&&(a("cliponaxis"),a("marker.maxdisplayed"),u.push("points")),a("fill",s?s.fillDflt:"none"),r.fill!=="none"&&(_ht(t,r,i,a,{moduleHasFillgradient:!0}),H2.hasLines(r)||rce(t,r,a),bht(a,"fillpattern",r.fillcolor,!1));var f=(r.line||{}).color,c=(r.marker||{}).color;(r.fill==="tonext"||r.fill==="toself")&&u.push("fills"),a("hoveron",u.join("+")||"points"),r.hoveron!=="fills"&&a("hovertemplate");var h=cht.getComponentMethod("errorbars","supplyDefaults");h(t,r,f||c||i,{axis:"y"}),h(t,r,f||c||i,{axis:"x",inherit:"y"}),tce.coerceSelectionMarkerOpacity(r,a)}}});var Bx=ie((znr,ace)=>{"use strict";var wht=Tm().getAxisGroup;ace.exports=function(t,r,i,n){var a=r.orientation,o=r[{v:"x",h:"y"}[a]+"axis"],s=wht(i,o)+a,l=i._alignmentOpts||{},u=n("alignmentgroup"),f=l[s];f||(f=l[s]={});var c=f[u];c?c.traces.push(r):c=f[u]={traces:[r],alignmentIndex:Object.keys(f).length,offsetGroups:{}};var h=n("offsetgroup"),v=c.offsetGroups,d=v[h];h&&(d||(d=v[h]={offsetIndex:Object.keys(v).length}),r._offsetIndex=d.offsetIndex)}});var K7=ie((Onr,oce)=>{"use strict";var Tht=Zt(),Aht=Bx(),Mht=Bl();oce.exports=function(t,r){var i,n,a;function o(c){return Tht.coerce(n._input,n,Mht,c)}if(r.scattermode==="group")for(a=0;a<t.length;a++)n=t[a],n.type==="scatter"&&(i=n._input,Aht(i,n,r,o));for(a=0;a<t.length;a++){var s=t[a];if(s.type==="scatter"){var l=s.fill;if(!(l==="none"||l==="toself")&&(s.opacity=void 0,l==="tonexty"||l==="tonextx"))for(var u=a-1;u>=0;u--){var f=t[u];if(f.type==="scatter"&&f.xaxis===s.xaxis&&f.yaxis===s.yaxis){f.opacity=void 0;break}}}}}});var lce=ie((Bnr,sce)=>{"use strict";var Sht=Zt(),Eht=hC();sce.exports=function(e,t){function r(n,a){return Sht.coerce(e,t,Eht,n,a)}var i=t.barmode==="group";t.scattermode==="group"&&r("scattergap",i?t.bargap:.2)}});var f0=ie((Nnr,fce)=>{"use strict";var kht=la(),uce=Zt(),Cht=uce.dateTime2ms,uL=uce.incrementMonth,Lht=eo(),Pht=Lht.ONEAVGMONTH;fce.exports=function(t,r,i,n){if(r.type!=="date")return{vals:n};var a=t[i+"periodalignment"];if(!a)return{vals:n};var o=t[i+"period"],s;if(kht(o)){if(o=+o,o<=0)return{vals:n}}else if(typeof o=="string"&&o.charAt(0)==="M"){var l=+o.substring(1);if(l>0&&Math.round(l)===l)s=l;else return{vals:n}}for(var u=r.calendar,f=a==="start",c=a==="end",h=t[i+"period0"],v=Cht(h,u)||0,d=[],x=[],b=[],p=n.length,w=0;w<p;w++){var A=n[w],T,k,_;if(s){for(T=Math.round((A-v)/(s*Pht)),_=uL(v,s*T,u);_>A;)_=uL(_,-s,u);for(;_<=A;)_=uL(_,s,u);k=uL(_,-s,u)}else{for(T=Math.round((A-v)/o),_=v+T*o;_>A;)_-=o;for(;_<=A;)_+=o;k=_-o}d[w]=f?k:c?_:(k+_)/2,x[w]=k,b[w]=_}return{vals:d,starts:x,ends:b}}});var _p=ie((Unr,hce)=>{"use strict";var J7=Hh().hasColorscale,Q7=xv(),cce=Ks();hce.exports=function(t,r){cce.hasLines(r)&&J7(r,"line")&&Q7(t,r,{vals:r.line.color,containerStr:"line",cLetter:"c"}),cce.hasMarkers(r)&&(J7(r,"marker")&&Q7(t,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),J7(r,"marker.line")&&Q7(t,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}});var K0=ie((Vnr,vce)=>{"use strict";var pu=Zt();vce.exports=function(t,r){for(var i=0;i<t.length;i++)t[i].i=i;pu.mergeArray(r.text,t,"tx"),pu.mergeArray(r.texttemplate,t,"txt"),pu.mergeArray(r.hovertext,t,"htx"),pu.mergeArray(r.customdata,t,"data"),pu.mergeArray(r.textposition,t,"tp"),r.textfont&&(pu.mergeArrayCastPositive(r.textfont.size,t,"ts"),pu.mergeArray(r.textfont.color,t,"tc"),pu.mergeArray(r.textfont.family,t,"tf"),pu.mergeArray(r.textfont.weight,t,"tw"),pu.mergeArray(r.textfont.style,t,"ty"),pu.mergeArray(r.textfont.variant,t,"tv"),pu.mergeArray(r.textfont.textcase,t,"tC"),pu.mergeArray(r.textfont.lineposition,t,"tE"),pu.mergeArray(r.textfont.shadow,t,"tS"));var n=r.marker;if(n){pu.mergeArrayCastPositive(n.size,t,"ms"),pu.mergeArrayCastPositive(n.opacity,t,"mo"),pu.mergeArray(n.symbol,t,"mx"),pu.mergeArray(n.angle,t,"ma"),pu.mergeArray(n.standoff,t,"mf"),pu.mergeArray(n.color,t,"mc");var a=n.line;n.line&&(pu.mergeArray(a.color,t,"mlc"),pu.mergeArrayCastPositive(a.width,t,"mlw"));var o=n.gradient;o&&o.type!=="none"&&(pu.mergeArray(o.type,t,"mgt"),pu.mergeArray(o.color,t,"mgc"))}}});var bp=ie((Hnr,pce)=>{"use strict";var dce=Zt();pce.exports=function(t,r){dce.isArrayOrTypedArray(r.selectedpoints)&&dce.tagSelected(t,r)}});var wp=ie((Gnr,wce)=>{"use strict";var gce=la(),eB=Zt(),CM=Wi(),yce=f0(),$7=eo().BADNUM,tB=Ks(),Rht=_p(),Dht=K0(),Iht=bp();function Fht(e,t){var r=e._fullLayout,i=t._xA=CM.getFromId(e,t.xaxis||"x","x"),n=t._yA=CM.getFromId(e,t.yaxis||"y","y"),a=i.makeCalcdata(t,"x"),o=n.makeCalcdata(t,"y"),s=yce(t,i,"x",a),l=yce(t,n,"y",o),u=s.vals,f=l.vals,c=t._length,h=new Array(c),v=t.ids,d=rB(t,r,i,n),x=!1,b,p,w,A,T,k;_ce(r,t);var _="x",E="y",S;if(d)eB.pushUnique(d.traceIndices,t._expandedIndex),b=d.orientation==="v",b?(E="s",S="x"):(_="s",S="y"),T=d.stackgaps==="interpolate";else{var g=xce(t,c);mce(e,t,i,n,u,f,g)}var C=!!t.xperiodalignment,M=!!t.yperiodalignment;for(p=0;p<c;p++){var P=h[p]={},D=gce(u[p]),q=gce(f[p]);D&&q?(P[_]=u[p],P[E]=f[p],C&&(P.orig_x=a[p],P.xEnd=s.ends[p],P.xStart=s.starts[p]),M&&(P.orig_y=o[p],P.yEnd=l.ends[p],P.yStart=l.starts[p])):d&&(b?D:q)?(P[S]=b?u[p]:f[p],P.gap=!0,T?(P.s=$7,x=!0):P.s=0):P[_]=P[E]=$7,v&&(P.id=String(v[p]))}if(Dht(h,t),Rht(e,t),Iht(h,t),d){for(p=0;p<h.length;)h[p][S]===$7?h.splice(p,1):p++;if(eB.sort(h,function(F,N){return F[S]-N[S]||F.i-N.i}),x){for(p=0;p<h.length-1&&h[p].gap;)p++;for(k=h[p].s,k||(k=h[p].s=0),w=0;w<p;w++)h[w].s=k;for(A=h.length-1;A>p&&h[A].gap;)A--;for(k=h[A].s,w=h.length-1;w>A;w--)h[w].s=k;for(;p<A;)if(p++,h[p].gap){for(w=p+1;h[w].gap;)w++;for(var O=h[p-1][S],U=h[p-1].s,B=(h[w].s-U)/(h[w][S]-O);p<w;)h[p].s=U+(h[p][S]-O)*B,p++}}}return h}function mce(e,t,r,i,n,a,o){var s=t._length,l=e._fullLayout,u=r._id,f=i._id,c=l._firstScatter[bce(t)]===t.uid,h=(rB(t,l,r,i)||{}).orientation,v=t.fill;r._minDtick=0,i._minDtick=0;var d={padded:!0},x={padded:!0};o&&(d.ppad=x.ppad=o);var b=s<2||n[0]!==n[s-1]||a[0]!==a[s-1];b&&(v==="tozerox"||v==="tonextx"&&(c||h==="h"))?d.tozero=!0:!(t.error_y||{}).visible&&(v==="tonexty"||v==="tozeroy"||!tB.hasMarkers(t)&&!tB.hasText(t))&&(d.padded=!1,d.ppad=0),b&&(v==="tozeroy"||v==="tonexty"&&(c||h==="v"))?x.tozero=!0:(v==="tonextx"||v==="tozerox")&&(x.padded=!1),u&&(t._extremes[u]=CM.findExtremes(r,n,d)),f&&(t._extremes[f]=CM.findExtremes(i,a,x))}function xce(e,t){if(tB.hasMarkers(e)){var r=e.marker,i=1.6*(e.marker.sizeref||1),n;if(e.marker.sizemode==="area"?n=function(u){return Math.max(Math.sqrt((u||0)/i),3)}:n=function(u){return Math.max((u||0)/i,3)},eB.isArrayOrTypedArray(r.size)){var a={type:"linear"};CM.setConvert(a);for(var o=a.makeCalcdata(e.marker,"size"),s=new Array(t),l=0;l<t;l++)s[l]=n(o[l]);return s}else return n(r.size)}}function _ce(e,t){var r=bce(t),i=e._firstScatter;i[r]||(i[r]=t.uid)}function bce(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function rB(e,t,r,i){var n=e.stackgroup;if(n){var a=t._scatterStackOpts[r._id+i._id][n],o=a.orientation==="v"?i:r;if(o.type==="linear"||o.type==="log")return a}}wce.exports={calc:Fht,calcMarkerSize:xce,calcAxisExpansion:mce,setFirstScatter:_ce,getStackOpts:rB}});var Ace=ie((Ynr,Tce)=>{"use strict";Tce.exports=fL;var qht=Zt().distinctVals;function fL(e,t){this.traces=e,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var r=1/0,i=t.posAxis._id.charAt(0),n=[],a=0;a<e.length;a++){for(var o=e[a],s=0;s<o.length;s++){var l=o[s],u=l.p;u===void 0&&(u=l[i]),u!==void 0&&n.push(u)}o[0]&&o[0].width1&&(r=Math.min(o[0].width1,r))}this.positions=n;var f=qht(n);this.distinctPositions=f.vals,f.vals.length===1&&r!==1/0?this.minDiff=r:this.minDiff=Math.min(f.minDiff,r);var c=(t.posAxis||{}).type;(c==="category"||c==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}fL.prototype.put=function(t,r){var i=this.getLabel(t,r),n=this.bins[i]||0;return this.bins[i]=n+r,n};fL.prototype.get=function(t,r){var i=this.getLabel(t,r);return this.bins[i]||0};fL.prototype.getLabel=function(t,r){var i=r<0&&this.sepNegVal?"v":"^",n=this.overlapNoMerge?t:Math.round(t/this.binWidth);return i+n}});var Nx=ie((Wnr,Pce)=>{"use strict";var Tp=la(),km=Zt().isArrayOrTypedArray,G2=eo().BADNUM,zht=Ti(),LM=Wi(),Oht=Tm().getAxisGroup,cL=Ace();function Bht(e,t){for(var r=t.xaxis,i=t.yaxis,n=e._fullLayout,a=e._fullData,o=e.calcdata,s=[],l=[],u=0;u<a.length;u++){var f=a[u];if(f.visible===!0&&zht.traceIs(f,"bar")&&f.xaxis===r._id&&f.yaxis===i._id&&(f.orientation==="h"?s.push(o[u]):l.push(o[u]),f._computePh))for(var c=e.calcdata[u],h=0;h<c.length;h++)typeof c[h].ph0=="function"&&(c[h].ph0=c[h].ph0()),typeof c[h].ph1=="function"&&(c[h].ph1=c[h].ph1())}var v={xCat:r.type==="category"||r.type==="multicategory",yCat:i.type==="category"||i.type==="multicategory",mode:n.barmode,norm:n.barnorm,gap:n.bargap,groupgap:n.bargroupgap};iB(e,r,i,l,v),iB(e,i,r,s,v)}function iB(e,t,r,i,n){if(i.length){var a,o,s,l,u;switch(Vht(r,i),n.mode){case"overlay":nB(t,r,i,n);break;case"group":for(a=[],o=[],s=0;s<i.length;s++)l=i[s],u=l[0].trace,u.offset===void 0?o.push(l):a.push(l);o.length&&Hht(e,t,r,o,n),a.length&&nB(t,r,a,n);break;case"stack":case"relative":for(a=[],o=[],s=0;s<i.length;s++)l=i[s],u=l[0].trace,u.base===void 0?o.push(l):a.push(l);Uht(o),o.length&&Ght(e,t,r,o,n),a.length&&nB(t,r,a,n);break}Nht(i),jht(i,t)}}function Nht(e){var t,r,i,n,a,o,s;for(t=0;t<e.length;t++)r=e[t],i=r[0].trace,n=r[0].t,n.cornerradiusvalue===void 0&&(a=i.marker?i.marker.cornerradius:void 0,a!==void 0&&(o=Tp(a)?+a:+a.slice(0,-1),s=Tp(a)?"px":"%",n.cornerradiusvalue=o,n.cornerradiusform=s))}function Uht(e){if(!(e.length<2)){var t,r,i,n,a,o,s;for(t=0;t<e.length&&(r=e[t],i=r[0].trace,a=i.marker?i.marker.cornerradius:void 0,a===void 0);t++);if(a!==void 0)for(o=Tp(a)?+a:+a.slice(0,-1),s=Tp(a)?"px":"%",t=0;t<e.length;t++)r=e[t],n=r[0].t,n.cornerradiusvalue=o,n.cornerradiusform=s}}function Vht(e,t){var r,i;for(r=0;r<t.length;r++){var n=t[r],a=n[0].trace,o=a.type==="funnel"?a._base:a.base,s,l=a.orientation==="h"?a.xcalendar:a.ycalendar,u=e.type==="category"||e.type==="multicategory"?function(){return null}:e.d2c;if(km(o)){for(i=0;i<Math.min(o.length,n.length);i++)s=u(o[i],0,l),Tp(s)?(n[i].b=+s,n[i].hasB=1):n[i].b=0;for(;i<n.length;i++)n[i].b=0}else{s=u(o,0,l);var f=Tp(s);for(s=f?s:0,i=0;i<n.length;i++)n[i].b=s,f&&(n[i].hasB=1)}}}function nB(e,t,r,i){for(var n=0;n<r.length;n++){var a=r[n],o=new cL([a],{posAxis:e,sepNegVal:!1,overlapNoMerge:!i.norm});Mce(e,o,i),i.norm?(Lce(o),aB(t,o,i)):Cce(t,o)}}function Hht(e,t,r,i,n){var a=new cL(i,{posAxis:t,sepNegVal:!1,overlapNoMerge:!n.norm});Yht(e,t,a,n),Xht(a,t),n.norm?(Lce(a),aB(r,a,n)):Cce(r,a)}function Ght(e,t,r,i,n){var a=new cL(i,{posAxis:t,sepNegVal:n.mode==="relative",overlapNoMerge:!(n.norm||n.mode==="stack"||n.mode==="relative")});Mce(t,a,n),Wht(r,a,n);for(var o=0;o<i.length;o++)for(var s=i[o],l=0;l<s.length;l++){var u=s[l];if(u.s!==G2){var f=u.b+u.s===a.get(u.p,u.s);f&&(u._outmost=!0)}}n.norm&&aB(r,a,n)}function Mce(e,t,r){for(var i=t.minDiff,n=t.traces,a=i*(1-r.gap),o=a,s=o*(1-(r.groupgap||0)),l=-s/2,u=0;u<n.length;u++){var f=n[u],c=f[0].t;c.barwidth=s,c.poffset=l,c.bargroupwidth=a,c.bardelta=i}t.binWidth=n[0][0].t.barwidth/100,Sce(t),Ece(e,t),kce(e,t)}function Yht(e,t,r,i){for(var n=e._fullLayout,a=r.positions,o=r.distinctPositions,s=r.minDiff,l=r.traces,u=l.length,f=a.length!==o.length,c=s*(1-i.gap),h=Oht(n,t._id)+l[0][0].trace.orientation,v=n._alignmentOpts[h]||{},d=0;d<u;d++){var x=l[d],b=x[0].trace,p=v[b.alignmentgroup]||{},w=Object.keys(p.offsetGroups||{}).length,A;w?A=c/w:A=f?c/u:c;var T=A*(1-(i.groupgap||0)),k;w?k=((2*b._offsetIndex+1-w)*A-T)/2:k=f?((2*d+1-u)*A-T)/2:-T/2;var _=x[0].t;_.barwidth=T,_.poffset=k,_.bargroupwidth=c,_.bardelta=s}r.binWidth=l[0][0].t.barwidth/100,Sce(r),Ece(t,r),kce(t,r,f)}function Sce(e){var t=e.traces,r,i;for(r=0;r<t.length;r++){var n=t[r],a=n[0],o=a.trace,s=a.t,l=o._offset||o.offset,u=s.poffset,f;if(km(l)){for(f=Array.prototype.slice.call(l,0,n.length),i=0;i<f.length;i++)Tp(f[i])||(f[i]=u);for(i=f.length;i<n.length;i++)f.push(u);s.poffset=f}else l!==void 0&&(s.poffset=l);var c=o._width||o.width,h=s.barwidth;if(km(c)){var v=Array.prototype.slice.call(c,0,n.length);for(i=0;i<v.length;i++)Tp(v[i])||(v[i]=h);for(i=v.length;i<n.length;i++)v.push(h);if(s.barwidth=v,l===void 0){for(f=[],i=0;i<n.length;i++)f.push(u+(h-v[i])/2);s.poffset=f}}else c!==void 0&&(s.barwidth=c,l===void 0&&(s.poffset=u+(h-c)/2))}}function Ece(e,t){for(var r=t.traces,i=Y2(e),n=0;n<r.length;n++)for(var a=r[n],o=a[0].t,s=o.poffset,l=km(s),u=o.barwidth,f=km(u),c=0;c<a.length;c++){var h=a[c],v=h.w=f?u[c]:u;h.p===void 0&&(h.p=h[i],h["orig_"+i]=h[i]);var d=(l?s[c]:s)+v/2;h[i]=h.p+d}}function kce(e,t,r){var i=t.traces,n=t.minDiff,a=n/2;LM.minDtick(e,t.minDiff,t.distinctPositions[0],r);for(var o=0;o<i.length;o++){var s=i[o],l=s[0],u=l.trace,f=[],c,h,v,d;for(d=0;d<s.length;d++)c=s[d],h=c.p-a,v=c.p+a,f.push(h,v);if(u.width||u.offset){var x=l.t,b=x.poffset,p=x.barwidth,w=km(b),A=km(p);for(d=0;d<s.length;d++){c=s[d];var T=w?b[d]:b,k=A?p[d]:p;h=c.p+T,v=h+k,f.push(h,v)}}u._extremes[e._id]=LM.findExtremes(e,f,{padded:!1})}}function Cce(e,t){for(var r=t.traces,i=Y2(e),n=0;n<r.length;n++){for(var a=r[n],o=a[0].trace,s=o.type==="scatter",l=o.orientation==="v",u=[],f=!1,c=0;c<a.length;c++){var h=a[c],v=s?0:h.b,d=s?l?h.y:h.x:v+h.s;h[i]=d,u.push(d),h.hasB&&u.push(v),(!h.hasB||!h.b)&&(f=!0)}o._extremes[e._id]=LM.findExtremes(e,u,{tozero:f,padded:!0})}}function Wht(e,t,r){var i=Y2(e),n=t.traces,a,o,s,l,u,f;for(l=0;l<n.length;l++)if(a=n[l],o=a[0].trace,o.type==="funnel")for(u=0;u<a.length;u++)f=a[u],f.s!==G2&&t.put(f.p,-.5*f.s);for(l=0;l<n.length;l++){a=n[l],o=a[0].trace,s=o.type==="funnel";var c=[];for(u=0;u<a.length;u++)if(f=a[u],f.s!==G2){var h;s?h=f.s:h=f.s+f.b;var v=t.put(f.p,h),d=v+h;f.b=v,f[i]=d,r.norm||(c.push(d),f.hasB&&c.push(v))}r.norm||(o._extremes[e._id]=LM.findExtremes(e,c,{tozero:!0,padded:!0}))}}function Lce(e){for(var t=e.traces,r=0;r<t.length;r++)for(var i=t[r],n=0;n<i.length;n++){var a=i[n];a.s!==G2&&e.put(a.p,a.b+a.s)}}function Xht(e,t){for(var r=e.traces,i=0;i<r.length;i++){var n=r[i],a=n[0].trace;if(a.base===void 0)for(var o=new cL([n],{posAxis:t,sepNegVal:!0,overlapNoMerge:!0}),s=0;s<n.length;s++){var l=n[s];if(l.p!==G2){var u=o.put(l.p,l.b+l.s);u&&(l.b=u)}}}}function aB(e,t,r){var i=t.traces,n=Y2(e),a=r.norm==="fraction"?1:100,o=a/1e9,s=e.l2c(e.c2l(0)),l=r.mode==="stack"?a:s;function u(k){return Tp(e.c2l(k))&&(k<s-o||k>l+o||!Tp(s))}for(var f=0;f<i.length;f++){for(var c=i[f],h=c[0].trace,v=[],d=!1,x=!1,b=0;b<c.length;b++){var p=c[b];if(p.s!==G2){var w=Math.abs(a/t.get(p.p,p.s));p.b*=w,p.s*=w;var A=p.b,T=A+p.s;p[n]=T,v.push(T),x=x||u(T),p.hasB&&(v.push(A),x=x||u(A)),(!p.hasB||!p.b)&&(d=!0)}}h._extremes[e._id]=LM.findExtremes(e,v,{tozero:d,padded:x})}}function Zht(e,t,r,i){for(var n=Y2(i),a=0;a<e.length;a++)for(var o=e[a],s=0;s<o.length;s++){var l=o[s],u=l[n];l._sMin=t[u],l._sMax=r[u]}}function jht(e,t){var r=Y2(t),i={},n,a,o,s=1/0,l=-1/0;for(n=0;n<e.length;n++)for(o=e[n],a=0;a<o.length;a++){var u=o[a].p;Tp(u)&&(s=Math.min(s,u),l=Math.max(l,u))}var f=1e4/(l-s),c=i.round=function(S){return String(Math.round(f*(S-s)))},h={},v={},d=e.some(function(S){var g=S[0].trace;return"marker"in g&&g.marker.cornerradius});for(n=0;n<e.length;n++){o=e[n],o[0].t.extents=i;var x=o[0].t.poffset,b=km(x);for(a=0;a<o.length;a++){var p=o[a],w=p[r]-p.w/2;if(Tp(w)){var A=p[r]+p.w/2,T=c(p.p);i[T]?i[T]=[Math.min(w,i[T][0]),Math.max(A,i[T][1])]:i[T]=[w,A]}if(p.p0=p.p+(b?x[a]:x),p.p1=p.p0+p.w,p.s0=p.b,p.s1=p.s0+p.s,d){var k=Math.min(p.s0,p.s1)||0,_=Math.max(p.s0,p.s1)||0,E=p[r];h[E]=E in h?Math.min(h[E],k):k,v[E]=E in v?Math.max(v[E],_):_}}}d&&Zht(e,h,v,t)}function Y2(e){return e._id.charAt(0)}Pce.exports={crossTraceCalc:Bht,setGroupPositions:iB}});var Fce=ie((Xnr,Ice)=>{"use strict";var Rce=wp(),Dce=Nx().setGroupPositions;function Kht(e,t){for(var r=t.xaxis,i=t.yaxis,n=e._fullLayout,a=e._fullData,o=e.calcdata,s=[],l=[],u=0;u<a.length;u++){var f=a[u];f.visible===!0&&f.type==="scatter"&&f.xaxis===r._id&&f.yaxis===i._id&&(f.orientation==="h"?s.push(o[u]):f.orientation==="v"&&l.push(o[u]))}var c={mode:n.scattermode,gap:n.scattergap};Dce(e,r,i,l,c),Dce(e,i,r,s,c)}Ice.exports=function(t,r){t._fullLayout.scattermode==="group"&&Kht(t,r);var i=r.xaxis,n=r.yaxis,a=i._id+n._id,o=t._fullLayout._scatterStackOpts[a];if(o){var s=t.calcdata,l,u,f,c,h,v,d,x,b,p,w,A,T,k,_;for(var E in o){p=o[E];var S=p.traceIndices;if(S.length){for(w=p.stackgaps==="interpolate",A=p.groupnorm,p.orientation==="v"?(T="x",k="y"):(T="y",k="x"),_=new Array(S.length),l=0;l<_.length;l++)_[l]=!1;v=s[S[0]];var g=new Array(v.length);for(l=0;l<v.length;l++)g[l]=v[l][T];for(l=1;l<S.length;l++){for(h=s[S[l]],u=f=0;u<h.length;u++){for(d=h[u][T];d>g[f]&&f<g.length;f++)oB(h,u,g[f],l,_,w,T),u++;if(d!==g[f]){for(c=0;c<l;c++)oB(s[S[c]],f,d,c,_,w,T);g.splice(f,0,d)}f++}for(;f<g.length;f++)oB(h,u,g[f],l,_,w,T),u++}var C=g.length;for(u=0;u<v.length;u++){for(x=v[u][k]=v[u].s,l=1;l<S.length;l++)h=s[S[l]],h[0].trace._rawLength=h[0].trace._length,h[0].trace._length=C,x+=h[u].s,h[u][k]=x;if(A)for(b=(A==="fraction"?x:x/100)||1,l=0;l<S.length;l++){var M=s[S[l]][u];M[k]/=b,M.sNorm=M.s/b}}for(l=0;l<S.length;l++){h=s[S[l]];var P=h[0].trace,D=Rce.calcMarkerSize(P,P._rawLength),q=Array.isArray(D);if(D&&_[l]||q){var O=D;for(D=new Array(C),u=0;u<C;u++)D[u]=h[u].gap?0:q?O[h[u].i]:O}var U=new Array(C),B=new Array(C);for(u=0;u<C;u++)U[u]=h[u].x,B[u]=h[u].y;Rce.calcAxisExpansion(t,P,i,n,U,B,D),h[0].t.orientation=p.orientation}}}}};function oB(e,t,r,i,n,a,o){n[i]=!0;var s={i:null,gap:!0,s:0};if(s[o]=r,e.splice(t,0,s),t&&r===e[t-1][o]){var l=e[t-1];s.s=l.s,s.i=l.i,s.gap=l.gap}else a&&(s.s=Jht(e,t,r,o));t||(e[0].t=e[1].t,e[0].trace=e[1].trace,delete e[1].t,delete e[1].trace)}function Jht(e,t,r,i){var n=e[t-1],a=e[t+1];return a?n?n.s+(a.s-n.s)*(r-n[i])/(a[i]-n[i]):a.s:n.s}});var lB=ie((Znr,Uce)=>{"use strict";var Qht=oa(),Bce=eo(),PM=Bce.BADNUM,Nce=Bce.LOG_CLIP,qce=Nce+.5,zce=Nce-.5,hL=Zt(),$ht=hL.segmentsIntersect,Oce=hL.constrain,sB=W0();Uce.exports=function(t,r){var i=r.trace||{},n=r.xaxis,a=r.yaxis,o=n.type==="log",s=a.type==="log",l=n._length,u=a._length,f=r.backoff,c=i.marker,h=r.connectGaps,v=r.baseTolerance,d=r.shape,x=d==="linear",b=i.fill&&i.fill!=="none",p=[],w=sB.minTolerance,A=t.length,T=new Array(A),k=0,_,E,S,g,C,M,P,D,q,O,U,B,F,N,X,K;function ne(It){var gt=t[It];if(!gt)return!1;var kt=r.linearized?n.l2p(gt.x):n.c2p(gt.x),Je=r.linearized?a.l2p(gt.y):a.c2p(gt.y);if(kt===PM){if(o&&(kt=n.c2p(gt.x,!0)),kt===PM)return!1;s&&Je===PM&&(kt*=Math.abs(n._m*u*(n._m>0?qce:zce)/(a._m*l*(a._m>0?qce:zce)))),kt*=1e3}if(Je===PM){if(s&&(Je=a.c2p(gt.y,!0)),Je===PM)return!1;Je*=1e3}return[kt,Je]}function fe(It,gt,kt,Je){var Ze=kt-It,At=Je-gt,Se=.5-It,pe=.5-gt,Te=Ze*Ze+At*At,it=Ze*Se+At*pe;if(it>0&&it<Te){var Dt=Se*At-pe*Ze;if(Dt*Dt<Te)return!0}}var ue,ee;function Z(It,gt){var kt=It[0]/l,Je=It[1]/u,Ze=Math.max(0,-kt,kt-1,-Je,Je-1);return Ze&&ue!==void 0&&fe(kt,Je,ue,ee)&&(Ze=0),Ze&&gt&&fe(kt,Je,gt[0]/l,gt[1]/u)&&(Ze=0),(1+sB.toleranceGrowth*Ze)*v}function oe(It,gt){var kt=It[0]-gt[0],Je=It[1]-gt[1];return Math.sqrt(kt*kt+Je*Je)}var ce=sB.maxScreensAway,le=-l*ce,me=l*(1+ce),he=-u*ce,te=u*(1+ce),ge=[[le,he,me,he],[me,he,me,te],[me,te,le,te],[le,te,le,he]],ae,_e,Ce,qe,rt,Re;function Ie(It,gt){for(var kt=[],Je=0,Ze=0;Ze<4;Ze++){var At=ge[Ze],Se=$ht(It[0],It[1],gt[0],gt[1],At[0],At[1],At[2],At[3]);Se&&(!Je||Math.abs(Se.x-kt[0][0])>1||Math.abs(Se.y-kt[0][1])>1)&&(Se=[Se.x,Se.y],Je&&oe(Se,It)<oe(kt[0],It)?kt.unshift(Se):kt.push(Se),Je++)}return kt}function ot(It){if(It[0]<le||It[0]>me||It[1]<he||It[1]>te)return[Oce(It[0],le,me),Oce(It[1],he,te)]}function lt(It,gt){if(It[0]===gt[0]&&(It[0]===le||It[0]===me)||It[1]===gt[1]&&(It[1]===he||It[1]===te))return!0}function ht(It,gt){var kt=[],Je=ot(It),Ze=ot(gt);return Je&&Ze&&lt(Je,Ze)||(Je&&kt.push(Je),Ze&&kt.push(Ze)),kt}function xt(It,gt,kt){return function(Je,Ze){var At=ot(Je),Se=ot(Ze),pe=[];if(At&&Se&&lt(At,Se))return pe;At&&pe.push(At),Se&&pe.push(Se);var Te=2*hL.constrain((Je[It]+Ze[It])/2,gt,kt)-((At||Je)[It]+(Se||Ze)[It]);if(Te){var it;At&&Se?it=Te>0==At[It]>Se[It]?At:Se:it=At||Se,it[It]+=Te}return pe}}var Vt;d==="linear"||d==="spline"?Vt=Ie:d==="hv"||d==="vh"?Vt=ht:d==="hvh"?Vt=xt(0,le,me):d==="vhv"&&(Vt=xt(1,he,te));function Ht(It,gt){var kt=gt[0]-It[0],Je=(gt[1]-It[1])/kt,Ze=(It[1]*gt[0]-gt[1]*It[0])/kt;return Ze>0?[Je>0?le:me,te]:[Je>0?me:le,he]}function Me(It){var gt=It[0],kt=It[1],Je=gt===T[k-1][0],Ze=kt===T[k-1][1];if(!(Je&&Ze))if(k>1){var At=gt===T[k-2][0],Se=kt===T[k-2][1];Je&&(gt===le||gt===me)&&At?Se?k--:T[k-1]=It:Ze&&(kt===he||kt===te)&&Se?At?k--:T[k-1]=It:T[k++]=It}else T[k++]=It}function Ke(It){T[k-1][0]!==It[0]&&T[k-1][1]!==It[1]&&Me([Ce,qe]),Me(It),rt=null,Ce=qe=0}var We=hL.isArrayOrTypedArray(c);function et(It){if(It&&f&&(It.i=_,It.d=t,It.trace=i,It.marker=We?c[It.i]:c,It.backoff=f),ue=It[0]/l,ee=It[1]/u,ae=It[0]<le?le:It[0]>me?me:0,_e=It[1]<he?he:It[1]>te?te:0,ae||_e){if(!k)T[k++]=[ae||It[0],_e||It[1]];else if(rt){var gt=Vt(rt,It);gt.length>1&&(Ke(gt[0]),T[k++]=gt[1])}else Re=Vt(T[k-1],It)[0],T[k++]=Re;var kt=T[k-1];ae&&_e&&(kt[0]!==ae||kt[1]!==_e)?(rt&&(Ce!==ae&&qe!==_e?Me(Ce&&qe?Ht(rt,It):[Ce||ae,qe||_e]):Ce&&qe&&Me([Ce,qe])),Me([ae,_e])):Ce-ae&&qe-_e&&Me([ae||Ce,_e||qe]),rt=It,Ce=ae,qe=_e}else rt&&Ke(Vt(rt,It)[0]),T[k++]=It}for(_=0;_<A;_++)if(E=ne(_),!!E){for(k=0,rt=null,et(E),_++;_<A;_++){if(g=ne(_),!g){if(h)continue;break}if(!x||!r.simplify){et(g);continue}var vt=ne(_+1);if(O=oe(g,E),!(!(b&&(k===0||k===A-1))&&O<Z(g,vt)*w)){for(D=[(g[0]-E[0])/O,(g[1]-E[1])/O],C=E,U=O,B=N=X=0,P=!1,S=g,_++;_<t.length;_++){if(M=vt,vt=ne(_+1),!M){if(h)continue;break}if(q=[M[0]-E[0],M[1]-E[1]],K=q[0]*D[1]-q[1]*D[0],N=Math.min(N,K),X=Math.max(X,K),X-N>Z(M,vt))break;S=M,F=q[0]*D[0]+q[1]*D[1],F>U?(U=F,g=M,P=!1):F<B&&(B=F,C=M,P=!0)}if(P?(et(g),S!==C&&et(C)):(C!==E&&et(C),S!==g&&et(g)),et(S),_>=t.length||!M)break;et(M),E=M}}rt&&Me([Ce||rt[0],qe||rt[1]]),p.push(T.slice(0,k))}var at=d.slice(d.length-1);if(f&&at!=="h"&&at!=="v"){for(var Xe=!1,dt=-1,_t=[],$t=0;$t<p.length;$t++)for(var Ut=0;Ut<p[$t].length-1;Ut++){var fr=p[$t][Ut],ar=p[$t][Ut+1],cr=Qht.applyBackoff(ar,fr);(cr[0]!==ar[0]||cr[1]!==ar[1])&&(Xe=!0),_t[dt+1]||(dt++,_t[dt]=[fr,[cr[0],cr[1]]])}return Xe?_t:p}return p}});var uB=ie((jnr,Hce)=>{"use strict";var Vce={tonextx:1,tonexty:1,tonext:1};Hce.exports=function(t,r,i){var n,a,o,s,l,u={},f=!1,c=-1,h=0,v=-1;for(a=0;a<i.length;a++)n=i[a][0].trace,o=n.stackgroup||"",o?o in u?l=u[o]:(l=u[o]=h,h++):n.fill in Vce&&v>=0?l=v:(l=v=h,h++),l<c&&(f=!0),n._groupIndex=c=l;var d=i.slice();f&&d.sort(function(b,p){var w=b[0].trace,A=p[0].trace;return w._groupIndex-A._groupIndex||w.index-A.index});var x={};for(a=0;a<d.length;a++)n=d[a][0].trace,o=n.stackgroup||"",n.visible===!0?(n._nexttrace=null,n.fill in Vce&&(s=x[o],n._prevtrace=s||null,s&&(s._nexttrace=n)),n._ownfill=n.fill&&(n.fill.substr(0,6)==="tozero"||n.fill==="toself"||n.fill.substr(0,2)==="to"&&!n._prevtrace),x[o]=n):n._prevtrace=n._nexttrace=n._ownfill=null;return d}});var Z2=ie((Knr,Wce)=>{"use strict";var c0=Mi(),evt=Ti(),RM=Zt(),W2=RM.ensureSingle,Yce=RM.identity,gu=oa(),X2=Ks(),tvt=lB(),rvt=uB(),vL=aM().tester;Wce.exports=function(t,r,i,n,a,o){var s,l,u=!a,f=!!a&&a.duration>0,c=rvt(t,r,i);if(s=n.selectAll("g.trace").data(c,function(v){return v[0].trace.uid}),s.enter().append("g").attr("class",function(v){return"trace scatter trace"+v[0].trace.uid}).style("stroke-miterlimit",2),s.order(),nvt(t,s,r),f){o&&(l=o());var h=c0.transition().duration(a.duration).ease(a.easing).each("end",function(){l&&l()}).each("interrupt",function(){l&&l()});h.each(function(){n.selectAll("g.trace").each(function(v,d){Gce(t,d,r,v,c,this,a)})})}else s.each(function(v,d){Gce(t,d,r,v,c,this,a)});u&&s.exit().remove(),n.selectAll("path:not([d])").remove()};function nvt(e,t,r){t.each(function(i){var n=W2(c0.select(this),"g","fills");gu.setClipUrl(n,r.layerClipId,e);var a=i[0].trace,o=[];a._ownfill&&o.push("_ownFill"),a._nexttrace&&o.push("_nextFill");var s=n.selectAll("g").data(o,Yce);s.enter().append("g"),s.exit().each(function(l){a[l]=null}).remove(),s.order().each(function(l){a[l]=W2(c0.select(this),"path","js-fill")})})}function Gce(e,t,r,i,n,a,o){var s=e._context.staticPlot,l;ivt(e,t,r,i,n);var u=!!o&&o.duration>0;function f(xt){return u?xt.transition():xt}var c=r.xaxis,h=r.yaxis,v=i[0].trace,d=v.line,x=c0.select(a),b=W2(x,"g","errorbars"),p=W2(x,"g","lines"),w=W2(x,"g","points"),A=W2(x,"g","text");if(evt.getComponentMethod("errorbars","plot")(e,b,r,o),v.visible!==!0)return;f(x).style("opacity",v.opacity);var T,k,_=v.fill.charAt(v.fill.length-1);_!=="x"&&_!=="y"&&(_="");var E,S;_==="y"?(E=1,S=h.c2p(0,!0)):_==="x"&&(E=0,S=c.c2p(0,!0)),i[0][r.isRangePlot?"nodeRangePlot3":"node3"]=x;var g="",C=[],M=v._prevtrace,P=null,D=null;M&&(g=M._prevRevpath||"",k=M._nextFill,C=M._ownPolygons,P=M._fillsegments,D=M._fillElement);var q,O,U="",B="",F,N,X,K,ne,fe,ue=[];v._polygons=[];var ee=[],Z=[],oe=RM.noop;if(T=v._ownFill,X2.hasLines(v)||v.fill!=="none"){k&&k.datum(i),["hv","vh","hvh","vhv"].indexOf(d.shape)!==-1?(F=gu.steps(d.shape),N=gu.steps(d.shape.split("").reverse().join(""))):d.shape==="spline"?F=N=function(xt){var Vt=xt[xt.length-1];return xt.length>1&&xt[0][0]===Vt[0]&&xt[0][1]===Vt[1]?gu.smoothclosed(xt.slice(1),d.smoothing):gu.smoothopen(xt,d.smoothing)}:F=N=function(xt){return"M"+xt.join("L")},X=function(xt){return N(xt.reverse())},Z=tvt(i,{xaxis:c,yaxis:h,trace:v,connectGaps:v.connectgaps,baseTolerance:Math.max(d.width||1,3)/4,shape:d.shape,backoff:d.backoff,simplify:d.simplify,fill:v.fill}),ee=new Array(Z.length);var ce=0;for(l=0;l<Z.length;l++){var le,me=Z[l];!le||!_?(le=me.slice(),ee[ce]=le,ce++):le.push.apply(le,me)}v._fillElement=null,v._fillExclusionElement=D,v._fillsegments=ee.slice(0,ce),ee=v._fillsegments,Z.length&&(K=Z[0][0].slice(),ne=Z[Z.length-1],fe=ne[ne.length-1].slice()),oe=function(xt){return function(Vt){if(q=F(Vt),O=X(Vt),U?_?(U+="L"+q.substr(1),B=O+("L"+B.substr(1))):(U+="Z"+q,B=O+"Z"+B):(U=q,B=O),X2.hasLines(v)){var Ht=c0.select(this);if(Ht.datum(i),xt)f(Ht.style("opacity",0).attr("d",q).call(gu.lineGroupStyle)).style("opacity",1);else{var Me=f(Ht);Me.attr("d",q),gu.singleLineStyle(i,Me)}}}}}var he=p.selectAll(".js-line").data(Z);f(he.exit()).style("opacity",0).remove(),he.each(oe(!1)),he.enter().append("path").classed("js-line",!0).style("vector-effect",s?"none":"non-scaling-stroke").call(gu.lineGroupStyle).each(oe(!0)),gu.setClipUrl(he,r.layerClipId,e);function te(xt){f(xt).attr("d","M0,0Z")}var ge=function(){var xt=new Array(ee.length);for(l=0;l<ee.length;l++)xt[l]=vL(ee[l]);return xt},ae=function(xt){var Vt,Ht;if(!xt||xt.length===0)for(Vt=new Array(ee.length),Ht=0;Ht<ee.length;Ht++){var Me=ee[Ht][0].slice(),Ke=ee[Ht][ee[Ht].length-1].slice();Me[E]=Ke[E]=S;var We=[Ke,Me],et=We.concat(ee[Ht]);Vt[Ht]=vL(et)}else{for(Vt=new Array(xt.length-1+ee.length),Ht=0;Ht<xt.length-1;Ht++)Vt[Ht]=vL(xt[Ht]);var vt=xt[xt.length-1].slice();for(vt.reverse(),Ht=0;Ht<ee.length;Ht++)Vt[xt.length-1+Ht]=vL(ee[Ht].concat(vt))}return Vt};Z.length?(T?(T.datum(i),K&&fe&&(_?(K[E]=fe[E]=S,f(T).attr("d","M"+fe+"L"+K+"L"+U.substr(1)).call(gu.singleFillStyle,e),ue=ae(null)):(f(T).attr("d",U+"Z").call(gu.singleFillStyle,e),ue=ge())),v._polygons=ue,v._fillElement=T):k&&(v.fill.substr(0,6)==="tonext"&&U&&g?(v.fill==="tonext"?(f(k).attr("d",U+"Z"+g+"Z").call(gu.singleFillStyle,e),ue=ge(),v._polygons=ue.concat(C)):(f(k).attr("d",U+"L"+g.substr(1)+"Z").call(gu.singleFillStyle,e),ue=ae(P),v._polygons=ue),v._fillElement=k):te(k)),v._prevRevpath=B):(T?te(T):k&&te(k),v._prevRevpath=null),v._ownPolygons=ue;function _e(xt){return xt.filter(function(Vt){return!Vt.gap&&Vt.vis})}function Ce(xt){return xt.filter(function(Vt){return Vt.vis})}function qe(xt){return xt.filter(function(Vt){return!Vt.gap})}function rt(xt){return xt.id}function Re(xt){if(xt.ids)return rt}function Ie(){return!1}function ot(xt,Vt,Ht){var Me,Ke,We,et=Ht[0].trace,vt=X2.hasMarkers(et),at=X2.hasText(et),Xe=Re(et),dt=Ie,_t=Ie;if(vt||at){var $t=Yce,Ut=et.stackgroup,fr=Ut&&e._fullLayout._scatterStackOpts[c._id+h._id][Ut].stackgaps==="infer zero";et.marker.maxdisplayed||et._needsCull?$t=fr?Ce:_e:Ut&&!fr&&($t=qe),vt&&(dt=$t),at&&(_t=$t)}Ke=xt.selectAll("path.point"),Me=Ke.data(dt,Xe);var ar=Me.enter().append("path").classed("point",!0);u&&ar.call(gu.pointStyle,et,e).call(gu.translatePoints,c,h).style("opacity",0).transition().style("opacity",1),Me.order();var cr;vt&&(cr=gu.makePointStyleFns(et)),Me.each(function(It){var gt=c0.select(this),kt=f(gt);We=gu.translatePoint(It,kt,c,h),We?(gu.singlePointStyle(It,kt,et,cr,e),r.layerClipId&&gu.hideOutsideRangePoint(It,kt,c,h,et.xcalendar,et.ycalendar),et.customdata&&gt.classed("plotly-customdata",It.data!==null&&It.data!==void 0)):kt.remove()}),u?Me.exit().transition().style("opacity",0).remove():Me.exit().remove(),Ke=Vt.selectAll("g"),Me=Ke.data(_t,Xe),Me.enter().append("g").classed("textpoint",!0).append("text"),Me.order(),Me.each(function(It){var gt=c0.select(this),kt=f(gt.select("text"));We=gu.translatePoint(It,kt,c,h),We?r.layerClipId&&gu.hideOutsideRangePoint(It,gt,c,h,et.xcalendar,et.ycalendar):gt.remove()}),Me.selectAll("text").call(gu.textPointStyle,et,e).each(function(It){var gt=c.c2p(It.x),kt=h.c2p(It.y);c0.select(this).selectAll("tspan.line").each(function(){f(c0.select(this)).attr({x:gt,y:kt})})}),Me.exit().remove()}w.datum(i),A.datum(i),ot(w,A,i);var lt=v.cliponaxis===!1,ht=lt?null:r.layerClipId;gu.setClipUrl(w,ht,e),gu.setClipUrl(A,ht,e)}function ivt(e,t,r,i,n){var a=r.xaxis,o=r.yaxis,s=c0.extent(RM.simpleMap(a.range,a.r2c)),l=c0.extent(RM.simpleMap(o.range,o.r2c)),u=i[0].trace;if(X2.hasMarkers(u)){var f=u.marker.maxdisplayed;if(f!==0){var c=i.filter(function(x){return x.x>=s[0]&&x.x<=s[1]&&x.y>=l[0]&&x.y<=l[1]}),h=Math.ceil(c.length/f),v=0;n.forEach(function(x,b){var p=x[0].trace;X2.hasMarkers(p)&&p.marker.maxdisplayed>0&&b<t&&v++});var d=Math.round(v*h/3+Math.floor(v/3)*h/7.1);i.forEach(function(x){delete x.vis}),c.forEach(function(x,b){Math.round((b+d)%h)===0&&(x.vis=!0)})}}}});var yh=ie((Jnr,Xce)=>{"use strict";Xce.exports={container:"marker",min:"cmin",max:"cmax"}});var pL=ie((Qnr,Zce)=>{"use strict";var dL=Wi();Zce.exports=function(t,r,i){var n={},a={_fullLayout:i},o=dL.getFromTrace(a,r,"x"),s=dL.getFromTrace(a,r,"y"),l=t.orig_x;l===void 0&&(l=t.x);var u=t.orig_y;return u===void 0&&(u=t.y),n.xLabel=dL.tickText(o,o.c2l(l),!0).text,n.yLabel=dL.tickText(s,s.c2l(u),!0).text,n}});var Sv=ie(($nr,jce)=>{"use strict";var fB=Mi(),j2=oa(),avt=Ti();function ovt(e){var t=fB.select(e).selectAll("g.trace.scatter");t.style("opacity",function(r){return r[0].trace.opacity}),t.selectAll("g.points").each(function(r){var i=fB.select(this),n=r.trace||r[0].trace;cB(i,n,e)}),t.selectAll("g.text").each(function(r){var i=fB.select(this),n=r.trace||r[0].trace;hB(i,n,e)}),t.selectAll("g.trace path.js-line").call(j2.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(j2.fillGroupStyle,e,!1),avt.getComponentMethod("errorbars","style")(t)}function cB(e,t,r){j2.pointStyle(e.selectAll("path.point"),t,r)}function hB(e,t,r){j2.textPointStyle(e.selectAll("text"),t,r)}function svt(e,t,r){var i=t[0].trace;i.selectedpoints?(j2.selectedPointStyle(r.selectAll("path.point"),i),j2.selectedTextStyle(r.selectAll("text"),i)):(cB(r,i,e),hB(r,i,e))}jce.exports={style:ovt,stylePoints:cB,styleText:hB,styleOnSelect:svt}});var J2=ie((eir,Kce)=>{"use strict";var K2=_i(),lvt=Ks();Kce.exports=function(t,r){var i,n;if(t.mode==="lines")return i=t.line.color,i&&K2.opacity(i)?i:t.fillcolor;if(t.mode==="none")return t.fill?t.fillcolor:"";var a=r.mcc||(t.marker||{}).color,o=r.mlcc||((t.marker||{}).line||{}).color;return n=a&&K2.opacity(a)?a:o&&K2.opacity(o)&&(r.mlw||((t.marker||{}).line||{}).width)?o:"",n?K2.opacity(n)<.3?K2.addOpacity(n,.3):n:(i=(t.line||{}).color,i&&K2.opacity(i)&&lvt.hasLines(t)&&t.line.width?i:t.fillcolor)}});var Q2=ie((tir,Qce)=>{"use strict";var gL=Zt(),Jce=Ol(),uvt=Ti(),fvt=J2(),vB=_i(),cvt=gL.fillText;Qce.exports=function(t,r,i,n){var a=t.cd,o=a[0].trace,s=t.xa,l=t.ya,u=s.c2p(r),f=l.c2p(i),c=[u,f],h=o.hoveron||"",v=o.mode.indexOf("markers")!==-1?3:.5,d=!!o.xperiodalignment,x=!!o.yperiodalignment;if(h.indexOf("points")!==-1){var b=function(B){if(d){var F=s.c2p(B.xStart),N=s.c2p(B.xEnd);return u>=Math.min(F,N)&&u<=Math.max(F,N)?0:1/0}var X=Math.max(3,B.mrc||0),K=1-1/X,ne=Math.abs(s.c2p(B.x)-u);return ne<X?K*ne/X:ne-X+K},p=function(B){if(x){var F=l.c2p(B.yStart),N=l.c2p(B.yEnd);return f>=Math.min(F,N)&&f<=Math.max(F,N)?0:1/0}var X=Math.max(3,B.mrc||0),K=1-1/X,ne=Math.abs(l.c2p(B.y)-f);return ne<X?K*ne/X:ne-X+K},w=function(B){var F=Math.max(v,B.mrc||0),N=s.c2p(B.x)-u,X=l.c2p(B.y)-f;return Math.max(Math.sqrt(N*N+X*X)-F,1-v/F)},A=Jce.getDistanceFunction(n,b,p,w);if(Jce.getClosest(a,A,t),t.index!==!1){var T=a[t.index],k=s.c2p(T.x,!0),_=l.c2p(T.y,!0),E=T.mrc||1;t.index=T.i;var S=a[0].t.orientation,g=S&&(T.sNorm||T.s),C=S==="h"?g:T.orig_x!==void 0?T.orig_x:T.x,M=S==="v"?g:T.orig_y!==void 0?T.orig_y:T.y;return gL.extendFlat(t,{color:fvt(o,T),x0:k-E,x1:k+E,xLabelVal:C,y0:_-E,y1:_+E,yLabelVal:M,spikeDistance:w(T),hovertemplate:o.hovertemplate}),cvt(T,o,t),uvt.getComponentMethod("errorbars","hoverInfo")(T,o,t),[t]}}function P(B){if(!B)return!1;var F=B.node();try{var N=new DOMPoint(c[0],c[1]);return F.isPointInFill(N)}catch(K){var X=F.ownerSVGElement.createSVGPoint();return X.x=c[0],X.y=c[1],F.isPointInFill(X)}}function D(B){var F,N=[],X=1/0,K=-1/0,ne=1/0,fe=-1/0,ue;for(F=0;F<B.length;F++){var ee=B[F];ee.contains(c)&&(N.push(ee),ne=Math.min(ne,ee.ymin),fe=Math.max(fe,ee.ymax))}if(N.length===0)return null;ne=Math.max(ne,0),fe=Math.min(fe,l._length),ue=(ne+fe)/2;var Z,oe,ce,le,me,he,te;for(F=0;F<N.length;F++)for(oe=N[F].pts,Z=1;Z<oe.length;Z++)he=oe[Z-1][1],te=oe[Z][1],he>ue!=te>=ue&&(le=oe[Z-1][0],me=oe[Z][0],te-he&&(ce=le+(me-le)*(ue-he)/(te-he),X=Math.min(X,ce),K=Math.max(K,ce)));return X=Math.max(X,0),K=Math.min(K,s._length),{x0:X,x1:K,y0:ue,y1:ue}}if(h.indexOf("fills")!==-1&&o._fillElement){var q=P(o._fillElement)&&!P(o._fillExclusionElement);if(q){var O=D(o._polygons);O===null&&(O={x0:c[0],x1:c[0],y0:c[1],y1:c[1]});var U=vB.defaultLine;return vB.opacity(o.fillcolor)?U=o.fillcolor:vB.opacity((o.line||{}).color)&&(U=o.line.color),gL.extendFlat(t,{distance:t.maxHoverDistance,x0:O.x0,x1:O.x1,y0:O.y0,y1:O.y1,color:U,hovertemplate:!1}),delete t.index,o.text&&!gL.isArrayOrTypedArray(o.text)?t.text=String(o.text):t.text=o.name,[t]}}}});var $2=ie((rir,ehe)=>{"use strict";var $ce=Ks();ehe.exports=function(t,r){var i=t.cd,n=t.xaxis,a=t.yaxis,o=[],s=i[0].trace,l,u,f,c,h=!$ce.hasMarkers(s)&&!$ce.hasText(s);if(h)return[];if(r===!1)for(l=0;l<i.length;l++)i[l].selected=0;else for(l=0;l<i.length;l++)u=i[l],f=n.c2p(u.x),c=a.c2p(u.y),u.i!==null&&r.contains([f,c],!1,l,t)?(o.push({pointNumber:u.i,x:n.c2d(u.x),y:a.c2d(u.y)}),u.selected=1):u.selected=0;return o}});var dB=ie((nir,the)=>{"use strict";the.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}});var gB=ie((iir,ihe)=>{"use strict";var DM=Ti().traceIs,pB=w2();ihe.exports=function(t,r,i,n){i("autotypenumbers",n.autotypenumbersDflt);var a=i("type",(n.splomStash||{}).type);a==="-"&&(hvt(r,n.data),r.type==="-"?r.type="linear":t.type=r.type)};function hvt(e,t){if(e.type==="-"){var r=e._id,i=r.charAt(0),n;r.indexOf("scene")!==-1&&(r=i);var a=vvt(t,r,i);if(a){if(a.type==="histogram"&&i==={v:"y",h:"x"}[a.orientation||"v"]){e.type="linear";return}var o=i+"calendar",s=a[o],l={noMultiCategory:!DM(a,"cartesian")||DM(a,"noMultiCategory")};if(a.type==="box"&&a._hasPreCompStats&&i==={h:"x",v:"y"}[a.orientation||"v"]&&(l.noMultiCategory=!0),l.autotypenumbers=e.autotypenumbers,nhe(a,i)){var u=rhe(a),f=[];for(n=0;n<t.length;n++){var c=t[n];!DM(c,"box-violin")||(c[i+"axis"]||i)!==r||(c[u]!==void 0?f.push(c[u][0]):c.name!==void 0?f.push(c.name):f.push("text"),c[o]!==s&&(s=void 0))}e.type=pB(f,s,l)}else if(a.type==="splom"){var h=a.dimensions,v=h[a._axesDim[r]];v.visible&&(e.type=pB(v.values,s,l))}else e.type=pB(a[i]||[a[i+"0"]],s,l)}}}function vvt(e,t,r){for(var i=0;i<e.length;i++){var n=e[i];if(n.type==="splom"&&n._length>0&&(n["_"+r+"axes"]||{})[t])return n;if((n[r+"axis"]||r)===t){if(nhe(n,r))return n;if((n[r]||[]).length||n[r+"0"])return n}}}function rhe(e){return{v:"x",h:"y"}[e.orientation||"v"]}function nhe(e,t){var r=rhe(e),i=DM(e,"box-violin"),n=DM(e._fullInput||{},"candlestick");return i&&!n&&t===r&&e[r]===void 0&&e[r+"0"]===void 0}});var yL=ie((air,ahe)=>{"use strict";var dvt=hh().isTypedArraySpec;function pvt(e,t){var r=t.dataAttr||e._id.charAt(0),i={},n,a,o;if(t.axData)n=t.axData;else for(n=[],a=0;a<t.data.length;a++){var s=t.data[a];s[r+"axis"]===e._id&&n.push(s)}for(a=0;a<n.length;a++){var l=n[a][r];for(o=0;o<l.length;o++){var u=l[o];u!=null&&(i[u]=1)}}return Object.keys(i)}ahe.exports=function(t,r,i,n){if(r.type==="category"){var a=t.categoryarray,o=Array.isArray(a)&&a.length>0||dvt(a),s;o&&(s="array");var l=i("categoryorder",s),u;l==="array"&&(u=i("categoryarray")),!o&&l==="array"&&(l=r.categoryorder="trace"),l==="trace"?r._initialCategories=[]:l==="array"?r._initialCategories=u.slice():(u=pvt(r,n).sort(),l==="category ascending"?r._initialCategories=u:l==="category descending"&&(r._initialCategories=u.reverse()))}}});var IM=ie((oir,she)=>{"use strict";var ohe=Kf().mix,gvt=Qu(),yvt=Zt();she.exports=function(t,r,i,n){n=n||{};var a=n.dfltColor;function o(E,S){return yvt.coerce2(t,r,n.attributes,E,S)}var s=o("linecolor",a),l=o("linewidth"),u=i("showline",n.showLine||!!s||!!l);u||(delete r.linecolor,delete r.linewidth);var f=ohe(a,n.bgColor,n.blend||gvt.lightFraction).toRgbString(),c=o("gridcolor",f),h=o("gridwidth"),v=o("griddash"),d=i("showgrid",n.showGrid||!!c||!!h||!!v);if(d||(delete r.gridcolor,delete r.gridwidth,delete r.griddash),n.hasMinor){var x=ohe(r.gridcolor,n.bgColor,67).toRgbString(),b=o("minor.gridcolor",x),p=o("minor.gridwidth",r.gridwidth||1),w=o("minor.griddash",r.griddash||"solid"),A=i("minor.showgrid",!!b||!!p||!!w);A||(delete r.minor.gridcolor,delete r.minor.gridwidth,delete r.minor.griddash)}if(!n.noZeroLine){var T=o("zerolinecolor",a),k=o("zerolinewidth"),_=i("zeroline",n.showGrid||!!T||!!k);_||(delete r.zerolinecolor,delete r.zerolinewidth)}}});var qM=ie((sir,vhe)=>{"use strict";var lhe=la(),mvt=Ti(),FM=Zt(),xvt=ko(),_vt=dh(),yB=gc(),uhe=yx(),fhe=y2(),bvt=fm(),wvt=cm(),Tvt=yL(),Avt=IM(),Mvt=fO(),che=N0(),mL=Af().WEEKDAY_PATTERN,Svt=Af().HOUR_PATTERN;vhe.exports=function(t,r,i,n,a){var o=n.letter,s=n.font||{},l=n.splomStash||{},u=i("visible",!n.visibleDflt),f=r._template||{},c=r.type||f.type||"-",h;if(c==="date"){var v=mvt.getComponentMethod("calendars","handleDefaults");v(t,r,"calendar",n.calendar),n.noTicklabelmode||(h=i("ticklabelmode"))}var d="";(!n.noTicklabelposition||c==="multicategory")&&(d=FM.coerce(t,r,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:h==="period"?["outside","inside"]:o==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),n.noTicklabeloverflow||i("ticklabeloverflow",d.indexOf("inside")!==-1?"hide past domain":c==="category"||c==="multicategory"?"allow":"hide past div"),che(r,a),Mvt(t,r,i,n),Tvt(t,r,i,n),c!=="category"&&!n.noHover&&i("hoverformat");var x=i("color"),b=x!==yB.color.dflt?x:s.color,p=l.label||a._dfltTitle[o];if(wvt(t,r,i,c,n),!u)return r;i("title.text",p),FM.coerceFont(i,"title.font",s,{overrideDflt:{size:FM.bigFont(s.size),color:b}}),uhe(t,r,i,c);var w=n.hasMinor;if(w&&(xvt.newContainer(r,"minor"),uhe(t,r,i,c,{isMinor:!0})),bvt(t,r,i,c,n),fhe(t,r,i,n),w){var A=n.isMinor;n.isMinor=!0,fhe(t,r,i,n),n.isMinor=A}Avt(t,r,i,{dfltColor:x,bgColor:n.bgColor,showGrid:n.showGrid,hasMinor:w,attributes:yB}),w&&!r.minor.ticks&&!r.minor.showgrid&&delete r.minor,(r.showline||r.ticks)&&i("mirror");var T=c==="multicategory";if(!n.noTickson&&(c==="category"||T)&&(r.ticks||r.showgrid)){var k;T&&(k="boundaries");var _=i("tickson",k);_==="boundaries"&&delete r.ticklabelposition}if(T){var E=i("showdividers");E&&(i("dividercolor"),i("dividerwidth"))}if(c==="date")if(_vt(t,r,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:Evt}),!r.rangebreaks.length)delete r.rangebreaks;else{for(var S=0;S<r.rangebreaks.length;S++)if(r.rangebreaks[S].pattern===mL){r._hasDayOfWeekBreaks=!0;break}if(che(r,a),a._has("scattergl")||a._has("splom"))for(var g=0;g<n.data.length;g++){var C=n.data[g];(C.type==="scattergl"||C.type==="splom")&&(C.visible=!1,FM.warn(C.type+" traces do not work on axes with rangebreaks. Setting trace "+C.index+" to `visible: false`."))}}return r};function Evt(e,t,r){function i(h,v){return FM.coerce(e,t,yB.rangebreaks,h,v)}var n=i("enabled");if(n){var a=i("bounds");if(a&&a.length>=2){var o="",s,l;if(a.length===2){for(s=0;s<2;s++)if(l=hhe(a[s]),l){o=mL;break}}var u=i("pattern",o);if(u===mL)for(s=0;s<2;s++)l=hhe(a[s]),l&&(t.bounds[s]=a[s]=l-1);if(u)for(s=0;s<2;s++)switch(l=a[s],u){case mL:if(!lhe(l)){t.enabled=!1;return}if(l=+l,l!==Math.floor(l)||l<0||l>=7){t.enabled=!1;return}t.bounds[s]=a[s]=l;break;case Svt:if(!lhe(l)){t.enabled=!1;return}if(l=+l,l<0||l>24){t.enabled=!1;return}t.bounds[s]=a[s]=l;break}if(r.autorange===!1){var f=r.range;if(f[0]<f[1]){if(a[0]<f[0]&&a[1]>f[1]){t.enabled=!1;return}}else if(a[0]>f[0]&&a[1]<f[1]){t.enabled=!1;return}}}else{var c=i("values");if(c&&c.length)i("dvalue");else{t.enabled=!1;return}}}}var kvt={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function hhe(e){if(typeof e=="string")return kvt[e.substr(0,3).toLowerCase()]}});var _L=ie((lir,dhe)=>{"use strict";var Cvt=la(),xL=Zt();dhe.exports=function(t,r,i,n){var a=n.counterAxes||[],o=n.overlayableAxes||[],s=n.letter,l=n.grid,u=n.overlayingDomain,f,c,h,v,d,x;l&&(c=l._domains[s][l._axisMap[r._id]],f=l._anchors[r._id],c&&(h=l[s+"side"].split(" ")[0],v=l.domain[s][h==="right"||h==="top"?1:0])),c=c||[0,1],f=f||(Cvt(t.position)?"free":a[0]||"free"),h=h||(s==="x"?"bottom":"left"),v=v||0,d=0,x=!1;var b=xL.coerce(t,r,{anchor:{valType:"enumerated",values:["free"].concat(a),dflt:f}},"anchor"),p=xL.coerce(t,r,{side:{valType:"enumerated",values:s==="x"?["bottom","top"]:["left","right"],dflt:h}},"side");if(b==="free"){if(s==="y"){var w=i("autoshift");w&&(v=p==="left"?u[0]:u[1],x=r.automargin?r.automargin:!0,d=p==="left"?-3:3),i("shift",d)}i("position",v)}i("automargin",x);var A=!1;if(o.length&&(A=xL.coerce(t,r,{overlaying:{valType:"enumerated",values:[!1].concat(o),dflt:!1}},"overlaying")),!A){var T=i("domain",c);T[0]>T[1]-1/4096&&(r.domain=c),xL.noneOrAll(t.domain,r.domain,c),r.tickmode==="sync"&&(r.tickmode="auto")}return i("layer"),r}});var The=ie((uir,whe)=>{"use strict";var Ux=Zt(),phe=_i(),Lvt=ad().isUnifiedHover,Pvt=qO(),ghe=ko(),Rvt=ox(),yhe=gc(),Dvt=gB(),mhe=qM(),Ivt=Tm(),xhe=_L(),xB=zl(),J0=xB.id2name,_he=xB.name2id,Fvt=Af().AX_ID_PATTERN,bhe=Ti(),zM=bhe.traceIs,mB=bhe.getComponentMethod;function bL(e,t,r){Array.isArray(e[t])?e[t].push(r):e[t]=[r]}whe.exports=function(t,r,i){var n=r.autotypenumbers,a={},o={},s={},l={},u={},f={},c={},h={},v={},d={},x,b;for(x=0;x<i.length;x++){var p=i[x];if(!(!zM(p,"cartesian")&&!zM(p,"gl2d"))){var w;if(p.xaxis)w=J0(p.xaxis),bL(a,w,p);else if(p.xaxes)for(b=0;b<p.xaxes.length;b++)bL(a,J0(p.xaxes[b]),p);var A;if(p.yaxis)A=J0(p.yaxis),bL(a,A,p);else if(p.yaxes)for(b=0;b<p.yaxes.length;b++)bL(a,J0(p.yaxes[b]),p);if(p.type==="funnel"?p.orientation==="h"?(w&&(o[w]=!0),A&&(c[A]=!0)):A&&(s[A]=!0):p.type==="image"?(A&&(h[A]=!0),w&&(h[w]=!0)):(A&&(u[A]=!0,f[A]=!0),(!zM(p,"carpet")||p.type==="carpet"&&!p._cheater)&&w&&(l[w]=!0)),p.type==="carpet"&&p._cheater&&w&&(o[w]=!0),zM(p,"2dMap")&&(v[w]=!0,v[A]=!0),zM(p,"oriented")){var T=p.orientation==="h"?A:w;d[T]=!0}}}var k=r._subplots,_=k.xaxis,E=k.yaxis,S=Ux.simpleMap(_,J0),g=Ux.simpleMap(E,J0),C=S.concat(g),M=phe.background;_.length&&E.length&&(M=Ux.coerce(t,r,Rvt,"plot_bgcolor"));var P=phe.combine(M,r.paper_bgcolor),D,q,O,U,B;function F(){var Ke=a[D]||[];B._traceIndices=Ke.map(function(We){return We._expandedIndex}),B._annIndices=[],B._shapeIndices=[],B._selectionIndices=[],B._imgIndices=[],B._subplotsWith=[],B._counterAxes=[],B._name=B._attr=D,B._id=q}function N(Ke,We){return Ux.coerce(U,B,yhe,Ke,We)}function X(Ke,We){return Ux.coerce2(U,B,yhe,Ke,We)}function K(Ke){return Ke==="x"?E:_}function ne(Ke,We){for(var et=Ke==="x"?S:g,vt=[],at=0;at<et.length;at++){var Xe=et[at];Xe!==We&&!(t[Xe]||{}).overlaying&&vt.push(_he(Xe))}return vt}var fe={x:K("x"),y:K("y")},ue=fe.x.concat(fe.y),ee={},Z=[];function oe(){var Ke=U.matches;Fvt.test(Ke)&&ue.indexOf(Ke)===-1&&(ee[Ke]=U.type,Z=Object.keys(ee))}var ce=Pvt(t,r),le=Lvt(ce);for(x=0;x<C.length;x++){D=C[x],q=_he(D),O=D.charAt(0),Ux.isPlainObject(t[D])||(t[D]={}),U=t[D],B=ghe.newContainer(r,D,O+"axis"),F();var me=O==="x"&&!l[D]&&o[D]||O==="y"&&!u[D]&&s[D],he=O==="y"&&(!f[D]&&c[D]||h[D]),te={hasMinor:!0,letter:O,font:r.font,outerTicks:v[D],showGrid:!d[D],data:a[D]||[],bgColor:P,calendar:r.calendar,automargin:!0,visibleDflt:me,reverseDflt:he,autotypenumbersDflt:n,splomStash:((r._splomAxes||{})[O]||{})[q],noAutotickangles:O==="y"};N("uirevision",r.uirevision),Dvt(U,B,N,te),mhe(U,B,N,te,r);var ge=le&&O===ce.charAt(0),ae=X("spikecolor",le?B.color:void 0),_e=X("spikethickness",le?1.5:void 0),Ce=X("spikedash",le?"dot":void 0),qe=X("spikemode",le?"across":void 0),rt=X("spikesnap"),Re=N("showspikes",!!ge||!!ae||!!_e||!!Ce||!!qe||!!rt);Re||(delete B.spikecolor,delete B.spikethickness,delete B.spikedash,delete B.spikemode,delete B.spikesnap);var Ie=J0(U.overlaying),ot=[0,1];if(r[Ie]!==void 0){var lt=J0(r[Ie].anchor);r[lt]!==void 0&&(ot=r[lt].domain)}xhe(U,B,N,{letter:O,counterAxes:fe[O],overlayableAxes:ne(O,D),grid:r.grid,overlayingDomain:ot}),N("title.standoff"),oe(),B._input=U}for(x=0;x<Z.length;){q=Z[x++],D=J0(q),O=D.charAt(0),Ux.isPlainObject(t[D])||(t[D]={}),U=t[D],B=ghe.newContainer(r,D,O+"axis"),F();var ht={letter:O,font:r.font,outerTicks:v[D],showGrid:!d[D],data:[],bgColor:P,calendar:r.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:n,splomStash:((r._splomAxes||{})[O]||{})[q]};N("uirevision",r.uirevision),B.type=ee[q]||"linear",mhe(U,B,N,ht,r),xhe(U,B,N,{letter:O,counterAxes:fe[O],overlayableAxes:ne(O,D),grid:r.grid}),N("fixedrange"),oe(),B._input=U}var xt=mB("rangeslider","handleDefaults"),Vt=mB("rangeselector","handleDefaults");for(x=0;x<S.length;x++)D=S[x],U=t[D],B=r[D],xt(t,r,D),B.type==="date"&&Vt(U,B,r,g,B.calendar),N("fixedrange");for(x=0;x<g.length;x++){D=g[x],U=t[D],B=r[D];var Ht=r[J0(B.anchor)],Me=mB("rangeslider","isVisible")(Ht);N("fixedrange",Me)}Ivt.handleDefaults(t,r,{axIds:ue.concat(Z).sort(xB.idSort),axHasImage:h})}});var She=ie((fir,Mhe)=>{"use strict";var qvt=Mi(),Ahe=Ti(),wL=Zt(),Id=oa(),TL=Wi();Mhe.exports=function(t,r,i,n){var a=t._fullLayout;if(r.length===0){TL.redrawComponents(t);return}function o(b){var p=b.xaxis,w=b.yaxis;a._defs.select("#"+b.clipId+"> rect").call(Id.setTranslate,0,0).call(Id.setScale,1,1),b.plot.call(Id.setTranslate,p._offset,w._offset).call(Id.setScale,1,1);var A=b.plot.selectAll(".scatterlayer .trace");A.selectAll(".point").call(Id.setPointGroupScale,1,1),A.selectAll(".textpoint").call(Id.setTextPointsScale,1,1),A.call(Id.hideOutsideRangePoints,b)}function s(b,p){var w=b.plotinfo,A=w.xaxis,T=w.yaxis,k=A._length,_=T._length,E=!!b.xr1,S=!!b.yr1,g=[];if(E){var C=wL.simpleMap(b.xr0,A.r2l),M=wL.simpleMap(b.xr1,A.r2l),P=C[1]-C[0],D=M[1]-M[0];g[0]=(C[0]*(1-p)+p*M[0]-C[0])/(C[1]-C[0])*k,g[2]=k*(1-p+p*D/P),A.range[0]=A.l2r(C[0]*(1-p)+p*M[0]),A.range[1]=A.l2r(C[1]*(1-p)+p*M[1])}else g[0]=0,g[2]=k;if(S){var q=wL.simpleMap(b.yr0,T.r2l),O=wL.simpleMap(b.yr1,T.r2l),U=q[1]-q[0],B=O[1]-O[0];g[1]=(q[1]*(1-p)+p*O[1]-q[1])/(q[0]-q[1])*_,g[3]=_*(1-p+p*B/U),T.range[0]=A.l2r(q[0]*(1-p)+p*O[0]),T.range[1]=T.l2r(q[1]*(1-p)+p*O[1])}else g[1]=0,g[3]=_;TL.drawOne(t,A,{skipTitle:!0}),TL.drawOne(t,T,{skipTitle:!0}),TL.redrawComponents(t,[A._id,T._id]);var F=E?k/g[2]:1,N=S?_/g[3]:1,X=E?g[0]:0,K=S?g[1]:0,ne=E?g[0]/g[2]*k:0,fe=S?g[1]/g[3]*_:0,ue=A._offset-ne,ee=T._offset-fe;w.clipRect.call(Id.setTranslate,X,K).call(Id.setScale,1/F,1/N),w.plot.call(Id.setTranslate,ue,ee).call(Id.setScale,F,N),Id.setPointGroupScale(w.zoomScalePts,1/F,1/N),Id.setTextPointsScale(w.zoomScaleTxt,1/F,1/N)}var l;n&&(l=n());function u(){for(var b={},p=0;p<r.length;p++){var w=r[p],A=w.plotinfo.xaxis,T=w.plotinfo.yaxis;w.xr1&&(b[A._name+".range"]=w.xr1.slice()),w.yr1&&(b[T._name+".range"]=w.yr1.slice())}return l&&l(),Ahe.call("relayout",t,b).then(function(){for(var k=0;k<r.length;k++)o(r[k].plotinfo)})}function f(){for(var b={},p=0;p<r.length;p++){var w=r[p],A=w.plotinfo.xaxis,T=w.plotinfo.yaxis;w.xr0&&(b[A._name+".range"]=w.xr0.slice()),w.yr0&&(b[T._name+".range"]=w.yr0.slice())}return Ahe.call("relayout",t,b).then(function(){for(var k=0;k<r.length;k++)o(r[k].plotinfo)})}var c,h,v,d=qvt.ease(i.easing);t._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(v),v=null,f()});function x(){h=Date.now();for(var b=Math.min(1,(h-c)/i.duration),p=d(b),w=0;w<r.length;w++)s(r[w],p);h-c>i.duration?(u(),v=window.cancelAnimationFrame(x)):v=window.requestAnimationFrame(x)}return c=Date.now(),v=window.requestAnimationFrame(x),Promise.resolve()}});var yu=ie(mh=>{"use strict";var ML=Mi(),Ehe=Ti(),OM=Zt(),zvt=js(),Ovt=oa(),khe=pc().getModuleCalcData,Cm=zl(),Q0=Af(),Bvt=Cd(),ns=OM.ensureSingle;function AL(e,t,r){return OM.ensureSingle(e,t,r,function(i){i.datum(r)})}mh.name="cartesian";mh.attr=["xaxis","yaxis"];mh.idRoot=["x","y"];mh.idRegex=Q0.idRegex;mh.attrRegex=Q0.attrRegex;mh.attributes=dB();mh.layoutAttributes=gc();mh.supplyLayoutDefaults=The();mh.transitionAxes=She();mh.finalizeSubplots=function(e,t){var r=t._subplots,i=r.xaxis,n=r.yaxis,a=r.cartesian,o=a.concat(r.gl2d||[]),s={},l={},u,f,c;for(u=0;u<o.length;u++){var h=o[u].split("y");s[h[0]]=1,l["y"+h[1]]=1}for(u=0;u<i.length;u++)f=i[u],s[f]||(c=(e[Cm.id2name(f)]||{}).anchor,Q0.idRegex.y.test(c)||(c="y"),a.push(f+c),o.push(f+c),l[c]||(l[c]=1,OM.pushUnique(n,c)));for(u=0;u<n.length;u++)c=n[u],l[c]||(f=(e[Cm.id2name(c)]||{}).anchor,Q0.idRegex.x.test(f)||(f="x"),a.push(f+c),o.push(f+c),s[f]||(s[f]=1,OM.pushUnique(i,f)));if(!o.length){f="",c="";for(var v in e)if(Q0.attrRegex.test(v)){var d=v.charAt(0);d==="x"?(!f||+v.substr(5)<+f.substr(5))&&(f=v):(!c||+v.substr(5)<+c.substr(5))&&(c=v)}f=f?Cm.name2id(f):"x",c=c?Cm.name2id(c):"y",i.push(f),n.push(c),a.push(f+c)}};mh.plot=function(e,t,r,i){var n=e._fullLayout,a=n._subplots.cartesian,o=e.calcdata,s;if(!Array.isArray(t))for(t=[],s=0;s<o.length;s++)t.push(s);for(s=0;s<a.length;s++){for(var l=a[s],u=n._plots[l],f=[],c,h=0;h<o.length;h++){var v=o[h],d=v[0].trace;d.xaxis+d.yaxis===l&&((t.indexOf(d.index)!==-1||d.carpet)&&(c&&c[0].trace.xaxis+c[0].trace.yaxis===l&&["tonextx","tonexty","tonext"].indexOf(d.fill)!==-1&&f.indexOf(c)===-1&&f.push(c),f.push(v)),c=v)}Che(e,u,f,r,i)}};function Che(e,t,r,i,n){for(var a=Q0.traceLayerClasses,o=e._fullLayout,s=o._modules,l,u,f,c={},h=0;h<r.length;h++){var v=r[h][0].trace,d=v.zorder||0;c[d]||(c[d]=[]),c[d].push(r[h])}for(var x=[],b=[],p=Object.keys(c).map(Number).sort(OM.sorterAsc),w=0;w<p.length;w++)for(var A=p[w],T=0;T<s.length;T++){l=s[T];var k=l.name,_=Ehe.modules[k].categories;if(_.svg){var E=l.layerName||k+"layer",S=E+(w?Number(w)+1:""),g=l.plot;u=khe(r,g,A),f=u[0],r=u[1],f.length&&x.push({i:a.indexOf(E),zorder:w,className:S,plotMethod:g,cdModule:f}),_.zoomScale&&b.push("."+S)}}x.sort(function(P,D){return(P.zorder||0)-(D.zorder||0)||P.i-D.i});var C=t.plot.selectAll("g.mlayer").data(x,function(P){return P.className});if(C.enter().append("g").attr("class",function(P){return P.className}).classed("mlayer",!0).classed("rangeplot",t.isRangePlot),C.exit().remove(),C.order(),C.each(function(P){var D=ML.select(this),q=P.className;P.plotMethod(e,t,P.cdModule,D,i,n),Q0.clipOnAxisFalseQuery.indexOf("."+q)===-1&&Ovt.setClipUrl(D,t.layerClipId,e)}),o._has("scattergl")&&(l=Ehe.getModule("scattergl"),f=khe(r,l)[0],l.plot(e,t,f)),!e._context.staticPlot&&(t._hasClipOnAxisFalse&&(t.clipOnAxisFalseTraces=t.plot.selectAll(Q0.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),b.length)){var M=t.plot.selectAll(b.join(",")).selectAll(".trace");t.zoomScalePts=M.selectAll("path.point"),t.zoomScaleTxt=M.selectAll(".textpoint")}}mh.clean=function(e,t,r,i){var n=i._plots||{},a=t._plots||{},o=i._subplots||{},s,l,u;if(i._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms)for(u in n)s=n[u],s.plotgroup&&s.plotgroup.remove();var f=i._has&&i._has("gl"),c=t._has&&t._has("gl");if(f&&!c)for(u in n)s=n[u],s._scene&&s._scene.destroy();if(o.xaxis&&o.yaxis){var h=Cm.listIds({_fullLayout:i});for(l=0;l<h.length;l++){var v=h[l];t[Cm.id2name(v)]||i._infolayer.selectAll(".g-"+v+"title").remove()}}var d=i._has&&i._has("cartesian"),x=t._has&&t._has("cartesian");if(d&&!x)Phe(i._cartesianlayer.selectAll(".subplot"),i),i._defs.selectAll(".axesclip").remove(),delete i._axisConstraintGroups,delete i._axisMatchGroups;else if(o.cartesian)for(l=0;l<o.cartesian.length;l++){var b=o.cartesian[l];if(!a[b]){var p="."+b+",."+b+"-x,."+b+"-y";i._cartesianlayer.selectAll(p).remove(),Rhe(b,i)}}};mh.drawFramework=function(e){var t=e._fullLayout,r=Nvt(e),i=t._cartesianlayer.selectAll(".subplot").data(r,String);i.enter().append("g").attr("class",function(n){return"subplot "+n[0]}),i.order(),i.exit().call(Phe,t),i.each(function(n){var a=n[0],o=t._plots[a];o.plotgroup=ML.select(this),Lhe(e,o),o.draglayer=ns(t._draggers,"g",a)})};mh.rangePlot=function(e,t,r){Lhe(e,t),Che(e,t,r),zvt.style(e)};function Nvt(e){var t=e._fullLayout,r=t._subplots.cartesian,i=r.length,n,a,o,s,l,u,f=[],c=[];for(n=0;n<i;n++){o=r[n],s=t._plots[o],l=s.xaxis,u=s.yaxis;var h=l._mainAxis,v=u._mainAxis,d=h._id+v._id,x=t._plots[d];s.overlays=[],d!==o&&x?(s.mainplot=d,s.mainplotinfo=x,c.push(o)):(s.mainplot=void 0,s.mainplotinfo=void 0,f.push(o))}for(n=0;n<c.length;n++)o=c[n],s=t._plots[o],s.mainplotinfo.overlays.push(s);var b=f.concat(c),p=new Array(i);for(n=0;n<i;n++){o=b[n],s=t._plots[o],l=s.xaxis,u=s.yaxis;var w=[o,l.layer,u.layer,l.overlaying||"",u.overlaying||""];for(a=0;a<s.overlays.length;a++)w.push(s.overlays[a].id);p[n]=w}return p}function Lhe(e,t){var r=t.plotgroup,i=t.id,n=Q0.layerValue2layerClass[t.xaxis.layer],a=Q0.layerValue2layerClass[t.yaxis.layer],o=e._fullLayout._hasOnlyLargeSploms;if(t.mainplot){var u=t.mainplotinfo,f=u.plotgroup,c=i+"-x",h=i+"-y";t.minorGridlayer=u.minorGridlayer,t.gridlayer=u.gridlayer,t.zerolinelayer=u.zerolinelayer,ns(u.overlinesBelow,"path",c),ns(u.overlinesBelow,"path",h),ns(u.overaxesBelow,"g",c),ns(u.overaxesBelow,"g",h),t.plot=ns(u.overplot,"g",i),ns(u.overlinesAbove,"path",c),ns(u.overlinesAbove,"path",h),ns(u.overaxesAbove,"g",c),ns(u.overaxesAbove,"g",h),t.xlines=f.select(".overlines-"+n).select("."+c),t.ylines=f.select(".overlines-"+a).select("."+h),t.xaxislayer=f.select(".overaxes-"+n).select("."+c),t.yaxislayer=f.select(".overaxes-"+a).select("."+h)}else if(o)t.xlines=ns(r,"path","xlines-above"),t.ylines=ns(r,"path","ylines-above"),t.xaxislayer=ns(r,"g","xaxislayer-above"),t.yaxislayer=ns(r,"g","yaxislayer-above");else{var s=ns(r,"g","layer-subplot");t.shapelayer=ns(s,"g","shapelayer"),t.imagelayer=ns(s,"g","imagelayer"),t.minorGridlayer=ns(r,"g","minor-gridlayer"),t.gridlayer=ns(r,"g","gridlayer"),t.zerolinelayer=ns(r,"g","zerolinelayer");var l=ns(r,"g","layer-between");t.shapelayerBetween=ns(l,"g","shapelayer"),t.imagelayerBetween=ns(l,"g","imagelayer"),ns(r,"path","xlines-below"),ns(r,"path","ylines-below"),t.overlinesBelow=ns(r,"g","overlines-below"),ns(r,"g","xaxislayer-below"),ns(r,"g","yaxislayer-below"),t.overaxesBelow=ns(r,"g","overaxes-below"),t.plot=ns(r,"g","plot"),t.overplot=ns(r,"g","overplot"),t.xlines=ns(r,"path","xlines-above"),t.ylines=ns(r,"path","ylines-above"),t.overlinesAbove=ns(r,"g","overlines-above"),ns(r,"g","xaxislayer-above"),ns(r,"g","yaxislayer-above"),t.overaxesAbove=ns(r,"g","overaxes-above"),t.xlines=r.select(".xlines-"+n),t.ylines=r.select(".ylines-"+a),t.xaxislayer=r.select(".xaxislayer-"+n),t.yaxislayer=r.select(".yaxislayer-"+a)}o||(AL(t.minorGridlayer,"g",t.xaxis._id),AL(t.minorGridlayer,"g",t.yaxis._id),t.minorGridlayer.selectAll("g").map(function(v){return v[0]}).sort(Cm.idSort),AL(t.gridlayer,"g",t.xaxis._id),AL(t.gridlayer,"g",t.yaxis._id),t.gridlayer.selectAll("g").map(function(v){return v[0]}).sort(Cm.idSort)),t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0)}function Phe(e,t){if(e){var r={};e.each(function(l){var u=l[0],f=ML.select(this);f.remove(),Rhe(u,t),r[u]=!0});for(var i in t._plots)for(var n=t._plots[i],a=n.overlays||[],o=0;o<a.length;o++){var s=a[o];r[s.id]&&s.plot.selectAll(".trace").remove()}}}function Rhe(e,t){t._draggers.selectAll("g."+e).remove(),t._defs.select("#clip"+t._uid+e+"plot").remove()}mh.toSVG=function(e){var t=e._fullLayout._glimages,r=ML.select(e).selectAll(".svg-container"),i=r.filter(function(a,o){return o===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function n(){var a=this,o=a.toDataURL("image/png"),s=t.append("svg:image");s.attr({xmlns:Bvt.svg,"xlink:href":o,preserveAspectRatio:"none",x:0,y:0,width:a.style.width,height:a.style.height})}i.each(n)};mh.updateFx=D7().updateFx});var Ihe=ie((hir,Dhe)=>{"use strict";var SL=Ks();Dhe.exports={hasLines:SL.hasLines,hasMarkers:SL.hasMarkers,hasText:SL.hasText,isBubble:SL.isBubble,attributes:Bl(),layoutAttributes:hC(),supplyDefaults:ice(),crossTraceDefaults:K7(),supplyLayoutDefaults:lce(),calc:wp().calc,crossTraceCalc:Fce(),arraysToCalcdata:K0(),plot:Z2(),colorbar:yh(),formatLabels:pL(),style:Sv().style,styleOnSelect:Sv().styleOnSelect,hoverPoints:Q2(),selectPoints:$2(),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:yu(),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}});var zhe=ie((vir,qhe)=>{"use strict";var Uvt=Mi(),Vvt=_i(),Fhe=A7(),_B=Zt(),Hvt=_B.strScale,Gvt=_B.strRotate,Yvt=_B.strTranslate;qhe.exports=function(t,r,i){var n=t.node(),a=Fhe[i.arrowhead||0],o=Fhe[i.startarrowhead||0],s=(i.arrowwidth||1)*(i.arrowsize||1),l=(i.arrowwidth||1)*(i.startarrowsize||1),u=r.indexOf("start")>=0,f=r.indexOf("end")>=0,c=a.backoff*s+i.standoff,h=o.backoff*l+i.startstandoff,v,d,x,b;if(n.nodeName==="line"){v={x:+t.attr("x1"),y:+t.attr("y1")},d={x:+t.attr("x2"),y:+t.attr("y2")};var p=v.x-d.x,w=v.y-d.y;if(x=Math.atan2(w,p),b=x+Math.PI,c&&h&&c+h>Math.sqrt(p*p+w*w)){q();return}if(c){if(c*c>p*p+w*w){q();return}var A=c*Math.cos(x),T=c*Math.sin(x);d.x+=A,d.y+=T,t.attr({x2:d.x,y2:d.y})}if(h){if(h*h>p*p+w*w){q();return}var k=h*Math.cos(x),_=h*Math.sin(x);v.x-=k,v.y-=_,t.attr({x1:v.x,y1:v.y})}}else if(n.nodeName==="path"){var E=n.getTotalLength(),S="";if(E<c+h){q();return}var g=n.getPointAtLength(0),C=n.getPointAtLength(.1);x=Math.atan2(g.y-C.y,g.x-C.x),v=n.getPointAtLength(Math.min(h,E)),S="0px,"+h+"px,";var M=n.getPointAtLength(E),P=n.getPointAtLength(E-.1);b=Math.atan2(M.y-P.y,M.x-P.x),d=n.getPointAtLength(Math.max(0,E-c));var D=S?h+c:c;S+=E-D+"px,"+E+"px",t.style("stroke-dasharray",S)}function q(){t.style("stroke-dasharray","0px,100px")}function O(U,B,F,N){U.path&&(U.noRotate&&(F=0),Uvt.select(n.parentNode).append("path").attr({class:t.attr("class"),d:U.path,transform:Yvt(B.x,B.y)+Gvt(F*180/Math.PI)+Hvt(N)}).style({fill:Vvt.rgb(i.arrowcolor),"stroke-width":0}))}u&&O(o,v,x,l),f&&O(a,d,b,s)}});var EL=ie((dir,Vhe)=>{"use strict";var Ohe=Mi(),bB=Ti(),Wvt=js(),Pm=Zt(),wB=Pm.strTranslate,NM=Wi(),Vx=_i(),jg=oa(),Bhe=Ol(),TB=ks(),AB=t0(),BM=Yh(),Xvt=ko().arrayEditor,Zvt=zhe();Vhe.exports={draw:jvt,drawOne:Nhe,drawRaw:Uhe};function jvt(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var r=0;r<t.annotations.length;r++)t.annotations[r].visible&&Nhe(e,r);return Wvt.previousPromises(e)}function Nhe(e,t){var r=e._fullLayout,i=r.annotations[t]||{},n=NM.getFromId(e,i.xref),a=NM.getFromId(e,i.yref);n&&n.setScale(),a&&a.setScale(),Uhe(e,i,t,!1,n,a)}function Lm(e,t,r,i,n){var a=n[r],o=n[r+"ref"],s=r.indexOf("y")!==-1,l=NM.getRefType(o)==="domain",u=s?i.h:i.w;return e?l?a+(s?-t:t)/e._length:e.p2r(e.r2p(a)+t):a+(s?-t:t)/u}function Uhe(e,t,r,i,n,a){var o=e._fullLayout,s=e._fullLayout._size,l=e._context.edits,u,f;i?(u="annotation-"+i,f=i+".annotations"):(u="annotation",f="annotations");var c=Xvt(e.layout,f,t),h=c.modifyBase,v=c.modifyItem,d=c.getUpdateObj;o._infolayer.selectAll("."+u+'[data-index="'+r+'"]').remove();var x="clip"+o._uid+"_ann"+r;if(!t._input||t.visible===!1){Ohe.selectAll("#"+x).remove();return}var b={x:{},y:{}},p=+t.textangle||0,w=o._infolayer.append("g").classed(u,!0).attr("data-index",String(r)).style("opacity",t.opacity),A=w.append("g").classed("annotation-text-g",!0),T=l[t.showarrow?"annotationTail":"annotationPosition"],k=t.captureevents||l.annotationText||T;function _(N){var X={index:r,annotation:t._input,fullAnnotation:t,event:N};return i&&(X.subplotId=i),X}var E=A.append("g").style("pointer-events",k?"all":null).call(AB,"pointer").on("click",function(){e._dragging=!1,e.emit("plotly_clickannotation",_(Ohe.event))});t.hovertext&&E.on("mouseover",function(){var N=t.hoverlabel,X=N.font,K=this.getBoundingClientRect(),ne=e.getBoundingClientRect();Bhe.loneHover({x0:K.left-ne.left,x1:K.right-ne.left,y:(K.top+K.bottom)/2-ne.top,text:t.hovertext,color:N.bgcolor,borderColor:N.bordercolor,fontFamily:X.family,fontSize:X.size,fontColor:X.color,fontWeight:X.weight,fontStyle:X.style,fontVariant:X.variant,fontShadow:X.fontShadow,fontLineposition:X.fontLineposition,fontTextcase:X.fontTextcase},{container:o._hoverlayer.node(),outerContainer:o._paper.node(),gd:e})}).on("mouseout",function(){Bhe.loneUnhover(o._hoverlayer.node())});var S=t.borderwidth,g=t.borderpad,C=S+g,M=E.append("rect").attr("class","bg").style("stroke-width",S+"px").call(Vx.stroke,t.bordercolor).call(Vx.fill,t.bgcolor),P=t.width||t.height,D=o._topclips.selectAll("#"+x).data(P?[0]:[]);D.enter().append("clipPath").classed("annclip",!0).attr("id",x).append("rect"),D.exit().remove();var q=t.font,O=o._meta?Pm.templateString(t.text,o._meta):t.text,U=E.append("text").classed("annotation-text",!0).text(O);function B(N){return N.call(jg.font,q).attr({"text-anchor":{left:"start",right:"end"}[t.align]||"middle"}),TB.convertToTspans(N,e,F),N}function F(){var N=U.selectAll("a");if(N.size()===1&&N.text()===U.text()){var X=E.insert("a",":first-child").attr({"xlink:xlink:href":N.attr("xlink:href"),"xlink:xlink:show":N.attr("xlink:show")}).style({cursor:"pointer"});X.node().appendChild(M.node())}var K=E.select(".annotation-text-math-group"),ne=!K.empty(),fe=jg.bBox((ne?K:U).node()),ue=fe.width,ee=fe.height,Z=t.width||ue,oe=t.height||ee,ce=Math.round(Z+2*C),le=Math.round(oe+2*C);function me(Je,Ze){return Ze==="auto"&&(Je<1/3?Ze="left":Je>2/3?Ze="right":Ze="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Ze]}for(var he=!1,te=["x","y"],ge=0;ge<te.length;ge++){var ae=te[ge],_e=t[ae+"ref"]||ae,Ce=t["a"+ae+"ref"],qe={x:n,y:a}[ae],rt=(p+(ae==="x"?0:-90))*Math.PI/180,Re=ce*Math.cos(rt),Ie=le*Math.sin(rt),ot=Math.abs(Re)+Math.abs(Ie),lt=t[ae+"anchor"],ht=t[ae+"shift"]*(ae==="x"?1:-1),xt=b[ae],Vt,Ht,Me,Ke,We,et=NM.getRefType(_e);if(qe&&et!=="domain"){var vt=qe.r2fraction(t[ae]);(vt<0||vt>1)&&(Ce===_e?(vt=qe.r2fraction(t["a"+ae]),(vt<0||vt>1)&&(he=!0)):he=!0),Vt=qe._offset+qe.r2p(t[ae]),Ke=.5}else{var at=et==="domain";ae==="x"?(Me=t[ae],Vt=at?qe._offset+qe._length*Me:Vt=s.l+s.w*Me):(Me=1-t[ae],Vt=at?qe._offset+qe._length*Me:Vt=s.t+s.h*Me),Ke=t.showarrow?.5:Me}if(t.showarrow){xt.head=Vt;var Xe=t["a"+ae];if(We=Re*me(.5,t.xanchor)-Ie*me(.5,t.yanchor),Ce===_e){var dt=NM.getRefType(Ce);dt==="domain"?(ae==="y"&&(Xe=1-Xe),xt.tail=qe._offset+qe._length*Xe):dt==="paper"?ae==="y"?(Xe=1-Xe,xt.tail=s.t+s.h*Xe):xt.tail=s.l+s.w*Xe:xt.tail=qe._offset+qe.r2p(Xe),Ht=We}else xt.tail=Vt+Xe,Ht=We+Xe;xt.text=xt.tail+We;var _t=o[ae==="x"?"width":"height"];if(_e==="paper"&&(xt.head=Pm.constrain(xt.head,1,_t-1)),Ce==="pixel"){var $t=-Math.max(xt.tail-3,xt.text),Ut=Math.min(xt.tail+3,xt.text)-_t;$t>0?(xt.tail+=$t,xt.text+=$t):Ut>0&&(xt.tail-=Ut,xt.text-=Ut)}xt.tail+=ht,xt.head+=ht}else We=ot*me(Ke,lt),Ht=We,xt.text=Vt+We;xt.text+=ht,We+=ht,Ht+=ht,t["_"+ae+"padplus"]=ot/2+Ht,t["_"+ae+"padminus"]=ot/2-Ht,t["_"+ae+"size"]=ot,t["_"+ae+"shift"]=We}if(he){E.remove();return}var fr=0,ar=0;if(t.align!=="left"&&(fr=(Z-ue)*(t.align==="center"?.5:1)),t.valign!=="top"&&(ar=(oe-ee)*(t.valign==="middle"?.5:1)),ne)K.select("svg").attr({x:C+fr-1,y:C+ar}).call(jg.setClipUrl,P?x:null,e);else{var cr=C+ar-fe.top,It=C+fr-fe.left;U.call(TB.positionText,It,cr).call(jg.setClipUrl,P?x:null,e)}D.select("rect").call(jg.setRect,C,C,Z,oe),M.call(jg.setRect,S/2,S/2,ce-S,le-S),E.call(jg.setTranslate,Math.round(b.x.text-ce/2),Math.round(b.y.text-le/2)),A.attr({transform:"rotate("+p+","+b.x.text+","+b.y.text+")"});var gt=function(Je,Ze){w.selectAll(".annotation-arrow-g").remove();var At=b.x.head,Se=b.y.head,pe=b.x.tail+Je,Te=b.y.tail+Ze,it=b.x.text+Je,Dt=b.y.text+Ze,Wt=Pm.rotationXYMatrix(p,it,Dt),er=Pm.apply2DTransform(Wt),qr=Pm.apply2DTransform2(Wt),Vr=+M.attr("width"),mr=+M.attr("height"),Fr=it-.5*Vr,nn=Fr+Vr,jn=Dt-.5*mr,xn=jn+mr,pn=[[Fr,jn,Fr,xn],[Fr,xn,nn,xn],[nn,xn,nn,jn],[nn,jn,Fr,jn]].map(qr);if(!pn.reduce(function(vr,Rr){return vr^!!Pm.segmentsIntersect(At,Se,At+1e6,Se+1e6,Rr[0],Rr[1],Rr[2],Rr[3])},!1)){pn.forEach(function(vr){var Rr=Pm.segmentsIntersect(pe,Te,At,Se,vr[0],vr[1],vr[2],vr[3]);Rr&&(pe=Rr.x,Te=Rr.y)});var ki=t.arrowwidth,qn=t.arrowcolor,bi=t.arrowside,Si=w.append("g").style({opacity:Vx.opacity(qn)}).classed("annotation-arrow-g",!0),nt=Si.append("path").attr("d","M"+pe+","+Te+"L"+At+","+Se).style("stroke-width",ki+"px").call(Vx.stroke,Vx.rgb(qn));if(Zvt(nt,bi,t),l.annotationPosition&&nt.node().parentNode&&!i){var ze=At,ut=Se;if(t.standoff){var mt=Math.sqrt(Math.pow(At-pe,2)+Math.pow(Se-Te,2));ze+=t.standoff*(pe-At)/mt,ut+=t.standoff*(Te-Se)/mt}var Ot=Si.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(pe-ze)+","+(Te-ut),transform:wB(ze,ut)}).style("stroke-width",ki+6+"px").call(Vx.stroke,"rgba(0,0,0,0)").call(Vx.fill,"rgba(0,0,0,0)"),nr,yr;BM.init({element:Ot.node(),gd:e,prepFn:function(){var vr=jg.getTranslate(E);nr=vr.x,yr=vr.y,n&&n.autorange&&h(n._name+".autorange",!0),a&&a.autorange&&h(a._name+".autorange",!0)},moveFn:function(vr,Rr){var Gr=er(nr,yr),Yr=Gr[0]+vr,Xr=Gr[1]+Rr;E.call(jg.setTranslate,Yr,Xr),v("x",Lm(n,vr,"x",s,t)),v("y",Lm(a,Rr,"y",s,t)),t.axref===t.xref&&v("ax",Lm(n,vr,"ax",s,t)),t.ayref===t.yref&&v("ay",Lm(a,Rr,"ay",s,t)),Si.attr("transform",wB(vr,Rr)),A.attr({transform:"rotate("+p+","+Yr+","+Xr+")"})},doneFn:function(){bB.call("_guiRelayout",e,d());var vr=document.querySelector(".js-notes-box-panel");vr&&vr.redraw(vr.selectedObj)}})}}};if(t.showarrow&&gt(0,0),T){var kt;BM.init({element:E.node(),gd:e,prepFn:function(){kt=A.attr("transform")},moveFn:function(Je,Ze){var At="pointer";if(t.showarrow)t.axref===t.xref?v("ax",Lm(n,Je,"ax",s,t)):v("ax",t.ax+Je),t.ayref===t.yref?v("ay",Lm(a,Ze,"ay",s.w,t)):v("ay",t.ay+Ze),gt(Je,Ze);else{if(i)return;var Se,pe;if(n)Se=Lm(n,Je,"x",s,t);else{var Te=t._xsize/s.w,it=t.x+(t._xshift-t.xshift)/s.w-Te/2;Se=BM.align(it+Je/s.w,Te,0,1,t.xanchor)}if(a)pe=Lm(a,Ze,"y",s,t);else{var Dt=t._ysize/s.h,Wt=t.y-(t._yshift+t.yshift)/s.h-Dt/2;pe=BM.align(Wt-Ze/s.h,Dt,0,1,t.yanchor)}v("x",Se),v("y",pe),(!n||!a)&&(At=BM.getCursor(n?.5:Se,a?.5:pe,t.xanchor,t.yanchor))}A.attr({transform:wB(Je,Ze)+kt}),AB(E,At)},clickFn:function(Je,Ze){t.captureevents&&e.emit("plotly_clickannotation",_(Ze))},doneFn:function(){AB(E),bB.call("_guiRelayout",e,d());var Je=document.querySelector(".js-notes-box-panel");Je&&Je.redraw(Je.selectedObj)}})}}l.annotationText?U.call(TB.makeEditable,{delegate:E,gd:e}).call(B).on("edit",function(N){t.text=N,this.call(B),v("text",N),n&&n.autorange&&h(n._name+".autorange",!0),a&&a.autorange&&h(a._name+".autorange",!0),bB.call("_guiRelayout",e,d())}):U.call(B)}});var Zhe=ie((pir,Xhe)=>{"use strict";var Hhe=Zt(),Kvt=Ti(),Ghe=ko().arrayEditor;Xhe.exports={hasClickToShow:Jvt,onClick:Qvt};function Jvt(e,t){var r=Whe(e,t);return r.on.length>0||r.explicitOff.length>0}function Qvt(e,t){var r=Whe(e,t),i=r.on,n=r.off.concat(r.explicitOff),a={},o=e._fullLayout.annotations,s,l;if(i.length||n.length){for(s=0;s<i.length;s++)l=Ghe(e.layout,"annotations",o[i[s]]),l.modifyItem("visible",!0),Hhe.extendFlat(a,l.getUpdateObj());for(s=0;s<n.length;s++)l=Ghe(e.layout,"annotations",o[n[s]]),l.modifyItem("visible",!1),Hhe.extendFlat(a,l.getUpdateObj());return Kvt.call("update",e,{},a)}}function Whe(e,t){var r=e._fullLayout.annotations,i=[],n=[],a=[],o=(t||[]).length,s,l,u,f,c,h,v,d;for(s=0;s<r.length;s++)if(u=r[s],f=u.clicktoshow,f){for(l=0;l<o;l++)if(c=t[l],h=c.xaxis,v=c.yaxis,h._id===u.xref&&v._id===u.yref&&h.d2r(c.x)===Yhe(u._xclick,h)&&v.d2r(c.y)===Yhe(u._yclick,v)){u.visible?f==="onout"?d=n:d=a:d=i,d.push(s);break}l===o&&u.visible&&f==="onout"&&n.push(s)}return{on:i,off:n,explicitOff:a}}function Yhe(e,t){return t.type==="log"?t.l2r(e):t.d2r(e)}});var SB=ie((gir,jhe)=>{"use strict";var MB=Zt(),ew=_i();jhe.exports=function(t,r,i,n){n("opacity");var a=n("bgcolor"),o=n("bordercolor"),s=ew.opacity(o);n("borderpad");var l=n("borderwidth"),u=n("showarrow");n("text",u?" ":i._dfltTitle.annotation),n("textangle"),MB.coerceFont(n,"font",i.font),n("width"),n("align");var f=n("height");if(f&&n("valign"),u){var c=n("arrowside"),h,v;c.indexOf("end")!==-1&&(h=n("arrowhead"),v=n("arrowsize")),c.indexOf("start")!==-1&&(n("startarrowhead",h),n("startarrowsize",v)),n("arrowcolor",s?r.bordercolor:ew.defaultLine),n("arrowwidth",(s&&l||1)*2),n("standoff"),n("startstandoff")}var d=n("hovertext"),x=i.hoverlabel||{};if(d){var b=n("hoverlabel.bgcolor",x.bgcolor||(ew.opacity(a)?ew.rgb(a):ew.defaultLine)),p=n("hoverlabel.bordercolor",x.bordercolor||ew.contrast(b)),w=MB.extendFlat({},x.font);w.color||(w.color=p),MB.coerceFont(n,"hoverlabel.font",w)}n("captureevents",!!d)}});var Jhe=ie((yir,Khe)=>{"use strict";var EB=Zt(),Hx=Wi(),$vt=dh(),edt=SB(),tdt=qx();Khe.exports=function(t,r){$vt(t,r,{name:"annotations",handleItemDefaults:rdt})};function rdt(e,t,r){function i(A,T){return EB.coerce(e,t,tdt,A,T)}var n=i("visible"),a=i("clicktoshow");if(n||a){edt(e,t,r,i);for(var o=t.showarrow,s=["x","y"],l=[-10,-30],u={_fullLayout:r},f=0;f<2;f++){var c=s[f],h=Hx.coerceRef(e,t,u,c,"","paper");if(h!=="paper"){var v=Hx.getFromId(u,h);v._annIndices.push(t._index)}if(Hx.coercePosition(t,u,i,h,c,.5),o){var d="a"+c,x=Hx.coerceRef(e,t,u,d,"pixel",["pixel","paper"]);x!=="pixel"&&x!==h&&(x=t[d]="pixel");var b=x==="pixel"?l[f]:.4;Hx.coercePosition(t,u,i,x,d,b)}i(c+"anchor"),i(c+"shift")}if(EB.noneOrAll(e,t,["x","y"]),o&&EB.noneOrAll(e,t,["ax","ay"]),a){var p=i("xclick"),w=i("yclick");t._xclick=p===void 0?t.x:Hx.cleanPosition(p,u,t.xref),t._yclick=w===void 0?t.y:Hx.cleanPosition(w,u,t.yref)}}}});var eve=ie((mir,$he)=>{"use strict";var kB=Zt(),Gx=Wi(),ndt=EL().draw;$he.exports=function(t){var r=t._fullLayout,i=kB.filterVisible(r.annotations);if(i.length&&t._fullData.length)return kB.syncOrAsync([ndt,idt],t)};function idt(e){var t=e._fullLayout;kB.filterVisible(t.annotations).forEach(function(r){var i=Gx.getFromId(e,r.xref),n=Gx.getFromId(e,r.yref),a=Gx.getRefType(r.xref),o=Gx.getRefType(r.yref);r._extremes={},a==="range"&&Qhe(r,i),o==="range"&&Qhe(r,n)})}function Qhe(e,t){var r=t._id,i=r.charAt(0),n=e[i],a=e["a"+i],o=e[i+"ref"],s=e["a"+i+"ref"],l=e["_"+i+"padplus"],u=e["_"+i+"padminus"],f={x:1,y:-1}[i]*e[i+"shift"],c=3*e.arrowsize*e.arrowwidth||0,h=c+f,v=c-f,d=3*e.startarrowsize*e.arrowwidth||0,x=d+f,b=d-f,p;if(s===o){var w=Gx.findExtremes(t,[t.r2c(n)],{ppadplus:h,ppadminus:v}),A=Gx.findExtremes(t,[t.r2c(a)],{ppadplus:Math.max(l,x),ppadminus:Math.max(u,b)});p={min:[w.min[0],A.min[0]],max:[w.max[0],A.max[0]]}}else x=a?x+a:x,b=a?b-a:b,p=Gx.findExtremes(t,[t.r2c(n)],{ppadplus:Math.max(l,h,x),ppadminus:Math.max(u,v,b)});e._extremes[r]=p}});var rve=ie((xir,tve)=>{"use strict";var adt=la(),odt=Ik();tve.exports=function(t,r,i,n){r=r||{};var a=i==="log"&&r.type==="linear",o=i==="linear"&&r.type==="log";if(!(a||o))return;var s=t._fullLayout.annotations,l=r._id.charAt(0),u,f;function c(v){var d=u[v],x=null;a?x=odt(d,r.range):x=Math.pow(10,d),adt(x)||(x=null),n(f+v,x)}for(var h=0;h<s.length;h++)u=s[h],f="annotations["+h+"].",u[l+"ref"]===r._id&&c(l),u["a"+l+"ref"]===r._id&&c("a"+l)}});var ave=ie((_ir,ive)=>{"use strict";var CB=EL(),nve=Zhe();ive.exports={moduleType:"component",name:"annotations",layoutAttributes:qx(),supplyLayoutDefaults:Jhe(),includeBasePlot:pM()("annotations"),calcAutorange:eve(),draw:CB.draw,drawOne:CB.drawOne,drawRaw:CB.drawRaw,hasClickToShow:nve.hasClickToShow,onClick:nve.onClick,convertCoords:rve()}});var kL=ie((bir,ove)=>{"use strict";var nl=qx(),sdt=Zs().overrideAll,ldt=ko().templatedArray;ove.exports=sdt(ldt("annotation",{visible:nl.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:nl.xanchor,xshift:nl.xshift,yanchor:nl.yanchor,yshift:nl.yshift,text:nl.text,textangle:nl.textangle,font:nl.font,width:nl.width,height:nl.height,opacity:nl.opacity,align:nl.align,valign:nl.valign,bgcolor:nl.bgcolor,bordercolor:nl.bordercolor,borderpad:nl.borderpad,borderwidth:nl.borderwidth,showarrow:nl.showarrow,arrowcolor:nl.arrowcolor,arrowhead:nl.arrowhead,startarrowhead:nl.startarrowhead,arrowside:nl.arrowside,arrowsize:nl.arrowsize,startarrowsize:nl.startarrowsize,arrowwidth:nl.arrowwidth,standoff:nl.standoff,startstandoff:nl.startstandoff,hovertext:nl.hovertext,hoverlabel:nl.hoverlabel,captureevents:nl.captureevents}),"calc","from-root")});var lve=ie((wir,sve)=>{"use strict";var LB=Zt(),udt=Wi(),fdt=dh(),cdt=SB(),hdt=kL();sve.exports=function(t,r,i){fdt(t,r,{name:"annotations",handleItemDefaults:vdt,fullLayout:i.fullLayout})};function vdt(e,t,r,i){function n(s,l){return LB.coerce(e,t,hdt,s,l)}function a(s){var l=s+"axis",u={_fullLayout:{}};return u._fullLayout[l]=r[l],udt.coercePosition(t,u,n,s,s,.5)}var o=n("visible");o&&(cdt(e,t,i.fullLayout,n),a("x"),a("y"),a("z"),LB.noneOrAll(e,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",n("xanchor"),n("yanchor"),n("xshift"),n("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",n("ax",-10),n("ay",-30),LB.noneOrAll(e,t,["ax","ay"])))}});var hve=ie((Tir,cve)=>{"use strict";var uve=Zt(),fve=Wi();cve.exports=function(t){for(var r=t.fullSceneLayout,i=r.annotations,n=0;n<i.length;n++)ddt(i[n],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()};function ddt(e,t){var r=t.fullSceneLayout,i=r.domain,n=t.fullLayout._size,a={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};e._xa={},uve.extendFlat(e._xa,a),fve.setConvert(e._xa),e._xa._offset=n.l+i.x[0]*n.w,e._xa.l2p=function(){return .5*(1+e._pdata[0]/e._pdata[3])*n.w*(i.x[1]-i.x[0])},e._ya={},uve.extendFlat(e._ya,a),fve.setConvert(e._ya),e._ya._offset=n.t+(1-i.y[1])*n.h,e._ya.l2p=function(){return .5*(1-e._pdata[1]/e._pdata[3])*n.h*(i.y[1]-i.y[0])}}});var RB=ie((Air,vve)=>{"use strict";function PB(e,t){var r=[0,0,0,0],i,n;for(i=0;i<4;++i)for(n=0;n<4;++n)r[n]+=e[4*i+n]*t[i];return r}function pdt(e,t){var r=PB(e.projection,PB(e.view,PB(e.model,[t[0],t[1],t[2],1])));return r}vve.exports=pdt});var pve=ie((Mir,dve)=>{"use strict";var gdt=EL().drawRaw,ydt=RB(),mdt=["x","y","z"];dve.exports=function(t){for(var r=t.fullSceneLayout,i=t.dataScale,n=r.annotations,a=0;a<n.length;a++){for(var o=n[a],s=!1,l=0;l<3;l++){var u=mdt[l],f=o[u],c=r[u+"axis"],h=c.r2fraction(f);if(h<0||h>1){s=!0;break}}s?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+a+'"]').remove():(o._pdata=ydt(t.glplot.cameraParams,[r.xaxis.r2l(o.x)*i[0],r.yaxis.r2l(o.y)*i[1],r.zaxis.r2l(o.z)*i[2]]),gdt(t.graphDiv,o,a,t.id,o._xa,o._ya))}}});var mve=ie((Sir,yve)=>{"use strict";var xdt=Ti(),gve=Zt();yve.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:kL()}}},layoutAttributes:kL(),handleDefaults:lve(),includeBasePlot:_dt,convert:hve(),draw:pve()};function _dt(e,t){var r=xdt.subplotsRegistry.gl3d;if(r)for(var i=r.attrRegex,n=Object.keys(e),a=0;a<n.length;a++){var o=n[a];i.test(o)&&(e[o].annotations||[]).length&&(gve.pushUnique(t._basePlotModules,r),gve.pushUnique(t._subplots.gl3d,o))}}});var DB=ie((kir,wve)=>{"use strict";var xve=qx(),_ve=Xs(),bve=Bl().line,bdt=dc().dash,h0=aa().extendFlat,wdt=ko().templatedArray,Eir=dM(),tw=rs(),Tdt=Ba().shapeTexttemplateAttrs,Adt=Wk();wve.exports=wdt("shape",{visible:h0({},tw.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:h0({},tw.legend,{editType:"calc+arraydraw"}),legendgroup:h0({},tw.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:h0({},tw.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:_ve({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:h0({},tw.legendrank,{editType:"calc+arraydraw"}),legendwidth:h0({},tw.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:h0({},xve.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:h0({},xve.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:h0({},bve.color,{editType:"arraydraw"}),width:h0({},bve.width,{editType:"calc+arraydraw"}),dash:h0({},bdt,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:Tdt({},{keys:Object.keys(Adt)}),font:_ve({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})});var Mve=ie((Cir,Ave)=>{"use strict";var UM=Zt(),rw=Wi(),Mdt=dh(),Sdt=DB(),Tve=wm();Ave.exports=function(t,r){Mdt(t,r,{name:"shapes",handleItemDefaults:kdt})};function Edt(e,t){return e?"bottom":t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle"}function kdt(e,t,r){function i(N,X){return UM.coerce(e,t,Sdt,N,X)}t._isShape=!0;var n=i("visible");if(n){var a=i("showlegend");a&&(i("legend"),i("legendwidth"),i("legendgroup"),i("legendgrouptitle.text"),UM.coerceFont(i,"legendgrouptitle.font"),i("legendrank"));var o=i("path"),s=o?"path":"rect",l=i("type",s),u=l!=="path";u&&delete t.path,i("editable"),i("layer"),i("opacity"),i("fillcolor"),i("fillrule");var f=i("line.width");f&&(i("line.color"),i("line.dash"));for(var c=i("xsizemode"),h=i("ysizemode"),v=["x","y"],d=0;d<2;d++){var x=v[d],b=x+"anchor",p=x==="x"?c:h,w={_fullLayout:r},A,T,k,_=rw.coerceRef(e,t,w,x,void 0,"paper"),E=rw.getRefType(_);if(E==="range"?(A=rw.getFromId(w,_),A._shapeIndices.push(t._index),k=Tve.rangeToShapePosition(A),T=Tve.shapePositionToRange(A)):T=k=UM.identity,u){var S=.25,g=.75,C=x+"0",M=x+"1",P=e[C],D=e[M];e[C]=T(e[C],!0),e[M]=T(e[M],!0),p==="pixel"?(i(C,0),i(M,10)):(rw.coercePosition(t,w,i,_,C,S),rw.coercePosition(t,w,i,_,M,g)),t[C]=k(t[C]),t[M]=k(t[M]),e[C]=P,e[M]=D}if(p==="pixel"){var q=e[b];e[b]=T(e[b],!0),rw.coercePosition(t,w,i,_,b,.25),t[b]=k(t[b]),e[b]=q}}u&&UM.noneOrAll(e,t,["x0","x1","y0","y1"]);var O=l==="line",U,B;if(u&&(U=i("label.texttemplate")),U||(B=i("label.text")),B||U){i("label.textangle");var F=i("label.textposition",O?"middle":"middle center");i("label.xanchor"),i("label.yanchor",Edt(O,F)),i("label.padding"),UM.coerceFont(i,"label.font",r.font)}}}});var kve=ie((Lir,Eve)=>{"use strict";var Cdt=_i(),Sve=Zt();function Ldt(e,t){return e?"bottom":t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle"}Eve.exports=function(t,r,i){i("newshape.visible"),i("newshape.name"),i("newshape.showlegend"),i("newshape.legend"),i("newshape.legendwidth"),i("newshape.legendgroup"),i("newshape.legendgrouptitle.text"),Sve.coerceFont(i,"newshape.legendgrouptitle.font"),i("newshape.legendrank"),i("newshape.drawdirection"),i("newshape.layer"),i("newshape.fillcolor"),i("newshape.fillrule"),i("newshape.opacity");var n=i("newshape.line.width");if(n){var a=(t||{}).plot_bgcolor||"#FFF";i("newshape.line.color",Cdt.contrast(a)),i("newshape.line.dash")}var o=t.dragmode==="drawline",s=i("newshape.label.text"),l=i("newshape.label.texttemplate");if(s||l){i("newshape.label.textangle");var u=i("newshape.label.textposition",o?"middle":"middle center");i("newshape.label.xanchor"),i("newshape.label.yanchor",Ldt(o,u)),i("newshape.label.padding"),Sve.coerceFont(i,"newshape.label.font",r.font)}i("activeshape.fillcolor"),i("activeshape.opacity")}});var Dve=ie((Pir,Rve)=>{"use strict";var IB=Zt(),nw=Wi(),iw=ZA(),Lve=wm();Rve.exports=function(t){var r=t._fullLayout,i=IB.filterVisible(r.shapes);if(!(!i.length||!t._fullData.length))for(var n=0;n<i.length;n++){var a=i[n];a._extremes={};var o,s,l=nw.getRefType(a.xref),u=nw.getRefType(a.yref);if(a.xref!=="paper"&&l!=="domain"){var f=a.xsizemode==="pixel"?a.xanchor:a.x0,c=a.xsizemode==="pixel"?a.xanchor:a.x1;o=nw.getFromId(t,a.xref),s=Cve(o,f,c,a.path,iw.paramIsX),s&&(a._extremes[o._id]=nw.findExtremes(o,s,Pdt(a)))}if(a.yref!=="paper"&&u!=="domain"){var h=a.ysizemode==="pixel"?a.yanchor:a.y0,v=a.ysizemode==="pixel"?a.yanchor:a.y1;o=nw.getFromId(t,a.yref),s=Cve(o,h,v,a.path,iw.paramIsY),s&&(a._extremes[o._id]=nw.findExtremes(o,s,Rdt(a)))}}};function Pdt(e){return Pve(e.line.width,e.xsizemode,e.x0,e.x1,e.path,!1)}function Rdt(e){return Pve(e.line.width,e.ysizemode,e.y0,e.y1,e.path,!0)}function Pve(e,t,r,i,n,a){var o=e/2,s=a;if(t==="pixel"){var l=n?Lve.extractPathCoords(n,a?iw.paramIsY:iw.paramIsX):[r,i],u=IB.aggNums(Math.max,null,l),f=IB.aggNums(Math.min,null,l),c=f<0?Math.abs(f)+o:o,h=u>0?u+o:o;return{ppad:o,ppadplus:s?c:h,ppadminus:s?h:c}}else return{ppad:o}}function Cve(e,t,r,i,n){var a=e.type==="category"||e.type==="multicategory"?e.r2c:e.d2c;if(t!==void 0)return[a(t),a(r)];if(i){var o=1/0,s=-1/0,l=i.match(iw.segmentRE),u,f,c,h,v;for(e.type==="date"&&(a=Lve.decodeDate(a)),u=0;u<l.length;u++)f=l[u],c=n[f.charAt(0)].drawn,c!==void 0&&(h=l[u].substr(1).match(iw.paramRE),!(!h||h.length<c)&&(v=a(h[c]),v<o&&(o=v),v>s&&(s=v)));if(s>=o)return[o,s]}}});var qve=ie((Rir,Fve)=>{"use strict";var Ive=w4();Fve.exports={moduleType:"component",name:"shapes",layoutAttributes:DB(),supplyLayoutDefaults:Mve(),supplyDrawNewShapeDefaults:kve(),includeBasePlot:pM()("shapes"),calcAutorange:Dve(),draw:Ive.draw,drawOne:Ive.drawOne}});var FB=ie((Iir,Ove)=>{"use strict";var zve=Af(),Ddt=ko().templatedArray,Dir=dM();Ove.exports=Ddt("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",zve.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",zve.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})});var Nve=ie((Fir,Bve)=>{"use strict";var Idt=Zt(),qB=Wi(),Fdt=dh(),qdt=FB(),zdt="images";Bve.exports=function(t,r){var i={name:zdt,handleItemDefaults:Odt};Fdt(t,r,i)};function Odt(e,t,r){function i(h,v){return Idt.coerce(e,t,qdt,h,v)}var n=i("source"),a=i("visible",!!n);if(!a)return t;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var o={_fullLayout:r},s=["x","y"],l=0;l<2;l++){var u=s[l],f=qB.coerceRef(e,t,o,u,"paper",void 0);if(f!=="paper"){var c=qB.getFromId(o,f);c._imgIndices.push(t._index)}qB.coercePosition(t,o,i,f,u,0)}return t}});var Gve=ie((qir,Hve)=>{"use strict";var Uve=Mi(),Bdt=oa(),aw=Wi(),Vve=zl(),Ndt=Cd();Hve.exports=function(t){var r=t._fullLayout,i=[],n={},a=[],o,s;for(s=0;s<r.images.length;s++){var l=r.images[s];if(l.visible)if(l.layer==="below"&&l.xref!=="paper"&&l.yref!=="paper"){o=Vve.ref2id(l.xref)+Vve.ref2id(l.yref);var u=r._plots[o];if(!u){a.push(l);continue}u.mainplot&&(o=u.mainplot.id),n[o]||(n[o]=[]),n[o].push(l)}else l.layer==="above"?i.push(l):a.push(l)}var f={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function c(w){var A=Uve.select(this);if(this._imgSrc!==w.source)if(A.attr("xmlns",Ndt.svg),w.source&&w.source.slice(0,5)==="data:")A.attr("xlink:href",w.source),this._imgSrc=w.source;else{var T=new Promise(function(k){var _=new Image;this.img=_,_.setAttribute("crossOrigin","anonymous"),_.onerror=E,_.onload=function(){var S=document.createElement("canvas");S.width=this.width,S.height=this.height;var g=S.getContext("2d",{willReadFrequently:!0});g.drawImage(this,0,0);var C=S.toDataURL("image/png");A.attr("xlink:href",C),k()},A.on("error",E),_.src=w.source,this._imgSrc=w.source;function E(){A.remove(),k()}}.bind(this));t._promises.push(T)}}function h(w){var A=Uve.select(this),T=aw.getFromId(t,w.xref),k=aw.getFromId(t,w.yref),_=aw.getRefType(w.xref)==="domain",E=aw.getRefType(w.yref)==="domain",S=r._size,g,C;T!==void 0?g=typeof w.xref=="string"&&_?T._length*w.sizex:Math.abs(T.l2p(w.sizex)-T.l2p(0)):g=w.sizex*S.w,k!==void 0?C=typeof w.yref=="string"&&E?k._length*w.sizey:Math.abs(k.l2p(w.sizey)-k.l2p(0)):C=w.sizey*S.h;var M=g*f.x[w.xanchor].offset,P=C*f.y[w.yanchor].offset,D=f.x[w.xanchor].sizing+f.y[w.yanchor].sizing,q,O;switch(T!==void 0?q=typeof w.xref=="string"&&_?T._length*w.x+T._offset:T.r2p(w.x)+T._offset:q=w.x*S.w+S.l,q+=M,k!==void 0?O=typeof w.yref=="string"&&E?k._length*(1-w.y)+k._offset:k.r2p(w.y)+k._offset:O=S.h-w.y*S.h+S.t,O+=P,w.sizing){case"fill":D+=" slice";break;case"stretch":D="none";break}A.attr({x:q,y:O,width:g,height:C,preserveAspectRatio:D,opacity:w.opacity});var U=T&&aw.getRefType(w.xref)!=="domain"?T._id:"",B=k&&aw.getRefType(w.yref)!=="domain"?k._id:"",F=U+B;Bdt.setClipUrl(A,F?"clip"+r._uid+F:null,t)}var v=r._imageLowerLayer.selectAll("image").data(a),d=r._imageUpperLayer.selectAll("image").data(i);v.enter().append("image"),d.enter().append("image"),v.exit().remove(),d.exit().remove(),v.each(function(w){c.bind(this)(w),h.bind(this)(w)}),d.each(function(w){c.bind(this)(w),h.bind(this)(w)});var x=Object.keys(r._plots);for(s=0;s<x.length;s++){o=x[s];var b=r._plots[o];if(b.imagelayer){var p=b.imagelayer.selectAll("image").data(n[o]||[]);p.enter().append("image"),p.exit().remove(),p.each(function(w){c.bind(this)(w),h.bind(this)(w)})}}}});var Xve=ie((zir,Wve)=>{"use strict";var Yve=la(),Udt=Ik();Wve.exports=function(t,r,i,n){r=r||{};var a=i==="log"&&r.type==="linear",o=i==="linear"&&r.type==="log";if(a||o){for(var s=t._fullLayout.images,l=r._id.charAt(0),u,f,c=0;c<s.length;c++)if(u=s[c],f="images["+c+"].",u[l+"ref"]===r._id){var h=u[l],v=u["size"+l],d=null,x=null;if(a){d=Udt(h,r.range);var b=v/Math.pow(10,d)/2;x=2*Math.log(b+Math.sqrt(1+b*b))/Math.LN10}else d=Math.pow(10,h),x=d*(Math.pow(10,v/2)-Math.pow(10,-v/2));Yve(d)?Yve(x)||(x=null):(d=null,x=null),n(f+l,d),n(f+"size"+l,x)}}}});var jve=ie((Oir,Zve)=>{"use strict";Zve.exports={moduleType:"component",name:"images",layoutAttributes:FB(),supplyLayoutDefaults:Nve(),includeBasePlot:pM()("images"),draw:Gve(),convertCoords:Xve()}});var CL=ie((Bir,Kve)=>{"use strict";Kve.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}});var zB=ie((Nir,Qve)=>{"use strict";var Vdt=Xs(),Hdt=Qu(),Gdt=aa().extendFlat,Ydt=Zs().overrideAll,Wdt=Xk(),Jve=ko().templatedArray,Xdt=Jve("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});Qve.exports=Ydt(Jve("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:Xdt,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:Gdt(Wdt({editType:"arraydraw"}),{}),font:Vdt({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:Hdt.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")});var rde=ie((Uir,tde)=>{"use strict";var LL=Zt(),$ve=dh(),ede=zB(),Zdt=CL(),jdt=Zdt.name,Kdt=ede.buttons;tde.exports=function(t,r){var i={name:jdt,handleItemDefaults:Jdt};$ve(t,r,i)};function Jdt(e,t,r){function i(o,s){return LL.coerce(e,t,ede,o,s)}var n=$ve(e,t,{name:"buttons",handleItemDefaults:Qdt}),a=i("visible",n.length>0);a&&(i("active"),i("direction"),i("type"),i("showactive"),i("x"),i("y"),LL.noneOrAll(e,t,["x","y"]),i("xanchor"),i("yanchor"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),LL.coerceFont(i,"font",r.font),i("bgcolor",r.paper_bgcolor),i("bordercolor"),i("borderwidth"))}function Qdt(e,t){function r(n,a){return LL.coerce(e,t,Kdt,n,a)}var i=r("visible",e.method==="skip"||Array.isArray(e.args));i&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}});var ade=ie((Vir,ide)=>{"use strict";ide.exports=Nl;var v0=Mi(),nde=_i(),ow=oa(),PL=Zt();function Nl(e,t,r){this.gd=e,this.container=t,this.id=r,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}Nl.barWidth=2;Nl.barLength=20;Nl.barRadius=2;Nl.barPad=1;Nl.barColor="#808BA4";Nl.prototype.enable=function(t,r,i){var n=this.gd._fullLayout,a=n.width,o=n.height;this.position=t;var s=this.position.l,l=this.position.w,u=this.position.t,f=this.position.h,c=this.position.direction,h=c==="down",v=c==="left",d=c==="right",x=c==="up",b=l,p=f,w,A,T,k;!h&&!v&&!d&&!x&&(this.position.direction="down",h=!0);var _=h||x;_?(w=s,A=w+b,h?(T=u,k=Math.min(T+p,o),p=k-T):(k=u+p,T=Math.max(k-p,0),p=k-T)):(T=u,k=T+p,v?(A=s+b,w=Math.max(A-b,0),b=A-w):(w=s,A=Math.min(w+b,a),b=A-w)),this._box={l:w,t:T,w:b,h:p};var E=l>b,S=Nl.barLength+2*Nl.barPad,g=Nl.barWidth+2*Nl.barPad,C=s,M=u+f;M+g>o&&(M=o-g);var P=this.container.selectAll("rect.scrollbar-horizontal").data(E?[0]:[]);P.exit().on(".drag",null).remove(),P.enter().append("rect").classed("scrollbar-horizontal",!0).call(nde.fill,Nl.barColor),E?(this.hbar=P.attr({rx:Nl.barRadius,ry:Nl.barRadius,x:C,y:M,width:S,height:g}),this._hbarXMin=C+S/2,this._hbarTranslateMax=b-S):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var D=f>p,q=Nl.barWidth+2*Nl.barPad,O=Nl.barLength+2*Nl.barPad,U=s+l,B=u;U+q>a&&(U=a-q);var F=this.container.selectAll("rect.scrollbar-vertical").data(D?[0]:[]);F.exit().on(".drag",null).remove(),F.enter().append("rect").classed("scrollbar-vertical",!0).call(nde.fill,Nl.barColor),D?(this.vbar=F.attr({rx:Nl.barRadius,ry:Nl.barRadius,x:U,y:B,width:q,height:O}),this._vbarYMin=B+O/2,this._vbarTranslateMax=p-O):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var N=this.id,X=w-.5,K=D?A+q+.5:A+.5,ne=T-.5,fe=E?k+g+.5:k+.5,ue=n._topdefs.selectAll("#"+N).data(E||D?[0]:[]);if(ue.exit().remove(),ue.enter().append("clipPath").attr("id",N).append("rect"),E||D?(this._clipRect=ue.select("rect").attr({x:Math.floor(X),y:Math.floor(ne),width:Math.ceil(K)-Math.floor(X),height:Math.ceil(fe)-Math.floor(ne)}),this.container.call(ow.setClipUrl,N,this.gd),this.bg.attr({x:s,y:u,width:l,height:f})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(ow.setClipUrl,null),delete this._clipRect),E||D){var ee=v0.behavior.drag().on("dragstart",function(){v0.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(ee);var Z=v0.behavior.drag().on("dragstart",function(){v0.event.sourceEvent.preventDefault(),v0.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));E&&this.hbar.on(".drag",null).call(Z),D&&this.vbar.on(".drag",null).call(Z)}this.setTranslate(r,i)};Nl.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(ow.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)};Nl.prototype._onBoxDrag=function(){var t=this.translateX,r=this.translateY;this.hbar&&(t-=v0.event.dx),this.vbar&&(r-=v0.event.dy),this.setTranslate(t,r)};Nl.prototype._onBoxWheel=function(){var t=this.translateX,r=this.translateY;this.hbar&&(t+=v0.event.deltaY),this.vbar&&(r+=v0.event.deltaY),this.setTranslate(t,r)};Nl.prototype._onBarDrag=function(){var t=this.translateX,r=this.translateY;if(this.hbar){var i=t+this._hbarXMin,n=i+this._hbarTranslateMax,a=PL.constrain(v0.event.x,i,n),o=(a-i)/(n-i),s=this.position.w-this._box.w;t=o*s}if(this.vbar){var l=r+this._vbarYMin,u=l+this._vbarTranslateMax,f=PL.constrain(v0.event.y,l,u),c=(f-l)/(u-l),h=this.position.h-this._box.h;r=c*h}this.setTranslate(t,r)};Nl.prototype.setTranslate=function(t,r){var i=this.position.w-this._box.w,n=this.position.h-this._box.h;if(t=PL.constrain(t||0,0,i),r=PL.constrain(r||0,0,n),this.translateX=t,this.translateY=r,this.container.call(ow.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-r),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+r-.5)}),this.hbar){var a=t/i;this.hbar.call(ow.setTranslate,t+a*this._hbarTranslateMax,r)}if(this.vbar){var o=r/n;this.vbar.call(ow.setTranslate,t,r+o*this._vbarTranslateMax)}}});var pde=ie((Hir,dde)=>{"use strict";var sw=Mi(),VM=js(),HM=_i(),lw=oa(),Fd=Zt(),RL=ks(),$dt=ko().arrayEditor,sde=Mf().LINE_SPACING,ka=CL(),ept=ade();dde.exports=function(t){var r=t._fullLayout,i=Fd.filterVisible(r[ka.name]);function n(h){VM.autoMargin(t,hde(h))}var a=r._menulayer.selectAll("g."+ka.containerClassName).data(i.length>0?[0]:[]);if(a.enter().append("g").classed(ka.containerClassName,!0).style("cursor","pointer"),a.exit().each(function(){sw.select(this).selectAll("g."+ka.headerGroupClassName).each(n)}).remove(),i.length!==0){var o=a.selectAll("g."+ka.headerGroupClassName).data(i,tpt);o.enter().append("g").classed(ka.headerGroupClassName,!0);for(var s=Fd.ensureSingle(a,"g",ka.dropdownButtonGroupClassName,function(h){h.style("pointer-events","all")}),l=0;l<i.length;l++){var u=i[l];spt(t,u)}var f="updatemenus"+r._uid,c=new ept(t,s,f);o.enter().size()&&(s.node().parentNode.appendChild(s.node()),s.call(BB)),o.exit().each(function(h){s.call(BB),n(h)}).remove(),o.each(function(h){var v=sw.select(this),d=h.type==="dropdown"?s:null;VM.manageCommandObserver(t,h,h.buttons,function(x){OB(t,h,h.buttons[x.index],v,d,c,x.index,!0)}),h.type==="dropdown"?(ude(t,v,s,c,h),lde(s,h)&&GM(t,v,s,c,h)):GM(t,v,null,null,h)})}};function tpt(e){return e._index}function rpt(e){return+e.attr(ka.menuIndexAttrName)==-1}function lde(e,t){return+e.attr(ka.menuIndexAttrName)===t._index}function OB(e,t,r,i,n,a,o,s){t.active=o,$dt(e.layout,ka.name,t).applyUpdate("active",o),t.type==="buttons"?GM(e,i,null,null,t):t.type==="dropdown"&&(n.attr(ka.menuIndexAttrName,"-1"),ude(e,i,n,a,t),s||GM(e,i,n,a,t))}function ude(e,t,r,i,n){var a=Fd.ensureSingle(t,"g",ka.headerClassName,function(h){h.style("pointer-events","all")}),o=n._dims,s=n.active,l=n.buttons[s]||ka.blankHeaderOpts,u={y:n.pad.t,yPad:0,x:n.pad.l,xPad:0,index:0},f={width:o.headerWidth,height:o.headerHeight};a.call(NB,n,l,e).call(vde,n,u,f);var c=Fd.ensureSingle(t,"text",ka.headerArrowClassName,function(h){h.attr("text-anchor","end").call(lw.font,n.font).text(ka.arrowSymbol[n.direction])});c.attr({x:o.headerWidth-ka.arrowOffsetX+n.pad.l,y:o.headerHeight/2+ka.textOffsetY+n.pad.t}),a.on("click",function(){r.call(BB,String(lde(r,n)?-1:n._index)),GM(e,t,r,i,n)}),a.on("mouseover",function(){a.call(fde)}),a.on("mouseout",function(){a.call(cde,n)}),lw.setTranslate(t,o.lx,o.ly)}function GM(e,t,r,i,n){r||(r=t,r.attr("pointer-events","all"));var a=!rpt(r)||n.type==="buttons"?n.buttons:[],o=n.type==="dropdown"?ka.dropdownButtonClassName:ka.buttonClassName,s=r.selectAll("g."+o).data(Fd.filterVisible(a)),l=s.enter().append("g").classed(o,!0),u=s.exit();n.type==="dropdown"?(l.attr("opacity","0").transition().attr("opacity","1"),u.transition().attr("opacity","0").remove()):u.remove();var f=0,c=0,h=n._dims,v=["up","down"].indexOf(n.direction)!==-1;n.type==="dropdown"&&(v?c=h.headerHeight+ka.gapButtonHeader:f=h.headerWidth+ka.gapButtonHeader),n.type==="dropdown"&&n.direction==="up"&&(c=-ka.gapButtonHeader+ka.gapButton-h.openHeight),n.type==="dropdown"&&n.direction==="left"&&(f=-ka.gapButtonHeader+ka.gapButton-h.openWidth);var d={x:h.lx+f+n.pad.l,y:h.ly+c+n.pad.t,yPad:ka.gapButton,xPad:ka.gapButton,index:0},x={l:d.x+n.borderwidth,t:d.y+n.borderwidth};s.each(function(b,p){var w=sw.select(this);w.call(NB,n,b,e).call(vde,n,d),w.on("click",function(){sw.event.defaultPrevented||(b.execute&&(b.args2&&n.active===p?(OB(e,n,b,t,r,i,-1),VM.executeAPICommand(e,b.method,b.args2)):(OB(e,n,b,t,r,i,p),VM.executeAPICommand(e,b.method,b.args))),e.emit("plotly_buttonclicked",{menu:n,button:b,active:n.active}))}),w.on("mouseover",function(){w.call(fde)}),w.on("mouseout",function(){w.call(cde,n),s.call(ode,n)})}),s.call(ode,n),v?(x.w=Math.max(h.openWidth,h.headerWidth),x.h=d.y-x.t):(x.w=d.x-x.l,x.h=Math.max(h.openHeight,h.headerHeight)),x.direction=n.direction,i&&(s.size()?npt(e,t,r,i,n,x):ipt(i))}function npt(e,t,r,i,n,a){var o=n.direction,s=o==="up"||o==="down",l=n._dims,u=n.active,f,c,h;if(s)for(c=0,h=0;h<u;h++)c+=l.heights[h]+ka.gapButton;else for(f=0,h=0;h<u;h++)f+=l.widths[h]+ka.gapButton;i.enable(a,f,c),i.hbar&&i.hbar.attr("opacity","0").transition().attr("opacity","1"),i.vbar&&i.vbar.attr("opacity","0").transition().attr("opacity","1")}function ipt(e){var t=!!e.hbar,r=!!e.vbar;t&&e.hbar.transition().attr("opacity","0").each("end",function(){t=!1,r||e.disable()}),r&&e.vbar.transition().attr("opacity","0").each("end",function(){r=!1,t||e.disable()})}function NB(e,t,r,i){e.call(apt,t).call(opt,t,r,i)}function apt(e,t){var r=Fd.ensureSingle(e,"rect",ka.itemRectClassName,function(i){i.attr({rx:ka.rx,ry:ka.ry,"shape-rendering":"crispEdges"})});r.call(HM.stroke,t.bordercolor).call(HM.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function opt(e,t,r,i){var n=Fd.ensureSingle(e,"text",ka.itemTextClassName,function(s){s.attr({"text-anchor":"start","data-notex":1})}),a=r.label,o=i._fullLayout._meta;o&&(a=Fd.templateString(a,o)),n.call(lw.font,t.font).text(a).call(RL.convertToTspans,i)}function ode(e,t){var r=t.active;e.each(function(i,n){var a=sw.select(this);n===r&&t.showactive&&a.select("rect."+ka.itemRectClassName).call(HM.fill,ka.activeColor)})}function fde(e){e.select("rect."+ka.itemRectClassName).call(HM.fill,ka.hoverColor)}function cde(e,t){e.select("rect."+ka.itemRectClassName).call(HM.fill,t.bgcolor)}function spt(e,t){var r=t._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},i=lw.tester.selectAll("g."+ka.dropdownButtonClassName).data(Fd.filterVisible(t.buttons));i.enter().append("g").classed(ka.dropdownButtonClassName,!0);var n=["up","down"].indexOf(t.direction)!==-1;i.each(function(f,c){var h=sw.select(this);h.call(NB,t,f,e);var v=h.select("."+ka.itemTextClassName),d=v.node()&&lw.bBox(v.node()).width,x=Math.max(d+ka.textPadX,ka.minWidth),b=t.font.size*sde,p=RL.lineCount(v),w=Math.max(b*p,ka.minHeight)+ka.textOffsetY;w=Math.ceil(w),x=Math.ceil(x),r.widths[c]=x,r.heights[c]=w,r.height1=Math.max(r.height1,w),r.width1=Math.max(r.width1,x),n?(r.totalWidth=Math.max(r.totalWidth,x),r.openWidth=r.totalWidth,r.totalHeight+=w+ka.gapButton,r.openHeight+=w+ka.gapButton):(r.totalWidth+=x+ka.gapButton,r.openWidth+=x+ka.gapButton,r.totalHeight=Math.max(r.totalHeight,w),r.openHeight=r.totalHeight)}),n?r.totalHeight-=ka.gapButton:r.totalWidth-=ka.gapButton,r.headerWidth=r.width1+ka.arrowPadX,r.headerHeight=r.height1,t.type==="dropdown"&&(n?(r.width1+=ka.arrowPadX,r.totalHeight=r.height1):r.totalWidth=r.width1,r.totalWidth+=ka.arrowPadX),i.remove();var a=r.totalWidth+t.pad.l+t.pad.r,o=r.totalHeight+t.pad.t+t.pad.b,s=e._fullLayout._size;r.lx=s.l+s.w*t.x,r.ly=s.t+s.h*(1-t.y);var l="left";Fd.isRightAnchor(t)&&(r.lx-=a,l="right"),Fd.isCenterAnchor(t)&&(r.lx-=a/2,l="center");var u="top";Fd.isBottomAnchor(t)&&(r.ly-=o,u="bottom"),Fd.isMiddleAnchor(t)&&(r.ly-=o/2,u="middle"),r.totalWidth=Math.ceil(r.totalWidth),r.totalHeight=Math.ceil(r.totalHeight),r.lx=Math.round(r.lx),r.ly=Math.round(r.ly),VM.autoMargin(e,hde(t),{x:t.x,y:t.y,l:a*({right:1,center:.5}[l]||0),r:a*({left:1,center:.5}[l]||0),b:o*({top:1,middle:.5}[u]||0),t:o*({bottom:1,middle:.5}[u]||0)})}function hde(e){return ka.autoMarginIdRoot+e._index}function vde(e,t,r,i){i=i||{};var n=e.select("."+ka.itemRectClassName),a=e.select("."+ka.itemTextClassName),o=t.borderwidth,s=r.index,l=t._dims;lw.setTranslate(e,o+r.x,o+r.y);var u=["up","down"].indexOf(t.direction)!==-1,f=i.height||(u?l.heights[s]:l.height1);n.attr({x:0,y:0,width:i.width||(u?l.width1:l.widths[s]),height:f});var c=t.font.size*sde,h=RL.lineCount(a),v=(h-1)*c/2;RL.positionText(a,ka.textOffsetX,f/2-v+ka.textOffsetY),u?r.y+=l.heights[s]+r.yPad:r.x+=l.widths[s]+r.xPad,r.index++}function BB(e,t){e.attr(ka.menuIndexAttrName,t||"-1").selectAll("g."+ka.dropdownButtonClassName).remove()}});var yde=ie((Gir,gde)=>{"use strict";var lpt=CL();gde.exports={moduleType:"component",name:lpt.name,layoutAttributes:zB(),supplyLayoutDefaults:rde(),draw:pde()}});var YM=ie((Yir,mde)=>{"use strict";mde.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}});var UB=ie((Wir,bde)=>{"use strict";var xde=Xs(),upt=Xk(),fpt=aa().extendDeepAll,cpt=Zs().overrideAll,hpt=pA(),_de=ko().templatedArray,Yx=YM(),vpt=_de("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});bde.exports=cpt(_de("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:vpt,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:fpt(upt({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:hpt.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:xde({})},font:xde({}),activebgcolor:{valType:"color",dflt:Yx.gripBgActiveColor},bgcolor:{valType:"color",dflt:Yx.railBgColor},bordercolor:{valType:"color",dflt:Yx.railBorderColor},borderwidth:{valType:"number",min:0,dflt:Yx.railBorderWidth},ticklen:{valType:"number",min:0,dflt:Yx.tickLength},tickcolor:{valType:"color",dflt:Yx.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:Yx.minorTickLength}}),"arraydraw","from-root")});var Mde=ie((Xir,Ade)=>{"use strict";var uw=Zt(),wde=dh(),Tde=UB(),dpt=YM(),ppt=dpt.name,gpt=Tde.steps;Ade.exports=function(t,r){wde(t,r,{name:ppt,handleItemDefaults:ypt})};function ypt(e,t,r){function i(c,h){return uw.coerce(e,t,Tde,c,h)}for(var n=wde(e,t,{name:"steps",handleItemDefaults:mpt}),a=0,o=0;o<n.length;o++)n[o].visible&&a++;var s;if(a<2?s=t.visible=!1:s=i("visible"),!!s){t._stepCount=a;var l=t._visibleSteps=uw.filterVisible(n),u=i("active");(n[u]||{}).visible||(t.active=l[0]._index),i("x"),i("y"),uw.noneOrAll(e,t,["x","y"]),i("xanchor"),i("yanchor"),i("len"),i("lenmode"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),uw.coerceFont(i,"font",r.font);var f=i("currentvalue.visible");f&&(i("currentvalue.xanchor"),i("currentvalue.prefix"),i("currentvalue.suffix"),i("currentvalue.offset"),uw.coerceFont(i,"currentvalue.font",t.font)),i("transition.duration"),i("transition.easing"),i("bgcolor"),i("activebgcolor"),i("bordercolor"),i("borderwidth"),i("ticklen"),i("tickwidth"),i("tickcolor"),i("minorticklen")}}function mpt(e,t){function r(a,o){return uw.coerce(e,t,gpt,a,o)}var i;if(e.method!=="skip"&&!Array.isArray(e.args)?i=t.visible=!1:i=r("visible"),i){r("method"),r("args");var n=r("label","step-"+t._index);r("value",n),r("execute")}}});var Fde=ie((Zir,Ide)=>{"use strict";var d0=Mi(),DL=js(),Rm=_i(),p0=oa(),qd=Zt(),xpt=qd.strTranslate,WM=ks(),_pt=ko().arrayEditor,oo=YM(),GB=Mf(),kde=GB.LINE_SPACING,VB=GB.FROM_TL,HB=GB.FROM_BR;Ide.exports=function(t){var r=t._context.staticPlot,i=t._fullLayout,n=bpt(i,t),a=i._infolayer.selectAll("g."+oo.containerClassName).data(n.length>0?[0]:[]);a.enter().append("g").classed(oo.containerClassName,!0).style("cursor",r?null:"ew-resize");function o(f){f._commandObserver&&(f._commandObserver.remove(),delete f._commandObserver),DL.autoMargin(t,Cde(f))}if(a.exit().each(function(){d0.select(this).selectAll("g."+oo.groupClassName).each(o)}).remove(),n.length!==0){var s=a.selectAll("g."+oo.groupClassName).data(n,wpt);s.enter().append("g").classed(oo.groupClassName,!0),s.exit().each(o).remove();for(var l=0;l<n.length;l++){var u=n[l];Tpt(t,u)}s.each(function(f){var c=d0.select(this);kpt(f),DL.manageCommandObserver(t,f,f._visibleSteps,function(h){var v=c.data()[0];v.active!==h.index&&(v._dragging||Pde(t,c,v,h.index,!1,!0))}),Apt(t,d0.select(this),f)})}};function Cde(e){return oo.autoMarginIdRoot+e._index}function bpt(e,t){for(var r=e[oo.name],i=[],n=0;n<r.length;n++){var a=r[n];a.visible&&(a._gd=t,i.push(a))}return i}function wpt(e){return e._index}function Tpt(e,t){var r=p0.tester.selectAll("g."+oo.labelGroupClass).data(t._visibleSteps);r.enter().append("g").classed(oo.labelGroupClass,!0);var i=0,n=0;r.each(function(d){var x=d0.select(this),b=Lde(x,{step:d},t),p=b.node();if(p){var w=p0.bBox(p);n=Math.max(n,w.height),i=Math.max(i,w.width)}}),r.remove();var a=t._dims={};a.inputAreaWidth=Math.max(oo.railWidth,oo.gripHeight);var o=e._fullLayout._size;a.lx=o.l+o.w*t.x,a.ly=o.t+o.h*(1-t.y),t.lenmode==="fraction"?a.outerLength=Math.round(o.w*t.len):a.outerLength=t.len,a.inputAreaStart=0,a.inputAreaLength=Math.round(a.outerLength-t.pad.l-t.pad.r);var s=a.inputAreaLength-2*oo.stepInset,l=s/(t._stepCount-1),u=i+oo.labelPadding;if(a.labelStride=Math.max(1,Math.ceil(u/l)),a.labelHeight=n,a.currentValueMaxWidth=0,a.currentValueHeight=0,a.currentValueTotalHeight=0,a.currentValueMaxLines=1,t.currentvalue.visible){var f=p0.tester.append("g");r.each(function(d){var x=IL(f,t,d.label),b=x.node()&&p0.bBox(x.node())||{width:0,height:0},p=WM.lineCount(x);a.currentValueMaxWidth=Math.max(a.currentValueMaxWidth,Math.ceil(b.width)),a.currentValueHeight=Math.max(a.currentValueHeight,Math.ceil(b.height)),a.currentValueMaxLines=Math.max(a.currentValueMaxLines,p)}),a.currentValueTotalHeight=a.currentValueHeight+t.currentvalue.offset,f.remove()}a.height=a.currentValueTotalHeight+oo.tickOffset+t.ticklen+oo.labelOffset+a.labelHeight+t.pad.t+t.pad.b;var c="left";qd.isRightAnchor(t)&&(a.lx-=a.outerLength,c="right"),qd.isCenterAnchor(t)&&(a.lx-=a.outerLength/2,c="center");var h="top";qd.isBottomAnchor(t)&&(a.ly-=a.height,h="bottom"),qd.isMiddleAnchor(t)&&(a.ly-=a.height/2,h="middle"),a.outerLength=Math.ceil(a.outerLength),a.height=Math.ceil(a.height),a.lx=Math.round(a.lx),a.ly=Math.round(a.ly);var v={y:t.y,b:a.height*HB[h],t:a.height*VB[h]};t.lenmode==="fraction"?(v.l=0,v.xl=t.x-t.len*VB[c],v.r=0,v.xr=t.x+t.len*HB[c]):(v.x=t.x,v.l=a.outerLength*VB[c],v.r=a.outerLength*HB[c]),DL.autoMargin(e,Cde(t),v)}function Apt(e,t,r){(r.steps[r.active]||{}).visible||(r.active=r._visibleSteps[0]._index),t.call(IL,r).call(Lpt,r).call(Spt,r).call(Ept,r).call(Cpt,e,r).call(Mpt,e,r);var i=r._dims;p0.setTranslate(t,i.lx+r.pad.l,i.ly+r.pad.t),t.call(Dde,r,!1),t.call(IL,r)}function IL(e,t,r){if(t.currentvalue.visible){var i=t._dims,n,a;switch(t.currentvalue.xanchor){case"right":n=i.inputAreaLength-oo.currentValueInset-i.currentValueMaxWidth,a="left";break;case"center":n=i.inputAreaLength*.5,a="middle";break;default:n=oo.currentValueInset,a="left"}var o=qd.ensureSingle(e,"text",oo.labelClass,function(h){h.attr({"text-anchor":a,"data-notex":1})}),s=t.currentvalue.prefix?t.currentvalue.prefix:"";if(typeof r=="string")s+=r;else{var l=t.steps[t.active].label,u=t._gd._fullLayout._meta;u&&(l=qd.templateString(l,u)),s+=l}t.currentvalue.suffix&&(s+=t.currentvalue.suffix),o.call(p0.font,t.currentvalue.font).text(s).call(WM.convertToTspans,t._gd);var f=WM.lineCount(o),c=(i.currentValueMaxLines+1-f)*t.currentvalue.font.size*kde;return WM.positionText(o,n,c),o}}function Mpt(e,t,r){var i=qd.ensureSingle(e,"rect",oo.gripRectClass,function(n){n.call(Rde,t,e,r).style("pointer-events","all")});i.attr({width:oo.gripWidth,height:oo.gripHeight,rx:oo.gripRadius,ry:oo.gripRadius}).call(Rm.stroke,r.bordercolor).call(Rm.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function Lde(e,t,r){var i=qd.ensureSingle(e,"text",oo.labelClass,function(o){o.attr({"text-anchor":"middle","data-notex":1})}),n=t.step.label,a=r._gd._fullLayout._meta;return a&&(n=qd.templateString(n,a)),i.call(p0.font,r.font).text(n).call(WM.convertToTspans,r._gd),i}function Spt(e,t){var r=qd.ensureSingle(e,"g",oo.labelsClass),i=t._dims,n=r.selectAll("g."+oo.labelGroupClass).data(i.labelSteps);n.enter().append("g").classed(oo.labelGroupClass,!0),n.exit().remove(),n.each(function(a){var o=d0.select(this);o.call(Lde,a,t),p0.setTranslate(o,YB(t,a.fraction),oo.tickOffset+t.ticklen+t.font.size*kde+oo.labelOffset+i.currentValueTotalHeight)})}function Sde(e,t,r,i,n){var a=Math.round(i*(r._stepCount-1)),o=r._visibleSteps[a]._index;o!==r.active&&Pde(e,t,r,o,!0,n)}function Pde(e,t,r,i,n,a){var o=r.active;r.active=i,_pt(e.layout,oo.name,r).applyUpdate("active",i);var s=r.steps[r.active];t.call(Dde,r,a),t.call(IL,r),e.emit("plotly_sliderchange",{slider:r,step:r.steps[r.active],interaction:n,previousActive:o}),s&&s.method&&n&&(t._nextMethod?(t._nextMethod.step=s,t._nextMethod.doCallback=n,t._nextMethod.doTransition=a):(t._nextMethod={step:s,doCallback:n,doTransition:a},t._nextMethodRaf=window.requestAnimationFrame(function(){var l=t._nextMethod.step;l.method&&(l.execute&&DL.executeAPICommand(e,l.method,l.args),t._nextMethod=null,t._nextMethodRaf=null)})))}function Rde(e,t,r){if(t._context.staticPlot)return;var i=r.node(),n=d0.select(t);function a(){return r.data()[0]}function o(){var s=a();t.emit("plotly_sliderstart",{slider:s});var l=r.select("."+oo.gripRectClass);d0.event.stopPropagation(),d0.event.preventDefault(),l.call(Rm.fill,s.activebgcolor);var u=Ede(s,d0.mouse(i)[0]);Sde(t,r,s,u,!0),s._dragging=!0;function f(){var h=a(),v=Ede(h,d0.mouse(i)[0]);Sde(t,r,h,v,!1)}n.on("mousemove",f),n.on("touchmove",f);function c(){var h=a();h._dragging=!1,l.call(Rm.fill,h.bgcolor),n.on("mouseup",null),n.on("mousemove",null),n.on("touchend",null),n.on("touchmove",null),t.emit("plotly_sliderend",{slider:h,step:h.steps[h.active]})}n.on("mouseup",c),n.on("touchend",c)}e.on("mousedown",o),e.on("touchstart",o)}function Ept(e,t){var r=e.selectAll("rect."+oo.tickRectClass).data(t._visibleSteps),i=t._dims;r.enter().append("rect").classed(oo.tickRectClass,!0),r.exit().remove(),r.attr({width:t.tickwidth+"px","shape-rendering":"crispEdges"}),r.each(function(n,a){var o=a%i.labelStride===0,s=d0.select(this);s.attr({height:o?t.ticklen:t.minorticklen}).call(Rm.fill,t.tickcolor),p0.setTranslate(s,YB(t,a/(t._stepCount-1))-.5*t.tickwidth,(o?oo.tickOffset:oo.minorTickOffset)+i.currentValueTotalHeight)})}function kpt(e){var t=e._dims;t.labelSteps=[];for(var r=e._stepCount,i=0;i<r;i+=t.labelStride)t.labelSteps.push({fraction:i/(r-1),step:e._visibleSteps[i]})}function Dde(e,t,r){for(var i=e.select("rect."+oo.gripRectClass),n=0,a=0;a<t._stepCount;a++)if(t._visibleSteps[a]._index===t.active){n=a;break}var o=YB(t,n/(t._stepCount-1));if(!t._invokingCommand){var s=i;r&&t.transition.duration>0&&(s=s.transition().duration(t.transition.duration).ease(t.transition.easing)),s.attr("transform",xpt(o-oo.gripWidth*.5,t._dims.currentValueTotalHeight))}}function YB(e,t){var r=e._dims;return r.inputAreaStart+oo.stepInset+(r.inputAreaLength-2*oo.stepInset)*Math.min(1,Math.max(0,t))}function Ede(e,t){var r=e._dims;return Math.min(1,Math.max(0,(t-oo.stepInset-r.inputAreaStart)/(r.inputAreaLength-2*oo.stepInset-2*r.inputAreaStart)))}function Cpt(e,t,r){var i=r._dims,n=qd.ensureSingle(e,"rect",oo.railTouchRectClass,function(a){a.call(Rde,t,e,r).style("pointer-events","all")});n.attr({width:i.inputAreaLength,height:Math.max(i.inputAreaWidth,oo.tickOffset+r.ticklen+i.labelHeight)}).call(Rm.fill,r.bgcolor).attr("opacity",0),p0.setTranslate(n,0,i.currentValueTotalHeight)}function Lpt(e,t){var r=t._dims,i=r.inputAreaLength-oo.railInset*2,n=qd.ensureSingle(e,"rect",oo.railRectClass);n.attr({width:i,height:oo.railWidth,rx:oo.railRadius,ry:oo.railRadius,"shape-rendering":"crispEdges"}).call(Rm.stroke,t.bordercolor).call(Rm.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px"),p0.setTranslate(n,oo.railInset,(r.inputAreaWidth-oo.railWidth)*.5+r.currentValueTotalHeight)}});var zde=ie((jir,qde)=>{"use strict";var Ppt=YM();qde.exports={moduleType:"component",name:Ppt.name,layoutAttributes:UB(),supplyLayoutDefaults:Mde(),draw:Fde()}});var FL=ie((Kir,Bde)=>{"use strict";var Ode=Qu();Bde.exports={bgcolor:{valType:"color",dflt:Ode.background,editType:"plot"},bordercolor:{valType:"color",dflt:Ode.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}});var WB=ie((Jir,Nde)=>{"use strict";Nde.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}});var qL=ie((Qir,Ude)=>{"use strict";Ude.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}});var Gde=ie(OL=>{"use strict";var Rpt=zl(),Dpt=ks(),Vde=qL(),Ipt=Mf().LINE_SPACING,zL=Vde.name;function Hde(e){var t=e&&e[zL];return t&&t.visible}OL.isVisible=Hde;OL.makeData=function(e){var t=Rpt.list({_fullLayout:e},"x",!0),r=e.margin,i=[];if(!e._has("gl2d"))for(var n=0;n<t.length;n++){var a=t[n];if(Hde(a)){i.push(a);var o=a[zL];o._id=zL+a._id,o._height=(e.height-r.b-r.t)*o.thickness,o._offsetShift=Math.floor(o.borderwidth/2)}}e._rangeSliderData=i};OL.autoMarginOpts=function(e,t){var r=e._fullLayout,i=t[zL],n=t._id.charAt(0),a=0,o=0;if(t.side==="bottom"&&(a=t._depth,t.title.text!==r._dfltTitle[n])){o=1.5*t.title.font.size+10+i._offsetShift;var s=(t.title.text.match(Dpt.BR_TAG_ALL)||[]).length;o+=s*t.title.font.size*Ipt}return{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:i._height+a+Math.max(r.margin.b,o),pad:Vde.extraPad+i._offsetShift*2}}});var Zde=ie((ear,Xde)=>{"use strict";var BL=Zt(),Yde=ko(),Wde=zl(),Fpt=FL(),qpt=WB();Xde.exports=function(t,r,i){var n=t[i],a=r[i];if(!(n.rangeslider||r._requestRangeslider[a._id]))return;BL.isPlainObject(n.rangeslider)||(n.rangeslider={});var o=n.rangeslider,s=Yde.newContainer(a,"rangeslider");function l(k,_){return BL.coerce(o,s,Fpt,k,_)}var u,f;function c(k,_){return BL.coerce(u,f,qpt,k,_)}var h=l("visible");if(h){l("bgcolor",r.plot_bgcolor),l("bordercolor"),l("borderwidth"),l("thickness"),l("autorange",!a.isValidRange(o.range)),l("range");var v=r._subplots;if(v)for(var d=v.cartesian.filter(function(k){return k.substr(0,k.indexOf("y"))===Wde.name2id(i)}).map(function(k){return k.substr(k.indexOf("y"),k.length)}),x=BL.simpleMap(d,Wde.id2name),b=0;b<x.length;b++){var p=x[b];u=o[p]||{},f=Yde.newContainer(s,p,"yaxis");var w=r[p],A;u.range&&w.isValidRange(u.range)&&(A="fixed");var T=c("rangemode",A);T!=="match"&&c("range",w.range.slice())}s._input=o}}});var Kde=ie((tar,jde)=>{"use strict";var zpt=zl().list,Opt=Ld().getAutoRange,Bpt=qL();jde.exports=function(t){for(var r=zpt(t,"x",!0),i=0;i<r.length;i++){var n=r[i],a=n[Bpt.name];a&&a.visible&&a.autorange&&(a._input.autorange=!0,a._input.range=a.range=Opt(t,n))}}});var epe=ie((rar,$de)=>{"use strict";var NL=Mi(),Npt=Ti(),Upt=js(),mu=Zt(),UL=mu.strTranslate,Qde=oa(),Dm=_i(),Vpt=wx(),Hpt=yu(),XB=zl(),Gpt=Yh(),Ypt=t0(),xo=qL();$de.exports=function(e){for(var t=e._fullLayout,r=t._rangeSliderData,i=0;i<r.length;i++){var n=r[i][xo.name];n._clipId=n._id+"-"+t._uid}function a(s){return s._name}var o=t._infolayer.selectAll("g."+xo.containerClassName).data(r,a);o.exit().each(function(s){var l=s[xo.name];t._topdefs.select("#"+l._clipId).remove()}).remove(),r.length!==0&&(o.enter().append("g").classed(xo.containerClassName,!0).attr("pointer-events","all"),o.each(function(s){var l=NL.select(this),u=s[xo.name],f=t[XB.id2name(s.anchor)],c=u[XB.id2name(s.anchor)];if(u.range){var h=mu.simpleMap(u.range,s.r2l),v=mu.simpleMap(s.range,s.r2l),d;v[0]<v[1]?d=[Math.min(h[0],v[0]),Math.max(h[1],v[1])]:d=[Math.max(h[0],v[0]),Math.min(h[1],v[1])],u.range=u._input.range=mu.simpleMap(d,s.l2r)}s.cleanRange("rangeslider.range");var x=t._size,b=s.domain;u._width=x.w*(b[1]-b[0]);var p=Math.round(x.l+x.w*b[0]),w=Math.round(x.t+x.h*(1-s._counterDomainMin)+(s.side==="bottom"?s._depth:0)+u._offsetShift+xo.extraPad);l.attr("transform",UL(p,w)),u._rl=mu.simpleMap(u.range,s.r2l);var A=u._rl[0],T=u._rl[1],k=T-A;if(u.p2d=function(O){return O/u._width*k+A},u.d2p=function(O){return(O-A)/k*u._width},s.rangebreaks){var _=s.locateBreaks(A,T);if(_.length){var E,S,g=0;for(E=0;E<_.length;E++)S=_[E],g+=S.max-S.min;var C=u._width/(T-A-g),M=[-C*A];for(E=0;E<_.length;E++)S=_[E],M.push(M[M.length-1]-C*(S.max-S.min));for(u.d2p=function(O){for(var U=M[0],B=0;B<_.length;B++){var F=_[B];if(O>=F.max)U=M[B+1];else if(O<F.min)break}return U+C*O},E=0;E<_.length;E++)S=_[E],S.pmin=u.d2p(S.min),S.pmax=u.d2p(S.max);u.p2d=function(O){for(var U=M[0],B=0;B<_.length;B++){var F=_[B];if(O>=F.pmax)U=M[B+1];else if(O<F.pmin)break}return(O-U)/C}}}if(c.rangemode!=="match"){var P=f.r2l(c.range[0]),D=f.r2l(c.range[1]),q=D-P;u.d2pOppAxis=function(O){return(O-P)/q*u._height}}l.call(jpt,e,s,u).call(Kpt,e,s,u).call(Jpt,e,s,u).call($pt,e,s,u,c).call(e0t,e,s,u).call(t0t,e,s,u),Wpt(l,e,s,u),Zpt(l,e,s,u,f,c),s.side==="bottom"&&Vpt.draw(e,s._id+"title",{propContainer:s,propName:s._name+".title",placeholder:t._dfltTitle.x,attributes:{x:s._offset+s._length/2,y:w+u._height+u._offsetShift+10+1.5*s.title.font.size,"text-anchor":"middle"}})}))};function Jde(e){return typeof e.clientX=="number"?e.clientX:e.touches&&e.touches.length>0?e.touches[0].clientX:0}function Wpt(e,t,r,i){if(t._context.staticPlot)return;var n=e.select("rect."+xo.slideBoxClassName).node(),a=e.select("rect."+xo.grabAreaMinClassName).node(),o=e.select("rect."+xo.grabAreaMaxClassName).node();function s(){var l=NL.event,u=l.target,f=Jde(l),c=f-e.node().getBoundingClientRect().left,h=i.d2p(r._rl[0]),v=i.d2p(r._rl[1]),d=Gpt.coverSlip();this.addEventListener("touchmove",x),this.addEventListener("touchend",b),d.addEventListener("mousemove",x),d.addEventListener("mouseup",b);function x(p){var w=Jde(p),A=+w-f,T,k,_;switch(u){case n:if(_="ew-resize",h+A>r._length||v+A<0)return;T=h+A,k=v+A;break;case a:if(_="col-resize",h+A>r._length)return;T=h+A,k=v;break;case o:if(_="col-resize",v+A<0)return;T=h,k=v+A;break;default:_="ew-resize",T=c,k=c+A;break}if(k<T){var E=k;k=T,T=E}i._pixelMin=T,i._pixelMax=k,Ypt(NL.select(d),_),Xpt(e,t,r,i)}function b(){d.removeEventListener("mousemove",x),d.removeEventListener("mouseup",b),this.removeEventListener("touchmove",x),this.removeEventListener("touchend",b),mu.removeElement(d)}}e.on("mousedown",s),e.on("touchstart",s)}function Xpt(e,t,r,i){function n(s){return r.l2r(mu.constrain(s,i._rl[0],i._rl[1]))}var a=n(i.p2d(i._pixelMin)),o=n(i.p2d(i._pixelMax));window.requestAnimationFrame(function(){Npt.call("_guiRelayout",t,r._name+".range",[a,o])})}function Zpt(e,t,r,i,n,a){var o=xo.handleWidth/2;function s(p){return mu.constrain(p,0,i._width)}function l(p){return mu.constrain(p,0,i._height)}function u(p){return mu.constrain(p,-o,i._width+o)}var f=s(i.d2p(r._rl[0])),c=s(i.d2p(r._rl[1]));if(e.select("rect."+xo.slideBoxClassName).attr("x",f).attr("width",c-f),e.select("rect."+xo.maskMinClassName).attr("width",f),e.select("rect."+xo.maskMaxClassName).attr("x",c).attr("width",i._width-c),a.rangemode!=="match"){var h=i._height-l(i.d2pOppAxis(n._rl[1])),v=i._height-l(i.d2pOppAxis(n._rl[0]));e.select("rect."+xo.maskMinOppAxisClassName).attr("x",f).attr("height",h).attr("width",c-f),e.select("rect."+xo.maskMaxOppAxisClassName).attr("x",f).attr("y",v).attr("height",i._height-v).attr("width",c-f),e.select("rect."+xo.slideBoxClassName).attr("y",h).attr("height",v-h)}var d=.5,x=Math.round(u(f-o))-d,b=Math.round(u(c-o))+d;e.select("g."+xo.grabberMinClassName).attr("transform",UL(x,d)),e.select("g."+xo.grabberMaxClassName).attr("transform",UL(b,d))}function jpt(e,t,r,i){var n=mu.ensureSingle(e,"rect",xo.bgClassName,function(l){l.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),a=i.borderwidth%2===0?i.borderwidth:i.borderwidth-1,o=-i._offsetShift,s=Qde.crispRound(t,i.borderwidth);n.attr({width:i._width+a,height:i._height+a,transform:UL(o,o),"stroke-width":s}).call(Dm.stroke,i.bordercolor).call(Dm.fill,i.bgcolor)}function Kpt(e,t,r,i){var n=t._fullLayout,a=mu.ensureSingleById(n._topdefs,"clipPath",i._clipId,function(o){o.append("rect").attr({x:0,y:0})});a.select("rect").attr({width:i._width,height:i._height})}function Jpt(e,t,r,i){var n=t.calcdata,a=e.selectAll("g."+xo.rangePlotClassName).data(r._subplotsWith,mu.identity);a.enter().append("g").attr("class",function(s){return xo.rangePlotClassName+" "+s}).call(Qde.setClipUrl,i._clipId,t),a.order(),a.exit().remove();var o;a.each(function(s,l){var u=NL.select(this),f=l===0,c=XB.getFromId(t,s,"y"),h=c._name,v=i[h],d={data:[],layout:{xaxis:{type:r.type,domain:[0,1],range:i.range.slice(),calendar:r.calendar},width:i._width,height:i._height,margin:{t:0,b:0,l:0,r:0}},_context:t._context};r.rangebreaks&&(d.layout.xaxis.rangebreaks=r.rangebreaks),d.layout[h]={type:c.type,domain:[0,1],range:v.rangemode!=="match"?v.range.slice():c.range.slice(),calendar:c.calendar},c.rangebreaks&&(d.layout[h].rangebreaks=c.rangebreaks),Upt.supplyDefaults(d);var x=d._fullLayout.xaxis,b=d._fullLayout[h];x.clearCalc(),x.setScale(),b.clearCalc(),b.setScale();var p={id:s,plotgroup:u,xaxis:x,yaxis:b,isRangePlot:!0};f?o=p:(p.mainplot="xy",p.mainplotinfo=o),Hpt.rangePlot(t,p,Qpt(n,s))})}function Qpt(e,t){for(var r=[],i=0;i<e.length;i++){var n=e[i],a=n[0].trace;a.xaxis+a.yaxis===t&&r.push(n)}return r}function $pt(e,t,r,i,n){var a=mu.ensureSingle(e,"rect",xo.maskMinClassName,function(u){u.attr({x:0,y:0,"shape-rendering":"crispEdges"})});a.attr("height",i._height).call(Dm.fill,xo.maskColor);var o=mu.ensureSingle(e,"rect",xo.maskMaxClassName,function(u){u.attr({y:0,"shape-rendering":"crispEdges"})});if(o.attr("height",i._height).call(Dm.fill,xo.maskColor),n.rangemode!=="match"){var s=mu.ensureSingle(e,"rect",xo.maskMinOppAxisClassName,function(u){u.attr({y:0,"shape-rendering":"crispEdges"})});s.attr("width",i._width).call(Dm.fill,xo.maskOppAxisColor);var l=mu.ensureSingle(e,"rect",xo.maskMaxOppAxisClassName,function(u){u.attr({y:0,"shape-rendering":"crispEdges"})});l.attr("width",i._width).style("border-top",xo.maskOppBorder).call(Dm.fill,xo.maskOppAxisColor)}}function e0t(e,t,r,i){if(!t._context.staticPlot){var n=mu.ensureSingle(e,"rect",xo.slideBoxClassName,function(a){a.attr({y:0,cursor:xo.slideBoxCursor,"shape-rendering":"crispEdges"})});n.attr({height:i._height,fill:xo.slideBoxFill})}}function t0t(e,t,r,i){var n=mu.ensureSingle(e,"g",xo.grabberMinClassName),a=mu.ensureSingle(e,"g",xo.grabberMaxClassName),o={x:0,width:xo.handleWidth,rx:xo.handleRadius,fill:Dm.background,stroke:Dm.defaultLine,"stroke-width":xo.handleStrokeWidth,"shape-rendering":"crispEdges"},s={y:Math.round(i._height/4),height:Math.round(i._height/2)},l=mu.ensureSingle(n,"rect",xo.handleMinClassName,function(v){v.attr(o)});l.attr(s);var u=mu.ensureSingle(a,"rect",xo.handleMaxClassName,function(v){v.attr(o)});u.attr(s);var f={width:xo.grabAreaWidth,x:0,y:0,fill:xo.grabAreaFill,cursor:t._context.staticPlot?void 0:xo.grabAreaCursor},c=mu.ensureSingle(n,"rect",xo.grabAreaMinClassName,function(v){v.attr(f)});c.attr("height",i._height);var h=mu.ensureSingle(a,"rect",xo.grabAreaMaxClassName,function(v){v.attr(f)});h.attr("height",i._height)}});var rpe=ie((nar,tpe)=>{"use strict";var r0t=Zt(),n0t=FL(),i0t=WB(),ZB=Gde();tpe.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:r0t.extendFlat({},n0t,{yaxis:i0t})}}},layoutAttributes:FL(),handleDefaults:Zde(),calcAutorange:Kde(),draw:epe(),isVisible:ZB.isVisible,makeData:ZB.makeData,autoMarginOpts:ZB.autoMarginOpts}});var VL=ie((iar,ipe)=>{"use strict";var a0t=Xs(),npe=Qu(),o0t=ko().templatedArray,s0t=o0t("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});ipe.exports={visible:{valType:"boolean",editType:"plot"},buttons:s0t,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:a0t({editType:"plot"}),bgcolor:{valType:"color",dflt:npe.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:npe.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}});var jB=ie((aar,ape)=>{"use strict";ape.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}});var lpe=ie((oar,spe)=>{"use strict";var HL=Zt(),l0t=_i(),u0t=ko(),f0t=dh(),ope=VL(),KB=jB();spe.exports=function(t,r,i,n,a){var o=t.rangeselector||{},s=u0t.newContainer(r,"rangeselector");function l(v,d){return HL.coerce(o,s,ope,v,d)}var u=f0t(o,s,{name:"buttons",handleItemDefaults:c0t,calendar:a}),f=l("visible",u.length>0);if(f){var c=h0t(r,i,n);l("x",c[0]),l("y",c[1]),HL.noneOrAll(t,r,["x","y"]),l("xanchor"),l("yanchor"),HL.coerceFont(l,"font",i.font);var h=l("bgcolor");l("activecolor",l0t.contrast(h,KB.lightAmount,KB.darkAmount)),l("bordercolor"),l("borderwidth")}};function c0t(e,t,r,i){var n=i.calendar;function a(l,u){return HL.coerce(e,t,ope.buttons,l,u)}var o=a("visible");if(o){var s=a("step");s!=="all"&&(n&&n!=="gregorian"&&(s==="month"||s==="year")?t.stepmode="backward":a("stepmode"),a("count")),a("label")}}function h0t(e,t,r){for(var i=r.filter(function(s){return t[s].anchor===e._id}),n=0,a=0;a<i.length;a++){var o=t[i[a]].domain;o&&(n=Math.max(o[1],n))}return[e.domain[0],n+KB.yPad]}});var fpe=ie((sar,upe)=>{"use strict";var v0t=aq(),d0t=Zt().titleCase;upe.exports=function(t,r){var i=t._name,n={};if(r.step==="all")n[i+".autorange"]=!0;else{var a=p0t(t,r);n[i+".range[0]"]=a[0],n[i+".range[1]"]=a[1]}return n};function p0t(e,t){var r=e.range,i=new Date(e.r2l(r[1])),n=t.step,a=v0t["utc"+d0t(n)],o=t.count,s;switch(t.stepmode){case"backward":s=e.l2r(+a.offset(i,-o));break;case"todate":var l=a.offset(i,-o);s=e.l2r(+a.ceil(l));break}var u=r[1];return[s,u]}});var mpe=ie((lar,ype)=>{"use strict";var YL=Mi(),g0t=Ti(),y0t=js(),cpe=_i(),gpe=oa(),Kg=Zt(),hpe=Kg.strTranslate,GL=ks(),m0t=zl(),$B=Mf(),vpe=$B.LINE_SPACING,dpe=$B.FROM_TL,ppe=$B.FROM_BR,QB=jB(),x0t=fpe();ype.exports=function(t){var r=t._fullLayout,i=r._infolayer.selectAll(".rangeselector").data(_0t(t),b0t);i.enter().append("g").classed("rangeselector",!0),i.exit().remove(),i.style({cursor:"pointer","pointer-events":"all"}),i.each(function(n){var a=YL.select(this),o=n,s=o.rangeselector,l=a.selectAll("g.button").data(Kg.filterVisible(s.buttons));l.enter().append("g").classed("button",!0),l.exit().remove(),l.each(function(u){var f=YL.select(this),c=x0t(o,u);u._isActive=w0t(o,u,c),f.call(JB,s,u),f.call(A0t,s,u,t),f.on("click",function(){t._dragged||g0t.call("_guiRelayout",t,c)}),f.on("mouseover",function(){u._isHovered=!0,f.call(JB,s,u)}),f.on("mouseout",function(){u._isHovered=!1,f.call(JB,s,u)})}),S0t(t,l,s,o._name,a)})};function _0t(e){for(var t=m0t.list(e,"x",!0),r=[],i=0;i<t.length;i++){var n=t[i];n.rangeselector&&n.rangeselector.visible&&r.push(n)}return r}function b0t(e){return e._id}function w0t(e,t,r){if(t.step==="all")return e.autorange===!0;var i=Object.keys(r);return e.range[0]===r[i[0]]&&e.range[1]===r[i[1]]}function JB(e,t,r){var i=Kg.ensureSingle(e,"rect","selector-rect",function(n){n.attr("shape-rendering","crispEdges")});i.attr({rx:QB.rx,ry:QB.ry}),i.call(cpe.stroke,t.bordercolor).call(cpe.fill,T0t(t,r)).style("stroke-width",t.borderwidth+"px")}function T0t(e,t){return t._isActive||t._isHovered?e.activecolor:e.bgcolor}function A0t(e,t,r,i){function n(o){GL.convertToTspans(o,i)}var a=Kg.ensureSingle(e,"text","selector-text",function(o){o.attr("text-anchor","middle")});a.call(gpe.font,t.font).text(M0t(r,i._fullLayout._meta)).call(n)}function M0t(e,t){return e.label?t?Kg.templateString(e.label,t):e.label:e.step==="all"?"all":e.count+e.step.charAt(0)}function S0t(e,t,r,i,n){var a=0,o=0,s=r.borderwidth;t.each(function(){var v=YL.select(this),d=v.select(".selector-text"),x=r.font.size*vpe,b=Math.max(x*GL.lineCount(d),16)+3;o=Math.max(o,b)}),t.each(function(){var v=YL.select(this),d=v.select(".selector-rect"),x=v.select(".selector-text"),b=x.node()&&gpe.bBox(x.node()).width,p=r.font.size*vpe,w=GL.lineCount(x),A=Math.max(b+10,QB.minButtonWidth);v.attr("transform",hpe(s+a,s)),d.attr({x:0,y:0,width:A,height:o}),GL.positionText(x,A/2,o/2-(w-1)*p/2+3),a+=A+5});var l=e._fullLayout._size,u=l.l+l.w*r.x,f=l.t+l.h*(1-r.y),c="left";Kg.isRightAnchor(r)&&(u-=a,c="right"),Kg.isCenterAnchor(r)&&(u-=a/2,c="center");var h="top";Kg.isBottomAnchor(r)&&(f-=o,h="bottom"),Kg.isMiddleAnchor(r)&&(f-=o/2,h="middle"),a=Math.ceil(a),o=Math.ceil(o),u=Math.round(u),f=Math.round(f),y0t.autoMargin(e,i+"-range-selector",{x:r.x,y:r.y,l:a*dpe[c],r:a*ppe[c],b:o*ppe[h],t:o*dpe[h]}),n.attr("transform",hpe(u,f))}});var _pe=ie((uar,xpe)=>{"use strict";xpe.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:VL()}}},layoutAttributes:VL(),handleDefaults:lpe(),draw:mpe()}});var fl=ie(eN=>{"use strict";var bpe=aa().extendFlat;eN.attributes=function(e,t){e=e||{},t=t||{};var r={valType:"info_array",editType:e.editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},i=e.name?e.name+" ":"",n=e.trace?"trace ":"subplot ",a=t.description?" "+t.description:"",o={x:bpe({},r,{}),y:bpe({},r,{}),editType:e.editType};return e.noGridCell||(o.row={valType:"integer",min:0,dflt:0,editType:e.editType},o.column={valType:"integer",min:0,dflt:0,editType:e.editType}),o};eN.defaults=function(e,t,r,i){var n=i&&i.x||[0,1],a=i&&i.y||[0,1],o=t.grid;if(o){var s=r("domain.column");s!==void 0&&(s<o.columns?n=o._domains.x[s]:delete e.domain.column);var l=r("domain.row");l!==void 0&&(l<o.rows?a=o._domains.y[l]:delete e.domain.row)}var u=r("domain.x",n),f=r("domain.y",a);u[0]<u[1]||(e.domain.x=n.slice()),f[0]<f[1]||(e.domain.y=a.slice())}});var rN=ie((car,Mpe)=>{"use strict";var E0t=Zt(),k0t=e2().counter,C0t=fl().attributes,wpe=Af().idRegex,L0t=ko(),tN={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[k0t("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[wpe.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[wpe.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:C0t({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function WL(e,t,r){var i=t[r+"axes"],n=Object.keys((e._splomAxes||{})[r]||{});if(Array.isArray(i))return i;if(n.length)return n}function P0t(e,t){var r=e.grid||{},i=WL(t,r,"x"),n=WL(t,r,"y");if(!e.grid&&!i&&!n)return;var a=Array.isArray(r.subplots)&&Array.isArray(r.subplots[0]),o=Array.isArray(i),s=Array.isArray(n),l=o&&i!==r.xaxes&&s&&n!==r.yaxes,u,f;a?(u=r.subplots.length,f=r.subplots[0].length):(s&&(u=n.length),o&&(f=i.length));var c=L0t.newContainer(t,"grid");function h(_,E){return E0t.coerce(r,c,tN,_,E)}var v=h("rows",u),d=h("columns",f);if(!(v*d>1)){delete t.grid;return}if(!a&&!o&&!s){var x=h("pattern")==="independent";x&&(a=!0)}c._hasSubplotGrid=a;var b=h("roworder"),p=b==="top to bottom",w=a?.2:.1,A=a?.3:.1,T,k;l&&t._splomGridDflt&&(T=t._splomGridDflt.xside,k=t._splomGridDflt.yside),c._domains={x:Tpe("x",h,w,T,d),y:Tpe("y",h,A,k,v,p)}}function Tpe(e,t,r,i,n,a){var o=t(e+"gap",r),s=t("domain."+e);t(e+"side",i);for(var l=new Array(n),u=s[0],f=(s[1]-u)/(n-o),c=f*(1-o),h=0;h<n;h++){var v=u+f*h;l[a?n-1-h:h]=[v,v+c]}return l}function R0t(e,t){var r=t.grid;if(!(!r||!r._domains)){var i=e.grid||{},n=t._subplots,a=r._hasSubplotGrid,o=r.rows,s=r.columns,l=r.pattern==="independent",u,f,c,h,v,d,x,b=r._axisMap={};if(a){var p=i.subplots||[];d=r.subplots=new Array(o);var w=1;for(u=0;u<o;u++){var A=d[u]=new Array(s),T=p[u]||[];for(f=0;f<s;f++)if(l?(v=w===1?"xy":"x"+w+"y"+w,w++):v=T[f],A[f]="",n.cartesian.indexOf(v)!==-1){if(x=v.indexOf("y"),c=v.slice(0,x),h=v.slice(x),b[c]!==void 0&&b[c]!==f||b[h]!==void 0&&b[h]!==u)continue;A[f]=v,b[c]=f,b[h]=u}}}else{var k=WL(t,i,"x"),_=WL(t,i,"y");r.xaxes=Ape(k,n.xaxis,s,b,"x"),r.yaxes=Ape(_,n.yaxis,o,b,"y")}var E=r._anchors={},S=r.roworder==="top to bottom";for(var g in b){var C=g.charAt(0),M=r[C+"side"],P,D,q;if(M.length<8)E[g]="free";else if(C==="x"){if(M.charAt(0)==="t"===S?(P=0,D=1,q=o):(P=o-1,D=-1,q=-1),a){var O=b[g];for(u=P;u!==q;u+=D)if(v=d[u][O],!!v&&(x=v.indexOf("y"),v.slice(0,x)===g)){E[g]=v.slice(x);break}}else for(u=P;u!==q;u+=D)if(h=r.yaxes[u],n.cartesian.indexOf(g+h)!==-1){E[g]=h;break}}else if(M.charAt(0)==="l"?(P=0,D=1,q=s):(P=s-1,D=-1,q=-1),a){var U=b[g];for(u=P;u!==q;u+=D)if(v=d[U][u],!!v&&(x=v.indexOf("y"),v.slice(x)===g)){E[g]=v.slice(0,x);break}}else for(u=P;u!==q;u+=D)if(c=r.xaxes[u],n.cartesian.indexOf(c+g)!==-1){E[g]=c;break}}}}function Ape(e,t,r,i,n){var a=new Array(r),o;function s(l,u){t.indexOf(u)!==-1&&i[u]===void 0?(a[l]=u,i[u]=l):a[l]=""}if(Array.isArray(e))for(o=0;o<r;o++)s(o,e[o]);else for(s(0,n),o=1;o<r;o++)s(o,n+(o+1));return a}Mpe.exports={moduleType:"component",name:"grid",schema:{layout:{grid:tN}},layoutAttributes:tN,sizeDefaults:P0t,contentDefaults:R0t}});var nN=ie((har,Spe)=>{"use strict";Spe.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}});var Cpe=ie((dar,kpe)=>{"use strict";var Epe=la(),D0t=Ti(),I0t=Zt(),F0t=ko(),q0t=nN();kpe.exports=function(e,t,r,i){var n="error_"+i.axis,a=F0t.newContainer(t,n),o=e[n]||{};function s(d,x){return I0t.coerce(o,a,q0t,d,x)}var l=o.array!==void 0||o.value!==void 0||o.type==="sqrt",u=s("visible",l);if(u!==!1){var f=s("type","array"in o?"data":"percent"),c=!0;f!=="sqrt"&&(c=s("symmetric",!((f==="data"?"arrayminus":"valueminus")in o))),f==="data"?(s("array"),s("traceref"),c||(s("arrayminus"),s("tracerefminus"))):(f==="percent"||f==="constant")&&(s("value"),c||s("valueminus"));var h="copy_"+i.inherit+"style";if(i.inherit){var v=t["error_"+i.inherit];(v||{}).visible&&s(h,!(o.color||Epe(o.thickness)||Epe(o.width)))}(!i.inherit||!a[h])&&(s("color",r),s("thickness"),s("width",D0t.traceIs(t,"gl3d")?0:4))}}});var iN=ie((par,Ppe)=>{"use strict";Ppe.exports=function(t){var r=t.type,i=t.symmetric;if(r==="data"){var n=t.array||[];if(i)return function(u,f){var c=+n[f];return[c,c]};var a=t.arrayminus||[];return function(u,f){var c=+n[f],h=+a[f];return!isNaN(c)||!isNaN(h)?[h||0,c||0]:[NaN,NaN]}}else{var o=Lpe(r,t.value),s=Lpe(r,t.valueminus);return i||t.valueminus===void 0?function(u){var f=o(u);return[f,f]}:function(u){return[s(u),o(u)]}}};function Lpe(e,t){if(e==="percent")return function(r){return Math.abs(r*t/100)};if(e==="constant")return function(){return Math.abs(t)};if(e==="sqrt")return function(r){return Math.sqrt(Math.abs(r))}}});var Ipe=ie((gar,Dpe)=>{"use strict";var aN=la(),z0t=Ti(),oN=Wi(),O0t=Zt(),B0t=iN();Dpe.exports=function(t){for(var r=t.calcdata,i=0;i<r.length;i++){var n=r[i],a=n[0].trace;if(a.visible===!0&&z0t.traceIs(a,"errorBarsOK")){var o=oN.getFromId(t,a.xaxis),s=oN.getFromId(t,a.yaxis);Rpe(n,a,o,"x"),Rpe(n,a,s,"y")}}};function Rpe(e,t,r,i){var n=t["error_"+i]||{},a=n.visible&&["linear","log"].indexOf(r.type)!==-1,o=[];if(a){for(var s=B0t(n),l=0;l<e.length;l++){var u=e[l],f=u.i;if(f===void 0)f=l;else if(f===null)continue;var c=u[i];if(aN(r.c2l(c))){var h=s(c,f);if(aN(h[0])&&aN(h[1])){var v=u[i+"s"]=c-h[0],d=u[i+"h"]=c+h[1];o.push(v,d)}}}var x=r._id,b=t._extremes[x],p=oN.findExtremes(r,o,O0t.extendFlat({tozero:b.opts.tozero},{padded:!0}));b.min=b.min.concat(p.min),b.max=b.max.concat(p.max)}}});var zpe=ie((yar,qpe)=>{"use strict";var Fpe=Mi(),Im=la(),N0t=oa(),U0t=Ks();qpe.exports=function(t,r,i,n){var a,o=i.xaxis,s=i.yaxis,l=n&&n.duration>0,u=t._context.staticPlot;r.each(function(f){var c=f[0].trace,h=c.error_x||{},v=c.error_y||{},d;c.ids&&(d=function(w){return w.id});var x=U0t.hasMarkers(c)&&c.marker.maxdisplayed>0;!v.visible&&!h.visible&&(f=[]);var b=Fpe.select(this).selectAll("g.errorbar").data(f,d);if(b.exit().remove(),!!f.length){h.visible||b.selectAll("path.xerror").remove(),v.visible||b.selectAll("path.yerror").remove(),b.style("opacity",1);var p=b.enter().append("g").classed("errorbar",!0);l&&p.style("opacity",0).transition().duration(n.duration).style("opacity",1),N0t.setClipUrl(b,i.layerClipId,t),b.each(function(w){var A=Fpe.select(this),T=V0t(w,o,s);if(!(x&&!w.vis)){var k,_=A.select("path.yerror");if(v.visible&&Im(T.x)&&Im(T.yh)&&Im(T.ys)){var E=v.width;k="M"+(T.x-E)+","+T.yh+"h"+2*E+"m-"+E+",0V"+T.ys,T.noYS||(k+="m-"+E+",0h"+2*E),a=!_.size(),a?_=A.append("path").style("vector-effect",u?"none":"non-scaling-stroke").classed("yerror",!0):l&&(_=_.transition().duration(n.duration).ease(n.easing)),_.attr("d",k)}else _.remove();var S=A.select("path.xerror");if(h.visible&&Im(T.y)&&Im(T.xh)&&Im(T.xs)){var g=(h.copy_ystyle?v:h).width;k="M"+T.xh+","+(T.y-g)+"v"+2*g+"m0,-"+g+"H"+T.xs,T.noXS||(k+="m0,-"+g+"v"+2*g),a=!S.size(),a?S=A.append("path").style("vector-effect",u?"none":"non-scaling-stroke").classed("xerror",!0):l&&(S=S.transition().duration(n.duration).ease(n.easing)),S.attr("d",k)}else S.remove()}})}})};function V0t(e,t,r){var i={x:t.c2p(e.x),y:r.c2p(e.y)};return e.yh!==void 0&&(i.yh=r.c2p(e.yh),i.ys=r.c2p(e.ys),Im(i.ys)||(i.noYS=!0,i.ys=r.c2p(e.ys,!0))),e.xh!==void 0&&(i.xh=t.c2p(e.xh),i.xs=t.c2p(e.xs),Im(i.xs)||(i.noXS=!0,i.xs=t.c2p(e.xs,!0))),i}});var Npe=ie((mar,Bpe)=>{"use strict";var H0t=Mi(),Ope=_i();Bpe.exports=function(t){t.each(function(r){var i=r[0].trace,n=i.error_y||{},a=i.error_x||{},o=H0t.select(this);o.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(Ope.stroke,n.color),a.copy_ystyle&&(a=n),o.selectAll("path.xerror").style("stroke-width",a.thickness+"px").call(Ope.stroke,a.color)})}});var Hpe=ie((xar,Vpe)=>{"use strict";var XM=Zt(),Upe=Zs().overrideAll,ZM=nN(),Wx={error_x:XM.extendFlat({},ZM),error_y:XM.extendFlat({},ZM)};delete Wx.error_x.copy_zstyle;delete Wx.error_y.copy_zstyle;delete Wx.error_y.copy_ystyle;var jM={error_x:XM.extendFlat({},ZM),error_y:XM.extendFlat({},ZM),error_z:XM.extendFlat({},ZM)};delete jM.error_x.copy_ystyle;delete jM.error_y.copy_ystyle;delete jM.error_z.copy_ystyle;delete jM.error_z.copy_zstyle;Vpe.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:Wx,bar:Wx,histogram:Wx,scatter3d:Upe(jM,"calc","nested"),scattergl:Upe(Wx,"calc","nested")}},supplyDefaults:Cpe(),calc:Ipe(),makeComputeError:iN(),plot:zpe(),style:Npe(),hoverInfo:G0t};function G0t(e,t,r){(t.error_y||{}).visible&&(r.yerr=e.yh-e.y,t.error_y.symmetric||(r.yerrneg=e.y-e.ys)),(t.error_x||{}).visible&&(r.xerr=e.xh-e.x,t.error_x.symmetric||(r.xerrneg=e.x-e.xs))}});var Ype=ie((_ar,Gpe)=>{"use strict";Gpe.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}});var Qpe=ie((bar,Jpe)=>{"use strict";var Fm=Mi(),sN=Kf(),ZL=js(),Wpe=Ti(),Jg=Wi(),XL=Yh(),Ap=Zt(),y0=Ap.strTranslate,Kpe=aa().extendFlat,lN=t0(),g0=oa(),uN=_i(),Y0t=wx(),W0t=ks(),X0t=Hh().flipScale,Z0t=qM(),j0t=_L(),K0t=gc(),fN=Mf(),Xpe=fN.LINE_SPACING,Zpe=fN.FROM_TL,jpe=fN.FROM_BR,Ll=Ype().cn;function J0t(e){var t=e._fullLayout,r=t._infolayer.selectAll("g."+Ll.colorbar).data(Q0t(e),function(i){return i._id});r.enter().append("g").attr("class",function(i){return i._id}).classed(Ll.colorbar,!0),r.each(function(i){var n=Fm.select(this);Ap.ensureSingle(n,"rect",Ll.cbbg),Ap.ensureSingle(n,"g",Ll.cbfills),Ap.ensureSingle(n,"g",Ll.cblines),Ap.ensureSingle(n,"g",Ll.cbaxis,function(o){o.classed(Ll.crisp,!0)}),Ap.ensureSingle(n,"g",Ll.cbtitleunshift,function(o){o.append("g").classed(Ll.cbtitle,!0)}),Ap.ensureSingle(n,"rect",Ll.cboutline);var a=$0t(n,i,e);a&&a.then&&(e._promises||[]).push(a),e._context.edits.colorbarPosition&&egt(n,i,e)}),r.exit().each(function(i){ZL.autoMargin(e,i._id)}).remove(),r.order()}function Q0t(e){var t=e._fullLayout,r=e.calcdata,i=[],n,a,o,s;function l(A){return Kpe(A,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function u(){typeof s.calc=="function"?s.calc(e,o,n):(n._fillgradient=a.reversescale?X0t(a.colorscale):a.colorscale,n._zrange=[a[s.min],a[s.max]])}for(var f=0;f<r.length;f++){var c=r[f];if(o=c[0].trace,!!o._module){var h=o._module.colorbar;if(o.visible===!0&&h)for(var v=Array.isArray(h),d=v?h:[h],x=0;x<d.length;x++){s=d[x];var b=s.container;a=b?o[b]:o,a&&a.showscale&&(n=l(a.colorbar),n._id="cb"+o.uid+(v&&b?"-"+b:""),n._traceIndex=o.index,n._propPrefix=(b?b+".":"")+"colorbar.",n._meta=o._meta,u(),i.push(n))}}}for(var p in t._colorAxes)if(a=t[p],a.showscale){var w=t._colorAxes[p];n=l(a.colorbar),n._id="cb"+p,n._propPrefix=p+".colorbar.",n._meta=t._meta,s={min:"cmin",max:"cmax"},w[0]!=="heatmap"&&(o=w[1],s.calc=o._module.colorbar.calc),u(),i.push(n)}return i}function $0t(e,t,r){var i=t.orientation==="v",n=t.len,a=t.lenmode,o=t.thickness,s=t.thicknessmode,l=t.outlinewidth,u=t.borderwidth,f=t.bgcolor,c=t.xanchor,h=t.yanchor,v=t.xpad,d=t.ypad,x=t.x,b=i?t.y:1-t.y,p=t.yref==="paper",w=t.xref==="paper",A=r._fullLayout,T=A._size,k=t._fillcolor,_=t._line,E=t.title,S=E.side,g=t._zrange||Fm.extent((typeof k=="function"?k:_.color).domain()),C=typeof _.color=="function"?_.color:function(){return _.color},M=typeof k=="function"?k:function(){return k},P=t._levels,D=tgt(r,t,g),q=D.fill,O=D.line,U=Math.round(o*(s==="fraction"?i?T.w:T.h:1)),B=U/(i?T.w:T.h),F=Math.round(n*(a==="fraction"?i?T.h:T.w:1)),N=F/(i?T.h:T.w),X=w?T.w:r._fullLayout.width,K=p?T.h:r._fullLayout.height,ne=Math.round(i?x*X+v:b*K+d),fe={center:.5,right:1}[c]||0,ue={top:1,middle:.5}[h]||0,ee=i?x-fe*B:b-ue*B,Z=i?b-ue*N:x-fe*N,oe=Math.round(i?K*(1-Z):X*Z);t._lenFrac=N,t._thickFrac=B,t._uFrac=ee,t._vFrac=Z;var ce=t._axis=rgt(r,t,g);ce.position=B+(i?x+v/T.w:b+d/T.h);var le=["top","bottom"].indexOf(S)!==-1;if(i&&le&&(ce.title.side=S,ce.titlex=x+v/T.w,ce.titley=Z+(E.side==="top"?N-d/T.h:d/T.h)),!i&&!le&&(ce.title.side=S,ce.titley=b+d/T.h,ce.titlex=Z+v/T.w),_.color&&t.tickmode==="auto"){ce.tickmode="linear",ce.tick0=P.start;var me=P.size,he=Ap.constrain(F/50,4,15)+1,te=(g[1]-g[0])/((t.nticks||he)*me);if(te>1){var ge=Math.pow(10,Math.floor(Math.log(te)/Math.LN10));me*=ge*Ap.roundUp(te/ge,[2,5,10]),(Math.abs(P.start)/P.size+1e-6)%1<2e-6&&(ce.tick0=0)}ce.dtick=me}ce.domain=i?[Z+d/T.h,Z+N-d/T.h]:[Z+v/T.w,Z+N-v/T.w],ce.setScale(),e.attr("transform",y0(Math.round(T.l),Math.round(T.t)));var ae=e.select("."+Ll.cbtitleunshift).attr("transform",y0(-Math.round(T.l),-Math.round(T.t))),_e=ce.ticklabelposition,Ce=ce.title.font.size,qe=e.select("."+Ll.cbaxis),rt,Re=0,Ie=0;function ot(Ht,Me){var Ke={propContainer:ce,propName:t._propPrefix+"title",traceIndex:t._traceIndex,_meta:t._meta,placeholder:A._dfltTitle.colorbar,containerGroup:e.select("."+Ll.cbtitle)},We=Ht.charAt(0)==="h"?Ht.substr(1):"h"+Ht;e.selectAll("."+We+",."+We+"-math-group").remove(),Y0t.draw(r,Ht,Kpe(Ke,Me||{}))}function lt(){if(i&&le||!i&&!le){var Ht,Me;S==="top"&&(Ht=v+T.l+X*x,Me=d+T.t+K*(1-Z-N)+3+Ce*.75),S==="bottom"&&(Ht=v+T.l+X*x,Me=d+T.t+K*(1-Z)-3-Ce*.25),S==="right"&&(Me=d+T.t+K*b+3+Ce*.75,Ht=v+T.l+X*Z),ot(ce._id+"title",{attributes:{x:Ht,y:Me,"text-anchor":i?"start":"middle"}})}}function ht(){if(i&&!le||!i&&le){var Ht=ce.position||0,Me=ce._offset+ce._length/2,Ke,We;if(S==="right")We=Me,Ke=T.l+X*Ht+10+Ce*(ce.showticklabels?1:.5);else if(Ke=Me,S==="bottom"&&(We=T.t+K*Ht+10+(_e.indexOf("inside")===-1?ce.tickfont.size:0)+(ce.ticks!=="intside"&&t.ticklen||0)),S==="top"){var et=E.text.split("<br>").length;We=T.t+K*Ht+10-U-Xpe*Ce*et}ot((i?"h":"v")+ce._id+"title",{avoid:{selection:Fm.select(r).selectAll("g."+ce._id+"tick"),side:S,offsetTop:i?0:T.t,offsetLeft:i?T.l:0,maxShift:i?A.width:A.height},attributes:{x:Ke,y:We,"text-anchor":"middle"},transform:{rotate:i?-90:0,offset:0}})}}function xt(){if(!i&&!le||i&&le){var Ht=e.select("."+Ll.cbtitle),Me=Ht.select("text"),Ke=[-l/2,l/2],We=Ht.select(".h"+ce._id+"title-math-group").node(),et=15.6;Me.node()&&(et=parseInt(Me.node().style.fontSize,10)*Xpe);var vt;if(We?(vt=g0.bBox(We),Ie=vt.width,Re=vt.height,Re>et&&(Ke[1]-=(Re-et)/2)):Me.node()&&!Me.classed(Ll.jsPlaceholder)&&(vt=g0.bBox(Me.node()),Ie=vt.width,Re=vt.height),i){if(Re){if(Re+=5,S==="top")ce.domain[1]-=Re/T.h,Ke[1]*=-1;else{ce.domain[0]+=Re/T.h;var at=W0t.lineCount(Me);Ke[1]+=(1-at)*et}Ht.attr("transform",y0(Ke[0],Ke[1])),ce.setScale()}}else Ie&&(S==="right"&&(ce.domain[0]+=(Ie+Ce/2)/T.w),Ht.attr("transform",y0(Ke[0],Ke[1])),ce.setScale())}e.selectAll("."+Ll.cbfills+",."+Ll.cblines).attr("transform",i?y0(0,Math.round(T.h*(1-ce.domain[1]))):y0(Math.round(T.w*ce.domain[0]),0)),qe.attr("transform",i?y0(0,Math.round(-T.t)):y0(Math.round(-T.l),0));var Xe=e.select("."+Ll.cbfills).selectAll("rect."+Ll.cbfill).attr("style","").data(q);Xe.enter().append("rect").classed(Ll.cbfill,!0).attr("style",""),Xe.exit().remove();var dt=g.map(ce.c2p).map(Math.round).sort(function(ar,cr){return ar-cr});Xe.each(function(ar,cr){var It=[cr===0?g[0]:(q[cr]+q[cr-1])/2,cr===q.length-1?g[1]:(q[cr]+q[cr+1])/2].map(ce.c2p).map(Math.round);i&&(It[1]=Ap.constrain(It[1]+(It[1]>It[0])?1:-1,dt[0],dt[1]));var gt=Fm.select(this).attr(i?"x":"y",ne).attr(i?"y":"x",Fm.min(It)).attr(i?"width":"height",Math.max(U,2)).attr(i?"height":"width",Math.max(Fm.max(It)-Fm.min(It),2));if(t._fillgradient)g0.gradient(gt,r,t._id,i?"vertical":"horizontalreversed",t._fillgradient,"fill");else{var kt=M(ar).replace("e-","");gt.attr("fill",sN(kt).toHexString())}});var _t=e.select("."+Ll.cblines).selectAll("path."+Ll.cbline).data(_.color&&_.width?O:[]);_t.enter().append("path").classed(Ll.cbline,!0),_t.exit().remove(),_t.each(function(ar){var cr=ne,It=Math.round(ce.c2p(ar))+_.width/2%1;Fm.select(this).attr("d","M"+(i?cr+","+It:It+","+cr)+(i?"h":"v")+U).call(g0.lineGroupStyle,_.width,C(ar),_.dash)}),qe.selectAll("g."+ce._id+"tick,path").remove();var $t=ne+U+(l||0)/2-(t.ticks==="outside"?1:0),Ut=Jg.calcTicks(ce),fr=Jg.getTickSigns(ce)[2];return Jg.drawTicks(r,ce,{vals:ce.ticks==="inside"?Jg.clipEnds(ce,Ut):Ut,layer:qe,path:Jg.makeTickPath(ce,$t,fr),transFn:Jg.makeTransTickFn(ce)}),Jg.drawLabels(r,ce,{vals:Ut,layer:qe,transFn:Jg.makeTransTickLabelFn(ce),labelFns:Jg.makeLabelFns(ce,$t)})}function Vt(){var Ht,Me=U+l/2;_e.indexOf("inside")===-1&&(Ht=g0.bBox(qe.node()),Me+=i?Ht.width:Ht.height),rt=ae.select("text");var Ke=0,We=i&&S==="top",et=!i&&S==="right",vt=0;if(rt.node()&&!rt.classed(Ll.jsPlaceholder)){var at,Xe=ae.select(".h"+ce._id+"title-math-group").node();Xe&&(i&&le||!i&&!le)?(Ht=g0.bBox(Xe),Ke=Ht.width,at=Ht.height):(Ht=g0.bBox(ae.node()),Ke=Ht.right-T.l-(i?ne:oe),at=Ht.bottom-T.t-(i?oe:ne),!i&&S==="top"&&(Me+=Ht.height,vt=Ht.height)),et&&(rt.attr("transform",y0(Ke/2+Ce/2,0)),Ke*=2),Me=Math.max(Me,i?Ke:at)}var dt=(i?v:d)*2+Me+u+l/2,_t=0;!i&&E.text&&h==="bottom"&&b<=0&&(_t=dt/2,dt+=_t,vt+=_t),A._hColorbarMoveTitle=_t,A._hColorbarMoveCBTitle=vt;var $t=u+l,Ut=(i?ne:oe)-$t/2-(i?v:0),fr=(i?oe:ne)-(i?F:d+vt-_t);e.select("."+Ll.cbbg).attr("x",Ut).attr("y",fr).attr(i?"width":"height",Math.max(dt-_t,2)).attr(i?"height":"width",Math.max(F+$t,2)).call(uN.fill,f).call(uN.stroke,t.bordercolor).style("stroke-width",u);var ar=et?Math.max(Ke-10,0):0;e.selectAll("."+Ll.cboutline).attr("x",(i?ne:oe+v)+ar).attr("y",(i?oe+d-F:ne)+(We?Re:0)).attr(i?"width":"height",Math.max(U,2)).attr(i?"height":"width",Math.max(F-(i?2*d+Re:2*v+ar),2)).call(uN.stroke,t.outlinecolor).style({fill:"none","stroke-width":l});var cr=i?fe*dt:0,It=i?0:(1-ue)*dt-vt;if(cr=w?T.l-cr:-cr,It=p?T.t-It:-It,e.attr("transform",y0(cr,It)),!i&&(u||sN(f).getAlpha()&&!sN.equals(A.paper_bgcolor,f))){var gt=qe.selectAll("text"),kt=gt[0].length,Je=e.select("."+Ll.cbbg).node(),Ze=g0.bBox(Je),At=g0.getTranslate(e),Se=2;gt.each(function(Fr,nn){var jn=0,xn=kt-1;if(nn===jn||nn===xn){var pn=g0.bBox(this),ki=g0.getTranslate(this),qn;if(nn===xn){var bi=pn.right+ki.x,Si=Ze.right+At.x+oe-u-Se+x;qn=Si-bi,qn>0&&(qn=0)}else if(nn===jn){var nt=pn.left+ki.x,ze=Ze.left+At.x+oe+u+Se;qn=ze-nt,qn<0&&(qn=0)}qn&&(kt<3?this.setAttribute("transform","translate("+qn+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var pe={},Te=Zpe[c],it=jpe[c],Dt=Zpe[h],Wt=jpe[h],er=dt-U;i?(a==="pixels"?(pe.y=b,pe.t=F*Dt,pe.b=F*Wt):(pe.t=pe.b=0,pe.yt=b+n*Dt,pe.yb=b-n*Wt),s==="pixels"?(pe.x=x,pe.l=dt*Te,pe.r=dt*it):(pe.l=er*Te,pe.r=er*it,pe.xl=x-o*Te,pe.xr=x+o*it)):(a==="pixels"?(pe.x=x,pe.l=F*Te,pe.r=F*it):(pe.l=pe.r=0,pe.xl=x+n*Te,pe.xr=x-n*it),s==="pixels"?(pe.y=1-b,pe.t=dt*Dt,pe.b=dt*Wt):(pe.t=er*Dt,pe.b=er*Wt,pe.yt=b-o*Dt,pe.yb=b+o*Wt));var qr=t.y<.5?"b":"t",Vr=t.x<.5?"l":"r";r._fullLayout._reservedMargin[t._id]={};var mr={r:A.width-Ut-cr,l:Ut+pe.r,b:A.height-fr-It,t:fr+pe.b};w&&p?ZL.autoMargin(r,t._id,pe):w?r._fullLayout._reservedMargin[t._id][qr]=mr[qr]:p||i?r._fullLayout._reservedMargin[t._id][Vr]=mr[Vr]:r._fullLayout._reservedMargin[t._id][qr]=mr[qr]}return Ap.syncOrAsync([ZL.previousPromises,lt,xt,ht,ZL.previousPromises,Vt],r)}function egt(e,t,r){var i=t.orientation==="v",n=r._fullLayout,a=n._size,o,s,l;XL.init({element:e.node(),gd:r,prepFn:function(){o=e.attr("transform"),lN(e)},moveFn:function(u,f){e.attr("transform",o+y0(u,f)),s=XL.align((i?t._uFrac:t._vFrac)+u/a.w,i?t._thickFrac:t._lenFrac,0,1,t.xanchor),l=XL.align((i?t._vFrac:1-t._uFrac)-f/a.h,i?t._lenFrac:t._thickFrac,0,1,t.yanchor);var c=XL.getCursor(s,l,t.xanchor,t.yanchor);lN(e,c)},doneFn:function(){if(lN(e),s!==void 0&&l!==void 0){var u={};u[t._propPrefix+"x"]=s,u[t._propPrefix+"y"]=l,t._traceIndex!==void 0?Wpe.call("_guiRestyle",r,u,t._traceIndex):Wpe.call("_guiRelayout",r,u)}}})}function tgt(e,t,r){var i=t._levels,n=[],a=[],o,s,l=i.end+i.size/100,u=i.size,f=1.001*r[0]-.001*r[1],c=1.001*r[1]-.001*r[0];for(s=0;s<1e5&&(o=i.start+s*u,!(u>0?o>=l:o<=l));s++)o>f&&o<c&&n.push(o);if(t._fillgradient)a=[0];else if(typeof t._fillcolor=="function"){var h=t._filllevels;if(h)for(l=h.end+h.size/100,u=h.size,s=0;s<1e5&&(o=h.start+s*u,!(u>0?o>=l:o<=l));s++)o>r[0]&&o<r[1]&&a.push(o);else a=n.map(function(v){return v-i.size/2}),a.push(a[a.length-1]+i.size)}else t._fillcolor&&typeof t._fillcolor=="string"&&(a=[0]);return i.size<0&&(n.reverse(),a.reverse()),{line:n,fill:a}}function rgt(e,t,r){var i=e._fullLayout,n=t.orientation==="v",a={type:"linear",range:r,tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,labelalias:t.labelalias,ticklabelposition:t.ticklabelposition,ticklabeloverflow:t.ticklabeloverflow,ticklabelstep:t.ticklabelstep,tickfont:t.tickfont,tickangle:t.tickangle,tickformat:t.tickformat,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,showexponent:t.showexponent,showtickprefix:t.showtickprefix,tickprefix:t.tickprefix,showticksuffix:t.showticksuffix,ticksuffix:t.ticksuffix,title:t.title,showline:!0,anchor:"free",side:n?"right":"bottom",position:1},o=n?"y":"x",s={type:"linear",_id:o+t._id},l={letter:o,font:i.font,noAutotickangles:o==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:i.calendar};function u(f,c){return Ap.coerce(a,s,K0t,f,c)}return Z0t(a,s,u,l,i),j0t(a,s,u,l),s}Jpe.exports={draw:J0t}});var e0e=ie((war,$pe)=>{"use strict";$pe.exports={moduleType:"component",name:"colorbar",attributes:_C(),supplyDefaults:xz(),draw:Qpe().draw,hasColorbar:hz()}});var r0e=ie((Tar,t0e)=>{"use strict";t0e.exports={moduleType:"component",name:"legend",layoutAttributes:yO(),supplyLayoutDefaults:_O(),draw:PO(),style:EO()}});var i0e=ie((Aar,n0e)=>{"use strict";n0e.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}});var o0e=ie((Mar,a0e)=>{"use strict";a0e.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}});var hN=ie((Sar,f0e)=>{"use strict";var ngt=Ti(),u0e=Zt(),cN=u0e.extendFlat,s0e=u0e.extendDeep;function l0e(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}function igt(e){var t=["xaxis","yaxis","zaxis"];return t.indexOf(e.slice(0,5))>-1}f0e.exports=function(t,r){var i,n=t.data,a=t.layout,o=s0e([],n),s=s0e({},a,l0e(r.tileClass)),l=t._context||{};if(r.width&&(s.width=r.width),r.height&&(s.height=r.height),r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){s.annotations=[];var u=Object.keys(s);for(i=0;i<u.length;i++)igt(u[i])&&(s[u[i]].title={text:""});for(i=0;i<o.length;i++){var f=o[i];f.showscale=!1,f.marker&&(f.marker.showscale=!1),ngt.traceIs(f,"pie-like")&&(f.textposition="none")}}if(Array.isArray(r.annotations))for(i=0;i<r.annotations.length;i++)s.annotations.push(r.annotations[i]);var c=Object.keys(s).filter(function(b){return b.match(/^scene\d*$/)});if(c.length){var h={};for(r.tileClass==="thumbnail"&&(h={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),i=0;i<c.length;i++){var v=s[c[i]];v.xaxis||(v.xaxis={}),v.yaxis||(v.yaxis={}),v.zaxis||(v.zaxis={}),cN(v.xaxis,h),cN(v.yaxis,h),cN(v.zaxis,h),v._scene=null}}var d=document.createElement("div");r.tileClass&&(d.className=r.tileClass);var x={gd:d,td:d,layout:s,data:o,config:{staticPlot:r.staticPlot===void 0?!0:r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===void 0?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||!1,showLink:r.showLink||!1,showTips:r.showTips||!1,mapboxAccessToken:l.mapboxAccessToken}};return r.setBackground!=="transparent"&&(x.config.setBackground=r.setBackground||"opaque"),x.gd.defaultLayout=l0e(r.tileClass),x}});var v0e=ie((Ear,h0e)=>{"use strict";var agt=cx().EventEmitter,ogt=Ti(),sgt=Zt(),c0e=Zg(),lgt=hN(),ugt=iL(),fgt=aL();function cgt(e,t){var r=new agt,i=lgt(e,{format:"png"}),n=i.gd;n.style.position="absolute",n.style.left="-5000px",document.body.appendChild(n);function a(){var s=c0e.getDelay(n._fullLayout);setTimeout(function(){var l=ugt(n),u=document.createElement("canvas");u.id=sgt.randstr(),r=fgt({format:t.format,width:n._fullLayout.width,height:n._fullLayout.height,canvas:u,emitter:r,svg:l}),r.clean=function(){n&&document.body.removeChild(n)}},s)}var o=c0e.getRedrawFunc(n);return ogt.call("_doPlot",n,i.data,i.layout,i.config).then(o).then(a).catch(function(s){r.emit("error",s)}),r}h0e.exports=cgt});var g0e=ie((kar,p0e)=>{"use strict";var d0e=Zg(),hgt={getDelay:d0e.getDelay,getRedrawFunc:d0e.getRedrawFunc,clone:hN(),toSVG:iL(),svgToImg:aL(),toImage:v0e(),downloadImage:X7()};p0e.exports=hgt});var m0e=ie(Qg=>{"use strict";Qg.version=Mk().version;zJ();_te();var vgt=Ti(),KM=Qg.register=vgt.register,dN=Ofe(),y0e=Object.keys(dN);for(jL=0;jL<y0e.length;jL++)fw=y0e[jL],fw.charAt(0)!=="_"&&(Qg[fw]=dN[fw]),KM({moduleType:"apiMethod",name:fw,fn:dN[fw]});var fw,jL;KM(Ihe());KM([ave(),mve(),Ef(),qve(),jve(),yde(),zde(),rpe(),_pe(),rN(),Hpe(),ul(),e0e(),r0e(),Ol(),n7()]);KM([i0e(),o0e()]);window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(KM(window.PlotlyLocales),delete window.PlotlyLocales);Qg.Icons=s4();var KL=Ol(),vN=js();Qg.Plots={resize:vN.resize,graphJson:vN.graphJson,sendDataToCloud:vN.sendDataToCloud};Qg.Fx={hover:KL.hover,unhover:KL.unhover,loneHover:KL.loneHover,loneUnhover:KL.loneUnhover};Qg.Snapshot=g0e();Qg.PlotSchema=sm()});var _0e=ie((Lar,x0e)=>{"use strict";x0e.exports=m0e()});var Xx=ie((Par,b0e)=>{"use strict";b0e.exports={TEXTPAD:3,eventDataKeys:["value","label"]}});var $0=ie((Rar,M0e)=>{"use strict";var Ql=Bl(),w0e=kl().axisHoverFormat,dgt=Ba().hovertemplateAttrs,pgt=Ba().texttemplateAttrs,A0e=Ls(),ggt=Xs(),T0e=Xx(),ygt=dc().pattern,Zx=aa().extendFlat,pN=ggt({editType:"calc",arrayOk:!0,colorEditType:"style"}),mgt=Ql.marker,xgt=mgt.line,_gt=Zx({},xgt.width,{dflt:0}),bgt=Zx({width:_gt,editType:"calc"},A0e("marker.line")),wgt=Zx({line:bgt,editType:"calc"},A0e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:ygt,cornerradius:{valType:"any",editType:"calc"}});M0e.exports={x:Ql.x,x0:Ql.x0,dx:Ql.dx,y:Ql.y,y0:Ql.y0,dy:Ql.dy,xperiod:Ql.xperiod,yperiod:Ql.yperiod,xperiod0:Ql.xperiod0,yperiod0:Ql.yperiod0,xperiodalignment:Ql.xperiodalignment,yperiodalignment:Ql.yperiodalignment,xhoverformat:w0e("x"),yhoverformat:w0e("y"),text:Ql.text,texttemplate:pgt({editType:"plot"},{keys:T0e.eventDataKeys}),hovertext:Ql.hovertext,hovertemplate:dgt({},{keys:T0e.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:Zx({},pN,{}),insidetextfont:Zx({},pN,{}),outsidetextfont:Zx({},pN,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:Zx({},Ql.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:wgt,offsetgroup:Ql.offsetgroup,alignmentgroup:Ql.alignmentgroup,selected:{marker:{opacity:Ql.selected.marker.opacity,color:Ql.selected.marker.color,editType:"style"},textfont:Ql.selected.textfont,editType:"style"},unselected:{marker:{opacity:Ql.unselected.marker.opacity,color:Ql.unselected.marker.color,editType:"style"},textfont:Ql.unselected.textfont,editType:"style"},zorder:Ql.zorder,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}});var JL=ie((Dar,S0e)=>{"use strict";S0e.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}});var QL=ie((Iar,C0e)=>{"use strict";var Tgt=_i(),E0e=Hh().hasColorscale,k0e=$f(),Agt=Zt().coercePattern;C0e.exports=function(t,r,i,n,a){var o=i("marker.color",n),s=E0e(t,"marker");s&&k0e(t,r,a,i,{prefix:"marker.",cLetter:"c"}),i("marker.line.color",Tgt.defaultLine),E0e(t,"marker.line")&&k0e(t,r,a,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width"),i("marker.opacity"),Agt(i,"marker.pattern",o,s),i("selected.marker.color"),i("unselected.marker.color")}});var zd=ie((Far,F0e)=>{"use strict";var L0e=la(),cw=Zt(),P0e=_i(),Mgt=Ti(),Sgt=U2(),Egt=s0(),kgt=QL(),Cgt=Bx(),R0e=$0(),$L=cw.coerceFont;function Lgt(e,t,r,i){function n(u,f){return cw.coerce(e,t,R0e,u,f)}var a=Sgt(e,t,i,n);if(!a){t.visible=!1;return}Egt(e,t,i,n),n("xhoverformat"),n("yhoverformat"),n("zorder"),n("orientation",t.x&&!t.y?"h":"v"),n("base"),n("offset"),n("width"),n("text"),n("hovertext"),n("hovertemplate");var o=n("textposition");I0e(e,t,i,n,o,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),kgt(e,t,n,r,i);var s=(t.marker.line||{}).color,l=Mgt.getComponentMethod("errorbars","supplyDefaults");l(e,t,s||P0e.defaultLine,{axis:"y"}),l(e,t,s||P0e.defaultLine,{axis:"x",inherit:"y"}),cw.coerceSelectionMarkerOpacity(t,n)}function Pgt(e,t){var r,i;function n(s,l){return cw.coerce(i._input,i,R0e,s,l)}for(var a=0;a<e.length;a++)if(i=e[a],i.type==="bar"){r=i._input;var o=n("marker.cornerradius",t.barcornerradius);i.marker&&(i.marker.cornerradius=D0e(o)),t.barmode==="group"&&Cgt(r,i,t,n)}}function D0e(e){if(L0e(e)){if(e=+e,e>=0)return e}else if(typeof e=="string"&&(e=e.trim(),e.slice(-1)==="%"&&L0e(e.slice(0,-1))&&(e=+e.slice(0,-1),e>=0)))return e+"%"}function I0e(e,t,r,i,n,a){a=a||{};var o=a.moduleHasSelected!==!1,s=a.moduleHasUnselected!==!1,l=a.moduleHasConstrain!==!1,u=a.moduleHasCliponaxis!==!1,f=a.moduleHasTextangle!==!1,c=a.moduleHasInsideanchor!==!1,h=!!a.hasPathbar,v=Array.isArray(n)||n==="auto",d=v||n==="inside",x=v||n==="outside";if(d||x){var b=$L(i,"textfont",r.font),p=cw.extendFlat({},b),w=e.textfont&&e.textfont.color,A=!w;if(A&&delete p.color,$L(i,"insidetextfont",p),h){var T=cw.extendFlat({},b);A&&delete T.color,$L(i,"pathbar.textfont",T)}x&&$L(i,"outsidetextfont",b),o&&i("selected.textfont.color"),s&&i("unselected.textfont.color"),l&&i("constraintext"),u&&i("cliponaxis"),f&&i("textangle"),i("texttemplate")}d&&c&&i("insidetextanchor")}F0e.exports={supplyDefaults:Lgt,crossTraceDefaults:Pgt,handleText:I0e,validateCornerradius:D0e}});var gN=ie((qar,q0e)=>{"use strict";var Rgt=Ti(),Dgt=Wi(),Igt=Zt(),Fgt=JL(),qgt=zd().validateCornerradius;q0e.exports=function(e,t,r){function i(d,x){return Igt.coerce(e,t,Fgt,d,x)}for(var n=!1,a=!1,o=!1,s={},l=i("barmode"),u=0;u<r.length;u++){var f=r[u];if(Rgt.traceIs(f,"bar")&&f.visible)n=!0;else continue;if(l==="group"){var c=f.xaxis+f.yaxis;s[c]&&(o=!0),s[c]=!0}if(f.visible&&f.type==="histogram"){var h=Dgt.getFromId({_fullLayout:t},f[f.orientation==="v"?"xaxis":"yaxis"]);h.type!=="category"&&(a=!0)}}if(!n){delete t.barmode;return}l!=="overlay"&&i("barnorm"),i("bargap",a&&!o?0:.2),i("bargroupgap");var v=i("barcornerradius");t.barcornerradius=qgt(v)}});var JM=ie((zar,z0e)=>{"use strict";var hw=Zt();z0e.exports=function(t,r){for(var i=0;i<t.length;i++)t[i].i=i;hw.mergeArray(r.text,t,"tx"),hw.mergeArray(r.hovertext,t,"htx");var n=r.marker;if(n){hw.mergeArray(n.opacity,t,"mo",!0),hw.mergeArray(n.color,t,"mc");var a=n.line;a&&(hw.mergeArray(a.color,t,"mlc"),hw.mergeArrayCastPositive(a.width,t,"mlw"))}}});var H0e=ie((Oar,V0e)=>{"use strict";var O0e=Wi(),B0e=f0(),N0e=Hh().hasColorscale,U0e=xv(),zgt=JM(),Ogt=bp();V0e.exports=function(t,r){var i=O0e.getFromId(t,r.xaxis||"x"),n=O0e.getFromId(t,r.yaxis||"y"),a,o,s,l,u,f,c={msUTC:!!(r.base||r.base===0)};r.orientation==="h"?(a=i.makeCalcdata(r,"x",c),s=n.makeCalcdata(r,"y"),l=B0e(r,n,"y",s),u=!!r.yperiodalignment,f="y"):(a=n.makeCalcdata(r,"y",c),s=i.makeCalcdata(r,"x"),l=B0e(r,i,"x",s),u=!!r.xperiodalignment,f="x"),o=l.vals;for(var h=Math.min(o.length,a.length),v=new Array(h),d=0;d<h;d++)v[d]={p:o[d],s:a[d]},u&&(v[d].orig_p=s[d],v[d][f+"End"]=l.ends[d],v[d][f+"Start"]=l.starts[d]),r.ids&&(v[d].id=String(r.ids[d]));return N0e(r,"marker")&&U0e(t,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),N0e(r,"marker.line")&&U0e(t,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),zgt(v,r),Ogt(v,r),v}});var xh=ie((Bar,Y0e)=>{"use strict";var Bgt=Mi(),Ngt=Zt();function Ugt(e,t,r){var i=e._fullLayout,n=i["_"+r+"Text_minsize"];if(n){var a=i.uniformtext.mode==="hide",o;switch(r){case"funnelarea":case"pie":case"sunburst":o="g.slice";break;case"treemap":case"icicle":o="g.slice, g.pathbar";break;default:o="g.points > g.point"}t.selectAll(o).each(function(s){var l=s.transform;if(l){l.scale=a&&l.hide?0:n/l.fontSize;var u=Bgt.select(this).select("text");Ngt.setTransormAndDisplay(u,l)}})}}function Vgt(e,t,r){if(r.uniformtext.mode){var i=G0e(e),n=r.uniformtext.minsize,a=t.scale*t.fontSize;t.hide=a<n,r[i]=r[i]||1/0,t.hide||(r[i]=Math.min(r[i],Math.max(a,n)))}}function Hgt(e,t){var r=G0e(e);t[r]=void 0}function G0e(e){return"_"+e+"Text_minsize"}Y0e.exports={recordMinTextSize:Vgt,clearMinTextSize:Hgt,resizeText:Ugt}});var eP=ie(jx=>{"use strict";var Ggt=la(),Ygt=Kf(),W0e=Zt().isArrayOrTypedArray;jx.coerceString=function(e,t,r){if(typeof t=="string"){if(t||!e.noBlank)return t}else if((typeof t=="number"||t===!0)&&!e.strict)return String(t);return r!==void 0?r:e.dflt};jx.coerceNumber=function(e,t,r){if(Ggt(t)){t=+t;var i=e.min,n=e.max,a=i!==void 0&&t<i||n!==void 0&&t>n;if(!a)return t}return r!==void 0?r:e.dflt};jx.coerceColor=function(e,t,r){return Ygt(t).isValid()?t:r!==void 0?r:e.dflt};jx.coerceEnumerated=function(e,t,r){return e.coerceNumber&&(t=+t),e.values.indexOf(t)!==-1?t:r!==void 0?r:e.dflt};jx.getValue=function(e,t){var r;return W0e(e)?t<e.length&&(r=e[t]):r=e,r};jx.getLineWidth=function(e,t){var r=0<t.mlw?t.mlw:W0e(e.marker.line.width)?0:e.marker.line.width;return r}});var Mp=ie((Uar,nge)=>{"use strict";var QM=Mi(),Wgt=_i(),$M=oa(),X0e=Zt(),Z0e=Ti(),j0e=xh().resizeText,yN=$0(),Xgt=yN.textfont,Zgt=yN.insidetextfont,jgt=yN.outsidetextfont,Nc=eP();function Kgt(e){var t=QM.select(e).selectAll('g[class^="barlayer"]').selectAll("g.trace");j0e(e,t,"bar");var r=t.size(),i=e._fullLayout;t.style("opacity",function(n){return n[0].trace.opacity}).each(function(n){(i.barmode==="stack"&&r>1||i.bargap===0&&i.bargroupgap===0&&!n[0].trace.marker.line.width)&&QM.select(this).attr("shape-rendering","crispEdges")}),t.selectAll("g.points").each(function(n){var a=QM.select(this),o=n[0].trace;K0e(a,o,e)}),Z0e.getComponentMethod("errorbars","style")(t)}function K0e(e,t,r){$M.pointStyle(e.selectAll("path"),t,r),J0e(e,t,r)}function J0e(e,t,r){e.selectAll("text").each(function(i){var n=QM.select(this),a=X0e.ensureUniformFontSize(r,Q0e(n,i,t,r));$M.font(n,a)})}function Jgt(e,t,r){var i=t[0].trace;i.selectedpoints?Qgt(r,i,e):(K0e(r,i,e),Z0e.getComponentMethod("errorbars","style")(r))}function Qgt(e,t,r){$M.selectedPointStyle(e.selectAll("path"),t),$gt(e.selectAll("text"),t,r)}function $gt(e,t,r){e.each(function(i){var n=QM.select(this),a;if(i.selected){a=X0e.ensureUniformFontSize(r,Q0e(n,i,t,r));var o=t.selected.textfont&&t.selected.textfont.color;o&&(a.color=o),$M.font(n,a)}else $M.selectedTextStyle(n,t)})}function Q0e(e,t,r,i){var n=i._fullLayout.font,a=r.textfont;if(e.classed("bartext-inside")){var o=rge(t,r);a=ege(r,t.i,n,o)}else e.classed("bartext-outside")&&(a=tge(r,t.i,n));return a}function $0e(e,t,r){return mN(Xgt,e.textfont,t,r)}function ege(e,t,r,i){var n=$0e(e,t,r),a=e._input.textfont===void 0||e._input.textfont.color===void 0||Array.isArray(e.textfont.color)&&e.textfont.color[t]===void 0;return a&&(n={color:Wgt.contrast(i),family:n.family,size:n.size,weight:n.weight,style:n.style,variant:n.variant,textcase:n.textcase,lineposition:n.lineposition,shadow:n.shadow}),mN(Zgt,e.insidetextfont,t,n)}function tge(e,t,r){var i=$0e(e,t,r);return mN(jgt,e.outsidetextfont,t,i)}function mN(e,t,r,i){t=t||{};var n=Nc.getValue(t.family,r),a=Nc.getValue(t.size,r),o=Nc.getValue(t.color,r),s=Nc.getValue(t.weight,r),l=Nc.getValue(t.style,r),u=Nc.getValue(t.variant,r),f=Nc.getValue(t.textcase,r),c=Nc.getValue(t.lineposition,r),h=Nc.getValue(t.shadow,r);return{family:Nc.coerceString(e.family,n,i.family),size:Nc.coerceNumber(e.size,a,i.size),color:Nc.coerceColor(e.color,o,i.color),weight:Nc.coerceString(e.weight,s,i.weight),style:Nc.coerceString(e.style,l,i.style),variant:Nc.coerceString(e.variant,u,i.variant),textcase:Nc.coerceString(e.variant,f,i.textcase),lineposition:Nc.coerceString(e.variant,c,i.lineposition),shadow:Nc.coerceString(e.variant,h,i.shadow)}}function rge(e,t){return t.type==="waterfall"?t[e.dir].marker.color:e.mcc||e.mc||t.marker.color}nge.exports={style:Kgt,styleTextPoints:J0e,styleOnSelect:Jgt,getInsideTextFont:ege,getOutsideTextFont:tge,getBarColor:rge,resizeText:j0e}});var Jx=ie((Var,cge)=>{"use strict";var tP=Mi(),rP=la(),mc=Zt(),eyt=ks(),tyt=_i(),qm=oa(),ryt=Ti(),nP=Wi().tickText,ige=xh(),nyt=ige.recordMinTextSize,iyt=ige.clearMinTextSize,xN=Mp(),vw=eP(),ayt=Xx(),age=$0(),oyt=age.text,syt=age.textposition,lyt=ad().appendArrayPointValue,Kh=ayt.TEXTPAD;function uyt(e){return e.id}function fyt(e){if(e.ids)return uyt}function _N(e){return(e>0)-(e<0)}function eg(e,t){return e<t?1:-1}function cyt(e,t,r,i){var n=[],a=[],o=i?t:r,s=i?r:t;return n[0]=o.c2p(e.s0,!0),a[0]=s.c2p(e.p0,!0),n[1]=o.c2p(e.s1,!0),a[1]=s.c2p(e.p1,!0),i?[n,a]:[a,n]}function oge(e,t,r,i){if(!t.uniformtext.mode&&sge(r)){var n;return i&&(n=i()),e.transition().duration(r.duration).ease(r.easing).each("end",function(){n&&n()}).each("interrupt",function(){n&&n()})}else return e}function sge(e){return e&&e.duration>0}function hyt(e,t,r,i,n,a){var o=t.xaxis,s=t.yaxis,l=e._fullLayout,u=e._context.staticPlot;n||(n={mode:l.barmode,norm:l.barmode,gap:l.bargap,groupgap:l.bargroupgap},iyt("bar",l));var f=mc.makeTraceGroups(i,r,"trace bars").each(function(c){var h=tP.select(this),v=c[0].trace,d=c[0].t,x=v.type==="waterfall",b=v.type==="funnel",p=v.type==="histogram",w=v.type==="bar",A=w||b,T=0;x&&v.connector.visible&&v.connector.mode==="between"&&(T=v.connector.line.width/2);var k=v.orientation==="h",_=sge(n),E=mc.ensureSingle(h,"g","points"),S=fyt(v),g=E.selectAll("g.point").data(mc.identity,S);g.enter().append("g").classed("point",!0),g.exit().remove(),g.each(function(M,P){var D=tP.select(this),q=cyt(M,o,s,k),O=q[0][0],U=q[0][1],B=q[1][0],F=q[1][1],N=(k?U-O:F-B)===0;N&&A&&vw.getLineWidth(v,M)&&(N=!1),N||(N=!rP(O)||!rP(U)||!rP(B)||!rP(F)),M.isBlank=N,N&&(k?U=O:F=B),T&&!N&&(k?(O-=eg(O,U)*T,U+=eg(O,U)*T):(B-=eg(B,F)*T,F+=eg(B,F)*T));var X,K;if(v.type==="waterfall"){if(!N){var ne=v[M.dir].marker;X=ne.line.width,K=ne.color}}else X=vw.getLineWidth(v,M),K=M.mc||v.marker.color;function fe(Me){var Ke=tP.round(X/2%1,2);return n.gap===0&&n.groupgap===0?tP.round(Math.round(Me)-Ke,2):Me}function ue(Me,Ke,We){return We&&Me===Ke?Me:Math.abs(Me-Ke)>=2?fe(Me):Me>Ke?Math.ceil(Me):Math.floor(Me)}var ee=tyt.opacity(K),Z=ee<1||X>.01?fe:ue;e._context.staticPlot||(O=Z(O,U,k),U=Z(U,O,k),B=Z(B,F,!k),F=Z(F,B,!k));var oe=k?o.c2p:s.c2p,ce;M.s0>0?ce=M._sMax:M.s0<0?ce=M._sMin:ce=M.s1>0?M._sMax:M._sMin;function le(Me,Ke){if(!Me)return 0;var We=Math.abs(k?F-B:U-O),et=Math.abs(k?U-O:F-B),vt=Z(Math.abs(oe(ce,!0)-oe(0,!0))),at=M.hasB?Math.min(We/2,et/2):Math.min(We/2,vt),Xe;if(Ke==="%"){var dt=Math.min(50,Me);Xe=We*(dt/100)}else Xe=Me;return Z(Math.max(Math.min(Xe,at),0))}var me=w||p?le(d.cornerradiusvalue,d.cornerradiusform):0,he,te,ge="M"+O+","+B+"V"+F+"H"+U+"V"+B+"Z",ae=0;if(me&&M.s){var _e=_N(M.s0)===0||_N(M.s)===_N(M.s0)?M.s1:M.s0;if(ae=Z(M.hasB?0:Math.abs(oe(ce,!0)-oe(_e,!0))),ae<me){var Ce=eg(O,U),qe=eg(B,F),rt=Ce===-qe?1:0;if(k)if(M.hasB)he="M"+(O+me*Ce)+","+B+"A "+me+","+me+" 0 0 "+rt+" "+O+","+(B+me*qe)+"V"+(F-me*qe)+"A "+me+","+me+" 0 0 "+rt+" "+(O+me*Ce)+","+F+"H"+(U-me*Ce)+"A "+me+","+me+" 0 0 "+rt+" "+U+","+(F-me*qe)+"V"+(B+me*qe)+"A "+me+","+me+" 0 0 "+rt+" "+(U-me*Ce)+","+B+"Z";else{te=Math.abs(U-O)+ae;var Re=te<me?me-Math.sqrt(te*(2*me-te)):0,Ie=ae>0?Math.sqrt(ae*(2*me-ae)):0,ot=Ce>0?Math.max:Math.min;he="M"+O+","+B+"V"+(F-Re*qe)+"H"+ot(U-(me-ae)*Ce,O)+"A "+me+","+me+" 0 0 "+rt+" "+U+","+(F-me*qe-Ie)+"V"+(B+me*qe+Ie)+"A "+me+","+me+" 0 0 "+rt+" "+ot(U-(me-ae)*Ce,O)+","+(B+Re*qe)+"Z"}else if(M.hasB)he="M"+(O+me*Ce)+","+B+"A "+me+","+me+" 0 0 "+rt+" "+O+","+(B+me*qe)+"V"+(F-me*qe)+"A "+me+","+me+" 0 0 "+rt+" "+(O+me*Ce)+","+F+"H"+(U-me*Ce)+"A "+me+","+me+" 0 0 "+rt+" "+U+","+(F-me*qe)+"V"+(B+me*qe)+"A "+me+","+me+" 0 0 "+rt+" "+(U-me*Ce)+","+B+"Z";else{te=Math.abs(F-B)+ae;var lt=te<me?me-Math.sqrt(te*(2*me-te)):0,ht=ae>0?Math.sqrt(ae*(2*me-ae)):0,xt=qe>0?Math.max:Math.min;he="M"+(O+lt*Ce)+","+B+"V"+xt(F-(me-ae)*qe,B)+"A "+me+","+me+" 0 0 "+rt+" "+(O+me*Ce-ht)+","+F+"H"+(U-me*Ce+ht)+"A "+me+","+me+" 0 0 "+rt+" "+(U-lt*Ce)+","+xt(F-(me-ae)*qe,B)+"V"+B+"Z"}}else he=ge}else he=ge;var Vt=oge(mc.ensureSingle(D,"path"),l,n,a);if(Vt.style("vector-effect",u?"none":"non-scaling-stroke").attr("d",isNaN((U-O)*(F-B))||N&&e._context.staticPlot?"M0,0Z":he).call(qm.setClipUrl,t.layerClipId,e),!l.uniformtext.mode&&_){var Ht=qm.makePointStyleFns(v);qm.singlePointStyle(M,Vt,v,Ht,e)}vyt(e,t,D,c,P,O,U,B,F,me,ae,n,a),t.layerClipId&&qm.hideOutsideRangePoint(M,D.select("text"),o,s,v.xcalendar,v.ycalendar)});var C=v.cliponaxis===!1;qm.setClipUrl(h,C?null:t.layerClipId,e)});ryt.getComponentMethod("errorbars","plot")(e,f,t,n)}function vyt(e,t,r,i,n,a,o,s,l,u,f,c,h){var v=t.xaxis,d=t.yaxis,x=e._fullLayout,b;function p(te,ge,ae){var _e=mc.ensureSingle(te,"text").text(ge).attr({class:"bartext bartext-"+b,"text-anchor":"middle","data-notex":1}).call(qm.font,ae).call(eyt.convertToTspans,e);return _e}var w=i[0].trace,A=w.orientation==="h",T=gyt(x,i,n,v,d);b=yyt(w,n);var k=c.mode==="stack"||c.mode==="relative",_=i[n],E=!k||_._outmost,S=_.hasB,g=u&&u-f>Kh;if(!T||b==="none"||(_.isBlank||a===o||s===l)&&(b==="auto"||b==="inside")){r.select("text").remove();return}var C=x.font,M=xN.getBarColor(i[n],w),P=xN.getInsideTextFont(w,n,C,M),D=xN.getOutsideTextFont(w,n,C),q=w.insidetextanchor||"end",O=r.datum();A?v.type==="log"&&O.s0<=0&&(v.range[0]<v.range[1]?a=0:a=v._length):d.type==="log"&&O.s0<=0&&(d.range[0]<d.range[1]?s=d._length:s=0);var U=Math.abs(o-a),B=Math.abs(l-s),F=U-2*Kh,N=B-2*Kh,X,K,ne,fe,ue;if(b==="outside"&&!E&&!_.hasB&&(b="inside"),b==="auto")if(E){b="inside",ue=mc.ensureUniformFontSize(e,P),X=p(r,T,ue),K=qm.bBox(X.node()),ne=K.width,fe=K.height;var ee=ne>0&&fe>0,Z;g?S?Z=Kx(F-2*u,N,ne,fe,A)||Kx(F,N-2*u,ne,fe,A):A?Z=Kx(F-(u-f),N,ne,fe,A)||Kx(F,N-2*(u-f),ne,fe,A):Z=Kx(F,N-(u-f),ne,fe,A)||Kx(F-2*(u-f),N,ne,fe,A):Z=Kx(F,N,ne,fe,A),ee&&Z?b="inside":(b="outside",X.remove(),X=null)}else b="inside";if(!X){ue=mc.ensureUniformFontSize(e,b==="outside"?D:P),X=p(r,T,ue);var oe=X.attr("transform");if(X.attr("transform",""),K=qm.bBox(X.node()),ne=K.width,fe=K.height,X.attr("transform",oe),ne<=0||fe<=0){X.remove();return}}var ce=w.textangle,le,me;b==="outside"?(me=w.constraintext==="both"||w.constraintext==="outside",le=pyt(a,o,s,l,K,{isHorizontal:A,constrained:me,angle:ce})):(me=w.constraintext==="both"||w.constraintext==="inside",le=fge(a,o,s,l,K,{isHorizontal:A,constrained:me,angle:ce,anchor:q,hasB:S,r:u,overhead:f})),le.fontSize=ue.size,nyt(w.type==="histogram"?"bar":w.type,le,x),_.transform=le;var he=oge(X,x,c,h);mc.setTransormAndDisplay(he,le)}function Kx(e,t,r,i,n){if(e<0||t<0)return!1;var a=r<=e&&i<=t,o=r<=t&&i<=e,s=n?e>=r*(t/i):t>=i*(e/r);return a||o||s}function lge(e){return e==="auto"?0:e}function uge(e,t){var r=Math.PI/180*t,i=Math.abs(Math.sin(r)),n=Math.abs(Math.cos(r));return{x:e.width*n+e.height*i,y:e.width*i+e.height*n}}function fge(e,t,r,i,n,a){var o=!!a.isHorizontal,s=!!a.constrained,l=a.angle||0,u=a.anchor,f=u==="end",c=u==="start",h=a.leftToRight||0,v=(h+1)/2,d=1-v,x=a.hasB,b=a.r,p=a.overhead,w=n.width,A=n.height,T=Math.abs(t-e),k=Math.abs(i-r),_=T>2*Kh&&k>2*Kh?Kh:0;T-=2*_,k-=2*_;var E=lge(l);l==="auto"&&!(w<=T&&A<=k)&&(w>T||A>k)&&(!(w>k||A>T)||w<A!=T<k)&&(E+=90);var S=uge(n,E),g,C;if(b&&b-p>Kh){var M=dyt(e,t,r,i,S,b,p,o,x);g=M.scale,C=M.pad}else g=1,s&&(g=Math.min(1,T/S.x,k/S.y)),C=0;var P=n.left*d+n.right*v,D=(n.top+n.bottom)/2,q=(e+Kh)*d+(t-Kh)*v,O=(r+i)/2,U=0,B=0;if(c||f){var F=(o?S.x:S.y)/2;b&&(f||x)&&(_+=C);var N=o?eg(e,t):eg(r,i);o?c?(q=e+N*_,U=-N*F):(q=t-N*_,U=N*F):c?(O=r+N*_,B=-N*F):(O=i-N*_,B=N*F)}return{textX:P,textY:D,targetX:q,targetY:O,anchorX:U,anchorY:B,scale:g,rotate:E}}function dyt(e,t,r,i,n,a,o,s,l){var u=Math.max(0,Math.abs(t-e)-2*Kh),f=Math.max(0,Math.abs(i-r)-2*Kh),c=a-Kh,h=o?c-Math.sqrt(c*c-(c-o)*(c-o)):c,v=l?c*2:s?c-o:2*h,d=l?c*2:s?2*h:c-o,x,b,p,w,A;return n.y/n.x>=f/(u-v)?w=f/n.y:n.y/n.x<=(f-d)/u?w=u/n.x:!l&&s?(x=n.x*n.x+n.y*n.y/4,b=-2*n.x*(u-c)-n.y*(f/2-c),p=(u-c)*(u-c)+(f/2-c)*(f/2-c)-c*c,w=(-b+Math.sqrt(b*b-4*x*p))/(2*x)):l?(x=(n.x*n.x+n.y*n.y)/4,b=-n.x*(u/2-c)-n.y*(f/2-c),p=(u/2-c)*(u/2-c)+(f/2-c)*(f/2-c)-c*c,w=(-b+Math.sqrt(b*b-4*x*p))/(2*x)):(x=n.x*n.x/4+n.y*n.y,b=-n.x*(u/2-c)-2*n.y*(f-c),p=(u/2-c)*(u/2-c)+(f-c)*(f-c)-c*c,w=(-b+Math.sqrt(b*b-4*x*p))/(2*x)),w=Math.min(1,w),s?A=Math.max(0,c-Math.sqrt(Math.max(0,c*c-(c-(f-n.y*w)/2)*(c-(f-n.y*w)/2)))-o):A=Math.max(0,c-Math.sqrt(Math.max(0,c*c-(c-(u-n.x*w)/2)*(c-(u-n.x*w)/2)))-o),{scale:w,pad:A}}function pyt(e,t,r,i,n,a){var o=!!a.isHorizontal,s=!!a.constrained,l=a.angle||0,u=n.width,f=n.height,c=Math.abs(t-e),h=Math.abs(i-r),v;o?v=h>2*Kh?Kh:0:v=c>2*Kh?Kh:0;var d=1;s&&(d=o?Math.min(1,h/f):Math.min(1,c/u));var x=lge(l),b=uge(n,x),p=(o?b.x:b.y)/2,w=(n.left+n.right)/2,A=(n.top+n.bottom)/2,T=(e+t)/2,k=(r+i)/2,_=0,E=0,S=o?eg(t,e):eg(r,i);return o?(T=t-S*v,_=S*p):(k=i+S*v,E=-S*p),{textX:w,textY:A,targetX:T,targetY:k,anchorX:_,anchorY:E,scale:d,rotate:x}}function gyt(e,t,r,i,n){var a=t[0].trace,o=a.texttemplate,s;return o?s=myt(e,t,r,i,n):a.textinfo?s=xyt(t,r,i,n):s=vw.getValue(a.text,r),vw.coerceString(oyt,s)}function yyt(e,t){var r=vw.getValue(e.textposition,t);return vw.coerceEnumerated(syt,r)}function myt(e,t,r,i,n){var a=t[0].trace,o=mc.castOption(a,r,"texttemplate");if(!o)return"";var s=a.type==="histogram",l=a.type==="waterfall",u=a.type==="funnel",f=a.orientation==="h",c,h,v,d;f?(c="y",h=n,v="x",d=i):(c="x",h=i,v="y",d=n);function x(_){return nP(h,h.c2l(_),!0).text}function b(_){return nP(d,d.c2l(_),!0).text}var p=t[r],w={};w.label=p.p,w.labelLabel=w[c+"Label"]=x(p.p);var A=mc.castOption(a,p.i,"text");(A===0||A)&&(w.text=A),w.value=p.s,w.valueLabel=w[v+"Label"]=b(p.s);var T={};lyt(T,a,p.i),(s||T.x===void 0)&&(T.x=f?w.value:w.label),(s||T.y===void 0)&&(T.y=f?w.label:w.value),(s||T.xLabel===void 0)&&(T.xLabel=f?w.valueLabel:w.labelLabel),(s||T.yLabel===void 0)&&(T.yLabel=f?w.labelLabel:w.valueLabel),l&&(w.delta=+p.rawS||p.s,w.deltaLabel=b(w.delta),w.final=p.v,w.finalLabel=b(w.final),w.initial=w.final-w.delta,w.initialLabel=b(w.initial)),u&&(w.value=p.s,w.valueLabel=b(w.value),w.percentInitial=p.begR,w.percentInitialLabel=mc.formatPercent(p.begR),w.percentPrevious=p.difR,w.percentPreviousLabel=mc.formatPercent(p.difR),w.percentTotal=p.sumR,w.percenTotalLabel=mc.formatPercent(p.sumR));var k=mc.castOption(a,p.i,"customdata");return k&&(w.customdata=k),mc.texttemplateString(o,w,e._d3locale,T,w,a._meta||{})}function xyt(e,t,r,i){var n=e[0].trace,a=n.orientation==="h",o=n.type==="waterfall",s=n.type==="funnel";function l(k){var _=a?i:r;return nP(_,k,!0).text}function u(k){var _=a?r:i;return nP(_,+k,!0).text}var f=n.textinfo,c=e[t],h=f.split("+"),v=[],d,x=function(k){return h.indexOf(k)!==-1};if(x("label")&&v.push(l(e[t].p)),x("text")&&(d=mc.castOption(n,c.i,"text"),(d===0||d)&&v.push(d)),o){var b=+c.rawS||c.s,p=c.v,w=p-b;x("initial")&&v.push(u(w)),x("delta")&&v.push(u(b)),x("final")&&v.push(u(p))}if(s){x("value")&&v.push(u(c.s));var A=0;x("percent initial")&&A++,x("percent previous")&&A++,x("percent total")&&A++;var T=A>1;x("percent initial")&&(d=mc.formatPercent(c.begR),T&&(d+=" of initial"),v.push(d)),x("percent previous")&&(d=mc.formatPercent(c.difR),T&&(d+=" of previous"),v.push(d)),x("percent total")&&(d=mc.formatPercent(c.sumR),T&&(d+=" of total"),v.push(d))}return v.join("<br>")}cge.exports={plot:hyt,toMoveInsideBar:fge}});var dw=ie((Har,pge)=>{"use strict";var eS=Ol(),_yt=Ti(),hge=_i(),byt=Zt().fillText,wyt=eP().getLineWidth,bN=Wi().hoverLabelText,Tyt=eo().BADNUM;function Ayt(e,t,r,i,n){var a=vge(e,t,r,i,n);if(a){var o=a.cd,s=o[0].trace,l=o[a.index];return a.color=dge(s,l),_yt.getComponentMethod("errorbars","hoverInfo")(l,s,a),[a]}}function vge(e,t,r,i,n){var a=e.cd,o=a[0].trace,s=a[0].t,l=i==="closest",u=o.type==="waterfall",f=e.maxHoverDistance,c=e.maxSpikeDistance,h,v,d,x,b,p,w;o.orientation==="h"?(h=r,v=t,d="y",x="x",b=O,p=P):(h=t,v=r,d="x",x="y",p=O,b=P);var A=o[d+"period"],T=l||A;function k(Z){return E(Z,-1)}function _(Z){return E(Z,1)}function E(Z,oe){var ce=Z.w;return Z[d]+oe*ce/2}function S(Z){return Z[d+"End"]-Z[d+"Start"]}var g=l?k:A?function(Z){return Z.p-S(Z)/2}:function(Z){return Math.min(k(Z),Z.p-s.bardelta/2)},C=l?_:A?function(Z){return Z.p+S(Z)/2}:function(Z){return Math.max(_(Z),Z.p+s.bardelta/2)};function M(Z,oe,ce){return n.finiteRange&&(ce=0),eS.inbox(Z-h,oe-h,ce+Math.min(1,Math.abs(oe-Z)/w)-1)}function P(Z){return M(g(Z),C(Z),f)}function D(Z){return M(k(Z),_(Z),c)}function q(Z){var oe=Z[x];if(u){var ce=Math.abs(Z.rawS)||0;v>0?oe+=ce:v<0&&(oe-=ce)}return oe}function O(Z){var oe=v,ce=Z.b,le=q(Z);return eS.inbox(ce-oe,le-oe,f+(le-oe)/(le-ce)-1)}function U(Z){var oe=v,ce=Z.b,le=q(Z);return eS.inbox(ce-oe,le-oe,c+(le-oe)/(le-ce)-1)}var B=e[d+"a"],F=e[x+"a"];w=Math.abs(B.r2c(B.range[1])-B.r2c(B.range[0]));function N(Z){return(b(Z)+p(Z))/2}var X=eS.getDistanceFunction(i,b,p,N);if(eS.getClosest(a,X,e),e.index!==!1&&a[e.index].p!==Tyt){T||(g=function(Z){return Math.min(k(Z),Z.p-s.bargroupwidth/2)},C=function(Z){return Math.max(_(Z),Z.p+s.bargroupwidth/2)});var K=e.index,ne=a[K],fe=o.base?ne.b+ne.s:ne.s;e[x+"0"]=e[x+"1"]=F.c2p(ne[x],!0),e[x+"LabelVal"]=fe;var ue=s.extents[s.extents.round(ne.p)];e[d+"0"]=B.c2p(l?g(ne):ue[0],!0),e[d+"1"]=B.c2p(l?C(ne):ue[1],!0);var ee=ne.orig_p!==void 0;return e[d+"LabelVal"]=ee?ne.orig_p:ne.p,e.labelLabel=bN(B,e[d+"LabelVal"],o[d+"hoverformat"]),e.valueLabel=bN(F,e[x+"LabelVal"],o[x+"hoverformat"]),e.baseLabel=bN(F,ne.b,o[x+"hoverformat"]),e.spikeDistance=(U(ne)+D(ne))/2,e[d+"Spike"]=B.c2p(ne.p,!0),byt(ne,o,e),e.hovertemplate=o.hovertemplate,e}}function dge(e,t){var r=t.mcc||e.marker.color,i=t.mlcc||e.marker.line.color,n=wyt(e,t);if(hge.opacity(r))return r;if(hge.opacity(i)&&n)return i}pge.exports={hoverPoints:Ayt,hoverOnBars:vge,getTraceColor:dge}});var yge=ie((Gar,gge)=>{"use strict";gge.exports=function(t,r,i){return t.x="xVal"in r?r.xVal:r.x,t.y="yVal"in r?r.yVal:r.y,r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),i.orientation==="h"?(t.label=t.y,t.value=t.x):(t.label=t.x,t.value=t.y),t}});var pw=ie((Yar,mge)=>{"use strict";mge.exports=function(t,r){var i=t.cd,n=t.xaxis,a=t.yaxis,o=i[0].trace,s=o.type==="funnel",l=o.orientation==="h",u=[],f;if(r===!1)for(f=0;f<i.length;f++)i[f].selected=0;else for(f=0;f<i.length;f++){var c=i[f],h="ct"in c?c.ct:Myt(c,n,a,l,s);r.contains(h,!1,f,t)?(u.push({pointNumber:f,x:n.c2d(c.x),y:a.c2d(c.y)}),c.selected=1):c.selected=0}return u};function Myt(e,t,r,i,n){var a=t.c2p(i?e.s0:e.p0,!0),o=t.c2p(i?e.s1:e.p1,!0),s=r.c2p(i?e.p0:e.s0,!0),l=r.c2p(i?e.p1:e.s1,!0);return n?[(a+o)/2,(s+l)/2]:i?[o,(s+l)/2]:[(a+o)/2,l]}});var _ge=ie((War,xge)=>{"use strict";xge.exports={attributes:$0(),layoutAttributes:JL(),supplyDefaults:zd().supplyDefaults,crossTraceDefaults:zd().crossTraceDefaults,supplyLayoutDefaults:gN(),calc:H0e(),crossTraceCalc:Nx().crossTraceCalc,colorbar:yh(),arraysToCalcdata:JM(),plot:Jx().plot,style:Mp().style,styleOnSelect:Mp().styleOnSelect,hoverPoints:dw().hoverPoints,eventData:yge(),selectPoints:pw(),moduleType:"trace",name:"bar",basePlotModule:yu(),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}});var wge=ie((Xar,bge)=>{"use strict";bge.exports=_ge()});var tS=ie((Zar,Sge)=>{"use strict";var Syt=X0(),Sp=Bl(),Tge=$0(),Eyt=Qu(),Age=kl().axisHoverFormat,kyt=Ba().hovertemplateAttrs,$g=aa().extendFlat,gw=Sp.marker,Mge=gw.line;Sge.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:Sp.xperiod,yperiod:Sp.yperiod,xperiod0:Sp.xperiod0,yperiod0:Sp.yperiod0,xperiodalignment:Sp.xperiodalignment,yperiodalignment:Sp.yperiodalignment,xhoverformat:Age("x"),yhoverformat:Age("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:$g({},gw.symbol,{arrayOk:!1,editType:"plot"}),opacity:$g({},gw.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:$g({},gw.angle,{arrayOk:!1,editType:"calc"}),size:$g({},gw.size,{arrayOk:!1,editType:"calc"}),color:$g({},gw.color,{arrayOk:!1,editType:"style"}),line:{color:$g({},Mge.color,{arrayOk:!1,dflt:Eyt.defaultLine,editType:"style"}),width:$g({},Mge.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:Syt(),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:Tge.offsetgroup,alignmentgroup:Tge.alignmentgroup,selected:{marker:Sp.selected.marker,editType:"style"},unselected:{marker:Sp.unselected.marker,editType:"style"},text:$g({},Sp.text,{}),hovertext:$g({},Sp.hovertext,{}),hovertemplate:kyt({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"},zorder:Sp.zorder}});var rS=ie((jar,Ege)=>{"use strict";Ege.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}});var iS=ie((Kar,Pge)=>{"use strict";var Ep=Zt(),Cyt=Ti(),Lyt=_i(),Pyt=s0(),Ryt=Bx(),kge=w2(),nS=tS();function Dyt(e,t,r,i){function n(d,x){return Ep.coerce(e,t,nS,d,x)}if(Cge(e,t,n,i),t.visible!==!1){Pyt(e,t,i,n),n("xhoverformat"),n("yhoverformat");var a=t._hasPreCompStats;a&&(n("lowerfence"),n("upperfence")),n("line.color",(e.marker||{}).color||r),n("line.width"),n("fillcolor",Lyt.addOpacity(t.line.color,.5));var o=!1;if(a){var s=n("mean"),l=n("sd");s&&s.length&&(o=!0,l&&l.length&&(o="sd"))}n("whiskerwidth");var u=n("sizemode"),f;u==="quartiles"&&(f=n("boxmean",o)),n("showwhiskers",u==="quartiles"),(u==="sd"||f==="sd")&&n("sdmultiple"),n("width"),n("quartilemethod");var c=!1;if(a){var h=n("notchspan");h&&h.length&&(c=!0)}else Ep.validate(e.notchwidth,nS.notchwidth)&&(c=!0);var v=n("notched",c);v&&n("notchwidth"),Lge(e,t,n,{prefix:"box"}),n("zorder")}}function Cge(e,t,r,i){function n(C){var M=0;return C&&C.length&&(M+=1,Ep.isArrayOrTypedArray(C[0])&&C[0].length&&(M+=1)),M}function a(C){return Ep.validate(e[C],nS[C])}var o=r("y"),s=r("x"),l;if(t.type==="box"){var u=r("q1"),f=r("median"),c=r("q3");t._hasPreCompStats=u&&u.length&&f&&f.length&&c&&c.length,l=Math.min(Ep.minRowLength(u),Ep.minRowLength(f),Ep.minRowLength(c))}var h=n(o),v=n(s),d=h&&Ep.minRowLength(o),x=v&&Ep.minRowLength(s),b=i.calendar,p={autotypenumbers:i.autotypenumbers},w,A;if(t._hasPreCompStats)switch(String(v)+String(h)){case"00":var T=a("x0")||a("dx"),k=a("y0")||a("dy");k&&!T?w="h":w="v",A=l;break;case"10":w="v",A=Math.min(l,x);break;case"20":w="h",A=Math.min(l,s.length);break;case"01":w="h",A=Math.min(l,d);break;case"02":w="v",A=Math.min(l,o.length);break;case"12":w="v",A=Math.min(l,x,o.length);break;case"21":w="h",A=Math.min(l,s.length,d);break;case"11":A=0;break;case"22":var _=!1,E;for(E=0;E<s.length;E++)if(kge(s[E],b,p)==="category"){_=!0;break}if(_)w="v",A=Math.min(l,x,o.length);else{for(E=0;E<o.length;E++)if(kge(o[E],b,p)==="category"){_=!0;break}_?(w="h",A=Math.min(l,s.length,d)):(w="v",A=Math.min(l,x,o.length))}break}else h>0?(w="v",v>0?A=Math.min(x,d):A=Math.min(d)):v>0?(w="h",A=Math.min(x)):A=0;if(!A){t.visible=!1;return}t._length=A;var S=r("orientation",w);t._hasPreCompStats?S==="v"&&v===0?(r("x0",0),r("dx",1)):S==="h"&&h===0&&(r("y0",0),r("dy",1)):S==="v"&&v===0?r("x0"):S==="h"&&h===0&&r("y0");var g=Cyt.getComponentMethod("calendars","handleTraceDefaults");g(e,t,["x","y"],i)}function Lge(e,t,r,i){var n=i.prefix,a=Ep.coerce2(e,t,nS,"marker.outliercolor"),o=r("marker.line.outliercolor"),s="outliers";t._hasPreCompStats?s="all":(a||o)&&(s="suspectedoutliers");var l=r(n+"points",s);l?(r("jitter",l==="all"?.3:0),r("pointpos",l==="all"?-1.5:0),r("marker.symbol"),r("marker.opacity"),r("marker.size"),r("marker.angle"),r("marker.color",t.line.color),r("marker.line.color"),r("marker.line.width"),l==="suspectedoutliers"&&(r("marker.line.outliercolor",t.marker.color),r("marker.line.outlierwidth")),r("selected.marker.color"),r("unselected.marker.color"),r("selected.marker.size"),r("unselected.marker.size"),r("text"),r("hovertext")):delete t.marker;var u=r("hoveron");(u==="all"||u.indexOf("points")!==-1)&&r("hovertemplate"),Ep.coerceSelectionMarkerOpacity(t,r)}function Iyt(e,t){var r,i;function n(s){return Ep.coerce(i._input,i,nS,s)}for(var a=0;a<e.length;a++){i=e[a];var o=i.type;(o==="box"||o==="violin")&&(r=i._input,t[o+"mode"]==="group"&&Ryt(r,i,t,n))}}Pge.exports={supplyDefaults:Dyt,crossTraceDefaults:Iyt,handleSampleDefaults:Cge,handlePointsDefaults:Lge}});var iP=ie((Jar,Dge)=>{"use strict";var Fyt=Ti(),qyt=Zt(),zyt=rS();function Rge(e,t,r,i,n){for(var a=n+"Layout",o=!1,s=0;s<r.length;s++){var l=r[s];if(Fyt.traceIs(l,a)){o=!0;break}}o&&(i(n+"mode"),i(n+"gap"),i(n+"groupgap"))}function Oyt(e,t,r){function i(n,a){return qyt.coerce(e,t,zyt,n,a)}Rge(e,t,r,i,"box")}Dge.exports={supplyLayoutDefaults:Oyt,_supply:Rge}});var AN=ie((Qar,Vge)=>{"use strict";var TN=la(),aP=Wi(),Byt=f0(),Ou=Zt(),Od=eo().BADNUM,ey=Ou._;Vge.exports=function(t,r){var i=t._fullLayout,n=aP.getFromId(t,r.xaxis||"x"),a=aP.getFromId(t,r.yaxis||"y"),o=[],s=r.type==="violin"?"_numViolins":"_numBoxes",l,u,f,c,h,v,d;r.orientation==="h"?(f=n,c="x",h=a,v="y",d=!!r.yperiodalignment):(f=a,c="y",h=n,v="x",d=!!r.xperiodalignment);var x=Nyt(r,v,h,i[s]),b=x[0],p=x[1],w=Ou.distinctVals(b,h),A=w.vals,T=w.minDiff/2,k,_,E,S,g,C,M=(r.boxpoints||r.points)==="all"?Ou.identity:function(rt){return rt.v<k.lf||rt.v>k.uf};if(r._hasPreCompStats){var P=r[c],D=function(rt){return f.d2c((r[rt]||[])[l])},q=1/0,O=-1/0;for(l=0;l<r._length;l++){var U=b[l];if(TN(U)){if(k={},k.pos=k[v]=U,d&&p&&(k.orig_p=p[l]),k.q1=D("q1"),k.med=D("median"),k.q3=D("q3"),_=[],P&&Ou.isArrayOrTypedArray(P[l]))for(u=0;u<P[l].length;u++)C=f.d2c(P[l][u]),C!==Od&&(g={v:C,i:[l,u]},Ige(g,r,[l,u]),_.push(g));if(k.pts=_.sort(Fge),E=k[c]=_.map(qge),S=E.length,k.med!==Od&&k.q1!==Od&&k.q3!==Od&&k.med>=k.q1&&k.q3>=k.med){var B=D("lowerfence");k.lf=B!==Od&&B<=k.q1?B:zge(k,E,S);var F=D("upperfence");k.uf=F!==Od&&F>=k.q3?F:Oge(k,E,S);var N=D("mean");k.mean=N!==Od?N:S?Ou.mean(E,S):(k.q1+k.q3)/2;var X=D("sd");k.sd=N!==Od&&X>=0?X:S?Ou.stdev(E,S,k.mean):k.q3-k.q1,k.lo=Bge(k),k.uo=Nge(k);var K=D("notchspan");K=K!==Od&&K>0?K:Uge(k,S),k.ln=k.med-K,k.un=k.med+K;var ne=k.lf,fe=k.uf;r.boxpoints&&E.length&&(ne=Math.min(ne,E[0]),fe=Math.max(fe,E[S-1])),r.notched&&(ne=Math.min(ne,k.ln),fe=Math.max(fe,k.un)),k.min=ne,k.max=fe}else{Ou.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+k.q1,"median = "+k.med,"q3 = "+k.q3].join(`
`));var ue;k.med!==Od?ue=k.med:k.q1!==Od?k.q3!==Od?ue=(k.q1+k.q3)/2:ue=k.q1:k.q3!==Od?ue=k.q3:ue=0,k.med=ue,k.q1=k.q3=ue,k.lf=k.uf=ue,k.mean=k.sd=ue,k.ln=k.un=ue,k.min=k.max=ue}q=Math.min(q,k.min),O=Math.max(O,k.max),k.pts2=_.filter(M),o.push(k)}}r._extremes[f._id]=aP.findExtremes(f,[q,O],{padded:!0})}else{var ee=f.makeCalcdata(r,c),Z=Uyt(A,T),oe=A.length,ce=Vyt(oe);for(l=0;l<r._length;l++)if(C=ee[l],!!TN(C)){var le=Ou.findBin(b[l],Z);le>=0&&le<oe&&(g={v:C,i:l},Ige(g,r,l),ce[le].push(g))}var me=1/0,he=-1/0,te=r.quartilemethod,ge=te==="exclusive",ae=te==="inclusive";for(l=0;l<oe;l++)if(ce[l].length>0){if(k={},k.pos=k[v]=A[l],_=k.pts=ce[l].sort(Fge),E=k[c]=_.map(qge),S=E.length,k.min=E[0],k.max=E[S-1],k.mean=Ou.mean(E,S),k.sd=Ou.stdev(E,S,k.mean)*r.sdmultiple,k.med=Ou.interp(E,.5),S%2&&(ge||ae)){var _e,Ce;ge?(_e=E.slice(0,S/2),Ce=E.slice(S/2+1)):ae&&(_e=E.slice(0,S/2+1),Ce=E.slice(S/2)),k.q1=Ou.interp(_e,.5),k.q3=Ou.interp(Ce,.5)}else k.q1=Ou.interp(E,.25),k.q3=Ou.interp(E,.75);k.lf=zge(k,E,S),k.uf=Oge(k,E,S),k.lo=Bge(k),k.uo=Nge(k);var qe=Uge(k,S);k.ln=k.med-qe,k.un=k.med+qe,me=Math.min(me,k.ln),he=Math.max(he,k.un),k.pts2=_.filter(M),o.push(k)}r.notched&&Ou.isTypedArray(ee)&&(ee=Array.from(ee)),r._extremes[f._id]=aP.findExtremes(f,r.notched?ee.concat([me,he]):ee,{padded:!0})}return Hyt(o,r),o.length>0?(o[0].t={num:i[s],dPos:T,posLetter:v,valLetter:c,labels:{med:ey(t,"median:"),min:ey(t,"min:"),q1:ey(t,"q1:"),q3:ey(t,"q3:"),max:ey(t,"max:"),mean:r.boxmean==="sd"||r.sizemode==="sd"?ey(t,"mean \xB1 \u03C3:").replace("\u03C3",r.sdmultiple===1?"\u03C3":r.sdmultiple+"\u03C3"):ey(t,"mean:"),lf:ey(t,"lower fence:"),uf:ey(t,"upper fence:")}},i[s]++,o):[{t:{empty:!0}}]};function Nyt(e,t,r,i){var n=t in e,a=t+"0"in e,o="d"+t in e;if(n||a&&o){var s=r.makeCalcdata(e,t),l=Byt(e,r,t,s).vals;return[l,s]}var u;a?u=e[t+"0"]:"name"in e&&(r.type==="category"||TN(e.name)&&["linear","log"].indexOf(r.type)!==-1||Ou.isDateTime(e.name)&&r.type==="date")?u=e.name:u=i;for(var f=r.type==="multicategory"?r.r2c_just_indices(u):r.d2c(u,0,e[t+"calendar"]),c=e._length,h=new Array(c),v=0;v<c;v++)h[v]=f;return[h]}function Uyt(e,t){for(var r=e.length,i=new Array(r+1),n=0;n<r;n++)i[n]=e[n]-t;return i[r]=e[r-1]+t,i}function Vyt(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=[];return t}var wN={text:"tx",hovertext:"htx"};function Ige(e,t,r){for(var i in wN)Ou.isArrayOrTypedArray(t[i])&&(Array.isArray(r)?Ou.isArrayOrTypedArray(t[i][r[0]])&&(e[wN[i]]=t[i][r[0]][r[1]]):e[wN[i]]=t[i][r])}function Hyt(e,t){if(Ou.isArrayOrTypedArray(t.selectedpoints))for(var r=0;r<e.length;r++){for(var i=e[r].pts||[],n={},a=0;a<i.length;a++)n[i[a].i]=a;Ou.tagSelected(i,t,n)}}function Fge(e,t){return e.v-t.v}function qge(e){return e.v}function zge(e,t,r){return r===0?e.q1:Math.min(e.q1,t[Math.min(Ou.findBin(2.5*e.q1-1.5*e.q3,t,!0)+1,r-1)])}function Oge(e,t,r){return r===0?e.q3:Math.max(e.q3,t[Math.max(Ou.findBin(2.5*e.q3-1.5*e.q1,t),0)])}function Bge(e){return 4*e.q1-3*e.q3}function Nge(e){return 4*e.q3-3*e.q1}function Uge(e,t){return t===0?0:1.57*(e.q3-e.q1)/Math.sqrt(t)}});var oP=ie(($ar,Wge)=>{"use strict";var Hge=Wi(),Gyt=Zt(),Yyt=Tm().getAxisGroup,Gge=["v","h"];function Wyt(e,t){for(var r=e.calcdata,i=t.xaxis,n=t.yaxis,a=0;a<Gge.length;a++){for(var o=Gge[a],s=o==="h"?n:i,l=[],u=0;u<r.length;u++){var f=r[u],c=f[0].t,h=f[0].trace;h.visible===!0&&(h.type==="box"||h.type==="candlestick")&&!c.empty&&(h.orientation||"v")===o&&h.xaxis===i._id&&h.yaxis===n._id&&l.push(u)}Yge("box",e,l,s)}}function Yge(e,t,r,i){var n=t.calcdata,a=t._fullLayout,o=i._id,s=o.charAt(0),l,u,f,c=[],h=0;for(l=0;l<r.length;l++)for(f=n[r[l]],u=0;u<f.length;u++)c.push(i.c2l(f[u].pos,!0)),h+=(f[u].pts2||[]).length;if(c.length){var v=Gyt.distinctVals(c);(i.type==="category"||i.type==="multicategory")&&(v.minDiff=1);var d=v.minDiff/2;Hge.minDtick(i,v.minDiff,v.vals[0],!0);var x=e==="violin"?"_numViolins":"_numBoxes",b=a[x],p=a[e+"mode"]==="group"&&b>1,w=1-a[e+"gap"],A=1-a[e+"groupgap"];for(l=0;l<r.length;l++){f=n[r[l]];var T=f[0].trace,k=f[0].t,_=T.width,E=T.side,S,g,C,M;if(_)S=g=M=_/2,C=0;else if(S=d,p){var P=Yyt(a,i._id)+T.orientation,D=a._alignmentOpts[P]||{},q=D[T.alignmentgroup]||{},O=Object.keys(q.offsetGroups||{}).length,U=O||b,B=O?T._offsetIndex:k.num;g=S*w*A/U,C=2*S*(-.5+(B+.5)/U)*w,M=S*w/U}else g=S*w*A,C=0,M=S;k.dPos=S,k.bPos=C,k.bdPos=g,k.wHover=M;var F,N,X=C+g,K,ne,fe,ue,ee,Z,oe=!!_,ce=(T.boxpoints||T.points)&&h>0;if(E==="positive"?(F=S*(_?1:.5),K=X,N=K=C):E==="negative"?(F=K=C,N=S*(_?1:.5),ne=X):(F=N=S,K=ne=X),ce){var le=T.pointpos,me=T.jitter,he=T.marker.size/2,te=0;le+me>=0&&(te=X*(le+me),te>F?(oe=!0,ee=he,fe=te):te>K&&(ee=he,fe=F)),te<=F&&(fe=F);var ge=0;le-me<=0&&(ge=-X*(le-me),ge>N?(oe=!0,Z=he,ue=ge):ge>ne&&(Z=he,ue=N)),ge<=N&&(ue=N)}else fe=F,ue=N;var ae=new Array(f.length);for(u=0;u<f.length;u++)ae[u]=f[u].pos;T._extremes[o]=Hge.findExtremes(i,ae,{padded:oe,vpadminus:ue,vpadplus:fe,vpadLinearized:!0,ppadminus:{x:Z,y:ee}[s],ppadplus:{x:ee,y:Z}[s]})}}}Wge.exports={crossTraceCalc:Wyt,setPositionOffset:Yge}});var sP=ie((eor,Jge)=>{"use strict";var yw=Mi(),Qx=Zt(),Xyt=oa(),Xge=5,Zyt=.01;function jyt(e,t,r,i){var n=e._context.staticPlot,a=t.xaxis,o=t.yaxis;Qx.makeTraceGroups(i,r,"trace boxes").each(function(s){var l=yw.select(this),u=s[0],f=u.t,c=u.trace;if(f.wdPos=f.bdPos*c.whiskerwidth,c.visible!==!0||f.empty){l.remove();return}var h,v;c.orientation==="h"?(h=o,v=a):(h=a,v=o),Zge(l,{pos:h,val:v},c,f,n),jge(l,{x:a,y:o},c,f),Kge(l,{pos:h,val:v},c,f)})}function Zge(e,t,r,i,n){var a=r.orientation==="h",o=t.val,s=t.pos,l=!!s.rangebreaks,u=i.bPos,f=i.wdPos||0,c=i.bPosPxOffset||0,h=r.whiskerwidth||0,v=r.showwhiskers!==!1,d=r.notched||!1,x=d?1-2*r.notchwidth:1,b,p;Array.isArray(i.bdPos)?(b=i.bdPos[0],p=i.bdPos[1]):(b=i.bdPos,p=i.bdPos);var w=e.selectAll("path.box").data(r.type!=="violin"||r.box.visible?Qx.identity:[]);w.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","box"),w.exit().remove(),w.each(function(A){if(A.empty)return yw.select(this).attr("d","M0,0Z");var T=s.c2l(A.pos+u,!0),k=s.l2p(T-b)+c,_=s.l2p(T+p)+c,E=l?(k+_)/2:s.l2p(T)+c,S=r.whiskerwidth,g=l?k*S+(1-S)*E:s.l2p(T-f)+c,C=l?_*S+(1-S)*E:s.l2p(T+f)+c,M=s.l2p(T-b*x)+c,P=s.l2p(T+p*x)+c,D=r.sizemode==="sd",q=o.c2p(D?A.mean-A.sd:A.q1,!0),O=D?o.c2p(A.mean+A.sd,!0):o.c2p(A.q3,!0),U=Qx.constrain(D?o.c2p(A.mean,!0):o.c2p(A.med,!0),Math.min(q,O)+1,Math.max(q,O)-1),B=A.lf===void 0||r.boxpoints===!1||D,F=o.c2p(B?A.min:A.lf,!0),N=o.c2p(B?A.max:A.uf,!0),X=o.c2p(A.ln,!0),K=o.c2p(A.un,!0);a?yw.select(this).attr("d","M"+U+","+M+"V"+P+"M"+q+","+k+"V"+_+(d?"H"+X+"L"+U+","+P+"L"+K+","+_:"")+"H"+O+"V"+k+(d?"H"+K+"L"+U+","+M+"L"+X+","+k:"")+"Z"+(v?"M"+q+","+E+"H"+F+"M"+O+","+E+"H"+N+(h===0?"":"M"+F+","+g+"V"+C+"M"+N+","+g+"V"+C):"")):yw.select(this).attr("d","M"+M+","+U+"H"+P+"M"+k+","+q+"H"+_+(d?"V"+X+"L"+P+","+U+"L"+_+","+K:"")+"V"+O+"H"+k+(d?"V"+K+"L"+M+","+U+"L"+k+","+X:"")+"Z"+(v?"M"+E+","+q+"V"+F+"M"+E+","+O+"V"+N+(h===0?"":"M"+g+","+F+"H"+C+"M"+g+","+N+"H"+C):""))})}function jge(e,t,r,i){var n=t.x,a=t.y,o=i.bdPos,s=i.bPos,l=r.boxpoints||r.points;Qx.seedPseudoRandom();var u=function(h){return h.forEach(function(v){v.t=i,v.trace=r}),h},f=e.selectAll("g.points").data(l?u:[]);f.enter().append("g").attr("class","points"),f.exit().remove();var c=f.selectAll("path").data(function(h){var v,d=h.pts2,x=Math.max((h.max-h.min)/10,h.q3-h.q1),b=x*1e-9,p=x*Zyt,w=[],A=0,T;if(r.jitter){if(x===0)for(A=1,w=new Array(d.length),v=0;v<d.length;v++)w[v]=1;else for(v=0;v<d.length;v++){var k=Math.max(0,v-Xge),_=d[k].v,E=Math.min(d.length-1,v+Xge),S=d[E].v;l!=="all"&&(d[v].v<h.lf?S=Math.min(S,h.lf):_=Math.max(_,h.uf));var g=Math.sqrt(p*(E-k)/(S-_+b))||0;g=Qx.constrain(Math.abs(g),0,1),w.push(g),A=Math.max(g,A)}T=r.jitter*2/(A||1)}for(v=0;v<d.length;v++){var C=d[v],M=C.v,P=r.jitter?T*w[v]*(Qx.pseudoRandom()-.5):0,D=h.pos+s+o*(r.pointpos+P);r.orientation==="h"?(C.y=D,C.x=M):(C.x=D,C.y=M),l==="suspectedoutliers"&&M<h.uo&&M>h.lo&&(C.so=!0)}return d});c.enter().append("path").classed("point",!0),c.exit().remove(),c.call(Xyt.translatePoints,n,a)}function Kge(e,t,r,i){var n=t.val,a=t.pos,o=!!a.rangebreaks,s=i.bPos,l=i.bPosPxOffset||0,u=r.boxmean||(r.meanline||{}).visible,f,c;Array.isArray(i.bdPos)?(f=i.bdPos[0],c=i.bdPos[1]):(f=i.bdPos,c=i.bdPos);var h=e.selectAll("path.mean").data(r.type==="box"&&r.boxmean||r.type==="violin"&&r.box.visible&&r.meanline.visible?Qx.identity:[]);h.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),h.exit().remove(),h.each(function(v){var d=a.c2l(v.pos+s,!0),x=a.l2p(d-f)+l,b=a.l2p(d+c)+l,p=o?(x+b)/2:a.l2p(d)+l,w=n.c2p(v.mean,!0),A=n.c2p(v.mean-v.sd,!0),T=n.c2p(v.mean+v.sd,!0);r.orientation==="h"?yw.select(this).attr("d","M"+w+","+x+"V"+b+(u==="sd"?"m0,0L"+A+","+p+"L"+w+","+x+"L"+T+","+p+"Z":"")):yw.select(this).attr("d","M"+x+","+w+"H"+b+(u==="sd"?"m0,0L"+p+","+A+"L"+x+","+w+"L"+p+","+T+"Z":""))})}Jge.exports={plot:jyt,plotBoxAndWhiskers:Zge,plotPoints:jge,plotBoxMean:Kge}});var lP=ie((tor,Qge)=>{"use strict";var MN=Mi(),SN=_i(),EN=oa();function Kyt(e,t,r){var i=r||MN.select(e).selectAll("g.trace.boxes");i.style("opacity",function(n){return n[0].trace.opacity}),i.each(function(n){var a=MN.select(this),o=n[0].trace,s=o.line.width;function l(c,h,v,d){c.style("stroke-width",h+"px").call(SN.stroke,v).call(SN.fill,d)}var u=a.selectAll("path.box");if(o.type==="candlestick")u.each(function(c){if(!c.empty){var h=MN.select(this),v=o[c.dir];l(h,v.line.width,v.line.color,v.fillcolor),h.style("opacity",o.selectedpoints&&!c.selected?.3:1)}});else{l(u,s,o.line.color,o.fillcolor),a.selectAll("path.mean").style({"stroke-width":s,"stroke-dasharray":2*s+"px,"+s+"px"}).call(SN.stroke,o.line.color);var f=a.selectAll("path.point");EN.pointStyle(f,o,e)}})}function Jyt(e,t,r){var i=t[0].trace,n=r.selectAll("path.point");i.selectedpoints?EN.selectedPointStyle(n,i):EN.pointStyle(n,i,e)}Qge.exports={style:Kyt,styleOnSelect:Jyt}});var CN=ie((ror,rye)=>{"use strict";var Qyt=Wi(),kN=Zt(),zm=Ol(),$ge=_i(),$yt=kN.fillText;function emt(e,t,r,i){var n=e.cd,a=n[0].trace,o=a.hoveron,s=[],l;return o.indexOf("boxes")!==-1&&(s=s.concat(eye(e,t,r,i))),o.indexOf("points")!==-1&&(l=tye(e,t,r)),i==="closest"?l?[l]:s:(l&&s.push(l),s)}function eye(e,t,r,i){var n=e.cd,a=e.xa,o=e.ya,s=n[0].trace,l=n[0].t,u=s.type==="violin",f,c,h,v,d,x,b,p,w,A,T,k=l.bdPos,_,E,S=l.wHover,g=function(he){return h.c2l(he.pos)+l.bPos-h.c2l(x)};u&&s.side!=="both"?(s.side==="positive"&&(w=function(he){var te=g(he);return zm.inbox(te,te+S,A)},_=k,E=0),s.side==="negative"&&(w=function(he){var te=g(he);return zm.inbox(te-S,te,A)},_=0,E=k)):(w=function(he){var te=g(he);return zm.inbox(te-S,te+S,A)},_=E=k);var C;u?C=function(he){return zm.inbox(he.span[0]-d,he.span[1]-d,A)}:C=function(he){return zm.inbox(he.min-d,he.max-d,A)},s.orientation==="h"?(d=t,x=r,b=C,p=w,f="y",h=o,c="x",v=a):(d=r,x=t,b=w,p=C,f="x",h=a,c="y",v=o);var M=Math.min(1,k/Math.abs(h.r2c(h.range[1])-h.r2c(h.range[0])));A=e.maxHoverDistance-M,T=e.maxSpikeDistance-M;function P(he){return(b(he)+p(he))/2}var D=zm.getDistanceFunction(i,b,p,P);if(zm.getClosest(n,D,e),e.index===!1)return[];var q=n[e.index],O=s.line.color,U=(s.marker||{}).color;$ge.opacity(O)&&s.line.width?e.color=O:$ge.opacity(U)&&s.boxpoints?e.color=U:e.color=s.fillcolor,e[f+"0"]=h.c2p(q.pos+l.bPos-E,!0),e[f+"1"]=h.c2p(q.pos+l.bPos+_,!0),e[f+"LabelVal"]=q.orig_p!==void 0?q.orig_p:q.pos;var B=f+"Spike";e.spikeDistance=P(q)*T/A,e[B]=h.c2p(q.pos,!0);var F=s.boxmean||s.sizemode==="sd"||(s.meanline||{}).visible,N=s.boxpoints||s.points,X=N&&F?["max","uf","q3","med","mean","q1","lf","min"]:N&&!F?["max","uf","q3","med","q1","lf","min"]:!N&&F?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],K=v.range[1]<v.range[0];s.orientation===(K?"v":"h")&&X.reverse();for(var ne=e.spikeDistance,fe=e[B],ue=[],ee=0;ee<X.length;ee++){var Z=X[ee];if(Z in q){var oe=q[Z],ce=v.c2p(oe,!0),le=kN.extendFlat({},e);le.attr=Z,le[c+"0"]=le[c+"1"]=ce,le[c+"LabelVal"]=oe,le[c+"Label"]=(l.labels?l.labels[Z]+" ":"")+Qyt.hoverLabelText(v,oe,s[c+"hoverformat"]),le.hoverOnBox=!0,Z==="mean"&&"sd"in q&&(s.boxmean==="sd"||s.sizemode==="sd")&&(le[c+"err"]=q.sd),le.hovertemplate=!1,ue.push(le)}}e.name="",e.spikeDistance=void 0,e[B]=void 0;for(var me=0;me<ue.length;me++)ue[me].attr!=="med"?(ue[me].name="",ue[me].spikeDistance=void 0,ue[me][B]=void 0):(ue[me].spikeDistance=ne,ue[me][B]=fe);return ue}function tye(e,t,r){for(var i=e.cd,n=e.xa,a=e.ya,o=i[0].trace,s=n.c2p(t),l=a.c2p(r),u,f=function(C){var M=Math.max(3,C.mrc||0);return Math.max(Math.abs(n.c2p(C.x)-s)-M,1-3/M)},c=function(C){var M=Math.max(3,C.mrc||0);return Math.max(Math.abs(a.c2p(C.y)-l)-M,1-3/M)},h=zm.quadrature(f,c),v=!1,d,x,b=0;b<i.length;b++){d=i[b];for(var p=0;p<(d.pts||[]).length;p++){x=d.pts[p];var w=h(x);w<=e.distance&&(e.distance=w,v=[b,p])}}if(!v)return!1;d=i[v[0]],x=d.pts[v[1]];var A=n.c2p(x.x,!0),T=a.c2p(x.y,!0),k=x.mrc||1;u=kN.extendFlat({},e,{index:x.i,color:(o.marker||{}).color,name:o.name,x0:A-k,x1:A+k,y0:T-k,y1:T+k,spikeDistance:e.distance,hovertemplate:o.hovertemplate});var _=d.orig_p,E=_!==void 0?_:d.pos,S;o.orientation==="h"?(S=a,u.xLabelVal=x.x,u.yLabelVal=E):(S=n,u.xLabelVal=E,u.yLabelVal=x.y);var g=S._id.charAt(0);return u[g+"Spike"]=S.c2p(d.pos,!0),$yt(x,o,u),u}rye.exports={hoverPoints:emt,hoverOnBoxes:eye,hoverOnPoints:tye}});var iye=ie((nor,nye)=>{"use strict";nye.exports=function(t,r){return r.hoverOnBox&&(t.hoverOnBox=r.hoverOnBox),"xVal"in r&&(t.x=r.xVal),"yVal"in r&&(t.y=r.yVal),r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),t}});var LN=ie((ior,aye)=>{"use strict";aye.exports=function(t,r){var i=t.cd,n=t.xaxis,a=t.yaxis,o=[],s,l;if(r===!1)for(s=0;s<i.length;s++)for(l=0;l<(i[s].pts||[]).length;l++)i[s].pts[l].selected=0;else for(s=0;s<i.length;s++)for(l=0;l<(i[s].pts||[]).length;l++){var u=i[s].pts[l],f=n.c2p(u.x),c=a.c2p(u.y);r.contains([f,c],null,u.i,t)?(o.push({pointNumber:u.i,x:n.c2d(u.x),y:a.c2d(u.y)}),u.selected=1):u.selected=0}return o}});var sye=ie((aor,oye)=>{"use strict";oye.exports={attributes:tS(),layoutAttributes:rS(),supplyDefaults:iS().supplyDefaults,crossTraceDefaults:iS().crossTraceDefaults,supplyLayoutDefaults:iP().supplyLayoutDefaults,calc:AN(),crossTraceCalc:oP().crossTraceCalc,plot:sP().plot,style:lP().style,styleOnSelect:lP().styleOnSelect,hoverPoints:CN().hoverPoints,eventData:iye(),selectPoints:LN(),moduleType:"trace",name:"box",basePlotModule:yu(),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}});var uye=ie((oor,lye)=>{"use strict";lye.exports=sye()});var $x=ie((sor,fye)=>{"use strict";var Bd=Bl(),tmt=rs(),rmt=Xs(),PN=kl().axisHoverFormat,nmt=Ba().hovertemplateAttrs,imt=Ba().texttemplateAttrs,amt=Ls(),cd=aa().extendFlat;fye.exports=cd({z:{valType:"data_array",editType:"calc"},x:cd({},Bd.x,{impliedEdits:{xtype:"array"}}),x0:cd({},Bd.x0,{impliedEdits:{xtype:"scaled"}}),dx:cd({},Bd.dx,{impliedEdits:{xtype:"scaled"}}),y:cd({},Bd.y,{impliedEdits:{ytype:"array"}}),y0:cd({},Bd.y0,{impliedEdits:{ytype:"scaled"}}),dy:cd({},Bd.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:cd({},Bd.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:cd({},Bd.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:cd({},Bd.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:cd({},Bd.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:cd({},Bd.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:cd({},Bd.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:PN("x"),yhoverformat:PN("y"),zhoverformat:PN("z",1),hovertemplate:nmt(),texttemplate:imt({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:rmt({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:cd({},tmt.showlegend,{dflt:!1}),zorder:Bd.zorder},{transforms:void 0},amt("",{cLetter:"z",autoColorDflt:!1}))});var aS=ie((lor,hye)=>{"use strict";var omt=la(),uP=Zt(),smt=Ti();hye.exports=function(t,r,i,n,a,o){var s=i("z");a=a||"x",o=o||"y";var l,u;if(s===void 0||!s.length)return 0;if(uP.isArray1D(s)){l=i(a),u=i(o);var f=uP.minRowLength(l),c=uP.minRowLength(u);if(f===0||c===0)return 0;r._length=Math.min(f,c,s.length)}else{if(l=cye(a,i),u=cye(o,i),!lmt(s))return 0;i("transpose"),r._length=null}if(t.type==="heatmapgl")return!0;var h=smt.getComponentMethod("calendars","handleTraceDefaults");return h(t,r,[a,o],n),!0};function cye(e,t){var r=t(e),i=r?t(e+"type","array"):"scaled";return i==="scaled"&&(t(e+"0"),t("d"+e)),r}function lmt(e){for(var t=!0,r=!1,i=!1,n,a=0;a<e.length;a++){if(n=e[a],!uP.isArrayOrTypedArray(n)){t=!1;break}n.length>0&&(r=!0);for(var o=0;o<n.length;o++)if(omt(n[o])){i=!0;break}}return t&&r&&i}});var oS=ie((uor,dye)=>{"use strict";var vye=Zt();dye.exports=function(t,r){t("texttemplate");var i=vye.extendFlat({},r.font,{color:"auto",size:"auto"});vye.coerceFont(t,"textfont",i)}});var RN=ie((cor,pye)=>{"use strict";pye.exports=function(t,r,i){var n=i("zsmooth");n===!1&&(i("xgap"),i("ygap")),i("zhoverformat")}});var mye=ie((hor,yye)=>{"use strict";var gye=Zt(),umt=aS(),fmt=oS(),cmt=s0(),hmt=RN(),vmt=$f(),dmt=$x();yye.exports=function(t,r,i,n){function a(s,l){return gye.coerce(t,r,dmt,s,l)}var o=umt(t,r,a,n);if(!o){r.visible=!1;return}cmt(t,r,n,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hovertemplate"),fmt(a,n),hmt(t,r,a,n),a("hoverongaps"),a("connectgaps",gye.isArray1D(r.z)&&r.zsmooth!==!1),vmt(t,r,n,a,{prefix:"",cLetter:"z"}),a("zorder")}});var DN=ie((vor,xye)=>{"use strict";var mw=la();xye.exports={count:function(e,t,r){return r[e]++,1},sum:function(e,t,r,i){var n=i[t];return mw(n)?(n=Number(n),r[e]+=n,n):0},avg:function(e,t,r,i,n){var a=i[t];return mw(a)&&(a=Number(a),r[e]+=a,n[e]++),0},min:function(e,t,r,i){var n=i[t];if(mw(n))if(n=Number(n),mw(r[e])){if(r[e]>n){var a=n-r[e];return r[e]=n,a}}else return r[e]=n,n;return 0},max:function(e,t,r,i){var n=i[t];if(mw(n))if(n=Number(n),mw(r[e])){if(r[e]<n){var a=n-r[e];return r[e]=n,a}}else return r[e]=n,n;return 0}}});var IN=ie((dor,_ye)=>{"use strict";_ye.exports={percent:function(e,t){for(var r=e.length,i=100/t,n=0;n<r;n++)e[n]*=i},probability:function(e,t){for(var r=e.length,i=0;i<r;i++)e[i]/=t},density:function(e,t,r,i){var n=e.length;i=i||1;for(var a=0;a<n;a++)e[a]*=r[a]*i},"probability density":function(e,t,r,i){var n=e.length;i&&(t/=i);for(var a=0;a<n;a++)e[a]*=r[a]/t}}});var FN=ie((por,bye)=>{"use strict";bye.exports=function(t,r){for(var i=t.length,n=0,a=0;a<i;a++)r[a]?(t[a]/=r[a],n+=t[a]):t[a]=null;return n}});var qN=ie((gor,Cye)=>{"use strict";var xw=eo(),e_=xw.ONEAVGYEAR,wye=xw.ONEAVGMONTH,cP=xw.ONEDAY,Tye=xw.ONEHOUR,Aye=xw.ONEMIN,Mye=xw.ONESEC,Sye=Wi().tickIncrement;Cye.exports=function(t,r,i,n,a){var o=-1.1*r,s=-.1*r,l=t-s,u=i[0],f=i[1],c=Math.min(fP(u+s,u+l,n,a),fP(f+s,f+l,n,a)),h=Math.min(fP(u+o,u+s,n,a),fP(f+o,f+s,n,a)),v,d;if(c>h&&h<Math.abs(f-u)/4e3?(v=c,d=!1):(v=Math.min(c,h),d=!0),n.type==="date"&&v>cP){var x=v===e_?1:6,b=v===e_?"M12":"M1";return function(p,w){var A=n.c2d(p,e_,a),T=A.indexOf("-",x);T>0&&(A=A.substr(0,T));var k=n.d2c(A,0,a);if(k<p){var _=Sye(k,b,!1,a);(k+_)/2<p+t&&(k=_)}return w&&d?Sye(k,b,!0,a):k}}return function(p,w){var A=v*Math.round(p/v);return A+v/10<p&&A+v*.9<p+t&&(A+=v),w&&d&&(A-=v),A}};function fP(e,t,r,i){if(e*t<=0)return 1/0;for(var n=Math.abs(t-e),a=r.type==="date",o=Eye(n,a),s=0;s<10;s++){var l=Eye(o*80,a);if(o===l)break;if(pmt(l,e,t,a,r,i))o=l;else break}return o}function Eye(e,t){return t&&e>Mye?e>cP?e>e_*1.1?e_:e>wye*1.1?wye:cP:e>Tye?Tye:e>Aye?Aye:Mye:Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function pmt(e,t,r,i,n,a){if(i&&e>cP){var o=kye(t,n,a),s=kye(r,n,a),l=e===e_?0:1;return o[l]!==s[l]}return Math.floor(r/e)-Math.floor(t/e)>.1}function kye(e,t,r){var i=t.c2d(e,e_,r).split("-");return i[0]===""&&(i.unshift(),i[0]="-"+i[0]),i}});var BN=ie((yor,Rye)=>{"use strict";var zN=la(),Jh=Zt(),Lye=Ti(),kp=Wi(),gmt=JM(),Pye=DN(),ymt=IN(),mmt=FN(),xmt=qN();function _mt(e,t){var r=[],i=[],n=t.orientation==="h",a=kp.getFromId(e,n?t.yaxis:t.xaxis),o=n?"y":"x",s={x:"y",y:"x"}[o],l=t[o+"calendar"],u=t.cumulative,f,c=ON(e,t,a,o),h=c[0],v=c[1],d=typeof h.size=="string",x=[],b=d?x:h,p=[],w=[],A=[],T=0,k=t.histnorm,_=t.histfunc,E=k.indexOf("density")!==-1,S,g,C;u.enabled&&E&&(k=k.replace(/ ?density$/,""),E=!1);var M=_==="max"||_==="min",P=M?null:0,D=Pye.count,q=ymt[k],O=!1,U=function(te){return a.r2c(te,0,l)},B;for(Jh.isArrayOrTypedArray(t[s])&&_!=="count"&&(B=t[s],O=_==="avg",D=Pye[_]),f=U(h.start),g=U(h.end)+(f-kp.tickIncrement(f,h.size,!1,l))/1e6;f<g&&r.length<1e6&&(S=kp.tickIncrement(f,h.size,!1,l),r.push((f+S)/2),i.push(P),A.push([]),x.push(f),E&&p.push(1/(S-f)),O&&w.push(0),!(S<=f));)f=S;x.push(f),!d&&a.type==="date"&&(b={start:U(b.start),end:U(b.end),size:b.size}),e._fullLayout._roundFnOpts||(e._fullLayout._roundFnOpts={});var F=t["_"+o+"bingroup"],N={leftGap:1/0,rightGap:1/0};F&&(e._fullLayout._roundFnOpts[F]||(e._fullLayout._roundFnOpts[F]=N),N=e._fullLayout._roundFnOpts[F]);var X=i.length,K=!0,ne=N.leftGap,fe=N.rightGap,ue={};for(f=0;f<v.length;f++){var ee=v[f];C=Jh.findBin(ee,b),C>=0&&C<X&&(T+=D(C,f,i,B,w),K&&A[C].length&&ee!==v[A[C][0]]&&(K=!1),A[C].push(f),ue[f]=C,ne=Math.min(ne,ee-x[C]),fe=Math.min(fe,x[C+1]-ee))}N.leftGap=ne,N.rightGap=fe;var Z;K||(Z=function(te,ge){return function(){var ae=e._fullLayout._roundFnOpts[F];return xmt(ae.leftGap,ae.rightGap,x,a,l)(te,ge)}}),O&&(T=mmt(i,w)),q&&q(i,T,p),u.enabled&&Tmt(i,u.direction,u.currentbin);var oe=Math.min(r.length,i.length),ce=[],le=0,me=oe-1;for(f=0;f<oe;f++)if(i[f]){le=f;break}for(f=oe-1;f>=le;f--)if(i[f]){me=f;break}for(f=le;f<=me;f++)if(zN(r[f])&&zN(i[f])){var he={p:r[f],s:i[f],b:0};u.enabled||(he.pts=A[f],K?he.ph0=he.ph1=A[f].length?v[A[f][0]]:r[f]:(t._computePh=!0,he.ph0=Z(x[f]),he.ph1=Z(x[f+1],!0))),ce.push(he)}return ce.length===1&&(ce[0].width1=kp.tickIncrement(ce[0].p,h.size,!1,l)-ce[0].p),gmt(ce,t),Jh.isArrayOrTypedArray(t.selectedpoints)&&Jh.tagSelected(ce,t,ue),ce}function ON(e,t,r,i,n){var a=i+"bins",o=e._fullLayout,s=t["_"+i+"bingroup"],l=o._histogramBinOpts[s],u=o.barmode==="overlay",f,c,h,v,d,x,b,p=function(ee){return r.r2c(ee,0,v)},w=function(ee){return r.c2r(ee,0,v)},A=r.type==="date"?function(ee){return ee||ee===0?Jh.cleanDate(ee,null,v):null}:function(ee){return zN(ee)?Number(ee):null};function T(ee,Z,oe){Z[ee+"Found"]?(Z[ee]=A(Z[ee]),Z[ee]===null&&(Z[ee]=oe[ee])):(x[ee]=Z[ee]=oe[ee],Jh.nestedProperty(c[0],a+"."+ee).set(oe[ee]))}if(t["_"+i+"autoBinFinished"])delete t["_"+i+"autoBinFinished"];else{c=l.traces;var k=[],_=!0,E=!1,S=!1;for(f=0;f<c.length;f++)if(h=c[f],h.visible){var g=l.dirs[f];d=h["_"+g+"pos0"]=r.makeCalcdata(h,g),k=Jh.concat(k,d),delete h["_"+i+"autoBinFinished"],t.visible===!0&&(_?_=!1:(delete h._autoBin,h["_"+i+"autoBinFinished"]=1),Lye.traceIs(h,"2dMap")&&(E=!0),h.type==="histogram2dcontour"&&(S=!0))}v=c[0][i+"calendar"];var C=kp.autoBin(k,r,l.nbins,E,v,l.sizeFound&&l.size),M=c[0]._autoBin={};if(x=M[l.dirs[0]]={},S&&(l.size||(C.start=w(kp.tickIncrement(p(C.start),C.size,!0,v))),l.end===void 0&&(C.end=w(kp.tickIncrement(p(C.end),C.size,!1,v)))),u&&!Lye.traceIs(t,"2dMap")&&C._dataSpan===0&&r.type!=="category"&&r.type!=="multicategory"&&t.bingroup===""&&typeof t.xbins=="undefined"){if(n)return[C,d,!0];C=bmt(e,t,r,i,a)}b=h.cumulative||{},b.enabled&&b.currentbin!=="include"&&(b.direction==="decreasing"?C.start=w(kp.tickIncrement(p(C.start),C.size,!0,v)):C.end=w(kp.tickIncrement(p(C.end),C.size,!1,v))),l.size=C.size,l.sizeFound||(x.size=C.size,Jh.nestedProperty(c[0],a+".size").set(C.size)),T("start",l,C),T("end",l,C)}d=t["_"+i+"pos0"],delete t["_"+i+"pos0"];var P=t._input[a]||{},D=Jh.extendFlat({},l),q=l.start,O=r.r2l(P.start),U=O!==void 0;if((l.startFound||U)&&O!==r.r2l(q)){var B=U?O:Jh.aggNums(Math.min,null,d),F={type:r.type==="category"||r.type==="multicategory"?"linear":r.type,r2l:r.r2l,dtick:l.size,tick0:q,calendar:v,range:[B,kp.tickIncrement(B,l.size,!1,v)].map(r.l2r)},N=kp.tickFirst(F);N>r.r2l(B)&&(N=kp.tickIncrement(N,l.size,!0,v)),D.start=r.l2r(N),U||Jh.nestedProperty(t,a+".start").set(D.start)}var X=l.end,K=r.r2l(P.end),ne=K!==void 0;if((l.endFound||ne)&&K!==r.r2l(X)){var fe=ne?K:Jh.aggNums(Math.max,null,d);D.end=r.l2r(fe),ne||Jh.nestedProperty(t,a+".start").set(D.end)}var ue="autobin"+i;return t._input[ue]===!1&&(t._input[a]=Jh.extendFlat({},t[a]||{}),delete t._input[ue],delete t[ue]),[D,d]}function bmt(e,t,r,i,n){var a=e._fullLayout,o=wmt(e,t),s=!1,l=1/0,u=[t],f,c,h;for(f=0;f<o.length;f++)if(c=o[f],c===t)s=!0;else if(!s)h=a._histogramBinOpts[c["_"+i+"bingroup"]],l=Math.min(l,h.size||c[n].size);else{var v=ON(e,c,r,i,!0),d=v[0],x=v[2];c["_"+i+"autoBinFinished"]=1,c["_"+i+"pos0"]=v[1],x?u.push(c):l=Math.min(l,d.size)}var b=new Array(u.length);for(f=0;f<u.length;f++)for(var p=u[f]["_"+i+"pos0"],w=0;w<p.length;w++)if(p[w]!==void 0){b[f]=p[w];break}for(isFinite(l)||(l=Jh.distinctVals(b).minDiff),f=0;f<u.length;f++){c=u[f];var A=c[i+"calendar"],T={start:r.c2r(b[f]-l/2,0,A),end:r.c2r(b[f]+l/2,0,A),size:l};c._input[n]=c[n]=T,h=a._histogramBinOpts[c["_"+i+"bingroup"]],h&&Jh.extendFlat(h,T)}return t[n]}function wmt(e,t){for(var r=t.xaxis,i=t.yaxis,n=t.orientation,a=[],o=e._fullData,s=0;s<o.length;s++){var l=o[s];l.type==="histogram"&&l.visible===!0&&l.orientation===n&&l.xaxis===r&&l.yaxis===i&&a.push(l)}return a}function Tmt(e,t,r){var i,n,a;function o(l){a=e[l],e[l]/=2}function s(l){n=e[l],e[l]=a+n/2,a+=n}if(r==="half")if(t==="increasing")for(o(0),i=1;i<e.length;i++)s(i);else for(o(e.length-1),i=e.length-2;i>=0;i--)s(i);else if(t==="increasing"){for(i=1;i<e.length;i++)e[i]+=e[i-1];r==="exclude"&&(e.unshift(0),e.pop())}else{for(i=e.length-2;i>=0;i--)e[i]+=e[i+1];r==="exclude"&&(e.push(0),e.shift())}}Rye.exports={calc:_mt,calcAllAutoBins:ON}});var Nye=ie((mor,Bye)=>{"use strict";var Dye=Zt(),_w=Wi(),Iye=DN(),Amt=IN(),Mmt=FN(),Smt=qN(),Fye=BN().calcAllAutoBins;Bye.exports=function(t,r){var i=_w.getFromId(t,r.xaxis),n=_w.getFromId(t,r.yaxis),a=r.xcalendar,o=r.ycalendar,s=function(at){return i.r2c(at,0,a)},l=function(at){return n.r2c(at,0,o)},u=function(at){return i.c2r(at,0,a)},f=function(at){return n.c2r(at,0,o)},c,h,v,d,x=Fye(t,r,i,"x"),b=x[0],p=x[1],w=Fye(t,r,n,"y"),A=w[0],T=w[1],k=r._length;p.length>k&&p.splice(k,p.length-k),T.length>k&&T.splice(k,T.length-k);var _=[],E=[],S=[],g=typeof b.size=="string",C=typeof A.size=="string",M=[],P=[],D=g?M:b,q=C?P:A,O=0,U=[],B=[],F=r.histnorm,N=r.histfunc,X=F.indexOf("density")!==-1,K=N==="max"||N==="min",ne=K?null:0,fe=Iye.count,ue=Amt[F],ee=!1,Z=[],oe=[],ce="z"in r?r.z:"marker"in r&&Array.isArray(r.marker.color)?r.marker.color:"";ce&&N!=="count"&&(ee=N==="avg",fe=Iye[N]);var le=b.size,me=s(b.start),he=s(b.end)+(me-_w.tickIncrement(me,le,!1,a))/1e6;for(c=me;c<he;c=_w.tickIncrement(c,le,!1,a))E.push(ne),M.push(c),ee&&S.push(0);M.push(c);var te=E.length,ge=(c-me)/te,ae=u(me+ge/2),_e=A.size,Ce=l(A.start),qe=l(A.end)+(Ce-_w.tickIncrement(Ce,_e,!1,o))/1e6;for(c=Ce;c<qe;c=_w.tickIncrement(c,_e,!1,o)){_.push(E.slice()),P.push(c);var rt=new Array(te);for(h=0;h<te;h++)rt[h]=[];B.push(rt),ee&&U.push(S.slice())}P.push(c);var Re=_.length,Ie=(c-Ce)/Re,ot=f(Ce+Ie/2);X&&(Z=qye(E.length,D,ge,g),oe=qye(_.length,q,Ie,C)),!g&&i.type==="date"&&(D=zye(s,D)),!C&&n.type==="date"&&(q=zye(l,q));var lt=!0,ht=!0,xt=new Array(te),Vt=new Array(Re),Ht=1/0,Me=1/0,Ke=1/0,We=1/0;for(c=0;c<k;c++){var et=p[c],vt=T[c];v=Dye.findBin(et,D),d=Dye.findBin(vt,q),v>=0&&v<te&&d>=0&&d<Re&&(O+=fe(v,c,_[d],ce,U[d]),B[d][v].push(c),lt&&(xt[v]===void 0?xt[v]=et:xt[v]!==et&&(lt=!1)),ht&&(Vt[d]===void 0?Vt[d]=vt:Vt[d]!==vt&&(ht=!1)),Ht=Math.min(Ht,et-M[v]),Me=Math.min(Me,M[v+1]-et),Ke=Math.min(Ke,vt-P[d]),We=Math.min(We,P[d+1]-vt))}if(ee)for(d=0;d<Re;d++)O+=Mmt(_[d],U[d]);if(ue)for(d=0;d<Re;d++)ue(_[d],O,Z,oe[d]);return{x:p,xRanges:Oye(M,lt&&xt,Ht,Me,i,a),x0:ae,dx:ge,y:T,yRanges:Oye(P,ht&&Vt,Ke,We,n,o),y0:ot,dy:Ie,z:_,pts:B}};function qye(e,t,r,i){var n=new Array(e),a;if(i)for(a=0;a<e;a++)n[a]=1/(t[a+1]-t[a]);else{var o=1/r;for(a=0;a<e;a++)n[a]=o}return n}function zye(e,t){return{start:e(t.start),end:e(t.end),size:t.size}}function Oye(e,t,r,i,n,a){var o,s=e.length-1,l=new Array(s),u=Smt(r,i,e,n,a);for(o=0;o<s;o++){var f=(t||[])[o];l[o]=f===void 0?[u(e[o]),u(e[o+1],!0)]:[f,f]}return l}});var hP=ie((xor,Hye)=>{"use strict";var tg=Zt(),Uye=eo().BADNUM,Vye=f0();Hye.exports=function(t,r,i,n,a,o){var s=t._length,l=r.makeCalcdata(t,n),u=i.makeCalcdata(t,a);l=Vye(t,r,n,l).vals,u=Vye(t,i,a,u).vals;var f=t.text,c=f!==void 0&&tg.isArray1D(f),h=t.hovertext,v=h!==void 0&&tg.isArray1D(h),d,x,b=tg.distinctVals(l),p=b.vals,w=tg.distinctVals(u),A=w.vals,T=[],k,_,E=A.length,S=p.length;for(d=0;d<o.length;d++)T[d]=tg.init2dArray(E,S);c&&(k=tg.init2dArray(E,S)),v&&(_=tg.init2dArray(E,S));var g=tg.init2dArray(E,S);for(d=0;d<s;d++)if(l[d]!==Uye&&u[d]!==Uye){var C=tg.findBin(l[d]+b.minDiff/2,p),M=tg.findBin(u[d]+w.minDiff/2,A);for(x=0;x<o.length;x++){var P=o[x],D=t[P],q=T[x];q[M][C]=D[d],g[M][C]=d}c&&(k[M][C]=f[d]),v&&(_[M][C]=h[d])}for(t["_"+n]=p,t["_"+a]=A,x=0;x<o.length;x++)t["_"+o[x]]=T[x];c&&(t._text=k),v&&(t._hovertext=_),r&&r.type==="category"&&(t["_"+n+"CategoryMap"]=p.map(function(O){return r._categories[O]})),i&&i.type==="category"&&(t["_"+a+"CategoryMap"]=A.map(function(O){return i._categories[O]})),t._after2before=g}});var dP=ie((_or,Gye)=>{"use strict";var Emt=la(),kmt=Zt(),vP=eo().BADNUM;Gye.exports=function(t,r,i,n){var a,o,s,l,u,f;function c(p){if(Emt(p))return+p}if(r&&r.transpose){for(a=0,u=0;u<t.length;u++)a=Math.max(a,t[u].length);if(a===0)return!1;s=function(p){return p.length},l=function(p,w,A){return(p[A]||[])[w]}}else a=t.length,s=function(p,w){return p[w].length},l=function(p,w,A){return(p[w]||[])[A]};var h=function(p,w,A){return w===vP||A===vP?vP:l(p,w,A)};function v(p){if(r&&r.type!=="carpet"&&r.type!=="contourcarpet"&&p&&p.type==="category"&&r["_"+p._id.charAt(0)].length){var w=p._id.charAt(0),A={},T=r["_"+w+"CategoryMap"]||r[w];for(u=0;u<T.length;u++)A[T[u]]=u;return function(k){var _=A[p._categories[k]];return _+1?_:vP}}else return kmt.identity}var d=v(i),x=v(n);n&&n.type==="category"&&(a=n._categories.length);var b=new Array(a);for(u=0;u<a;u++)for(i&&i.type==="category"?o=i._categories.length:o=s(t,u),b[u]=new Array(o),f=0;f<o;f++)b[u][f]=c(h(t,x(u),d(f)));return b}});var pP=ie((bor,Xye)=>{"use strict";var Cmt=Zt(),Yye=.01,Lmt=[[-1,0],[1,0],[0,-1],[0,1]];function Pmt(e){return .5-.25*Math.min(1,e*.5)}Xye.exports=function(t,r){var i=1,n;for(Wye(t,r),n=0;n<r.length&&!(r[n][2]<4);n++);for(r=r.slice(n),n=0;n<100&&i>Yye;n++)i=Wye(t,r,Pmt(i));return i>Yye&&Cmt.log("interp2d didn't converge quickly",i),t};function Wye(e,t,r){var i=0,n,a,o,s,l,u,f,c,h,v,d,x,b;for(s=0;s<t.length;s++){for(n=t[s],a=n[0],o=n[1],d=e[a][o],v=0,h=0,l=0;l<4;l++)u=Lmt[l],f=e[a+u[0]],f&&(c=f[o+u[1]],c!==void 0&&(v===0?x=b=c:(x=Math.min(x,c),b=Math.max(b,c)),h++,v+=c));if(h===0)throw"iterateInterp2d order is wrong: no defined neighbors";e[a][o]=v/h,d===void 0?h<4&&(i=1):(e[a][o]=(1+r)*e[a][o]-r*d,b>x&&(i=Math.max(i,Math.abs(e[a][o]-d)/(b-x))))}return i}});var gP=ie((wor,Zye)=>{"use strict";var Rmt=Zt().maxRowLength;Zye.exports=function(t){var r=[],i={},n=[],a=t[0],o=[],s=[0,0,0],l=Rmt(t),u,f,c,h,v,d,x,b;for(f=0;f<t.length;f++)for(u=o,o=a,a=t[f+1]||[],c=0;c<l;c++)o[c]===void 0&&(d=(o[c-1]!==void 0?1:0)+(o[c+1]!==void 0?1:0)+(u[c]!==void 0?1:0)+(a[c]!==void 0?1:0),d?(f===0&&d++,c===0&&d++,f===t.length-1&&d++,c===o.length-1&&d++,d<4&&(i[[f,c]]=[f,c,d]),r.push([f,c,d])):n.push([f,c]));for(;n.length;){for(x={},b=!1,v=n.length-1;v>=0;v--)h=n[v],f=h[0],c=h[1],d=((i[[f-1,c]]||s)[2]+(i[[f+1,c]]||s)[2]+(i[[f,c-1]]||s)[2]+(i[[f,c+1]]||s)[2])/20,d&&(x[h]=[f,c,d],n.splice(v,1),b=!0);if(!b)throw"findEmpties iterated with no new neighbors";for(h in x)i[h]=x[h],r.push(x[h])}return r.sort(function(p,w){return w[2]-p[2]})}});var UN=ie((Tor,Kye)=>{"use strict";var NN=Ti(),jye=Zt().isArrayOrTypedArray;Kye.exports=function(t,r,i,n,a,o){var s=[],l=NN.traceIs(t,"contour"),u=NN.traceIs(t,"histogram"),f=NN.traceIs(t,"gl2d"),c,h,v,d=jye(r)&&r.length>1;if(d&&!u&&o.type!=="category"){var x=r.length;if(x<=a){if(l||f)s=Array.from(r).slice(0,a);else if(a===1)o.type==="log"?s=[.5*r[0],2*r[0]]:s=[r[0]-.5,r[0]+.5];else if(o.type==="log"){for(s=[Math.pow(r[0],1.5)/Math.pow(r[1],.5)],v=1;v<x;v++)s.push(Math.sqrt(r[v-1]*r[v]));s.push(Math.pow(r[x-1],1.5)/Math.pow(r[x-2],.5))}else{for(s=[1.5*r[0]-.5*r[1]],v=1;v<x;v++)s.push((r[v-1]+r[v])*.5);s.push(1.5*r[x-1]-.5*r[x-2])}if(x<a){var b=s[s.length-1],p;if(o.type==="log")for(p=b/s[s.length-2],v=x;v<a;v++)b*=p,s.push(b);else for(p=b-s[s.length-2],v=x;v<a;v++)b+=p,s.push(b)}}else return l?r.slice(0,a):r.slice(0,a+1)}else{var w=t[o._id.charAt(0)+"calendar"];if(u)c=o.r2c(i,0,w);else if(jye(r)&&r.length===1)c=r[0];else if(i===void 0)c=0;else{var A=o.type==="log"?o.d2c:o.r2c;c=A(i,0,w)}for(h=n||1,v=l||f?0:-.5;v<a;v++)s.push(c+h*v)}return s}});var sS=ie((Aor,$ye)=>{"use strict";var VN=Ti(),HN=Zt(),yP=Wi(),Jye=f0(),Dmt=Nye(),Imt=xv(),Fmt=hP(),qmt=dP(),zmt=pP(),Omt=gP(),mP=UN(),GN=eo().BADNUM;$ye.exports=function(t,r){var i=yP.getFromId(t,r.xaxis||"x"),n=yP.getFromId(t,r.yaxis||"y"),a=VN.traceIs(r,"contour"),o=VN.traceIs(r,"histogram"),s=VN.traceIs(r,"gl2d"),l=a?"best":r.zsmooth,u,f,c,h,v,d,x,b,p,w,A;if(i._minDtick=0,n._minDtick=0,o)A=Dmt(t,r),h=A.orig_x,u=A.x,f=A.x0,c=A.dx,b=A.orig_y,v=A.y,d=A.y0,x=A.dy,p=A.z;else{var T=r.z;HN.isArray1D(T)?(Fmt(r,i,n,"x","y",["z"]),u=r._x,v=r._y,T=r._z):(h=r.x?i.makeCalcdata(r,"x"):[],b=r.y?n.makeCalcdata(r,"y"):[],u=Jye(r,i,"x",h).vals,v=Jye(r,n,"y",b).vals,r._x=u,r._y=v),f=r.x0,c=r.dx,d=r.y0,x=r.dy,p=qmt(T,r,i,n)}(i.rangebreaks||n.rangebreaks)&&(p=Bmt(u,v,p),o||(u=Qye(u),v=Qye(v),r._x=u,r._y=v)),!o&&(a||r.connectgaps)&&(r._emptypoints=Omt(p),zmt(p,r._emptypoints));function k(q){l=r._input.zsmooth=r.zsmooth=!1,HN.warn('cannot use zsmooth: "fast": '+q)}function _(q){if(q.length>1){var O=(q[q.length-1]-q[0])/(q.length-1),U=Math.abs(O/100);for(w=0;w<q.length-1;w++)if(Math.abs(q[w+1]-q[w]-O)>U)return!1}return!0}r._islinear=!1,i.type==="log"||n.type==="log"?l==="fast"&&k("log axis found"):_(u)?_(v)?r._islinear=!0:l==="fast"&&k("y scale is not linear"):l==="fast"&&k("x scale is not linear");var E=HN.maxRowLength(p),S=r.xtype==="scaled"?"":u,g=mP(r,S,f,c,E,i),C=r.ytype==="scaled"?"":v,M=mP(r,C,d,x,p.length,n);s||(r._extremes[i._id]=yP.findExtremes(i,g),r._extremes[n._id]=yP.findExtremes(n,M));var P={x:g,y:M,z:p,text:r._text||r.text,hovertext:r._hovertext||r.hovertext};if(r.xperiodalignment&&h&&(P.orig_x=h),r.yperiodalignment&&b&&(P.orig_y=b),S&&S.length===g.length-1&&(P.xCenter=S),C&&C.length===M.length-1&&(P.yCenter=C),o&&(P.xRanges=A.xRanges,P.yRanges=A.yRanges,P.pts=A.pts),a||Imt(t,r,{vals:p,cLetter:"z"}),a&&r.contours&&r.contours.coloring==="heatmap"){var D={type:r.type==="contour"?"heatmap":"histogram2d",xcalendar:r.xcalendar,ycalendar:r.ycalendar};P.xfill=mP(D,S,f,c,E,i),P.yfill=mP(D,C,d,x,p.length,n)}return[P]};function Qye(e){for(var t=[],r=e.length,i=0;i<r;i++){var n=e[i];n!==GN&&t.push(n)}return t}function Bmt(e,t,r){for(var i=[],n=-1,a=0;a<r.length;a++)if(t[a]!==GN){n++,i[n]=[];for(var o=0;o<r[a].length;o++)e[o]!==GN&&i[n].push(r[a][o])}return i}});var _P=ie(xP=>{"use strict";xP.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]];xP.STYLE=xP.CSS_DECLARATIONS.map(function(e){return e.join(": ")+"; "}).join("")});var WN=ie((Sor,tme)=>{"use strict";var eme=_P(),Nmt=oa(),YN=Zt(),bw=null;function Umt(){if(bw!==null)return bw;bw=!1;var e=YN.isIE()||YN.isSafari()||YN.isIOS();if(window.navigator.userAgent&&!e){var t=Array.from(eme.CSS_DECLARATIONS).reverse(),r=window.CSS&&window.CSS.supports||window.supportsCSS;if(typeof r=="function")bw=t.some(function(o){return r.apply(null,o)});else{var i=Nmt.tester.append("image").attr("style",eme.STYLE),n=window.getComputedStyle(i.node()),a=n.imageRendering;bw=t.some(function(o){var s=o[1];return a===s||a===s.toLowerCase()}),i.remove()}}return bw}tme.exports=Umt});var bP=ie((Eor,fme)=>{"use strict";var rme=Mi(),Vmt=Kf(),Hmt=Ti(),Gmt=oa(),Ymt=Wi(),Cp=Zt(),nme=ks(),Wmt=pL(),Xmt=_i(),Zmt=ul().extractOpts,jmt=ul().makeColorScaleFuncFromTrace,Kmt=Cd(),Jmt=Mf(),XN=Jmt.LINE_SPACING,Qmt=WN(),$mt=_P().STYLE,lme="heatmap-label";function ume(e){return e.selectAll("g."+lme)}function ime(e){ume(e).remove()}fme.exports=function(e,t,r,i){var n=t.xaxis,a=t.yaxis;Cp.makeTraceGroups(i,r,"hm").each(function(o){var s=rme.select(this),l=o[0],u=l.trace,f=u.xgap||0,c=u.ygap||0,h=l.z,v=l.x,d=l.y,x=l.xCenter,b=l.yCenter,p=Hmt.traceIs(u,"contour"),w=p?"best":u.zsmooth,A=h.length,T=Cp.maxRowLength(h),k=!1,_=!1,E,S,g,C,M,P,D,q;for(P=0;E===void 0&&P<v.length-1;)E=n.c2p(v[P]),P++;for(P=v.length-1;S===void 0&&P>0;)S=n.c2p(v[P]),P--;for(S<E&&(g=S,S=E,E=g,k=!0),P=0;C===void 0&&P<d.length-1;)C=a.c2p(d[P]),P++;for(P=d.length-1;M===void 0&&P>0;)M=a.c2p(d[P]),P--;M<C&&(g=C,C=M,M=g,_=!0),p&&(x=v,b=d,v=l.xfill,d=l.yfill);var O="default";if(w?O=w==="best"?"smooth":"fast":u._islinear&&f===0&&c===0&&Qmt()&&(O="fast"),O!=="fast"){var U=w==="best"?0:.5;E=Math.max(-U*n._length,E),S=Math.min((1+U)*n._length,S),C=Math.max(-U*a._length,C),M=Math.min((1+U)*a._length,M)}var B=Math.round(S-E),F=Math.round(M-C),N=E>=n._length||S<=0||C>=a._length||M<=0;if(N){var X=s.selectAll("image").data([]);X.exit().remove(),ime(s);return}var K,ne;O==="fast"?(K=T,ne=A):(K=B,ne=F);var fe=document.createElement("canvas");fe.width=K,fe.height=ne;var ue=fe.getContext("2d",{willReadFrequently:!0}),ee=jmt(u,{noNumericCheck:!0,returnArray:!0}),Z,oe;O==="fast"?(Z=k?function(Xr){return T-1-Xr}:Cp.identity,oe=_?function(Xr){return A-1-Xr}:Cp.identity):(Z=function(Xr){return Cp.constrain(Math.round(n.c2p(v[Xr])-E),0,B)},oe=function(Xr){return Cp.constrain(Math.round(a.c2p(d[Xr])-C),0,F)});var ce=oe(0),le=[ce,ce],me=k?0:1,he=_?0:1,te=0,ge=0,ae=0,_e=0,Ce,qe,rt,Re,Ie;function ot(Xr,on){if(Xr!==void 0){var wn=ee(Xr);return wn[0]=Math.round(wn[0]),wn[1]=Math.round(wn[1]),wn[2]=Math.round(wn[2]),te+=on,ge+=wn[0]*on,ae+=wn[1]*on,_e+=wn[2]*on,wn}return[0,0,0,0]}function lt(Xr,on,wn,Vi){var vi=Xr[wn.bin0];if(vi===void 0)return ot(void 0,1);var Zi=Xr[wn.bin1],Xi=on[wn.bin0],ta=on[wn.bin1],Ya=Zi-vi||0,Pi=Xi-vi||0,Bn;return Zi===void 0?ta===void 0?Bn=0:Xi===void 0?Bn=2*(ta-vi):Bn=(2*ta-Xi-vi)*2/3:ta===void 0?Xi===void 0?Bn=0:Bn=(2*vi-Zi-Xi)*2/3:Xi===void 0?Bn=(2*ta-Zi-vi)*2/3:Bn=ta+vi-Zi-Xi,ot(vi+wn.frac*Ya+Vi.frac*(Pi+wn.frac*Bn))}if(O!=="default"){var ht=0,xt;try{xt=new Uint8Array(K*ne*4)}catch(Xr){xt=new Array(K*ne*4)}if(O==="smooth"){var Vt=x||v,Ht=b||d,Me=new Array(Vt.length),Ke=new Array(Ht.length),We=new Array(B),et=x?ome:ame,vt=b?ome:ame,at,Xe,dt;for(P=0;P<Vt.length;P++)Me[P]=Math.round(n.c2p(Vt[P])-E);for(P=0;P<Ht.length;P++)Ke[P]=Math.round(a.c2p(Ht[P])-C);for(P=0;P<B;P++)We[P]=et(P,Me);for(D=0;D<F;D++)for(at=vt(D,Ke),Xe=h[at.bin0],dt=h[at.bin1],P=0;P<B;P++,ht+=4)Ie=lt(Xe,dt,We[P],at),sme(xt,ht,Ie)}else for(D=0;D<A;D++)for(Re=h[D],le=oe(D),P=0;P<T;P++)Ie=ot(Re[P],1),ht=(le*T+Z(P))*4,sme(xt,ht,Ie);var _t=ue.createImageData(K,ne);try{_t.data.set(xt)}catch(Xr){var $t=_t.data,Ut=$t.length;for(D=0;D<Ut;D++)$t[D]=xt[D]}ue.putImageData(_t,0,0)}else{var fr=Math.floor(f/2),ar=Math.floor(c/2);for(D=0;D<A;D++)if(Re=h[D],le.reverse(),le[he]=oe(D+1),!(le[0]===le[1]||le[0]===void 0||le[1]===void 0))for(qe=Z(0),Ce=[qe,qe],P=0;P<T;P++)Ce.reverse(),Ce[me]=Z(P+1),!(Ce[0]===Ce[1]||Ce[0]===void 0||Ce[1]===void 0)&&(rt=Re[P],Ie=ot(rt,(Ce[1]-Ce[0])*(le[1]-le[0])),ue.fillStyle="rgba("+Ie.join(",")+")",ue.fillRect(Ce[0]+fr,le[0]+ar,Ce[1]-Ce[0]-f,le[1]-le[0]-c))}ge=Math.round(ge/te),ae=Math.round(ae/te),_e=Math.round(_e/te);var cr=Vmt("rgb("+ge+","+ae+","+_e+")");e._hmpixcount=(e._hmpixcount||0)+te,e._hmlumcount=(e._hmlumcount||0)+te*cr.getLuminance();var It=s.selectAll("image").data(o);It.enter().append("svg:image").attr({xmlns:Kmt.svg,preserveAspectRatio:"none"}),It.attr({height:F,width:B,x:E,y:C,"xlink:href":fe.toDataURL("image/png")}),O==="fast"&&!w&&It.attr("style",$mt),ime(s);var gt=u.texttemplate;if(gt){var kt=Zmt(u),Je={type:"linear",range:[kt.min,kt.max],_separators:n._separators,_numFormat:n._numFormat},Ze=u.type==="histogram2dcontour",At=u.type==="contour",Se=At?1:0,pe=At?A-1:A,Te=At?1:0,it=At?T-1:T,Dt=[];for(P=Se;P<pe;P++){var Wt;if(At)Wt=l.y[P];else if(Ze){if(P===0||P===A-1)continue;Wt=l.y[P]}else if(l.yCenter)Wt=l.yCenter[P];else{if(P+1===A&&l.y[P+1]===void 0)continue;Wt=(l.y[P]+l.y[P+1])/2}var er=Math.round(a.c2p(Wt));if(!(0>er||er>a._length))for(D=Te;D<it;D++){var qr;if(At)qr=l.x[D];else if(Ze){if(D===0||D===T-1)continue;qr=l.x[D]}else if(l.xCenter)qr=l.xCenter[D];else{if(D+1===T&&l.x[D+1]===void 0)continue;qr=(l.x[D]+l.x[D+1])/2}var Vr=Math.round(n.c2p(qr));if(!(0>Vr||Vr>n._length)){var mr=Wmt({x:qr,y:Wt},u,e._fullLayout);mr.x=qr,mr.y=Wt;var Fr=l.z[P][D];Fr===void 0?(mr.z="",mr.zLabel=""):(mr.z=Fr,mr.zLabel=Ymt.tickText(Je,Fr,"hover").text);var nn=l.text&&l.text[P]&&l.text[P][D];(nn===void 0||nn===!1)&&(nn=""),mr.text=nn;var jn=Cp.texttemplateString(gt,mr,e._fullLayout._d3locale,mr,u._meta||{});if(jn){var xn=jn.split("<br>"),pn=xn.length,ki=0;for(q=0;q<pn;q++)ki=Math.max(ki,xn[q].length);Dt.push({l:pn,c:ki,t:jn,x:Vr,y:er,z:Fr})}}}}var qn=u.textfont,bi=qn.size,Si=e._fullLayout.font.size;if(!bi||bi==="auto"){var nt=1/0,ze=1/0,ut=0,mt=0;for(q=0;q<Dt.length;q++){var Ot=Dt[q];if(ut=Math.max(ut,Ot.l),mt=Math.max(mt,Ot.c),q<Dt.length-1){var nr=Dt[q+1],yr=Math.abs(nr.x-Ot.x),vr=Math.abs(nr.y-Ot.y);yr&&(nt=Math.min(nt,yr)),vr&&(ze=Math.min(ze,vr))}}!isFinite(nt)||!isFinite(ze)?bi=Si:(nt-=f,ze-=c,nt/=mt,ze/=ut,nt/=XN/2,ze/=XN,bi=Math.min(Math.floor(nt),Math.floor(ze),Si))}if(bi<=0||!isFinite(bi))return;var Rr=function(Xr){return Xr.x},Gr=function(Xr){return Xr.y-bi*(Xr.l*XN/2-1)},Yr=ume(s).data(Dt);Yr.enter().append("g").classed(lme,1).append("text").attr("text-anchor","middle").each(function(Xr){var on=rme.select(this),wn=qn.color;(!wn||wn==="auto")&&(wn=Xmt.contrast(Xr.z===void 0?e._fullLayout.plot_bgcolor:"rgba("+ee(Xr.z).join()+")")),on.attr("data-notex",1).call(nme.positionText,Rr(Xr),Gr(Xr)).call(Gmt.font,{family:qn.family,size:bi,color:wn,weight:qn.weight,style:qn.style,variant:qn.variant,textcase:qn.textcase,lineposition:qn.lineposition,shadow:qn.shadow}).text(Xr.t).call(nme.convertToTspans,e)})}})};function ame(e,t){var r=t.length-2,i=Cp.constrain(Cp.findBin(e,t),0,r),n=t[i],a=t[i+1],o=Cp.constrain(i+(e-n)/(a-n)-.5,0,r),s=Math.round(o),l=Math.abs(o-s);return!o||o===r||!l?{bin0:s,bin1:s,frac:0}:{bin0:s,frac:l,bin1:Math.round(s+l/(o-s))}}function ome(e,t){var r=t.length-1,i=Cp.constrain(Cp.findBin(e,t),0,r),n=t[i],a=t[i+1],o=(e-n)/(a-n)||0;return o<=0?{bin0:i,bin1:i,frac:0}:o<.5?{bin0:i,bin1:i+1,frac:o}:{bin0:i+1,bin1:i,frac:1-o}}function sme(e,t,r){e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=Math.round(r[3]*255)}});var t_=ie((kor,cme)=>{"use strict";cme.exports={min:"zmin",max:"zmax"}});var wP=ie((Cor,hme)=>{"use strict";var e1t=Mi();hme.exports=function(t){e1t.select(t).selectAll(".hm image").style("opacity",function(r){return r.trace.opacity})}});var AP=ie((Lor,dme)=>{"use strict";var vme=Ol(),lS=Zt(),TP=lS.isArrayOrTypedArray,t1t=Wi(),r1t=ul().extractOpts;dme.exports=function(t,r,i,n,a){a||(a={});var o=a.isContour,s=t.cd[0],l=s.trace,u=t.xa,f=t.ya,c=s.x,h=s.y,v=s.z,d=s.xCenter,x=s.yCenter,b=s.zmask,p=l.zhoverformat,w=c,A=h,T,k,_,E;if(t.index!==!1){try{_=Math.round(t.index[1]),E=Math.round(t.index[0])}catch(X){lS.error("Error hovering on heatmap, pointNumber must be [row,col], found:",t.index);return}if(_<0||_>=v[0].length||E<0||E>v.length)return}else{if(vme.inbox(r-c[0],r-c[c.length-1],0)>0||vme.inbox(i-h[0],i-h[h.length-1],0)>0)return;if(o){var S;for(w=[2*c[0]-c[1]],S=1;S<c.length;S++)w.push((c[S]+c[S-1])/2);for(w.push([2*c[c.length-1]-c[c.length-2]]),A=[2*h[0]-h[1]],S=1;S<h.length;S++)A.push((h[S]+h[S-1])/2);A.push([2*h[h.length-1]-h[h.length-2]])}_=Math.max(0,Math.min(w.length-2,lS.findBin(r,w))),E=Math.max(0,Math.min(A.length-2,lS.findBin(i,A)))}var g=u.c2p(c[_]),C=u.c2p(c[_+1]),M=f.c2p(h[E]),P=f.c2p(h[E+1]),D,q;o?(D=s.orig_x||c,q=s.orig_y||h,C=g,T=D[_],P=M,k=q[E]):(D=s.orig_x||d||c,q=s.orig_y||x||h,T=d?D[_]:(D[_]+D[_+1])/2,k=x?q[E]:(q[E]+q[E+1])/2,u&&u.type==="category"&&(T=c[_]),f&&f.type==="category"&&(k=h[E]),l.zsmooth&&(g=C=u.c2p(T),M=P=f.c2p(k)));var O=v[E][_];if(b&&!b[E][_]&&(O=void 0),!(O===void 0&&!l.hoverongaps)){var U;TP(s.hovertext)&&TP(s.hovertext[E])?U=s.hovertext[E][_]:TP(s.text)&&TP(s.text[E])&&(U=s.text[E][_]);var B=r1t(l),F={type:"linear",range:[B.min,B.max],hoverformat:p,_separators:u._separators,_numFormat:u._numFormat},N=t1t.tickText(F,O,"hover").text;return[lS.extendFlat(t,{index:l._after2before?l._after2before[E][_]:[E,_],distance:t.maxHoverDistance,spikeDistance:t.maxSpikeDistance,x0:g,x1:C,y0:M,y1:P,xLabelVal:T,yLabelVal:k,zLabelVal:O,zLabel:N,text:U})]}}});var gme=ie((Por,pme)=>{"use strict";pme.exports={attributes:$x(),supplyDefaults:mye(),calc:sS(),plot:bP(),colorbar:t_(),style:wP(),hoverPoints:AP(),moduleType:"trace",name:"heatmap",basePlotModule:yu(),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}});var mme=ie((Ror,yme)=>{"use strict";yme.exports=gme()});var ZN=ie((Dor,xme)=>{"use strict";xme.exports=function(t,r){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}});var bme=ie((Ior,_me)=>{"use strict";_me.exports={eventDataKeys:["binNumber"]}});var MP=ie((For,Ame)=>{"use strict";var Ev=$0(),wme=kl().axisHoverFormat,n1t=Ba().hovertemplateAttrs,i1t=Ba().texttemplateAttrs,jN=Xs(),Tme=ZN(),a1t=bme(),KN=aa().extendFlat;Ame.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:wme("x"),yhoverformat:wme("y"),text:KN({},Ev.text,{}),hovertext:KN({},Ev.hovertext,{}),orientation:Ev.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:Tme("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:Tme("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:n1t({},{keys:a1t.eventDataKeys}),texttemplate:i1t({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:KN({},Ev.textposition,{arrayOk:!1}),textfont:jN({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:jN({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:jN({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:Ev.insidetextanchor,textangle:Ev.textangle,cliponaxis:Ev.cliponaxis,constraintext:Ev.constraintext,marker:Ev.marker,offsetgroup:Ev.offsetgroup,alignmentgroup:Ev.alignmentgroup,selected:Ev.selected,unselected:Ev.unselected,_deprecated:{bardir:Ev._deprecated.bardir},zorder:Ev.zorder}});var kme=ie((qor,Eme)=>{"use strict";var Mme=Ti(),uS=Zt(),Sme=_i(),o1t=zd().handleText,s1t=QL(),l1t=MP();Eme.exports=function(t,r,i,n){function a(w,A){return uS.coerce(t,r,l1t,w,A)}var o=a("x"),s=a("y"),l=a("cumulative.enabled");l&&(a("cumulative.direction"),a("cumulative.currentbin")),a("text");var u=a("textposition");o1t(t,r,n,a,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat");var f=a("orientation",s&&!o?"h":"v"),c=f==="v"?"x":"y",h=f==="v"?"y":"x",v=o&&s?Math.min(uS.minRowLength(o)&&uS.minRowLength(s)):uS.minRowLength(r[c]||[]);if(!v){r.visible=!1;return}r._length=v;var d=Mme.getComponentMethod("calendars","handleTraceDefaults");d(t,r,["x","y"],n);var x=r[h];x&&a("histfunc"),a("histnorm"),a("autobin"+c),s1t(t,r,a,i,n),uS.coerceSelectionMarkerOpacity(r,a);var b=(r.marker.line||{}).color,p=Mme.getComponentMethod("errorbars","supplyDefaults");p(t,r,b||Sme.defaultLine,{axis:"y"}),p(t,r,b||Sme.defaultLine,{axis:"x",inherit:"y"}),a("zorder")}});var EP=ie((zor,Pme)=>{"use strict";var fS=Zt(),u1t=zl(),SP=Ti().traceIs,f1t=Bx(),c1t=zd().validateCornerradius,Cme=fS.nestedProperty,JN=Tm().getAxisGroup,Lme=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],h1t=["x","y"];Pme.exports=function(t,r){var i=r._histogramBinOpts={},n=[],a={},o=[],s,l,u,f,c,h,v;function d(O,U){return fS.coerce(s._input,s,s._module.attributes,O,U)}function x(O){return O.orientation==="v"?"x":"y"}function b(O,U){var B=u1t.getFromTrace({_fullLayout:r},O,U);return B.type}function p(O,U,B){var F=O.uid+"__"+B;U||(U=F);var N=b(O,B),X=O[B+"calendar"]||"",K=i[U],ne=!0;K&&(N===K.axType&&X===K.calendar?(ne=!1,K.traces.push(O),K.dirs.push(B)):(U=F,N!==K.axType&&fS.warn(["Attempted to group the bins of trace",O.index,"set on a","type:"+N,"axis","with bins on","type:"+K.axType,"axis."].join(" ")),X!==K.calendar&&fS.warn(["Attempted to group the bins of trace",O.index,"set with a",X,"calendar","with bins",K.calendar?"on a "+K.calendar+" calendar":"w/o a set calendar"].join(" ")))),ne&&(i[U]={traces:[O],dirs:[B],axType:N,calendar:O[B+"calendar"]||""}),O["_"+B+"bingroup"]=U}for(c=0;c<t.length;c++)if(s=t[c],SP(s,"histogram")){if(n.push(s),delete s._xautoBinFinished,delete s._yautoBinFinished,s.type==="histogram"){var w=d("marker.cornerradius",r.barcornerradius);s.marker&&(s.marker.cornerradius=c1t(w))}SP(s,"2dMap")||f1t(s._input,s,r,d)}var A=r._alignmentOpts||{};for(c=0;c<n.length;c++){if(s=n[c],u="",!SP(s,"2dMap")){if(f=x(s),r.barmode==="group"&&s.alignmentgroup){var T=s[f+"axis"],k=JN(r,T)+s.orientation;(A[k]||{})[s.alignmentgroup]&&(u=k)}!u&&r.barmode!=="overlay"&&(u=JN(r,s.xaxis)+JN(r,s.yaxis)+x(s))}u?(a[u]||(a[u]=[]),a[u].push(s)):o.push(s)}for(u in a){if(l=a[u],l.length===1){o.push(l[0]);continue}var _=!1;for(l.length&&(s=l[0],_=d("bingroup")),u=_||u,c=0;c<l.length;c++){s=l[c];var E=s._input.bingroup;E&&E!==u&&fS.warn(["Trace",s.index,"must match","within bingroup",u+".","Ignoring its bingroup:",E,"setting."].join(" ")),s.bingroup=u,p(s,u,x(s))}}for(c=0;c<o.length;c++){s=o[c];var S=d("bingroup");if(SP(s,"2dMap"))for(v=0;v<2;v++){f=h1t[v];var g=d(f+"bingroup",S?S+"__"+f:null);p(s,g,f)}else p(s,S,x(s))}for(u in i){var C=i[u];for(l=C.traces,h=0;h<Lme.length;h++){var M=Lme[h],P=M.name,D,q;if(!(P==="nbins"&&C.sizeFound)){for(c=0;c<l.length;c++){if(s=l[c],f=C.dirs[c],D=M.aStr[f],Cme(s._input,D).get()!==void 0){C[P]=d(D),C[P+"Found"]=!0;break}q=(s._autoBin||{})[f]||{},q[P]&&Cme(s,D).set(q[P])}if(P==="start"||P==="end")for(;c<l.length;c++)s=l[c],s["_"+f+"bingroup"]&&(q=(s._autoBin||{})[f]||{},d(D,q[P]));P==="nbins"&&!C.sizeFound&&!C.nbinsFound&&(s=l[0],C[P]=d(D))}}}}});var Dme=ie((Oor,Rme)=>{"use strict";var v1t=dw().hoverPoints,d1t=Wi().hoverLabelText;Rme.exports=function(t,r,i,n,a){var o=v1t(t,r,i,n,a);if(o){t=o[0];var s=t.cd[t.index],l=t.cd[0].trace;if(!l.cumulative.enabled){var u=l.orientation==="h"?"y":"x";t[u+"Label"]=d1t(t[u+"a"],[s.ph0,s.ph1],l[u+"hoverformat"])}return o}}});var QN=ie((Bor,Ime)=>{"use strict";Ime.exports=function(t,r,i,n,a){if(t.x="xVal"in r?r.xVal:r.x,t.y="yVal"in r?r.yVal:r.y,"zLabelVal"in r&&(t.z=r.zLabelVal),r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),!(i.cumulative||{}).enabled){var o=Array.isArray(a)?n[0].pts[a[0]][a[1]]:n[a].pts;t.pointNumbers=o,t.binNumber=t.pointNumber,delete t.pointNumber,delete t.pointIndex;var s;if(i._indexToPoints){s=[];for(var l=0;l<o.length;l++)s=s.concat(i._indexToPoints[o[l]])}else s=o;t.pointIndices=s}return t}});var qme=ie((Nor,Fme)=>{"use strict";Fme.exports={attributes:MP(),layoutAttributes:JL(),supplyDefaults:kme(),crossTraceDefaults:EP(),supplyLayoutDefaults:gN(),calc:BN().calc,crossTraceCalc:Nx().crossTraceCalc,plot:Jx().plot,layerName:"barlayer",style:Mp().style,styleOnSelect:Mp().styleOnSelect,colorbar:yh(),hoverPoints:Dme(),selectPoints:pw(),eventData:QN(),moduleType:"trace",name:"histogram",basePlotModule:yu(),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}});var Ome=ie((Uor,zme)=>{"use strict";zme.exports=qme()});var CP=ie((Vor,Nme)=>{"use strict";var m0=MP(),Bme=ZN(),kP=$x(),p1t=rs(),$N=kl().axisHoverFormat,g1t=Ba().hovertemplateAttrs,y1t=Ba().texttemplateAttrs,m1t=Ls(),cS=aa().extendFlat;Nme.exports=cS({x:m0.x,y:m0.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:m0.histnorm,histfunc:m0.histfunc,nbinsx:m0.nbinsx,xbins:Bme("x"),nbinsy:m0.nbinsy,ybins:Bme("y"),autobinx:m0.autobinx,autobiny:m0.autobiny,bingroup:cS({},m0.bingroup,{}),xbingroup:cS({},m0.bingroup,{}),ybingroup:cS({},m0.bingroup,{}),xgap:kP.xgap,ygap:kP.ygap,zsmooth:kP.zsmooth,xhoverformat:$N("x"),yhoverformat:$N("y"),zhoverformat:$N("z",1),hovertemplate:g1t({},{keys:"z"}),texttemplate:y1t({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:kP.textfont,showlegend:cS({},p1t.showlegend,{dflt:!1})},m1t("",{cLetter:"z",autoColorDflt:!1}))});var e9=ie((Hor,Vme)=>{"use strict";var x1t=Ti(),Ume=Zt();Vme.exports=function(t,r,i,n){var a=i("x"),o=i("y"),s=Ume.minRowLength(a),l=Ume.minRowLength(o);if(!s||!l){r.visible=!1;return}r._length=Math.min(s,l);var u=x1t.getComponentMethod("calendars","handleTraceDefaults");u(t,r,["x","y"],n);var f=i("z")||i("marker.color");f&&i("histfunc"),i("histnorm"),i("autobinx"),i("autobiny")}});var Gme=ie((Gor,Hme)=>{"use strict";var _1t=Zt(),b1t=e9(),w1t=RN(),T1t=$f(),A1t=oS(),M1t=CP();Hme.exports=function(t,r,i,n){function a(o,s){return _1t.coerce(t,r,M1t,o,s)}b1t(t,r,a,n),r.visible!==!1&&(w1t(t,r,a,n),T1t(t,r,n,a,{prefix:"",cLetter:"z"}),a("hovertemplate"),A1t(a,n),a("xhoverformat"),a("yhoverformat"))}});var Xme=ie((Yor,Wme)=>{"use strict";var S1t=AP(),Yme=Wi().hoverLabelText;Wme.exports=function(t,r,i,n,a){var o=S1t(t,r,i,n,a);if(o){t=o[0];var s=t.index,l=s[0],u=s[1],f=t.cd[0],c=f.trace,h=f.xRanges[u],v=f.yRanges[l];return t.xLabel=Yme(t.xa,[h[0],h[1]],c.xhoverformat),t.yLabel=Yme(t.ya,[v[0],v[1]],c.yhoverformat),o}}});var jme=ie((Wor,Zme)=>{"use strict";Zme.exports={attributes:CP(),supplyDefaults:Gme(),crossTraceDefaults:EP(),calc:sS(),plot:bP(),layerName:"heatmaplayer",colorbar:t_(),style:wP(),hoverPoints:Xme(),eventData:QN(),moduleType:"trace",name:"histogram2d",basePlotModule:yu(),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}});var Jme=ie((Xor,Kme)=>{"use strict";Kme.exports=jme()});var hS=ie((Zor,Qme)=>{"use strict";Qme.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}});var vS=ie((jor,r1e)=>{"use strict";var Cf=$x(),LP=Bl(),e1e=kl(),t9=e1e.axisHoverFormat,E1t=e1e.descriptionOnlyNumbers,k1t=Ls(),C1t=dc().dash,L1t=Xs(),ww=aa().extendFlat,t1e=hS(),P1t=t1e.COMPARISON_OPS2,R1t=t1e.INTERVAL_OPS,$me=LP.line;r1e.exports=ww({z:Cf.z,x:Cf.x,x0:Cf.x0,dx:Cf.dx,y:Cf.y,y0:Cf.y0,dy:Cf.dy,xperiod:Cf.xperiod,yperiod:Cf.yperiod,xperiod0:LP.xperiod0,yperiod0:LP.yperiod0,xperiodalignment:Cf.xperiodalignment,yperiodalignment:Cf.yperiodalignment,text:Cf.text,hovertext:Cf.hovertext,transpose:Cf.transpose,xtype:Cf.xtype,ytype:Cf.ytype,xhoverformat:t9("x"),yhoverformat:t9("y"),zhoverformat:t9("z",1),hovertemplate:Cf.hovertemplate,texttemplate:ww({},Cf.texttemplate,{}),textfont:ww({},Cf.textfont,{}),hoverongaps:Cf.hoverongaps,connectgaps:ww({},Cf.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:L1t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:E1t("contour label")},operation:{valType:"enumerated",values:[].concat(P1t).concat(R1t),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:ww({},$me.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:C1t,smoothing:ww({},$me.smoothing,{}),editType:"plot"},zorder:LP.zorder},k1t("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))});var n9=ie((Kor,i1e)=>{"use strict";var Qh=CP(),ty=vS(),D1t=Ls(),r9=kl().axisHoverFormat,n1e=aa().extendFlat;i1e.exports=n1e({x:Qh.x,y:Qh.y,z:Qh.z,marker:Qh.marker,histnorm:Qh.histnorm,histfunc:Qh.histfunc,nbinsx:Qh.nbinsx,xbins:Qh.xbins,nbinsy:Qh.nbinsy,ybins:Qh.ybins,autobinx:Qh.autobinx,autobiny:Qh.autobiny,bingroup:Qh.bingroup,xbingroup:Qh.xbingroup,ybingroup:Qh.ybingroup,autocontour:ty.autocontour,ncontours:ty.ncontours,contours:ty.contours,line:{color:ty.line.color,width:n1e({},ty.line.width,{dflt:.5}),dash:ty.line.dash,smoothing:ty.line.smoothing,editType:"plot"},xhoverformat:r9("x"),yhoverformat:r9("y"),zhoverformat:r9("z",1),hovertemplate:Qh.hovertemplate,texttemplate:ty.texttemplate,textfont:ty.textfont},D1t("",{cLetter:"z",editTypeOverride:"calc"}))});var PP=ie((Jor,a1e)=>{"use strict";a1e.exports=function(t,r,i,n){var a=n("contours.start"),o=n("contours.end"),s=a===!1||o===!1,l=i("contours.size"),u;s?u=r.autocontour=!0:u=i("autocontour",!1),(u||!l)&&i("ncontours")}});var i9=ie((Qor,o1e)=>{"use strict";var I1t=Zt();o1e.exports=function(t,r,i,n){n||(n={});var a=t("contours.showlabels");if(a){var o=r.font;I1t.coerceFont(t,"contours.labelfont",o,{overrideDflt:{color:i}}),t("contours.labelformat")}n.hasHover!==!1&&t("zhoverformat")}});var RP=ie(($or,s1e)=>{"use strict";var F1t=$f(),q1t=i9();s1e.exports=function(t,r,i,n,a){var o=i("contours.coloring"),s,l="";o==="fill"&&(s=i("contours.showlines")),s!==!1&&(o!=="lines"&&(l=i("line.color","#000")),i("line.width",.5),i("line.dash")),o!=="none"&&(t.showlegend!==!0&&(r.showlegend=!1),r._dfltShowLegend=!1,F1t(t,r,n,i,{prefix:"",cLetter:"z"})),i("line.smoothing"),q1t(i,n,l,a)}});var c1e=ie((esr,f1e)=>{"use strict";var l1e=Zt(),z1t=e9(),O1t=PP(),B1t=RP(),N1t=oS(),u1e=n9();f1e.exports=function(t,r,i,n){function a(s,l){return l1e.coerce(t,r,u1e,s,l)}function o(s){return l1e.coerce2(t,r,u1e,s)}z1t(t,r,a,n),r.visible!==!1&&(O1t(t,r,a,o),B1t(t,r,a,n),a("xhoverformat"),a("yhoverformat"),a("hovertemplate"),r.contours&&r.contours.coloring==="heatmap"&&N1t(a,n))}});var s9=ie((tsr,v1e)=>{"use strict";var o9=Wi(),a9=Zt();v1e.exports=function(t,r){var i=t.contours;if(t.autocontour){var n=t.zmin,a=t.zmax;(t.zauto||n===void 0)&&(n=a9.aggNums(Math.min,null,r)),(t.zauto||a===void 0)&&(a=a9.aggNums(Math.max,null,r));var o=h1e(n,a,t.ncontours);i.size=o.dtick,i.start=o9.tickFirst(o),o.range.reverse(),i.end=o9.tickFirst(o),i.start===n&&(i.start+=i.size),i.end===a&&(i.end-=i.size),i.start>i.end&&(i.start=i.end=(i.start+i.end)/2),t._input.contours||(t._input.contours={}),a9.extendFlat(t._input.contours,{start:i.start,end:i.end,size:i.size}),t._input.autocontour=!0}else if(i.type!=="constraint"){var s=i.start,l=i.end,u=t._input.contours;if(s>l&&(i.start=u.start=l,l=i.end=u.end=s,s=i.start),!(i.size>0)){var f;s===l?f=1:f=h1e(s,l,t.ncontours).dtick,u.size=i.size=f}}};function h1e(e,t,r){var i={type:"linear",range:[e,t]};return o9.autoTicks(i,(t-e)/(r||15)),i}});var dS=ie((rsr,d1e)=>{"use strict";d1e.exports=function(t){return t.end+t.size/1e6}});var l9=ie((nsr,g1e)=>{"use strict";var p1e=ul(),U1t=sS(),V1t=s9(),H1t=dS();g1e.exports=function(t,r){var i=U1t(t,r),n=i[0].z;V1t(r,n);var a=r.contours,o=p1e.extractOpts(r),s;if(a.coloring==="heatmap"&&o.auto&&r.autocontour===!1){var l=a.start,u=H1t(a),f=a.size||1,c=Math.floor((u-l)/f)+1;isFinite(f)||(f=1,c=1);var h=l-f/2,v=h+c*f;s=[h,v]}else s=n;return p1e.calc(t,r,{vals:s,cLetter:"z"}),i}});var pS=ie((isr,y1e)=>{"use strict";y1e.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}});var u9=ie((asr,m1e)=>{"use strict";var DP=pS();m1e.exports=function(t){var r=t[0].z,i=r.length,n=r[0].length,a=i===2||n===2,o,s,l,u,f,c,h,v,d;for(s=0;s<i-1;s++)for(u=[],s===0&&(u=u.concat(DP.BOTTOMSTART)),s===i-2&&(u=u.concat(DP.TOPSTART)),o=0;o<n-1;o++)for(l=u.slice(),o===0&&(l=l.concat(DP.LEFTSTART)),o===n-2&&(l=l.concat(DP.RIGHTSTART)),f=o+","+s,c=[[r[s][o],r[s][o+1]],[r[s+1][o],r[s+1][o+1]]],d=0;d<t.length;d++)v=t[d],h=G1t(v.level,c),h&&(v.crossings[f]=h,l.indexOf(h)!==-1&&(v.starts.push([o,s]),a&&l.indexOf(h,l.indexOf(h)+1)!==-1&&v.starts.push([o,s])))};function G1t(e,t){var r=(t[0][0]>e?0:1)+(t[0][1]>e?0:2)+(t[1][1]>e?0:4)+(t[1][0]>e?0:8);if(r===5||r===10){var i=(t[0][0]+t[0][1]+t[1][0]+t[1][1])/4;return e>i?r===5?713:1114:r===5?104:208}return r===15?0:r}});var f9=ie((osr,b1e)=>{"use strict";var IP=Zt(),Tw=pS();b1e.exports=function(t,r,i){var n,a,o,s,l;for(r=r||.01,i=i||.01,o=0;o<t.length;o++){for(s=t[o],l=0;l<s.starts.length;l++)a=s.starts[l],x1e(s,a,"edge",r,i);for(n=0;Object.keys(s.crossings).length&&n<1e4;)n++,a=Object.keys(s.crossings)[0].split(",").map(Number),x1e(s,a,void 0,r,i);n===1e4&&IP.log("Infinite loop in contour?")}};function gS(e,t,r,i){return Math.abs(e[0]-t[0])<r&&Math.abs(e[1]-t[1])<i}function Y1t(e,t){var r=e[2]-t[2],i=e[3]-t[3];return Math.sqrt(r*r+i*i)}function x1e(e,t,r,i,n){var a=t.join(","),o=e.crossings[a],s=W1t(o,r,t),l=[_1e(e,t,[-s[0],-s[1]])],u=e.z.length,f=e.z[0].length,c=t.slice(),h=s.slice(),v;for(v=0;v<1e4;v++){if(o>20?(o=Tw.CHOOSESADDLE[o][(s[0]||s[1])<0?0:1],e.crossings[a]=Tw.SADDLEREMAINDER[o]):delete e.crossings[a],s=Tw.NEWDELTA[o],!s){IP.log("Found bad marching index:",o,t,e.level);break}l.push(_1e(e,t,s)),t[0]+=s[0],t[1]+=s[1],a=t.join(","),gS(l[l.length-1],l[l.length-2],i,n)&&l.pop();var d=s[0]&&(t[0]<0||t[0]>f-2)||s[1]&&(t[1]<0||t[1]>u-2),x=t[0]===c[0]&&t[1]===c[1]&&s[0]===h[0]&&s[1]===h[1];if(x||r&&d)break;o=e.crossings[a]}v===1e4&&IP.log("Infinite loop in contour?");var b=gS(l[0],l[l.length-1],i,n),p=0,w=.2*e.smoothing,A=[],T=0,k,_,E,S,g,C,M,P,D,q,O;for(v=1;v<l.length;v++)M=Y1t(l[v],l[v-1]),p+=M,A.push(M);var U=p/A.length*w;function B(X){return l[X%l.length]}for(v=l.length-2;v>=T;v--)if(k=A[v],k<U){for(E=0,_=v-1;_>=T&&k+A[_]<U;_--)k+=A[_];if(b&&v===l.length-2)for(E=0;E<_&&k+A[E]<U;E++)k+=A[E];g=v-_+E+1,C=Math.floor((v+_+E+2)/2),!b&&v===l.length-2?S=l[l.length-1]:!b&&_===-1?S=l[0]:g%2?S=B(C):S=[(B(C)[0]+B(C+1)[0])/2,(B(C)[1]+B(C+1)[1])/2],l.splice(_+1,v-_+1,S),v=_+1,E&&(T=E),b&&(v===l.length-2?l[E]=l[l.length-1]:v===0&&(l[l.length-1]=l[0]))}for(l.splice(0,T),v=0;v<l.length;v++)l[v].length=2;if(!(l.length<2))if(b)l.pop(),e.paths.push(l);else{r||IP.log("Unclosed interior contour?",e.level,c.join(","),l.join("L"));var F=!1;for(P=0;P<e.edgepaths.length;P++)if(q=e.edgepaths[P],!F&&gS(q[0],l[l.length-1],i,n)){l.pop(),F=!0;var N=!1;for(D=0;D<e.edgepaths.length;D++)if(O=e.edgepaths[D],gS(O[O.length-1],l[0],i,n)){N=!0,l.shift(),e.edgepaths.splice(P,1),D===P?e.paths.push(l.concat(O)):(D>P&&D--,e.edgepaths[D]=O.concat(l,q));break}N||(e.edgepaths[P]=l.concat(q))}for(P=0;P<e.edgepaths.length&&!F;P++)q=e.edgepaths[P],gS(q[q.length-1],l[0],i,n)&&(l.shift(),e.edgepaths[P]=q.concat(l),F=!0);F||e.edgepaths.push(l)}}function W1t(e,t,r){var i=0,n=0;return e>20&&t?e===208||e===1114?i=r[0]===0?1:-1:n=r[1]===0?1:-1:Tw.BOTTOMSTART.indexOf(e)!==-1?n=1:Tw.LEFTSTART.indexOf(e)!==-1?i=1:Tw.TOPSTART.indexOf(e)!==-1?n=-1:i=-1,[i,n]}function _1e(e,t,r){var i=t[0]+Math.max(r[0],0),n=t[1]+Math.max(r[1],0),a=e.z[n][i],o=e.xaxis,s=e.yaxis;if(r[1]){var l=(e.level-a)/(e.z[n][i+1]-a),u=(l!==1?(1-l)*o.c2l(e.x[i]):0)+(l!==0?l*o.c2l(e.x[i+1]):0);return[o.c2p(o.l2c(u),!0),s.c2p(e.y[n],!0),i+l,n]}else{var f=(e.level-a)/(e.z[n+1][i]-a),c=(f!==1?(1-f)*s.c2l(e.y[n]):0)+(f!==0?f*s.c2l(e.y[n+1]):0);return[o.c2p(e.x[i],!0),s.c2p(s.l2c(c),!0),i,n+f]}}});var M1e=ie((ssr,A1e)=>{"use strict";var c9=hS(),X1t=la();A1e.exports={"[]":w1e("[]"),"][":w1e("]["),">":h9(">"),"<":h9("<"),"=":h9("=")};function T1e(e,t){var r=Array.isArray(t),i;function n(a){return X1t(a)?+a:null}return c9.COMPARISON_OPS2.indexOf(e)!==-1?i=n(r?t[0]:t):c9.INTERVAL_OPS.indexOf(e)!==-1?i=r?[n(t[0]),n(t[1])]:[n(t),n(t)]:c9.SET_OPS.indexOf(e)!==-1&&(i=r?t.map(n):[n(t)]),i}function w1e(e){return function(t){t=T1e(e,t);var r=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]);return{start:r,end:i,size:i-r}}}function h9(e){return function(t){return t=T1e(e,t),{start:t,end:1/0,size:1/0}}}});var v9=ie((lsr,E1e)=>{"use strict";var S1e=Zt(),Z1t=M1e(),j1t=dS();E1e.exports=function(t,r,i){for(var n=t.type==="constraint"?Z1t[t._operation](t.value):t,a=n.size,o=[],s=j1t(n),l=i.trace._carpetTrace,u=l?{xaxis:l.aaxis,yaxis:l.baxis,x:i.a,y:i.b}:{xaxis:r.xaxis,yaxis:r.yaxis,x:i.x,y:i.y},f=n.start;f<s;f+=a)if(o.push(S1e.extendFlat({level:f,crossings:{},starts:[],edgepaths:[],paths:[],z:i.z,smoothing:i.trace.line.smoothing},u)),o.length>1e3){S1e.warn("Too many contours, clipping at 1000",t);break}return o}});var d9=ie((usr,C1e)=>{"use strict";var Aw=Zt();C1e.exports=function(e,t){var r,i,n,a=function(l){return l.reverse()},o=function(l){return l};switch(t){case"=":case"<":return e;case">":for(e.length!==1&&Aw.warn("Contour data invalid for the specified inequality operation."),i=e[0],r=0;r<i.edgepaths.length;r++)i.edgepaths[r]=a(i.edgepaths[r]);for(r=0;r<i.paths.length;r++)i.paths[r]=a(i.paths[r]);for(r=0;r<i.starts.length;r++)i.starts[r]=a(i.starts[r]);return e;case"][":var s=a;a=o,o=s;case"[]":for(e.length!==2&&Aw.warn("Contour data invalid for the specified inequality range operation."),i=k1e(e[0]),n=k1e(e[1]),r=0;r<i.edgepaths.length;r++)i.edgepaths[r]=a(i.edgepaths[r]);for(r=0;r<i.paths.length;r++)i.paths[r]=a(i.paths[r]);for(r=0;r<i.starts.length;r++)i.starts[r]=a(i.starts[r]);for(;n.edgepaths.length;)i.edgepaths.push(o(n.edgepaths.shift()));for(;n.paths.length;)i.paths.push(o(n.paths.shift()));for(;n.starts.length;)i.starts.push(o(n.starts.shift()));return[i]}};function k1e(e){return Aw.extendFlat({},e,{edgepaths:Aw.extendDeep([],e.edgepaths),paths:Aw.extendDeep([],e.paths),starts:Aw.extendDeep([],e.starts)})}});var p9=ie((fsr,L1e)=>{"use strict";L1e.exports=function(e,t){var r=e[0],i=r.z,n;switch(t.type){case"levels":var a=Math.min(i[0][0],i[0][1]);for(n=0;n<e.length;n++){var o=e[n];o.prefixBoundary=!o.edgepaths.length&&(a>o.level||o.starts.length&&a===o.level)}break;case"constraint":if(r.prefixBoundary=!1,r.edgepaths.length)return;var s=r.x.length,l=r.y.length,u=-1/0,f=1/0;for(n=0;n<l;n++)f=Math.min(f,i[n][0]),f=Math.min(f,i[n][s-1]),u=Math.max(u,i[n][0]),u=Math.max(u,i[n][s-1]);for(n=1;n<s-1;n++)f=Math.min(f,i[0][n]),f=Math.min(f,i[l-1][n]),u=Math.max(u,i[0][n]),u=Math.max(u,i[l-1][n]);var c=t.value,h,v;switch(t._operation){case">":c>u&&(r.prefixBoundary=!0);break;case"<":(c<f||r.starts.length&&c===f)&&(r.prefixBoundary=!0);break;case"[]":h=Math.min(c[0],c[1]),v=Math.max(c[0],c[1]),(v<f||h>u||r.starts.length&&v===f)&&(r.prefixBoundary=!0);break;case"][":h=Math.min(c[0],c[1]),v=Math.max(c[0],c[1]),h<f&&v>u&&(r.prefixBoundary=!0);break}break}}});var FP=ie($h=>{"use strict";var mS=Mi(),xc=Zt(),ry=oa(),K1t=ul(),D1e=ks(),P1e=Wi(),R1e=N0(),J1t=bP(),I1e=u9(),F1e=f9(),Q1t=v9(),$1t=d9(),q1e=p9(),yS=pS(),rg=yS.LABELOPTIMIZER;$h.plot=function(t,r,i,n){var a=r.xaxis,o=r.yaxis;xc.makeTraceGroups(n,i,"contour").each(function(s){var l=mS.select(this),u=s[0],f=u.trace,c=u.x,h=u.y,v=f.contours,d=Q1t(v,r,u),x=xc.ensureSingle(l,"g","heatmapcoloring"),b=[];v.coloring==="heatmap"&&(b=[s]),J1t(t,r,b,x),I1e(d),F1e(d);var p=a.c2p(c[0],!0),w=a.c2p(c[c.length-1],!0),A=o.c2p(h[0],!0),T=o.c2p(h[h.length-1],!0),k=[[p,T],[w,T],[w,A],[p,A]],_=d;v.type==="constraint"&&(_=$1t(d,v._operation)),ext(l,k,v),txt(l,_,k,v),rxt(l,d,t,u,v),ixt(l,r,t,u,k)})};function ext(e,t,r){var i=xc.ensureSingle(e,"g","contourbg"),n=i.selectAll("path").data(r.coloring==="fill"?[0]:[]);n.enter().append("path"),n.exit().remove(),n.attr("d","M"+t.join("L")+"Z").style("stroke","none")}function txt(e,t,r,i){var n=i.coloring==="fill"||i.type==="constraint"&&i._operation!=="=",a="M"+r.join("L")+"Z";n&&q1e(t,i);var o=xc.ensureSingle(e,"g","contourfill"),s=o.selectAll("path").data(n?t:[]);s.enter().append("path"),s.exit().remove(),s.each(function(l){var u=(l.prefixBoundary?a:"")+z1e(l,r);u?mS.select(this).attr("d",u).style("stroke","none"):mS.select(this).remove()})}function z1e(e,t){var r="",i=0,n=e.edgepaths.map(function(p,w){return w}),a=!0,o,s,l,u,f,c;function h(p){return Math.abs(p[1]-t[0][1])<.01}function v(p){return Math.abs(p[1]-t[2][1])<.01}function d(p){return Math.abs(p[0]-t[0][0])<.01}function x(p){return Math.abs(p[0]-t[2][0])<.01}for(;n.length;){for(c=ry.smoothopen(e.edgepaths[i],e.smoothing),r+=a?c:c.replace(/^M/,"L"),n.splice(n.indexOf(i),1),o=e.edgepaths[i][e.edgepaths[i].length-1],u=-1,l=0;l<4;l++){if(!o){xc.log("Missing end?",i,e);break}for(h(o)&&!x(o)?s=t[1]:d(o)?s=t[0]:v(o)?s=t[3]:x(o)&&(s=t[2]),f=0;f<e.edgepaths.length;f++){var b=e.edgepaths[f][0];Math.abs(o[0]-s[0])<.01?Math.abs(o[0]-b[0])<.01&&(b[1]-o[1])*(s[1]-b[1])>=0&&(s=b,u=f):Math.abs(o[1]-s[1])<.01?Math.abs(o[1]-b[1])<.01&&(b[0]-o[0])*(s[0]-b[0])>=0&&(s=b,u=f):xc.log("endpt to newendpt is not vert. or horz.",o,s,b)}if(o=s,u>=0)break;r+="L"+s}if(u===e.edgepaths.length){xc.log("unclosed perimeter path");break}i=u,a=n.indexOf(i)===-1,a&&(i=n[0],r+="Z")}for(i=0;i<e.paths.length;i++)r+=ry.smoothclosed(e.paths[i],e.smoothing);return r}function rxt(e,t,r,i,n){var a=r._context.staticPlot,o=xc.ensureSingle(e,"g","contourlines"),s=n.showlines!==!1,l=n.showlabels,u=s&&l,f=$h.createLines(o,s||l,t,a),c=$h.createLineClip(o,u,r,i.trace.uid),h=e.selectAll("g.contourlabels").data(l?[0]:[]);if(h.exit().remove(),h.enter().append("g").classed("contourlabels",!0),l){var v=[],d=[];xc.clearLocationCache();var x=$h.labelFormatter(r,i),b=ry.tester.append("text").attr("data-notex",1).call(ry.font,n.labelfont),p=t[0].xaxis,w=t[0].yaxis,A=p._length,T=w._length,k=p.range,_=w.range,E=xc.aggNums(Math.min,null,i.x),S=xc.aggNums(Math.max,null,i.x),g=xc.aggNums(Math.min,null,i.y),C=xc.aggNums(Math.max,null,i.y),M=Math.max(p.c2p(E,!0),0),P=Math.min(p.c2p(S,!0),A),D=Math.max(w.c2p(C,!0),0),q=Math.min(w.c2p(g,!0),T),O={};k[0]<k[1]?(O.left=M,O.right=P):(O.left=P,O.right=M),_[0]<_[1]?(O.top=D,O.bottom=q):(O.top=q,O.bottom=D),O.middle=(O.top+O.bottom)/2,O.center=(O.left+O.right)/2,v.push([[O.left,O.top],[O.right,O.top],[O.right,O.bottom],[O.left,O.bottom]]);var U=Math.sqrt(A*A+T*T),B=yS.LABELDISTANCE*U/Math.max(1,t.length/yS.LABELINCREASE);f.each(function(F){var N=$h.calcTextOpts(F.level,x,b,r);mS.select(this).selectAll("path").each(function(){var X=this,K=xc.getVisibleSegment(X,O,N.height/2);if(K&&!(K.len<(N.width+N.height)*yS.LABELMIN))for(var ne=Math.min(Math.ceil(K.len/B),yS.LABELMAX),fe=0;fe<ne;fe++){var ue=$h.findBestTextLocation(X,K,N,d,O);if(!ue)break;$h.addLabelData(ue,N,d,v)}})}),b.remove(),$h.drawLabels(h,d,r,c,u?v:null)}l&&!s&&f.remove()}$h.createLines=function(e,t,r,i){var n=r[0].smoothing,a=e.selectAll("g.contourlevel").data(t?r:[]);if(a.exit().remove(),a.enter().append("g").classed("contourlevel",!0),t){var o=a.selectAll("path.openline").data(function(l){return l.pedgepaths||l.edgepaths});o.exit().remove(),o.enter().append("path").classed("openline",!0),o.attr("d",function(l){return ry.smoothopen(l,n)}).style("stroke-miterlimit",1).style("vector-effect",i?"none":"non-scaling-stroke");var s=a.selectAll("path.closedline").data(function(l){return l.ppaths||l.paths});s.exit().remove(),s.enter().append("path").classed("closedline",!0),s.attr("d",function(l){return ry.smoothclosed(l,n)}).style("stroke-miterlimit",1).style("vector-effect",i?"none":"non-scaling-stroke")}return a};$h.createLineClip=function(e,t,r,i){var n=r._fullLayout._clips,a=t?"clipline"+i:null,o=n.selectAll("#"+a).data(t?[0]:[]);return o.exit().remove(),o.enter().append("clipPath").classed("contourlineclip",!0).attr("id",a),ry.setClipUrl(e,a,r),o};$h.labelFormatter=function(e,t){var r=e._fullLayout,i=t.trace,n=i.contours,a={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(n.labelformat)a.tickformat=n.labelformat,R1e(a,r);else{var o=K1t.extractOpts(i);if(o&&o.colorbar&&o.colorbar._axis)a=o.colorbar._axis;else{if(n.type==="constraint"){var s=n.value;xc.isArrayOrTypedArray(s)?a.range=[s[0],s[s.length-1]]:a.range=[s,s]}else a.range=[n.start,n.end],a.nticks=(n.end-n.start)/n.size;a.range[0]===a.range[1]&&(a.range[1]+=a.range[0]||1),a.nticks||(a.nticks=1e3),R1e(a,r),P1e.prepTicks(a),a._tmin=null,a._tmax=null}}return function(l){return P1e.tickText(a,l).text}};$h.calcTextOpts=function(e,t,r,i){var n=t(e);r.text(n).call(D1e.convertToTspans,i);var a=r.node(),o=ry.bBox(a,!0);return{text:n,width:o.width,height:o.height,fontSize:+a.style["font-size"].replace("px",""),level:e,dy:(o.top+o.bottom)/2}};$h.findBestTextLocation=function(e,t,r,i,n){var a=r.width,o,s,l,u,f;t.isClosed?(s=t.len/rg.INITIALSEARCHPOINTS,o=t.min+s/2,l=t.max):(s=(t.len-a)/(rg.INITIALSEARCHPOINTS+1),o=t.min+s+a/2,l=t.max-(s+a)/2);for(var c=1/0,h=0;h<rg.ITERATIONS;h++){for(var v=o;v<l;v+=s){var d=xc.getTextLocation(e,t.total,v,a),x=nxt(d,r,i,n);x<c&&(c=x,f=d,u=v)}if(c>rg.MAXCOST*2)break;h&&(s/=2),o=u-s/2,l=o+s*1.5}if(c<=rg.MAXCOST)return f};function nxt(e,t,r,i){var n=t.width/2,a=t.height/2,o=e.x,s=e.y,l=e.theta,u=Math.cos(l)*n,f=Math.sin(l)*n,c=(o>i.center?i.right-o:o-i.left)/(u+Math.abs(Math.sin(l)*a)),h=(s>i.middle?i.bottom-s:s-i.top)/(Math.abs(f)+Math.cos(l)*a);if(c<1||h<1)return 1/0;var v=rg.EDGECOST*(1/(c-1)+1/(h-1));v+=rg.ANGLECOST*l*l;for(var d=o-u,x=s-f,b=o+u,p=s+f,w=0;w<r.length;w++){var A=r[w],T=Math.cos(A.theta)*A.width/2,k=Math.sin(A.theta)*A.width/2,_=xc.segmentDistance(d,x,b,p,A.x-T,A.y-k,A.x+T,A.y+k)*2/(t.height+A.height),E=A.level===t.level,S=E?rg.SAMELEVELDISTANCE:1;if(_<=S)return 1/0;var g=rg.NEIGHBORCOST*(E?rg.SAMELEVELFACTOR:1);v+=g/(_-S)}return v}$h.addLabelData=function(e,t,r,i){var n=t.fontSize,a=t.width+n/3,o=Math.max(0,t.height-n/3),s=e.x,l=e.y,u=e.theta,f=Math.sin(u),c=Math.cos(u),h=function(d,x){return[s+d*c-x*f,l+d*f+x*c]},v=[h(-a/2,-o/2),h(-a/2,o/2),h(a/2,o/2),h(a/2,-o/2)];r.push({text:t.text,x:s,y:l,dy:t.dy,theta:u,level:t.level,width:a,height:o}),i.push(v)};$h.drawLabels=function(e,t,r,i,n){var a=e.selectAll("text").data(t,function(u){return u.text+","+u.x+","+u.y+","+u.theta});if(a.exit().remove(),a.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(u){var f=u.x+Math.sin(u.theta)*u.dy,c=u.y-Math.cos(u.theta)*u.dy;mS.select(this).text(u.text).attr({x:f,y:c,transform:"rotate("+180*u.theta/Math.PI+" "+f+" "+c+")"}).call(D1e.convertToTspans,r)}),n){for(var o="",s=0;s<n.length;s++)o+="M"+n[s].join("L")+"Z";var l=xc.ensureSingle(i,"path","");l.attr("d",o)}};function ixt(e,t,r,i,n){var a=i.trace,o=r._fullLayout._clips,s="clip"+a.uid,l=o.selectAll("#"+s).data(a.connectgaps?[]:[0]);if(l.enter().append("clipPath").classed("contourclip",!0).attr("id",s),l.exit().remove(),a.connectgaps===!1){var u={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:t.xaxis,yaxis:t.yaxis,x:i.x,y:i.y,z:axt(i),smoothing:0};I1e([u]),F1e([u]),q1e([u],{type:"levels"});var f=xc.ensureSingle(l,"path","");f.attr("d",(u.prefixBoundary?"M"+n.join("L")+"Z":"")+z1e(u,n))}else s=null;ry.setClipUrl(e,s,r)}function axt(e){var t=e.trace._emptypoints,r=[],i=e.z.length,n=e.z[0].length,a,o=[],s;for(a=0;a<n;a++)o.push(1);for(a=0;a<i;a++)r.push(o.slice());for(a=0;a<t.length;a++)s=t[a],r[s[0]][s[1]]=0;return e.zmask=r,r}});var y9=ie((hsr,O1e)=>{"use strict";var oxt=Mi(),g9=ul(),sxt=dS();O1e.exports=function(t){var r=t.contours,i=r.start,n=sxt(r),a=r.size||1,o=Math.floor((n-i)/a)+1,s=r.coloring==="lines"?0:1,l=g9.extractOpts(t);isFinite(a)||(a=1,o=1);var u=l.reversescale?g9.flipScale(l.colorscale):l.colorscale,f=u.length,c=new Array(f),h=new Array(f),v,d,x=l.min,b=l.max;if(r.coloring==="heatmap"){for(d=0;d<f;d++)v=u[d],c[d]=v[0]*(b-x)+x,h[d]=v[1];var p=oxt.extent([x,b,r.start,r.start+a*(o-1)]),w=p[x<b?0:1],A=p[x<b?1:0];w!==x&&(c.splice(0,0,w),h.splice(0,0,h[0])),A!==b&&(c.push(A),h.push(h[h.length-1]))}else{var T=t._input&&typeof t._input.zmin=="number"&&typeof t._input.zmax=="number";for(T&&(i<=x||n>=b)&&(i<=x&&(i=x),n>=b&&(n=b),o=Math.floor((n-i)/a)+1,s=0),d=0;d<f;d++)v=u[d],c[d]=(v[0]*(o+s-1)-s/2)*a+i,h[d]=v[1];(T||t.autocontour)&&(c[0]>x&&(c.unshift(x),h.unshift(h[0])),c[c.length-1]<b&&(c.push(b),h.push(h[h.length-1])))}return g9.makeColorScaleFunc({domain:c,range:h},{noNumericCheck:!0})}});var zP=ie((vsr,N1e)=>{"use strict";var qP=Mi(),B1e=oa(),lxt=wP(),uxt=y9();N1e.exports=function(t){var r=qP.select(t).selectAll("g.contour");r.style("opacity",function(i){return i[0].trace.opacity}),r.each(function(i){var n=qP.select(this),a=i[0].trace,o=a.contours,s=a.line,l=o.size||1,u=o.start,f=o.type==="constraint",c=!f&&o.coloring==="lines",h=!f&&o.coloring==="fill",v=c||h?uxt(a):null;n.selectAll("g.contourlevel").each(function(b){qP.select(this).selectAll("path").call(B1e.lineGroupStyle,s.width,c?v(b.level):s.color,s.dash)});var d=o.labelfont;if(n.selectAll("g.contourlabels text").each(function(b){B1e.font(qP.select(this),{weight:d.weight,style:d.style,variant:d.variant,textcase:d.textcase,lineposition:d.lineposition,shadow:d.shadow,family:d.family,size:d.size,color:d.color||(c?v(b.level):s.color)})}),f)n.selectAll("g.contourfill path").style("fill",a.fillcolor);else if(h){var x;n.selectAll("g.contourfill path").style("fill",function(b){return x===void 0&&(x=b.level),v(b.level+.5*l)}),x===void 0&&(x=u),n.selectAll("g.contourbg path").style("fill",v(x-.5*l))}}),lxt(t)}});var OP=ie((dsr,V1e)=>{"use strict";var U1e=ul(),fxt=y9(),cxt=dS();function hxt(e,t,r){var i=t.contours,n=t.line,a=i.size||1,o=i.coloring,s=fxt(t,{isColorbar:!0});if(o==="heatmap"){var l=U1e.extractOpts(t);r._fillgradient=l.reversescale?U1e.flipScale(l.colorscale):l.colorscale,r._zrange=[l.min,l.max]}else o==="fill"&&(r._fillcolor=s);r._line={color:o==="lines"?s:n.color,width:i.showlines!==!1?n.width:0,dash:n.dash},r._levels={start:i.start,end:cxt(i),size:a}}V1e.exports={min:"zmin",max:"zmax",calc:hxt}});var m9=ie((psr,H1e)=>{"use strict";var BP=_i(),vxt=AP();H1e.exports=function(t,r,i,n,a){a||(a={}),a.isContour=!0;var o=vxt(t,r,i,n,a);return o&&o.forEach(function(s){var l=s.trace;l.contours.type==="constraint"&&(l.fillcolor&&BP.opacity(l.fillcolor)?s.color=BP.addOpacity(l.fillcolor,1):l.contours.showlines&&BP.opacity(l.line.color)&&(s.color=BP.addOpacity(l.line.color,1)))}),o}});var Y1e=ie((gsr,G1e)=>{"use strict";G1e.exports={attributes:n9(),supplyDefaults:c1e(),crossTraceDefaults:EP(),calc:l9(),plot:FP().plot,layerName:"contourlayer",style:zP(),colorbar:OP(),hoverPoints:m9(),moduleType:"trace",name:"histogram2dcontour",basePlotModule:yu(),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}});var X1e=ie((ysr,W1e)=>{"use strict";W1e.exports=Y1e()});var x9=ie((msr,$1e)=>{"use strict";var Z1e=la(),dxt=i9(),J1e=_i(),j1e=J1e.addOpacity,pxt=J1e.opacity,Q1e=hS(),K1e=Zt().isArrayOrTypedArray,gxt=Q1e.CONSTRAINT_REDUCTION,yxt=Q1e.COMPARISON_OPS2;$1e.exports=function(t,r,i,n,a,o){var s=r.contours,l,u,f,c=i("contours.operation");if(s._operation=gxt[c],mxt(i,s),c==="="?l=s.showlines=!0:(l=i("contours.showlines"),f=i("fillcolor",j1e((t.line||{}).color||a,.5))),l){var h=f&&pxt(f)?j1e(r.fillcolor,1):a;u=i("line.color",h),i("line.width",2),i("line.dash")}i("line.smoothing"),dxt(i,n,u,o)};function mxt(e,t){var r;yxt.indexOf(t.operation)===-1?(e("contours.value",[0,1]),K1e(t.value)?t.value.length>2?t.value=t.value.slice(2):t.length===0?t.value=[0,1]:t.length<2?(r=parseFloat(t.value[0]),t.value=[r,r+1]):t.value=[parseFloat(t.value[0]),parseFloat(t.value[1])]:Z1e(t.value)&&(r=parseFloat(t.value),t.value=[r,r+1])):(e("contours.value",0),Z1e(t.value)||(K1e(t.value)?t.value=parseFloat(t.value[0]):t.value=0))}});var rxe=ie((xsr,txe)=>{"use strict";var _9=Zt(),xxt=aS(),_xt=s0(),bxt=x9(),wxt=PP(),Txt=RP(),Axt=oS(),exe=vS();txe.exports=function(t,r,i,n){function a(u,f){return _9.coerce(t,r,exe,u,f)}function o(u){return _9.coerce2(t,r,exe,u)}var s=xxt(t,r,a,n);if(!s){r.visible=!1;return}_xt(t,r,n,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hoverongaps"),a("hovertemplate");var l=a("contours.type")==="constraint";a("connectgaps",_9.isArray1D(r.z)),l?bxt(t,r,a,n,i):(wxt(t,r,a,o),Txt(t,r,a,n)),r.contours&&r.contours.coloring==="heatmap"&&Axt(a,n),a("zorder")}});var ixe=ie((_sr,nxe)=>{"use strict";nxe.exports={attributes:vS(),supplyDefaults:rxe(),calc:l9(),plot:FP().plot,style:zP(),colorbar:OP(),hoverPoints:m9(),moduleType:"trace",name:"contour",basePlotModule:yu(),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}});var oxe=ie((bsr,axe)=>{"use strict";axe.exports=ixe()});var b9=ie((wsr,lxe)=>{"use strict";var Mxt=Ba().hovertemplateAttrs,Sxt=Ba().texttemplateAttrs,Ext=X0(),Nd=Bl(),kxt=rs(),sxe=Ls(),Cxt=dc().dash,Om=aa().extendFlat,Lp=Nd.marker,xS=Nd.line,Lxt=Lp.line;lxe.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:Om({},Nd.mode,{dflt:"markers"}),text:Om({},Nd.text,{}),texttemplate:Sxt({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:Om({},Nd.hovertext,{}),line:{color:xS.color,width:xS.width,dash:Cxt,backoff:xS.backoff,shape:Om({},xS.shape,{values:["linear","spline"]}),smoothing:xS.smoothing,editType:"calc"},connectgaps:Nd.connectgaps,cliponaxis:Nd.cliponaxis,fill:Om({},Nd.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:Ext(),marker:Om({symbol:Lp.symbol,opacity:Lp.opacity,angle:Lp.angle,angleref:Lp.angleref,standoff:Lp.standoff,maxdisplayed:Lp.maxdisplayed,size:Lp.size,sizeref:Lp.sizeref,sizemin:Lp.sizemin,sizemode:Lp.sizemode,line:Om({width:Lxt.width,editType:"calc"},sxe("marker.line")),gradient:Lp.gradient,editType:"calc"},sxe("marker")),textfont:Nd.textfont,textposition:Nd.textposition,selected:Nd.selected,unselected:Nd.unselected,hoverinfo:Om({},kxt.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:Nd.hoveron,hovertemplate:Mxt()}});var hxe=ie((Tsr,cxe)=>{"use strict";var uxe=Zt(),Pxt=W0(),Mw=Ks(),Rxt=xp(),Dxt=l0(),fxe=V2(),Ixt=u0(),Fxt=j0(),qxt=b9();cxe.exports=function(t,r,i,n){function a(h,v){return uxe.coerce(t,r,qxt,h,v)}var o=a("a"),s=a("b"),l=a("c"),u;if(o?(u=o.length,s?(u=Math.min(u,s.length),l&&(u=Math.min(u,l.length))):l?u=Math.min(u,l.length):u=0):s&&l&&(u=Math.min(s.length,l.length)),!u){r.visible=!1;return}r._length=u,a("sum"),a("text"),a("hovertext"),r.hoveron!=="fills"&&a("hovertemplate");var f=u<Pxt.PTS_LINESONLY?"lines+markers":"lines";a("mode",f),Mw.hasMarkers(r)&&Rxt(t,r,i,n,a,{gradient:!0}),Mw.hasLines(r)&&(Dxt(t,r,i,n,a,{backoff:!0}),fxe(t,r,a),a("connectgaps")),Mw.hasText(r)&&(a("texttemplate"),Ixt(t,r,n,a));var c=[];(Mw.hasMarkers(r)||Mw.hasText(r))&&(a("cliponaxis"),a("marker.maxdisplayed"),c.push("points")),a("fill"),r.fill!=="none"&&(Fxt(t,r,i,a),Mw.hasLines(r)||fxe(t,r,a)),(r.fill==="tonext"||r.fill==="toself")&&c.push("fills"),a("hoveron",c.join("+")||"points"),uxe.coerceSelectionMarkerOpacity(r,a)}});var dxe=ie((Asr,vxe)=>{"use strict";var w9=Wi();vxe.exports=function(t,r,i){var n={},a=i[r.subplot]._subplot;return n.aLabel=w9.tickText(a.aaxis,t.a,!0).text,n.bLabel=w9.tickText(a.baxis,t.b,!0).text,n.cLabel=w9.tickText(a.caxis,t.c,!0).text,n}});var mxe=ie((Msr,yxe)=>{"use strict";var T9=la(),zxt=_p(),Oxt=K0(),Bxt=bp(),Nxt=wp().calcMarkerSize,pxe=["a","b","c"],gxe={a:["b","c"],b:["a","c"],c:["a","b"]};yxe.exports=function(t,r){var i=t._fullLayout[r.subplot],n=i.sum,a=r.sum||n,o={a:r.a,b:r.b,c:r.c},s,l,u,f,c,h;for(s=0;s<pxe.length;s++)if(u=pxe[s],!o[u]){for(c=o[gxe[u][0]],h=o[gxe[u][1]],f=new Array(c.length),l=0;l<c.length;l++)f[l]=a-c[l]-h[l];o[u]=f}var v=r._length,d=new Array(v),x,b,p,w,A,T;for(s=0;s<v;s++)x=o.a[s],b=o.b[s],p=o.c[s],T9(x)&&T9(b)&&T9(p)?(x=+x,b=+b,p=+p,w=n/(x+b+p),w!==1&&(x*=w,b*=w,p*=w),T=x,A=p-b,d[s]={x:A,y:T,a:x,b,c:p}):d[s]={x:!1,y:!1};return Nxt(r,v),zxt(t,r),Oxt(d,r),Bxt(d,r),d}});var _xe=ie((Ssr,xxe)=>{"use strict";var Uxt=Z2();xxe.exports=function(t,r,i){var n=r.plotContainer;n.select(".scatterlayer").selectAll("*").remove();for(var a=r.xaxis,o=r.yaxis,s={xaxis:a,yaxis:o,plot:n,layerClipId:r._hasClipOnAxisFalse?r.clipIdRelative:null},l=r.layers.frontplot.select("g.scatterlayer"),u=0;u<i.length;u++){var f=i[u];f.length&&(f[0].trace._xA=a,f[0].trace._yA=o)}Uxt(t,s,i,l)}});var wxe=ie((Esr,bxe)=>{"use strict";var Vxt=Q2();bxe.exports=function(t,r,i,n){var a=Vxt(t,r,i,n);if(!a||a[0].index===!1)return;var o=a[0];if(o.index===void 0){var s=1-o.y0/t.ya._length,l=t.xa._length,u=l*s/2,f=l-u;return o.x0=Math.max(Math.min(o.x0,f),u),o.x1=Math.max(Math.min(o.x1,f),u),a}var c=o.cd[o.index],h=o.trace,v=o.subplot;o.a=c.a,o.b=c.b,o.c=c.c,o.xLabelVal=void 0,o.yLabelVal=void 0;var d={};d[h.subplot]={_subplot:v};var x=h._module.formatLabels(c,h,d);o.aLabel=x.aLabel,o.bLabel=x.bLabel,o.cLabel=x.cLabel;var b=c.hi||h.hoverinfo,p=[];function w(T,k){p.push(T._hovertitle+": "+k)}if(!h.hovertemplate){var A=b.split("+");A.indexOf("all")!==-1&&(A=["a","b","c"]),A.indexOf("a")!==-1&&w(v.aaxis,o.aLabel),A.indexOf("b")!==-1&&w(v.baxis,o.bLabel),A.indexOf("c")!==-1&&w(v.caxis,o.cLabel)}return o.extraText=p.join("<br>"),o.hovertemplate=h.hovertemplate,a}});var Axe=ie((ksr,Txe)=>{"use strict";Txe.exports=function(t,r,i,n,a){if(r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),n[a]){var o=n[a];t.a=o.a,t.b=o.b,t.c=o.c}else t.a=r.a,t.b=r.b,t.c=r.c;return t}});var Fxe=ie((Csr,Ixe)=>{"use strict";var Lxe=Mi(),Hxt=Kf(),A9=Ti(),ny=Zt(),ng=ny.strTranslate,NP=ny._,Ew=_i(),UP=oa(),_S=N0(),M9=aa().extendFlat,Gxt=js(),Bm=Wi(),Mxe=Yh(),Sxe=Ol(),Pxe=n0(),Exe=Pxe.freeMode,Yxt=Pxe.rectMode,S9=wx(),Wxt=Ef().prepSelect,Xxt=Ef().selectOnClick,Zxt=Ef().clearOutline,jxt=Ef().clearSelectionsCache,Rxe=Af();function Dxe(e,t){this.id=e.id,this.graphDiv=e.graphDiv,this.init(t),this.makeFramework(t),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}Ixe.exports=Dxe;var iy=Dxe.prototype;iy.init=function(e){this.container=e._ternarylayer,this.defs=e._defs,this.layoutId=e._uid,this.traceHash={},this.layers={}};iy.plot=function(e,t){var r=this,i=t[r.id],n=t._size;r._hasClipOnAxisFalse=!1;for(var a=0;a<e.length;a++){var o=e[a][0].trace;if(o.cliponaxis===!1){r._hasClipOnAxisFalse=!0;break}}r.updateLayers(i),r.adjustLayout(i,n),Gxt.generalUpdatePerTraceModule(r.graphDiv,r,e,i),r.layers.plotbg.select("path").call(Ew.fill,i.bgcolor)};iy.makeFramework=function(e){var t=this,r=t.graphDiv,i=e[t.id],n=t.clipId="clip"+t.layoutId+t.id,a=t.clipIdRelative="clip-relative"+t.layoutId+t.id;t.clipDef=ny.ensureSingleById(e._clips,"clipPath",n,function(o){o.append("path").attr("d","M0,0Z")}),t.clipDefRelative=ny.ensureSingleById(e._clips,"clipPath",a,function(o){o.append("path").attr("d","M0,0Z")}),t.plotContainer=ny.ensureSingle(t.container,"g",t.id),t.updateLayers(i),UP.setClipUrl(t.layers.backplot,n,r),UP.setClipUrl(t.layers.grids,n,r)};iy.updateLayers=function(e){var t=this,r=t.layers,i=["draglayer","plotbg","backplot","grids"];e.aaxis.layer==="below traces"&&i.push("aaxis","aline"),e.baxis.layer==="below traces"&&i.push("baxis","bline"),e.caxis.layer==="below traces"&&i.push("caxis","cline"),i.push("frontplot"),e.aaxis.layer==="above traces"&&i.push("aaxis","aline"),e.baxis.layer==="above traces"&&i.push("baxis","bline"),e.caxis.layer==="above traces"&&i.push("caxis","cline");var n=t.plotContainer.selectAll("g.toplevel").data(i,String),a=["agrid","bgrid","cgrid"];n.enter().append("g").attr("class",function(o){return"toplevel "+o}).each(function(o){var s=Lxe.select(this);r[o]=s,o==="frontplot"?s.append("g").classed("scatterlayer",!0):o==="backplot"?s.append("g").classed("maplayer",!0):o==="plotbg"?s.append("path").attr("d","M0,0Z"):o==="aline"||o==="bline"||o==="cline"?s.append("path"):o==="grids"&&a.forEach(function(l){r[l]=s.append("g").classed("grid "+l,!0)})}),n.order()};var Sw=Math.sqrt(4/3);iy.adjustLayout=function(e,t){var r=this,i=e.domain,n=(i.x[0]+i.x[1])/2,a=(i.y[0]+i.y[1])/2,o=i.x[1]-i.x[0],s=i.y[1]-i.y[0],l=o*t.w,u=s*t.h,f=e.sum,c=e.aaxis.min,h=e.baxis.min,v=e.caxis.min,d,x,b,p,w,A;l>Sw*u?(p=u,b=p*Sw):(b=l,p=b/Sw),w=o*b/l,A=s*p/u,d=t.l+t.w*n-b/2,x=t.t+t.h*(1-a)-p/2,r.x0=d,r.y0=x,r.w=b,r.h=p,r.sum=f,r.xaxis={type:"linear",range:[c+2*v-f,f-c-2*h],domain:[n-w/2,n+w/2],_id:"x"},_S(r.xaxis,r.graphDiv._fullLayout),r.xaxis.setScale(),r.xaxis.isPtWithinRange=function(q){return q.a>=r.aaxis.range[0]&&q.a<=r.aaxis.range[1]&&q.b>=r.baxis.range[1]&&q.b<=r.baxis.range[0]&&q.c>=r.caxis.range[1]&&q.c<=r.caxis.range[0]},r.yaxis={type:"linear",range:[c,f-h-v],domain:[a-A/2,a+A/2],_id:"y"},_S(r.yaxis,r.graphDiv._fullLayout),r.yaxis.setScale(),r.yaxis.isPtWithinRange=function(){return!0};var T=r.yaxis.domain[0],k=r.aaxis=M9({},e.aaxis,{range:[c,f-h-v],side:"left",tickangle:(+e.aaxis.tickangle||0)-30,domain:[T,T+A*Sw],anchor:"free",position:0,_id:"y",_length:b});_S(k,r.graphDiv._fullLayout),k.setScale();var _=r.baxis=M9({},e.baxis,{range:[f-c-v,h],side:"bottom",domain:r.xaxis.domain,anchor:"free",position:0,_id:"x",_length:b});_S(_,r.graphDiv._fullLayout),_.setScale();var E=r.caxis=M9({},e.caxis,{range:[f-c-h,v],side:"right",tickangle:(+e.caxis.tickangle||0)+30,domain:[T,T+A*Sw],anchor:"free",position:0,_id:"y",_length:b});_S(E,r.graphDiv._fullLayout),E.setScale();var S="M"+d+","+(x+p)+"h"+b+"l-"+b/2+",-"+p+"Z";r.clipDef.select("path").attr("d",S),r.layers.plotbg.select("path").attr("d",S);var g="M0,"+p+"h"+b+"l-"+b/2+",-"+p+"Z";r.clipDefRelative.select("path").attr("d",g);var C=ng(d,x);r.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",C),r.clipDefRelative.select("path").attr("transform",null);var M=ng(d-_._offset,x+p);r.layers.baxis.attr("transform",M),r.layers.bgrid.attr("transform",M);var P=ng(d+b/2,x)+"rotate(30)"+ng(0,-k._offset);r.layers.aaxis.attr("transform",P),r.layers.agrid.attr("transform",P);var D=ng(d+b/2,x)+"rotate(-30)"+ng(0,-E._offset);r.layers.caxis.attr("transform",D),r.layers.cgrid.attr("transform",D),r.drawAxes(!0),r.layers.aline.select("path").attr("d",k.showline?"M"+d+","+(x+p)+"l"+b/2+",-"+p:"M0,0").call(Ew.stroke,k.linecolor||"#000").style("stroke-width",(k.linewidth||0)+"px"),r.layers.bline.select("path").attr("d",_.showline?"M"+d+","+(x+p)+"h"+b:"M0,0").call(Ew.stroke,_.linecolor||"#000").style("stroke-width",(_.linewidth||0)+"px"),r.layers.cline.select("path").attr("d",E.showline?"M"+(d+b/2)+","+x+"l"+b/2+","+p:"M0,0").call(Ew.stroke,E.linecolor||"#000").style("stroke-width",(E.linewidth||0)+"px"),r.graphDiv._context.staticPlot||r.initInteractions(),UP.setClipUrl(r.layers.frontplot,r._hasClipOnAxisFalse?null:r.clipId,r.graphDiv)};iy.drawAxes=function(e){var t=this,r=t.graphDiv,i=t.id.substr(7)+"title",n=t.layers,a=t.aaxis,o=t.baxis,s=t.caxis;if(t.drawAx(a),t.drawAx(o),t.drawAx(s),e){var l=Math.max(a.showticklabels?a.tickfont.size/2:0,(s.showticklabels?s.tickfont.size*.75:0)+(s.ticks==="outside"?s.ticklen*.87:0)),u=(o.showticklabels?o.tickfont.size:0)+(o.ticks==="outside"?o.ticklen:0)+3;n["a-title"]=S9.draw(r,"a"+i,{propContainer:a,propName:t.id+".aaxis.title",placeholder:NP(r,"Click to enter Component A title"),attributes:{x:t.x0+t.w/2,y:t.y0-a.title.font.size/3-l,"text-anchor":"middle"}}),n["b-title"]=S9.draw(r,"b"+i,{propContainer:o,propName:t.id+".baxis.title",placeholder:NP(r,"Click to enter Component B title"),attributes:{x:t.x0-u,y:t.y0+t.h+o.title.font.size*.83+u,"text-anchor":"middle"}}),n["c-title"]=S9.draw(r,"c"+i,{propContainer:s,propName:t.id+".caxis.title",placeholder:NP(r,"Click to enter Component C title"),attributes:{x:t.x0+t.w+u,y:t.y0+t.h+s.title.font.size*.83+u,"text-anchor":"middle"}})}};iy.drawAx=function(e){var t=this,r=t.graphDiv,i=e._name,n=i.charAt(0),a=e._id,o=t.layers[i],s=30,l=n+"tickLayout",u=Kxt(e);t[l]!==u&&(o.selectAll("."+a+"tick").remove(),t[l]=u),e.setScale();var f=Bm.calcTicks(e),c=Bm.clipEnds(e,f),h=Bm.makeTransTickFn(e),v=Bm.getTickSigns(e)[2],d=ny.deg2rad(s),x=v*(e.linewidth||1)/2,b=v*e.ticklen,p=t.w,w=t.h,A=n==="b"?"M0,"+x+"l"+Math.sin(d)*b+","+Math.cos(d)*b:"M"+x+",0l"+Math.cos(d)*b+","+-Math.sin(d)*b,T={a:"M0,0l"+w+",-"+p/2,b:"M0,0l-"+p/2+",-"+w,c:"M0,0l-"+w+","+p/2}[n];Bm.drawTicks(r,e,{vals:e.ticks==="inside"?c:f,layer:o,path:A,transFn:h,crisp:!1}),Bm.drawGrid(r,e,{vals:c,layer:t.layers[n+"grid"],path:T,transFn:h,crisp:!1}),Bm.drawLabels(r,e,{vals:f,layer:o,transFn:h,labelFns:Bm.makeLabelFns(e,0,s)})};function Kxt(e){return e.ticks+String(e.ticklen)+String(e.showticklabels)}var ic=Rxe.MINZOOM/2+.87,Jxt="m-0.87,.5h"+ic+"v3h-"+(ic+5.2)+"l"+(ic/2+2.6)+",-"+(ic*.87+4.5)+"l2.6,1.5l-"+ic/2+","+ic*.87+"Z",Qxt="m0.87,.5h-"+ic+"v3h"+(ic+5.2)+"l-"+(ic/2+2.6)+",-"+(ic*.87+4.5)+"l-2.6,1.5l"+ic/2+","+ic*.87+"Z",$xt="m0,1l"+ic/2+","+ic*.87+"l2.6,-1.5l-"+(ic/2+2.6)+",-"+(ic*.87+4.5)+"l-"+(ic/2+2.6)+","+(ic*.87+4.5)+"l2.6,1.5l"+ic/2+",-"+ic*.87+"Z",e_t="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",kxe=!0;iy.clearOutline=function(){jxt(this.dragOptions),Zxt(this.dragOptions.gd)};iy.initInteractions=function(){var e=this,t=e.layers.plotbg.select("path").node(),r=e.graphDiv,i=r._fullLayout._zoomlayer,n,a;this.dragOptions={element:t,gd:r,plotinfo:{id:e.id,domain:r._fullLayout[e.id].domain,xaxis:e.xaxis,yaxis:e.yaxis},subplot:e.id,prepFn:function(M,P,D){e.dragOptions.xaxes=[e.xaxis],e.dragOptions.yaxes=[e.yaxis],n=r._fullLayout._invScaleX,a=r._fullLayout._invScaleY;var q=e.dragOptions.dragmode=r._fullLayout.dragmode;Exe(q)?e.dragOptions.minDrag=1:e.dragOptions.minDrag=void 0,q==="zoom"?(e.dragOptions.moveFn=_,e.dragOptions.clickFn=p,e.dragOptions.doneFn=E,w(M,P,D)):q==="pan"?(e.dragOptions.moveFn=g,e.dragOptions.clickFn=p,e.dragOptions.doneFn=C,S(),e.clearOutline(r)):(Yxt(q)||Exe(q))&&Wxt(M,P,D,e.dragOptions,q)}};var o,s,l,u,f,c,h,v,d,x;function b(M){var P={};return P[e.id+".aaxis.min"]=M.a,P[e.id+".baxis.min"]=M.b,P[e.id+".caxis.min"]=M.c,P}function p(M,P){var D=r._fullLayout.clickmode;Cxe(r),M===2&&(r.emit("plotly_doubleclick",null),A9.call("_guiRelayout",r,b({a:0,b:0,c:0}))),D.indexOf("select")>-1&&M===1&&Xxt(P,r,[e.xaxis],[e.yaxis],e.id,e.dragOptions),D.indexOf("event")>-1&&Sxe.click(r,P,e.id)}function w(M,P,D){var q=t.getBoundingClientRect();o=P-q.left,s=D-q.top,r._fullLayout._calcInverseTransform(r);var O=r._fullLayout._invTransform,U=ny.apply3DTransform(O)(o,s);o=U[0],s=U[1],l={a:e.aaxis.range[0],b:e.baxis.range[1],c:e.caxis.range[1]},f=l,u=e.aaxis.range[1]-l.a,c=Hxt(e.graphDiv._fullLayout[e.id].bgcolor).getLuminance(),h="M0,"+e.h+"L"+e.w/2+", 0L"+e.w+","+e.h+"Z",v=!1,d=i.append("path").attr("class","zoombox").attr("transform",ng(e.x0,e.y0)).style({fill:c>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",h),x=i.append("path").attr("class","zoombox-corners").attr("transform",ng(e.x0,e.y0)).style({fill:Ew.background,stroke:Ew.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),e.clearOutline(r)}function A(M,P){return 1-P/e.h}function T(M,P){return 1-(M+(e.h-P)/Math.sqrt(3))/e.w}function k(M,P){return(M-(e.h-P)/Math.sqrt(3))/e.w}function _(M,P){var D=o+M*n,q=s+P*a,O=Math.max(0,Math.min(1,A(o,s),A(D,q))),U=Math.max(0,Math.min(1,T(o,s),T(D,q))),B=Math.max(0,Math.min(1,k(o,s),k(D,q))),F=(O/2+B)*e.w,N=(1-O/2-U)*e.w,X=(F+N)/2,K=N-F,ne=(1-O)*e.h,fe=ne-K/Sw;K<Rxe.MINZOOM?(f=l,d.attr("d",h),x.attr("d","M0,0Z")):(f={a:l.a+O*u,b:l.b+U*u,c:l.c+B*u},d.attr("d",h+"M"+F+","+ne+"H"+N+"L"+X+","+fe+"L"+F+","+ne+"Z"),x.attr("d","M"+o+","+s+e_t+"M"+F+","+ne+Jxt+"M"+N+","+ne+Qxt+"M"+X+","+fe+$xt)),v||(d.transition().style("fill",c>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),x.transition().style("opacity",1).duration(200),v=!0),r.emit("plotly_relayouting",b(f))}function E(){Cxe(r),f!==l&&(A9.call("_guiRelayout",r,b(f)),kxe&&r.data&&r._context.showTips&&(ny.notifier(NP(r,"Double-click to zoom back out"),"long"),kxe=!1))}function S(){l={a:e.aaxis.range[0],b:e.baxis.range[1],c:e.caxis.range[1]},f=l}function g(M,P){var D=M/e.xaxis._m,q=P/e.yaxis._m;f={a:l.a-q,b:l.b+(D+q)/2,c:l.c-(D-q)/2};var O=[f.a,f.b,f.c].sort(ny.sorterAsc),U={a:O.indexOf(f.a),b:O.indexOf(f.b),c:O.indexOf(f.c)};O[0]<0&&(O[1]+O[0]/2<0?(O[2]+=O[0]+O[1],O[0]=O[1]=0):(O[2]+=O[0]/2,O[1]+=O[0]/2,O[0]=0),f={a:O[U.a],b:O[U.b],c:O[U.c]},P=(l.a-f.a)*e.yaxis._m,M=(l.c-f.c-l.b+f.b)*e.xaxis._m);var B=ng(e.x0+M,e.y0+P);e.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",B);var F=ng(-M,-P);e.clipDefRelative.select("path").attr("transform",F),e.aaxis.range=[f.a,e.sum-f.b-f.c],e.baxis.range=[e.sum-f.a-f.c,f.b],e.caxis.range=[e.sum-f.a-f.b,f.c],e.drawAxes(!1),e._hasClipOnAxisFalse&&e.plotContainer.select(".scatterlayer").selectAll(".trace").call(UP.hideOutsideRangePoints,e),r.emit("plotly_relayouting",b(f))}function C(){A9.call("_guiRelayout",r,b(f))}t.onmousemove=function(M){Sxe.hover(r,M,e.id),r._fullLayout._lasthover=t,r._fullLayout._hoversubplot=e.id},t.onmouseout=function(M){r._dragging||Mxe.unhover(r,M)},Mxe.init(this.dragOptions)};function Cxe(e){Lxe.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}});var C9=ie((Lsr,qxe)=>{"use strict";var t_t=Qu(),r_t=fl().attributes,Zo=gc(),n_t=Zs().overrideAll,E9=aa().extendFlat,k9={title:{text:Zo.title.text,font:Zo.title.font},color:Zo.color,tickmode:Zo.minor.tickmode,nticks:E9({},Zo.nticks,{dflt:6,min:1}),tick0:Zo.tick0,dtick:Zo.dtick,tickvals:Zo.tickvals,ticktext:Zo.ticktext,ticks:Zo.ticks,ticklen:Zo.ticklen,tickwidth:Zo.tickwidth,tickcolor:Zo.tickcolor,ticklabelstep:Zo.ticklabelstep,showticklabels:Zo.showticklabels,labelalias:Zo.labelalias,showtickprefix:Zo.showtickprefix,tickprefix:Zo.tickprefix,showticksuffix:Zo.showticksuffix,ticksuffix:Zo.ticksuffix,showexponent:Zo.showexponent,exponentformat:Zo.exponentformat,minexponent:Zo.minexponent,separatethousands:Zo.separatethousands,tickfont:Zo.tickfont,tickangle:Zo.tickangle,tickformat:Zo.tickformat,tickformatstops:Zo.tickformatstops,hoverformat:Zo.hoverformat,showline:E9({},Zo.showline,{dflt:!0}),linecolor:Zo.linecolor,linewidth:Zo.linewidth,showgrid:E9({},Zo.showgrid,{dflt:!0}),gridcolor:Zo.gridcolor,gridwidth:Zo.gridwidth,griddash:Zo.griddash,layer:Zo.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:Zo._deprecated.title,titlefont:Zo._deprecated.titlefont}},VP=qxe.exports=n_t({domain:r_t({name:"ternary"}),bgcolor:{valType:"color",dflt:t_t.background},sum:{valType:"number",dflt:1,min:0},aaxis:k9,baxis:k9,caxis:k9},"plot","from-root");VP.uirevision={valType:"any",editType:"none"};VP.aaxis.uirevision=VP.baxis.uirevision=VP.caxis.uirevision={valType:"any",editType:"none"}});var r_=ie((Psr,zxe)=>{"use strict";var i_t=Zt(),a_t=ko(),o_t=fl().defaults;zxe.exports=function(t,r,i,n){var a=n.type,o=n.attributes,s=n.handleDefaults,l=n.partition||"x",u=r._subplots[a],f=u.length,c=f&&u[0].replace(/\d+$/,""),h,v;function d(w,A){return i_t.coerce(h,v,o,w,A)}for(var x=0;x<f;x++){var b=u[x];t[b]?h=t[b]:h=t[b]={},v=a_t.newContainer(r,b,c),n.noUirevision||d("uirevision",r.uirevision);var p={};p[l]=[x/f,(x+1)/f],o_t(v,r,d,p),n.id=b,s(h,v,d,n)}}});var Uxe=ie((Rsr,Nxe)=>{"use strict";var s_t=_i(),l_t=ko(),HP=Zt(),u_t=r_(),f_t=fm(),c_t=cm(),h_t=y2(),v_t=yx(),d_t=IM(),Bxe=C9(),Oxe=["aaxis","baxis","caxis"];Nxe.exports=function(t,r,i){u_t(t,r,i,{type:"ternary",attributes:Bxe,handleDefaults:p_t,font:r.font,paper_bgcolor:r.paper_bgcolor})};function p_t(e,t,r,i){var n=r("bgcolor"),a=r("sum");i.bgColor=s_t.combine(n,i.paper_bgcolor);for(var o,s,l,u=0;u<Oxe.length;u++)o=Oxe[u],s=e[o]||{},l=l_t.newContainer(t,o),l._name=o,g_t(s,l,i,t);var f=t.aaxis,c=t.baxis,h=t.caxis;f.min+c.min+h.min>=a&&(f.min=0,c.min=0,h.min=0,e.aaxis&&delete e.aaxis.min,e.baxis&&delete e.baxis.min,e.caxis&&delete e.caxis.min)}function g_t(e,t,r,i){var n=Bxe[t._name];function a(v,d){return HP.coerce(e,t,n,v,d)}a("uirevision",i.uirevision),t.type="linear";var o=a("color"),s=o!==n.color.dflt?o:r.font.color,l=t._name,u=l.charAt(0).toUpperCase(),f="Component "+u,c=a("title.text",f);t._hovertitle=c===f?c:u,HP.coerceFont(a,"title.font",r.font,{overrideDflt:{size:HP.bigFont(r.font.size),color:s}}),a("min"),v_t(e,t,a,"linear"),c_t(e,t,a,"linear"),f_t(e,t,a,"linear",{noAutotickangles:!0}),h_t(e,t,a,{outerTicks:!0});var h=a("showticklabels");h&&(HP.coerceFont(a,"tickfont",r.font,{overrideDflt:{color:s}}),a("tickangle"),a("tickformat")),d_t(e,t,a,{dfltColor:o,bgColor:r.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:n}),a("hoverformat"),a("layer")}});var Vxe=ie(x0=>{"use strict";var y_t=Fxe(),m_t=pc().getSubplotCalcData,x_t=Zt().counterRegex,kw="ternary";x0.name=kw;var __t=x0.attr="subplot";x0.idRoot=kw;x0.idRegex=x0.attrRegex=x_t(kw);var b_t=x0.attributes={};b_t[__t]={valType:"subplotid",dflt:"ternary",editType:"calc"};x0.layoutAttributes=C9();x0.supplyLayoutDefaults=Uxe();x0.plot=function(t){for(var r=t._fullLayout,i=t.calcdata,n=r._subplots[kw],a=0;a<n.length;a++){var o=n[a],s=m_t(i,kw,o),l=r[o]._subplot;l||(l=new y_t({id:o,graphDiv:t,container:r._ternarylayer.node()},r),r[o]._subplot=l),l.plot(s,r,t._promises)}};x0.clean=function(e,t,r,i){for(var n=i._subplots[kw]||[],a=0;a<n.length;a++){var o=n[a],s=i[o]._subplot;!t[o]&&s&&(s.plotContainer.remove(),s.clipDef.remove(),s.clipDefRelative.remove(),s.layers["a-title"].remove(),s.layers["b-title"].remove(),s.layers["c-title"].remove())}}});var Gxe=ie((Isr,Hxe)=>{"use strict";Hxe.exports={attributes:b9(),supplyDefaults:hxe(),colorbar:yh(),formatLabels:dxe(),calc:mxe(),plot:_xe(),style:Sv().style,styleOnSelect:Sv().styleOnSelect,hoverPoints:wxe(),selectPoints:$2(),eventData:Axe(),moduleType:"trace",name:"scatterternary",basePlotModule:Vxe(),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}});var Wxe=ie((Fsr,Yxe)=>{"use strict";Yxe.exports=Gxe()});var L9=ie((qsr,Zxe)=>{"use strict";var Lf=tS(),Cw=aa().extendFlat,Xxe=kl().axisHoverFormat;Zxe.exports={y:Lf.y,x:Lf.x,x0:Lf.x0,y0:Lf.y0,xhoverformat:Xxe("x"),yhoverformat:Xxe("y"),name:Cw({},Lf.name,{}),orientation:Cw({},Lf.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:Lf.fillcolor,points:Cw({},Lf.boxpoints,{}),jitter:Cw({},Lf.jitter,{}),pointpos:Cw({},Lf.pointpos,{}),width:Cw({},Lf.width,{}),marker:Lf.marker,text:Lf.text,hovertext:Lf.hovertext,hovertemplate:Lf.hovertemplate,quartilemethod:Lf.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:Lf.offsetgroup,alignmentgroup:Lf.alignmentgroup,selected:Lf.selected,unselected:Lf.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"},zorder:Lf.zorder}});var D9=ie((zsr,jxe)=>{"use strict";var P9=rS(),R9=Zt().extendFlat;jxe.exports={violinmode:R9({},P9.boxmode,{}),violingap:R9({},P9.boxgap,{}),violingroupgap:R9({},P9.boxgroupgap,{})}});var e_e=ie((Osr,$xe)=>{"use strict";var Kxe=Zt(),w_t=_i(),Jxe=iS(),Qxe=L9();$xe.exports=function(t,r,i,n){function a(k,_){return Kxe.coerce(t,r,Qxe,k,_)}function o(k,_){return Kxe.coerce2(t,r,Qxe,k,_)}if(Jxe.handleSampleDefaults(t,r,a,n),r.visible!==!1){a("bandwidth"),a("side");var s=a("width");s||(a("scalegroup",r.name),a("scalemode"));var l=a("span"),u;Array.isArray(l)&&(u="manual"),a("spanmode",u);var f=a("line.color",(t.marker||{}).color||i),c=a("line.width"),h=a("fillcolor",w_t.addOpacity(r.line.color,.5));Jxe.handlePointsDefaults(t,r,a,{prefix:""});var v=o("box.width"),d=o("box.fillcolor",h),x=o("box.line.color",f),b=o("box.line.width",c),p=a("box.visible",!!(v||d||x||b));p||(r.box={visible:!1});var w=o("meanline.color",f),A=o("meanline.width",c),T=a("meanline.visible",!!(w||A));T||(r.meanline={visible:!1}),a("quartilemethod"),a("zorder")}}});var r_e=ie((Bsr,t_e)=>{"use strict";var T_t=Zt(),A_t=D9(),M_t=iP();t_e.exports=function(t,r,i){function n(a,o){return T_t.coerce(t,r,A_t,a,o)}M_t._supply(t,r,i,n,"violin")}});var GP=ie(n_=>{"use strict";var S_t=Zt(),E_t={gaussian:function(e){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*e*e)}};n_.makeKDE=function(e,t,r){var i=r.length,n=E_t.gaussian,a=e.bandwidth,o=1/(i*a);return function(s){for(var l=0,u=0;u<i;u++)l+=n((s-r[u])/a);return o*l}};n_.getPositionOnKdePath=function(e,t,r){var i,n;t.orientation==="h"?(i="y",n="x"):(i="x",n="y");var a=S_t.findPointOnPath(e.path,r,n,{pathLength:e.pathLength}),o=e.posCenterPx,s=a[i],l=t.side==="both"?2*o-s:o;return[s,l]};n_.getKdeValue=function(e,t,r){var i=e.pts.map(n_.extractVal),n=n_.makeKDE(e,t,i);return n(r)/e.posDensityScale};n_.extractVal=function(e){return e.v}});var a_e=ie((Usr,i_e)=>{"use strict";var I9=Zt(),F9=Wi(),k_t=AN(),n_e=GP(),C_t=eo().BADNUM;i_e.exports=function(t,r){var i=k_t(t,r);if(i[0].t.empty)return i;for(var n=t._fullLayout,a=F9.getFromId(t,r[r.orientation==="h"?"xaxis":"yaxis"]),o=1/0,s=-1/0,l=0,u=0,f=0;f<i.length;f++){var c=i[f],h=c.pts.map(n_e.extractVal),v=c.bandwidth=P_t(r,c,h),d=c.span=R_t(r,c,a,v);if(c.min===c.max&&v===0)d=c.span=[c.min,c.max],c.density=[{v:1,t:d[0]}],c.bandwidth=v,l=Math.max(l,1);else{var x=d[1]-d[0],b=Math.ceil(x/(v/3)),p=x/b;if(!isFinite(p)||!isFinite(b))return I9.error("Something went wrong with computing the violin span"),i[0].t.empty=!0,i;var w=n_e.makeKDE(c,r,h);c.density=new Array(b);for(var A=0,T=d[0];T<d[1]+p/2;A++,T+=p){var k=w(T);c.density[A]={v:k,t:T},l=Math.max(l,k)}}u=Math.max(u,h.length),o=Math.min(o,d[0]),s=Math.max(s,d[1])}var _=F9.findExtremes(a,[o,s],{padded:!0});if(r._extremes[a._id]=_,r.width)i[0].t.maxKDE=l;else{var E=n._violinScaleGroupStats,S=r.scalegroup,g=E[S];g?(g.maxKDE=Math.max(g.maxKDE,l),g.maxCount=Math.max(g.maxCount,u)):E[S]={maxKDE:l,maxCount:u}}return i[0].t.labels.kde=I9._(t,"kde:"),i};function L_t(e,t,r){var i=Math.min(t,r/1.349);return 1.059*i*Math.pow(e,-.2)}function P_t(e,t,r){var i=t.max-t.min;if(!i)return e.bandwidth?e.bandwidth:0;if(e.bandwidth)return Math.max(e.bandwidth,i/1e4);var n=r.length,a=I9.stdev(r,n-1,t.mean);return Math.max(L_t(n,a,t.q3-t.q1),i/100)}function R_t(e,t,r,i){var n=e.spanmode,a=e.span||[],o=[t.min,t.max],s=[t.min-2*i,t.max+2*i],l;function u(c){var h=a[c],v=r.type==="multicategory"?r.r2c(h):r.d2c(h,0,e[t.valLetter+"calendar"]);return v===C_t?s[c]:v}n==="soft"?l=s:n==="hard"?l=o:l=[u(0),u(1)];var f={type:"linear",range:l};return F9.setConvert(f),f.cleanRange(),l}});var l_e=ie((Vsr,s_e)=>{"use strict";var D_t=oP().setPositionOffset,o_e=["v","h"];s_e.exports=function(t,r){for(var i=t.calcdata,n=r.xaxis,a=r.yaxis,o=0;o<o_e.length;o++){for(var s=o_e[o],l=s==="h"?a:n,u=[],f=0;f<i.length;f++){var c=i[f],h=c[0].t,v=c[0].trace;v.visible===!0&&v.type==="violin"&&!h.empty&&v.orientation===s&&v.xaxis===n._id&&v.yaxis===a._id&&u.push(f)}D_t("violin",t,u,l)}}});var f_e=ie((Hsr,u_e)=>{"use strict";var q9=Mi(),z9=Zt(),I_t=oa(),O9=sP(),F_t=lB(),q_t=GP();u_e.exports=function(t,r,i,n){var a=t._context.staticPlot,o=t._fullLayout,s=r.xaxis,l=r.yaxis;function u(f,c){var h=F_t(f,{xaxis:s,yaxis:l,trace:c,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return I_t.smoothopen(h[0],1)}z9.makeTraceGroups(n,i,"trace violins").each(function(f){var c=q9.select(this),h=f[0],v=h.t,d=h.trace;if(d.visible!==!0||v.empty){c.remove();return}var x=v.bPos,b=v.bdPos,p=r[v.valLetter+"axis"],w=r[v.posLetter+"axis"],A=d.side==="both",T=A||d.side==="positive",k=A||d.side==="negative",_=c.selectAll("path.violin").data(z9.identity);_.enter().append("path").style("vector-effect",a?"none":"non-scaling-stroke").attr("class","violin"),_.exit().remove(),_.each(function(q){var O=q9.select(this),U=q.density,B=U.length,F=w.c2l(q.pos+x,!0),N=w.l2p(F),X;if(d.width)X=v.maxKDE/b;else{var K=o._violinScaleGroupStats[d.scalegroup];X=d.scalemode==="count"?K.maxKDE/b*(K.maxCount/q.pts.length):K.maxKDE/b}var ne,fe,ue,ee,Z,oe,ce;if(T){for(oe=new Array(B),ee=0;ee<B;ee++)ce=oe[ee]={},ce[v.posLetter]=F+U[ee].v/X,ce[v.valLetter]=p.c2l(U[ee].t,!0);ne=u(oe,d)}if(k){for(oe=new Array(B),Z=0,ee=B-1;Z<B;Z++,ee--)ce=oe[Z]={},ce[v.posLetter]=F-U[ee].v/X,ce[v.valLetter]=p.c2l(U[ee].t,!0);fe=u(oe,d)}if(A)ue=ne+"L"+fe.substr(1)+"Z";else{var le=[N,p.c2p(U[0].t)],me=[N,p.c2p(U[B-1].t)];d.orientation==="h"&&(le.reverse(),me.reverse()),T?ue="M"+le+"L"+ne.substr(1)+"L"+me:ue="M"+me+"L"+fe.substr(1)+"L"+le}O.attr("d",ue),q.posCenterPx=N,q.posDensityScale=X*b,q.path=O.node(),q.pathLength=q.path.getTotalLength()/(A?2:1)});var E=d.box,S=E.width,g=(E.line||{}).width,C,M;A?(C=b*S,M=0):T?(C=[0,b*S/2],M=g*{x:1,y:-1}[v.posLetter]):(C=[b*S/2,0],M=g*{x:-1,y:1}[v.posLetter]),O9.plotBoxAndWhiskers(c,{pos:w,val:p},d,{bPos:x,bdPos:C,bPosPxOffset:M}),O9.plotBoxMean(c,{pos:w,val:p},d,{bPos:x,bdPos:C,bPosPxOffset:M});var P;!d.box.visible&&d.meanline.visible&&(P=z9.identity);var D=c.selectAll("path.meanline").data(P||[]);D.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",a?"none":"non-scaling-stroke"),D.exit().remove(),D.each(function(q){var O=p.c2p(q.mean,!0),U=q_t.getPositionOnKdePath(q,d,O);q9.select(this).attr("d",d.orientation==="h"?"M"+O+","+U[0]+"V"+U[1]:"M"+U[0]+","+O+"H"+U[1])}),O9.plotPoints(c,{x:s,y:l},d,v)})}});var v_e=ie((Gsr,h_e)=>{"use strict";var c_e=Mi(),Lw=_i(),z_t=Sv().stylePoints;h_e.exports=function(t){var r=c_e.select(t).selectAll("g.trace.violins");r.style("opacity",function(i){return i[0].trace.opacity}),r.each(function(i){var n=i[0].trace,a=c_e.select(this),o=n.box||{},s=o.line||{},l=n.meanline||{},u=l.width;a.selectAll("path.violin").style("stroke-width",n.line.width+"px").call(Lw.stroke,n.line.color).call(Lw.fill,n.fillcolor),a.selectAll("path.box").style("stroke-width",s.width+"px").call(Lw.stroke,s.color).call(Lw.fill,o.fillcolor);var f={"stroke-width":u+"px","stroke-dasharray":2*u+"px,"+u+"px"};a.selectAll("path.mean").style(f).call(Lw.stroke,l.color),a.selectAll("path.meanline").style(f).call(Lw.stroke,l.color),z_t(a,n,t)})}});var y_e=ie((Ysr,g_e)=>{"use strict";var O_t=_i(),B9=Zt(),B_t=Wi(),d_e=CN(),p_e=GP();g_e.exports=function(t,r,i,n,a){a||(a={});var o=a.hoverLayer,s=t.cd,l=s[0].trace,u=l.hoveron,f=u.indexOf("violins")!==-1,c=u.indexOf("kde")!==-1,h=[],v,d;if(f||c){var x=d_e.hoverOnBoxes(t,r,i,n);if(c&&x.length>0){var b=t.xa,p=t.ya,w,A,T,k,_;l.orientation==="h"?(_=r,w="y",T=p,A="x",k=b):(_=i,w="x",T=b,A="y",k=p);var E=s[t.index];if(_>=E.span[0]&&_<=E.span[1]){var S=B9.extendFlat({},t),g=k.c2p(_,!0),C=p_e.getKdeValue(E,l,_),M=p_e.getPositionOnKdePath(E,l,g),P=T._offset,D=T._length;S[w+"0"]=M[0],S[w+"1"]=M[1],S[A+"0"]=S[A+"1"]=g,S[A+"Label"]=A+": "+B_t.hoverLabelText(k,_,l[A+"hoverformat"])+", "+s[0].t.labels.kde+" "+C.toFixed(3);for(var q=0,O=0;O<x.length;O++)if(x[O].attr==="med"){q=O;break}S.spikeDistance=x[q].spikeDistance;var U=w+"Spike";S[U]=x[q][U],x[q].spikeDistance=void 0,x[q][U]=void 0,S.hovertemplate=!1,h.push(S),d={},d[w+"1"]=B9.constrain(P+M[0],P,P+D),d[w+"2"]=B9.constrain(P+M[1],P,P+D),d[A+"1"]=d[A+"2"]=k._offset+g}}f&&(h=h.concat(x))}u.indexOf("points")!==-1&&(v=d_e.hoverOnPoints(t,r,i));var B=o.selectAll(".violinline-"+l.uid).data(d?[0]:[]);return B.enter().append("line").classed("violinline-"+l.uid,!0).attr("stroke-width",1.5),B.exit().remove(),B.attr(d).call(O_t.stroke,t.color),n==="closest"?v?[v]:h:(v&&h.push(v),h)}});var x_e=ie((Wsr,m_e)=>{"use strict";m_e.exports={attributes:L9(),layoutAttributes:D9(),supplyDefaults:e_e(),crossTraceDefaults:iS().crossTraceDefaults,supplyLayoutDefaults:r_e(),calc:a_e(),crossTraceCalc:l_e(),plot:f_e(),style:v_e(),styleOnSelect:Sv().styleOnSelect,hoverPoints:y_e(),selectPoints:LN(),moduleType:"trace",name:"violin",basePlotModule:yu(),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}});var b_e=ie((Xsr,__e)=>{"use strict";__e.exports=x_e()});var T_e=ie((Zsr,w_e)=>{"use strict";w_e.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}});var U9=ie((jsr,S_e)=>{"use strict";var cl=$0(),N9=Bl().line,N_t=rs(),A_e=kl().axisHoverFormat,U_t=Ba().hovertemplateAttrs,V_t=Ba().texttemplateAttrs,M_e=T_e(),ay=aa().extendFlat,H_t=_i();S_e.exports={x:cl.x,x0:cl.x0,dx:cl.dx,y:cl.y,y0:cl.y0,dy:cl.dy,xperiod:cl.xperiod,yperiod:cl.yperiod,xperiod0:cl.xperiod0,yperiod0:cl.yperiod0,xperiodalignment:cl.xperiodalignment,yperiodalignment:cl.yperiodalignment,xhoverformat:A_e("x"),yhoverformat:A_e("y"),hovertext:cl.hovertext,hovertemplate:U_t({},{keys:M_e.eventDataKeys}),hoverinfo:ay({},N_t.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:V_t({editType:"plot"},{keys:M_e.eventDataKeys.concat(["label","value"])}),text:cl.text,textposition:cl.textposition,insidetextanchor:ay({},cl.insidetextanchor,{dflt:"middle"}),textangle:ay({},cl.textangle,{dflt:0}),textfont:cl.textfont,insidetextfont:cl.insidetextfont,outsidetextfont:cl.outsidetextfont,constraintext:cl.constraintext,cliponaxis:cl.cliponaxis,orientation:ay({},cl.orientation,{}),offset:ay({},cl.offset,{arrayOk:!1}),width:ay({},cl.width,{arrayOk:!1}),marker:G_t(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:ay({},N9.color,{dflt:H_t.defaultLine}),width:ay({},N9.width,{dflt:0,editType:"plot"}),dash:N9.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:cl.offsetgroup,alignmentgroup:cl.alignmentgroup,zorder:cl.zorder};function G_t(){var e=ay({},cl.marker);return delete e.pattern,delete e.cornerradius,e}});var V9=ie((Ksr,E_e)=>{"use strict";E_e.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}});var G9=ie((Jsr,C_e)=>{"use strict";var YP=Zt(),Y_t=Bx(),W_t=zd().handleText,X_t=U2(),Z_t=s0(),k_e=U9(),H9=_i();function j_t(e,t,r,i){function n(c,h){return YP.coerce(e,t,k_e,c,h)}var a=X_t(e,t,i,n);if(!a){t.visible=!1;return}Z_t(e,t,i,n),n("xhoverformat"),n("yhoverformat"),n("orientation",t.y&&!t.x?"v":"h"),n("offset"),n("width");var o=n("text");n("hovertext"),n("hovertemplate");var s=n("textposition");W_t(e,t,i,n,s,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),t.textposition!=="none"&&!t.texttemplate&&n("textinfo",YP.isArrayOrTypedArray(o)?"text+value":"value");var l=n("marker.color",r);n("marker.line.color",H9.defaultLine),n("marker.line.width");var u=n("connector.visible");if(u){n("connector.fillcolor",K_t(l));var f=n("connector.line.width");f&&(n("connector.line.color"),n("connector.line.dash"))}n("zorder")}function K_t(e){var t=YP.isArrayOrTypedArray(e)?"#000":e;return H9.addOpacity(t,.5*H9.opacity(t))}function J_t(e,t){var r,i;function n(o){return YP.coerce(i._input,i,k_e,o)}if(t.funnelmode==="group")for(var a=0;a<e.length;a++)i=e[a],r=i._input,Y_t(r,i,t,n)}C_e.exports={supplyDefaults:j_t,crossTraceDefaults:J_t}});var P_e=ie((Qsr,L_e)=>{"use strict";var Q_t=Zt(),$_t=V9();L_e.exports=function(e,t,r){var i=!1;function n(s,l){return Q_t.coerce(e,t,$_t,s,l)}for(var a=0;a<r.length;a++){var o=r[a];if(o.visible&&o.type==="funnel"){i=!0;break}}i&&(n("funnelmode"),n("funnelgap",.2),n("funnelgroupgap"))}});var D_e=ie(($sr,R_e)=>{"use strict";var Pw=Zt();R_e.exports=function(t,r){for(var i=0;i<t.length;i++)t[i].i=i;Pw.mergeArray(r.text,t,"tx"),Pw.mergeArray(r.hovertext,t,"htx");var n=r.marker;if(n){Pw.mergeArray(n.opacity,t,"mo"),Pw.mergeArray(n.color,t,"mc");var a=n.line;a&&(Pw.mergeArray(a.color,t,"mlc"),Pw.mergeArrayCastPositive(a.width,t,"mlw"))}}});var z_e=ie((elr,q_e)=>{"use strict";var I_e=Wi(),F_e=f0(),ebt=D_e(),tbt=bp(),bS=eo().BADNUM;q_e.exports=function(t,r){var i=I_e.getFromId(t,r.xaxis||"x"),n=I_e.getFromId(t,r.yaxis||"y"),a,o,s,l,u,f,c,h;r.orientation==="h"?(a=i.makeCalcdata(r,"x"),s=n.makeCalcdata(r,"y"),l=F_e(r,n,"y",s),u=!!r.yperiodalignment,f="y"):(a=n.makeCalcdata(r,"y"),s=i.makeCalcdata(r,"x"),l=F_e(r,i,"x",s),u=!!r.xperiodalignment,f="x"),o=l.vals;var v=Math.min(o.length,a.length),d=new Array(v);for(r._base=[],c=0;c<v;c++){a[c]<0&&(a[c]=bS);var x=!1;a[c]!==bS&&c+1<v&&a[c+1]!==bS&&(x=!0),h=d[c]={p:o[c],s:a[c],cNext:x},r._base[c]=-.5*h.s,u&&(d[c].orig_p=s[c],d[c][f+"End"]=l.ends[c],d[c][f+"Start"]=l.starts[c]),r.ids&&(h.id=String(r.ids[c])),c===0&&(d[0].vTotal=0),d[0].vTotal+=Y9(h.s),h.begR=Y9(h.s)/Y9(d[0].s)}var b;for(c=0;c<v;c++)h=d[c],h.s!==bS&&(h.sumR=h.s/d[0].vTotal,h.difR=b!==void 0?h.s/b:1,b=h.s);return ebt(d,r),tbt(d,r),d};function Y9(e){return e===bS?0:e}});var N_e=ie((tlr,B_e)=>{"use strict";var O_e=Nx().setGroupPositions;B_e.exports=function(t,r){var i=t._fullLayout,n=t._fullData,a=t.calcdata,o=r.xaxis,s=r.yaxis,l=[],u=[],f=[],c,h;for(h=0;h<n.length;h++){var v=n[h],d=v.orientation==="h";v.visible===!0&&v.xaxis===o._id&&v.yaxis===s._id&&v.type==="funnel"&&(c=a[h],d?f.push(c):u.push(c),l.push(c))}var x={mode:i.funnelmode,norm:i.funnelnorm,gap:i.funnelgap,groupgap:i.funnelgroupgap};for(O_e(t,o,s,u,x),O_e(t,s,o,f,x),h=0;h<l.length;h++){c=l[h];for(var b=0;b<c.length;b++)b+1<c.length&&(c[b].nextP0=c[b+1].p0,c[b].nextS0=c[b+1].s0,c[b].nextP1=c[b+1].p1,c[b].nextS1=c[b+1].s1)}}});var G_e=ie((rlr,H_e)=>{"use strict";var WP=Mi(),Um=Zt(),U_e=oa(),Nm=eo().BADNUM,rbt=Jx(),nbt=xh().clearMinTextSize;H_e.exports=function(t,r,i,n){var a=t._fullLayout;nbt("funnel",a),ibt(t,r,i,n),abt(t,r,i,n),rbt.plot(t,r,i,n,{mode:a.funnelmode,norm:a.funnelmode,gap:a.funnelgap,groupgap:a.funnelgroupgap})};function ibt(e,t,r,i){var n=t.xaxis,a=t.yaxis;Um.makeTraceGroups(i,r,"trace bars").each(function(o){var s=WP.select(this),l=o[0].trace,u=Um.ensureSingle(s,"g","regions");if(!l.connector||!l.connector.visible){u.remove();return}var f=l.orientation==="h",c=u.selectAll("g.region").data(Um.identity);c.enter().append("g").classed("region",!0),c.exit().remove();var h=c.size();c.each(function(v,d){if(!(d!==h-1&&!v.cNext)){var x=V_e(v,n,a,f),b=x[0],p=x[1],w="";b[0]!==Nm&&p[0]!==Nm&&b[1]!==Nm&&p[1]!==Nm&&b[2]!==Nm&&p[2]!==Nm&&b[3]!==Nm&&p[3]!==Nm&&(f?w+="M"+b[0]+","+p[1]+"L"+b[2]+","+p[2]+"H"+b[3]+"L"+b[1]+","+p[1]+"Z":w+="M"+b[1]+","+p[1]+"L"+b[2]+","+p[3]+"V"+p[2]+"L"+b[1]+","+p[0]+"Z"),w===""&&(w="M0,0Z"),Um.ensureSingle(WP.select(this),"path").attr("d",w).call(U_e.setClipUrl,t.layerClipId,e)}})})}function abt(e,t,r,i){var n=t.xaxis,a=t.yaxis;Um.makeTraceGroups(i,r,"trace bars").each(function(o){var s=WP.select(this),l=o[0].trace,u=Um.ensureSingle(s,"g","lines");if(!l.connector||!l.connector.visible||!l.connector.line.width){u.remove();return}var f=l.orientation==="h",c=u.selectAll("g.line").data(Um.identity);c.enter().append("g").classed("line",!0),c.exit().remove();var h=c.size();c.each(function(v,d){if(!(d!==h-1&&!v.cNext)){var x=V_e(v,n,a,f),b=x[0],p=x[1],w="";b[3]!==void 0&&p[3]!==void 0&&(f?(w+="M"+b[0]+","+p[1]+"L"+b[2]+","+p[2],w+="M"+b[1]+","+p[1]+"L"+b[3]+","+p[2]):(w+="M"+b[1]+","+p[1]+"L"+b[2]+","+p[3],w+="M"+b[1]+","+p[0]+"L"+b[2]+","+p[2])),w===""&&(w="M0,0Z"),Um.ensureSingle(WP.select(this),"path").attr("d",w).call(U_e.setClipUrl,t.layerClipId,e)}})})}function V_e(e,t,r,i){var n=[],a=[],o=i?t:r,s=i?r:t;return n[0]=o.c2p(e.s0,!0),a[0]=s.c2p(e.p0,!0),n[1]=o.c2p(e.s1,!0),a[1]=s.c2p(e.p1,!0),n[2]=o.c2p(e.nextS0,!0),a[2]=s.c2p(e.nextP0,!0),n[3]=o.c2p(e.nextS1,!0),a[3]=s.c2p(e.nextP1,!0),i?[n,a]:[a,n]}});var X_e=ie((nlr,W_e)=>{"use strict";var wS=Mi(),Y_e=oa(),W9=_i(),obt=jy().DESELECTDIM,sbt=Mp(),lbt=xh().resizeText,ubt=sbt.styleTextPoints;function fbt(e,t,r){var i=r||wS.select(e).selectAll('g[class^="funnellayer"]').selectAll("g.trace");lbt(e,i,"funnel"),i.style("opacity",function(n){return n[0].trace.opacity}),i.each(function(n){var a=wS.select(this),o=n[0].trace;a.selectAll(".point > path").each(function(s){if(!s.isBlank){var l=o.marker;wS.select(this).call(W9.fill,s.mc||l.color).call(W9.stroke,s.mlc||l.line.color).call(Y_e.dashLine,l.line.dash,s.mlw||l.line.width).style("opacity",o.selectedpoints&&!s.selected?obt:1)}}),ubt(a,o,e),a.selectAll(".regions").each(function(){wS.select(this).selectAll("path").style("stroke-width",0).call(W9.fill,o.connector.fillcolor)}),a.selectAll(".lines").each(function(){var s=o.connector.line;Y_e.lineGroupStyle(wS.select(this).selectAll("path"),s.width,s.color,s.dash)})})}W_e.exports={style:fbt}});var K_e=ie((ilr,j_e)=>{"use strict";var Z_e=_i().opacity,cbt=dw().hoverOnBars,X9=Zt().formatPercent;j_e.exports=function(t,r,i,n,a){var o=cbt(t,r,i,n,a);if(o){var s=o.cd,l=s[0].trace,u=l.orientation==="h",f=o.index,c=s[f],h=u?"x":"y";o[h+"LabelVal"]=c.s,o.percentInitial=c.begR,o.percentInitialLabel=X9(c.begR,1),o.percentPrevious=c.difR,o.percentPreviousLabel=X9(c.difR,1),o.percentTotal=c.sumR,o.percentTotalLabel=X9(c.sumR,1);var v=c.hi||l.hoverinfo,d=[];if(v&&v!=="none"&&v!=="skip"){var x=v==="all",b=v.split("+"),p=function(w){return x||b.indexOf(w)!==-1};p("percent initial")&&d.push(o.percentInitialLabel+" of initial"),p("percent previous")&&d.push(o.percentPreviousLabel+" of previous"),p("percent total")&&d.push(o.percentTotalLabel+" of total")}return o.extraText=d.join("<br>"),o.color=hbt(l,c),[o]}};function hbt(e,t){var r=e.marker,i=t.mc||r.color,n=t.mlc||r.line.color,a=t.mlw||r.line.width;if(Z_e(i))return i;if(Z_e(n)&&a)return n}});var Q_e=ie((alr,J_e)=>{"use strict";J_e.exports=function(t,r){return t.x="xVal"in r?r.xVal:r.x,t.y="yVal"in r?r.yVal:r.y,"percentInitial"in r&&(t.percentInitial=r.percentInitial),"percentPrevious"in r&&(t.percentPrevious=r.percentPrevious),"percentTotal"in r&&(t.percentTotal=r.percentTotal),r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),t}});var ebe=ie((olr,$_e)=>{"use strict";$_e.exports={attributes:U9(),layoutAttributes:V9(),supplyDefaults:G9().supplyDefaults,crossTraceDefaults:G9().crossTraceDefaults,supplyLayoutDefaults:P_e(),calc:z_e(),crossTraceCalc:N_e(),plot:G_e(),style:X_e().style,hoverPoints:K_e(),eventData:Q_e(),selectPoints:pw(),moduleType:"trace",name:"funnel",basePlotModule:yu(),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}});var rbe=ie((slr,tbe)=>{"use strict";tbe.exports=ebe()});var ibe=ie((llr,nbe)=>{"use strict";nbe.exports={eventDataKeys:["initial","delta","final"]}});var K9=ie((ulr,sbe)=>{"use strict";var $s=$0(),Z9=Bl().line,vbt=rs(),abe=kl().axisHoverFormat,dbt=Ba().hovertemplateAttrs,pbt=Ba().texttemplateAttrs,obe=ibe(),Rw=aa().extendFlat,gbt=_i();function j9(e){return{marker:{color:Rw({},$s.marker.color,{arrayOk:!1,editType:"style"}),line:{color:Rw({},$s.marker.line.color,{arrayOk:!1,editType:"style"}),width:Rw({},$s.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}sbe.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:$s.x,x0:$s.x0,dx:$s.dx,y:$s.y,y0:$s.y0,dy:$s.dy,xperiod:$s.xperiod,yperiod:$s.yperiod,xperiod0:$s.xperiod0,yperiod0:$s.yperiod0,xperiodalignment:$s.xperiodalignment,yperiodalignment:$s.yperiodalignment,xhoverformat:abe("x"),yhoverformat:abe("y"),hovertext:$s.hovertext,hovertemplate:dbt({},{keys:obe.eventDataKeys}),hoverinfo:Rw({},vbt.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:pbt({editType:"plot"},{keys:obe.eventDataKeys.concat(["label"])}),text:$s.text,textposition:$s.textposition,insidetextanchor:$s.insidetextanchor,textangle:$s.textangle,textfont:$s.textfont,insidetextfont:$s.insidetextfont,outsidetextfont:$s.outsidetextfont,constraintext:$s.constraintext,cliponaxis:$s.cliponaxis,orientation:$s.orientation,offset:$s.offset,width:$s.width,increasing:j9("increasing"),decreasing:j9("decreasing"),totals:j9("intermediate sums and total"),connector:{line:{color:Rw({},Z9.color,{dflt:gbt.defaultLine}),width:Rw({},Z9.width,{editType:"plot"}),dash:Z9.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:$s.offsetgroup,alignmentgroup:$s.alignmentgroup,zorder:$s.zorder}});var J9=ie((flr,lbe)=>{"use strict";lbe.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}});var Dw=ie((clr,ube)=>{"use strict";ube.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}});var $9=ie((hlr,vbe)=>{"use strict";var fbe=Zt(),ybt=Bx(),mbt=zd().handleText,xbt=U2(),_bt=s0(),cbe=K9(),bbt=_i(),hbe=Dw(),wbt=hbe.INCREASING.COLOR,Tbt=hbe.DECREASING.COLOR,Abt="#4499FF";function Q9(e,t,r){e(t+".marker.color",r),e(t+".marker.line.color",bbt.defaultLine),e(t+".marker.line.width")}function Mbt(e,t,r,i){function n(u,f){return fbe.coerce(e,t,cbe,u,f)}var a=xbt(e,t,i,n);if(!a){t.visible=!1;return}_bt(e,t,i,n),n("xhoverformat"),n("yhoverformat"),n("measure"),n("orientation",t.x&&!t.y?"h":"v"),n("base"),n("offset"),n("width"),n("text"),n("hovertext"),n("hovertemplate");var o=n("textposition");mbt(e,t,i,n,o,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),t.textposition!=="none"&&(n("texttemplate"),t.texttemplate||n("textinfo")),Q9(n,"increasing",wbt),Q9(n,"decreasing",Tbt),Q9(n,"totals",Abt);var s=n("connector.visible");if(s){n("connector.mode");var l=n("connector.line.width");l&&(n("connector.line.color"),n("connector.line.dash"))}n("zorder")}function Sbt(e,t){var r,i;function n(o){return fbe.coerce(i._input,i,cbe,o)}if(t.waterfallmode==="group")for(var a=0;a<e.length;a++)i=e[a],r=i._input,ybt(r,i,t,n)}vbe.exports={supplyDefaults:Mbt,crossTraceDefaults:Sbt}});var pbe=ie((vlr,dbe)=>{"use strict";var Ebt=Zt(),kbt=J9();dbe.exports=function(e,t,r){var i=!1;function n(s,l){return Ebt.coerce(e,t,kbt,s,l)}for(var a=0;a<r.length;a++){var o=r[a];if(o.visible&&o.type==="waterfall"){i=!0;break}}i&&(n("waterfallmode"),n("waterfallgap",.2),n("waterfallgroupgap"))}});var bbe=ie((dlr,_be)=>{"use strict";var gbe=Wi(),ybe=f0(),mbe=Zt().mergeArray,Cbt=bp(),xbe=eo().BADNUM;function eU(e){return e==="a"||e==="absolute"}function tU(e){return e==="t"||e==="total"}_be.exports=function(t,r){var i=gbe.getFromId(t,r.xaxis||"x"),n=gbe.getFromId(t,r.yaxis||"y"),a,o,s,l,u,f;r.orientation==="h"?(a=i.makeCalcdata(r,"x"),s=n.makeCalcdata(r,"y"),l=ybe(r,n,"y",s),u=!!r.yperiodalignment,f="y"):(a=n.makeCalcdata(r,"y"),s=i.makeCalcdata(r,"x"),l=ybe(r,i,"x",s),u=!!r.xperiodalignment,f="x"),o=l.vals;for(var c=Math.min(o.length,a.length),h=new Array(c),v=0,d,x=!1,b=0;b<c;b++){var p=a[b]||0,w=!1;(a[b]!==xbe||tU(r.measure[b])||eU(r.measure[b]))&&b+1<c&&(a[b+1]!==xbe||tU(r.measure[b+1])||eU(r.measure[b+1]))&&(w=!0);var A=h[b]={i:b,p:o[b],s:p,rawS:p,cNext:w};eU(r.measure[b])?(v=A.s,A.isSum=!0,A.dir="totals",A.s=v):tU(r.measure[b])?(A.isSum=!0,A.dir="totals",A.s=v):(A.isSum=!1,A.dir=A.rawS<0?"decreasing":"increasing",d=A.s,A.s=v+d,v+=d),A.dir==="totals"&&(x=!0),u&&(h[b].orig_p=s[b],h[b][f+"End"]=l.ends[b],h[b][f+"Start"]=l.starts[b]),r.ids&&(A.id=String(r.ids[b])),A.v=(r.base||0)+v}return h.length&&(h[0].hasTotals=x),mbe(r.text,h,"tx"),mbe(r.hovertext,h,"htx"),Cbt(h,r),h}});var Abe=ie((plr,Tbe)=>{"use strict";var wbe=Nx().setGroupPositions;Tbe.exports=function(t,r){var i=t._fullLayout,n=t._fullData,a=t.calcdata,o=r.xaxis,s=r.yaxis,l=[],u=[],f=[],c,h;for(h=0;h<n.length;h++){var v=n[h];v.visible===!0&&v.xaxis===o._id&&v.yaxis===s._id&&v.type==="waterfall"&&(c=a[h],v.orientation==="h"?f.push(c):u.push(c),l.push(c))}var d={mode:i.waterfallmode,norm:i.waterfallnorm,gap:i.waterfallgap,groupgap:i.waterfallgroupgap};for(wbe(t,o,s,u,d),wbe(t,s,o,f,d),h=0;h<l.length;h++){c=l[h];for(var x=0;x<c.length;x++){var b=c[x];b.isSum===!1&&(b.s0+=x===0?0:c[x-1].s),x+1<c.length&&(c[x].nextP0=c[x+1].p0,c[x].nextS0=c[x+1].s0)}}}});var Ebe=ie((glr,Sbe)=>{"use strict";var Mbe=Mi(),XP=Zt(),Lbt=oa(),Iw=eo().BADNUM,Pbt=Jx(),Rbt=xh().clearMinTextSize;Sbe.exports=function(t,r,i,n){var a=t._fullLayout;Rbt("waterfall",a),Pbt.plot(t,r,i,n,{mode:a.waterfallmode,norm:a.waterfallmode,gap:a.waterfallgap,groupgap:a.waterfallgroupgap}),Dbt(t,r,i,n)};function Dbt(e,t,r,i){var n=t.xaxis,a=t.yaxis;XP.makeTraceGroups(i,r,"trace bars").each(function(o){var s=Mbe.select(this),l=o[0].trace,u=XP.ensureSingle(s,"g","lines");if(!l.connector||!l.connector.visible){u.remove();return}var f=l.orientation==="h",c=l.connector.mode,h=u.selectAll("g.line").data(XP.identity);h.enter().append("g").classed("line",!0),h.exit().remove();var v=h.size();h.each(function(d,x){if(!(x!==v-1&&!d.cNext)){var b=Ibt(d,n,a,f),p=b[0],w=b[1],A="";p[0]!==Iw&&w[0]!==Iw&&p[1]!==Iw&&w[1]!==Iw&&(c==="spanning"&&!d.isSum&&x>0&&(f?A+="M"+p[0]+","+w[1]+"V"+w[0]:A+="M"+p[1]+","+w[0]+"H"+p[0]),c!=="between"&&(d.isSum||x<v-1)&&(f?A+="M"+p[1]+","+w[0]+"V"+w[1]:A+="M"+p[0]+","+w[1]+"H"+p[1]),p[2]!==Iw&&w[2]!==Iw&&(f?A+="M"+p[1]+","+w[1]+"V"+w[2]:A+="M"+p[1]+","+w[1]+"H"+p[2])),A===""&&(A="M0,0Z"),XP.ensureSingle(Mbe.select(this),"path").attr("d",A).call(Lbt.setClipUrl,t.layerClipId,e)}})})}function Ibt(e,t,r,i){var n=[],a=[],o=i?t:r,s=i?r:t;return n[0]=o.c2p(e.s0,!0),a[0]=s.c2p(e.p0,!0),n[1]=o.c2p(e.s1,!0),a[1]=s.c2p(e.p1,!0),n[2]=o.c2p(e.nextS0,!0),a[2]=s.c2p(e.nextP0,!0),i?[n,a]:[a,n]}});var Pbe=ie((ylr,Lbe)=>{"use strict";var ZP=Mi(),kbe=oa(),Cbe=_i(),Fbt=jy().DESELECTDIM,qbt=Mp(),zbt=xh().resizeText,Obt=qbt.styleTextPoints;function Bbt(e,t,r){var i=r||ZP.select(e).selectAll('g[class^="waterfalllayer"]').selectAll("g.trace");zbt(e,i,"waterfall"),i.style("opacity",function(n){return n[0].trace.opacity}),i.each(function(n){var a=ZP.select(this),o=n[0].trace;a.selectAll(".point > path").each(function(s){if(!s.isBlank){var l=o[s.dir].marker;ZP.select(this).call(Cbe.fill,l.color).call(Cbe.stroke,l.line.color).call(kbe.dashLine,l.line.dash,l.line.width).style("opacity",o.selectedpoints&&!s.selected?Fbt:1)}}),Obt(a,o,e),a.selectAll(".lines").each(function(){var s=o.connector.line;kbe.lineGroupStyle(ZP.select(this).selectAll("path"),s.width,s.color,s.dash)})})}Lbe.exports={style:Bbt}});var qbe=ie((mlr,Fbe)=>{"use strict";var Nbt=Wi().hoverLabelText,Rbe=_i().opacity,Ubt=dw().hoverOnBars,Dbe=Dw(),Ibe={increasing:Dbe.INCREASING.SYMBOL,decreasing:Dbe.DECREASING.SYMBOL};Fbe.exports=function(t,r,i,n,a){var o=Ubt(t,r,i,n,a);if(!o)return;var s=o.cd,l=s[0].trace,u=l.orientation==="h",f=u?"x":"y",c=u?t.xa:t.ya;function h(_){return Nbt(c,_,l[f+"hoverformat"])}var v=o.index,d=s[v],x=d.isSum?d.b+d.s:d.rawS;o.initial=d.b+d.s-x,o.delta=x,o.final=o.initial+o.delta;var b=h(Math.abs(o.delta));o.deltaLabel=x<0?"("+b+")":b,o.finalLabel=h(o.final),o.initialLabel=h(o.initial);var p=d.hi||l.hoverinfo,w=[];if(p&&p!=="none"&&p!=="skip"){var A=p==="all",T=p.split("+"),k=function(_){return A||T.indexOf(_)!==-1};d.isSum||(k("final")&&(u?!k("x"):!k("y"))&&w.push(o.finalLabel),k("delta")&&(x<0?w.push(o.deltaLabel+" "+Ibe.decreasing):w.push(o.deltaLabel+" "+Ibe.increasing)),k("initial")&&w.push("Initial: "+o.initialLabel))}return w.length&&(o.extraText=w.join("<br>")),o.color=Vbt(l,d),[o]};function Vbt(e,t){var r=e[t.dir].marker,i=r.color,n=r.line.color,a=r.line.width;if(Rbe(i))return i;if(Rbe(n)&&a)return n}});var Obe=ie((xlr,zbe)=>{"use strict";zbe.exports=function(t,r){return t.x="xVal"in r?r.xVal:r.x,t.y="yVal"in r?r.yVal:r.y,"initial"in r&&(t.initial=r.initial),"delta"in r&&(t.delta=r.delta),"final"in r&&(t.final=r.final),r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),t}});var Nbe=ie((_lr,Bbe)=>{"use strict";Bbe.exports={attributes:K9(),layoutAttributes:J9(),supplyDefaults:$9().supplyDefaults,crossTraceDefaults:$9().crossTraceDefaults,supplyLayoutDefaults:pbe(),calc:bbe(),crossTraceCalc:Abe(),plot:Ebe(),style:Pbe().style,hoverPoints:qbe(),eventData:Obe(),selectPoints:pw(),moduleType:"trace",name:"waterfall",basePlotModule:yu(),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}});var Vbe=ie((blr,Ube)=>{"use strict";Ube.exports=Nbe()});var Fw=ie((wlr,Hbe)=>{"use strict";Hbe.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(e){return e.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(e){var t=e.slice(0,3);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(e){var t=e.slice(0,4);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["\xB0","%","%",""]}}}});var rU=ie((Tlr,Ybe)=>{"use strict";var Hbt=rs(),Gbt=Bl().zorder,Ybt=Ba().hovertemplateAttrs,Gbe=aa().extendFlat,Wbt=Fw().colormodel,AS=["rgb","rgba","rgba256","hsl","hsla"],Xbt=[],Zbt=[];for(qw=0;qw<AS.length;qw++)TS=Wbt[AS[qw]],Xbt.push("For the `"+AS[qw]+"` colormodel, it is ["+(TS.zminDflt||TS.min).join(", ")+"]."),Zbt.push("For the `"+AS[qw]+"` colormodel, it is ["+(TS.zmaxDflt||TS.max).join(", ")+"].");var TS,qw;Ybe.exports=Gbe({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:AS,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:Gbe({},Hbt.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:Ybt({},{keys:["z","color","colormodel"]}),zorder:Gbt,transforms:void 0})});var Zbe=ie((Alr,Xbe)=>{"use strict";var jbt=Zt(),Kbt=rU(),Wbe=Fw(),Jbt=Zg().IMAGE_URL_PREFIX;Xbe.exports=function(t,r){function i(o,s){return jbt.coerce(t,r,Kbt,o,s)}i("source"),r.source&&!r.source.match(Jbt)&&delete r.source,r._hasSource=!!r.source;var n=i("z");if(r._hasZ=!(n===void 0||!n.length||!n[0]||!n[0].length),!r._hasZ&&!r._hasSource){r.visible=!1;return}i("x0"),i("y0"),i("dx"),i("dy");var a;r._hasZ?(i("colormodel","rgb"),a=Wbe.colormodel[r.colormodel],i("zmin",a.zminDflt||a.min),i("zmax",a.zmaxDflt||a.max)):r._hasSource&&(r.colormodel="rgba256",a=Wbe.colormodel[r.colormodel],r.zmin=a.zminDflt,r.zmax=a.zmaxDflt),i("zsmooth"),i("text"),i("hovertext"),i("hovertemplate"),r._length=null,i("zorder")}});var oy=ie((Mlr,nU)=>{typeof Object.create=="function"?nU.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:nU.exports=function(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}}});var iU=ie((Slr,jbe)=>{jbe.exports=cx().EventEmitter});var Qbe=ie(jP=>{"use strict";jP.byteLength=$bt;jP.toByteArray=t2t;jP.fromByteArray=i2t;var ig=[],Pp=[],Qbt=typeof Uint8Array!="undefined"?Uint8Array:Array,aU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(i_=0,Kbe=aU.length;i_<Kbe;++i_)ig[i_]=aU[i_],Pp[aU.charCodeAt(i_)]=i_;var i_,Kbe;Pp[45]=62;Pp[95]=63;function Jbe(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var i=r===t?0:4-r%4;return[r,i]}function $bt(e){var t=Jbe(e),r=t[0],i=t[1];return(r+i)*3/4-i}function e2t(e,t,r){return(t+r)*3/4-r}function t2t(e){var t,r=Jbe(e),i=r[0],n=r[1],a=new Qbt(e2t(e,i,n)),o=0,s=n>0?i-4:i,l;for(l=0;l<s;l+=4)t=Pp[e.charCodeAt(l)]<<18|Pp[e.charCodeAt(l+1)]<<12|Pp[e.charCodeAt(l+2)]<<6|Pp[e.charCodeAt(l+3)],a[o++]=t>>16&255,a[o++]=t>>8&255,a[o++]=t&255;return n===2&&(t=Pp[e.charCodeAt(l)]<<2|Pp[e.charCodeAt(l+1)]>>4,a[o++]=t&255),n===1&&(t=Pp[e.charCodeAt(l)]<<10|Pp[e.charCodeAt(l+1)]<<4|Pp[e.charCodeAt(l+2)]>>2,a[o++]=t>>8&255,a[o++]=t&255),a}function r2t(e){return ig[e>>18&63]+ig[e>>12&63]+ig[e>>6&63]+ig[e&63]}function n2t(e,t,r){for(var i,n=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),n.push(r2t(i));return n.join("")}function i2t(e){for(var t,r=e.length,i=r%3,n=[],a=16383,o=0,s=r-i;o<s;o+=a)n.push(n2t(e,o,o+a>s?s:o+a));return i===1?(t=e[r-1],n.push(ig[t>>2]+ig[t<<4&63]+"==")):i===2&&(t=(e[r-2]<<8)+e[r-1],n.push(ig[t>>10]+ig[t>>4&63]+ig[t<<2&63]+"=")),n.join("")}});var $be=ie(oU=>{oU.read=function(e,t,r,i,n){var a,o,s=n*8-i-1,l=(1<<s)-1,u=l>>1,f=-7,c=r?n-1:0,h=r?-1:1,v=e[t+c];for(c+=h,a=v&(1<<-f)-1,v>>=-f,f+=s;f>0;a=a*256+e[t+c],c+=h,f-=8);for(o=a&(1<<-f)-1,a>>=-f,f+=i;f>0;o=o*256+e[t+c],c+=h,f-=8);if(a===0)a=1-u;else{if(a===l)return o?NaN:(v?-1:1)*(1/0);o=o+Math.pow(2,i),a=a-u}return(v?-1:1)*o*Math.pow(2,a-i)};oU.write=function(e,t,r,i,n,a){var o,s,l,u=a*8-n-1,f=(1<<u)-1,c=f>>1,h=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=i?0:a-1,d=i?1:-1,x=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=f):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+c>=1?t+=h/l:t+=h*Math.pow(2,1-c),t*l>=2&&(o++,l/=2),o+c>=f?(s=0,o=f):o+c>=1?(s=(t*l-1)*Math.pow(2,n),o=o+c):(s=t*Math.pow(2,c-1)*Math.pow(2,n),o=0));n>=8;e[r+v]=s&255,v+=d,s/=256,n-=8);for(o=o<<n|s,u+=n;u>0;e[r+v]=o&255,v+=d,o/=256,u-=8);e[r+v-d]|=x*128}});var o_=ie(Nw=>{"use strict";var sU=Qbe(),Ow=$be(),e2e=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Nw.Buffer=On;Nw.SlowBuffer=f2t;Nw.INSPECT_MAX_BYTES=50;var KP=2147483647;Nw.kMaxLength=KP;On.TYPED_ARRAY_SUPPORT=a2t();!On.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a2t(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch(e){return!1}}Object.defineProperty(On.prototype,"parent",{enumerable:!0,get:function(){if(On.isBuffer(this))return this.buffer}});Object.defineProperty(On.prototype,"offset",{enumerable:!0,get:function(){if(On.isBuffer(this))return this.byteOffset}});function sy(e){if(e>KP)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,On.prototype),t}function On(e,t,r){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return cU(e)}return i2e(e,t,r)}On.poolSize=8192;function i2e(e,t,r){if(typeof e=="string")return s2t(e,t);if(ArrayBuffer.isView(e))return l2t(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ag(e,ArrayBuffer)||e&&ag(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(ag(e,SharedArrayBuffer)||e&&ag(e.buffer,SharedArrayBuffer)))return uU(e,t,r);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let i=e.valueOf&&e.valueOf();if(i!=null&&i!==e)return On.from(i,t,r);let n=u2t(e);if(n)return n;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return On.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}On.from=function(e,t,r){return i2e(e,t,r)};Object.setPrototypeOf(On.prototype,Uint8Array.prototype);Object.setPrototypeOf(On,Uint8Array);function a2e(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function o2t(e,t,r){return a2e(e),e<=0?sy(e):t!==void 0?typeof r=="string"?sy(e).fill(t,r):sy(e).fill(t):sy(e)}On.alloc=function(e,t,r){return o2t(e,t,r)};function cU(e){return a2e(e),sy(e<0?0:hU(e)|0)}On.allocUnsafe=function(e){return cU(e)};On.allocUnsafeSlow=function(e){return cU(e)};function s2t(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!On.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let r=o2e(e,t)|0,i=sy(r),n=i.write(e,t);return n!==r&&(i=i.slice(0,n)),i}function lU(e){let t=e.length<0?0:hU(e.length)|0,r=sy(t);for(let i=0;i<t;i+=1)r[i]=e[i]&255;return r}function l2t(e){if(ag(e,Uint8Array)){let t=new Uint8Array(e);return uU(t.buffer,t.byteOffset,t.byteLength)}return lU(e)}function uU(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let i;return t===void 0&&r===void 0?i=new Uint8Array(e):r===void 0?i=new Uint8Array(e,t):i=new Uint8Array(e,t,r),Object.setPrototypeOf(i,On.prototype),i}function u2t(e){if(On.isBuffer(e)){let t=hU(e.length)|0,r=sy(t);return r.length===0||e.copy(r,0,0,t),r}if(e.length!==void 0)return typeof e.length!="number"||dU(e.length)?sy(0):lU(e);if(e.type==="Buffer"&&Array.isArray(e.data))return lU(e.data)}function hU(e){if(e>=KP)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+KP.toString(16)+" bytes");return e|0}function f2t(e){return+e!=e&&(e=0),On.alloc(+e)}On.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==On.prototype};On.compare=function(t,r){if(ag(t,Uint8Array)&&(t=On.from(t,t.offset,t.byteLength)),ag(r,Uint8Array)&&(r=On.from(r,r.offset,r.byteLength)),!On.isBuffer(t)||!On.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===r)return 0;let i=t.length,n=r.length;for(let a=0,o=Math.min(i,n);a<o;++a)if(t[a]!==r[a]){i=t[a],n=r[a];break}return i<n?-1:n<i?1:0};On.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};On.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return On.alloc(0);let i;if(r===void 0)for(r=0,i=0;i<t.length;++i)r+=t[i].length;let n=On.allocUnsafe(r),a=0;for(i=0;i<t.length;++i){let o=t[i];if(ag(o,Uint8Array))a+o.length>n.length?(On.isBuffer(o)||(o=On.from(o)),o.copy(n,a)):Uint8Array.prototype.set.call(n,o,a);else if(On.isBuffer(o))o.copy(n,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=o.length}return n};function o2e(e,t){if(On.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ag(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&r===0)return 0;let n=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return fU(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return p2e(e).length;default:if(n)return i?-1:fU(e).length;t=(""+t).toLowerCase(),n=!0}}On.byteLength=o2e;function c2t(e,t,r){let i=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return b2t(this,t,r);case"utf8":case"utf-8":return l2e(this,t,r);case"ascii":return x2t(this,t,r);case"latin1":case"binary":return _2t(this,t,r);case"base64":return y2t(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w2t(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}On.prototype._isBuffer=!0;function a_(e,t,r){let i=e[t];e[t]=e[r],e[r]=i}On.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<t;r+=2)a_(this,r,r+1);return this};On.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<t;r+=4)a_(this,r,r+3),a_(this,r+1,r+2);return this};On.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<t;r+=8)a_(this,r,r+7),a_(this,r+1,r+6),a_(this,r+2,r+5),a_(this,r+3,r+4);return this};On.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?l2e(this,0,t):c2t.apply(this,arguments)};On.prototype.toLocaleString=On.prototype.toString;On.prototype.equals=function(t){if(!On.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:On.compare(this,t)===0};On.prototype.inspect=function(){let t="",r=Nw.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"};e2e&&(On.prototype[e2e]=On.prototype.inspect);On.prototype.compare=function(t,r,i,n,a){if(ag(t,Uint8Array)&&(t=On.from(t,t.offset,t.byteLength)),!On.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(r===void 0&&(r=0),i===void 0&&(i=t?t.length:0),n===void 0&&(n=0),a===void 0&&(a=this.length),r<0||i>t.length||n<0||a>this.length)throw new RangeError("out of range index");if(n>=a&&r>=i)return 0;if(n>=a)return-1;if(r>=i)return 1;if(r>>>=0,i>>>=0,n>>>=0,a>>>=0,this===t)return 0;let o=a-n,s=i-r,l=Math.min(o,s),u=this.slice(n,a),f=t.slice(r,i);for(let c=0;c<l;++c)if(u[c]!==f[c]){o=u[c],s=f[c];break}return o<s?-1:s<o?1:0};function s2e(e,t,r,i,n){if(e.length===0)return-1;if(typeof r=="string"?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,dU(r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0)if(n)r=0;else return-1;if(typeof t=="string"&&(t=On.from(t,i)),On.isBuffer(t))return t.length===0?-1:t2e(e,t,r,i,n);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):t2e(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function t2e(e,t,r,i,n){let a=1,o=e.length,s=t.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(e.length<2||t.length<2)return-1;a=2,o/=2,s/=2,r/=2}function l(f,c){return a===1?f[c]:f.readUInt16BE(c*a)}let u;if(n){let f=-1;for(u=r;u<o;u++)if(l(e,u)===l(t,f===-1?0:u-f)){if(f===-1&&(f=u),u-f+1===s)return f*a}else f!==-1&&(u-=u-f),f=-1}else for(r+s>o&&(r=o-s),u=r;u>=0;u--){let f=!0;for(let c=0;c<s;c++)if(l(e,u+c)!==l(t,c)){f=!1;break}if(f)return u}return-1}On.prototype.includes=function(t,r,i){return this.indexOf(t,r,i)!==-1};On.prototype.indexOf=function(t,r,i){return s2e(this,t,r,i,!0)};On.prototype.lastIndexOf=function(t,r,i){return s2e(this,t,r,i,!1)};function h2t(e,t,r,i){r=Number(r)||0;let n=e.length-r;i?(i=Number(i),i>n&&(i=n)):i=n;let a=t.length;i>a/2&&(i=a/2);let o;for(o=0;o<i;++o){let s=parseInt(t.substr(o*2,2),16);if(dU(s))return o;e[r+o]=s}return o}function v2t(e,t,r,i){return JP(fU(t,e.length-r),e,r,i)}function d2t(e,t,r,i){return JP(S2t(t),e,r,i)}function p2t(e,t,r,i){return JP(p2e(t),e,r,i)}function g2t(e,t,r,i){return JP(E2t(t,e.length-r),e,r,i)}On.prototype.write=function(t,r,i,n){if(r===void 0)n="utf8",i=this.length,r=0;else if(i===void 0&&typeof r=="string")n=r,i=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(i)?(i=i>>>0,n===void 0&&(n="utf8")):(n=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let a=this.length-r;if((i===void 0||i>a)&&(i=a),t.length>0&&(i<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return h2t(this,t,r,i);case"utf8":case"utf-8":return v2t(this,t,r,i);case"ascii":case"latin1":case"binary":return d2t(this,t,r,i);case"base64":return p2t(this,t,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g2t(this,t,r,i);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}};On.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function y2t(e,t,r){return t===0&&r===e.length?sU.fromByteArray(e):sU.fromByteArray(e.slice(t,r))}function l2e(e,t,r){r=Math.min(e.length,r);let i=[],n=t;for(;n<r;){let a=e[n],o=null,s=a>239?4:a>223?3:a>191?2:1;if(n+s<=r){let l,u,f,c;switch(s){case 1:a<128&&(o=a);break;case 2:l=e[n+1],(l&192)===128&&(c=(a&31)<<6|l&63,c>127&&(o=c));break;case 3:l=e[n+1],u=e[n+2],(l&192)===128&&(u&192)===128&&(c=(a&15)<<12|(l&63)<<6|u&63,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:l=e[n+1],u=e[n+2],f=e[n+3],(l&192)===128&&(u&192)===128&&(f&192)===128&&(c=(a&15)<<18|(l&63)<<12|(u&63)<<6|f&63,c>65535&&c<1114112&&(o=c))}}o===null?(o=65533,s=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|o&1023),i.push(o),n+=s}return m2t(i)}var r2e=4096;function m2t(e){let t=e.length;if(t<=r2e)return String.fromCharCode.apply(String,e);let r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=r2e));return r}function x2t(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(e[n]&127);return i}function _2t(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function b2t(e,t,r){let i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);let n="";for(let a=t;a<r;++a)n+=k2t[e[a]];return n}function w2t(e,t,r){let i=e.slice(t,r),n="";for(let a=0;a<i.length-1;a+=2)n+=String.fromCharCode(i[a]+i[a+1]*256);return n}On.prototype.slice=function(t,r){let i=this.length;t=~~t,r=r===void 0?i:~~r,t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),r<0?(r+=i,r<0&&(r=0)):r>i&&(r=i),r<t&&(r=t);let n=this.subarray(t,r);return Object.setPrototypeOf(n,On.prototype),n};function Uc(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}On.prototype.readUintLE=On.prototype.readUIntLE=function(t,r,i){t=t>>>0,r=r>>>0,i||Uc(t,r,this.length);let n=this[t],a=1,o=0;for(;++o<r&&(a*=256);)n+=this[t+o]*a;return n};On.prototype.readUintBE=On.prototype.readUIntBE=function(t,r,i){t=t>>>0,r=r>>>0,i||Uc(t,r,this.length);let n=this[t+--r],a=1;for(;r>0&&(a*=256);)n+=this[t+--r]*a;return n};On.prototype.readUint8=On.prototype.readUInt8=function(t,r){return t=t>>>0,r||Uc(t,1,this.length),this[t]};On.prototype.readUint16LE=On.prototype.readUInt16LE=function(t,r){return t=t>>>0,r||Uc(t,2,this.length),this[t]|this[t+1]<<8};On.prototype.readUint16BE=On.prototype.readUInt16BE=function(t,r){return t=t>>>0,r||Uc(t,2,this.length),this[t]<<8|this[t+1]};On.prototype.readUint32LE=On.prototype.readUInt32LE=function(t,r){return t=t>>>0,r||Uc(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};On.prototype.readUint32BE=On.prototype.readUInt32BE=function(t,r){return t=t>>>0,r||Uc(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};On.prototype.readBigUInt64LE=Vm(function(t){t=t>>>0,Bw(t,"offset");let r=this[t],i=this[t+7];(r===void 0||i===void 0)&&MS(t,this.length-8);let n=r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,a=this[++t]+this[++t]*2**8+this[++t]*2**16+i*2**24;return BigInt(n)+(BigInt(a)<<BigInt(32))});On.prototype.readBigUInt64BE=Vm(function(t){t=t>>>0,Bw(t,"offset");let r=this[t],i=this[t+7];(r===void 0||i===void 0)&&MS(t,this.length-8);let n=r*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],a=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+i;return(BigInt(n)<<BigInt(32))+BigInt(a)});On.prototype.readIntLE=function(t,r,i){t=t>>>0,r=r>>>0,i||Uc(t,r,this.length);let n=this[t],a=1,o=0;for(;++o<r&&(a*=256);)n+=this[t+o]*a;return a*=128,n>=a&&(n-=Math.pow(2,8*r)),n};On.prototype.readIntBE=function(t,r,i){t=t>>>0,r=r>>>0,i||Uc(t,r,this.length);let n=r,a=1,o=this[t+--n];for(;n>0&&(a*=256);)o+=this[t+--n]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*r)),o};On.prototype.readInt8=function(t,r){return t=t>>>0,r||Uc(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};On.prototype.readInt16LE=function(t,r){t=t>>>0,r||Uc(t,2,this.length);let i=this[t]|this[t+1]<<8;return i&32768?i|4294901760:i};On.prototype.readInt16BE=function(t,r){t=t>>>0,r||Uc(t,2,this.length);let i=this[t+1]|this[t]<<8;return i&32768?i|4294901760:i};On.prototype.readInt32LE=function(t,r){return t=t>>>0,r||Uc(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};On.prototype.readInt32BE=function(t,r){return t=t>>>0,r||Uc(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};On.prototype.readBigInt64LE=Vm(function(t){t=t>>>0,Bw(t,"offset");let r=this[t],i=this[t+7];(r===void 0||i===void 0)&&MS(t,this.length-8);let n=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(i<<24);return(BigInt(n)<<BigInt(32))+BigInt(r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});On.prototype.readBigInt64BE=Vm(function(t){t=t>>>0,Bw(t,"offset");let r=this[t],i=this[t+7];(r===void 0||i===void 0)&&MS(t,this.length-8);let n=(r<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+i)});On.prototype.readFloatLE=function(t,r){return t=t>>>0,r||Uc(t,4,this.length),Ow.read(this,t,!0,23,4)};On.prototype.readFloatBE=function(t,r){return t=t>>>0,r||Uc(t,4,this.length),Ow.read(this,t,!1,23,4)};On.prototype.readDoubleLE=function(t,r){return t=t>>>0,r||Uc(t,8,this.length),Ow.read(this,t,!0,52,8)};On.prototype.readDoubleBE=function(t,r){return t=t>>>0,r||Uc(t,8,this.length),Ow.read(this,t,!1,52,8)};function hd(e,t,r,i,n,a){if(!On.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<a)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}On.prototype.writeUintLE=On.prototype.writeUIntLE=function(t,r,i,n){if(t=+t,r=r>>>0,i=i>>>0,!n){let s=Math.pow(2,8*i)-1;hd(this,t,r,i,s,0)}let a=1,o=0;for(this[r]=t&255;++o<i&&(a*=256);)this[r+o]=t/a&255;return r+i};On.prototype.writeUintBE=On.prototype.writeUIntBE=function(t,r,i,n){if(t=+t,r=r>>>0,i=i>>>0,!n){let s=Math.pow(2,8*i)-1;hd(this,t,r,i,s,0)}let a=i-1,o=1;for(this[r+a]=t&255;--a>=0&&(o*=256);)this[r+a]=t/o&255;return r+i};On.prototype.writeUint8=On.prototype.writeUInt8=function(t,r,i){return t=+t,r=r>>>0,i||hd(this,t,r,1,255,0),this[r]=t&255,r+1};On.prototype.writeUint16LE=On.prototype.writeUInt16LE=function(t,r,i){return t=+t,r=r>>>0,i||hd(this,t,r,2,65535,0),this[r]=t&255,this[r+1]=t>>>8,r+2};On.prototype.writeUint16BE=On.prototype.writeUInt16BE=function(t,r,i){return t=+t,r=r>>>0,i||hd(this,t,r,2,65535,0),this[r]=t>>>8,this[r+1]=t&255,r+2};On.prototype.writeUint32LE=On.prototype.writeUInt32LE=function(t,r,i){return t=+t,r=r>>>0,i||hd(this,t,r,4,4294967295,0),this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255,r+4};On.prototype.writeUint32BE=On.prototype.writeUInt32BE=function(t,r,i){return t=+t,r=r>>>0,i||hd(this,t,r,4,4294967295,0),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};function u2e(e,t,r,i,n){d2e(t,i,n,e,r,7);let a=Number(t&BigInt(4294967295));e[r++]=a,a=a>>8,e[r++]=a,a=a>>8,e[r++]=a,a=a>>8,e[r++]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o=o>>8,e[r++]=o,o=o>>8,e[r++]=o,o=o>>8,e[r++]=o,r}function f2e(e,t,r,i,n){d2e(t,i,n,e,r,7);let a=Number(t&BigInt(4294967295));e[r+7]=a,a=a>>8,e[r+6]=a,a=a>>8,e[r+5]=a,a=a>>8,e[r+4]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o=o>>8,e[r+2]=o,o=o>>8,e[r+1]=o,o=o>>8,e[r]=o,r+8}On.prototype.writeBigUInt64LE=Vm(function(t,r=0){return u2e(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))});On.prototype.writeBigUInt64BE=Vm(function(t,r=0){return f2e(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))});On.prototype.writeIntLE=function(t,r,i,n){if(t=+t,r=r>>>0,!n){let l=Math.pow(2,8*i-1);hd(this,t,r,i,l-1,-l)}let a=0,o=1,s=0;for(this[r]=t&255;++a<i&&(o*=256);)t<0&&s===0&&this[r+a-1]!==0&&(s=1),this[r+a]=(t/o>>0)-s&255;return r+i};On.prototype.writeIntBE=function(t,r,i,n){if(t=+t,r=r>>>0,!n){let l=Math.pow(2,8*i-1);hd(this,t,r,i,l-1,-l)}let a=i-1,o=1,s=0;for(this[r+a]=t&255;--a>=0&&(o*=256);)t<0&&s===0&&this[r+a+1]!==0&&(s=1),this[r+a]=(t/o>>0)-s&255;return r+i};On.prototype.writeInt8=function(t,r,i){return t=+t,r=r>>>0,i||hd(this,t,r,1,127,-128),t<0&&(t=255+t+1),this[r]=t&255,r+1};On.prototype.writeInt16LE=function(t,r,i){return t=+t,r=r>>>0,i||hd(this,t,r,2,32767,-32768),this[r]=t&255,this[r+1]=t>>>8,r+2};On.prototype.writeInt16BE=function(t,r,i){return t=+t,r=r>>>0,i||hd(this,t,r,2,32767,-32768),this[r]=t>>>8,this[r+1]=t&255,r+2};On.prototype.writeInt32LE=function(t,r,i){return t=+t,r=r>>>0,i||hd(this,t,r,4,2147483647,-2147483648),this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24,r+4};On.prototype.writeInt32BE=function(t,r,i){return t=+t,r=r>>>0,i||hd(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};On.prototype.writeBigInt64LE=Vm(function(t,r=0){return u2e(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});On.prototype.writeBigInt64BE=Vm(function(t,r=0){return f2e(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function c2e(e,t,r,i,n,a){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function h2e(e,t,r,i,n){return t=+t,r=r>>>0,n||c2e(e,t,r,4,34028234663852886e22,-34028234663852886e22),Ow.write(e,t,r,i,23,4),r+4}On.prototype.writeFloatLE=function(t,r,i){return h2e(this,t,r,!0,i)};On.prototype.writeFloatBE=function(t,r,i){return h2e(this,t,r,!1,i)};function v2e(e,t,r,i,n){return t=+t,r=r>>>0,n||c2e(e,t,r,8,17976931348623157e292,-17976931348623157e292),Ow.write(e,t,r,i,52,8),r+8}On.prototype.writeDoubleLE=function(t,r,i){return v2e(this,t,r,!0,i)};On.prototype.writeDoubleBE=function(t,r,i){return v2e(this,t,r,!1,i)};On.prototype.copy=function(t,r,i,n){if(!On.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),!n&&n!==0&&(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<i&&(n=i),n===i||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-i&&(n=t.length-r+i);let a=n-i;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,i,n):Uint8Array.prototype.set.call(t,this.subarray(i,n),r),a};On.prototype.fill=function(t,r,i,n){if(typeof t=="string"){if(typeof r=="string"?(n=r,r=0,i=this.length):typeof i=="string"&&(n=i,i=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!On.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(t.length===1){let o=t.charCodeAt(0);(n==="utf8"&&o<128||n==="latin1")&&(t=o)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(r<0||this.length<r||this.length<i)throw new RangeError("Out of range index");if(i<=r)return this;r=r>>>0,i=i===void 0?this.length:i>>>0,t||(t=0);let a;if(typeof t=="number")for(a=r;a<i;++a)this[a]=t;else{let o=On.isBuffer(t)?t:On.from(t,n),s=o.length;if(s===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(a=0;a<i-r;++a)this[a+r]=o[a%s]}return this};var zw={};function vU(e,t,r){zw[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(n){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:n,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}vU("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);vU("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError);vU("ERR_OUT_OF_RANGE",function(e,t,r){let i=`The value of "${e}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>2**32?n=n2e(String(r)):typeof r=="bigint"&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=n2e(n)),n+="n"),i+=` It must be ${t}. Received ${n}`,i},RangeError);function n2e(e){let t="",r=e.length,i=e[0]==="-"?1:0;for(;r>=i+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function T2t(e,t,r){Bw(t,"offset"),(e[t]===void 0||e[t+r]===void 0)&&MS(t,e.length-(r+1))}function d2e(e,t,r,i,n,a){if(e>r||e<t){let o=typeof t=="bigint"?"n":"",s;throw a>3?t===0||t===BigInt(0)?s=`>= 0${o} and < 2${o} ** ${(a+1)*8}${o}`:s=`>= -(2${o} ** ${(a+1)*8-1}${o}) and < 2 ** ${(a+1)*8-1}${o}`:s=`>= ${t}${o} and <= ${r}${o}`,new zw.ERR_OUT_OF_RANGE("value",s,e)}T2t(i,n,a)}function Bw(e,t){if(typeof e!="number")throw new zw.ERR_INVALID_ARG_TYPE(t,"number",e)}function MS(e,t,r){throw Math.floor(e)!==e?(Bw(e,r),new zw.ERR_OUT_OF_RANGE(r||"offset","an integer",e)):t<0?new zw.ERR_BUFFER_OUT_OF_BOUNDS:new zw.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}var A2t=/[^+/0-9A-Za-z-_]/g;function M2t(e){if(e=e.split("=")[0],e=e.trim().replace(A2t,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function fU(e,t){t=t||1/0;let r,i=e.length,n=null,a=[];for(let o=0;o<i;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}else if(o+1===i){(t-=3)>-1&&a.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(t-=3)>-1&&a.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return a}function S2t(e){let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r)&255);return t}function E2t(e,t){let r,i,n,a=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),i=r>>8,n=r%256,a.push(n),a.push(i);return a}function p2e(e){return sU.toByteArray(M2t(e))}function JP(e,t,r,i){let n;for(n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}function ag(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function dU(e){return e!==e}var k2t=function(){let e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){let i=r*16;for(let n=0;n<16;++n)t[i+n]=e[r]+e[n]}return t}();function Vm(e){return typeof BigInt=="undefined"?C2t:e}function C2t(){throw new Error("BigInt not supported")}});var QP=ie((Plr,g2e)=>{"use strict";g2e.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),i=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var n=42;t[r]=n;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var a=Object.getOwnPropertySymbols(t);if(a.length!==1||a[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,r);if(o.value!==n||o.enumerable!==!0)return!1}return!0}});var SS=ie((Rlr,y2e)=>{"use strict";var L2t=QP();y2e.exports=function(){return L2t()&&!!Symbol.toStringTag}});var _2e=ie((Dlr,x2e)=>{"use strict";var m2e=typeof Symbol!="undefined"&&Symbol,P2t=QP();x2e.exports=function(){return typeof m2e!="function"||typeof Symbol!="function"||typeof m2e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:P2t()}});var T2e=ie((Ilr,w2e)=>{"use strict";var b2e={foo:{}},R2t=Object;w2e.exports=function(){return{__proto__:b2e}.foo===b2e.foo&&!({__proto__:null}instanceof R2t)}});var S2e=ie((Flr,M2e)=>{"use strict";var D2t="Function.prototype.bind called on incompatible ",I2t=Object.prototype.toString,F2t=Math.max,q2t="[object Function]",A2e=function(t,r){for(var i=[],n=0;n<t.length;n+=1)i[n]=t[n];for(var a=0;a<r.length;a+=1)i[a+t.length]=r[a];return i},z2t=function(t,r){for(var i=[],n=r||0,a=0;n<t.length;n+=1,a+=1)i[a]=t[n];return i},O2t=function(e,t){for(var r="",i=0;i<e.length;i+=1)r+=e[i],i+1<e.length&&(r+=t);return r};M2e.exports=function(t){var r=this;if(typeof r!="function"||I2t.apply(r)!==q2t)throw new TypeError(D2t+r);for(var i=z2t(arguments,1),n,a=function(){if(this instanceof n){var f=r.apply(this,A2e(i,arguments));return Object(f)===f?f:this}return r.apply(t,A2e(i,arguments))},o=F2t(0,r.length-i.length),s=[],l=0;l<o;l++)s[l]="$"+l;if(n=Function("binder","return function ("+O2t(s,",")+"){ return binder.apply(this,arguments); }")(a),r.prototype){var u=function(){};u.prototype=r.prototype,n.prototype=new u,u.prototype=null}return n}});var $P=ie((qlr,E2e)=>{"use strict";var B2t=S2e();E2e.exports=Function.prototype.bind||B2t});var C2e=ie((zlr,k2e)=>{"use strict";var N2t=Function.prototype.call,U2t=Object.prototype.hasOwnProperty,V2t=$P();k2e.exports=V2t.call(N2t,U2t)});var u_=ie((Olr,I2e)=>{"use strict";var cs,Gw=SyntaxError,D2e=Function,Hw=TypeError,pU=function(e){try{return D2e('"use strict"; return ('+e+").constructor;")()}catch(t){}},s_=Object.getOwnPropertyDescriptor;if(s_)try{s_({},"")}catch(e){s_=null}var gU=function(){throw new Hw},H2t=s_?function(){try{return arguments.callee,gU}catch(e){try{return s_(arguments,"callee").get}catch(t){return gU}}}():gU,Uw=_2e()(),G2t=T2e()(),Vc=Object.getPrototypeOf||(G2t?function(e){return e.__proto__}:null),Vw={},Y2t=typeof Uint8Array=="undefined"||!Vc?cs:Vc(Uint8Array),l_={"%AggregateError%":typeof AggregateError=="undefined"?cs:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?cs:ArrayBuffer,"%ArrayIteratorPrototype%":Uw&&Vc?Vc([][Symbol.iterator]()):cs,"%AsyncFromSyncIteratorPrototype%":cs,"%AsyncFunction%":Vw,"%AsyncGenerator%":Vw,"%AsyncGeneratorFunction%":Vw,"%AsyncIteratorPrototype%":Vw,"%Atomics%":typeof Atomics=="undefined"?cs:Atomics,"%BigInt%":typeof BigInt=="undefined"?cs:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?cs:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?cs:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?cs:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?cs:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?cs:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?cs:FinalizationRegistry,"%Function%":D2e,"%GeneratorFunction%":Vw,"%Int8Array%":typeof Int8Array=="undefined"?cs:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?cs:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?cs:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Uw&&Vc?Vc(Vc([][Symbol.iterator]())):cs,"%JSON%":typeof JSON=="object"?JSON:cs,"%Map%":typeof Map=="undefined"?cs:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!Uw||!Vc?cs:Vc(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?cs:Promise,"%Proxy%":typeof Proxy=="undefined"?cs:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?cs:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?cs:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!Uw||!Vc?cs:Vc(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?cs:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Uw&&Vc?Vc(""[Symbol.iterator]()):cs,"%Symbol%":Uw?Symbol:cs,"%SyntaxError%":Gw,"%ThrowTypeError%":H2t,"%TypedArray%":Y2t,"%TypeError%":Hw,"%Uint8Array%":typeof Uint8Array=="undefined"?cs:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?cs:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?cs:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?cs:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?cs:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?cs:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?cs:WeakSet};if(Vc)try{null.error}catch(e){L2e=Vc(Vc(e)),l_["%Error.prototype%"]=L2e}var L2e,W2t=function e(t){var r;if(t==="%AsyncFunction%")r=pU("async function () {}");else if(t==="%GeneratorFunction%")r=pU("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=pU("async function* () {}");else if(t==="%AsyncGenerator%"){var i=e("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if(t==="%AsyncIteratorPrototype%"){var n=e("%AsyncGenerator%");n&&Vc&&(r=Vc(n.prototype))}return l_[t]=r,r},P2e={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ES=$P(),e6=C2e(),X2t=ES.call(Function.call,Array.prototype.concat),Z2t=ES.call(Function.apply,Array.prototype.splice),R2e=ES.call(Function.call,String.prototype.replace),t6=ES.call(Function.call,String.prototype.slice),j2t=ES.call(Function.call,RegExp.prototype.exec),K2t=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,J2t=/\\(\\)?/g,Q2t=function(t){var r=t6(t,0,1),i=t6(t,-1);if(r==="%"&&i!=="%")throw new Gw("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&r!=="%")throw new Gw("invalid intrinsic syntax, expected opening `%`");var n=[];return R2e(t,K2t,function(a,o,s,l){n[n.length]=s?R2e(l,J2t,"$1"):o||a}),n},$2t=function(t,r){var i=t,n;if(e6(P2e,i)&&(n=P2e[i],i="%"+n[0]+"%"),e6(l_,i)){var a=l_[i];if(a===Vw&&(a=W2t(i)),typeof a=="undefined"&&!r)throw new Hw("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:a}}throw new Gw("intrinsic "+t+" does not exist!")};I2e.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new Hw("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Hw('"allowMissing" argument must be a boolean');if(j2t(/^%?[^%]*%?$/,t)===null)throw new Gw("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=Q2t(t),n=i.length>0?i[0]:"",a=$2t("%"+n+"%",r),o=a.name,s=a.value,l=!1,u=a.alias;u&&(n=u[0],Z2t(i,X2t([0,1],u)));for(var f=1,c=!0;f<i.length;f+=1){var h=i[f],v=t6(h,0,1),d=t6(h,-1);if((v==='"'||v==="'"||v==="`"||d==='"'||d==="'"||d==="`")&&v!==d)throw new Gw("property names with quotes must have matching quotes");if((h==="constructor"||!c)&&(l=!0),n+="."+h,o="%"+n+"%",e6(l_,o))s=l_[o];else if(s!=null){if(!(h in s)){if(!r)throw new Hw("base intrinsic for "+t+" exists, but the property is not available.");return}if(s_&&f+1>=i.length){var x=s_(s,h);c=!!x,c&&"get"in x&&!("originalValue"in x.get)?s=x.get:s=s[h]}else c=e6(s,h),s=s[h];c&&!l&&(l_[o]=s)}}return s}});var r6=ie((Blr,F2e)=>{"use strict";var ewt=u_(),yU=ewt("%Object.defineProperty%",!0),mU=function(){if(yU)try{return yU({},"a",{value:1}),!0}catch(t){return!1}return!1};mU.hasArrayLengthDefineBug=function(){if(!mU())return null;try{return yU([],"length",{value:1}).length!==1}catch(t){return!0}};F2e.exports=mU});var kS=ie((Nlr,q2e)=>{"use strict";var twt=u_(),n6=twt("%Object.getOwnPropertyDescriptor%",!0);if(n6)try{n6([],"length")}catch(e){n6=null}q2e.exports=n6});var B2e=ie((Ulr,O2e)=>{"use strict";var rwt=r6()(),xU=u_(),CS=rwt&&xU("%Object.defineProperty%",!0);if(CS)try{CS({},"a",{value:1})}catch(e){CS=!1}var nwt=xU("%SyntaxError%"),Yw=xU("%TypeError%"),z2e=kS();O2e.exports=function(t,r,i){if(!t||typeof t!="object"&&typeof t!="function")throw new Yw("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Yw("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Yw("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Yw("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Yw("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Yw("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,a=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,s=arguments.length>6?arguments[6]:!1,l=!!z2e&&z2e(t,r);if(CS)CS(t,r,{configurable:o===null&&l?l.configurable:!o,enumerable:n===null&&l?l.enumerable:!n,value:i,writable:a===null&&l?l.writable:!a});else if(s||!n&&!a&&!o)t[r]=i;else throw new nwt("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var Y2e=ie((Vlr,G2e)=>{"use strict";var H2e=u_(),N2e=B2e(),iwt=r6()(),U2e=kS(),V2e=H2e("%TypeError%"),awt=H2e("%Math.floor%");G2e.exports=function(t,r){if(typeof t!="function")throw new V2e("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||awt(r)!==r)throw new V2e("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],n=!0,a=!0;if("length"in t&&U2e){var o=U2e(t,"length");o&&!o.configurable&&(n=!1),o&&!o.writable&&(a=!1)}return(n||a||!i)&&(iwt?N2e(t,"length",r,!0,!0):N2e(t,"length",r)),t}});var PS=ie((Hlr,i6)=>{"use strict";var _U=$P(),Ww=u_(),owt=Y2e(),swt=Ww("%TypeError%"),X2e=Ww("%Function.prototype.apply%"),Z2e=Ww("%Function.prototype.call%"),j2e=Ww("%Reflect.apply%",!0)||_U.call(Z2e,X2e),LS=Ww("%Object.defineProperty%",!0),lwt=Ww("%Math.max%");if(LS)try{LS({},"a",{value:1})}catch(e){LS=null}i6.exports=function(t){if(typeof t!="function")throw new swt("a function is required");var r=j2e(_U,Z2e,arguments);return owt(r,1+lwt(0,t.length-(arguments.length-1)),!0)};var W2e=function(){return j2e(_U,X2e,arguments)};LS?LS(i6.exports,"apply",{value:W2e}):i6.exports.apply=W2e});var Xw=ie((Glr,Q2e)=>{"use strict";var K2e=u_(),J2e=PS(),uwt=J2e(K2e("String.prototype.indexOf"));Q2e.exports=function(t,r){var i=K2e(t,!!r);return typeof i=="function"&&uwt(t,".prototype.")>-1?J2e(i):i}});var twe=ie((Ylr,ewe)=>{"use strict";var fwt=SS()(),cwt=Xw(),bU=cwt("Object.prototype.toString"),a6=function(t){return fwt&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:bU(t)==="[object Arguments]"},$2e=function(t){return a6(t)?!0:t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&bU(t)!=="[object Array]"&&bU(t.callee)==="[object Function]"},hwt=function(){return a6(arguments)}();a6.isLegacyArguments=$2e;ewe.exports=hwt?a6:$2e});var iwe=ie((Wlr,nwe)=>{"use strict";var vwt=Object.prototype.toString,dwt=Function.prototype.toString,pwt=/^\s*(?:function)?\*/,rwe=SS()(),wU=Object.getPrototypeOf,gwt=function(){if(!rwe)return!1;try{return Function("return function*() {}")()}catch(e){}},TU;nwe.exports=function(t){if(typeof t!="function")return!1;if(pwt.test(dwt.call(t)))return!0;if(!rwe){var r=vwt.call(t);return r==="[object GeneratorFunction]"}if(!wU)return!1;if(typeof TU=="undefined"){var i=gwt();TU=i?wU(i):!1}return wU(t)===TU}});var lwe=ie((Xlr,swe)=>{"use strict";var owe=Function.prototype.toString,Zw=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,MU,o6;if(typeof Zw=="function"&&typeof Object.defineProperty=="function")try{MU=Object.defineProperty({},"length",{get:function(){throw o6}}),o6={},Zw(function(){throw 42},null,MU)}catch(e){e!==o6&&(Zw=null)}else Zw=null;var ywt=/^\s*class\b/,SU=function(t){try{var r=owe.call(t);return ywt.test(r)}catch(i){return!1}},AU=function(t){try{return SU(t)?!1:(owe.call(t),!0)}catch(r){return!1}},s6=Object.prototype.toString,mwt="[object Object]",xwt="[object Function]",_wt="[object GeneratorFunction]",bwt="[object HTMLAllCollection]",wwt="[object HTML document.all class]",Twt="[object HTMLCollection]",Awt=typeof Symbol=="function"&&!!Symbol.toStringTag,Mwt=!(0 in[,]),EU=function(){return!1};typeof document=="object"&&(awe=document.all,s6.call(awe)===s6.call(document.all)&&(EU=function(t){if((Mwt||!t)&&(typeof t=="undefined"||typeof t=="object"))try{var r=s6.call(t);return(r===bwt||r===wwt||r===Twt||r===mwt)&&t("")==null}catch(i){}return!1}));var awe;swe.exports=Zw?function(t){if(EU(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{Zw(t,null,MU)}catch(r){if(r!==o6)return!1}return!SU(t)&&AU(t)}:function(t){if(EU(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(Awt)return AU(t);if(SU(t))return!1;var r=s6.call(t);return r!==xwt&&r!==_wt&&!/^\[object HTML/.test(r)?!1:AU(t)}});var kU=ie((Zlr,fwe)=>{"use strict";var Swt=lwe(),Ewt=Object.prototype.toString,uwe=Object.prototype.hasOwnProperty,kwt=function(t,r,i){for(var n=0,a=t.length;n<a;n++)uwe.call(t,n)&&(i==null?r(t[n],n,t):r.call(i,t[n],n,t))},Cwt=function(t,r,i){for(var n=0,a=t.length;n<a;n++)i==null?r(t.charAt(n),n,t):r.call(i,t.charAt(n),n,t)},Lwt=function(t,r,i){for(var n in t)uwe.call(t,n)&&(i==null?r(t[n],n,t):r.call(i,t[n],n,t))},Pwt=function(t,r,i){if(!Swt(r))throw new TypeError("iterator must be a function");var n;arguments.length>=3&&(n=i),Ewt.call(t)==="[object Array]"?kwt(t,r,n):typeof t=="string"?Cwt(t,r,n):Lwt(t,r,n)};fwe.exports=Pwt});var LU=ie((jlr,cwe)=>{"use strict";var CU=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],Rwt=typeof globalThis=="undefined"?window:globalThis;cwe.exports=function(){for(var t=[],r=0;r<CU.length;r++)typeof Rwt[CU[r]]=="function"&&(t[t.length]=CU[r]);return t}});var gwe=ie((Klr,pwe)=>{"use strict";var u6=kU(),Dwt=LU(),hwe=PS(),DU=Xw(),l6=kS(),Iwt=DU("Object.prototype.toString"),dwe=SS()(),vwe=typeof globalThis=="undefined"?window:globalThis,RU=Dwt(),IU=DU("String.prototype.slice"),PU=Object.getPrototypeOf,Fwt=DU("Array.prototype.indexOf",!0)||function(t,r){for(var i=0;i<t.length;i+=1)if(t[i]===r)return i;return-1},f6={__proto__:null};dwe&&l6&&PU?u6(RU,function(e){var t=new vwe[e];if(Symbol.toStringTag in t){var r=PU(t),i=l6(r,Symbol.toStringTag);if(!i){var n=PU(r);i=l6(n,Symbol.toStringTag)}f6["$"+e]=hwe(i.get)}}):u6(RU,function(e){var t=new vwe[e],r=t.slice||t.set;r&&(f6["$"+e]=hwe(r))});var qwt=function(t){var r=!1;return u6(f6,function(i,n){if(!r)try{"$"+i(t)===n&&(r=IU(n,1))}catch(a){}}),r},zwt=function(t){var r=!1;return u6(f6,function(i,n){if(!r)try{i(t),r=IU(n,1)}catch(a){}}),r};pwe.exports=function(t){if(!t||typeof t!="object")return!1;if(!dwe){var r=IU(Iwt(t),8,-1);return Fwt(RU,r)>-1?r:r!=="Object"?!1:zwt(t)}return l6?qwt(t):null}});var wwe=ie((Jlr,bwe)=>{"use strict";var ywe=kU(),Owt=LU(),qU=Xw(),Bwt=qU("Object.prototype.toString"),mwe=SS()(),c6=kS(),Nwt=typeof globalThis=="undefined"?window:globalThis,xwe=Owt(),Uwt=qU("Array.prototype.indexOf",!0)||function(t,r){for(var i=0;i<t.length;i+=1)if(t[i]===r)return i;return-1},Vwt=qU("String.prototype.slice"),_we={},FU=Object.getPrototypeOf;mwe&&c6&&FU&&ywe(xwe,function(e){var t=new Nwt[e];if(Symbol.toStringTag in t){var r=FU(t),i=c6(r,Symbol.toStringTag);if(!i){var n=FU(r);i=c6(n,Symbol.toStringTag)}_we[e]=i.get}});var Hwt=function(t){var r=!1;return ywe(_we,function(i,n){if(!r)try{r=i.call(t)===n}catch(a){}}),r};bwe.exports=function(t){if(!t||typeof t!="object")return!1;if(!mwe||!(Symbol.toStringTag in t)){var r=Vwt(Bwt(t),8,-1);return Uwt(xwe,r)>-1}return c6?Hwt(t):!1}});var BU=ie(is=>{"use strict";var Gwt=twe(),Ywt=iwe(),_0=gwe(),Twe=wwe();function jw(e){return e.call.bind(e)}var Awe=typeof BigInt!="undefined",Mwe=typeof Symbol!="undefined",Rp=jw(Object.prototype.toString),Wwt=jw(Number.prototype.valueOf),Xwt=jw(String.prototype.valueOf),Zwt=jw(Boolean.prototype.valueOf);Awe&&(Swe=jw(BigInt.prototype.valueOf));var Swe;Mwe&&(Ewe=jw(Symbol.prototype.valueOf));var Ewe;function DS(e,t){if(typeof e!="object")return!1;try{return t(e),!0}catch(r){return!1}}is.isArgumentsObject=Gwt;is.isGeneratorFunction=Ywt;is.isTypedArray=Twe;function jwt(e){return typeof Promise!="undefined"&&e instanceof Promise||e!==null&&typeof e=="object"&&typeof e.then=="function"&&typeof e.catch=="function"}is.isPromise=jwt;function Kwt(e){return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?ArrayBuffer.isView(e):Twe(e)||Cwe(e)}is.isArrayBufferView=Kwt;function Jwt(e){return _0(e)==="Uint8Array"}is.isUint8Array=Jwt;function Qwt(e){return _0(e)==="Uint8ClampedArray"}is.isUint8ClampedArray=Qwt;function $wt(e){return _0(e)==="Uint16Array"}is.isUint16Array=$wt;function e3t(e){return _0(e)==="Uint32Array"}is.isUint32Array=e3t;function t3t(e){return _0(e)==="Int8Array"}is.isInt8Array=t3t;function r3t(e){return _0(e)==="Int16Array"}is.isInt16Array=r3t;function n3t(e){return _0(e)==="Int32Array"}is.isInt32Array=n3t;function i3t(e){return _0(e)==="Float32Array"}is.isFloat32Array=i3t;function a3t(e){return _0(e)==="Float64Array"}is.isFloat64Array=a3t;function o3t(e){return _0(e)==="BigInt64Array"}is.isBigInt64Array=o3t;function s3t(e){return _0(e)==="BigUint64Array"}is.isBigUint64Array=s3t;function h6(e){return Rp(e)==="[object Map]"}h6.working=typeof Map!="undefined"&&h6(new Map);function l3t(e){return typeof Map=="undefined"?!1:h6.working?h6(e):e instanceof Map}is.isMap=l3t;function v6(e){return Rp(e)==="[object Set]"}v6.working=typeof Set!="undefined"&&v6(new Set);function u3t(e){return typeof Set=="undefined"?!1:v6.working?v6(e):e instanceof Set}is.isSet=u3t;function d6(e){return Rp(e)==="[object WeakMap]"}d6.working=typeof WeakMap!="undefined"&&d6(new WeakMap);function f3t(e){return typeof WeakMap=="undefined"?!1:d6.working?d6(e):e instanceof WeakMap}is.isWeakMap=f3t;function OU(e){return Rp(e)==="[object WeakSet]"}OU.working=typeof WeakSet!="undefined"&&OU(new WeakSet);function c3t(e){return OU(e)}is.isWeakSet=c3t;function p6(e){return Rp(e)==="[object ArrayBuffer]"}p6.working=typeof ArrayBuffer!="undefined"&&p6(new ArrayBuffer);function kwe(e){return typeof ArrayBuffer=="undefined"?!1:p6.working?p6(e):e instanceof ArrayBuffer}is.isArrayBuffer=kwe;function g6(e){return Rp(e)==="[object DataView]"}g6.working=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"&&g6(new DataView(new ArrayBuffer(1),0,1));function Cwe(e){return typeof DataView=="undefined"?!1:g6.working?g6(e):e instanceof DataView}is.isDataView=Cwe;var zU=typeof SharedArrayBuffer!="undefined"?SharedArrayBuffer:void 0;function RS(e){return Rp(e)==="[object SharedArrayBuffer]"}function Lwe(e){return typeof zU=="undefined"?!1:(typeof RS.working=="undefined"&&(RS.working=RS(new zU)),RS.working?RS(e):e instanceof zU)}is.isSharedArrayBuffer=Lwe;function h3t(e){return Rp(e)==="[object AsyncFunction]"}is.isAsyncFunction=h3t;function v3t(e){return Rp(e)==="[object Map Iterator]"}is.isMapIterator=v3t;function d3t(e){return Rp(e)==="[object Set Iterator]"}is.isSetIterator=d3t;function p3t(e){return Rp(e)==="[object Generator]"}is.isGeneratorObject=p3t;function g3t(e){return Rp(e)==="[object WebAssembly.Module]"}is.isWebAssemblyCompiledModule=g3t;function Pwe(e){return DS(e,Wwt)}is.isNumberObject=Pwe;function Rwe(e){return DS(e,Xwt)}is.isStringObject=Rwe;function Dwe(e){return DS(e,Zwt)}is.isBooleanObject=Dwe;function Iwe(e){return Awe&&DS(e,Swe)}is.isBigIntObject=Iwe;function Fwe(e){return Mwe&&DS(e,Ewe)}is.isSymbolObject=Fwe;function y3t(e){return Pwe(e)||Rwe(e)||Dwe(e)||Iwe(e)||Fwe(e)}is.isBoxedPrimitive=y3t;function m3t(e){return typeof Uint8Array!="undefined"&&(kwe(e)||Lwe(e))}is.isAnyArrayBuffer=m3t;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(e){Object.defineProperty(is,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})})});var NU=ie(($lr,qwe)=>{qwe.exports=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}});var WU=ie(as=>{var zwe=Object.getOwnPropertyDescriptors||function(t){for(var r=Object.keys(t),i={},n=0;n<r.length;n++)i[r[n]]=Object.getOwnPropertyDescriptor(t,r[n]);return i},x3t=/%[sdj%]/g;as.format=function(e){if(!T6(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(Hm(arguments[r]));return t.join(" ")}for(var r=1,i=arguments,n=i.length,a=String(e).replace(x3t,function(s){if(s==="%%")return"%";if(r>=n)return s;switch(s){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(l){return"[Circular]"}default:return s}}),o=i[r];r<n;o=i[++r])w6(o)||!Kw(o)?a+=" "+o:a+=" "+Hm(o);return a};as.deprecate=function(e,t){if(typeof process!="undefined"&&process.noDeprecation===!0)return e;if(typeof process=="undefined")return function(){return as.deprecate(e,t).apply(this,arguments)};var r=!1;function i(){if(!r){if(process.throwDeprecation)throw new Error(t);process.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}return i};var y6={},Owe=/^$/;m6="false",m6=m6.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),Owe=new RegExp("^"+m6+"$","i");var m6;as.debuglog=function(e){if(e=e.toUpperCase(),!y6[e])if(Owe.test(e)){var t=process.pid;y6[e]=function(){var r=as.format.apply(as,arguments);console.error("%s %d: %s",e,t,r)}}else y6[e]=function(){};return y6[e]};function Hm(e,t){var r={seen:[],stylize:b3t};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),GU(t)?r.showHidden=t:t&&as._extend(r,t),c_(r.showHidden)&&(r.showHidden=!1),c_(r.depth)&&(r.depth=2),c_(r.colors)&&(r.colors=!1),c_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=_3t),_6(r,e,r.depth)}as.inspect=Hm;Hm.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Hm.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function _3t(e,t){var r=Hm.styles[t];return r?"\x1B["+Hm.colors[r][0]+"m"+e+"\x1B["+Hm.colors[r][1]+"m":e}function b3t(e,t){return e}function w3t(e){var t={};return e.forEach(function(r,i){t[r]=!0}),t}function _6(e,t,r){if(e.customInspect&&t&&x6(t.inspect)&&t.inspect!==as.inspect&&!(t.constructor&&t.constructor.prototype===t)){var i=t.inspect(r,e);return T6(i)||(i=_6(e,i,r)),i}var n=T3t(e,t);if(n)return n;var a=Object.keys(t),o=w3t(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),FS(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return UU(t);if(a.length===0){if(x6(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(IS(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(b6(t))return e.stylize(Date.prototype.toString.call(t),"date");if(FS(t))return UU(t)}var l="",u=!1,f=["{","}"];if(Bwe(t)&&(u=!0,f=["[","]"]),x6(t)){var c=t.name?": "+t.name:"";l=" [Function"+c+"]"}if(IS(t)&&(l=" "+RegExp.prototype.toString.call(t)),b6(t)&&(l=" "+Date.prototype.toUTCString.call(t)),FS(t)&&(l=" "+UU(t)),a.length===0&&(!u||t.length==0))return f[0]+l+f[1];if(r<0)return IS(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var h;return u?h=A3t(e,t,r,o,a):h=a.map(function(v){return HU(e,t,r,o,v,u)}),e.seen.pop(),M3t(h,l,f)}function T3t(e,t){if(c_(t))return e.stylize("undefined","undefined");if(T6(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(Nwe(t))return e.stylize(""+t,"number");if(GU(t))return e.stylize(""+t,"boolean");if(w6(t))return e.stylize("null","null")}function UU(e){return"["+Error.prototype.toString.call(e)+"]"}function A3t(e,t,r,i,n){for(var a=[],o=0,s=t.length;o<s;++o)Uwe(t,String(o))?a.push(HU(e,t,r,i,String(o),!0)):a.push("");return n.forEach(function(l){l.match(/^\d+$/)||a.push(HU(e,t,r,i,l,!0))}),a}function HU(e,t,r,i,n,a){var o,s,l;if(l=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]},l.get?l.set?s=e.stylize("[Getter/Setter]","special"):s=e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),Uwe(i,n)||(o="["+n+"]"),s||(e.seen.indexOf(l.value)<0?(w6(r)?s=_6(e,l.value,null):s=_6(e,l.value,r-1),s.indexOf(`
`)>-1&&(a?s=s.split(`
`).map(function(u){return"  "+u}).join(`
`).slice(2):s=`
`+s.split(`
`).map(function(u){return"   "+u}).join(`
`))):s=e.stylize("[Circular]","special")),c_(o)){if(a&&n.match(/^\d+$/))return s;o=JSON.stringify(""+n),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.slice(1,-1),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function M3t(e,t,r){var i=0,n=e.reduce(function(a,o){return i++,o.indexOf(`
`)>=0&&i++,a+o.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?r[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}as.types=BU();function Bwe(e){return Array.isArray(e)}as.isArray=Bwe;function GU(e){return typeof e=="boolean"}as.isBoolean=GU;function w6(e){return e===null}as.isNull=w6;function S3t(e){return e==null}as.isNullOrUndefined=S3t;function Nwe(e){return typeof e=="number"}as.isNumber=Nwe;function T6(e){return typeof e=="string"}as.isString=T6;function E3t(e){return typeof e=="symbol"}as.isSymbol=E3t;function c_(e){return e===void 0}as.isUndefined=c_;function IS(e){return Kw(e)&&YU(e)==="[object RegExp]"}as.isRegExp=IS;as.types.isRegExp=IS;function Kw(e){return typeof e=="object"&&e!==null}as.isObject=Kw;function b6(e){return Kw(e)&&YU(e)==="[object Date]"}as.isDate=b6;as.types.isDate=b6;function FS(e){return Kw(e)&&(YU(e)==="[object Error]"||e instanceof Error)}as.isError=FS;as.types.isNativeError=FS;function x6(e){return typeof e=="function"}as.isFunction=x6;function k3t(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e=="undefined"}as.isPrimitive=k3t;as.isBuffer=NU();function YU(e){return Object.prototype.toString.call(e)}function VU(e){return e<10?"0"+e.toString(10):e.toString(10)}var C3t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function L3t(){var e=new Date,t=[VU(e.getHours()),VU(e.getMinutes()),VU(e.getSeconds())].join(":");return[e.getDate(),C3t[e.getMonth()],t].join(" ")}as.log=function(){console.log("%s - %s",L3t(),as.format.apply(as,arguments))};as.inherits=oy();as._extend=function(e,t){if(!t||!Kw(t))return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e};function Uwe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var f_=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;as.promisify=function(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');if(f_&&t[f_]){var r=t[f_];if(typeof r!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,f_,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var i,n,a=new Promise(function(l,u){i=l,n=u}),o=[],s=0;s<arguments.length;s++)o.push(arguments[s]);o.push(function(l,u){l?n(l):i(u)});try{t.apply(this,o)}catch(l){n(l)}return a}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),f_&&Object.defineProperty(r,f_,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,zwe(t))};as.promisify.custom=f_;function P3t(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function R3t(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');function t(){for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i]);var n=r.pop();if(typeof n!="function")throw new TypeError("The last argument must be of type Function");var a=this,o=function(){return n.apply(a,arguments)};e.apply(this,r).then(function(s){process.nextTick(o.bind(null,null,s))},function(s){process.nextTick(P3t.bind(null,s,o))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,zwe(e)),t}as.callbackify=R3t});var Ywe=ie((tur,Gwe)=>{"use strict";function Vwe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function D3t(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vwe(Object(r),!0).forEach(function(i){I3t(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vwe(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function I3t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F3t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hwe(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function q3t(e,t,r){return t&&Hwe(e.prototype,t),r&&Hwe(e,r),e}var z3t=o_(),A6=z3t.Buffer,O3t=WU(),XU=O3t.inspect,B3t=XU&&XU.custom||"inspect";function N3t(e,t,r){A6.prototype.copy.call(e,t,r)}Gwe.exports=function(){function e(){F3t(this,e),this.head=null,this.tail=null,this.length=0}return q3t(e,[{key:"push",value:function(r){var i={data:r,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}},{key:"unshift",value:function(r){var i={data:r,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var i=this.head,n=""+i.data;i=i.next;)n+=r+i.data;return n}},{key:"concat",value:function(r){if(this.length===0)return A6.alloc(0);for(var i=A6.allocUnsafe(r>>>0),n=this.head,a=0;n;)N3t(n.data,i,a),a+=n.data.length,n=n.next;return i}},{key:"consume",value:function(r,i){var n;return r<this.head.data.length?(n=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?n=this.shift():n=i?this._getString(r):this._getBuffer(r),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var i=this.head,n=1,a=i.data;for(r-=a.length;i=i.next;){var o=i.data,s=r>o.length?o.length:r;if(s===o.length?a+=o:a+=o.slice(0,r),r-=s,r===0){s===o.length?(++n,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(s));break}++n}return this.length-=n,a}},{key:"_getBuffer",value:function(r){var i=A6.allocUnsafe(r),n=this.head,a=1;for(n.data.copy(i),r-=n.data.length;n=n.next;){var o=n.data,s=r>o.length?o.length:r;if(o.copy(i,i.length-r,0,s),r-=s,r===0){s===o.length?(++a,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(s));break}++a}return this.length-=a,i}},{key:B3t,value:function(r,i){return XU(this,D3t({},i,{depth:0,customInspect:!1}))}}]),e}()});var jU=ie((rur,Xwe)=>{"use strict";function U3t(e,t){var r=this,i=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return i||n?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(ZU,this,e)):process.nextTick(ZU,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(a){!t&&a?r._writableState?r._writableState.errorEmitted?process.nextTick(M6,r):(r._writableState.errorEmitted=!0,process.nextTick(Wwe,r,a)):process.nextTick(Wwe,r,a):t?(process.nextTick(M6,r),t(a)):process.nextTick(M6,r)}),this)}function Wwe(e,t){ZU(e,t),M6(e)}function M6(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function V3t(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function ZU(e,t){e.emit("error",t)}function H3t(e,t){var r=e._readableState,i=e._writableState;r&&r.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}Xwe.exports={destroy:U3t,undestroy:V3t,errorOrDestroy:H3t}});var h_=ie((nur,Kwe)=>{"use strict";function G3t(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var jwe={};function Dp(e,t,r){r||(r=Error);function i(a,o,s){return typeof t=="string"?t:t(a,o,s)}var n=function(a){G3t(o,a);function o(s,l,u){return a.call(this,i(s,l,u))||this}return o}(r);n.prototype.name=r.name,n.prototype.code=e,jwe[e]=n}function Zwe(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(i){return String(i)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function Y3t(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function W3t(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function X3t(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}Dp("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);Dp("ERR_INVALID_ARG_TYPE",function(e,t,r){var i;typeof t=="string"&&Y3t(t,"not ")?(i="must not be",t=t.replace(/^not /,"")):i="must be";var n;if(W3t(e," argument"))n="The ".concat(e," ").concat(i," ").concat(Zwe(t,"type"));else{var a=X3t(e,".")?"property":"argument";n='The "'.concat(e,'" ').concat(a," ").concat(i," ").concat(Zwe(t,"type"))}return n+=". Received type ".concat(typeof r),n},TypeError);Dp("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Dp("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});Dp("ERR_STREAM_PREMATURE_CLOSE","Premature close");Dp("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});Dp("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Dp("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Dp("ERR_STREAM_WRITE_AFTER_END","write after end");Dp("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Dp("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);Dp("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Kwe.exports.codes=jwe});var KU=ie((iur,Jwe)=>{"use strict";var Z3t=h_().codes.ERR_INVALID_OPT_VALUE;function j3t(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function K3t(e,t,r,i){var n=j3t(t,i,r);if(n!=null){if(!(isFinite(n)&&Math.floor(n)===n)||n<0){var a=i?r:"highWaterMark";throw new Z3t(a,n)}return Math.floor(n)}return e.objectMode?16:16*1024}Jwe.exports={getHighWaterMark:K3t}});var $we=ie((aur,Qwe)=>{Qwe.exports=J3t;function J3t(e,t){if(JU("noDeprecation"))return e;var r=!1;function i(){if(!r){if(JU("throwDeprecation"))throw new Error(t);JU("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}return i}function JU(e){try{if(!window.localStorage)return!1}catch(r){return!1}var t=window.localStorage[e];return t==null?!1:String(t).toLowerCase()==="true"}});var eV=ie((our,a3e)=>{"use strict";a3e.exports=of;function t3e(e){var t=this;this.next=null,this.entry=null,this.finish=function(){ATt(t,e)}}var Jw;of.WritableState=zS;var Q3t={deprecate:$we()},r3e=iU(),E6=o_().Buffer,$3t=window.Uint8Array||function(){};function eTt(e){return E6.from(e)}function tTt(e){return E6.isBuffer(e)||e instanceof $3t}var $U=jU(),rTt=KU(),nTt=rTt.getHighWaterMark,Gm=h_().codes,iTt=Gm.ERR_INVALID_ARG_TYPE,aTt=Gm.ERR_METHOD_NOT_IMPLEMENTED,oTt=Gm.ERR_MULTIPLE_CALLBACK,sTt=Gm.ERR_STREAM_CANNOT_PIPE,lTt=Gm.ERR_STREAM_DESTROYED,uTt=Gm.ERR_STREAM_NULL_VALUES,fTt=Gm.ERR_STREAM_WRITE_AFTER_END,cTt=Gm.ERR_UNKNOWN_ENCODING,Qw=$U.errorOrDestroy;oy()(of,r3e);function hTt(){}function zS(e,t,r){Jw=Jw||v_(),e=e||{},typeof r!="boolean"&&(r=t instanceof Jw),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=nTt(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=e.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(n){xTt(t,n)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=e.emitClose!==!1,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t3e(this)}zS.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};(function(){try{Object.defineProperty(zS.prototype,"buffer",{get:Q3t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}})();var S6;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(S6=Function.prototype[Symbol.hasInstance],Object.defineProperty(of,Symbol.hasInstance,{value:function(t){return S6.call(this,t)?!0:this!==of?!1:t&&t._writableState instanceof zS}})):S6=function(t){return t instanceof this};function of(e){Jw=Jw||v_();var t=this instanceof Jw;if(!t&&!S6.call(of,this))return new of(e);this._writableState=new zS(e,this,t),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),r3e.call(this)}of.prototype.pipe=function(){Qw(this,new sTt)};function vTt(e,t){var r=new fTt;Qw(e,r),process.nextTick(t,r)}function dTt(e,t,r,i){var n;return r===null?n=new uTt:typeof r!="string"&&!t.objectMode&&(n=new iTt("chunk",["string","Buffer"],r)),n?(Qw(e,n),process.nextTick(i,n),!1):!0}of.prototype.write=function(e,t,r){var i=this._writableState,n=!1,a=!i.objectMode&&tTt(e);return a&&!E6.isBuffer(e)&&(e=eTt(e)),typeof t=="function"&&(r=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),typeof r!="function"&&(r=hTt),i.ending?vTt(this,r):(a||dTt(this,i,e,r))&&(i.pendingcb++,n=gTt(this,i,a,e,t,r)),n};of.prototype.cork=function(){this._writableState.corked++};of.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest&&n3e(this,e))};of.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new cTt(t);return this._writableState.defaultEncoding=t,this};Object.defineProperty(of.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function pTt(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=E6.from(t,r)),t}Object.defineProperty(of.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function gTt(e,t,r,i,n,a){if(!r){var o=pTt(t,i,n);i!==o&&(r=!0,n="buffer",i=o)}var s=t.objectMode?1:i.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:a,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else QU(e,t,!1,s,i,n,a);return l}function QU(e,t,r,i,n,a,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new lTt("write")):r?e._writev(n,t.onwrite):e._write(n,a,t.onwrite),t.sync=!1}function yTt(e,t,r,i,n){--t.pendingcb,r?(process.nextTick(n,i),process.nextTick(qS,e,t),e._writableState.errorEmitted=!0,Qw(e,i)):(n(i),e._writableState.errorEmitted=!0,Qw(e,i),qS(e,t))}function mTt(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function xTt(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if(typeof n!="function")throw new oTt;if(mTt(r),t)yTt(e,r,i,t,n);else{var a=i3e(r)||e.destroyed;!a&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&n3e(e,r),i?process.nextTick(e3e,e,r,a,n):e3e(e,r,a,n)}}function e3e(e,t,r,i){r||_Tt(e,t),t.pendingcb--,i(),qS(e,t)}function _Tt(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function n3e(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,n=new Array(i),a=t.corkedRequestsFree;a.entry=r;for(var o=0,s=!0;r;)n[o]=r,r.isBuf||(s=!1),r=r.next,o+=1;n.allBuffers=s,QU(e,t,!0,t.length,n,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new t3e(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,u=r.encoding,f=r.callback,c=t.objectMode?1:l.length;if(QU(e,t,!1,c,l,u,f),r=r.next,t.bufferedRequestCount--,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}of.prototype._write=function(e,t,r){r(new aTt("_write()"))};of.prototype._writev=null;of.prototype.end=function(e,t,r){var i=this._writableState;return typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||TTt(this,i,r),this};Object.defineProperty(of.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function i3e(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function bTt(e,t){e._final(function(r){t.pendingcb--,r&&Qw(e,r),t.prefinished=!0,e.emit("prefinish"),qS(e,t)})}function wTt(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"&&!t.destroyed?(t.pendingcb++,t.finalCalled=!0,process.nextTick(bTt,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function qS(e,t){var r=i3e(t);if(r&&(wTt(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}function TTt(e,t,r){t.ending=!0,qS(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function ATt(e,t,r){var i=e.entry;for(e.entry=null;i;){var n=i.callback;t.pendingcb--,n(r),i=i.next}t.corkedRequestsFree.next=e}Object.defineProperty(of.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}});of.prototype.destroy=$U.destroy;of.prototype._undestroy=$U.undestroy;of.prototype._destroy=function(e,t){t(e)}});var v_=ie((sur,s3e)=>{"use strict";var MTt=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};s3e.exports=og;var o3e=nV(),rV=eV();oy()(og,o3e);for(tV=MTt(rV.prototype),k6=0;k6<tV.length;k6++)C6=tV[k6],og.prototype[C6]||(og.prototype[C6]=rV.prototype[C6]);var tV,C6,k6;function og(e){if(!(this instanceof og))return new og(e);o3e.call(this,e),rV.call(this,e),this.allowHalfOpen=!0,e&&(e.readable===!1&&(this.readable=!1),e.writable===!1&&(this.writable=!1),e.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",STt)))}Object.defineProperty(og.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(og.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(og.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function STt(){this._writableState.ended||process.nextTick(ETt,this)}function ETt(e){e.end()}Object.defineProperty(og.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=t,this._writableState.destroyed=t)}})});var f3e=ie((iV,u3e)=>{var L6=o_(),sg=L6.Buffer;function l3e(e,t){for(var r in e)t[r]=e[r]}sg.from&&sg.alloc&&sg.allocUnsafe&&sg.allocUnsafeSlow?u3e.exports=L6:(l3e(L6,iV),iV.Buffer=d_);function d_(e,t,r){return sg(e,t,r)}d_.prototype=Object.create(sg.prototype);l3e(sg,d_);d_.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return sg(e,t,r)};d_.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var i=sg(e);return t!==void 0?typeof r=="string"?i.fill(t,r):i.fill(t):i.fill(0),i};d_.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return sg(e)};d_.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return L6.SlowBuffer(e)}});var sV=ie(h3e=>{"use strict";var oV=f3e().Buffer,c3e=oV.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function kTt(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function CTt(e){var t=kTt(e);if(typeof t!="string"&&(oV.isEncoding===c3e||!c3e(e)))throw new Error("Unknown encoding: "+e);return t||e}h3e.StringDecoder=OS;function OS(e){this.encoding=CTt(e);var t;switch(this.encoding){case"utf16le":this.text=FTt,this.end=qTt,t=4;break;case"utf8":this.fillLast=RTt,t=4;break;case"base64":this.text=zTt,this.end=OTt,t=3;break;default:this.write=BTt,this.end=NTt;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=oV.allocUnsafe(t)}OS.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};OS.prototype.end=ITt;OS.prototype.text=DTt;OS.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function aV(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function LTt(e,t,r){var i=t.length-1;if(i<r)return 0;var n=aV(t[i]);return n>=0?(n>0&&(e.lastNeed=n-1),n):--i<r||n===-2?0:(n=aV(t[i]),n>=0?(n>0&&(e.lastNeed=n-2),n):--i<r||n===-2?0:(n=aV(t[i]),n>=0?(n>0&&(n===2?n=0:e.lastNeed=n-3),n):0))}function PTt(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function RTt(e){var t=this.lastTotal-this.lastNeed,r=PTt(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function DTt(e,t){var r=LTt(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var i=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)}function ITt(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}function FTt(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function qTt(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function zTt(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function OTt(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function BTt(e){return e.toString(this.encoding)}function NTt(e){return e&&e.length?this.write(e):""}});var P6=ie((uur,p3e)=>{"use strict";var v3e=h_().codes.ERR_STREAM_PREMATURE_CLOSE;function UTt(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];e.apply(this,i)}}}function VTt(){}function HTt(e){return e.setHeader&&typeof e.abort=="function"}function d3e(e,t,r){if(typeof t=="function")return d3e(e,null,t);t||(t={}),r=UTt(r||VTt);var i=t.readable||t.readable!==!1&&e.readable,n=t.writable||t.writable!==!1&&e.writable,a=function(){e.writable||s()},o=e._writableState&&e._writableState.finished,s=function(){n=!1,o=!0,i||r.call(e)},l=e._readableState&&e._readableState.endEmitted,u=function(){i=!1,l=!0,n||r.call(e)},f=function(d){r.call(e,d)},c=function(){var d;if(i&&!l)return(!e._readableState||!e._readableState.ended)&&(d=new v3e),r.call(e,d);if(n&&!o)return(!e._writableState||!e._writableState.ended)&&(d=new v3e),r.call(e,d)},h=function(){e.req.on("finish",s)};return HTt(e)?(e.on("complete",s),e.on("abort",c),e.req?h():e.on("request",h)):n&&!e._writableState&&(e.on("end",a),e.on("close",a)),e.on("end",u),e.on("finish",s),t.error!==!1&&e.on("error",f),e.on("close",c),function(){e.removeListener("complete",s),e.removeListener("abort",c),e.removeListener("request",h),e.req&&e.req.removeListener("finish",s),e.removeListener("end",a),e.removeListener("close",a),e.removeListener("finish",s),e.removeListener("end",u),e.removeListener("error",f),e.removeListener("close",c)}}p3e.exports=d3e});var y3e=ie((fur,g3e)=>{"use strict";var R6;function Ym(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var GTt=P6(),Wm=Symbol("lastResolve"),p_=Symbol("lastReject"),BS=Symbol("error"),D6=Symbol("ended"),g_=Symbol("lastPromise"),lV=Symbol("handlePromise"),y_=Symbol("stream");function Xm(e,t){return{value:e,done:t}}function YTt(e){var t=e[Wm];if(t!==null){var r=e[y_].read();r!==null&&(e[g_]=null,e[Wm]=null,e[p_]=null,t(Xm(r,!1)))}}function WTt(e){process.nextTick(YTt,e)}function XTt(e,t){return function(r,i){e.then(function(){if(t[D6]){r(Xm(void 0,!0));return}t[lV](r,i)},i)}}var ZTt=Object.getPrototypeOf(function(){}),jTt=Object.setPrototypeOf((R6={get stream(){return this[y_]},next:function(){var t=this,r=this[BS];if(r!==null)return Promise.reject(r);if(this[D6])return Promise.resolve(Xm(void 0,!0));if(this[y_].destroyed)return new Promise(function(o,s){process.nextTick(function(){t[BS]?s(t[BS]):o(Xm(void 0,!0))})});var i=this[g_],n;if(i)n=new Promise(XTt(i,this));else{var a=this[y_].read();if(a!==null)return Promise.resolve(Xm(a,!1));n=new Promise(this[lV])}return this[g_]=n,n}},Ym(R6,Symbol.asyncIterator,function(){return this}),Ym(R6,"return",function(){var t=this;return new Promise(function(r,i){t[y_].destroy(null,function(n){if(n){i(n);return}r(Xm(void 0,!0))})})}),R6),ZTt),KTt=function(t){var r,i=Object.create(jTt,(r={},Ym(r,y_,{value:t,writable:!0}),Ym(r,Wm,{value:null,writable:!0}),Ym(r,p_,{value:null,writable:!0}),Ym(r,BS,{value:null,writable:!0}),Ym(r,D6,{value:t._readableState.endEmitted,writable:!0}),Ym(r,lV,{value:function(a,o){var s=i[y_].read();s?(i[g_]=null,i[Wm]=null,i[p_]=null,a(Xm(s,!1))):(i[Wm]=a,i[p_]=o)},writable:!0}),r));return i[g_]=null,GTt(t,function(n){if(n&&n.code!=="ERR_STREAM_PREMATURE_CLOSE"){var a=i[p_];a!==null&&(i[g_]=null,i[Wm]=null,i[p_]=null,a(n)),i[BS]=n;return}var o=i[Wm];o!==null&&(i[g_]=null,i[Wm]=null,i[p_]=null,o(Xm(void 0,!0))),i[D6]=!0}),t.on("readable",WTt.bind(null,i)),i};g3e.exports=KTt});var x3e=ie((cur,m3e)=>{m3e.exports=function(){throw new Error("Readable.from is not available in the browser")}});var nV=ie((vur,C3e)=>{"use strict";C3e.exports=Rs;var $w;Rs.ReadableState=T3e;var hur=cx().EventEmitter,w3e=function(t,r){return t.listeners(r).length},US=iU(),I6=o_().Buffer,JTt=window.Uint8Array||function(){};function QTt(e){return I6.from(e)}function $Tt(e){return I6.isBuffer(e)||e instanceof JTt}var uV=WU(),Qo;uV&&uV.debuglog?Qo=uV.debuglog("stream"):Qo=function(){};var eAt=Ywe(),gV=jU(),tAt=KU(),rAt=tAt.getHighWaterMark,F6=h_().codes,nAt=F6.ERR_INVALID_ARG_TYPE,iAt=F6.ERR_STREAM_PUSH_AFTER_EOF,aAt=F6.ERR_METHOD_NOT_IMPLEMENTED,oAt=F6.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,e3,fV,cV;oy()(Rs,US);var NS=gV.errorOrDestroy,hV=["error","close","destroy","pause","resume"];function sAt(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function T3e(e,t,r){$w=$w||v_(),e=e||{},typeof r!="boolean"&&(r=t instanceof $w),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=rAt(this,e,"readableHighWaterMark",r),this.buffer=new eAt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=e.emitClose!==!1,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(e3||(e3=sV().StringDecoder),this.decoder=new e3(e.encoding),this.encoding=e.encoding)}function Rs(e){if($w=$w||v_(),!(this instanceof Rs))return new Rs(e);var t=this instanceof $w;this._readableState=new T3e(e,this,t),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),US.call(this)}Object.defineProperty(Rs.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}});Rs.prototype.destroy=gV.destroy;Rs.prototype._undestroy=gV.undestroy;Rs.prototype._destroy=function(e,t){t(e)};Rs.prototype.push=function(e,t){var r=this._readableState,i;return r.objectMode?i=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=I6.from(e,t),t=""),i=!0),A3e(this,e,t,!1,i)};Rs.prototype.unshift=function(e){return A3e(this,e,null,!0,!1)};function A3e(e,t,r,i,n){Qo("readableAddChunk",t);var a=e._readableState;if(t===null)a.reading=!1,fAt(e,a);else{var o;if(n||(o=lAt(a,t)),o)NS(e,o);else if(a.objectMode||t&&t.length>0)if(typeof t!="string"&&!a.objectMode&&Object.getPrototypeOf(t)!==I6.prototype&&(t=QTt(t)),i)a.endEmitted?NS(e,new oAt):vV(e,a,t,!0);else if(a.ended)NS(e,new iAt);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||t.length!==0?vV(e,a,t,!1):pV(e,a)):vV(e,a,t,!1)}else i||(a.reading=!1,pV(e,a))}return!a.ended&&(a.length<a.highWaterMark||a.length===0)}function vV(e,t,r,i){t.flowing&&t.length===0&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&q6(e)),pV(e,t)}function lAt(e,t){var r;return!$Tt(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new nAt("chunk",["string","Buffer","Uint8Array"],t)),r}Rs.prototype.isPaused=function(){return this._readableState.flowing===!1};Rs.prototype.setEncoding=function(e){e3||(e3=sV().StringDecoder);var t=new e3(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";r!==null;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),i!==""&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var _3e=1073741824;function uAt(e){return e>=_3e?e=_3e:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function b3e(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=uAt(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}Rs.prototype.read=function(e){Qo("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&((t.highWaterMark!==0?t.length>=t.highWaterMark:t.length>0)||t.ended))return Qo("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?dV(this):q6(this),null;if(e=b3e(e,t),e===0&&t.ended)return t.length===0&&dV(this),null;var i=t.needReadable;Qo("need readable",i),(t.length===0||t.length-e<t.highWaterMark)&&(i=!0,Qo("length less than watermark",i)),t.ended||t.reading?(i=!1,Qo("reading or ended",i)):i&&(Qo("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=b3e(r,t)));var n;return e>0?n=E3e(e,t):n=null,n===null?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&dV(this)),n!==null&&this.emit("data",n),n};function fAt(e,t){if(Qo("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?q6(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,M3e(e)))}}function q6(e){var t=e._readableState;Qo("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(Qo("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(M3e,e))}function M3e(e){var t=e._readableState;Qo("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,yV(e)}function pV(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(cAt,e,t))}function cAt(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0);){var r=t.length;if(Qo("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}Rs.prototype._read=function(e){NS(this,new aAt("_read()"))};Rs.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e);break}i.pipesCount+=1,Qo("pipe count=%d opts=%j",i.pipesCount,t);var n=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,a=n?s:x;i.endEmitted?process.nextTick(a):r.once("end",a),e.on("unpipe",o);function o(b,p){Qo("onunpipe"),b===r&&p&&p.hasUnpiped===!1&&(p.hasUnpiped=!0,f())}function s(){Qo("onend"),e.end()}var l=hAt(r);e.on("drain",l);var u=!1;function f(){Qo("cleanup"),e.removeListener("close",v),e.removeListener("finish",d),e.removeListener("drain",l),e.removeListener("error",h),e.removeListener("unpipe",o),r.removeListener("end",s),r.removeListener("end",x),r.removeListener("data",c),u=!0,i.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&l()}r.on("data",c);function c(b){Qo("ondata");var p=e.write(b);Qo("dest.write",p),p===!1&&((i.pipesCount===1&&i.pipes===e||i.pipesCount>1&&k3e(i.pipes,e)!==-1)&&!u&&(Qo("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function h(b){Qo("onerror",b),x(),e.removeListener("error",h),w3e(e,"error")===0&&NS(e,b)}sAt(e,"error",h);function v(){e.removeListener("finish",d),x()}e.once("close",v);function d(){Qo("onfinish"),e.removeListener("close",v),x()}e.once("finish",d);function x(){Qo("unpipe"),r.unpipe(e)}return e.emit("pipe",r),i.flowing||(Qo("pipe resume"),r.resume()),e};function hAt(e){return function(){var r=e._readableState;Qo("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&w3e(e,"data")&&(r.flowing=!0,yV(e))}}Rs.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<n;a++)i[a].emit("unpipe",this,{hasUnpiped:!1});return this}var o=k3e(t.pipes,e);return o===-1?this:(t.pipes.splice(o,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};Rs.prototype.on=function(e,t){var r=US.prototype.on.call(this,e,t),i=this._readableState;return e==="data"?(i.readableListening=this.listenerCount("readable")>0,i.flowing!==!1&&this.resume()):e==="readable"&&!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,Qo("on readable",i.length,i.reading),i.length?q6(this):i.reading||process.nextTick(vAt,this)),r};Rs.prototype.addListener=Rs.prototype.on;Rs.prototype.removeListener=function(e,t){var r=US.prototype.removeListener.call(this,e,t);return e==="readable"&&process.nextTick(S3e,this),r};Rs.prototype.removeAllListeners=function(e){var t=US.prototype.removeAllListeners.apply(this,arguments);return(e==="readable"||e===void 0)&&process.nextTick(S3e,this),t};function S3e(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function vAt(e){Qo("readable nexttick read 0"),e.read(0)}Rs.prototype.resume=function(){var e=this._readableState;return e.flowing||(Qo("resume"),e.flowing=!e.readableListening,dAt(this,e)),e.paused=!1,this};function dAt(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(pAt,e,t))}function pAt(e,t){Qo("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),yV(e),t.flowing&&!t.reading&&e.read(0)}Rs.prototype.pause=function(){return Qo("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Qo("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function yV(e){var t=e._readableState;for(Qo("flow",t.flowing);t.flowing&&e.read()!==null;);}Rs.prototype.wrap=function(e){var t=this,r=this._readableState,i=!1;e.on("end",function(){if(Qo("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&t.push(o)}t.push(null)}),e.on("data",function(o){if(Qo("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var s=t.push(o);s||(i=!0,e.pause())}});for(var n in e)this[n]===void 0&&typeof e[n]=="function"&&(this[n]=function(s){return function(){return e[s].apply(e,arguments)}}(n));for(var a=0;a<hV.length;a++)e.on(hV[a],this.emit.bind(this,hV[a]));return this._read=function(o){Qo("wrapped _read",o),i&&(i=!1,e.resume())},this};typeof Symbol=="function"&&(Rs.prototype[Symbol.asyncIterator]=function(){return fV===void 0&&(fV=y3e()),fV(this)});Object.defineProperty(Rs.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Rs.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Rs.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}});Rs._fromList=E3e;Object.defineProperty(Rs.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function E3e(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.first():r=t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r}function dV(e){var t=e._readableState;Qo("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(gAt,t,e))}function gAt(e,t){if(Qo("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}typeof Symbol=="function"&&(Rs.from=function(e,t){return cV===void 0&&(cV=x3e()),cV(Rs,e,t)});function k3e(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}});var mV=ie((dur,P3e)=>{"use strict";P3e.exports=ly;var z6=h_().codes,yAt=z6.ERR_METHOD_NOT_IMPLEMENTED,mAt=z6.ERR_MULTIPLE_CALLBACK,xAt=z6.ERR_TRANSFORM_ALREADY_TRANSFORMING,_At=z6.ERR_TRANSFORM_WITH_LENGTH_0,O6=v_();oy()(ly,O6);function bAt(e,t){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(i===null)return this.emit("error",new mAt);r.writechunk=null,r.writecb=null,t!=null&&this.push(t),i(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function ly(e){if(!(this instanceof ly))return new ly(e);O6.call(this,e),this._transformState={afterTransform:bAt.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",wAt)}function wAt(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(t,r){L3e(e,t,r)}):L3e(this,null,null)}ly.prototype.push=function(e,t){return this._transformState.needTransform=!1,O6.prototype.push.call(this,e,t)};ly.prototype._transform=function(e,t,r){r(new yAt("_transform()"))};ly.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}};ly.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};ly.prototype._destroy=function(e,t){O6.prototype._destroy.call(this,e,function(r){t(r)})};function L3e(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new _At;if(e._transformState.transforming)throw new xAt;return e.push(null)}});var I3e=ie((pur,D3e)=>{"use strict";D3e.exports=VS;var R3e=mV();oy()(VS,R3e);function VS(e){if(!(this instanceof VS))return new VS(e);R3e.call(this,e)}VS.prototype._transform=function(e,t,r){r(null,e)}});var B3e=ie((gur,O3e)=>{"use strict";var xV;function TAt(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var z3e=h_().codes,AAt=z3e.ERR_MISSING_ARGS,MAt=z3e.ERR_STREAM_DESTROYED;function F3e(e){if(e)throw e}function SAt(e){return e.setHeader&&typeof e.abort=="function"}function EAt(e,t,r,i){i=TAt(i);var n=!1;e.on("close",function(){n=!0}),xV===void 0&&(xV=P6()),xV(e,{readable:t,writable:r},function(o){if(o)return i(o);n=!0,i()});var a=!1;return function(o){if(!n&&!a){if(a=!0,SAt(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();i(o||new MAt("pipe"))}}}function q3e(e){e()}function kAt(e,t){return e.pipe(t)}function CAt(e){return!e.length||typeof e[e.length-1]!="function"?F3e:e.pop()}function LAt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=CAt(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new AAt("streams");var n,a=t.map(function(o,s){var l=s<t.length-1,u=s>0;return EAt(o,l,u,function(f){n||(n=f),f&&a.forEach(q3e),!l&&(a.forEach(q3e),i(n))})});return t.reduce(kAt)}O3e.exports=LAt});var U3e=ie((yur,N3e)=>{N3e.exports=Ip;var _V=cx().EventEmitter,PAt=oy();PAt(Ip,_V);Ip.Readable=nV();Ip.Writable=eV();Ip.Duplex=v_();Ip.Transform=mV();Ip.PassThrough=I3e();Ip.finished=P6();Ip.pipeline=B3e();Ip.Stream=Ip;function Ip(){_V.call(this)}Ip.prototype.pipe=function(e,t){var r=this;function i(f){e.writable&&e.write(f)===!1&&r.pause&&r.pause()}r.on("data",i);function n(){r.readable&&r.resume&&r.resume()}e.on("drain",n),!e._isStdio&&(!t||t.end!==!1)&&(r.on("end",o),r.on("close",s));var a=!1;function o(){a||(a=!0,e.end())}function s(){a||(a=!0,typeof e.destroy=="function"&&e.destroy())}function l(f){if(u(),_V.listenerCount(this,"error")===0)throw f}r.on("error",l),e.on("error",l);function u(){r.removeListener("data",i),e.removeListener("drain",n),r.removeListener("end",o),r.removeListener("close",s),r.removeListener("error",l),e.removeListener("error",l),r.removeListener("end",u),r.removeListener("close",u),e.removeListener("close",u)}return r.on("end",u),r.on("close",u),e.on("close",u),e.emit("pipe",r),e}});var r3=ie(os=>{var V3e=Object.getOwnPropertyDescriptors||function(t){for(var r=Object.keys(t),i={},n=0;n<r.length;n++)i[r[n]]=Object.getOwnPropertyDescriptor(t,r[n]);return i},RAt=/%[sdj%]/g;os.format=function(e){if(!Y6(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(Zm(arguments[r]));return t.join(" ")}for(var r=1,i=arguments,n=i.length,a=String(e).replace(RAt,function(s){if(s==="%%")return"%";if(r>=n)return s;switch(s){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(l){return"[Circular]"}default:return s}}),o=i[r];r<n;o=i[++r])G6(o)||!t3(o)?a+=" "+o:a+=" "+Zm(o);return a};os.deprecate=function(e,t){if(typeof process!="undefined"&&process.noDeprecation===!0)return e;if(typeof process=="undefined")return function(){return os.deprecate(e,t).apply(this,arguments)};var r=!1;function i(){if(!r){if(process.throwDeprecation)throw new Error(t);process.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}return i};var B6={},H3e=/^$/;N6="false",N6=N6.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),H3e=new RegExp("^"+N6+"$","i");var N6;os.debuglog=function(e){if(e=e.toUpperCase(),!B6[e])if(H3e.test(e)){var t=process.pid;B6[e]=function(){var r=os.format.apply(os,arguments);console.error("%s %d: %s",e,t,r)}}else B6[e]=function(){};return B6[e]};function Zm(e,t){var r={seen:[],stylize:IAt};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),AV(t)?r.showHidden=t:t&&os._extend(r,t),x_(r.showHidden)&&(r.showHidden=!1),x_(r.depth)&&(r.depth=2),x_(r.colors)&&(r.colors=!1),x_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=DAt),V6(r,e,r.depth)}os.inspect=Zm;Zm.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Zm.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function DAt(e,t){var r=Zm.styles[t];return r?"\x1B["+Zm.colors[r][0]+"m"+e+"\x1B["+Zm.colors[r][1]+"m":e}function IAt(e,t){return e}function FAt(e){var t={};return e.forEach(function(r,i){t[r]=!0}),t}function V6(e,t,r){if(e.customInspect&&t&&U6(t.inspect)&&t.inspect!==os.inspect&&!(t.constructor&&t.constructor.prototype===t)){var i=t.inspect(r,e);return Y6(i)||(i=V6(e,i,r)),i}var n=qAt(e,t);if(n)return n;var a=Object.keys(t),o=FAt(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),GS(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return bV(t);if(a.length===0){if(U6(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(HS(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(H6(t))return e.stylize(Date.prototype.toString.call(t),"date");if(GS(t))return bV(t)}var l="",u=!1,f=["{","}"];if(G3e(t)&&(u=!0,f=["[","]"]),U6(t)){var c=t.name?": "+t.name:"";l=" [Function"+c+"]"}if(HS(t)&&(l=" "+RegExp.prototype.toString.call(t)),H6(t)&&(l=" "+Date.prototype.toUTCString.call(t)),GS(t)&&(l=" "+bV(t)),a.length===0&&(!u||t.length==0))return f[0]+l+f[1];if(r<0)return HS(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var h;return u?h=zAt(e,t,r,o,a):h=a.map(function(v){return TV(e,t,r,o,v,u)}),e.seen.pop(),OAt(h,l,f)}function qAt(e,t){if(x_(t))return e.stylize("undefined","undefined");if(Y6(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(Y3e(t))return e.stylize(""+t,"number");if(AV(t))return e.stylize(""+t,"boolean");if(G6(t))return e.stylize("null","null")}function bV(e){return"["+Error.prototype.toString.call(e)+"]"}function zAt(e,t,r,i,n){for(var a=[],o=0,s=t.length;o<s;++o)W3e(t,String(o))?a.push(TV(e,t,r,i,String(o),!0)):a.push("");return n.forEach(function(l){l.match(/^\d+$/)||a.push(TV(e,t,r,i,l,!0))}),a}function TV(e,t,r,i,n,a){var o,s,l;if(l=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]},l.get?l.set?s=e.stylize("[Getter/Setter]","special"):s=e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),W3e(i,n)||(o="["+n+"]"),s||(e.seen.indexOf(l.value)<0?(G6(r)?s=V6(e,l.value,null):s=V6(e,l.value,r-1),s.indexOf(`
`)>-1&&(a?s=s.split(`
`).map(function(u){return"  "+u}).join(`
`).slice(2):s=`
`+s.split(`
`).map(function(u){return"   "+u}).join(`
`))):s=e.stylize("[Circular]","special")),x_(o)){if(a&&n.match(/^\d+$/))return s;o=JSON.stringify(""+n),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.slice(1,-1),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function OAt(e,t,r){var i=0,n=e.reduce(function(a,o){return i++,o.indexOf(`
`)>=0&&i++,a+o.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?r[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}os.types=BU();function G3e(e){return Array.isArray(e)}os.isArray=G3e;function AV(e){return typeof e=="boolean"}os.isBoolean=AV;function G6(e){return e===null}os.isNull=G6;function BAt(e){return e==null}os.isNullOrUndefined=BAt;function Y3e(e){return typeof e=="number"}os.isNumber=Y3e;function Y6(e){return typeof e=="string"}os.isString=Y6;function NAt(e){return typeof e=="symbol"}os.isSymbol=NAt;function x_(e){return e===void 0}os.isUndefined=x_;function HS(e){return t3(e)&&MV(e)==="[object RegExp]"}os.isRegExp=HS;os.types.isRegExp=HS;function t3(e){return typeof e=="object"&&e!==null}os.isObject=t3;function H6(e){return t3(e)&&MV(e)==="[object Date]"}os.isDate=H6;os.types.isDate=H6;function GS(e){return t3(e)&&(MV(e)==="[object Error]"||e instanceof Error)}os.isError=GS;os.types.isNativeError=GS;function U6(e){return typeof e=="function"}os.isFunction=U6;function UAt(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e=="undefined"}os.isPrimitive=UAt;os.isBuffer=NU();function MV(e){return Object.prototype.toString.call(e)}function wV(e){return e<10?"0"+e.toString(10):e.toString(10)}var VAt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function HAt(){var e=new Date,t=[wV(e.getHours()),wV(e.getMinutes()),wV(e.getSeconds())].join(":");return[e.getDate(),VAt[e.getMonth()],t].join(" ")}os.log=function(){console.log("%s - %s",HAt(),os.format.apply(os,arguments))};os.inherits=oy();os._extend=function(e,t){if(!t||!t3(t))return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e};function W3e(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var m_=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;os.promisify=function(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');if(m_&&t[m_]){var r=t[m_];if(typeof r!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,m_,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var i,n,a=new Promise(function(l,u){i=l,n=u}),o=[],s=0;s<arguments.length;s++)o.push(arguments[s]);o.push(function(l,u){l?n(l):i(u)});try{t.apply(this,o)}catch(l){n(l)}return a}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),m_&&Object.defineProperty(r,m_,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,V3e(t))};os.promisify.custom=m_;function GAt(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function YAt(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');function t(){for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i]);var n=r.pop();if(typeof n!="function")throw new TypeError("The last argument must be of type Function");var a=this,o=function(){return n.apply(a,arguments)};e.apply(this,r).then(function(s){process.nextTick(o.bind(null,null,s))},function(s){process.nextTick(GAt.bind(null,s,o))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,V3e(e)),t}os.callbackify=YAt});var kV=ie((xur,K3e)=>{"use strict";function jm(e){"@babel/helpers - typeof";return jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jm(e)}function X3e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,XAt(i.key),i)}}function WAt(e,t,r){return t&&X3e(e.prototype,t),r&&X3e(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function XAt(e){var t=ZAt(e,"string");return jm(t)==="symbol"?t:String(t)}function ZAt(e,t){if(jm(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(jm(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jAt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KAt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EV(e,t)}function EV(e,t){return EV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},EV(e,t)}function JAt(e){var t=eMt();return function(){var i=W6(e),n;if(t){var a=W6(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return QAt(this,n)}}function QAt(e,t){if(t&&(jm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $At(e)}function $At(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eMt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function W6(e){return W6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},W6(e)}var j3e={},n3,SV;function YS(e,t,r){r||(r=Error);function i(a,o,s){return typeof t=="string"?t:t(a,o,s)}var n=function(a){KAt(s,a);var o=JAt(s);function s(l,u,f){var c;return jAt(this,s),c=o.call(this,i(l,u,f)),c.code=e,c}return WAt(s)}(r);j3e[e]=n}function Z3e(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(i){return String(i)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function tMt(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function rMt(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function nMt(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}YS("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError);YS("ERR_INVALID_ARG_TYPE",function(e,t,r){n3===void 0&&(n3=WS()),n3(typeof e=="string","'name' must be a string");var i;typeof t=="string"&&tMt(t,"not ")?(i="must not be",t=t.replace(/^not /,"")):i="must be";var n;if(rMt(e," argument"))n="The ".concat(e," ").concat(i," ").concat(Z3e(t,"type"));else{var a=nMt(e,".")?"property":"argument";n='The "'.concat(e,'" ').concat(a," ").concat(i," ").concat(Z3e(t,"type"))}return n+=". Received type ".concat(jm(r)),n},TypeError);YS("ERR_INVALID_ARG_VALUE",function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";SV===void 0&&(SV=r3());var i=SV.inspect(t);return i.length>128&&(i="".concat(i.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(r,". Received ").concat(i)},TypeError,RangeError);YS("ERR_INVALID_RETURN_VALUE",function(e,t,r){var i;return r&&r.constructor&&r.constructor.name?i="instance of ".concat(r.constructor.name):i="type ".concat(jm(r)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(i,".")},TypeError);YS("ERR_MISSING_ARGS",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n3===void 0&&(n3=WS()),n3(t.length>0,"At least one arg needs to be specified");var i="The ",n=t.length;switch(t=t.map(function(a){return'"'.concat(a,'"')}),n){case 1:i+="".concat(t[0]," argument");break;case 2:i+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:i+=t.slice(0,n-1).join(", "),i+=", and ".concat(t[n-1]," arguments");break}return"".concat(i," must be specified")},TypeError);K3e.exports.codes=j3e});var oTe=ie((_ur,aTe)=>{"use strict";function J3e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function Q3e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J3e(Object(r),!0).forEach(function(i){iMt(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J3e(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function iMt(e,t,r){return t=rTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aMt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $3e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,rTe(i.key),i)}}function oMt(e,t,r){return t&&$3e(e.prototype,t),r&&$3e(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function rTe(e){var t=sMt(e,"string");return vd(t)==="symbol"?t:String(t)}function sMt(e,t){if(vd(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(vd(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lMt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KS(e,t)}function uMt(e){var t=iTe();return function(){var i=JS(e),n;if(t){var a=JS(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return nTe(this,n)}}function nTe(e,t){if(t&&(vd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CV(e)}function CV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LV(e){var t=typeof Map=="function"?new Map:void 0;return LV=function(i){if(i===null||!fMt(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(i))return t.get(i);t.set(i,n)}function n(){return X6(i,arguments,JS(this).constructor)}return n.prototype=Object.create(i.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),KS(n,i)},LV(e)}function X6(e,t,r){return iTe()?X6=Reflect.construct.bind():X6=function(n,a,o){var s=[null];s.push.apply(s,a);var l=Function.bind.apply(n,s),u=new l;return o&&KS(u,o.prototype),u},X6.apply(null,arguments)}function iTe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function fMt(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function KS(e,t){return KS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},KS(e,t)}function JS(e){return JS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},JS(e)}function vd(e){"@babel/helpers - typeof";return vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vd(e)}var cMt=r3(),PV=cMt.inspect,hMt=kV(),vMt=hMt.codes.ERR_INVALID_ARG_TYPE;function eTe(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function dMt(e,t){if(t=Math.floor(t),e.length==0||t==0)return"";var r=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+=e.substring(0,r-e.length),e}var b0="",XS="",ZS="",_h="",__={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},pMt=10;function tTe(e){var t=Object.keys(e),r=Object.create(Object.getPrototypeOf(e));return t.forEach(function(i){r[i]=e[i]}),Object.defineProperty(r,"message",{value:e.message}),r}function jS(e){return PV(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function gMt(e,t,r){var i="",n="",a=0,o="",s=!1,l=jS(e),u=l.split(`
`),f=jS(t).split(`
`),c=0,h="";if(r==="strictEqual"&&vd(e)==="object"&&vd(t)==="object"&&e!==null&&t!==null&&(r="strictEqualObject"),u.length===1&&f.length===1&&u[0]!==f[0]){var v=u[0].length+f[0].length;if(v<=pMt){if((vd(e)!=="object"||e===null)&&(vd(t)!=="object"||t===null)&&(e!==0||t!==0))return"".concat(__[r],`

`)+"".concat(u[0]," !== ").concat(f[0],`
`)}else if(r!=="strictEqualObject"){var d=process.stderr&&process.stderr.isTTY?process.stderr.columns:80;if(v<d){for(;u[0][c]===f[0][c];)c++;c>2&&(h=`
  `.concat(dMt(" ",c),"^"),c=0)}}}for(var x=u[u.length-1],b=f[f.length-1];x===b&&(c++<2?o=`
  `.concat(x).concat(o):i=x,u.pop(),f.pop(),!(u.length===0||f.length===0));)x=u[u.length-1],b=f[f.length-1];var p=Math.max(u.length,f.length);if(p===0){var w=l.split(`
`);if(w.length>30)for(w[26]="".concat(b0,"...").concat(_h);w.length>27;)w.pop();return"".concat(__.notIdentical,`

`).concat(w.join(`
`),`
`)}c>3&&(o=`
`.concat(b0,"...").concat(_h).concat(o),s=!0),i!==""&&(o=`
  `.concat(i).concat(o),i="");var A=0,T=__[r]+`
`.concat(XS,"+ actual").concat(_h," ").concat(ZS,"- expected").concat(_h),k=" ".concat(b0,"...").concat(_h," Lines skipped");for(c=0;c<p;c++){var _=c-a;if(u.length<c+1)_>1&&c>2&&(_>4?(n+=`
`.concat(b0,"...").concat(_h),s=!0):_>3&&(n+=`
  `.concat(f[c-2]),A++),n+=`
  `.concat(f[c-1]),A++),a=c,i+=`
`.concat(ZS,"-").concat(_h," ").concat(f[c]),A++;else if(f.length<c+1)_>1&&c>2&&(_>4?(n+=`
`.concat(b0,"...").concat(_h),s=!0):_>3&&(n+=`
  `.concat(u[c-2]),A++),n+=`
  `.concat(u[c-1]),A++),a=c,n+=`
`.concat(XS,"+").concat(_h," ").concat(u[c]),A++;else{var E=f[c],S=u[c],g=S!==E&&(!eTe(S,",")||S.slice(0,-1)!==E);g&&eTe(E,",")&&E.slice(0,-1)===S&&(g=!1,S+=","),g?(_>1&&c>2&&(_>4?(n+=`
`.concat(b0,"...").concat(_h),s=!0):_>3&&(n+=`
  `.concat(u[c-2]),A++),n+=`
  `.concat(u[c-1]),A++),a=c,n+=`
`.concat(XS,"+").concat(_h," ").concat(S),i+=`
`.concat(ZS,"-").concat(_h," ").concat(E),A+=2):(n+=i,i="",(_===1||c===0)&&(n+=`
  `.concat(S),A++))}if(A>20&&c<p-2)return"".concat(T).concat(k,`
`).concat(n,`
`).concat(b0,"...").concat(_h).concat(i,`
`)+"".concat(b0,"...").concat(_h)}return"".concat(T).concat(s?k:"",`
`).concat(n).concat(i).concat(o).concat(h)}var yMt=function(e,t){lMt(i,e);var r=uMt(i);function i(n){var a;if(aMt(this,i),vd(n)!=="object"||n===null)throw new vMt("options","Object",n);var o=n.message,s=n.operator,l=n.stackStartFn,u=n.actual,f=n.expected,c=Error.stackTraceLimit;if(Error.stackTraceLimit=0,o!=null)a=r.call(this,String(o));else if(process.stderr&&process.stderr.isTTY&&(process.stderr&&process.stderr.getColorDepth&&process.stderr.getColorDepth()!==1?(b0="\x1B[34m",XS="\x1B[32m",_h="\x1B[39m",ZS="\x1B[31m"):(b0="",XS="",_h="",ZS="")),vd(u)==="object"&&u!==null&&vd(f)==="object"&&f!==null&&"stack"in u&&u instanceof Error&&"stack"in f&&f instanceof Error&&(u=tTe(u),f=tTe(f)),s==="deepStrictEqual"||s==="strictEqual")a=r.call(this,gMt(u,f,s));else if(s==="notDeepStrictEqual"||s==="notStrictEqual"){var h=__[s],v=jS(u).split(`
`);if(s==="notStrictEqual"&&vd(u)==="object"&&u!==null&&(h=__.notStrictEqualObject),v.length>30)for(v[26]="".concat(b0,"...").concat(_h);v.length>27;)v.pop();v.length===1?a=r.call(this,"".concat(h," ").concat(v[0])):a=r.call(this,"".concat(h,`

`).concat(v.join(`
`),`
`))}else{var d=jS(u),x="",b=__[s];s==="notDeepEqual"||s==="notEqual"?(d="".concat(__[s],`

`).concat(d),d.length>1024&&(d="".concat(d.slice(0,1021),"..."))):(x="".concat(jS(f)),d.length>512&&(d="".concat(d.slice(0,509),"...")),x.length>512&&(x="".concat(x.slice(0,509),"...")),s==="deepEqual"||s==="equal"?d="".concat(b,`

`).concat(d,`

should equal

`):x=" ".concat(s," ").concat(x)),a=r.call(this,"".concat(d).concat(x))}return Error.stackTraceLimit=c,a.generatedMessage=!o,Object.defineProperty(CV(a),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),a.code="ERR_ASSERTION",a.actual=u,a.expected=f,a.operator=s,Error.captureStackTrace&&Error.captureStackTrace(CV(a),l),a.stack,a.name="AssertionError",nTe(a)}return oMt(i,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:t,value:function(a,o){return PV(this,Q3e(Q3e({},o),{},{customInspect:!1,depth:0}))}}]),i}(LV(Error),PV.custom);aTe.exports=yMt});var RV=ie((bur,lTe)=>{"use strict";var sTe=Object.prototype.toString;lTe.exports=function(t){var r=sTe.call(t),i=r==="[object Arguments]";return i||(i=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&sTe.call(t.callee)==="[object Function]"),i}});var yTe=ie((wur,gTe)=>{"use strict";var pTe;Object.keys||(QS=Object.prototype.hasOwnProperty,DV=Object.prototype.toString,uTe=RV(),IV=Object.prototype.propertyIsEnumerable,fTe=!IV.call({toString:null},"toString"),cTe=IV.call(function(){},"prototype"),$S=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Z6=function(e){var t=e.constructor;return t&&t.prototype===e},hTe={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},vTe=function(){if(typeof window=="undefined")return!1;for(var e in window)try{if(!hTe["$"+e]&&QS.call(window,e)&&window[e]!==null&&typeof window[e]=="object")try{Z6(window[e])}catch(t){return!0}}catch(t){return!0}return!1}(),dTe=function(e){if(typeof window=="undefined"||!vTe)return Z6(e);try{return Z6(e)}catch(t){return!1}},pTe=function(t){var r=t!==null&&typeof t=="object",i=DV.call(t)==="[object Function]",n=uTe(t),a=r&&DV.call(t)==="[object String]",o=[];if(!r&&!i&&!n)throw new TypeError("Object.keys called on a non-object");var s=cTe&&i;if(a&&t.length>0&&!QS.call(t,0))for(var l=0;l<t.length;++l)o.push(String(l));if(n&&t.length>0)for(var u=0;u<t.length;++u)o.push(String(u));else for(var f in t)!(s&&f==="prototype")&&QS.call(t,f)&&o.push(String(f));if(fTe)for(var c=dTe(t),h=0;h<$S.length;++h)!(c&&$S[h]==="constructor")&&QS.call(t,$S[h])&&o.push($S[h]);return o});var QS,DV,uTe,IV,fTe,cTe,$S,Z6,hTe,vTe,dTe;gTe.exports=pTe});var FV=ie((Tur,_Te)=>{"use strict";var mMt=Array.prototype.slice,xMt=RV(),mTe=Object.keys,j6=mTe?function(t){return mTe(t)}:yTe(),xTe=Object.keys;j6.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(i){return xMt(i)?xTe(mMt.call(i)):xTe(i)})}else Object.keys=j6;return Object.keys||j6};_Te.exports=j6});var STe=ie((Aur,MTe)=>{"use strict";var _Mt=FV(),TTe=QP()(),ATe=Xw(),bTe=Object,bMt=ATe("Array.prototype.push"),wTe=ATe("Object.prototype.propertyIsEnumerable"),wMt=TTe?Object.getOwnPropertySymbols:null;MTe.exports=function(t,r){if(t==null)throw new TypeError("target must be an object");var i=bTe(t);if(arguments.length===1)return i;for(var n=1;n<arguments.length;++n){var a=bTe(arguments[n]),o=_Mt(a),s=TTe&&(Object.getOwnPropertySymbols||wMt);if(s)for(var l=s(a),u=0;u<l.length;++u){var f=l[u];wTe(a,f)&&bMt(o,f)}for(var c=0;c<o.length;++c){var h=o[c];if(wTe(a,h)){var v=a[h];i[h]=v}}}return i}});var kTe=ie((Mur,ETe)=>{"use strict";var qV=STe(),TMt=function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),r={},i=0;i<t.length;++i)r[t[i]]=t[i];var n=Object.assign({},r),a="";for(var o in n)a+=o;return e!==a},AMt=function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}return!1};ETe.exports=function(){return!Object.assign||TMt()||AMt()?qV:Object.assign}});var zV=ie((Sur,LTe)=>{"use strict";var CTe=function(e){return e!==e};LTe.exports=function(t,r){return t===0&&r===0?1/t===1/r:!!(t===r||CTe(t)&&CTe(r))}});var K6=ie((Eur,PTe)=>{"use strict";var MMt=zV();PTe.exports=function(){return typeof Object.is=="function"?Object.is:MMt}});var eE=ie((kur,FTe)=>{"use strict";var SMt=FV(),EMt=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",kMt=Object.prototype.toString,CMt=Array.prototype.concat,RTe=Object.defineProperty,LMt=function(e){return typeof e=="function"&&kMt.call(e)==="[object Function]"},PMt=r6()(),DTe=RTe&&PMt,RMt=function(e,t,r,i){if(t in e){if(i===!0){if(e[t]===r)return}else if(!LMt(i)||!i())return}DTe?RTe(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r},ITe=function(e,t){var r=arguments.length>2?arguments[2]:{},i=SMt(t);EMt&&(i=CMt.call(i,Object.getOwnPropertySymbols(t)));for(var n=0;n<i.length;n+=1)RMt(e,i[n],t[i[n]],r[i[n]])};ITe.supportsDescriptors=!!DTe;FTe.exports=ITe});var zTe=ie((Cur,qTe)=>{"use strict";var DMt=K6(),IMt=eE();qTe.exports=function(){var t=DMt();return IMt(Object,{is:t},{is:function(){return Object.is!==t}}),t}});var UTe=ie((Lur,NTe)=>{"use strict";var FMt=eE(),qMt=PS(),zMt=zV(),OTe=K6(),OMt=zTe(),BTe=qMt(OTe(),Object);FMt(BTe,{getPolyfill:OTe,implementation:zMt,shim:OMt});NTe.exports=BTe});var OV=ie((Pur,VTe)=>{"use strict";VTe.exports=function(t){return t!==t}});var BV=ie((Rur,HTe)=>{"use strict";var BMt=OV();HTe.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:BMt}});var YTe=ie((Dur,GTe)=>{"use strict";var NMt=eE(),UMt=BV();GTe.exports=function(){var t=UMt();return NMt(Number,{isNaN:t},{isNaN:function(){return Number.isNaN!==t}}),t}});var jTe=ie((Iur,ZTe)=>{"use strict";var VMt=PS(),HMt=eE(),GMt=OV(),WTe=BV(),YMt=YTe(),XTe=VMt(WTe(),Number);HMt(XTe,{getPolyfill:WTe,implementation:GMt,shim:YMt});ZTe.exports=XTe});var pAe=ie((Fur,dAe)=>{"use strict";function KTe(e,t){return jMt(e)||ZMt(e,t)||XMt(e,t)||WMt()}function WMt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XMt(e,t){if(e){if(typeof e=="string")return JTe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JTe(e,t)}}function JTe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function ZMt(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,n,a,o,s=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(i=a.call(r)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(f){u=!0,n=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw n}}return s}}function jMt(e){if(Array.isArray(e))return e}function Fp(e){"@babel/helpers - typeof";return Fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fp(e)}var KMt=/a/g.flags!==void 0,nR=function(t){var r=[];return t.forEach(function(i){return r.push(i)}),r},QTe=function(t){var r=[];return t.forEach(function(i,n){return r.push([n,i])}),r},uAe=Object.is?Object.is:UTe(),tR=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},NV=Number.isNaN?Number.isNaN:jTe();function VV(e){return e.call.bind(e)}var rE=VV(Object.prototype.hasOwnProperty),rR=VV(Object.prototype.propertyIsEnumerable),$Te=VV(Object.prototype.toString),kv=r3().types,JMt=kv.isAnyArrayBuffer,QMt=kv.isArrayBufferView,eAe=kv.isDate,J6=kv.isMap,tAe=kv.isRegExp,Q6=kv.isSet,$Mt=kv.isNativeError,eSt=kv.isBoxedPrimitive,rAe=kv.isNumberObject,nAe=kv.isStringObject,iAe=kv.isBooleanObject,aAe=kv.isBigIntObject,tSt=kv.isSymbolObject,rSt=kv.isFloat32Array,nSt=kv.isFloat64Array;function iSt(e){if(e.length===0||e.length>10)return!0;for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r<48||r>57)return!0}return e.length===10&&e>=Math.pow(2,32)}function $6(e){return Object.keys(e).filter(iSt).concat(tR(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function fAe(e,t){if(e===t)return 0;for(var r=e.length,i=t.length,n=0,a=Math.min(r,i);n<a;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0}var eR=void 0,aSt=!0,oSt=!1,UV=0,HV=1,cAe=2,hAe=3;function sSt(e,t){return KMt?e.source===t.source&&e.flags===t.flags:RegExp.prototype.toString.call(e)===RegExp.prototype.toString.call(t)}function lSt(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function uSt(e,t){return e.byteLength!==t.byteLength?!1:fAe(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))===0}function fSt(e,t){return e.byteLength===t.byteLength&&fAe(new Uint8Array(e),new Uint8Array(t))===0}function cSt(e,t){return rAe(e)?rAe(t)&&uAe(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):nAe(e)?nAe(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):iAe(e)?iAe(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):aAe(e)?aAe(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):tSt(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}function qp(e,t,r,i){if(e===t)return e!==0?!0:r?uAe(e,t):!0;if(r){if(Fp(e)!=="object")return typeof e=="number"&&NV(e)&&NV(t);if(Fp(t)!=="object"||e===null||t===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(e===null||Fp(e)!=="object")return t===null||Fp(t)!=="object"?e==t:!1;if(t===null||Fp(t)!=="object")return!1}var n=$Te(e),a=$Te(t);if(n!==a)return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var o=$6(e,eR),s=$6(t,eR);return o.length!==s.length?!1:tE(e,t,r,i,HV,o)}if(n==="[object Object]"&&(!J6(e)&&J6(t)||!Q6(e)&&Q6(t)))return!1;if(eAe(e)){if(!eAe(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(tAe(e)){if(!tAe(t)||!sSt(e,t))return!1}else if($Mt(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else if(QMt(e)){if(!r&&(rSt(e)||nSt(e))){if(!lSt(e,t))return!1}else if(!uSt(e,t))return!1;var l=$6(e,eR),u=$6(t,eR);return l.length!==u.length?!1:tE(e,t,r,i,UV,l)}else{if(Q6(e))return!Q6(t)||e.size!==t.size?!1:tE(e,t,r,i,cAe);if(J6(e))return!J6(t)||e.size!==t.size?!1:tE(e,t,r,i,hAe);if(JMt(e)){if(!fSt(e,t))return!1}else if(eSt(e)&&!cSt(e,t))return!1}return tE(e,t,r,i,UV)}function oAe(e,t){return t.filter(function(r){return rR(e,r)})}function tE(e,t,r,i,n,a){if(arguments.length===5){a=Object.keys(e);var o=Object.keys(t);if(a.length!==o.length)return!1}for(var s=0;s<a.length;s++)if(!rE(t,a[s]))return!1;if(r&&arguments.length===5){var l=tR(e);if(l.length!==0){var u=0;for(s=0;s<l.length;s++){var f=l[s];if(rR(e,f)){if(!rR(t,f))return!1;a.push(f),u++}else if(rR(t,f))return!1}var c=tR(t);if(l.length!==c.length&&oAe(t,c).length!==u)return!1}else{var h=tR(t);if(h.length!==0&&oAe(t,h).length!==0)return!1}}if(a.length===0&&(n===UV||n===HV&&e.length===0||e.size===0))return!0;if(i===void 0)i={val1:new Map,val2:new Map,position:0};else{var v=i.val1.get(e);if(v!==void 0){var d=i.val2.get(t);if(d!==void 0)return v===d}i.position++}i.val1.set(e,i.position),i.val2.set(t,i.position);var x=gSt(e,t,r,a,i,n);return i.val1.delete(e),i.val2.delete(t),x}function sAe(e,t,r,i){for(var n=nR(e),a=0;a<n.length;a++){var o=n[a];if(qp(t,o,r,i))return e.delete(o),!0}return!1}function vAe(e){switch(Fp(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(NV(e))return!1}return!0}function hSt(e,t,r){var i=vAe(r);return i!=null?i:t.has(i)&&!e.has(i)}function vSt(e,t,r,i,n){var a=vAe(r);if(a!=null)return a;var o=t.get(a);return o===void 0&&!t.has(a)||!qp(i,o,!1,n)?!1:!e.has(a)&&qp(i,o,!1,n)}function dSt(e,t,r,i){for(var n=null,a=nR(e),o=0;o<a.length;o++){var s=a[o];if(Fp(s)==="object"&&s!==null)n===null&&(n=new Set),n.add(s);else if(!t.has(s)){if(r||!hSt(e,t,s))return!1;n===null&&(n=new Set),n.add(s)}}if(n!==null){for(var l=nR(t),u=0;u<l.length;u++){var f=l[u];if(Fp(f)==="object"&&f!==null){if(!sAe(n,f,r,i))return!1}else if(!r&&!e.has(f)&&!sAe(n,f,r,i))return!1}return n.size===0}return!0}function lAe(e,t,r,i,n,a){for(var o=nR(e),s=0;s<o.length;s++){var l=o[s];if(qp(r,l,n,a)&&qp(i,t.get(l),n,a))return e.delete(l),!0}return!1}function pSt(e,t,r,i){for(var n=null,a=QTe(e),o=0;o<a.length;o++){var s=KTe(a[o],2),l=s[0],u=s[1];if(Fp(l)==="object"&&l!==null)n===null&&(n=new Set),n.add(l);else{var f=t.get(l);if(f===void 0&&!t.has(l)||!qp(u,f,r,i)){if(r||!vSt(e,t,l,u,i))return!1;n===null&&(n=new Set),n.add(l)}}}if(n!==null){for(var c=QTe(t),h=0;h<c.length;h++){var v=KTe(c[h],2),d=v[0],x=v[1];if(Fp(d)==="object"&&d!==null){if(!lAe(n,e,d,x,r,i))return!1}else if(!r&&(!e.has(d)||!qp(e.get(d),x,!1,i))&&!lAe(n,e,d,x,!1,i))return!1}return n.size===0}return!0}function gSt(e,t,r,i,n,a){var o=0;if(a===cAe){if(!dSt(e,t,r,n))return!1}else if(a===hAe){if(!pSt(e,t,r,n))return!1}else if(a===HV)for(;o<e.length;o++)if(rE(e,o)){if(!rE(t,o)||!qp(e[o],t[o],r,n))return!1}else{if(rE(t,o))return!1;for(var s=Object.keys(e);o<s.length;o++){var l=s[o];if(!rE(t,l)||!qp(e[l],t[l],r,n))return!1}return s.length===Object.keys(t).length}for(o=0;o<i.length;o++){var u=i[o];if(!qp(e[u],t[u],r,n))return!1}return!0}function ySt(e,t){return qp(e,t,oSt)}function mSt(e,t){return qp(e,t,aSt)}dAe.exports={isDeepEqual:ySt,isDeepStrictEqual:mSt}});var WS=ie((qur,DAe)=>{"use strict";function w0(e){"@babel/helpers - typeof";return w0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w0(e)}function gAe(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_St(i.key),i)}}function xSt(e,t,r){return t&&gAe(e.prototype,t),r&&gAe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _St(e){var t=bSt(e,"string");return w0(t)==="symbol"?t:String(t)}function bSt(e,t){if(w0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(w0(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wSt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var TSt=kV(),nE=TSt.codes,yAe=nE.ERR_AMBIGUOUS_ARGUMENT,i3=nE.ERR_INVALID_ARG_TYPE,ASt=nE.ERR_INVALID_ARG_VALUE,MSt=nE.ERR_INVALID_RETURN_VALUE,Jm=nE.ERR_MISSING_ARGS,Qm=oTe(),SSt=r3(),iR=SSt.inspect,bAe=r3().types,ESt=bAe.isPromise,aR=bAe.isRegExp,kSt=kTe()(),wAe=K6()(),oR=Xw()("RegExp.prototype.test"),Km,sR;function iE(){var e=pAe();Km=e.isDeepEqual,sR=e.isDeepStrictEqual}var mAe=!1,Ul=DAe.exports=GV,lR={};function T0(e){throw e.message instanceof Error?e.message:new Qm(e)}function TAe(e,t,r,i,n){var a=arguments.length,o;if(a===0)o="Failed";else if(a===1)r=e,e=void 0;else{if(mAe===!1){mAe=!0;var s=process.emitWarning?process.emitWarning:console.warn.bind(console);s("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}a===2&&(i="!=")}if(r instanceof Error)throw r;var l={actual:e,expected:t,operator:i===void 0?"fail":i,stackStartFn:n||TAe};r!==void 0&&(l.message=r);var u=new Qm(l);throw o&&(u.message=o,u.generatedMessage=!0),u}Ul.fail=TAe;Ul.AssertionError=Qm;function AAe(e,t,r,i){if(!r){var n=!1;if(t===0)n=!0,i="No value argument passed to `assert.ok()`";else if(i instanceof Error)throw i;var a=new Qm({actual:r,expected:!0,message:i,operator:"==",stackStartFn:e});throw a.generatedMessage=n,a}}function GV(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];AAe.apply(void 0,[GV,t.length].concat(t))}Ul.ok=GV;Ul.equal=function e(t,r,i){if(arguments.length<2)throw new Jm("actual","expected");t!=r&&T0({actual:t,expected:r,message:i,operator:"==",stackStartFn:e})};Ul.notEqual=function e(t,r,i){if(arguments.length<2)throw new Jm("actual","expected");t==r&&T0({actual:t,expected:r,message:i,operator:"!=",stackStartFn:e})};Ul.deepEqual=function e(t,r,i){if(arguments.length<2)throw new Jm("actual","expected");Km===void 0&&iE(),Km(t,r)||T0({actual:t,expected:r,message:i,operator:"deepEqual",stackStartFn:e})};Ul.notDeepEqual=function e(t,r,i){if(arguments.length<2)throw new Jm("actual","expected");Km===void 0&&iE(),Km(t,r)&&T0({actual:t,expected:r,message:i,operator:"notDeepEqual",stackStartFn:e})};Ul.deepStrictEqual=function e(t,r,i){if(arguments.length<2)throw new Jm("actual","expected");Km===void 0&&iE(),sR(t,r)||T0({actual:t,expected:r,message:i,operator:"deepStrictEqual",stackStartFn:e})};Ul.notDeepStrictEqual=MAe;function MAe(e,t,r){if(arguments.length<2)throw new Jm("actual","expected");Km===void 0&&iE(),sR(e,t)&&T0({actual:e,expected:t,message:r,operator:"notDeepStrictEqual",stackStartFn:MAe})}Ul.strictEqual=function e(t,r,i){if(arguments.length<2)throw new Jm("actual","expected");wAe(t,r)||T0({actual:t,expected:r,message:i,operator:"strictEqual",stackStartFn:e})};Ul.notStrictEqual=function e(t,r,i){if(arguments.length<2)throw new Jm("actual","expected");wAe(t,r)&&T0({actual:t,expected:r,message:i,operator:"notStrictEqual",stackStartFn:e})};var xAe=xSt(function e(t,r,i){var n=this;wSt(this,e),r.forEach(function(a){a in t&&(i!==void 0&&typeof i[a]=="string"&&aR(t[a])&&oR(t[a],i[a])?n[a]=i[a]:n[a]=t[a])})});function CSt(e,t,r,i,n,a){if(!(r in e)||!sR(e[r],t[r])){if(!i){var o=new xAe(e,n),s=new xAe(t,n,e),l=new Qm({actual:o,expected:s,operator:"deepStrictEqual",stackStartFn:a});throw l.actual=e,l.expected=t,l.operator=a.name,l}T0({actual:e,expected:t,message:i,operator:a.name,stackStartFn:a})}}function SAe(e,t,r,i){if(typeof t!="function"){if(aR(t))return oR(t,e);if(arguments.length===2)throw new i3("expected",["Function","RegExp"],t);if(w0(e)!=="object"||e===null){var n=new Qm({actual:e,expected:t,message:r,operator:"deepStrictEqual",stackStartFn:i});throw n.operator=i.name,n}var a=Object.keys(t);if(t instanceof Error)a.push("name","message");else if(a.length===0)throw new ASt("error",t,"may not be an empty object");return Km===void 0&&iE(),a.forEach(function(o){typeof e[o]=="string"&&aR(t[o])&&oR(t[o],e[o])||CSt(e,t,o,r,a,i)}),!0}return t.prototype!==void 0&&e instanceof t?!0:Error.isPrototypeOf(t)?!1:t.call({},e)===!0}function EAe(e){if(typeof e!="function")throw new i3("fn","Function",e);try{e()}catch(t){return t}return lR}function _Ae(e){return ESt(e)||e!==null&&w0(e)==="object"&&typeof e.then=="function"&&typeof e.catch=="function"}function kAe(e){return Promise.resolve().then(function(){var t;if(typeof e=="function"){if(t=e(),!_Ae(t))throw new MSt("instance of Promise","promiseFn",t)}else if(_Ae(e))t=e;else throw new i3("promiseFn",["Function","Promise"],e);return Promise.resolve().then(function(){return t}).then(function(){return lR}).catch(function(r){return r})})}function CAe(e,t,r,i){if(typeof r=="string"){if(arguments.length===4)throw new i3("error",["Object","Error","Function","RegExp"],r);if(w0(t)==="object"&&t!==null){if(t.message===r)throw new yAe("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===r)throw new yAe("error/message",'The error "'.concat(t,'" is identical to the message.'));i=r,r=void 0}else if(r!=null&&w0(r)!=="object"&&typeof r!="function")throw new i3("error",["Object","Error","Function","RegExp"],r);if(t===lR){var n="";r&&r.name&&(n+=" (".concat(r.name,")")),n+=i?": ".concat(i):".";var a=e.name==="rejects"?"rejection":"exception";T0({actual:void 0,expected:r,operator:e.name,message:"Missing expected ".concat(a).concat(n),stackStartFn:e})}if(r&&!SAe(t,r,i,e))throw t}function LAe(e,t,r,i){if(t!==lR){if(typeof r=="string"&&(i=r,r=void 0),!r||SAe(t,r)){var n=i?": ".concat(i):".",a=e.name==="doesNotReject"?"rejection":"exception";T0({actual:t,expected:r,operator:e.name,message:"Got unwanted ".concat(a).concat(n,`
`)+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}Ul.throws=function e(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];CAe.apply(void 0,[e,EAe(t)].concat(i))};Ul.rejects=function e(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];return kAe(t).then(function(a){return CAe.apply(void 0,[e,a].concat(i))})};Ul.doesNotThrow=function e(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];LAe.apply(void 0,[e,EAe(t)].concat(i))};Ul.doesNotReject=function e(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];return kAe(t).then(function(a){return LAe.apply(void 0,[e,a].concat(i))})};Ul.ifError=function e(t){if(t!=null){var r="ifError got unwanted exception: ";w0(t)==="object"&&typeof t.message=="string"?t.message.length===0&&t.constructor?r+=t.constructor.name:r+=t.message:r+=iR(t);var i=new Qm({actual:t,expected:null,operator:"ifError",message:r,stackStartFn:e}),n=t.stack;if(typeof n=="string"){var a=n.split(`
`);a.shift();for(var o=i.stack.split(`
`),s=0;s<a.length;s++){var l=o.indexOf(a[s]);if(l!==-1){o=o.slice(0,l);break}}i.stack="".concat(o.join(`
`),`
`).concat(a.join(`
`))}throw i}};function PAe(e,t,r,i,n){if(!aR(t))throw new i3("regexp","RegExp",t);var a=n==="match";if(typeof e!="string"||oR(t,e)!==a){if(r instanceof Error)throw r;var o=!r;r=r||(typeof e!="string"?'The "string" argument must be of type string. Received type '+"".concat(w0(e)," (").concat(iR(e),")"):(a?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(iR(t),`. Input:

`).concat(iR(e),`
`));var s=new Qm({actual:e,expected:t,message:r,operator:n,stackStartFn:i});throw s.generatedMessage=o,s}}Ul.match=function e(t,r,i){PAe(t,r,i,e,"match")};Ul.doesNotMatch=function e(t,r,i){PAe(t,r,i,e,"doesNotMatch")};function RAe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];AAe.apply(void 0,[RAe,t.length].concat(t))}Ul.strict=kSt(RAe,Ul,{equal:Ul.strictEqual,deepEqual:Ul.deepStrictEqual,notEqual:Ul.notStrictEqual,notDeepEqual:Ul.notDeepStrictEqual});Ul.strict.strict=Ul.strict});var FAe=ie((zur,IAe)=>{var aE=1e3,oE=aE*60,sE=oE*60,lE=sE*24,LSt=lE*365.25;IAe.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return PSt(e);if(r==="number"&&isNaN(e)===!1)return t.long?DSt(e):RSt(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function PSt(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return r*LSt;case"days":case"day":case"d":return r*lE;case"hours":case"hour":case"hrs":case"hr":case"h":return r*sE;case"minutes":case"minute":case"mins":case"min":case"m":return r*oE;case"seconds":case"second":case"secs":case"sec":case"s":return r*aE;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function RSt(e){return e>=lE?Math.round(e/lE)+"d":e>=sE?Math.round(e/sE)+"h":e>=oE?Math.round(e/oE)+"m":e>=aE?Math.round(e/aE)+"s":e+"ms"}function DSt(e){return uR(e,lE,"day")||uR(e,sE,"hour")||uR(e,oE,"minute")||uR(e,aE,"second")||e+" ms"}function uR(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}});var zAe=ie((il,qAe)=>{il=qAe.exports=WV.debug=WV.default=WV;il.coerce=OSt;il.disable=qSt;il.enable=FSt;il.enabled=zSt;il.humanize=FAe();il.names=[];il.skips=[];il.formatters={};var YV;function ISt(e){var t=0,r;for(r in e)t=(t<<5)-t+e.charCodeAt(r),t|=0;return il.colors[Math.abs(t)%il.colors.length]}function WV(e){function t(){if(t.enabled){var r=t,i=+new Date,n=i-(YV||i);r.diff=n,r.prev=YV,r.curr=i,YV=i;for(var a=new Array(arguments.length),o=0;o<a.length;o++)a[o]=arguments[o];a[0]=il.coerce(a[0]),typeof a[0]!="string"&&a.unshift("%O");var s=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(u,f){if(u==="%%")return u;s++;var c=il.formatters[f];if(typeof c=="function"){var h=a[s];u=c.call(r,h),a.splice(s,1),s--}return u}),il.formatArgs.call(r,a);var l=t.log||il.log||console.log.bind(console);l.apply(r,a)}}return t.namespace=e,t.enabled=il.enabled(e),t.useColors=il.useColors(),t.color=ISt(e),typeof il.init=="function"&&il.init(t),t}function FSt(e){il.save(e),il.names=[],il.skips=[];for(var t=(typeof e=="string"?e:"").split(/[\s,]+/),r=t.length,i=0;i<r;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),e[0]==="-"?il.skips.push(new RegExp("^"+e.substr(1)+"$")):il.names.push(new RegExp("^"+e+"$")))}function qSt(){il.enable("")}function zSt(e){var t,r;for(t=0,r=il.skips.length;t<r;t++)if(il.skips[t].test(e))return!1;for(t=0,r=il.names.length;t<r;t++)if(il.names[t].test(e))return!0;return!1}function OSt(e){return e instanceof Error?e.stack||e.message:e}});var NAe=ie((Cv,BAe)=>{Cv=BAe.exports=zAe();Cv.log=USt;Cv.formatArgs=NSt;Cv.save=VSt;Cv.load=OAe;Cv.useColors=BSt;Cv.storage=typeof chrome!="undefined"&&typeof chrome.storage!="undefined"?chrome.storage.local:HSt();Cv.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function BSt(){return typeof window!="undefined"&&window.process&&window.process.type==="renderer"?!0:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}Cv.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}};function NSt(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+Cv.humanize(this.diff),!!t){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,n=0;e[0].replace(/%[a-zA-Z%]/g,function(a){a!=="%%"&&(i++,a==="%c"&&(n=i))}),e.splice(n,0,r)}}function USt(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function VSt(e){try{e==null?Cv.storage.removeItem("debug"):Cv.storage.debug=e}catch(t){}}function OAe(){var e;try{e=Cv.storage.debug}catch(t){}return!e&&typeof process!="undefined"&&"env"in process&&(e=process.env.DEBUG),e}Cv.enable(OAe());function HSt(){try{return window.localStorage}catch(e){}}});var ZAe=ie((Our,XAe)=>{var a3=WS(),$m=NAe()("stream-parser");XAe.exports=YSt;var VAe=-1,fR=0,GSt=1,HAe=2;function YSt(e){var t=e&&typeof e._transform=="function",r=e&&typeof e._write=="function";if(!t&&!r)throw new Error("must pass a Writable or Transform stream in");$m("extending Parser into stream"),e._bytes=WSt,e._skipBytes=XSt,t&&(e._passthrough=ZSt),t?e._transform=KSt:e._write=jSt}function uE(e){$m("initializing parser stream"),e._parserBytesLeft=0,e._parserBuffers=[],e._parserBuffered=0,e._parserState=VAe,e._parserCallback=null,typeof e.push=="function"&&(e._parserOutput=e.push.bind(e)),e._parserInit=!0}function WSt(e,t){a3(!this._parserCallback,'there is already a "callback" set!'),a3(isFinite(e)&&e>0,'can only buffer a finite number of bytes > 0, got "'+e+'"'),this._parserInit||uE(this),$m("buffering %o bytes",e),this._parserBytesLeft=e,this._parserCallback=t,this._parserState=fR}function XSt(e,t){a3(!this._parserCallback,'there is already a "callback" set!'),a3(e>0,'can only skip > 0 bytes, got "'+e+'"'),this._parserInit||uE(this),$m("skipping %o bytes",e),this._parserBytesLeft=e,this._parserCallback=t,this._parserState=GSt}function ZSt(e,t){a3(!this._parserCallback,'There is already a "callback" set!'),a3(e>0,'can only pass through > 0 bytes, got "'+e+'"'),this._parserInit||uE(this),$m("passing through %o bytes",e),this._parserBytesLeft=e,this._parserCallback=t,this._parserState=HAe}function jSt(e,t,r){this._parserInit||uE(this),$m("write(%o bytes)",e.length),typeof t=="function"&&(r=t),YAe(this,e,null,r)}function KSt(e,t,r){this._parserInit||uE(this),$m("transform(%o bytes)",e.length),typeof t!="function"&&(t=this._parserOutput),YAe(this,e,t,r)}function GAe(e,t,r,i){return e._parserBytesLeft<=0?i(new Error("got data but not currently parsing anything")):t.length<=e._parserBytesLeft?function(){return UAe(e,t,r,i)}:function(){var n=t.slice(0,e._parserBytesLeft);return UAe(e,n,r,function(a){if(a)return i(a);if(t.length>n.length)return function(){return GAe(e,t.slice(n.length),r,i)}})}}function UAe(e,t,r,i){if(e._parserBytesLeft-=t.length,$m("%o bytes left for stream piece",e._parserBytesLeft),e._parserState===fR?(e._parserBuffers.push(t),e._parserBuffered+=t.length):e._parserState===HAe&&r(t),e._parserBytesLeft===0){var n=e._parserCallback;if(n&&e._parserState===fR&&e._parserBuffers.length>1&&(t=Buffer.concat(e._parserBuffers,e._parserBuffered)),e._parserState!==fR&&(t=null),e._parserCallback=null,e._parserBuffered=0,e._parserState=VAe,e._parserBuffers.splice(0),n){var a=[];t&&a.push(t),r&&a.push(r);var o=n.length>a.length;o&&a.push(WAe(i));var s=n.apply(e,a);if(!o||i===s)return i}}else return i}var YAe=WAe(GAe);function WAe(e){return function(){for(var t=e.apply(this,arguments);typeof t=="function";)t=t();return t}}});var Ns=ie(uy=>{"use strict";var jAe=U3e().Transform,JSt=ZAe();function fE(){jAe.call(this,{readableObjectMode:!0})}fE.prototype=Object.create(jAe.prototype);fE.prototype.constructor=fE;JSt(fE.prototype);uy.ParserStream=fE;uy.sliceEq=function(e,t,r){for(var i=t,n=0;n<r.length;)if(e[i++]!==r[n++])return!1;return!0};uy.str2arr=function(e,t){var r=[],i=0;if(t&&t==="hex")for(;i<e.length;)r.push(parseInt(e.slice(i,i+2),16)),i+=2;else for(;i<e.length;i++)r.push(e.charCodeAt(i)&255);return r};uy.readUInt16LE=function(e,t){return e[t]|e[t+1]<<8};uy.readUInt16BE=function(e,t){return e[t+1]|e[t]<<8};uy.readUInt32LE=function(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]*16777216};uy.readUInt32BE=function(e,t){return e[t+3]|e[t+2]<<8|e[t+1]<<16|e[t]*16777216};function cR(e,t,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=e,t&&(this.code=t),r&&(this.statusCode=r)}cR.prototype=Object.create(Error.prototype);cR.prototype.constructor=cR;uy.ProbeError=cR});var KAe=ie((Nur,hR)=>{"use strict";var o3=Ns().readUInt16BE,ZV=Ns().readUInt32BE;function cE(e,t){if(e.length<4+t)return null;var r=ZV(e,t);return e.length<r+t||r<8?null:{boxtype:String.fromCharCode.apply(null,e.slice(t+4,t+8)),data:e.slice(t+8,t+r),end:t+r}}hR.exports.unbox=cE;function QSt(e,t){for(var r=0;;){var i=cE(e,r);if(!i)break;switch(i.boxtype){case"ispe":t.sizes.push({width:ZV(i.data,4),height:ZV(i.data,8)});break;case"irot":t.transforms.push({type:"irot",value:i.data[0]&3});break;case"imir":t.transforms.push({type:"imir",value:i.data[0]&1});break}r=i.end}}function XV(e,t,r){for(var i=0,n=0;n<r;n++)i=i*256+(e[t+n]||0);return i}function $St(e,t){for(var r=e[4]>>4&15,i=e[4]&15,n=e[5]>>4&15,a=o3(e,6),o=8,s=0;s<a;s++){var l=o3(e,o);o+=2;var u=o3(e,o);o+=2;var f=XV(e,o,n);o+=n;var c=o3(e,o);if(o+=2,u===0&&c===1){var h=XV(e,o,r),v=XV(e,o+r,i);t.item_loc[l]={length:v,offset:h+f}}o+=c*(r+i)}}function eEt(e,t){for(var r=o3(e,4),i=6,n=0;n<r;n++){var a=cE(e,i);if(!a)break;if(a.boxtype==="infe"){for(var o=o3(a.data,4),s="",l=8;l<a.data.length&&a.data[l];l++)s+=String.fromCharCode(a.data[l]);t.item_inf[s]=o}i=a.end}}function tEt(e,t){for(var r=0;;){var i=cE(e,r);if(!i)break;i.boxtype==="ipco"&&QSt(i.data,t),r=i.end}}function rEt(e,t){for(var r=4;;){var i=cE(e,r);if(!i)break;i.boxtype==="iprp"&&tEt(i.data,t),i.boxtype==="iloc"&&$St(i.data,t),i.boxtype==="iinf"&&eEt(i.data,t),r=i.end}}function nEt(e){var t=e.reduce(function(n,a){return n.width>a.width||n.width===a.width&&n.height>a.height?n:a}),r=e.reduce(function(n,a){return n.height>a.height||n.height===a.height&&n.width>a.width?n:a}),i;return t.width>r.height||t.width===r.height&&t.height>r.width?i=t:i=r,i}hR.exports.readSizeFromMeta=function(e){var t={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(rEt(e,t),!!t.sizes.length){var r=nEt(t.sizes),i=1;t.transforms.forEach(function(a){var o={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},s={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(a.type==="imir"&&(a.value===0?i=s[i]:(i=s[i],i=o[i],i=o[i])),a.type==="irot")for(var l=0;l<a.value;l++)i=o[i]});var n=null;return t.item_inf.Exif&&(n=t.item_loc[t.item_inf.Exif]),{width:r.width,height:r.height,orientation:t.transforms.length?i:null,variants:t.sizes,exif_location:n}}};hR.exports.getMimeType=function(e){var t=String.fromCharCode.apply(null,e.slice(0,4)),r={};r[t]=!0;for(var i=8;i<e.length;i+=4)r[String.fromCharCode.apply(null,e.slice(i,i+4))]=!0;if(!(!r.mif1&&!r.msf1&&!r.miaf))return t==="avif"||t==="avis"||t==="avio"?{type:"avif",mime:"image/avif"}:t==="heic"||t==="heix"?{type:"heic",mime:"image/heic"}:t==="hevc"||t==="hevx"?{type:"heic",mime:"image/heic-sequence"}:r.avif||r.avis?{type:"avif",mime:"image/avif"}:r.heic||r.heix||r.hevc||r.hevx||r.heis?r.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}});var dR=ie((Uur,jV)=>{"use strict";function vR(e,t){var r=new Error(e);return r.code=t,r}function iEt(e){try{return decodeURIComponent(escape(e))}catch(t){return e}}function fy(e,t,r){this.input=e.subarray(t,r),this.start=t;var i=String.fromCharCode.apply(null,this.input.subarray(0,4));if(i!=="II*\0"&&i!=="MM\0*")throw vR("invalid TIFF signature","EBADDATA");this.big_endian=i[0]==="M"}fy.prototype.each=function(e){this.aborted=!1;var t=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:t}];this.ifds_to_read.length>0&&!this.aborted;){var r=this.ifds_to_read.shift();r.offset&&this.scan_ifd(r.id,r.offset,e)}};fy.prototype.read_uint16=function(e){var t=this.input;if(e+2>t.length)throw vR("unexpected EOF","EBADDATA");return this.big_endian?t[e]*256+t[e+1]:t[e]+t[e+1]*256};fy.prototype.read_uint32=function(e){var t=this.input;if(e+4>t.length)throw vR("unexpected EOF","EBADDATA");return this.big_endian?t[e]*16777216+t[e+1]*65536+t[e+2]*256+t[e+3]:t[e]+t[e+1]*256+t[e+2]*65536+t[e+3]*16777216};fy.prototype.is_subifd_link=function(e,t){return e===0&&t===34665||e===0&&t===34853||e===34665&&t===40965};fy.prototype.exif_format_length=function(e){switch(e){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}};fy.prototype.exif_format_read=function(e,t){var r;switch(e){case 1:case 2:return r=this.input[t],r;case 6:return r=this.input[t],r|(r&128)*33554430;case 3:return r=this.read_uint16(t),r;case 8:return r=this.read_uint16(t),r|(r&32768)*131070;case 4:return r=this.read_uint32(t),r;case 9:return r=this.read_uint32(t),r|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}};fy.prototype.scan_ifd=function(e,t,r){var i=this.read_uint16(t);t+=2;for(var n=0;n<i;n++){var a=this.read_uint16(t),o=this.read_uint16(t+2),s=this.read_uint32(t+4),l=this.exif_format_length(o),u=s*l,f=u<=4?t+8:this.read_uint32(t+8),c=!1;if(f+u>this.input.length)throw vR("unexpected EOF","EBADDATA");for(var h=[],v=f,d=0;d<s;d++,v+=l){var x=this.exif_format_read(o,v);if(x===null){h=null;break}h.push(x)}Array.isArray(h)&&o===2&&(h=iEt(String.fromCharCode.apply(null,h)),h&&h[h.length-1]==="\0"&&(h=h.slice(0,-1))),this.is_subifd_link(e,a)&&Array.isArray(h)&&Number.isInteger(h[0])&&h[0]>0&&(this.ifds_to_read.push({id:a,offset:h[0]}),c=!0);var b={is_big_endian:this.big_endian,ifd:e,tag:a,format:o,count:s,entry_offset:t+this.start,data_length:u,data_offset:f+this.start,value:h,is_subifd_link:c};if(r(b)===!1){this.aborted=!0;return}t+=12}e===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(t)})};jV.exports.ExifParser=fy;jV.exports.get_orientation=function(e){var t=0;try{return new fy(e,0,e.length).each(function(r){if(r.ifd===0&&r.tag===274&&Array.isArray(r.value))return t=r.value[0],!1}),t}catch(r){return-1}}});var QAe=ie((Vur,JAe)=>{"use strict";var aEt=Ns().str2arr,oEt=Ns().sliceEq,sEt=Ns().readUInt32BE,pR=KAe(),lEt=dR(),uEt=aEt("ftyp");JAe.exports=function(e){if(oEt(e,4,uEt)){var t=pR.unbox(e,0);if(t){var r=pR.getMimeType(t.data);if(r){for(var i,n=t.end;;){var a=pR.unbox(e,n);if(!a)break;if(n=a.end,a.boxtype==="mdat")return;if(a.boxtype==="meta"){i=a.data;break}}if(i){var o=pR.readSizeFromMeta(i);if(o){var s={width:o.width,height:o.height,type:r.type,mime:r.mime,wUnits:"px",hUnits:"px"};if(o.variants.length>1&&(s.variants=o.variants),o.orientation&&(s.orientation=o.orientation),o.exif_location&&o.exif_location.offset+o.exif_location.length<=e.length){var l=sEt(e,o.exif_location.offset),u=e.slice(o.exif_location.offset+l+4,o.exif_location.offset+o.exif_location.length),f=lEt.get_orientation(u);f>0&&(s.orientation=f)}return s}}}}}}});var tMe=ie((Hur,eMe)=>{"use strict";var fEt=Ns().str2arr,cEt=Ns().sliceEq,$Ae=Ns().readUInt16LE,hEt=fEt("BM");eMe.exports=function(e){if(!(e.length<26)&&cEt(e,0,hEt))return{width:$Ae(e,18),height:$Ae(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}});var oMe=ie((Gur,aMe)=>{"use strict";var iMe=Ns().str2arr,rMe=Ns().sliceEq,nMe=Ns().readUInt16LE,vEt=iMe("GIF87a"),dEt=iMe("GIF89a");aMe.exports=function(e){if(!(e.length<10)&&!(!rMe(e,0,vEt)&&!rMe(e,0,dEt)))return{width:nMe(e,6),height:nMe(e,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}});var uMe=ie((Yur,lMe)=>{"use strict";var KV=Ns().readUInt16LE,pEt=0,gEt=1,sMe=16;lMe.exports=function(e){var t=KV(e,0),r=KV(e,2),i=KV(e,4);if(!(t!==pEt||r!==gEt||!i)){for(var n=[],a={width:0,height:0},o=0;o<i;o++){var s=e[6+sMe*o]||256,l=e[6+sMe*o+1]||256,u={width:s,height:l};n.push(u),(s>a.width||l>a.height)&&(a=u)}return{width:a.width,height:a.height,variants:n,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}});var cMe=ie((Wur,fMe)=>{"use strict";var JV=Ns().readUInt16BE,yEt=Ns().str2arr,mEt=Ns().sliceEq,xEt=dR(),_Et=yEt("Exif\0\0");fMe.exports=function(e){if(!(e.length<2)&&!(e[0]!==255||e[1]!==216||e[2]!==255))for(var t=2;;){for(;;){if(e.length-t<2)return;if(e[t++]===255)break}for(var r=e[t++],i;r===255;)r=e[t++];if(208<=r&&r<=217||r===1)i=0;else if(192<=r&&r<=254){if(e.length-t<2)return;i=JV(e,t)-2,t+=2}else return;if(r===217||r===218)return;var n;if(r===225&&i>=10&&mEt(e,t,_Et)&&(n=xEt.get_orientation(e.slice(t+6,t+i))),i>=5&&192<=r&&r<=207&&r!==196&&r!==200&&r!==204){if(e.length-t<i)return;var a={width:JV(e,t+3),height:JV(e,t+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return n>0&&(a.orientation=n),a}t+=i}}});var gMe=ie((Xur,pMe)=>{"use strict";var dMe=Ns().str2arr,hMe=Ns().sliceEq,vMe=Ns().readUInt32BE,bEt=dMe(`\x89PNG\r

`),wEt=dMe("IHDR");pMe.exports=function(e){if(!(e.length<24)&&hMe(e,0,bEt)&&hMe(e,12,wEt))return{width:vMe(e,16),height:vMe(e,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}});var xMe=ie((Zur,mMe)=>{"use strict";var TEt=Ns().str2arr,AEt=Ns().sliceEq,yMe=Ns().readUInt32BE,MEt=TEt("8BPS\0");mMe.exports=function(e){if(!(e.length<22)&&AEt(e,0,MEt))return{width:yMe(e,18),height:yMe(e,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}});var wMe=ie((jur,bMe)=>{"use strict";function SEt(e){return e===32||e===9||e===13||e===10}function s3(e){return typeof e=="number"&&isFinite(e)&&e>0}function EEt(e){var t=0,r=e.length;for(e[0]===239&&e[1]===187&&e[2]===191&&(t=3);t<r&&SEt(e[t]);)t++;return t===r?!1:e[t]===60}var kEt=/<[-_.:a-zA-Z0-9][^>]*>/,CEt=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,LEt=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,PEt=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,REt=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,_Me=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function DEt(e){var t=e.match(LEt),r=e.match(PEt),i=e.match(REt);return{width:t&&(t[1]||t[2]),height:r&&(r[1]||r[2]),viewbox:i&&(i[1]||i[2])}}function lg(e){return _Me.test(e)?e.match(_Me)[0]:"px"}bMe.exports=function(e){if(EEt(e)){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);var i=(t.match(kEt)||[""])[0];if(CEt.test(i)){var n=DEt(i),a=parseFloat(n.width),o=parseFloat(n.height);if(n.width&&n.height)return!s3(a)||!s3(o)?void 0:{width:a,height:o,type:"svg",mime:"image/svg+xml",wUnits:lg(n.width),hUnits:lg(n.height)};var s=(n.viewbox||"").split(" "),l={width:s[2],height:s[3]},u=parseFloat(l.width),f=parseFloat(l.height);if(!(!s3(u)||!s3(f))&&lg(l.width)===lg(l.height)){var c=u/f;return n.width?s3(a)?{width:a,height:a/c,type:"svg",mime:"image/svg+xml",wUnits:lg(n.width),hUnits:lg(n.width)}:void 0:n.height?s3(o)?{width:o*c,height:o,type:"svg",mime:"image/svg+xml",wUnits:lg(n.height),hUnits:lg(n.height)}:void 0:{width:u,height:f,type:"svg",mime:"image/svg+xml",wUnits:lg(l.width),hUnits:lg(l.height)}}}}}});var EMe=ie((Kur,SMe)=>{"use strict";var MMe=Ns().str2arr,TMe=Ns().sliceEq,IEt=Ns().readUInt16LE,FEt=Ns().readUInt16BE,qEt=Ns().readUInt32LE,zEt=Ns().readUInt32BE,OEt=MMe("II*\0"),BEt=MMe("MM\0*");function gR(e,t,r){return r?FEt(e,t):IEt(e,t)}function QV(e,t,r){return r?zEt(e,t):qEt(e,t)}function AMe(e,t,r){var i=gR(e,t+2,r),n=QV(e,t+4,r);return n!==1||i!==3&&i!==4?null:i===3?gR(e,t+8,r):QV(e,t+8,r)}SMe.exports=function(e){if(!(e.length<8)&&!(!TMe(e,0,OEt)&&!TMe(e,0,BEt))){var t=e[0]===77,r=QV(e,4,t)-8;if(!(r<0)){var i=r+8;if(!(e.length-i<2)){var n=gR(e,i+0,t)*12;if(!(n<=0)&&(i+=2,!(e.length-i<n))){var a,o,s,l;for(a=0;a<n;a+=12)l=gR(e,i+a,t),l===256?o=AMe(e,i+a,t):l===257&&(s=AMe(e,i+a,t));if(o&&s)return{width:o,height:s,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}});var RMe=ie((Jur,PMe)=>{"use strict";var LMe=Ns().str2arr,kMe=Ns().sliceEq,CMe=Ns().readUInt16LE,$V=Ns().readUInt32LE,NEt=dR(),UEt=LMe("RIFF"),VEt=LMe("WEBP");function HEt(e,t){if(!(e[t+3]!==157||e[t+4]!==1||e[t+5]!==42))return{width:CMe(e,t+6)&16383,height:CMe(e,t+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function GEt(e,t){if(e[t]===47){var r=$V(e,t+1);return{width:(r&16383)+1,height:(r>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function YEt(e,t){return{width:(e[t+6]<<16|e[t+5]<<8|e[t+4])+1,height:(e[t+9]<<t|e[t+8]<<8|e[t+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}PMe.exports=function(e){if(!(e.length<16)&&!(!kMe(e,0,UEt)&&!kMe(e,8,VEt))){var t=12,r=null,i=0,n=$V(e,4)+8;if(!(n>e.length)){for(;t+8<n;){if(e[t]===0){t++;continue}var a=String.fromCharCode.apply(null,e.slice(t,t+4)),o=$V(e,t+4);a==="VP8 "&&o>=10?r=r||HEt(e,t+8):a==="VP8L"&&o>=9?r=r||GEt(e,t+8):a==="VP8X"&&o>=10?r=r||YEt(e,t+8):a==="EXIF"&&(i=NEt.get_orientation(e.slice(t+8,t+8+o)),t=1/0),t+=8+o}if(r)return i>0&&(r.orientation=i),r}}}});var IMe=ie((Qur,DMe)=>{"use strict";DMe.exports={avif:QAe(),bmp:tMe(),gif:oMe(),ico:uMe(),jpeg:cMe(),png:gMe(),psd:xMe(),svg:wMe(),tiff:EMe(),webp:RMe()}});var FMe=ie(($ur,tH)=>{"use strict";var eH=IMe();function WEt(e){for(var t=Object.keys(eH),r=0;r<t.length;r++){var i=eH[t[r]](e);if(i)return i}return null}tH.exports=function(t){return WEt(t)};tH.exports.parsers=eH});var zMe=ie(qMe=>{"use strict";var XEt=FMe(),ZEt=Zg().IMAGE_URL_PREFIX,jEt=o_().Buffer;qMe.getImageSize=function(e){var t=e.replace(ZEt,""),r=new jEt(t,"base64");return XEt(r)}});var NMe=ie((tfr,BMe)=>{"use strict";var OMe=Zt(),KEt=Fw(),JEt=la(),yR=Wi(),QEt=Zt().maxRowLength,$Et=zMe().getImageSize;BMe.exports=function(t,r){var i,n;if(r._hasZ)i=r.z.length,n=QEt(r.z);else if(r._hasSource){var a=$Et(r.source);i=a.height,n=a.width}var o=yR.getFromId(t,r.xaxis||"x"),s=yR.getFromId(t,r.yaxis||"y"),l=o.d2c(r.x0)-r.dx/2,u=s.d2c(r.y0)-r.dy/2,f,c=[l,l+n*r.dx],h=[u,u+i*r.dy];if(o&&o.type==="log")for(f=0;f<n;f++)c.push(l+f*r.dx);if(s&&s.type==="log")for(f=0;f<i;f++)h.push(u+f*r.dy);r._extremes[o._id]=yR.findExtremes(o,c),r._extremes[s._id]=yR.findExtremes(s,h),r._scaler=r5t(r);var v={x0:l,y0:u,z:r.z,w:n,h:i};return[v]};function e5t(e,t,r,i){return function(n){return OMe.constrain((n-e)*t,r,i)}}function t5t(e,t){return function(r){return OMe.constrain(r,e,t)}}function r5t(e){var t=KEt.colormodel[e.colormodel],r=t.colormodel||e.colormodel,i=r.length;e._sArray=[];for(var n=0;n<i;n++)t.min[n]!==e.zmin[n]||t.max[n]!==e.zmax[n]?e._sArray.push(e5t(e.zmin[n],(t.max[n]-t.min[n])/(e.zmax[n]-e.zmin[n]),t.min[n],t.max[n])):e._sArray.push(t5t(t.min[n],t.max[n]));return function(a){for(var o=a.slice(0,i),s=0;s<i;s++){var l=o[s];if(!JEt(l))return!1;o[s]=e._sArray[s](l)}return o}}});var HMe=ie((rfr,VMe)=>{"use strict";var n5t=Mi(),b_=Zt(),UMe=b_.strTranslate,i5t=Cd(),a5t=Fw(),o5t=WN(),s5t=_P().STYLE;VMe.exports=function(t,r,i,n){var a=r.xaxis,o=r.yaxis,s=!t._context._exportedPlot&&o5t();b_.makeTraceGroups(n,i,"im").each(function(l){var u=n5t.select(this),f=l[0],c=f.trace,h=(c.zsmooth==="fast"||c.zsmooth===!1&&s)&&!c._hasZ&&c._hasSource&&a.type==="linear"&&o.type==="linear";c._realImage=h;var v=f.z,d=f.x0,x=f.y0,b=f.w,p=f.h,w=c.dx,A=c.dy,T,k,_,E,S,g;for(g=0;T===void 0&&g<b;)T=a.c2p(d+g*w),g++;for(g=b;k===void 0&&g>0;)k=a.c2p(d+g*w),g--;for(g=0;E===void 0&&g<p;)E=o.c2p(x+g*A),g++;for(g=p;S===void 0&&g>0;)S=o.c2p(x+g*A),g--;if(k<T&&(_=k,k=T,T=_),S<E&&(_=E,E=S,S=_),!h){var C=.5;T=Math.max(-C*a._length,T),k=Math.min((1+C)*a._length,k),E=Math.max(-C*o._length,E),S=Math.min((1+C)*o._length,S)}var M=Math.round(k-T),P=Math.round(S-E),D=M<=0||P<=0;if(D){var q=u.selectAll("image").data([]);q.exit().remove();return}function O(ee){var Z=document.createElement("canvas");Z.width=M,Z.height=P;var oe=Z.getContext("2d",{willReadFrequently:!0}),ce=function(Re){return b_.constrain(Math.round(a.c2p(d+Re*w)-T),0,M)},le=function(Re){return b_.constrain(Math.round(o.c2p(x+Re*A)-E),0,P)},me=a5t.colormodel[c.colormodel],he=me.colormodel||c.colormodel,te=me.fmt,ge;for(g=0;g<f.w;g++){var ae=ce(g),_e=ce(g+1);if(!(_e===ae||isNaN(_e)||isNaN(ae)))for(var Ce=0;Ce<f.h;Ce++){var qe=le(Ce),rt=le(Ce+1);rt===qe||isNaN(rt)||isNaN(qe)||!ee(g,Ce)||(ge=c._scaler(ee(g,Ce)),ge?oe.fillStyle=he+"("+te(ge).join(",")+")":oe.fillStyle="rgba(0,0,0,0)",oe.fillRect(ae,qe,_e-ae,rt-qe))}}return Z}var U=u.selectAll("image").data([l]);U.enter().append("svg:image").attr({xmlns:i5t.svg,preserveAspectRatio:"none"}),U.exit().remove();var B=c.zsmooth===!1?s5t:"";if(h){var F=b_.simpleMap(a.range,a.r2l),N=b_.simpleMap(o.range,o.r2l),X=F[1]<F[0],K=N[1]>N[0];if(X||K){var ne=T+M/2,fe=E+P/2;B+="transform:"+UMe(ne+"px",fe+"px")+"scale("+(X?-1:1)+","+(K?-1:1)+")"+UMe(-ne+"px",-fe+"px")+";"}}U.attr("style",B);var ue=new Promise(function(ee){if(c._hasZ)ee();else if(c._hasSource)if(c._canvas&&c._canvas.el.width===b&&c._canvas.el.height===p&&c._canvas.source===c.source)ee();else{var Z=document.createElement("canvas");Z.width=b,Z.height=p;var oe=Z.getContext("2d",{willReadFrequently:!0});c._image=c._image||new Image;var ce=c._image;ce.onload=function(){oe.drawImage(ce,0,0),c._canvas={el:Z,source:c.source},ee()},ce.setAttribute("src",c.source)}}).then(function(){var ee,Z;if(c._hasZ)Z=O(function(le,me){var he=v[me][le];return b_.isTypedArray(he)&&(he=Array.from(he)),he}),ee=Z.toDataURL("image/png");else if(c._hasSource)if(h)ee=c.source;else{var oe=c._canvas.el.getContext("2d",{willReadFrequently:!0}),ce=oe.getImageData(0,0,b,p).data;Z=O(function(le,me){var he=4*(me*b+le);return[ce[he],ce[he+1],ce[he+2],ce[he+3]]}),ee=Z.toDataURL("image/png")}U.attr({"xlink:href":ee,height:P,width:M,x:T,y:E})});t._promises.push(ue)})}});var YMe=ie((nfr,GMe)=>{"use strict";var l5t=Mi();GMe.exports=function(t){l5t.select(t).selectAll(".im image").style("opacity",function(r){return r[0].trace.opacity})}});var jMe=ie((ifr,ZMe)=>{"use strict";var WMe=Ol(),XMe=Zt(),mR=XMe.isArrayOrTypedArray,u5t=Fw();ZMe.exports=function(t,r,i){var n=t.cd[0],a=n.trace,o=t.xa,s=t.ya;if(!(WMe.inbox(r-n.x0,r-(n.x0+n.w*a.dx),0)>0||WMe.inbox(i-n.y0,i-(n.y0+n.h*a.dy),0)>0)){var l=Math.floor((r-n.x0)/a.dx),u=Math.floor(Math.abs(i-n.y0)/a.dy),f;if(a._hasZ?f=n.z[u][l]:a._hasSource&&(f=a._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(l,u,1,1).data),!!f){var c=n.hi||a.hoverinfo,h;if(c){var v=c.split("+");v.indexOf("all")!==-1&&(v=["color"]),v.indexOf("color")!==-1&&(h=!0)}var d=u5t.colormodel[a.colormodel],x=d.colormodel||a.colormodel,b=x.length,p=a._scaler(f),w=d.suffix,A=[];(a.hovertemplate||h)&&(A.push("["+[p[0]+w[0],p[1]+w[1],p[2]+w[2]].join(", ")),b===4&&A.push(", "+p[3]+w[3]),A.push("]"),A=A.join(""),t.extraText=x.toUpperCase()+": "+A);var T;mR(a.hovertext)&&mR(a.hovertext[u])?T=a.hovertext[u][l]:mR(a.text)&&mR(a.text[u])&&(T=a.text[u][l]);var k=s.c2p(n.y0+(u+.5)*a.dy),_=n.x0+(l+.5)*a.dx,E=n.y0+(u+.5)*a.dy,S="["+f.slice(0,a.colormodel.length).join(", ")+"]";return[XMe.extendFlat(t,{index:[u,l],x0:o.c2p(n.x0+l*a.dx),x1:o.c2p(n.x0+(l+1)*a.dx),y0:k,y1:k,color:p,xVal:_,xLabelVal:_,yVal:E,yLabelVal:E,zLabelVal:S,text:T,hovertemplateLabels:{zLabel:S,colorLabel:A,"color[0]Label":p[0]+w[0],"color[1]Label":p[1]+w[1],"color[2]Label":p[2]+w[2],"color[3]Label":p[3]+w[3]}})]}}}});var JMe=ie((afr,KMe)=>{"use strict";KMe.exports=function(t,r){return"xVal"in r&&(t.x=r.xVal),"yVal"in r&&(t.y=r.yVal),r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),t.color=r.color,t.colormodel=r.trace.colormodel,t.z||(t.z=r.color),t}});var $Me=ie((ofr,QMe)=>{"use strict";QMe.exports={attributes:rU(),supplyDefaults:Zbe(),calc:NMe(),plot:HMe(),style:YMe(),hoverPoints:jMe(),eventData:JMe(),moduleType:"trace",name:"image",basePlotModule:yu(),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}});var tSe=ie((sfr,eSe)=>{"use strict";eSe.exports=$Me()});var w_=ie((lfr,rSe)=>{"use strict";var f5t=rs(),c5t=fl().attributes,h5t=Xs(),v5t=Qu(),d5t=Ba().hovertemplateAttrs,p5t=Ba().texttemplateAttrs,l3=aa().extendFlat,g5t=dc().pattern,hE=h5t({editType:"plot",arrayOk:!0,colorEditType:"plot"});rSe.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:v5t.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:g5t,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:l3({},f5t.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:d5t({},{keys:["label","color","value","percent","text"]}),texttemplate:p5t({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:l3({},hE,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:l3({},hE,{}),outsidetextfont:l3({},hE,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:l3({},hE,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:c5t({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:l3({},hE,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}});var T_=ie((ufr,aSe)=>{"use strict";var y5t=la(),vE=Zt(),m5t=w_(),x5t=fl().defaults,_5t=zd().handleText,b5t=Zt().coercePattern;function nSe(e,t){var r=vE.isArrayOrTypedArray(e),i=vE.isArrayOrTypedArray(t),n=Math.min(r?e.length:1/0,i?t.length:1/0);if(isFinite(n)||(n=0),n&&i){for(var a,o=0;o<n;o++){var s=t[o];if(y5t(s)&&s>0){a=!0;break}}a||(n=0)}return{hasLabels:r,hasValues:i,len:n}}function iSe(e,t,r,i,n){var a=i("marker.line.width");a&&i("marker.line.color",n?void 0:r.paper_bgcolor);var o=i("marker.colors");b5t(i,"marker.pattern",o),e.marker&&!t.marker.pattern.fgcolor&&(t.marker.pattern.fgcolor=e.marker.colors),t.marker.pattern.bgcolor||(t.marker.pattern.bgcolor=r.paper_bgcolor)}function w5t(e,t,r,i){function n(w,A){return vE.coerce(e,t,m5t,w,A)}var a=n("labels"),o=n("values"),s=nSe(a,o),l=s.len;if(t._hasLabels=s.hasLabels,t._hasValues=s.hasValues,!t._hasLabels&&t._hasValues&&(n("label0"),n("dlabel")),!l){t.visible=!1;return}t._length=l,iSe(e,t,i,n,!0),n("scalegroup");var u=n("text"),f=n("texttemplate"),c;if(f||(c=n("textinfo",vE.isArrayOrTypedArray(u)?"text+percent":"percent")),n("hovertext"),n("hovertemplate"),f||c&&c!=="none"){var h=n("textposition");_5t(e,t,i,n,h,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var v=Array.isArray(h)||h==="auto",d=v||h==="outside";d&&n("automargin"),(h==="inside"||h==="auto"||Array.isArray(h))&&n("insidetextorientation")}else c==="none"&&n("textposition","none");x5t(t,i,n);var x=n("hole"),b=n("title.text");if(b){var p=n("title.position",x?"middle center":"top center");!x&&p==="middle center"&&(t.title.position="top center"),vE.coerceFont(n,"title.font",i.font)}n("sort"),n("direction"),n("rotation"),n("pull")}aSe.exports={handleLabelsAndValues:nSe,handleMarkerDefaults:iSe,supplyDefaults:w5t}});var xR=ie((ffr,oSe)=>{"use strict";oSe.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}});var lSe=ie((cfr,sSe)=>{"use strict";var T5t=Zt(),A5t=xR();sSe.exports=function(t,r){function i(n,a){return T5t.coerce(t,r,A5t,n,a)}i("hiddenlabels"),i("piecolorway",r.colorway),i("extendpiecolors")}});var u3=ie((hfr,cSe)=>{"use strict";var M5t=la(),rH=Kf(),S5t=_i(),E5t={};function k5t(e,t){var r=[],i=e._fullLayout,n=i.hiddenlabels||[],a=t.labels,o=t.marker.colors||[],s=t.values,l=t._length,u=t._hasValues&&l,f,c;if(t.dlabel)for(a=new Array(l),f=0;f<l;f++)a[f]=String(t.label0+f*t.dlabel);var h={},v=uSe(i["_"+t.type+"colormap"]),d=0,x=!1;for(f=0;f<l;f++){var b,p,w;if(u){if(b=s[f],!M5t(b))continue;b=+b}else b=1;p=a[f],(p===void 0||p==="")&&(p=f),p=String(p);var A=h[p];A===void 0?(h[p]=r.length,w=n.indexOf(p)!==-1,w||(d+=b),r.push({v:b,label:p,color:v(o[f],p),i:f,pts:[f],hidden:w})):(x=!0,c=r[A],c.v+=b,c.pts.push(f),c.hidden||(d+=b),c.color===!1&&o[f]&&(c.color=v(o[f],p)))}r=r.filter(function(k){return k.v>=0});var T=t.type==="funnelarea"?x:t.sort;return T&&r.sort(function(k,_){return _.v-k.v}),r[0]&&(r[0].vTotal=d),r}function uSe(e){return function(r,i){return!r||(r=rH(r),!r.isValid())?!1:(r=S5t.addOpacity(r,r.getAlpha()),e[i]||(e[i]=r),r)}}function C5t(e,t){var r=(t||{}).type;r||(r="pie");var i=e._fullLayout,n=e.calcdata,a=i[r+"colorway"],o=i["_"+r+"colormap"];i["extend"+r+"colors"]&&(a=fSe(a,E5t));for(var s=0,l=0;l<n.length;l++){var u=n[l],f=u[0].trace.type;if(f===r)for(var c=0;c<u.length;c++){var h=u[c];h.color===!1&&(o[h.label]?h.color=o[h.label]:(o[h.label]=h.color=a[s%a.length],s++))}}}function fSe(e,t){var r,i=JSON.stringify(e),n=t[i];if(!n){for(n=e.slice(),r=0;r<e.length;r++)n.push(rH(e[r]).lighten(20).toHexString());for(r=0;r<e.length;r++)n.push(rH(e[r]).darken(20).toHexString());t[i]=n}return n}cSe.exports={calc:k5t,crossTraceCalc:C5t,makePullColorFn:uSe,generateExtendedColors:fSe}});var vSe=ie((vfr,hSe)=>{"use strict";var L5t=ad().appendArrayMultiPointValues;hSe.exports=function(t,r){var i={curveNumber:r.index,pointNumbers:t.pts,data:r._input,fullData:r,label:t.label,color:t.color,value:t.v,percent:t.percent,text:t.text,bbox:t.bbox,v:t.v};return t.pts.length===1&&(i.pointNumber=i.i=t.pts[0]),L5t(i,r,t.pts),r.type==="funnelarea"&&(delete i.v,delete i.i),i}});var TR=ie((dfr,ISe)=>{"use strict";var dd=Mi(),P5t=js(),_R=Ol(),xSe=_i(),cy=oa(),Hc=Zt(),R5t=Hc.strScale,dSe=Hc.strTranslate,nH=ks(),_Se=xh(),D5t=_Se.recordMinTextSize,I5t=_Se.clearMinTextSize,bSe=Xx().TEXTPAD,Ia=mm(),bR=vSe(),pSe=Zt().isValidTextValue;function F5t(e,t){var r=e._context.staticPlot,i=e._fullLayout,n=i._size;I5t("pie",i),ASe(t,e),PSe(t,n);var a=Hc.makeTraceGroups(i._pielayer,t,"trace").each(function(o){var s=dd.select(this),l=o[0],u=l.trace;G5t(o),s.attr("stroke-linejoin","round"),s.each(function(){var f=dd.select(this).selectAll("g.slice").data(o);f.enter().append("g").classed("slice",!0),f.exit().remove();var c=[[[],[]],[[],[]]],h=!1;f.each(function(T,k){if(T.hidden){dd.select(this).selectAll("path,g").remove();return}T.pointNumber=T.i,T.curveNumber=u.index,c[T.pxmid[1]<0?0:1][T.pxmid[0]<0?0:1].push(T);var _=l.cx,E=l.cy,S=dd.select(this),g=S.selectAll("path.surface").data([T]);if(g.enter().append("path").classed("surface",!0).style({"pointer-events":r?"none":"all"}),S.call(wSe,e,o),u.pull){var C=+Ia.castOption(u.pull,T.pts)||0;C>0&&(_+=C*T.pxmid[0],E+=C*T.pxmid[1])}T.cxFinal=_,T.cyFinal=E;function M(F,N,X,K){var ne=K*(N[0]-F[0]),fe=K*(N[1]-F[1]);return"a"+K*l.r+","+K*l.r+" 0 "+T.largeArc+(X?" 1 ":" 0 ")+ne+","+fe}var P=u.hole;if(T.v===l.vTotal){var D="M"+(_+T.px0[0])+","+(E+T.px0[1])+M(T.px0,T.pxmid,!0,1)+M(T.pxmid,T.px0,!0,1)+"Z";P?g.attr("d","M"+(_+P*T.px0[0])+","+(E+P*T.px0[1])+M(T.px0,T.pxmid,!1,P)+M(T.pxmid,T.px0,!1,P)+"Z"+D):g.attr("d",D)}else{var q=M(T.px0,T.px1,!0,1);if(P){var O=1-P;g.attr("d","M"+(_+P*T.px1[0])+","+(E+P*T.px1[1])+M(T.px1,T.px0,!1,P)+"l"+O*T.px0[0]+","+O*T.px0[1]+q+"Z")}else g.attr("d","M"+_+","+E+"l"+T.px0[0]+","+T.px0[1]+q+"Z")}RSe(e,T,l);var U=Ia.castOption(u.textposition,T.pts),B=S.selectAll("g.slicetext").data(T.text&&U!=="none"?[0]:[]);B.enter().append("g").classed("slicetext",!0),B.exit().remove(),B.each(function(){var F=Hc.ensureSingle(dd.select(this),"text","",function(Z){Z.attr("data-notex",1)}),N=Hc.ensureUniformFontSize(e,U==="outside"?z5t(u,T,i.font):TSe(u,T,i.font));F.text(T.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(cy.font,N).call(nH.convertToTspans,e);var X=cy.bBox(F.node()),K;if(U==="outside")K=mSe(X,T);else if(K=MSe(X,T,l),U==="auto"&&K.scale<1){var ne=Hc.ensureUniformFontSize(e,u.outsidetextfont);F.call(cy.font,ne),X=cy.bBox(F.node()),K=mSe(X,T)}var fe=K.textPosAngle,ue=fe===void 0?T.pxmid:wR(l.r,fe);if(K.targetX=_+ue[0]*K.rCenter+(K.x||0),K.targetY=E+ue[1]*K.rCenter+(K.y||0),DSe(K,X),K.outside){var ee=K.targetY;T.yLabelMin=ee-X.height/2,T.yLabelMid=ee,T.yLabelMax=ee+X.height/2,T.labelExtraX=0,T.labelExtraY=0,h=!0}K.fontSize=N.size,D5t(u.type,K,i),o[k].transform=K,Hc.setTransormAndDisplay(F,K)})});var v=dd.select(this).selectAll("g.titletext").data(u.title.text?[0]:[]);if(v.enter().append("g").classed("titletext",!0),v.exit().remove(),v.each(function(){var T=Hc.ensureSingle(dd.select(this),"text","",function(E){E.attr("data-notex",1)}),k=u.title.text;u._meta&&(k=Hc.templateString(k,u._meta)),T.text(k).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(cy.font,u.title.font).call(nH.convertToTspans,e);var _;u.title.position==="middle center"?_=N5t(l):_=CSe(l,n),T.attr("transform",dSe(_.x,_.y)+R5t(Math.min(1,_.scale))+dSe(_.tx,_.ty))}),h&&V5t(c,u),q5t(f,u),h&&u.automargin){var d=cy.bBox(s.node()),x=u.domain,b=n.w*(x.x[1]-x.x[0]),p=n.h*(x.y[1]-x.y[0]),w=(.5*b-l.r)/n.w,A=(.5*p-l.r)/n.h;P5t.autoMargin(e,"pie."+u.uid+".automargin",{xl:x.x[0]-w,xr:x.x[1]+w,yb:x.y[0]-A,yt:x.y[1]+A,l:Math.max(l.cx-l.r-d.left,0),r:Math.max(d.right-(l.cx+l.r),0),b:Math.max(d.bottom-(l.cy+l.r),0),t:Math.max(l.cy-l.r-d.top,0),pad:5})}})});setTimeout(function(){a.selectAll("tspan").each(function(){var o=dd.select(this);o.attr("dy")&&o.attr("dy",o.attr("dy"))})},0)}function q5t(e,t){e.each(function(r){var i=dd.select(this);if(!r.labelExtraX&&!r.labelExtraY){i.select("path.textline").remove();return}var n=i.select("g.slicetext text");r.transform.targetX+=r.labelExtraX,r.transform.targetY+=r.labelExtraY,Hc.setTransormAndDisplay(n,r.transform);var a=r.cxFinal+r.pxmid[0],o=r.cyFinal+r.pxmid[1],s="M"+a+","+o,l=(r.yLabelMax-r.yLabelMin)*(r.pxmid[0]<0?-1:1)/4;if(r.labelExtraX){var u=r.labelExtraX*r.pxmid[1]/r.pxmid[0],f=r.yLabelMid+r.labelExtraY-(r.cyFinal+r.pxmid[1]);Math.abs(u)>Math.abs(f)?s+="l"+f*r.pxmid[0]/r.pxmid[1]+","+f+"H"+(a+r.labelExtraX+l):s+="l"+r.labelExtraX+","+u+"v"+(f-u)+"h"+l}else s+="V"+(r.yLabelMid+r.labelExtraY)+"h"+l;Hc.ensureSingle(i,"path","textline").call(xSe.stroke,t.outsidetextfont.color).attr({"stroke-width":Math.min(2,t.outsidetextfont.size/8),d:s,fill:"none"})})}function wSe(e,t,r){var i=r[0],n=i.cx,a=i.cy,o=i.trace,s=o.type==="funnelarea";"_hasHoverLabel"in o||(o._hasHoverLabel=!1),"_hasHoverEvent"in o||(o._hasHoverEvent=!1),e.on("mouseover",function(l){var u=t._fullLayout,f=t._fullData[o.index];if(!(t._dragging||u.hovermode===!1)){var c=f.hoverinfo;if(Array.isArray(c)&&(c=_R.castHoverinfo({hoverinfo:[Ia.castOption(c,l.pts)],_module:o._module},u,0)),c==="all"&&(c="label+text+value+percent+name"),f.hovertemplate||c!=="none"&&c!=="skip"&&c){var h=l.rInscribed||0,v=n+l.pxmid[0]*(1-h),d=a+l.pxmid[1]*(1-h),x=u.separators,b=[];if(c&&c.indexOf("label")!==-1&&b.push(l.label),l.text=Ia.castOption(f.hovertext||f.text,l.pts),c&&c.indexOf("text")!==-1){var p=l.text;Hc.isValidTextValue(p)&&b.push(p)}l.value=l.v,l.valueLabel=Ia.formatPieValue(l.v,x),c&&c.indexOf("value")!==-1&&b.push(l.valueLabel),l.percent=l.v/i.vTotal,l.percentLabel=Ia.formatPiePercent(l.percent,x),c&&c.indexOf("percent")!==-1&&b.push(l.percentLabel);var w=f.hoverlabel,A=w.font,T=[];_R.loneHover({trace:o,x0:v-h*i.r,x1:v+h*i.r,y:d,_x0:s?n+l.TL[0]:v-h*i.r,_x1:s?n+l.TR[0]:v+h*i.r,_y0:s?a+l.TL[1]:d-h*i.r,_y1:s?a+l.BL[1]:d+h*i.r,text:b.join("<br>"),name:f.hovertemplate||c.indexOf("name")!==-1?f.name:void 0,idealAlign:l.pxmid[0]<0?"left":"right",color:Ia.castOption(w.bgcolor,l.pts)||l.color,borderColor:Ia.castOption(w.bordercolor,l.pts),fontFamily:Ia.castOption(A.family,l.pts),fontSize:Ia.castOption(A.size,l.pts),fontColor:Ia.castOption(A.color,l.pts),nameLength:Ia.castOption(w.namelength,l.pts),textAlign:Ia.castOption(w.align,l.pts),hovertemplate:Ia.castOption(f.hovertemplate,l.pts),hovertemplateLabels:l,eventData:[bR(l,f)]},{container:u._hoverlayer.node(),outerContainer:u._paper.node(),gd:t,inOut_bbox:T}),l.bbox=T[0],o._hasHoverLabel=!0}o._hasHoverEvent=!0,t.emit("plotly_hover",{points:[bR(l,f)],event:dd.event})}}),e.on("mouseout",function(l){var u=t._fullLayout,f=t._fullData[o.index],c=dd.select(this).datum();o._hasHoverEvent&&(l.originalEvent=dd.event,t.emit("plotly_unhover",{points:[bR(c,f)],event:dd.event}),o._hasHoverEvent=!1),o._hasHoverLabel&&(_R.loneUnhover(u._hoverlayer.node()),o._hasHoverLabel=!1)}),e.on("click",function(l){var u=t._fullLayout,f=t._fullData[o.index];t._dragging||u.hovermode===!1||(t._hoverdata=[bR(l,f)],_R.click(t,dd.event))})}function z5t(e,t,r){var i=Ia.castOption(e.outsidetextfont.color,t.pts)||Ia.castOption(e.textfont.color,t.pts)||r.color,n=Ia.castOption(e.outsidetextfont.family,t.pts)||Ia.castOption(e.textfont.family,t.pts)||r.family,a=Ia.castOption(e.outsidetextfont.size,t.pts)||Ia.castOption(e.textfont.size,t.pts)||r.size,o=Ia.castOption(e.outsidetextfont.weight,t.pts)||Ia.castOption(e.textfont.weight,t.pts)||r.weight,s=Ia.castOption(e.outsidetextfont.style,t.pts)||Ia.castOption(e.textfont.style,t.pts)||r.style,l=Ia.castOption(e.outsidetextfont.variant,t.pts)||Ia.castOption(e.textfont.variant,t.pts)||r.variant,u=Ia.castOption(e.outsidetextfont.textcase,t.pts)||Ia.castOption(e.textfont.textcase,t.pts)||r.textcase,f=Ia.castOption(e.outsidetextfont.lineposition,t.pts)||Ia.castOption(e.textfont.lineposition,t.pts)||r.lineposition,c=Ia.castOption(e.outsidetextfont.shadow,t.pts)||Ia.castOption(e.textfont.shadow,t.pts)||r.shadow;return{color:i,family:n,size:a,weight:o,style:s,variant:l,textcase:u,lineposition:f,shadow:c}}function TSe(e,t,r){var i=Ia.castOption(e.insidetextfont.color,t.pts);!i&&e._input.textfont&&(i=Ia.castOption(e._input.textfont.color,t.pts));var n=Ia.castOption(e.insidetextfont.family,t.pts)||Ia.castOption(e.textfont.family,t.pts)||r.family,a=Ia.castOption(e.insidetextfont.size,t.pts)||Ia.castOption(e.textfont.size,t.pts)||r.size,o=Ia.castOption(e.insidetextfont.weight,t.pts)||Ia.castOption(e.textfont.weight,t.pts)||r.weight,s=Ia.castOption(e.insidetextfont.style,t.pts)||Ia.castOption(e.textfont.style,t.pts)||r.style,l=Ia.castOption(e.insidetextfont.variant,t.pts)||Ia.castOption(e.textfont.variant,t.pts)||r.variant,u=Ia.castOption(e.insidetextfont.textcase,t.pts)||Ia.castOption(e.textfont.textcase,t.pts)||r.textcase,f=Ia.castOption(e.insidetextfont.lineposition,t.pts)||Ia.castOption(e.textfont.lineposition,t.pts)||r.lineposition,c=Ia.castOption(e.insidetextfont.shadow,t.pts)||Ia.castOption(e.textfont.shadow,t.pts)||r.shadow;return{color:i||xSe.contrast(t.color),family:n,size:a,weight:o,style:s,variant:l,textcase:u,lineposition:f,shadow:c}}function ASe(e,t){for(var r,i,n=0;n<e.length;n++)if(r=e[n][0],i=r.trace,i.title.text){var a=i.title.text;i._meta&&(a=Hc.templateString(a,i._meta));var o=cy.tester.append("text").attr("data-notex",1).text(a).call(cy.font,i.title.font).call(nH.convertToTspans,t),s=cy.bBox(o.node(),!0);r.titleBox={width:s.width,height:s.height},o.remove()}}function MSe(e,t,r){var i=r.r||t.rpx1,n=t.rInscribed,a=t.startangle===t.stopangle;if(a)return{rCenter:1-n,scale:0,rotate:0,textPosAngle:0};var o=t.ring,s=o===1&&Math.abs(t.startangle-t.stopangle)===Math.PI*2,l=t.halfangle,u=t.midangle,f=r.trace.insidetextorientation,c=f==="horizontal",h=f==="tangential",v=f==="radial",d=f==="auto",x=[],b;if(!d){var p=function(S,g){if(O5t(t,S)){var C=Math.abs(S-t.startangle),M=Math.abs(S-t.stopangle),P=C<M?C:M;g==="tan"?b=ySe(e,i,o,P,0):b=gSe(e,i,o,P,Math.PI/2),b.textPosAngle=S,x.push(b)}},w;if(c||h){for(w=4;w>=-4;w-=2)p(Math.PI*w,"tan");for(w=4;w>=-4;w-=2)p(Math.PI*(w+1),"tan")}if(c||v){for(w=4;w>=-4;w-=2)p(Math.PI*(w+1.5),"rad");for(w=4;w>=-4;w-=2)p(Math.PI*(w+.5),"rad")}}if(s||d||c){var A=Math.sqrt(e.width*e.width+e.height*e.height);if(b={scale:n*i*2/A,rCenter:1-n,rotate:0},b.textPosAngle=(t.startangle+t.stopangle)/2,b.scale>=1)return b;x.push(b)}(d||v)&&(b=gSe(e,i,o,l,u),b.textPosAngle=(t.startangle+t.stopangle)/2,x.push(b)),(d||h)&&(b=ySe(e,i,o,l,u),b.textPosAngle=(t.startangle+t.stopangle)/2,x.push(b));for(var T=0,k=0,_=0;_<x.length;_++){var E=x[_].scale;if(k<E&&(k=E,T=_),!d&&k>=1)break}return x[T]}function O5t(e,t){var r=e.startangle,i=e.stopangle;return r>t&&t>i||r<t&&t<i}function gSe(e,t,r,i,n){t=Math.max(0,t-2*bSe);var a=e.width/e.height,o=kSe(a,i,t,r);return{scale:o*2/e.height,rCenter:SSe(a,o/t),rotate:ESe(n)}}function ySe(e,t,r,i,n){t=Math.max(0,t-2*bSe);var a=e.height/e.width,o=kSe(a,i,t,r);return{scale:o*2/e.width,rCenter:SSe(a,o/t),rotate:ESe(n+Math.PI/2)}}function SSe(e,t){return Math.cos(t)-e*t}function ESe(e){return(180/Math.PI*e+720)%180-90}function kSe(e,t,r,i){var n=e+1/(2*Math.tan(t));return r*Math.min(1/(Math.sqrt(n*n+.5)+n),i/(Math.sqrt(e*e+i/2)+e))}function B5t(e,t){return e.v===t.vTotal&&!t.trace.hole?1:Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2)}function mSe(e,t){var r=t.pxmid[0],i=t.pxmid[1],n=e.width/2,a=e.height/2;return r<0&&(n*=-1),i<0&&(a*=-1),{scale:1,rCenter:1,rotate:0,x:n+Math.abs(a)*(n>0?1:-1)/2,y:a/(1+r*r/(i*i)),outside:!0}}function N5t(e){var t=Math.sqrt(e.titleBox.width*e.titleBox.width+e.titleBox.height*e.titleBox.height);return{x:e.cx,y:e.cy,scale:e.trace.hole*e.r*2/t,tx:0,ty:-e.titleBox.height/2+e.trace.title.font.size}}function CSe(e,t){var r=1,i=1,n,a=e.trace,o={x:e.cx,y:e.cy},s={tx:0,ty:0};s.ty+=a.title.font.size,n=LSe(a),a.title.position.indexOf("top")!==-1?(o.y-=(1+n)*e.r,s.ty-=e.titleBox.height):a.title.position.indexOf("bottom")!==-1&&(o.y+=(1+n)*e.r);var l=U5t(e.r,e.trace.aspectratio),u=t.w*(a.domain.x[1]-a.domain.x[0])/2;return a.title.position.indexOf("left")!==-1?(u=u+l,o.x-=(1+n)*l,s.tx+=e.titleBox.width/2):a.title.position.indexOf("center")!==-1?u*=2:a.title.position.indexOf("right")!==-1&&(u=u+l,o.x+=(1+n)*l,s.tx-=e.titleBox.width/2),r=u/e.titleBox.width,i=iH(e,t)/e.titleBox.height,{x:o.x,y:o.y,scale:Math.min(r,i),tx:s.tx,ty:s.ty}}function U5t(e,t){return e/(t===void 0?1:t)}function iH(e,t){var r=e.trace,i=t.h*(r.domain.y[1]-r.domain.y[0]);return Math.min(e.titleBox.height,i/2)}function LSe(e){var t=e.pull;if(!t)return 0;var r;if(Hc.isArrayOrTypedArray(t))for(t=0,r=0;r<e.pull.length;r++)e.pull[r]>t&&(t=e.pull[r]);return t}function V5t(e,t){var r,i,n,a,o,s,l,u,f,c,h,v,d;function x(A,T){return A.pxmid[1]-T.pxmid[1]}function b(A,T){return T.pxmid[1]-A.pxmid[1]}function p(A,T){T||(T={});var k=T.labelExtraY+(i?T.yLabelMax:T.yLabelMin),_=i?A.yLabelMin:A.yLabelMax,E=i?A.yLabelMax:A.yLabelMin,S=A.cyFinal+o(A.px0[1],A.px1[1]),g=k-_,C,M,P,D,q,O;if(g*l>0&&(A.labelExtraY=g),!!Hc.isArrayOrTypedArray(t.pull))for(M=0;M<c.length;M++)P=c[M],!(P===A||(Ia.castOption(t.pull,A.pts)||0)>=(Ia.castOption(t.pull,P.pts)||0))&&((A.pxmid[1]-P.pxmid[1])*l>0?(D=P.cyFinal+o(P.px0[1],P.px1[1]),g=D-_-A.labelExtraY,g*l>0&&(A.labelExtraY+=g)):(E+A.labelExtraY-S)*l>0&&(C=3*s*Math.abs(M-c.indexOf(A)),q=P.cxFinal+a(P.px0[0],P.px1[0]),O=q+C-(A.cxFinal+A.pxmid[0])-A.labelExtraX,O*s>0&&(A.labelExtraX+=O)))}for(i=0;i<2;i++)for(n=i?x:b,o=i?Math.max:Math.min,l=i?1:-1,r=0;r<2;r++){for(a=r?Math.max:Math.min,s=r?1:-1,u=e[i][r],u.sort(n),f=e[1-i][r],c=f.concat(u),v=[],h=0;h<u.length;h++)u[h].yLabelMid!==void 0&&v.push(u[h]);for(d=!1,h=0;i&&h<f.length;h++)if(f[h].yLabelMid!==void 0){d=f[h];break}for(h=0;h<v.length;h++){var w=h&&v[h-1];d&&!h&&(w=d),p(v[h],w)}}}function PSe(e,t){for(var r=[],i=0;i<e.length;i++){var n=e[i][0],a=n.trace,o=a.domain,s=t.w*(o.x[1]-o.x[0]),l=t.h*(o.y[1]-o.y[0]);a.title.text&&a.title.position!=="middle center"&&(l-=iH(n,t));var u=s/2,f=l/2;a.type==="funnelarea"&&!a.scalegroup&&(f/=a.aspectratio),n.r=Math.min(u,f)/(1+LSe(a)),n.cx=t.l+t.w*(a.domain.x[1]+a.domain.x[0])/2,n.cy=t.t+t.h*(1-a.domain.y[0])-l/2,a.title.text&&a.title.position.indexOf("bottom")!==-1&&(n.cy-=iH(n,t)),a.scalegroup&&r.indexOf(a.scalegroup)===-1&&r.push(a.scalegroup)}H5t(e,r)}function H5t(e,t){for(var r,i,n,a=0;a<t.length;a++){var o=1/0,s=t[a];for(i=0;i<e.length;i++)if(r=e[i][0],n=r.trace,n.scalegroup===s){var l;if(n.type==="pie")l=r.r*r.r;else if(n.type==="funnelarea"){var u,f;n.aspectratio>1?(u=r.r,f=u/n.aspectratio):(f=r.r,u=f*n.aspectratio),u*=(1+n.baseratio)/2,l=u*f}o=Math.min(o,l/r.vTotal)}for(i=0;i<e.length;i++)if(r=e[i][0],n=r.trace,n.scalegroup===s){var c=o*r.vTotal;n.type==="funnelarea"&&(c/=(1+n.baseratio)/2,c/=n.aspectratio),r.r=Math.sqrt(c)}}}function G5t(e){var t=e[0],r=t.r,i=t.trace,n=Ia.getRotationAngle(i.rotation),a=2*Math.PI/t.vTotal,o="px0",s="px1",l,u,f;if(i.direction==="counterclockwise"){for(l=0;l<e.length&&e[l].hidden;l++);if(l===e.length)return;n+=a*e[l].v,a*=-1,o="px1",s="px0"}for(f=wR(r,n),l=0;l<e.length;l++)u=e[l],!u.hidden&&(u[o]=f,u.startangle=n,n+=a*u.v/2,u.pxmid=wR(r,n),u.midangle=n,n+=a*u.v/2,f=wR(r,n),u.stopangle=n,u[s]=f,u.largeArc=u.v>t.vTotal/2?1:0,u.halfangle=Math.PI*Math.min(u.v/t.vTotal,.5),u.ring=1-i.hole,u.rInscribed=B5t(u,t))}function wR(e,t){return[e*Math.sin(t),-e*Math.cos(t)]}function RSe(e,t,r){var i=e._fullLayout,n=r.trace,a=n.texttemplate,o=n.textinfo;if(!a&&o&&o!=="none"){var s=o.split("+"),l=function(T){return s.indexOf(T)!==-1},u=l("label"),f=l("text"),c=l("value"),h=l("percent"),v=i.separators,d;if(d=u?[t.label]:[],f){var x=Ia.getFirstFilled(n.text,t.pts);pSe(x)&&d.push(x)}c&&d.push(Ia.formatPieValue(t.v,v)),h&&d.push(Ia.formatPiePercent(t.v/r.vTotal,v)),t.text=d.join("<br>")}function b(T){return{label:T.label,value:T.v,valueLabel:Ia.formatPieValue(T.v,i.separators),percent:T.v/r.vTotal,percentLabel:Ia.formatPiePercent(T.v/r.vTotal,i.separators),color:T.color,text:T.text,customdata:Hc.castOption(n,T.i,"customdata")}}if(a){var p=Hc.castOption(n,t.i,"texttemplate");if(!p)t.text="";else{var w=b(t),A=Ia.getFirstFilled(n.text,t.pts);(pSe(A)||A==="")&&(w.text=A),t.text=Hc.texttemplateString(p,w,e._fullLayout._d3locale,w,n._meta||{})}}}function DSe(e,t){var r=e.rotate*Math.PI/180,i=Math.cos(r),n=Math.sin(r),a=(t.left+t.right)/2,o=(t.top+t.bottom)/2;e.textX=a*i-o*n,e.textY=a*n+o*i,e.noCenter=!0}ISe.exports={plot:F5t,formatSliceLabel:RSe,transformInsideText:MSe,determineInsideTextFont:TSe,positionTitleOutside:CSe,prerenderTitles:ASe,layoutAreas:PSe,attachFxHandlers:wSe,computeTransform:DSe}});var zSe=ie((pfr,qSe)=>{"use strict";var FSe=Mi(),Y5t=S2(),W5t=xh().resizeText;qSe.exports=function(t){var r=t._fullLayout._pielayer.selectAll(".trace");W5t(t,r,"pie"),r.each(function(i){var n=i[0],a=n.trace,o=FSe.select(this);o.style({opacity:a.opacity}),o.selectAll("path.surface").each(function(s){FSe.select(this).call(Y5t,s,a,t)})})}});var BSe=ie(f3=>{"use strict";var OSe=js();f3.name="pie";f3.plot=function(e,t,r,i){OSe.plotBasePlot(f3.name,e,t,r,i)};f3.clean=function(e,t,r,i){OSe.cleanBasePlot(f3.name,e,t,r,i)}});var USe=ie((yfr,NSe)=>{"use strict";NSe.exports={attributes:w_(),supplyDefaults:T_().supplyDefaults,supplyLayoutDefaults:lSe(),layoutAttributes:xR(),calc:u3().calc,crossTraceCalc:u3().crossTraceCalc,plot:TR().plot,style:zSe(),styleOne:S2(),moduleType:"trace",name:"pie",basePlotModule:BSe(),categories:["pie-like","pie","showLegend"],meta:{}}});var HSe=ie((mfr,VSe)=>{"use strict";VSe.exports=USe()});var YSe=ie(c3=>{"use strict";var GSe=js();c3.name="sunburst";c3.plot=function(e,t,r,i){GSe.plotBasePlot(c3.name,e,t,r,i)};c3.clean=function(e,t,r,i){GSe.cleanBasePlot(c3.name,e,t,r,i)}});var aH=ie((_fr,WSe)=>{"use strict";WSe.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}});var pE=ie((bfr,ZSe)=>{"use strict";var X5t=rs(),Z5t=Ba().hovertemplateAttrs,j5t=Ba().texttemplateAttrs,K5t=Ls(),J5t=fl().attributes,hy=w_(),XSe=aH(),dE=aa().extendFlat,Q5t=dc().pattern;ZSe.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:dE({colors:{valType:"data_array",editType:"calc"},line:{color:dE({},hy.marker.line.color,{dflt:null}),width:dE({},hy.marker.line.width,{dflt:1}),editType:"calc"},pattern:Q5t,editType:"calc"},K5t("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:hy.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:j5t({editType:"plot"},{keys:XSe.eventDataKeys.concat(["label","value"])}),hovertext:hy.hovertext,hoverinfo:dE({},X5t.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:Z5t({},{keys:XSe.eventDataKeys}),textfont:hy.textfont,insidetextorientation:hy.insidetextorientation,insidetextfont:hy.insidetextfont,outsidetextfont:dE({},hy.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:hy.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:J5t({name:"sunburst",trace:!0,editType:"calc"})}});var oH=ie((wfr,jSe)=>{"use strict";jSe.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}});var $Se=ie((Tfr,QSe)=>{"use strict";var KSe=Zt(),$5t=pE(),ekt=fl().defaults,tkt=zd().handleText,rkt=T_().handleMarkerDefaults,JSe=ul(),nkt=JSe.hasColorscale,ikt=JSe.handleDefaults;QSe.exports=function(t,r,i,n){function a(h,v){return KSe.coerce(t,r,$5t,h,v)}var o=a("labels"),s=a("parents");if(!o||!o.length||!s||!s.length){r.visible=!1;return}var l=a("values");l&&l.length?a("branchvalues"):a("count"),a("level"),a("maxdepth"),rkt(t,r,n,a);var u=r._hasColorscale=nkt(t,"marker","colors")||(t.marker||{}).coloraxis;u&&ikt(t,r,n,a,{prefix:"marker.",cLetter:"c"}),a("leaf.opacity",u?1:.7);var f=a("text");a("texttemplate"),r.texttemplate||a("textinfo",KSe.isArrayOrTypedArray(f)?"text+label":"label"),a("hovertext"),a("hovertemplate");var c="auto";tkt(t,r,n,a,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),a("insidetextorientation"),a("sort"),a("rotation"),a("root.color"),ekt(r,n,a),r._length=null}});var tEe=ie((Afr,eEe)=>{"use strict";var akt=Zt(),okt=oH();eEe.exports=function(t,r){function i(n,a){return akt.coerce(t,r,okt,n,a)}i("sunburstcolorway",r.colorway),i("extendsunburstcolors")}});var gE=ie((AR,rEe)=>{(function(e,t){typeof AR=="object"&&typeof rEe!="undefined"?t(AR):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.d3=e.d3||{}))})(AR,function(e){"use strict";function t(Je,Ze){return Je.parent===Ze.parent?1:2}function r(Je){return Je.reduce(i,0)/Je.length}function i(Je,Ze){return Je+Ze.x}function n(Je){return 1+Je.reduce(a,0)}function a(Je,Ze){return Math.max(Je,Ze.y)}function o(Je){for(var Ze;Ze=Je.children;)Je=Ze[0];return Je}function s(Je){for(var Ze;Ze=Je.children;)Je=Ze[Ze.length-1];return Je}function l(){var Je=t,Ze=1,At=1,Se=!1;function pe(Te){var it,Dt=0;Te.eachAfter(function(mr){var Fr=mr.children;Fr?(mr.x=r(Fr),mr.y=n(Fr)):(mr.x=it?Dt+=Je(mr,it):0,mr.y=0,it=mr)});var Wt=o(Te),er=s(Te),qr=Wt.x-Je(Wt,er)/2,Vr=er.x+Je(er,Wt)/2;return Te.eachAfter(Se?function(mr){mr.x=(mr.x-Te.x)*Ze,mr.y=(Te.y-mr.y)*At}:function(mr){mr.x=(mr.x-qr)/(Vr-qr)*Ze,mr.y=(1-(Te.y?mr.y/Te.y:1))*At})}return pe.separation=function(Te){return arguments.length?(Je=Te,pe):Je},pe.size=function(Te){return arguments.length?(Se=!1,Ze=+Te[0],At=+Te[1],pe):Se?null:[Ze,At]},pe.nodeSize=function(Te){return arguments.length?(Se=!0,Ze=+Te[0],At=+Te[1],pe):Se?[Ze,At]:null},pe}function u(Je){var Ze=0,At=Je.children,Se=At&&At.length;if(!Se)Ze=1;else for(;--Se>=0;)Ze+=At[Se].value;Je.value=Ze}function f(){return this.eachAfter(u)}function c(Je){var Ze=this,At,Se=[Ze],pe,Te,it;do for(At=Se.reverse(),Se=[];Ze=At.pop();)if(Je(Ze),pe=Ze.children,pe)for(Te=0,it=pe.length;Te<it;++Te)Se.push(pe[Te]);while(Se.length);return this}function h(Je){for(var Ze=this,At=[Ze],Se,pe;Ze=At.pop();)if(Je(Ze),Se=Ze.children,Se)for(pe=Se.length-1;pe>=0;--pe)At.push(Se[pe]);return this}function v(Je){for(var Ze=this,At=[Ze],Se=[],pe,Te,it;Ze=At.pop();)if(Se.push(Ze),pe=Ze.children,pe)for(Te=0,it=pe.length;Te<it;++Te)At.push(pe[Te]);for(;Ze=Se.pop();)Je(Ze);return this}function d(Je){return this.eachAfter(function(Ze){for(var At=+Je(Ze.data)||0,Se=Ze.children,pe=Se&&Se.length;--pe>=0;)At+=Se[pe].value;Ze.value=At})}function x(Je){return this.eachBefore(function(Ze){Ze.children&&Ze.children.sort(Je)})}function b(Je){for(var Ze=this,At=p(Ze,Je),Se=[Ze];Ze!==At;)Ze=Ze.parent,Se.push(Ze);for(var pe=Se.length;Je!==At;)Se.splice(pe,0,Je),Je=Je.parent;return Se}function p(Je,Ze){if(Je===Ze)return Je;var At=Je.ancestors(),Se=Ze.ancestors(),pe=null;for(Je=At.pop(),Ze=Se.pop();Je===Ze;)pe=Je,Je=At.pop(),Ze=Se.pop();return pe}function w(){for(var Je=this,Ze=[Je];Je=Je.parent;)Ze.push(Je);return Ze}function A(){var Je=[];return this.each(function(Ze){Je.push(Ze)}),Je}function T(){var Je=[];return this.eachBefore(function(Ze){Ze.children||Je.push(Ze)}),Je}function k(){var Je=this,Ze=[];return Je.each(function(At){At!==Je&&Ze.push({source:At.parent,target:At})}),Ze}function _(Je,Ze){var At=new M(Je),Se=+Je.value&&(At.value=Je.value),pe,Te=[At],it,Dt,Wt,er;for(Ze==null&&(Ze=S);pe=Te.pop();)if(Se&&(pe.value=+pe.data.value),(Dt=Ze(pe.data))&&(er=Dt.length))for(pe.children=new Array(er),Wt=er-1;Wt>=0;--Wt)Te.push(it=pe.children[Wt]=new M(Dt[Wt])),it.parent=pe,it.depth=pe.depth+1;return At.eachBefore(C)}function E(){return _(this).eachBefore(g)}function S(Je){return Je.children}function g(Je){Je.data=Je.data.data}function C(Je){var Ze=0;do Je.height=Ze;while((Je=Je.parent)&&Je.height<++Ze)}function M(Je){this.data=Je,this.depth=this.height=0,this.parent=null}M.prototype=_.prototype={constructor:M,count:f,each:c,eachAfter:v,eachBefore:h,sum:d,sort:x,path:b,ancestors:w,descendants:A,leaves:T,links:k,copy:E};var P=Array.prototype.slice;function D(Je){for(var Ze=Je.length,At,Se;Ze;)Se=Math.random()*Ze--|0,At=Je[Ze],Je[Ze]=Je[Se],Je[Se]=At;return Je}function q(Je){for(var Ze=0,At=(Je=D(P.call(Je))).length,Se=[],pe,Te;Ze<At;)pe=Je[Ze],Te&&B(Te,pe)?++Ze:(Te=N(Se=O(Se,pe)),Ze=0);return Te}function O(Je,Ze){var At,Se;if(F(Ze,Je))return[Ze];for(At=0;At<Je.length;++At)if(U(Ze,Je[At])&&F(K(Je[At],Ze),Je))return[Je[At],Ze];for(At=0;At<Je.length-1;++At)for(Se=At+1;Se<Je.length;++Se)if(U(K(Je[At],Je[Se]),Ze)&&U(K(Je[At],Ze),Je[Se])&&U(K(Je[Se],Ze),Je[At])&&F(ne(Je[At],Je[Se],Ze),Je))return[Je[At],Je[Se],Ze];throw new Error}function U(Je,Ze){var At=Je.r-Ze.r,Se=Ze.x-Je.x,pe=Ze.y-Je.y;return At<0||At*At<Se*Se+pe*pe}function B(Je,Ze){var At=Je.r-Ze.r+1e-6,Se=Ze.x-Je.x,pe=Ze.y-Je.y;return At>0&&At*At>Se*Se+pe*pe}function F(Je,Ze){for(var At=0;At<Ze.length;++At)if(!B(Je,Ze[At]))return!1;return!0}function N(Je){switch(Je.length){case 1:return X(Je[0]);case 2:return K(Je[0],Je[1]);case 3:return ne(Je[0],Je[1],Je[2])}}function X(Je){return{x:Je.x,y:Je.y,r:Je.r}}function K(Je,Ze){var At=Je.x,Se=Je.y,pe=Je.r,Te=Ze.x,it=Ze.y,Dt=Ze.r,Wt=Te-At,er=it-Se,qr=Dt-pe,Vr=Math.sqrt(Wt*Wt+er*er);return{x:(At+Te+Wt/Vr*qr)/2,y:(Se+it+er/Vr*qr)/2,r:(Vr+pe+Dt)/2}}function ne(Je,Ze,At){var Se=Je.x,pe=Je.y,Te=Je.r,it=Ze.x,Dt=Ze.y,Wt=Ze.r,er=At.x,qr=At.y,Vr=At.r,mr=Se-it,Fr=Se-er,nn=pe-Dt,jn=pe-qr,xn=Wt-Te,pn=Vr-Te,ki=Se*Se+pe*pe-Te*Te,qn=ki-it*it-Dt*Dt+Wt*Wt,bi=ki-er*er-qr*qr+Vr*Vr,Si=Fr*nn-mr*jn,nt=(nn*bi-jn*qn)/(Si*2)-Se,ze=(jn*xn-nn*pn)/Si,ut=(Fr*qn-mr*bi)/(Si*2)-pe,mt=(mr*pn-Fr*xn)/Si,Ot=ze*ze+mt*mt-1,nr=2*(Te+nt*ze+ut*mt),yr=nt*nt+ut*ut-Te*Te,vr=-(Ot?(nr+Math.sqrt(nr*nr-4*Ot*yr))/(2*Ot):yr/nr);return{x:Se+nt+ze*vr,y:pe+ut+mt*vr,r:vr}}function fe(Je,Ze,At){var Se=Je.x-Ze.x,pe,Te,it=Je.y-Ze.y,Dt,Wt,er=Se*Se+it*it;er?(Te=Ze.r+At.r,Te*=Te,Wt=Je.r+At.r,Wt*=Wt,Te>Wt?(pe=(er+Wt-Te)/(2*er),Dt=Math.sqrt(Math.max(0,Wt/er-pe*pe)),At.x=Je.x-pe*Se-Dt*it,At.y=Je.y-pe*it+Dt*Se):(pe=(er+Te-Wt)/(2*er),Dt=Math.sqrt(Math.max(0,Te/er-pe*pe)),At.x=Ze.x+pe*Se-Dt*it,At.y=Ze.y+pe*it+Dt*Se)):(At.x=Ze.x+At.r,At.y=Ze.y)}function ue(Je,Ze){var At=Je.r+Ze.r-1e-6,Se=Ze.x-Je.x,pe=Ze.y-Je.y;return At>0&&At*At>Se*Se+pe*pe}function ee(Je){var Ze=Je._,At=Je.next._,Se=Ze.r+At.r,pe=(Ze.x*At.r+At.x*Ze.r)/Se,Te=(Ze.y*At.r+At.y*Ze.r)/Se;return pe*pe+Te*Te}function Z(Je){this._=Je,this.next=null,this.previous=null}function oe(Je){if(!(pe=Je.length))return 0;var Ze,At,Se,pe,Te,it,Dt,Wt,er,qr,Vr;if(Ze=Je[0],Ze.x=0,Ze.y=0,!(pe>1))return Ze.r;if(At=Je[1],Ze.x=-At.r,At.x=Ze.r,At.y=0,!(pe>2))return Ze.r+At.r;fe(At,Ze,Se=Je[2]),Ze=new Z(Ze),At=new Z(At),Se=new Z(Se),Ze.next=Se.previous=At,At.next=Ze.previous=Se,Se.next=At.previous=Ze;e:for(Dt=3;Dt<pe;++Dt){fe(Ze._,At._,Se=Je[Dt]),Se=new Z(Se),Wt=At.next,er=Ze.previous,qr=At._.r,Vr=Ze._.r;do if(qr<=Vr){if(ue(Wt._,Se._)){At=Wt,Ze.next=At,At.previous=Ze,--Dt;continue e}qr+=Wt._.r,Wt=Wt.next}else{if(ue(er._,Se._)){Ze=er,Ze.next=At,At.previous=Ze,--Dt;continue e}Vr+=er._.r,er=er.previous}while(Wt!==er.next);for(Se.previous=Ze,Se.next=At,Ze.next=At.previous=At=Se,Te=ee(Ze);(Se=Se.next)!==At;)(it=ee(Se))<Te&&(Ze=Se,Te=it);At=Ze.next}for(Ze=[At._],Se=At;(Se=Se.next)!==At;)Ze.push(Se._);for(Se=q(Ze),Dt=0;Dt<pe;++Dt)Ze=Je[Dt],Ze.x-=Se.x,Ze.y-=Se.y;return Se.r}function ce(Je){return oe(Je),Je}function le(Je){return Je==null?null:me(Je)}function me(Je){if(typeof Je!="function")throw new Error;return Je}function he(){return 0}function te(Je){return function(){return Je}}function ge(Je){return Math.sqrt(Je.value)}function ae(){var Je=null,Ze=1,At=1,Se=he;function pe(Te){return Te.x=Ze/2,Te.y=At/2,Je?Te.eachBefore(_e(Je)).eachAfter(Ce(Se,.5)).eachBefore(qe(1)):Te.eachBefore(_e(ge)).eachAfter(Ce(he,1)).eachAfter(Ce(Se,Te.r/Math.min(Ze,At))).eachBefore(qe(Math.min(Ze,At)/(2*Te.r))),Te}return pe.radius=function(Te){return arguments.length?(Je=le(Te),pe):Je},pe.size=function(Te){return arguments.length?(Ze=+Te[0],At=+Te[1],pe):[Ze,At]},pe.padding=function(Te){return arguments.length?(Se=typeof Te=="function"?Te:te(+Te),pe):Se},pe}function _e(Je){return function(Ze){Ze.children||(Ze.r=Math.max(0,+Je(Ze)||0))}}function Ce(Je,Ze){return function(At){if(Se=At.children){var Se,pe,Te=Se.length,it=Je(At)*Ze||0,Dt;if(it)for(pe=0;pe<Te;++pe)Se[pe].r+=it;if(Dt=oe(Se),it)for(pe=0;pe<Te;++pe)Se[pe].r-=it;At.r=Dt+it}}}function qe(Je){return function(Ze){var At=Ze.parent;Ze.r*=Je,At&&(Ze.x=At.x+Je*Ze.x,Ze.y=At.y+Je*Ze.y)}}function rt(Je){Je.x0=Math.round(Je.x0),Je.y0=Math.round(Je.y0),Je.x1=Math.round(Je.x1),Je.y1=Math.round(Je.y1)}function Re(Je,Ze,At,Se,pe){for(var Te=Je.children,it,Dt=-1,Wt=Te.length,er=Je.value&&(Se-Ze)/Je.value;++Dt<Wt;)it=Te[Dt],it.y0=At,it.y1=pe,it.x0=Ze,it.x1=Ze+=it.value*er}function Ie(){var Je=1,Ze=1,At=0,Se=!1;function pe(it){var Dt=it.height+1;return it.x0=it.y0=At,it.x1=Je,it.y1=Ze/Dt,it.eachBefore(Te(Ze,Dt)),Se&&it.eachBefore(rt),it}function Te(it,Dt){return function(Wt){Wt.children&&Re(Wt,Wt.x0,it*(Wt.depth+1)/Dt,Wt.x1,it*(Wt.depth+2)/Dt);var er=Wt.x0,qr=Wt.y0,Vr=Wt.x1-At,mr=Wt.y1-At;Vr<er&&(er=Vr=(er+Vr)/2),mr<qr&&(qr=mr=(qr+mr)/2),Wt.x0=er,Wt.y0=qr,Wt.x1=Vr,Wt.y1=mr}}return pe.round=function(it){return arguments.length?(Se=!!it,pe):Se},pe.size=function(it){return arguments.length?(Je=+it[0],Ze=+it[1],pe):[Je,Ze]},pe.padding=function(it){return arguments.length?(At=+it,pe):At},pe}var ot="$",lt={depth:-1},ht={};function xt(Je){return Je.id}function Vt(Je){return Je.parentId}function Ht(){var Je=xt,Ze=Vt;function At(Se){var pe,Te,it=Se.length,Dt,Wt,er,qr=new Array(it),Vr,mr,Fr={};for(Te=0;Te<it;++Te)pe=Se[Te],er=qr[Te]=new M(pe),(Vr=Je(pe,Te,Se))!=null&&(Vr+="")&&(mr=ot+(er.id=Vr),Fr[mr]=mr in Fr?ht:er);for(Te=0;Te<it;++Te)if(er=qr[Te],Vr=Ze(Se[Te],Te,Se),Vr==null||!(Vr+="")){if(Dt)throw new Error("multiple roots");Dt=er}else{if(Wt=Fr[ot+Vr],!Wt)throw new Error("missing: "+Vr);if(Wt===ht)throw new Error("ambiguous: "+Vr);Wt.children?Wt.children.push(er):Wt.children=[er],er.parent=Wt}if(!Dt)throw new Error("no root");if(Dt.parent=lt,Dt.eachBefore(function(nn){nn.depth=nn.parent.depth+1,--it}).eachBefore(C),Dt.parent=null,it>0)throw new Error("cycle");return Dt}return At.id=function(Se){return arguments.length?(Je=me(Se),At):Je},At.parentId=function(Se){return arguments.length?(Ze=me(Se),At):Ze},At}function Me(Je,Ze){return Je.parent===Ze.parent?1:2}function Ke(Je){var Ze=Je.children;return Ze?Ze[0]:Je.t}function We(Je){var Ze=Je.children;return Ze?Ze[Ze.length-1]:Je.t}function et(Je,Ze,At){var Se=At/(Ze.i-Je.i);Ze.c-=Se,Ze.s+=At,Je.c+=Se,Ze.z+=At,Ze.m+=At}function vt(Je){for(var Ze=0,At=0,Se=Je.children,pe=Se.length,Te;--pe>=0;)Te=Se[pe],Te.z+=Ze,Te.m+=Ze,Ze+=Te.s+(At+=Te.c)}function at(Je,Ze,At){return Je.a.parent===Ze.parent?Je.a:At}function Xe(Je,Ze){this._=Je,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Ze}Xe.prototype=Object.create(M.prototype);function dt(Je){for(var Ze=new Xe(Je,0),At,Se=[Ze],pe,Te,it,Dt;At=Se.pop();)if(Te=At._.children)for(At.children=new Array(Dt=Te.length),it=Dt-1;it>=0;--it)Se.push(pe=At.children[it]=new Xe(Te[it],it)),pe.parent=At;return(Ze.parent=new Xe(null,0)).children=[Ze],Ze}function _t(){var Je=Me,Ze=1,At=1,Se=null;function pe(er){var qr=dt(er);if(qr.eachAfter(Te),qr.parent.m=-qr.z,qr.eachBefore(it),Se)er.eachBefore(Wt);else{var Vr=er,mr=er,Fr=er;er.eachBefore(function(ki){ki.x<Vr.x&&(Vr=ki),ki.x>mr.x&&(mr=ki),ki.depth>Fr.depth&&(Fr=ki)});var nn=Vr===mr?1:Je(Vr,mr)/2,jn=nn-Vr.x,xn=Ze/(mr.x+nn+jn),pn=At/(Fr.depth||1);er.eachBefore(function(ki){ki.x=(ki.x+jn)*xn,ki.y=ki.depth*pn})}return er}function Te(er){var qr=er.children,Vr=er.parent.children,mr=er.i?Vr[er.i-1]:null;if(qr){vt(er);var Fr=(qr[0].z+qr[qr.length-1].z)/2;mr?(er.z=mr.z+Je(er._,mr._),er.m=er.z-Fr):er.z=Fr}else mr&&(er.z=mr.z+Je(er._,mr._));er.parent.A=Dt(er,mr,er.parent.A||Vr[0])}function it(er){er._.x=er.z+er.parent.m,er.m+=er.parent.m}function Dt(er,qr,Vr){if(qr){for(var mr=er,Fr=er,nn=qr,jn=mr.parent.children[0],xn=mr.m,pn=Fr.m,ki=nn.m,qn=jn.m,bi;nn=We(nn),mr=Ke(mr),nn&&mr;)jn=Ke(jn),Fr=We(Fr),Fr.a=er,bi=nn.z+ki-mr.z-xn+Je(nn._,mr._),bi>0&&(et(at(nn,er,Vr),er,bi),xn+=bi,pn+=bi),ki+=nn.m,xn+=mr.m,qn+=jn.m,pn+=Fr.m;nn&&!We(Fr)&&(Fr.t=nn,Fr.m+=ki-pn),mr&&!Ke(jn)&&(jn.t=mr,jn.m+=xn-qn,Vr=er)}return Vr}function Wt(er){er.x*=Ze,er.y=er.depth*At}return pe.separation=function(er){return arguments.length?(Je=er,pe):Je},pe.size=function(er){return arguments.length?(Se=!1,Ze=+er[0],At=+er[1],pe):Se?null:[Ze,At]},pe.nodeSize=function(er){return arguments.length?(Se=!0,Ze=+er[0],At=+er[1],pe):Se?[Ze,At]:null},pe}function $t(Je,Ze,At,Se,pe){for(var Te=Je.children,it,Dt=-1,Wt=Te.length,er=Je.value&&(pe-At)/Je.value;++Dt<Wt;)it=Te[Dt],it.x0=Ze,it.x1=Se,it.y0=At,it.y1=At+=it.value*er}var Ut=(1+Math.sqrt(5))/2;function fr(Je,Ze,At,Se,pe,Te){for(var it=[],Dt=Ze.children,Wt,er,qr=0,Vr=0,mr=Dt.length,Fr,nn,jn=Ze.value,xn,pn,ki,qn,bi,Si,nt;qr<mr;){Fr=pe-At,nn=Te-Se;do xn=Dt[Vr++].value;while(!xn&&Vr<mr);for(pn=ki=xn,Si=Math.max(nn/Fr,Fr/nn)/(jn*Je),nt=xn*xn*Si,bi=Math.max(ki/nt,nt/pn);Vr<mr;++Vr){if(xn+=er=Dt[Vr].value,er<pn&&(pn=er),er>ki&&(ki=er),nt=xn*xn*Si,qn=Math.max(ki/nt,nt/pn),qn>bi){xn-=er;break}bi=qn}it.push(Wt={value:xn,dice:Fr<nn,children:Dt.slice(qr,Vr)}),Wt.dice?Re(Wt,At,Se,pe,jn?Se+=nn*xn/jn:Te):$t(Wt,At,Se,jn?At+=Fr*xn/jn:pe,Te),jn-=xn,qr=Vr}return it}var ar=function Je(Ze){function At(Se,pe,Te,it,Dt){fr(Ze,Se,pe,Te,it,Dt)}return At.ratio=function(Se){return Je((Se=+Se)>1?Se:1)},At}(Ut);function cr(){var Je=ar,Ze=!1,At=1,Se=1,pe=[0],Te=he,it=he,Dt=he,Wt=he,er=he;function qr(mr){return mr.x0=mr.y0=0,mr.x1=At,mr.y1=Se,mr.eachBefore(Vr),pe=[0],Ze&&mr.eachBefore(rt),mr}function Vr(mr){var Fr=pe[mr.depth],nn=mr.x0+Fr,jn=mr.y0+Fr,xn=mr.x1-Fr,pn=mr.y1-Fr;xn<nn&&(nn=xn=(nn+xn)/2),pn<jn&&(jn=pn=(jn+pn)/2),mr.x0=nn,mr.y0=jn,mr.x1=xn,mr.y1=pn,mr.children&&(Fr=pe[mr.depth+1]=Te(mr)/2,nn+=er(mr)-Fr,jn+=it(mr)-Fr,xn-=Dt(mr)-Fr,pn-=Wt(mr)-Fr,xn<nn&&(nn=xn=(nn+xn)/2),pn<jn&&(jn=pn=(jn+pn)/2),Je(mr,nn,jn,xn,pn))}return qr.round=function(mr){return arguments.length?(Ze=!!mr,qr):Ze},qr.size=function(mr){return arguments.length?(At=+mr[0],Se=+mr[1],qr):[At,Se]},qr.tile=function(mr){return arguments.length?(Je=me(mr),qr):Je},qr.padding=function(mr){return arguments.length?qr.paddingInner(mr).paddingOuter(mr):qr.paddingInner()},qr.paddingInner=function(mr){return arguments.length?(Te=typeof mr=="function"?mr:te(+mr),qr):Te},qr.paddingOuter=function(mr){return arguments.length?qr.paddingTop(mr).paddingRight(mr).paddingBottom(mr).paddingLeft(mr):qr.paddingTop()},qr.paddingTop=function(mr){return arguments.length?(it=typeof mr=="function"?mr:te(+mr),qr):it},qr.paddingRight=function(mr){return arguments.length?(Dt=typeof mr=="function"?mr:te(+mr),qr):Dt},qr.paddingBottom=function(mr){return arguments.length?(Wt=typeof mr=="function"?mr:te(+mr),qr):Wt},qr.paddingLeft=function(mr){return arguments.length?(er=typeof mr=="function"?mr:te(+mr),qr):er},qr}function It(Je,Ze,At,Se,pe){var Te=Je.children,it,Dt=Te.length,Wt,er=new Array(Dt+1);for(er[0]=Wt=it=0;it<Dt;++it)er[it+1]=Wt+=Te[it].value;qr(0,Dt,Je.value,Ze,At,Se,pe);function qr(Vr,mr,Fr,nn,jn,xn,pn){if(Vr>=mr-1){var ki=Te[Vr];ki.x0=nn,ki.y0=jn,ki.x1=xn,ki.y1=pn;return}for(var qn=er[Vr],bi=Fr/2+qn,Si=Vr+1,nt=mr-1;Si<nt;){var ze=Si+nt>>>1;er[ze]<bi?Si=ze+1:nt=ze}bi-er[Si-1]<er[Si]-bi&&Vr+1<Si&&--Si;var ut=er[Si]-qn,mt=Fr-ut;if(xn-nn>pn-jn){var Ot=(nn*mt+xn*ut)/Fr;qr(Vr,Si,ut,nn,jn,Ot,pn),qr(Si,mr,mt,Ot,jn,xn,pn)}else{var nr=(jn*mt+pn*ut)/Fr;qr(Vr,Si,ut,nn,jn,xn,nr),qr(Si,mr,mt,nn,nr,xn,pn)}}}function gt(Je,Ze,At,Se,pe){(Je.depth&1?$t:Re)(Je,Ze,At,Se,pe)}var kt=function Je(Ze){function At(Se,pe,Te,it,Dt){if((Wt=Se._squarify)&&Wt.ratio===Ze)for(var Wt,er,qr,Vr,mr=-1,Fr,nn=Wt.length,jn=Se.value;++mr<nn;){for(er=Wt[mr],qr=er.children,Vr=er.value=0,Fr=qr.length;Vr<Fr;++Vr)er.value+=qr[Vr].value;er.dice?Re(er,pe,Te,it,Te+=(Dt-Te)*er.value/jn):$t(er,pe,Te,pe+=(it-pe)*er.value/jn,Dt),jn-=er.value}else Se._squarify=Wt=fr(Ze,Se,pe,Te,it,Dt),Wt.ratio=Ze}return At.ratio=function(Se){return Je((Se=+Se)>1?Se:1)},At}(Ut);e.cluster=l,e.hierarchy=_,e.pack=ae,e.packEnclose=q,e.packSiblings=ce,e.partition=Ie,e.stratify=Ht,e.tree=_t,e.treemap=cr,e.treemapBinary=It,e.treemapDice=Re,e.treemapResquarify=kt,e.treemapSlice=$t,e.treemapSliceDice=gt,e.treemapSquarify=ar,Object.defineProperty(e,"__esModule",{value:!0})})});var mE=ie(yE=>{"use strict";var nEe=gE(),skt=la(),h3=Zt(),lkt=ul().makeColorScaleFuncFromTrace,ukt=u3().makePullColorFn,fkt=u3().generateExtendedColors,ckt=ul().calc,hkt=eo().ALMOST_EQUAL,vkt={},dkt={},pkt={};yE.calc=function(e,t){var r=e._fullLayout,i=t.ids,n=h3.isArrayOrTypedArray(i),a=t.labels,o=t.parents,s=t.values,l=h3.isArrayOrTypedArray(s),u=[],f={},c={},h=function(B,F){f[B]?f[B].push(F):f[B]=[F],c[F]=1},v=function(B){return B||typeof B=="number"},d=function(B){return!l||skt(s[B])&&s[B]>=0},x,b,p;n?(x=Math.min(i.length,o.length),b=function(B){return v(i[B])&&d(B)},p=function(B){return String(i[B])}):(x=Math.min(a.length,o.length),b=function(B){return v(a[B])&&d(B)},p=function(B){return String(a[B])}),l&&(x=Math.min(x,s.length));for(var w=0;w<x;w++)if(b(w)){var A=p(w),T=v(o[w])?String(o[w]):"",k={i:w,id:A,pid:T,label:v(a[w])?String(a[w]):""};l&&(k.v=+s[w]),u.push(k),h(T,A)}if(f[""]){if(f[""].length>1){for(var S=h3.randstr(),g=0;g<u.length;g++)u[g].pid===""&&(u[g].pid=S);u.unshift({hasMultipleRoots:!0,id:S,pid:"",label:""})}}else{var _=[],E;for(E in f)c[E]||_.push(E);if(_.length===1)E=_[0],u.unshift({hasImpliedRoot:!0,id:E,pid:"",label:E});else return h3.warn(["Multiple implied roots, cannot build",t.type,"hierarchy of",t.name+".","These roots include:",_.join(", ")].join(" "))}var C;try{C=nEe.stratify().id(function(B){return B.id}).parentId(function(B){return B.pid})(u)}catch(B){return h3.warn(["Failed to build",t.type,"hierarchy of",t.name+".","Error:",B.message].join(" "))}var M=nEe.hierarchy(C),P=!1;if(l)switch(t.branchvalues){case"remainder":M.sum(function(B){return B.data.v});break;case"total":M.each(function(B){var F=B.data.data,N=F.v;if(B.children){var X=B.children.reduce(function(K,ne){return K+ne.data.data.v},0);if((F.hasImpliedRoot||F.hasMultipleRoots)&&(N=X),N<X*hkt)return P=!0,h3.warn(["Total value for node",B.data.data.id,"of",t.name,"is smaller than the sum of its children.",`
parent value =`,N,`
children sum =`,X].join(" "))}B.value=N});break}else iEe(M,t,{branches:t.count.indexOf("branches")!==-1,leaves:t.count.indexOf("leaves")!==-1});if(!P){t.sort&&M.sort(function(B,F){return F.value-B.value});var D,q,O=t.marker.colors||[],U=!!O.length;return t._hasColorscale?(U||(O=l?t.values:t._values),ckt(e,t,{vals:O,containerStr:"marker",cLetter:"c"}),q=lkt(t.marker)):D=ukt(r["_"+t.type+"colormap"]),M.each(function(B){var F=B.data.data;F.color=t._hasColorscale?q(O[F.i]):D(O[F.i],F.id)}),u[0].hierarchy=M,u}};yE._runCrossTraceCalc=function(e,t){var r=t._fullLayout,i=t.calcdata,n=r[e+"colorway"],a=r["_"+e+"colormap"];r["extend"+e+"colors"]&&(n=fkt(n,e==="icicle"?pkt:e==="treemap"?dkt:vkt));var o=0,s;function l(h){var v=h.data.data,d=v.id;v.color===!1&&(a[d]?v.color=a[d]:h.parent?h.parent.parent?v.color=h.parent.data.data.color:(a[d]=v.color=n[o%n.length],o++):v.color=s)}for(var u=0;u<i.length;u++){var f=i[u],c=f[0];c.trace.type===e&&c.hierarchy&&(s=c.trace.root.color,c.hierarchy.each(l))}};yE.crossTraceCalc=function(e){return yE._runCrossTraceCalc("sunburst",e)};function iEe(e,t,r){var i=0,n=e.children;if(n){for(var a=n.length,o=0;o<a;o++)i+=iEe(n[o],t,r);r.branches&&i++}else r.leaves&&i++;return e.value=e.data.data.value=i,t._values||(t._values=[]),t._values[e.data.data.i]=i,i}});function vy(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function e1(e,t){var r=Object.create(e.prototype);for(var i in t)r[i]=t[i];return r}var MR=Bs(()=>{});function fg(){}function oEe(){return this.rgb().formatHex()}function Tkt(){return this.rgb().formatHex8()}function Akt(){return vEe(this).formatHsl()}function sEe(){return this.rgb().formatRgb()}function r1(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=gkt.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?lEe(t):r===3?new ac(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?SR(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?SR(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ykt.exec(e))?new ac(t[1],t[2],t[3],1):(t=mkt.exec(e))?new ac(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=xkt.exec(e))?SR(t[1],t[2],t[3],t[4]):(t=_kt.exec(e))?SR(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=bkt.exec(e))?cEe(t[1],t[2]/100,t[3]/100,1):(t=wkt.exec(e))?cEe(t[1],t[2]/100,t[3]/100,t[4]):aEe.hasOwnProperty(e)?lEe(aEe[e]):e==="transparent"?new ac(NaN,NaN,NaN,0):null}function lEe(e){return new ac(e>>16&255,e>>8&255,e&255,1)}function SR(e,t,r,i){return i<=0&&(e=t=r=NaN),new ac(e,t,r,i)}function _E(e){return e instanceof fg||(e=r1(e)),e?(e=e.rgb(),new ac(e.r,e.g,e.b,e.opacity)):new ac}function d3(e,t,r,i){return arguments.length===1?_E(e):new ac(e,t,r,i==null?1:i)}function ac(e,t,r,i){this.r=+e,this.g=+t,this.b=+r,this.opacity=+i}function uEe(){return`#${A_(this.r)}${A_(this.g)}${A_(this.b)}`}function Mkt(){return`#${A_(this.r)}${A_(this.g)}${A_(this.b)}${A_((isNaN(this.opacity)?1:this.opacity)*255)}`}function fEe(){let e=kR(this.opacity);return`${e===1?"rgb(":"rgba("}${M_(this.r)}, ${M_(this.g)}, ${M_(this.b)}${e===1?")":`, ${e})`}`}function kR(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function M_(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function A_(e){return e=M_(e),(e<16?"0":"")+e.toString(16)}function cEe(e,t,r,i){return i<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new A0(e,t,r,i)}function vEe(e){if(e instanceof A0)return new A0(e.h,e.s,e.l,e.opacity);if(e instanceof fg||(e=r1(e)),!e)return new A0;if(e instanceof A0)return e;e=e.rgb();var t=e.r/255,r=e.g/255,i=e.b/255,n=Math.min(t,r,i),a=Math.max(t,r,i),o=NaN,s=a-n,l=(a+n)/2;return s?(t===a?o=(r-i)/s+(r<i)*6:r===a?o=(i-t)/s+2:o=(t-r)/s+4,s/=l<.5?a+n:2-a-n,o*=60):s=l>0&&l<1?0:o,new A0(o,s,l,e.opacity)}function bE(e,t,r,i){return arguments.length===1?vEe(e):new A0(e,t,r,i==null?1:i)}function A0(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}function hEe(e){return e=(e||0)%360,e<0?e+360:e}function ER(e){return Math.max(0,Math.min(1,e||0))}function sH(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}var t1,S_,v3,xE,ug,gkt,ykt,mkt,xkt,_kt,bkt,wkt,aEe,CR=Bs(()=>{MR();t1=.7,S_=1/t1,v3="\\s*([+-]?\\d+)\\s*",xE="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ug="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gkt=/^#([0-9a-f]{3,8})$/,ykt=new RegExp(`^rgb\\(${v3},${v3},${v3}\\)$`),mkt=new RegExp(`^rgb\\(${ug},${ug},${ug}\\)$`),xkt=new RegExp(`^rgba\\(${v3},${v3},${v3},${xE}\\)$`),_kt=new RegExp(`^rgba\\(${ug},${ug},${ug},${xE}\\)$`),bkt=new RegExp(`^hsl\\(${xE},${ug},${ug}\\)$`),wkt=new RegExp(`^hsla\\(${xE},${ug},${ug},${xE}\\)$`),aEe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vy(fg,r1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:oEe,formatHex:oEe,formatHex8:Tkt,formatHsl:Akt,formatRgb:sEe,toString:sEe});vy(ac,d3,e1(fg,{brighter(e){return e=e==null?S_:Math.pow(S_,e),new ac(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?t1:Math.pow(t1,e),new ac(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ac(M_(this.r),M_(this.g),M_(this.b),kR(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:uEe,formatHex:uEe,formatHex8:Mkt,formatRgb:fEe,toString:fEe}));vy(A0,bE,e1(fg,{brighter(e){return e=e==null?S_:Math.pow(S_,e),new A0(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?t1:Math.pow(t1,e),new A0(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*t,n=2*r-i;return new ac(sH(e>=240?e-240:e+120,n,i),sH(e,n,i),sH(e<120?e+240:e-120,n,i),this.opacity)},clamp(){return new A0(hEe(this.h),ER(this.s),ER(this.l),kR(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=kR(this.opacity);return`${e===1?"hsl(":"hsla("}${hEe(this.h)}, ${ER(this.s)*100}%, ${ER(this.l)*100}%${e===1?")":`, ${e})`}`}}))});var LR,PR,lH=Bs(()=>{LR=Math.PI/180,PR=180/Math.PI});function xEe(e){if(e instanceof cg)return new cg(e.l,e.a,e.b,e.opacity);if(e instanceof dy)return _Ee(e);e instanceof ac||(e=_E(e));var t=hH(e.r),r=hH(e.g),i=hH(e.b),n=uH((.2225045*t+.7168786*r+.0606169*i)/pEe),a,o;return t===r&&r===i?a=o=n:(a=uH((.4360747*t+.3850649*r+.1430804*i)/dEe),o=uH((.0139322*t+.0971045*r+.7141733*i)/gEe)),new cg(116*n-16,500*(a-n),200*(n-o),e.opacity)}function g3(e,t,r,i){return arguments.length===1?xEe(e):new cg(e,t,r,i==null?1:i)}function cg(e,t,r,i){this.l=+e,this.a=+t,this.b=+r,this.opacity=+i}function uH(e){return e>Skt?Math.pow(e,1/3):e/mEe+yEe}function fH(e){return e>p3?e*e*e:mEe*(e-yEe)}function cH(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function hH(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ekt(e){if(e instanceof dy)return new dy(e.h,e.c,e.l,e.opacity);if(e instanceof cg||(e=xEe(e)),e.a===0&&e.b===0)return new dy(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*PR;return new dy(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function wE(e,t,r,i){return arguments.length===1?Ekt(e):new dy(e,t,r,i==null?1:i)}function dy(e,t,r,i){this.h=+e,this.c=+t,this.l=+r,this.opacity=+i}function _Ee(e){if(isNaN(e.h))return new cg(e.l,0,0,e.opacity);var t=e.h*LR;return new cg(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}var RR,dEe,pEe,gEe,yEe,p3,mEe,Skt,bEe=Bs(()=>{MR();CR();lH();RR=18,dEe=.96422,pEe=1,gEe=.82521,yEe=4/29,p3=6/29,mEe=3*p3*p3,Skt=p3*p3*p3;vy(cg,g3,e1(fg,{brighter(e){return new cg(this.l+RR*(e==null?1:e),this.a,this.b,this.opacity)},darker(e){return new cg(this.l-RR*(e==null?1:e),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,r=isNaN(this.b)?e:e-this.b/200;return t=dEe*fH(t),e=pEe*fH(e),r=gEe*fH(r),new ac(cH(3.1338561*t-1.6168667*e-.4906146*r),cH(-.9787684*t+1.9161415*e+.033454*r),cH(.0719453*t-.2289914*e+1.4052427*r),this.opacity)}}));vy(dy,wE,e1(fg,{brighter(e){return new dy(this.h,this.c,this.l+RR*(e==null?1:e),this.opacity)},darker(e){return new dy(this.h,this.c,this.l-RR*(e==null?1:e),this.opacity)},rgb(){return _Ee(this).rgb()}}))});function kkt(e){if(e instanceof E_)return new E_(e.h,e.s,e.l,e.opacity);e instanceof ac||(e=_E(e));var t=e.r/255,r=e.g/255,i=e.b/255,n=(AEe*i+wEe*t-TEe*r)/(AEe+wEe-TEe),a=i-n,o=(TE*(r-n)-dH*a)/DR,s=Math.sqrt(o*o+a*a)/(TE*n*(1-n)),l=s?Math.atan2(o,a)*PR-120:NaN;return new E_(l<0?l+360:l,s,n,e.opacity)}function y3(e,t,r,i){return arguments.length===1?kkt(e):new E_(e,t,r,i==null?1:i)}function E_(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}var MEe,vH,dH,DR,TE,wEe,TEe,AEe,SEe=Bs(()=>{MR();CR();lH();MEe=-.14861,vH=1.78277,dH=-.29227,DR=-.90649,TE=1.97294,wEe=TE*DR,TEe=TE*vH,AEe=vH*dH-DR*MEe;vy(E_,y3,e1(fg,{brighter(e){return e=e==null?S_:Math.pow(S_,e),new E_(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?t1:Math.pow(t1,e),new E_(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*LR,t=+this.l,r=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),n=Math.sin(e);return new ac(255*(t+r*(MEe*i+vH*n)),255*(t+r*(dH*i+DR*n)),255*(t+r*(TE*i)),this.opacity)}}))});var k_=Bs(()=>{CR();bEe();SEe()});function pH(e,t,r,i,n){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*r+(1+3*e+3*a-3*o)*i+o*n)/6}function IR(e){var t=e.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),n=e[i],a=e[i+1],o=i>0?e[i-1]:2*n-a,s=i<t-1?e[i+2]:2*a-n;return pH((r-i/t)*t,o,n,a,s)}}var FR=Bs(()=>{});function qR(e){var t=e.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*t),n=e[(i+t-1)%t],a=e[i%t],o=e[(i+1)%t],s=e[(i+2)%t];return pH((r-i/t)*t,n,a,o,s)}}var gH=Bs(()=>{FR()});var m3,yH=Bs(()=>{m3=e=>()=>e});function EEe(e,t){return function(r){return e+r*t}}function Ckt(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(i){return Math.pow(e+i*t,r)}}function n1(e,t){var r=t-e;return r?EEe(e,r>180||r<-180?r-360*Math.round(r/360):r):m3(isNaN(e)?t:e)}function kEe(e){return(e=+e)==1?xu:function(t,r){return r-t?Ckt(t,r,e):m3(isNaN(t)?r:t)}}function xu(e,t){var r=t-e;return r?EEe(e,r):m3(isNaN(e)?t:e)}var C_=Bs(()=>{yH()});function CEe(e){return function(t){var r=t.length,i=new Array(r),n=new Array(r),a=new Array(r),o,s;for(o=0;o<r;++o)s=d3(t[o]),i[o]=s.r||0,n[o]=s.g||0,a[o]=s.b||0;return i=e(i),n=e(n),a=e(a),s.opacity=1,function(l){return s.r=i(l),s.g=n(l),s.b=a(l),s+""}}}var AE,LEe,PEe,mH=Bs(()=>{k_();FR();gH();C_();AE=function e(t){var r=kEe(t);function i(n,a){var o=r((n=d3(n)).r,(a=d3(a)).r),s=r(n.g,a.g),l=r(n.b,a.b),u=xu(n.opacity,a.opacity);return function(f){return n.r=o(f),n.g=s(f),n.b=l(f),n.opacity=u(f),n+""}}return i.gamma=e,i}(1);LEe=CEe(IR),PEe=CEe(qR)});function x3(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,i=t.slice(),n;return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function zR(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}var OR=Bs(()=>{});function REe(e,t){return(zR(t)?x3:xH)(e,t)}function xH(e,t){var r=t?t.length:0,i=e?Math.min(r,e.length):0,n=new Array(i),a=new Array(r),o;for(o=0;o<i;++o)n[o]=i1(e[o],t[o]);for(;o<r;++o)a[o]=t[o];return function(s){for(o=0;o<i;++o)a[o]=n[o](s);return a}}var _H=Bs(()=>{ME();OR()});function BR(e,t){var r=new Date;return e=+e,t=+t,function(i){return r.setTime(e*(1-i)+t*i),r}}var bH=Bs(()=>{});function pd(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var SE=Bs(()=>{});function NR(e,t){var r={},i={},n;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(n in t)n in e?r[n]=i1(e[n],t[n]):i[n]=t[n];return function(a){for(n in r)i[n]=r[n](a);return i}}var wH=Bs(()=>{ME()});function Lkt(e){return function(){return e}}function Pkt(e){return function(t){return e(t)+""}}function UR(e,t){var r=AH.lastIndex=TH.lastIndex=0,i,n,a,o=-1,s=[],l=[];for(e=e+"",t=t+"";(i=AH.exec(e))&&(n=TH.exec(t));)(a=n.index)>r&&(a=t.slice(r,a),s[o]?s[o]+=a:s[++o]=a),(i=i[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,l.push({i:o,x:pd(i,n)})),r=TH.lastIndex;return r<t.length&&(a=t.slice(r),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?Pkt(l[0].x):Lkt(t):(t=l.length,function(u){for(var f=0,c;f<t;++f)s[(c=l[f]).i]=c.x(u);return s.join("")})}var AH,TH,MH=Bs(()=>{SE();AH=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,TH=new RegExp(AH.source,"g")});function i1(e,t){var r=typeof t,i;return t==null||r==="boolean"?m3(t):(r==="number"?pd:r==="string"?(i=r1(t))?(t=i,AE):UR:t instanceof r1?AE:t instanceof Date?BR:zR(t)?x3:Array.isArray(t)?xH:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?NR:pd)(e,t)}var ME=Bs(()=>{k_();mH();_H();bH();SE();wH();MH();yH();OR()});function DEe(e){var t=e.length;return function(r){return e[Math.max(0,Math.min(t-1,Math.floor(r*t)))]}}var IEe=Bs(()=>{});function FEe(e,t){var r=n1(+e,+t);return function(i){var n=r(i);return n-360*Math.floor(n/360)}}var qEe=Bs(()=>{C_()});function zEe(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var OEe=Bs(()=>{});function SH(e,t,r,i,n,a){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*r+t*i)&&(r-=e*l,i-=t*l),(s=Math.sqrt(r*r+i*i))&&(r/=s,i/=s,l/=s),e*i<t*r&&(e=-e,t=-t,l=-l,o=-o),{translateX:n,translateY:a,rotate:Math.atan2(t,e)*BEe,skewX:Math.atan(l)*BEe,scaleX:o,scaleY:s}}var BEe,VR,NEe=Bs(()=>{BEe=180/Math.PI,VR={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1}});function UEe(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?VR:SH(t.a,t.b,t.c,t.d,t.e,t.f)}function VEe(e){return e==null?VR:(HR||(HR=document.createElementNS("http://www.w3.org/2000/svg","g")),HR.setAttribute("transform",e),(e=HR.transform.baseVal.consolidate())?(e=e.matrix,SH(e.a,e.b,e.c,e.d,e.e,e.f)):VR)}var HR,HEe=Bs(()=>{NEe()});function GEe(e,t,r,i){function n(u){return u.length?u.pop()+" ":""}function a(u,f,c,h,v,d){if(u!==c||f!==h){var x=v.push("translate(",null,t,null,r);d.push({i:x-4,x:pd(u,c)},{i:x-2,x:pd(f,h)})}else(c||h)&&v.push("translate("+c+t+h+r)}function o(u,f,c,h){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),h.push({i:c.push(n(c)+"rotate(",null,i)-2,x:pd(u,f)})):f&&c.push(n(c)+"rotate("+f+i)}function s(u,f,c,h){u!==f?h.push({i:c.push(n(c)+"skewX(",null,i)-2,x:pd(u,f)}):f&&c.push(n(c)+"skewX("+f+i)}function l(u,f,c,h,v,d){if(u!==c||f!==h){var x=v.push(n(v)+"scale(",null,",",null,")");d.push({i:x-4,x:pd(u,c)},{i:x-2,x:pd(f,h)})}else(c!==1||h!==1)&&v.push(n(v)+"scale("+c+","+h+")")}return function(u,f){var c=[],h=[];return u=e(u),f=e(f),a(u.translateX,u.translateY,f.translateX,f.translateY,c,h),o(u.rotate,f.rotate,c,h),s(u.skewX,f.skewX,c,h),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,c,h),u=f=null,function(v){for(var d=-1,x=h.length,b;++d<x;)c[(b=h[d]).i]=b.x(v);return c.join("")}}}var YEe,WEe,XEe=Bs(()=>{SE();HEe();YEe=GEe(UEe,"px, ","px)","deg)"),WEe=GEe(VEe,", ",")",")")});function ZEe(e){return((e=Math.exp(e))+1/e)/2}function Dkt(e){return((e=Math.exp(e))-1/e)/2}function Ikt(e){return((e=Math.exp(2*e))-1)/(e+1)}var Rkt,jEe,KEe=Bs(()=>{Rkt=1e-12;jEe=function e(t,r,i){function n(a,o){var s=a[0],l=a[1],u=a[2],f=o[0],c=o[1],h=o[2],v=f-s,d=c-l,x=v*v+d*d,b,p;if(x<Rkt)p=Math.log(h/u)/t,b=function(E){return[s+E*v,l+E*d,u*Math.exp(t*E*p)]};else{var w=Math.sqrt(x),A=(h*h-u*u+i*x)/(2*u*r*w),T=(h*h-u*u-i*x)/(2*h*r*w),k=Math.log(Math.sqrt(A*A+1)-A),_=Math.log(Math.sqrt(T*T+1)-T);p=(_-k)/t,b=function(E){var S=E*p,g=ZEe(k),C=u/(r*w)*(g*Ikt(t*S+k)-Dkt(k));return[s+C*v,l+C*d,u*g/ZEe(t*S+k)]}}return b.duration=p*1e3*t/Math.SQRT2,b}return n.rho=function(a){var o=Math.max(.001,+a),s=o*o,l=s*s;return e(o,s,l)},n}(Math.SQRT2,2,4)});function JEe(e){return function(t,r){var i=e((t=bE(t)).h,(r=bE(r)).h),n=xu(t.s,r.s),a=xu(t.l,r.l),o=xu(t.opacity,r.opacity);return function(s){return t.h=i(s),t.s=n(s),t.l=a(s),t.opacity=o(s),t+""}}}var QEe,$Ee,e5e=Bs(()=>{k_();C_();QEe=JEe(n1),$Ee=JEe(xu)});function EH(e,t){var r=xu((e=g3(e)).l,(t=g3(t)).l),i=xu(e.a,t.a),n=xu(e.b,t.b),a=xu(e.opacity,t.opacity);return function(o){return e.l=r(o),e.a=i(o),e.b=n(o),e.opacity=a(o),e+""}}var t5e=Bs(()=>{k_();C_()});function r5e(e){return function(t,r){var i=e((t=wE(t)).h,(r=wE(r)).h),n=xu(t.c,r.c),a=xu(t.l,r.l),o=xu(t.opacity,r.opacity);return function(s){return t.h=i(s),t.c=n(s),t.l=a(s),t.opacity=o(s),t+""}}}var n5e,i5e,a5e=Bs(()=>{k_();C_();n5e=r5e(n1),i5e=r5e(xu)});function o5e(e){return function t(r){r=+r;function i(n,a){var o=e((n=y3(n)).h,(a=y3(a)).h),s=xu(n.s,a.s),l=xu(n.l,a.l),u=xu(n.opacity,a.opacity);return function(f){return n.h=o(f),n.s=s(f),n.l=l(Math.pow(f,r)),n.opacity=u(f),n+""}}return i.gamma=t,i}(1)}var s5e,l5e,u5e=Bs(()=>{k_();C_();s5e=o5e(n1),l5e=o5e(xu)});function kH(e,t){t===void 0&&(t=e,e=i1);for(var r=0,i=t.length-1,n=t[0],a=new Array(i<0?0:i);r<i;)a[r]=e(n,n=t[++r]);return function(o){var s=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return a[s](o-s)}}var f5e=Bs(()=>{ME()});function c5e(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e(i/(t-1));return r}var h5e=Bs(()=>{});var L_={};VQe(L_,{interpolate:()=>i1,interpolateArray:()=>REe,interpolateBasis:()=>IR,interpolateBasisClosed:()=>qR,interpolateCubehelix:()=>s5e,interpolateCubehelixLong:()=>l5e,interpolateDate:()=>BR,interpolateDiscrete:()=>DEe,interpolateHcl:()=>n5e,interpolateHclLong:()=>i5e,interpolateHsl:()=>QEe,interpolateHslLong:()=>$Ee,interpolateHue:()=>FEe,interpolateLab:()=>EH,interpolateNumber:()=>pd,interpolateNumberArray:()=>x3,interpolateObject:()=>NR,interpolateRgb:()=>AE,interpolateRgbBasis:()=>LEe,interpolateRgbBasisClosed:()=>PEe,interpolateRound:()=>zEe,interpolateString:()=>UR,interpolateTransformCss:()=>YEe,interpolateTransformSvg:()=>WEe,interpolateZoom:()=>jEe,piecewise:()=>kH,quantize:()=>c5e});var P_=Bs(()=>{ME();_H();FR();gH();bH();IEe();qEe();SE();OR();wH();OEe();MH();XEe();KEe();mH();e5e();t5e();a5e();u5e();f5e();h5e()});var GR=ie((dhr,v5e)=>{"use strict";var Fkt=oa(),qkt=_i();v5e.exports=function(t,r,i,n,a){var o=r.data.data,s=o.i,l=a||o.color;if(s>=0){r.i=o.i;var u=i.marker;u.pattern?(!u.colors||!u.pattern.shape)&&(u.color=l,r.color=l):(u.color=l,r.color=l),Fkt.pointStyle(t,i,n,r)}else qkt.fill(t,l)}});var CH=ie((phr,m5e)=>{"use strict";var d5e=Mi(),p5e=_i(),g5e=Zt(),zkt=xh().resizeText,Okt=GR();function Bkt(e){var t=e._fullLayout._sunburstlayer.selectAll(".trace");zkt(e,t,"sunburst"),t.each(function(r){var i=d5e.select(this),n=r[0],a=n.trace;i.style("opacity",a.opacity),i.selectAll("path.surface").each(function(o){d5e.select(this).call(y5e,o,a,e)})})}function y5e(e,t,r,i){var n=t.data.data,a=!t.children,o=n.i,s=g5e.castOption(r,o,"marker.line.color")||p5e.defaultLine,l=g5e.castOption(r,o,"marker.line.width")||0;e.call(Okt,t,r,i).style("stroke-width",l).call(p5e.stroke,s).style("opacity",a?r.leaf.opacity:null)}m5e.exports={style:Bkt,styleOne:y5e}});var py=ie(lo=>{"use strict";var R_=Zt(),Nkt=_i(),Ukt=t0(),x5e=mm();lo.findEntryWithLevel=function(e,t){var r;return t&&e.eachAfter(function(i){if(lo.getPtId(i)===t)return r=i.copy()}),r||e};lo.findEntryWithChild=function(e,t){var r;return e.eachAfter(function(i){for(var n=i.children||[],a=0;a<n.length;a++){var o=n[a];if(lo.getPtId(o)===t)return r=i.copy()}}),r||e};lo.isEntry=function(e){return!e.parent};lo.isLeaf=function(e){return!e.children};lo.getPtId=function(e){return e.data.data.id};lo.getPtLabel=function(e){return e.data.data.label};lo.getValue=function(e){return e.value};lo.isHierarchyRoot=function(e){return _5e(e)===""};lo.setSliceCursor=function(e,t,r){var i=r.isTransitioning;if(!i){var n=e.datum();i=r.hideOnRoot&&lo.isHierarchyRoot(n)||r.hideOnLeaves&&lo.isLeaf(n)}Ukt(e,i?null:"pointer")};function Vkt(e,t,r){return{color:lo.getOutsideTextFontKey("color",e,t,r),family:lo.getOutsideTextFontKey("family",e,t,r),size:lo.getOutsideTextFontKey("size",e,t,r),weight:lo.getOutsideTextFontKey("weight",e,t,r),style:lo.getOutsideTextFontKey("style",e,t,r),variant:lo.getOutsideTextFontKey("variant",e,t,r),textcase:lo.getOutsideTextFontKey("textcase",e,t,r),lineposition:lo.getOutsideTextFontKey("lineposition",e,t,r),shadow:lo.getOutsideTextFontKey("shadow",e,t,r)}}function Hkt(e,t,r,i){var n=(i||{}).onPathbar,a=t.data.data,o=a.i,s=R_.castOption(e,o,(n?"pathbar.textfont":"insidetextfont")+".color");return!s&&e._input.textfont&&(s=R_.castOption(e._input,o,"textfont.color")),{color:s||Nkt.contrast(a.color),family:lo.getInsideTextFontKey("family",e,t,r,i),size:lo.getInsideTextFontKey("size",e,t,r,i),weight:lo.getInsideTextFontKey("weight",e,t,r,i),style:lo.getInsideTextFontKey("style",e,t,r,i),variant:lo.getInsideTextFontKey("variant",e,t,r,i),textcase:lo.getInsideTextFontKey("textcase",e,t,r,i),lineposition:lo.getInsideTextFontKey("lineposition",e,t,r,i),shadow:lo.getInsideTextFontKey("shadow",e,t,r,i)}}lo.getInsideTextFontKey=function(e,t,r,i,n){var a=(n||{}).onPathbar,o=a?"pathbar.textfont":"insidetextfont",s=r.data.data.i;return R_.castOption(t,s,o+"."+e)||R_.castOption(t,s,"textfont."+e)||i.size};lo.getOutsideTextFontKey=function(e,t,r,i){var n=r.data.data.i;return R_.castOption(t,n,"outsidetextfont."+e)||R_.castOption(t,n,"textfont."+e)||i.size};lo.isOutsideText=function(e,t){return!e._hasColorscale&&lo.isHierarchyRoot(t)};lo.determineTextFont=function(e,t,r,i){return lo.isOutsideText(e,t)?Vkt(e,t,r):Hkt(e,t,r,i)};lo.hasTransition=function(e){return!!(e&&e.duration>0)};lo.getMaxDepth=function(e){return e.maxdepth>=0?e.maxdepth:1/0};lo.isHeader=function(e,t){return!(lo.isLeaf(e)||e.depth===t._maxDepth-1)};function _5e(e){return e.data.data.pid}lo.getParent=function(e,t){return lo.findEntryWithLevel(e,_5e(t))};lo.listPath=function(e,t){var r=e.parent;if(!r)return[];var i=t?[r.data[t]]:[r];return lo.listPath(r,t).concat(i)};lo.getPath=function(e){return lo.listPath(e,"label").join("/")+"/"};lo.formatValue=x5e.formatPieValue;lo.formatPercent=function(e,t){var r=R_.formatPercent(e,0);return r==="0%"&&(r=x5e.formatPiePercent(e,t)),r}});var CE=ie((yhr,T5e)=>{"use strict";var _3=Mi(),b5e=Ti(),Gkt=ad().appendArrayPointValue,EE=Ol(),w5e=Zt(),Ykt=c2(),Pf=py(),Wkt=mm(),Xkt=Wkt.formatPieValue;T5e.exports=function(t,r,i,n,a){var o=n[0],s=o.trace,l=o.hierarchy,u=s.type==="sunburst",f=s.type==="treemap"||s.type==="icicle";"_hasHoverLabel"in s||(s._hasHoverLabel=!1),"_hasHoverEvent"in s||(s._hasHoverEvent=!1);var c=function(d){var x=i._fullLayout;if(!(i._dragging||x.hovermode===!1)){var b=i._fullData[s.index],p=d.data.data,w=p.i,A=Pf.isHierarchyRoot(d),T=Pf.getParent(l,d),k=Pf.getValue(d),_=function(fe){return w5e.castOption(b,w,fe)},E=_("hovertemplate"),S=EE.castHoverinfo(b,x,w),g=x.separators,C;if(E||S&&S!=="none"&&S!=="skip"){var M,P;u&&(M=o.cx+d.pxmid[0]*(1-d.rInscribed),P=o.cy+d.pxmid[1]*(1-d.rInscribed)),f&&(M=d._hoverX,P=d._hoverY);var D={},q=[],O=[],U=function(fe){return q.indexOf(fe)!==-1};S&&(q=S==="all"?b._module.attributes.hoverinfo.flags:S.split("+")),D.label=p.label,U("label")&&D.label&&O.push(D.label),p.hasOwnProperty("v")&&(D.value=p.v,D.valueLabel=Xkt(D.value,g),U("value")&&O.push(D.valueLabel)),D.currentPath=d.currentPath=Pf.getPath(d.data),U("current path")&&!A&&O.push(D.currentPath);var B,F=[],N=function(){F.indexOf(B)===-1&&(O.push(B),F.push(B))};D.percentParent=d.percentParent=k/Pf.getValue(T),D.parent=d.parentString=Pf.getPtLabel(T),U("percent parent")&&(B=Pf.formatPercent(D.percentParent,g)+" of "+D.parent,N()),D.percentEntry=d.percentEntry=k/Pf.getValue(r),D.entry=d.entry=Pf.getPtLabel(r),U("percent entry")&&!A&&!d.onPathbar&&(B=Pf.formatPercent(D.percentEntry,g)+" of "+D.entry,N()),D.percentRoot=d.percentRoot=k/Pf.getValue(l),D.root=d.root=Pf.getPtLabel(l),U("percent root")&&!A&&(B=Pf.formatPercent(D.percentRoot,g)+" of "+D.root,N()),D.text=_("hovertext")||_("text"),U("text")&&(B=D.text,w5e.isValidTextValue(B)&&O.push(B)),C=[kE(d,b,a.eventDataKeys)];var X={trace:b,y:P,_x0:d._x0,_x1:d._x1,_y0:d._y0,_y1:d._y1,text:O.join("<br>"),name:E||U("name")?b.name:void 0,color:_("hoverlabel.bgcolor")||p.color,borderColor:_("hoverlabel.bordercolor"),fontFamily:_("hoverlabel.font.family"),fontSize:_("hoverlabel.font.size"),fontColor:_("hoverlabel.font.color"),fontWeight:_("hoverlabel.font.weight"),fontStyle:_("hoverlabel.font.style"),fontVariant:_("hoverlabel.font.variant"),nameLength:_("hoverlabel.namelength"),textAlign:_("hoverlabel.align"),hovertemplate:E,hovertemplateLabels:D,eventData:C};u&&(X.x0=M-d.rInscribed*d.rpx1,X.x1=M+d.rInscribed*d.rpx1,X.idealAlign=d.pxmid[0]<0?"left":"right"),f&&(X.x=M,X.idealAlign=M<0?"left":"right");var K=[];EE.loneHover(X,{container:x._hoverlayer.node(),outerContainer:x._paper.node(),gd:i,inOut_bbox:K}),C[0].bbox=K[0],s._hasHoverLabel=!0}if(f){var ne=t.select("path.surface");a.styleOne(ne,d,b,i,{hovered:!0})}s._hasHoverEvent=!0,i.emit("plotly_hover",{points:C||[kE(d,b,a.eventDataKeys)],event:_3.event})}},h=function(d){var x=i._fullLayout,b=i._fullData[s.index],p=_3.select(this).datum();if(s._hasHoverEvent&&(d.originalEvent=_3.event,i.emit("plotly_unhover",{points:[kE(p,b,a.eventDataKeys)],event:_3.event}),s._hasHoverEvent=!1),s._hasHoverLabel&&(EE.loneUnhover(x._hoverlayer.node()),s._hasHoverLabel=!1),f){var w=t.select("path.surface");a.styleOne(w,p,b,i,{hovered:!1})}},v=function(d){var x=i._fullLayout,b=i._fullData[s.index],p=u&&(Pf.isHierarchyRoot(d)||Pf.isLeaf(d)),w=Pf.getPtId(d),A=Pf.isEntry(d)?Pf.findEntryWithChild(l,w):Pf.findEntryWithLevel(l,w),T=Pf.getPtId(A),k={points:[kE(d,b,a.eventDataKeys)],event:_3.event};p||(k.nextLevel=T);var _=Ykt.triggerHandler(i,"plotly_"+s.type+"click",k);if(_!==!1&&x.hovermode&&(i._hoverdata=[kE(d,b,a.eventDataKeys)],EE.click(i,_3.event)),!p&&_!==!1&&!i._dragging&&!i._transitioning){b5e.call("_storeDirectGUIEdit",b,x._tracePreGUI[b.uid],{level:b.level});var E={data:[{level:T}],traces:[s.index]},S={frame:{redraw:!1,duration:a.transitionTime},transition:{duration:a.transitionTime,easing:a.transitionEasing},mode:"immediate",fromcurrent:!0};EE.loneUnhover(x._hoverlayer.node()),b5e.call("animate",i,E,S)}};t.on("mouseover",c),t.on("mouseout",h),t.on("click",v)};function kE(e,t,r){for(var i=e.data.data,n={curveNumber:t.index,pointNumber:i.i,data:t._input,fullData:t},a=0;a<r.length;a++){var o=r[a];o in e&&(n[o]=e[o])}return"parentString"in e&&!Pf.isHierarchyRoot(e)&&(n.parent=e.parentString),Gkt(n,t,i.i),n}});var WR=ie(YR=>{"use strict";var LE=Mi(),Zkt=gE(),M0=(P_(),jb(L_)).interpolate,A5e=oa(),bh=Zt(),jkt=ks(),k5e=xh(),M5e=k5e.recordMinTextSize,Kkt=k5e.clearMinTextSize,C5e=TR(),Jkt=mm().getRotationAngle,Qkt=C5e.computeTransform,$kt=C5e.transformInsideText,eCt=CH().styleOne,tCt=Mp().resizeText,rCt=CE(),LH=aH(),zo=py();YR.plot=function(e,t,r,i){var n=e._fullLayout,a=n._sunburstlayer,o,s,l=!r,u=!n.uniformtext.mode&&zo.hasTransition(r);if(Kkt("sunburst",n),o=a.selectAll("g.trace.sunburst").data(t,function(c){return c[0].trace.uid}),o.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),o.order(),u){i&&(s=i());var f=LE.transition().duration(r.duration).ease(r.easing).each("end",function(){s&&s()}).each("interrupt",function(){s&&s()});f.each(function(){a.selectAll("g.trace").each(function(c){S5e(e,c,this,r)})})}else o.each(function(c){S5e(e,c,this,r)}),n.uniformtext.mode&&tCt(e,n._sunburstlayer.selectAll(".trace"),"sunburst");l&&o.exit().remove()};function S5e(e,t,r,i){var n=e._context.staticPlot,a=e._fullLayout,o=!a.uniformtext.mode&&zo.hasTransition(i),s=LE.select(r),l=s.selectAll("g.slice"),u=t[0],f=u.trace,c=u.hierarchy,h=zo.findEntryWithLevel(c,f.level),v=zo.getMaxDepth(f),d=a._size,x=f.domain,b=d.w*(x.x[1]-x.x[0]),p=d.h*(x.y[1]-x.y[0]),w=.5*Math.min(b,p),A=u.cx=d.l+d.w*(x.x[1]+x.x[0])/2,T=u.cy=d.t+d.h*(1-x.y[0])-p/2;if(!h)return l.remove();var k=null,_={};o&&l.each(function(ee){_[zo.getPtId(ee)]={rpx0:ee.rpx0,rpx1:ee.rpx1,x0:ee.x0,x1:ee.x1,transform:ee.transform},!k&&zo.isEntry(ee)&&(k=ee)});var E=nCt(h).descendants(),S=h.height+1,g=0,C=v;u.hasMultipleRoots&&zo.isHierarchyRoot(h)&&(E=E.slice(1),S-=1,g=1,C+=1),E=E.filter(function(ee){return ee.y1<=C});var M=Jkt(f.rotation);M&&E.forEach(function(ee){ee.x0+=M,ee.x1+=M});var P=Math.min(S,v),D=function(ee){return(ee-g)/P*w},q=function(ee,Z){return[ee*Math.cos(Z),-ee*Math.sin(Z)]},O=function(ee){return bh.pathAnnulus(ee.rpx0,ee.rpx1,ee.x0,ee.x1,A,T)},U=function(ee){return A+E5e(ee)[0]*(ee.transform.rCenter||0)+(ee.transform.x||0)},B=function(ee){return T+E5e(ee)[1]*(ee.transform.rCenter||0)+(ee.transform.y||0)};l=l.data(E,zo.getPtId),l.enter().append("g").classed("slice",!0),o?l.exit().transition().each(function(){var ee=LE.select(this),Z=ee.select("path.surface");Z.transition().attrTween("d",function(ce){var le=K(ce);return function(me){return O(le(me))}});var oe=ee.select("g.slicetext");oe.attr("opacity",0)}).remove():l.exit().remove(),l.order();var F=null;if(o&&k){var N=zo.getPtId(k);l.each(function(ee){F===null&&zo.getPtId(ee)===N&&(F=ee.x1)})}var X=l;o&&(X=X.transition().each("end",function(){var ee=LE.select(this);zo.setSliceCursor(ee,e,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),X.each(function(ee){var Z=LE.select(this),oe=bh.ensureSingle(Z,"path","surface",function(ge){ge.style("pointer-events",n?"none":"all")});ee.rpx0=D(ee.y0),ee.rpx1=D(ee.y1),ee.xmid=(ee.x0+ee.x1)/2,ee.pxmid=q(ee.rpx1,ee.xmid),ee.midangle=-(ee.xmid-Math.PI/2),ee.startangle=-(ee.x0-Math.PI/2),ee.stopangle=-(ee.x1-Math.PI/2),ee.halfangle=.5*Math.min(bh.angleDelta(ee.x0,ee.x1)||Math.PI,Math.PI),ee.ring=1-ee.rpx0/ee.rpx1,ee.rInscribed=iCt(ee,f),o?oe.transition().attrTween("d",function(ge){var ae=ne(ge);return function(_e){return O(ae(_e))}}):oe.attr("d",O),Z.call(rCt,h,e,t,{eventDataKeys:LH.eventDataKeys,transitionTime:LH.CLICK_TRANSITION_TIME,transitionEasing:LH.CLICK_TRANSITION_EASING}).call(zo.setSliceCursor,e,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:e._transitioning}),oe.call(eCt,ee,f,e);var ce=bh.ensureSingle(Z,"g","slicetext"),le=bh.ensureSingle(ce,"text","",function(ge){ge.attr("data-notex",1)}),me=bh.ensureUniformFontSize(e,zo.determineTextFont(f,ee,a.font));le.text(YR.formatSliceLabel(ee,h,f,t,a)).classed("slicetext",!0).attr("text-anchor","middle").call(A5e.font,me).call(jkt.convertToTspans,e);var he=A5e.bBox(le.node());ee.transform=$kt(he,ee,u),ee.transform.targetX=U(ee),ee.transform.targetY=B(ee);var te=function(ge,ae){var _e=ge.transform;return Qkt(_e,ae),_e.fontSize=me.size,M5e(f.type,_e,a),bh.getTextTransform(_e)};o?le.transition().attrTween("transform",function(ge){var ae=fe(ge);return function(_e){return te(ae(_e),he)}}):le.attr("transform",te(ee,he))});function K(ee){var Z=zo.getPtId(ee),oe=_[Z],ce=_[zo.getPtId(h)],le;if(ce){var me=(ee.x1>ce.x1?2*Math.PI:0)+M;le=ee.rpx1<ce.rpx1?{x0:ee.x0,x1:ee.x1,rpx0:0,rpx1:0}:{x0:me,x1:me,rpx0:ee.rpx0,rpx1:ee.rpx1}}else{var he,te=zo.getPtId(ee.parent);l.each(function(qe){if(zo.getPtId(qe)===te)return he=qe});var ge=he.children,ae;ge.forEach(function(qe,rt){if(zo.getPtId(qe)===Z)return ae=rt});var _e=ge.length,Ce=M0(he.x0,he.x1);le={rpx0:w,rpx1:w,x0:Ce(ae/_e),x1:Ce((ae+1)/_e)}}return M0(oe,le)}function ne(ee){var Z=_[zo.getPtId(ee)],oe,ce={x0:ee.x0,x1:ee.x1,rpx0:ee.rpx0,rpx1:ee.rpx1};if(Z)oe=Z;else if(k)if(ee.parent)if(F){var le=(ee.x1>F?2*Math.PI:0)+M;oe={x0:le,x1:le}}else oe={rpx0:w,rpx1:w},bh.extendFlat(oe,ue(ee));else oe={rpx0:0,rpx1:0};else oe={x0:M,x1:M};return M0(oe,ce)}function fe(ee){var Z=_[zo.getPtId(ee)],oe,ce=ee.transform;if(Z)oe=Z;else if(oe={rpx1:ee.rpx1,transform:{textPosAngle:ce.textPosAngle,scale:0,rotate:ce.rotate,rCenter:ce.rCenter,x:ce.x,y:ce.y}},k)if(ee.parent)if(F){var le=ee.x1>F?2*Math.PI:0;oe.x0=oe.x1=le}else bh.extendFlat(oe,ue(ee));else oe.x0=oe.x1=M;else oe.x0=oe.x1=M;var me=M0(oe.transform.textPosAngle,ee.transform.textPosAngle),he=M0(oe.rpx1,ee.rpx1),te=M0(oe.x0,ee.x0),ge=M0(oe.x1,ee.x1),ae=M0(oe.transform.scale,ce.scale),_e=M0(oe.transform.rotate,ce.rotate),Ce=ce.rCenter===0?3:oe.transform.rCenter===0?1/3:1,qe=M0(oe.transform.rCenter,ce.rCenter),rt=function(Re){return qe(Math.pow(Re,Ce))};return function(Re){var Ie=he(Re),ot=te(Re),lt=ge(Re),ht=rt(Re),xt=q(Ie,(ot+lt)/2),Vt=me(Re),Ht={pxmid:xt,rpx1:Ie,transform:{textPosAngle:Vt,rCenter:ht,x:ce.x,y:ce.y}};return M5e(f.type,ce,a),{transform:{targetX:U(Ht),targetY:B(Ht),scale:ae(Re),rotate:_e(Re),rCenter:ht}}}}function ue(ee){var Z=ee.parent,oe=_[zo.getPtId(Z)],ce={};if(oe){var le=Z.children,me=le.indexOf(ee),he=le.length,te=M0(oe.x0,oe.x1);ce.x0=te(me/he),ce.x1=te(me/he)}else ce.x0=ce.x1=0;return ce}}function nCt(e){return Zkt.partition().size([2*Math.PI,e.height+1])(e)}YR.formatSliceLabel=function(e,t,r,i,n){var a=r.texttemplate,o=r.textinfo;if(!a&&(!o||o==="none"))return"";var s=n.separators,l=i[0],u=e.data.data,f=l.hierarchy,c=zo.isHierarchyRoot(e),h=zo.getParent(f,e),v=zo.getValue(e);if(!a){var d=o.split("+"),x=function(g){return d.indexOf(g)!==-1},b=[],p;if(x("label")&&u.label&&b.push(u.label),u.hasOwnProperty("v")&&x("value")&&b.push(zo.formatValue(u.v,s)),!c){x("current path")&&b.push(zo.getPath(e.data));var w=0;x("percent parent")&&w++,x("percent entry")&&w++,x("percent root")&&w++;var A=w>1;if(w){var T,k=function(g){p=zo.formatPercent(T,s),A&&(p+=" of "+g),b.push(p)};x("percent parent")&&!c&&(T=v/zo.getValue(h),k("parent")),x("percent entry")&&(T=v/zo.getValue(t),k("entry")),x("percent root")&&(T=v/zo.getValue(f),k("root"))}}return x("text")&&(p=bh.castOption(r,u.i,"text"),bh.isValidTextValue(p)&&b.push(p)),b.join("<br>")}var _=bh.castOption(r,u.i,"texttemplate");if(!_)return"";var E={};u.label&&(E.label=u.label),u.hasOwnProperty("v")&&(E.value=u.v,E.valueLabel=zo.formatValue(u.v,s)),E.currentPath=zo.getPath(e.data),c||(E.percentParent=v/zo.getValue(h),E.percentParentLabel=zo.formatPercent(E.percentParent,s),E.parent=zo.getPtLabel(h)),E.percentEntry=v/zo.getValue(t),E.percentEntryLabel=zo.formatPercent(E.percentEntry,s),E.entry=zo.getPtLabel(t),E.percentRoot=v/zo.getValue(f),E.percentRootLabel=zo.formatPercent(E.percentRoot,s),E.root=zo.getPtLabel(f),u.hasOwnProperty("color")&&(E.color=u.color);var S=bh.castOption(r,u.i,"text");return(bh.isValidTextValue(S)||S==="")&&(E.text=S),E.customdata=bh.castOption(r,u.i,"customdata"),bh.texttemplateString(_,E,n._d3locale,E,r._meta||{})};function iCt(e){return e.rpx0===0&&bh.isFullCircle([e.x0,e.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2))}function E5e(e){return aCt(e.rpx1,e.transform.textPosAngle)}function aCt(e,t){return[e*Math.sin(t),-e*Math.cos(t)]}});var P5e=ie((xhr,L5e)=>{"use strict";L5e.exports={moduleType:"trace",name:"sunburst",basePlotModule:YSe(),categories:[],animatable:!0,attributes:pE(),layoutAttributes:oH(),supplyDefaults:$Se(),supplyLayoutDefaults:tEe(),calc:mE().calc,crossTraceCalc:mE().crossTraceCalc,plot:WR().plot,style:CH().style,colorbar:yh(),meta:{}}});var D5e=ie((_hr,R5e)=>{"use strict";R5e.exports=P5e()});var F5e=ie(b3=>{"use strict";var I5e=js();b3.name="treemap";b3.plot=function(e,t,r,i){I5e.plotBasePlot(b3.name,e,t,r,i)};b3.clean=function(e,t,r,i){I5e.cleanBasePlot(b3.name,e,t,r,i)}});var D_=ie((whr,q5e)=>{"use strict";q5e.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}});var XR=ie((Thr,O5e)=>{"use strict";var oCt=Ba().hovertemplateAttrs,sCt=Ba().texttemplateAttrs,lCt=Ls(),uCt=fl().attributes,I_=w_(),zp=pE(),z5e=D_(),PH=aa().extendFlat,fCt=dc().pattern;O5e.exports={labels:zp.labels,parents:zp.parents,values:zp.values,branchvalues:zp.branchvalues,count:zp.count,level:zp.level,maxdepth:zp.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:PH({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:zp.marker.colors,pattern:fCt,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:zp.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},lCt("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:PH({},I_.textfont,{}),editType:"calc"},text:I_.text,textinfo:zp.textinfo,texttemplate:sCt({editType:"plot"},{keys:z5e.eventDataKeys.concat(["label","value"])}),hovertext:I_.hovertext,hoverinfo:zp.hoverinfo,hovertemplate:oCt({},{keys:z5e.eventDataKeys}),textfont:I_.textfont,insidetextfont:I_.insidetextfont,outsidetextfont:PH({},I_.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:I_.sort,root:zp.root,domain:uCt({name:"treemap",trace:!0,editType:"calc"})}});var RH=ie((Ahr,B5e)=>{"use strict";B5e.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}});var H5e=ie((Mhr,V5e)=>{"use strict";var N5e=Zt(),cCt=XR(),hCt=_i(),vCt=fl().defaults,dCt=zd().handleText,pCt=Xx().TEXTPAD,gCt=T_().handleMarkerDefaults,U5e=ul(),yCt=U5e.hasColorscale,mCt=U5e.handleDefaults;V5e.exports=function(t,r,i,n){function a(b,p){return N5e.coerce(t,r,cCt,b,p)}var o=a("labels"),s=a("parents");if(!o||!o.length||!s||!s.length){r.visible=!1;return}var l=a("values");l&&l.length?a("branchvalues"):a("count"),a("level"),a("maxdepth");var u=a("tiling.packing");u==="squarify"&&a("tiling.squarifyratio"),a("tiling.flip"),a("tiling.pad");var f=a("text");a("texttemplate"),r.texttemplate||a("textinfo",N5e.isArrayOrTypedArray(f)?"text+label":"label"),a("hovertext"),a("hovertemplate");var c=a("pathbar.visible"),h="auto";dCt(t,r,n,a,h,{hasPathbar:c,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),a("textposition");var v=r.textposition.indexOf("bottom")!==-1;gCt(t,r,n,a);var d=r._hasColorscale=yCt(t,"marker","colors")||(t.marker||{}).coloraxis;d?mCt(t,r,n,a,{prefix:"marker.",cLetter:"c"}):a("marker.depthfade",!(r.marker.colors||[]).length);var x=r.textfont.size*2;a("marker.pad.t",v?x/4:x),a("marker.pad.l",x/4),a("marker.pad.r",x/4),a("marker.pad.b",v?x:x/4),a("marker.cornerradius"),r._hovered={marker:{line:{width:2,color:hCt.contrast(n.paper_bgcolor)}}},c&&(a("pathbar.thickness",r.pathbar.textfont.size+2*pCt),a("pathbar.side"),a("pathbar.edgeshape")),a("sort"),a("root.color"),vCt(r,n,a),r._length=null}});var Y5e=ie((Shr,G5e)=>{"use strict";var xCt=Zt(),_Ct=RH();G5e.exports=function(t,r){function i(n,a){return xCt.coerce(t,r,_Ct,n,a)}i("treemapcolorway",r.colorway),i("extendtreemapcolors")}});var IH=ie(DH=>{"use strict";var W5e=mE();DH.calc=function(e,t){return W5e.calc(e,t)};DH.crossTraceCalc=function(e){return W5e._runCrossTraceCalc("treemap",e)}});var FH=ie((khr,X5e)=>{"use strict";X5e.exports=function e(t,r,i){var n;i.swapXY&&(n=t.x0,t.x0=t.y0,t.y0=n,n=t.x1,t.x1=t.y1,t.y1=n),i.flipX&&(n=t.x0,t.x0=r[0]-t.x1,t.x1=r[0]-n),i.flipY&&(n=t.y0,t.y0=r[1]-t.y1,t.y1=r[1]-n);var a=t.children;if(a)for(var o=0;o<a.length;o++)e(a[o],r,i)}});var qH=ie((Chr,Z5e)=>{"use strict";var w3=gE(),bCt=FH();Z5e.exports=function(t,r,i){var n=i.flipX,a=i.flipY,o=i.packing==="dice-slice",s=i.pad[a?"bottom":"top"],l=i.pad[n?"right":"left"],u=i.pad[n?"left":"right"],f=i.pad[a?"top":"bottom"],c;o&&(c=l,l=s,s=c,c=u,u=f,f=c);var h=w3.treemap().tile(wCt(i.packing,i.squarifyratio)).paddingInner(i.pad.inner).paddingLeft(l).paddingRight(u).paddingTop(s).paddingBottom(f).size(o?[r[1],r[0]]:r)(t);return(o||n||a)&&bCt(h,r,{swapXY:o,flipX:n,flipY:a}),h};function wCt(e,t){switch(e){case"squarify":return w3.treemapSquarify.ratio(t);case"binary":return w3.treemapBinary;case"dice":return w3.treemapDice;case"slice":return w3.treemapSlice;default:return w3.treemapSliceDice}}});var ZR=ie((Lhr,Q5e)=>{"use strict";var j5e=Mi(),T3=_i(),K5e=Zt(),zH=py(),TCt=xh().resizeText,ACt=GR();function MCt(e){var t=e._fullLayout._treemaplayer.selectAll(".trace");TCt(e,t,"treemap"),t.each(function(r){var i=j5e.select(this),n=r[0],a=n.trace;i.style("opacity",a.opacity),i.selectAll("path.surface").each(function(o){j5e.select(this).call(J5e,o,a,e,{hovered:!1})})})}function J5e(e,t,r,i,n){var a=(n||{}).hovered,o=t.data.data,s=o.i,l,u,f=o.color,c=zH.isHierarchyRoot(t),h=1;if(a)l=r._hovered.marker.line.color,u=r._hovered.marker.line.width;else if(c&&f===r.root.color)h=100,l="rgba(0,0,0,0)",u=0;else if(l=K5e.castOption(r,s,"marker.line.color")||T3.defaultLine,u=K5e.castOption(r,s,"marker.line.width")||0,!r._hasColorscale&&!t.onPathbar){var v=r.marker.depthfade;if(v){var d=T3.combine(T3.addOpacity(r._backgroundColor,.75),f),x;if(v===!0){var b=zH.getMaxDepth(r);isFinite(b)?zH.isLeaf(t)?x=0:x=r._maxVisibleLayers-(t.data.depth-r._entryDepth):x=t.data.height+1}else x=t.data.depth-r._entryDepth,r._atRootLevel||x++;if(x>0)for(var p=0;p<x;p++){var w=.5*p/x;f=T3.combine(T3.addOpacity(d,w),f)}}}e.call(ACt,t,r,i,f).style("stroke-width",u).call(T3.stroke,l).style("opacity",h)}Q5e.exports={style:MCt,styleOne:J5e}});var nke=ie((Phr,rke)=>{"use strict";var $5e=Mi(),jR=Zt(),eke=oa(),SCt=ks(),ECt=qH(),tke=ZR().styleOne,OH=D_(),A3=py(),kCt=CE(),BH=!0;rke.exports=function(t,r,i,n,a){var o=a.barDifY,s=a.width,l=a.height,u=a.viewX,f=a.viewY,c=a.pathSlice,h=a.toMoveInsideSlice,v=a.strTransform,d=a.hasTransition,x=a.handleSlicesExit,b=a.makeUpdateSliceInterpolator,p=a.makeUpdateTextInterpolator,w={},A=t._context.staticPlot,T=t._fullLayout,k=r[0],_=k.trace,E=k.hierarchy,S=s/_._entryDepth,g=A3.listPath(i.data,"id"),C=ECt(E.copy(),[s,l],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();C=C.filter(function(P){var D=g.indexOf(P.data.id);return D===-1?!1:(P.x0=S*D,P.x1=S*(D+1),P.y0=o,P.y1=o+l,P.onPathbar=!0,!0)}),C.reverse(),n=n.data(C,A3.getPtId),n.enter().append("g").classed("pathbar",!0),x(n,BH,w,[s,l],c),n.order();var M=n;d&&(M=M.transition().each("end",function(){var P=$5e.select(this);A3.setSliceCursor(P,t,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),M.each(function(P){P._x0=u(P.x0),P._x1=u(P.x1),P._y0=f(P.y0),P._y1=f(P.y1),P._hoverX=u(P.x1-Math.min(s,l)/2),P._hoverY=f(P.y1-l/2);var D=$5e.select(this),q=jR.ensureSingle(D,"path","surface",function(F){F.style("pointer-events",A?"none":"all")});d?q.transition().attrTween("d",function(F){var N=b(F,BH,w,[s,l]);return function(X){return c(N(X))}}):q.attr("d",c),D.call(kCt,i,t,r,{styleOne:tke,eventDataKeys:OH.eventDataKeys,transitionTime:OH.CLICK_TRANSITION_TIME,transitionEasing:OH.CLICK_TRANSITION_EASING}).call(A3.setSliceCursor,t,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:t._transitioning}),q.call(tke,P,_,t,{hovered:!1}),P._text=(A3.getPtLabel(P)||"").split("<br>").join(" ")||"";var O=jR.ensureSingle(D,"g","slicetext"),U=jR.ensureSingle(O,"text","",function(F){F.attr("data-notex",1)}),B=jR.ensureUniformFontSize(t,A3.determineTextFont(_,P,T.font,{onPathbar:!0}));U.text(P._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(eke.font,B).call(SCt.convertToTspans,t),P.textBB=eke.bBox(U.node()),P.transform=h(P,{fontSize:B.size,onPathbar:!0}),P.transform.fontSize=B.size,d?U.transition().attrTween("transform",function(F){var N=p(F,BH,w,[s,l]);return function(X){return v(N(X))}}):U.attr("transform",v(P))})}});var ske=ie((Rhr,oke)=>{"use strict";var ike=Mi(),NH=(P_(),jb(L_)).interpolate,a1=py(),PE=Zt(),ake=Xx().TEXTPAD,CCt=Jx(),LCt=CCt.toMoveInsideBar,PCt=xh(),UH=PCt.recordMinTextSize,RCt=D_(),DCt=nke();function F_(e){return a1.isHierarchyRoot(e)?"":a1.getPtId(e)}oke.exports=function(t,r,i,n,a){var o=t._fullLayout,s=r[0],l=s.trace,u=l.type,f=u==="icicle",c=s.hierarchy,h=a1.findEntryWithLevel(c,l.level),v=ike.select(i),d=v.selectAll("g.pathbar"),x=v.selectAll("g.slice");if(!h){d.remove(),x.remove();return}var b=a1.isHierarchyRoot(h),p=!o.uniformtext.mode&&a1.hasTransition(n),w=a1.getMaxDepth(l),A=function(Me){return Me.data.depth-h.data.depth<w},T=o._size,k=l.domain,_=T.w*(k.x[1]-k.x[0]),E=T.h*(k.y[1]-k.y[0]),S=_,g=l.pathbar.thickness,C=l.marker.line.width+RCt.gapWithPathbar,M=l.pathbar.visible?l.pathbar.side.indexOf("bottom")>-1?E+C:-(g+C):0,P={x0:S,x1:S,y0:M,y1:M+g},D=function(Me,Ke,We){var et=l.tiling.pad,vt=function(_t){return _t-et<=Ke.x0},at=function(_t){return _t+et>=Ke.x1},Xe=function(_t){return _t-et<=Ke.y0},dt=function(_t){return _t+et>=Ke.y1};return Me.x0===Ke.x0&&Me.x1===Ke.x1&&Me.y0===Ke.y0&&Me.y1===Ke.y1?{x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1}:{x0:vt(Me.x0-et)?0:at(Me.x0-et)?We[0]:Me.x0,x1:vt(Me.x1+et)?0:at(Me.x1+et)?We[0]:Me.x1,y0:Xe(Me.y0-et)?0:dt(Me.y0-et)?We[1]:Me.y0,y1:Xe(Me.y1+et)?0:dt(Me.y1+et)?We[1]:Me.y1}},q=null,O={},U={},B=null,F=function(Me,Ke){return Ke?O[F_(Me)]:U[F_(Me)]},N=function(Me,Ke,We,et){if(Ke)return O[F_(c)]||P;var vt=U[l.level]||We;return A(Me)?D(Me,vt,et):{}};s.hasMultipleRoots&&b&&w++,l._maxDepth=w,l._backgroundColor=o.paper_bgcolor,l._entryDepth=h.data.depth,l._atRootLevel=b;var X=-_/2+T.l+T.w*(k.x[1]+k.x[0])/2,K=-E/2+T.t+T.h*(1-(k.y[1]+k.y[0])/2),ne=function(Me){return X+Me},fe=function(Me){return K+Me},ue=fe(0),ee=ne(0),Z=function(Me){return ee+Me},oe=function(Me){return ue+Me};function ce(Me,Ke){return Me+","+Ke}var le=Z(0),me=function(Me){Me.x=Math.max(le,Me.x)},he=l.pathbar.edgeshape,te=function(Me){var Ke=Z(Math.max(Math.min(Me.x0,Me.x0),0)),We=Z(Math.min(Math.max(Me.x1,Me.x1),S)),et=oe(Me.y0),vt=oe(Me.y1),at=g/2,Xe={},dt={};Xe.x=Ke,dt.x=We,Xe.y=dt.y=(et+vt)/2;var _t={x:Ke,y:et},$t={x:We,y:et},Ut={x:We,y:vt},fr={x:Ke,y:vt};return he===">"?(_t.x-=at,$t.x-=at,Ut.x-=at,fr.x-=at):he==="/"?(Ut.x-=at,fr.x-=at,Xe.x-=at/2,dt.x-=at/2):he==="\\"?(_t.x-=at,$t.x-=at,Xe.x-=at/2,dt.x-=at/2):he==="<"&&(Xe.x-=at,dt.x-=at),me(_t),me(fr),me(Xe),me($t),me(Ut),me(dt),"M"+ce(_t.x,_t.y)+"L"+ce($t.x,$t.y)+"L"+ce(dt.x,dt.y)+"L"+ce(Ut.x,Ut.y)+"L"+ce(fr.x,fr.y)+"L"+ce(Xe.x,Xe.y)+"Z"},ge=l[f?"tiling":"marker"].pad,ae=function(Me){return l.textposition.indexOf(Me)!==-1},_e=ae("top"),Ce=ae("left"),qe=ae("right"),rt=ae("bottom"),Re=function(Me){var Ke=ne(Me.x0),We=ne(Me.x1),et=fe(Me.y0),vt=fe(Me.y1),at=We-Ke,Xe=vt-et;if(!at||!Xe)return"";var dt=l.marker.cornerradius||0,_t=Math.min(dt,at/2,Xe/2);_t&&Me.data&&Me.data.data&&Me.data.data.label&&(_e&&(_t=Math.min(_t,ge.t)),Ce&&(_t=Math.min(_t,ge.l)),qe&&(_t=Math.min(_t,ge.r)),rt&&(_t=Math.min(_t,ge.b)));var $t=function(Ut,fr){return _t?"a"+ce(_t,_t)+" 0 0 1 "+ce(Ut,fr):""};return"M"+ce(Ke,et+_t)+$t(_t,-_t)+"L"+ce(We-_t,et)+$t(_t,_t)+"L"+ce(We,vt-_t)+$t(-_t,_t)+"L"+ce(Ke+_t,vt)+$t(-_t,-_t)+"Z"},Ie=function(Me,Ke){var We=Me.x0,et=Me.x1,vt=Me.y0,at=Me.y1,Xe=Me.textBB,dt=_e||Ke.isHeader&&!rt,_t=dt?"start":rt?"end":"middle",$t=ae("right"),Ut=ae("left")||Ke.onPathbar,fr=Ut?-1:$t?1:0;if(Ke.isHeader){if(We+=(f?ge:ge.l)-ake,et-=(f?ge:ge.r)-ake,We>=et){var ar=(We+et)/2;We=ar,et=ar}var cr;rt?(cr=at-(f?ge:ge.b),vt<cr&&cr<at&&(vt=cr)):(cr=vt+(f?ge:ge.t),vt<cr&&cr<at&&(at=cr))}var It=LCt(We,et,vt,at,Xe,{isHorizontal:!1,constrained:!0,angle:0,anchor:_t,leftToRight:fr});return It.fontSize=Ke.fontSize,It.targetX=ne(It.targetX),It.targetY=fe(It.targetY),isNaN(It.targetX)||isNaN(It.targetY)?{}:(We!==et&&vt!==at&&UH(l.type,It,o),{scale:It.scale,rotate:It.rotate,textX:It.textX,textY:It.textY,anchorX:It.anchorX,anchorY:It.anchorY,targetX:It.targetX,targetY:It.targetY})},ot=function(Me,Ke){for(var We,et=0,vt=Me;!We&&et<w;)et++,vt=vt.parent,vt?We=F(vt,Ke):et=w;return We||{}},lt=function(Me,Ke,We,et){var vt=F(Me,Ke),at;if(Ke)at=P;else{var Xe=F(h,Ke);Xe?at=D(Me,Xe,et):at={}}return NH(vt,at)},ht=function(Me,Ke,We,et,vt){var at=F(Me,Ke),Xe;if(at)Xe=at;else if(Ke)Xe=P;else if(q)if(Me.parent){var dt=B||We;dt&&!Ke?Xe=D(Me,dt,et):(Xe={},PE.extendFlat(Xe,ot(Me,Ke)))}else Xe=PE.extendFlat({},Me),f&&(vt.orientation==="h"?vt.flipX?Xe.x0=Me.x1:Xe.x1=0:vt.flipY?Xe.y0=Me.y1:Xe.y1=0);else Xe={};return NH(Xe,{x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1})},xt=function(Me,Ke,We,et){var vt=F(Me,Ke),at={},Xe=N(Me,Ke,We,et);PE.extendFlat(at,{transform:Ie({x0:Xe.x0,x1:Xe.x1,y0:Xe.y0,y1:Xe.y1,textBB:Me.textBB,_text:Me._text},{isHeader:a1.isHeader(Me,l)})}),vt?at=vt:Me.parent&&PE.extendFlat(at,ot(Me,Ke));var dt=Me.transform;return Me.x0!==Me.x1&&Me.y0!==Me.y1&&UH(l.type,dt,o),NH(at,{transform:{scale:dt.scale,rotate:dt.rotate,textX:dt.textX,textY:dt.textY,anchorX:dt.anchorX,anchorY:dt.anchorY,targetX:dt.targetX,targetY:dt.targetY}})},Vt=function(Me,Ke,We,et,vt){var at=et[0],Xe=et[1];p?Me.exit().transition().each(function(){var dt=ike.select(this),_t=dt.select("path.surface");_t.transition().attrTween("d",function(Ut){var fr=lt(Ut,Ke,We,[at,Xe]);return function(ar){return vt(fr(ar))}});var $t=dt.select("g.slicetext");$t.attr("opacity",0)}).remove():Me.exit().remove()},Ht=function(Me){var Ke=Me.transform;return Me.x0!==Me.x1&&Me.y0!==Me.y1&&UH(l.type,Ke,o),PE.getTextTransform({textX:Ke.textX,textY:Ke.textY,anchorX:Ke.anchorX,anchorY:Ke.anchorY,targetX:Ke.targetX,targetY:Ke.targetY,scale:Ke.scale,rotate:Ke.rotate})};p&&(d.each(function(Me){O[F_(Me)]={x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1},Me.transform&&(O[F_(Me)].transform={textX:Me.transform.textX,textY:Me.transform.textY,anchorX:Me.transform.anchorX,anchorY:Me.transform.anchorY,targetX:Me.transform.targetX,targetY:Me.transform.targetY,scale:Me.transform.scale,rotate:Me.transform.rotate})}),x.each(function(Me){U[F_(Me)]={x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1},Me.transform&&(U[F_(Me)].transform={textX:Me.transform.textX,textY:Me.transform.textY,anchorX:Me.transform.anchorX,anchorY:Me.transform.anchorY,targetX:Me.transform.targetX,targetY:Me.transform.targetY,scale:Me.transform.scale,rotate:Me.transform.rotate}),!q&&a1.isEntry(Me)&&(q=Me)})),B=a(t,r,h,x,{width:_,height:E,viewX:ne,viewY:fe,pathSlice:Re,toMoveInsideSlice:Ie,prevEntry:q,makeUpdateSliceInterpolator:ht,makeUpdateTextInterpolator:xt,handleSlicesExit:Vt,hasTransition:p,strTransform:Ht}),l.pathbar.visible?DCt(t,r,h,d,{barDifY:M,width:S,height:g,viewX:Z,viewY:oe,pathSlice:te,toMoveInsideSlice:Ie,makeUpdateSliceInterpolator:ht,makeUpdateTextInterpolator:xt,handleSlicesExit:Vt,hasTransition:p,strTransform:Ht}):d.remove()}});var VH=ie((Dhr,uke)=>{"use strict";var ICt=Mi(),FCt=py(),qCt=xh(),zCt=qCt.clearMinTextSize,OCt=Mp().resizeText,lke=ske();uke.exports=function(t,r,i,n,a){var o=a.type,s=a.drawDescendants,l=t._fullLayout,u=l["_"+o+"layer"],f,c,h=!i;if(zCt(o,l),f=u.selectAll("g.trace."+o).data(r,function(d){return d[0].trace.uid}),f.enter().append("g").classed("trace",!0).classed(o,!0),f.order(),!l.uniformtext.mode&&FCt.hasTransition(i)){n&&(c=n());var v=ICt.transition().duration(i.duration).ease(i.easing).each("end",function(){c&&c()}).each("interrupt",function(){c&&c()});v.each(function(){u.selectAll("g.trace").each(function(d){lke(t,d,this,i,s)})})}else f.each(function(d){lke(t,d,this,i,s)}),l.uniformtext.mode&&OCt(t,u.selectAll(".trace"),o);h&&f.exit().remove()}});var dke=ie((Ihr,vke)=>{"use strict";var fke=Mi(),KR=Zt(),cke=oa(),BCt=ks(),NCt=qH(),hke=ZR().styleOne,HH=D_(),o1=py(),UCt=CE(),VCt=WR().formatSliceLabel,GH=!1;vke.exports=function(t,r,i,n,a){var o=a.width,s=a.height,l=a.viewX,u=a.viewY,f=a.pathSlice,c=a.toMoveInsideSlice,h=a.strTransform,v=a.hasTransition,d=a.handleSlicesExit,x=a.makeUpdateSliceInterpolator,b=a.makeUpdateTextInterpolator,p=a.prevEntry,w={},A=t._context.staticPlot,T=t._fullLayout,k=r[0],_=k.trace,E=_.textposition.indexOf("left")!==-1,S=_.textposition.indexOf("right")!==-1,g=_.textposition.indexOf("bottom")!==-1,C=!g&&!_.marker.pad.t||g&&!_.marker.pad.b,M=NCt(i,[o,s],{packing:_.tiling.packing,squarifyratio:_.tiling.squarifyratio,flipX:_.tiling.flip.indexOf("x")>-1,flipY:_.tiling.flip.indexOf("y")>-1,pad:{inner:_.tiling.pad,top:_.marker.pad.t,left:_.marker.pad.l,right:_.marker.pad.r,bottom:_.marker.pad.b}}),P=M.descendants(),D=1/0,q=-1/0;P.forEach(function(N){var X=N.depth;X>=_._maxDepth?(N.x0=N.x1=(N.x0+N.x1)/2,N.y0=N.y1=(N.y0+N.y1)/2):(D=Math.min(D,X),q=Math.max(q,X))}),n=n.data(P,o1.getPtId),_._maxVisibleLayers=isFinite(q)?q-D+1:0,n.enter().append("g").classed("slice",!0),d(n,GH,w,[o,s],f),n.order();var O=null;if(v&&p){var U=o1.getPtId(p);n.each(function(N){O===null&&o1.getPtId(N)===U&&(O={x0:N.x0,x1:N.x1,y0:N.y0,y1:N.y1})})}var B=function(){return O||{x0:0,x1:o,y0:0,y1:s}},F=n;return v&&(F=F.transition().each("end",function(){var N=fke.select(this);o1.setSliceCursor(N,t,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),F.each(function(N){var X=o1.isHeader(N,_);N._x0=l(N.x0),N._x1=l(N.x1),N._y0=u(N.y0),N._y1=u(N.y1),N._hoverX=l(N.x1-_.marker.pad.r),N._hoverY=u(g?N.y1-_.marker.pad.b/2:N.y0+_.marker.pad.t/2);var K=fke.select(this),ne=KR.ensureSingle(K,"path","surface",function(ce){ce.style("pointer-events",A?"none":"all")});v?ne.transition().attrTween("d",function(ce){var le=x(ce,GH,B(),[o,s]);return function(me){return f(le(me))}}):ne.attr("d",f),K.call(UCt,i,t,r,{styleOne:hke,eventDataKeys:HH.eventDataKeys,transitionTime:HH.CLICK_TRANSITION_TIME,transitionEasing:HH.CLICK_TRANSITION_EASING}).call(o1.setSliceCursor,t,{isTransitioning:t._transitioning}),ne.call(hke,N,_,t,{hovered:!1}),N.x0===N.x1||N.y0===N.y1?N._text="":X?N._text=C?"":o1.getPtLabel(N)||"":N._text=VCt(N,i,_,r,T)||"";var fe=KR.ensureSingle(K,"g","slicetext"),ue=KR.ensureSingle(fe,"text","",function(ce){ce.attr("data-notex",1)}),ee=KR.ensureUniformFontSize(t,o1.determineTextFont(_,N,T.font)),Z=N._text||" ",oe=X&&Z.indexOf("<br>")===-1;ue.text(Z).classed("slicetext",!0).attr("text-anchor",S?"end":E||oe?"start":"middle").call(cke.font,ee).call(BCt.convertToTspans,t),N.textBB=cke.bBox(ue.node()),N.transform=c(N,{fontSize:ee.size,isHeader:X}),N.transform.fontSize=ee.size,v?ue.transition().attrTween("transform",function(ce){var le=b(ce,GH,B(),[o,s]);return function(me){return h(le(me))}}):ue.attr("transform",h(N))}),O}});var gke=ie((Fhr,pke)=>{"use strict";var HCt=VH(),GCt=dke();pke.exports=function(t,r,i,n){return HCt(t,r,i,n,{type:"treemap",drawDescendants:GCt})}});var mke=ie((qhr,yke)=>{"use strict";yke.exports={moduleType:"trace",name:"treemap",basePlotModule:F5e(),categories:[],animatable:!0,attributes:XR(),layoutAttributes:RH(),supplyDefaults:H5e(),supplyLayoutDefaults:Y5e(),calc:IH().calc,crossTraceCalc:IH().crossTraceCalc,plot:gke(),style:ZR().style,colorbar:yh(),meta:{}}});var _ke=ie((zhr,xke)=>{"use strict";xke.exports=mke()});var wke=ie(M3=>{"use strict";var bke=js();M3.name="icicle";M3.plot=function(e,t,r,i){bke.plotBasePlot(M3.name,e,t,r,i)};M3.clean=function(e,t,r,i){bke.cleanBasePlot(M3.name,e,t,r,i)}});var YH=ie((Bhr,Ake)=>{"use strict";var YCt=Ba().hovertemplateAttrs,WCt=Ba().texttemplateAttrs,XCt=Ls(),ZCt=fl().attributes,RE=w_(),Ud=pE(),JR=XR(),Tke=D_(),jCt=aa().extendFlat,KCt=dc().pattern;Ake.exports={labels:Ud.labels,parents:Ud.parents,values:Ud.values,branchvalues:Ud.branchvalues,count:Ud.count,level:Ud.level,maxdepth:Ud.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:JR.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:jCt({colors:Ud.marker.colors,line:Ud.marker.line,pattern:KCt,editType:"calc"},XCt("marker",{colorAttr:"colors",anim:!1})),leaf:Ud.leaf,pathbar:JR.pathbar,text:RE.text,textinfo:Ud.textinfo,texttemplate:WCt({editType:"plot"},{keys:Tke.eventDataKeys.concat(["label","value"])}),hovertext:RE.hovertext,hoverinfo:Ud.hoverinfo,hovertemplate:YCt({},{keys:Tke.eventDataKeys}),textfont:RE.textfont,insidetextfont:RE.insidetextfont,outsidetextfont:JR.outsidetextfont,textposition:JR.textposition,sort:RE.sort,root:Ud.root,domain:ZCt({name:"icicle",trace:!0,editType:"calc"})}});var WH=ie((Nhr,Mke)=>{"use strict";Mke.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}});var Cke=ie((Uhr,kke)=>{"use strict";var Ske=Zt(),JCt=YH(),QCt=_i(),$Ct=fl().defaults,e4t=zd().handleText,t4t=Xx().TEXTPAD,r4t=T_().handleMarkerDefaults,Eke=ul(),n4t=Eke.hasColorscale,i4t=Eke.handleDefaults;kke.exports=function(t,r,i,n){function a(v,d){return Ske.coerce(t,r,JCt,v,d)}var o=a("labels"),s=a("parents");if(!o||!o.length||!s||!s.length){r.visible=!1;return}var l=a("values");l&&l.length?a("branchvalues"):a("count"),a("level"),a("maxdepth"),a("tiling.orientation"),a("tiling.flip"),a("tiling.pad");var u=a("text");a("texttemplate"),r.texttemplate||a("textinfo",Ske.isArrayOrTypedArray(u)?"text+label":"label"),a("hovertext"),a("hovertemplate");var f=a("pathbar.visible"),c="auto";e4t(t,r,n,a,c,{hasPathbar:f,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),a("textposition"),r4t(t,r,n,a);var h=r._hasColorscale=n4t(t,"marker","colors")||(t.marker||{}).coloraxis;h&&i4t(t,r,n,a,{prefix:"marker.",cLetter:"c"}),a("leaf.opacity",h?1:.7),r._hovered={marker:{line:{width:2,color:QCt.contrast(n.paper_bgcolor)}}},f&&(a("pathbar.thickness",r.pathbar.textfont.size+2*t4t),a("pathbar.side"),a("pathbar.edgeshape")),a("sort"),a("root.color"),$Ct(r,n,a),r._length=null}});var Pke=ie((Vhr,Lke)=>{"use strict";var a4t=Zt(),o4t=WH();Lke.exports=function(t,r){function i(n,a){return a4t.coerce(t,r,o4t,n,a)}i("iciclecolorway",r.colorway),i("extendiciclecolors")}});var ZH=ie(XH=>{"use strict";var Rke=mE();XH.calc=function(e,t){return Rke.calc(e,t)};XH.crossTraceCalc=function(e){return Rke._runCrossTraceCalc("icicle",e)}});var Ike=ie((Ghr,Dke)=>{"use strict";var s4t=gE(),l4t=FH();Dke.exports=function(t,r,i){var n=i.flipX,a=i.flipY,o=i.orientation==="h",s=i.maxDepth,l=r[0],u=r[1];s&&(l=(t.height+1)*r[0]/Math.min(t.height+1,s),u=(t.height+1)*r[1]/Math.min(t.height+1,s));var f=s4t.partition().padding(i.pad.inner).size(o?[r[1],l]:[r[0],u])(t);return(o||n||a)&&l4t(f,r,{swapXY:o,flipX:n,flipY:a}),f}});var jH=ie((Yhr,Bke)=>{"use strict";var Fke=Mi(),qke=_i(),zke=Zt(),u4t=xh().resizeText,f4t=GR();function c4t(e){var t=e._fullLayout._iciclelayer.selectAll(".trace");u4t(e,t,"icicle"),t.each(function(r){var i=Fke.select(this),n=r[0],a=n.trace;i.style("opacity",a.opacity),i.selectAll("path.surface").each(function(o){Fke.select(this).call(Oke,o,a,e)})})}function Oke(e,t,r,i){var n=t.data.data,a=!t.children,o=n.i,s=zke.castOption(r,o,"marker.line.color")||qke.defaultLine,l=zke.castOption(r,o,"marker.line.width")||0;e.call(f4t,t,r,i).style("stroke-width",l).call(qke.stroke,s).style("opacity",a?r.leaf.opacity:null)}Bke.exports={style:c4t,styleOne:Oke}});var Gke=ie((Whr,Hke)=>{"use strict";var Nke=Mi(),QR=Zt(),Uke=oa(),h4t=ks(),v4t=Ike(),Vke=jH().styleOne,KH=D_(),S3=py(),d4t=CE(),p4t=WR().formatSliceLabel,JH=!1;Hke.exports=function(t,r,i,n,a){var o=a.width,s=a.height,l=a.viewX,u=a.viewY,f=a.pathSlice,c=a.toMoveInsideSlice,h=a.strTransform,v=a.hasTransition,d=a.handleSlicesExit,x=a.makeUpdateSliceInterpolator,b=a.makeUpdateTextInterpolator,p=a.prevEntry,w={},A=t._context.staticPlot,T=t._fullLayout,k=r[0],_=k.trace,E=_.textposition.indexOf("left")!==-1,S=_.textposition.indexOf("right")!==-1,g=_.textposition.indexOf("bottom")!==-1,C=v4t(i,[o,s],{flipX:_.tiling.flip.indexOf("x")>-1,flipY:_.tiling.flip.indexOf("y")>-1,orientation:_.tiling.orientation,pad:{inner:_.tiling.pad},maxDepth:_._maxDepth}),M=C.descendants(),P=1/0,D=-1/0;M.forEach(function(F){var N=F.depth;N>=_._maxDepth?(F.x0=F.x1=(F.x0+F.x1)/2,F.y0=F.y1=(F.y0+F.y1)/2):(P=Math.min(P,N),D=Math.max(D,N))}),n=n.data(M,S3.getPtId),_._maxVisibleLayers=isFinite(D)?D-P+1:0,n.enter().append("g").classed("slice",!0),d(n,JH,w,[o,s],f),n.order();var q=null;if(v&&p){var O=S3.getPtId(p);n.each(function(F){q===null&&S3.getPtId(F)===O&&(q={x0:F.x0,x1:F.x1,y0:F.y0,y1:F.y1})})}var U=function(){return q||{x0:0,x1:o,y0:0,y1:s}},B=n;return v&&(B=B.transition().each("end",function(){var F=Nke.select(this);S3.setSliceCursor(F,t,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),B.each(function(F){F._x0=l(F.x0),F._x1=l(F.x1),F._y0=u(F.y0),F._y1=u(F.y1),F._hoverX=l(F.x1-_.tiling.pad),F._hoverY=u(g?F.y1-_.tiling.pad/2:F.y0+_.tiling.pad/2);var N=Nke.select(this),X=QR.ensureSingle(N,"path","surface",function(ue){ue.style("pointer-events",A?"none":"all")});v?X.transition().attrTween("d",function(ue){var ee=x(ue,JH,U(),[o,s],{orientation:_.tiling.orientation,flipX:_.tiling.flip.indexOf("x")>-1,flipY:_.tiling.flip.indexOf("y")>-1});return function(Z){return f(ee(Z))}}):X.attr("d",f),N.call(d4t,i,t,r,{styleOne:Vke,eventDataKeys:KH.eventDataKeys,transitionTime:KH.CLICK_TRANSITION_TIME,transitionEasing:KH.CLICK_TRANSITION_EASING}).call(S3.setSliceCursor,t,{isTransitioning:t._transitioning}),X.call(Vke,F,_,t,{hovered:!1}),F.x0===F.x1||F.y0===F.y1?F._text="":F._text=p4t(F,i,_,r,T)||"";var K=QR.ensureSingle(N,"g","slicetext"),ne=QR.ensureSingle(K,"text","",function(ue){ue.attr("data-notex",1)}),fe=QR.ensureUniformFontSize(t,S3.determineTextFont(_,F,T.font));ne.text(F._text||" ").classed("slicetext",!0).attr("text-anchor",S?"end":E?"start":"middle").call(Uke.font,fe).call(h4t.convertToTspans,t),F.textBB=Uke.bBox(ne.node()),F.transform=c(F,{fontSize:fe.size}),F.transform.fontSize=fe.size,v?ne.transition().attrTween("transform",function(ue){var ee=b(ue,JH,U(),[o,s]);return function(Z){return h(ee(Z))}}):ne.attr("transform",h(F))}),q}});var Wke=ie((Xhr,Yke)=>{"use strict";var g4t=VH(),y4t=Gke();Yke.exports=function(t,r,i,n){return g4t(t,r,i,n,{type:"icicle",drawDescendants:y4t})}});var Zke=ie((Zhr,Xke)=>{"use strict";Xke.exports={moduleType:"trace",name:"icicle",basePlotModule:wke(),categories:[],animatable:!0,attributes:YH(),layoutAttributes:WH(),supplyDefaults:Cke(),supplyLayoutDefaults:Pke(),calc:ZH().calc,crossTraceCalc:ZH().crossTraceCalc,plot:Wke(),style:jH().style,colorbar:yh(),meta:{}}});var Kke=ie((jhr,jke)=>{"use strict";jke.exports=Zke()});var Qke=ie(E3=>{"use strict";var Jke=js();E3.name="funnelarea";E3.plot=function(e,t,r,i){Jke.plotBasePlot(E3.name,e,t,r,i)};E3.clean=function(e,t,r,i){Jke.cleanBasePlot(E3.name,e,t,r,i)}});var QH=ie((Jhr,$ke)=>{"use strict";var Gc=w_(),m4t=rs(),x4t=fl().attributes,_4t=Ba().hovertemplateAttrs,b4t=Ba().texttemplateAttrs,q_=aa().extendFlat;$ke.exports={labels:Gc.labels,label0:Gc.label0,dlabel:Gc.dlabel,values:Gc.values,marker:{colors:Gc.marker.colors,line:{color:q_({},Gc.marker.line.color,{dflt:null}),width:q_({},Gc.marker.line.width,{dflt:1}),editType:"calc"},pattern:Gc.marker.pattern,editType:"calc"},text:Gc.text,hovertext:Gc.hovertext,scalegroup:q_({},Gc.scalegroup,{}),textinfo:q_({},Gc.textinfo,{flags:["label","text","value","percent"]}),texttemplate:b4t({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:q_({},m4t.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:_4t({},{keys:["label","color","value","text","percent"]}),textposition:q_({},Gc.textposition,{values:["inside","none"],dflt:"inside"}),textfont:Gc.textfont,insidetextfont:Gc.insidetextfont,title:{text:Gc.title.text,font:Gc.title.font,position:q_({},Gc.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:x4t({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}});var $H=ie((Qhr,eCe)=>{"use strict";var w4t=xR().hiddenlabels;eCe.exports={hiddenlabels:w4t,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}});var nCe=ie(($hr,rCe)=>{"use strict";var tCe=Zt(),T4t=QH(),A4t=fl().defaults,M4t=zd().handleText,S4t=T_().handleLabelsAndValues,E4t=T_().handleMarkerDefaults;rCe.exports=function(t,r,i,n){function a(x,b){return tCe.coerce(t,r,T4t,x,b)}var o=a("labels"),s=a("values"),l=S4t(o,s),u=l.len;if(r._hasLabels=l.hasLabels,r._hasValues=l.hasValues,!r._hasLabels&&r._hasValues&&(a("label0"),a("dlabel")),!u){r.visible=!1;return}r._length=u,E4t(t,r,n,a),a("scalegroup");var f=a("text"),c=a("texttemplate"),h;if(c||(h=a("textinfo",Array.isArray(f)?"text+percent":"percent")),a("hovertext"),a("hovertemplate"),c||h&&h!=="none"){var v=a("textposition");M4t(t,r,n,a,v,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}else h==="none"&&a("textposition","none");A4t(r,n,a);var d=a("title.text");d&&(a("title.position"),tCe.coerceFont(a,"title.font",n.font)),a("aspectratio"),a("baseratio")}});var aCe=ie((evr,iCe)=>{"use strict";var k4t=Zt(),C4t=$H();iCe.exports=function(t,r){function i(n,a){return k4t.coerce(t,r,C4t,n,a)}i("hiddenlabels"),i("funnelareacolorway",r.colorway),i("extendfunnelareacolors")}});var eG=ie((tvr,sCe)=>{"use strict";var oCe=u3();function L4t(e,t){return oCe.calc(e,t)}function P4t(e){oCe.crossTraceCalc(e,{type:"funnelarea"})}sCe.exports={calc:L4t,crossTraceCalc:P4t}});var hCe=ie((rvr,cCe)=>{"use strict";var z_=Mi(),tG=oa(),s1=Zt(),R4t=s1.strScale,lCe=s1.strTranslate,uCe=ks(),D4t=Jx(),I4t=D4t.toMoveInsideBar,fCe=xh(),F4t=fCe.recordMinTextSize,q4t=fCe.clearMinTextSize,z4t=mm(),k3=TR(),O4t=k3.attachFxHandlers,B4t=k3.determineInsideTextFont,N4t=k3.layoutAreas,U4t=k3.prerenderTitles,V4t=k3.positionTitleOutside,H4t=k3.formatSliceLabel;cCe.exports=function(t,r){var i=t._context.staticPlot,n=t._fullLayout;q4t("funnelarea",n),U4t(r,t),N4t(r,n._size),s1.makeTraceGroups(n._funnelarealayer,r,"trace").each(function(a){var o=z_.select(this),s=a[0],l=s.trace;Y4t(a),o.each(function(){var u=z_.select(this).selectAll("g.slice").data(a);u.enter().append("g").classed("slice",!0),u.exit().remove(),u.each(function(c,h){if(c.hidden){z_.select(this).selectAll("path,g").remove();return}c.pointNumber=c.i,c.curveNumber=l.index;var v=s.cx,d=s.cy,x=z_.select(this),b=x.selectAll("path.surface").data([c]);b.enter().append("path").classed("surface",!0).style({"pointer-events":i?"none":"all"}),x.call(O4t,t,a);var p="M"+(v+c.TR[0])+","+(d+c.TR[1])+rG(c.TR,c.BR)+rG(c.BR,c.BL)+rG(c.BL,c.TL)+"Z";b.attr("d",p),H4t(t,c,s);var w=z4t.castOption(l.textposition,c.pts),A=x.selectAll("g.slicetext").data(c.text&&w!=="none"?[0]:[]);A.enter().append("g").classed("slicetext",!0),A.exit().remove(),A.each(function(){var T=s1.ensureSingle(z_.select(this),"text","",function(P){P.attr("data-notex",1)}),k=s1.ensureUniformFontSize(t,B4t(l,c,n.font));T.text(c.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(tG.font,k).call(uCe.convertToTspans,t);var _=tG.bBox(T.node()),E,S,g,C=Math.min(c.BL[1],c.BR[1])+d,M=Math.max(c.TL[1],c.TR[1])+d;S=Math.max(c.TL[0],c.BL[0])+v,g=Math.min(c.TR[0],c.BR[0])+v,E=I4t(S,g,C,M,_,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),E.fontSize=k.size,F4t(l.type,E,n),a[h].transform=E,s1.setTransormAndDisplay(T,E)})});var f=z_.select(this).selectAll("g.titletext").data(l.title.text?[0]:[]);f.enter().append("g").classed("titletext",!0),f.exit().remove(),f.each(function(){var c=s1.ensureSingle(z_.select(this),"text","",function(d){d.attr("data-notex",1)}),h=l.title.text;l._meta&&(h=s1.templateString(h,l._meta)),c.text(h).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(tG.font,l.title.font).call(uCe.convertToTspans,t);var v=V4t(s,n._size);c.attr("transform",lCe(v.x,v.y)+R4t(Math.min(1,v.scale))+lCe(v.tx,v.ty))})})})};function rG(e,t){var r=t[0]-e[0],i=t[1]-e[1];return"l"+r+","+i}function G4t(e,t){return[.5*(e[0]+t[0]),.5*(e[1]+t[1])]}function Y4t(e){if(!e.length)return;var t=e[0],r=t.trace,i=r.aspectratio,n=r.baseratio;n>.999&&(n=.999);var a=Math.pow(n,2),o=t.vTotal,s=o*a/(1-a),l=o,u=s/o;function f(){var D=Math.sqrt(u);return{x:D,y:-D}}function c(){var D=f();return[D.x,D.y]}var h,v=[];v.push(c());var d,x;for(d=e.length-1;d>-1;d--)if(x=e[d],!x.hidden){var b=x.v/l;u+=b,v.push(c())}var p=1/0,w=-1/0;for(d=0;d<v.length;d++)h=v[d],p=Math.min(p,h[1]),w=Math.max(w,h[1]);for(d=0;d<v.length;d++)v[d][1]-=(w+p)/2;var A=v[v.length-1][0],T=t.r,k=(w-p)/2,_=T/A,E=T/k*i;for(t.r=E*k,d=0;d<v.length;d++)v[d][0]*=_,v[d][1]*=E;h=v[0];var S=[-h[0],h[1]],g=[h[0],h[1]],C=0;for(d=e.length-1;d>-1;d--)if(x=e[d],!x.hidden){C+=1;var M=v[C][0],P=v[C][1];x.TL=[-M,P],x.TR=[M,P],x.BL=S,x.BR=g,x.pxmid=G4t(x.TR,x.BR),S=x.TL,g=x.TR}}});var pCe=ie((nvr,dCe)=>{"use strict";var vCe=Mi(),W4t=S2(),X4t=xh().resizeText;dCe.exports=function(t){var r=t._fullLayout._funnelarealayer.selectAll(".trace");X4t(t,r,"funnelarea"),r.each(function(i){var n=i[0],a=n.trace,o=vCe.select(this);o.style({opacity:a.opacity}),o.selectAll("path.surface").each(function(s){vCe.select(this).call(W4t,s,a,t)})})}});var yCe=ie((ivr,gCe)=>{"use strict";gCe.exports={moduleType:"trace",name:"funnelarea",basePlotModule:Qke(),categories:["pie-like","funnelarea","showLegend"],attributes:QH(),layoutAttributes:$H(),supplyDefaults:nCe(),supplyLayoutDefaults:aCe(),calc:eG().calc,crossTraceCalc:eG().crossTraceCalc,plot:hCe(),style:pCe(),styleOne:S2(),meta:{}}});var xCe=ie((avr,mCe)=>{"use strict";mCe.exports=yCe()});var _u=ie((ovr,_Ce)=>{(function(){var e={1964:function(n,a,o){n.exports={alpha_shape:o(3502),convex_hull:o(7352),delaunay_triangulate:o(7642),gl_cone3d:o(6405),gl_error3d:o(9165),gl_heatmap2d:o(2510),gl_line3d:o(5714),gl_mesh3d:o(7201),gl_plot2d:o(1850),gl_plot3d:o(4100),gl_pointcloud2d:o(4696),gl_scatter3d:o(8418),gl_select_box:o(3161),gl_spikes2d:o(4098),gl_streamtube3d:o(7815),gl_surface3d:o(9499),ndarray:o(9618),ndarray_linear_interpolate:o(4317)}},4793:function(n,a,o){"use strict";var s;function l(Se,pe){if(!(Se instanceof pe))throw new TypeError("Cannot call a class as a function")}function u(Se,pe){for(var Te=0;Te<pe.length;Te++){var it=pe[Te];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(Se,c(it.key),it)}}function f(Se,pe,Te){return pe&&u(Se.prototype,pe),Te&&u(Se,Te),Object.defineProperty(Se,"prototype",{writable:!1}),Se}function c(Se){var pe=h(Se,"string");return T(pe)=="symbol"?pe:pe+""}function h(Se,pe){if(T(Se)!="object"||!Se)return Se;var Te=Se[Symbol.toPrimitive];if(Te!==void 0){var it=Te.call(Se,pe||"default");if(T(it)!="object")return it;throw new TypeError("@@toPrimitive must return a primitive value.")}return(pe==="string"?String:Number)(Se)}function v(Se,pe,Te){return pe=p(pe),d(Se,b()?Reflect.construct(pe,Te||[],p(Se).constructor):pe.apply(Se,Te))}function d(Se,pe){if(pe&&(T(pe)==="object"||typeof pe=="function"))return pe;if(pe!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x(Se)}function x(Se){if(Se===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Se}function b(){try{var Se=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(pe){}return(b=function(){return!!Se})()}function p(Se){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Te){return Te.__proto__||Object.getPrototypeOf(Te)},p(Se)}function w(Se,pe){if(typeof pe!="function"&&pe!==null)throw new TypeError("Super expression must either be null or a function");Se.prototype=Object.create(pe&&pe.prototype,{constructor:{value:Se,writable:!0,configurable:!0}}),Object.defineProperty(Se,"prototype",{writable:!1}),pe&&A(Se,pe)}function A(Se,pe){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(it,Dt){return it.__proto__=Dt,it},A(Se,pe)}function T(Se){"@babel/helpers - typeof";return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pe){return typeof pe}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe},T(Se)}var k=o(7507),_=o(3778),E=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;a.hp=M,s=ne,a.IS=50;var S=2147483647;s=S,M.TYPED_ARRAY_SUPPORT=g(),!M.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function g(){try{var Se=new Uint8Array(1),pe={foo:function(){return 42}};return Object.setPrototypeOf(pe,Uint8Array.prototype),Object.setPrototypeOf(Se,pe),Se.foo()===42}catch(Te){return!1}}Object.defineProperty(M.prototype,"parent",{enumerable:!0,get:function(){if(M.isBuffer(this))return this.buffer}}),Object.defineProperty(M.prototype,"offset",{enumerable:!0,get:function(){if(M.isBuffer(this))return this.byteOffset}});function C(Se){if(Se>S)throw new RangeError('The value "'+Se+'" is invalid for option "size"');var pe=new Uint8Array(Se);return Object.setPrototypeOf(pe,M.prototype),pe}function M(Se,pe,Te){if(typeof Se=="number"){if(typeof pe=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return O(Se)}return P(Se,pe,Te)}M.poolSize=8192;function P(Se,pe,Te){if(typeof Se=="string")return U(Se,pe);if(ArrayBuffer.isView(Se))return F(Se);if(Se==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+T(Se));if(gt(Se,ArrayBuffer)||Se&&gt(Se.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(gt(Se,SharedArrayBuffer)||Se&&gt(Se.buffer,SharedArrayBuffer)))return N(Se,pe,Te);if(typeof Se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var it=Se.valueOf&&Se.valueOf();if(it!=null&&it!==Se)return M.from(it,pe,Te);var Dt=X(Se);if(Dt)return Dt;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof Se[Symbol.toPrimitive]=="function")return M.from(Se[Symbol.toPrimitive]("string"),pe,Te);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+T(Se))}M.from=function(Se,pe,Te){return P(Se,pe,Te)},Object.setPrototypeOf(M.prototype,Uint8Array.prototype),Object.setPrototypeOf(M,Uint8Array);function D(Se){if(typeof Se!="number")throw new TypeError('"size" argument must be of type number');if(Se<0)throw new RangeError('The value "'+Se+'" is invalid for option "size"')}function q(Se,pe,Te){return D(Se),Se<=0?C(Se):pe!==void 0?typeof Te=="string"?C(Se).fill(pe,Te):C(Se).fill(pe):C(Se)}M.alloc=function(Se,pe,Te){return q(Se,pe,Te)};function O(Se){return D(Se),C(Se<0?0:K(Se)|0)}M.allocUnsafe=function(Se){return O(Se)},M.allocUnsafeSlow=function(Se){return O(Se)};function U(Se,pe){if((typeof pe!="string"||pe==="")&&(pe="utf8"),!M.isEncoding(pe))throw new TypeError("Unknown encoding: "+pe);var Te=fe(Se,pe)|0,it=C(Te),Dt=it.write(Se,pe);return Dt!==Te&&(it=it.slice(0,Dt)),it}function B(Se){for(var pe=Se.length<0?0:K(Se.length)|0,Te=C(pe),it=0;it<pe;it+=1)Te[it]=Se[it]&255;return Te}function F(Se){if(gt(Se,Uint8Array)){var pe=new Uint8Array(Se);return N(pe.buffer,pe.byteOffset,pe.byteLength)}return B(Se)}function N(Se,pe,Te){if(pe<0||Se.byteLength<pe)throw new RangeError('"offset" is outside of buffer bounds');if(Se.byteLength<pe+(Te||0))throw new RangeError('"length" is outside of buffer bounds');var it;return pe===void 0&&Te===void 0?it=new Uint8Array(Se):Te===void 0?it=new Uint8Array(Se,pe):it=new Uint8Array(Se,pe,Te),Object.setPrototypeOf(it,M.prototype),it}function X(Se){if(M.isBuffer(Se)){var pe=K(Se.length)|0,Te=C(pe);return Te.length===0||Se.copy(Te,0,0,pe),Te}if(Se.length!==void 0)return typeof Se.length!="number"||kt(Se.length)?C(0):B(Se);if(Se.type==="Buffer"&&Array.isArray(Se.data))return B(Se.data)}function K(Se){if(Se>=S)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+S.toString(16)+" bytes");return Se|0}function ne(Se){return+Se!=Se&&(Se=0),M.alloc(+Se)}M.isBuffer=function(pe){return pe!=null&&pe._isBuffer===!0&&pe!==M.prototype},M.compare=function(pe,Te){if(gt(pe,Uint8Array)&&(pe=M.from(pe,pe.offset,pe.byteLength)),gt(Te,Uint8Array)&&(Te=M.from(Te,Te.offset,Te.byteLength)),!M.isBuffer(pe)||!M.isBuffer(Te))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(pe===Te)return 0;for(var it=pe.length,Dt=Te.length,Wt=0,er=Math.min(it,Dt);Wt<er;++Wt)if(pe[Wt]!==Te[Wt]){it=pe[Wt],Dt=Te[Wt];break}return it<Dt?-1:Dt<it?1:0},M.isEncoding=function(pe){switch(String(pe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},M.concat=function(pe,Te){if(!Array.isArray(pe))throw new TypeError('"list" argument must be an Array of Buffers');if(pe.length===0)return M.alloc(0);var it;if(Te===void 0)for(Te=0,it=0;it<pe.length;++it)Te+=pe[it].length;var Dt=M.allocUnsafe(Te),Wt=0;for(it=0;it<pe.length;++it){var er=pe[it];if(gt(er,Uint8Array))Wt+er.length>Dt.length?(M.isBuffer(er)||(er=M.from(er)),er.copy(Dt,Wt)):Uint8Array.prototype.set.call(Dt,er,Wt);else if(M.isBuffer(er))er.copy(Dt,Wt);else throw new TypeError('"list" argument must be an Array of Buffers');Wt+=er.length}return Dt};function fe(Se,pe){if(M.isBuffer(Se))return Se.length;if(ArrayBuffer.isView(Se)||gt(Se,ArrayBuffer))return Se.byteLength;if(typeof Se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+T(Se));var Te=Se.length,it=arguments.length>2&&arguments[2]===!0;if(!it&&Te===0)return 0;for(var Dt=!1;;)switch(pe){case"ascii":case"latin1":case"binary":return Te;case"utf8":case"utf-8":return Ut(Se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Te*2;case"hex":return Te>>>1;case"base64":return cr(Se).length;default:if(Dt)return it?-1:Ut(Se).length;pe=(""+pe).toLowerCase(),Dt=!0}}M.byteLength=fe;function ue(Se,pe,Te){var it=!1;if((pe===void 0||pe<0)&&(pe=0),pe>this.length||((Te===void 0||Te>this.length)&&(Te=this.length),Te<=0)||(Te>>>=0,pe>>>=0,Te<=pe))return"";for(Se||(Se="utf8");;)switch(Se){case"hex":return Re(this,pe,Te);case"utf8":case"utf-8":return ae(this,pe,Te);case"ascii":return qe(this,pe,Te);case"latin1":case"binary":return rt(this,pe,Te);case"base64":return ge(this,pe,Te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,pe,Te);default:if(it)throw new TypeError("Unknown encoding: "+Se);Se=(Se+"").toLowerCase(),it=!0}}M.prototype._isBuffer=!0;function ee(Se,pe,Te){var it=Se[pe];Se[pe]=Se[Te],Se[Te]=it}M.prototype.swap16=function(){var pe=this.length;if(pe%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Te=0;Te<pe;Te+=2)ee(this,Te,Te+1);return this},M.prototype.swap32=function(){var pe=this.length;if(pe%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Te=0;Te<pe;Te+=4)ee(this,Te,Te+3),ee(this,Te+1,Te+2);return this},M.prototype.swap64=function(){var pe=this.length;if(pe%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Te=0;Te<pe;Te+=8)ee(this,Te,Te+7),ee(this,Te+1,Te+6),ee(this,Te+2,Te+5),ee(this,Te+3,Te+4);return this},M.prototype.toString=function(){var pe=this.length;return pe===0?"":arguments.length===0?ae(this,0,pe):ue.apply(this,arguments)},M.prototype.toLocaleString=M.prototype.toString,M.prototype.equals=function(pe){if(!M.isBuffer(pe))throw new TypeError("Argument must be a Buffer");return this===pe?!0:M.compare(this,pe)===0},M.prototype.inspect=function(){var pe="",Te=a.IS;return pe=this.toString("hex",0,Te).replace(/(.{2})/g,"$1 ").trim(),this.length>Te&&(pe+=" ... "),"<Buffer "+pe+">"},E&&(M.prototype[E]=M.prototype.inspect),M.prototype.compare=function(pe,Te,it,Dt,Wt){if(gt(pe,Uint8Array)&&(pe=M.from(pe,pe.offset,pe.byteLength)),!M.isBuffer(pe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+T(pe));if(Te===void 0&&(Te=0),it===void 0&&(it=pe?pe.length:0),Dt===void 0&&(Dt=0),Wt===void 0&&(Wt=this.length),Te<0||it>pe.length||Dt<0||Wt>this.length)throw new RangeError("out of range index");if(Dt>=Wt&&Te>=it)return 0;if(Dt>=Wt)return-1;if(Te>=it)return 1;if(Te>>>=0,it>>>=0,Dt>>>=0,Wt>>>=0,this===pe)return 0;for(var er=Wt-Dt,qr=it-Te,Vr=Math.min(er,qr),mr=this.slice(Dt,Wt),Fr=pe.slice(Te,it),nn=0;nn<Vr;++nn)if(mr[nn]!==Fr[nn]){er=mr[nn],qr=Fr[nn];break}return er<qr?-1:qr<er?1:0};function Z(Se,pe,Te,it,Dt){if(Se.length===0)return-1;if(typeof Te=="string"?(it=Te,Te=0):Te>2147483647?Te=2147483647:Te<-2147483648&&(Te=-2147483648),Te=+Te,kt(Te)&&(Te=Dt?0:Se.length-1),Te<0&&(Te=Se.length+Te),Te>=Se.length){if(Dt)return-1;Te=Se.length-1}else if(Te<0)if(Dt)Te=0;else return-1;if(typeof pe=="string"&&(pe=M.from(pe,it)),M.isBuffer(pe))return pe.length===0?-1:oe(Se,pe,Te,it,Dt);if(typeof pe=="number")return pe=pe&255,typeof Uint8Array.prototype.indexOf=="function"?Dt?Uint8Array.prototype.indexOf.call(Se,pe,Te):Uint8Array.prototype.lastIndexOf.call(Se,pe,Te):oe(Se,[pe],Te,it,Dt);throw new TypeError("val must be string, number or Buffer")}function oe(Se,pe,Te,it,Dt){var Wt=1,er=Se.length,qr=pe.length;if(it!==void 0&&(it=String(it).toLowerCase(),it==="ucs2"||it==="ucs-2"||it==="utf16le"||it==="utf-16le")){if(Se.length<2||pe.length<2)return-1;Wt=2,er/=2,qr/=2,Te/=2}function Vr(xn,pn){return Wt===1?xn[pn]:xn.readUInt16BE(pn*Wt)}var mr;if(Dt){var Fr=-1;for(mr=Te;mr<er;mr++)if(Vr(Se,mr)===Vr(pe,Fr===-1?0:mr-Fr)){if(Fr===-1&&(Fr=mr),mr-Fr+1===qr)return Fr*Wt}else Fr!==-1&&(mr-=mr-Fr),Fr=-1}else for(Te+qr>er&&(Te=er-qr),mr=Te;mr>=0;mr--){for(var nn=!0,jn=0;jn<qr;jn++)if(Vr(Se,mr+jn)!==Vr(pe,jn)){nn=!1;break}if(nn)return mr}return-1}M.prototype.includes=function(pe,Te,it){return this.indexOf(pe,Te,it)!==-1},M.prototype.indexOf=function(pe,Te,it){return Z(this,pe,Te,it,!0)},M.prototype.lastIndexOf=function(pe,Te,it){return Z(this,pe,Te,it,!1)};function ce(Se,pe,Te,it){Te=Number(Te)||0;var Dt=Se.length-Te;it?(it=Number(it),it>Dt&&(it=Dt)):it=Dt;var Wt=pe.length;it>Wt/2&&(it=Wt/2);var er;for(er=0;er<it;++er){var qr=parseInt(pe.substr(er*2,2),16);if(kt(qr))return er;Se[Te+er]=qr}return er}function le(Se,pe,Te,it){return It(Ut(pe,Se.length-Te),Se,Te,it)}function me(Se,pe,Te,it){return It(fr(pe),Se,Te,it)}function he(Se,pe,Te,it){return It(cr(pe),Se,Te,it)}function te(Se,pe,Te,it){return It(ar(pe,Se.length-Te),Se,Te,it)}M.prototype.write=function(pe,Te,it,Dt){if(Te===void 0)Dt="utf8",it=this.length,Te=0;else if(it===void 0&&typeof Te=="string")Dt=Te,it=this.length,Te=0;else if(isFinite(Te))Te=Te>>>0,isFinite(it)?(it=it>>>0,Dt===void 0&&(Dt="utf8")):(Dt=it,it=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Wt=this.length-Te;if((it===void 0||it>Wt)&&(it=Wt),pe.length>0&&(it<0||Te<0)||Te>this.length)throw new RangeError("Attempt to write outside buffer bounds");Dt||(Dt="utf8");for(var er=!1;;)switch(Dt){case"hex":return ce(this,pe,Te,it);case"utf8":case"utf-8":return le(this,pe,Te,it);case"ascii":case"latin1":case"binary":return me(this,pe,Te,it);case"base64":return he(this,pe,Te,it);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,pe,Te,it);default:if(er)throw new TypeError("Unknown encoding: "+Dt);Dt=(""+Dt).toLowerCase(),er=!0}},M.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ge(Se,pe,Te){return pe===0&&Te===Se.length?k.fromByteArray(Se):k.fromByteArray(Se.slice(pe,Te))}function ae(Se,pe,Te){Te=Math.min(Se.length,Te);for(var it=[],Dt=pe;Dt<Te;){var Wt=Se[Dt],er=null,qr=Wt>239?4:Wt>223?3:Wt>191?2:1;if(Dt+qr<=Te){var Vr=void 0,mr=void 0,Fr=void 0,nn=void 0;switch(qr){case 1:Wt<128&&(er=Wt);break;case 2:Vr=Se[Dt+1],(Vr&192)===128&&(nn=(Wt&31)<<6|Vr&63,nn>127&&(er=nn));break;case 3:Vr=Se[Dt+1],mr=Se[Dt+2],(Vr&192)===128&&(mr&192)===128&&(nn=(Wt&15)<<12|(Vr&63)<<6|mr&63,nn>2047&&(nn<55296||nn>57343)&&(er=nn));break;case 4:Vr=Se[Dt+1],mr=Se[Dt+2],Fr=Se[Dt+3],(Vr&192)===128&&(mr&192)===128&&(Fr&192)===128&&(nn=(Wt&15)<<18|(Vr&63)<<12|(mr&63)<<6|Fr&63,nn>65535&&nn<1114112&&(er=nn))}}er===null?(er=65533,qr=1):er>65535&&(er-=65536,it.push(er>>>10&1023|55296),er=56320|er&1023),it.push(er),Dt+=qr}return Ce(it)}var _e=4096;function Ce(Se){var pe=Se.length;if(pe<=_e)return String.fromCharCode.apply(String,Se);for(var Te="",it=0;it<pe;)Te+=String.fromCharCode.apply(String,Se.slice(it,it+=_e));return Te}function qe(Se,pe,Te){var it="";Te=Math.min(Se.length,Te);for(var Dt=pe;Dt<Te;++Dt)it+=String.fromCharCode(Se[Dt]&127);return it}function rt(Se,pe,Te){var it="";Te=Math.min(Se.length,Te);for(var Dt=pe;Dt<Te;++Dt)it+=String.fromCharCode(Se[Dt]);return it}function Re(Se,pe,Te){var it=Se.length;(!pe||pe<0)&&(pe=0),(!Te||Te<0||Te>it)&&(Te=it);for(var Dt="",Wt=pe;Wt<Te;++Wt)Dt+=Je[Se[Wt]];return Dt}function Ie(Se,pe,Te){for(var it=Se.slice(pe,Te),Dt="",Wt=0;Wt<it.length-1;Wt+=2)Dt+=String.fromCharCode(it[Wt]+it[Wt+1]*256);return Dt}M.prototype.slice=function(pe,Te){var it=this.length;pe=~~pe,Te=Te===void 0?it:~~Te,pe<0?(pe+=it,pe<0&&(pe=0)):pe>it&&(pe=it),Te<0?(Te+=it,Te<0&&(Te=0)):Te>it&&(Te=it),Te<pe&&(Te=pe);var Dt=this.subarray(pe,Te);return Object.setPrototypeOf(Dt,M.prototype),Dt};function ot(Se,pe,Te){if(Se%1!==0||Se<0)throw new RangeError("offset is not uint");if(Se+pe>Te)throw new RangeError("Trying to access beyond buffer length")}M.prototype.readUintLE=M.prototype.readUIntLE=function(pe,Te,it){pe=pe>>>0,Te=Te>>>0,it||ot(pe,Te,this.length);for(var Dt=this[pe],Wt=1,er=0;++er<Te&&(Wt*=256);)Dt+=this[pe+er]*Wt;return Dt},M.prototype.readUintBE=M.prototype.readUIntBE=function(pe,Te,it){pe=pe>>>0,Te=Te>>>0,it||ot(pe,Te,this.length);for(var Dt=this[pe+--Te],Wt=1;Te>0&&(Wt*=256);)Dt+=this[pe+--Te]*Wt;return Dt},M.prototype.readUint8=M.prototype.readUInt8=function(pe,Te){return pe=pe>>>0,Te||ot(pe,1,this.length),this[pe]},M.prototype.readUint16LE=M.prototype.readUInt16LE=function(pe,Te){return pe=pe>>>0,Te||ot(pe,2,this.length),this[pe]|this[pe+1]<<8},M.prototype.readUint16BE=M.prototype.readUInt16BE=function(pe,Te){return pe=pe>>>0,Te||ot(pe,2,this.length),this[pe]<<8|this[pe+1]},M.prototype.readUint32LE=M.prototype.readUInt32LE=function(pe,Te){return pe=pe>>>0,Te||ot(pe,4,this.length),(this[pe]|this[pe+1]<<8|this[pe+2]<<16)+this[pe+3]*16777216},M.prototype.readUint32BE=M.prototype.readUInt32BE=function(pe,Te){return pe=pe>>>0,Te||ot(pe,4,this.length),this[pe]*16777216+(this[pe+1]<<16|this[pe+2]<<8|this[pe+3])},M.prototype.readBigUInt64LE=Ze(function(pe){pe=pe>>>0,Xe(pe,"offset");var Te=this[pe],it=this[pe+7];(Te===void 0||it===void 0)&&dt(pe,this.length-8);var Dt=Te+this[++pe]*Math.pow(2,8)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,24),Wt=this[++pe]+this[++pe]*Math.pow(2,8)+this[++pe]*Math.pow(2,16)+it*Math.pow(2,24);return BigInt(Dt)+(BigInt(Wt)<<BigInt(32))}),M.prototype.readBigUInt64BE=Ze(function(pe){pe=pe>>>0,Xe(pe,"offset");var Te=this[pe],it=this[pe+7];(Te===void 0||it===void 0)&&dt(pe,this.length-8);var Dt=Te*Math.pow(2,24)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,8)+this[++pe],Wt=this[++pe]*Math.pow(2,24)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,8)+it;return(BigInt(Dt)<<BigInt(32))+BigInt(Wt)}),M.prototype.readIntLE=function(pe,Te,it){pe=pe>>>0,Te=Te>>>0,it||ot(pe,Te,this.length);for(var Dt=this[pe],Wt=1,er=0;++er<Te&&(Wt*=256);)Dt+=this[pe+er]*Wt;return Wt*=128,Dt>=Wt&&(Dt-=Math.pow(2,8*Te)),Dt},M.prototype.readIntBE=function(pe,Te,it){pe=pe>>>0,Te=Te>>>0,it||ot(pe,Te,this.length);for(var Dt=Te,Wt=1,er=this[pe+--Dt];Dt>0&&(Wt*=256);)er+=this[pe+--Dt]*Wt;return Wt*=128,er>=Wt&&(er-=Math.pow(2,8*Te)),er},M.prototype.readInt8=function(pe,Te){return pe=pe>>>0,Te||ot(pe,1,this.length),this[pe]&128?(255-this[pe]+1)*-1:this[pe]},M.prototype.readInt16LE=function(pe,Te){pe=pe>>>0,Te||ot(pe,2,this.length);var it=this[pe]|this[pe+1]<<8;return it&32768?it|4294901760:it},M.prototype.readInt16BE=function(pe,Te){pe=pe>>>0,Te||ot(pe,2,this.length);var it=this[pe+1]|this[pe]<<8;return it&32768?it|4294901760:it},M.prototype.readInt32LE=function(pe,Te){return pe=pe>>>0,Te||ot(pe,4,this.length),this[pe]|this[pe+1]<<8|this[pe+2]<<16|this[pe+3]<<24},M.prototype.readInt32BE=function(pe,Te){return pe=pe>>>0,Te||ot(pe,4,this.length),this[pe]<<24|this[pe+1]<<16|this[pe+2]<<8|this[pe+3]},M.prototype.readBigInt64LE=Ze(function(pe){pe=pe>>>0,Xe(pe,"offset");var Te=this[pe],it=this[pe+7];(Te===void 0||it===void 0)&&dt(pe,this.length-8);var Dt=this[pe+4]+this[pe+5]*Math.pow(2,8)+this[pe+6]*Math.pow(2,16)+(it<<24);return(BigInt(Dt)<<BigInt(32))+BigInt(Te+this[++pe]*Math.pow(2,8)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,24))}),M.prototype.readBigInt64BE=Ze(function(pe){pe=pe>>>0,Xe(pe,"offset");var Te=this[pe],it=this[pe+7];(Te===void 0||it===void 0)&&dt(pe,this.length-8);var Dt=(Te<<24)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,8)+this[++pe];return(BigInt(Dt)<<BigInt(32))+BigInt(this[++pe]*Math.pow(2,24)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,8)+it)}),M.prototype.readFloatLE=function(pe,Te){return pe=pe>>>0,Te||ot(pe,4,this.length),_.read(this,pe,!0,23,4)},M.prototype.readFloatBE=function(pe,Te){return pe=pe>>>0,Te||ot(pe,4,this.length),_.read(this,pe,!1,23,4)},M.prototype.readDoubleLE=function(pe,Te){return pe=pe>>>0,Te||ot(pe,8,this.length),_.read(this,pe,!0,52,8)},M.prototype.readDoubleBE=function(pe,Te){return pe=pe>>>0,Te||ot(pe,8,this.length),_.read(this,pe,!1,52,8)};function lt(Se,pe,Te,it,Dt,Wt){if(!M.isBuffer(Se))throw new TypeError('"buffer" argument must be a Buffer instance');if(pe>Dt||pe<Wt)throw new RangeError('"value" argument is out of bounds');if(Te+it>Se.length)throw new RangeError("Index out of range")}M.prototype.writeUintLE=M.prototype.writeUIntLE=function(pe,Te,it,Dt){if(pe=+pe,Te=Te>>>0,it=it>>>0,!Dt){var Wt=Math.pow(2,8*it)-1;lt(this,pe,Te,it,Wt,0)}var er=1,qr=0;for(this[Te]=pe&255;++qr<it&&(er*=256);)this[Te+qr]=pe/er&255;return Te+it},M.prototype.writeUintBE=M.prototype.writeUIntBE=function(pe,Te,it,Dt){if(pe=+pe,Te=Te>>>0,it=it>>>0,!Dt){var Wt=Math.pow(2,8*it)-1;lt(this,pe,Te,it,Wt,0)}var er=it-1,qr=1;for(this[Te+er]=pe&255;--er>=0&&(qr*=256);)this[Te+er]=pe/qr&255;return Te+it},M.prototype.writeUint8=M.prototype.writeUInt8=function(pe,Te,it){return pe=+pe,Te=Te>>>0,it||lt(this,pe,Te,1,255,0),this[Te]=pe&255,Te+1},M.prototype.writeUint16LE=M.prototype.writeUInt16LE=function(pe,Te,it){return pe=+pe,Te=Te>>>0,it||lt(this,pe,Te,2,65535,0),this[Te]=pe&255,this[Te+1]=pe>>>8,Te+2},M.prototype.writeUint16BE=M.prototype.writeUInt16BE=function(pe,Te,it){return pe=+pe,Te=Te>>>0,it||lt(this,pe,Te,2,65535,0),this[Te]=pe>>>8,this[Te+1]=pe&255,Te+2},M.prototype.writeUint32LE=M.prototype.writeUInt32LE=function(pe,Te,it){return pe=+pe,Te=Te>>>0,it||lt(this,pe,Te,4,4294967295,0),this[Te+3]=pe>>>24,this[Te+2]=pe>>>16,this[Te+1]=pe>>>8,this[Te]=pe&255,Te+4},M.prototype.writeUint32BE=M.prototype.writeUInt32BE=function(pe,Te,it){return pe=+pe,Te=Te>>>0,it||lt(this,pe,Te,4,4294967295,0),this[Te]=pe>>>24,this[Te+1]=pe>>>16,this[Te+2]=pe>>>8,this[Te+3]=pe&255,Te+4};function ht(Se,pe,Te,it,Dt){at(pe,it,Dt,Se,Te,7);var Wt=Number(pe&BigInt(4294967295));Se[Te++]=Wt,Wt=Wt>>8,Se[Te++]=Wt,Wt=Wt>>8,Se[Te++]=Wt,Wt=Wt>>8,Se[Te++]=Wt;var er=Number(pe>>BigInt(32)&BigInt(4294967295));return Se[Te++]=er,er=er>>8,Se[Te++]=er,er=er>>8,Se[Te++]=er,er=er>>8,Se[Te++]=er,Te}function xt(Se,pe,Te,it,Dt){at(pe,it,Dt,Se,Te,7);var Wt=Number(pe&BigInt(4294967295));Se[Te+7]=Wt,Wt=Wt>>8,Se[Te+6]=Wt,Wt=Wt>>8,Se[Te+5]=Wt,Wt=Wt>>8,Se[Te+4]=Wt;var er=Number(pe>>BigInt(32)&BigInt(4294967295));return Se[Te+3]=er,er=er>>8,Se[Te+2]=er,er=er>>8,Se[Te+1]=er,er=er>>8,Se[Te]=er,Te+8}M.prototype.writeBigUInt64LE=Ze(function(pe){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ht(this,pe,Te,BigInt(0),BigInt("0xffffffffffffffff"))}),M.prototype.writeBigUInt64BE=Ze(function(pe){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return xt(this,pe,Te,BigInt(0),BigInt("0xffffffffffffffff"))}),M.prototype.writeIntLE=function(pe,Te,it,Dt){if(pe=+pe,Te=Te>>>0,!Dt){var Wt=Math.pow(2,8*it-1);lt(this,pe,Te,it,Wt-1,-Wt)}var er=0,qr=1,Vr=0;for(this[Te]=pe&255;++er<it&&(qr*=256);)pe<0&&Vr===0&&this[Te+er-1]!==0&&(Vr=1),this[Te+er]=(pe/qr>>0)-Vr&255;return Te+it},M.prototype.writeIntBE=function(pe,Te,it,Dt){if(pe=+pe,Te=Te>>>0,!Dt){var Wt=Math.pow(2,8*it-1);lt(this,pe,Te,it,Wt-1,-Wt)}var er=it-1,qr=1,Vr=0;for(this[Te+er]=pe&255;--er>=0&&(qr*=256);)pe<0&&Vr===0&&this[Te+er+1]!==0&&(Vr=1),this[Te+er]=(pe/qr>>0)-Vr&255;return Te+it},M.prototype.writeInt8=function(pe,Te,it){return pe=+pe,Te=Te>>>0,it||lt(this,pe,Te,1,127,-128),pe<0&&(pe=255+pe+1),this[Te]=pe&255,Te+1},M.prototype.writeInt16LE=function(pe,Te,it){return pe=+pe,Te=Te>>>0,it||lt(this,pe,Te,2,32767,-32768),this[Te]=pe&255,this[Te+1]=pe>>>8,Te+2},M.prototype.writeInt16BE=function(pe,Te,it){return pe=+pe,Te=Te>>>0,it||lt(this,pe,Te,2,32767,-32768),this[Te]=pe>>>8,this[Te+1]=pe&255,Te+2},M.prototype.writeInt32LE=function(pe,Te,it){return pe=+pe,Te=Te>>>0,it||lt(this,pe,Te,4,2147483647,-2147483648),this[Te]=pe&255,this[Te+1]=pe>>>8,this[Te+2]=pe>>>16,this[Te+3]=pe>>>24,Te+4},M.prototype.writeInt32BE=function(pe,Te,it){return pe=+pe,Te=Te>>>0,it||lt(this,pe,Te,4,2147483647,-2147483648),pe<0&&(pe=4294967295+pe+1),this[Te]=pe>>>24,this[Te+1]=pe>>>16,this[Te+2]=pe>>>8,this[Te+3]=pe&255,Te+4},M.prototype.writeBigInt64LE=Ze(function(pe){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ht(this,pe,Te,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),M.prototype.writeBigInt64BE=Ze(function(pe){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return xt(this,pe,Te,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Vt(Se,pe,Te,it,Dt,Wt){if(Te+it>Se.length)throw new RangeError("Index out of range");if(Te<0)throw new RangeError("Index out of range")}function Ht(Se,pe,Te,it,Dt){return pe=+pe,Te=Te>>>0,Dt||Vt(Se,pe,Te,4,34028234663852886e22,-34028234663852886e22),_.write(Se,pe,Te,it,23,4),Te+4}M.prototype.writeFloatLE=function(pe,Te,it){return Ht(this,pe,Te,!0,it)},M.prototype.writeFloatBE=function(pe,Te,it){return Ht(this,pe,Te,!1,it)};function Me(Se,pe,Te,it,Dt){return pe=+pe,Te=Te>>>0,Dt||Vt(Se,pe,Te,8,17976931348623157e292,-17976931348623157e292),_.write(Se,pe,Te,it,52,8),Te+8}M.prototype.writeDoubleLE=function(pe,Te,it){return Me(this,pe,Te,!0,it)},M.prototype.writeDoubleBE=function(pe,Te,it){return Me(this,pe,Te,!1,it)},M.prototype.copy=function(pe,Te,it,Dt){if(!M.isBuffer(pe))throw new TypeError("argument should be a Buffer");if(it||(it=0),!Dt&&Dt!==0&&(Dt=this.length),Te>=pe.length&&(Te=pe.length),Te||(Te=0),Dt>0&&Dt<it&&(Dt=it),Dt===it||pe.length===0||this.length===0)return 0;if(Te<0)throw new RangeError("targetStart out of bounds");if(it<0||it>=this.length)throw new RangeError("Index out of range");if(Dt<0)throw new RangeError("sourceEnd out of bounds");Dt>this.length&&(Dt=this.length),pe.length-Te<Dt-it&&(Dt=pe.length-Te+it);var Wt=Dt-it;return this===pe&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Te,it,Dt):Uint8Array.prototype.set.call(pe,this.subarray(it,Dt),Te),Wt},M.prototype.fill=function(pe,Te,it,Dt){if(typeof pe=="string"){if(typeof Te=="string"?(Dt=Te,Te=0,it=this.length):typeof it=="string"&&(Dt=it,it=this.length),Dt!==void 0&&typeof Dt!="string")throw new TypeError("encoding must be a string");if(typeof Dt=="string"&&!M.isEncoding(Dt))throw new TypeError("Unknown encoding: "+Dt);if(pe.length===1){var Wt=pe.charCodeAt(0);(Dt==="utf8"&&Wt<128||Dt==="latin1")&&(pe=Wt)}}else typeof pe=="number"?pe=pe&255:typeof pe=="boolean"&&(pe=Number(pe));if(Te<0||this.length<Te||this.length<it)throw new RangeError("Out of range index");if(it<=Te)return this;Te=Te>>>0,it=it===void 0?this.length:it>>>0,pe||(pe=0);var er;if(typeof pe=="number")for(er=Te;er<it;++er)this[er]=pe;else{var qr=M.isBuffer(pe)?pe:M.from(pe,Dt),Vr=qr.length;if(Vr===0)throw new TypeError('The value "'+pe+'" is invalid for argument "value"');for(er=0;er<it-Te;++er)this[er+Te]=qr[er%Vr]}return this};var Ke={};function We(Se,pe,Te){Ke[Se]=function(it){function Dt(){var Wt;return l(this,Dt),Wt=v(this,Dt),Object.defineProperty(Wt,"message",{value:pe.apply(Wt,arguments),writable:!0,configurable:!0}),Wt.name="".concat(Wt.name," [").concat(Se,"]"),Wt.stack,delete Wt.name,Wt}return w(Dt,it),f(Dt,[{key:"code",get:function(){return Se},set:function(er){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:er,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(Se,"]: ").concat(this.message)}}])}(Te)}We("ERR_BUFFER_OUT_OF_BOUNDS",function(Se){return Se?"".concat(Se," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),We("ERR_INVALID_ARG_TYPE",function(Se,pe){return'The "'.concat(Se,'" argument must be of type number. Received type ').concat(T(pe))},TypeError),We("ERR_OUT_OF_RANGE",function(Se,pe,Te){var it='The value of "'.concat(Se,'" is out of range.'),Dt=Te;return Number.isInteger(Te)&&Math.abs(Te)>Math.pow(2,32)?Dt=et(String(Te)):typeof Te=="bigint"&&(Dt=String(Te),(Te>Math.pow(BigInt(2),BigInt(32))||Te<-Math.pow(BigInt(2),BigInt(32)))&&(Dt=et(Dt)),Dt+="n"),it+=" It must be ".concat(pe,". Received ").concat(Dt),it},RangeError);function et(Se){for(var pe="",Te=Se.length,it=Se[0]==="-"?1:0;Te>=it+4;Te-=3)pe="_".concat(Se.slice(Te-3,Te)).concat(pe);return"".concat(Se.slice(0,Te)).concat(pe)}function vt(Se,pe,Te){Xe(pe,"offset"),(Se[pe]===void 0||Se[pe+Te]===void 0)&&dt(pe,Se.length-(Te+1))}function at(Se,pe,Te,it,Dt,Wt){if(Se>Te||Se<pe){var er=typeof pe=="bigint"?"n":"",qr;throw Wt>3?pe===0||pe===BigInt(0)?qr=">= 0".concat(er," and < 2").concat(er," ** ").concat((Wt+1)*8).concat(er):qr=">= -(2".concat(er," ** ").concat((Wt+1)*8-1).concat(er,") and < 2 ** ")+"".concat((Wt+1)*8-1).concat(er):qr=">= ".concat(pe).concat(er," and <= ").concat(Te).concat(er),new Ke.ERR_OUT_OF_RANGE("value",qr,Se)}vt(it,Dt,Wt)}function Xe(Se,pe){if(typeof Se!="number")throw new Ke.ERR_INVALID_ARG_TYPE(pe,"number",Se)}function dt(Se,pe,Te){throw Math.floor(Se)!==Se?(Xe(Se,Te),new Ke.ERR_OUT_OF_RANGE(Te||"offset","an integer",Se)):pe<0?new Ke.ERR_BUFFER_OUT_OF_BOUNDS:new Ke.ERR_OUT_OF_RANGE(Te||"offset",">= ".concat(Te?1:0," and <= ").concat(pe),Se)}var _t=/[^+/0-9A-Za-z-_]/g;function $t(Se){if(Se=Se.split("=")[0],Se=Se.trim().replace(_t,""),Se.length<2)return"";for(;Se.length%4!==0;)Se=Se+"=";return Se}function Ut(Se,pe){pe=pe||1/0;for(var Te,it=Se.length,Dt=null,Wt=[],er=0;er<it;++er){if(Te=Se.charCodeAt(er),Te>55295&&Te<57344){if(!Dt){if(Te>56319){(pe-=3)>-1&&Wt.push(239,191,189);continue}else if(er+1===it){(pe-=3)>-1&&Wt.push(239,191,189);continue}Dt=Te;continue}if(Te<56320){(pe-=3)>-1&&Wt.push(239,191,189),Dt=Te;continue}Te=(Dt-55296<<10|Te-56320)+65536}else Dt&&(pe-=3)>-1&&Wt.push(239,191,189);if(Dt=null,Te<128){if((pe-=1)<0)break;Wt.push(Te)}else if(Te<2048){if((pe-=2)<0)break;Wt.push(Te>>6|192,Te&63|128)}else if(Te<65536){if((pe-=3)<0)break;Wt.push(Te>>12|224,Te>>6&63|128,Te&63|128)}else if(Te<1114112){if((pe-=4)<0)break;Wt.push(Te>>18|240,Te>>12&63|128,Te>>6&63|128,Te&63|128)}else throw new Error("Invalid code point")}return Wt}function fr(Se){for(var pe=[],Te=0;Te<Se.length;++Te)pe.push(Se.charCodeAt(Te)&255);return pe}function ar(Se,pe){for(var Te,it,Dt,Wt=[],er=0;er<Se.length&&!((pe-=2)<0);++er)Te=Se.charCodeAt(er),it=Te>>8,Dt=Te%256,Wt.push(Dt),Wt.push(it);return Wt}function cr(Se){return k.toByteArray($t(Se))}function It(Se,pe,Te,it){var Dt;for(Dt=0;Dt<it&&!(Dt+Te>=pe.length||Dt>=Se.length);++Dt)pe[Dt+Te]=Se[Dt];return Dt}function gt(Se,pe){return Se instanceof pe||Se!=null&&Se.constructor!=null&&Se.constructor.name!=null&&Se.constructor.name===pe.name}function kt(Se){return Se!==Se}var Je=function(){for(var Se="0123456789abcdef",pe=new Array(256),Te=0;Te<16;++Te)for(var it=Te*16,Dt=0;Dt<16;++Dt)pe[it+Dt]=Se[Te]+Se[Dt];return pe}();function Ze(Se){return typeof BigInt=="undefined"?At:Se}function At(){throw new Error("BigInt not supported")}},9216:function(n){"use strict";n.exports=l,n.exports.isMobile=l,n.exports.default=l;var a=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,o=/CrOS/,s=/android|ipad|playbook|silk/i;function l(u){u||(u={});var f=u.ua;if(!f&&typeof navigator!="undefined"&&(f=navigator.userAgent),f&&f.headers&&typeof f.headers["user-agent"]=="string"&&(f=f.headers["user-agent"]),typeof f!="string")return!1;var c=a.test(f)&&!o.test(f)||!!u.tablet&&s.test(f);return!c&&u.tablet&&u.featureDetect&&navigator&&navigator.maxTouchPoints>1&&f.indexOf("Macintosh")!==-1&&f.indexOf("Safari")!==-1&&(c=!0),c}},6296:function(n,a,o){"use strict";n.exports=h;var s=o(7261),l=o(9977),u=o(4192);function f(v,d){this._controllerNames=Object.keys(v),this._controllerList=this._controllerNames.map(function(x){return v[x]}),this._mode=d,this._active=v[d],this._active||(this._mode="turntable",this._active=v.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var c=f.prototype;c.flush=function(v){for(var d=this._controllerList,x=0;x<d.length;++x)d[x].flush(v)},c.idle=function(v){for(var d=this._controllerList,x=0;x<d.length;++x)d[x].idle(v)},c.lookAt=function(v,d,x,b){for(var p=this._controllerList,w=0;w<p.length;++w)p[w].lookAt(v,d,x,b)},c.rotate=function(v,d,x,b){for(var p=this._controllerList,w=0;w<p.length;++w)p[w].rotate(v,d,x,b)},c.pan=function(v,d,x,b){for(var p=this._controllerList,w=0;w<p.length;++w)p[w].pan(v,d,x,b)},c.translate=function(v,d,x,b){for(var p=this._controllerList,w=0;w<p.length;++w)p[w].translate(v,d,x,b)},c.setMatrix=function(v,d){for(var x=this._controllerList,b=0;b<x.length;++b)x[b].setMatrix(v,d)},c.setDistanceLimits=function(v,d){for(var x=this._controllerList,b=0;b<x.length;++b)x[b].setDistanceLimits(v,d)},c.setDistance=function(v,d){for(var x=this._controllerList,b=0;b<x.length;++b)x[b].setDistance(v,d)},c.recalcMatrix=function(v){this._active.recalcMatrix(v)},c.getDistance=function(v){return this._active.getDistance(v)},c.getDistanceLimits=function(v){return this._active.getDistanceLimits(v)},c.lastT=function(){return this._active.lastT()},c.setMode=function(v){if(v!==this._mode){var d=this._controllerNames.indexOf(v);if(!(d<0)){var x=this._active,b=this._controllerList[d],p=Math.max(x.lastT(),b.lastT());x.recalcMatrix(p),b.setMatrix(p,x.computedMatrix),this._active=b,this._mode=v,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},c.getMode=function(){return this._mode};function h(v){v=v||{};var d=v.eye||[0,0,1],x=v.center||[0,0,0],b=v.up||[0,1,0],p=v.distanceLimits||[0,1/0],w=v.mode||"turntable",A=s(),T=l(),k=u();return A.setDistanceLimits(p[0],p[1]),A.lookAt(0,d,x,b),T.setDistanceLimits(p[0],p[1]),T.lookAt(0,d,x,b),k.setDistanceLimits(p[0],p[1]),k.lookAt(0,d,x,b),new f({turntable:A,orbit:T,matrix:k},w)}},7169:function(n,a,o){"use strict";var s=typeof WeakMap=="undefined"?o(1538):WeakMap,l=o(2762),u=o(8116),f=new s;function c(h){var v=f.get(h),d=v&&(v._triangleBuffer.handle||v._triangleBuffer.buffer);if(!d||!h.isBuffer(d)){var x=l(h,new Float32Array([-1,-1,-1,4,4,-1]));v=u(h,[{buffer:x,type:h.FLOAT,size:2}]),v._triangleBuffer=x,f.set(h,v)}v.bind(),h.drawArrays(h.TRIANGLES,0,3),v.unbind()}n.exports=c},1085:function(n,a,o){var s=o(1371);n.exports=l;function l(u,f,c){f=typeof f=="number"?f:1,c=c||": ";var h=u.split(/\r?\n/),v=String(h.length+f-1).length;return h.map(function(d,x){var b=x+f,p=String(b).length,w=s(b,v-p);return w+c+d}).join(`
`)}},3952:function(n,a,o){"use strict";n.exports=u;var s=o(3250);function l(f,c){for(var h=new Array(c+1),v=0;v<f.length;++v)h[v]=f[v];for(var v=0;v<=f.length;++v){for(var d=f.length;d<=c;++d){for(var x=new Array(c),b=0;b<c;++b)x[b]=Math.pow(d+1-v,b);h[d]=x}var p=s.apply(void 0,h);if(p)return!0}return!1}function u(f){var c=f.length;if(c===0)return[];if(c===1)return[0];for(var h=f[0].length,v=[f[0]],d=[0],x=1;x<c;++x){if(v.push(f[x]),!l(v,h)){v.pop();continue}if(d.push(x),d.length===h+1)return d}return d}},5995:function(n,a,o){"use strict";n.exports=u;var s=o(7642),l=o(6037);function u(f,c){return s(c).filter(function(h){for(var v=new Array(h.length),d=0;d<h.length;++d)v[d]=c[h[d]];return l(v)*f<1})}},3502:function(n,a,o){n.exports=u;var s=o(5995),l=o(9127);function u(f,c){return l(s(f,c))}},6468:function(n){n.exports=function(o){return atob(o)}},2642:function(n,a,o){"use strict";n.exports=u;var s=o(727);function l(f){for(var c=0,h=0;h<f.length;++h)c+=f[h];return c}function u(f,c){for(var h=c.length,v=new Array(h+1),d=0;d<h;++d){for(var x=new Array(h+1),b=0;b<=h;++b)x[b]=f[b][d];v[d]=x}v[h]=new Array(h+1);for(var d=0;d<=h;++d)v[h][d]=1;for(var p=new Array(h+1),d=0;d<h;++d)p[d]=c[d];p[h]=1;var w=s(v,p),A=l(w[h+1]);A===0&&(A=1);for(var T=new Array(h+1),d=0;d<=h;++d)T[d]=l(w[d])/A;return T}},7507:function(n,a){"use strict";a.byteLength=v,a.toByteArray=x,a.fromByteArray=w;for(var o=[],s=[],l=typeof Uint8Array!="undefined"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,c=u.length;f<c;++f)o[f]=u[f],s[u.charCodeAt(f)]=f;s[45]=62,s[95]=63;function h(A){var T=A.length;if(T%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=A.indexOf("=");k===-1&&(k=T);var _=k===T?0:4-k%4;return[k,_]}function v(A){var T=h(A),k=T[0],_=T[1];return(k+_)*3/4-_}function d(A,T,k){return(T+k)*3/4-k}function x(A){var T,k=h(A),_=k[0],E=k[1],S=new l(d(A,_,E)),g=0,C=E>0?_-4:_,M;for(M=0;M<C;M+=4)T=s[A.charCodeAt(M)]<<18|s[A.charCodeAt(M+1)]<<12|s[A.charCodeAt(M+2)]<<6|s[A.charCodeAt(M+3)],S[g++]=T>>16&255,S[g++]=T>>8&255,S[g++]=T&255;return E===2&&(T=s[A.charCodeAt(M)]<<2|s[A.charCodeAt(M+1)]>>4,S[g++]=T&255),E===1&&(T=s[A.charCodeAt(M)]<<10|s[A.charCodeAt(M+1)]<<4|s[A.charCodeAt(M+2)]>>2,S[g++]=T>>8&255,S[g++]=T&255),S}function b(A){return o[A>>18&63]+o[A>>12&63]+o[A>>6&63]+o[A&63]}function p(A,T,k){for(var _,E=[],S=T;S<k;S+=3)_=(A[S]<<16&16711680)+(A[S+1]<<8&65280)+(A[S+2]&255),E.push(b(_));return E.join("")}function w(A){for(var T,k=A.length,_=k%3,E=[],S=16383,g=0,C=k-_;g<C;g+=S)E.push(p(A,g,g+S>C?C:g+S));return _===1?(T=A[k-1],E.push(o[T>>2]+o[T<<4&63]+"==")):_===2&&(T=(A[k-2]<<8)+A[k-1],E.push(o[T>>10]+o[T>>4&63]+o[T<<2&63]+"=")),E.join("")}},3865:function(n,a,o){"use strict";var s=o(869);n.exports=l;function l(u,f){return s(u[0].mul(f[1]).add(f[0].mul(u[1])),u[1].mul(f[1]))}},1318:function(n){"use strict";n.exports=a;function a(o,s){return o[0].mul(s[1]).cmp(s[0].mul(o[1]))}},8697:function(n,a,o){"use strict";var s=o(869);n.exports=l;function l(u,f){return s(u[0].mul(f[1]),u[1].mul(f[0]))}},7842:function(n,a,o){"use strict";var s=o(6330),l=o(1533),u=o(2651),f=o(4387),c=o(869),h=o(8697);n.exports=v;function v(d,x){if(s(d))return x?h(d,v(x)):[d[0].clone(),d[1].clone()];var b=0,p,w;if(l(d))p=d.clone();else if(typeof d=="string")p=f(d);else{if(d===0)return[u(0),u(1)];if(d===Math.floor(d))p=u(d);else{for(;d!==Math.floor(d);)d=d*Math.pow(2,256),b-=256;p=u(d)}}if(s(x))p.mul(x[1]),w=x[0].clone();else if(l(x))w=x.clone();else if(typeof x=="string")w=f(x);else if(!x)w=u(1);else if(x===Math.floor(x))w=u(x);else{for(;x!==Math.floor(x);)x=x*Math.pow(2,256),b+=256;w=u(x)}return b>0?p=p.ushln(b):b<0&&(w=w.ushln(-b)),c(p,w)}},6330:function(n,a,o){"use strict";var s=o(1533);n.exports=l;function l(u){return Array.isArray(u)&&u.length===2&&s(u[0])&&s(u[1])}},5716:function(n,a,o){"use strict";var s=o(6859);n.exports=l;function l(u){return u.cmp(new s(0))}},1369:function(n,a,o){"use strict";var s=o(5716);n.exports=l;function l(u){var f=u.length,c=u.words,h=0;if(f===1)h=c[0];else if(f===2)h=c[0]+c[1]*67108864;else for(var v=0;v<f;v++){var d=c[v];h+=d*Math.pow(67108864,v)}return s(u)*h}},4025:function(n,a,o){"use strict";var s=o(2361),l=o(8828).countTrailingZeros;n.exports=u;function u(f){var c=l(s.lo(f));if(c<32)return c;var h=l(s.hi(f));return h>20?52:h+32}},1533:function(n,a,o){"use strict";var s=o(6859);n.exports=l;function l(u){return u&&typeof u=="object"&&!!u.words}},2651:function(n,a,o){"use strict";var s=o(6859),l=o(2361);n.exports=u;function u(f){var c=l.exponent(f);return c<52?new s(f):new s(f*Math.pow(2,52-c)).ushln(c-52)}},869:function(n,a,o){"use strict";var s=o(2651),l=o(5716);n.exports=u;function u(f,c){var h=l(f),v=l(c);if(h===0)return[s(0),s(1)];if(v===0)return[s(0),s(0)];v<0&&(f=f.neg(),c=c.neg());var d=f.gcd(c);return d.cmpn(1)?[f.div(d),c.div(d)]:[f,c]}},4387:function(n,a,o){"use strict";var s=o(6859);n.exports=l;function l(u){return new s(u)}},6504:function(n,a,o){"use strict";var s=o(869);n.exports=l;function l(u,f){return s(u[0].mul(f[0]),u[1].mul(f[1]))}},7721:function(n,a,o){"use strict";var s=o(5716);n.exports=l;function l(u){return s(u[0])*s(u[1])}},5572:function(n,a,o){"use strict";var s=o(869);n.exports=l;function l(u,f){return s(u[0].mul(f[1]).sub(u[1].mul(f[0])),u[1].mul(f[1]))}},946:function(n,a,o){"use strict";var s=o(1369),l=o(4025);n.exports=u;function u(f){var c=f[0],h=f[1];if(c.cmpn(0)===0)return 0;var v=c.abs().divmod(h.abs()),d=v.div,x=s(d),b=v.mod,p=c.negative!==h.negative?-1:1;if(b.cmpn(0)===0)return p*x;if(x){var w=l(x)+4,A=s(b.ushln(w).divRound(h));return p*(x+A*Math.pow(2,-w))}else{var T=h.bitLength()-b.bitLength()+53,A=s(b.ushln(T).divRound(h));return T<1023?p*A*Math.pow(2,-T):(A*=Math.pow(2,-1023),p*A*Math.pow(2,1023-T))}}},2478:function(n){"use strict";function a(c,h,v,d,x){for(var b=x+1;d<=x;){var p=d+x>>>1,w=c[p],A=v!==void 0?v(w,h):w-h;A>=0?(b=p,x=p-1):d=p+1}return b}function o(c,h,v,d,x){for(var b=x+1;d<=x;){var p=d+x>>>1,w=c[p],A=v!==void 0?v(w,h):w-h;A>0?(b=p,x=p-1):d=p+1}return b}function s(c,h,v,d,x){for(var b=d-1;d<=x;){var p=d+x>>>1,w=c[p],A=v!==void 0?v(w,h):w-h;A<0?(b=p,d=p+1):x=p-1}return b}function l(c,h,v,d,x){for(var b=d-1;d<=x;){var p=d+x>>>1,w=c[p],A=v!==void 0?v(w,h):w-h;A<=0?(b=p,d=p+1):x=p-1}return b}function u(c,h,v,d,x){for(;d<=x;){var b=d+x>>>1,p=c[b],w=v!==void 0?v(p,h):p-h;if(w===0)return b;w<=0?d=b+1:x=b-1}return-1}function f(c,h,v,d,x,b){return typeof v=="function"?b(c,h,v,d===void 0?0:d|0,x===void 0?c.length-1:x|0):b(c,h,void 0,v===void 0?0:v|0,d===void 0?c.length-1:d|0)}n.exports={ge:function(c,h,v,d,x){return f(c,h,v,d,x,a)},gt:function(c,h,v,d,x){return f(c,h,v,d,x,o)},lt:function(c,h,v,d,x){return f(c,h,v,d,x,s)},le:function(c,h,v,d,x){return f(c,h,v,d,x,l)},eq:function(c,h,v,d,x){return f(c,h,v,d,x,u)}}},8828:function(n,a){"use strict";"use restrict";var o=32;a.INT_BITS=o,a.INT_MAX=2147483647,a.INT_MIN=-1<<o-1,a.sign=function(u){return(u>0)-(u<0)},a.abs=function(u){var f=u>>o-1;return(u^f)-f},a.min=function(u,f){return f^(u^f)&-(u<f)},a.max=function(u,f){return u^(u^f)&-(u<f)},a.isPow2=function(u){return!(u&u-1)&&!!u},a.log2=function(u){var f,c;return f=(u>65535)<<4,u>>>=f,c=(u>255)<<3,u>>>=c,f|=c,c=(u>15)<<2,u>>>=c,f|=c,c=(u>3)<<1,u>>>=c,f|=c,f|u>>1},a.log10=function(u){return u>=1e9?9:u>=1e8?8:u>=1e7?7:u>=1e6?6:u>=1e5?5:u>=1e4?4:u>=1e3?3:u>=100?2:u>=10?1:0},a.popCount=function(u){return u=u-(u>>>1&1431655765),u=(u&858993459)+(u>>>2&858993459),(u+(u>>>4)&252645135)*16843009>>>24};function s(u){var f=32;return u&=-u,u&&f--,u&65535&&(f-=16),u&16711935&&(f-=8),u&252645135&&(f-=4),u&858993459&&(f-=2),u&1431655765&&(f-=1),f}a.countTrailingZeros=s,a.nextPow2=function(u){return u+=u===0,--u,u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,u|=u>>>16,u+1},a.prevPow2=function(u){return u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,u|=u>>>16,u-(u>>>1)},a.parity=function(u){return u^=u>>>16,u^=u>>>8,u^=u>>>4,u&=15,27030>>>u&1};var l=new Array(256);(function(u){for(var f=0;f<256;++f){var c=f,h=f,v=7;for(c>>>=1;c;c>>>=1)h<<=1,h|=c&1,--v;u[f]=h<<v&255}})(l),a.reverse=function(u){return l[u&255]<<24|l[u>>>8&255]<<16|l[u>>>16&255]<<8|l[u>>>24&255]},a.interleave2=function(u,f){return u&=65535,u=(u|u<<8)&16711935,u=(u|u<<4)&252645135,u=(u|u<<2)&858993459,u=(u|u<<1)&1431655765,f&=65535,f=(f|f<<8)&16711935,f=(f|f<<4)&252645135,f=(f|f<<2)&858993459,f=(f|f<<1)&1431655765,u|f<<1},a.deinterleave2=function(u,f){return u=u>>>f&1431655765,u=(u|u>>>1)&858993459,u=(u|u>>>2)&252645135,u=(u|u>>>4)&16711935,u=(u|u>>>16)&65535,u<<16>>16},a.interleave3=function(u,f,c){return u&=1023,u=(u|u<<16)&4278190335,u=(u|u<<8)&251719695,u=(u|u<<4)&3272356035,u=(u|u<<2)&1227133513,f&=1023,f=(f|f<<16)&4278190335,f=(f|f<<8)&251719695,f=(f|f<<4)&3272356035,f=(f|f<<2)&1227133513,u|=f<<1,c&=1023,c=(c|c<<16)&4278190335,c=(c|c<<8)&251719695,c=(c|c<<4)&3272356035,c=(c|c<<2)&1227133513,u|c<<2},a.deinterleave3=function(u,f){return u=u>>>f&1227133513,u=(u|u>>>2)&3272356035,u=(u|u>>>4)&251719695,u=(u|u>>>8)&4278190335,u=(u|u>>>16)&1023,u<<22>>22},a.nextCombination=function(u){var f=u|u-1;return f+1|(~f&-~f)-1>>>s(u)+1}},6859:function(n,a,o){n=o.nmd(n),function(s,l){"use strict";function u(B,F){if(!B)throw new Error(F||"Assertion failed")}function f(B,F){B.super_=F;var N=function(){};N.prototype=F.prototype,B.prototype=new N,B.prototype.constructor=B}function c(B,F,N){if(c.isBN(B))return B;this.negative=0,this.words=null,this.length=0,this.red=null,B!==null&&((F==="le"||F==="be")&&(N=F,F=10),this._init(B||0,F||10,N||"be"))}typeof s=="object"?s.exports=c:l.BN=c,c.BN=c,c.wordSize=26;var h;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?h=window.Buffer:h=o(7790).Buffer}catch(B){}c.isBN=function(F){return F instanceof c?!0:F!==null&&typeof F=="object"&&F.constructor.wordSize===c.wordSize&&Array.isArray(F.words)},c.max=function(F,N){return F.cmp(N)>0?F:N},c.min=function(F,N){return F.cmp(N)<0?F:N},c.prototype._init=function(F,N,X){if(typeof F=="number")return this._initNumber(F,N,X);if(typeof F=="object")return this._initArray(F,N,X);N==="hex"&&(N=16),u(N===(N|0)&&N>=2&&N<=36),F=F.toString().replace(/\s+/g,"");var K=0;F[0]==="-"&&(K++,this.negative=1),K<F.length&&(N===16?this._parseHex(F,K,X):(this._parseBase(F,N,K),X==="le"&&this._initArray(this.toArray(),N,X)))},c.prototype._initNumber=function(F,N,X){F<0&&(this.negative=1,F=-F),F<67108864?(this.words=[F&67108863],this.length=1):F<4503599627370496?(this.words=[F&67108863,F/67108864&67108863],this.length=2):(u(F<9007199254740992),this.words=[F&67108863,F/67108864&67108863,1],this.length=3),X==="le"&&this._initArray(this.toArray(),N,X)},c.prototype._initArray=function(F,N,X){if(u(typeof F.length=="number"),F.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(F.length/3),this.words=new Array(this.length);for(var K=0;K<this.length;K++)this.words[K]=0;var ne,fe,ue=0;if(X==="be")for(K=F.length-1,ne=0;K>=0;K-=3)fe=F[K]|F[K-1]<<8|F[K-2]<<16,this.words[ne]|=fe<<ue&67108863,this.words[ne+1]=fe>>>26-ue&67108863,ue+=24,ue>=26&&(ue-=26,ne++);else if(X==="le")for(K=0,ne=0;K<F.length;K+=3)fe=F[K]|F[K+1]<<8|F[K+2]<<16,this.words[ne]|=fe<<ue&67108863,this.words[ne+1]=fe>>>26-ue&67108863,ue+=24,ue>=26&&(ue-=26,ne++);return this.strip()};function v(B,F){var N=B.charCodeAt(F);return N>=65&&N<=70?N-55:N>=97&&N<=102?N-87:N-48&15}function d(B,F,N){var X=v(B,N);return N-1>=F&&(X|=v(B,N-1)<<4),X}c.prototype._parseHex=function(F,N,X){this.length=Math.ceil((F.length-N)/6),this.words=new Array(this.length);for(var K=0;K<this.length;K++)this.words[K]=0;var ne=0,fe=0,ue;if(X==="be")for(K=F.length-1;K>=N;K-=2)ue=d(F,N,K)<<ne,this.words[fe]|=ue&67108863,ne>=18?(ne-=18,fe+=1,this.words[fe]|=ue>>>26):ne+=8;else{var ee=F.length-N;for(K=ee%2===0?N+1:N;K<F.length;K+=2)ue=d(F,N,K)<<ne,this.words[fe]|=ue&67108863,ne>=18?(ne-=18,fe+=1,this.words[fe]|=ue>>>26):ne+=8}this.strip()};function x(B,F,N,X){for(var K=0,ne=Math.min(B.length,N),fe=F;fe<ne;fe++){var ue=B.charCodeAt(fe)-48;K*=X,ue>=49?K+=ue-49+10:ue>=17?K+=ue-17+10:K+=ue}return K}c.prototype._parseBase=function(F,N,X){this.words=[0],this.length=1;for(var K=0,ne=1;ne<=67108863;ne*=N)K++;K--,ne=ne/N|0;for(var fe=F.length-X,ue=fe%K,ee=Math.min(fe,fe-ue)+X,Z=0,oe=X;oe<ee;oe+=K)Z=x(F,oe,oe+K,N),this.imuln(ne),this.words[0]+Z<67108864?this.words[0]+=Z:this._iaddn(Z);if(ue!==0){var ce=1;for(Z=x(F,oe,F.length,N),oe=0;oe<ue;oe++)ce*=N;this.imuln(ce),this.words[0]+Z<67108864?this.words[0]+=Z:this._iaddn(Z)}this.strip()},c.prototype.copy=function(F){F.words=new Array(this.length);for(var N=0;N<this.length;N++)F.words[N]=this.words[N];F.length=this.length,F.negative=this.negative,F.red=this.red},c.prototype.clone=function(){var F=new c(null);return this.copy(F),F},c.prototype._expand=function(F){for(;this.length<F;)this.words[this.length++]=0;return this},c.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},c.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},c.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],w=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];c.prototype.toString=function(F,N){F=F||10,N=N|0||1;var X;if(F===16||F==="hex"){X="";for(var K=0,ne=0,fe=0;fe<this.length;fe++){var ue=this.words[fe],ee=((ue<<K|ne)&16777215).toString(16);ne=ue>>>24-K&16777215,ne!==0||fe!==this.length-1?X=b[6-ee.length]+ee+X:X=ee+X,K+=2,K>=26&&(K-=26,fe--)}for(ne!==0&&(X=ne.toString(16)+X);X.length%N!==0;)X="0"+X;return this.negative!==0&&(X="-"+X),X}if(F===(F|0)&&F>=2&&F<=36){var Z=p[F],oe=w[F];X="";var ce=this.clone();for(ce.negative=0;!ce.isZero();){var le=ce.modn(oe).toString(F);ce=ce.idivn(oe),ce.isZero()?X=le+X:X=b[Z-le.length]+le+X}for(this.isZero()&&(X="0"+X);X.length%N!==0;)X="0"+X;return this.negative!==0&&(X="-"+X),X}u(!1,"Base should be between 2 and 36")},c.prototype.toNumber=function(){var F=this.words[0];return this.length===2?F+=this.words[1]*67108864:this.length===3&&this.words[2]===1?F+=4503599627370496+this.words[1]*67108864:this.length>2&&u(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-F:F},c.prototype.toJSON=function(){return this.toString(16)},c.prototype.toBuffer=function(F,N){return u(typeof h!="undefined"),this.toArrayLike(h,F,N)},c.prototype.toArray=function(F,N){return this.toArrayLike(Array,F,N)},c.prototype.toArrayLike=function(F,N,X){var K=this.byteLength(),ne=X||Math.max(1,K);u(K<=ne,"byte array longer than desired length"),u(ne>0,"Requested array length <= 0"),this.strip();var fe=N==="le",ue=new F(ne),ee,Z,oe=this.clone();if(fe){for(Z=0;!oe.isZero();Z++)ee=oe.andln(255),oe.iushrn(8),ue[Z]=ee;for(;Z<ne;Z++)ue[Z]=0}else{for(Z=0;Z<ne-K;Z++)ue[Z]=0;for(Z=0;!oe.isZero();Z++)ee=oe.andln(255),oe.iushrn(8),ue[ne-Z-1]=ee}return ue},Math.clz32?c.prototype._countBits=function(F){return 32-Math.clz32(F)}:c.prototype._countBits=function(F){var N=F,X=0;return N>=4096&&(X+=13,N>>>=13),N>=64&&(X+=7,N>>>=7),N>=8&&(X+=4,N>>>=4),N>=2&&(X+=2,N>>>=2),X+N},c.prototype._zeroBits=function(F){if(F===0)return 26;var N=F,X=0;return N&8191||(X+=13,N>>>=13),N&127||(X+=7,N>>>=7),N&15||(X+=4,N>>>=4),N&3||(X+=2,N>>>=2),N&1||X++,X},c.prototype.bitLength=function(){var F=this.words[this.length-1],N=this._countBits(F);return(this.length-1)*26+N};function A(B){for(var F=new Array(B.bitLength()),N=0;N<F.length;N++){var X=N/26|0,K=N%26;F[N]=(B.words[X]&1<<K)>>>K}return F}c.prototype.zeroBits=function(){if(this.isZero())return 0;for(var F=0,N=0;N<this.length;N++){var X=this._zeroBits(this.words[N]);if(F+=X,X!==26)break}return F},c.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},c.prototype.toTwos=function(F){return this.negative!==0?this.abs().inotn(F).iaddn(1):this.clone()},c.prototype.fromTwos=function(F){return this.testn(F-1)?this.notn(F).iaddn(1).ineg():this.clone()},c.prototype.isNeg=function(){return this.negative!==0},c.prototype.neg=function(){return this.clone().ineg()},c.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},c.prototype.iuor=function(F){for(;this.length<F.length;)this.words[this.length++]=0;for(var N=0;N<F.length;N++)this.words[N]=this.words[N]|F.words[N];return this.strip()},c.prototype.ior=function(F){return u((this.negative|F.negative)===0),this.iuor(F)},c.prototype.or=function(F){return this.length>F.length?this.clone().ior(F):F.clone().ior(this)},c.prototype.uor=function(F){return this.length>F.length?this.clone().iuor(F):F.clone().iuor(this)},c.prototype.iuand=function(F){var N;this.length>F.length?N=F:N=this;for(var X=0;X<N.length;X++)this.words[X]=this.words[X]&F.words[X];return this.length=N.length,this.strip()},c.prototype.iand=function(F){return u((this.negative|F.negative)===0),this.iuand(F)},c.prototype.and=function(F){return this.length>F.length?this.clone().iand(F):F.clone().iand(this)},c.prototype.uand=function(F){return this.length>F.length?this.clone().iuand(F):F.clone().iuand(this)},c.prototype.iuxor=function(F){var N,X;this.length>F.length?(N=this,X=F):(N=F,X=this);for(var K=0;K<X.length;K++)this.words[K]=N.words[K]^X.words[K];if(this!==N)for(;K<N.length;K++)this.words[K]=N.words[K];return this.length=N.length,this.strip()},c.prototype.ixor=function(F){return u((this.negative|F.negative)===0),this.iuxor(F)},c.prototype.xor=function(F){return this.length>F.length?this.clone().ixor(F):F.clone().ixor(this)},c.prototype.uxor=function(F){return this.length>F.length?this.clone().iuxor(F):F.clone().iuxor(this)},c.prototype.inotn=function(F){u(typeof F=="number"&&F>=0);var N=Math.ceil(F/26)|0,X=F%26;this._expand(N),X>0&&N--;for(var K=0;K<N;K++)this.words[K]=~this.words[K]&67108863;return X>0&&(this.words[K]=~this.words[K]&67108863>>26-X),this.strip()},c.prototype.notn=function(F){return this.clone().inotn(F)},c.prototype.setn=function(F,N){u(typeof F=="number"&&F>=0);var X=F/26|0,K=F%26;return this._expand(X+1),N?this.words[X]=this.words[X]|1<<K:this.words[X]=this.words[X]&~(1<<K),this.strip()},c.prototype.iadd=function(F){var N;if(this.negative!==0&&F.negative===0)return this.negative=0,N=this.isub(F),this.negative^=1,this._normSign();if(this.negative===0&&F.negative!==0)return F.negative=0,N=this.isub(F),F.negative=1,N._normSign();var X,K;this.length>F.length?(X=this,K=F):(X=F,K=this);for(var ne=0,fe=0;fe<K.length;fe++)N=(X.words[fe]|0)+(K.words[fe]|0)+ne,this.words[fe]=N&67108863,ne=N>>>26;for(;ne!==0&&fe<X.length;fe++)N=(X.words[fe]|0)+ne,this.words[fe]=N&67108863,ne=N>>>26;if(this.length=X.length,ne!==0)this.words[this.length]=ne,this.length++;else if(X!==this)for(;fe<X.length;fe++)this.words[fe]=X.words[fe];return this},c.prototype.add=function(F){var N;return F.negative!==0&&this.negative===0?(F.negative=0,N=this.sub(F),F.negative^=1,N):F.negative===0&&this.negative!==0?(this.negative=0,N=F.sub(this),this.negative=1,N):this.length>F.length?this.clone().iadd(F):F.clone().iadd(this)},c.prototype.isub=function(F){if(F.negative!==0){F.negative=0;var N=this.iadd(F);return F.negative=1,N._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(F),this.negative=1,this._normSign();var X=this.cmp(F);if(X===0)return this.negative=0,this.length=1,this.words[0]=0,this;var K,ne;X>0?(K=this,ne=F):(K=F,ne=this);for(var fe=0,ue=0;ue<ne.length;ue++)N=(K.words[ue]|0)-(ne.words[ue]|0)+fe,fe=N>>26,this.words[ue]=N&67108863;for(;fe!==0&&ue<K.length;ue++)N=(K.words[ue]|0)+fe,fe=N>>26,this.words[ue]=N&67108863;if(fe===0&&ue<K.length&&K!==this)for(;ue<K.length;ue++)this.words[ue]=K.words[ue];return this.length=Math.max(this.length,ue),K!==this&&(this.negative=1),this.strip()},c.prototype.sub=function(F){return this.clone().isub(F)};function T(B,F,N){N.negative=F.negative^B.negative;var X=B.length+F.length|0;N.length=X,X=X-1|0;var K=B.words[0]|0,ne=F.words[0]|0,fe=K*ne,ue=fe&67108863,ee=fe/67108864|0;N.words[0]=ue;for(var Z=1;Z<X;Z++){for(var oe=ee>>>26,ce=ee&67108863,le=Math.min(Z,F.length-1),me=Math.max(0,Z-B.length+1);me<=le;me++){var he=Z-me|0;K=B.words[he]|0,ne=F.words[me]|0,fe=K*ne+ce,oe+=fe/67108864|0,ce=fe&67108863}N.words[Z]=ce|0,ee=oe|0}return ee!==0?N.words[Z]=ee|0:N.length--,N.strip()}var k=function(F,N,X){var K=F.words,ne=N.words,fe=X.words,ue=0,ee,Z,oe,ce=K[0]|0,le=ce&8191,me=ce>>>13,he=K[1]|0,te=he&8191,ge=he>>>13,ae=K[2]|0,_e=ae&8191,Ce=ae>>>13,qe=K[3]|0,rt=qe&8191,Re=qe>>>13,Ie=K[4]|0,ot=Ie&8191,lt=Ie>>>13,ht=K[5]|0,xt=ht&8191,Vt=ht>>>13,Ht=K[6]|0,Me=Ht&8191,Ke=Ht>>>13,We=K[7]|0,et=We&8191,vt=We>>>13,at=K[8]|0,Xe=at&8191,dt=at>>>13,_t=K[9]|0,$t=_t&8191,Ut=_t>>>13,fr=ne[0]|0,ar=fr&8191,cr=fr>>>13,It=ne[1]|0,gt=It&8191,kt=It>>>13,Je=ne[2]|0,Ze=Je&8191,At=Je>>>13,Se=ne[3]|0,pe=Se&8191,Te=Se>>>13,it=ne[4]|0,Dt=it&8191,Wt=it>>>13,er=ne[5]|0,qr=er&8191,Vr=er>>>13,mr=ne[6]|0,Fr=mr&8191,nn=mr>>>13,jn=ne[7]|0,xn=jn&8191,pn=jn>>>13,ki=ne[8]|0,qn=ki&8191,bi=ki>>>13,Si=ne[9]|0,nt=Si&8191,ze=Si>>>13;X.negative=F.negative^N.negative,X.length=19,ee=Math.imul(le,ar),Z=Math.imul(le,cr),Z=Z+Math.imul(me,ar)|0,oe=Math.imul(me,cr);var ut=(ue+ee|0)+((Z&8191)<<13)|0;ue=(oe+(Z>>>13)|0)+(ut>>>26)|0,ut&=67108863,ee=Math.imul(te,ar),Z=Math.imul(te,cr),Z=Z+Math.imul(ge,ar)|0,oe=Math.imul(ge,cr),ee=ee+Math.imul(le,gt)|0,Z=Z+Math.imul(le,kt)|0,Z=Z+Math.imul(me,gt)|0,oe=oe+Math.imul(me,kt)|0;var mt=(ue+ee|0)+((Z&8191)<<13)|0;ue=(oe+(Z>>>13)|0)+(mt>>>26)|0,mt&=67108863,ee=Math.imul(_e,ar),Z=Math.imul(_e,cr),Z=Z+Math.imul(Ce,ar)|0,oe=Math.imul(Ce,cr),ee=ee+Math.imul(te,gt)|0,Z=Z+Math.imul(te,kt)|0,Z=Z+Math.imul(ge,gt)|0,oe=oe+Math.imul(ge,kt)|0,ee=ee+Math.imul(le,Ze)|0,Z=Z+Math.imul(le,At)|0,Z=Z+Math.imul(me,Ze)|0,oe=oe+Math.imul(me,At)|0;var Ot=(ue+ee|0)+((Z&8191)<<13)|0;ue=(oe+(Z>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,ee=Math.imul(rt,ar),Z=Math.imul(rt,cr),Z=Z+Math.imul(Re,ar)|0,oe=Math.imul(Re,cr),ee=ee+Math.imul(_e,gt)|0,Z=Z+Math.imul(_e,kt)|0,Z=Z+Math.imul(Ce,gt)|0,oe=oe+Math.imul(Ce,kt)|0,ee=ee+Math.imul(te,Ze)|0,Z=Z+Math.imul(te,At)|0,Z=Z+Math.imul(ge,Ze)|0,oe=oe+Math.imul(ge,At)|0,ee=ee+Math.imul(le,pe)|0,Z=Z+Math.imul(le,Te)|0,Z=Z+Math.imul(me,pe)|0,oe=oe+Math.imul(me,Te)|0;var nr=(ue+ee|0)+((Z&8191)<<13)|0;ue=(oe+(Z>>>13)|0)+(nr>>>26)|0,nr&=67108863,ee=Math.imul(ot,ar),Z=Math.imul(ot,cr),Z=Z+Math.imul(lt,ar)|0,oe=Math.imul(lt,cr),ee=ee+Math.imul(rt,gt)|0,Z=Z+Math.imul(rt,kt)|0,Z=Z+Math.imul(Re,gt)|0,oe=oe+Math.imul(Re,kt)|0,ee=ee+Math.imul(_e,Ze)|0,Z=Z+Math.imul(_e,At)|0,Z=Z+Math.imul(Ce,Ze)|0,oe=oe+Math.imul(Ce,At)|0,ee=ee+Math.imul(te,pe)|0,Z=Z+Math.imul(te,Te)|0,Z=Z+Math.imul(ge,pe)|0,oe=oe+Math.imul(ge,Te)|0,ee=ee+Math.imul(le,Dt)|0,Z=Z+Math.imul(le,Wt)|0,Z=Z+Math.imul(me,Dt)|0,oe=oe+Math.imul(me,Wt)|0;var yr=(ue+ee|0)+((Z&8191)<<13)|0;ue=(oe+(Z>>>13)|0)+(yr>>>26)|0,yr&=67108863,ee=Math.imul(xt,ar),Z=Math.imul(xt,cr),Z=Z+Math.imul(Vt,ar)|0,oe=Math.imul(Vt,cr),ee=ee+Math.imul(ot,gt)|0,Z=Z+Math.imul(ot,kt)|0,Z=Z+Math.imul(lt,gt)|0,oe=oe+Math.imul(lt,kt)|0,ee=ee+Math.imul(rt,Ze)|0,Z=Z+Math.imul(rt,At)|0,Z=Z+Math.imul(Re,Ze)|0,oe=oe+Math.imul(Re,At)|0,ee=ee+Math.imul(_e,pe)|0,Z=Z+Math.imul(_e,Te)|0,Z=Z+Math.imul(Ce,pe)|0,oe=oe+Math.imul(Ce,Te)|0,ee=ee+Math.imul(te,Dt)|0,Z=Z+Math.imul(te,Wt)|0,Z=Z+Math.imul(ge,Dt)|0,oe=oe+Math.imul(ge,Wt)|0,ee=ee+Math.imul(le,qr)|0,Z=Z+Math.imul(le,Vr)|0,Z=Z+Math.imul(me,qr)|0,oe=oe+Math.imul(me,Vr)|0;var vr=(ue+ee|0)+((Z&8191)<<13)|0;ue=(oe+(Z>>>13)|0)+(vr>>>26)|0,vr&=67108863,ee=Math.imul(Me,ar),Z=Math.imul(Me,cr),Z=Z+Math.imul(Ke,ar)|0,oe=Math.imul(Ke,cr),ee=ee+Math.imul(xt,gt)|0,Z=Z+Math.imul(xt,kt)|0,Z=Z+Math.imul(Vt,gt)|0,oe=oe+Math.imul(Vt,kt)|0,ee=ee+Math.imul(ot,Ze)|0,Z=Z+Math.imul(ot,At)|0,Z=Z+Math.imul(lt,Ze)|0,oe=oe+Math.imul(lt,At)|0,ee=ee+Math.imul(rt,pe)|0,Z=Z+Math.imul(rt,Te)|0,Z=Z+Math.imul(Re,pe)|0,oe=oe+Math.imul(Re,Te)|0,ee=ee+Math.imul(_e,Dt)|0,Z=Z+Math.imul(_e,Wt)|0,Z=Z+Math.imul(Ce,Dt)|0,oe=oe+Math.imul(Ce,Wt)|0,ee=ee+Math.imul(te,qr)|0,Z=Z+Math.imul(te,Vr)|0,Z=Z+Math.imul(ge,qr)|0,oe=oe+Math.imul(ge,Vr)|0,ee=ee+Math.imul(le,Fr)|0,Z=Z+Math.imul(le,nn)|0,Z=Z+Math.imul(me,Fr)|0,oe=oe+Math.imul(me,nn)|0;var Rr=(ue+ee|0)+((Z&8191)<<13)|0;ue=(oe+(Z>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,ee=Math.imul(et,ar),Z=Math.imul(et,cr),Z=Z+Math.imul(vt,ar)|0,oe=Math.imul(vt,cr),ee=ee+Math.imul(Me,gt)|0,Z=Z+Math.imul(Me,kt)|0,Z=Z+Math.imul(Ke,gt)|0,oe=oe+Math.imul(Ke,kt)|0,ee=ee+Math.imul(xt,Ze)|0,Z=Z+Math.imul(xt,At)|0,Z=Z+Math.imul(Vt,Ze)|0,oe=oe+Math.imul(Vt,At)|0,ee=ee+Math.imul(ot,pe)|0,Z=Z+Math.imul(ot,Te)|0,Z=Z+Math.imul(lt,pe)|0,oe=oe+Math.imul(lt,Te)|0,ee=ee+Math.imul(rt,Dt)|0,Z=Z+Math.imul(rt,Wt)|0,Z=Z+Math.imul(Re,Dt)|0,oe=oe+Math.imul(Re,Wt)|0,ee=ee+Math.imul(_e,qr)|0,Z=Z+Math.imul(_e,Vr)|0,Z=Z+Math.imul(Ce,qr)|0,oe=oe+Math.imul(Ce,Vr)|0,ee=ee+Math.imul(te,Fr)|0,Z=Z+Math.imul(te,nn)|0,Z=Z+Math.imul(ge,Fr)|0,oe=oe+Math.imul(ge,nn)|0,ee=ee+Math.imul(le,xn)|0,Z=Z+Math.imul(le,pn)|0,Z=Z+Math.imul(me,xn)|0,oe=oe+Math.imul(me,pn)|0;var Gr=(ue+ee|0)+((Z&8191)<<13)|0;ue=(oe+(Z>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,ee=Math.imul(Xe,ar),Z=Math.imul(Xe,cr),Z=Z+Math.imul(dt,ar)|0,oe=Math.imul(dt,cr),ee=ee+Math.imul(et,gt)|0,Z=Z+Math.imul(et,kt)|0,Z=Z+Math.imul(vt,gt)|0,oe=oe+Math.imul(vt,kt)|0,ee=ee+Math.imul(Me,Ze)|0,Z=Z+Math.imul(Me,At)|0,Z=Z+Math.imul(Ke,Ze)|0,oe=oe+Math.imul(Ke,At)|0,ee=ee+Math.imul(xt,pe)|0,Z=Z+Math.imul(xt,Te)|0,Z=Z+Math.imul(Vt,pe)|0,oe=oe+Math.imul(Vt,Te)|0,ee=ee+Math.imul(ot,Dt)|0,Z=Z+Math.imul(ot,Wt)|0,Z=Z+Math.imul(lt,Dt)|0,oe=oe+Math.imul(lt,Wt)|0,ee=ee+Math.imul(rt,qr)|0,Z=Z+Math.imul(rt,Vr)|0,Z=Z+Math.imul(Re,qr)|0,oe=oe+Math.imul(Re,Vr)|0,ee=ee+Math.imul(_e,Fr)|0,Z=Z+Math.imul(_e,nn)|0,Z=Z+Math.imul(Ce,Fr)|0,oe=oe+Math.imul(Ce,nn)|0,ee=ee+Math.imul(te,xn)|0,Z=Z+Math.imul(te,pn)|0,Z=Z+Math.imul(ge,xn)|0,oe=oe+Math.imul(ge,pn)|0,ee=ee+Math.imul(le,qn)|0,Z=Z+Math.imul(le,bi)|0,Z=Z+Math.imul(me,qn)|0,oe=oe+Math.imul(me,bi)|0;var Yr=(ue+ee|0)+((Z&8191)<<13)|0;ue=(oe+(Z>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,ee=Math.imul($t,ar),Z=Math.imul($t,cr),Z=Z+Math.imul(Ut,ar)|0,oe=Math.imul(Ut,cr),ee=ee+Math.imul(Xe,gt)|0,Z=Z+Math.imul(Xe,kt)|0,Z=Z+Math.imul(dt,gt)|0,oe=oe+Math.imul(dt,kt)|0,ee=ee+Math.imul(et,Ze)|0,Z=Z+Math.imul(et,At)|0,Z=Z+Math.imul(vt,Ze)|0,oe=oe+Math.imul(vt,At)|0,ee=ee+Math.imul(Me,pe)|0,Z=Z+Math.imul(Me,Te)|0,Z=Z+Math.imul(Ke,pe)|0,oe=oe+Math.imul(Ke,Te)|0,ee=ee+Math.imul(xt,Dt)|0,Z=Z+Math.imul(xt,Wt)|0,Z=Z+Math.imul(Vt,Dt)|0,oe=oe+Math.imul(Vt,Wt)|0,ee=ee+Math.imul(ot,qr)|0,Z=Z+Math.imul(ot,Vr)|0,Z=Z+Math.imul(lt,qr)|0,oe=oe+Math.imul(lt,Vr)|0,ee=ee+Math.imul(rt,Fr)|0,Z=Z+Math.imul(rt,nn)|0,Z=Z+Math.imul(Re,Fr)|0,oe=oe+Math.imul(Re,nn)|0,ee=ee+Math.imul(_e,xn)|0,Z=Z+Math.imul(_e,pn)|0,Z=Z+Math.imul(Ce,xn)|0,oe=oe+Math.imul(Ce,pn)|0,ee=ee+Math.imul(te,qn)|0,Z=Z+Math.imul(te,bi)|0,Z=Z+Math.imul(ge,qn)|0,oe=oe+Math.imul(ge,bi)|0,ee=ee+Math.imul(le,nt)|0,Z=Z+Math.imul(le,ze)|0,Z=Z+Math.imul(me,nt)|0,oe=oe+Math.imul(me,ze)|0;var Xr=(ue+ee|0)+((Z&8191)<<13)|0;ue=(oe+(Z>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,ee=Math.imul($t,gt),Z=Math.imul($t,kt),Z=Z+Math.imul(Ut,gt)|0,oe=Math.imul(Ut,kt),ee=ee+Math.imul(Xe,Ze)|0,Z=Z+Math.imul(Xe,At)|0,Z=Z+Math.imul(dt,Ze)|0,oe=oe+Math.imul(dt,At)|0,ee=ee+Math.imul(et,pe)|0,Z=Z+Math.imul(et,Te)|0,Z=Z+Math.imul(vt,pe)|0,oe=oe+Math.imul(vt,Te)|0,ee=ee+Math.imul(Me,Dt)|0,Z=Z+Math.imul(Me,Wt)|0,Z=Z+Math.imul(Ke,Dt)|0,oe=oe+Math.imul(Ke,Wt)|0,ee=ee+Math.imul(xt,qr)|0,Z=Z+Math.imul(xt,Vr)|0,Z=Z+Math.imul(Vt,qr)|0,oe=oe+Math.imul(Vt,Vr)|0,ee=ee+Math.imul(ot,Fr)|0,Z=Z+Math.imul(ot,nn)|0,Z=Z+Math.imul(lt,Fr)|0,oe=oe+Math.imul(lt,nn)|0,ee=ee+Math.imul(rt,xn)|0,Z=Z+Math.imul(rt,pn)|0,Z=Z+Math.imul(Re,xn)|0,oe=oe+Math.imul(Re,pn)|0,ee=ee+Math.imul(_e,qn)|0,Z=Z+Math.imul(_e,bi)|0,Z=Z+Math.imul(Ce,qn)|0,oe=oe+Math.imul(Ce,bi)|0,ee=ee+Math.imul(te,nt)|0,Z=Z+Math.imul(te,ze)|0,Z=Z+Math.imul(ge,nt)|0,oe=oe+Math.imul(ge,ze)|0;var on=(ue+ee|0)+((Z&8191)<<13)|0;ue=(oe+(Z>>>13)|0)+(on>>>26)|0,on&=67108863,ee=Math.imul($t,Ze),Z=Math.imul($t,At),Z=Z+Math.imul(Ut,Ze)|0,oe=Math.imul(Ut,At),ee=ee+Math.imul(Xe,pe)|0,Z=Z+Math.imul(Xe,Te)|0,Z=Z+Math.imul(dt,pe)|0,oe=oe+Math.imul(dt,Te)|0,ee=ee+Math.imul(et,Dt)|0,Z=Z+Math.imul(et,Wt)|0,Z=Z+Math.imul(vt,Dt)|0,oe=oe+Math.imul(vt,Wt)|0,ee=ee+Math.imul(Me,qr)|0,Z=Z+Math.imul(Me,Vr)|0,Z=Z+Math.imul(Ke,qr)|0,oe=oe+Math.imul(Ke,Vr)|0,ee=ee+Math.imul(xt,Fr)|0,Z=Z+Math.imul(xt,nn)|0,Z=Z+Math.imul(Vt,Fr)|0,oe=oe+Math.imul(Vt,nn)|0,ee=ee+Math.imul(ot,xn)|0,Z=Z+Math.imul(ot,pn)|0,Z=Z+Math.imul(lt,xn)|0,oe=oe+Math.imul(lt,pn)|0,ee=ee+Math.imul(rt,qn)|0,Z=Z+Math.imul(rt,bi)|0,Z=Z+Math.imul(Re,qn)|0,oe=oe+Math.imul(Re,bi)|0,ee=ee+Math.imul(_e,nt)|0,Z=Z+Math.imul(_e,ze)|0,Z=Z+Math.imul(Ce,nt)|0,oe=oe+Math.imul(Ce,ze)|0;var wn=(ue+ee|0)+((Z&8191)<<13)|0;ue=(oe+(Z>>>13)|0)+(wn>>>26)|0,wn&=67108863,ee=Math.imul($t,pe),Z=Math.imul($t,Te),Z=Z+Math.imul(Ut,pe)|0,oe=Math.imul(Ut,Te),ee=ee+Math.imul(Xe,Dt)|0,Z=Z+Math.imul(Xe,Wt)|0,Z=Z+Math.imul(dt,Dt)|0,oe=oe+Math.imul(dt,Wt)|0,ee=ee+Math.imul(et,qr)|0,Z=Z+Math.imul(et,Vr)|0,Z=Z+Math.imul(vt,qr)|0,oe=oe+Math.imul(vt,Vr)|0,ee=ee+Math.imul(Me,Fr)|0,Z=Z+Math.imul(Me,nn)|0,Z=Z+Math.imul(Ke,Fr)|0,oe=oe+Math.imul(Ke,nn)|0,ee=ee+Math.imul(xt,xn)|0,Z=Z+Math.imul(xt,pn)|0,Z=Z+Math.imul(Vt,xn)|0,oe=oe+Math.imul(Vt,pn)|0,ee=ee+Math.imul(ot,qn)|0,Z=Z+Math.imul(ot,bi)|0,Z=Z+Math.imul(lt,qn)|0,oe=oe+Math.imul(lt,bi)|0,ee=ee+Math.imul(rt,nt)|0,Z=Z+Math.imul(rt,ze)|0,Z=Z+Math.imul(Re,nt)|0,oe=oe+Math.imul(Re,ze)|0;var Vi=(ue+ee|0)+((Z&8191)<<13)|0;ue=(oe+(Z>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,ee=Math.imul($t,Dt),Z=Math.imul($t,Wt),Z=Z+Math.imul(Ut,Dt)|0,oe=Math.imul(Ut,Wt),ee=ee+Math.imul(Xe,qr)|0,Z=Z+Math.imul(Xe,Vr)|0,Z=Z+Math.imul(dt,qr)|0,oe=oe+Math.imul(dt,Vr)|0,ee=ee+Math.imul(et,Fr)|0,Z=Z+Math.imul(et,nn)|0,Z=Z+Math.imul(vt,Fr)|0,oe=oe+Math.imul(vt,nn)|0,ee=ee+Math.imul(Me,xn)|0,Z=Z+Math.imul(Me,pn)|0,Z=Z+Math.imul(Ke,xn)|0,oe=oe+Math.imul(Ke,pn)|0,ee=ee+Math.imul(xt,qn)|0,Z=Z+Math.imul(xt,bi)|0,Z=Z+Math.imul(Vt,qn)|0,oe=oe+Math.imul(Vt,bi)|0,ee=ee+Math.imul(ot,nt)|0,Z=Z+Math.imul(ot,ze)|0,Z=Z+Math.imul(lt,nt)|0,oe=oe+Math.imul(lt,ze)|0;var vi=(ue+ee|0)+((Z&8191)<<13)|0;ue=(oe+(Z>>>13)|0)+(vi>>>26)|0,vi&=67108863,ee=Math.imul($t,qr),Z=Math.imul($t,Vr),Z=Z+Math.imul(Ut,qr)|0,oe=Math.imul(Ut,Vr),ee=ee+Math.imul(Xe,Fr)|0,Z=Z+Math.imul(Xe,nn)|0,Z=Z+Math.imul(dt,Fr)|0,oe=oe+Math.imul(dt,nn)|0,ee=ee+Math.imul(et,xn)|0,Z=Z+Math.imul(et,pn)|0,Z=Z+Math.imul(vt,xn)|0,oe=oe+Math.imul(vt,pn)|0,ee=ee+Math.imul(Me,qn)|0,Z=Z+Math.imul(Me,bi)|0,Z=Z+Math.imul(Ke,qn)|0,oe=oe+Math.imul(Ke,bi)|0,ee=ee+Math.imul(xt,nt)|0,Z=Z+Math.imul(xt,ze)|0,Z=Z+Math.imul(Vt,nt)|0,oe=oe+Math.imul(Vt,ze)|0;var Zi=(ue+ee|0)+((Z&8191)<<13)|0;ue=(oe+(Z>>>13)|0)+(Zi>>>26)|0,Zi&=67108863,ee=Math.imul($t,Fr),Z=Math.imul($t,nn),Z=Z+Math.imul(Ut,Fr)|0,oe=Math.imul(Ut,nn),ee=ee+Math.imul(Xe,xn)|0,Z=Z+Math.imul(Xe,pn)|0,Z=Z+Math.imul(dt,xn)|0,oe=oe+Math.imul(dt,pn)|0,ee=ee+Math.imul(et,qn)|0,Z=Z+Math.imul(et,bi)|0,Z=Z+Math.imul(vt,qn)|0,oe=oe+Math.imul(vt,bi)|0,ee=ee+Math.imul(Me,nt)|0,Z=Z+Math.imul(Me,ze)|0,Z=Z+Math.imul(Ke,nt)|0,oe=oe+Math.imul(Ke,ze)|0;var Xi=(ue+ee|0)+((Z&8191)<<13)|0;ue=(oe+(Z>>>13)|0)+(Xi>>>26)|0,Xi&=67108863,ee=Math.imul($t,xn),Z=Math.imul($t,pn),Z=Z+Math.imul(Ut,xn)|0,oe=Math.imul(Ut,pn),ee=ee+Math.imul(Xe,qn)|0,Z=Z+Math.imul(Xe,bi)|0,Z=Z+Math.imul(dt,qn)|0,oe=oe+Math.imul(dt,bi)|0,ee=ee+Math.imul(et,nt)|0,Z=Z+Math.imul(et,ze)|0,Z=Z+Math.imul(vt,nt)|0,oe=oe+Math.imul(vt,ze)|0;var ta=(ue+ee|0)+((Z&8191)<<13)|0;ue=(oe+(Z>>>13)|0)+(ta>>>26)|0,ta&=67108863,ee=Math.imul($t,qn),Z=Math.imul($t,bi),Z=Z+Math.imul(Ut,qn)|0,oe=Math.imul(Ut,bi),ee=ee+Math.imul(Xe,nt)|0,Z=Z+Math.imul(Xe,ze)|0,Z=Z+Math.imul(dt,nt)|0,oe=oe+Math.imul(dt,ze)|0;var Ya=(ue+ee|0)+((Z&8191)<<13)|0;ue=(oe+(Z>>>13)|0)+(Ya>>>26)|0,Ya&=67108863,ee=Math.imul($t,nt),Z=Math.imul($t,ze),Z=Z+Math.imul(Ut,nt)|0,oe=Math.imul(Ut,ze);var Pi=(ue+ee|0)+((Z&8191)<<13)|0;return ue=(oe+(Z>>>13)|0)+(Pi>>>26)|0,Pi&=67108863,fe[0]=ut,fe[1]=mt,fe[2]=Ot,fe[3]=nr,fe[4]=yr,fe[5]=vr,fe[6]=Rr,fe[7]=Gr,fe[8]=Yr,fe[9]=Xr,fe[10]=on,fe[11]=wn,fe[12]=Vi,fe[13]=vi,fe[14]=Zi,fe[15]=Xi,fe[16]=ta,fe[17]=Ya,fe[18]=Pi,ue!==0&&(fe[19]=ue,X.length++),X};Math.imul||(k=T);function _(B,F,N){N.negative=F.negative^B.negative,N.length=B.length+F.length;for(var X=0,K=0,ne=0;ne<N.length-1;ne++){var fe=K;K=0;for(var ue=X&67108863,ee=Math.min(ne,F.length-1),Z=Math.max(0,ne-B.length+1);Z<=ee;Z++){var oe=ne-Z,ce=B.words[oe]|0,le=F.words[Z]|0,me=ce*le,he=me&67108863;fe=fe+(me/67108864|0)|0,he=he+ue|0,ue=he&67108863,fe=fe+(he>>>26)|0,K+=fe>>>26,fe&=67108863}N.words[ne]=ue,X=fe,fe=K}return X!==0?N.words[ne]=X:N.length--,N.strip()}function E(B,F,N){var X=new S;return X.mulp(B,F,N)}c.prototype.mulTo=function(F,N){var X,K=this.length+F.length;return this.length===10&&F.length===10?X=k(this,F,N):K<63?X=T(this,F,N):K<1024?X=_(this,F,N):X=E(this,F,N),X};function S(B,F){this.x=B,this.y=F}S.prototype.makeRBT=function(F){for(var N=new Array(F),X=c.prototype._countBits(F)-1,K=0;K<F;K++)N[K]=this.revBin(K,X,F);return N},S.prototype.revBin=function(F,N,X){if(F===0||F===X-1)return F;for(var K=0,ne=0;ne<N;ne++)K|=(F&1)<<N-ne-1,F>>=1;return K},S.prototype.permute=function(F,N,X,K,ne,fe){for(var ue=0;ue<fe;ue++)K[ue]=N[F[ue]],ne[ue]=X[F[ue]]},S.prototype.transform=function(F,N,X,K,ne,fe){this.permute(fe,F,N,X,K,ne);for(var ue=1;ue<ne;ue<<=1)for(var ee=ue<<1,Z=Math.cos(2*Math.PI/ee),oe=Math.sin(2*Math.PI/ee),ce=0;ce<ne;ce+=ee)for(var le=Z,me=oe,he=0;he<ue;he++){var te=X[ce+he],ge=K[ce+he],ae=X[ce+he+ue],_e=K[ce+he+ue],Ce=le*ae-me*_e;_e=le*_e+me*ae,ae=Ce,X[ce+he]=te+ae,K[ce+he]=ge+_e,X[ce+he+ue]=te-ae,K[ce+he+ue]=ge-_e,he!==ee&&(Ce=Z*le-oe*me,me=Z*me+oe*le,le=Ce)}},S.prototype.guessLen13b=function(F,N){var X=Math.max(N,F)|1,K=X&1,ne=0;for(X=X/2|0;X;X=X>>>1)ne++;return 1<<ne+1+K},S.prototype.conjugate=function(F,N,X){if(!(X<=1))for(var K=0;K<X/2;K++){var ne=F[K];F[K]=F[X-K-1],F[X-K-1]=ne,ne=N[K],N[K]=-N[X-K-1],N[X-K-1]=-ne}},S.prototype.normalize13b=function(F,N){for(var X=0,K=0;K<N/2;K++){var ne=Math.round(F[2*K+1]/N)*8192+Math.round(F[2*K]/N)+X;F[K]=ne&67108863,ne<67108864?X=0:X=ne/67108864|0}return F},S.prototype.convert13b=function(F,N,X,K){for(var ne=0,fe=0;fe<N;fe++)ne=ne+(F[fe]|0),X[2*fe]=ne&8191,ne=ne>>>13,X[2*fe+1]=ne&8191,ne=ne>>>13;for(fe=2*N;fe<K;++fe)X[fe]=0;u(ne===0),u((ne&-8192)===0)},S.prototype.stub=function(F){for(var N=new Array(F),X=0;X<F;X++)N[X]=0;return N},S.prototype.mulp=function(F,N,X){var K=2*this.guessLen13b(F.length,N.length),ne=this.makeRBT(K),fe=this.stub(K),ue=new Array(K),ee=new Array(K),Z=new Array(K),oe=new Array(K),ce=new Array(K),le=new Array(K),me=X.words;me.length=K,this.convert13b(F.words,F.length,ue,K),this.convert13b(N.words,N.length,oe,K),this.transform(ue,fe,ee,Z,K,ne),this.transform(oe,fe,ce,le,K,ne);for(var he=0;he<K;he++){var te=ee[he]*ce[he]-Z[he]*le[he];Z[he]=ee[he]*le[he]+Z[he]*ce[he],ee[he]=te}return this.conjugate(ee,Z,K),this.transform(ee,Z,me,fe,K,ne),this.conjugate(me,fe,K),this.normalize13b(me,K),X.negative=F.negative^N.negative,X.length=F.length+N.length,X.strip()},c.prototype.mul=function(F){var N=new c(null);return N.words=new Array(this.length+F.length),this.mulTo(F,N)},c.prototype.mulf=function(F){var N=new c(null);return N.words=new Array(this.length+F.length),E(this,F,N)},c.prototype.imul=function(F){return this.clone().mulTo(F,this)},c.prototype.imuln=function(F){u(typeof F=="number"),u(F<67108864);for(var N=0,X=0;X<this.length;X++){var K=(this.words[X]|0)*F,ne=(K&67108863)+(N&67108863);N>>=26,N+=K/67108864|0,N+=ne>>>26,this.words[X]=ne&67108863}return N!==0&&(this.words[X]=N,this.length++),this},c.prototype.muln=function(F){return this.clone().imuln(F)},c.prototype.sqr=function(){return this.mul(this)},c.prototype.isqr=function(){return this.imul(this.clone())},c.prototype.pow=function(F){var N=A(F);if(N.length===0)return new c(1);for(var X=this,K=0;K<N.length&&N[K]===0;K++,X=X.sqr());if(++K<N.length)for(var ne=X.sqr();K<N.length;K++,ne=ne.sqr())N[K]!==0&&(X=X.mul(ne));return X},c.prototype.iushln=function(F){u(typeof F=="number"&&F>=0);var N=F%26,X=(F-N)/26,K=67108863>>>26-N<<26-N,ne;if(N!==0){var fe=0;for(ne=0;ne<this.length;ne++){var ue=this.words[ne]&K,ee=(this.words[ne]|0)-ue<<N;this.words[ne]=ee|fe,fe=ue>>>26-N}fe&&(this.words[ne]=fe,this.length++)}if(X!==0){for(ne=this.length-1;ne>=0;ne--)this.words[ne+X]=this.words[ne];for(ne=0;ne<X;ne++)this.words[ne]=0;this.length+=X}return this.strip()},c.prototype.ishln=function(F){return u(this.negative===0),this.iushln(F)},c.prototype.iushrn=function(F,N,X){u(typeof F=="number"&&F>=0);var K;N?K=(N-N%26)/26:K=0;var ne=F%26,fe=Math.min((F-ne)/26,this.length),ue=67108863^67108863>>>ne<<ne,ee=X;if(K-=fe,K=Math.max(0,K),ee){for(var Z=0;Z<fe;Z++)ee.words[Z]=this.words[Z];ee.length=fe}if(fe!==0)if(this.length>fe)for(this.length-=fe,Z=0;Z<this.length;Z++)this.words[Z]=this.words[Z+fe];else this.words[0]=0,this.length=1;var oe=0;for(Z=this.length-1;Z>=0&&(oe!==0||Z>=K);Z--){var ce=this.words[Z]|0;this.words[Z]=oe<<26-ne|ce>>>ne,oe=ce&ue}return ee&&oe!==0&&(ee.words[ee.length++]=oe),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},c.prototype.ishrn=function(F,N,X){return u(this.negative===0),this.iushrn(F,N,X)},c.prototype.shln=function(F){return this.clone().ishln(F)},c.prototype.ushln=function(F){return this.clone().iushln(F)},c.prototype.shrn=function(F){return this.clone().ishrn(F)},c.prototype.ushrn=function(F){return this.clone().iushrn(F)},c.prototype.testn=function(F){u(typeof F=="number"&&F>=0);var N=F%26,X=(F-N)/26,K=1<<N;if(this.length<=X)return!1;var ne=this.words[X];return!!(ne&K)},c.prototype.imaskn=function(F){u(typeof F=="number"&&F>=0);var N=F%26,X=(F-N)/26;if(u(this.negative===0,"imaskn works only with positive numbers"),this.length<=X)return this;if(N!==0&&X++,this.length=Math.min(X,this.length),N!==0){var K=67108863^67108863>>>N<<N;this.words[this.length-1]&=K}return this.strip()},c.prototype.maskn=function(F){return this.clone().imaskn(F)},c.prototype.iaddn=function(F){return u(typeof F=="number"),u(F<67108864),F<0?this.isubn(-F):this.negative!==0?this.length===1&&(this.words[0]|0)<F?(this.words[0]=F-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(F),this.negative=1,this):this._iaddn(F)},c.prototype._iaddn=function(F){this.words[0]+=F;for(var N=0;N<this.length&&this.words[N]>=67108864;N++)this.words[N]-=67108864,N===this.length-1?this.words[N+1]=1:this.words[N+1]++;return this.length=Math.max(this.length,N+1),this},c.prototype.isubn=function(F){if(u(typeof F=="number"),u(F<67108864),F<0)return this.iaddn(-F);if(this.negative!==0)return this.negative=0,this.iaddn(F),this.negative=1,this;if(this.words[0]-=F,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var N=0;N<this.length&&this.words[N]<0;N++)this.words[N]+=67108864,this.words[N+1]-=1;return this.strip()},c.prototype.addn=function(F){return this.clone().iaddn(F)},c.prototype.subn=function(F){return this.clone().isubn(F)},c.prototype.iabs=function(){return this.negative=0,this},c.prototype.abs=function(){return this.clone().iabs()},c.prototype._ishlnsubmul=function(F,N,X){var K=F.length+X,ne;this._expand(K);var fe,ue=0;for(ne=0;ne<F.length;ne++){fe=(this.words[ne+X]|0)+ue;var ee=(F.words[ne]|0)*N;fe-=ee&67108863,ue=(fe>>26)-(ee/67108864|0),this.words[ne+X]=fe&67108863}for(;ne<this.length-X;ne++)fe=(this.words[ne+X]|0)+ue,ue=fe>>26,this.words[ne+X]=fe&67108863;if(ue===0)return this.strip();for(u(ue===-1),ue=0,ne=0;ne<this.length;ne++)fe=-(this.words[ne]|0)+ue,ue=fe>>26,this.words[ne]=fe&67108863;return this.negative=1,this.strip()},c.prototype._wordDiv=function(F,N){var X=this.length-F.length,K=this.clone(),ne=F,fe=ne.words[ne.length-1]|0,ue=this._countBits(fe);X=26-ue,X!==0&&(ne=ne.ushln(X),K.iushln(X),fe=ne.words[ne.length-1]|0);var ee=K.length-ne.length,Z;if(N!=="mod"){Z=new c(null),Z.length=ee+1,Z.words=new Array(Z.length);for(var oe=0;oe<Z.length;oe++)Z.words[oe]=0}var ce=K.clone()._ishlnsubmul(ne,1,ee);ce.negative===0&&(K=ce,Z&&(Z.words[ee]=1));for(var le=ee-1;le>=0;le--){var me=(K.words[ne.length+le]|0)*67108864+(K.words[ne.length+le-1]|0);for(me=Math.min(me/fe|0,67108863),K._ishlnsubmul(ne,me,le);K.negative!==0;)me--,K.negative=0,K._ishlnsubmul(ne,1,le),K.isZero()||(K.negative^=1);Z&&(Z.words[le]=me)}return Z&&Z.strip(),K.strip(),N!=="div"&&X!==0&&K.iushrn(X),{div:Z||null,mod:K}},c.prototype.divmod=function(F,N,X){if(u(!F.isZero()),this.isZero())return{div:new c(0),mod:new c(0)};var K,ne,fe;return this.negative!==0&&F.negative===0?(fe=this.neg().divmod(F,N),N!=="mod"&&(K=fe.div.neg()),N!=="div"&&(ne=fe.mod.neg(),X&&ne.negative!==0&&ne.iadd(F)),{div:K,mod:ne}):this.negative===0&&F.negative!==0?(fe=this.divmod(F.neg(),N),N!=="mod"&&(K=fe.div.neg()),{div:K,mod:fe.mod}):this.negative&F.negative?(fe=this.neg().divmod(F.neg(),N),N!=="div"&&(ne=fe.mod.neg(),X&&ne.negative!==0&&ne.isub(F)),{div:fe.div,mod:ne}):F.length>this.length||this.cmp(F)<0?{div:new c(0),mod:this}:F.length===1?N==="div"?{div:this.divn(F.words[0]),mod:null}:N==="mod"?{div:null,mod:new c(this.modn(F.words[0]))}:{div:this.divn(F.words[0]),mod:new c(this.modn(F.words[0]))}:this._wordDiv(F,N)},c.prototype.div=function(F){return this.divmod(F,"div",!1).div},c.prototype.mod=function(F){return this.divmod(F,"mod",!1).mod},c.prototype.umod=function(F){return this.divmod(F,"mod",!0).mod},c.prototype.divRound=function(F){var N=this.divmod(F);if(N.mod.isZero())return N.div;var X=N.div.negative!==0?N.mod.isub(F):N.mod,K=F.ushrn(1),ne=F.andln(1),fe=X.cmp(K);return fe<0||ne===1&&fe===0?N.div:N.div.negative!==0?N.div.isubn(1):N.div.iaddn(1)},c.prototype.modn=function(F){u(F<=67108863);for(var N=(1<<26)%F,X=0,K=this.length-1;K>=0;K--)X=(N*X+(this.words[K]|0))%F;return X},c.prototype.idivn=function(F){u(F<=67108863);for(var N=0,X=this.length-1;X>=0;X--){var K=(this.words[X]|0)+N*67108864;this.words[X]=K/F|0,N=K%F}return this.strip()},c.prototype.divn=function(F){return this.clone().idivn(F)},c.prototype.egcd=function(F){u(F.negative===0),u(!F.isZero());var N=this,X=F.clone();N.negative!==0?N=N.umod(F):N=N.clone();for(var K=new c(1),ne=new c(0),fe=new c(0),ue=new c(1),ee=0;N.isEven()&&X.isEven();)N.iushrn(1),X.iushrn(1),++ee;for(var Z=X.clone(),oe=N.clone();!N.isZero();){for(var ce=0,le=1;!(N.words[0]&le)&&ce<26;++ce,le<<=1);if(ce>0)for(N.iushrn(ce);ce-- >0;)(K.isOdd()||ne.isOdd())&&(K.iadd(Z),ne.isub(oe)),K.iushrn(1),ne.iushrn(1);for(var me=0,he=1;!(X.words[0]&he)&&me<26;++me,he<<=1);if(me>0)for(X.iushrn(me);me-- >0;)(fe.isOdd()||ue.isOdd())&&(fe.iadd(Z),ue.isub(oe)),fe.iushrn(1),ue.iushrn(1);N.cmp(X)>=0?(N.isub(X),K.isub(fe),ne.isub(ue)):(X.isub(N),fe.isub(K),ue.isub(ne))}return{a:fe,b:ue,gcd:X.iushln(ee)}},c.prototype._invmp=function(F){u(F.negative===0),u(!F.isZero());var N=this,X=F.clone();N.negative!==0?N=N.umod(F):N=N.clone();for(var K=new c(1),ne=new c(0),fe=X.clone();N.cmpn(1)>0&&X.cmpn(1)>0;){for(var ue=0,ee=1;!(N.words[0]&ee)&&ue<26;++ue,ee<<=1);if(ue>0)for(N.iushrn(ue);ue-- >0;)K.isOdd()&&K.iadd(fe),K.iushrn(1);for(var Z=0,oe=1;!(X.words[0]&oe)&&Z<26;++Z,oe<<=1);if(Z>0)for(X.iushrn(Z);Z-- >0;)ne.isOdd()&&ne.iadd(fe),ne.iushrn(1);N.cmp(X)>=0?(N.isub(X),K.isub(ne)):(X.isub(N),ne.isub(K))}var ce;return N.cmpn(1)===0?ce=K:ce=ne,ce.cmpn(0)<0&&ce.iadd(F),ce},c.prototype.gcd=function(F){if(this.isZero())return F.abs();if(F.isZero())return this.abs();var N=this.clone(),X=F.clone();N.negative=0,X.negative=0;for(var K=0;N.isEven()&&X.isEven();K++)N.iushrn(1),X.iushrn(1);do{for(;N.isEven();)N.iushrn(1);for(;X.isEven();)X.iushrn(1);var ne=N.cmp(X);if(ne<0){var fe=N;N=X,X=fe}else if(ne===0||X.cmpn(1)===0)break;N.isub(X)}while(!0);return X.iushln(K)},c.prototype.invm=function(F){return this.egcd(F).a.umod(F)},c.prototype.isEven=function(){return(this.words[0]&1)===0},c.prototype.isOdd=function(){return(this.words[0]&1)===1},c.prototype.andln=function(F){return this.words[0]&F},c.prototype.bincn=function(F){u(typeof F=="number");var N=F%26,X=(F-N)/26,K=1<<N;if(this.length<=X)return this._expand(X+1),this.words[X]|=K,this;for(var ne=K,fe=X;ne!==0&&fe<this.length;fe++){var ue=this.words[fe]|0;ue+=ne,ne=ue>>>26,ue&=67108863,this.words[fe]=ue}return ne!==0&&(this.words[fe]=ne,this.length++),this},c.prototype.isZero=function(){return this.length===1&&this.words[0]===0},c.prototype.cmpn=function(F){var N=F<0;if(this.negative!==0&&!N)return-1;if(this.negative===0&&N)return 1;this.strip();var X;if(this.length>1)X=1;else{N&&(F=-F),u(F<=67108863,"Number is too big");var K=this.words[0]|0;X=K===F?0:K<F?-1:1}return this.negative!==0?-X|0:X},c.prototype.cmp=function(F){if(this.negative!==0&&F.negative===0)return-1;if(this.negative===0&&F.negative!==0)return 1;var N=this.ucmp(F);return this.negative!==0?-N|0:N},c.prototype.ucmp=function(F){if(this.length>F.length)return 1;if(this.length<F.length)return-1;for(var N=0,X=this.length-1;X>=0;X--){var K=this.words[X]|0,ne=F.words[X]|0;if(K!==ne){K<ne?N=-1:K>ne&&(N=1);break}}return N},c.prototype.gtn=function(F){return this.cmpn(F)===1},c.prototype.gt=function(F){return this.cmp(F)===1},c.prototype.gten=function(F){return this.cmpn(F)>=0},c.prototype.gte=function(F){return this.cmp(F)>=0},c.prototype.ltn=function(F){return this.cmpn(F)===-1},c.prototype.lt=function(F){return this.cmp(F)===-1},c.prototype.lten=function(F){return this.cmpn(F)<=0},c.prototype.lte=function(F){return this.cmp(F)<=0},c.prototype.eqn=function(F){return this.cmpn(F)===0},c.prototype.eq=function(F){return this.cmp(F)===0},c.red=function(F){return new O(F)},c.prototype.toRed=function(F){return u(!this.red,"Already a number in reduction context"),u(this.negative===0,"red works only with positives"),F.convertTo(this)._forceRed(F)},c.prototype.fromRed=function(){return u(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},c.prototype._forceRed=function(F){return this.red=F,this},c.prototype.forceRed=function(F){return u(!this.red,"Already a number in reduction context"),this._forceRed(F)},c.prototype.redAdd=function(F){return u(this.red,"redAdd works only with red numbers"),this.red.add(this,F)},c.prototype.redIAdd=function(F){return u(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,F)},c.prototype.redSub=function(F){return u(this.red,"redSub works only with red numbers"),this.red.sub(this,F)},c.prototype.redISub=function(F){return u(this.red,"redISub works only with red numbers"),this.red.isub(this,F)},c.prototype.redShl=function(F){return u(this.red,"redShl works only with red numbers"),this.red.shl(this,F)},c.prototype.redMul=function(F){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,F),this.red.mul(this,F)},c.prototype.redIMul=function(F){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,F),this.red.imul(this,F)},c.prototype.redSqr=function(){return u(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},c.prototype.redISqr=function(){return u(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},c.prototype.redSqrt=function(){return u(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},c.prototype.redInvm=function(){return u(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},c.prototype.redNeg=function(){return u(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},c.prototype.redPow=function(F){return u(this.red&&!F.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,F)};var g={k256:null,p224:null,p192:null,p25519:null};function C(B,F){this.name=B,this.p=new c(F,16),this.n=this.p.bitLength(),this.k=new c(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}C.prototype._tmp=function(){var F=new c(null);return F.words=new Array(Math.ceil(this.n/13)),F},C.prototype.ireduce=function(F){var N=F,X;do this.split(N,this.tmp),N=this.imulK(N),N=N.iadd(this.tmp),X=N.bitLength();while(X>this.n);var K=X<this.n?-1:N.ucmp(this.p);return K===0?(N.words[0]=0,N.length=1):K>0?N.isub(this.p):N.strip!==void 0?N.strip():N._strip(),N},C.prototype.split=function(F,N){F.iushrn(this.n,0,N)},C.prototype.imulK=function(F){return F.imul(this.k)};function M(){C.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}f(M,C),M.prototype.split=function(F,N){for(var X=4194303,K=Math.min(F.length,9),ne=0;ne<K;ne++)N.words[ne]=F.words[ne];if(N.length=K,F.length<=9){F.words[0]=0,F.length=1;return}var fe=F.words[9];for(N.words[N.length++]=fe&X,ne=10;ne<F.length;ne++){var ue=F.words[ne]|0;F.words[ne-10]=(ue&X)<<4|fe>>>22,fe=ue}fe>>>=22,F.words[ne-10]=fe,fe===0&&F.length>10?F.length-=10:F.length-=9},M.prototype.imulK=function(F){F.words[F.length]=0,F.words[F.length+1]=0,F.length+=2;for(var N=0,X=0;X<F.length;X++){var K=F.words[X]|0;N+=K*977,F.words[X]=N&67108863,N=K*64+(N/67108864|0)}return F.words[F.length-1]===0&&(F.length--,F.words[F.length-1]===0&&F.length--),F};function P(){C.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}f(P,C);function D(){C.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}f(D,C);function q(){C.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}f(q,C),q.prototype.imulK=function(F){for(var N=0,X=0;X<F.length;X++){var K=(F.words[X]|0)*19+N,ne=K&67108863;K>>>=26,F.words[X]=ne,N=K}return N!==0&&(F.words[F.length++]=N),F},c._prime=function(F){if(g[F])return g[F];var N;if(F==="k256")N=new M;else if(F==="p224")N=new P;else if(F==="p192")N=new D;else if(F==="p25519")N=new q;else throw new Error("Unknown prime "+F);return g[F]=N,N};function O(B){if(typeof B=="string"){var F=c._prime(B);this.m=F.p,this.prime=F}else u(B.gtn(1),"modulus must be greater than 1"),this.m=B,this.prime=null}O.prototype._verify1=function(F){u(F.negative===0,"red works only with positives"),u(F.red,"red works only with red numbers")},O.prototype._verify2=function(F,N){u((F.negative|N.negative)===0,"red works only with positives"),u(F.red&&F.red===N.red,"red works only with red numbers")},O.prototype.imod=function(F){return this.prime?this.prime.ireduce(F)._forceRed(this):F.umod(this.m)._forceRed(this)},O.prototype.neg=function(F){return F.isZero()?F.clone():this.m.sub(F)._forceRed(this)},O.prototype.add=function(F,N){this._verify2(F,N);var X=F.add(N);return X.cmp(this.m)>=0&&X.isub(this.m),X._forceRed(this)},O.prototype.iadd=function(F,N){this._verify2(F,N);var X=F.iadd(N);return X.cmp(this.m)>=0&&X.isub(this.m),X},O.prototype.sub=function(F,N){this._verify2(F,N);var X=F.sub(N);return X.cmpn(0)<0&&X.iadd(this.m),X._forceRed(this)},O.prototype.isub=function(F,N){this._verify2(F,N);var X=F.isub(N);return X.cmpn(0)<0&&X.iadd(this.m),X},O.prototype.shl=function(F,N){return this._verify1(F),this.imod(F.ushln(N))},O.prototype.imul=function(F,N){return this._verify2(F,N),this.imod(F.imul(N))},O.prototype.mul=function(F,N){return this._verify2(F,N),this.imod(F.mul(N))},O.prototype.isqr=function(F){return this.imul(F,F.clone())},O.prototype.sqr=function(F){return this.mul(F,F)},O.prototype.sqrt=function(F){if(F.isZero())return F.clone();var N=this.m.andln(3);if(u(N%2===1),N===3){var X=this.m.add(new c(1)).iushrn(2);return this.pow(F,X)}for(var K=this.m.subn(1),ne=0;!K.isZero()&&K.andln(1)===0;)ne++,K.iushrn(1);u(!K.isZero());var fe=new c(1).toRed(this),ue=fe.redNeg(),ee=this.m.subn(1).iushrn(1),Z=this.m.bitLength();for(Z=new c(2*Z*Z).toRed(this);this.pow(Z,ee).cmp(ue)!==0;)Z.redIAdd(ue);for(var oe=this.pow(Z,K),ce=this.pow(F,K.addn(1).iushrn(1)),le=this.pow(F,K),me=ne;le.cmp(fe)!==0;){for(var he=le,te=0;he.cmp(fe)!==0;te++)he=he.redSqr();u(te<me);var ge=this.pow(oe,new c(1).iushln(me-te-1));ce=ce.redMul(ge),oe=ge.redSqr(),le=le.redMul(oe),me=te}return ce},O.prototype.invm=function(F){var N=F._invmp(this.m);return N.negative!==0?(N.negative=0,this.imod(N).redNeg()):this.imod(N)},O.prototype.pow=function(F,N){if(N.isZero())return new c(1).toRed(this);if(N.cmpn(1)===0)return F.clone();var X=4,K=new Array(1<<X);K[0]=new c(1).toRed(this),K[1]=F;for(var ne=2;ne<K.length;ne++)K[ne]=this.mul(K[ne-1],F);var fe=K[0],ue=0,ee=0,Z=N.bitLength()%26;for(Z===0&&(Z=26),ne=N.length-1;ne>=0;ne--){for(var oe=N.words[ne],ce=Z-1;ce>=0;ce--){var le=oe>>ce&1;if(fe!==K[0]&&(fe=this.sqr(fe)),le===0&&ue===0){ee=0;continue}ue<<=1,ue|=le,ee++,!(ee!==X&&(ne!==0||ce!==0))&&(fe=this.mul(fe,K[ue]),ee=0,ue=0)}Z=26}return fe},O.prototype.convertTo=function(F){var N=F.umod(this.m);return N===F?N.clone():N},O.prototype.convertFrom=function(F){var N=F.clone();return N.red=null,N},c.mont=function(F){return new U(F)};function U(B){O.call(this,B),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new c(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}f(U,O),U.prototype.convertTo=function(F){return this.imod(F.ushln(this.shift))},U.prototype.convertFrom=function(F){var N=this.imod(F.mul(this.rinv));return N.red=null,N},U.prototype.imul=function(F,N){if(F.isZero()||N.isZero())return F.words[0]=0,F.length=1,F;var X=F.imul(N),K=X.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ne=X.isub(K).iushrn(this.shift),fe=ne;return ne.cmp(this.m)>=0?fe=ne.isub(this.m):ne.cmpn(0)<0&&(fe=ne.iadd(this.m)),fe._forceRed(this)},U.prototype.mul=function(F,N){if(F.isZero()||N.isZero())return new c(0)._forceRed(this);var X=F.mul(N),K=X.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ne=X.isub(K).iushrn(this.shift),fe=ne;return ne.cmp(this.m)>=0?fe=ne.isub(this.m):ne.cmpn(0)<0&&(fe=ne.iadd(this.m)),fe._forceRed(this)},U.prototype.invm=function(F){var N=this.imod(F._invmp(this.m).mul(this.r2));return N._forceRed(this)}}(n,this)},6204:function(n){"use strict";n.exports=a;function a(o){var s,l,u,f=o.length,c=0;for(s=0;s<f;++s)c+=o[s].length;var h=new Array(c),v=0;for(s=0;s<f;++s){var d=o[s],x=d.length;for(l=0;l<x;++l){var b=h[v++]=new Array(x-1),p=0;for(u=0;u<x;++u)u!==l&&(b[p++]=d[u]);if(l&1){var w=b[1];b[1]=b[0],b[0]=w}}}return h}},6867:function(n,a,o){"use strict";n.exports=p;var s=o(1888),l=o(855),u=o(7150);function f(w,A){for(var T=0;T<w;++T)if(!(A[T]<=A[T+w]))return!0;return!1}function c(w,A,T,k){for(var _=0,E=0,S=0,g=w.length;S<g;++S){var C=w[S];if(!f(A,C)){for(var M=0;M<2*A;++M)T[_++]=C[M];k[E++]=S}}return E}function h(w,A,T,k){var _=w.length,E=A.length;if(!(_<=0||E<=0)){var S=w[0].length>>>1;if(!(S<=0)){var g,C=s.mallocDouble(2*S*_),M=s.mallocInt32(_);if(_=c(w,S,C,M),_>0){if(S===1&&k)l.init(_),g=l.sweepComplete(S,T,0,_,C,M,0,_,C,M);else{var P=s.mallocDouble(2*S*E),D=s.mallocInt32(E);E=c(A,S,P,D),E>0&&(l.init(_+E),S===1?g=l.sweepBipartite(S,T,0,_,C,M,0,E,P,D):g=u(S,T,k,_,C,M,E,P,D),s.free(P),s.free(D))}s.free(C),s.free(M)}return g}}}var v;function d(w,A){v.push([w,A])}function x(w){return v=[],h(w,w,d,!0),v}function b(w,A){return v=[],h(w,A,d,!1),v}function p(w,A,T){switch(arguments.length){case 1:return x(w);case 2:return typeof A=="function"?h(w,w,A,!0):b(w,A);case 3:return h(w,A,T,!1);default:throw new Error("box-intersect: Invalid arguments")}}},2455:function(n,a){"use strict";function o(){function u(h,v,d,x,b,p,w,A,T,k,_){for(var E=2*h,S=x,g=E*x;S<b;++S,g+=E){var C=p[v+g],M=p[v+g+h],P=w[S];e:for(var D=A,q=E*A;D<T;++D,q+=E){var O=k[v+q],U=k[v+q+h],B=_[D];if(!(U<C||M<O)){for(var F=v+1;F<h;++F){var N=p[F+g],X=p[F+h+g],K=k[F+q],ne=k[F+h+q];if(X<K||ne<N)continue e}var fe=d(P,B);if(fe!==void 0)return fe}}}}function f(h,v,d,x,b,p,w,A,T,k,_){for(var E=2*h,S=A,g=E*A;S<T;++S,g+=E){var C=k[v+g],M=k[v+g+h],P=_[S];e:for(var D=x,q=E*x;D<b;++D,q+=E){var O=p[v+q],U=p[v+q+h],B=w[D];if(!(M<O||U<C)){for(var F=v+1;F<h;++F){var N=p[F+q],X=p[F+h+q],K=k[F+g],ne=k[F+h+g];if(X<K||ne<N)continue e}var fe=d(B,P);if(fe!==void 0)return fe}}}}function c(h,v,d,x,b,p,w,A,T,k,_){return b-x>T-A?u(h,v,d,x,b,p,w,A,T,k,_):f(h,v,d,x,b,p,w,A,T,k,_)}return c}function s(){function u(d,x,b,p,w,A,T,k,_,E,S){for(var g=2*d,C=p,M=g*p;C<w;++C,M+=g){var P=A[x+M],D=A[x+M+d],q=T[C];e:for(var O=k,U=g*k;O<_;++O,U+=g){var B=E[x+U],F=S[O];if(!(B<=P||D<B)){for(var N=x+1;N<d;++N){var X=A[N+M],K=A[N+d+M],ne=E[N+U],fe=E[N+d+U];if(K<ne||fe<X)continue e}var ue=b(F,q);if(ue!==void 0)return ue}}}}function f(d,x,b,p,w,A,T,k,_,E,S){for(var g=2*d,C=p,M=g*p;C<w;++C,M+=g){var P=A[x+M],D=A[x+M+d],q=T[C];e:for(var O=k,U=g*k;O<_;++O,U+=g){var B=E[x+U],F=S[O];if(!(B<P||D<B)){for(var N=x+1;N<d;++N){var X=A[N+M],K=A[N+d+M],ne=E[N+U],fe=E[N+d+U];if(K<ne||fe<X)continue e}var ue=b(q,F);if(ue!==void 0)return ue}}}}function c(d,x,b,p,w,A,T,k,_,E,S){for(var g=2*d,C=k,M=g*k;C<_;++C,M+=g){var P=E[x+M],D=S[C];e:for(var q=p,O=g*p;q<w;++q,O+=g){var U=A[x+O],B=A[x+O+d],F=T[q];if(!(P<=U||B<P)){for(var N=x+1;N<d;++N){var X=A[N+O],K=A[N+d+O],ne=E[N+M],fe=E[N+d+M];if(K<ne||fe<X)continue e}var ue=b(D,F);if(ue!==void 0)return ue}}}}function h(d,x,b,p,w,A,T,k,_,E,S){for(var g=2*d,C=k,M=g*k;C<_;++C,M+=g){var P=E[x+M],D=S[C];e:for(var q=p,O=g*p;q<w;++q,O+=g){var U=A[x+O],B=A[x+O+d],F=T[q];if(!(P<U||B<P)){for(var N=x+1;N<d;++N){var X=A[N+O],K=A[N+d+O],ne=E[N+M],fe=E[N+d+M];if(K<ne||fe<X)continue e}var ue=b(F,D);if(ue!==void 0)return ue}}}}function v(d,x,b,p,w,A,T,k,_,E,S,g){return A-w>E-_?p?u(d,x,b,w,A,T,k,_,E,S,g):f(d,x,b,w,A,T,k,_,E,S,g):p?c(d,x,b,w,A,T,k,_,E,S,g):h(d,x,b,w,A,T,k,_,E,S,g)}return v}function l(u){return u?o():s()}a.partial=l(!1),a.full=l(!0)},7150:function(n,a,o){"use strict";n.exports=B;var s=o(1888),l=o(8828),u=o(2455),f=u.partial,c=u.full,h=o(855),v=o(3545),d=o(8105),x=128,b=1<<22,p=1<<22,w=d("!(lo>=p0)&&!(p1>=hi)"),A=d("lo===p0"),T=d("lo<p0"),k=d("hi<=p0"),_=d("lo<=p0&&p0<=hi"),E=d("lo<p0&&p0<=hi"),S=6,g=2,C=1024,M=s.mallocInt32(C),P=s.mallocDouble(C);function D(F,N){var X=8*l.log2(N+1)*(F+1)|0,K=l.nextPow2(S*X);M.length<K&&(s.free(M),M=s.mallocInt32(K));var ne=l.nextPow2(g*X);P.length<ne&&(s.free(P),P=s.mallocDouble(ne))}function q(F,N,X,K,ne,fe,ue,ee,Z){var oe=S*F;M[oe]=N,M[oe+1]=X,M[oe+2]=K,M[oe+3]=ne,M[oe+4]=fe,M[oe+5]=ue;var ce=g*F;P[ce]=ee,P[ce+1]=Z}function O(F,N,X,K,ne,fe,ue,ee,Z,oe,ce){var le=2*F,me=Z*le,he=oe[me+N];e:for(var te=ne,ge=ne*le;te<fe;++te,ge+=le){var ae=ue[ge+N],_e=ue[ge+N+F];if(!(he<ae||_e<he)&&!(K&&he===ae)){for(var Ce=ee[te],qe=N+1;qe<F;++qe){var ae=ue[ge+qe],_e=ue[ge+qe+F],rt=oe[me+qe],Re=oe[me+qe+F];if(_e<rt||Re<ae)continue e}var Ie;if(K?Ie=X(ce,Ce):Ie=X(Ce,ce),Ie!==void 0)return Ie}}}function U(F,N,X,K,ne,fe,ue,ee,Z,oe){var ce=2*F,le=ee*ce,me=Z[le+N];e:for(var he=K,te=K*ce;he<ne;++he,te+=ce){var ge=ue[he];if(ge!==oe){var ae=fe[te+N],_e=fe[te+N+F];if(!(me<ae||_e<me)){for(var Ce=N+1;Ce<F;++Ce){var ae=fe[te+Ce],_e=fe[te+Ce+F],qe=Z[le+Ce],rt=Z[le+Ce+F];if(_e<qe||rt<ae)continue e}var Re=X(ge,oe);if(Re!==void 0)return Re}}}}function B(F,N,X,K,ne,fe,ue,ee,Z){D(F,K+ue);var oe=0,ce=2*F,le;for(q(oe++,0,0,K,0,ue,X?16:0,-1/0,1/0),X||q(oe++,0,0,ue,0,K,1,-1/0,1/0);oe>0;){oe-=1;var me=oe*S,he=M[me],te=M[me+1],ge=M[me+2],ae=M[me+3],_e=M[me+4],Ce=M[me+5],qe=oe*g,rt=P[qe],Re=P[qe+1],Ie=Ce&1,ot=!!(Ce&16),lt=ne,ht=fe,xt=ee,Vt=Z;if(Ie&&(lt=ee,ht=Z,xt=ne,Vt=fe),!(Ce&2&&(ge=T(F,he,te,ge,lt,ht,Re),te>=ge))&&!(Ce&4&&(te=k(F,he,te,ge,lt,ht,rt),te>=ge))){var Ht=ge-te,Me=_e-ae;if(ot){if(F*Ht*(Ht+Me)<p){if(le=h.scanComplete(F,he,N,te,ge,lt,ht,ae,_e,xt,Vt),le!==void 0)return le;continue}}else if(F*Math.min(Ht,Me)<x){if(le=f(F,he,N,Ie,te,ge,lt,ht,ae,_e,xt,Vt),le!==void 0)return le;continue}else if(F*Ht*Me<b){if(le=h.scanBipartite(F,he,N,Ie,te,ge,lt,ht,ae,_e,xt,Vt),le!==void 0)return le;continue}var Ke=w(F,he,te,ge,lt,ht,rt,Re);if(te<Ke)if(F*(Ke-te)<x){if(le=c(F,he+1,N,te,Ke,lt,ht,ae,_e,xt,Vt),le!==void 0)return le}else if(he===F-2){if(Ie?le=h.sweepBipartite(F,N,ae,_e,xt,Vt,te,Ke,lt,ht):le=h.sweepBipartite(F,N,te,Ke,lt,ht,ae,_e,xt,Vt),le!==void 0)return le}else q(oe++,he+1,te,Ke,ae,_e,Ie,-1/0,1/0),q(oe++,he+1,ae,_e,te,Ke,Ie^1,-1/0,1/0);if(Ke<ge){var We=v(F,he,ae,_e,xt,Vt),et=xt[ce*We+he],vt=A(F,he,We,_e,xt,Vt,et);if(vt<_e&&q(oe++,he,Ke,ge,vt,_e,(Ie|4)+(ot?16:0),et,Re),ae<We&&q(oe++,he,Ke,ge,ae,We,(Ie|2)+(ot?16:0),rt,et),We+1===vt){if(ot?le=U(F,he,N,Ke,ge,lt,ht,We,xt,Vt[We]):le=O(F,he,N,Ie,Ke,ge,lt,ht,We,xt,Vt[We]),le!==void 0)return le}else if(We<vt){var at;if(ot){if(at=_(F,he,Ke,ge,lt,ht,et),Ke<at){var Xe=A(F,he,Ke,at,lt,ht,et);if(he===F-2){if(Ke<Xe&&(le=h.sweepComplete(F,N,Ke,Xe,lt,ht,We,vt,xt,Vt),le!==void 0)||Xe<at&&(le=h.sweepBipartite(F,N,Xe,at,lt,ht,We,vt,xt,Vt),le!==void 0))return le}else Ke<Xe&&q(oe++,he+1,Ke,Xe,We,vt,16,-1/0,1/0),Xe<at&&(q(oe++,he+1,Xe,at,We,vt,0,-1/0,1/0),q(oe++,he+1,We,vt,Xe,at,1,-1/0,1/0))}}else Ie?at=E(F,he,Ke,ge,lt,ht,et):at=_(F,he,Ke,ge,lt,ht,et),Ke<at&&(he===F-2?Ie?le=h.sweepBipartite(F,N,We,vt,xt,Vt,Ke,at,lt,ht):le=h.sweepBipartite(F,N,Ke,at,lt,ht,We,vt,xt,Vt):(q(oe++,he+1,Ke,at,We,vt,Ie,-1/0,1/0),q(oe++,he+1,We,vt,Ke,at,Ie^1,-1/0,1/0)))}}}}}},3545:function(n,a,o){"use strict";n.exports=c;var s=o(8105),l=s("lo<p0"),u=8;function f(h,v,d,x,b,p){for(var w=2*h,A=w*(d+1)+v,T=d+1;T<x;++T,A+=w)for(var k=b[A],_=T,E=w*(T-1);_>d&&b[E+v]>k;--_,E-=w){for(var S=E,g=E+w,C=0;C<w;++C,++S,++g){var M=b[S];b[S]=b[g],b[g]=M}var P=p[_];p[_]=p[_-1],p[_-1]=P}}function c(h,v,d,x,b,p){if(x<=d+1)return d;for(var w=d,A=x,T=x+d>>>1,k=2*h,_=T,E=b[k*T+v];w<A;){if(A-w<u){f(h,v,w,A,b,p),E=b[k*T+v];break}var S=A-w,g=Math.random()*S+w|0,C=b[k*g+v],M=Math.random()*S+w|0,P=b[k*M+v],D=Math.random()*S+w|0,q=b[k*D+v];C<=P?q>=P?(_=M,E=P):C>=q?(_=g,E=C):(_=D,E=q):P>=q?(_=M,E=P):q>=C?(_=g,E=C):(_=D,E=q);for(var B=k*(A-1),F=k*_,O=0;O<k;++O,++B,++F){var U=b[B];b[B]=b[F],b[F]=U}var N=p[A-1];p[A-1]=p[_],p[_]=N,_=l(h,v,w,A-1,b,p,E);for(var B=k*(A-1),F=k*_,O=0;O<k;++O,++B,++F){var U=b[B];b[B]=b[F],b[F]=U}var N=p[A-1];if(p[A-1]=p[_],p[_]=N,T<_){for(A=_-1;w<A&&b[k*(A-1)+v]===E;)A-=1;A+=1}else if(_<T)for(w=_+1;w<A&&b[k*w+v]===E;)w+=1;else break}return l(h,v,d,T,b,p,b[k*T+v])}},8105:function(n){"use strict";n.exports=o;var a={"lo===p0":s,"lo<p0":l,"lo<=p0":u,"hi<=p0":f,"lo<p0&&p0<=hi":h,"lo<=p0&&p0<=hi":c,"!(lo>=p0)&&!(p1>=hi)":v};function o(d){return a[d]}function s(d,x,b,p,w,A,T){for(var k=2*d,_=k*b,E=_,S=b,g=x,C=d+x,M=b;p>M;++M,_+=k){var P=w[_+g];if(P===T)if(S===M)S+=1,E+=k;else{for(var D=0;k>D;++D){var q=w[_+D];w[_+D]=w[E],w[E++]=q}var O=A[M];A[M]=A[S],A[S++]=O}}return S}function l(d,x,b,p,w,A,T){for(var k=2*d,_=k*b,E=_,S=b,g=x,C=d+x,M=b;p>M;++M,_+=k){var P=w[_+g];if(P<T)if(S===M)S+=1,E+=k;else{for(var D=0;k>D;++D){var q=w[_+D];w[_+D]=w[E],w[E++]=q}var O=A[M];A[M]=A[S],A[S++]=O}}return S}function u(d,x,b,p,w,A,T){for(var k=2*d,_=k*b,E=_,S=b,g=x,C=d+x,M=b;p>M;++M,_+=k){var P=w[_+C];if(P<=T)if(S===M)S+=1,E+=k;else{for(var D=0;k>D;++D){var q=w[_+D];w[_+D]=w[E],w[E++]=q}var O=A[M];A[M]=A[S],A[S++]=O}}return S}function f(d,x,b,p,w,A,T){for(var k=2*d,_=k*b,E=_,S=b,g=x,C=d+x,M=b;p>M;++M,_+=k){var P=w[_+C];if(P<=T)if(S===M)S+=1,E+=k;else{for(var D=0;k>D;++D){var q=w[_+D];w[_+D]=w[E],w[E++]=q}var O=A[M];A[M]=A[S],A[S++]=O}}return S}function c(d,x,b,p,w,A,T){for(var k=2*d,_=k*b,E=_,S=b,g=x,C=d+x,M=b;p>M;++M,_+=k){var P=w[_+g],D=w[_+C];if(P<=T&&T<=D)if(S===M)S+=1,E+=k;else{for(var q=0;k>q;++q){var O=w[_+q];w[_+q]=w[E],w[E++]=O}var U=A[M];A[M]=A[S],A[S++]=U}}return S}function h(d,x,b,p,w,A,T){for(var k=2*d,_=k*b,E=_,S=b,g=x,C=d+x,M=b;p>M;++M,_+=k){var P=w[_+g],D=w[_+C];if(P<T&&T<=D)if(S===M)S+=1,E+=k;else{for(var q=0;k>q;++q){var O=w[_+q];w[_+q]=w[E],w[E++]=O}var U=A[M];A[M]=A[S],A[S++]=U}}return S}function v(d,x,b,p,w,A,T,k){for(var _=2*d,E=_*b,S=E,g=b,C=x,M=d+x,P=b;p>P;++P,E+=_){var D=w[E+C],q=w[E+M];if(!(D>=T)&&!(k>=q))if(g===P)g+=1,S+=_;else{for(var O=0;_>O;++O){var U=w[E+O];w[E+O]=w[S],w[S++]=U}var B=A[P];A[P]=A[g],A[g++]=B}}return g}},1811:function(n){"use strict";n.exports=o;var a=32;function o(x,b){b<=4*a?s(0,b-1,x):d(0,b-1,x)}function s(x,b,p){for(var w=2*(x+1),A=x+1;A<=b;++A){for(var T=p[w++],k=p[w++],_=A,E=w-2;_-- >x;){var S=p[E-2],g=p[E-1];if(S<T)break;if(S===T&&g<k)break;p[E]=S,p[E+1]=g,E-=2}p[E]=T,p[E+1]=k}}function l(x,b,p){x*=2,b*=2;var w=p[x],A=p[x+1];p[x]=p[b],p[x+1]=p[b+1],p[b]=w,p[b+1]=A}function u(x,b,p){x*=2,b*=2,p[x]=p[b],p[x+1]=p[b+1]}function f(x,b,p,w){x*=2,b*=2,p*=2;var A=w[x],T=w[x+1];w[x]=w[b],w[x+1]=w[b+1],w[b]=w[p],w[b+1]=w[p+1],w[p]=A,w[p+1]=T}function c(x,b,p,w,A){x*=2,b*=2,A[x]=A[b],A[b]=p,A[x+1]=A[b+1],A[b+1]=w}function h(x,b,p){x*=2,b*=2;var w=p[x],A=p[b];return w<A?!1:w===A?p[x+1]>p[b+1]:!0}function v(x,b,p,w){x*=2;var A=w[x];return A<b?!0:A===b?w[x+1]<p:!1}function d(x,b,p){var w=(b-x+1)/6|0,A=x+w,T=b-w,k=x+b>>1,_=k-w,E=k+w,S=A,g=_,C=k,M=E,P=T,D=x+1,q=b-1,O=0;h(S,g,p)&&(O=S,S=g,g=O),h(M,P,p)&&(O=M,M=P,P=O),h(S,C,p)&&(O=S,S=C,C=O),h(g,C,p)&&(O=g,g=C,C=O),h(S,M,p)&&(O=S,S=M,M=O),h(C,M,p)&&(O=C,C=M,M=O),h(g,P,p)&&(O=g,g=P,P=O),h(g,C,p)&&(O=g,g=C,C=O),h(M,P,p)&&(O=M,M=P,P=O);for(var U=p[2*g],B=p[2*g+1],F=p[2*M],N=p[2*M+1],X=2*S,K=2*C,ne=2*P,fe=2*A,ue=2*k,ee=2*T,Z=0;Z<2;++Z){var oe=p[X+Z],ce=p[K+Z],le=p[ne+Z];p[fe+Z]=oe,p[ue+Z]=ce,p[ee+Z]=le}u(_,x,p),u(E,b,p);for(var me=D;me<=q;++me)if(v(me,U,B,p))me!==D&&l(me,D,p),++D;else if(!v(me,F,N,p))for(;;)if(v(q,F,N,p)){v(q,U,B,p)?(f(me,D,q,p),++D,--q):(l(me,q,p),--q);break}else{if(--q<me)break;continue}c(x,D-1,U,B,p),c(b,q+1,F,N,p),D-2-x<=a?s(x,D-2,p):d(x,D-2,p),b-(q+2)<=a?s(q+2,b,p):d(q+2,b,p),q-D<=a?s(D,q,p):d(D,q,p)}},855:function(n,a,o){"use strict";n.exports={init:A,sweepBipartite:_,sweepComplete:E,scanBipartite:S,scanComplete:g};var s=o(1888),l=o(8828),u=o(1811),f=1<<28,c=1024,h=s.mallocInt32(c),v=s.mallocInt32(c),d=s.mallocInt32(c),x=s.mallocInt32(c),b=s.mallocInt32(c),p=s.mallocInt32(c),w=s.mallocDouble(c*8);function A(C){var M=l.nextPow2(C);h.length<M&&(s.free(h),h=s.mallocInt32(M)),v.length<M&&(s.free(v),v=s.mallocInt32(M)),d.length<M&&(s.free(d),d=s.mallocInt32(M)),x.length<M&&(s.free(x),x=s.mallocInt32(M)),b.length<M&&(s.free(b),b=s.mallocInt32(M)),p.length<M&&(s.free(p),p=s.mallocInt32(M));var P=8*M;w.length<P&&(s.free(w),w=s.mallocDouble(P))}function T(C,M,P,D){var q=M[D],O=C[P-1];C[q]=O,M[O]=q}function k(C,M,P,D){C[P]=D,M[D]=P}function _(C,M,P,D,q,O,U,B,F,N){for(var X=0,K=2*C,ne=C-1,fe=K-1,ue=P;ue<D;++ue){var ee=O[ue],Z=K*ue;w[X++]=q[Z+ne],w[X++]=-(ee+1),w[X++]=q[Z+fe],w[X++]=ee}for(var ue=U;ue<B;++ue){var ee=N[ue]+f,oe=K*ue;w[X++]=F[oe+ne],w[X++]=-ee,w[X++]=F[oe+fe],w[X++]=ee}var ce=X>>>1;u(w,ce);for(var le=0,me=0,ue=0;ue<ce;++ue){var he=w[2*ue+1]|0;if(he>=f)he=he-f|0,T(d,x,me--,he);else if(he>=0)T(h,v,le--,he);else if(he<=-f){he=-he-f|0;for(var te=0;te<le;++te){var ge=M(h[te],he);if(ge!==void 0)return ge}k(d,x,me++,he)}else{he=-he-1|0;for(var te=0;te<me;++te){var ge=M(he,d[te]);if(ge!==void 0)return ge}k(h,v,le++,he)}}}function E(C,M,P,D,q,O,U,B,F,N){for(var X=0,K=2*C,ne=C-1,fe=K-1,ue=P;ue<D;++ue){var ee=O[ue]+1<<1,Z=K*ue;w[X++]=q[Z+ne],w[X++]=-ee,w[X++]=q[Z+fe],w[X++]=ee}for(var ue=U;ue<B;++ue){var ee=N[ue]+1<<1,oe=K*ue;w[X++]=F[oe+ne],w[X++]=-ee|1,w[X++]=F[oe+fe],w[X++]=ee|1}var ce=X>>>1;u(w,ce);for(var le=0,me=0,he=0,ue=0;ue<ce;++ue){var te=w[2*ue+1]|0,ge=te&1;if(ue<ce-1&&te>>1===w[2*ue+3]>>1&&(ge=2,ue+=1),te<0){for(var ae=-(te>>1)-1,_e=0;_e<he;++_e){var Ce=M(b[_e],ae);if(Ce!==void 0)return Ce}if(ge!==0)for(var _e=0;_e<le;++_e){var Ce=M(h[_e],ae);if(Ce!==void 0)return Ce}if(ge!==1)for(var _e=0;_e<me;++_e){var Ce=M(d[_e],ae);if(Ce!==void 0)return Ce}ge===0?k(h,v,le++,ae):ge===1?k(d,x,me++,ae):ge===2&&k(b,p,he++,ae)}else{var ae=(te>>1)-1;ge===0?T(h,v,le--,ae):ge===1?T(d,x,me--,ae):ge===2&&T(b,p,he--,ae)}}}function S(C,M,P,D,q,O,U,B,F,N,X,K){var ne=0,fe=2*C,ue=M,ee=M+C,Z=1,oe=1;D?oe=f:Z=f;for(var ce=q;ce<O;++ce){var le=ce+Z,me=fe*ce;w[ne++]=U[me+ue],w[ne++]=-le,w[ne++]=U[me+ee],w[ne++]=le}for(var ce=F;ce<N;++ce){var le=ce+oe,he=fe*ce;w[ne++]=X[he+ue],w[ne++]=-le}var te=ne>>>1;u(w,te);for(var ge=0,ce=0;ce<te;++ce){var ae=w[2*ce+1]|0;if(ae<0){var le=-ae,_e=!1;if(le>=f?(_e=!D,le-=f):(_e=!!D,le-=1),_e)k(h,v,ge++,le);else{var Ce=K[le],qe=fe*le,rt=X[qe+M+1],Re=X[qe+M+1+C];e:for(var Ie=0;Ie<ge;++Ie){var ot=h[Ie],lt=fe*ot;if(!(Re<U[lt+M+1]||U[lt+M+1+C]<rt)){for(var ht=M+2;ht<C;++ht)if(X[qe+ht+C]<U[lt+ht]||U[lt+ht+C]<X[qe+ht])continue e;var xt=B[ot],Vt;if(D?Vt=P(Ce,xt):Vt=P(xt,Ce),Vt!==void 0)return Vt}}}}else T(h,v,ge--,ae-Z)}}function g(C,M,P,D,q,O,U,B,F,N,X){for(var K=0,ne=2*C,fe=M,ue=M+C,ee=D;ee<q;++ee){var Z=ee+f,oe=ne*ee;w[K++]=O[oe+fe],w[K++]=-Z,w[K++]=O[oe+ue],w[K++]=Z}for(var ee=B;ee<F;++ee){var Z=ee+1,ce=ne*ee;w[K++]=N[ce+fe],w[K++]=-Z}var le=K>>>1;u(w,le);for(var me=0,ee=0;ee<le;++ee){var he=w[2*ee+1]|0;if(he<0){var Z=-he;if(Z>=f)h[me++]=Z-f;else{Z-=1;var te=X[Z],ge=ne*Z,ae=N[ge+M+1],_e=N[ge+M+1+C];e:for(var Ce=0;Ce<me;++Ce){var qe=h[Ce],rt=U[qe];if(rt===te)break;var Re=ne*qe;if(!(_e<O[Re+M+1]||O[Re+M+1+C]<ae)){for(var Ie=M+2;Ie<C;++Ie)if(N[ge+Ie+C]<O[Re+Ie]||O[Re+Ie+C]<N[ge+Ie])continue e;var ot=P(rt,te);if(ot!==void 0)return ot}}}}else{for(var Z=he-f,Ce=me-1;Ce>=0;--Ce)if(h[Ce]===Z){for(var Ie=Ce+1;Ie<me;++Ie)h[Ie-1]=h[Ie];break}--me}}}},2538:function(n,a,o){"use strict";var s=o(8902),l=o(5542),u=o(2272),f=o(5023);n.exports=x;function c(b){return[Math.min(b[0],b[1]),Math.max(b[0],b[1])]}function h(b,p){return b[0]-p[0]||b[1]-p[1]}function v(b){return b.map(c).sort(h)}function d(b,p,w){return p in b?b[p]:w}function x(b,p,w){Array.isArray(p)?(w=w||{},p=p||[]):(w=p||{},p=[]);var A=!!d(w,"delaunay",!0),T=!!d(w,"interior",!0),k=!!d(w,"exterior",!0),_=!!d(w,"infinity",!1);if(!T&&!k||b.length===0)return[];var E=s(b,p);if(A||T!==k||_){for(var S=l(b.length,v(p)),g=0;g<E.length;++g){var C=E[g];S.addTriangle(C[0],C[1],C[2])}return A&&u(b,S),k?T?_?f(S,0,_):S.cells():f(S,1,_):f(S,-1)}else return E}},2272:function(n,a,o){"use strict";var s=o(2646)[4],l=o(2478);n.exports=f;function u(c,h,v,d,x,b){var p=h.opposite(d,x);if(!(p<0)){if(x<d){var w=d;d=x,x=w,w=b,b=p,p=w}h.isConstraint(d,x)||s(c[d],c[x],c[b],c[p])<0&&v.push(d,x)}}function f(c,h){for(var v=[],d=c.length,x=h.stars,b=0;b<d;++b)for(var p=x[b],w=1;w<p.length;w+=2){var A=p[w];if(!(A<b)&&!h.isConstraint(b,A)){for(var T=p[w-1],k=-1,_=1;_<p.length;_+=2)if(p[_-1]===A){k=p[_];break}k<0||s(c[b],c[A],c[T],c[k])<0&&v.push(b,A)}}for(;v.length>0;){for(var A=v.pop(),b=v.pop(),T=-1,k=-1,p=x[b],E=1;E<p.length;E+=2){var S=p[E-1],g=p[E];S===A?k=g:g===A&&(T=S)}T<0||k<0||s(c[b],c[A],c[T],c[k])>=0||(h.flip(b,A),u(c,h,v,T,b,k),u(c,h,v,b,k,T),u(c,h,v,k,A,T),u(c,h,v,A,T,k))}}},5023:function(n,a,o){"use strict";var s=o(2478);n.exports=v;function l(d,x,b,p,w,A,T){this.cells=d,this.neighbor=x,this.flags=p,this.constraint=b,this.active=w,this.next=A,this.boundary=T}var u=l.prototype;function f(d,x){return d[0]-x[0]||d[1]-x[1]||d[2]-x[2]}u.locate=function(){var d=[0,0,0];return function(x,b,p){var w=x,A=b,T=p;return b<p?b<x&&(w=b,A=p,T=x):p<x&&(w=p,A=x,T=b),w<0?-1:(d[0]=w,d[1]=A,d[2]=T,s.eq(this.cells,d,f))}}();function c(d,x){for(var b=d.cells(),p=b.length,w=0;w<p;++w){var A=b[w],T=A[0],k=A[1],_=A[2];k<_?k<T&&(A[0]=k,A[1]=_,A[2]=T):_<T&&(A[0]=_,A[1]=T,A[2]=k)}b.sort(f);for(var E=new Array(p),w=0;w<E.length;++w)E[w]=0;var S=[],g=[],C=new Array(3*p),M=new Array(3*p),P=null;x&&(P=[]);for(var D=new l(b,C,M,E,S,g,P),w=0;w<p;++w)for(var A=b[w],q=0;q<3;++q){var T=A[q],k=A[(q+1)%3],O=C[3*w+q]=D.locate(k,T,d.opposite(k,T)),U=M[3*w+q]=d.isConstraint(T,k);O<0&&(U?g.push(w):(S.push(w),E[w]=1),x&&P.push([k,T,-1]))}return D}function h(d,x,b){for(var p=0,w=0;w<d.length;++w)x[w]===b&&(d[p++]=d[w]);return d.length=p,d}function v(d,x,b){var p=c(d,b);if(x===0)return b?p.cells.concat(p.boundary):p.cells;for(var w=1,A=p.active,T=p.next,k=p.flags,_=p.cells,E=p.constraint,S=p.neighbor;A.length>0||T.length>0;){for(;A.length>0;){var g=A.pop();if(k[g]!==-w){k[g]=w;for(var C=_[g],M=0;M<3;++M){var P=S[3*g+M];P>=0&&k[P]===0&&(E[3*g+M]?T.push(P):(A.push(P),k[P]=w))}}}var D=T;T=A,A=D,T.length=0,w=-w}var q=h(_,k,x);return b?q.concat(p.boundary):q}},8902:function(n,a,o){"use strict";var s=o(2478),l=o(3250)[3],u=0,f=1,c=2;n.exports=T;function h(k,_,E,S,g){this.a=k,this.b=_,this.idx=E,this.lowerIds=S,this.upperIds=g}function v(k,_,E,S){this.a=k,this.b=_,this.type=E,this.idx=S}function d(k,_){var E=k.a[0]-_.a[0]||k.a[1]-_.a[1]||k.type-_.type;return E||k.type!==u&&(E=l(k.a,k.b,_.b),E)?E:k.idx-_.idx}function x(k,_){return l(k.a,k.b,_)}function b(k,_,E,S,g){for(var C=s.lt(_,S,x),M=s.gt(_,S,x),P=C;P<M;++P){for(var D=_[P],q=D.lowerIds,U=q.length;U>1&&l(E[q[U-2]],E[q[U-1]],S)>0;)k.push([q[U-1],q[U-2],g]),U-=1;q.length=U,q.push(g);for(var O=D.upperIds,U=O.length;U>1&&l(E[O[U-2]],E[O[U-1]],S)<0;)k.push([O[U-2],O[U-1],g]),U-=1;O.length=U,O.push(g)}}function p(k,_){var E;return k.a[0]<_.a[0]?E=l(k.a,k.b,_.a):E=l(_.b,_.a,k.a),E||(_.b[0]<k.b[0]?E=l(k.a,k.b,_.b):E=l(_.b,_.a,k.b),E||k.idx-_.idx)}function w(k,_,E){var S=s.le(k,E,p),g=k[S],C=g.upperIds,M=C[C.length-1];g.upperIds=[M],k.splice(S+1,0,new h(E.a,E.b,E.idx,[M],C))}function A(k,_,E){var S=E.a;E.a=E.b,E.b=S;var g=s.eq(k,E,p),C=k[g],M=k[g-1];M.upperIds=C.upperIds,k.splice(g,1)}function T(k,_){for(var E=k.length,S=_.length,g=[],C=0;C<E;++C)g.push(new v(k[C],null,u,C));for(var C=0;C<S;++C){var M=_[C],P=k[M[0]],D=k[M[1]];P[0]<D[0]?g.push(new v(P,D,c,C),new v(D,P,f,C)):P[0]>D[0]&&g.push(new v(D,P,c,C),new v(P,D,f,C))}g.sort(d);for(var q=g[0].a[0]-(1+Math.abs(g[0].a[0]))*Math.pow(2,-52),O=[new h([q,1],[q,0],-1,[],[],[],[])],U=[],C=0,B=g.length;C<B;++C){var F=g[C],N=F.type;N===u?b(U,O,k,F.a,F.idx):N===c?w(O,k,F):A(O,k,F)}return U}},5542:function(n,a,o){"use strict";var s=o(2478);n.exports=c;function l(h,v){this.stars=h,this.edges=v}var u=l.prototype;function f(h,v,d){for(var x=1,b=h.length;x<b;x+=2)if(h[x-1]===v&&h[x]===d){h[x-1]=h[b-2],h[x]=h[b-1],h.length=b-2;return}}u.isConstraint=function(){var h=[0,0];function v(d,x){return d[0]-x[0]||d[1]-x[1]}return function(d,x){return h[0]=Math.min(d,x),h[1]=Math.max(d,x),s.eq(this.edges,h,v)>=0}}(),u.removeTriangle=function(h,v,d){var x=this.stars;f(x[h],v,d),f(x[v],d,h),f(x[d],h,v)},u.addTriangle=function(h,v,d){var x=this.stars;x[h].push(v,d),x[v].push(d,h),x[d].push(h,v)},u.opposite=function(h,v){for(var d=this.stars[v],x=1,b=d.length;x<b;x+=2)if(d[x]===h)return d[x-1];return-1},u.flip=function(h,v){var d=this.opposite(h,v),x=this.opposite(v,h);this.removeTriangle(h,v,d),this.removeTriangle(v,h,x),this.addTriangle(h,x,d),this.addTriangle(v,d,x)},u.edges=function(){for(var h=this.stars,v=[],d=0,x=h.length;d<x;++d)for(var b=h[d],p=0,w=b.length;p<w;p+=2)v.push([b[p],b[p+1]]);return v},u.cells=function(){for(var h=this.stars,v=[],d=0,x=h.length;d<x;++d)for(var b=h[d],p=0,w=b.length;p<w;p+=2){var A=b[p],T=b[p+1];d<Math.min(A,T)&&v.push([d,A,T])}return v};function c(h,v){for(var d=new Array(h),x=0;x<h;++x)d[x]=[];return new l(d,v)}},2419:function(n){"use strict";n.exports=a;function a(o){for(var s=1,l=1;l<o.length;++l)for(var u=0;u<l;++u)if(o[l]<o[u])s=-s;else if(o[u]===o[l])return 0;return s}},3628:function(n,a,o){"use strict";var s=o(1338),l=o(727);function u(h,v){for(var d=0,x=h.length,b=0;b<x;++b)d+=h[b]*v[b];return d}function f(h){var v=h.length;if(v===0)return[];var d=h[0].length,x=s([h.length+1,h.length+1],1),b=s([h.length+1],1);x[v][v]=0;for(var p=0;p<v;++p){for(var w=0;w<=p;++w)x[w][p]=x[p][w]=2*u(h[p],h[w]);b[p]=u(h[p],h[p])}for(var A=l(x,b),T=0,k=A[v+1],p=0;p<k.length;++p)T+=k[p];for(var _=new Array(v),p=0;p<v;++p){for(var k=A[p],E=0,w=0;w<k.length;++w)E+=k[w];_[p]=E/T}return _}function c(h){if(h.length===0)return[];for(var v=h[0].length,d=s([v]),x=f(h),b=0;b<h.length;++b)for(var p=0;p<v;++p)d[p]+=h[b][p]*x[b];return d}c.barycenetric=f,n.exports=c},6037:function(n,a,o){n.exports=l;var s=o(3628);function l(u){for(var f=s(u),c=0,h=0;h<u.length;++h)for(var v=u[h],d=0;d<f.length;++d)c+=Math.pow(v[d]-f[d],2);return Math.sqrt(c/u.length)}},332:function(n,a,o){"use strict";n.exports=P;var s=o(1755),l=o(6867),u=o(1125),f=o(7842),c=o(1318),h=o(946),v=o(5838),d=o(1278),x=o(3637);function b(D){var q=h(D);return[d(q,-1/0),d(q,1/0)]}function p(D,q){for(var O=new Array(q.length),U=0;U<q.length;++U){var B=q[U],F=D[B[0]],N=D[B[1]];O[U]=[d(Math.min(F[0],N[0]),-1/0),d(Math.min(F[1],N[1]),-1/0),d(Math.max(F[0],N[0]),1/0),d(Math.max(F[1],N[1]),1/0)]}return O}function w(D){for(var q=new Array(D.length),O=0;O<D.length;++O){var U=D[O];q[O]=[d(U[0],-1/0),d(U[1],-1/0),d(U[0],1/0),d(U[1],1/0)]}return q}function A(D,q,O){var U=[];return l(O,function(B,F){var N=q[B],X=q[F];if(!(N[0]===X[0]||N[0]===X[1]||N[1]===X[0]||N[1]===X[1])){var K=D[N[0]],ne=D[N[1]],fe=D[X[0]],ue=D[X[1]];u(K,ne,fe,ue)&&U.push([B,F])}}),U}function T(D,q,O,U){var B=[];return l(O,U,function(F,N){var X=q[F];if(!(X[0]===N||X[1]===N)){var K=D[N],ne=D[X[0]],fe=D[X[1]];u(ne,fe,K,K)&&B.push([F,N])}}),B}function k(D,q,O,U,B){var F,N,X=D.map(function(qe){return[f(qe[0]),f(qe[1])]});for(F=0;F<O.length;++F){var K=O[F];N=K[0];var ne=K[1],fe=q[N],ue=q[ne],ee=x(v(D[fe[0]]),v(D[fe[1]]),v(D[ue[0]]),v(D[ue[1]]));if(ee){var Z=D.length;D.push([h(ee[0]),h(ee[1])]),X.push(ee),U.push([N,Z],[ne,Z])}}for(U.sort(function(qe,rt){if(qe[0]!==rt[0])return qe[0]-rt[0];var Re=X[qe[1]],Ie=X[rt[1]];return c(Re[0],Ie[0])||c(Re[1],Ie[1])}),F=U.length-1;F>=0;--F){var oe=U[F];N=oe[0];var ce=q[N],le=ce[0],me=ce[1],he=D[le],te=D[me];if((he[0]-te[0]||he[1]-te[1])<0){var ge=le;le=me,me=ge}ce[0]=le;var ae=ce[1]=oe[1],_e;for(B&&(_e=ce[2]);F>0&&U[F-1][0]===N;){var oe=U[--F],Ce=oe[1];B?q.push([ae,Ce,_e]):q.push([ae,Ce]),ae=Ce}B?q.push([ae,me,_e]):q.push([ae,me])}return X}function _(D,q,O){for(var U=q.length,B=new s(U),F=[],N=0;N<q.length;++N){var X=q[N],K=b(X[0]),ne=b(X[1]);F.push([d(K[0],-1/0),d(ne[0],-1/0),d(K[1],1/0),d(ne[1],1/0)])}l(F,function(oe,ce){B.link(oe,ce)});for(var fe=!0,ue=new Array(U),N=0;N<U;++N){var ee=B.find(N);ee!==N&&(fe=!1,D[ee]=[Math.min(D[N][0],D[ee][0]),Math.min(D[N][1],D[ee][1])])}if(fe)return null;for(var Z=0,N=0;N<U;++N){var ee=B.find(N);ee===N?(ue[N]=Z,D[Z++]=D[N]):ue[N]=-1}D.length=Z;for(var N=0;N<U;++N)ue[N]<0&&(ue[N]=ue[B.find(N)]);return ue}function E(D,q){return D[0]-q[0]||D[1]-q[1]}function S(D,q){var O=D[0]-q[0]||D[1]-q[1];return O||(D[2]<q[2]?-1:D[2]>q[2]?1:0)}function g(D,q,O){if(D.length!==0){if(q)for(var U=0;U<D.length;++U){var B=D[U],F=q[B[0]],N=q[B[1]];B[0]=Math.min(F,N),B[1]=Math.max(F,N)}else for(var U=0;U<D.length;++U){var B=D[U],F=B[0],N=B[1];B[0]=Math.min(F,N),B[1]=Math.max(F,N)}O?D.sort(S):D.sort(E);for(var X=1,U=1;U<D.length;++U){var K=D[U-1],ne=D[U];ne[0]===K[0]&&ne[1]===K[1]&&(!O||ne[2]===K[2])||(D[X++]=ne)}D.length=X}}function C(D,q,O){var U=_(D,[],w(D));return g(q,U,O),!!U}function M(D,q,O){var U=p(D,q),B=A(D,q,U),F=w(D),N=T(D,q,U,F),X=k(D,q,B,N,O),K=_(D,X,F);return g(q,K,O),K?!0:B.length>0||N.length>0}function P(D,q,O){var U;if(O){U=q;for(var B=new Array(q.length),F=0;F<q.length;++F){var N=q[F];B[F]=[N[0],N[1],O[F]]}q=B}for(var X=C(D,q,!!O);M(D,q,!!O);)X=!0;if(O&&X){U.length=0,O.length=0;for(var F=0;F<q.length;++F){var N=q[F];U.push([N[0],N[1]]),O.push(N[2])}}return X}},3637:function(n,a,o){"use strict";n.exports=x;var s=o(6504),l=o(8697),u=o(5572),f=o(7721),c=o(544),h=o(2653),v=o(8987);function d(b,p){return u(s(b[0],p[1]),s(b[1],p[0]))}function x(b,p,w,A){var T=c(p,b),k=c(A,w),_=d(T,k);if(f(_)===0)return null;var E=c(b,w),S=d(k,E),g=l(S,_),C=v(T,g),M=h(b,C);return M}},3642:function(n){n.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},6729:function(n,a,o){"use strict";var s=o(3642),l=o(395);n.exports=u;function u(v){var d,x,b,p,w,A,T,k,g,_,E;if(v||(v={}),k=(v.nshades||72)-1,T=v.format||"hex",A=v.colormap,A||(A="jet"),typeof A=="string"){if(A=A.toLowerCase(),!s[A])throw Error(A+" not a supported colorscale");w=s[A]}else if(Array.isArray(A))w=A.slice();else throw Error("unsupported colormap option",A);if(w.length>k+1)throw new Error(A+" map requires nshades to be at least size "+w.length);Array.isArray(v.alpha)?v.alpha.length!==2?_=[1,1]:_=v.alpha.slice():typeof v.alpha=="number"?_=[v.alpha,v.alpha]:_=[1,1],d=w.map(function(P){return Math.round(P.index*k)}),_[0]=Math.min(Math.max(_[0],0),1),_[1]=Math.min(Math.max(_[1],0),1);var S=w.map(function(P,D){var q=w[D].index,O=w[D].rgb.slice();return O.length===4&&O[3]>=0&&O[3]<=1||(O[3]=_[0]+(_[1]-_[0])*q),O}),g=[];for(E=0;E<d.length-1;++E){p=d[E+1]-d[E],x=S[E],b=S[E+1];for(var C=0;C<p;C++){var M=C/p;g.push([Math.round(l(x[0],b[0],M)),Math.round(l(x[1],b[1],M)),Math.round(l(x[2],b[2],M)),l(x[3],b[3],M)])}}return g.push(w[w.length-1].rgb.concat(_[1])),T==="hex"?g=g.map(c):T==="rgbaString"?g=g.map(h):T==="float"&&(g=g.map(f)),g}function f(v){return[v[0]/255,v[1]/255,v[2]/255,v[3]]}function c(v){for(var d,x="#",b=0;b<3;++b)d=v[b],d=d.toString(16),x+=("00"+d).substr(d.length);return x}function h(v){return"rgba("+v.join(",")+")"}},3140:function(n,a,o){"use strict";n.exports=v;var s=o(3250),l=o(8572),u=o(9362),f=o(5382),c=o(8210);function h(d,x,b){var p=u(d[0],-x[0]),w=u(d[1],-x[1]),A=u(b[0],-x[0]),T=u(b[1],-x[1]),k=c(f(p,A),f(w,T));return k[k.length-1]>=0}function v(d,x,b,p){var w=s(x,b,p);if(w===0){var A=l(s(d,x,b)),T=l(s(d,x,p));if(A===T){if(A===0){var k=h(d,x,b),_=h(d,x,p);return k===_?0:k?1:-1}return 0}else{if(T===0)return A>0||h(d,x,p)?-1:1;if(A===0)return T>0||h(d,x,b)?1:-1}return l(T-A)}var E=s(d,x,b);if(E>0)return w>0&&s(d,x,p)>0?1:-1;if(E<0)return w>0||s(d,x,p)>0?1:-1;var S=s(d,x,p);return S>0||h(d,x,b)?1:-1}},8572:function(n){"use strict";n.exports=function(o){return o<0?-1:o>0?1:0}},8507:function(n){n.exports=s;var a=Math.min;function o(l,u){return l-u}function s(l,u){var f=l.length,c=l.length-u.length;if(c)return c;switch(f){case 0:return 0;case 1:return l[0]-u[0];case 2:return l[0]+l[1]-u[0]-u[1]||a(l[0],l[1])-a(u[0],u[1]);case 3:var h=l[0]+l[1],v=u[0]+u[1];if(c=h+l[2]-(v+u[2]),c)return c;var d=a(l[0],l[1]),x=a(u[0],u[1]);return a(d,l[2])-a(x,u[2])||a(d+l[2],h)-a(x+u[2],v);case 4:var b=l[0],p=l[1],w=l[2],A=l[3],T=u[0],k=u[1],_=u[2],E=u[3];return b+p+w+A-(T+k+_+E)||a(b,p,w,A)-a(T,k,_,E,T)||a(b+p,b+w,b+A,p+w,p+A,w+A)-a(T+k,T+_,T+E,k+_,k+E,_+E)||a(b+p+w,b+p+A,b+w+A,p+w+A)-a(T+k+_,T+k+E,T+_+E,k+_+E);default:for(var S=l.slice().sort(o),g=u.slice().sort(o),C=0;C<f;++C)if(c=S[C]-g[C],c)return c;return 0}}},3788:function(n,a,o){"use strict";var s=o(8507),l=o(2419);n.exports=u;function u(f,c){return s(f,c)||l(f)-l(c)}},7352:function(n,a,o){"use strict";var s=o(5721),l=o(4750),u=o(2690);n.exports=f;function f(c){var h=c.length;if(h===0)return[];if(h===1)return[[0]];var v=c[0].length;return v===0?[]:v===1?s(c):v===2?l(c):u(c,v)}},5721:function(n){"use strict";n.exports=a;function a(o){for(var s=0,l=0,u=1;u<o.length;++u)o[u][0]<o[s][0]&&(s=u),o[u][0]>o[l][0]&&(l=u);return s<l?[[s],[l]]:s>l?[[l],[s]]:[[s]]}},4750:function(n,a,o){"use strict";n.exports=l;var s=o(3090);function l(u){var f=s(u),c=f.length;if(c<=2)return[];for(var h=new Array(c),v=f[c-1],d=0;d<c;++d){var x=f[d];h[d]=[v,x],v=x}return h}},2690:function(n,a,o){"use strict";n.exports=c;var s=o(8954),l=o(3952);function u(h,v){for(var d=h.length,x=new Array(d),b=0;b<v.length;++b)x[b]=h[v[b]];for(var p=v.length,b=0;b<d;++b)v.indexOf(b)<0&&(x[p++]=h[b]);return x}function f(h,v){for(var d=h.length,x=v.length,b=0;b<d;++b)for(var p=h[b],w=0;w<p.length;++w){var A=p[w];if(A<x)p[w]=v[A];else{A=A-x;for(var T=0;T<x;++T)A>=v[T]&&(A+=1);p[w]=A}}return h}function c(h,v){try{return s(h,!0)}catch(p){var d=l(h);if(d.length<=v)return[];var x=u(h,d),b=s(x,!0);return f(b,d)}}},4769:function(n){"use strict";function a(s,l,u,f,c,h){var v=6*c*c-6*c,d=3*c*c-4*c+1,x=-6*c*c+6*c,b=3*c*c-2*c;if(s.length){h||(h=new Array(s.length));for(var p=s.length-1;p>=0;--p)h[p]=v*s[p]+d*l[p]+x*u[p]+b*f[p];return h}return v*s+d*l+x*u[p]+b*f}function o(s,l,u,f,c,h){var v=c-1,d=c*c,x=v*v,b=(1+2*c)*x,p=c*x,w=d*(3-2*c),A=d*v;if(s.length){h||(h=new Array(s.length));for(var T=s.length-1;T>=0;--T)h[T]=b*s[T]+p*l[T]+w*u[T]+A*f[T];return h}return b*s+p*l+w*u+A*f}n.exports=o,n.exports.derivative=a},7642:function(n,a,o){"use strict";var s=o(8954),l=o(1682);n.exports=h;function u(v,d){this.point=v,this.index=d}function f(v,d){for(var x=v.point,b=d.point,p=x.length,w=0;w<p;++w){var A=b[w]-x[w];if(A)return A}return 0}function c(v,d,x){if(v===1)return x?[[-1,0]]:[];var b=d.map(function(k,_){return[k[0],_]});b.sort(function(k,_){return k[0]-_[0]});for(var p=new Array(v-1),w=1;w<v;++w){var A=b[w-1],T=b[w];p[w-1]=[A[1],T[1]]}return x&&p.push([-1,p[0][1]],[p[v-1][1],-1]),p}function h(v,d){var x=v.length;if(x===0)return[];var b=v[0].length;if(b<1)return[];if(b===1)return c(x,v,d);for(var p=new Array(x),w=1,A=0;A<x;++A){for(var T=v[A],k=new Array(b+1),_=0,E=0;E<b;++E){var S=T[E];k[E]=S,_+=S*S}k[b]=_,p[A]=new u(k,A),w=Math.max(_,w)}l(p,f),x=p.length;for(var g=new Array(x+b+1),C=new Array(x+b+1),M=(b+1)*(b+1)*w,P=new Array(b+1),A=0;A<=b;++A)P[A]=0;P[b]=M,g[0]=P.slice(),C[0]=-1;for(var A=0;A<=b;++A){var k=P.slice();k[A]=1,g[A+1]=k,C[A+1]=-1}for(var A=0;A<x;++A){var D=p[A];g[A+b+1]=D.point,C[A+b+1]=D.index}var q=s(g,!1);if(d?q=q.filter(function(O){for(var U=0,B=0;B<=b;++B){var F=C[O[B]];if(F<0&&++U>=2)return!1;O[B]=F}return!0}):q=q.filter(function(O){for(var U=0;U<=b;++U){var B=C[O[U]];if(B<0)return!1;O[U]=B}return!0}),b&1)for(var A=0;A<q.length;++A){var D=q[A],k=D[0];D[0]=D[1],D[1]=k}return q}},2361:function(n){var a=!1;if(typeof Float64Array!="undefined"){var o=new Float64Array(1),s=new Uint32Array(o.buffer);if(o[0]=1,a=!0,s[1]===1072693248){let w=function(k,_){return s[0]=k,s[1]=_,o[0]},A=function(k){return o[0]=k,s[0]},T=function(k){return o[0]=k,s[1]};var u=w,f=A,c=T;n.exports=function(_){return o[0]=_,[s[0],s[1]]},n.exports.pack=w,n.exports.lo=A,n.exports.hi=T}else if(s[0]===1072693248){let w=function(k,_){return s[1]=k,s[0]=_,o[0]},A=function(k){return o[0]=k,s[1]},T=function(k){return o[0]=k,s[0]};var h=w,v=A,d=T;n.exports=function(_){return o[0]=_,[s[1],s[0]]},n.exports.pack=w,n.exports.lo=A,n.exports.hi=T}else a=!1}if(!a){let w=function(k,_){return l.writeUInt32LE(k,0,!0),l.writeUInt32LE(_,4,!0),l.readDoubleLE(0,!0)},A=function(k){return l.writeDoubleLE(k,0,!0),l.readUInt32LE(0,!0)},T=function(k){return l.writeDoubleLE(k,0,!0),l.readUInt32LE(4,!0)};var x=w,b=A,p=T,l=new Buffer(8);n.exports=function(_){return l.writeDoubleLE(_,0,!0),[l.readUInt32LE(0,!0),l.readUInt32LE(4,!0)]},n.exports.pack=w,n.exports.lo=A,n.exports.hi=T}n.exports.sign=function(w){return n.exports.hi(w)>>>31},n.exports.exponent=function(w){var A=n.exports.hi(w);return(A<<1>>>21)-1023},n.exports.fraction=function(w){var A=n.exports.lo(w),T=n.exports.hi(w),k=T&(1<<20)-1;return T&2146435072&&(k+=1048576),[A,k]},n.exports.denormalized=function(w){var A=n.exports.hi(w);return!(A&2146435072)}},1338:function(n){"use strict";function a(l,u,f){var c=l[f]|0;if(c<=0)return[];var h=new Array(c),v;if(f===l.length-1)for(v=0;v<c;++v)h[v]=u;else for(v=0;v<c;++v)h[v]=a(l,u,f+1);return h}function o(l,u){var f,c;for(f=new Array(l),c=0;c<l;++c)f[c]=u;return f}function s(l,u){switch(typeof u=="undefined"&&(u=0),typeof l){case"number":if(l>0)return o(l|0,u);break;case"object":if(typeof l.length=="number")return a(l,u,0);break}return[]}n.exports=s},3134:function(n,a,o){"use strict";n.exports=l;var s=o(1682);function l(u,f){var c=u.length;if(typeof f!="number"){f=0;for(var h=0;h<c;++h){var v=u[h];f=Math.max(f,v[0],v[1])}f=(f|0)+1}f=f|0;for(var d=new Array(f),h=0;h<f;++h)d[h]=[];for(var h=0;h<c;++h){var v=u[h];d[v[0]].push(v[1]),d[v[1]].push(v[0])}for(var x=0;x<f;++x)s(d[x],function(b,p){return b-p});return d}},5033:function(n){"use strict";n.exports=a;function a(o,s,l){var u=s||0,f=l||1;return[[o[12]+o[0],o[13]+o[1],o[14]+o[2],o[15]+o[3]],[o[12]-o[0],o[13]-o[1],o[14]-o[2],o[15]-o[3]],[o[12]+o[4],o[13]+o[5],o[14]+o[6],o[15]+o[7]],[o[12]-o[4],o[13]-o[5],o[14]-o[6],o[15]-o[7]],[u*o[12]+o[8],u*o[13]+o[9],u*o[14]+o[10],u*o[15]+o[11]],[f*o[12]-o[8],f*o[13]-o[9],f*o[14]-o[10],f*o[15]-o[11]]]}},9215:function(n,a,o){"use strict";n.exports=v;var s=o(4769),l=o(2478);function u(d,x,b){return Math.min(x,Math.max(d,b))}function f(d,x,b){this.dimension=d.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var p=0;p<this.dimension;++p)this.bounds[0][p]=-1/0,this.bounds[1][p]=1/0;this._state=d.slice().reverse(),this._velocity=x.slice().reverse(),this._time=[b],this._scratch=[d.slice(),d.slice(),d.slice(),d.slice(),d.slice()]}var c=f.prototype;c.flush=function(d){var x=l.gt(this._time,d)-1;x<=0||(this._time.splice(0,x),this._state.splice(0,x*this.dimension),this._velocity.splice(0,x*this.dimension))},c.curve=function(d){var x=this._time,b=x.length,p=l.le(x,d),w=this._scratch[0],A=this._state,T=this._velocity,k=this.dimension,_=this.bounds;if(p<0)for(var E=k-1,S=0;S<k;++S,--E)w[S]=A[E];else if(p>=b-1)for(var E=A.length-1,g=d-x[b-1],S=0;S<k;++S,--E)w[S]=A[E]+g*T[E];else{for(var E=k*(p+1)-1,C=x[p],M=x[p+1],P=M-C||1,D=this._scratch[1],q=this._scratch[2],O=this._scratch[3],U=this._scratch[4],B=!0,S=0;S<k;++S,--E)D[S]=A[E],O[S]=T[E]*P,q[S]=A[E+k],U[S]=T[E+k]*P,B=B&&D[S]===q[S]&&O[S]===U[S]&&O[S]===0;if(B)for(var S=0;S<k;++S)w[S]=D[S];else s(D,O,q,U,(d-C)/P,w)}for(var F=_[0],N=_[1],S=0;S<k;++S)w[S]=u(F[S],N[S],w[S]);return w},c.dcurve=function(d){var x=this._time,b=x.length,p=l.le(x,d),w=this._scratch[0],A=this._state,T=this._velocity,k=this.dimension;if(p>=b-1)for(var _=A.length-1,E=d-x[b-1],S=0;S<k;++S,--_)w[S]=T[_];else{for(var _=k*(p+1)-1,g=x[p],C=x[p+1],M=C-g||1,P=this._scratch[1],D=this._scratch[2],q=this._scratch[3],O=this._scratch[4],U=!0,S=0;S<k;++S,--_)P[S]=A[_],q[S]=T[_]*M,D[S]=A[_+k],O[S]=T[_+k]*M,U=U&&P[S]===D[S]&&q[S]===O[S]&&q[S]===0;if(U)for(var S=0;S<k;++S)w[S]=0;else{s.derivative(P,q,D,O,(d-g)/M,w);for(var S=0;S<k;++S)w[S]/=M}}return w},c.lastT=function(){var d=this._time;return d[d.length-1]},c.stable=function(){for(var d=this._velocity,x=d.length,b=this.dimension-1;b>=0;--b)if(d[--x])return!1;return!0},c.jump=function(d){var x=this.lastT(),b=this.dimension;if(!(d<x||arguments.length!==b+1)){var p=this._state,w=this._velocity,A=p.length-this.dimension,T=this.bounds,k=T[0],_=T[1];this._time.push(x,d);for(var E=0;E<2;++E)for(var S=0;S<b;++S)p.push(p[A++]),w.push(0);this._time.push(d);for(var S=b;S>0;--S)p.push(u(k[S-1],_[S-1],arguments[S])),w.push(0)}},c.push=function(d){var x=this.lastT(),b=this.dimension;if(!(d<x||arguments.length!==b+1)){var p=this._state,w=this._velocity,A=p.length-this.dimension,T=d-x,k=this.bounds,_=k[0],E=k[1],S=T>1e-6?1/T:0;this._time.push(d);for(var g=b;g>0;--g){var C=u(_[g-1],E[g-1],arguments[g]);p.push(C),w.push((C-p[A++])*S)}}},c.set=function(d){var x=this.dimension;if(!(d<this.lastT()||arguments.length!==x+1)){var b=this._state,p=this._velocity,w=this.bounds,A=w[0],T=w[1];this._time.push(d);for(var k=x;k>0;--k)b.push(u(A[k-1],T[k-1],arguments[k])),p.push(0)}},c.move=function(d){var x=this.lastT(),b=this.dimension;if(!(d<=x||arguments.length!==b+1)){var p=this._state,w=this._velocity,A=p.length-this.dimension,T=this.bounds,k=T[0],_=T[1],E=d-x,S=E>1e-6?1/E:0;this._time.push(d);for(var g=b;g>0;--g){var C=arguments[g];p.push(u(k[g-1],_[g-1],p[A++]+C)),w.push(C*S)}}},c.idle=function(d){var x=this.lastT();if(!(d<x)){var b=this.dimension,p=this._state,w=this._velocity,A=p.length-b,T=this.bounds,k=T[0],_=T[1],E=d-x;this._time.push(d);for(var S=b-1;S>=0;--S)p.push(u(k[S],_[S],p[A]+E*w[A])),w.push(0),A+=1}};function h(d){for(var x=new Array(d),b=0;b<d;++b)x[b]=0;return x}function v(d,x,b){switch(arguments.length){case 0:return new f([0],[0],0);case 1:if(typeof d=="number"){var p=h(d);return new f(p,p,0)}else return new f(d,h(d.length),0);case 2:if(typeof x=="number"){var p=h(d.length);return new f(d,p,+x)}else b=0;case 3:if(d.length!==x.length)throw new Error("state and velocity lengths must match");return new f(d,x,b)}}},3840:function(n){"use strict";n.exports=k;var a=0,o=1;function s(_,E,S,g,C,M){this._color=_,this.key=E,this.value=S,this.left=g,this.right=C,this._count=M}function l(_){return new s(_._color,_.key,_.value,_.left,_.right,_._count)}function u(_,E){return new s(_,E.key,E.value,E.left,E.right,E._count)}function f(_){_._count=1+(_.left?_.left._count:0)+(_.right?_.right._count:0)}function c(_,E){this._compare=_,this.root=E}var h=c.prototype;Object.defineProperty(h,"keys",{get:function(){var _=[];return this.forEach(function(E,S){_.push(E)}),_}}),Object.defineProperty(h,"values",{get:function(){var _=[];return this.forEach(function(E,S){_.push(S)}),_}}),Object.defineProperty(h,"length",{get:function(){return this.root?this.root._count:0}}),h.insert=function(_,E){for(var S=this._compare,g=this.root,C=[],M=[];g;){var P=S(_,g.key);C.push(g),M.push(P),P<=0?g=g.left:g=g.right}C.push(new s(a,_,E,null,null,1));for(var D=C.length-2;D>=0;--D){var g=C[D];M[D]<=0?C[D]=new s(g._color,g.key,g.value,C[D+1],g.right,g._count+1):C[D]=new s(g._color,g.key,g.value,g.left,C[D+1],g._count+1)}for(var D=C.length-1;D>1;--D){var q=C[D-1],g=C[D];if(q._color===o||g._color===o)break;var O=C[D-2];if(O.left===q)if(q.left===g){var U=O.right;if(U&&U._color===a)q._color=o,O.right=u(o,U),O._color=a,D-=1;else{if(O._color=a,O.left=q.right,q._color=o,q.right=O,C[D-2]=q,C[D-1]=g,f(O),f(q),D>=3){var B=C[D-3];B.left===O?B.left=q:B.right=q}break}}else{var U=O.right;if(U&&U._color===a)q._color=o,O.right=u(o,U),O._color=a,D-=1;else{if(q.right=g.left,O._color=a,O.left=g.right,g._color=o,g.left=q,g.right=O,C[D-2]=g,C[D-1]=q,f(O),f(q),f(g),D>=3){var B=C[D-3];B.left===O?B.left=g:B.right=g}break}}else if(q.right===g){var U=O.left;if(U&&U._color===a)q._color=o,O.left=u(o,U),O._color=a,D-=1;else{if(O._color=a,O.right=q.left,q._color=o,q.left=O,C[D-2]=q,C[D-1]=g,f(O),f(q),D>=3){var B=C[D-3];B.right===O?B.right=q:B.left=q}break}}else{var U=O.left;if(U&&U._color===a)q._color=o,O.left=u(o,U),O._color=a,D-=1;else{if(q.left=g.right,O._color=a,O.right=g.left,g._color=o,g.right=q,g.left=O,C[D-2]=g,C[D-1]=q,f(O),f(q),f(g),D>=3){var B=C[D-3];B.right===O?B.right=g:B.left=g}break}}}return C[0]._color=o,new c(S,C[0])};function v(_,E){if(E.left){var S=v(_,E.left);if(S)return S}var S=_(E.key,E.value);if(S)return S;if(E.right)return v(_,E.right)}function d(_,E,S,g){var C=E(_,g.key);if(C<=0){if(g.left){var M=d(_,E,S,g.left);if(M)return M}var M=S(g.key,g.value);if(M)return M}if(g.right)return d(_,E,S,g.right)}function x(_,E,S,g,C){var M=S(_,C.key),P=S(E,C.key),D;if(M<=0&&(C.left&&(D=x(_,E,S,g,C.left),D)||P>0&&(D=g(C.key,C.value),D)))return D;if(P>0&&C.right)return x(_,E,S,g,C.right)}h.forEach=function(E,S,g){if(this.root)switch(arguments.length){case 1:return v(E,this.root);case 2:return d(S,this._compare,E,this.root);case 3:return this._compare(S,g)>=0?void 0:x(S,g,this._compare,E,this.root)}},Object.defineProperty(h,"begin",{get:function(){for(var _=[],E=this.root;E;)_.push(E),E=E.left;return new b(this,_)}}),Object.defineProperty(h,"end",{get:function(){for(var _=[],E=this.root;E;)_.push(E),E=E.right;return new b(this,_)}}),h.at=function(_){if(_<0)return new b(this,[]);for(var E=this.root,S=[];;){if(S.push(E),E.left){if(_<E.left._count){E=E.left;continue}_-=E.left._count}if(!_)return new b(this,S);if(_-=1,E.right){if(_>=E.right._count)break;E=E.right}else break}return new b(this,[])},h.ge=function(_){for(var E=this._compare,S=this.root,g=[],C=0;S;){var M=E(_,S.key);g.push(S),M<=0&&(C=g.length),M<=0?S=S.left:S=S.right}return g.length=C,new b(this,g)},h.gt=function(_){for(var E=this._compare,S=this.root,g=[],C=0;S;){var M=E(_,S.key);g.push(S),M<0&&(C=g.length),M<0?S=S.left:S=S.right}return g.length=C,new b(this,g)},h.lt=function(_){for(var E=this._compare,S=this.root,g=[],C=0;S;){var M=E(_,S.key);g.push(S),M>0&&(C=g.length),M<=0?S=S.left:S=S.right}return g.length=C,new b(this,g)},h.le=function(_){for(var E=this._compare,S=this.root,g=[],C=0;S;){var M=E(_,S.key);g.push(S),M>=0&&(C=g.length),M<0?S=S.left:S=S.right}return g.length=C,new b(this,g)},h.find=function(_){for(var E=this._compare,S=this.root,g=[];S;){var C=E(_,S.key);if(g.push(S),C===0)return new b(this,g);C<=0?S=S.left:S=S.right}return new b(this,[])},h.remove=function(_){var E=this.find(_);return E?E.remove():this},h.get=function(_){for(var E=this._compare,S=this.root;S;){var g=E(_,S.key);if(g===0)return S.value;g<=0?S=S.left:S=S.right}};function b(_,E){this.tree=_,this._stack=E}var p=b.prototype;Object.defineProperty(p,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(p,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),p.clone=function(){return new b(this.tree,this._stack.slice())};function w(_,E){_.key=E.key,_.value=E.value,_.left=E.left,_.right=E.right,_._color=E._color,_._count=E._count}function A(_){for(var E,S,g,C,M=_.length-1;M>=0;--M){if(E=_[M],M===0){E._color=o;return}if(S=_[M-1],S.left===E){if(g=S.right,g.right&&g.right._color===a){if(g=S.right=l(g),C=g.right=l(g.right),S.right=g.left,g.left=S,g.right=C,g._color=S._color,E._color=o,S._color=o,C._color=o,f(S),f(g),M>1){var P=_[M-2];P.left===S?P.left=g:P.right=g}_[M-1]=g;return}else if(g.left&&g.left._color===a){if(g=S.right=l(g),C=g.left=l(g.left),S.right=C.left,g.left=C.right,C.left=S,C.right=g,C._color=S._color,S._color=o,g._color=o,E._color=o,f(S),f(g),f(C),M>1){var P=_[M-2];P.left===S?P.left=C:P.right=C}_[M-1]=C;return}if(g._color===o)if(S._color===a){S._color=o,S.right=u(a,g);return}else{S.right=u(a,g);continue}else{if(g=l(g),S.right=g.left,g.left=S,g._color=S._color,S._color=a,f(S),f(g),M>1){var P=_[M-2];P.left===S?P.left=g:P.right=g}_[M-1]=g,_[M]=S,M+1<_.length?_[M+1]=E:_.push(E),M=M+2}}else{if(g=S.left,g.left&&g.left._color===a){if(g=S.left=l(g),C=g.left=l(g.left),S.left=g.right,g.right=S,g.left=C,g._color=S._color,E._color=o,S._color=o,C._color=o,f(S),f(g),M>1){var P=_[M-2];P.right===S?P.right=g:P.left=g}_[M-1]=g;return}else if(g.right&&g.right._color===a){if(g=S.left=l(g),C=g.right=l(g.right),S.left=C.right,g.right=C.left,C.right=S,C.left=g,C._color=S._color,S._color=o,g._color=o,E._color=o,f(S),f(g),f(C),M>1){var P=_[M-2];P.right===S?P.right=C:P.left=C}_[M-1]=C;return}if(g._color===o)if(S._color===a){S._color=o,S.left=u(a,g);return}else{S.left=u(a,g);continue}else{if(g=l(g),S.left=g.right,g.right=S,g._color=S._color,S._color=a,f(S),f(g),M>1){var P=_[M-2];P.right===S?P.right=g:P.left=g}_[M-1]=g,_[M]=S,M+1<_.length?_[M+1]=E:_.push(E),M=M+2}}}}p.remove=function(){var _=this._stack;if(_.length===0)return this.tree;var E=new Array(_.length),S=_[_.length-1];E[E.length-1]=new s(S._color,S.key,S.value,S.left,S.right,S._count);for(var g=_.length-2;g>=0;--g){var S=_[g];S.left===_[g+1]?E[g]=new s(S._color,S.key,S.value,E[g+1],S.right,S._count):E[g]=new s(S._color,S.key,S.value,S.left,E[g+1],S._count)}if(S=E[E.length-1],S.left&&S.right){var C=E.length;for(S=S.left;S.right;)E.push(S),S=S.right;var M=E[C-1];E.push(new s(S._color,M.key,M.value,S.left,S.right,S._count)),E[C-1].key=S.key,E[C-1].value=S.value;for(var g=E.length-2;g>=C;--g)S=E[g],E[g]=new s(S._color,S.key,S.value,S.left,E[g+1],S._count);E[C-1].left=E[C]}if(S=E[E.length-1],S._color===a){var P=E[E.length-2];P.left===S?P.left=null:P.right===S&&(P.right=null),E.pop();for(var g=0;g<E.length;++g)E[g]._count--;return new c(this.tree._compare,E[0])}else if(S.left||S.right){S.left?w(S,S.left):S.right&&w(S,S.right),S._color=o;for(var g=0;g<E.length-1;++g)E[g]._count--;return new c(this.tree._compare,E[0])}else{if(E.length===1)return new c(this.tree._compare,null);for(var g=0;g<E.length;++g)E[g]._count--;var D=E[E.length-2];A(E),D.left===S?D.left=null:D.right=null}return new c(this.tree._compare,E[0])},Object.defineProperty(p,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(p,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(p,"index",{get:function(){var _=0,E=this._stack;if(E.length===0){var S=this.tree.root;return S?S._count:0}else E[E.length-1].left&&(_=E[E.length-1].left._count);for(var g=E.length-2;g>=0;--g)E[g+1]===E[g].right&&(++_,E[g].left&&(_+=E[g].left._count));return _},enumerable:!0}),p.next=function(){var _=this._stack;if(_.length!==0){var E=_[_.length-1];if(E.right)for(E=E.right;E;)_.push(E),E=E.left;else for(_.pop();_.length>0&&_[_.length-1].right===E;)E=_[_.length-1],_.pop()}},Object.defineProperty(p,"hasNext",{get:function(){var _=this._stack;if(_.length===0)return!1;if(_[_.length-1].right)return!0;for(var E=_.length-1;E>0;--E)if(_[E-1].left===_[E])return!0;return!1}}),p.update=function(_){var E=this._stack;if(E.length===0)throw new Error("Can't update empty node!");var S=new Array(E.length),g=E[E.length-1];S[S.length-1]=new s(g._color,g.key,_,g.left,g.right,g._count);for(var C=E.length-2;C>=0;--C)g=E[C],g.left===E[C+1]?S[C]=new s(g._color,g.key,g.value,S[C+1],g.right,g._count):S[C]=new s(g._color,g.key,g.value,g.left,S[C+1],g._count);return new c(this.tree._compare,S[0])},p.prev=function(){var _=this._stack;if(_.length!==0){var E=_[_.length-1];if(E.left)for(E=E.left;E;)_.push(E),E=E.right;else for(_.pop();_.length>0&&_[_.length-1].left===E;)E=_[_.length-1],_.pop()}},Object.defineProperty(p,"hasPrev",{get:function(){var _=this._stack;if(_.length===0)return!1;if(_[_.length-1].left)return!0;for(var E=_.length-1;E>0;--E)if(_[E-1].right===_[E])return!0;return!1}});function T(_,E){return _<E?-1:_>E?1:0}function k(_){return new c(_||T,null)}},3837:function(n,a,o){"use strict";n.exports=D;var s=o(4935),l=o(501),u=o(5304),f=o(6429),c=o(6444),h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),v=ArrayBuffer,d=DataView;function x(q){return v.isView(q)&&!(q instanceof d)}function b(q){return Array.isArray(q)||x(q)}function p(q,O){return q[0]=O[0],q[1]=O[1],q[2]=O[2],q}function w(q){this.gl=q,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickFontStyle=["normal","normal","normal"],this.tickFontWeight=["normal","normal","normal"],this.tickFontVariant=["normal","normal","normal"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["sans-serif","sans-serif","sans-serif"],this.labelFontStyle=["normal","normal","normal"],this.labelFontWeight=["normal","normal","normal"],this.labelFontVariant=["normal","normal","normal"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=u(q)}var A=w.prototype;A.update=function(q){q=q||{};function O(le,me,he){if(he in q){var te=q[he],ge=this[he],ae;(le?b(te)&&b(te[0]):b(te))?this[he]=ae=[me(te[0]),me(te[1]),me(te[2])]:this[he]=ae=[me(te),me(te),me(te)];for(var _e=0;_e<3;++_e)if(ae[_e]!==ge[_e])return!0}return!1}var U=O.bind(this,!1,Number),B=O.bind(this,!1,Boolean),F=O.bind(this,!1,String),N=O.bind(this,!0,function(le){if(b(le)){if(le.length===3)return[+le[0],+le[1],+le[2],1];if(le.length===4)return[+le[0],+le[1],+le[2],+le[3]]}return[0,0,0,1]}),X,K=!1,ne=!1;if("bounds"in q)for(var fe=q.bounds,ue=0;ue<2;++ue)for(var ee=0;ee<3;++ee)fe[ue][ee]!==this.bounds[ue][ee]&&(ne=!0),this.bounds[ue][ee]=fe[ue][ee];if("ticks"in q){X=q.ticks,K=!0,this.autoTicks=!1;for(var ue=0;ue<3;++ue)this.tickSpacing[ue]=0}else U("tickSpacing")&&(this.autoTicks=!0,ne=!0);if(this._firstInit&&("ticks"in q||"tickSpacing"in q||(this.autoTicks=!0),ne=!0,K=!0,this._firstInit=!1),ne&&this.autoTicks&&(X=c.create(this.bounds,this.tickSpacing),K=!0),K){for(var ue=0;ue<3;++ue)X[ue].sort(function(me,he){return me.x-he.x});c.equal(X,this.ticks)?K=!1:this.ticks=X}B("tickEnable"),F("tickFont")&&(K=!0),F("tickFontStyle")&&(K=!0),F("tickFontWeight")&&(K=!0),F("tickFontVariant")&&(K=!0),U("tickSize"),U("tickAngle"),U("tickPad"),N("tickColor");var Z=F("labels");F("labelFont")&&(Z=!0),F("labelFontStyle")&&(Z=!0),F("labelFontWeight")&&(Z=!0),F("labelFontVariant")&&(Z=!0),B("labelEnable"),U("labelSize"),U("labelPad"),N("labelColor"),B("lineEnable"),B("lineMirror"),U("lineWidth"),N("lineColor"),B("lineTickEnable"),B("lineTickMirror"),U("lineTickLength"),U("lineTickWidth"),N("lineTickColor"),B("gridEnable"),U("gridWidth"),N("gridColor"),B("zeroEnable"),N("zeroLineColor"),U("zeroLineWidth"),B("backgroundEnable"),N("backgroundColor");var oe=[{family:this.labelFont[0],style:this.labelFontStyle[0],weight:this.labelFontWeight[0],variant:this.labelFontVariant[0]},{family:this.labelFont[1],style:this.labelFontStyle[1],weight:this.labelFontWeight[1],variant:this.labelFontVariant[1]},{family:this.labelFont[2],style:this.labelFontStyle[2],weight:this.labelFontWeight[2],variant:this.labelFontVariant[2]}],ce=[{family:this.tickFont[0],style:this.tickFontStyle[0],weight:this.tickFontWeight[0],variant:this.tickFontVariant[0]},{family:this.tickFont[1],style:this.tickFontStyle[1],weight:this.tickFontWeight[1],variant:this.tickFontVariant[1]},{family:this.tickFont[2],style:this.tickFontStyle[2],weight:this.tickFontWeight[2],variant:this.tickFontVariant[2]}];this._text?this._text&&(Z||K)&&this._text.update(this.bounds,this.labels,oe,this.ticks,ce):this._text=s(this.gl,this.bounds,this.labels,oe,this.ticks,ce),this._lines&&K&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=l(this.gl,this.bounds,this.ticks))};function T(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var k=[new T,new T,new T];function _(q,O,U,B,F){for(var N=q.primalOffset,X=q.primalMinor,K=q.mirrorOffset,ne=q.mirrorMinor,fe=B[O],ue=0;ue<3;++ue)if(O!==ue){var ee=N,Z=K,oe=X,ce=ne;fe&1<<ue&&(ee=K,Z=N,oe=ne,ce=X),ee[ue]=U[0][ue],Z[ue]=U[1][ue],F[ue]>0?(oe[ue]=-1,ce[ue]=0):(oe[ue]=0,ce[ue]=1)}}var E=[0,0,0],S={model:h,view:h,projection:h,_ortho:!1};A.isOpaque=function(){return!0},A.isTransparent=function(){return!1},A.drawTransparent=function(q){};var g=0,C=[0,0,0],M=[0,0,0],P=[0,0,0];A.draw=function(q){q=q||S;for(var he=this.gl,O=q.model||h,U=q.view||h,B=q.projection||h,F=this.bounds,N=q._ortho||!1,X=f(O,U,B,F,N),K=X.cubeEdges,ne=X.axis,fe=U[12],ue=U[13],ee=U[14],Z=U[15],oe=N?2:1,ce=oe*this.pixelRatio*(B[3]*fe+B[7]*ue+B[11]*ee+B[15]*Z)/he.drawingBufferHeight,le=0;le<3;++le)this.lastCubeProps.cubeEdges[le]=K[le],this.lastCubeProps.axis[le]=ne[le];for(var me=k,le=0;le<3;++le)_(k[le],le,this.bounds,K,ne);for(var he=this.gl,te=E,le=0;le<3;++le)this.backgroundEnable[le]?te[le]=ne[le]:te[le]=0;this._background.draw(O,U,B,F,te,this.backgroundColor),this._lines.bind(O,U,B,this);for(var le=0;le<3;++le){var ge=[0,0,0];ne[le]>0?ge[le]=F[1][le]:ge[le]=F[0][le];for(var ae=0;ae<2;++ae){var _e=(le+1+ae)%3,Ce=(le+1+(ae^1))%3;this.gridEnable[_e]&&this._lines.drawGrid(_e,Ce,this.bounds,ge,this.gridColor[_e],this.gridWidth[_e]*this.pixelRatio)}for(var ae=0;ae<2;++ae){var _e=(le+1+ae)%3,Ce=(le+1+(ae^1))%3;this.zeroEnable[Ce]&&Math.min(F[0][Ce],F[1][Ce])<=0&&Math.max(F[0][Ce],F[1][Ce])>=0&&this._lines.drawZero(_e,Ce,this.bounds,ge,this.zeroLineColor[Ce],this.zeroLineWidth[Ce]*this.pixelRatio)}}for(var le=0;le<3;++le){this.lineEnable[le]&&this._lines.drawAxisLine(le,this.bounds,me[le].primalOffset,this.lineColor[le],this.lineWidth[le]*this.pixelRatio),this.lineMirror[le]&&this._lines.drawAxisLine(le,this.bounds,me[le].mirrorOffset,this.lineColor[le],this.lineWidth[le]*this.pixelRatio);for(var qe=p(C,me[le].primalMinor),rt=p(M,me[le].mirrorMinor),Re=this.lineTickLength,ae=0;ae<3;++ae){var Ie=ce/O[5*ae];qe[ae]*=Re[ae]*Ie,rt[ae]*=Re[ae]*Ie}this.lineTickEnable[le]&&this._lines.drawAxisTicks(le,me[le].primalOffset,qe,this.lineTickColor[le],this.lineTickWidth[le]*this.pixelRatio),this.lineTickMirror[le]&&this._lines.drawAxisTicks(le,me[le].mirrorOffset,rt,this.lineTickColor[le],this.lineTickWidth[le]*this.pixelRatio)}this._lines.unbind(),this._text.bind(O,U,B,this.pixelRatio);var ot,lt=.5,ht,xt;function Vt(vt){xt=[0,0,0],xt[vt]=1}function Ht(vt,at,Xe){var dt=(vt+1)%3,_t=(vt+2)%3,$t=at[dt],Ut=at[_t],fr=Xe[dt],ar=Xe[_t];if($t>0&&ar>0){Vt(dt);return}else if($t>0&&ar<0){Vt(dt);return}else if($t<0&&ar>0){Vt(dt);return}else if($t<0&&ar<0){Vt(dt);return}else if(Ut>0&&fr>0){Vt(_t);return}else if(Ut>0&&fr<0){Vt(_t);return}else if(Ut<0&&fr>0){Vt(_t);return}else if(Ut<0&&fr<0){Vt(_t);return}}for(var le=0;le<3;++le){for(var Me=me[le].primalMinor,Ke=me[le].mirrorMinor,We=p(P,me[le].primalOffset),ae=0;ae<3;++ae)this.lineTickEnable[le]&&(We[ae]+=ce*Me[ae]*Math.max(this.lineTickLength[ae],0)/O[5*ae]);var et=[0,0,0];if(et[le]=1,this.tickEnable[le]){this.tickAngle[le]===-3600?(this.tickAngle[le]=0,this.tickAlign[le]="auto"):this.tickAlign[le]=-1,ht=1,ot=[this.tickAlign[le],lt,ht],ot[0]==="auto"?ot[0]=g:ot[0]=parseInt(""+ot[0]),xt=[0,0,0],Ht(le,Me,Ke);for(var ae=0;ae<3;++ae)We[ae]+=ce*Me[ae]*this.tickPad[ae]/O[5*ae];this._text.drawTicks(le,this.tickSize[le],this.tickAngle[le],We,this.tickColor[le],et,xt,ot)}if(this.labelEnable[le]){ht=0,xt=[0,0,0],this.labels[le].length>4&&(Vt(le),ht=1),ot=[this.labelAlign[le],lt,ht],ot[0]==="auto"?ot[0]=g:ot[0]=parseInt(""+ot[0]);for(var ae=0;ae<3;++ae)We[ae]+=ce*Me[ae]*this.labelPad[ae]/O[5*ae];We[le]+=.5*(F[0][le]+F[1][le]),this._text.drawLabel(le,this.labelSize[le],this.labelAngle[le],We,this.labelColor[le],[0,0,0],xt,ot)}}this._text.unbind()},A.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function D(q,O){var U=new w(q);return U.update(O),U}},5304:function(n,a,o){"use strict";n.exports=h;var s=o(2762),l=o(8116),u=o(1879).bg;function f(v,d,x,b){this.gl=v,this.buffer=d,this.vao=x,this.shader=b}var c=f.prototype;c.draw=function(v,d,x,b,p,w){for(var A=!1,T=0;T<3;++T)A=A||p[T];if(A){var k=this.gl;k.enable(k.POLYGON_OFFSET_FILL),k.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:v,view:d,projection:x,bounds:b,enable:p,colors:w},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),k.disable(k.POLYGON_OFFSET_FILL)}},c.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function h(v){for(var d=[],x=[],b=0,p=0;p<3;++p)for(var w=(p+1)%3,A=(p+2)%3,T=[0,0,0],k=[0,0,0],_=-1;_<=1;_+=2){x.push(b,b+2,b+1,b+1,b+2,b+3),T[p]=_,k[p]=_;for(var E=-1;E<=1;E+=2){T[w]=E;for(var S=-1;S<=1;S+=2)T[A]=S,d.push(T[0],T[1],T[2],k[0],k[1],k[2]),b+=1}var g=w;w=A,A=g}var C=s(v,new Float32Array(d)),M=s(v,new Uint16Array(x),v.ELEMENT_ARRAY_BUFFER),P=l(v,[{buffer:C,type:v.FLOAT,size:3,offset:0,stride:24},{buffer:C,type:v.FLOAT,size:3,offset:12,stride:24}],M),D=u(v);return D.attributes.position.location=0,D.attributes.normal.location=1,new f(v,C,P,D)}},6429:function(n,a,o){"use strict";n.exports=_;var s=o(8828),l=o(6760),u=o(5202),f=o(3250),c=new Array(16),h=new Array(8),v=new Array(8),d=new Array(3),x=[0,0,0];(function(){for(var E=0;E<8;++E)h[E]=[1,1,1,1],v[E]=[1,1,1]})();function b(E,S,g){for(var C=0;C<4;++C){E[C]=g[12+C];for(var M=0;M<3;++M)E[C]+=S[M]*g[4*M+C]}}var p=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function w(E){for(var S=0;S<p.length;++S)if(E=u.positive(E,p[S]),E.length<3)return 0;for(var g=E[0],C=g[0]/g[3],M=g[1]/g[3],P=0,S=1;S+1<E.length;++S){var D=E[S],q=E[S+1],O=D[0]/D[3],U=D[1]/D[3],B=q[0]/q[3],F=q[1]/q[3],N=O-C,X=U-M,K=B-C,ne=F-M;P+=Math.abs(N*ne-X*K)}return P}var A=[1,1,1],T=[0,0,0],k={cubeEdges:A,axis:T};function _(E,S,g,C,M){l(c,S,E),l(c,g,c);for(var P=0,D=0;D<2;++D){d[2]=C[D][2];for(var q=0;q<2;++q){d[1]=C[q][1];for(var O=0;O<2;++O)d[0]=C[O][0],b(h[P],d,c),P+=1}}for(var U=-1,D=0;D<8;++D){for(var B=h[D][3],F=0;F<3;++F)v[D][F]=h[D][F]/B;M&&(v[D][2]*=-1),B<0&&(U<0||v[D][2]<v[U][2])&&(U=D)}if(U<0){U=0;for(var N=0;N<3;++N){for(var X=(N+2)%3,K=(N+1)%3,ne=-1,fe=-1,ue=0;ue<2;++ue){var ee=ue<<N,Z=ee+(ue<<X)+(1-ue<<K),oe=ee+(1-ue<<X)+(ue<<K);f(v[ee],v[Z],v[oe],x)<0||(ue?ne=1:fe=1)}if(ne<0||fe<0){fe>ne&&(U|=1<<N);continue}for(var ue=0;ue<2;++ue){var ee=ue<<N,Z=ee+(ue<<X)+(1-ue<<K),oe=ee+(1-ue<<X)+(ue<<K),ce=w([h[ee],h[Z],h[oe],h[ee+(1<<X)+(1<<K)]]);ue?ne=ce:fe=ce}if(fe>ne){U|=1<<N;continue}}}for(var le=7^U,me=-1,D=0;D<8;++D)D===U||D===le||(me<0||v[me][1]>v[D][1])&&(me=D);for(var he=-1,D=0;D<3;++D){var te=me^1<<D;if(!(te===U||te===le)){he<0&&(he=te);var K=v[te];K[0]<v[he][0]&&(he=te)}}for(var ge=-1,D=0;D<3;++D){var te=me^1<<D;if(!(te===U||te===le||te===he)){ge<0&&(ge=te);var K=v[te];K[0]>v[ge][0]&&(ge=te)}}var ae=A;ae[0]=ae[1]=ae[2]=0,ae[s.log2(he^me)]=me&he,ae[s.log2(me^ge)]=me&ge;var _e=ge^7;_e===U||_e===le?(_e=he^7,ae[s.log2(ge^_e)]=_e&ge):ae[s.log2(he^_e)]=_e&he;for(var Ce=T,qe=U,N=0;N<3;++N)qe&1<<N?Ce[N]=-1:Ce[N]=1;return k}},501:function(n,a,o){"use strict";n.exports=A;var s=o(2762),l=o(8116),u=o(1879).n,f=[0,0,0],c=[0,0,0],h=[0,0,0],v=[0,0,0],d=[1,1];function x(T){return T[0]=T[1]=T[2]=0,T}function b(T,k){return T[0]=k[0],T[1]=k[1],T[2]=k[2],T}function p(T,k,_,E,S,g,C,M){this.gl=T,this.vertBuffer=k,this.vao=_,this.shader=E,this.tickCount=S,this.tickOffset=g,this.gridCount=C,this.gridOffset=M}var w=p.prototype;w.bind=function(T,k,_){this.shader.bind(),this.shader.uniforms.model=T,this.shader.uniforms.view=k,this.shader.uniforms.projection=_,d[0]=this.gl.drawingBufferWidth,d[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=d,this.vao.bind()},w.unbind=function(){this.vao.unbind()},w.drawAxisLine=function(T,k,_,E,S){var g=x(c);this.shader.uniforms.majorAxis=c,g[T]=k[1][T]-k[0][T],this.shader.uniforms.minorAxis=g;var C=b(v,_);C[T]+=k[0][T],this.shader.uniforms.offset=C,this.shader.uniforms.lineWidth=S,this.shader.uniforms.color=E;var M=x(h);M[(T+2)%3]=1,this.shader.uniforms.screenAxis=M,this.vao.draw(this.gl.TRIANGLES,6);var M=x(h);M[(T+1)%3]=1,this.shader.uniforms.screenAxis=M,this.vao.draw(this.gl.TRIANGLES,6)},w.drawAxisTicks=function(T,k,_,E,S){if(this.tickCount[T]){var g=x(f);g[T]=1,this.shader.uniforms.majorAxis=g,this.shader.uniforms.offset=k,this.shader.uniforms.minorAxis=_,this.shader.uniforms.color=E,this.shader.uniforms.lineWidth=S;var C=x(h);C[T]=1,this.shader.uniforms.screenAxis=C,this.vao.draw(this.gl.TRIANGLES,this.tickCount[T],this.tickOffset[T])}},w.drawGrid=function(T,k,_,E,S,g){if(this.gridCount[T]){var C=x(c);C[k]=_[1][k]-_[0][k],this.shader.uniforms.minorAxis=C;var M=b(v,E);M[k]+=_[0][k],this.shader.uniforms.offset=M;var P=x(f);P[T]=1,this.shader.uniforms.majorAxis=P;var D=x(h);D[T]=1,this.shader.uniforms.screenAxis=D,this.shader.uniforms.lineWidth=g,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,this.gridCount[T],this.gridOffset[T])}},w.drawZero=function(T,k,_,E,S,g){var C=x(c);this.shader.uniforms.majorAxis=C,C[T]=_[1][T]-_[0][T],this.shader.uniforms.minorAxis=C;var M=b(v,E);M[T]+=_[0][T],this.shader.uniforms.offset=M;var P=x(h);P[k]=1,this.shader.uniforms.screenAxis=P,this.shader.uniforms.lineWidth=g,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,6)},w.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function A(T,k,_){var E=[],S=[0,0,0],g=[0,0,0],C=[0,0,0],M=[0,0,0];E.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var P=0;P<3;++P){for(var O=E.length/3|0,D=0;D<_[P].length;++D){var q=+_[P][D].x;E.push(q,0,1,q,1,1,q,0,-1,q,0,-1,q,1,1,q,1,-1)}var B=E.length/3|0;S[P]=O,g[P]=B-O;for(var O=E.length/3|0,U=0;U<_[P].length;++U){var q=+_[P][U].x;E.push(q,0,1,q,1,1,q,0,-1,q,0,-1,q,1,1,q,1,-1)}var B=E.length/3|0;C[P]=O,M[P]=B-O}var F=s(T,new Float32Array(E)),N=l(T,[{buffer:F,type:T.FLOAT,size:3,stride:0,offset:0}]),X=u(T);return X.attributes.position.location=0,new p(T,F,N,X,g,S,M,C)}},1879:function(n,a,o){"use strict";var s=o(3236),l=o(9405),u=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * (view * (model * vec4(p, 1.0)));
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),f=s([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);a.n=function(x){return l(x,u,f,null,[{name:"position",type:"vec3"}])};var c=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * (view * (model * vec4(p, 1.0)));
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}
`]),h=s([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);a.Q=function(x){return l(x,c,h,null,[{name:"position",type:"vec3"}])};var v=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * (view * (model * vec4(nPosition, 1.0)));
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}
`]),d=s([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);a.bg=function(x){return l(x,v,d,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},4935:function(n,a,o){"use strict";n.exports=w;var s=o(2762),l=o(8116),u=o(4359),f=o(1879).Q,c=window||process.global||{},h=c.__TEXT_CACHE||{};c.__TEXT_CACHE={};var v=3;function d(A,T,k,_){this.gl=A,this.shader=T,this.buffer=k,this.vao=_,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var x=d.prototype,b=[0,0];x.bind=function(A,T,k,_){this.vao.bind(),this.shader.bind();var E=this.shader.uniforms;E.model=A,E.view=T,E.projection=k,E.pixelScale=_,b[0]=this.gl.drawingBufferWidth,b[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=b},x.unbind=function(){this.vao.unbind()},x.update=function(A,T,k,_,E){var S=[];function g(N,X,K,ne,fe,ue){var ee=[K.style,K.weight,K.variant,K.family].join("_"),Z=h[ee];Z||(Z=h[ee]={});var oe=Z[X];oe||(oe=Z[X]=p(X,{triangles:!0,font:K.family,fontStyle:K.style,fontWeight:K.weight,fontVariant:K.variant,textAlign:"center",textBaseline:"middle",lineSpacing:fe,styletags:ue}));for(var ce=(ne||12)/12,le=oe.positions,me=oe.cells,he=0,te=me.length;he<te;++he)for(var ge=me[he],ae=2;ae>=0;--ae){var _e=le[ge[ae]];S.push(ce*_e[0],-ce*_e[1],N)}}for(var C=[0,0,0],M=[0,0,0],P=[0,0,0],D=[0,0,0],q=1.25,O={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},U=0;U<3;++U){P[U]=S.length/v|0,g(.5*(A[0][U]+A[1][U]),T[U],k[U],12,q,O),D[U]=(S.length/v|0)-P[U],C[U]=S.length/v|0;for(var B=0;B<_[U].length;++B)if(_[U][B].text){var F={family:_[U][B].font||E[U].family,style:E[U].fontStyle||E[U].style,weight:E[U].fontWeight||E[U].weight,variant:E[U].fontVariant||E[U].variant};g(_[U][B].x,_[U][B].text,F,_[U][B].fontSize||12,q,O)}M[U]=(S.length/v|0)-C[U]}this.buffer.update(S),this.tickOffset=C,this.tickCount=M,this.labelOffset=P,this.labelCount=D},x.drawTicks=function(A,T,k,_,E,S,g,C){this.tickCount[A]&&(this.shader.uniforms.axis=S,this.shader.uniforms.color=E,this.shader.uniforms.angle=k,this.shader.uniforms.scale=T,this.shader.uniforms.offset=_,this.shader.uniforms.alignDir=g,this.shader.uniforms.alignOpt=C,this.vao.draw(this.gl.TRIANGLES,this.tickCount[A],this.tickOffset[A]))},x.drawLabel=function(A,T,k,_,E,S,g,C){this.labelCount[A]&&(this.shader.uniforms.axis=S,this.shader.uniforms.color=E,this.shader.uniforms.angle=k,this.shader.uniforms.scale=T,this.shader.uniforms.offset=_,this.shader.uniforms.alignDir=g,this.shader.uniforms.alignOpt=C,this.vao.draw(this.gl.TRIANGLES,this.labelCount[A],this.labelOffset[A]))},x.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function p(A,T){try{return u(A,T)}catch(k){return console.warn('error vectorizing text:"'+A+'" error:',k),{cells:[],positions:[]}}}function w(A,T,k,_,E,S){var g=s(A),C=l(A,[{buffer:g,size:3}]),M=f(A);M.attributes.position.location=0;var P=new d(A,M,g,C);return P.update(T,k,_,E,S),P}},6444:function(n,a){"use strict";a.create=s,a.equal=l;function o(u,f){var c=u+"",h=c.indexOf("."),v=0;h>=0&&(v=c.length-h-1);var d=Math.pow(10,v),x=Math.round(u*f*d),b=x+"";if(b.indexOf("e")>=0)return b;var p=x/d,w=x%d;x<0?(p=-Math.ceil(p)|0,w=-w|0):(p=Math.floor(p)|0,w=w|0);var A=""+p;if(x<0&&(A="-"+A),v){for(var T=""+w;T.length<v;)T="0"+T;return A+"."+T}else return A}function s(u,f){for(var c=[],h=0;h<3;++h){for(var v=[],d=.5*(u[0][h]+u[1][h]),x=0;x*f[h]<=u[1][h];++x)v.push({x:x*f[h],text:o(f[h],x)});for(var x=-1;x*f[h]>=u[0][h];--x)v.push({x:x*f[h],text:o(f[h],x)});c.push(v)}return c}function l(u,f){for(var c=0;c<3;++c){if(u[c].length!==f[c].length)return!1;for(var h=0;h<u[c].length;++h){var v=u[c][h],d=f[c][h];if(v.x!==d.x||v.text!==d.text||v.font!==d.font||v.fontColor!==d.fontColor||v.fontSize!==d.fontSize||v.dx!==d.dx||v.dy!==d.dy)return!1}}return!0}},5445:function(n,a,o){"use strict";n.exports=k;var s=o(5033),l=o(5202),u=o(6429),f=o(6760),c=o(5665),h=o(5352),v=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),d=new Float32Array(16);function x(_,E,S){this.lo=_,this.hi=E,this.pixelsPerDataUnit=S}var b=[0,0,0,1],p=[0,0,0,1];function w(_,E,S,g,C){for(var M=0;M<3;++M){for(var P=b,D=p,q=0;q<3;++q)D[q]=P[q]=S[q];D[3]=P[3]=1,D[M]+=1,h(D,D,E),D[3]<0&&(_[M]=1/0),P[M]-=1,h(P,P,E),P[3]<0&&(_[M]=1/0);var O=(P[0]/P[3]-D[0]/D[3])*g,U=(P[1]/P[3]-D[1]/D[3])*C;_[M]=.25*Math.sqrt(O*O+U*U)}return _}var A=[new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0)],T=[0,0,0];function k(_,E,S,g,U){var M=E.model||v,P=E.view||v,D=E.projection||v,q=E._ortho||!1,O=_.bounds,U=U||u(M,P,D,O,q),B=U.axis;f(d,P,M),f(d,D,d);for(var F=A,N=0;N<3;++N)F[N].lo=1/0,F[N].hi=-1/0,F[N].pixelsPerDataUnit=1/0;var X=s(c(d,d));c(d,d);for(var K=0;K<3;++K){var ne=(K+1)%3,fe=(K+2)%3,ue=T;e:for(var N=0;N<2;++N){var ee=[];if(B[K]<0!=!!N){ue[K]=O[N][K];for(var Z=0;Z<2;++Z){ue[ne]=O[Z^N][ne];for(var oe=0;oe<2;++oe)ue[fe]=O[oe^Z^N][fe],ee.push(ue.slice())}for(var ce=q?5:4,Z=ce;Z===ce;++Z){if(ee.length===0)continue e;ee=l.positive(ee,X[Z])}for(var Z=0;Z<ee.length;++Z)for(var fe=ee[Z],le=w(T,d,fe,S,g),oe=0;oe<3;++oe)F[oe].lo=Math.min(F[oe].lo,fe[oe]),F[oe].hi=Math.max(F[oe].hi,fe[oe]),oe!==K&&(F[oe].pixelsPerDataUnit=Math.min(F[oe].pixelsPerDataUnit,Math.abs(le[oe])))}}}return F}},2762:function(n,a,o){"use strict";var s=o(1888),l=o(5298),u=o(9618),f=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function c(p,w,A,T,k){this.gl=p,this.type=w,this.handle=A,this.length=T,this.usage=k}var h=c.prototype;h.bind=function(){this.gl.bindBuffer(this.type,this.handle)},h.unbind=function(){this.gl.bindBuffer(this.type,null)},h.dispose=function(){this.gl.deleteBuffer(this.handle)};function v(p,w,A,T,k,_){var E=k.length*k.BYTES_PER_ELEMENT;if(_<0)return p.bufferData(w,k,T),E;if(E+_>A)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return p.bufferSubData(w,_,k),A}function d(p,w){for(var A=s.malloc(p.length,w),T=p.length,k=0;k<T;++k)A[k]=p[k];return A}function x(p,w){for(var A=1,T=w.length-1;T>=0;--T){if(w[T]!==A)return!1;A*=p[T]}return!0}h.update=function(p,w){if(typeof w!="number"&&(w=-1),this.bind(),typeof p=="object"&&typeof p.shape!="undefined"){var A=p.dtype;if(f.indexOf(A)<0&&(A="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var T=gl.getExtension("OES_element_index_uint");T&&A!=="uint16"?A="uint32":A="uint16"}if(A===p.dtype&&x(p.shape,p.stride))p.offset===0&&p.data.length===p.shape[0]?this.length=v(this.gl,this.type,this.length,this.usage,p.data,w):this.length=v(this.gl,this.type,this.length,this.usage,p.data.subarray(p.offset,p.shape[0]),w);else{var k=s.malloc(p.size,A),_=u(k,p.shape);l.assign(_,p),w<0?this.length=v(this.gl,this.type,this.length,this.usage,k,w):this.length=v(this.gl,this.type,this.length,this.usage,k.subarray(0,p.size),w),s.free(k)}}else if(Array.isArray(p)){var E;this.type===this.gl.ELEMENT_ARRAY_BUFFER?E=d(p,"uint16"):E=d(p,"float32"),w<0?this.length=v(this.gl,this.type,this.length,this.usage,E,w):this.length=v(this.gl,this.type,this.length,this.usage,E.subarray(0,p.length),w),s.free(E)}else if(typeof p=="object"&&typeof p.length=="number")this.length=v(this.gl,this.type,this.length,this.usage,p,w);else if(typeof p=="number"||p===void 0){if(w>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");p=p|0,p<=0&&(p=1),this.gl.bufferData(this.type,p|0,this.usage),this.length=p}else throw new Error("gl-buffer: Invalid data type")};function b(p,w,A,T){if(A=A||p.ARRAY_BUFFER,T=T||p.DYNAMIC_DRAW,A!==p.ARRAY_BUFFER&&A!==p.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(T!==p.DYNAMIC_DRAW&&T!==p.STATIC_DRAW&&T!==p.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var k=p.createBuffer(),_=new c(p,A,k,0,T);return _.update(w),_}n.exports=b},6405:function(n,a,o){"use strict";var s=o(2931);n.exports=function(u,f){var c=u.positions,h=u.vectors,v={positions:[],vertexIntensity:[],vertexIntensityBounds:u.vertexIntensityBounds,vectors:[],cells:[],coneOffset:u.coneOffset,colormap:u.colormap};if(u.positions.length===0)return f&&(f[0]=[0,0,0],f[1]=[0,0,0]),v;for(var d=0,x=1/0,b=-1/0,p=1/0,w=-1/0,A=1/0,T=-1/0,k=null,_=null,E=[],S=1/0,g=!1,C=u.coneSizemode==="raw",M=0;M<c.length;M++){var P=c[M];x=Math.min(P[0],x),b=Math.max(P[0],b),p=Math.min(P[1],p),w=Math.max(P[1],w),A=Math.min(P[2],A),T=Math.max(P[2],T);var D=h[M];if(s.length(D)>d&&(d=s.length(D)),M&&!C){var q=2*s.distance(k,P)/(s.length(_)+s.length(D));q?(S=Math.min(S,q),g=!1):g=!0}g||(k=P,_=D),E.push(D)}var O=[x,p,A],U=[b,w,T];f&&(f[0]=O,f[1]=U),d===0&&(d=1);var B=1/d;isFinite(S)||(S=1),v.vectorScale=S;var F=u.coneSize||(C?1:.5);u.absoluteConeSize&&(F=u.absoluteConeSize*B),v.coneScale=F;for(var M=0,N=0;M<c.length;M++)for(var P=c[M],X=P[0],K=P[1],ne=P[2],fe=E[M],ue=s.length(fe)*B,ee=0,Z=8;ee<Z;ee++){v.positions.push([X,K,ne,N++]),v.positions.push([X,K,ne,N++]),v.positions.push([X,K,ne,N++]),v.positions.push([X,K,ne,N++]),v.positions.push([X,K,ne,N++]),v.positions.push([X,K,ne,N++]),v.vectors.push(fe),v.vectors.push(fe),v.vectors.push(fe),v.vectors.push(fe),v.vectors.push(fe),v.vectors.push(fe),v.vertexIntensity.push(ue,ue,ue),v.vertexIntensity.push(ue,ue,ue);var oe=v.positions.length;v.cells.push([oe-6,oe-5,oe-4],[oe-3,oe-2,oe-1])}return v};var l=o(614);n.exports.createMesh=o(9060),n.exports.createConeMesh=function(u,f){return n.exports.createMesh(u,f,{shaders:l,traceType:"cone"})}},9060:function(n,a,o){"use strict";var s=o(9405),l=o(2762),u=o(8116),f=o(7766),c=o(6760),h=o(7608),v=o(9618),d=o(6729),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function b(E,S,g,C,M,P,D,q,O,U,B){this.gl=E,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=S,this.dirty=!0,this.triShader=g,this.pickShader=C,this.trianglePositions=M,this.triangleVectors=P,this.triangleColors=q,this.triangleUVs=O,this.triangleIds=D,this.triangleVAO=U,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=B,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=x,this._view=x,this._projection=x,this._resolution=[1,1]}var p=b.prototype;p.isOpaque=function(){return this.opacity>=1},p.isTransparent=function(){return this.opacity<1},p.pickSlots=1,p.setPickBase=function(E){this.pickId=E};function w(E){for(var S=d({colormap:E,nshades:256,format:"rgba"}),g=new Uint8Array(256*4),C=0;C<256;++C){for(var M=S[C],P=0;P<3;++P)g[4*C+P]=M[P];g[4*C+3]=M[3]*255}return v(g,[256,256,4],[4,0,1])}function A(E){for(var S=E.length,g=new Array(S),C=0;C<S;++C)g[C]=E[C][2];return g}p.update=function(E){E=E||{};var S=this.gl;this.dirty=!0,"lightPosition"in E&&(this.lightPosition=E.lightPosition),"opacity"in E&&(this.opacity=E.opacity),"ambient"in E&&(this.ambientLight=E.ambient),"diffuse"in E&&(this.diffuseLight=E.diffuse),"specular"in E&&(this.specularLight=E.specular),"roughness"in E&&(this.roughness=E.roughness),"fresnel"in E&&(this.fresnel=E.fresnel),E.tubeScale!==void 0&&(this.tubeScale=E.tubeScale),E.vectorScale!==void 0&&(this.vectorScale=E.vectorScale),E.coneScale!==void 0&&(this.coneScale=E.coneScale),E.coneOffset!==void 0&&(this.coneOffset=E.coneOffset),E.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=S.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=S.LINEAR,this.texture.setPixels(w(E.colormap)),this.texture.generateMipmap());var g=E.cells,C=E.positions,M=E.vectors;if(!(!C||!g||!M)){var P=[],D=[],q=[],O=[],U=[];this.cells=g,this.positions=C,this.vectors=M;var B=E.meshColor||[1,1,1,1],F=E.vertexIntensity,N=1/0,X=-1/0;if(F)if(E.vertexIntensityBounds)N=+E.vertexIntensityBounds[0],X=+E.vertexIntensityBounds[1];else for(var K=0;K<F.length;++K){var ne=F[K];N=Math.min(N,ne),X=Math.max(X,ne)}else for(var K=0;K<C.length;++K){var ne=C[K][2];N=Math.min(N,ne),X=Math.max(X,ne)}F?this.intensity=F:this.intensity=A(C),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var K=0;K<C.length;++K)for(var fe=C[K],ue=0;ue<3;++ue)isNaN(fe[ue])||!isFinite(fe[ue])||(this.bounds[0][ue]=Math.min(this.bounds[0][ue],fe[ue]),this.bounds[1][ue]=Math.max(this.bounds[1][ue],fe[ue]));var ee=0;e:for(var K=0;K<g.length;++K){var Z=g[K];switch(Z.length){case 3:for(var ue=0;ue<3;++ue)for(var oe=Z[ue],fe=C[oe],ce=0;ce<3;++ce)if(isNaN(fe[ce])||!isFinite(fe[ce]))continue e;for(var ue=0;ue<3;++ue){var oe=Z[2-ue],fe=C[oe];P.push(fe[0],fe[1],fe[2],fe[3]);var le=M[oe];D.push(le[0],le[1],le[2],le[3]||0);var me=B;me.length===3?q.push(me[0],me[1],me[2],1):q.push(me[0],me[1],me[2],me[3]);var he;F?he=[(F[oe]-N)/(X-N),0]:he=[(fe[2]-N)/(X-N),0],O.push(he[0],he[1]),U.push(K)}ee+=1;break;default:break}}this.triangleCount=ee,this.trianglePositions.update(P),this.triangleVectors.update(D),this.triangleColors.update(q),this.triangleUVs.update(O),this.triangleIds.update(new Uint32Array(U))}},p.drawTransparent=p.draw=function(E){E=E||{};for(var S=this.gl,g=E.model||x,C=E.view||x,M=E.projection||x,P=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],D=0;D<3;++D)P[0][D]=Math.max(P[0][D],this.clipBounds[0][D]),P[1][D]=Math.min(P[1][D],this.clipBounds[1][D]);var q={model:g,view:C,projection:M,inverseModel:x.slice(),clipBounds:P,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};q.inverseModel=h(q.inverseModel,q.model),S.disable(S.CULL_FACE),this.texture.bind(0);var O=new Array(16);c(O,q.view,q.model),c(O,q.projection,O),h(O,O);for(var D=0;D<3;++D)q.eyePosition[D]=O[12+D]/O[15];for(var U=O[15],D=0;D<3;++D)U+=this.lightPosition[D]*O[4*D+3];for(var D=0;D<3;++D){for(var B=O[12+D],F=0;F<3;++F)B+=O[4*F+D]*this.lightPosition[F];q.lightPosition[D]=B/U}if(this.triangleCount>0){var N=this.triShader;N.bind(),N.uniforms=q,this.triangleVAO.bind(),S.drawArrays(S.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},p.drawPick=function(E){E=E||{};for(var S=this.gl,g=E.model||x,C=E.view||x,M=E.projection||x,P=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],D=0;D<3;++D)P[0][D]=Math.max(P[0][D],this.clipBounds[0][D]),P[1][D]=Math.min(P[1][D],this.clipBounds[1][D]);this._model=[].slice.call(g),this._view=[].slice.call(C),this._projection=[].slice.call(M),this._resolution=[S.drawingBufferWidth,S.drawingBufferHeight];var q={model:g,view:C,projection:M,clipBounds:P,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},O=this.pickShader;O.bind(),O.uniforms=q,this.triangleCount>0&&(this.triangleVAO.bind(),S.drawArrays(S.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},p.pick=function(E){if(!E||E.id!==this.pickId)return null;var S=E.value[0]+256*E.value[1]+65536*E.value[2],g=this.cells[S],C=this.positions[g[1]].slice(0,3),M={position:C,dataCoordinate:C,index:Math.floor(g[1]/48)};return this.traceType==="cone"?M.index=Math.floor(g[1]/48):this.traceType==="streamtube"&&(M.intensity=this.intensity[g[1]],M.velocity=this.vectors[g[1]].slice(0,3),M.divergence=this.vectors[g[1]][3],M.index=S),M},p.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function T(E,S){var g=s(E,S.meshShader.vertex,S.meshShader.fragment,null,S.meshShader.attributes);return g.attributes.position.location=0,g.attributes.color.location=2,g.attributes.uv.location=3,g.attributes.vector.location=4,g}function k(E,S){var g=s(E,S.pickShader.vertex,S.pickShader.fragment,null,S.pickShader.attributes);return g.attributes.position.location=0,g.attributes.id.location=1,g.attributes.vector.location=4,g}function _(E,S,g){var C=g.shaders;arguments.length===1&&(S=E,E=S.gl);var M=T(E,C),P=k(E,C),D=f(E,v(new Uint8Array([255,255,255,255]),[1,1,4]));D.generateMipmap(),D.minFilter=E.LINEAR_MIPMAP_LINEAR,D.magFilter=E.LINEAR;var q=l(E),O=l(E),U=l(E),B=l(E),F=l(E),N=u(E,[{buffer:q,type:E.FLOAT,size:4},{buffer:F,type:E.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:U,type:E.FLOAT,size:4},{buffer:B,type:E.FLOAT,size:2},{buffer:O,type:E.FLOAT,size:4}]),X=new b(E,D,M,P,q,O,F,U,B,N,g.traceType||"cone");return X.update(S),X}n.exports=_},614:function(n,a,o){var s=o(3236),l=s([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),u=s([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),f=s([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * (view * conePosition);
  f_id        = id;
  f_position  = position.xyz;
}
`]),c=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);a.meshShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},a.pickShader={vertex:f,fragment:c,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},737:function(n){n.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},5171:function(n,a,o){var s=o(737);n.exports=function(u){return s[u]}},9165:function(n,a,o){"use strict";n.exports=b;var s=o(2762),l=o(8116),u=o(3436),f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(p,w,A,T){this.gl=p,this.shader=T,this.buffer=w,this.vao=A,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var h=c.prototype;h.isOpaque=function(){return!this.hasAlpha},h.isTransparent=function(){return this.hasAlpha},h.drawTransparent=h.draw=function(p){var w=this.gl,A=this.shader.uniforms;this.shader.bind();var T=A.view=p.view||f,k=A.projection=p.projection||f;A.model=p.model||f,A.clipBounds=this.clipBounds,A.opacity=this.opacity;var _=T[12],E=T[13],S=T[14],g=T[15],C=p._ortho||!1,M=C?2:1,P=M*this.pixelRatio*(k[3]*_+k[7]*E+k[11]*S+k[15]*g)/w.drawingBufferHeight;this.vao.bind();for(var D=0;D<3;++D)w.lineWidth(this.lineWidth[D]*this.pixelRatio),A.capSize=this.capSize[D]*P,this.lineCount[D]&&w.drawArrays(w.LINES,this.lineOffset[D],this.lineCount[D]);this.vao.unbind()};function v(p,w){for(var A=0;A<3;++A)p[0][A]=Math.min(p[0][A],w[A]),p[1][A]=Math.max(p[1][A],w[A])}var d=function(){for(var p=new Array(3),w=0;w<3;++w){for(var A=[],T=1;T<=2;++T)for(var k=-1;k<=1;k+=2){var _=(T+w)%3,E=[0,0,0];E[_]=k,A.push(E)}p[w]=A}return p}();function x(p,w,A,T){for(var k=d[T],_=0;_<k.length;++_){var E=k[_];p.push(w[0],w[1],w[2],A[0],A[1],A[2],A[3],E[0],E[1],E[2])}return k.length}h.update=function(p){p=p||{},"lineWidth"in p&&(this.lineWidth=p.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in p&&(this.capSize=p.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in p&&(this.opacity=+p.opacity,this.opacity<1&&(this.hasAlpha=!0));var w=p.color||[[0,0,0],[0,0,0],[0,0,0]],A=p.position,T=p.error;if(Array.isArray(w[0])||(w=[w,w,w]),A&&T){var k=[],_=A.length,E=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var S=0;S<3;++S){this.lineOffset[S]=E;e:for(var g=0;g<_;++g){for(var C=A[g],M=0;M<3;++M)if(isNaN(C[M])||!isFinite(C[M]))continue e;var P=T[g],D=w[S];if(Array.isArray(D[0])&&(D=w[g]),D.length===3?D=[D[0],D[1],D[2],1]:D.length===4&&(D=[D[0],D[1],D[2],D[3]],!this.hasAlpha&&D[3]<1&&(this.hasAlpha=!0)),!(isNaN(P[0][S])||isNaN(P[1][S]))){if(P[0][S]<0){var q=C.slice();q[S]+=P[0][S],k.push(C[0],C[1],C[2],D[0],D[1],D[2],D[3],0,0,0,q[0],q[1],q[2],D[0],D[1],D[2],D[3],0,0,0),v(this.bounds,q),E+=2+x(k,q,D,S)}if(P[1][S]>0){var q=C.slice();q[S]+=P[1][S],k.push(C[0],C[1],C[2],D[0],D[1],D[2],D[3],0,0,0,q[0],q[1],q[2],D[0],D[1],D[2],D[3],0,0,0),v(this.bounds,q),E+=2+x(k,q,D,S)}}}this.lineCount[S]=E-this.lineOffset[S]}this.buffer.update(k)}},h.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function b(p){var w=p.gl,A=s(w),T=l(w,[{buffer:A,type:w.FLOAT,size:3,offset:0,stride:40},{buffer:A,type:w.FLOAT,size:4,offset:12,stride:40},{buffer:A,type:w.FLOAT,size:3,offset:28,stride:40}]),k=u(w);k.attributes.position.location=0,k.attributes.color.location=1,k.attributes.offset.location=2;var _=new c(w,A,T,k);return _.update(p),_}},3436:function(n,a,o){"use strict";var s=o(3236),l=o(9405),u=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * (view * worldPosition);
  fragColor           = color;
  fragPosition        = position;
}`]),f=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);n.exports=function(c){return l(c,u,f,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},2260:function(n,a,o){"use strict";var s=o(7766);n.exports=E;var l=null,u,f,c,h;function v(S){var g=S.getParameter(S.FRAMEBUFFER_BINDING),C=S.getParameter(S.RENDERBUFFER_BINDING),M=S.getParameter(S.TEXTURE_BINDING_2D);return[g,C,M]}function d(S,g){S.bindFramebuffer(S.FRAMEBUFFER,g[0]),S.bindRenderbuffer(S.RENDERBUFFER,g[1]),S.bindTexture(S.TEXTURE_2D,g[2])}function x(S,g){var C=S.getParameter(g.MAX_COLOR_ATTACHMENTS_WEBGL);l=new Array(C+1);for(var M=0;M<=C;++M){for(var P=new Array(C),D=0;D<M;++D)P[D]=S.COLOR_ATTACHMENT0+D;for(var D=M;D<C;++D)P[D]=S.NONE;l[M]=P}}function b(S){switch(S){case u:throw new Error("gl-fbo: Framebuffer unsupported");case f:throw new Error("gl-fbo: Framebuffer incomplete attachment");case c:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case h:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function p(S,g,C,M,P,D){if(!M)return null;var q=s(S,g,C,P,M);return q.magFilter=S.NEAREST,q.minFilter=S.NEAREST,q.mipSamples=1,q.bind(),S.framebufferTexture2D(S.FRAMEBUFFER,D,S.TEXTURE_2D,q.handle,0),q}function w(S,g,C,M,P){var D=S.createRenderbuffer();return S.bindRenderbuffer(S.RENDERBUFFER,D),S.renderbufferStorage(S.RENDERBUFFER,M,g,C),S.framebufferRenderbuffer(S.FRAMEBUFFER,P,S.RENDERBUFFER,D),D}function A(S){var g=v(S.gl),C=S.gl,M=S.handle=C.createFramebuffer(),P=S._shape[0],D=S._shape[1],q=S.color.length,O=S._ext,U=S._useStencil,B=S._useDepth,F=S._colorType;C.bindFramebuffer(C.FRAMEBUFFER,M);for(var N=0;N<q;++N)S.color[N]=p(C,P,D,F,C.RGBA,C.COLOR_ATTACHMENT0+N);q===0?(S._color_rb=w(C,P,D,C.RGBA4,C.COLOR_ATTACHMENT0),O&&O.drawBuffersWEBGL(l[0])):q>1&&O.drawBuffersWEBGL(l[q]);var X=C.getExtension("WEBGL_depth_texture");X?U?S.depth=p(C,P,D,X.UNSIGNED_INT_24_8_WEBGL,C.DEPTH_STENCIL,C.DEPTH_STENCIL_ATTACHMENT):B&&(S.depth=p(C,P,D,C.UNSIGNED_SHORT,C.DEPTH_COMPONENT,C.DEPTH_ATTACHMENT)):B&&U?S._depth_rb=w(C,P,D,C.DEPTH_STENCIL,C.DEPTH_STENCIL_ATTACHMENT):B?S._depth_rb=w(C,P,D,C.DEPTH_COMPONENT16,C.DEPTH_ATTACHMENT):U&&(S._depth_rb=w(C,P,D,C.STENCIL_INDEX,C.STENCIL_ATTACHMENT));var K=C.checkFramebufferStatus(C.FRAMEBUFFER);if(K!==C.FRAMEBUFFER_COMPLETE){S._destroyed=!0,C.bindFramebuffer(C.FRAMEBUFFER,null),C.deleteFramebuffer(S.handle),S.handle=null,S.depth&&(S.depth.dispose(),S.depth=null),S._depth_rb&&(C.deleteRenderbuffer(S._depth_rb),S._depth_rb=null);for(var N=0;N<S.color.length;++N)S.color[N].dispose(),S.color[N]=null;S._color_rb&&(C.deleteRenderbuffer(S._color_rb),S._color_rb=null),d(C,g),b(K)}d(C,g)}function T(S,g,C,M,P,D,q,O){this.gl=S,this._shape=[g|0,C|0],this._destroyed=!1,this._ext=O,this.color=new Array(P);for(var U=0;U<P;++U)this.color[U]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=M,this._useDepth=D,this._useStencil=q;var B=this,F=[g|0,C|0];Object.defineProperties(F,{0:{get:function(){return B._shape[0]},set:function(N){return B.width=N}},1:{get:function(){return B._shape[1]},set:function(N){return B.height=N}}}),this._shapeVector=F,A(this)}var k=T.prototype;function _(S,g,C){if(S._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(S._shape[0]===g&&S._shape[1]===C)){var M=S.gl,P=M.getParameter(M.MAX_RENDERBUFFER_SIZE);if(g<0||g>P||C<0||C>P)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");S._shape[0]=g,S._shape[1]=C;for(var D=v(M),q=0;q<S.color.length;++q)S.color[q].shape=S._shape;S._color_rb&&(M.bindRenderbuffer(M.RENDERBUFFER,S._color_rb),M.renderbufferStorage(M.RENDERBUFFER,M.RGBA4,S._shape[0],S._shape[1])),S.depth&&(S.depth.shape=S._shape),S._depth_rb&&(M.bindRenderbuffer(M.RENDERBUFFER,S._depth_rb),S._useDepth&&S._useStencil?M.renderbufferStorage(M.RENDERBUFFER,M.DEPTH_STENCIL,S._shape[0],S._shape[1]):S._useDepth?M.renderbufferStorage(M.RENDERBUFFER,M.DEPTH_COMPONENT16,S._shape[0],S._shape[1]):S._useStencil&&M.renderbufferStorage(M.RENDERBUFFER,M.STENCIL_INDEX,S._shape[0],S._shape[1])),M.bindFramebuffer(M.FRAMEBUFFER,S.handle);var O=M.checkFramebufferStatus(M.FRAMEBUFFER);O!==M.FRAMEBUFFER_COMPLETE&&(S.dispose(),d(M,D),b(O)),d(M,D)}}Object.defineProperties(k,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(S){if(Array.isArray(S)||(S=[S|0,S|0]),S.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var g=S[0]|0,C=S[1]|0;return _(this,g,C),[g,C]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(S){return S=S|0,_(this,S,this._shape[1]),S},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(S){return S=S|0,_(this,this._shape[0],S),S},enumerable:!1}}),k.bind=function(){if(!this._destroyed){var S=this.gl;S.bindFramebuffer(S.FRAMEBUFFER,this.handle),S.viewport(0,0,this._shape[0],this._shape[1])}},k.dispose=function(){if(!this._destroyed){this._destroyed=!0;var S=this.gl;S.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(S.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var g=0;g<this.color.length;++g)this.color[g].dispose(),this.color[g]=null;this._color_rb&&(S.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function E(S,g,C,M){u||(u=S.FRAMEBUFFER_UNSUPPORTED,f=S.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,c=S.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,h=S.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var P=S.getExtension("WEBGL_draw_buffers");if(!l&&P&&x(S,P),Array.isArray(g)&&(M=C,C=g[1]|0,g=g[0]|0),typeof g!="number")throw new Error("gl-fbo: Missing shape parameter");var D=S.getParameter(S.MAX_RENDERBUFFER_SIZE);if(g<0||g>D||C<0||C>D)throw new Error("gl-fbo: Parameters are too large for FBO");M=M||{};var q=1;if("color"in M){if(q=Math.max(M.color|0,0),q<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(q>1)if(P){if(q>S.getParameter(P.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+q+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var O=S.UNSIGNED_BYTE,U=S.getExtension("OES_texture_float");if(M.float&&q>0){if(!U)throw new Error("gl-fbo: Context does not support floating point textures");O=S.FLOAT}else M.preferFloat&&q>0&&U&&(O=S.FLOAT);var B=!0;"depth"in M&&(B=!!M.depth);var F=!1;return"stencil"in M&&(F=!!M.stencil),new T(S,g,C,O,q,B,F,P)}},2992:function(n,a,o){var s=o(3387).sprintf,l=o(5171),u=o(1848),f=o(1085);n.exports=c;function c(h,v,d){"use strict";var x=u(v)||"of unknown name (see npm glsl-shader-name)",b="unknown type";d!==void 0&&(b=d===l.FRAGMENT_SHADER?"fragment":"vertex");for(var p=s(`Error compiling %s shader %s:
`,b,x),w=s("%s%s",p,h),A=h.split(`
`),T={},k=0;k<A.length;k++){var _=A[k];if(!(_===""||_==="\0")){var E=parseInt(_.split(":")[2]);if(isNaN(E))throw new Error(s("Could not parse error: %s",_));T[E]=_}}for(var S=f(v).split(`
`),k=0;k<S.length;k++)if(!(!T[k+3]&&!T[k+2]&&!T[k+1])){var g=S[k];if(p+=g+`
`,T[k+1]){var C=T[k+1];C=C.substr(C.split(":",3).join(":").length+1).trim(),p+=s(`^^^ %s

`,C)}}return{long:p.trim(),short:w.trim()}}},2510:function(n,a,o){"use strict";n.exports=b;var s=o(2478),l=o(7762),u=o(1888),f=o(9405),c=o(2762),h=o(6768);function v(p,w,A,T,k,_,E){this.plot=p,this.shader=w,this.pickShader=A,this.positionBuffer=T,this.weightBuffer=k,this.colorBuffer=_,this.idBuffer=E,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var d=v.prototype,x=[0,0,1,0,0,1,1,0,1,1,0,1];d.draw=function(){var p=[1,0,0,0,1,0,0,0,1];return function(){var w=this.plot,A=this.shader,T=this.bounds,k=this.numVertices;if(!(k<=0)){var _=w.gl,E=w.dataBox,S=T[2]-T[0],g=T[3]-T[1],C=E[2]-E[0],M=E[3]-E[1];p[0]=2*S/C,p[4]=2*g/M,p[6]=2*(T[0]-E[0])/C-1,p[7]=2*(T[1]-E[1])/M-1,A.bind();var P=A.uniforms;P.viewTransform=p,P.shape=this.shape;var D=A.attributes;this.positionBuffer.bind(),D.position.pointer(),this.weightBuffer.bind(),D.weight.pointer(_.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),D.color.pointer(_.UNSIGNED_BYTE,!0),_.drawArrays(_.TRIANGLES,0,k)}}}(),d.drawPick=function(){var p=[1,0,0,0,1,0,0,0,1],w=[0,0,0,0];return function(A){var T=this.plot,k=this.pickShader,_=this.bounds,E=this.numVertices;if(!(E<=0)){var S=T.gl,g=T.dataBox,C=_[2]-_[0],M=_[3]-_[1],P=g[2]-g[0],D=g[3]-g[1];p[0]=2*C/P,p[4]=2*M/D,p[6]=2*(_[0]-g[0])/P-1,p[7]=2*(_[1]-g[1])/D-1;for(var q=0;q<4;++q)w[q]=A>>q*8&255;this.pickOffset=A,k.bind();var O=k.uniforms;O.viewTransform=p,O.pickOffset=w,O.shape=this.shape;var U=k.attributes;return this.positionBuffer.bind(),U.position.pointer(),this.weightBuffer.bind(),U.weight.pointer(S.UNSIGNED_BYTE,!1),this.idBuffer.bind(),U.pickId.pointer(S.UNSIGNED_BYTE,!1),S.drawArrays(S.TRIANGLES,0,E),A+this.shape[0]*this.shape[1]}}}(),d.pick=function(p,w,A){var T=this.pickOffset,k=this.shape[0]*this.shape[1];if(A<T||A>=T+k)return null;var _=A-T,E=this.xData,S=this.yData;return{object:this,pointId:_,dataCoord:[E[_%this.shape[0]],S[_/this.shape[0]|0]]}},d.update=function(p){p=p||{};var w=p.shape||[0,0],A=p.x||l(w[0]),T=p.y||l(w[1]),k=p.z||new Float32Array(w[0]*w[1]),_=p.zsmooth!==!1;this.xData=A,this.yData=T;var E=p.colorLevels||[0],S=p.colorValues||[0,0,0,1],g=E.length,C=this.bounds,M,P,D,q;_?(M=C[0]=A[0],P=C[1]=T[0],D=C[2]=A[A.length-1],q=C[3]=T[T.length-1]):(M=C[0]=A[0]+(A[1]-A[0])/2,P=C[1]=T[0]+(T[1]-T[0])/2,D=C[2]=A[A.length-1]+(A[A.length-1]-A[A.length-2])/2,q=C[3]=T[T.length-1]+(T[T.length-1]-T[T.length-2])/2);var O=1/(D-M),U=1/(q-P),B=w[0],F=w[1];this.shape=[B,F];var N=(_?(B-1)*(F-1):B*F)*(x.length>>>1);this.numVertices=N;for(var X=u.mallocUint8(N*4),K=u.mallocFloat32(N*2),ne=u.mallocUint8(N*2),fe=u.mallocUint32(N),ue=0,ee=_?B-1:B,Z=_?F-1:F,oe=0;oe<Z;++oe){var ce,le;_?(ce=U*(T[oe]-P),le=U*(T[oe+1]-P)):(ce=oe<F-1?U*(T[oe]-(T[oe+1]-T[oe])/2-P):U*(T[oe]-(T[oe]-T[oe-1])/2-P),le=oe<F-1?U*(T[oe]+(T[oe+1]-T[oe])/2-P):U*(T[oe]+(T[oe]-T[oe-1])/2-P));for(var me=0;me<ee;++me){var he,te;_?(he=O*(A[me]-M),te=O*(A[me+1]-M)):(he=me<B-1?O*(A[me]-(A[me+1]-A[me])/2-M):O*(A[me]-(A[me]-A[me-1])/2-M),te=me<B-1?O*(A[me]+(A[me+1]-A[me])/2-M):O*(A[me]+(A[me]-A[me-1])/2-M));for(var ge=0;ge<x.length;ge+=2){var ae=x[ge],_e=x[ge+1],Ce=_?(oe+_e)*B+(me+ae):oe*B+me,qe=k[Ce],rt=s.le(E,qe),Re,Ie,ot,lt;if(rt<0)Re=S[0],Ie=S[1],ot=S[2],lt=S[3];else if(rt===g-1)Re=S[4*g-4],Ie=S[4*g-3],ot=S[4*g-2],lt=S[4*g-1];else{var ht=(qe-E[rt])/(E[rt+1]-E[rt]),xt=1-ht,Vt=4*rt,Ht=4*(rt+1);Re=xt*S[Vt]+ht*S[Ht],Ie=xt*S[Vt+1]+ht*S[Ht+1],ot=xt*S[Vt+2]+ht*S[Ht+2],lt=xt*S[Vt+3]+ht*S[Ht+3]}X[4*ue]=255*Re,X[4*ue+1]=255*Ie,X[4*ue+2]=255*ot,X[4*ue+3]=255*lt,K[2*ue]=he*.5+te*.5,K[2*ue+1]=ce*.5+le*.5,ne[2*ue]=ae,ne[2*ue+1]=_e,fe[ue]=oe*B+me,ue+=1}}}this.positionBuffer.update(K),this.weightBuffer.update(ne),this.colorBuffer.update(X),this.idBuffer.update(fe),u.free(K),u.free(X),u.free(ne),u.free(fe)},d.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function b(p,w){var A=p.gl,T=f(A,h.vertex,h.fragment),k=f(A,h.pickVertex,h.pickFragment),_=c(A),E=c(A),S=c(A),g=c(A),C=new v(p,T,k,_,E,S,g);return C.update(w),p.addObject(C),C}},6768:function(n,a,o){"use strict";var s=o(3236);n.exports={fragment:s([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:s([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},7319:function(n,a,o){var s=o(3236),l=o(9405),u=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * (view * (model * vec4(p, 1.0)));
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),f=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),c=s([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),h=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];a.createShader=function(v){return l(v,u,f,null,h)},a.createPickShader=function(v){return l(v,u,c,null,h)}},5714:function(n,a,o){"use strict";n.exports=S;var s=o(2762),l=o(8116),u=o(7766),f=new Uint8Array(4),c=new Float32Array(f.buffer);function h(g,C,M,P){return f[0]=P,f[1]=M,f[2]=C,f[3]=g,c[0]}var v=o(2478),d=o(9618),x=o(7319),b=x.createShader,p=x.createPickShader,w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function A(g,C){for(var M=0,P=0;P<3;++P){var D=g[P]-C[P];M+=D*D}return Math.sqrt(M)}function T(g){for(var C=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],M=0;M<3;++M)C[0][M]=Math.max(g[0][M],C[0][M]),C[1][M]=Math.min(g[1][M],C[1][M]);return C}function k(g,C,M,P){this.arcLength=g,this.position=C,this.index=M,this.dataCoordinate=P}function _(g,C,M,P,D,q){this.gl=g,this.shader=C,this.pickShader=M,this.buffer=P,this.vao=D,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=q,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var E=_.prototype;E.isTransparent=function(){return this.hasAlpha},E.isOpaque=function(){return!this.hasAlpha},E.pickSlots=1,E.setPickBase=function(g){this.pickId=g},E.drawTransparent=E.draw=function(g){if(this.vertexCount){var C=this.gl,M=this.shader,P=this.vao;M.bind(),M.uniforms={model:g.model||w,view:g.view||w,projection:g.projection||w,clipBounds:T(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[C.drawingBufferWidth,C.drawingBufferHeight],pixelRatio:this.pixelRatio},P.bind(),P.draw(C.TRIANGLE_STRIP,this.vertexCount),P.unbind()}},E.drawPick=function(g){if(this.vertexCount){var C=this.gl,M=this.pickShader,P=this.vao;M.bind(),M.uniforms={model:g.model||w,view:g.view||w,projection:g.projection||w,pickId:this.pickId,clipBounds:T(this.clipBounds),screenShape:[C.drawingBufferWidth,C.drawingBufferHeight],pixelRatio:this.pixelRatio},P.bind(),P.draw(C.TRIANGLE_STRIP,this.vertexCount),P.unbind()}},E.update=function(g){var C,M;this.dirty=!0;var P=!!g.connectGaps;"dashScale"in g&&(this.dashScale=g.dashScale),this.hasAlpha=!1,"opacity"in g&&(this.opacity=+g.opacity,this.opacity<1&&(this.hasAlpha=!0));var D=[],q=[],O=[],U=0,B=0,F=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],N=g.position||g.positions;if(N){var X=g.color||g.colors||[0,0,0,1],K=g.lineWidth||1,ne=!1;e:for(C=1;C<N.length;++C){var fe=N[C-1],ue=N[C];for(q.push(U),O.push(fe.slice()),M=0;M<3;++M){if(isNaN(fe[M])||isNaN(ue[M])||!isFinite(fe[M])||!isFinite(ue[M])){if(!P&&D.length>0){for(var ee=0;ee<24;++ee)D.push(D[D.length-12]);B+=2,ne=!0}continue e}F[0][M]=Math.min(F[0][M],fe[M],ue[M]),F[1][M]=Math.max(F[1][M],fe[M],ue[M])}var Z,oe;Array.isArray(X[0])?(Z=X.length>C-1?X[C-1]:X.length>0?X[X.length-1]:[0,0,0,1],oe=X.length>C?X[C]:X.length>0?X[X.length-1]:[0,0,0,1]):Z=oe=X,Z.length===3&&(Z=[Z[0],Z[1],Z[2],1]),oe.length===3&&(oe=[oe[0],oe[1],oe[2],1]),!this.hasAlpha&&Z[3]<1&&(this.hasAlpha=!0);var ce;Array.isArray(K)?ce=K.length>C-1?K[C-1]:K.length>0?K[K.length-1]:[0,0,0,1]:ce=K;var le=U;if(U+=A(fe,ue),ne){for(M=0;M<2;++M)D.push(fe[0],fe[1],fe[2],ue[0],ue[1],ue[2],le,ce,Z[0],Z[1],Z[2],Z[3]);B+=2,ne=!1}D.push(fe[0],fe[1],fe[2],ue[0],ue[1],ue[2],le,ce,Z[0],Z[1],Z[2],Z[3],fe[0],fe[1],fe[2],ue[0],ue[1],ue[2],le,-ce,Z[0],Z[1],Z[2],Z[3],ue[0],ue[1],ue[2],fe[0],fe[1],fe[2],U,-ce,oe[0],oe[1],oe[2],oe[3],ue[0],ue[1],ue[2],fe[0],fe[1],fe[2],U,ce,oe[0],oe[1],oe[2],oe[3]),B+=4}}if(this.buffer.update(D),q.push(U),O.push(N[N.length-1].slice()),this.bounds=F,this.vertexCount=B,this.points=O,this.arcLength=q,"dashes"in g){var me=g.dashes,he=me.slice();for(he.unshift(0),C=1;C<he.length;++C)he[C]=he[C-1]+he[C];var te=d(new Array(256*4),[256,1,4]);for(C=0;C<256;++C){for(M=0;M<4;++M)te.set(C,0,M,0);v.le(he,he[he.length-1]*C/255)&1?te.set(C,0,0,0):te.set(C,0,0,255)}this.texture.setPixels(te)}},E.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},E.pick=function(g){if(!g||g.id!==this.pickId)return null;var C=h(g.value[0],g.value[1],g.value[2],0),M=v.le(this.arcLength,C);if(M<0)return null;if(M===this.arcLength.length-1)return new k(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),M);for(var P=this.points[M],D=this.points[Math.min(M+1,this.points.length-1)],q=(C-this.arcLength[M])/(this.arcLength[M+1]-this.arcLength[M]),O=1-q,U=[0,0,0],B=0;B<3;++B)U[B]=O*P[B]+q*D[B];var F=Math.min(q<.5?M:M+1,this.points.length-1);return new k(C,U,F,this.points[F])};function S(g){var C=g.gl||g.scene&&g.scene.gl,M=b(C);M.attributes.position.location=0,M.attributes.nextPosition.location=1,M.attributes.arcLength.location=2,M.attributes.lineWidth.location=3,M.attributes.color.location=4;var P=p(C);P.attributes.position.location=0,P.attributes.nextPosition.location=1,P.attributes.arcLength.location=2,P.attributes.lineWidth.location=3,P.attributes.color.location=4;for(var D=s(C),q=l(C,[{buffer:D,size:3,offset:0,stride:48},{buffer:D,size:3,offset:12,stride:48},{buffer:D,size:1,offset:24,stride:48},{buffer:D,size:1,offset:28,stride:48},{buffer:D,size:4,offset:32,stride:48}]),O=d(new Array(256*4),[256,1,4]),U=0;U<1024;++U)O.data[U]=255;var B=u(C,O);B.wrap=C.REPEAT;var F=new _(C,M,P,D,q,B);return F.update(g),F}},1903:function(n){n.exports=a;function a(o){var s=new Float32Array(16);return s[0]=o[0],s[1]=o[1],s[2]=o[2],s[3]=o[3],s[4]=o[4],s[5]=o[5],s[6]=o[6],s[7]=o[7],s[8]=o[8],s[9]=o[9],s[10]=o[10],s[11]=o[11],s[12]=o[12],s[13]=o[13],s[14]=o[14],s[15]=o[15],s}},6864:function(n){n.exports=a;function a(){var o=new Float32Array(16);return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},9921:function(n){n.exports=a;function a(o){var s=o[0],l=o[1],u=o[2],f=o[3],c=o[4],h=o[5],v=o[6],d=o[7],x=o[8],b=o[9],p=o[10],w=o[11],A=o[12],T=o[13],k=o[14],_=o[15],E=s*h-l*c,S=s*v-u*c,g=s*d-f*c,C=l*v-u*h,M=l*d-f*h,P=u*d-f*v,D=x*T-b*A,q=x*k-p*A,O=x*_-w*A,U=b*k-p*T,B=b*_-w*T,F=p*_-w*k;return E*F-S*B+g*U+C*O-M*q+P*D}},7399:function(n){n.exports=a;function a(o,s){var l=s[0],u=s[1],f=s[2],c=s[3],h=l+l,v=u+u,d=f+f,x=l*h,b=u*h,p=u*v,w=f*h,A=f*v,T=f*d,k=c*h,_=c*v,E=c*d;return o[0]=1-p-T,o[1]=b+E,o[2]=w-_,o[3]=0,o[4]=b-E,o[5]=1-x-T,o[6]=A+k,o[7]=0,o[8]=w+_,o[9]=A-k,o[10]=1-x-p,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},6743:function(n){n.exports=a;function a(o,s,l){var u=s[0],f=s[1],c=s[2],h=s[3],v=u+u,d=f+f,x=c+c,b=u*v,p=u*d,w=u*x,A=f*d,T=f*x,k=c*x,_=h*v,E=h*d,S=h*x;return o[0]=1-(A+k),o[1]=p+S,o[2]=w-E,o[3]=0,o[4]=p-S,o[5]=1-(b+k),o[6]=T+_,o[7]=0,o[8]=w+E,o[9]=T-_,o[10]=1-(b+A),o[11]=0,o[12]=l[0],o[13]=l[1],o[14]=l[2],o[15]=1,o}},7894:function(n){n.exports=a;function a(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},7608:function(n){n.exports=a;function a(o,s){var l=s[0],u=s[1],f=s[2],c=s[3],h=s[4],v=s[5],d=s[6],x=s[7],b=s[8],p=s[9],w=s[10],A=s[11],T=s[12],k=s[13],_=s[14],E=s[15],S=l*v-u*h,g=l*d-f*h,C=l*x-c*h,M=u*d-f*v,P=u*x-c*v,D=f*x-c*d,q=b*k-p*T,O=b*_-w*T,U=b*E-A*T,B=p*_-w*k,F=p*E-A*k,N=w*E-A*_,X=S*N-g*F+C*B+M*U-P*O+D*q;return X?(X=1/X,o[0]=(v*N-d*F+x*B)*X,o[1]=(f*F-u*N-c*B)*X,o[2]=(k*D-_*P+E*M)*X,o[3]=(w*P-p*D-A*M)*X,o[4]=(d*U-h*N-x*O)*X,o[5]=(l*N-f*U+c*O)*X,o[6]=(_*C-T*D-E*g)*X,o[7]=(b*D-w*C+A*g)*X,o[8]=(h*F-v*U+x*q)*X,o[9]=(u*U-l*F-c*q)*X,o[10]=(T*P-k*C+E*S)*X,o[11]=(p*C-b*P-A*S)*X,o[12]=(v*O-h*B-d*q)*X,o[13]=(l*B-u*O+f*q)*X,o[14]=(k*g-T*M-_*S)*X,o[15]=(b*M-p*g+w*S)*X,o):null}},6582:function(n,a,o){var s=o(7894);n.exports=l;function l(u,f,c,h){var v,d,x,b,p,w,A,T,k,_,E=f[0],S=f[1],g=f[2],C=h[0],M=h[1],P=h[2],D=c[0],q=c[1],O=c[2];return Math.abs(E-D)<1e-6&&Math.abs(S-q)<1e-6&&Math.abs(g-O)<1e-6?s(u):(A=E-D,T=S-q,k=g-O,_=1/Math.sqrt(A*A+T*T+k*k),A*=_,T*=_,k*=_,v=M*k-P*T,d=P*A-C*k,x=C*T-M*A,_=Math.sqrt(v*v+d*d+x*x),_?(_=1/_,v*=_,d*=_,x*=_):(v=0,d=0,x=0),b=T*x-k*d,p=k*v-A*x,w=A*d-T*v,_=Math.sqrt(b*b+p*p+w*w),_?(_=1/_,b*=_,p*=_,w*=_):(b=0,p=0,w=0),u[0]=v,u[1]=b,u[2]=A,u[3]=0,u[4]=d,u[5]=p,u[6]=T,u[7]=0,u[8]=x,u[9]=w,u[10]=k,u[11]=0,u[12]=-(v*E+d*S+x*g),u[13]=-(b*E+p*S+w*g),u[14]=-(A*E+T*S+k*g),u[15]=1,u)}},6760:function(n){n.exports=a;function a(o,s,l){var u=s[0],f=s[1],c=s[2],h=s[3],v=s[4],d=s[5],x=s[6],b=s[7],p=s[8],w=s[9],A=s[10],T=s[11],k=s[12],_=s[13],E=s[14],S=s[15],g=l[0],C=l[1],M=l[2],P=l[3];return o[0]=g*u+C*v+M*p+P*k,o[1]=g*f+C*d+M*w+P*_,o[2]=g*c+C*x+M*A+P*E,o[3]=g*h+C*b+M*T+P*S,g=l[4],C=l[5],M=l[6],P=l[7],o[4]=g*u+C*v+M*p+P*k,o[5]=g*f+C*d+M*w+P*_,o[6]=g*c+C*x+M*A+P*E,o[7]=g*h+C*b+M*T+P*S,g=l[8],C=l[9],M=l[10],P=l[11],o[8]=g*u+C*v+M*p+P*k,o[9]=g*f+C*d+M*w+P*_,o[10]=g*c+C*x+M*A+P*E,o[11]=g*h+C*b+M*T+P*S,g=l[12],C=l[13],M=l[14],P=l[15],o[12]=g*u+C*v+M*p+P*k,o[13]=g*f+C*d+M*w+P*_,o[14]=g*c+C*x+M*A+P*E,o[15]=g*h+C*b+M*T+P*S,o}},4040:function(n){n.exports=a;function a(o,s,l,u,f,c,h){var v=1/(s-l),d=1/(u-f),x=1/(c-h);return o[0]=-2*v,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*d,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*x,o[11]=0,o[12]=(s+l)*v,o[13]=(f+u)*d,o[14]=(h+c)*x,o[15]=1,o}},4772:function(n){n.exports=a;function a(o,s,l,u,f){var c=1/Math.tan(s/2),h=1/(u-f);return o[0]=c/l,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=c,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(f+u)*h,o[11]=-1,o[12]=0,o[13]=0,o[14]=2*f*u*h,o[15]=0,o}},6079:function(n){n.exports=a;function a(o,s,l,u){var f=u[0],c=u[1],h=u[2],v=Math.sqrt(f*f+c*c+h*h),d,x,b,p,w,A,T,k,_,E,S,g,C,M,P,D,q,O,U,B,F,N,X,K;return Math.abs(v)<1e-6?null:(v=1/v,f*=v,c*=v,h*=v,d=Math.sin(l),x=Math.cos(l),b=1-x,p=s[0],w=s[1],A=s[2],T=s[3],k=s[4],_=s[5],E=s[6],S=s[7],g=s[8],C=s[9],M=s[10],P=s[11],D=f*f*b+x,q=c*f*b+h*d,O=h*f*b-c*d,U=f*c*b-h*d,B=c*c*b+x,F=h*c*b+f*d,N=f*h*b+c*d,X=c*h*b-f*d,K=h*h*b+x,o[0]=p*D+k*q+g*O,o[1]=w*D+_*q+C*O,o[2]=A*D+E*q+M*O,o[3]=T*D+S*q+P*O,o[4]=p*U+k*B+g*F,o[5]=w*U+_*B+C*F,o[6]=A*U+E*B+M*F,o[7]=T*U+S*B+P*F,o[8]=p*N+k*X+g*K,o[9]=w*N+_*X+C*K,o[10]=A*N+E*X+M*K,o[11]=T*N+S*X+P*K,s!==o&&(o[12]=s[12],o[13]=s[13],o[14]=s[14],o[15]=s[15]),o)}},5567:function(n){n.exports=a;function a(o,s,l){var u=Math.sin(l),f=Math.cos(l),c=s[4],h=s[5],v=s[6],d=s[7],x=s[8],b=s[9],p=s[10],w=s[11];return s!==o&&(o[0]=s[0],o[1]=s[1],o[2]=s[2],o[3]=s[3],o[12]=s[12],o[13]=s[13],o[14]=s[14],o[15]=s[15]),o[4]=c*f+x*u,o[5]=h*f+b*u,o[6]=v*f+p*u,o[7]=d*f+w*u,o[8]=x*f-c*u,o[9]=b*f-h*u,o[10]=p*f-v*u,o[11]=w*f-d*u,o}},2408:function(n){n.exports=a;function a(o,s,l){var u=Math.sin(l),f=Math.cos(l),c=s[0],h=s[1],v=s[2],d=s[3],x=s[8],b=s[9],p=s[10],w=s[11];return s!==o&&(o[4]=s[4],o[5]=s[5],o[6]=s[6],o[7]=s[7],o[12]=s[12],o[13]=s[13],o[14]=s[14],o[15]=s[15]),o[0]=c*f-x*u,o[1]=h*f-b*u,o[2]=v*f-p*u,o[3]=d*f-w*u,o[8]=c*u+x*f,o[9]=h*u+b*f,o[10]=v*u+p*f,o[11]=d*u+w*f,o}},7089:function(n){n.exports=a;function a(o,s,l){var u=Math.sin(l),f=Math.cos(l),c=s[0],h=s[1],v=s[2],d=s[3],x=s[4],b=s[5],p=s[6],w=s[7];return s!==o&&(o[8]=s[8],o[9]=s[9],o[10]=s[10],o[11]=s[11],o[12]=s[12],o[13]=s[13],o[14]=s[14],o[15]=s[15]),o[0]=c*f+x*u,o[1]=h*f+b*u,o[2]=v*f+p*u,o[3]=d*f+w*u,o[4]=x*f-c*u,o[5]=b*f-h*u,o[6]=p*f-v*u,o[7]=w*f-d*u,o}},2504:function(n){n.exports=a;function a(o,s,l){var u=l[0],f=l[1],c=l[2];return o[0]=s[0]*u,o[1]=s[1]*u,o[2]=s[2]*u,o[3]=s[3]*u,o[4]=s[4]*f,o[5]=s[5]*f,o[6]=s[6]*f,o[7]=s[7]*f,o[8]=s[8]*c,o[9]=s[9]*c,o[10]=s[10]*c,o[11]=s[11]*c,o[12]=s[12],o[13]=s[13],o[14]=s[14],o[15]=s[15],o}},7656:function(n){n.exports=a;function a(o,s,l){var u=l[0],f=l[1],c=l[2],h,v,d,x,b,p,w,A,T,k,_,E;return s===o?(o[12]=s[0]*u+s[4]*f+s[8]*c+s[12],o[13]=s[1]*u+s[5]*f+s[9]*c+s[13],o[14]=s[2]*u+s[6]*f+s[10]*c+s[14],o[15]=s[3]*u+s[7]*f+s[11]*c+s[15]):(h=s[0],v=s[1],d=s[2],x=s[3],b=s[4],p=s[5],w=s[6],A=s[7],T=s[8],k=s[9],_=s[10],E=s[11],o[0]=h,o[1]=v,o[2]=d,o[3]=x,o[4]=b,o[5]=p,o[6]=w,o[7]=A,o[8]=T,o[9]=k,o[10]=_,o[11]=E,o[12]=h*u+b*f+T*c+s[12],o[13]=v*u+p*f+k*c+s[13],o[14]=d*u+w*f+_*c+s[14],o[15]=x*u+A*f+E*c+s[15]),o}},5665:function(n){n.exports=a;function a(o,s){if(o===s){var l=s[1],u=s[2],f=s[3],c=s[6],h=s[7],v=s[11];o[1]=s[4],o[2]=s[8],o[3]=s[12],o[4]=l,o[6]=s[9],o[7]=s[13],o[8]=u,o[9]=c,o[11]=s[14],o[12]=f,o[13]=h,o[14]=v}else o[0]=s[0],o[1]=s[4],o[2]=s[8],o[3]=s[12],o[4]=s[1],o[5]=s[5],o[6]=s[9],o[7]=s[13],o[8]=s[2],o[9]=s[6],o[10]=s[10],o[11]=s[14],o[12]=s[3],o[13]=s[7],o[14]=s[11],o[15]=s[15];return o}},7626:function(n,a,o){"use strict";var s=o(2642),l=o(9346);n.exports=v;function u(d,x){for(var b=[0,0,0,0],p=0;p<4;++p)for(var w=0;w<4;++w)b[w]+=d[4*p+w]*x[p];return b}function f(d,x,b,p,w){for(var A=u(p,u(b,u(x,[d[0],d[1],d[2],1]))),T=0;T<3;++T)A[T]/=A[3];return[.5*w[0]*(1+A[0]),.5*w[1]*(1-A[1])]}function c(d,x){if(d.length===2){for(var b=0,p=0,w=0;w<2;++w)b+=Math.pow(x[w]-d[0][w],2),p+=Math.pow(x[w]-d[1][w],2);return b=Math.sqrt(b),p=Math.sqrt(p),b+p<1e-6?[1,0]:[p/(b+p),b/(p+b)]}else if(d.length===3){var A=[0,0];return l(d[0],d[1],d[2],x,A),s(d,A)}return[]}function h(d,x){for(var b=[0,0,0],p=0;p<d.length;++p)for(var w=d[p],A=x[p],T=0;T<3;++T)b[T]+=A*w[T];return b}function v(d,x,b,p,w,A){if(d.length===1)return[0,d[0].slice()];for(var T=new Array(d.length),k=0;k<d.length;++k)T[k]=f(d[k],b,p,w,A);for(var _=0,E=1/0,k=0;k<T.length;++k){for(var S=0,g=0;g<2;++g)S+=Math.pow(T[k][g]-x[g],2);S<E&&(E=S,_=k)}for(var C=c(T,x),M=0,k=0;k<3;++k){if(C[k]<-.001||C[k]>1.0001)return null;M+=C[k]}return Math.abs(M-1)>.001?null:[_,h(d,C),C]}},840:function(n,a,o){var s=o(3236),l=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * (view * (model * vec4(p, 1.0)));
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),u=s([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),f=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),c=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),h=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * (view * (model * vec4(position, 1.0)));
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),v=s([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),d=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
  f_id        = id;
  f_position  = position;
}`]),x=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),b=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * (view * (model * vec4(position, 1.0)));
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),p=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
}`]),w=s([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);a.meshShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},a.wireShader={vertex:f,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},a.pointShader={vertex:h,fragment:v,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},a.pickShader={vertex:d,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},a.pointPickShader={vertex:b,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},a.contourShader={vertex:p,fragment:w,attributes:[{name:"position",type:"vec3"}]}},7201:function(n,a,o){"use strict";var s=1e-6,l=1e-6,u=o(9405),f=o(2762),c=o(8116),h=o(7766),v=o(8406),d=o(6760),x=o(7608),b=o(9618),p=o(6729),w=o(7765),A=o(1888),T=o(840),k=o(7626),_=T.meshShader,E=T.wireShader,S=T.pointShader,g=T.pickShader,C=T.pointPickShader,M=T.contourShader,P=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function D(ee,Z,oe,ce,le,me,he,te,ge,ae,_e,Ce,qe,rt,Re,Ie,ot,lt,ht,xt,Vt,Ht,Me,Ke,We,et,vt){this.gl=ee,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=Z,this.dirty=!0,this.triShader=oe,this.lineShader=ce,this.pointShader=le,this.pickShader=me,this.pointPickShader=he,this.contourShader=te,this.trianglePositions=ge,this.triangleColors=_e,this.triangleNormals=qe,this.triangleUVs=Ce,this.triangleIds=ae,this.triangleVAO=rt,this.triangleCount=0,this.lineWidth=1,this.edgePositions=Re,this.edgeColors=ot,this.edgeUVs=lt,this.edgeIds=Ie,this.edgeVAO=ht,this.edgeCount=0,this.pointPositions=xt,this.pointColors=Ht,this.pointUVs=Me,this.pointSizes=Ke,this.pointIds=Vt,this.pointVAO=We,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=et,this.contourVAO=vt,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=P,this._view=P,this._projection=P,this._resolution=[1,1]}var q=D.prototype;q.isOpaque=function(){return!this.hasAlpha},q.isTransparent=function(){return this.hasAlpha},q.pickSlots=1,q.setPickBase=function(ee){this.pickId=ee};function O(ee,Z){if(!Z||!Z.length)return 1;for(var oe=0;oe<Z.length;++oe){if(Z.length<2)return 1;if(Z[oe][0]===ee)return Z[oe][1];if(Z[oe][0]>ee&&oe>0){var ce=(Z[oe][0]-ee)/(Z[oe][0]-Z[oe-1][0]);return Z[oe][1]*(1-ce)+ce*Z[oe-1][1]}}return 1}function U(ee,Z){for(var oe=p({colormap:ee,nshades:256,format:"rgba"}),ce=new Uint8Array(256*4),le=0;le<256;++le){for(var me=oe[le],he=0;he<3;++he)ce[4*le+he]=me[he];Z?ce[4*le+3]=255*O(le/255,Z):ce[4*le+3]=255*me[3]}return b(ce,[256,256,4],[4,0,1])}function B(ee){for(var Z=ee.length,oe=new Array(Z),ce=0;ce<Z;++ce)oe[ce]=ee[ce][2];return oe}q.highlight=function(ee){if(!ee||!this.contourEnable){this.contourCount=0;return}for(var Z=w(this.cells,this.intensity,ee.intensity),oe=Z.cells,ce=Z.vertexIds,le=Z.vertexWeights,me=oe.length,he=A.mallocFloat32(2*3*me),te=0,ge=0;ge<me;++ge)for(var ae=oe[ge],_e=0;_e<2;++_e){var Ce=ae[0];ae.length===2&&(Ce=ae[_e]);for(var qe=ce[Ce][0],rt=ce[Ce][1],Re=le[Ce],Ie=1-Re,ot=this.positions[qe],lt=this.positions[rt],ht=0;ht<3;++ht)he[te++]=Re*ot[ht]+Ie*lt[ht]}this.contourCount=te/3|0,this.contourPositions.update(he.subarray(0,te)),A.free(he)},q.update=function(ee){ee=ee||{};var Z=this.gl;this.dirty=!0,"contourEnable"in ee&&(this.contourEnable=ee.contourEnable),"contourColor"in ee&&(this.contourColor=ee.contourColor),"lineWidth"in ee&&(this.lineWidth=ee.lineWidth),"lightPosition"in ee&&(this.lightPosition=ee.lightPosition),this.hasAlpha=!1,"opacity"in ee&&(this.opacity=ee.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in ee&&(this.opacityscale=ee.opacityscale,this.hasAlpha=!0),"ambient"in ee&&(this.ambientLight=ee.ambient),"diffuse"in ee&&(this.diffuseLight=ee.diffuse),"specular"in ee&&(this.specularLight=ee.specular),"roughness"in ee&&(this.roughness=ee.roughness),"fresnel"in ee&&(this.fresnel=ee.fresnel),ee.texture?(this.texture.dispose(),this.texture=h(Z,ee.texture)):ee.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=Z.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=Z.LINEAR,this.texture.setPixels(U(ee.colormap,this.opacityscale)),this.texture.generateMipmap());var oe=ee.cells,ce=ee.positions;if(!(!ce||!oe)){var le=[],me=[],he=[],te=[],ge=[],ae=[],_e=[],Ce=[],qe=[],rt=[],Re=[],Ie=[],ot=[],lt=[];this.cells=oe,this.positions=ce;var ht=ee.vertexNormals,xt=ee.cellNormals,Vt=ee.vertexNormalsEpsilon===void 0?s:ee.vertexNormalsEpsilon,Ht=ee.faceNormalsEpsilon===void 0?l:ee.faceNormalsEpsilon;ee.useFacetNormals&&!xt&&(xt=v.faceNormals(oe,ce,Ht)),!xt&&!ht&&(ht=v.vertexNormals(oe,ce,Vt));var Me=ee.vertexColors,Ke=ee.cellColors,We=ee.meshColor||[1,1,1,1],et=ee.vertexUVs,vt=ee.vertexIntensity,at=ee.cellUVs,Xe=ee.cellIntensity,dt=1/0,_t=-1/0;if(!et&&!at)if(vt)if(ee.vertexIntensityBounds)dt=+ee.vertexIntensityBounds[0],_t=+ee.vertexIntensityBounds[1];else for(var $t=0;$t<vt.length;++$t){var Ut=vt[$t];dt=Math.min(dt,Ut),_t=Math.max(_t,Ut)}else if(Xe)if(ee.cellIntensityBounds)dt=+ee.cellIntensityBounds[0],_t=+ee.cellIntensityBounds[1];else for(var $t=0;$t<Xe.length;++$t){var Ut=Xe[$t];dt=Math.min(dt,Ut),_t=Math.max(_t,Ut)}else for(var $t=0;$t<ce.length;++$t){var Ut=ce[$t][2];dt=Math.min(dt,Ut),_t=Math.max(_t,Ut)}vt?this.intensity=vt:Xe?this.intensity=Xe:this.intensity=B(ce),this.pickVertex=!(Xe||Ke);var fr=ee.pointSizes,ar=ee.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var $t=0;$t<ce.length;++$t)for(var cr=ce[$t],It=0;It<3;++It)isNaN(cr[It])||!isFinite(cr[It])||(this.bounds[0][It]=Math.min(this.bounds[0][It],cr[It]),this.bounds[1][It]=Math.max(this.bounds[1][It],cr[It]));var gt=0,kt=0,Je=0;e:for(var $t=0;$t<oe.length;++$t){var Ze=oe[$t];switch(Ze.length){case 1:for(var At=Ze[0],cr=ce[At],It=0;It<3;++It)if(isNaN(cr[It])||!isFinite(cr[It]))continue e;rt.push(cr[0],cr[1],cr[2]);var Se;Me?Se=Me[At]:Ke?Se=Ke[$t]:Se=We,this.opacityscale&&vt?me.push(Se[0],Se[1],Se[2],this.opacity*O((vt[At]-dt)/(_t-dt),this.opacityscale)):Se.length===3?Re.push(Se[0],Se[1],Se[2],this.opacity):(Re.push(Se[0],Se[1],Se[2],Se[3]*this.opacity),Se[3]<1&&(this.hasAlpha=!0));var pe;et?pe=et[At]:vt?pe=[(vt[At]-dt)/(_t-dt),0]:at?pe=at[$t]:Xe?pe=[(Xe[$t]-dt)/(_t-dt),0]:pe=[(cr[2]-dt)/(_t-dt),0],Ie.push(pe[0],pe[1]),fr?ot.push(fr[At]):ot.push(ar),lt.push($t),Je+=1;break;case 2:for(var It=0;It<2;++It)for(var At=Ze[It],cr=ce[At],Te=0;Te<3;++Te)if(isNaN(cr[Te])||!isFinite(cr[Te]))continue e;for(var It=0;It<2;++It){var At=Ze[It],cr=ce[At];ae.push(cr[0],cr[1],cr[2]);var Se;Me?Se=Me[At]:Ke?Se=Ke[$t]:Se=We,this.opacityscale&&vt?me.push(Se[0],Se[1],Se[2],this.opacity*O((vt[At]-dt)/(_t-dt),this.opacityscale)):Se.length===3?_e.push(Se[0],Se[1],Se[2],this.opacity):(_e.push(Se[0],Se[1],Se[2],Se[3]*this.opacity),Se[3]<1&&(this.hasAlpha=!0));var pe;et?pe=et[At]:vt?pe=[(vt[At]-dt)/(_t-dt),0]:at?pe=at[$t]:Xe?pe=[(Xe[$t]-dt)/(_t-dt),0]:pe=[(cr[2]-dt)/(_t-dt),0],Ce.push(pe[0],pe[1]),qe.push($t)}kt+=1;break;case 3:for(var It=0;It<3;++It)for(var At=Ze[It],cr=ce[At],Te=0;Te<3;++Te)if(isNaN(cr[Te])||!isFinite(cr[Te]))continue e;for(var It=0;It<3;++It){var At=Ze[2-It],cr=ce[At];le.push(cr[0],cr[1],cr[2]);var Se;Me?Se=Me[At]:Ke?Se=Ke[$t]:Se=We,Se?this.opacityscale&&vt?me.push(Se[0],Se[1],Se[2],this.opacity*O((vt[At]-dt)/(_t-dt),this.opacityscale)):Se.length===3?me.push(Se[0],Se[1],Se[2],this.opacity):(me.push(Se[0],Se[1],Se[2],Se[3]*this.opacity),Se[3]<1&&(this.hasAlpha=!0)):me.push(.5,.5,.5,1);var pe;et?pe=et[At]:vt?pe=[(vt[At]-dt)/(_t-dt),0]:at?pe=at[$t]:Xe?pe=[(Xe[$t]-dt)/(_t-dt),0]:pe=[(cr[2]-dt)/(_t-dt),0],te.push(pe[0],pe[1]);var it;ht?it=ht[At]:it=xt[$t],he.push(it[0],it[1],it[2]),ge.push($t)}gt+=1;break;default:break}}this.pointCount=Je,this.edgeCount=kt,this.triangleCount=gt,this.pointPositions.update(rt),this.pointColors.update(Re),this.pointUVs.update(Ie),this.pointSizes.update(ot),this.pointIds.update(new Uint32Array(lt)),this.edgePositions.update(ae),this.edgeColors.update(_e),this.edgeUVs.update(Ce),this.edgeIds.update(new Uint32Array(qe)),this.trianglePositions.update(le),this.triangleColors.update(me),this.triangleUVs.update(te),this.triangleNormals.update(he),this.triangleIds.update(new Uint32Array(ge))}},q.drawTransparent=q.draw=function(ee){ee=ee||{};for(var Z=this.gl,oe=ee.model||P,ce=ee.view||P,le=ee.projection||P,me=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],he=0;he<3;++he)me[0][he]=Math.max(me[0][he],this.clipBounds[0][he]),me[1][he]=Math.min(me[1][he],this.clipBounds[1][he]);var te={model:oe,view:ce,projection:le,inverseModel:P.slice(),clipBounds:me,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};te.inverseModel=x(te.inverseModel,te.model),Z.disable(Z.CULL_FACE),this.texture.bind(0);var ge=new Array(16);d(ge,te.view,te.model),d(ge,te.projection,ge),x(ge,ge);for(var he=0;he<3;++he)te.eyePosition[he]=ge[12+he]/ge[15];for(var ae=ge[15],he=0;he<3;++he)ae+=this.lightPosition[he]*ge[4*he+3];for(var he=0;he<3;++he){for(var _e=ge[12+he],Ce=0;Ce<3;++Ce)_e+=ge[4*Ce+he]*this.lightPosition[Ce];te.lightPosition[he]=_e/ae}if(this.triangleCount>0){var qe=this.triShader;qe.bind(),qe.uniforms=te,this.triangleVAO.bind(),Z.drawArrays(Z.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var qe=this.lineShader;qe.bind(),qe.uniforms=te,this.edgeVAO.bind(),Z.lineWidth(this.lineWidth*this.pixelRatio),Z.drawArrays(Z.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var qe=this.pointShader;qe.bind(),qe.uniforms=te,this.pointVAO.bind(),Z.drawArrays(Z.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var qe=this.contourShader;qe.bind(),qe.uniforms=te,this.contourVAO.bind(),Z.drawArrays(Z.LINES,0,this.contourCount),this.contourVAO.unbind()}},q.drawPick=function(ee){ee=ee||{};for(var Z=this.gl,oe=ee.model||P,ce=ee.view||P,le=ee.projection||P,me=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],he=0;he<3;++he)me[0][he]=Math.max(me[0][he],this.clipBounds[0][he]),me[1][he]=Math.min(me[1][he],this.clipBounds[1][he]);this._model=[].slice.call(oe),this._view=[].slice.call(ce),this._projection=[].slice.call(le),this._resolution=[Z.drawingBufferWidth,Z.drawingBufferHeight];var te={model:oe,view:ce,projection:le,clipBounds:me,pickId:this.pickId/255},ge=this.pickShader;if(ge.bind(),ge.uniforms=te,this.triangleCount>0&&(this.triangleVAO.bind(),Z.drawArrays(Z.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),Z.lineWidth(this.lineWidth*this.pixelRatio),Z.drawArrays(Z.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var ge=this.pointPickShader;ge.bind(),ge.uniforms=te,this.pointVAO.bind(),Z.drawArrays(Z.POINTS,0,this.pointCount),this.pointVAO.unbind()}},q.pick=function(ee){if(!ee||ee.id!==this.pickId)return null;for(var Z=ee.value[0]+256*ee.value[1]+65536*ee.value[2],oe=this.cells[Z],ce=this.positions,le=new Array(oe.length),me=0;me<oe.length;++me)le[me]=ce[oe[me]];var he=ee.coord[0],te=ee.coord[1];if(!this.pickVertex){var ge=this.positions[oe[0]],ae=this.positions[oe[1]],_e=this.positions[oe[2]],Ce=[(ge[0]+ae[0]+_e[0])/3,(ge[1]+ae[1]+_e[1])/3,(ge[2]+ae[2]+_e[2])/3];return{_cellCenter:!0,position:[he,te],index:Z,cell:oe,cellId:Z,intensity:this.intensity[Z],dataCoordinate:Ce}}var qe=k(le,[he*this.pixelRatio,this._resolution[1]-te*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!qe)return null;for(var rt=qe[2],Re=0,me=0;me<oe.length;++me)Re+=rt[me]*this.intensity[oe[me]];return{position:qe[1],index:oe[qe[0]],cell:oe,cellId:Z,intensity:Re,dataCoordinate:this.positions[oe[qe[0]]]}},q.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function F(ee){var Z=u(ee,_.vertex,_.fragment);return Z.attributes.position.location=0,Z.attributes.color.location=2,Z.attributes.uv.location=3,Z.attributes.normal.location=4,Z}function N(ee){var Z=u(ee,E.vertex,E.fragment);return Z.attributes.position.location=0,Z.attributes.color.location=2,Z.attributes.uv.location=3,Z}function X(ee){var Z=u(ee,S.vertex,S.fragment);return Z.attributes.position.location=0,Z.attributes.color.location=2,Z.attributes.uv.location=3,Z.attributes.pointSize.location=4,Z}function K(ee){var Z=u(ee,g.vertex,g.fragment);return Z.attributes.position.location=0,Z.attributes.id.location=1,Z}function ne(ee){var Z=u(ee,C.vertex,C.fragment);return Z.attributes.position.location=0,Z.attributes.id.location=1,Z.attributes.pointSize.location=4,Z}function fe(ee){var Z=u(ee,M.vertex,M.fragment);return Z.attributes.position.location=0,Z}function ue(ee,Z){arguments.length===1&&(Z=ee,ee=Z.gl);var oe=ee.getExtension("OES_standard_derivatives")||ee.getExtension("MOZ_OES_standard_derivatives")||ee.getExtension("WEBKIT_OES_standard_derivatives");if(!oe)throw new Error("derivatives not supported");var ce=F(ee),le=N(ee),me=X(ee),he=K(ee),te=ne(ee),ge=fe(ee),ae=h(ee,b(new Uint8Array([255,255,255,255]),[1,1,4]));ae.generateMipmap(),ae.minFilter=ee.LINEAR_MIPMAP_LINEAR,ae.magFilter=ee.LINEAR;var _e=f(ee),Ce=f(ee),qe=f(ee),rt=f(ee),Re=f(ee),Ie=c(ee,[{buffer:_e,type:ee.FLOAT,size:3},{buffer:Re,type:ee.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Ce,type:ee.FLOAT,size:4},{buffer:qe,type:ee.FLOAT,size:2},{buffer:rt,type:ee.FLOAT,size:3}]),ot=f(ee),lt=f(ee),ht=f(ee),xt=f(ee),Vt=c(ee,[{buffer:ot,type:ee.FLOAT,size:3},{buffer:xt,type:ee.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:lt,type:ee.FLOAT,size:4},{buffer:ht,type:ee.FLOAT,size:2}]),Ht=f(ee),Me=f(ee),Ke=f(ee),We=f(ee),et=f(ee),vt=c(ee,[{buffer:Ht,type:ee.FLOAT,size:3},{buffer:et,type:ee.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Me,type:ee.FLOAT,size:4},{buffer:Ke,type:ee.FLOAT,size:2},{buffer:We,type:ee.FLOAT,size:1}]),at=f(ee),Xe=c(ee,[{buffer:at,type:ee.FLOAT,size:3}]),dt=new D(ee,ae,ce,le,me,he,te,ge,_e,Re,Ce,qe,rt,Ie,ot,xt,lt,ht,Vt,Ht,et,Me,Ke,We,vt,at,Xe);return dt.update(Z),dt}n.exports=ue},8120:function(n,a,o){"use strict";n.exports=h;var s=o(2762),l=o(9405),u=o(3603);function f(v,d,x){this.plot=v,this.vbo=d,this.shader=x}var c=f.prototype;c.bind=function(){var v=this.shader;this.vbo.bind(),this.shader.bind(),v.attributes.coord.pointer(),v.uniforms.screenBox=this.plot.screenBox},c.drawBox=function(){var v=[0,0],d=[0,0];return function(x,b,p,w,A){var T=this.plot,k=this.shader,_=T.gl;v[0]=x,v[1]=b,d[0]=p,d[1]=w,k.uniforms.lo=v,k.uniforms.hi=d,k.uniforms.color=A,_.drawArrays(_.TRIANGLE_STRIP,0,4)}}(),c.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function h(v){var d=v.gl,x=s(d,[0,0,0,1,1,0,1,1]),b=l(d,u.boxVert,u.lineFrag);return new f(v,x,b)}},1913:function(n,a,o){"use strict";n.exports=d;var s=o(2762),l=o(9405),u=o(2478),f=o(3603);function c(x,b,p,w){this.plot=x,this.vbo=b,this.shader=p,this.tickShader=w,this.ticks=[[],[]]}function h(x,b){return x-b}var v=c.prototype;v.draw=function(){var x=[0,0],b=[0,0],p=[0,0];return function(){for(var w=this.plot,A=this.vbo,T=this.shader,k=this.ticks,_=w.gl,E=w._tickBounds,S=w.dataBox,g=w.viewBox,C=w.gridLineWidth,M=w.gridLineColor,P=w.gridLineEnable,D=w.pixelRatio,q=0;q<2;++q){var O=E[q],U=E[q+2],B=U-O,F=.5*(S[q+2]+S[q]),N=S[q+2]-S[q];b[q]=2*B/N,x[q]=2*(O-F)/N}T.bind(),A.bind(),T.attributes.dataCoord.pointer(),T.uniforms.dataShift=x,T.uniforms.dataScale=b;for(var X=0,q=0;q<2;++q){p[0]=p[1]=0,p[q]=1,T.uniforms.dataAxis=p,T.uniforms.lineWidth=C[q]/(g[q+2]-g[q])*D,T.uniforms.color=M[q];var K=k[q].length*6;P[q]&&K&&_.drawArrays(_.TRIANGLES,X,K),X+=K}}}(),v.drawTickMarks=function(){var x=[0,0],b=[0,0],p=[1,0],w=[0,1],A=[0,0],T=[0,0];return function(){for(var k=this.plot,_=this.vbo,E=this.tickShader,S=this.ticks,g=k.gl,C=k._tickBounds,M=k.dataBox,P=k.viewBox,D=k.pixelRatio,q=k.screenBox,O=q[2]-q[0],U=q[3]-q[1],B=P[2]-P[0],F=P[3]-P[1],N=0;N<2;++N){var X=C[N],K=C[N+2],ne=K-X,fe=.5*(M[N+2]+M[N]),ue=M[N+2]-M[N];b[N]=2*ne/ue,x[N]=2*(X-fe)/ue}b[0]*=B/O,x[0]*=B/O,b[1]*=F/U,x[1]*=F/U,E.bind(),_.bind(),E.attributes.dataCoord.pointer();var ee=E.uniforms;ee.dataShift=x,ee.dataScale=b;var Z=k.tickMarkLength,oe=k.tickMarkWidth,ce=k.tickMarkColor,le=0,me=S[0].length*6,he=Math.min(u.ge(S[0],(M[0]-C[0])/(C[2]-C[0]),h),S[0].length),te=Math.min(u.gt(S[0],(M[2]-C[0])/(C[2]-C[0]),h),S[0].length),ge=le+6*he,ae=6*Math.max(0,te-he),_e=Math.min(u.ge(S[1],(M[1]-C[1])/(C[3]-C[1]),h),S[1].length),Ce=Math.min(u.gt(S[1],(M[3]-C[1])/(C[3]-C[1]),h),S[1].length),qe=me+6*_e,rt=6*Math.max(0,Ce-_e);A[0]=2*(P[0]-Z[1])/O-1,A[1]=(P[3]+P[1])/U-1,T[0]=Z[1]*D/O,T[1]=oe[1]*D/U,rt&&(ee.color=ce[1],ee.tickScale=T,ee.dataAxis=w,ee.screenOffset=A,g.drawArrays(g.TRIANGLES,qe,rt)),A[0]=(P[2]+P[0])/O-1,A[1]=2*(P[1]-Z[0])/U-1,T[0]=oe[0]*D/O,T[1]=Z[0]*D/U,ae&&(ee.color=ce[0],ee.tickScale=T,ee.dataAxis=p,ee.screenOffset=A,g.drawArrays(g.TRIANGLES,ge,ae)),A[0]=2*(P[2]+Z[3])/O-1,A[1]=(P[3]+P[1])/U-1,T[0]=Z[3]*D/O,T[1]=oe[3]*D/U,rt&&(ee.color=ce[3],ee.tickScale=T,ee.dataAxis=w,ee.screenOffset=A,g.drawArrays(g.TRIANGLES,qe,rt)),A[0]=(P[2]+P[0])/O-1,A[1]=2*(P[3]+Z[2])/U-1,T[0]=oe[2]*D/O,T[1]=Z[2]*D/U,ae&&(ee.color=ce[2],ee.tickScale=T,ee.dataAxis=p,ee.screenOffset=A,g.drawArrays(g.TRIANGLES,ge,ae))}}(),v.update=function(){var x=[1,1,-1,-1,1,-1],b=[1,-1,1,1,-1,-1];return function(p){for(var w=p.ticks,A=p.bounds,T=new Float32Array(6*3*(w[0].length+w[1].length)),k=this.plot.zeroLineEnable,_=0,E=[[],[]],S=0;S<2;++S)for(var g=E[S],C=w[S],M=A[S],P=A[S+2],D=0;D<C.length;++D){var q=(C[D].x-M)/(P-M);g.push(q);for(var O=0;O<6;++O)T[_++]=q,T[_++]=x[O],T[_++]=b[O]}this.ticks=E,this.vbo.update(T)}}(),v.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function d(x){var b=x.gl,p=s(b),w=l(b,f.gridVert,f.gridFrag),A=l(b,f.tickVert,f.gridFrag),T=new c(x,p,w,A);return T}},4747:function(n,a,o){"use strict";n.exports=h;var s=o(2762),l=o(9405),u=o(3603);function f(v,d,x){this.plot=v,this.vbo=d,this.shader=x}var c=f.prototype;c.bind=function(){var v=this.shader;this.vbo.bind(),this.shader.bind(),v.attributes.coord.pointer(),v.uniforms.screenBox=this.plot.screenBox},c.drawLine=function(){var v=[0,0],d=[0,0];return function(x,b,p,w,A,T){var k=this.plot,_=this.shader,E=k.gl;v[0]=x,v[1]=b,d[0]=p,d[1]=w,_.uniforms.start=v,_.uniforms.end=d,_.uniforms.width=A*k.pixelRatio,_.uniforms.color=T,E.drawArrays(E.TRIANGLE_STRIP,0,4)}}(),c.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function h(v){var d=v.gl,x=s(d,[-1,-1,-1,1,1,-1,1,1]),b=l(d,u.lineVert,u.lineFrag),p=new f(v,x,b);return p}},3603:function(n,a,o){"use strict";var s=o(3236),l=s([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);n.exports={lineVert:s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:l,textVert:s([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:l,gridVert:s([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:l,boxVert:s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:s([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},2142:function(n,a,o){"use strict";n.exports=d;var s=o(2762),l=o(9405),u=o(529),f=o(2478),c=o(3603);function h(x,b,p){this.plot=x,this.vbo=b,this.shader=p,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var v=h.prototype;v.drawTicks=function(){var x=[0,0],b=[0,0],p=[0,0];return function(w){var A=this.plot,T=this.shader,k=this.tickX[w],_=this.tickOffset[w],E=A.gl,S=A.viewBox,g=A.dataBox,C=A.screenBox,M=A.pixelRatio,P=A.tickEnable,D=A.tickPad,q=A.tickColor,O=A.tickAngle,U=A.labelEnable,B=A.labelPad,F=A.labelColor,N=A.labelAngle,X=this.labelOffset[w],K=this.labelCount[w],ne=f.lt(k,g[w]),fe=f.le(k,g[w+2]);x[0]=x[1]=0,x[w]=1,b[w]=(S[2+w]+S[w])/(C[2+w]-C[w])-1;var ue=2/C[2+(w^1)]-C[w^1];b[w^1]=ue*S[w^1]-1,P[w]&&(b[w^1]-=ue*M*D[w],ne<fe&&_[fe]>_[ne]&&(T.uniforms.dataAxis=x,T.uniforms.screenOffset=b,T.uniforms.color=q[w],T.uniforms.angle=O[w],E.drawArrays(E.TRIANGLES,_[ne],_[fe]-_[ne]))),U[w]&&K&&(b[w^1]-=ue*M*B[w],T.uniforms.dataAxis=p,T.uniforms.screenOffset=b,T.uniforms.color=F[w],T.uniforms.angle=N[w],E.drawArrays(E.TRIANGLES,X,K)),b[w^1]=ue*S[2+(w^1)]-1,P[w+2]&&(b[w^1]+=ue*M*D[w+2],ne<fe&&_[fe]>_[ne]&&(T.uniforms.dataAxis=x,T.uniforms.screenOffset=b,T.uniforms.color=q[w+2],T.uniforms.angle=O[w+2],E.drawArrays(E.TRIANGLES,_[ne],_[fe]-_[ne]))),U[w+2]&&K&&(b[w^1]+=ue*M*B[w+2],T.uniforms.dataAxis=p,T.uniforms.screenOffset=b,T.uniforms.color=F[w+2],T.uniforms.angle=N[w+2],E.drawArrays(E.TRIANGLES,X,K))}}(),v.drawTitle=function(){var x=[0,0],b=[0,0];return function(){var p=this.plot,w=this.shader,A=p.gl,T=p.screenBox,k=p.titleCenter,_=p.titleAngle,E=p.titleColor,S=p.pixelRatio;if(this.titleCount){for(var g=0;g<2;++g)b[g]=2*(k[g]*S-T[g])/(T[2+g]-T[g])-1;w.bind(),w.uniforms.dataAxis=x,w.uniforms.screenOffset=b,w.uniforms.angle=_,w.uniforms.color=E,A.drawArrays(A.TRIANGLES,this.titleOffset,this.titleCount)}}}(),v.bind=function(){var x=[0,0],b=[0,0],p=[0,0];return function(){var w=this.plot,A=this.shader,T=w._tickBounds,k=w.dataBox,_=w.screenBox,E=w.viewBox;A.bind();for(var S=0;S<2;++S){var g=T[S],C=T[S+2],M=C-g,P=.5*(k[S+2]+k[S]),D=k[S+2]-k[S],q=E[S],O=E[S+2],U=O-q,B=_[S],F=_[S+2],N=F-B;b[S]=2*M/D*U/N,x[S]=2*(g-P)/D*U/N}p[1]=2*w.pixelRatio/(_[3]-_[1]),p[0]=p[1]*(_[3]-_[1])/(_[2]-_[0]),A.uniforms.dataScale=b,A.uniforms.dataShift=x,A.uniforms.textScale=p,this.vbo.bind(),A.attributes.textCoordinate.pointer()}}(),v.update=function(x){var b=[],p=x.ticks,w=x.bounds,A,T,k,_,E,S;for(S=0;S<2;++S){var g=[Math.floor(b.length/3)],C=[-1/0],M=p[S];for(A=0;A<M.length;++A){var P=M[A],D=P.x,q=P.text,O=P.font||"sans-serif",U=P.fontStyle||"normal",B=P.fontWeight||"normal",F=P.fontVariant||"normal";E=P.fontSize||12;for(var N=1/(w[S+2]-w[S]),X=w[S],K=q.split(`
`),ne=0;ne<K.length;ne++)for(_=u(O,K[ne],{fontStyle:U,fontWeight:B,fontVariant:F}).data,T=0;T<_.length;T+=2)b.push(_[T]*E,-_[T+1]*E-ne*E*1.2,(D-X)*N);g.push(Math.floor(b.length/3)),C.push(D)}this.tickOffset[S]=g,this.tickX[S]=C}for(S=0;S<2;++S){for(this.labelOffset[S]=Math.floor(b.length/3),_=u(x.labelFont[S],x.labels[S],{fontStyle:x.labelFontStyle[S],fontWeight:x.labelFontWeight[S],fontVariant:x.labelFontVariant[S],textAlign:"center"}).data,E=x.labelSize[S],A=0;A<_.length;A+=2)b.push(_[A]*E,-_[A+1]*E,0);this.labelCount[S]=Math.floor(b.length/3)-this.labelOffset[S]}for(this.titleOffset=Math.floor(b.length/3),_=u(x.titleFont,x.title,{fontStyle:x.titleFontStyle,fontWeight:x.titleFontWeight,fontVariant:x.titleFontVariant}).data,E=x.titleSize,A=0;A<_.length;A+=2)b.push(_[A]*E,-_[A+1]*E,0);this.titleCount=Math.floor(b.length/3)-this.titleOffset,this.vbo.update(b)},v.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function d(x){var b=x.gl,p=s(b),w=l(b,c.textVert,c.textFrag),A=new h(x,p,w);return A}},1850:function(n,a,o){"use strict";n.exports=p;var s=o(3589),l=o(1913),u=o(2142),f=o(4747),c=o(8120);function h(w,A){this.gl=w,this.pickBuffer=A,this.screenBox=[0,0,w.drawingBufferWidth,w.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var v=h.prototype;v.setDirty=function(){this.dirty=this.pickDirty=!0},v.setOverlayDirty=function(){this.dirty=!0},v.nextDepthValue=function(){return this._depthCounter++/65536};function d(w,A,T){var k=.5*(T+1);return Math.floor((1-k)*w+k*A)|0}v.draw=function(){var w=[0,0,0,0];return function(){var A=this.gl,T=this.screenBox,k=this.viewBox,_=this.dataBox,E=this.pixelRatio,S=this.grid,g=this.line,C=this.text,M=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,A.bindFramebuffer(A.FRAMEBUFFER,null),A.enable(A.SCISSOR_TEST),A.disable(A.DEPTH_TEST),A.depthFunc(A.LESS),A.depthMask(!1),A.enable(A.BLEND),A.blendEquation(A.FUNC_ADD,A.FUNC_ADD),A.blendFunc(A.ONE,A.ONE_MINUS_SRC_ALPHA),this.borderColor){A.scissor(T[0],T[1],T[2]-T[0],T[3]-T[1]);var P=this.borderColor;A.clearColor(P[0]*P[3],P[1]*P[3],P[2]*P[3],P[3]),A.clear(A.COLOR_BUFFER_BIT|A.DEPTH_BUFFER_BIT)}A.scissor(k[0],k[1],k[2]-k[0],k[3]-k[1]),A.viewport(k[0],k[1],k[2]-k[0],k[3]-k[1]);var D=this.backgroundColor;A.clearColor(D[0]*D[3],D[1]*D[3],D[2]*D[3],D[3]),A.clear(A.COLOR_BUFFER_BIT),S.draw();var q=this.zeroLineEnable,O=this.zeroLineColor,U=this.zeroLineWidth;if(q[0]||q[1]){g.bind();for(var B=0;B<2;++B)if(!(!q[B]||!(_[B]<=0&&_[B+2]>=0))){var F=T[B]-_[B]*(T[B+2]-T[B])/(_[B+2]-_[B]);B===0?g.drawLine(F,T[1],F,T[3],U[B],O[B]):g.drawLine(T[0],F,T[2],F,U[B],O[B])}}for(var B=0;B<M.length;++B)M[B].draw();A.viewport(T[0],T[1],T[2]-T[0],T[3]-T[1]),A.scissor(T[0],T[1],T[2]-T[0],T[3]-T[1]),this.grid.drawTickMarks(),g.bind();var N=this.borderLineEnable,X=this.borderLineWidth,K=this.borderLineColor;N[1]&&g.drawLine(k[0],k[1]-.5*X[1]*E,k[0],k[3]+.5*X[3]*E,X[1],K[1]),N[0]&&g.drawLine(k[0]-.5*X[0]*E,k[1],k[2]+.5*X[2]*E,k[1],X[0],K[0]),N[3]&&g.drawLine(k[2],k[1]-.5*X[1]*E,k[2],k[3]+.5*X[3]*E,X[3],K[3]),N[2]&&g.drawLine(k[0]-.5*X[0]*E,k[3],k[2]+.5*X[2]*E,k[3],X[2],K[2]),C.bind();for(var B=0;B<2;++B)C.drawTicks(B);this.titleEnable&&C.drawTitle();for(var ne=this.overlays,B=0;B<ne.length;++B)ne[B].draw();A.disable(A.SCISSOR_TEST),A.disable(A.BLEND),A.depthMask(!0)}}}(),v.drawPick=function(){return function(){if(!this.static){var w=this.pickBuffer,A=this.gl;this._pickTimeout=null,w.begin();for(var T=1,k=this.objects,_=0;_<k.length;++_)T=k[_].drawPick(T);w.end()}}}(),v.pick=function(){return function(w,A){if(!this.static){var T=this.pixelRatio,k=this.pickPixelRatio,_=this.viewBox,E=Math.round((w-_[0]/T)*k)|0,S=Math.round((A-_[1]/T)*k)|0,g=this.pickBuffer.query(E,S,this.pickRadius);if(!g)return null;for(var C=g.id+(g.value[0]<<8)+(g.value[1]<<16)+(g.value[2]<<24),M=this.objects,P=0;P<M.length;++P){var D=M[P].pick(E,S,C);if(D)return D}return null}}}();function x(w){for(var A=w.slice(),T=0;T<A.length;++T)A[T]=A[T].slice();return A}function b(w,A){return w.x-A.x}v.setScreenBox=function(w){var A=this.screenBox,T=this.pixelRatio;A[0]=Math.round(w[0]*T)|0,A[1]=Math.round(w[1]*T)|0,A[2]=Math.round(w[2]*T)|0,A[3]=Math.round(w[3]*T)|0,this.setDirty()},v.setDataBox=function(w){var A=this.dataBox,T=A[0]!==w[0]||A[1]!==w[1]||A[2]!==w[2]||A[3]!==w[3];T&&(A[0]=w[0],A[1]=w[1],A[2]=w[2],A[3]=w[3],this.setDirty())},v.setViewBox=function(w){var A=this.pixelRatio,T=this.viewBox;T[0]=Math.round(w[0]*A)|0,T[1]=Math.round(w[1]*A)|0,T[2]=Math.round(w[2]*A)|0,T[3]=Math.round(w[3]*A)|0;var k=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((w[2]-w[0])*k)|0,Math.round((w[3]-w[1])*k)|0],this.setDirty()},v.update=function(w){w=w||{};var A=this.gl;this.pixelRatio=w.pixelRatio||1;var T=this.pixelRatio;this.pickPixelRatio=Math.max(T,1),this.setScreenBox(w.screenBox||[0,0,A.drawingBufferWidth/T,A.drawingBufferHeight/T]);var k=this.screenBox;this.setViewBox(w.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/T,.125*(this.screenBox[3]-this.screenBox[1])/T,.875*(this.screenBox[2]-this.screenBox[0])/T,.875*(this.screenBox[3]-this.screenBox[1])/T]);var _=this.viewBox,E=(_[2]-_[0])/(_[3]-_[1]);this.setDataBox(w.dataBox||[-10,-10/E,10,10/E]),this.borderColor=w.borderColor!==!1?(w.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(w.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(w.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(w.gridLineWidth||[1,1]).slice(),this.gridLineColor=x(w.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(w.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(w.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=x(w.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(w.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(w.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=x(w.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(w.titleCenter||[.5*(_[0]+_[2])/T,(_[3]+120)/T]).slice(),this.titleEnable=!("titleEnable"in w)||!!w.titleEnable,this.titleAngle=w.titleAngle||0,this.titleColor=(w.titleColor||[0,0,0,1]).slice(),this.labelPad=(w.labelPad||[15,15,15,15]).slice(),this.labelAngle=(w.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(w.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=x(w.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(w.tickPad||[15,15,15,15]).slice(),this.tickAngle=(w.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(w.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=x(w.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(w.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(w.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=x(w.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var S=w.ticks||[[],[]],g=this._tickBounds;g[0]=g[1]=1/0,g[2]=g[3]=-1/0;for(var C=0;C<2;++C){var M=S[C].slice(0);M.length!==0&&(M.sort(b),g[C]=Math.min(g[C],M[0].x),g[C+2]=Math.max(g[C+2],M[M.length-1].x))}this.grid.update({bounds:g,ticks:S}),this.text.update({bounds:g,ticks:S,labels:w.labels||["x","y"],labelSize:w.labelSize||[12,12],labelFont:w.labelFont||["sans-serif","sans-serif"],labelFontStyle:w.labelFontStyle||["normal","normal"],labelFontWeight:w.labelFontWeight||["normal","normal"],labelFontVariant:w.labelFontVariant||["normal","normal"],title:w.title||"",titleSize:w.titleSize||18,titleFont:w.titleFont||"sans-serif",titleFontStyle:w.titleFontStyle||"normal",titleFontWeight:w.titleFontWeight||"normal",titleFontVariant:w.titleFontVariant||"normal"}),this.static=!!w.static,this.setDirty()},v.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var w=this.objects.length-1;w>=0;--w)this.objects[w].dispose();this.objects.length=0;for(var w=this.overlays.length-1;w>=0;--w)this.overlays[w].dispose();this.overlays.length=0,this.gl=null},v.addObject=function(w){this.objects.indexOf(w)<0&&(this.objects.push(w),this.setDirty())},v.removeObject=function(w){for(var A=this.objects,T=0;T<A.length;++T)if(A[T]===w){A.splice(T,1),this.setDirty();break}},v.addOverlay=function(w){this.overlays.indexOf(w)<0&&(this.overlays.push(w),this.setOverlayDirty())},v.removeOverlay=function(w){for(var A=this.overlays,T=0;T<A.length;++T)if(A[T]===w){A.splice(T,1),this.setOverlayDirty();break}};function p(w){var A=w.gl,T=s(A,[A.drawingBufferWidth,A.drawingBufferHeight]),k=new h(A,T);return k.grid=l(k),k.text=u(k),k.line=f(k),k.box=c(k),k.update(w),k}},4437:function(n,a,o){"use strict";n.exports=v;var s=o(3025),l=o(6296),u=o(351),f=o(8512),c=o(24),h=o(7520);function v(d,x){d=d||document.body,x=x||{};var b=[.01,1/0];"distanceLimits"in x&&(b[0]=x.distanceLimits[0],b[1]=x.distanceLimits[1]),"zoomMin"in x&&(b[0]=x.zoomMin),"zoomMax"in x&&(b[1]=x.zoomMax);var p=l({center:x.center||[0,0,0],up:x.up||[0,1,0],eye:x.eye||[0,0,10],mode:x.mode||"orbit",distanceLimits:b}),w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A=0,T=d.clientWidth,k=d.clientHeight,_={keyBindingMode:"rotate",enableWheel:!0,view:p,element:d,delay:x.delay||16,rotateSpeed:x.rotateSpeed||1,zoomSpeed:x.zoomSpeed||1,translateSpeed:x.translateSpeed||1,flipX:!!x.flipX,flipY:!!x.flipY,modes:p.modes,_ortho:x._ortho||x.projection&&x.projection.type==="orthographic"||!1,tick:function(){var E=s(),S=this.delay,g=E-2*S;p.idle(E-S),p.recalcMatrix(g),p.flush(E-(100+S*2));for(var C=!0,M=p.computedMatrix,P=0;P<16;++P)C=C&&w[P]===M[P],w[P]=M[P];var D=d.clientWidth===T&&d.clientHeight===k;return T=d.clientWidth,k=d.clientHeight,C?!D:(A=Math.exp(p.computedRadius[0]),!0)},lookAt:function(E,S,g){p.lookAt(p.lastT(),E,S,g)},rotate:function(E,S,g){p.rotate(p.lastT(),E,S,g)},pan:function(E,S,g){p.pan(p.lastT(),E,S,g)},translate:function(E,S,g){p.translate(p.lastT(),E,S,g)}};return Object.defineProperties(_,{matrix:{get:function(){return p.computedMatrix},set:function(E){return p.setMatrix(p.lastT(),E),p.computedMatrix},enumerable:!0},mode:{get:function(){return p.getMode()},set:function(E){var S=p.computedUp.slice(),g=p.computedEye.slice(),C=p.computedCenter.slice();if(p.setMode(E),E==="turntable"){var M=s();p._active.lookAt(M,g,C,S),p._active.lookAt(M+500,g,C,[0,0,1]),p._active.flush(M)}return p.getMode()},enumerable:!0},center:{get:function(){return p.computedCenter},set:function(E){return p.lookAt(p.lastT(),null,E),p.computedCenter},enumerable:!0},eye:{get:function(){return p.computedEye},set:function(E){return p.lookAt(p.lastT(),E),p.computedEye},enumerable:!0},up:{get:function(){return p.computedUp},set:function(E){return p.lookAt(p.lastT(),null,null,E),p.computedUp},enumerable:!0},distance:{get:function(){return A},set:function(E){return p.setDistance(p.lastT(),E),E},enumerable:!0},distanceLimits:{get:function(){return p.getDistanceLimits(b)},set:function(E){return p.setDistanceLimits(E),E},enumerable:!0}}),d.addEventListener("contextmenu",function(E){return E.preventDefault(),!1}),_._lastX=-1,_._lastY=-1,_._lastMods={shift:!1,control:!1,alt:!1,meta:!1},_.enableMouseListeners=function(){_.mouseListener=u(d,E),d.addEventListener("touchstart",function(S){var g=c(S.changedTouches[0],d);E(0,g[0],g[1],_._lastMods),E(1,g[0],g[1],_._lastMods)},h?{passive:!0}:!1),d.addEventListener("touchmove",function(S){var g=c(S.changedTouches[0],d);E(1,g[0],g[1],_._lastMods),S.preventDefault()},h?{passive:!1}:!1),d.addEventListener("touchend",function(S){E(0,_._lastX,_._lastY,_._lastMods)},h?{passive:!0}:!1);function E(S,g,C,M){var P=_.keyBindingMode;if(P!==!1){var D=P==="rotate",q=P==="pan",O=P==="zoom",U=!!M.control,B=!!M.alt,F=!!M.shift,N=!!(S&1),X=!!(S&2),K=!!(S&4),ne=1/d.clientHeight,fe=ne*(g-_._lastX),ue=ne*(C-_._lastY),ee=_.flipX?1:-1,Z=_.flipY?1:-1,oe=Math.PI*_.rotateSpeed,ce=s();if(_._lastX!==-1&&_._lastY!==-1&&((D&&N&&!U&&!B&&!F||N&&!U&&!B&&F)&&p.rotate(ce,ee*oe*fe,-Z*oe*ue,0),(q&&N&&!U&&!B&&!F||X||N&&U&&!B&&!F)&&p.pan(ce,-_.translateSpeed*fe*A,_.translateSpeed*ue*A,0),O&&N&&!U&&!B&&!F||K||N&&!U&&B&&!F)){var le=-_.zoomSpeed*ue/window.innerHeight*(ce-p.lastT())*100;p.pan(ce,0,0,A*(Math.exp(le)-1))}return _._lastX=g,_._lastY=C,_._lastMods=M,!0}}_.wheelListener=f(d,function(S,g){if(_.keyBindingMode!==!1&&_.enableWheel){var C=_.flipX?1:-1,M=_.flipY?1:-1,P=s();if(Math.abs(S)>Math.abs(g))p.rotate(P,0,0,-S*C*Math.PI*_.rotateSpeed/window.innerWidth);else if(!_._ortho){var D=-_.zoomSpeed*M*g/window.innerHeight*(P-p.lastT())/20;p.pan(P,0,0,A*(Math.exp(D)-1))}}},!0)},_.enableMouseListeners(),_}},799:function(n,a,o){var s=o(3236),l=o(9405),u=s([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),f=s([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);n.exports=function(c){return l(c,u,f,null,[{name:"position",type:"vec2"}])}},4100:function(n,a,o){"use strict";var s=o(4437),l=o(3837),u=o(5445),f=o(4449),c=o(3589),h=o(2260),v=o(7169),d=o(351),x=o(4772),b=o(4040),p=o(799),w=o(9216)({tablet:!0,featureDetect:!0});n.exports={createScene:E,createCamera:s};function A(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function T(g,C){var M=null;try{M=g.getContext("webgl",C),M||(M=g.getContext("experimental-webgl",C))}catch(P){return null}return M}function k(g){var C=Math.round(Math.log(Math.abs(g))/Math.log(10));if(C<0){var M=Math.round(Math.pow(10,-C));return Math.ceil(g*M)/M}else if(C>0){var M=Math.round(Math.pow(10,C));return Math.ceil(g/M)*M}return Math.ceil(g)}function _(g){return typeof g=="boolean"?g:!0}function E(g){g=g||{},g.camera=g.camera||{};var C=g.canvas;if(!C)if(C=document.createElement("canvas"),g.container){var M=g.container;M.appendChild(C)}else document.body.appendChild(C);var P=g.gl;if(P||(g.glOptions&&(w=!!g.glOptions.preserveDrawingBuffer),P=T(C,g.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:w})),!P)throw new Error("webgl not supported");var D=g.bounds||[[-10,-10,-10],[10,10,10]],q=new A,O=h(P,P.drawingBufferWidth,P.drawingBufferHeight,{preferFloat:!w}),U=p(P),B=g.cameraObject&&g.cameraObject._ortho===!0||g.camera.projection&&g.camera.projection.type==="orthographic"||!1,F={eye:g.camera.eye||[2,0,0],center:g.camera.center||[0,0,0],up:g.camera.up||[0,1,0],zoomMin:g.camera.zoomMax||.1,zoomMax:g.camera.zoomMin||100,mode:g.camera.mode||"turntable",_ortho:B},N=g.axes||{},X=l(P,N);X.enable=!N.disable;var K=g.spikes||{},ne=f(P,K),fe=[],ue=[],ee=[],Z=[],oe=!0,he=!0,ce=new Array(16),le=new Array(16),me={view:null,projection:ce,model:le,_ortho:!1},he=!0,te=[P.drawingBufferWidth,P.drawingBufferHeight],ge=g.cameraObject||s(C,F),ae={gl:P,contextLost:!1,pixelRatio:g.pixelRatio||1,canvas:C,selection:q,camera:ge,axes:X,axesPixels:null,spikes:ne,bounds:D,objects:fe,shape:te,aspect:g.aspectRatio||[1,1,1],pickRadius:g.pickRadius||10,zNear:g.zNear||.01,zFar:g.zFar||1e3,fovy:g.fovy||Math.PI/4,clearColor:g.clearColor||[0,0,0,0],autoResize:_(g.autoResize),autoBounds:_(g.autoBounds),autoScale:!!g.autoScale,autoCenter:_(g.autoCenter),clipToBounds:_(g.clipToBounds),snapToData:!!g.snapToData,onselect:g.onselect||null,onrender:g.onrender||null,onclick:g.onclick||null,cameraParams:me,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(xt){this.aspect[0]=xt.x,this.aspect[1]=xt.y,this.aspect[2]=xt.z,he=!0},setBounds:function(xt,Vt){this.bounds[0][xt]=Vt.min,this.bounds[1][xt]=Vt.max},setClearColor:function(xt){this.clearColor=xt},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},_e=[P.drawingBufferWidth/ae.pixelRatio|0,P.drawingBufferHeight/ae.pixelRatio|0];function Ce(){if(!ae._stopped&&ae.autoResize){var xt=C.parentNode,Vt=1,Ht=1;xt&&xt!==document.body?(Vt=xt.clientWidth,Ht=xt.clientHeight):(Vt=window.innerWidth,Ht=window.innerHeight);var Me=Math.ceil(Vt*ae.pixelRatio)|0,Ke=Math.ceil(Ht*ae.pixelRatio)|0;if(Me!==C.width||Ke!==C.height){C.width=Me,C.height=Ke;var We=C.style;We.position=We.position||"absolute",We.left="0px",We.top="0px",We.width=Vt+"px",We.height=Ht+"px",oe=!0}}}ae.autoResize&&Ce(),window.addEventListener("resize",Ce);function qe(){for(var xt=fe.length,Vt=Z.length,Ht=0;Ht<Vt;++Ht)ee[Ht]=0;e:for(var Ht=0;Ht<xt;++Ht){var Me=fe[Ht],Ke=Me.pickSlots;if(!Ke){ue[Ht]=-1;continue}for(var We=0;We<Vt;++We)if(ee[We]+Ke<255){ue[Ht]=We,Me.setPickBase(ee[We]+1),ee[We]+=Ke;continue e}var et=c(P,te);ue[Ht]=Vt,Z.push(et),ee.push(Ke),Me.setPickBase(1),Vt+=1}for(;Vt>0&&ee[Vt-1]===0;)ee.pop(),Z.pop().dispose()}ae.update=function(xt){ae._stopped||(xt=xt||{},oe=!0,he=!0)},ae.add=function(xt){ae._stopped||(xt.axes=X,fe.push(xt),ue.push(-1),oe=!0,he=!0,qe())},ae.remove=function(xt){if(!ae._stopped){var Vt=fe.indexOf(xt);Vt<0||(fe.splice(Vt,1),ue.pop(),oe=!0,he=!0,qe())}},ae.dispose=function(){if(!ae._stopped&&(ae._stopped=!0,window.removeEventListener("resize",Ce),C.removeEventListener("webglcontextlost",rt),ae.mouseListener.enabled=!1,!ae.contextLost)){X.dispose(),ne.dispose();for(var xt=0;xt<fe.length;++xt)fe[xt].dispose();O.dispose();for(var xt=0;xt<Z.length;++xt)Z[xt].dispose();U.dispose(),P=null,X=null,ne=null,fe=[]}},ae._mouseRotating=!1,ae._prevButtons=0,ae.enableMouseListeners=function(){ae.mouseListener=d(C,function(xt,Vt,Ht){if(!ae._stopped){var Me=Z.length,Ke=fe.length,We=q.object;q.distance=1/0,q.mouse[0]=Vt,q.mouse[1]=Ht,q.object=null,q.screen=null,q.dataCoordinate=q.dataPosition=null;var et=!1;if(xt&&ae._prevButtons)ae._mouseRotating=!0;else{ae._mouseRotating&&(he=!0),ae._mouseRotating=!1;for(var vt=0;vt<Me;++vt){var at=Z[vt].query(Vt,_e[1]-Ht-1,ae.pickRadius);if(at){if(at.distance>q.distance)continue;for(var Xe=0;Xe<Ke;++Xe){var dt=fe[Xe];if(ue[Xe]===vt){var _t=dt.pick(at);_t&&(q.buttons=xt,q.screen=at.coord,q.distance=at.distance,q.object=dt,q.index=_t.distance,q.dataPosition=_t.position,q.dataCoordinate=_t.dataCoordinate,q.data=_t,et=!0)}}}}}We&&We!==q.object&&(We.highlight&&We.highlight(null),oe=!0),q.object&&(q.object.highlight&&q.object.highlight(q.data),oe=!0),et=et||q.object!==We,et&&ae.onselect&&ae.onselect(q),xt&1&&!(ae._prevButtons&1)&&ae.onclick&&ae.onclick(q),ae._prevButtons=xt}})};function rt(){if(ae.contextLost)return!0;P.isContextLost()&&(ae.contextLost=!0,ae.mouseListener.enabled=!1,ae.selection.object=null,ae.oncontextloss&&ae.oncontextloss())}C.addEventListener("webglcontextlost",rt);function Re(){if(!rt()){P.colorMask(!0,!0,!0,!0),P.depthMask(!0),P.disable(P.BLEND),P.enable(P.DEPTH_TEST),P.depthFunc(P.LEQUAL);for(var xt=fe.length,Vt=Z.length,Ht=0;Ht<Vt;++Ht){var Me=Z[Ht];Me.shape=_e,Me.begin();for(var Ke=0;Ke<xt;++Ke)if(ue[Ke]===Ht){var We=fe[Ke];We.drawPick&&(We.pixelRatio=1,We.drawPick(me))}Me.end()}}}var Ie=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],ot=[Ie[0].slice(),Ie[1].slice()];function lt(){if(!rt()){Ce();var xt=ae.camera.tick();me.view=ae.camera.matrix,oe=oe||xt,he=he||xt,X.pixelRatio=ae.pixelRatio,ne.pixelRatio=ae.pixelRatio;var Vt=fe.length,Ht=Ie[0],Me=Ie[1];Ht[0]=Ht[1]=Ht[2]=1/0,Me[0]=Me[1]=Me[2]=-1/0;for(var Ke=0;Ke<Vt;++Ke){var We=fe[Ke];We.pixelRatio=ae.pixelRatio,We.axes=ae.axes,oe=oe||!!We.dirty,he=he||!!We.dirty;var et=We.bounds;if(et)for(var vt=et[0],at=et[1],Xe=0;Xe<3;++Xe)Ht[Xe]=Math.min(Ht[Xe],vt[Xe]),Me[Xe]=Math.max(Me[Xe],at[Xe])}var dt=ae.bounds;if(ae.autoBounds)for(var Xe=0;Xe<3;++Xe){if(Me[Xe]<Ht[Xe])Ht[Xe]=-1,Me[Xe]=1;else{Ht[Xe]===Me[Xe]&&(Ht[Xe]-=1,Me[Xe]+=1);var _t=.05*(Me[Xe]-Ht[Xe]);Ht[Xe]=Ht[Xe]-_t,Me[Xe]=Me[Xe]+_t}dt[0][Xe]=Ht[Xe],dt[1][Xe]=Me[Xe]}for(var $t=!1,Xe=0;Xe<3;++Xe)$t=$t||ot[0][Xe]!==dt[0][Xe]||ot[1][Xe]!==dt[1][Xe],ot[0][Xe]=dt[0][Xe],ot[1][Xe]=dt[1][Xe];if(he=he||$t,oe=oe||$t,!!oe){if($t){for(var Ut=[0,0,0],Ke=0;Ke<3;++Ke)Ut[Ke]=k((dt[1][Ke]-dt[0][Ke])/10);X.autoTicks?X.update({bounds:dt,tickSpacing:Ut}):X.update({bounds:dt})}var fr=P.drawingBufferWidth,ar=P.drawingBufferHeight;te[0]=fr,te[1]=ar,_e[0]=Math.max(fr/ae.pixelRatio,1)|0,_e[1]=Math.max(ar/ae.pixelRatio,1)|0,S(ae,B);for(var Ke=0;Ke<Vt;++Ke){var We=fe[Ke];We.axesBounds=dt,ae.clipToBounds&&(We.clipBounds=dt)}q.object&&(ae.snapToData?ne.position=q.dataCoordinate:ne.position=q.dataPosition,ne.bounds=dt),he&&(he=!1,Re()),ae.axesPixels=u(ae.axes,me,fr,ar),ae.onrender&&ae.onrender(),P.bindFramebuffer(P.FRAMEBUFFER,null),P.viewport(0,0,fr,ar),ae.clearRGBA(),P.depthMask(!0),P.colorMask(!0,!0,!0,!0),P.enable(P.DEPTH_TEST),P.depthFunc(P.LEQUAL),P.disable(P.BLEND),P.disable(P.CULL_FACE);var cr=!1;X.enable&&(cr=cr||X.isTransparent(),X.draw(me)),ne.axes=X,q.object&&ne.draw(me),P.disable(P.CULL_FACE);for(var Ke=0;Ke<Vt;++Ke){var We=fe[Ke];We.axes=X,We.pixelRatio=ae.pixelRatio,We.isOpaque&&We.isOpaque()&&We.draw(me),We.isTransparent&&We.isTransparent()&&(cr=!0)}if(cr){O.shape=te,O.bind(),P.clear(P.DEPTH_BUFFER_BIT),P.colorMask(!1,!1,!1,!1),P.depthMask(!0),P.depthFunc(P.LESS),X.enable&&X.isTransparent()&&X.drawTransparent(me);for(var Ke=0;Ke<Vt;++Ke){var We=fe[Ke];We.isOpaque&&We.isOpaque()&&We.draw(me)}P.enable(P.BLEND),P.blendEquation(P.FUNC_ADD),P.blendFunc(P.ONE,P.ONE_MINUS_SRC_ALPHA),P.colorMask(!0,!0,!0,!0),P.depthMask(!1),P.clearColor(0,0,0,0),P.clear(P.COLOR_BUFFER_BIT),X.isTransparent()&&X.drawTransparent(me);for(var Ke=0;Ke<Vt;++Ke){var We=fe[Ke];We.isTransparent&&We.isTransparent()&&We.drawTransparent(me)}P.bindFramebuffer(P.FRAMEBUFFER,null),P.blendFunc(P.ONE,P.ONE_MINUS_SRC_ALPHA),P.disable(P.DEPTH_TEST),U.bind(),O.color[0].bind(0),U.uniforms.accumBuffer=0,v(P),P.disable(P.BLEND)}oe=!1;for(var Ke=0;Ke<Vt;++Ke)fe[Ke].dirty=!1}}}function ht(){ae._stopped||ae.contextLost||(lt(),requestAnimationFrame(ht))}return ae.enableMouseListeners(),ht(),ae.redraw=function(){ae._stopped||(oe=!0,lt())},ae}function S(g,C){var M=g.bounds,P=g.cameraParams,D=P.projection,q=P.model,O=g.gl.drawingBufferWidth,U=g.gl.drawingBufferHeight,B=g.zNear,F=g.zFar,N=g.fovy,X=O/U;C?(b(D,-X,X,-1,1,B,F),P._ortho=!0):(x(D,N,X,B,F),P._ortho=!1);for(var K=0;K<16;++K)q[K]=0;q[15]=1;for(var ne=0,K=0;K<3;++K)ne=Math.max(ne,M[1][K]-M[0][K]);for(var K=0;K<3;++K)g.autoScale?q[5*K]=g.aspect[K]/(M[1][K]-M[0][K]):q[5*K]=1/ne,g.autoCenter&&(q[12+K]=-q[5*K]*.5*(M[0][K]+M[1][K]))}},6640:function(n,a,o){var s=o(3236);a.pointVertex=s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),a.pointFragment=s([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),a.pickVertex=s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),a.pickFragment=s([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},4696:function(n,a,o){"use strict";var s=o(9405),l=o(2762),u=o(1888),f=o(6640);n.exports=d;function c(x,b,p,w,A){this.plot=x,this.offsetBuffer=b,this.pickBuffer=p,this.shader=w,this.pickShader=A,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var h=c.prototype;h.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},h.update=function(x){var b;x=x||{};function p(S,g){return S in x?x[S]:g}this.sizeMin=p("sizeMin",.5),this.sizeMax=p("sizeMax",20),this.color=p("color",[1,0,0,1]).slice(),this.areaRatio=p("areaRatio",1),this.borderColor=p("borderColor",[0,0,0,1]).slice(),this.blend=p("blend",!1);var w=x.positions.length>>>1,A=x.positions instanceof Float32Array,T=x.idToIndex instanceof Int32Array&&x.idToIndex.length>=w,k=x.positions,_=A?k:u.mallocFloat32(k.length),E=T?x.idToIndex:u.mallocInt32(w);if(A||_.set(k),!T)for(_.set(k),b=0;b<w;b++)E[b]=b;this.points=k,this.offsetBuffer.update(_),this.pickBuffer.update(E),A||u.free(_),T||u.free(E),this.pointCount=w,this.pickOffset=0};function v(x,b){var p=0,w=x.length>>>1,A;for(A=0;A<w;A++){var T=x[A*2],k=x[A*2+1];T>=b[0]&&T<=b[2]&&k>=b[1]&&k<=b[3]&&p++}return p}h.unifiedDraw=function(){var x=[1,0,0,0,1,0,0,0,1],b=[0,0,0,0];return function(p){var w=p!==void 0,A=w?this.pickShader:this.shader,T=this.plot.gl,k=this.plot.dataBox;if(this.pointCount===0)return p;var _=k[2]-k[0],E=k[3]-k[1],S=v(this.points,k),g=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(S,.33333)));x[0]=2/_,x[4]=2/E,x[6]=-2*k[0]/_-1,x[7]=-2*k[1]/E-1,this.offsetBuffer.bind(),A.bind(),A.attributes.position.pointer(),A.uniforms.matrix=x,A.uniforms.color=this.color,A.uniforms.borderColor=this.borderColor,A.uniforms.pointCloud=g<5,A.uniforms.pointSize=g,A.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),w&&(b[0]=p&255,b[1]=p>>8&255,b[2]=p>>16&255,b[3]=p>>24&255,this.pickBuffer.bind(),A.attributes.pickId.pointer(T.UNSIGNED_BYTE),A.uniforms.pickOffset=b,this.pickOffset=p);var C=T.getParameter(T.BLEND),M=T.getParameter(T.DITHER);return C&&!this.blend&&T.disable(T.BLEND),M&&T.disable(T.DITHER),T.drawArrays(T.POINTS,0,this.pointCount),C&&!this.blend&&T.enable(T.BLEND),M&&T.enable(T.DITHER),p+this.pointCount}}(),h.draw=h.unifiedDraw,h.drawPick=h.unifiedDraw,h.pick=function(x,b,p){var w=this.pickOffset,A=this.pointCount;if(p<w||p>=w+A)return null;var T=p-w,k=this.points;return{object:this,pointId:T,dataCoord:[k[2*T],k[2*T+1]]}};function d(x,b){var p=x.gl,w=l(p),A=l(p),T=s(p,f.pointVertex,f.pointFragment),k=s(p,f.pickVertex,f.pickFragment),_=new c(x,w,A,T,k);return _.update(b),x.addObject(_),_}},783:function(n){n.exports=a;function a(o,s,l,u){var f=s[0],c=s[1],h=s[2],v=s[3],d=l[0],x=l[1],b=l[2],p=l[3],w,A,T,k,_;return A=f*d+c*x+h*b+v*p,A<0&&(A=-A,d=-d,x=-x,b=-b,p=-p),1-A>1e-6?(w=Math.acos(A),T=Math.sin(w),k=Math.sin((1-u)*w)/T,_=Math.sin(u*w)/T):(k=1-u,_=u),o[0]=k*f+_*d,o[1]=k*c+_*x,o[2]=k*h+_*b,o[3]=k*v+_*p,o}},5964:function(n){"use strict";n.exports=function(a){return!a&&a!==0?"":a.toString()}},9366:function(n,a,o){"use strict";var s=o(4359);n.exports=u;var l={};function u(f,c,h){var v=[c.style,c.weight,c.variant,c.family].join("_"),d=l[v];if(d||(d=l[v]={}),f in d)return d[f];var x={textAlign:"center",textBaseline:"middle",lineHeight:1,font:c.family,fontStyle:c.style,fontWeight:c.weight,fontVariant:c.variant,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};x.triangles=!0;var b=s(f,x);x.triangles=!1;var p=s(f,x),w,A;if(h&&h!==1){for(w=0;w<b.positions.length;++w)for(A=0;A<b.positions[w].length;++A)b.positions[w][A]/=h;for(w=0;w<p.positions.length;++w)for(A=0;A<p.positions[w].length;++A)p.positions[w][A]/=h}var T=[[1/0,1/0],[-1/0,-1/0]],k=p.positions.length;for(w=0;w<k;++w){var _=p.positions[w];for(A=0;A<2;++A)T[0][A]=Math.min(T[0][A],_[A]),T[1][A]=Math.max(T[1][A],_[A])}return d[f]=[b,p,T]}},1283:function(n,a,o){var s=o(9405),l=o(3236),u=l([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),f=l([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),c=l([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * (view * (model * vec4(position, 1)));
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * (view * (model * vec4(dataPosition, 1)));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),h=l([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),v=l([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),d=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],x={vertex:u,fragment:h,attributes:d},b={vertex:f,fragment:h,attributes:d},p={vertex:c,fragment:h,attributes:d},w={vertex:u,fragment:v,attributes:d},A={vertex:f,fragment:v,attributes:d},T={vertex:c,fragment:v,attributes:d};function k(_,E){var S=s(_,E),g=S.attributes;return g.position.location=0,g.color.location=1,g.glyph.location=2,g.id.location=3,S}a.createPerspective=function(_){return k(_,x)},a.createOrtho=function(_){return k(_,b)},a.createProject=function(_){return k(_,p)},a.createPickPerspective=function(_){return k(_,w)},a.createPickOrtho=function(_){return k(_,A)},a.createPickProject=function(_){return k(_,T)}},8418:function(n,a,o){"use strict";var s=o(5219),l=o(2762),u=o(8116),f=o(1888),c=o(6760),h=o(1283),v=o(9366),d=o(5964),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],b=ArrayBuffer,p=DataView;function w(le){return b.isView(le)&&!(le instanceof p)}function A(le){return Array.isArray(le)||w(le)}n.exports=ce;function T(le,me){var he=le[0],te=le[1],ge=le[2],ae=le[3];return le[0]=me[0]*he+me[4]*te+me[8]*ge+me[12]*ae,le[1]=me[1]*he+me[5]*te+me[9]*ge+me[13]*ae,le[2]=me[2]*he+me[6]*te+me[10]*ge+me[14]*ae,le[3]=me[3]*he+me[7]*te+me[11]*ge+me[15]*ae,le}function k(le,me,he,te){return T(te,te,he),T(te,te,me),T(te,te,le)}function _(le,me){this.index=le,this.dataCoordinate=this.position=me}function E(le){return le===!0||le>1?1:le}function S(le,me,he,te,ge,ae,_e,Ce,qe,rt,Re,Ie){this.gl=le,this.pixelRatio=1,this.shader=me,this.orthoShader=he,this.projectShader=te,this.pointBuffer=ge,this.colorBuffer=ae,this.glyphBuffer=_e,this.idBuffer=Ce,this.vao=qe,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=rt,this.pickOrthoShader=Re,this.pickProjectShader=Ie,this.points=[],this._selectResult=new _(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var g=S.prototype;g.pickSlots=1,g.setPickBase=function(le){this.pickId=le},g.isTransparent=function(){if(this.hasAlpha)return!0;for(var le=0;le<3;++le)if(this.axesProject[le]&&this.projectHasAlpha)return!0;return!1},g.isOpaque=function(){if(!this.hasAlpha)return!0;for(var le=0;le<3;++le)if(this.axesProject[le]&&!this.projectHasAlpha)return!0;return!1};var C=[0,0],M=[0,0,0],P=[0,0,0],D=[0,0,0,1],q=[0,0,0,1],O=x.slice(),U=[0,0,0],B=[[0,0,0],[0,0,0]];function F(le){return le[0]=le[1]=le[2]=0,le}function N(le,me){return le[0]=me[0],le[1]=me[1],le[2]=me[2],le[3]=1,le}function X(le,me,he,te){return le[0]=me[0],le[1]=me[1],le[2]=me[2],le[he]=te,le}function K(le){for(var me=B,he=0;he<2;++he)for(var te=0;te<3;++te)me[he][te]=Math.max(Math.min(le[he][te],1e8),-1e8);return me}function ne(le,me,he,te){var ge=me.axesProject,ae=me.gl,_e=le.uniforms,Ce=he.model||x,qe=he.view||x,rt=he.projection||x,Re=me.axesBounds,Ie=K(me.clipBounds),ot;me.axes&&me.axes.lastCubeProps?ot=me.axes.lastCubeProps.axis:ot=[1,1,1],C[0]=2/ae.drawingBufferWidth,C[1]=2/ae.drawingBufferHeight,le.bind(),_e.view=qe,_e.projection=rt,_e.screenSize=C,_e.highlightId=me.highlightId,_e.highlightScale=me.highlightScale,_e.clipBounds=Ie,_e.pickGroup=me.pickId/255,_e.pixelRatio=te;for(var lt=0;lt<3;++lt)if(ge[lt]){_e.scale=me.projectScale[lt],_e.opacity=me.projectOpacity[lt];for(var ht=O,xt=0;xt<16;++xt)ht[xt]=0;for(var xt=0;xt<4;++xt)ht[5*xt]=1;ht[5*lt]=0,ot[lt]<0?ht[12+lt]=Re[0][lt]:ht[12+lt]=Re[1][lt],c(ht,Ce,ht),_e.model=ht;var Vt=(lt+1)%3,Ht=(lt+2)%3,Me=F(M),Ke=F(P);Me[Vt]=1,Ke[Ht]=1;var We=k(rt,qe,Ce,N(D,Me)),et=k(rt,qe,Ce,N(q,Ke));if(Math.abs(We[1])>Math.abs(et[1])){var vt=We;We=et,et=vt,vt=Me,Me=Ke,Ke=vt;var at=Vt;Vt=Ht,Ht=at}We[0]<0&&(Me[Vt]=-1),et[1]>0&&(Ke[Ht]=-1);for(var Xe=0,dt=0,xt=0;xt<4;++xt)Xe+=Math.pow(Ce[4*Vt+xt],2),dt+=Math.pow(Ce[4*Ht+xt],2);Me[Vt]/=Math.sqrt(Xe),Ke[Ht]/=Math.sqrt(dt),_e.axes[0]=Me,_e.axes[1]=Ke,_e.fragClipBounds[0]=X(U,Ie[0],lt,-1e8),_e.fragClipBounds[1]=X(U,Ie[1],lt,1e8),me.vao.bind(),me.vao.draw(ae.TRIANGLES,me.vertexCount),me.lineWidth>0&&(ae.lineWidth(me.lineWidth*te),me.vao.draw(ae.LINES,me.lineVertexCount,me.vertexCount)),me.vao.unbind()}}var fe=[-1e8,-1e8,-1e8],ue=[1e8,1e8,1e8],ee=[fe,ue];function Z(le,me,he,te,ge,ae,_e){var Ce=he.gl;if((ae===he.projectHasAlpha||_e)&&ne(me,he,te,ge),ae===he.hasAlpha||_e){le.bind();var qe=le.uniforms;qe.model=te.model||x,qe.view=te.view||x,qe.projection=te.projection||x,C[0]=2/Ce.drawingBufferWidth,C[1]=2/Ce.drawingBufferHeight,qe.screenSize=C,qe.highlightId=he.highlightId,qe.highlightScale=he.highlightScale,qe.fragClipBounds=ee,qe.clipBounds=he.axes.bounds,qe.opacity=he.opacity,qe.pickGroup=he.pickId/255,qe.pixelRatio=ge,he.vao.bind(),he.vao.draw(Ce.TRIANGLES,he.vertexCount),he.lineWidth>0&&(Ce.lineWidth(he.lineWidth*ge),he.vao.draw(Ce.LINES,he.lineVertexCount,he.vertexCount)),he.vao.unbind()}}g.draw=function(le){var me=this.useOrtho?this.orthoShader:this.shader;Z(me,this.projectShader,this,le,this.pixelRatio,!1,!1)},g.drawTransparent=function(le){var me=this.useOrtho?this.orthoShader:this.shader;Z(me,this.projectShader,this,le,this.pixelRatio,!0,!1)},g.drawPick=function(le){var me=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;Z(me,this.pickProjectShader,this,le,1,!0,!0)},g.pick=function(le){if(!le||le.id!==this.pickId)return null;var me=le.value[2]+(le.value[1]<<8)+(le.value[0]<<16);if(me>=this.pointCount||me<0)return null;var he=this.points[me],te=this._selectResult;te.index=me;for(var ge=0;ge<3;++ge)te.position[ge]=te.dataCoordinate[ge]=he[ge];return te},g.highlight=function(le){if(!le)this.highlightId=[1,1,1,1];else{var me=le.index,he=me&255,te=me>>8&255,ge=me>>16&255;this.highlightId=[he/255,te/255,ge/255,0]}};function oe(le,me,he,te){var ge;A(le)?me<le.length?ge=le[me]:ge=void 0:ge=le,ge=d(ge);var ae=!0;s(ge)&&(ge="\u25BC",ae=!1),he||(he={});var _e=he.family;A(_e)&&(_e=_e[me]),_e||(_e="normal");var Ce=he.weight;A(Ce)&&(Ce=Ce[me]),Ce||(Ce="normal");var qe=he.style;A(qe)&&(qe=qe[me]),qe||(qe="normal");var rt=he.variant;A(rt)&&(rt=rt[me]),rt||(rt="normal");var Re=v(ge,{family:_e,weight:Ce,style:qe,variant:rt},te),Re=v(ge,he,te);return{mesh:Re[0],lines:Re[1],bounds:Re[2],visible:ae}}g.update=function(le){if(le=le||{},"perspective"in le&&(this.useOrtho=!le.perspective),"orthographic"in le&&(this.useOrtho=!!le.orthographic),"lineWidth"in le&&(this.lineWidth=le.lineWidth),"project"in le)if(A(le.project))this.axesProject=le.project;else{var me=!!le.project;this.axesProject=[me,me,me]}if("projectScale"in le)if(A(le.projectScale))this.projectScale=le.projectScale.slice();else{var he=+le.projectScale;this.projectScale=[he,he,he]}if(this.projectHasAlpha=!1,"projectOpacity"in le){if(A(le.projectOpacity))this.projectOpacity=le.projectOpacity.slice();else{var he=+le.projectOpacity;this.projectOpacity=[he,he,he]}for(var te=0;te<3;++te)this.projectOpacity[te]=E(this.projectOpacity[te]),this.projectOpacity[te]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in le&&(this.opacity=E(le.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var ge=le.position,ae={family:le.font||"normal",style:le.fontStyle||"normal",weight:le.fontWeight||"normal",variant:le.fontVariant||"normal"},_e=le.alignment||[0,0],Ce,qe;if(_e.length===2)Ce=_e[0],qe=_e[1];else{Ce=[],qe=[];for(var te=0;te<_e.length;++te)Ce[te]=_e[te][0],qe[te]=_e[te][1]}var rt=[1/0,1/0,1/0],Re=[-1/0,-1/0,-1/0],Ie=le.glyph,ot=le.color,lt=le.size,ht=le.angle,xt=le.lineColor,Vt=-1,Ht=0,Me=0,Ke=0;if(ge.length){Ke=ge.length;e:for(var te=0;te<Ke;++te){for(var We=ge[te],et=0;et<3;++et)if(isNaN(We[et])||!isFinite(We[et]))continue e;var vt=oe(Ie,te,ae,this.pixelRatio),at=vt.mesh,Xe=vt.lines,dt=vt.bounds;Ht+=at.cells.length*3,Me+=Xe.edges.length*2}}var _t=Ht+Me,$t=f.mallocFloat(3*_t),Ut=f.mallocFloat(4*_t),fr=f.mallocFloat(2*_t),ar=f.mallocUint32(_t);if(_t>0){var cr=0,It=Ht,gt=[0,0,0,1],kt=[0,0,0,1],Je=A(ot)&&A(ot[0]),Ze=A(xt)&&A(xt[0]);e:for(var te=0;te<Ke;++te){Vt+=1;for(var We=ge[te],et=0;et<3;++et){if(isNaN(We[et])||!isFinite(We[et]))continue e;Re[et]=Math.max(Re[et],We[et]),rt[et]=Math.min(rt[et],We[et])}var vt=oe(Ie,te,ae,this.pixelRatio),at=vt.mesh,Xe=vt.lines,dt=vt.bounds,At=vt.visible;if(!At)gt=[1,1,1,0];else if(A(ot)){var Se;if(Je?te<ot.length?Se=ot[te]:Se=[0,0,0,0]:Se=ot,Se.length===3){for(var et=0;et<3;++et)gt[et]=Se[et];gt[3]=1}else if(Se.length===4){for(var et=0;et<4;++et)gt[et]=Se[et];!this.hasAlpha&&Se[3]<1&&(this.hasAlpha=!0)}}else gt[0]=gt[1]=gt[2]=0,gt[3]=1;if(!At)kt=[1,1,1,0];else if(A(xt)){var Se;if(Ze?te<xt.length?Se=xt[te]:Se=[0,0,0,0]:Se=xt,Se.length===3){for(var et=0;et<3;++et)kt[et]=Se[et];kt[et]=1}else if(Se.length===4){for(var et=0;et<4;++et)kt[et]=Se[et];!this.hasAlpha&&Se[3]<1&&(this.hasAlpha=!0)}}else kt[0]=kt[1]=kt[2]=0,kt[3]=1;var pe=.5;At?A(lt)?te<lt.length?pe=+lt[te]:pe=12:lt?pe=+lt:this.useOrtho&&(pe=12):pe=0;var Te=0;A(ht)?te<ht.length?Te=+ht[te]:Te=0:ht&&(Te=+ht);for(var it=Math.cos(Te),Dt=Math.sin(Te),We=ge[te],et=0;et<3;++et)Re[et]=Math.max(Re[et],We[et]),rt[et]=Math.min(rt[et],We[et]);var Wt=Ce,er=qe,Wt=0;A(Ce)?te<Ce.length?Wt=Ce[te]:Wt=0:Ce&&(Wt=Ce);var er=0;A(qe)?te<qe.length?er=qe[te]:er=0:qe&&(er=qe),Wt*=Wt>0?1-dt[0][0]:Wt<0?1+dt[1][0]:1,er*=er>0?1-dt[0][1]:er<0?1+dt[1][1]:1;for(var qr=[Wt,er],jn=at.cells||[],xn=at.positions||[],et=0;et<jn.length;++et)for(var Vr=jn[et],mr=0;mr<3;++mr){for(var Fr=0;Fr<3;++Fr)$t[3*cr+Fr]=We[Fr];for(var Fr=0;Fr<4;++Fr)Ut[4*cr+Fr]=gt[Fr];ar[cr]=Vt;var nn=xn[Vr[mr]];fr[2*cr]=pe*(it*nn[0]-Dt*nn[1]+qr[0]),fr[2*cr+1]=pe*(Dt*nn[0]+it*nn[1]+qr[1]),cr+=1}for(var jn=Xe.edges,xn=Xe.positions,et=0;et<jn.length;++et)for(var Vr=jn[et],mr=0;mr<2;++mr){for(var Fr=0;Fr<3;++Fr)$t[3*It+Fr]=We[Fr];for(var Fr=0;Fr<4;++Fr)Ut[4*It+Fr]=kt[Fr];ar[It]=Vt;var nn=xn[Vr[mr]];fr[2*It]=pe*(it*nn[0]-Dt*nn[1]+qr[0]),fr[2*It+1]=pe*(Dt*nn[0]+it*nn[1]+qr[1]),It+=1}}}this.bounds=[rt,Re],this.points=ge,this.pointCount=ge.length,this.vertexCount=Ht,this.lineVertexCount=Me,this.pointBuffer.update($t),this.colorBuffer.update(Ut),this.glyphBuffer.update(fr),this.idBuffer.update(ar),f.free($t),f.free(Ut),f.free(fr),f.free(ar)},g.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function ce(le){var me=le.gl,he=h.createPerspective(me),te=h.createOrtho(me),ge=h.createProject(me),ae=h.createPickPerspective(me),_e=h.createPickOrtho(me),Ce=h.createPickProject(me),qe=l(me),rt=l(me),Re=l(me),Ie=l(me),ot=u(me,[{buffer:qe,size:3,type:me.FLOAT},{buffer:rt,size:4,type:me.FLOAT},{buffer:Re,size:2,type:me.FLOAT},{buffer:Ie,size:4,type:me.UNSIGNED_BYTE,normalized:!0}]),lt=new S(me,he,te,ge,qe,rt,Re,Ie,ot,ae,_e,Ce);return lt.update(le),lt}},4298:function(n,a,o){"use strict";var s=o(3236);a.boxVertex=s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),a.boxFragment=s([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},3161:function(n,a,o){"use strict";var s=o(9405),l=o(2762),u=o(4298);n.exports=h;function f(v,d,x){this.plot=v,this.boxBuffer=d,this.boxShader=x,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var c=f.prototype;c.draw=function(){if(this.enabled){var v=this.plot,d=this.selectBox,x=this.borderWidth,b=this.innerFill,p=this.innerColor,w=this.outerFill,A=this.outerColor,T=this.borderColor,k=v.box,_=v.screenBox,E=v.dataBox,S=v.viewBox,g=v.pixelRatio,C=(d[0]-E[0])*(S[2]-S[0])/(E[2]-E[0])+S[0],M=(d[1]-E[1])*(S[3]-S[1])/(E[3]-E[1])+S[1],P=(d[2]-E[0])*(S[2]-S[0])/(E[2]-E[0])+S[0],D=(d[3]-E[1])*(S[3]-S[1])/(E[3]-E[1])+S[1];if(C=Math.max(C,S[0]),M=Math.max(M,S[1]),P=Math.min(P,S[2]),D=Math.min(D,S[3]),!(P<C||D<M)){k.bind();var q=_[2]-_[0],O=_[3]-_[1];if(this.outerFill&&(k.drawBox(0,0,q,M,A),k.drawBox(0,M,C,D,A),k.drawBox(0,D,q,O,A),k.drawBox(P,M,q,D,A)),this.innerFill&&k.drawBox(C,M,P,D,p),x>0){var U=x*g;k.drawBox(C-U,M-U,P+U,M+U,T),k.drawBox(C-U,D-U,P+U,D+U,T),k.drawBox(C-U,M-U,C+U,D+U,T),k.drawBox(P-U,M-U,P+U,D+U,T)}}}},c.update=function(v){v=v||{},this.innerFill=!!v.innerFill,this.outerFill=!!v.outerFill,this.innerColor=(v.innerColor||[0,0,0,.5]).slice(),this.outerColor=(v.outerColor||[0,0,0,.5]).slice(),this.borderColor=(v.borderColor||[0,0,0,1]).slice(),this.borderWidth=v.borderWidth||0,this.selectBox=(v.selectBox||this.selectBox).slice()},c.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function h(v,d){var x=v.gl,b=l(x,[0,0,0,1,1,0,1,1]),p=s(x,u.boxVertex,u.boxFragment),w=new f(v,b,p);return w.update(d),v.addOverlay(w),w}},3589:function(n,a,o){"use strict";n.exports=x;var s=o(2260),l=o(1888),u=o(9618),f=o(8828).nextPow2,c=function(b,p,w){for(var A=1e8,T=-1,k=-1,_=b.shape[0],E=b.shape[1],S=0;S<_;S++)for(var g=0;g<E;g++){var C=b.get(S,g,0),M=b.get(S,g,1),P=b.get(S,g,2),D=b.get(S,g,3);if(C<255||M<255||P<255||D<255){var q=p-S,O=w-g,U=q*q+O*O;U<A&&(A=U,T=S,k=g)}}return[T,k,A]};function h(b,p,w,A,T){this.coord=[b,p],this.id=w,this.value=A,this.distance=T}function v(b,p,w){this.gl=b,this.fbo=p,this.buffer=w,this._readTimeout=null;var A=this;this._readCallback=function(){A.gl&&(p.bind(),b.readPixels(0,0,p.shape[0],p.shape[1],b.RGBA,b.UNSIGNED_BYTE,A.buffer),A._readTimeout=null)}}var d=v.prototype;Object.defineProperty(d,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(b){if(this.gl){this.fbo.shape=b;var p=this.fbo.shape[0],w=this.fbo.shape[1];if(w*p*4>this.buffer.length){l.free(this.buffer);for(var A=this.buffer=l.mallocUint8(f(w*p*4)),T=0;T<w*p*4;++T)A[T]=255}return b}}}),d.begin=function(){var b=this.gl,p=this.shape;b&&(this.fbo.bind(),b.clearColor(1,1,1,1),b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT))},d.end=function(){var b=this.gl;b&&(b.bindFramebuffer(b.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},d.query=function(b,p,w){if(!this.gl)return null;var A=this.fbo.shape.slice();b=b|0,p=p|0,typeof w!="number"&&(w=1);var T=Math.min(Math.max(b-w,0),A[0])|0,k=Math.min(Math.max(b+w,0),A[0])|0,_=Math.min(Math.max(p-w,0),A[1])|0,E=Math.min(Math.max(p+w,0),A[1])|0;if(k<=T||E<=_)return null;var S=[k-T,E-_],g=u(this.buffer,[S[0],S[1],4],[4,A[0]*4,1],4*(T+A[0]*_)),C=c(g.hi(S[0],S[1],1),w,w),M=C[0],P=C[1];if(M<0||Math.pow(this.radius,2)<C[2])return null;var D=g.get(M,P,0),q=g.get(M,P,1),O=g.get(M,P,2),U=g.get(M,P,3);return new h(M+T|0,P+_|0,D,[q,O,U],Math.sqrt(C[2]))},d.dispose=function(){this.gl&&(this.fbo.dispose(),l.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function x(b,p){var w=p[0],A=p[1],T={},k=s(b,w,A,T),_=l.mallocUint8(w*A*4);return new v(b,k,_)}},9405:function(n,a,o){"use strict";var s=o(3327),l=o(8731),u=o(216),f=o(5091),c=o(2145),h=o(8866);function v(p){this.gl=p,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var d=v.prototype;d.bind=function(){this.program||this._relink();var p,w=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),A=this.gl.lastAttribCount;if(w>A)for(p=A;p<w;p++)this.gl.enableVertexAttribArray(p);else if(A>w)for(p=w;p<A;p++)this.gl.disableVertexAttribArray(p);this.gl.lastAttribCount=w,this.gl.useProgram(this.program)},d.dispose=function(){for(var p=this.gl.lastAttribCount,w=0;w<p;w++)this.gl.disableVertexAttribArray(w);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function x(p,w){return p.name<w.name?-1:1}d.update=function(p,w,A,T){if(!w||arguments.length===1){var k=p;p=k.vertex,w=k.fragment,A=k.uniforms,T=k.attributes}var _=this,E=_.gl,S=_._vref;_._vref=f.shader(E,E.VERTEX_SHADER,p),S&&S.dispose(),_.vertShader=_._vref.shader;var g=this._fref;if(_._fref=f.shader(E,E.FRAGMENT_SHADER,w),g&&g.dispose(),_.fragShader=_._fref.shader,!A||!T){var C=E.createProgram();if(E.attachShader(C,_.fragShader),E.attachShader(C,_.vertShader),E.linkProgram(C),!E.getProgramParameter(C,E.LINK_STATUS)){var M=E.getProgramInfoLog(C);throw new h(M,"Error linking program:"+M)}A=A||c.uniforms(E,C),T=T||c.attributes(E,C),E.deleteProgram(C)}T=T.slice(),T.sort(x);var P=[],D=[],q=[],O;for(O=0;O<T.length;++O){var U=T[O];if(U.type.indexOf("mat")>=0){for(var B=U.type.charAt(U.type.length-1)|0,F=new Array(B),N=0;N<B;++N)F[N]=q.length,D.push(U.name+"["+N+"]"),typeof U.location=="number"?q.push(U.location+N):Array.isArray(U.location)&&U.location.length===B&&typeof U.location[N]=="number"?q.push(U.location[N]|0):q.push(-1);P.push({name:U.name,type:U.type,locations:F})}else P.push({name:U.name,type:U.type,locations:[q.length]}),D.push(U.name),typeof U.location=="number"?q.push(U.location|0):q.push(-1)}var X=0;for(O=0;O<q.length;++O)if(q[O]<0){for(;q.indexOf(X)>=0;)X+=1;q[O]=X}var K=new Array(A.length);function ne(){_.program=f.program(E,_._vref,_._fref,D,q);for(var fe=0;fe<A.length;++fe)K[fe]=E.getUniformLocation(_.program,A[fe].name)}ne(),_._relink=ne,_.types={uniforms:u(A),attributes:u(T)},_.attributes=l(E,_,P,q),Object.defineProperty(_,"uniforms",s(E,_,A,K))};function b(p,w,A,T,k){var _=new v(p);return _.update(w,A,T,k),_}n.exports=b},8866:function(n){function a(o,s,l){this.shortMessage=s||"",this.longMessage=l||"",this.rawError=o||"",this.message="gl-shader: "+(s||o||"")+(l?`
`+l:""),this.stack=new Error().stack}a.prototype=new Error,a.prototype.name="GLError",a.prototype.constructor=a,n.exports=a},8731:function(n,a,o){"use strict";n.exports=v;var s=o(8866);function l(d,x,b,p,w,A){this._gl=d,this._wrapper=x,this._index=b,this._locations=p,this._dimension=w,this._constFunc=A}var u=l.prototype;u.pointer=function(x,b,p,w){var A=this,T=A._gl,k=A._locations[A._index];T.vertexAttribPointer(k,A._dimension,x||T.FLOAT,!!b,p||0,w||0),T.enableVertexAttribArray(k)},u.set=function(d,x,b,p){return this._constFunc(this._locations[this._index],d,x,b,p)},Object.defineProperty(u,"location",{get:function(){return this._locations[this._index]},set:function(d){return d!==this._locations[this._index]&&(this._locations[this._index]=d|0,this._wrapper.program=null),d|0}});var f=[function(d,x,b){return b.length===void 0?d.vertexAttrib1f(x,b):d.vertexAttrib1fv(x,b)},function(d,x,b,p){return b.length===void 0?d.vertexAttrib2f(x,b,p):d.vertexAttrib2fv(x,b)},function(d,x,b,p,w){return b.length===void 0?d.vertexAttrib3f(x,b,p,w):d.vertexAttrib3fv(x,b)},function(d,x,b,p,w,A){return b.length===void 0?d.vertexAttrib4f(x,b,p,w,A):d.vertexAttrib4fv(x,b)}];function c(d,x,b,p,w,A,T){var k=f[w],_=new l(d,x,b,p,w,k);Object.defineProperty(A,T,{set:function(E){return d.disableVertexAttribArray(p[b]),k(d,p[b],E),E},get:function(){return _},enumerable:!0})}function h(d,x,b,p,w,A,T){for(var k=new Array(w),_=new Array(w),E=0;E<w;++E)c(d,x,b[E],p,w,k,E),_[E]=k[E];Object.defineProperty(k,"location",{set:function(C){if(Array.isArray(C))for(var M=0;M<w;++M)_[M].location=C[M];else for(var M=0;M<w;++M)_[M].location=C+M;return C},get:function(){for(var C=new Array(w),M=0;M<w;++M)C[M]=p[b[M]];return C},enumerable:!0}),k.pointer=function(C,M,P,D){C=C||d.FLOAT,M=!!M,P=P||w*w,D=D||0;for(var q=0;q<w;++q){var O=p[b[q]];d.vertexAttribPointer(O,w,C,M,P,D+q*w),d.enableVertexAttribArray(O)}};var S=new Array(w),g=d["vertexAttrib"+w+"fv"];Object.defineProperty(A,T,{set:function(C){for(var M=0;M<w;++M){var P=p[b[M]];if(d.disableVertexAttribArray(P),Array.isArray(C[0]))g.call(d,P,C[M]);else{for(var D=0;D<w;++D)S[D]=C[w*M+D];g.call(d,P,S)}}return C},get:function(){return k},enumerable:!0})}function v(d,x,b,p){for(var w={},A=0,T=b.length;A<T;++A){var k=b[A],_=k.name,E=k.type,S=k.locations;switch(E){case"bool":case"int":case"float":c(d,x,S[0],p,1,w,_);break;default:if(E.indexOf("vec")>=0){var g=E.charCodeAt(E.length-1)-48;if(g<2||g>4)throw new s("","Invalid data type for attribute "+_+": "+E);c(d,x,S[0],p,g,w,_)}else if(E.indexOf("mat")>=0){var g=E.charCodeAt(E.length-1)-48;if(g<2||g>4)throw new s("","Invalid data type for attribute "+_+": "+E);h(d,x,S,p,g,w,_)}else throw new s("","Unknown data type for attribute "+_+": "+E);break}}return w}},3327:function(n,a,o){"use strict";var s=o(216),l=o(8866);n.exports=c;function u(h){return function(){return h}}function f(h,v){for(var d=new Array(h),x=0;x<h;++x)d[x]=v;return d}function c(h,v,d,x){function b(E){return function(S,g,C){return S.getUniform(g.program,C[E])}}function p(E){return function(g){for(var C=w("",E),M=0;M<C.length;++M){var P=C[M],D=P[0],q=P[1];if(x[q]){var O=g;if(typeof D=="string"&&(D.indexOf(".")===0||D.indexOf("[")===0)){var U=D;if(D.indexOf(".")===0&&(U=D.slice(1)),U.indexOf("]")===U.length-1){var B=U.indexOf("["),F=U.slice(0,B),N=U.slice(B+1,U.length-1);O=F?g[F][N]:g[N]}else O=g[U]}var X=d[q].type,K;switch(X){case"bool":case"int":case"sampler2D":case"samplerCube":h.uniform1i(x[q],O);break;case"float":h.uniform1f(x[q],O);break;default:var ne=X.indexOf("vec");if(0<=ne&&ne<=1&&X.length===4+ne){if(K=X.charCodeAt(X.length-1)-48,K<2||K>4)throw new l("","Invalid data type");switch(X.charAt(0)){case"b":case"i":h["uniform"+K+"iv"](x[q],O);break;case"v":h["uniform"+K+"fv"](x[q],O);break;default:throw new l("","Unrecognized data type for vector "+name+": "+X)}}else if(X.indexOf("mat")===0&&X.length===4){if(K=X.charCodeAt(X.length-1)-48,K<2||K>4)throw new l("","Invalid uniform dimension type for matrix "+name+": "+X);h["uniformMatrix"+K+"fv"](x[q],!1,O);break}else throw new l("","Unknown uniform data type for "+name+": "+X)}}}}}function w(E,S){if(typeof S!="object")return[[E,S]];var g=[];for(var C in S){var M=S[C],P=E;parseInt(C)+""===C?P+="["+C+"]":P+="."+C,typeof M=="object"?g.push.apply(g,w(P,M)):g.push([P,M])}return g}function A(E){switch(E){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var S=E.indexOf("vec");if(0<=S&&S<=1&&E.length===4+S){var g=E.charCodeAt(E.length-1)-48;if(g<2||g>4)throw new l("","Invalid data type");return E.charAt(0)==="b"?f(g,!1):f(g,0)}else if(E.indexOf("mat")===0&&E.length===4){var g=E.charCodeAt(E.length-1)-48;if(g<2||g>4)throw new l("","Invalid uniform dimension type for matrix "+name+": "+E);return f(g*g,0)}else throw new l("","Unknown uniform data type for "+name+": "+E)}}function T(E,S,g){if(typeof g=="object"){var C=k(g);Object.defineProperty(E,S,{get:u(C),set:p(g),enumerable:!0,configurable:!1})}else x[g]?Object.defineProperty(E,S,{get:b(g),set:p(g),enumerable:!0,configurable:!1}):E[S]=A(d[g].type)}function k(E){var S;if(Array.isArray(E)){S=new Array(E.length);for(var g=0;g<E.length;++g)T(S,g,E[g])}else{S={};for(var C in E)T(S,C,E[C])}return S}var _=s(d,!0);return{get:u(k(_)),set:p(_),enumerable:!0,configurable:!0}}},216:function(n){"use strict";n.exports=a;function a(o,s){for(var l={},u=0;u<o.length;++u)for(var f=o[u].name,c=f.split("."),h=l,v=0;v<c.length;++v){var d=c[v].split("[");if(d.length>1){d[0]in h||(h[d[0]]=[]),h=h[d[0]];for(var x=1;x<d.length;++x){var b=parseInt(d[x]);x<d.length-1||v<c.length-1?(b in h||(x<d.length-1?h[b]=[]:h[b]={}),h=h[b]):s?h[b]=u:h[b]=o[u].type}}else v<c.length-1?(d[0]in h||(h[d[0]]={}),h=h[d[0]]):s?h[d[0]]=u:h[d[0]]=o[u].type}return l}},2145:function(n,a){"use strict";a.uniforms=u,a.attributes=f;var o={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},s=null;function l(c,h){if(!s){var v=Object.keys(o);s={};for(var d=0;d<v.length;++d){var x=v[d];s[c[x]]=o[x]}}return s[h]}function u(c,h){for(var v=c.getProgramParameter(h,c.ACTIVE_UNIFORMS),d=[],x=0;x<v;++x){var b=c.getActiveUniform(h,x);if(b){var p=l(c,b.type);if(b.size>1)for(var w=0;w<b.size;++w)d.push({name:b.name.replace("[0]","["+w+"]"),type:p});else d.push({name:b.name,type:p})}}return d}function f(c,h){for(var v=c.getProgramParameter(h,c.ACTIVE_ATTRIBUTES),d=[],x=0;x<v;++x){var b=c.getActiveAttrib(h,x);b&&d.push({name:b.name,type:l(c,b.type)})}return d}},5091:function(n,a,o){"use strict";a.shader=w,a.program=A;var s=o(8866),l=o(2992),u=typeof WeakMap=="undefined"?o(606):WeakMap,f=new u,c=0;function h(T,k,_,E,S,g,C){this.id=T,this.src=k,this.type=_,this.shader=E,this.count=g,this.programs=[],this.cache=C}h.prototype.dispose=function(){if(--this.count===0){for(var T=this.cache,k=T.gl,_=this.programs,E=0,S=_.length;E<S;++E){var g=T.programs[_[E]];g&&(delete T.programs[E],k.deleteProgram(g))}k.deleteShader(this.shader),delete T.shaders[this.type===k.FRAGMENT_SHADER|0][this.src]}};function v(T){this.gl=T,this.shaders=[{},{}],this.programs={}}var d=v.prototype;function x(T,k,_){var E=T.createShader(k);if(T.shaderSource(E,_),T.compileShader(E),!T.getShaderParameter(E,T.COMPILE_STATUS)){var S=T.getShaderInfoLog(E);try{var g=l(S,_,k)}catch(C){throw console.warn("Failed to format compiler error: "+C),new s(S,`Error compiling shader:
`+S)}throw new s(S,g.short,g.long)}return E}d.getShaderReference=function(T,k){var _=this.gl,E=this.shaders[T===_.FRAGMENT_SHADER|0],S=E[k];if(!S||!_.isShader(S.shader)){var g=x(_,T,k);S=E[k]=new h(c++,k,T,g,[],1,this)}else S.count+=1;return S};function b(T,k,_,E,S){var g=T.createProgram();T.attachShader(g,k),T.attachShader(g,_);for(var C=0;C<E.length;++C)T.bindAttribLocation(g,S[C],E[C]);if(T.linkProgram(g),!T.getProgramParameter(g,T.LINK_STATUS)){var M=T.getProgramInfoLog(g);throw new s(M,"Error linking program: "+M)}return g}d.getProgram=function(T,k,_,E){var S=[T.id,k.id,_.join(":"),E.join(":")].join("@"),g=this.programs[S];return(!g||!this.gl.isProgram(g))&&(this.programs[S]=g=b(this.gl,T.shader,k.shader,_,E),T.programs.push(S),k.programs.push(S)),g};function p(T){var k=f.get(T);return k||(k=new v(T),f.set(T,k)),k}function w(T,k,_){return p(T).getShaderReference(k,_)}function A(T,k,_,E,S){return p(T).getProgram(k,_,E,S)}},4098:function(n){"use strict";n.exports=s;function a(l){this.plot=l,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var o=a.prototype;o.update=function(l){l=l||{},this.enable=(l.enable||[!0,!0,!1,!1]).slice(),this.width=(l.width||[1,1,1,1]).slice(),this.color=(l.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(u){return u.slice()}),this.center=(l.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},o.draw=function(){var l=this.enable,u=this.width,f=this.color,c=this.center,h=this.plot,v=h.line,d=h.dataBox,x=h.viewBox;if(v.bind(),d[0]<=c[0]&&c[0]<=d[2]&&d[1]<=c[1]&&c[1]<=d[3]){var b=x[0]+(c[0]-d[0])/(d[2]-d[0])*(x[2]-x[0]),p=x[1]+(c[1]-d[1])/(d[3]-d[1])*(x[3]-x[1]);l[0]&&v.drawLine(b,p,x[0],p,u[0],f[0]),l[1]&&v.drawLine(b,p,b,x[1],u[1],f[1]),l[2]&&v.drawLine(b,p,x[2],p,u[2],f[2]),l[3]&&v.drawLine(b,p,b,x[3],u[3],f[3])}},o.dispose=function(){this.plot.removeOverlay(this)};function s(l,u){var f=new a(l);return f.update(u),l.addOverlay(f),f}},1493:function(n,a,o){"use strict";var s=o(3236),l=o(9405),u=s([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * (view * (model * vec4(vertexPosition, 1.0)));
  vec2 clipOffset = (projection * (view * (model * vec4(color, 0.0)))).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),f=s([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);n.exports=function(c){return l(c,u,f,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},4449:function(n,a,o){"use strict";var s=o(2762),l=o(8116),u=o(1493);n.exports=b;var f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(p,w,A,T){this.gl=p,this.buffer=w,this.vao=A,this.shader=T,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var h=c.prototype,v=[0,0,0],d=[0,0,0],x=[0,0];h.isTransparent=function(){return!1},h.drawTransparent=function(p){},h.draw=function(p){var w=this.gl,A=this.vao,T=this.shader;A.bind(),T.bind();var k=p.model||f,_=p.view||f,E=p.projection||f,S;this.axes&&(S=this.axes.lastCubeProps.axis);for(var g=v,C=d,M=0;M<3;++M)S&&S[M]<0?(g[M]=this.bounds[0][M],C[M]=this.bounds[1][M]):(g[M]=this.bounds[1][M],C[M]=this.bounds[0][M]);x[0]=w.drawingBufferWidth,x[1]=w.drawingBufferHeight,T.uniforms.model=k,T.uniforms.view=_,T.uniforms.projection=E,T.uniforms.coordinates=[this.position,g,C],T.uniforms.colors=this.colors,T.uniforms.screenShape=x;for(var M=0;M<3;++M)T.uniforms.lineWidth=this.lineWidth[M]*this.pixelRatio,this.enabled[M]&&(A.draw(w.TRIANGLES,6,6*M),this.drawSides[M]&&A.draw(w.TRIANGLES,12,18+12*M));A.unbind()},h.update=function(p){p&&("bounds"in p&&(this.bounds=p.bounds),"position"in p&&(this.position=p.position),"lineWidth"in p&&(this.lineWidth=p.lineWidth),"colors"in p&&(this.colors=p.colors),"enabled"in p&&(this.enabled=p.enabled),"drawSides"in p&&(this.drawSides=p.drawSides))},h.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function b(p,w){var A=[];function T(g,C,M,P,D,q){var O=[g,C,M,0,0,0,1];O[P+3]=1,O[P]=D,A.push.apply(A,O),O[6]=-1,A.push.apply(A,O),O[P]=q,A.push.apply(A,O),A.push.apply(A,O),O[6]=1,A.push.apply(A,O),O[P]=D,A.push.apply(A,O)}T(0,0,0,0,0,1),T(0,0,0,1,0,1),T(0,0,0,2,0,1),T(1,0,0,1,-1,1),T(1,0,0,2,-1,1),T(0,1,0,0,-1,1),T(0,1,0,2,-1,1),T(0,0,1,0,-1,1),T(0,0,1,1,-1,1);var k=s(p,A),_=l(p,[{type:p.FLOAT,buffer:k,size:3,offset:0,stride:28},{type:p.FLOAT,buffer:k,size:3,offset:12,stride:28},{type:p.FLOAT,buffer:k,size:1,offset:24,stride:28}]),E=u(p);E.attributes.position.location=0,E.attributes.color.location=1,E.attributes.weight.location=2;var S=new c(p,k,_,E);return S.update(w),S}},6740:function(n,a,o){var s=o(3236),l=s([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),u=s([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),f=s([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * (view * tubePosition);
  f_id        = id;
  f_position  = position.xyz;
}
`]),c=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);a.meshShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},a.pickShader={vertex:f,fragment:c,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7815:function(n,a,o){"use strict";var s=o(2931),l=o(9970),u=["xyz","xzy","yxz","yzx","zxy","zyx"],f=function(T,k,_,E){for(var S=T.points,g=T.velocities,C=T.divergences,M=[],P=[],D=[],q=[],O=[],U=[],B=0,F=0,N=l.create(),X=l.create(),K=8,ne=0;ne<S.length;ne++){var fe=S[ne],ue=g[ne],ee=C[ne];k===0&&(ee=_*.05),F=s.length(ue)/E,N=l.create(),s.copy(N,ue),N[3]=ee;for(var Z=0;Z<K;Z++)O[Z]=[fe[0],fe[1],fe[2],Z];if(q.length>0)for(var Z=0;Z<K;Z++){var oe=(Z+1)%K;M.push(q[Z],O[Z],O[oe],O[oe],q[oe],q[Z]),D.push(X,N,N,N,X,X),U.push(B,F,F,F,B,B);var ce=M.length;P.push([ce-6,ce-5,ce-4],[ce-3,ce-2,ce-1])}var le=q;q=O,O=le;var me=X;X=N,N=me;var he=B;B=F,F=he}return{positions:M,cells:P,vectors:D,vertexIntensity:U}},c=function(T,k,_,E){for(var S=0,g=0;g<T.length;g++)for(var C=T[g].velocities,M=0;M<C.length;M++)S=Math.max(S,s.length(C[M]));for(var P=T.map(function(ne){return f(ne,_,E,S)}),D=[],q=[],O=[],U=[],g=0;g<P.length;g++){var B=P[g],F=D.length;D=D.concat(B.positions),O=O.concat(B.vectors),U=U.concat(B.vertexIntensity);for(var M=0;M<B.cells.length;M++){var N=B.cells[M],X=[];q.push(X);for(var K=0;K<N.length;K++)X.push(N[K]+F)}}return{positions:D,cells:q,vectors:O,vertexIntensity:U,colormap:k}},h=function(T,k){var _=T.length,E;for(E=0;E<_;E++){var S=T[E];if(S===k)return E;if(S>k)return E-1}return E},v=function(T,k,_){return T<k?k:T>_?_:T},d=function(T,k,_){var E=k.vectors,S=k.meshgrid,g=T[0],C=T[1],M=T[2],P=S[0].length,D=S[1].length,q=S[2].length,O=h(S[0],g),U=h(S[1],C),B=h(S[2],M),F=O+1,N=U+1,X=B+1;if(O=v(O,0,P-1),F=v(F,0,P-1),U=v(U,0,D-1),N=v(N,0,D-1),B=v(B,0,q-1),X=v(X,0,q-1),O<0||U<0||B<0||F>P-1||N>D-1||X>q-1)return s.create();var K=S[0][O],ne=S[0][F],fe=S[1][U],ue=S[1][N],ee=S[2][B],Z=S[2][X],oe=(g-K)/(ne-K),ce=(C-fe)/(ue-fe),le=(M-ee)/(Z-ee);isFinite(oe)||(oe=.5),isFinite(ce)||(ce=.5),isFinite(le)||(le=.5);var me,he,te,ge,ae,_e;switch(_.reversedX&&(O=P-1-O,F=P-1-F),_.reversedY&&(U=D-1-U,N=D-1-N),_.reversedZ&&(B=q-1-B,X=q-1-X),_.filled){case 5:ae=B,_e=X,te=U*q,ge=N*q,me=O*q*D,he=F*q*D;break;case 4:ae=B,_e=X,me=O*q,he=F*q,te=U*q*P,ge=N*q*P;break;case 3:te=U,ge=N,ae=B*D,_e=X*D,me=O*D*q,he=F*D*q;break;case 2:te=U,ge=N,me=O*D,he=F*D,ae=B*D*P,_e=X*D*P;break;case 1:me=O,he=F,ae=B*P,_e=X*P,te=U*P*q,ge=N*P*q;break;default:me=O,he=F,te=U*P,ge=N*P,ae=B*P*D,_e=X*P*D;break}var Ce=E[me+te+ae],qe=E[me+te+_e],rt=E[me+ge+ae],Re=E[me+ge+_e],Ie=E[he+te+ae],ot=E[he+te+_e],lt=E[he+ge+ae],ht=E[he+ge+_e],xt=s.create(),Vt=s.create(),Ht=s.create(),Me=s.create();s.lerp(xt,Ce,Ie,oe),s.lerp(Vt,qe,ot,oe),s.lerp(Ht,rt,lt,oe),s.lerp(Me,Re,ht,oe);var Ke=s.create(),We=s.create();s.lerp(Ke,xt,Ht,ce),s.lerp(We,Vt,Me,ce);var et=s.create();return s.lerp(et,Ke,We,le),et},x=function(T,k){var _=k[0],E=k[1],S=k[2];return T[0]=_<0?-_:_,T[1]=E<0?-E:E,T[2]=S<0?-S:S,T},b=function(T){var k=1/0;T.sort(function(g,C){return g-C});for(var _=T.length,E=1;E<_;E++){var S=Math.abs(T[E]-T[E-1]);S<k&&(k=S)}return k},p=function(T){for(var k=[],_=[],E=[],S={},g={},C={},M=T.length,P=0;P<M;P++){var D=T[P],q=D[0],O=D[1],U=D[2];S[q]||(k.push(q),S[q]=!0),g[O]||(_.push(O),g[O]=!0),C[U]||(E.push(U),C[U]=!0)}var B=b(k),F=b(_),N=b(E),X=Math.min(B,F,N);return isFinite(X)?X:1};n.exports=function(T,k){var _=T.startingPositions,E=T.maxLength||1e3,S=T.tubeSize||1,g=T.absoluteTubeSize,C=T.gridFill||"+x+y+z",M={};C.indexOf("-x")!==-1&&(M.reversedX=!0),C.indexOf("-y")!==-1&&(M.reversedY=!0),C.indexOf("-z")!==-1&&(M.reversedZ=!0),M.filled=u.indexOf(C.replace(/-/g,"").replace(/\+/g,""));var P=T.getVelocity||function(ot){return d(ot,T,M)},D=T.getDivergence||function(ot,lt){var ht=s.create(),xt=1e-4;s.add(ht,ot,[xt,0,0]);var Vt=P(ht);s.subtract(Vt,Vt,lt),s.scale(Vt,Vt,1/xt),s.add(ht,ot,[0,xt,0]);var Ht=P(ht);s.subtract(Ht,Ht,lt),s.scale(Ht,Ht,1/xt),s.add(ht,ot,[0,0,xt]);var Me=P(ht);return s.subtract(Me,Me,lt),s.scale(Me,Me,1/xt),s.add(ht,Vt,Ht),s.add(ht,ht,Me),ht},q=[],O=k[0][0],U=k[0][1],B=k[0][2],F=k[1][0],N=k[1][1],X=k[1][2],K=function(ot){var lt=ot[0],ht=ot[1],xt=ot[2];return!(lt<O||lt>F||ht<U||ht>N||xt<B||xt>X)},ne=s.distance(k[0],k[1]),fe=10*ne/E,ue=fe*fe,ee=1,Z=0,oe=_.length;oe>1&&(ee=p(_));for(var ce=0;ce<oe;ce++){var le=s.create();s.copy(le,_[ce]);var me=[le],he=[],te=P(le),ge=le;he.push(te);var ae=[],_e=D(le,te),Ce=s.length(_e);isFinite(Ce)&&Ce>Z&&(Z=Ce),ae.push(Ce),q.push({points:me,velocities:he,divergences:ae});for(var qe=0;qe<E*100&&me.length<E&&K(le);){qe++;var rt=s.clone(te),Re=s.squaredLength(rt);if(Re===0)break;if(Re>ue&&s.scale(rt,rt,fe/Math.sqrt(Re)),s.add(rt,rt,le),te=P(rt),s.squaredDistance(ge,rt)-ue>-1e-4*ue){me.push(rt),ge=rt,he.push(te);var _e=D(rt,te),Ce=s.length(_e);isFinite(Ce)&&Ce>Z&&(Z=Ce),ae.push(Ce)}le=rt}}var Ie=c(q,T.colormap,Z,ee);return g?Ie.tubeScale=g:(Z===0&&(Z=1),Ie.tubeScale=S*.5*ee/Z),Ie};var w=o(6740),A=o(6405).createMesh;n.exports.createTubeMesh=function(T,k){return A(T,k,{shaders:w,traceType:"streamtube"})}},990:function(n,a,o){var s=o(9405),l=o(3236),u=l([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));
  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(localCoordinate, 1.0);
  vec4 clipPosition = projection * (view * worldPosition);
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),f=l([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),c=l([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));
  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(dataCoordinate, 1.0);

  vec4 clipPosition = projection * (view * worldPosition);
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),h=l([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);a.createShader=function(v){var d=s(v,u,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return d.attributes.uv.location=0,d.attributes.f.location=1,d.attributes.normal.location=2,d},a.createPickShader=function(v){var d=s(v,u,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return d.attributes.uv.location=0,d.attributes.f.location=1,d.attributes.normal.location=2,d},a.createContourShader=function(v){var d=s(v,c,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return d.attributes.uv.location=0,d.attributes.f.location=1,d},a.createPickContourShader=function(v){var d=s(v,c,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return d.attributes.uv.location=0,d.attributes.f.location=1,d}},9499:function(n,a,o){"use strict";n.exports=me;var s=o(8828),l=o(2762),u=o(8116),f=o(7766),c=o(1888),h=o(6729),v=o(5298),d=o(9994),x=o(9618),b=o(3711),p=o(6760),w=o(7608),A=o(2478),T=o(6199),k=o(990),_=k.createShader,E=k.createContourShader,S=k.createPickShader,g=k.createPickContourShader,C=4*10,M=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],P=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],D=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var he=0;he<3;++he){var te=D[he],ge=(he+1)%3,ae=(he+2)%3;te[ge+0]=1,te[ae+3]=1,te[he+6]=1}})();function q(he,te,ge,ae,_e){this.position=he,this.index=te,this.uv=ge,this.level=ae,this.dataCoordinate=_e}var O=256;function U(he,te,ge,ae,_e,Ce,qe,rt,Re,Ie,ot,lt,ht,xt,Vt){this.gl=he,this.shape=te,this.bounds=ge,this.objectOffset=Vt,this.intensityBounds=[],this._shader=ae,this._pickShader=_e,this._coordinateBuffer=Ce,this._vao=qe,this._colorMap=rt,this._contourShader=Re,this._contourPickShader=Ie,this._contourBuffer=ot,this._contourVAO=lt,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new q([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=ht,this._dynamicVAO=xt,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[x(c.mallocFloat(1024),[0,0]),x(c.mallocFloat(1024),[0,0]),x(c.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var B=U.prototype;B.genColormap=function(he,te){var ge=!1,ae=d([h({colormap:he,nshades:O,format:"rgba"}).map(function(_e,Ce){var qe=te?F(Ce/255,te):_e[3];return qe<1&&(ge=!0),[_e[0],_e[1],_e[2],255*qe]})]);return v.divseq(ae,255),this.hasAlphaScale=ge,ae},B.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},B.isOpaque=function(){return!this.isTransparent()},B.pickSlots=1,B.setPickBase=function(he){this.pickId=he};function F(he,te){if(!te||!te.length)return 1;for(var ge=0;ge<te.length;++ge){if(te.length<2)return 1;if(te[ge][0]===he)return te[ge][1];if(te[ge][0]>he&&ge>0){var ae=(te[ge][0]-he)/(te[ge][0]-te[ge-1][0]);return te[ge][1]*(1-ae)+ae*te[ge-1][1]}}return 1}var N=[0,0,0],X={showSurface:!1,showContour:!1,projections:[M.slice(),M.slice(),M.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function K(he,te){var ge,ae,_e,Ce=te.axes&&te.axes.lastCubeProps.axis||N,qe=te.showSurface,rt=te.showContour;for(ge=0;ge<3;++ge)for(qe=qe||te.surfaceProject[ge],ae=0;ae<3;++ae)rt=rt||te.contourProject[ge][ae];for(ge=0;ge<3;++ge){var Re=X.projections[ge];for(ae=0;ae<16;++ae)Re[ae]=0;for(ae=0;ae<4;++ae)Re[5*ae]=1;Re[5*ge]=0,Re[12+ge]=te.axesBounds[+(Ce[ge]>0)][ge],p(Re,he.model,Re);var Ie=X.clipBounds[ge];for(_e=0;_e<2;++_e)for(ae=0;ae<3;++ae)Ie[_e][ae]=he.clipBounds[_e][ae];Ie[0][ge]=-1e8,Ie[1][ge]=1e8}return X.showSurface=qe,X.showContour=rt,X}var ne={model:M,view:M,projection:M,inverseModel:M.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},fe=M.slice(),ue=[1,0,0,0,1,0,0,0,1];function ee(he,te){he=he||{};var ge=this.gl;ge.disable(ge.CULL_FACE),this._colorMap.bind(0);var ae=ne;ae.model=he.model||M,ae.view=he.view||M,ae.projection=he.projection||M,ae.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],ae.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],ae.objectOffset=this.objectOffset,ae.contourColor=this.contourColor[0],ae.inverseModel=w(ae.inverseModel,ae.model);for(var _e=0;_e<2;++_e)for(var Ce=ae.clipBounds[_e],qe=0;qe<3;++qe)Ce[qe]=Math.min(Math.max(this.clipBounds[_e][qe],-1e8),1e8);ae.kambient=this.ambientLight,ae.kdiffuse=this.diffuseLight,ae.kspecular=this.specularLight,ae.roughness=this.roughness,ae.fresnel=this.fresnel,ae.opacity=this.opacity,ae.height=0,ae.permutation=ue,ae.vertexColor=this.vertexColor;var rt=fe;for(p(rt,ae.view,ae.model),p(rt,ae.projection,rt),w(rt,rt),_e=0;_e<3;++_e)ae.eyePosition[_e]=rt[12+_e]/rt[15];var Re=rt[15];for(_e=0;_e<3;++_e)Re+=this.lightPosition[_e]*rt[4*_e+3];for(_e=0;_e<3;++_e){var Ie=rt[12+_e];for(qe=0;qe<3;++qe)Ie+=rt[4*qe+_e]*this.lightPosition[qe];ae.lightPosition[_e]=Ie/Re}var ot=K(ae,this);if(ot.showSurface){for(this._shader.bind(),this._shader.uniforms=ae,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ge.TRIANGLES,this._vertexCount),_e=0;_e<3;++_e)!this.surfaceProject[_e]||!this.vertexCount||(this._shader.uniforms.model=ot.projections[_e],this._shader.uniforms.clipBounds=ot.clipBounds[_e],this._vao.draw(ge.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ot.showContour){var lt=this._contourShader;ae.kambient=1,ae.kdiffuse=0,ae.kspecular=0,ae.opacity=1,lt.bind(),lt.uniforms=ae;var ht=this._contourVAO;for(ht.bind(),_e=0;_e<3;++_e)for(lt.uniforms.permutation=D[_e],ge.lineWidth(this.contourWidth[_e]*this.pixelRatio),qe=0;qe<this.contourLevels[_e].length;++qe)qe===this.highlightLevel[_e]?(lt.uniforms.contourColor=this.highlightColor[_e],lt.uniforms.contourTint=this.highlightTint[_e]):(qe===0||qe-1===this.highlightLevel[_e])&&(lt.uniforms.contourColor=this.contourColor[_e],lt.uniforms.contourTint=this.contourTint[_e]),this._contourCounts[_e][qe]&&(lt.uniforms.height=this.contourLevels[_e][qe],ht.draw(ge.LINES,this._contourCounts[_e][qe],this._contourOffsets[_e][qe]));for(_e=0;_e<3;++_e)for(lt.uniforms.model=ot.projections[_e],lt.uniforms.clipBounds=ot.clipBounds[_e],qe=0;qe<3;++qe)if(this.contourProject[_e][qe]){lt.uniforms.permutation=D[qe],ge.lineWidth(this.contourWidth[qe]*this.pixelRatio);for(var xt=0;xt<this.contourLevels[qe].length;++xt)xt===this.highlightLevel[qe]?(lt.uniforms.contourColor=this.highlightColor[qe],lt.uniforms.contourTint=this.highlightTint[qe]):(xt===0||xt-1===this.highlightLevel[qe])&&(lt.uniforms.contourColor=this.contourColor[qe],lt.uniforms.contourTint=this.contourTint[qe]),this._contourCounts[qe][xt]&&(lt.uniforms.height=this.contourLevels[qe][xt],ht.draw(ge.LINES,this._contourCounts[qe][xt],this._contourOffsets[qe][xt]))}for(ht.unbind(),ht=this._dynamicVAO,ht.bind(),_e=0;_e<3;++_e)if(this._dynamicCounts[_e]!==0)for(lt.uniforms.model=ae.model,lt.uniforms.clipBounds=ae.clipBounds,lt.uniforms.permutation=D[_e],ge.lineWidth(this.dynamicWidth[_e]*this.pixelRatio),lt.uniforms.contourColor=this.dynamicColor[_e],lt.uniforms.contourTint=this.dynamicTint[_e],lt.uniforms.height=this.dynamicLevel[_e],ht.draw(ge.LINES,this._dynamicCounts[_e],this._dynamicOffsets[_e]),qe=0;qe<3;++qe)this.contourProject[qe][_e]&&(lt.uniforms.model=ot.projections[qe],lt.uniforms.clipBounds=ot.clipBounds[qe],ht.draw(ge.LINES,this._dynamicCounts[_e],this._dynamicOffsets[_e]));ht.unbind()}}B.draw=function(he){return ee.call(this,he,!1)},B.drawTransparent=function(he){return ee.call(this,he,!0)};var Z={model:M,view:M,projection:M,inverseModel:M,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};B.drawPick=function(he){he=he||{};var te=this.gl;te.disable(te.CULL_FACE);var ge=Z;ge.model=he.model||M,ge.view=he.view||M,ge.projection=he.projection||M,ge.shape=this._field[2].shape,ge.pickId=this.pickId/255,ge.lowerBound=this.bounds[0],ge.upperBound=this.bounds[1],ge.objectOffset=this.objectOffset,ge.permutation=ue;for(var ae=0;ae<2;++ae)for(var _e=ge.clipBounds[ae],Ce=0;Ce<3;++Ce)_e[Ce]=Math.min(Math.max(this.clipBounds[ae][Ce],-1e8),1e8);var qe=K(ge,this);if(qe.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ge,this._vao.bind(),this._vao.draw(te.TRIANGLES,this._vertexCount),ae=0;ae<3;++ae)this.surfaceProject[ae]&&(this._pickShader.uniforms.model=qe.projections[ae],this._pickShader.uniforms.clipBounds=qe.clipBounds[ae],this._vao.draw(te.TRIANGLES,this._vertexCount));this._vao.unbind()}if(qe.showContour){var rt=this._contourPickShader;rt.bind(),rt.uniforms=ge;var Re=this._contourVAO;for(Re.bind(),Ce=0;Ce<3;++Ce)for(te.lineWidth(this.contourWidth[Ce]*this.pixelRatio),rt.uniforms.permutation=D[Ce],ae=0;ae<this.contourLevels[Ce].length;++ae)this._contourCounts[Ce][ae]&&(rt.uniforms.height=this.contourLevels[Ce][ae],Re.draw(te.LINES,this._contourCounts[Ce][ae],this._contourOffsets[Ce][ae]));for(ae=0;ae<3;++ae)for(rt.uniforms.model=qe.projections[ae],rt.uniforms.clipBounds=qe.clipBounds[ae],Ce=0;Ce<3;++Ce)if(this.contourProject[ae][Ce]){rt.uniforms.permutation=D[Ce],te.lineWidth(this.contourWidth[Ce]*this.pixelRatio);for(var Ie=0;Ie<this.contourLevels[Ce].length;++Ie)this._contourCounts[Ce][Ie]&&(rt.uniforms.height=this.contourLevels[Ce][Ie],Re.draw(te.LINES,this._contourCounts[Ce][Ie],this._contourOffsets[Ce][Ie]))}Re.unbind()}},B.pick=function(he){if(!he||he.id!==this.pickId)return null;var te=this._field[2].shape,ge=this._pickResult,ae=te[0]*(he.value[0]+(he.value[2]>>4)/16)/255,_e=Math.floor(ae),Ce=ae-_e,qe=te[1]*(he.value[1]+(he.value[2]&15)/16)/255,rt=Math.floor(qe),Re=qe-rt;_e+=1,rt+=1;var Ie=ge.position;Ie[0]=Ie[1]=Ie[2]=0;for(var ot=0;ot<2;++ot)for(var lt=ot?Ce:1-Ce,ht=0;ht<2;++ht)for(var xt=ht?Re:1-Re,Vt=_e+ot,Ht=rt+ht,Me=lt*xt,Ke=0;Ke<3;++Ke)Ie[Ke]+=this._field[Ke].get(Vt,Ht)*Me;for(var We=this._pickResult.level,et=0;et<3;++et)if(We[et]=A.le(this.contourLevels[et],Ie[et]),We[et]<0)this.contourLevels[et].length>0&&(We[et]=0);else if(We[et]<this.contourLevels[et].length-1){var vt=this.contourLevels[et][We[et]],at=this.contourLevels[et][We[et]+1];Math.abs(vt-Ie[et])>Math.abs(at-Ie[et])&&(We[et]+=1)}for(ge.index[0]=Ce<.5?_e:_e+1,ge.index[1]=Re<.5?rt:rt+1,ge.uv[0]=ae/te[0],ge.uv[1]=qe/te[1],Ke=0;Ke<3;++Ke)ge.dataCoordinate[Ke]=this._field[Ke].get(ge.index[0],ge.index[1]);return ge},B.padField=function(he,te){var ge=te.shape.slice(),ae=he.shape.slice();v.assign(he.lo(1,1).hi(ge[0],ge[1]),te),v.assign(he.lo(1).hi(ge[0],1),te.hi(ge[0],1)),v.assign(he.lo(1,ae[1]-1).hi(ge[0],1),te.lo(0,ge[1]-1).hi(ge[0],1)),v.assign(he.lo(0,1).hi(1,ge[1]),te.hi(1)),v.assign(he.lo(ae[0]-1,1).hi(1,ge[1]),te.lo(ge[0]-1)),he.set(0,0,te.get(0,0)),he.set(0,ae[1]-1,te.get(0,ge[1]-1)),he.set(ae[0]-1,0,te.get(ge[0]-1,0)),he.set(ae[0]-1,ae[1]-1,te.get(ge[0]-1,ge[1]-1))};function oe(he,te){return Array.isArray(he)?[te(he[0]),te(he[1]),te(he[2])]:[te(he),te(he),te(he)]}function ce(he){return Array.isArray(he)?he.length===3?[he[0],he[1],he[2],1]:[he[0],he[1],he[2],he[3]]:[0,0,0,1]}function le(he){if(Array.isArray(he)){if(Array.isArray(he))return[ce(he[0]),ce(he[1]),ce(he[2])];var te=ce(he);return[te.slice(),te.slice(),te.slice()]}}B.update=function(he){he=he||{},this.objectOffset=he.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in he&&(this.contourWidth=oe(he.contourWidth,Number)),"showContour"in he&&(this.showContour=oe(he.showContour,Boolean)),"showSurface"in he&&(this.showSurface=!!he.showSurface),"contourTint"in he&&(this.contourTint=oe(he.contourTint,Boolean)),"contourColor"in he&&(this.contourColor=le(he.contourColor)),"contourProject"in he&&(this.contourProject=oe(he.contourProject,function(on){return oe(on,Boolean)})),"surfaceProject"in he&&(this.surfaceProject=he.surfaceProject),"dynamicColor"in he&&(this.dynamicColor=le(he.dynamicColor)),"dynamicTint"in he&&(this.dynamicTint=oe(he.dynamicTint,Number)),"dynamicWidth"in he&&(this.dynamicWidth=oe(he.dynamicWidth,Number)),"opacity"in he&&(this.opacity=he.opacity),"opacityscale"in he&&(this.opacityscale=he.opacityscale),"colorBounds"in he&&(this.colorBounds=he.colorBounds),"vertexColor"in he&&(this.vertexColor=he.vertexColor?1:0),"colormap"in he&&this._colorMap.setPixels(this.genColormap(he.colormap,this.opacityscale));var te=he.field||he.coords&&he.coords[2]||null,ge=!1;if(te||(this._field[2].shape[0]||this._field[2].shape[2]?te=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):te=this._field[2].hi(0,0)),"field"in he||"coords"in he){var ae=(te.shape[0]+2)*(te.shape[1]+2);ae>this._field[2].data.length&&(c.freeFloat(this._field[2].data),this._field[2].data=c.mallocFloat(s.nextPow2(ae))),this._field[2]=x(this._field[2].data,[te.shape[0]+2,te.shape[1]+2]),this.padField(this._field[2],te),this.shape=te.shape.slice();for(var _e=this.shape,Ce=0;Ce<2;++Ce)this._field[2].size>this._field[Ce].data.length&&(c.freeFloat(this._field[Ce].data),this._field[Ce].data=c.mallocFloat(this._field[2].size)),this._field[Ce]=x(this._field[Ce].data,[_e[0]+2,_e[1]+2]);if(he.coords){var qe=he.coords;if(!Array.isArray(qe)||qe.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(Ce=0;Ce<2;++Ce){var rt=qe[Ce];for(ht=0;ht<2;++ht)if(rt.shape[ht]!==_e[ht])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[Ce],rt)}}else if(he.ticks){var Re=he.ticks;if(!Array.isArray(Re)||Re.length!==2)throw new Error("gl-surface: invalid ticks");for(Ce=0;Ce<2;++Ce){var Ie=Re[Ce];if((Array.isArray(Ie)||Ie.length)&&(Ie=x(Ie)),Ie.shape[0]!==_e[Ce])throw new Error("gl-surface: invalid tick length");var ot=x(Ie.data,_e);ot.stride[Ce]=Ie.stride[0],ot.stride[Ce^1]=0,this.padField(this._field[Ce],ot)}}else{for(Ce=0;Ce<2;++Ce){var lt=[0,0];lt[Ce]=1,this._field[Ce]=x(this._field[Ce].data,[_e[0]+2,_e[1]+2],lt,0)}this._field[0].set(0,0,0);for(var ht=0;ht<_e[0];++ht)this._field[0].set(ht+1,0,ht);for(this._field[0].set(_e[0]+1,0,_e[0]-1),this._field[1].set(0,0,0),ht=0;ht<_e[1];++ht)this._field[1].set(0,ht+1,ht);this._field[1].set(0,_e[1]+1,_e[1]-1)}var xt=this._field,Vt=x(c.mallocFloat(xt[2].size*3*2),[3,_e[0]+2,_e[1]+2,2]);for(Ce=0;Ce<3;++Ce)T(Vt.pick(Ce),xt[Ce],"mirror");var Ht=x(c.mallocFloat(xt[2].size*3),[_e[0]+2,_e[1]+2,3]);for(Ce=0;Ce<_e[0]+2;++Ce)for(ht=0;ht<_e[1]+2;++ht){var Me=Vt.get(0,Ce,ht,0),Ke=Vt.get(0,Ce,ht,1),We=Vt.get(1,Ce,ht,0),et=Vt.get(1,Ce,ht,1),vt=Vt.get(2,Ce,ht,0),at=Vt.get(2,Ce,ht,1),Xe=We*at-et*vt,dt=vt*Ke-at*Me,_t=Me*et-Ke*We,$t=Math.sqrt(Xe*Xe+dt*dt+_t*_t);$t<1e-8?($t=Math.max(Math.abs(Xe),Math.abs(dt),Math.abs(_t)),$t<1e-8?(_t=1,dt=Xe=0,$t=1):$t=1/$t):$t=1/Math.sqrt($t),Ht.set(Ce,ht,0,Xe*$t),Ht.set(Ce,ht,1,dt*$t),Ht.set(Ce,ht,2,_t*$t)}c.free(Vt.data);var Ut=[1/0,1/0,1/0],fr=[-1/0,-1/0,-1/0],ar=1/0,cr=-1/0,It=(_e[0]-1)*(_e[1]-1)*6,gt=c.mallocFloat(s.nextPow2(10*It)),kt=0,Je=0;for(Ce=0;Ce<_e[0]-1;++Ce)e:for(ht=0;ht<_e[1]-1;++ht){for(var Ze=0;Ze<2;++Ze)for(var At=0;At<2;++At)for(var Se=0;Se<3;++Se){var pe=this._field[Se].get(1+Ce+Ze,1+ht+At);if(isNaN(pe)||!isFinite(pe))continue e}for(Se=0;Se<6;++Se){var Te=Ce+P[Se][0],it=ht+P[Se][1],Dt=this._field[0].get(Te+1,it+1),Wt=this._field[1].get(Te+1,it+1);pe=this._field[2].get(Te+1,it+1),Xe=Ht.get(Te+1,it+1,0),dt=Ht.get(Te+1,it+1,1),_t=Ht.get(Te+1,it+1,2),he.intensity&&(er=he.intensity.get(Te,it));var er=he.intensity?he.intensity.get(Te,it):pe+this.objectOffset[2];gt[kt++]=Te,gt[kt++]=it,gt[kt++]=Dt,gt[kt++]=Wt,gt[kt++]=pe,gt[kt++]=0,gt[kt++]=er,gt[kt++]=Xe,gt[kt++]=dt,gt[kt++]=_t,Ut[0]=Math.min(Ut[0],Dt+this.objectOffset[0]),Ut[1]=Math.min(Ut[1],Wt+this.objectOffset[1]),Ut[2]=Math.min(Ut[2],pe+this.objectOffset[2]),ar=Math.min(ar,er),fr[0]=Math.max(fr[0],Dt+this.objectOffset[0]),fr[1]=Math.max(fr[1],Wt+this.objectOffset[1]),fr[2]=Math.max(fr[2],pe+this.objectOffset[2]),cr=Math.max(cr,er),Je+=1}}for(he.intensityBounds&&(ar=+he.intensityBounds[0],cr=+he.intensityBounds[1]),Ce=6;Ce<kt;Ce+=10)gt[Ce]=(gt[Ce]-ar)/(cr-ar);this._vertexCount=Je,this._coordinateBuffer.update(gt.subarray(0,kt)),c.freeFloat(gt),c.free(Ht.data),this.bounds=[Ut,fr],this.intensity=he.intensity||this._field[2],(this.intensityBounds[0]!==ar||this.intensityBounds[1]!==cr)&&(ge=!0),this.intensityBounds=[ar,cr]}if("levels"in he){var qr=he.levels;for(Array.isArray(qr[0])?qr=qr.slice():qr=[[],[],qr],Ce=0;Ce<3;++Ce)qr[Ce]=qr[Ce].slice(),qr[Ce].sort(function(on,wn){return on-wn});for(Ce=0;Ce<3;++Ce)for(ht=0;ht<qr[Ce].length;++ht)qr[Ce][ht]-=this.objectOffset[Ce];e:for(Ce=0;Ce<3;++Ce){if(qr[Ce].length!==this.contourLevels[Ce].length){ge=!0;break}for(ht=0;ht<qr[Ce].length;++ht)if(qr[Ce][ht]!==this.contourLevels[Ce][ht]){ge=!0;break e}}this.contourLevels=qr}if(ge){xt=this._field,_e=this.shape;for(var Vr=[],mr=0;mr<3;++mr){var Fr=this.contourLevels[mr],nn=[],jn=[],xn=[0,0,0];for(Ce=0;Ce<Fr.length;++Ce){var pn=b(this._field[mr],Fr[Ce]);nn.push(Vr.length/5|0),Je=0;e:for(ht=0;ht<pn.cells.length;++ht){var ki=pn.cells[ht];for(Se=0;Se<2;++Se){var qn=pn.positions[ki[Se]],bi=qn[0],Si=Math.floor(bi)|0,nt=bi-Si,ze=qn[1],ut=Math.floor(ze)|0,mt=ze-ut,Ot=!1;t:for(var nr=0;nr<3;++nr){xn[nr]=0;var yr=(mr+nr+1)%3;for(Ze=0;Ze<2;++Ze){var vr=Ze?nt:1-nt;for(Te=Math.min(Math.max(Si+Ze,0),_e[0])|0,At=0;At<2;++At){var Rr=At?mt:1-mt;if(it=Math.min(Math.max(ut+At,0),_e[1])|0,nr<2?pe=this._field[yr].get(Te,it):pe=(this.intensity.get(Te,it)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(pe)||isNaN(pe)){Ot=!0;break t}var Gr=vr*Rr;xn[nr]+=Gr*pe}}}if(!Ot)Vr.push(xn[0],xn[1],qn[0],qn[1],xn[2]),Je+=1;else{if(Se>0){for(var Yr=0;Yr<5;++Yr)Vr.pop();Je-=1}continue e}}}jn.push(Je)}this._contourOffsets[mr]=nn,this._contourCounts[mr]=jn}var Xr=c.mallocFloat(Vr.length);for(Ce=0;Ce<Vr.length;++Ce)Xr[Ce]=Vr[Ce];this._contourBuffer.update(Xr),c.freeFloat(Xr)}},B.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var he=0;he<3;++he)c.freeFloat(this._field[he].data)},B.highlight=function(he){var te;if(!he){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(te=0;te<3;++te)this.enableHighlight[te]?this.highlightLevel[te]=he.level[te]:this.highlightLevel[te]=-1;var ge;for(this.snapToData?ge=he.dataCoordinate:ge=he.position,te=0;te<3;++te)ge[te]-=this.objectOffset[te];if(!((!this.enableDynamic[0]||ge[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||ge[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||ge[2]===this.dynamicLevel[2]))){for(var ae=0,_e=this.shape,Ce=c.mallocFloat(12*_e[0]*_e[1]),qe=0;qe<3;++qe){if(!this.enableDynamic[qe]){this.dynamicLevel[qe]=NaN,this._dynamicCounts[qe]=0;continue}this.dynamicLevel[qe]=ge[qe];var rt=(qe+1)%3,Re=(qe+2)%3,Ie=this._field[qe],ot=this._field[rt],lt=this._field[Re],ht=b(Ie,ge[qe]),xt=ht.cells,Vt=ht.positions;for(this._dynamicOffsets[qe]=ae,te=0;te<xt.length;++te)for(var Ht=xt[te],Me=0;Me<2;++Me){var Ke=Vt[Ht[Me]],We=+Ke[0],et=We|0,vt=Math.min(et+1,_e[0])|0,at=We-et,Xe=1-at,dt=+Ke[1],_t=dt|0,$t=Math.min(_t+1,_e[1])|0,Ut=dt-_t,fr=1-Ut,ar=Xe*fr,cr=Xe*Ut,It=at*fr,gt=at*Ut,kt=ar*ot.get(et,_t)+cr*ot.get(et,$t)+It*ot.get(vt,_t)+gt*ot.get(vt,$t),Je=ar*lt.get(et,_t)+cr*lt.get(et,$t)+It*lt.get(vt,_t)+gt*lt.get(vt,$t);if(isNaN(kt)||isNaN(Je)){Me&&(ae-=1);break}Ce[2*ae+0]=kt,Ce[2*ae+1]=Je,ae+=1}this._dynamicCounts[qe]=ae-this._dynamicOffsets[qe]}this._dynamicBuffer.update(Ce.subarray(0,2*ae)),c.freeFloat(Ce)}};function me(he){var te=he.gl,ge=_(te),ae=S(te),_e=E(te),Ce=g(te),qe=l(te),rt=u(te,[{buffer:qe,size:4,stride:C,offset:0},{buffer:qe,size:3,stride:C,offset:16},{buffer:qe,size:3,stride:C,offset:28}]),Re=l(te),Ie=u(te,[{buffer:Re,size:4,stride:20,offset:0},{buffer:Re,size:1,stride:20,offset:16}]),ot=l(te),lt=u(te,[{buffer:ot,size:2,type:te.FLOAT}]),ht=f(te,1,O,te.RGBA,te.UNSIGNED_BYTE);ht.minFilter=te.LINEAR,ht.magFilter=te.LINEAR;var xt=new U(te,[0,0],[[0,0,0],[0,0,0]],ge,ae,qe,rt,ht,_e,Ce,Re,Ie,ot,lt,[0,0,0]),Vt={levels:[[],[],[]]};for(var Ht in he)Vt[Ht]=he[Ht];return Vt.colormap=Vt.colormap||"jet",xt.update(Vt),xt}},7766:function(n,a,o){"use strict";var s=o(9618),l=o(5298),u=o(1888);n.exports=g;var f=null,c=null,h=null;function v(C){f=[C.LINEAR,C.NEAREST_MIPMAP_LINEAR,C.LINEAR_MIPMAP_NEAREST,C.LINEAR_MIPMAP_NEAREST],c=[C.NEAREST,C.LINEAR,C.NEAREST_MIPMAP_NEAREST,C.NEAREST_MIPMAP_LINEAR,C.LINEAR_MIPMAP_NEAREST,C.LINEAR_MIPMAP_LINEAR],h=[C.REPEAT,C.CLAMP_TO_EDGE,C.MIRRORED_REPEAT]}function d(C){return typeof HTMLCanvasElement!="undefined"&&C instanceof HTMLCanvasElement||typeof HTMLImageElement!="undefined"&&C instanceof HTMLImageElement||typeof HTMLVideoElement!="undefined"&&C instanceof HTMLVideoElement||typeof ImageData!="undefined"&&C instanceof ImageData}var x=function(C,M){l.muls(C,M,255)};function b(C,M,P){var D=C.gl,q=D.getParameter(D.MAX_TEXTURE_SIZE);if(M<0||M>q||P<0||P>q)throw new Error("gl-texture2d: Invalid texture size");return C._shape=[M,P],C.bind(),D.texImage2D(D.TEXTURE_2D,0,C.format,M,P,0,C.format,C.type,null),C._mipLevels=[0],C}function p(C,M,P,D,q,O){this.gl=C,this.handle=M,this.format=q,this.type=O,this._shape=[P,D],this._mipLevels=[0],this._magFilter=C.NEAREST,this._minFilter=C.NEAREST,this._wrapS=C.CLAMP_TO_EDGE,this._wrapT=C.CLAMP_TO_EDGE,this._anisoSamples=1;var U=this,B=[this._wrapS,this._wrapT];Object.defineProperties(B,[{get:function(){return U._wrapS},set:function(N){return U.wrapS=N}},{get:function(){return U._wrapT},set:function(N){return U.wrapT=N}}]),this._wrapVector=B;var F=[this._shape[0],this._shape[1]];Object.defineProperties(F,[{get:function(){return U._shape[0]},set:function(N){return U.width=N}},{get:function(){return U._shape[1]},set:function(N){return U.height=N}}]),this._shapeVector=F}var w=p.prototype;Object.defineProperties(w,{minFilter:{get:function(){return this._minFilter},set:function(C){this.bind();var M=this.gl;if(this.type===M.FLOAT&&f.indexOf(C)>=0&&(M.getExtension("OES_texture_float_linear")||(C=M.NEAREST)),c.indexOf(C)<0)throw new Error("gl-texture2d: Unknown filter mode "+C);return M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,C),this._minFilter=C}},magFilter:{get:function(){return this._magFilter},set:function(C){this.bind();var M=this.gl;if(this.type===M.FLOAT&&f.indexOf(C)>=0&&(M.getExtension("OES_texture_float_linear")||(C=M.NEAREST)),c.indexOf(C)<0)throw new Error("gl-texture2d: Unknown filter mode "+C);return M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,C),this._magFilter=C}},mipSamples:{get:function(){return this._anisoSamples},set:function(C){var M=this._anisoSamples;if(this._anisoSamples=Math.max(C,1)|0,M!==this._anisoSamples){var P=this.gl.getExtension("EXT_texture_filter_anisotropic");P&&this.gl.texParameterf(this.gl.TEXTURE_2D,P.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(C){if(this.bind(),h.indexOf(C)<0)throw new Error("gl-texture2d: Unknown wrap mode "+C);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,C),this._wrapS=C}},wrapT:{get:function(){return this._wrapT},set:function(C){if(this.bind(),h.indexOf(C)<0)throw new Error("gl-texture2d: Unknown wrap mode "+C);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,C),this._wrapT=C}},wrap:{get:function(){return this._wrapVector},set:function(C){if(Array.isArray(C)||(C=[C,C]),C.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var M=0;M<2;++M)if(h.indexOf(C[M])<0)throw new Error("gl-texture2d: Unknown wrap mode "+C);this._wrapS=C[0],this._wrapT=C[1];var P=this.gl;return this.bind(),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_S,this._wrapS),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_T,this._wrapT),C}},shape:{get:function(){return this._shapeVector},set:function(C){if(!Array.isArray(C))C=[C|0,C|0];else if(C.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return b(this,C[0]|0,C[1]|0),[C[0]|0,C[1]|0]}},width:{get:function(){return this._shape[0]},set:function(C){return C=C|0,b(this,C,this._shape[1]),C}},height:{get:function(){return this._shape[1]},set:function(C){return C=C|0,b(this,this._shape[0],C),C}}}),w.bind=function(C){var M=this.gl;return C!==void 0&&M.activeTexture(M.TEXTURE0+(C|0)),M.bindTexture(M.TEXTURE_2D,this.handle),C!==void 0?C|0:M.getParameter(M.ACTIVE_TEXTURE)-M.TEXTURE0},w.dispose=function(){this.gl.deleteTexture(this.handle)},w.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var C=Math.min(this._shape[0],this._shape[1]),M=0;C>0;++M,C>>>=1)this._mipLevels.indexOf(M)<0&&this._mipLevels.push(M)},w.setPixels=function(C,M,P,D){var q=this.gl;this.bind(),Array.isArray(M)?(D=P,P=M[1]|0,M=M[0]|0):(M=M||0,P=P||0),D=D||0;var O=d(C)?C:C.raw;if(O){var U=this._mipLevels.indexOf(D)<0;U?(q.texImage2D(q.TEXTURE_2D,0,this.format,this.format,this.type,O),this._mipLevels.push(D)):q.texSubImage2D(q.TEXTURE_2D,D,M,P,this.format,this.type,O)}else if(C.shape&&C.stride&&C.data){if(C.shape.length<2||M+C.shape[1]>this._shape[1]>>>D||P+C.shape[0]>this._shape[0]>>>D||M<0||P<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");T(q,M,P,D,this.format,this.type,this._mipLevels,C)}else throw new Error("gl-texture2d: Unsupported data type")};function A(C,M){return C.length===3?M[2]===1&&M[1]===C[0]*C[2]&&M[0]===C[2]:M[0]===1&&M[1]===C[0]}function T(C,M,P,D,q,O,U,B){var F=B.dtype,N=B.shape.slice();if(N.length<2||N.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var X=0,K=0,ne=A(N,B.stride.slice());F==="float32"?X=C.FLOAT:F==="float64"?(X=C.FLOAT,ne=!1,F="float32"):F==="uint8"?X=C.UNSIGNED_BYTE:(X=C.UNSIGNED_BYTE,ne=!1,F="uint8");var fe=1;if(N.length===2)K=C.LUMINANCE,N=[N[0],N[1],1],B=s(B.data,N,[B.stride[0],B.stride[1],1],B.offset);else if(N.length===3){if(N[2]===1)K=C.ALPHA;else if(N[2]===2)K=C.LUMINANCE_ALPHA;else if(N[2]===3)K=C.RGB;else if(N[2]===4)K=C.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");fe=N[2]}else throw new Error("gl-texture2d: Invalid shape for texture");if((K===C.LUMINANCE||K===C.ALPHA)&&(q===C.LUMINANCE||q===C.ALPHA)&&(K=q),K!==q)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var ue=B.size,ee=U.indexOf(D)<0;if(ee&&U.push(D),X===O&&ne)B.offset===0&&B.data.length===ue?ee?C.texImage2D(C.TEXTURE_2D,D,q,N[0],N[1],0,q,O,B.data):C.texSubImage2D(C.TEXTURE_2D,D,M,P,N[0],N[1],q,O,B.data):ee?C.texImage2D(C.TEXTURE_2D,D,q,N[0],N[1],0,q,O,B.data.subarray(B.offset,B.offset+ue)):C.texSubImage2D(C.TEXTURE_2D,D,M,P,N[0],N[1],q,O,B.data.subarray(B.offset,B.offset+ue));else{var Z;O===C.FLOAT?Z=u.mallocFloat32(ue):Z=u.mallocUint8(ue);var oe=s(Z,N,[N[2],N[2]*N[0],1]);X===C.FLOAT&&O===C.UNSIGNED_BYTE?x(oe,B):l.assign(oe,B),ee?C.texImage2D(C.TEXTURE_2D,D,q,N[0],N[1],0,q,O,Z.subarray(0,ue)):C.texSubImage2D(C.TEXTURE_2D,D,M,P,N[0],N[1],q,O,Z.subarray(0,ue)),O===C.FLOAT?u.freeFloat32(Z):u.freeUint8(Z)}}function k(C){var M=C.createTexture();return C.bindTexture(C.TEXTURE_2D,M),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.NEAREST),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,C.NEAREST),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE),M}function _(C,M,P,D,q){var O=C.getParameter(C.MAX_TEXTURE_SIZE);if(M<0||M>O||P<0||P>O)throw new Error("gl-texture2d: Invalid texture shape");if(q===C.FLOAT&&!C.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var U=k(C);return C.texImage2D(C.TEXTURE_2D,0,D,M,P,0,D,q,null),new p(C,U,M,P,D,q)}function E(C,M,P,D,q,O){var U=k(C);return C.texImage2D(C.TEXTURE_2D,0,q,q,O,M),new p(C,U,P,D,q,O)}function S(C,M){var P=M.dtype,D=M.shape.slice(),q=C.getParameter(C.MAX_TEXTURE_SIZE);if(D[0]<0||D[0]>q||D[1]<0||D[1]>q)throw new Error("gl-texture2d: Invalid texture size");var O=A(D,M.stride.slice()),U=0;P==="float32"?U=C.FLOAT:P==="float64"?(U=C.FLOAT,O=!1,P="float32"):P==="uint8"?U=C.UNSIGNED_BYTE:(U=C.UNSIGNED_BYTE,O=!1,P="uint8");var B=0;if(D.length===2)B=C.LUMINANCE,D=[D[0],D[1],1],M=s(M.data,D,[M.stride[0],M.stride[1],1],M.offset);else if(D.length===3)if(D[2]===1)B=C.ALPHA;else if(D[2]===2)B=C.LUMINANCE_ALPHA;else if(D[2]===3)B=C.RGB;else if(D[2]===4)B=C.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");U===C.FLOAT&&!C.getExtension("OES_texture_float")&&(U=C.UNSIGNED_BYTE,O=!1);var F,N,X=M.size;if(O)M.offset===0&&M.data.length===X?F=M.data:F=M.data.subarray(M.offset,M.offset+X);else{var K=[D[2],D[2]*D[0],1];N=u.malloc(X,P);var ne=s(N,D,K,0);(P==="float32"||P==="float64")&&U===C.UNSIGNED_BYTE?x(ne,M):l.assign(ne,M),F=N.subarray(0,X)}var fe=k(C);return C.texImage2D(C.TEXTURE_2D,0,B,D[0],D[1],0,B,U,F),O||u.free(N),new p(C,fe,D[0],D[1],B,U)}function g(C){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(f||v(C),typeof arguments[1]=="number")return _(C,arguments[1],arguments[2],arguments[3]||C.RGBA,arguments[4]||C.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return _(C,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||C.RGBA,arguments[3]||C.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var M=arguments[1],P=d(M)?M:M.raw;if(P)return E(C,P,M.width|0,M.height|0,arguments[2]||C.RGBA,arguments[3]||C.UNSIGNED_BYTE);if(M.shape&&M.data&&M.stride)return S(C,M)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},1433:function(n){"use strict";function a(o,s,l){s?s.bind():o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null);var u=o.getParameter(o.MAX_VERTEX_ATTRIBS)|0;if(l){if(l.length>u)throw new Error("gl-vao: Too many vertex attributes");for(var f=0;f<l.length;++f){var c=l[f];if(c.buffer){var h=c.buffer,v=c.size||4,d=c.type||o.FLOAT,x=!!c.normalized,b=c.stride||0,p=c.offset||0;h.bind(),o.enableVertexAttribArray(f),o.vertexAttribPointer(f,v,d,x,b,p)}else{if(typeof c=="number")o.vertexAttrib1f(f,c);else if(c.length===1)o.vertexAttrib1f(f,c[0]);else if(c.length===2)o.vertexAttrib2f(f,c[0],c[1]);else if(c.length===3)o.vertexAttrib3f(f,c[0],c[1],c[2]);else if(c.length===4)o.vertexAttrib4f(f,c[0],c[1],c[2],c[3]);else throw new Error("gl-vao: Invalid vertex attribute");o.disableVertexAttribArray(f)}}for(;f<u;++f)o.disableVertexAttribArray(f)}else{o.bindBuffer(o.ARRAY_BUFFER,null);for(var f=0;f<u;++f)o.disableVertexAttribArray(f)}}n.exports=a},870:function(n,a,o){"use strict";var s=o(1433);function l(f){this.gl=f,this._elements=null,this._attributes=null,this._elementsType=f.UNSIGNED_SHORT}l.prototype.bind=function(){s(this.gl,this._elements,this._attributes)},l.prototype.update=function(f,c,h){this._elements=c,this._attributes=f,this._elementsType=h||this.gl.UNSIGNED_SHORT},l.prototype.dispose=function(){},l.prototype.unbind=function(){},l.prototype.draw=function(f,c,h){h=h||0;var v=this.gl;this._elements?v.drawElements(f,c,this._elementsType,h):v.drawArrays(f,h,c)};function u(f){return new l(f)}n.exports=u},7518:function(n,a,o){"use strict";var s=o(1433);function l(c,h,v,d,x,b){this.location=c,this.dimension=h,this.a=v,this.b=d,this.c=x,this.d=b}l.prototype.bind=function(c){switch(this.dimension){case 1:c.vertexAttrib1f(this.location,this.a);break;case 2:c.vertexAttrib2f(this.location,this.a,this.b);break;case 3:c.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:c.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function u(c,h,v){this.gl=c,this._ext=h,this.handle=v,this._attribs=[],this._useElements=!1,this._elementsType=c.UNSIGNED_SHORT}u.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var c=0;c<this._attribs.length;++c)this._attribs[c].bind(this.gl)},u.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},u.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},u.prototype.update=function(c,h,v){if(this.bind(),s(this.gl,h,c),this.unbind(),this._attribs.length=0,c)for(var d=0;d<c.length;++d){var x=c[d];typeof x=="number"?this._attribs.push(new l(d,1,x)):Array.isArray(x)&&this._attribs.push(new l(d,x.length,x[0],x[1],x[2],x[3]))}this._useElements=!!h,this._elementsType=v||this.gl.UNSIGNED_SHORT},u.prototype.draw=function(c,h,v){v=v||0;var d=this.gl;this._useElements?d.drawElements(c,h,this._elementsType,v):d.drawArrays(c,v,h)};function f(c,h){return new u(c,h,h.createVertexArrayOES())}n.exports=f},8116:function(n,a,o){"use strict";var s=o(7518),l=o(870);function u(c){this.bindVertexArrayOES=c.bindVertexArray.bind(c),this.createVertexArrayOES=c.createVertexArray.bind(c),this.deleteVertexArrayOES=c.deleteVertexArray.bind(c)}function f(c,h,v,d){var x=c.createVertexArray?new u(c):c.getExtension("OES_vertex_array_object"),b;return x?b=s(c,x):b=l(c),b.update(h,v,d),b}n.exports=f},5632:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]+l[0],o[1]=s[1]+l[1],o[2]=s[2]+l[2],o}},8192:function(n,a,o){n.exports=f;var s=o(2825),l=o(3536),u=o(244);function f(c,h){var v=s(c[0],c[1],c[2]),d=s(h[0],h[1],h[2]);l(v,v),l(d,d);var x=u(v,d);return x>1?0:Math.acos(x)}},9226:function(n){n.exports=a;function a(o,s){return o[0]=Math.ceil(s[0]),o[1]=Math.ceil(s[1]),o[2]=Math.ceil(s[2]),o}},3126:function(n){n.exports=a;function a(o){var s=new Float32Array(3);return s[0]=o[0],s[1]=o[1],s[2]=o[2],s}},3990:function(n){n.exports=a;function a(o,s){return o[0]=s[0],o[1]=s[1],o[2]=s[2],o}},1091:function(n){n.exports=a;function a(){var o=new Float32Array(3);return o[0]=0,o[1]=0,o[2]=0,o}},5911:function(n){n.exports=a;function a(o,s,l){var u=s[0],f=s[1],c=s[2],h=l[0],v=l[1],d=l[2];return o[0]=f*d-c*v,o[1]=c*h-u*d,o[2]=u*v-f*h,o}},5455:function(n,a,o){n.exports=o(7056)},7056:function(n){n.exports=a;function a(o,s){var l=s[0]-o[0],u=s[1]-o[1],f=s[2]-o[2];return Math.sqrt(l*l+u*u+f*f)}},4008:function(n,a,o){n.exports=o(6690)},6690:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]/l[0],o[1]=s[1]/l[1],o[2]=s[2]/l[2],o}},244:function(n){n.exports=a;function a(o,s){return o[0]*s[0]+o[1]*s[1]+o[2]*s[2]}},2613:function(n){n.exports=1e-6},9922:function(n,a,o){n.exports=l;var s=o(2613);function l(u,f){var c=u[0],h=u[1],v=u[2],d=f[0],x=f[1],b=f[2];return Math.abs(c-d)<=s*Math.max(1,Math.abs(c),Math.abs(d))&&Math.abs(h-x)<=s*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(v-b)<=s*Math.max(1,Math.abs(v),Math.abs(b))}},9265:function(n){n.exports=a;function a(o,s){return o[0]===s[0]&&o[1]===s[1]&&o[2]===s[2]}},2681:function(n){n.exports=a;function a(o,s){return o[0]=Math.floor(s[0]),o[1]=Math.floor(s[1]),o[2]=Math.floor(s[2]),o}},5137:function(n,a,o){n.exports=l;var s=o(1091)();function l(u,f,c,h,v,d){var x,b;for(f||(f=3),c||(c=0),h?b=Math.min(h*f+c,u.length):b=u.length,x=c;x<b;x+=f)s[0]=u[x],s[1]=u[x+1],s[2]=u[x+2],v(s,s,d),u[x]=s[0],u[x+1]=s[1],u[x+2]=s[2];return u}},2825:function(n){n.exports=a;function a(o,s,l){var u=new Float32Array(3);return u[0]=o,u[1]=s,u[2]=l,u}},2931:function(n,a,o){n.exports={EPSILON:o(2613),create:o(1091),clone:o(3126),angle:o(8192),fromValues:o(2825),copy:o(3990),set:o(1463),equals:o(9922),exactEquals:o(9265),add:o(5632),subtract:o(6843),sub:o(2229),multiply:o(5847),mul:o(4505),divide:o(6690),div:o(4008),min:o(8107),max:o(7417),floor:o(2681),ceil:o(9226),round:o(2447),scale:o(6621),scaleAndAdd:o(8489),distance:o(7056),dist:o(5455),squaredDistance:o(2953),sqrDist:o(6141),length:o(1387),len:o(868),squaredLength:o(3066),sqrLen:o(5486),negate:o(5093),inverse:o(811),normalize:o(3536),dot:o(244),cross:o(5911),lerp:o(6658),random:o(7636),transformMat4:o(5673),transformMat3:o(492),transformQuat:o(264),rotateX:o(6894),rotateY:o(109),rotateZ:o(8692),forEach:o(5137)}},811:function(n){n.exports=a;function a(o,s){return o[0]=1/s[0],o[1]=1/s[1],o[2]=1/s[2],o}},868:function(n,a,o){n.exports=o(1387)},1387:function(n){n.exports=a;function a(o){var s=o[0],l=o[1],u=o[2];return Math.sqrt(s*s+l*l+u*u)}},6658:function(n){n.exports=a;function a(o,s,l,u){var f=s[0],c=s[1],h=s[2];return o[0]=f+u*(l[0]-f),o[1]=c+u*(l[1]-c),o[2]=h+u*(l[2]-h),o}},7417:function(n){n.exports=a;function a(o,s,l){return o[0]=Math.max(s[0],l[0]),o[1]=Math.max(s[1],l[1]),o[2]=Math.max(s[2],l[2]),o}},8107:function(n){n.exports=a;function a(o,s,l){return o[0]=Math.min(s[0],l[0]),o[1]=Math.min(s[1],l[1]),o[2]=Math.min(s[2],l[2]),o}},4505:function(n,a,o){n.exports=o(5847)},5847:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]*l[0],o[1]=s[1]*l[1],o[2]=s[2]*l[2],o}},5093:function(n){n.exports=a;function a(o,s){return o[0]=-s[0],o[1]=-s[1],o[2]=-s[2],o}},3536:function(n){n.exports=a;function a(o,s){var l=s[0],u=s[1],f=s[2],c=l*l+u*u+f*f;return c>0&&(c=1/Math.sqrt(c),o[0]=s[0]*c,o[1]=s[1]*c,o[2]=s[2]*c),o}},7636:function(n){n.exports=a;function a(o,s){s=s||1;var l=Math.random()*2*Math.PI,u=Math.random()*2-1,f=Math.sqrt(1-u*u)*s;return o[0]=Math.cos(l)*f,o[1]=Math.sin(l)*f,o[2]=u*s,o}},6894:function(n){n.exports=a;function a(o,s,l,u){var f=l[1],c=l[2],h=s[1]-f,v=s[2]-c,d=Math.sin(u),x=Math.cos(u);return o[0]=s[0],o[1]=f+h*x-v*d,o[2]=c+h*d+v*x,o}},109:function(n){n.exports=a;function a(o,s,l,u){var f=l[0],c=l[2],h=s[0]-f,v=s[2]-c,d=Math.sin(u),x=Math.cos(u);return o[0]=f+v*d+h*x,o[1]=s[1],o[2]=c+v*x-h*d,o}},8692:function(n){n.exports=a;function a(o,s,l,u){var f=l[0],c=l[1],h=s[0]-f,v=s[1]-c,d=Math.sin(u),x=Math.cos(u);return o[0]=f+h*x-v*d,o[1]=c+h*d+v*x,o[2]=s[2],o}},2447:function(n){n.exports=a;function a(o,s){return o[0]=Math.round(s[0]),o[1]=Math.round(s[1]),o[2]=Math.round(s[2]),o}},6621:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]*l,o[1]=s[1]*l,o[2]=s[2]*l,o}},8489:function(n){n.exports=a;function a(o,s,l,u){return o[0]=s[0]+l[0]*u,o[1]=s[1]+l[1]*u,o[2]=s[2]+l[2]*u,o}},1463:function(n){n.exports=a;function a(o,s,l,u){return o[0]=s,o[1]=l,o[2]=u,o}},6141:function(n,a,o){n.exports=o(2953)},5486:function(n,a,o){n.exports=o(3066)},2953:function(n){n.exports=a;function a(o,s){var l=s[0]-o[0],u=s[1]-o[1],f=s[2]-o[2];return l*l+u*u+f*f}},3066:function(n){n.exports=a;function a(o){var s=o[0],l=o[1],u=o[2];return s*s+l*l+u*u}},2229:function(n,a,o){n.exports=o(6843)},6843:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]-l[0],o[1]=s[1]-l[1],o[2]=s[2]-l[2],o}},492:function(n){n.exports=a;function a(o,s,l){var u=s[0],f=s[1],c=s[2];return o[0]=u*l[0]+f*l[3]+c*l[6],o[1]=u*l[1]+f*l[4]+c*l[7],o[2]=u*l[2]+f*l[5]+c*l[8],o}},5673:function(n){n.exports=a;function a(o,s,l){var u=s[0],f=s[1],c=s[2],h=l[3]*u+l[7]*f+l[11]*c+l[15];return h=h||1,o[0]=(l[0]*u+l[4]*f+l[8]*c+l[12])/h,o[1]=(l[1]*u+l[5]*f+l[9]*c+l[13])/h,o[2]=(l[2]*u+l[6]*f+l[10]*c+l[14])/h,o}},264:function(n){n.exports=a;function a(o,s,l){var u=s[0],f=s[1],c=s[2],h=l[0],v=l[1],d=l[2],x=l[3],b=x*u+v*c-d*f,p=x*f+d*u-h*c,w=x*c+h*f-v*u,A=-h*u-v*f-d*c;return o[0]=b*x+A*-h+p*-d-w*-v,o[1]=p*x+A*-v+w*-h-b*-d,o[2]=w*x+A*-d+b*-v-p*-h,o}},4361:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]+l[0],o[1]=s[1]+l[1],o[2]=s[2]+l[2],o[3]=s[3]+l[3],o}},2335:function(n){n.exports=a;function a(o){var s=new Float32Array(4);return s[0]=o[0],s[1]=o[1],s[2]=o[2],s[3]=o[3],s}},2933:function(n){n.exports=a;function a(o,s){return o[0]=s[0],o[1]=s[1],o[2]=s[2],o[3]=s[3],o}},7536:function(n){n.exports=a;function a(){var o=new Float32Array(4);return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o}},4691:function(n){n.exports=a;function a(o,s){var l=s[0]-o[0],u=s[1]-o[1],f=s[2]-o[2],c=s[3]-o[3];return Math.sqrt(l*l+u*u+f*f+c*c)}},1373:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]/l[0],o[1]=s[1]/l[1],o[2]=s[2]/l[2],o[3]=s[3]/l[3],o}},3750:function(n){n.exports=a;function a(o,s){return o[0]*s[0]+o[1]*s[1]+o[2]*s[2]+o[3]*s[3]}},3390:function(n){n.exports=a;function a(o,s,l,u){var f=new Float32Array(4);return f[0]=o,f[1]=s,f[2]=l,f[3]=u,f}},9970:function(n,a,o){n.exports={create:o(7536),clone:o(2335),fromValues:o(3390),copy:o(2933),set:o(4578),add:o(4361),subtract:o(6860),multiply:o(3576),divide:o(1373),min:o(2334),max:o(160),scale:o(9288),scaleAndAdd:o(4844),distance:o(4691),squaredDistance:o(7960),length:o(6808),squaredLength:o(483),negate:o(1498),inverse:o(4494),normalize:o(5177),dot:o(3750),lerp:o(2573),random:o(9131),transformMat4:o(5352),transformQuat:o(4041)}},4494:function(n){n.exports=a;function a(o,s){return o[0]=1/s[0],o[1]=1/s[1],o[2]=1/s[2],o[3]=1/s[3],o}},6808:function(n){n.exports=a;function a(o){var s=o[0],l=o[1],u=o[2],f=o[3];return Math.sqrt(s*s+l*l+u*u+f*f)}},2573:function(n){n.exports=a;function a(o,s,l,u){var f=s[0],c=s[1],h=s[2],v=s[3];return o[0]=f+u*(l[0]-f),o[1]=c+u*(l[1]-c),o[2]=h+u*(l[2]-h),o[3]=v+u*(l[3]-v),o}},160:function(n){n.exports=a;function a(o,s,l){return o[0]=Math.max(s[0],l[0]),o[1]=Math.max(s[1],l[1]),o[2]=Math.max(s[2],l[2]),o[3]=Math.max(s[3],l[3]),o}},2334:function(n){n.exports=a;function a(o,s,l){return o[0]=Math.min(s[0],l[0]),o[1]=Math.min(s[1],l[1]),o[2]=Math.min(s[2],l[2]),o[3]=Math.min(s[3],l[3]),o}},3576:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]*l[0],o[1]=s[1]*l[1],o[2]=s[2]*l[2],o[3]=s[3]*l[3],o}},1498:function(n){n.exports=a;function a(o,s){return o[0]=-s[0],o[1]=-s[1],o[2]=-s[2],o[3]=-s[3],o}},5177:function(n){n.exports=a;function a(o,s){var l=s[0],u=s[1],f=s[2],c=s[3],h=l*l+u*u+f*f+c*c;return h>0&&(h=1/Math.sqrt(h),o[0]=l*h,o[1]=u*h,o[2]=f*h,o[3]=c*h),o}},9131:function(n,a,o){var s=o(5177),l=o(9288);n.exports=u;function u(f,c){return c=c||1,f[0]=Math.random(),f[1]=Math.random(),f[2]=Math.random(),f[3]=Math.random(),s(f,f),l(f,f,c),f}},9288:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]*l,o[1]=s[1]*l,o[2]=s[2]*l,o[3]=s[3]*l,o}},4844:function(n){n.exports=a;function a(o,s,l,u){return o[0]=s[0]+l[0]*u,o[1]=s[1]+l[1]*u,o[2]=s[2]+l[2]*u,o[3]=s[3]+l[3]*u,o}},4578:function(n){n.exports=a;function a(o,s,l,u,f){return o[0]=s,o[1]=l,o[2]=u,o[3]=f,o}},7960:function(n){n.exports=a;function a(o,s){var l=s[0]-o[0],u=s[1]-o[1],f=s[2]-o[2],c=s[3]-o[3];return l*l+u*u+f*f+c*c}},483:function(n){n.exports=a;function a(o){var s=o[0],l=o[1],u=o[2],f=o[3];return s*s+l*l+u*u+f*f}},6860:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]-l[0],o[1]=s[1]-l[1],o[2]=s[2]-l[2],o[3]=s[3]-l[3],o}},5352:function(n){n.exports=a;function a(o,s,l){var u=s[0],f=s[1],c=s[2],h=s[3];return o[0]=l[0]*u+l[4]*f+l[8]*c+l[12]*h,o[1]=l[1]*u+l[5]*f+l[9]*c+l[13]*h,o[2]=l[2]*u+l[6]*f+l[10]*c+l[14]*h,o[3]=l[3]*u+l[7]*f+l[11]*c+l[15]*h,o}},4041:function(n){n.exports=a;function a(o,s,l){var u=s[0],f=s[1],c=s[2],h=l[0],v=l[1],d=l[2],x=l[3],b=x*u+v*c-d*f,p=x*f+d*u-h*c,w=x*c+h*f-v*u,A=-h*u-v*f-d*c;return o[0]=b*x+A*-h+p*-d-w*-v,o[1]=p*x+A*-v+w*-h-b*-d,o[2]=w*x+A*-d+b*-v-p*-h,o[3]=s[3],o}},1848:function(n,a,o){var s=o(4905),l=o(6468);n.exports=u;function u(f){for(var c=Array.isArray(f)?f:s(f),h=0;h<c.length;h++){var v=c[h];if(v.type==="preprocessor"){var d=v.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(d&&d[2]){var x=d[1],b=d[2];return(x?l(b):b).trim()}}}}},5874:function(n,a,o){n.exports=M;var s=o(620),l=o(7827),u=o(6852),f=o(7932),c=o(3508),h=999,v=9999,d=0,x=1,b=2,p=3,w=4,A=5,T=6,k=7,_=8,E=9,S=10,g=11,C=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function M(P){var D=0,q=0,O=h,U,B,F=[],N=[],X=0,K=0,ne=1,fe=0,ue=0,ee=!1,Z=!1,oe="",ce;P=P||{};var le=u,me=s;P.version==="300 es"&&(le=c,me=f);for(var he={},te={},D=0;D<le.length;D++)he[le[D]]=!0;for(var D=0;D<me.length;D++)te[me[D]]=!0;return function(Me){return N=[],Me!==null?ae(Me):_e()};function ge(Me){Me.length&&N.push({type:C[O],data:Me,position:ue,line:ne,column:fe})}function ae(Me){D=0,Me.toString&&(Me=Me.toString()),oe+=Me.replace(/\r\n/g,`
`),ce=oe.length;for(var Ke;U=oe[D],D<ce;){switch(Ke=D,O){case d:D=Ie();break;case x:D=Re();break;case b:D=rt();break;case p:D=ot();break;case w:D=xt();break;case g:D=ht();break;case A:D=Vt();break;case v:D=Ht();break;case E:D=qe();break;case h:D=Ce();break}if(Ke!==D)switch(oe[Ke]){case`
`:fe=0,++ne;break;default:++fe;break}}return q+=D,oe=oe.slice(D),N}function _e(Me){return F.length&&ge(F.join("")),O=S,ge("(eof)"),N}function Ce(){return F=F.length?[]:F,B==="/"&&U==="*"?(ue=q+D-1,O=d,B=U,D+1):B==="/"&&U==="/"?(ue=q+D-1,O=x,B=U,D+1):U==="#"?(O=b,ue=q+D,D):/\s/.test(U)?(O=E,ue=q+D,D):(ee=/\d/.test(U),Z=/[^\w_]/.test(U),ue=q+D,O=ee?w:Z?p:v,D)}function qe(){return/[^\s]/g.test(U)?(ge(F.join("")),O=h,D):(F.push(U),B=U,D+1)}function rt(){return(U==="\r"||U===`
`)&&B!=="\\"?(ge(F.join("")),O=h,D):(F.push(U),B=U,D+1)}function Re(){return rt()}function Ie(){return U==="/"&&B==="*"?(F.push(U),ge(F.join("")),O=h,D+1):(F.push(U),B=U,D+1)}function ot(){if(B==="."&&/\d/.test(U))return O=A,D;if(B==="/"&&U==="*")return O=d,D;if(B==="/"&&U==="/")return O=x,D;if(U==="."&&F.length){for(;lt(F););return O=A,D}if(U===";"||U===")"||U==="("){if(F.length)for(;lt(F););return ge(U),O=h,D+1}var Me=F.length===2&&U!=="=";if(/[\w_\d\s]/.test(U)||Me){for(;lt(F););return O=h,D}return F.push(U),B=U,D+1}function lt(Me){var Ke=0,We,et;do{if(We=l.indexOf(Me.slice(0,Me.length+Ke).join("")),et=l[We],We===-1){if(Ke--+Me.length>0)continue;et=Me.slice(0,1).join("")}return ge(et),ue+=et.length,F=F.slice(et.length),F.length}while(!0)}function ht(){return/[^a-fA-F0-9]/.test(U)?(ge(F.join("")),O=h,D):(F.push(U),B=U,D+1)}function xt(){return U==="."||/[eE]/.test(U)?(F.push(U),O=A,B=U,D+1):U==="x"&&F.length===1&&F[0]==="0"?(O=g,F.push(U),B=U,D+1):/[^\d]/.test(U)?(ge(F.join("")),O=h,D):(F.push(U),B=U,D+1)}function Vt(){return U==="f"&&(F.push(U),B=U,D+=1),/[eE]/.test(U)||(U==="-"||U==="+")&&/[eE]/.test(B)?(F.push(U),B=U,D+1):/[^\d]/.test(U)?(ge(F.join("")),O=h,D):(F.push(U),B=U,D+1)}function Ht(){if(/[^\d\w_]/.test(U)){var Me=F.join("");return te[Me]?O=_:he[Me]?O=k:O=T,ge(F.join("")),O=h,D}return F.push(U),B=U,D+1}}},3508:function(n,a,o){var s=o(6852);s=s.slice().filter(function(l){return!/^(gl\_|texture)/.test(l)}),n.exports=s.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},6852:function(n){n.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},7932:function(n,a,o){var s=o(620);n.exports=s.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},620:function(n){n.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},7827:function(n){n.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},4905:function(n,a,o){var s=o(5874);n.exports=l;function l(u,f){var c=s(f),h=[];return h=h.concat(c(u)),h=h.concat(c(null)),h}},3236:function(n){n.exports=function(a){typeof a=="string"&&(a=[a]);for(var o=[].slice.call(arguments,1),s=[],l=0;l<a.length-1;l++)s.push(a[l],o[l]||"");return s.push(a[l]),s.join("")}},7520:function(n,a,o){"use strict";var s=o(9507);function l(){var u=!1;try{var f=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("test",null,f),window.removeEventListener("test",null,f)}catch(c){u=!1}return u}n.exports=s&&l()},3778:function(n,a){a.read=function(o,s,l,u,f){var c,h,v=f*8-u-1,d=(1<<v)-1,x=d>>1,b=-7,p=l?f-1:0,w=l?-1:1,A=o[s+p];for(p+=w,c=A&(1<<-b)-1,A>>=-b,b+=v;b>0;c=c*256+o[s+p],p+=w,b-=8);for(h=c&(1<<-b)-1,c>>=-b,b+=u;b>0;h=h*256+o[s+p],p+=w,b-=8);if(c===0)c=1-x;else{if(c===d)return h?NaN:(A?-1:1)*(1/0);h=h+Math.pow(2,u),c=c-x}return(A?-1:1)*h*Math.pow(2,c-u)},a.write=function(o,s,l,u,f,c){var h,v,d,x=c*8-f-1,b=(1<<x)-1,p=b>>1,w=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=u?0:c-1,T=u?1:-1,k=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(v=isNaN(s)?1:0,h=b):(h=Math.floor(Math.log(s)/Math.LN2),s*(d=Math.pow(2,-h))<1&&(h--,d*=2),h+p>=1?s+=w/d:s+=w*Math.pow(2,1-p),s*d>=2&&(h++,d/=2),h+p>=b?(v=0,h=b):h+p>=1?(v=(s*d-1)*Math.pow(2,f),h=h+p):(v=s*Math.pow(2,p-1)*Math.pow(2,f),h=0));f>=8;o[l+A]=v&255,A+=T,v/=256,f-=8);for(h=h<<f|v,x+=f;x>0;o[l+A]=h&255,A+=T,h/=256,x-=8);o[l+A-T]|=k*128}},8954:function(n,a,o){"use strict";n.exports=p;var s=o(3250),l=o(6803).Fw;function u(w,A,T){this.vertices=w,this.adjacent=A,this.boundary=T,this.lastVisited=-1}u.prototype.flip=function(){var w=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=w;var A=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=A};function f(w,A,T){this.vertices=w,this.cell=A,this.index=T}function c(w,A){return l(w.vertices,A.vertices)}function h(w){return function(){var A=this.tuple;return w.apply(this,A)}}function v(w){var A=s[w+1];return A||(A=s),h(A)}var d=[];function x(w,A,T){this.dimension=w,this.vertices=A,this.simplices=T,this.interior=T.filter(function(E){return!E.boundary}),this.tuple=new Array(w+1);for(var k=0;k<=w;++k)this.tuple[k]=this.vertices[k];var _=d[w];_||(_=d[w]=v(w)),this.orient=_}var b=x.prototype;b.handleBoundaryDegeneracy=function(w,A){var T=this.dimension,k=this.vertices.length-1,_=this.tuple,E=this.vertices,S=[w];for(w.lastVisited=-k;S.length>0;){w=S.pop();for(var g=w.adjacent,C=0;C<=T;++C){var M=g[C];if(!(!M.boundary||M.lastVisited<=-k)){for(var P=M.vertices,D=0;D<=T;++D){var q=P[D];q<0?_[D]=A:_[D]=E[q]}var O=this.orient();if(O>0)return M;M.lastVisited=-k,O===0&&S.push(M)}}}return null},b.walk=function(w,A){var T=this.vertices.length-1,k=this.dimension,_=this.vertices,E=this.tuple,S=A?this.interior.length*Math.random()|0:this.interior.length-1,g=this.interior[S];e:for(;!g.boundary;){for(var C=g.vertices,M=g.adjacent,P=0;P<=k;++P)E[P]=_[C[P]];g.lastVisited=T;for(var P=0;P<=k;++P){var D=M[P];if(!(D.lastVisited>=T)){var q=E[P];E[P]=w;var O=this.orient();if(E[P]=q,O<0){g=D;continue e}else D.boundary?D.lastVisited=-T:D.lastVisited=T}}return}return g},b.addPeaks=function(w,A){var T=this.vertices.length-1,k=this.dimension,_=this.vertices,E=this.tuple,S=this.interior,g=this.simplices,C=[A];A.lastVisited=T,A.vertices[A.vertices.indexOf(-1)]=T,A.boundary=!1,S.push(A);for(var M=[];C.length>0;){var A=C.pop(),P=A.vertices,D=A.adjacent,q=P.indexOf(T);if(!(q<0)){for(var O=0;O<=k;++O)if(O!==q){var U=D[O];if(!(!U.boundary||U.lastVisited>=T)){var B=U.vertices;if(U.lastVisited!==-T){for(var F=0,N=0;N<=k;++N)B[N]<0?(F=N,E[N]=w):E[N]=_[B[N]];var X=this.orient();if(X>0){B[F]=T,U.boundary=!1,S.push(U),C.push(U),U.lastVisited=T;continue}else U.lastVisited=-T}var K=U.adjacent,ne=P.slice(),fe=D.slice(),ue=new u(ne,fe,!0);g.push(ue);var ee=K.indexOf(A);if(!(ee<0)){K[ee]=ue,fe[q]=U,ne[O]=-1,fe[O]=A,D[O]=ue,ue.flip();for(var N=0;N<=k;++N){var Z=ne[N];if(!(Z<0||Z===T)){for(var oe=new Array(k-1),ce=0,le=0;le<=k;++le){var me=ne[le];me<0||le===N||(oe[ce++]=me)}M.push(new f(oe,ue,N))}}}}}}}M.sort(c);for(var O=0;O+1<M.length;O+=2){var he=M[O],te=M[O+1],ge=he.index,ae=te.index;ge<0||ae<0||(he.cell.adjacent[he.index]=te.cell,te.cell.adjacent[te.index]=he.cell)}},b.insert=function(w,A){var T=this.vertices;T.push(w);var k=this.walk(w,A);if(k){for(var _=this.dimension,E=this.tuple,S=0;S<=_;++S){var g=k.vertices[S];g<0?E[S]=w:E[S]=T[g]}var C=this.orient(E);C<0||C===0&&(k=this.handleBoundaryDegeneracy(k,w),!k)||this.addPeaks(w,k)}},b.boundary=function(){for(var w=this.dimension,A=[],T=this.simplices,k=T.length,_=0;_<k;++_){var E=T[_];if(E.boundary){for(var S=new Array(w),g=E.vertices,C=0,M=0,P=0;P<=w;++P)g[P]>=0?S[C++]=g[P]:M=P&1;if(M===(w&1)){var D=S[0];S[0]=S[1],S[1]=D}A.push(S)}}return A};function p(w,A){var T=w.length;if(T===0)throw new Error("Must have at least d+1 points");var k=w[0].length;if(T<=k)throw new Error("Must input at least d+1 points");var _=w.slice(0,k+1),E=s.apply(void 0,_);if(E===0)throw new Error("Input not in general position");for(var S=new Array(k+1),g=0;g<=k;++g)S[g]=g;E<0&&(S[0]=1,S[1]=0);for(var C=new u(S,new Array(k+1),!1),M=C.adjacent,P=new Array(k+2),g=0;g<=k;++g){for(var D=S.slice(),q=0;q<=k;++q)q===g&&(D[q]=-1);var O=D[0];D[0]=D[1],D[1]=O;var U=new u(D,new Array(k+1),!0);M[g]=U,P[g]=U}P[k+1]=C;for(var g=0;g<=k;++g)for(var D=M[g].vertices,B=M[g].adjacent,q=0;q<=k;++q){var F=D[q];if(F<0){B[q]=C;continue}for(var N=0;N<=k;++N)M[N].vertices.indexOf(F)<0&&(B[q]=M[N])}for(var X=new x(k,_,P),K=!!A,g=k+1;g<T;++g)X.insert(w[g],K);return X.boundary()}},3352:function(n,a,o){"use strict";var s=o(2478),l=0,u=1,f=2;n.exports=C;function c(M,P,D,q,O){this.mid=M,this.left=P,this.right=D,this.leftPoints=q,this.rightPoints=O,this.count=(P?P.count:0)+(D?D.count:0)+q.length}var h=c.prototype;function v(M,P){M.mid=P.mid,M.left=P.left,M.right=P.right,M.leftPoints=P.leftPoints,M.rightPoints=P.rightPoints,M.count=P.count}function d(M,P){var D=E(P);M.mid=D.mid,M.left=D.left,M.right=D.right,M.leftPoints=D.leftPoints,M.rightPoints=D.rightPoints,M.count=D.count}function x(M,P){var D=M.intervals([]);D.push(P),d(M,D)}function b(M,P){var D=M.intervals([]),q=D.indexOf(P);return q<0?l:(D.splice(q,1),d(M,D),u)}h.intervals=function(M){return M.push.apply(M,this.leftPoints),this.left&&this.left.intervals(M),this.right&&this.right.intervals(M),M},h.insert=function(M){var P=this.count-this.leftPoints.length;if(this.count+=1,M[1]<this.mid)this.left?4*(this.left.count+1)>3*(P+1)?x(this,M):this.left.insert(M):this.left=E([M]);else if(M[0]>this.mid)this.right?4*(this.right.count+1)>3*(P+1)?x(this,M):this.right.insert(M):this.right=E([M]);else{var D=s.ge(this.leftPoints,M,k),q=s.ge(this.rightPoints,M,_);this.leftPoints.splice(D,0,M),this.rightPoints.splice(q,0,M)}},h.remove=function(M){var P=this.count-this.leftPoints;if(M[1]<this.mid){if(!this.left)return l;var D=this.right?this.right.count:0;if(4*D>3*(P-1))return b(this,M);var q=this.left.remove(M);return q===f?(this.left=null,this.count-=1,u):(q===u&&(this.count-=1),q)}else if(M[0]>this.mid){if(!this.right)return l;var O=this.left?this.left.count:0;if(4*O>3*(P-1))return b(this,M);var q=this.right.remove(M);return q===f?(this.right=null,this.count-=1,u):(q===u&&(this.count-=1),q)}else{if(this.count===1)return this.leftPoints[0]===M?f:l;if(this.leftPoints.length===1&&this.leftPoints[0]===M){if(this.left&&this.right){for(var U=this,B=this.left;B.right;)U=B,B=B.right;if(U===this)B.right=this.right;else{var F=this.left,q=this.right;U.count-=B.count,U.right=B.left,B.left=F,B.right=q}v(this,B),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?v(this,this.left):v(this,this.right);return u}for(var F=s.ge(this.leftPoints,M,k);F<this.leftPoints.length&&this.leftPoints[F][0]===M[0];++F)if(this.leftPoints[F]===M){this.count-=1,this.leftPoints.splice(F,1);for(var q=s.ge(this.rightPoints,M,_);q<this.rightPoints.length&&this.rightPoints[q][1]===M[1];++q)if(this.rightPoints[q]===M)return this.rightPoints.splice(q,1),u}return l}};function p(M,P,D){for(var q=0;q<M.length&&M[q][0]<=P;++q){var O=D(M[q]);if(O)return O}}function w(M,P,D){for(var q=M.length-1;q>=0&&M[q][1]>=P;--q){var O=D(M[q]);if(O)return O}}function A(M,P){for(var D=0;D<M.length;++D){var q=P(M[D]);if(q)return q}}h.queryPoint=function(M,P){if(M<this.mid){if(this.left){var D=this.left.queryPoint(M,P);if(D)return D}return p(this.leftPoints,M,P)}else if(M>this.mid){if(this.right){var D=this.right.queryPoint(M,P);if(D)return D}return w(this.rightPoints,M,P)}else return A(this.leftPoints,P)},h.queryInterval=function(M,P,D){if(M<this.mid&&this.left){var q=this.left.queryInterval(M,P,D);if(q)return q}if(P>this.mid&&this.right){var q=this.right.queryInterval(M,P,D);if(q)return q}return P<this.mid?p(this.leftPoints,P,D):M>this.mid?w(this.rightPoints,M,D):A(this.leftPoints,D)};function T(M,P){return M-P}function k(M,P){var D=M[0]-P[0];return D||M[1]-P[1]}function _(M,P){var D=M[1]-P[1];return D||M[0]-P[0]}function E(M){if(M.length===0)return null;for(var P=[],D=0;D<M.length;++D)P.push(M[D][0],M[D][1]);P.sort(T);for(var q=P[P.length>>1],O=[],U=[],B=[],D=0;D<M.length;++D){var F=M[D];F[1]<q?O.push(F):q<F[0]?U.push(F):B.push(F)}var N=B,X=B.slice();return N.sort(k),X.sort(_),new c(q,E(O),E(U),N,X)}function S(M){this.root=M}var g=S.prototype;g.insert=function(M){this.root?this.root.insert(M):this.root=new c(M[0],null,null,[M],[M])},g.remove=function(M){if(this.root){var P=this.root.remove(M);return P===f&&(this.root=null),P!==l}return!1},g.queryPoint=function(M,P){if(this.root)return this.root.queryPoint(M,P)},g.queryInterval=function(M,P,D){if(M<=P&&this.root)return this.root.queryInterval(M,P,D)},Object.defineProperty(g,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(g,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function C(M){return!M||M.length===0?new S(null):new S(E(M))}},7762:function(n){"use strict";function a(o){for(var s=new Array(o),l=0;l<o;++l)s[l]=l;return s}n.exports=a},9507:function(n){n.exports=!0},7163:function(n){n.exports=function(s){return s!=null&&(a(s)||o(s)||!!s._isBuffer)};function a(s){return!!s.constructor&&typeof s.constructor.isBuffer=="function"&&s.constructor.isBuffer(s)}function o(s){return typeof s.readFloatLE=="function"&&typeof s.slice=="function"&&a(s.slice(0,0))}},5219:function(n){"use strict";n.exports=function(a){for(var o=a.length,s,l=0;l<o;l++)if(s=a.charCodeAt(l),(s<9||s>13)&&s!==32&&s!==133&&s!==160&&s!==5760&&s!==6158&&(s<8192||s>8205)&&s!==8232&&s!==8233&&s!==8239&&s!==8287&&s!==8288&&s!==12288&&s!==65279)return!1;return!0}},395:function(n){function a(o,s,l){return o*(1-l)+s*l}n.exports=a},2652:function(n,a,o){var s=o(4335),l=o(6864),u=o(1903),f=o(9921),c=o(7608),h=o(5665),v={length:o(1387),normalize:o(3536),dot:o(244),cross:o(5911)},d=l(),x=l(),b=[0,0,0,0],p=[[0,0,0],[0,0,0],[0,0,0]],w=[0,0,0];n.exports=function(E,S,g,C,M,P){if(S||(S=[0,0,0]),g||(g=[0,0,0]),C||(C=[0,0,0]),M||(M=[0,0,0,1]),P||(P=[0,0,0,1]),!s(d,E)||(u(x,d),x[3]=0,x[7]=0,x[11]=0,x[15]=1,Math.abs(f(x)<1e-8)))return!1;var D=d[3],q=d[7],O=d[11],U=d[12],B=d[13],F=d[14],N=d[15];if(D!==0||q!==0||O!==0){b[0]=D,b[1]=q,b[2]=O,b[3]=N;var X=c(x,x);if(!X)return!1;h(x,x),A(M,b,x)}else M[0]=M[1]=M[2]=0,M[3]=1;if(S[0]=U,S[1]=B,S[2]=F,T(p,d),g[0]=v.length(p[0]),v.normalize(p[0],p[0]),C[0]=v.dot(p[0],p[1]),k(p[1],p[1],p[0],1,-C[0]),g[1]=v.length(p[1]),v.normalize(p[1],p[1]),C[0]/=g[1],C[1]=v.dot(p[0],p[2]),k(p[2],p[2],p[0],1,-C[1]),C[2]=v.dot(p[1],p[2]),k(p[2],p[2],p[1],1,-C[2]),g[2]=v.length(p[2]),v.normalize(p[2],p[2]),C[1]/=g[2],C[2]/=g[2],v.cross(w,p[1],p[2]),v.dot(p[0],w)<0)for(var K=0;K<3;K++)g[K]*=-1,p[K][0]*=-1,p[K][1]*=-1,p[K][2]*=-1;return P[0]=.5*Math.sqrt(Math.max(1+p[0][0]-p[1][1]-p[2][2],0)),P[1]=.5*Math.sqrt(Math.max(1-p[0][0]+p[1][1]-p[2][2],0)),P[2]=.5*Math.sqrt(Math.max(1-p[0][0]-p[1][1]+p[2][2],0)),P[3]=.5*Math.sqrt(Math.max(1+p[0][0]+p[1][1]+p[2][2],0)),p[2][1]>p[1][2]&&(P[0]=-P[0]),p[0][2]>p[2][0]&&(P[1]=-P[1]),p[1][0]>p[0][1]&&(P[2]=-P[2]),!0};function A(_,E,S){var g=E[0],C=E[1],M=E[2],P=E[3];return _[0]=S[0]*g+S[4]*C+S[8]*M+S[12]*P,_[1]=S[1]*g+S[5]*C+S[9]*M+S[13]*P,_[2]=S[2]*g+S[6]*C+S[10]*M+S[14]*P,_[3]=S[3]*g+S[7]*C+S[11]*M+S[15]*P,_}function T(_,E){_[0][0]=E[0],_[0][1]=E[1],_[0][2]=E[2],_[1][0]=E[4],_[1][1]=E[5],_[1][2]=E[6],_[2][0]=E[8],_[2][1]=E[9],_[2][2]=E[10]}function k(_,E,S,g,C){_[0]=E[0]*g+S[0]*C,_[1]=E[1]*g+S[1]*C,_[2]=E[2]*g+S[2]*C}},4335:function(n){n.exports=function(o,s){var l=s[15];if(l===0)return!1;for(var u=1/l,f=0;f<16;f++)o[f]=s[f]*u;return!0}},7442:function(n,a,o){var s=o(6658),l=o(7182),u=o(2652),f=o(9921),c=o(8648),h=b(),v=b(),d=b();n.exports=x;function x(A,T,k,_){if(f(T)===0||f(k)===0)return!1;var E=u(T,h.translate,h.scale,h.skew,h.perspective,h.quaternion),S=u(k,v.translate,v.scale,v.skew,v.perspective,v.quaternion);return!E||!S?!1:(s(d.translate,h.translate,v.translate,_),s(d.skew,h.skew,v.skew,_),s(d.scale,h.scale,v.scale,_),s(d.perspective,h.perspective,v.perspective,_),c(d.quaternion,h.quaternion,v.quaternion,_),l(A,d.translate,d.scale,d.skew,d.perspective,d.quaternion),!0)}function b(){return{translate:p(),scale:p(1),skew:p(),perspective:w(),quaternion:w()}}function p(A){return[A||0,A||0,A||0]}function w(){return[0,0,0,1]}},7182:function(n,a,o){var s={identity:o(7894),translate:o(7656),multiply:o(6760),create:o(6864),scale:o(2504),fromRotationTranslation:o(6743)},l=s.create(),u=s.create();n.exports=function(c,h,v,d,x,b){return s.identity(c),s.fromRotationTranslation(c,b,h),c[3]=x[0],c[7]=x[1],c[11]=x[2],c[15]=x[3],s.identity(u),d[2]!==0&&(u[9]=d[2],s.multiply(c,c,u)),d[1]!==0&&(u[9]=0,u[8]=d[1],s.multiply(c,c,u)),d[0]!==0&&(u[8]=0,u[4]=d[0],s.multiply(c,c,u)),s.scale(c,c,v),c}},4192:function(n,a,o){"use strict";var s=o(2478),l=o(7442),u=o(7608),f=o(5567),c=o(2408),h=o(7089),v=o(6582),d=o(7656),x=o(2504),b=o(3536),p=[0,0,0];n.exports=k;function w(_){this._components=_.slice(),this._time=[0],this.prevMatrix=_.slice(),this.nextMatrix=_.slice(),this.computedMatrix=_.slice(),this.computedInverse=_.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var A=w.prototype;A.recalcMatrix=function(_){var E=this._time,S=s.le(E,_),g=this.computedMatrix;if(!(S<0)){var C=this._components;if(S===E.length-1)for(var M=16*S,P=0;P<16;++P)g[P]=C[M++];else{for(var D=E[S+1]-E[S],M=16*S,q=this.prevMatrix,O=!0,P=0;P<16;++P)q[P]=C[M++];for(var U=this.nextMatrix,P=0;P<16;++P)U[P]=C[M++],O=O&&q[P]===U[P];if(D<1e-6||O)for(var P=0;P<16;++P)g[P]=q[P];else l(g,q,U,(_-E[S])/D)}var B=this.computedUp;B[0]=g[1],B[1]=g[5],B[2]=g[9],b(B,B);var F=this.computedInverse;u(F,g);var N=this.computedEye,X=F[15];N[0]=F[12]/X,N[1]=F[13]/X,N[2]=F[14]/X;for(var K=this.computedCenter,ne=Math.exp(this.computedRadius[0]),P=0;P<3;++P)K[P]=N[P]-g[2+4*P]*ne}},A.idle=function(_){if(!(_<this.lastT())){for(var E=this._components,S=E.length-16,g=0;g<16;++g)E.push(E[S++]);this._time.push(_)}},A.flush=function(_){var E=s.gt(this._time,_)-2;E<0||(this._time.splice(0,E),this._components.splice(0,16*E))},A.lastT=function(){return this._time[this._time.length-1]},A.lookAt=function(_,E,S,g){this.recalcMatrix(_),E=E||this.computedEye,S=S||p,g=g||this.computedUp,this.setMatrix(_,v(this.computedMatrix,E,S,g));for(var C=0,M=0;M<3;++M)C+=Math.pow(S[M]-E[M],2);C=Math.log(Math.sqrt(C)),this.computedRadius[0]=C},A.rotate=function(_,E,S,g){this.recalcMatrix(_);var C=this.computedInverse;E&&c(C,C,E),S&&f(C,C,S),g&&h(C,C,g),this.setMatrix(_,u(this.computedMatrix,C))};var T=[0,0,0];A.pan=function(_,E,S,g){T[0]=-(E||0),T[1]=-(S||0),T[2]=-(g||0),this.recalcMatrix(_);var C=this.computedInverse;d(C,C,T),this.setMatrix(_,u(C,C))},A.translate=function(_,E,S,g){T[0]=E||0,T[1]=S||0,T[2]=g||0,this.recalcMatrix(_);var C=this.computedMatrix;d(C,C,T),this.setMatrix(_,C)},A.setMatrix=function(_,E){if(!(_<this.lastT())){this._time.push(_);for(var S=0;S<16;++S)this._components.push(E[S])}},A.setDistance=function(_,E){this.computedRadius[0]=E},A.setDistanceLimits=function(_,E){var S=this._limits;S[0]=_,S[1]=E},A.getDistanceLimits=function(_){var E=this._limits;return _?(_[0]=E[0],_[1]=E[1],_):E};function k(_){_=_||{};var E=_.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new w(E)}},3090:function(n,a,o){"use strict";n.exports=l;var s=o(3250)[3];function l(u){var f=u.length;if(f<3){for(var w=new Array(f),c=0;c<f;++c)w[c]=c;return f===2&&u[0][0]===u[1][0]&&u[0][1]===u[1][1]?[0]:w}for(var h=new Array(f),c=0;c<f;++c)h[c]=c;h.sort(function(_,E){var S=u[_][0]-u[E][0];return S||u[_][1]-u[E][1]});for(var v=[h[0],h[1]],d=[h[0],h[1]],c=2;c<f;++c){for(var x=h[c],b=u[x],p=v.length;p>1&&s(u[v[p-2]],u[v[p-1]],b)<=0;)p-=1,v.pop();for(v.push(x),p=d.length;p>1&&s(u[d[p-2]],u[d[p-1]],b)>=0;)p-=1,d.pop();d.push(x)}for(var w=new Array(d.length+v.length-2),A=0,c=0,T=v.length;c<T;++c)w[A++]=v[c];for(var k=d.length-2;k>0;--k)w[A++]=d[k];return w}},351:function(n,a,o){"use strict";n.exports=l;var s=o(4687);function l(u,f){f||(f=u,u=window);var c=0,h=0,v=0,d={shift:!1,alt:!1,control:!1,meta:!1},x=!1;function b(M){var P=!1;return"altKey"in M&&(P=P||M.altKey!==d.alt,d.alt=!!M.altKey),"shiftKey"in M&&(P=P||M.shiftKey!==d.shift,d.shift=!!M.shiftKey),"ctrlKey"in M&&(P=P||M.ctrlKey!==d.control,d.control=!!M.ctrlKey),"metaKey"in M&&(P=P||M.metaKey!==d.meta,d.meta=!!M.metaKey),P}function p(M,P){var D=s.x(P),q=s.y(P);"buttons"in P&&(M=P.buttons|0),(M!==c||D!==h||q!==v||b(P))&&(c=M|0,h=D||0,v=q||0,f&&f(c,h,v,d))}function w(M){p(0,M)}function A(){(c||h||v||d.shift||d.alt||d.meta||d.control)&&(h=v=0,c=0,d.shift=d.alt=d.control=d.meta=!1,f&&f(0,0,0,d))}function T(M){b(M)&&f&&f(c,h,v,d)}function k(M){s.buttons(M)===0?p(0,M):p(c,M)}function _(M){p(c|s.buttons(M),M)}function E(M){p(c&~s.buttons(M),M)}function S(){x||(x=!0,u.addEventListener("mousemove",k),u.addEventListener("mousedown",_),u.addEventListener("mouseup",E),u.addEventListener("mouseleave",w),u.addEventListener("mouseenter",w),u.addEventListener("mouseout",w),u.addEventListener("mouseover",w),u.addEventListener("blur",A),u.addEventListener("keyup",T),u.addEventListener("keydown",T),u.addEventListener("keypress",T),u!==window&&(window.addEventListener("blur",A),window.addEventListener("keyup",T),window.addEventListener("keydown",T),window.addEventListener("keypress",T)))}function g(){x&&(x=!1,u.removeEventListener("mousemove",k),u.removeEventListener("mousedown",_),u.removeEventListener("mouseup",E),u.removeEventListener("mouseleave",w),u.removeEventListener("mouseenter",w),u.removeEventListener("mouseout",w),u.removeEventListener("mouseover",w),u.removeEventListener("blur",A),u.removeEventListener("keyup",T),u.removeEventListener("keydown",T),u.removeEventListener("keypress",T),u!==window&&(window.removeEventListener("blur",A),window.removeEventListener("keyup",T),window.removeEventListener("keydown",T),window.removeEventListener("keypress",T)))}S();var C={element:u};return Object.defineProperties(C,{enabled:{get:function(){return x},set:function(M){M?S():g()},enumerable:!0},buttons:{get:function(){return c},enumerable:!0},x:{get:function(){return h},enumerable:!0},y:{get:function(){return v},enumerable:!0},mods:{get:function(){return d},enumerable:!0}}),C}},24:function(n){var a={left:0,top:0};n.exports=o;function o(l,u,f){u=u||l.currentTarget||l.srcElement,Array.isArray(f)||(f=[0,0]);var c=l.clientX||0,h=l.clientY||0,v=s(u);return f[0]=c-v.left,f[1]=h-v.top,f}function s(l){return l===window||l===document||l===document.body?a:l.getBoundingClientRect()}},4687:function(n,a){"use strict";function o(f){if(typeof f=="object"){if("buttons"in f)return f.buttons;if("which"in f){var c=f.which;if(c===2)return 4;if(c===3)return 2;if(c>0)return 1<<c-1}else if("button"in f){var c=f.button;if(c===1)return 4;if(c===2)return 2;if(c>=0)return 1<<c}}return 0}a.buttons=o;function s(f){return f.target||f.srcElement||window}a.element=s;function l(f){if(typeof f=="object"){if("offsetX"in f)return f.offsetX;var c=s(f),h=c.getBoundingClientRect();return f.clientX-h.left}return 0}a.x=l;function u(f){if(typeof f=="object"){if("offsetY"in f)return f.offsetY;var c=s(f),h=c.getBoundingClientRect();return f.clientY-h.top}return 0}a.y=u},8512:function(n,a,o){"use strict";var s=o(665);n.exports=l;function l(u,f,c){typeof u=="function"&&(c=!!f,f=u,u=window);var h=s("ex",u),v=function(d){c&&d.preventDefault();var x=d.deltaX||0,b=d.deltaY||0,p=d.deltaZ||0,w=d.deltaMode,A=1;switch(w){case 1:A=h;break;case 2:A=window.innerHeight;break}if(x*=A,b*=A,p*=A,x||b||p)return f(x,b,p,d)};return u.addEventListener("wheel",v),v}},2640:function(n,a,o){"use strict";var s=o(1888);n.exports=f;var l={"false,0,1":function(h,v,d,x,b){return function(w,A,T,k){var _=w.shape[0]|0,E=w.shape[1]|0,S=w.data,g=w.offset|0,C=w.stride[0]|0,M=w.stride[1]|0,P=g,D,q=-C|0,O=0,U=-M|0,B=0,F=-C-M|0,N=0,X=C|0,K=M-C*_|0,ne=0,fe=0,ue=0,ee=2*_|0,Z=x(ee),oe=x(ee),ce=0,le=0,me=-1,he=-1,te=0,ge=-_|0,ae=_|0,_e=0,Ce=-_-1|0,qe=_-1|0,rt=0,Re=0,Ie=0;for(ne=0;ne<_;++ne)Z[ce++]=d(S[P],A,T,k),P+=X;if(P+=K,E>0){if(fe=1,Z[ce++]=d(S[P],A,T,k),P+=X,_>0)for(ne=1,D=S[P],le=Z[ce]=d(D,A,T,k),te=Z[ce+me],_e=Z[ce+ge],rt=Z[ce+Ce],(le!==te||le!==_e||le!==rt)&&(O=S[P+q],B=S[P+U],N=S[P+F],h(ne,fe,D,O,B,N,le,te,_e,rt,A,T,k),Re=oe[ce]=ue++),ce+=1,P+=X,ne=2;ne<_;++ne)D=S[P],le=Z[ce]=d(D,A,T,k),te=Z[ce+me],_e=Z[ce+ge],rt=Z[ce+Ce],(le!==te||le!==_e||le!==rt)&&(O=S[P+q],B=S[P+U],N=S[P+F],h(ne,fe,D,O,B,N,le,te,_e,rt,A,T,k),Re=oe[ce]=ue++,rt!==te&&v(oe[ce+me],Re,N,O,rt,te,A,T,k)),ce+=1,P+=X;for(P+=K,ce=0,Ie=me,me=he,he=Ie,Ie=ge,ge=ae,ae=Ie,Ie=Ce,Ce=qe,qe=Ie,fe=2;fe<E;++fe){if(Z[ce++]=d(S[P],A,T,k),P+=X,_>0)for(ne=1,D=S[P],le=Z[ce]=d(D,A,T,k),te=Z[ce+me],_e=Z[ce+ge],rt=Z[ce+Ce],(le!==te||le!==_e||le!==rt)&&(O=S[P+q],B=S[P+U],N=S[P+F],h(ne,fe,D,O,B,N,le,te,_e,rt,A,T,k),Re=oe[ce]=ue++,rt!==_e&&v(oe[ce+ge],Re,B,N,_e,rt,A,T,k)),ce+=1,P+=X,ne=2;ne<_;++ne)D=S[P],le=Z[ce]=d(D,A,T,k),te=Z[ce+me],_e=Z[ce+ge],rt=Z[ce+Ce],(le!==te||le!==_e||le!==rt)&&(O=S[P+q],B=S[P+U],N=S[P+F],h(ne,fe,D,O,B,N,le,te,_e,rt,A,T,k),Re=oe[ce]=ue++,rt!==_e&&v(oe[ce+ge],Re,B,N,_e,rt,A,T,k),rt!==te&&v(oe[ce+me],Re,N,O,rt,te,A,T,k)),ce+=1,P+=X;fe&1&&(ce=0),Ie=me,me=he,he=Ie,Ie=ge,ge=ae,ae=Ie,Ie=Ce,Ce=qe,qe=Ie,P+=K}}b(oe),b(Z)}},"false,1,0":function(h,v,d,x,b){return function(w,A,T,k){var _=w.shape[0]|0,E=w.shape[1]|0,S=w.data,g=w.offset|0,C=w.stride[0]|0,M=w.stride[1]|0,P=g,D,q=-C|0,O=0,U=-M|0,B=0,F=-C-M|0,N=0,X=M|0,K=C-M*E|0,ne=0,fe=0,ue=0,ee=2*E|0,Z=x(ee),oe=x(ee),ce=0,le=0,me=-1,he=-1,te=0,ge=-E|0,ae=E|0,_e=0,Ce=-E-1|0,qe=E-1|0,rt=0,Re=0,Ie=0;for(fe=0;fe<E;++fe)Z[ce++]=d(S[P],A,T,k),P+=X;if(P+=K,_>0){if(ne=1,Z[ce++]=d(S[P],A,T,k),P+=X,E>0)for(fe=1,D=S[P],le=Z[ce]=d(D,A,T,k),_e=Z[ce+ge],te=Z[ce+me],rt=Z[ce+Ce],(le!==_e||le!==te||le!==rt)&&(O=S[P+q],B=S[P+U],N=S[P+F],h(ne,fe,D,O,B,N,le,_e,te,rt,A,T,k),Re=oe[ce]=ue++),ce+=1,P+=X,fe=2;fe<E;++fe)D=S[P],le=Z[ce]=d(D,A,T,k),_e=Z[ce+ge],te=Z[ce+me],rt=Z[ce+Ce],(le!==_e||le!==te||le!==rt)&&(O=S[P+q],B=S[P+U],N=S[P+F],h(ne,fe,D,O,B,N,le,_e,te,rt,A,T,k),Re=oe[ce]=ue++,rt!==te&&v(oe[ce+me],Re,B,N,te,rt,A,T,k)),ce+=1,P+=X;for(P+=K,ce=0,Ie=ge,ge=ae,ae=Ie,Ie=me,me=he,he=Ie,Ie=Ce,Ce=qe,qe=Ie,ne=2;ne<_;++ne){if(Z[ce++]=d(S[P],A,T,k),P+=X,E>0)for(fe=1,D=S[P],le=Z[ce]=d(D,A,T,k),_e=Z[ce+ge],te=Z[ce+me],rt=Z[ce+Ce],(le!==_e||le!==te||le!==rt)&&(O=S[P+q],B=S[P+U],N=S[P+F],h(ne,fe,D,O,B,N,le,_e,te,rt,A,T,k),Re=oe[ce]=ue++,rt!==_e&&v(oe[ce+ge],Re,N,O,rt,_e,A,T,k)),ce+=1,P+=X,fe=2;fe<E;++fe)D=S[P],le=Z[ce]=d(D,A,T,k),_e=Z[ce+ge],te=Z[ce+me],rt=Z[ce+Ce],(le!==_e||le!==te||le!==rt)&&(O=S[P+q],B=S[P+U],N=S[P+F],h(ne,fe,D,O,B,N,le,_e,te,rt,A,T,k),Re=oe[ce]=ue++,rt!==te&&v(oe[ce+me],Re,B,N,te,rt,A,T,k),rt!==_e&&v(oe[ce+ge],Re,N,O,rt,_e,A,T,k)),ce+=1,P+=X;ne&1&&(ce=0),Ie=ge,ge=ae,ae=Ie,Ie=me,me=he,he=Ie,Ie=Ce,Ce=qe,qe=Ie,P+=K}}b(oe),b(Z)}}};function u(c,h,v,d,x,b){var p=[b,x].join(","),w=l[p];return w(c,h,v,s.mallocUint32,s.freeUint32)}function f(c){function h(A){throw new Error("ndarray-extract-contour: "+A)}typeof c!="object"&&h("Must specify arguments");var v=c.order;Array.isArray(v)||h("Must specify order");var d=c.arrayArguments||1;d<1&&h("Must have at least one array argument");var x=c.scalarArguments||0;x<0&&h("Scalar arg count must be > 0"),typeof c.vertex!="function"&&h("Must specify vertex creation function"),typeof c.cell!="function"&&h("Must specify cell creation function"),typeof c.phase!="function"&&h("Must specify phase function");for(var b=c.getters||[],p=new Array(d),w=0;w<d;++w)b.indexOf(w)>=0?p[w]=!0:p[w]=!1;return u(c.vertex,c.cell,c.phase,x,v,p)}},6199:function(n,a,o){"use strict";var s=o(1338),l={zero:function(k,_,E,S){var g=k[0],C=E[0];S|=0;var M=0,P=C;for(M=0;M<g;++M)_[S]=0,S+=P},fdTemplate1:function(k,_,E,S,g,C,M){var P=k[0],D=E[0],q=C[0],O=-1*D,U=D;S|=0,M|=0;var B=0,F=D,N=q;for(B=0;B<P;++B)g[M]=.5*(_[S+O]-_[S+U]),S+=F,M+=N},fdTemplate2:function(k,_,E,S,g,C,M,P,D,q){var O=k[0],U=k[1],B=E[0],F=E[1],N=C[0],X=C[1],K=D[0],ne=D[1],fe=-1*B,ue=B,ee=-1*F,Z=F;S|=0,M|=0,q|=0;var oe=0,ce=0,le=F,me=B-U*F,he=X,te=N-U*X,ge=ne,ae=K-U*ne;for(ce=0;ce<O;++ce){for(oe=0;oe<U;++oe)g[M]=.5*(_[S+fe]-_[S+ue]),P[q]=.5*(_[S+ee]-_[S+Z]),S+=le,M+=he,q+=ge;S+=me,M+=te,q+=ae}}},u={cdiff:function(k){var _={};return function(S,g,C){var M=S.dtype,P=S.order,D=g.dtype,q=g.order,O=C.dtype,U=C.order,B=[M,P.join(),D,q.join(),O,U.join()].join(),F=_[B];return F||(_[B]=F=k([M,P,D,q,O,U])),F(S.shape.slice(0),S.data,S.stride,S.offset|0,g.data,g.stride,g.offset|0,C.data,C.stride,C.offset|0)}},zero:function(k){var _={};return function(S){var g=S.dtype,C=S.order,M=[g,C.join()].join(),P=_[M];return P||(_[M]=P=k([g,C])),P(S.shape.slice(0),S.data,S.stride,S.offset|0)}},fdTemplate1:function(k){var _={};return function(S,g){var C=S.dtype,M=S.order,P=g.dtype,D=g.order,q=[C,M.join(),P,D.join()].join(),O=_[q];return O||(_[q]=O=k([C,M,P,D])),O(S.shape.slice(0),S.data,S.stride,S.offset|0,g.data,g.stride,g.offset|0)}},fdTemplate2:function(k){var _={};return function(S,g,C){var M=S.dtype,P=S.order,D=g.dtype,q=g.order,O=C.dtype,U=C.order,B=[M,P.join(),D,q.join(),O,U.join()].join(),F=_[B];return F||(_[B]=F=k([M,P,D,q,O,U])),F(S.shape.slice(0),S.data,S.stride,S.offset|0,g.data,g.stride,g.offset|0,C.data,C.stride,C.offset|0)}}};function f(k){var _=u[k.funcName];return _(c.bind(void 0,k))}function c(k){return l[k.funcName]}function h(k){return f({funcName:k.funcName})}var v={},d={},x={body:"",args:[],thisVars:[],localVars:[]},b=h({funcName:"cdiff"}),p=h({funcName:"zero"});function w(k){return k in v?v[k]:v[k]=h({funcName:"fdTemplate"+k})}function A(k,_,E,S){return function(g,C){var M=C.shape.slice();return M[0]>2&&M[1]>2&&S(C.pick(-1,-1).lo(1,1).hi(M[0]-2,M[1]-2),g.pick(-1,-1,0).lo(1,1).hi(M[0]-2,M[1]-2),g.pick(-1,-1,1).lo(1,1).hi(M[0]-2,M[1]-2)),M[1]>2&&(E(C.pick(0,-1).lo(1).hi(M[1]-2),g.pick(0,-1,1).lo(1).hi(M[1]-2)),_(g.pick(0,-1,0).lo(1).hi(M[1]-2))),M[1]>2&&(E(C.pick(M[0]-1,-1).lo(1).hi(M[1]-2),g.pick(M[0]-1,-1,1).lo(1).hi(M[1]-2)),_(g.pick(M[0]-1,-1,0).lo(1).hi(M[1]-2))),M[0]>2&&(E(C.pick(-1,0).lo(1).hi(M[0]-2),g.pick(-1,0,0).lo(1).hi(M[0]-2)),_(g.pick(-1,0,1).lo(1).hi(M[0]-2))),M[0]>2&&(E(C.pick(-1,M[1]-1).lo(1).hi(M[0]-2),g.pick(-1,M[1]-1,0).lo(1).hi(M[0]-2)),_(g.pick(-1,M[1]-1,1).lo(1).hi(M[0]-2))),g.set(0,0,0,0),g.set(0,0,1,0),g.set(M[0]-1,0,0,0),g.set(M[0]-1,0,1,0),g.set(0,M[1]-1,0,0),g.set(0,M[1]-1,1,0),g.set(M[0]-1,M[1]-1,0,0),g.set(M[0]-1,M[1]-1,1,0),g}}function T(k){var _=k.join(),M=d[_];if(M)return M;for(var E=k.length,S=[b,p],g=1;g<=E;++g)S.push(w(g));var C=A,M=C.apply(void 0,S);return d[_]=M,M}n.exports=function(_,E,S){if(Array.isArray(S)||(typeof S=="string"?S=s(E.dimension,S):S=s(E.dimension,"clamp")),E.size===0)return _;if(E.dimension===0)return _.set(0),_;var g=T(S);return g(_,E)}},4317:function(n){"use strict";function a(f,c){var h=Math.floor(c),v=c-h,d=0<=h&&h<f.shape[0],x=0<=h+1&&h+1<f.shape[0],b=d?+f.get(h):0,p=x?+f.get(h+1):0;return(1-v)*b+v*p}function o(f,c,h){var v=Math.floor(c),d=c-v,x=0<=v&&v<f.shape[0],b=0<=v+1&&v+1<f.shape[0],p=Math.floor(h),w=h-p,A=0<=p&&p<f.shape[1],T=0<=p+1&&p+1<f.shape[1],k=x&&A?f.get(v,p):0,_=x&&T?f.get(v,p+1):0,E=b&&A?f.get(v+1,p):0,S=b&&T?f.get(v+1,p+1):0;return(1-w)*((1-d)*k+d*E)+w*((1-d)*_+d*S)}function s(f,c,h,v){var d=Math.floor(c),x=c-d,b=0<=d&&d<f.shape[0],p=0<=d+1&&d+1<f.shape[0],w=Math.floor(h),A=h-w,T=0<=w&&w<f.shape[1],k=0<=w+1&&w+1<f.shape[1],_=Math.floor(v),E=v-_,S=0<=_&&_<f.shape[2],g=0<=_+1&&_+1<f.shape[2],C=b&&T&&S?f.get(d,w,_):0,M=b&&k&&S?f.get(d,w+1,_):0,P=p&&T&&S?f.get(d+1,w,_):0,D=p&&k&&S?f.get(d+1,w+1,_):0,q=b&&T&&g?f.get(d,w,_+1):0,O=b&&k&&g?f.get(d,w+1,_+1):0,U=p&&T&&g?f.get(d+1,w,_+1):0,B=p&&k&&g?f.get(d+1,w+1,_+1):0;return(1-E)*((1-A)*((1-x)*C+x*P)+A*((1-x)*M+x*D))+E*((1-A)*((1-x)*q+x*U)+A*((1-x)*O+x*B))}function l(f){var c=f.shape.length|0,h=new Array(c),v=new Array(c),d=new Array(c),x=new Array(c),b,p;for(b=0;b<c;++b)p=+arguments[b+1],h[b]=Math.floor(p),v[b]=p-h[b],d[b]=0<=h[b]&&h[b]<f.shape[b],x[b]=0<=h[b]+1&&h[b]+1<f.shape[b];var w=0,A,T,k;e:for(b=0;b<1<<c;++b){for(T=1,k=f.offset,A=0;A<c;++A)if(b&1<<A){if(!x[A])continue e;T*=v[A],k+=f.stride[A]*(h[A]+1)}else{if(!d[A])continue e;T*=1-v[A],k+=f.stride[A]*h[A]}w+=T*f.data[k]}return w}function u(f,c,h,v){switch(f.shape.length){case 0:return 0;case 1:return a(f,c);case 2:return o(f,c,h);case 3:return s(f,c,h,v);default:return l.apply(void 0,arguments)}}n.exports=u,n.exports.d1=a,n.exports.d2=o,n.exports.d3=s},5298:function(n,a){"use strict";var o={"float64,2,1,0":function(){return function(d,x,b,p,w){var A=d[0],T=d[1],k=d[2],_=b[0],E=b[1],S=b[2];p|=0;var g=0,C=0,M=0,P=S,D=E-k*S,q=_-T*E;for(M=0;M<A;++M){for(C=0;C<T;++C){for(g=0;g<k;++g)x[p]/=w,p+=P;p+=D}p+=q}}},"uint8,2,0,1,float64,2,1,0":function(){return function(d,x,b,p,w,A,T,k){var _=d[0],E=d[1],S=d[2],g=b[0],C=b[1],M=b[2],P=A[0],D=A[1],q=A[2];p|=0,T|=0;for(var O=p,U=T,B=d[0]|0;B>0;){B<64?(_=B,B=0):(_=64,B-=64);for(var F=d[1]|0;F>0;){F<64?(E=F,F=0):(E=64,F-=64),p=O+B*g+F*C,T=U+B*P+F*D;var N=0,X=0,K=0,ne=M,fe=g-S*M,ue=C-_*g,ee=q,Z=P-S*q,oe=D-_*P;for(K=0;K<E;++K){for(X=0;X<_;++X){for(N=0;N<S;++N)x[p]=w[T]*k,p+=ne,T+=ee;p+=fe,T+=Z}p+=ue,T+=oe}}}}},"float32,1,0,float32,1,0":function(){return function(d,x,b,p,w,A,T){var k=d[0],_=d[1],E=b[0],S=b[1],g=A[0],C=A[1];p|=0,T|=0;var M=0,P=0,D=S,q=E-_*S,O=C,U=g-_*C;for(P=0;P<k;++P){for(M=0;M<_;++M)x[p]=w[T],p+=D,T+=O;p+=q,T+=U}}},"float32,1,0,float32,0,1":function(){return function(d,x,b,p,w,A,T){var k=d[0],_=d[1],E=b[0],S=b[1],g=A[0],C=A[1];p|=0,T|=0;for(var M=p,P=T,D=d[1]|0;D>0;){D<64?(_=D,D=0):(_=64,D-=64);for(var q=d[0]|0;q>0;){q<64?(k=q,q=0):(k=64,q-=64),p=M+D*S+q*E,T=P+D*C+q*g;var O=0,U=0,B=S,F=E-_*S,N=C,X=g-_*C;for(U=0;U<k;++U){for(O=0;O<_;++O)x[p]=w[T],p+=B,T+=N;p+=F,T+=X}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(d,x,b,p,w,A,T){var k=d[0],_=d[1],E=d[2],S=b[0],g=b[1],C=b[2],M=A[0],P=A[1],D=A[2];p|=0,T|=0;for(var q=p,O=T,U=d[2]|0;U>0;){U<64?(E=U,U=0):(E=64,U-=64);for(var B=d[0]|0;B>0;){B<64?(k=B,B=0):(k=64,B-=64);for(var F=d[1]|0;F>0;){F<64?(_=F,F=0):(_=64,F-=64),p=q+U*C+B*S+F*g,T=O+U*D+B*M+F*P;var N=0,X=0,K=0,ne=C,fe=S-E*C,ue=g-k*S,ee=D,Z=M-E*D,oe=P-k*M;for(K=0;K<_;++K){for(X=0;X<k;++X){for(N=0;N<E;++N)x[p]=w[T],p+=ne,T+=ee;p+=fe,T+=Z}p+=ue,T+=oe}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(d,x,b,p,w,A,T){var k=d[0],_=d[1],E=d[2],S=b[0],g=b[1],C=b[2],M=A[0],P=A[1],D=A[2];p|=0,T|=0;var q=0,O=0,U=0,B=C,F=S-E*C,N=g-k*S,X=D,K=M-E*D,ne=P-k*M;for(U=0;U<_;++U){for(O=0;O<k;++O){for(q=0;q<E;++q)x[p]=w[T],p+=B,T+=X;p+=F,T+=K}p+=N,T+=ne}}}};function s(v,d){var x=d.join(","),b=o[x];return b()}var l=s,u={mul:function(v){var d={};return function(b,p,w){var A=b.dtype,T=b.order,k=p.dtype,_=p.order,E=w.dtype,S=w.order,g=[A,T.join(),k,_.join(),E,S.join()].join(),C=d[g];return C||(d[g]=C=v([A,T,k,_,E,S])),C(b.shape.slice(0),b.data,b.stride,b.offset|0,p.data,p.stride,p.offset|0,w.data,w.stride,w.offset|0)}},muls:function(v){var d={};return function(b,p,w){var A=b.dtype,T=b.order,k=p.dtype,_=p.order,E=[A,T.join(),k,_.join()].join(),S=d[E];return S||(d[E]=S=v([A,T,k,_])),S(b.shape.slice(0),b.data,b.stride,b.offset|0,p.data,p.stride,p.offset|0,w)}},mulseq:function(v){var d={};return function(b,p){var w=b.dtype,A=b.order,T=[w,A.join()].join(),k=d[T];return k||(d[T]=k=v([w,A])),k(b.shape.slice(0),b.data,b.stride,b.offset|0,p)}},div:function(v){var d={};return function(b,p,w){var A=b.dtype,T=b.order,k=p.dtype,_=p.order,E=w.dtype,S=w.order,g=[A,T.join(),k,_.join(),E,S.join()].join(),C=d[g];return C||(d[g]=C=v([A,T,k,_,E,S])),C(b.shape.slice(0),b.data,b.stride,b.offset|0,p.data,p.stride,p.offset|0,w.data,w.stride,w.offset|0)}},divs:function(v){var d={};return function(b,p,w){var A=b.dtype,T=b.order,k=p.dtype,_=p.order,E=[A,T.join(),k,_.join()].join(),S=d[E];return S||(d[E]=S=v([A,T,k,_])),S(b.shape.slice(0),b.data,b.stride,b.offset|0,p.data,p.stride,p.offset|0,w)}},divseq:function(v){var d={};return function(b,p){var w=b.dtype,A=b.order,T=[w,A.join()].join(),k=d[T];return k||(d[T]=k=v([w,A])),k(b.shape.slice(0),b.data,b.stride,b.offset|0,p)}},assign:function(v){var d={};return function(b,p){var w=b.dtype,A=b.order,T=p.dtype,k=p.order,_=[w,A.join(),T,k.join()].join(),E=d[_];return E||(d[_]=E=v([w,A,T,k])),E(b.shape.slice(0),b.data,b.stride,b.offset|0,p.data,p.stride,p.offset|0)}}};function f(v){var d=u[v.funcName];return d(l.bind(void 0,v))}function c(v){return f({funcName:v.funcName})}var h={mul:"*",div:"/"};(function(){for(var v in h)a[v]=c({funcName:v}),a[v+"s"]=c({funcName:v+"s"}),a[v+"seq"]=c({funcName:v+"seq"})})(),a.assign=c({funcName:"assign"})},9994:function(n,a,o){"use strict";var s=o(9618),l=o(8277);n.exports=function(f,c){for(var h=[],v=f,d=1;Array.isArray(v);)h.push(v.length),d*=v.length,v=v[0];return h.length===0?s():(c||(c=s(new Float64Array(d),h)),l(c,f),c)}},8277:function(n){"use strict";function a(){return function(c,h,v,d,x){var b=c[0],p=c[1],w=c[2],A=v[0],T=v[1],k=v[2],_=[0,0,0];d|=0;var E=0,S=0,g=0,C=k,M=T-w*k,P=A-p*T;for(g=0;g<b;++g){for(S=0;S<p;++S){for(E=0;E<w;++E){{var D=x,q;for(q=0;q<_.length-1;++q)D=D[_[q]];h[d]=D[_[_.length-1]]}d+=C,++_[2]}d+=M,_[2]-=w,++_[1]}d+=P,_[1]-=p,++_[0]}}}function o(){return a()}var s=o;function l(c){var h={};return function(d,x){var b=d.dtype,p=d.order,w=[b,p.join()].join(),A=h[w];return A||(h[w]=A=c([b,p])),A(d.shape.slice(0),d.data,d.stride,d.offset|0,x)}}function u(c){return l(s.bind(void 0,c))}function f(c){return u({funcName:c.funcName})}n.exports=f({funcName:"convert"})},7640:function(n,a,o){"use strict";var s=o(1888);function l(x){switch(x){case"uint32":return[s.mallocUint32,s.freeUint32];default:return null}}var u={"uint32,1,0":function(x,b){return function(w,A,T,k,_,E,S,g,C,M,P){var D,q,O,U=w*_+k,B,F=x(g),N,X,K,ne;for(D=w+1;D<=A;++D){for(q=D,U+=_,O=U,N=0,X=U,B=0;B<g;++B)F[N++]=T[X],X+=C;e:for(;q-- >w;){N=0,X=O-_;t:for(B=0;B<g;++B){if(K=T[X],ne=F[N],K<ne)break e;if(K>ne)break t;X+=M,N+=P}for(N=O,X=O-_,B=0;B<g;++B)T[N]=T[X],N+=C,X+=C;O-=_}for(N=O,X=0,B=0;B<g;++B)T[N]=F[X++],N+=C}b(F)}}};function f(x,b){var p=l(b),w=[b,x].join(","),A=u[w];return p?A(p[0],p[1]):A()}var c={"uint32,1,0":function(x,b,p){return function w(A,T,k,_,E,S,g,C,M,P,D){var q=(T-A+1)/6|0,O=A+q,U=T-q,B=A+T>>1,F=B-q,N=B+q,X=O,K=F,ne=B,fe=N,ue=U,ee=A+1,Z=T-1,oe=!0,ce,le,me,he,te,ge,ae,_e,Ce,qe=0,rt=0,Re=0,Ie,ot,lt,ht,xt,Vt,Ht,Me,Ke,We,et,vt,at,Xe,dt,_t,$t=C,Ut=b($t),fr=b($t);ot=E*X,lt=E*K,_t=_;e:for(Ie=0;Ie<C;++Ie){if(ae=ot+_t,_e=lt+_t,Re=k[ae]-k[_e],Re>0){le=X,X=K,K=le;break e}if(Re<0)break e;_t+=P}ot=E*fe,lt=E*ue,_t=_;e:for(Ie=0;Ie<C;++Ie){if(ae=ot+_t,_e=lt+_t,Re=k[ae]-k[_e],Re>0){le=fe,fe=ue,ue=le;break e}if(Re<0)break e;_t+=P}ot=E*X,lt=E*ne,_t=_;e:for(Ie=0;Ie<C;++Ie){if(ae=ot+_t,_e=lt+_t,Re=k[ae]-k[_e],Re>0){le=X,X=ne,ne=le;break e}if(Re<0)break e;_t+=P}ot=E*K,lt=E*ne,_t=_;e:for(Ie=0;Ie<C;++Ie){if(ae=ot+_t,_e=lt+_t,Re=k[ae]-k[_e],Re>0){le=K,K=ne,ne=le;break e}if(Re<0)break e;_t+=P}ot=E*X,lt=E*fe,_t=_;e:for(Ie=0;Ie<C;++Ie){if(ae=ot+_t,_e=lt+_t,Re=k[ae]-k[_e],Re>0){le=X,X=fe,fe=le;break e}if(Re<0)break e;_t+=P}ot=E*ne,lt=E*fe,_t=_;e:for(Ie=0;Ie<C;++Ie){if(ae=ot+_t,_e=lt+_t,Re=k[ae]-k[_e],Re>0){le=ne,ne=fe,fe=le;break e}if(Re<0)break e;_t+=P}ot=E*K,lt=E*ue,_t=_;e:for(Ie=0;Ie<C;++Ie){if(ae=ot+_t,_e=lt+_t,Re=k[ae]-k[_e],Re>0){le=K,K=ue,ue=le;break e}if(Re<0)break e;_t+=P}ot=E*K,lt=E*ne,_t=_;e:for(Ie=0;Ie<C;++Ie){if(ae=ot+_t,_e=lt+_t,Re=k[ae]-k[_e],Re>0){le=K,K=ne,ne=le;break e}if(Re<0)break e;_t+=P}ot=E*fe,lt=E*ue,_t=_;e:for(Ie=0;Ie<C;++Ie){if(ae=ot+_t,_e=lt+_t,Re=k[ae]-k[_e],Re>0){le=fe,fe=ue,ue=le;break e}if(Re<0)break e;_t+=P}for(ot=E*X,lt=E*K,ht=E*ne,xt=E*fe,Vt=E*ue,Ht=E*O,Me=E*B,Ke=E*U,dt=0,_t=_,Ie=0;Ie<C;++Ie)ae=ot+_t,_e=lt+_t,Ce=ht+_t,We=xt+_t,et=Vt+_t,vt=Ht+_t,at=Me+_t,Xe=Ke+_t,Ut[dt]=k[_e],fr[dt]=k[We],oe=oe&&Ut[dt]===fr[dt],me=k[ae],he=k[Ce],te=k[et],k[vt]=me,k[at]=he,k[Xe]=te,++dt,_t+=M;for(ot=E*F,lt=E*A,_t=_,Ie=0;Ie<C;++Ie)ae=ot+_t,_e=lt+_t,k[ae]=k[_e],_t+=M;for(ot=E*N,lt=E*T,_t=_,Ie=0;Ie<C;++Ie)ae=ot+_t,_e=lt+_t,k[ae]=k[_e],_t+=M;if(oe)for(ge=ee;ge<=Z;++ge){ae=_+ge*E,dt=0;e:for(Ie=0;Ie<C;++Ie){if(Re=k[ae]-Ut[dt],Re!==0)break e;dt+=D,ae+=P}if(Re!==0)if(Re<0){if(ge!==ee)for(ot=E*ge,lt=E*ee,_t=_,Ie=0;Ie<C;++Ie)ae=ot+_t,_e=lt+_t,ce=k[ae],k[ae]=k[_e],k[_e]=ce,_t+=M;++ee}else for(;;){ae=_+Z*E,dt=0;e:for(Ie=0;Ie<C;++Ie){if(Re=k[ae]-Ut[dt],Re!==0)break e;dt+=D,ae+=P}if(Re>0)Z--;else if(Re<0){for(ot=E*ge,lt=E*ee,ht=E*Z,_t=_,Ie=0;Ie<C;++Ie)ae=ot+_t,_e=lt+_t,Ce=ht+_t,ce=k[ae],k[ae]=k[_e],k[_e]=k[Ce],k[Ce]=ce,_t+=M;++ee,--Z;break}else{for(ot=E*ge,lt=E*Z,_t=_,Ie=0;Ie<C;++Ie)ae=ot+_t,_e=lt+_t,ce=k[ae],k[ae]=k[_e],k[_e]=ce,_t+=M;--Z;break}}}else for(ge=ee;ge<=Z;++ge){ae=_+ge*E,dt=0;e:for(Ie=0;Ie<C;++Ie){if(qe=k[ae]-Ut[dt],qe!==0)break e;dt+=D,ae+=P}if(qe<0){if(ge!==ee)for(ot=E*ge,lt=E*ee,_t=_,Ie=0;Ie<C;++Ie)ae=ot+_t,_e=lt+_t,ce=k[ae],k[ae]=k[_e],k[_e]=ce,_t+=M;++ee}else{ae=_+ge*E,dt=0;e:for(Ie=0;Ie<C;++Ie){if(rt=k[ae]-fr[dt],rt!==0)break e;dt+=D,ae+=P}if(rt>0)for(;;){ae=_+Z*E,dt=0;e:for(Ie=0;Ie<C;++Ie){if(Re=k[ae]-fr[dt],Re!==0)break e;dt+=D,ae+=P}if(Re>0){if(--Z<ge)break;continue}else{ae=_+Z*E,dt=0;e:for(Ie=0;Ie<C;++Ie){if(Re=k[ae]-Ut[dt],Re!==0)break e;dt+=D,ae+=P}if(Re<0){for(ot=E*ge,lt=E*ee,ht=E*Z,_t=_,Ie=0;Ie<C;++Ie)ae=ot+_t,_e=lt+_t,Ce=ht+_t,ce=k[ae],k[ae]=k[_e],k[_e]=k[Ce],k[Ce]=ce,_t+=M;++ee,--Z}else{for(ot=E*ge,lt=E*Z,_t=_,Ie=0;Ie<C;++Ie)ae=ot+_t,_e=lt+_t,ce=k[ae],k[ae]=k[_e],k[_e]=ce,_t+=M;--Z}break}}}}for(ot=E*A,lt=E*(ee-1),dt=0,_t=_,Ie=0;Ie<C;++Ie)ae=ot+_t,_e=lt+_t,k[ae]=k[_e],k[_e]=Ut[dt],++dt,_t+=M;for(ot=E*T,lt=E*(Z+1),dt=0,_t=_,Ie=0;Ie<C;++Ie)ae=ot+_t,_e=lt+_t,k[ae]=k[_e],k[_e]=fr[dt],++dt,_t+=M;if(ee-2-A<=32?x(A,ee-2,k,_,E,S,g,C,M,P,D):w(A,ee-2,k,_,E,S,g,C,M,P,D),T-(Z+2)<=32?x(Z+2,T,k,_,E,S,g,C,M,P,D):w(Z+2,T,k,_,E,S,g,C,M,P,D),oe){p(Ut),p(fr);return}if(ee<O&&Z>U){e:for(;;){for(ae=_+ee*E,dt=0,_t=_,Ie=0;Ie<C;++Ie){if(k[ae]!==Ut[dt])break e;++dt,ae+=M}++ee}e:for(;;){for(ae=_+Z*E,dt=0,_t=_,Ie=0;Ie<C;++Ie){if(k[ae]!==fr[dt])break e;++dt,ae+=M}--Z}for(ge=ee;ge<=Z;++ge){ae=_+ge*E,dt=0;e:for(Ie=0;Ie<C;++Ie){if(qe=k[ae]-Ut[dt],qe!==0)break e;dt+=D,ae+=P}if(qe===0){if(ge!==ee)for(ot=E*ge,lt=E*ee,_t=_,Ie=0;Ie<C;++Ie)ae=ot+_t,_e=lt+_t,ce=k[ae],k[ae]=k[_e],k[_e]=ce,_t+=M;++ee}else{ae=_+ge*E,dt=0;e:for(Ie=0;Ie<C;++Ie){if(rt=k[ae]-fr[dt],rt!==0)break e;dt+=D,ae+=P}if(rt===0)for(;;){ae=_+Z*E,dt=0;e:for(Ie=0;Ie<C;++Ie){if(Re=k[ae]-fr[dt],Re!==0)break e;dt+=D,ae+=P}if(Re===0){if(--Z<ge)break;continue}else{ae=_+Z*E,dt=0;e:for(Ie=0;Ie<C;++Ie){if(Re=k[ae]-Ut[dt],Re!==0)break e;dt+=D,ae+=P}if(Re<0){for(ot=E*ge,lt=E*ee,ht=E*Z,_t=_,Ie=0;Ie<C;++Ie)ae=ot+_t,_e=lt+_t,Ce=ht+_t,ce=k[ae],k[ae]=k[_e],k[_e]=k[Ce],k[Ce]=ce,_t+=M;++ee,--Z}else{for(ot=E*ge,lt=E*Z,_t=_,Ie=0;Ie<C;++Ie)ae=ot+_t,_e=lt+_t,ce=k[ae],k[ae]=k[_e],k[_e]=ce,_t+=M;--Z}break}}}}}p(Ut),p(fr),Z-ee<=32?x(ee,Z,k,_,E,S,g,C,M,P,D):w(ee,Z,k,_,E,S,g,C,M,P,D)}}};function h(x,b,p){var w=l(b),A=[b,x].join(","),T=c[A];return x.length>1&&w?T(p,w[0],w[1]):T(p)}var v={"uint32,1,0":function(x,b){return function(p){var w=p.data,A=p.offset|0,T=p.shape,k=p.stride,_=k[0]|0,E=T[0]|0,S=k[1]|0,g=T[1]|0,C=S,M=S,P=1;E<=32?x(0,E-1,w,A,_,S,E,g,C,M,P):b(0,E-1,w,A,_,S,E,g,C,M,P)}}};function d(x,b){var p=[b,x].join(","),w=v[p],A=f(x,b),T=h(x,b,A);return w(A,T)}n.exports=d},446:function(n,a,o){"use strict";var s=o(7640),l={};function u(f){var c=f.order,h=f.dtype,v=[c,h],d=v.join(":"),x=l[d];return x||(l[d]=x=s(c,h)),x(f),f}n.exports=u},9618:function(n,a,o){var s=o(7163),l=typeof Float64Array!="undefined";function u(b,p){return b[0]-p[0]}function f(){var b=this.stride,p=new Array(b.length),w;for(w=0;w<p.length;++w)p[w]=[Math.abs(b[w]),w];p.sort(u);var A=new Array(p.length);for(w=0;w<A.length;++w)A[w]=p[w][1];return A}var c={T:function(b){function p(A){this.data=A}var w=p.prototype;return w.dtype=b,w.index=function(){return-1},w.size=0,w.dimension=-1,w.shape=w.stride=w.order=[],w.lo=w.hi=w.transpose=w.step=function(){return new p(this.data)},w.get=w.set=function(){},w.pick=function(){return null},function(T){return new p(T)}},0:function(b,p){function w(T,k){this.data=T,this.offset=k}var A=w.prototype;return A.dtype=b,A.index=function(){return this.offset},A.dimension=0,A.size=1,A.shape=A.stride=A.order=[],A.lo=A.hi=A.transpose=A.step=function(){return new w(this.data,this.offset)},A.pick=function(){return p(this.data)},A.valueOf=A.get=function(){return b==="generic"?this.data.get(this.offset):this.data[this.offset]},A.set=function(k){return b==="generic"?this.data.set(this.offset,k):this.data[this.offset]=k},function(k,_,E,S){return new w(k,S)}},1:function(b,p,w){function A(k,_,E,S){this.data=k,this.shape=[_],this.stride=[E],this.offset=S|0}var T=A.prototype;return T.dtype=b,T.dimension=1,Object.defineProperty(T,"size",{get:function(){return this.shape[0]}}),T.order=[0],T.set=function(_,E){return b==="generic"?this.data.set(this.offset+this.stride[0]*_,E):this.data[this.offset+this.stride[0]*_]=E},T.get=function(_){return b==="generic"?this.data.get(this.offset+this.stride[0]*_):this.data[this.offset+this.stride[0]*_]},T.index=function(_){return this.offset+this.stride[0]*_},T.hi=function(_){return new A(this.data,typeof _!="number"||_<0?this.shape[0]:_|0,this.stride[0],this.offset)},T.lo=function(_){var E=this.offset,S=0,g=this.shape[0],C=this.stride[0];return typeof _=="number"&&_>=0&&(S=_|0,E+=C*S,g-=S),new A(this.data,g,C,E)},T.step=function(_){var E=this.shape[0],S=this.stride[0],g=this.offset,C=0,M=Math.ceil;return typeof _=="number"&&(C=_|0,C<0?(g+=S*(E-1),E=M(-E/C)):E=M(E/C),S*=C),new A(this.data,E,S,g)},T.transpose=function(_){_=_===void 0?0:_|0;var E=this.shape,S=this.stride;return new A(this.data,E[_],S[_],this.offset)},T.pick=function(_){var E=[],S=[],g=this.offset;typeof _=="number"&&_>=0?g=g+this.stride[0]*_|0:(E.push(this.shape[0]),S.push(this.stride[0]));var C=p[E.length+1];return C(this.data,E,S,g)},function(_,E,S,g){return new A(_,E[0],S[0],g)}},2:function(b,p,w){function A(k,_,E,S,g,C){this.data=k,this.shape=[_,E],this.stride=[S,g],this.offset=C|0}var T=A.prototype;return T.dtype=b,T.dimension=2,Object.defineProperty(T,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(T,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),T.set=function(_,E,S){return b==="generic"?this.data.set(this.offset+this.stride[0]*_+this.stride[1]*E,S):this.data[this.offset+this.stride[0]*_+this.stride[1]*E]=S},T.get=function(_,E){return b==="generic"?this.data.get(this.offset+this.stride[0]*_+this.stride[1]*E):this.data[this.offset+this.stride[0]*_+this.stride[1]*E]},T.index=function(_,E){return this.offset+this.stride[0]*_+this.stride[1]*E},T.hi=function(_,E){return new A(this.data,typeof _!="number"||_<0?this.shape[0]:_|0,typeof E!="number"||E<0?this.shape[1]:E|0,this.stride[0],this.stride[1],this.offset)},T.lo=function(_,E){var S=this.offset,g=0,C=this.shape[0],M=this.shape[1],P=this.stride[0],D=this.stride[1];return typeof _=="number"&&_>=0&&(g=_|0,S+=P*g,C-=g),typeof E=="number"&&E>=0&&(g=E|0,S+=D*g,M-=g),new A(this.data,C,M,P,D,S)},T.step=function(_,E){var S=this.shape[0],g=this.shape[1],C=this.stride[0],M=this.stride[1],P=this.offset,D=0,q=Math.ceil;return typeof _=="number"&&(D=_|0,D<0?(P+=C*(S-1),S=q(-S/D)):S=q(S/D),C*=D),typeof E=="number"&&(D=E|0,D<0?(P+=M*(g-1),g=q(-g/D)):g=q(g/D),M*=D),new A(this.data,S,g,C,M,P)},T.transpose=function(_,E){_=_===void 0?0:_|0,E=E===void 0?1:E|0;var S=this.shape,g=this.stride;return new A(this.data,S[_],S[E],g[_],g[E],this.offset)},T.pick=function(_,E){var S=[],g=[],C=this.offset;typeof _=="number"&&_>=0?C=C+this.stride[0]*_|0:(S.push(this.shape[0]),g.push(this.stride[0])),typeof E=="number"&&E>=0?C=C+this.stride[1]*E|0:(S.push(this.shape[1]),g.push(this.stride[1]));var M=p[S.length+1];return M(this.data,S,g,C)},function(_,E,S,g){return new A(_,E[0],E[1],S[0],S[1],g)}},3:function(b,p,w){function A(k,_,E,S,g,C,M,P){this.data=k,this.shape=[_,E,S],this.stride=[g,C,M],this.offset=P|0}var T=A.prototype;return T.dtype=b,T.dimension=3,Object.defineProperty(T,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(T,"order",{get:function(){var _=Math.abs(this.stride[0]),E=Math.abs(this.stride[1]),S=Math.abs(this.stride[2]);return _>E?E>S?[2,1,0]:_>S?[1,2,0]:[1,0,2]:_>S?[2,0,1]:S>E?[0,1,2]:[0,2,1]}}),T.set=function(_,E,S,g){return b==="generic"?this.data.set(this.offset+this.stride[0]*_+this.stride[1]*E+this.stride[2]*S,g):this.data[this.offset+this.stride[0]*_+this.stride[1]*E+this.stride[2]*S]=g},T.get=function(_,E,S){return b==="generic"?this.data.get(this.offset+this.stride[0]*_+this.stride[1]*E+this.stride[2]*S):this.data[this.offset+this.stride[0]*_+this.stride[1]*E+this.stride[2]*S]},T.index=function(_,E,S){return this.offset+this.stride[0]*_+this.stride[1]*E+this.stride[2]*S},T.hi=function(_,E,S){return new A(this.data,typeof _!="number"||_<0?this.shape[0]:_|0,typeof E!="number"||E<0?this.shape[1]:E|0,typeof S!="number"||S<0?this.shape[2]:S|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},T.lo=function(_,E,S){var g=this.offset,C=0,M=this.shape[0],P=this.shape[1],D=this.shape[2],q=this.stride[0],O=this.stride[1],U=this.stride[2];return typeof _=="number"&&_>=0&&(C=_|0,g+=q*C,M-=C),typeof E=="number"&&E>=0&&(C=E|0,g+=O*C,P-=C),typeof S=="number"&&S>=0&&(C=S|0,g+=U*C,D-=C),new A(this.data,M,P,D,q,O,U,g)},T.step=function(_,E,S){var g=this.shape[0],C=this.shape[1],M=this.shape[2],P=this.stride[0],D=this.stride[1],q=this.stride[2],O=this.offset,U=0,B=Math.ceil;return typeof _=="number"&&(U=_|0,U<0?(O+=P*(g-1),g=B(-g/U)):g=B(g/U),P*=U),typeof E=="number"&&(U=E|0,U<0?(O+=D*(C-1),C=B(-C/U)):C=B(C/U),D*=U),typeof S=="number"&&(U=S|0,U<0?(O+=q*(M-1),M=B(-M/U)):M=B(M/U),q*=U),new A(this.data,g,C,M,P,D,q,O)},T.transpose=function(_,E,S){_=_===void 0?0:_|0,E=E===void 0?1:E|0,S=S===void 0?2:S|0;var g=this.shape,C=this.stride;return new A(this.data,g[_],g[E],g[S],C[_],C[E],C[S],this.offset)},T.pick=function(_,E,S){var g=[],C=[],M=this.offset;typeof _=="number"&&_>=0?M=M+this.stride[0]*_|0:(g.push(this.shape[0]),C.push(this.stride[0])),typeof E=="number"&&E>=0?M=M+this.stride[1]*E|0:(g.push(this.shape[1]),C.push(this.stride[1])),typeof S=="number"&&S>=0?M=M+this.stride[2]*S|0:(g.push(this.shape[2]),C.push(this.stride[2]));var P=p[g.length+1];return P(this.data,g,C,M)},function(_,E,S,g){return new A(_,E[0],E[1],E[2],S[0],S[1],S[2],g)}},4:function(b,p,w){function A(k,_,E,S,g,C,M,P,D,q){this.data=k,this.shape=[_,E,S,g],this.stride=[C,M,P,D],this.offset=q|0}var T=A.prototype;return T.dtype=b,T.dimension=4,Object.defineProperty(T,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(T,"order",{get:w}),T.set=function(_,E,S,g,C){return b==="generic"?this.data.set(this.offset+this.stride[0]*_+this.stride[1]*E+this.stride[2]*S+this.stride[3]*g,C):this.data[this.offset+this.stride[0]*_+this.stride[1]*E+this.stride[2]*S+this.stride[3]*g]=C},T.get=function(_,E,S,g){return b==="generic"?this.data.get(this.offset+this.stride[0]*_+this.stride[1]*E+this.stride[2]*S+this.stride[3]*g):this.data[this.offset+this.stride[0]*_+this.stride[1]*E+this.stride[2]*S+this.stride[3]*g]},T.index=function(_,E,S,g){return this.offset+this.stride[0]*_+this.stride[1]*E+this.stride[2]*S+this.stride[3]*g},T.hi=function(_,E,S,g){return new A(this.data,typeof _!="number"||_<0?this.shape[0]:_|0,typeof E!="number"||E<0?this.shape[1]:E|0,typeof S!="number"||S<0?this.shape[2]:S|0,typeof g!="number"||g<0?this.shape[3]:g|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},T.lo=function(_,E,S,g){var C=this.offset,M=0,P=this.shape[0],D=this.shape[1],q=this.shape[2],O=this.shape[3],U=this.stride[0],B=this.stride[1],F=this.stride[2],N=this.stride[3];return typeof _=="number"&&_>=0&&(M=_|0,C+=U*M,P-=M),typeof E=="number"&&E>=0&&(M=E|0,C+=B*M,D-=M),typeof S=="number"&&S>=0&&(M=S|0,C+=F*M,q-=M),typeof g=="number"&&g>=0&&(M=g|0,C+=N*M,O-=M),new A(this.data,P,D,q,O,U,B,F,N,C)},T.step=function(_,E,S,g){var C=this.shape[0],M=this.shape[1],P=this.shape[2],D=this.shape[3],q=this.stride[0],O=this.stride[1],U=this.stride[2],B=this.stride[3],F=this.offset,N=0,X=Math.ceil;return typeof _=="number"&&(N=_|0,N<0?(F+=q*(C-1),C=X(-C/N)):C=X(C/N),q*=N),typeof E=="number"&&(N=E|0,N<0?(F+=O*(M-1),M=X(-M/N)):M=X(M/N),O*=N),typeof S=="number"&&(N=S|0,N<0?(F+=U*(P-1),P=X(-P/N)):P=X(P/N),U*=N),typeof g=="number"&&(N=g|0,N<0?(F+=B*(D-1),D=X(-D/N)):D=X(D/N),B*=N),new A(this.data,C,M,P,D,q,O,U,B,F)},T.transpose=function(_,E,S,g){_=_===void 0?0:_|0,E=E===void 0?1:E|0,S=S===void 0?2:S|0,g=g===void 0?3:g|0;var C=this.shape,M=this.stride;return new A(this.data,C[_],C[E],C[S],C[g],M[_],M[E],M[S],M[g],this.offset)},T.pick=function(_,E,S,g){var C=[],M=[],P=this.offset;typeof _=="number"&&_>=0?P=P+this.stride[0]*_|0:(C.push(this.shape[0]),M.push(this.stride[0])),typeof E=="number"&&E>=0?P=P+this.stride[1]*E|0:(C.push(this.shape[1]),M.push(this.stride[1])),typeof S=="number"&&S>=0?P=P+this.stride[2]*S|0:(C.push(this.shape[2]),M.push(this.stride[2])),typeof g=="number"&&g>=0?P=P+this.stride[3]*g|0:(C.push(this.shape[3]),M.push(this.stride[3]));var D=p[C.length+1];return D(this.data,C,M,P)},function(_,E,S,g){return new A(_,E[0],E[1],E[2],E[3],S[0],S[1],S[2],S[3],g)}},5:function(p,w,A){function T(_,E,S,g,C,M,P,D,q,O,U,B){this.data=_,this.shape=[E,S,g,C,M],this.stride=[P,D,q,O,U],this.offset=B|0}var k=T.prototype;return k.dtype=p,k.dimension=5,Object.defineProperty(k,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(k,"order",{get:A}),k.set=function(E,S,g,C,M,P){return p==="generic"?this.data.set(this.offset+this.stride[0]*E+this.stride[1]*S+this.stride[2]*g+this.stride[3]*C+this.stride[4]*M,P):this.data[this.offset+this.stride[0]*E+this.stride[1]*S+this.stride[2]*g+this.stride[3]*C+this.stride[4]*M]=P},k.get=function(E,S,g,C,M){return p==="generic"?this.data.get(this.offset+this.stride[0]*E+this.stride[1]*S+this.stride[2]*g+this.stride[3]*C+this.stride[4]*M):this.data[this.offset+this.stride[0]*E+this.stride[1]*S+this.stride[2]*g+this.stride[3]*C+this.stride[4]*M]},k.index=function(E,S,g,C,M){return this.offset+this.stride[0]*E+this.stride[1]*S+this.stride[2]*g+this.stride[3]*C+this.stride[4]*M},k.hi=function(E,S,g,C,M){return new T(this.data,typeof E!="number"||E<0?this.shape[0]:E|0,typeof S!="number"||S<0?this.shape[1]:S|0,typeof g!="number"||g<0?this.shape[2]:g|0,typeof C!="number"||C<0?this.shape[3]:C|0,typeof M!="number"||M<0?this.shape[4]:M|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},k.lo=function(E,S,g,C,M){var P=this.offset,D=0,q=this.shape[0],O=this.shape[1],U=this.shape[2],B=this.shape[3],F=this.shape[4],N=this.stride[0],X=this.stride[1],K=this.stride[2],ne=this.stride[3],fe=this.stride[4];return typeof E=="number"&&E>=0&&(D=E|0,P+=N*D,q-=D),typeof S=="number"&&S>=0&&(D=S|0,P+=X*D,O-=D),typeof g=="number"&&g>=0&&(D=g|0,P+=K*D,U-=D),typeof C=="number"&&C>=0&&(D=C|0,P+=ne*D,B-=D),typeof M=="number"&&M>=0&&(D=M|0,P+=fe*D,F-=D),new T(this.data,q,O,U,B,F,N,X,K,ne,fe,P)},k.step=function(E,S,g,C,M){var P=this.shape[0],D=this.shape[1],q=this.shape[2],O=this.shape[3],U=this.shape[4],B=this.stride[0],F=this.stride[1],N=this.stride[2],X=this.stride[3],K=this.stride[4],ne=this.offset,fe=0,ue=Math.ceil;return typeof E=="number"&&(fe=E|0,fe<0?(ne+=B*(P-1),P=ue(-P/fe)):P=ue(P/fe),B*=fe),typeof S=="number"&&(fe=S|0,fe<0?(ne+=F*(D-1),D=ue(-D/fe)):D=ue(D/fe),F*=fe),typeof g=="number"&&(fe=g|0,fe<0?(ne+=N*(q-1),q=ue(-q/fe)):q=ue(q/fe),N*=fe),typeof C=="number"&&(fe=C|0,fe<0?(ne+=X*(O-1),O=ue(-O/fe)):O=ue(O/fe),X*=fe),typeof M=="number"&&(fe=M|0,fe<0?(ne+=K*(U-1),U=ue(-U/fe)):U=ue(U/fe),K*=fe),new T(this.data,P,D,q,O,U,B,F,N,X,K,ne)},k.transpose=function(E,S,g,C,M){E=E===void 0?0:E|0,S=S===void 0?1:S|0,g=g===void 0?2:g|0,C=C===void 0?3:C|0,M=M===void 0?4:M|0;var P=this.shape,D=this.stride;return new T(this.data,P[E],P[S],P[g],P[C],P[M],D[E],D[S],D[g],D[C],D[M],this.offset)},k.pick=function(E,S,g,C,M){var P=[],D=[],q=this.offset;typeof E=="number"&&E>=0?q=q+this.stride[0]*E|0:(P.push(this.shape[0]),D.push(this.stride[0])),typeof S=="number"&&S>=0?q=q+this.stride[1]*S|0:(P.push(this.shape[1]),D.push(this.stride[1])),typeof g=="number"&&g>=0?q=q+this.stride[2]*g|0:(P.push(this.shape[2]),D.push(this.stride[2])),typeof C=="number"&&C>=0?q=q+this.stride[3]*C|0:(P.push(this.shape[3]),D.push(this.stride[3])),typeof M=="number"&&M>=0?q=q+this.stride[4]*M|0:(P.push(this.shape[4]),D.push(this.stride[4]));var O=w[P.length+1];return O(this.data,P,D,q)},function(E,S,g,C){return new T(E,S[0],S[1],S[2],S[3],S[4],g[0],g[1],g[2],g[3],g[4],C)}}};function h(b,p){var w=p===-1?"T":String(p),A=c[w];return p===-1?A(b):p===0?A(b,d[b][0]):A(b,d[b],f)}function v(b){if(s(b))return"buffer";if(l)switch(Object.prototype.toString.call(b)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(b)?"array":"generic"}var d={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function x(b,p,w,A){if(b===void 0){var g=d.array[0];return g([])}else typeof b=="number"&&(b=[b]);p===void 0&&(p=[b.length]);var T=p.length;if(w===void 0){w=new Array(T);for(var k=T-1,_=1;k>=0;--k)w[k]=_,_*=p[k]}if(A===void 0){A=0;for(var k=0;k<T;++k)w[k]<0&&(A-=(p[k]-1)*w[k])}for(var E=v(b),S=d[E];S.length<=T+1;)S.push(h(E,S.length-1));var g=S[T+1];return g(b,p,w,A)}n.exports=x},1278:function(n,a,o){"use strict";var s=o(2361),l=Math.pow(2,-1074),u=-1>>>0;n.exports=f;function f(c,h){if(isNaN(c)||isNaN(h))return NaN;if(c===h)return c;if(c===0)return h<0?-l:l;var v=s.hi(c),d=s.lo(c);return h>c==c>0?d===u?(v+=1,d=0):d+=1:d===0?(d=u,v-=1):d-=1,s.pack(d,v)}},8406:function(n,a){var o=1e-6,s=1e-6;a.vertexNormals=function(l,u,f){for(var c=u.length,h=new Array(c),v=f===void 0?o:f,d=0;d<c;++d)h[d]=[0,0,0];for(var d=0;d<l.length;++d)for(var x=l[d],b=0,p=x[x.length-1],w=x[0],A=0;A<x.length;++A){b=p,p=w,w=x[(A+1)%x.length];for(var T=u[b],k=u[p],_=u[w],E=new Array(3),S=0,g=new Array(3),C=0,M=0;M<3;++M)E[M]=T[M]-k[M],S+=E[M]*E[M],g[M]=_[M]-k[M],C+=g[M]*g[M];if(S*C>v)for(var P=h[p],D=1/Math.sqrt(S*C),M=0;M<3;++M){var q=(M+1)%3,O=(M+2)%3;P[M]+=D*(g[q]*E[O]-g[O]*E[q])}}for(var d=0;d<c;++d){for(var P=h[d],U=0,M=0;M<3;++M)U+=P[M]*P[M];if(U>v)for(var D=1/Math.sqrt(U),M=0;M<3;++M)P[M]*=D;else for(var M=0;M<3;++M)P[M]=0}return h},a.faceNormals=function(l,u,f){for(var c=l.length,h=new Array(c),v=f===void 0?s:f,d=0;d<c;++d){for(var x=l[d],b=new Array(3),p=0;p<3;++p)b[p]=u[x[p]];for(var w=new Array(3),A=new Array(3),p=0;p<3;++p)w[p]=b[1][p]-b[0][p],A[p]=b[2][p]-b[0][p];for(var T=new Array(3),k=0,p=0;p<3;++p){var _=(p+1)%3,E=(p+2)%3;T[p]=w[_]*A[E]-w[E]*A[_],k+=T[p]*T[p]}k>v?k=1/Math.sqrt(k):k=0;for(var p=0;p<3;++p)T[p]*=k;h[d]=T}return h}},4081:function(n){"use strict";n.exports=a;function a(o,s,l,u,f,c,h,v,d,x){var b=s+c+x;if(p>0){var p=Math.sqrt(b+1);o[0]=.5*(h-d)/p,o[1]=.5*(v-u)/p,o[2]=.5*(l-c)/p,o[3]=.5*p}else{var w=Math.max(s,c,x),p=Math.sqrt(2*w-b+1);s>=w?(o[0]=.5*p,o[1]=.5*(f+l)/p,o[2]=.5*(v+u)/p,o[3]=.5*(h-d)/p):c>=w?(o[0]=.5*(l+f)/p,o[1]=.5*p,o[2]=.5*(d+h)/p,o[3]=.5*(v-u)/p):(o[0]=.5*(u+v)/p,o[1]=.5*(h+d)/p,o[2]=.5*p,o[3]=.5*(l-f)/p)}return o}},9977:function(n,a,o){"use strict";n.exports=p;var s=o(9215),l=o(6582),u=o(7399),f=o(7608),c=o(4081);function h(w,A,T){return Math.sqrt(Math.pow(w,2)+Math.pow(A,2)+Math.pow(T,2))}function v(w,A,T,k){return Math.sqrt(Math.pow(w,2)+Math.pow(A,2)+Math.pow(T,2)+Math.pow(k,2))}function d(w,A){var T=A[0],k=A[1],_=A[2],E=A[3],S=v(T,k,_,E);S>1e-6?(w[0]=T/S,w[1]=k/S,w[2]=_/S,w[3]=E/S):(w[0]=w[1]=w[2]=0,w[3]=1)}function x(w,A,T){this.radius=s([T]),this.center=s(A),this.rotation=s(w),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var b=x.prototype;b.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},b.recalcMatrix=function(w){this.radius.curve(w),this.center.curve(w),this.rotation.curve(w);var A=this.computedRotation;d(A,A);var T=this.computedMatrix;u(T,A);var k=this.computedCenter,_=this.computedEye,E=this.computedUp,S=Math.exp(this.computedRadius[0]);_[0]=k[0]+S*T[2],_[1]=k[1]+S*T[6],_[2]=k[2]+S*T[10],E[0]=T[1],E[1]=T[5],E[2]=T[9];for(var g=0;g<3;++g){for(var C=0,M=0;M<3;++M)C+=T[g+4*M]*_[M];T[12+g]=-C}},b.getMatrix=function(w,A){this.recalcMatrix(w);var T=this.computedMatrix;if(A){for(var k=0;k<16;++k)A[k]=T[k];return A}return T},b.idle=function(w){this.center.idle(w),this.radius.idle(w),this.rotation.idle(w)},b.flush=function(w){this.center.flush(w),this.radius.flush(w),this.rotation.flush(w)},b.pan=function(w,A,T,k){A=A||0,T=T||0,k=k||0,this.recalcMatrix(w);var _=this.computedMatrix,E=_[1],S=_[5],g=_[9],C=h(E,S,g);E/=C,S/=C,g/=C;var M=_[0],P=_[4],D=_[8],q=M*E+P*S+D*g;M-=E*q,P-=S*q,D-=g*q;var O=h(M,P,D);M/=O,P/=O,D/=O;var U=_[2],B=_[6],F=_[10],N=U*E+B*S+F*g,X=U*M+B*P+F*D;U-=N*E+X*M,B-=N*S+X*P,F-=N*g+X*D;var K=h(U,B,F);U/=K,B/=K,F/=K;var ne=M*A+E*T,fe=P*A+S*T,ue=D*A+g*T;this.center.move(w,ne,fe,ue);var ee=Math.exp(this.computedRadius[0]);ee=Math.max(1e-4,ee+k),this.radius.set(w,Math.log(ee))},b.rotate=function(w,A,T,k){this.recalcMatrix(w),A=A||0,T=T||0;var _=this.computedMatrix,E=_[0],S=_[4],g=_[8],C=_[1],M=_[5],P=_[9],D=_[2],q=_[6],O=_[10],U=A*E+T*C,B=A*S+T*M,F=A*g+T*P,N=-(q*F-O*B),X=-(O*U-D*F),K=-(D*B-q*U),ne=Math.sqrt(Math.max(0,1-Math.pow(N,2)-Math.pow(X,2)-Math.pow(K,2))),fe=v(N,X,K,ne);fe>1e-6?(N/=fe,X/=fe,K/=fe,ne/=fe):(N=X=K=0,ne=1);var ue=this.computedRotation,ee=ue[0],Z=ue[1],oe=ue[2],ce=ue[3],le=ee*ne+ce*N+Z*K-oe*X,me=Z*ne+ce*X+oe*N-ee*K,he=oe*ne+ce*K+ee*X-Z*N,te=ce*ne-ee*N-Z*X-oe*K;if(k){N=D,X=q,K=O;var ge=Math.sin(k)/h(N,X,K);N*=ge,X*=ge,K*=ge,ne=Math.cos(A),le=le*ne+te*N+me*K-he*X,me=me*ne+te*X+he*N-le*K,he=he*ne+te*K+le*X-me*N,te=te*ne-le*N-me*X-he*K}var ae=v(le,me,he,te);ae>1e-6?(le/=ae,me/=ae,he/=ae,te/=ae):(le=me=he=0,te=1),this.rotation.set(w,le,me,he,te)},b.lookAt=function(w,A,T,k){this.recalcMatrix(w),T=T||this.computedCenter,A=A||this.computedEye,k=k||this.computedUp;var _=this.computedMatrix;l(_,A,T,k);var E=this.computedRotation;c(E,_[0],_[1],_[2],_[4],_[5],_[6],_[8],_[9],_[10]),d(E,E),this.rotation.set(w,E[0],E[1],E[2],E[3]);for(var S=0,g=0;g<3;++g)S+=Math.pow(T[g]-A[g],2);this.radius.set(w,.5*Math.log(Math.max(S,1e-6))),this.center.set(w,T[0],T[1],T[2])},b.translate=function(w,A,T,k){this.center.move(w,A||0,T||0,k||0)},b.setMatrix=function(w,A){var T=this.computedRotation;c(T,A[0],A[1],A[2],A[4],A[5],A[6],A[8],A[9],A[10]),d(T,T),this.rotation.set(w,T[0],T[1],T[2],T[3]);var k=this.computedMatrix;f(k,A);var _=k[15];if(Math.abs(_)>1e-6){var E=k[12]/_,S=k[13]/_,g=k[14]/_;this.recalcMatrix(w);var C=Math.exp(this.computedRadius[0]);this.center.set(w,E-k[2]*C,S-k[6]*C,g-k[10]*C),this.radius.idle(w)}else this.center.idle(w),this.radius.idle(w)},b.setDistance=function(w,A){A>0&&this.radius.set(w,Math.log(A))},b.setDistanceLimits=function(w,A){w>0?w=Math.log(w):w=-1/0,A>0?A=Math.log(A):A=1/0,A=Math.max(A,w),this.radius.bounds[0][0]=w,this.radius.bounds[1][0]=A},b.getDistanceLimits=function(w){var A=this.radius.bounds;return w?(w[0]=Math.exp(A[0][0]),w[1]=Math.exp(A[1][0]),w):[Math.exp(A[0][0]),Math.exp(A[1][0])]},b.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},b.fromJSON=function(w){var A=this.lastT(),T=w.center;T&&this.center.set(A,T[0],T[1],T[2]);var k=w.rotation;k&&this.rotation.set(A,k[0],k[1],k[2],k[3]);var _=w.distance;_&&_>0&&this.radius.set(A,Math.log(_)),this.setDistanceLimits(w.zoomMin,w.zoomMax)};function p(w){w=w||{};var A=w.center||[0,0,0],T=w.rotation||[0,0,0,1],k=w.radius||1;A=[].slice.call(A,0,3),T=[].slice.call(T,0,4),d(T,T);var _=new x(T,A,Math.log(k));return _.setDistanceLimits(w.zoomMin,w.zoomMax),("eye"in w||"up"in w)&&_.lookAt(0,w.eye,w.center,w.up),_}},1371:function(n,a,o){"use strict";var s=o(3233);n.exports=function(u,f,c){return c=typeof c!="undefined"?c+"":" ",s(c,f)+u}},3202:function(n){n.exports=function(o,s){s||(s=[0,""]),o=String(o);var l=parseFloat(o,10);return s[0]=l,s[1]=o.match(/[\d.\-\+]*\s*(.*)/)[1]||"",s}},3088:function(n,a,o){"use strict";n.exports=l;var s=o(3140);function l(u,f){for(var c=f.length|0,h=u.length,v=[new Array(c),new Array(c)],d=0;d<c;++d)v[0][d]=[],v[1][d]=[];for(var d=0;d<h;++d){var x=u[d];v[0][x[0]].push(x),v[1][x[1]].push(x)}for(var b=[],d=0;d<c;++d)v[0][d].length+v[1][d].length===0&&b.push([d]);function p(g,C){var M=v[C][g[C]];M.splice(M.indexOf(g),1)}function w(g,C,M){for(var P,D,q,O=0;O<2;++O)if(v[O][C].length>0){P=v[O][C][0],q=O;break}D=P[q^1];for(var U=0;U<2;++U)for(var B=v[U][C],F=0;F<B.length;++F){var N=B[F],X=N[U^1],K=s(f[g],f[C],f[D],f[X]);K>0&&(P=N,D=X,q=U)}return M||P&&p(P,q),D}function A(g,C){var M=v[C][g][0],P=[g];p(M,C);for(var D=M[C^1],q=C;;){for(;D!==g;)P.push(D),D=w(P[P.length-2],D,!1);if(v[0][g].length+v[1][g].length===0)break;var O=P[P.length-1],U=g,B=P[1],F=w(O,U,!0);if(s(f[O],f[U],f[B],f[F])<0)break;P.push(g),D=w(O,U)}return P}function T(g,C){return C[1]===C[C.length-1]}for(var d=0;d<c;++d)for(var k=0;k<2;++k){for(var _=[];v[k][d].length>0;){var E=v[0][d].length,S=A(d,k);T(_,S)?_.push.apply(_,S):(_.length>0&&b.push(_),_=S)}_.length>0&&b.push(_)}return b}},5609:function(n,a,o){"use strict";n.exports=l;var s=o(3134);function l(u,f){for(var c=s(u,f.length),h=new Array(f.length),v=new Array(f.length),d=[],x=0;x<f.length;++x){var b=c[x].length;v[x]=b,h[x]=!0,b<=1&&d.push(x)}for(;d.length>0;){var p=d.pop();h[p]=!1;for(var w=c[p],x=0;x<w.length;++x){var A=w[x];--v[A]===0&&d.push(A)}}for(var T=new Array(f.length),k=[],x=0;x<f.length;++x)if(h[x]){var p=k.length;T[x]=p,k.push(f[x])}else T[x]=-1;for(var _=[],x=0;x<u.length;++x){var E=u[x];h[E[0]]&&h[E[1]]&&_.push([T[E[0]],T[E[1]]])}return[_,k]}},2095:function(n,a,o){"use strict";n.exports=b;var s=o(3134),l=o(3088),u=o(5085),f=o(5250),c=o(8210),h=o(1682),v=o(5609);function d(p,w){for(var A=new Array(p),T=0;T<p;++T)A[T]=w;return A}function x(p){for(var w=new Array(p),A=0;A<p;++A)w[A]=[];return w}function b(p,w){var ge=v(p,w);p=ge[0],w=ge[1];for(var A=w.length,T=p.length,k=s(p,w.length),_=0;_<A;++_)if(k[_].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var E=l(p,w);function S(Ie){for(var ot=Ie.length,lt=[0],ht=0;ht<ot;++ht){var xt=w[Ie[ht]],Vt=w[Ie[(ht+1)%ot]],Ht=f(-xt[0],xt[1]),Me=f(-xt[0],Vt[1]),Ke=f(Vt[0],xt[1]),We=f(Vt[0],Vt[1]);lt=c(lt,c(c(Ht,Me),c(Ke,We)))}return lt[lt.length-1]>0}E=E.filter(S);for(var g=E.length,C=new Array(g),M=new Array(g),_=0;_<g;++_){C[_]=_;var P=new Array(g),D=E[_].map(function(ot){return w[ot]}),q=u([D]),O=0;e:for(var U=0;U<g;++U)if(P[U]=0,_!==U){for(var B=E[U],F=B.length,N=0;N<F;++N){var X=q(w[B[N]]);if(X!==0){X<0&&(P[U]=1,O+=1);continue e}}P[U]=1,O+=1}M[_]=[O,_,P]}M.sort(function(Ie,ot){return ot[0]-Ie[0]});for(var _=0;_<g;++_)for(var P=M[_],K=P[1],ne=P[2],U=0;U<g;++U)ne[U]&&(C[U]=K);for(var fe=x(g),_=0;_<g;++_)fe[_].push(C[_]),fe[C[_]].push(_);for(var ue={},ee=d(A,!1),_=0;_<g;++_)for(var B=E[_],F=B.length,U=0;U<F;++U){var Z=B[U],oe=B[(U+1)%F],ce=Math.min(Z,oe)+":"+Math.max(Z,oe);if(ce in ue){var le=ue[ce];fe[le].push(_),fe[_].push(le),ee[Z]=ee[oe]=!0}else ue[ce]=_}function me(Ie){for(var ot=Ie.length,lt=0;lt<ot;++lt)if(!ee[Ie[lt]])return!1;return!0}for(var he=[],te=d(g,-1),_=0;_<g;++_)C[_]===_&&!me(E[_])?(he.push(_),te[_]=0):te[_]=-1;for(var ge=[];he.length>0;){var ae=he.pop(),_e=fe[ae];h(_e,function(Ie,ot){return Ie-ot});var Ce=_e.length,qe=te[ae],rt;if(qe===0){var B=E[ae];rt=[B]}for(var _=0;_<Ce;++_){var Re=_e[_];if(!(te[Re]>=0)&&(te[Re]=qe^1,he.push(Re),qe===0)){var B=E[Re];me(B)||(B.reverse(),rt.push(B))}}qe===0&&ge.push(rt)}return ge}},5085:function(n,a,o){n.exports=w;var s=o(3250)[3],l=o(4209),u=o(3352),f=o(2478);function c(){return!0}function h(A){return function(T,k){var _=A[T];return _?!!_.queryPoint(k,c):!1}}function v(A){for(var T={},k=0;k<A.length;++k){var _=A[k],E=_[0][0],S=_[0][1],g=_[1][1],C=[Math.min(S,g),Math.max(S,g)];E in T?T[E].push(C):T[E]=[C]}for(var M={},P=Object.keys(T),k=0;k<P.length;++k){var D=T[P[k]];M[P[k]]=u(D)}return h(M)}function d(A,T){return function(k){var _=f.le(T,k[0]);if(_<0)return 1;var E=A[_];if(!E)if(_>0&&T[_]===k[0])E=A[_-1];else return 1;for(var S=1;E;){var g=E.key,C=s(k,g[0],g[1]);if(g[0][0]<g[1][0])if(C<0)E=E.left;else if(C>0)S=-1,E=E.right;else return 0;else if(C>0)E=E.left;else if(C<0)S=1,E=E.right;else return 0}return S}}function x(A){return 1}function b(A){return function(k){return A(k[0],k[1])?0:1}}function p(A,T){return function(_){return A(_[0],_[1])?0:T(_)}}function w(A){for(var T=A.length,k=[],_=[],E=0,S=0;S<T;++S)for(var g=A[S],C=g.length,M=C-1,P=0;P<C;M=P++){var D=g[M],q=g[P];D[0]===q[0]?_.push([D,q]):k.push([D,q])}if(k.length===0)return _.length===0?x:b(v(_));var O=l(k),U=d(O.slabs,O.coordinates);return _.length===0?U:p(v(_),U)}},9346:function(n){"use strict";var a=new Float64Array(4),o=new Float64Array(4),s=new Float64Array(4);function l(u,f,c,h,v){a.length<h.length&&(a=new Float64Array(h.length),o=new Float64Array(h.length),s=new Float64Array(h.length));for(var d=0;d<h.length;++d)a[d]=u[d]-h[d],o[d]=f[d]-u[d],s[d]=c[d]-u[d];for(var x=0,b=0,p=0,w=0,A=0,T=0,d=0;d<h.length;++d){var k=o[d],_=s[d],E=a[d];x+=k*k,b+=k*_,p+=_*_,w+=E*k,A+=E*_,T+=E*E}var S=Math.abs(x*p-b*b),g=b*A-p*w,C=b*w-x*A,M;if(g+C<=S)if(g<0)C<0&&w<0?(C=0,-w>=x?(g=1,M=x+2*w+T):(g=-w/x,M=w*g+T)):(g=0,A>=0?(C=0,M=T):-A>=p?(C=1,M=p+2*A+T):(C=-A/p,M=A*C+T));else if(C<0)C=0,w>=0?(g=0,M=T):-w>=x?(g=1,M=x+2*w+T):(g=-w/x,M=w*g+T);else{var P=1/S;g*=P,C*=P,M=g*(x*g+b*C+2*w)+C*(b*g+p*C+2*A)+T}else{var D,q,O,U;g<0?(D=b+w,q=p+A,q>D?(O=q-D,U=x-2*b+p,O>=U?(g=1,C=0,M=x+2*w+T):(g=O/U,C=1-g,M=g*(x*g+b*C+2*w)+C*(b*g+p*C+2*A)+T)):(g=0,q<=0?(C=1,M=p+2*A+T):A>=0?(C=0,M=T):(C=-A/p,M=A*C+T))):C<0?(D=b+A,q=x+w,q>D?(O=q-D,U=x-2*b+p,O>=U?(C=1,g=0,M=p+2*A+T):(C=O/U,g=1-C,M=g*(x*g+b*C+2*w)+C*(b*g+p*C+2*A)+T)):(C=0,q<=0?(g=1,M=x+2*w+T):w>=0?(g=0,M=T):(g=-w/x,M=w*g+T))):(O=p+A-b-w,O<=0?(g=0,C=1,M=p+2*A+T):(U=x-2*b+p,O>=U?(g=1,C=0,M=x+2*w+T):(g=O/U,C=1-g,M=g*(x*g+b*C+2*w)+C*(b*g+p*C+2*A)+T)))}for(var B=1-g-C,d=0;d<h.length;++d)v[d]=B*u[d]+g*f[d]+C*c[d];return M<0?0:M}n.exports=l},8648:function(n,a,o){n.exports=o(783)},2653:function(n,a,o){"use strict";var s=o(3865);n.exports=l;function l(u,f){for(var c=u.length,h=new Array(c),v=0;v<c;++v)h[v]=s(u[v],f[v]);return h}},5838:function(n,a,o){"use strict";n.exports=l;var s=o(7842);function l(u){for(var f=new Array(u.length),c=0;c<u.length;++c)f[c]=s(u[c]);return f}},8987:function(n,a,o){"use strict";var s=o(7842),l=o(6504);n.exports=u;function u(f,c){for(var h=s(c),v=f.length,d=new Array(v),x=0;x<v;++x)d[x]=l(f[x],h);return d}},544:function(n,a,o){"use strict";var s=o(5572);n.exports=l;function l(u,f){for(var c=u.length,h=new Array(c),v=0;v<c;++v)h[v]=s(u[v],f[v]);return h}},5771:function(n,a,o){"use strict";var s=o(8507),l=o(3788),u=o(2419);n.exports=f;function f(c){c.sort(l);for(var h=c.length,v=0,d=0;d<h;++d){var x=c[d],b=u(x);if(b!==0){if(v>0){var p=c[v-1];if(s(x,p)===0&&u(p)!==b){v-=1;continue}}c[v++]=x}}return c.length=v,c}},3233:function(n){"use strict";var a="",o;n.exports=s;function s(l,u){if(typeof l!="string")throw new TypeError("expected a string");if(u===1)return l;if(u===2)return l+l;var f=l.length*u;if(o!==l||typeof o=="undefined")o=l,a="";else if(a.length>=f)return a.substr(0,f);for(;f>a.length&&u>1;)u&1&&(a+=l),u>>=1,l+=l;return a+=l,a=a.substr(0,f),a}},3025:function(n,a,o){n.exports=o.g.performance&&o.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},7004:function(n){"use strict";n.exports=a;function a(o){for(var s=o.length,l=o[o.length-1],u=s,f=s-2;f>=0;--f){var c=l,h=o[f];l=c+h;var v=l-c,d=h-v;d&&(o[--u]=l,l=d)}for(var x=0,f=u;f<s;++f){var c=o[f],h=l;l=c+h;var v=l-c,d=h-v;d&&(o[x++]=d)}return o[x++]=l,o.length=x,o}},2962:function(n,a,o){"use strict";var s=o(5250),l=o(8210),u=o(3012),f=o(7004),c=6;function h(T,k,_,E){return function(g){return E(T(_(g[0][0],g[1][1]),_(-g[0][1],g[1][0])))}}function v(T,k,_,E){return function(g){return E(T(k(T(_(g[1][1],g[2][2]),_(-g[1][2],g[2][1])),g[0][0]),T(k(T(_(g[1][0],g[2][2]),_(-g[1][2],g[2][0])),-g[0][1]),k(T(_(g[1][0],g[2][1]),_(-g[1][1],g[2][0])),g[0][2]))))}}function d(T,k,_,E){return function(g){return E(T(T(k(T(k(T(_(g[2][2],g[3][3]),_(-g[2][3],g[3][2])),g[1][1]),T(k(T(_(g[2][1],g[3][3]),_(-g[2][3],g[3][1])),-g[1][2]),k(T(_(g[2][1],g[3][2]),_(-g[2][2],g[3][1])),g[1][3]))),g[0][0]),k(T(k(T(_(g[2][2],g[3][3]),_(-g[2][3],g[3][2])),g[1][0]),T(k(T(_(g[2][0],g[3][3]),_(-g[2][3],g[3][0])),-g[1][2]),k(T(_(g[2][0],g[3][2]),_(-g[2][2],g[3][0])),g[1][3]))),-g[0][1])),T(k(T(k(T(_(g[2][1],g[3][3]),_(-g[2][3],g[3][1])),g[1][0]),T(k(T(_(g[2][0],g[3][3]),_(-g[2][3],g[3][0])),-g[1][1]),k(T(_(g[2][0],g[3][1]),_(-g[2][1],g[3][0])),g[1][3]))),g[0][2]),k(T(k(T(_(g[2][1],g[3][2]),_(-g[2][2],g[3][1])),g[1][0]),T(k(T(_(g[2][0],g[3][2]),_(-g[2][2],g[3][0])),-g[1][1]),k(T(_(g[2][0],g[3][1]),_(-g[2][1],g[3][0])),g[1][2]))),-g[0][3]))))}}function x(T,k,_,E){return function(g){return E(T(T(k(T(T(k(T(k(T(_(g[3][3],g[4][4]),_(-g[3][4],g[4][3])),g[2][2]),T(k(T(_(g[3][2],g[4][4]),_(-g[3][4],g[4][2])),-g[2][3]),k(T(_(g[3][2],g[4][3]),_(-g[3][3],g[4][2])),g[2][4]))),g[1][1]),k(T(k(T(_(g[3][3],g[4][4]),_(-g[3][4],g[4][3])),g[2][1]),T(k(T(_(g[3][1],g[4][4]),_(-g[3][4],g[4][1])),-g[2][3]),k(T(_(g[3][1],g[4][3]),_(-g[3][3],g[4][1])),g[2][4]))),-g[1][2])),T(k(T(k(T(_(g[3][2],g[4][4]),_(-g[3][4],g[4][2])),g[2][1]),T(k(T(_(g[3][1],g[4][4]),_(-g[3][4],g[4][1])),-g[2][2]),k(T(_(g[3][1],g[4][2]),_(-g[3][2],g[4][1])),g[2][4]))),g[1][3]),k(T(k(T(_(g[3][2],g[4][3]),_(-g[3][3],g[4][2])),g[2][1]),T(k(T(_(g[3][1],g[4][3]),_(-g[3][3],g[4][1])),-g[2][2]),k(T(_(g[3][1],g[4][2]),_(-g[3][2],g[4][1])),g[2][3]))),-g[1][4]))),g[0][0]),k(T(T(k(T(k(T(_(g[3][3],g[4][4]),_(-g[3][4],g[4][3])),g[2][2]),T(k(T(_(g[3][2],g[4][4]),_(-g[3][4],g[4][2])),-g[2][3]),k(T(_(g[3][2],g[4][3]),_(-g[3][3],g[4][2])),g[2][4]))),g[1][0]),k(T(k(T(_(g[3][3],g[4][4]),_(-g[3][4],g[4][3])),g[2][0]),T(k(T(_(g[3][0],g[4][4]),_(-g[3][4],g[4][0])),-g[2][3]),k(T(_(g[3][0],g[4][3]),_(-g[3][3],g[4][0])),g[2][4]))),-g[1][2])),T(k(T(k(T(_(g[3][2],g[4][4]),_(-g[3][4],g[4][2])),g[2][0]),T(k(T(_(g[3][0],g[4][4]),_(-g[3][4],g[4][0])),-g[2][2]),k(T(_(g[3][0],g[4][2]),_(-g[3][2],g[4][0])),g[2][4]))),g[1][3]),k(T(k(T(_(g[3][2],g[4][3]),_(-g[3][3],g[4][2])),g[2][0]),T(k(T(_(g[3][0],g[4][3]),_(-g[3][3],g[4][0])),-g[2][2]),k(T(_(g[3][0],g[4][2]),_(-g[3][2],g[4][0])),g[2][3]))),-g[1][4]))),-g[0][1])),T(k(T(T(k(T(k(T(_(g[3][3],g[4][4]),_(-g[3][4],g[4][3])),g[2][1]),T(k(T(_(g[3][1],g[4][4]),_(-g[3][4],g[4][1])),-g[2][3]),k(T(_(g[3][1],g[4][3]),_(-g[3][3],g[4][1])),g[2][4]))),g[1][0]),k(T(k(T(_(g[3][3],g[4][4]),_(-g[3][4],g[4][3])),g[2][0]),T(k(T(_(g[3][0],g[4][4]),_(-g[3][4],g[4][0])),-g[2][3]),k(T(_(g[3][0],g[4][3]),_(-g[3][3],g[4][0])),g[2][4]))),-g[1][1])),T(k(T(k(T(_(g[3][1],g[4][4]),_(-g[3][4],g[4][1])),g[2][0]),T(k(T(_(g[3][0],g[4][4]),_(-g[3][4],g[4][0])),-g[2][1]),k(T(_(g[3][0],g[4][1]),_(-g[3][1],g[4][0])),g[2][4]))),g[1][3]),k(T(k(T(_(g[3][1],g[4][3]),_(-g[3][3],g[4][1])),g[2][0]),T(k(T(_(g[3][0],g[4][3]),_(-g[3][3],g[4][0])),-g[2][1]),k(T(_(g[3][0],g[4][1]),_(-g[3][1],g[4][0])),g[2][3]))),-g[1][4]))),g[0][2]),T(k(T(T(k(T(k(T(_(g[3][2],g[4][4]),_(-g[3][4],g[4][2])),g[2][1]),T(k(T(_(g[3][1],g[4][4]),_(-g[3][4],g[4][1])),-g[2][2]),k(T(_(g[3][1],g[4][2]),_(-g[3][2],g[4][1])),g[2][4]))),g[1][0]),k(T(k(T(_(g[3][2],g[4][4]),_(-g[3][4],g[4][2])),g[2][0]),T(k(T(_(g[3][0],g[4][4]),_(-g[3][4],g[4][0])),-g[2][2]),k(T(_(g[3][0],g[4][2]),_(-g[3][2],g[4][0])),g[2][4]))),-g[1][1])),T(k(T(k(T(_(g[3][1],g[4][4]),_(-g[3][4],g[4][1])),g[2][0]),T(k(T(_(g[3][0],g[4][4]),_(-g[3][4],g[4][0])),-g[2][1]),k(T(_(g[3][0],g[4][1]),_(-g[3][1],g[4][0])),g[2][4]))),g[1][2]),k(T(k(T(_(g[3][1],g[4][2]),_(-g[3][2],g[4][1])),g[2][0]),T(k(T(_(g[3][0],g[4][2]),_(-g[3][2],g[4][0])),-g[2][1]),k(T(_(g[3][0],g[4][1]),_(-g[3][1],g[4][0])),g[2][2]))),-g[1][4]))),-g[0][3]),k(T(T(k(T(k(T(_(g[3][2],g[4][3]),_(-g[3][3],g[4][2])),g[2][1]),T(k(T(_(g[3][1],g[4][3]),_(-g[3][3],g[4][1])),-g[2][2]),k(T(_(g[3][1],g[4][2]),_(-g[3][2],g[4][1])),g[2][3]))),g[1][0]),k(T(k(T(_(g[3][2],g[4][3]),_(-g[3][3],g[4][2])),g[2][0]),T(k(T(_(g[3][0],g[4][3]),_(-g[3][3],g[4][0])),-g[2][2]),k(T(_(g[3][0],g[4][2]),_(-g[3][2],g[4][0])),g[2][3]))),-g[1][1])),T(k(T(k(T(_(g[3][1],g[4][3]),_(-g[3][3],g[4][1])),g[2][0]),T(k(T(_(g[3][0],g[4][3]),_(-g[3][3],g[4][0])),-g[2][1]),k(T(_(g[3][0],g[4][1]),_(-g[3][1],g[4][0])),g[2][3]))),g[1][2]),k(T(k(T(_(g[3][1],g[4][2]),_(-g[3][2],g[4][1])),g[2][0]),T(k(T(_(g[3][0],g[4][2]),_(-g[3][2],g[4][0])),-g[2][1]),k(T(_(g[3][0],g[4][1]),_(-g[3][1],g[4][0])),g[2][2]))),-g[1][3]))),g[0][4])))))}}function b(T){var k=T===2?h:T===3?v:T===4?d:T===5?x:void 0;return k(l,u,s,f)}var p=[function(){return[0]},function(k){return[k[0][0]]}];function w(T,k,_,E,S,g,C,M){return function(D){switch(D.length){case 0:return T(D);case 1:return k(D);case 2:return _(D);case 3:return E(D);case 4:return S(D);case 5:return g(D)}var q=C[D.length];return q||(q=C[D.length]=M(D.length)),q(D)}}function A(){for(;p.length<c;)p.push(b(p.length));n.exports=w.apply(void 0,p.concat([p,b]));for(var T=0;T<p.length;++T)n.exports[T]=p[T]}A()},1944:function(n,a,o){"use strict";var s=o(5250),l=o(8210);n.exports=u;function u(f,c){for(var h=s(f[0],c[0]),v=1;v<f.length;++v)h=l(h,s(f[v],c[v]));return h}},2646:function(n,a,o){"use strict";var s=o(5250),l=o(8210),u=o(8545),f=o(3012),c=6;function h(S){var g=S===3?b:S===4?p:S===5?w:A;return g(l,u,s,f)}function v(){return 0}function d(){return 0}function x(){return 0}function b(S,g,C,M){function P(D,q,O){var U=C(D[0],D[0]),B=M(U,q[0]),F=M(U,O[0]),N=C(q[0],q[0]),X=M(N,D[0]),K=M(N,O[0]),ne=C(O[0],O[0]),fe=M(ne,D[0]),ue=M(ne,q[0]),ee=S(g(ue,K),g(X,B)),Z=g(fe,F),oe=g(ee,Z);return oe[oe.length-1]}return P}function p(S,g,C,M){function P(D,q,O,U){var B=S(C(D[0],D[0]),C(D[1],D[1])),F=M(B,q[0]),N=M(B,O[0]),X=M(B,U[0]),K=S(C(q[0],q[0]),C(q[1],q[1])),ne=M(K,D[0]),fe=M(K,O[0]),ue=M(K,U[0]),ee=S(C(O[0],O[0]),C(O[1],O[1])),Z=M(ee,D[0]),oe=M(ee,q[0]),ce=M(ee,U[0]),le=S(C(U[0],U[0]),C(U[1],U[1])),me=M(le,D[0]),he=M(le,q[0]),te=M(le,O[0]),ge=S(S(M(g(te,ce),q[1]),S(M(g(he,ue),-O[1]),M(g(oe,fe),U[1]))),S(M(g(he,ue),D[1]),S(M(g(me,X),-q[1]),M(g(ne,F),U[1])))),ae=S(S(M(g(te,ce),D[1]),S(M(g(me,X),-O[1]),M(g(Z,N),U[1]))),S(M(g(oe,fe),D[1]),S(M(g(Z,N),-q[1]),M(g(ne,F),O[1])))),_e=g(ge,ae);return _e[_e.length-1]}return P}function w(S,g,C,M){function P(D,q,O,U,B){var F=S(C(D[0],D[0]),S(C(D[1],D[1]),C(D[2],D[2]))),N=M(F,q[0]),X=M(F,O[0]),K=M(F,U[0]),ne=M(F,B[0]),fe=S(C(q[0],q[0]),S(C(q[1],q[1]),C(q[2],q[2]))),ue=M(fe,D[0]),ee=M(fe,O[0]),Z=M(fe,U[0]),oe=M(fe,B[0]),ce=S(C(O[0],O[0]),S(C(O[1],O[1]),C(O[2],O[2]))),le=M(ce,D[0]),me=M(ce,q[0]),he=M(ce,U[0]),te=M(ce,B[0]),ge=S(C(U[0],U[0]),S(C(U[1],U[1]),C(U[2],U[2]))),ae=M(ge,D[0]),_e=M(ge,q[0]),Ce=M(ge,O[0]),qe=M(ge,B[0]),rt=S(C(B[0],B[0]),S(C(B[1],B[1]),C(B[2],B[2]))),Re=M(rt,D[0]),Ie=M(rt,q[0]),ot=M(rt,O[0]),lt=M(rt,U[0]),ht=S(S(S(M(S(M(g(lt,qe),O[1]),S(M(g(ot,te),-U[1]),M(g(Ce,he),B[1]))),q[2]),S(M(S(M(g(lt,qe),q[1]),S(M(g(Ie,oe),-U[1]),M(g(_e,Z),B[1]))),-O[2]),M(S(M(g(ot,te),q[1]),S(M(g(Ie,oe),-O[1]),M(g(me,ee),B[1]))),U[2]))),S(M(S(M(g(Ce,he),q[1]),S(M(g(_e,Z),-O[1]),M(g(me,ee),U[1]))),-B[2]),S(M(S(M(g(lt,qe),q[1]),S(M(g(Ie,oe),-U[1]),M(g(_e,Z),B[1]))),D[2]),M(S(M(g(lt,qe),D[1]),S(M(g(Re,ne),-U[1]),M(g(ae,K),B[1]))),-q[2])))),S(S(M(S(M(g(Ie,oe),D[1]),S(M(g(Re,ne),-q[1]),M(g(ue,N),B[1]))),U[2]),S(M(S(M(g(_e,Z),D[1]),S(M(g(ae,K),-q[1]),M(g(ue,N),U[1]))),-B[2]),M(S(M(g(Ce,he),q[1]),S(M(g(_e,Z),-O[1]),M(g(me,ee),U[1]))),D[2]))),S(M(S(M(g(Ce,he),D[1]),S(M(g(ae,K),-O[1]),M(g(le,X),U[1]))),-q[2]),S(M(S(M(g(_e,Z),D[1]),S(M(g(ae,K),-q[1]),M(g(ue,N),U[1]))),O[2]),M(S(M(g(me,ee),D[1]),S(M(g(le,X),-q[1]),M(g(ue,N),O[1]))),-U[2]))))),xt=S(S(S(M(S(M(g(lt,qe),O[1]),S(M(g(ot,te),-U[1]),M(g(Ce,he),B[1]))),D[2]),M(S(M(g(lt,qe),D[1]),S(M(g(Re,ne),-U[1]),M(g(ae,K),B[1]))),-O[2])),S(M(S(M(g(ot,te),D[1]),S(M(g(Re,ne),-O[1]),M(g(le,X),B[1]))),U[2]),M(S(M(g(Ce,he),D[1]),S(M(g(ae,K),-O[1]),M(g(le,X),U[1]))),-B[2]))),S(S(M(S(M(g(ot,te),q[1]),S(M(g(Ie,oe),-O[1]),M(g(me,ee),B[1]))),D[2]),M(S(M(g(ot,te),D[1]),S(M(g(Re,ne),-O[1]),M(g(le,X),B[1]))),-q[2])),S(M(S(M(g(Ie,oe),D[1]),S(M(g(Re,ne),-q[1]),M(g(ue,N),B[1]))),O[2]),M(S(M(g(me,ee),D[1]),S(M(g(le,X),-q[1]),M(g(ue,N),O[1]))),-B[2])))),Vt=g(ht,xt);return Vt[Vt.length-1]}return P}function A(S,g,C,M){function P(D,q,O,U,B,F){var N=S(S(C(D[0],D[0]),C(D[1],D[1])),S(C(D[2],D[2]),C(D[3],D[3]))),X=M(N,q[0]),K=M(N,O[0]),ne=M(N,U[0]),fe=M(N,B[0]),ue=M(N,F[0]),ee=S(S(C(q[0],q[0]),C(q[1],q[1])),S(C(q[2],q[2]),C(q[3],q[3]))),Z=M(ee,D[0]),oe=M(ee,O[0]),ce=M(ee,U[0]),le=M(ee,B[0]),me=M(ee,F[0]),he=S(S(C(O[0],O[0]),C(O[1],O[1])),S(C(O[2],O[2]),C(O[3],O[3]))),te=M(he,D[0]),ge=M(he,q[0]),ae=M(he,U[0]),_e=M(he,B[0]),Ce=M(he,F[0]),qe=S(S(C(U[0],U[0]),C(U[1],U[1])),S(C(U[2],U[2]),C(U[3],U[3]))),rt=M(qe,D[0]),Re=M(qe,q[0]),Ie=M(qe,O[0]),ot=M(qe,B[0]),lt=M(qe,F[0]),ht=S(S(C(B[0],B[0]),C(B[1],B[1])),S(C(B[2],B[2]),C(B[3],B[3]))),xt=M(ht,D[0]),Vt=M(ht,q[0]),Ht=M(ht,O[0]),Me=M(ht,U[0]),Ke=M(ht,F[0]),We=S(S(C(F[0],F[0]),C(F[1],F[1])),S(C(F[2],F[2]),C(F[3],F[3]))),et=M(We,D[0]),vt=M(We,q[0]),at=M(We,O[0]),Xe=M(We,U[0]),dt=M(We,B[0]),_t=S(S(S(M(S(S(M(S(M(g(dt,Ke),U[1]),S(M(g(Xe,lt),-B[1]),M(g(Me,ot),F[1]))),O[2]),M(S(M(g(dt,Ke),O[1]),S(M(g(at,Ce),-B[1]),M(g(Ht,_e),F[1]))),-U[2])),S(M(S(M(g(Xe,lt),O[1]),S(M(g(at,Ce),-U[1]),M(g(Ie,ae),F[1]))),B[2]),M(S(M(g(Me,ot),O[1]),S(M(g(Ht,_e),-U[1]),M(g(Ie,ae),B[1]))),-F[2]))),q[3]),S(M(S(S(M(S(M(g(dt,Ke),U[1]),S(M(g(Xe,lt),-B[1]),M(g(Me,ot),F[1]))),q[2]),M(S(M(g(dt,Ke),q[1]),S(M(g(vt,me),-B[1]),M(g(Vt,le),F[1]))),-U[2])),S(M(S(M(g(Xe,lt),q[1]),S(M(g(vt,me),-U[1]),M(g(Re,ce),F[1]))),B[2]),M(S(M(g(Me,ot),q[1]),S(M(g(Vt,le),-U[1]),M(g(Re,ce),B[1]))),-F[2]))),-O[3]),M(S(S(M(S(M(g(dt,Ke),O[1]),S(M(g(at,Ce),-B[1]),M(g(Ht,_e),F[1]))),q[2]),M(S(M(g(dt,Ke),q[1]),S(M(g(vt,me),-B[1]),M(g(Vt,le),F[1]))),-O[2])),S(M(S(M(g(at,Ce),q[1]),S(M(g(vt,me),-O[1]),M(g(ge,oe),F[1]))),B[2]),M(S(M(g(Ht,_e),q[1]),S(M(g(Vt,le),-O[1]),M(g(ge,oe),B[1]))),-F[2]))),U[3]))),S(S(M(S(S(M(S(M(g(Xe,lt),O[1]),S(M(g(at,Ce),-U[1]),M(g(Ie,ae),F[1]))),q[2]),M(S(M(g(Xe,lt),q[1]),S(M(g(vt,me),-U[1]),M(g(Re,ce),F[1]))),-O[2])),S(M(S(M(g(at,Ce),q[1]),S(M(g(vt,me),-O[1]),M(g(ge,oe),F[1]))),U[2]),M(S(M(g(Ie,ae),q[1]),S(M(g(Re,ce),-O[1]),M(g(ge,oe),U[1]))),-F[2]))),-B[3]),M(S(S(M(S(M(g(Me,ot),O[1]),S(M(g(Ht,_e),-U[1]),M(g(Ie,ae),B[1]))),q[2]),M(S(M(g(Me,ot),q[1]),S(M(g(Vt,le),-U[1]),M(g(Re,ce),B[1]))),-O[2])),S(M(S(M(g(Ht,_e),q[1]),S(M(g(Vt,le),-O[1]),M(g(ge,oe),B[1]))),U[2]),M(S(M(g(Ie,ae),q[1]),S(M(g(Re,ce),-O[1]),M(g(ge,oe),U[1]))),-B[2]))),F[3])),S(M(S(S(M(S(M(g(dt,Ke),U[1]),S(M(g(Xe,lt),-B[1]),M(g(Me,ot),F[1]))),q[2]),M(S(M(g(dt,Ke),q[1]),S(M(g(vt,me),-B[1]),M(g(Vt,le),F[1]))),-U[2])),S(M(S(M(g(Xe,lt),q[1]),S(M(g(vt,me),-U[1]),M(g(Re,ce),F[1]))),B[2]),M(S(M(g(Me,ot),q[1]),S(M(g(Vt,le),-U[1]),M(g(Re,ce),B[1]))),-F[2]))),D[3]),M(S(S(M(S(M(g(dt,Ke),U[1]),S(M(g(Xe,lt),-B[1]),M(g(Me,ot),F[1]))),D[2]),M(S(M(g(dt,Ke),D[1]),S(M(g(et,ue),-B[1]),M(g(xt,fe),F[1]))),-U[2])),S(M(S(M(g(Xe,lt),D[1]),S(M(g(et,ue),-U[1]),M(g(rt,ne),F[1]))),B[2]),M(S(M(g(Me,ot),D[1]),S(M(g(xt,fe),-U[1]),M(g(rt,ne),B[1]))),-F[2]))),-q[3])))),S(S(S(M(S(S(M(S(M(g(dt,Ke),q[1]),S(M(g(vt,me),-B[1]),M(g(Vt,le),F[1]))),D[2]),M(S(M(g(dt,Ke),D[1]),S(M(g(et,ue),-B[1]),M(g(xt,fe),F[1]))),-q[2])),S(M(S(M(g(vt,me),D[1]),S(M(g(et,ue),-q[1]),M(g(Z,X),F[1]))),B[2]),M(S(M(g(Vt,le),D[1]),S(M(g(xt,fe),-q[1]),M(g(Z,X),B[1]))),-F[2]))),U[3]),M(S(S(M(S(M(g(Xe,lt),q[1]),S(M(g(vt,me),-U[1]),M(g(Re,ce),F[1]))),D[2]),M(S(M(g(Xe,lt),D[1]),S(M(g(et,ue),-U[1]),M(g(rt,ne),F[1]))),-q[2])),S(M(S(M(g(vt,me),D[1]),S(M(g(et,ue),-q[1]),M(g(Z,X),F[1]))),U[2]),M(S(M(g(Re,ce),D[1]),S(M(g(rt,ne),-q[1]),M(g(Z,X),U[1]))),-F[2]))),-B[3])),S(M(S(S(M(S(M(g(Me,ot),q[1]),S(M(g(Vt,le),-U[1]),M(g(Re,ce),B[1]))),D[2]),M(S(M(g(Me,ot),D[1]),S(M(g(xt,fe),-U[1]),M(g(rt,ne),B[1]))),-q[2])),S(M(S(M(g(Vt,le),D[1]),S(M(g(xt,fe),-q[1]),M(g(Z,X),B[1]))),U[2]),M(S(M(g(Re,ce),D[1]),S(M(g(rt,ne),-q[1]),M(g(Z,X),U[1]))),-B[2]))),F[3]),M(S(S(M(S(M(g(Xe,lt),O[1]),S(M(g(at,Ce),-U[1]),M(g(Ie,ae),F[1]))),q[2]),M(S(M(g(Xe,lt),q[1]),S(M(g(vt,me),-U[1]),M(g(Re,ce),F[1]))),-O[2])),S(M(S(M(g(at,Ce),q[1]),S(M(g(vt,me),-O[1]),M(g(ge,oe),F[1]))),U[2]),M(S(M(g(Ie,ae),q[1]),S(M(g(Re,ce),-O[1]),M(g(ge,oe),U[1]))),-F[2]))),D[3]))),S(S(M(S(S(M(S(M(g(Xe,lt),O[1]),S(M(g(at,Ce),-U[1]),M(g(Ie,ae),F[1]))),D[2]),M(S(M(g(Xe,lt),D[1]),S(M(g(et,ue),-U[1]),M(g(rt,ne),F[1]))),-O[2])),S(M(S(M(g(at,Ce),D[1]),S(M(g(et,ue),-O[1]),M(g(te,K),F[1]))),U[2]),M(S(M(g(Ie,ae),D[1]),S(M(g(rt,ne),-O[1]),M(g(te,K),U[1]))),-F[2]))),-q[3]),M(S(S(M(S(M(g(Xe,lt),q[1]),S(M(g(vt,me),-U[1]),M(g(Re,ce),F[1]))),D[2]),M(S(M(g(Xe,lt),D[1]),S(M(g(et,ue),-U[1]),M(g(rt,ne),F[1]))),-q[2])),S(M(S(M(g(vt,me),D[1]),S(M(g(et,ue),-q[1]),M(g(Z,X),F[1]))),U[2]),M(S(M(g(Re,ce),D[1]),S(M(g(rt,ne),-q[1]),M(g(Z,X),U[1]))),-F[2]))),O[3])),S(M(S(S(M(S(M(g(at,Ce),q[1]),S(M(g(vt,me),-O[1]),M(g(ge,oe),F[1]))),D[2]),M(S(M(g(at,Ce),D[1]),S(M(g(et,ue),-O[1]),M(g(te,K),F[1]))),-q[2])),S(M(S(M(g(vt,me),D[1]),S(M(g(et,ue),-q[1]),M(g(Z,X),F[1]))),O[2]),M(S(M(g(ge,oe),D[1]),S(M(g(te,K),-q[1]),M(g(Z,X),O[1]))),-F[2]))),-U[3]),M(S(S(M(S(M(g(Ie,ae),q[1]),S(M(g(Re,ce),-O[1]),M(g(ge,oe),U[1]))),D[2]),M(S(M(g(Ie,ae),D[1]),S(M(g(rt,ne),-O[1]),M(g(te,K),U[1]))),-q[2])),S(M(S(M(g(Re,ce),D[1]),S(M(g(rt,ne),-q[1]),M(g(Z,X),U[1]))),O[2]),M(S(M(g(ge,oe),D[1]),S(M(g(te,K),-q[1]),M(g(Z,X),O[1]))),-U[2]))),F[3]))))),$t=S(S(S(M(S(S(M(S(M(g(dt,Ke),U[1]),S(M(g(Xe,lt),-B[1]),M(g(Me,ot),F[1]))),O[2]),M(S(M(g(dt,Ke),O[1]),S(M(g(at,Ce),-B[1]),M(g(Ht,_e),F[1]))),-U[2])),S(M(S(M(g(Xe,lt),O[1]),S(M(g(at,Ce),-U[1]),M(g(Ie,ae),F[1]))),B[2]),M(S(M(g(Me,ot),O[1]),S(M(g(Ht,_e),-U[1]),M(g(Ie,ae),B[1]))),-F[2]))),D[3]),S(M(S(S(M(S(M(g(dt,Ke),U[1]),S(M(g(Xe,lt),-B[1]),M(g(Me,ot),F[1]))),D[2]),M(S(M(g(dt,Ke),D[1]),S(M(g(et,ue),-B[1]),M(g(xt,fe),F[1]))),-U[2])),S(M(S(M(g(Xe,lt),D[1]),S(M(g(et,ue),-U[1]),M(g(rt,ne),F[1]))),B[2]),M(S(M(g(Me,ot),D[1]),S(M(g(xt,fe),-U[1]),M(g(rt,ne),B[1]))),-F[2]))),-O[3]),M(S(S(M(S(M(g(dt,Ke),O[1]),S(M(g(at,Ce),-B[1]),M(g(Ht,_e),F[1]))),D[2]),M(S(M(g(dt,Ke),D[1]),S(M(g(et,ue),-B[1]),M(g(xt,fe),F[1]))),-O[2])),S(M(S(M(g(at,Ce),D[1]),S(M(g(et,ue),-O[1]),M(g(te,K),F[1]))),B[2]),M(S(M(g(Ht,_e),D[1]),S(M(g(xt,fe),-O[1]),M(g(te,K),B[1]))),-F[2]))),U[3]))),S(S(M(S(S(M(S(M(g(Xe,lt),O[1]),S(M(g(at,Ce),-U[1]),M(g(Ie,ae),F[1]))),D[2]),M(S(M(g(Xe,lt),D[1]),S(M(g(et,ue),-U[1]),M(g(rt,ne),F[1]))),-O[2])),S(M(S(M(g(at,Ce),D[1]),S(M(g(et,ue),-O[1]),M(g(te,K),F[1]))),U[2]),M(S(M(g(Ie,ae),D[1]),S(M(g(rt,ne),-O[1]),M(g(te,K),U[1]))),-F[2]))),-B[3]),M(S(S(M(S(M(g(Me,ot),O[1]),S(M(g(Ht,_e),-U[1]),M(g(Ie,ae),B[1]))),D[2]),M(S(M(g(Me,ot),D[1]),S(M(g(xt,fe),-U[1]),M(g(rt,ne),B[1]))),-O[2])),S(M(S(M(g(Ht,_e),D[1]),S(M(g(xt,fe),-O[1]),M(g(te,K),B[1]))),U[2]),M(S(M(g(Ie,ae),D[1]),S(M(g(rt,ne),-O[1]),M(g(te,K),U[1]))),-B[2]))),F[3])),S(M(S(S(M(S(M(g(dt,Ke),O[1]),S(M(g(at,Ce),-B[1]),M(g(Ht,_e),F[1]))),q[2]),M(S(M(g(dt,Ke),q[1]),S(M(g(vt,me),-B[1]),M(g(Vt,le),F[1]))),-O[2])),S(M(S(M(g(at,Ce),q[1]),S(M(g(vt,me),-O[1]),M(g(ge,oe),F[1]))),B[2]),M(S(M(g(Ht,_e),q[1]),S(M(g(Vt,le),-O[1]),M(g(ge,oe),B[1]))),-F[2]))),D[3]),M(S(S(M(S(M(g(dt,Ke),O[1]),S(M(g(at,Ce),-B[1]),M(g(Ht,_e),F[1]))),D[2]),M(S(M(g(dt,Ke),D[1]),S(M(g(et,ue),-B[1]),M(g(xt,fe),F[1]))),-O[2])),S(M(S(M(g(at,Ce),D[1]),S(M(g(et,ue),-O[1]),M(g(te,K),F[1]))),B[2]),M(S(M(g(Ht,_e),D[1]),S(M(g(xt,fe),-O[1]),M(g(te,K),B[1]))),-F[2]))),-q[3])))),S(S(S(M(S(S(M(S(M(g(dt,Ke),q[1]),S(M(g(vt,me),-B[1]),M(g(Vt,le),F[1]))),D[2]),M(S(M(g(dt,Ke),D[1]),S(M(g(et,ue),-B[1]),M(g(xt,fe),F[1]))),-q[2])),S(M(S(M(g(vt,me),D[1]),S(M(g(et,ue),-q[1]),M(g(Z,X),F[1]))),B[2]),M(S(M(g(Vt,le),D[1]),S(M(g(xt,fe),-q[1]),M(g(Z,X),B[1]))),-F[2]))),O[3]),M(S(S(M(S(M(g(at,Ce),q[1]),S(M(g(vt,me),-O[1]),M(g(ge,oe),F[1]))),D[2]),M(S(M(g(at,Ce),D[1]),S(M(g(et,ue),-O[1]),M(g(te,K),F[1]))),-q[2])),S(M(S(M(g(vt,me),D[1]),S(M(g(et,ue),-q[1]),M(g(Z,X),F[1]))),O[2]),M(S(M(g(ge,oe),D[1]),S(M(g(te,K),-q[1]),M(g(Z,X),O[1]))),-F[2]))),-B[3])),S(M(S(S(M(S(M(g(Ht,_e),q[1]),S(M(g(Vt,le),-O[1]),M(g(ge,oe),B[1]))),D[2]),M(S(M(g(Ht,_e),D[1]),S(M(g(xt,fe),-O[1]),M(g(te,K),B[1]))),-q[2])),S(M(S(M(g(Vt,le),D[1]),S(M(g(xt,fe),-q[1]),M(g(Z,X),B[1]))),O[2]),M(S(M(g(ge,oe),D[1]),S(M(g(te,K),-q[1]),M(g(Z,X),O[1]))),-B[2]))),F[3]),M(S(S(M(S(M(g(Me,ot),O[1]),S(M(g(Ht,_e),-U[1]),M(g(Ie,ae),B[1]))),q[2]),M(S(M(g(Me,ot),q[1]),S(M(g(Vt,le),-U[1]),M(g(Re,ce),B[1]))),-O[2])),S(M(S(M(g(Ht,_e),q[1]),S(M(g(Vt,le),-O[1]),M(g(ge,oe),B[1]))),U[2]),M(S(M(g(Ie,ae),q[1]),S(M(g(Re,ce),-O[1]),M(g(ge,oe),U[1]))),-B[2]))),D[3]))),S(S(M(S(S(M(S(M(g(Me,ot),O[1]),S(M(g(Ht,_e),-U[1]),M(g(Ie,ae),B[1]))),D[2]),M(S(M(g(Me,ot),D[1]),S(M(g(xt,fe),-U[1]),M(g(rt,ne),B[1]))),-O[2])),S(M(S(M(g(Ht,_e),D[1]),S(M(g(xt,fe),-O[1]),M(g(te,K),B[1]))),U[2]),M(S(M(g(Ie,ae),D[1]),S(M(g(rt,ne),-O[1]),M(g(te,K),U[1]))),-B[2]))),-q[3]),M(S(S(M(S(M(g(Me,ot),q[1]),S(M(g(Vt,le),-U[1]),M(g(Re,ce),B[1]))),D[2]),M(S(M(g(Me,ot),D[1]),S(M(g(xt,fe),-U[1]),M(g(rt,ne),B[1]))),-q[2])),S(M(S(M(g(Vt,le),D[1]),S(M(g(xt,fe),-q[1]),M(g(Z,X),B[1]))),U[2]),M(S(M(g(Re,ce),D[1]),S(M(g(rt,ne),-q[1]),M(g(Z,X),U[1]))),-B[2]))),O[3])),S(M(S(S(M(S(M(g(Ht,_e),q[1]),S(M(g(Vt,le),-O[1]),M(g(ge,oe),B[1]))),D[2]),M(S(M(g(Ht,_e),D[1]),S(M(g(xt,fe),-O[1]),M(g(te,K),B[1]))),-q[2])),S(M(S(M(g(Vt,le),D[1]),S(M(g(xt,fe),-q[1]),M(g(Z,X),B[1]))),O[2]),M(S(M(g(ge,oe),D[1]),S(M(g(te,K),-q[1]),M(g(Z,X),O[1]))),-B[2]))),-U[3]),M(S(S(M(S(M(g(Ie,ae),q[1]),S(M(g(Re,ce),-O[1]),M(g(ge,oe),U[1]))),D[2]),M(S(M(g(Ie,ae),D[1]),S(M(g(rt,ne),-O[1]),M(g(te,K),U[1]))),-q[2])),S(M(S(M(g(Re,ce),D[1]),S(M(g(rt,ne),-q[1]),M(g(Z,X),U[1]))),O[2]),M(S(M(g(ge,oe),D[1]),S(M(g(te,K),-q[1]),M(g(Z,X),O[1]))),-U[2]))),B[3]))))),Ut=g(_t,$t);return Ut[Ut.length-1]}return P}var T=[v,d,x];function k(S){var g=T[S.length];return g||(g=T[S.length]=h(S.length)),g.apply(void 0,S)}function _(S,g,C,M,P,D,q,O){function U(B,F,N,X,K,ne){switch(arguments.length){case 0:case 1:return 0;case 2:return M(B,F);case 3:return P(B,F,N);case 4:return D(B,F,N,X);case 5:return q(B,F,N,X,K);case 6:return O(B,F,N,X,K,ne)}for(var fe=new Array(arguments.length),ue=0;ue<arguments.length;++ue)fe[ue]=arguments[ue];return S(fe)}return U}function E(){for(;T.length<=c;)T.push(h(T.length));n.exports=_.apply(void 0,[k].concat(T));for(var S=0;S<=c;++S)n.exports[S]=T[S]}E()},727:function(n,a,o){"use strict";var s=o(2962),l=6;function u(T){var k=T===2?h:T===3?v:T===4?d:T===5?x:b;return T<6?k(s[T]):k(s)}function f(){return[[0]]}function c(T,k){return[[k[0]],[T[0][0]]]}function h(T){return function(_,E){return[T([[+E[0],+_[0][1]],[+E[1],+_[1][1]]]),T([[+_[0][0],+E[0]],[+_[1][0],+E[1]]]),T(_)]}}function v(T){return function(_,E){return[T([[+E[0],+_[0][1],+_[0][2]],[+E[1],+_[1][1],+_[1][2]],[+E[2],+_[2][1],+_[2][2]]]),T([[+_[0][0],+E[0],+_[0][2]],[+_[1][0],+E[1],+_[1][2]],[+_[2][0],+E[2],+_[2][2]]]),T([[+_[0][0],+_[0][1],+E[0]],[+_[1][0],+_[1][1],+E[1]],[+_[2][0],+_[2][1],+E[2]]]),T(_)]}}function d(T){return function(_,E){return[T([[+E[0],+_[0][1],+_[0][2],+_[0][3]],[+E[1],+_[1][1],+_[1][2],+_[1][3]],[+E[2],+_[2][1],+_[2][2],+_[2][3]],[+E[3],+_[3][1],+_[3][2],+_[3][3]]]),T([[+_[0][0],+E[0],+_[0][2],+_[0][3]],[+_[1][0],+E[1],+_[1][2],+_[1][3]],[+_[2][0],+E[2],+_[2][2],+_[2][3]],[+_[3][0],+E[3],+_[3][2],+_[3][3]]]),T([[+_[0][0],+_[0][1],+E[0],+_[0][3]],[+_[1][0],+_[1][1],+E[1],+_[1][3]],[+_[2][0],+_[2][1],+E[2],+_[2][3]],[+_[3][0],+_[3][1],+E[3],+_[3][3]]]),T([[+_[0][0],+_[0][1],+_[0][2],+E[0]],[+_[1][0],+_[1][1],+_[1][2],+E[1]],[+_[2][0],+_[2][1],+_[2][2],+E[2]],[+_[3][0],+_[3][1],+_[3][2],+E[3]]]),T(_)]}}function x(T){return function(_,E){return[T([[+E[0],+_[0][1],+_[0][2],+_[0][3],+_[0][4]],[+E[1],+_[1][1],+_[1][2],+_[1][3],+_[1][4]],[+E[2],+_[2][1],+_[2][2],+_[2][3],+_[2][4]],[+E[3],+_[3][1],+_[3][2],+_[3][3],+_[3][4]],[+E[4],+_[4][1],+_[4][2],+_[4][3],+_[4][4]]]),T([[+_[0][0],+E[0],+_[0][2],+_[0][3],+_[0][4]],[+_[1][0],+E[1],+_[1][2],+_[1][3],+_[1][4]],[+_[2][0],+E[2],+_[2][2],+_[2][3],+_[2][4]],[+_[3][0],+E[3],+_[3][2],+_[3][3],+_[3][4]],[+_[4][0],+E[4],+_[4][2],+_[4][3],+_[4][4]]]),T([[+_[0][0],+_[0][1],+E[0],+_[0][3],+_[0][4]],[+_[1][0],+_[1][1],+E[1],+_[1][3],+_[1][4]],[+_[2][0],+_[2][1],+E[2],+_[2][3],+_[2][4]],[+_[3][0],+_[3][1],+E[3],+_[3][3],+_[3][4]],[+_[4][0],+_[4][1],+E[4],+_[4][3],+_[4][4]]]),T([[+_[0][0],+_[0][1],+_[0][2],+E[0],+_[0][4]],[+_[1][0],+_[1][1],+_[1][2],+E[1],+_[1][4]],[+_[2][0],+_[2][1],+_[2][2],+E[2],+_[2][4]],[+_[3][0],+_[3][1],+_[3][2],+E[3],+_[3][4]],[+_[4][0],+_[4][1],+_[4][2],+E[4],+_[4][4]]]),T([[+_[0][0],+_[0][1],+_[0][2],+_[0][3],+E[0]],[+_[1][0],+_[1][1],+_[1][2],+_[1][3],+E[1]],[+_[2][0],+_[2][1],+_[2][2],+_[2][3],+E[2]],[+_[3][0],+_[3][1],+_[3][2],+_[3][3],+E[3]],[+_[4][0],+_[4][1],+_[4][2],+_[4][3],+E[4]]]),T(_)]}}function b(T){return function(_,E){return[T([[+E[0],+_[0][1],+_[0][2],+_[0][3],+_[0][4],+_[0][5]],[+E[1],+_[1][1],+_[1][2],+_[1][3],+_[1][4],+_[1][5]],[+E[2],+_[2][1],+_[2][2],+_[2][3],+_[2][4],+_[2][5]],[+E[3],+_[3][1],+_[3][2],+_[3][3],+_[3][4],+_[3][5]],[+E[4],+_[4][1],+_[4][2],+_[4][3],+_[4][4],+_[4][5]],[+E[5],+_[5][1],+_[5][2],+_[5][3],+_[5][4],+_[5][5]]]),T([[+_[0][0],+E[0],+_[0][2],+_[0][3],+_[0][4],+_[0][5]],[+_[1][0],+E[1],+_[1][2],+_[1][3],+_[1][4],+_[1][5]],[+_[2][0],+E[2],+_[2][2],+_[2][3],+_[2][4],+_[2][5]],[+_[3][0],+E[3],+_[3][2],+_[3][3],+_[3][4],+_[3][5]],[+_[4][0],+E[4],+_[4][2],+_[4][3],+_[4][4],+_[4][5]],[+_[5][0],+E[5],+_[5][2],+_[5][3],+_[5][4],+_[5][5]]]),T([[+_[0][0],+_[0][1],+E[0],+_[0][3],+_[0][4],+_[0][5]],[+_[1][0],+_[1][1],+E[1],+_[1][3],+_[1][4],+_[1][5]],[+_[2][0],+_[2][1],+E[2],+_[2][3],+_[2][4],+_[2][5]],[+_[3][0],+_[3][1],+E[3],+_[3][3],+_[3][4],+_[3][5]],[+_[4][0],+_[4][1],+E[4],+_[4][3],+_[4][4],+_[4][5]],[+_[5][0],+_[5][1],+E[5],+_[5][3],+_[5][4],+_[5][5]]]),T([[+_[0][0],+_[0][1],+_[0][2],+E[0],+_[0][4],+_[0][5]],[+_[1][0],+_[1][1],+_[1][2],+E[1],+_[1][4],+_[1][5]],[+_[2][0],+_[2][1],+_[2][2],+E[2],+_[2][4],+_[2][5]],[+_[3][0],+_[3][1],+_[3][2],+E[3],+_[3][4],+_[3][5]],[+_[4][0],+_[4][1],+_[4][2],+E[4],+_[4][4],+_[4][5]],[+_[5][0],+_[5][1],+_[5][2],+E[5],+_[5][4],+_[5][5]]]),T([[+_[0][0],+_[0][1],+_[0][2],+_[0][3],+E[0],+_[0][5]],[+_[1][0],+_[1][1],+_[1][2],+_[1][3],+E[1],+_[1][5]],[+_[2][0],+_[2][1],+_[2][2],+_[2][3],+E[2],+_[2][5]],[+_[3][0],+_[3][1],+_[3][2],+_[3][3],+E[3],+_[3][5]],[+_[4][0],+_[4][1],+_[4][2],+_[4][3],+E[4],+_[4][5]],[+_[5][0],+_[5][1],+_[5][2],+_[5][3],+E[5],+_[5][5]]]),T([[+_[0][0],+_[0][1],+_[0][2],+_[0][3],+_[0][4],+E[0]],[+_[1][0],+_[1][1],+_[1][2],+_[1][3],+_[1][4],+E[1]],[+_[2][0],+_[2][1],+_[2][2],+_[2][3],+_[2][4],+E[2]],[+_[3][0],+_[3][1],+_[3][2],+_[3][3],+_[3][4],+E[3]],[+_[4][0],+_[4][1],+_[4][2],+_[4][3],+_[4][4],+E[4]],[+_[5][0],+_[5][1],+_[5][2],+_[5][3],+_[5][4],+E[5]]]),T(_)]}}var p=[f,c];function w(T,k,_,E,S,g,C,M){return function(D,q){switch(D.length){case 0:return T(D,q);case 1:return k(D,q);case 2:return _(D,q);case 3:return E(D,q);case 4:return S(D,q);case 5:return g(D,q)}var O=C[D.length];return O||(O=C[D.length]=M(D.length)),O(D,q)}}function A(){for(;p.length<l;)p.push(u(p.length));n.exports=w.apply(void 0,p.concat([p,u]));for(var T=0;T<l;++T)n.exports[T]=p[T]}A()},3250:function(n,a,o){"use strict";var s=o(5250),l=o(8210),u=o(3012),f=o(8545),c=5,h=11102230246251565e-32,v=(3+16*h)*h,d=(7+56*h)*h;function x(g,C,M,P){return function(q,O,U){var B=g(g(C(O[1],U[0]),C(-U[1],O[0])),g(C(q[1],O[0]),C(-O[1],q[0]))),F=g(C(q[1],U[0]),C(-U[1],q[0])),N=P(B,F);return N[N.length-1]}}function b(g,C,M,P){return function(q,O,U,B){var F=g(g(M(g(C(U[1],B[0]),C(-B[1],U[0])),O[2]),g(M(g(C(O[1],B[0]),C(-B[1],O[0])),-U[2]),M(g(C(O[1],U[0]),C(-U[1],O[0])),B[2]))),g(M(g(C(O[1],B[0]),C(-B[1],O[0])),q[2]),g(M(g(C(q[1],B[0]),C(-B[1],q[0])),-O[2]),M(g(C(q[1],O[0]),C(-O[1],q[0])),B[2])))),N=g(g(M(g(C(U[1],B[0]),C(-B[1],U[0])),q[2]),g(M(g(C(q[1],B[0]),C(-B[1],q[0])),-U[2]),M(g(C(q[1],U[0]),C(-U[1],q[0])),B[2]))),g(M(g(C(O[1],U[0]),C(-U[1],O[0])),q[2]),g(M(g(C(q[1],U[0]),C(-U[1],q[0])),-O[2]),M(g(C(q[1],O[0]),C(-O[1],q[0])),U[2])))),X=P(F,N);return X[X.length-1]}}function p(g,C,M,P){return function(q,O,U,B,F){var N=g(g(g(M(g(M(g(C(B[1],F[0]),C(-F[1],B[0])),U[2]),g(M(g(C(U[1],F[0]),C(-F[1],U[0])),-B[2]),M(g(C(U[1],B[0]),C(-B[1],U[0])),F[2]))),O[3]),g(M(g(M(g(C(B[1],F[0]),C(-F[1],B[0])),O[2]),g(M(g(C(O[1],F[0]),C(-F[1],O[0])),-B[2]),M(g(C(O[1],B[0]),C(-B[1],O[0])),F[2]))),-U[3]),M(g(M(g(C(U[1],F[0]),C(-F[1],U[0])),O[2]),g(M(g(C(O[1],F[0]),C(-F[1],O[0])),-U[2]),M(g(C(O[1],U[0]),C(-U[1],O[0])),F[2]))),B[3]))),g(M(g(M(g(C(U[1],B[0]),C(-B[1],U[0])),O[2]),g(M(g(C(O[1],B[0]),C(-B[1],O[0])),-U[2]),M(g(C(O[1],U[0]),C(-U[1],O[0])),B[2]))),-F[3]),g(M(g(M(g(C(B[1],F[0]),C(-F[1],B[0])),O[2]),g(M(g(C(O[1],F[0]),C(-F[1],O[0])),-B[2]),M(g(C(O[1],B[0]),C(-B[1],O[0])),F[2]))),q[3]),M(g(M(g(C(B[1],F[0]),C(-F[1],B[0])),q[2]),g(M(g(C(q[1],F[0]),C(-F[1],q[0])),-B[2]),M(g(C(q[1],B[0]),C(-B[1],q[0])),F[2]))),-O[3])))),g(g(M(g(M(g(C(O[1],F[0]),C(-F[1],O[0])),q[2]),g(M(g(C(q[1],F[0]),C(-F[1],q[0])),-O[2]),M(g(C(q[1],O[0]),C(-O[1],q[0])),F[2]))),B[3]),g(M(g(M(g(C(O[1],B[0]),C(-B[1],O[0])),q[2]),g(M(g(C(q[1],B[0]),C(-B[1],q[0])),-O[2]),M(g(C(q[1],O[0]),C(-O[1],q[0])),B[2]))),-F[3]),M(g(M(g(C(U[1],B[0]),C(-B[1],U[0])),O[2]),g(M(g(C(O[1],B[0]),C(-B[1],O[0])),-U[2]),M(g(C(O[1],U[0]),C(-U[1],O[0])),B[2]))),q[3]))),g(M(g(M(g(C(U[1],B[0]),C(-B[1],U[0])),q[2]),g(M(g(C(q[1],B[0]),C(-B[1],q[0])),-U[2]),M(g(C(q[1],U[0]),C(-U[1],q[0])),B[2]))),-O[3]),g(M(g(M(g(C(O[1],B[0]),C(-B[1],O[0])),q[2]),g(M(g(C(q[1],B[0]),C(-B[1],q[0])),-O[2]),M(g(C(q[1],O[0]),C(-O[1],q[0])),B[2]))),U[3]),M(g(M(g(C(O[1],U[0]),C(-U[1],O[0])),q[2]),g(M(g(C(q[1],U[0]),C(-U[1],q[0])),-O[2]),M(g(C(q[1],O[0]),C(-O[1],q[0])),U[2]))),-B[3]))))),X=g(g(g(M(g(M(g(C(B[1],F[0]),C(-F[1],B[0])),U[2]),g(M(g(C(U[1],F[0]),C(-F[1],U[0])),-B[2]),M(g(C(U[1],B[0]),C(-B[1],U[0])),F[2]))),q[3]),M(g(M(g(C(B[1],F[0]),C(-F[1],B[0])),q[2]),g(M(g(C(q[1],F[0]),C(-F[1],q[0])),-B[2]),M(g(C(q[1],B[0]),C(-B[1],q[0])),F[2]))),-U[3])),g(M(g(M(g(C(U[1],F[0]),C(-F[1],U[0])),q[2]),g(M(g(C(q[1],F[0]),C(-F[1],q[0])),-U[2]),M(g(C(q[1],U[0]),C(-U[1],q[0])),F[2]))),B[3]),M(g(M(g(C(U[1],B[0]),C(-B[1],U[0])),q[2]),g(M(g(C(q[1],B[0]),C(-B[1],q[0])),-U[2]),M(g(C(q[1],U[0]),C(-U[1],q[0])),B[2]))),-F[3]))),g(g(M(g(M(g(C(U[1],F[0]),C(-F[1],U[0])),O[2]),g(M(g(C(O[1],F[0]),C(-F[1],O[0])),-U[2]),M(g(C(O[1],U[0]),C(-U[1],O[0])),F[2]))),q[3]),M(g(M(g(C(U[1],F[0]),C(-F[1],U[0])),q[2]),g(M(g(C(q[1],F[0]),C(-F[1],q[0])),-U[2]),M(g(C(q[1],U[0]),C(-U[1],q[0])),F[2]))),-O[3])),g(M(g(M(g(C(O[1],F[0]),C(-F[1],O[0])),q[2]),g(M(g(C(q[1],F[0]),C(-F[1],q[0])),-O[2]),M(g(C(q[1],O[0]),C(-O[1],q[0])),F[2]))),U[3]),M(g(M(g(C(O[1],U[0]),C(-U[1],O[0])),q[2]),g(M(g(C(q[1],U[0]),C(-U[1],q[0])),-O[2]),M(g(C(q[1],O[0]),C(-O[1],q[0])),U[2]))),-F[3])))),K=P(N,X);return K[K.length-1]}}function w(g){var C=g===3?x:g===4?b:p;return C(l,s,u,f)}var A=w(3),T=w(4),k=[function(){return 0},function(){return 0},function(C,M){return M[0]-C[0]},function(C,M,P){var D=(C[1]-P[1])*(M[0]-P[0]),q=(C[0]-P[0])*(M[1]-P[1]),O=D-q,U;if(D>0){if(q<=0)return O;U=D+q}else if(D<0){if(q>=0)return O;U=-(D+q)}else return O;var B=v*U;return O>=B||O<=-B?O:A(C,M,P)},function(C,M,P,D){var q=C[0]-D[0],O=M[0]-D[0],U=P[0]-D[0],B=C[1]-D[1],F=M[1]-D[1],N=P[1]-D[1],X=C[2]-D[2],K=M[2]-D[2],ne=P[2]-D[2],fe=O*N,ue=U*F,ee=U*B,Z=q*N,oe=q*F,ce=O*B,le=X*(fe-ue)+K*(ee-Z)+ne*(oe-ce),me=(Math.abs(fe)+Math.abs(ue))*Math.abs(X)+(Math.abs(ee)+Math.abs(Z))*Math.abs(K)+(Math.abs(oe)+Math.abs(ce))*Math.abs(ne),he=d*me;return le>he||-le>he?le:T(C,M,P,D)}];function _(g){var C=k[g.length];return C||(C=k[g.length]=w(g.length)),C.apply(void 0,g)}function E(g,C,M,P,D,q,O){return function(B,F,N,X,K){switch(arguments.length){case 0:case 1:return 0;case 2:return P(B,F);case 3:return D(B,F,N);case 4:return q(B,F,N,X);case 5:return O(B,F,N,X,K)}for(var ne=new Array(arguments.length),fe=0;fe<arguments.length;++fe)ne[fe]=arguments[fe];return g(ne)}}function S(){for(;k.length<=c;)k.push(w(k.length));n.exports=E.apply(void 0,[_].concat(k));for(var g=0;g<=c;++g)n.exports[g]=k[g]}S()},5382:function(n,a,o){"use strict";var s=o(8210),l=o(3012);n.exports=u;function u(f,c){if(f.length===1)return l(c,f[0]);if(c.length===1)return l(f,c[0]);if(f.length===0||c.length===0)return[0];var h=[0];if(f.length<c.length)for(var v=0;v<f.length;++v)h=s(h,l(c,f[v]));else for(var v=0;v<c.length;++v)h=s(h,l(f,c[v]));return h}},3012:function(n,a,o){"use strict";var s=o(5250),l=o(9362);n.exports=u;function u(f,c){var h=f.length;if(h===1){var v=s(f[0],c);return v[0]?v:[v[1]]}var d=new Array(2*h),x=[.1,.1],b=[.1,.1],p=0;s(f[0],c,x),x[0]&&(d[p++]=x[0]);for(var w=1;w<h;++w){s(f[w],c,b);var A=x[1];l(A,b[0],x),x[0]&&(d[p++]=x[0]);var T=b[1],k=x[1],_=T+k,E=_-T,S=k-E;x[1]=_,S&&(d[p++]=S)}return x[1]&&(d[p++]=x[1]),p===0&&(d[p++]=0),d.length=p,d}},1125:function(n,a,o){"use strict";n.exports=u;var s=o(3250)[3];function l(f,c,h,v){for(var d=0;d<2;++d){var x=f[d],b=c[d],p=Math.min(x,b),w=Math.max(x,b),A=h[d],T=v[d],k=Math.min(A,T),_=Math.max(A,T);if(_<p||w<k)return!1}return!0}function u(f,c,h,v){var d=s(f,h,v),x=s(c,h,v);if(d>0&&x>0||d<0&&x<0)return!1;var b=s(h,f,c),p=s(v,f,c);return b>0&&p>0||b<0&&p<0?!1:d===0&&x===0&&b===0&&p===0?l(f,c,h,v):!0}},8545:function(n){"use strict";n.exports=o;function a(s,l){var u=s+l,f=u-s,c=u-f,h=l-f,v=s-c,d=v+h;return d?[d,u]:[u]}function o(s,l){var u=s.length|0,f=l.length|0;if(u===1&&f===1)return a(s[0],-l[0]);var c=u+f,h=new Array(c),v=0,d=0,x=0,b=Math.abs,p=s[d],w=b(p),A=-l[x],T=b(A),k,_;w<T?(_=p,d+=1,d<u&&(p=s[d],w=b(p))):(_=A,x+=1,x<f&&(A=-l[x],T=b(A))),d<u&&w<T||x>=f?(k=p,d+=1,d<u&&(p=s[d],w=b(p))):(k=A,x+=1,x<f&&(A=-l[x],T=b(A)));for(var E=k+_,S=E-k,g=_-S,C=g,M=E,P,D,q,O,U;d<u&&x<f;)w<T?(k=p,d+=1,d<u&&(p=s[d],w=b(p))):(k=A,x+=1,x<f&&(A=-l[x],T=b(A))),_=C,E=k+_,S=E-k,g=_-S,g&&(h[v++]=g),P=M+E,D=P-M,q=P-D,O=E-D,U=M-q,C=U+O,M=P;for(;d<u;)k=p,_=C,E=k+_,S=E-k,g=_-S,g&&(h[v++]=g),P=M+E,D=P-M,q=P-D,O=E-D,U=M-q,C=U+O,M=P,d+=1,d<u&&(p=s[d]);for(;x<f;)k=A,_=C,E=k+_,S=E-k,g=_-S,g&&(h[v++]=g),P=M+E,D=P-M,q=P-D,O=E-D,U=M-q,C=U+O,M=P,x+=1,x<f&&(A=-l[x]);return C&&(h[v++]=C),M&&(h[v++]=M),v||(h[v++]=0),h.length=v,h}},8210:function(n){"use strict";n.exports=o;function a(s,l){var u=s+l,f=u-s,c=u-f,h=l-f,v=s-c,d=v+h;return d?[d,u]:[u]}function o(s,l){var u=s.length|0,f=l.length|0;if(u===1&&f===1)return a(s[0],l[0]);var c=u+f,h=new Array(c),v=0,d=0,x=0,b=Math.abs,p=s[d],w=b(p),A=l[x],T=b(A),k,_;w<T?(_=p,d+=1,d<u&&(p=s[d],w=b(p))):(_=A,x+=1,x<f&&(A=l[x],T=b(A))),d<u&&w<T||x>=f?(k=p,d+=1,d<u&&(p=s[d],w=b(p))):(k=A,x+=1,x<f&&(A=l[x],T=b(A)));for(var E=k+_,S=E-k,g=_-S,C=g,M=E,P,D,q,O,U;d<u&&x<f;)w<T?(k=p,d+=1,d<u&&(p=s[d],w=b(p))):(k=A,x+=1,x<f&&(A=l[x],T=b(A))),_=C,E=k+_,S=E-k,g=_-S,g&&(h[v++]=g),P=M+E,D=P-M,q=P-D,O=E-D,U=M-q,C=U+O,M=P;for(;d<u;)k=p,_=C,E=k+_,S=E-k,g=_-S,g&&(h[v++]=g),P=M+E,D=P-M,q=P-D,O=E-D,U=M-q,C=U+O,M=P,d+=1,d<u&&(p=s[d]);for(;x<f;)k=A,_=C,E=k+_,S=E-k,g=_-S,g&&(h[v++]=g),P=M+E,D=P-M,q=P-D,O=E-D,U=M-q,C=U+O,M=P,x+=1,x<f&&(A=l[x]);return C&&(h[v++]=C),M&&(h[v++]=M),v||(h[v++]=0),h.length=v,h}},9127:function(n,a,o){"use strict";n.exports=u;var s=o(6204),l=o(5771);function u(f){return l(s(f))}},7765:function(n,a,o){"use strict";n.exports=p;var s=o(9618),l=o(1888),u=o(446),f=o(1570);function c(w){for(var A=w.length,T=0,k=0;k<A;++k)T=Math.max(T,w[k].length)|0;return T-1}function h(w,A){for(var T=w.length,k=l.mallocUint8(T),_=0;_<T;++_)k[_]=w[_]<A|0;return k}function v(w,A){for(var T=w.length,k=A*(A+1)/2*T|0,_=l.mallocUint32(k*2),E=0,S=0;S<T;++S)for(var g=w[S],A=g.length,C=0;C<A;++C)for(var M=0;M<C;++M){var P=g[M],D=g[C];_[E++]=Math.min(P,D)|0,_[E++]=Math.max(P,D)|0}var q=E/2|0;u(s(_,[q,2]));for(var O=2,S=2;S<E;S+=2)_[S-2]===_[S]&&_[S-1]===_[S+1]||(_[O++]=_[S],_[O++]=_[S+1]);return s(_,[O/2|0,2])}function d(w,A,T,k){for(var _=w.data,E=w.shape[0],S=l.mallocDouble(E),g=0,C=0;C<E;++C){var M=_[2*C],P=_[2*C+1];if(T[M]!==T[P]){var D=A[M],q=A[P];_[2*g]=M,_[2*g+1]=P,S[g++]=(q-k)/(q-D)}}return w.shape[0]=g,s(S,[g])}function x(w,A){var T=l.mallocInt32(A*2),k=w.shape[0],_=w.data;T[0]=0;for(var E=0,S=0;S<k;++S){var g=_[2*S];if(g!==E){for(T[2*E+1]=S;++E<g;)T[2*E]=S,T[2*E+1]=S;T[2*E]=S}}for(T[2*E+1]=k;++E<A;)T[2*E]=T[2*E+1]=k;return T}function b(w){for(var A=w.shape[0]|0,T=w.data,k=new Array(A),_=0;_<A;++_)k[_]=[T[2*_],T[2*_+1]];return k}function p(w,A,T,k){T=T||0,typeof k=="undefined"&&(k=c(w));var _=w.length;if(_===0||k<1)return{cells:[],vertexIds:[],vertexWeights:[]};var E=h(A,+T),S=v(w,k),g=d(S,A,E,+T),C=x(S,A.length|0),M=f(k)(w,S.data,C,E),P=b(S),D=[].slice.call(g.data,0,g.shape[0]);return l.free(E),l.free(S.data),l.free(g.data),l.free(C),{cells:M,vertexIds:P,vertexWeights:D}}},1570:function(n){"use strict";n.exports=o;var a=[function(){function l(f,c,h,v){for(var d=Math.min(h,v)|0,x=Math.max(h,v)|0,b=f[2*d],p=f[2*d+1];b<p;){var w=b+p>>1,A=c[2*w+1];if(A===x)return w;x<A?p=w:b=w+1}return b}function u(f,c,h,v){for(var d=f.length,x=[],b=0;b<d;++b)var p=f[b],w=p.length;return x}return u},function(){function l(f,c,h,v){for(var d=Math.min(h,v)|0,x=Math.max(h,v)|0,b=f[2*d],p=f[2*d+1];b<p;){var w=b+p>>1,A=c[2*w+1];if(A===x)return w;x<A?p=w:b=w+1}return b}function u(f,c,h,v){for(var d=f.length,x=[],b=0;b<d;++b){var p=f[b],w=p.length;if(w===2){var A=(v[p[0]]<<0)+(v[p[1]]<<1);if(A===0||A===3)continue;switch(A){case 0:break;case 1:x.push([l(h,c,p[0],p[1])]);break;case 2:x.push([l(h,c,p[1],p[0])]);break;case 3:break}}}return x}return u},function(){function l(f,c,h,v){for(var d=Math.min(h,v)|0,x=Math.max(h,v)|0,b=f[2*d],p=f[2*d+1];b<p;){var w=b+p>>1,A=c[2*w+1];if(A===x)return w;x<A?p=w:b=w+1}return b}function u(f,c,h,v){for(var d=f.length,x=[],b=0;b<d;++b){var p=f[b],w=p.length;if(w===3){var A=(v[p[0]]<<0)+(v[p[1]]<<1)+(v[p[2]]<<2);if(A===0||A===7)continue;switch(A){case 0:break;case 1:x.push([l(h,c,p[0],p[2]),l(h,c,p[0],p[1])]);break;case 2:x.push([l(h,c,p[1],p[0]),l(h,c,p[1],p[2])]);break;case 3:x.push([l(h,c,p[0],p[2]),l(h,c,p[1],p[2])]);break;case 4:x.push([l(h,c,p[2],p[1]),l(h,c,p[2],p[0])]);break;case 5:x.push([l(h,c,p[2],p[1]),l(h,c,p[0],p[1])]);break;case 6:x.push([l(h,c,p[1],p[0]),l(h,c,p[2],p[0])]);break;case 7:break}}else if(w===2){var A=(v[p[0]]<<0)+(v[p[1]]<<1);if(A===0||A===3)continue;switch(A){case 0:break;case 1:x.push([l(h,c,p[0],p[1])]);break;case 2:x.push([l(h,c,p[1],p[0])]);break;case 3:break}}}return x}return u},function(){function l(f,c,h,v){for(var d=Math.min(h,v)|0,x=Math.max(h,v)|0,b=f[2*d],p=f[2*d+1];b<p;){var w=b+p>>1,A=c[2*w+1];if(A===x)return w;x<A?p=w:b=w+1}return b}function u(f,c,h,v){for(var d=f.length,x=[],b=0;b<d;++b){var p=f[b],w=p.length;if(w===4){var A=(v[p[0]]<<0)+(v[p[1]]<<1)+(v[p[2]]<<2)+(v[p[3]]<<3);if(A===0||A===15)continue;switch(A){case 0:break;case 1:x.push([l(h,c,p[0],p[1]),l(h,c,p[0],p[2]),l(h,c,p[0],p[3])]);break;case 2:x.push([l(h,c,p[1],p[2]),l(h,c,p[1],p[0]),l(h,c,p[1],p[3])]);break;case 3:x.push([l(h,c,p[1],p[2]),l(h,c,p[0],p[2]),l(h,c,p[0],p[3])],[l(h,c,p[1],p[3]),l(h,c,p[1],p[2]),l(h,c,p[0],p[3])]);break;case 4:x.push([l(h,c,p[2],p[0]),l(h,c,p[2],p[1]),l(h,c,p[2],p[3])]);break;case 5:x.push([l(h,c,p[0],p[1]),l(h,c,p[2],p[1]),l(h,c,p[0],p[3])],[l(h,c,p[2],p[1]),l(h,c,p[2],p[3]),l(h,c,p[0],p[3])]);break;case 6:x.push([l(h,c,p[2],p[0]),l(h,c,p[1],p[0]),l(h,c,p[1],p[3])],[l(h,c,p[2],p[3]),l(h,c,p[2],p[0]),l(h,c,p[1],p[3])]);break;case 7:x.push([l(h,c,p[0],p[3]),l(h,c,p[1],p[3]),l(h,c,p[2],p[3])]);break;case 8:x.push([l(h,c,p[3],p[1]),l(h,c,p[3],p[0]),l(h,c,p[3],p[2])]);break;case 9:x.push([l(h,c,p[3],p[1]),l(h,c,p[0],p[1]),l(h,c,p[0],p[2])],[l(h,c,p[3],p[2]),l(h,c,p[3],p[1]),l(h,c,p[0],p[2])]);break;case 10:x.push([l(h,c,p[1],p[0]),l(h,c,p[3],p[0]),l(h,c,p[1],p[2])],[l(h,c,p[3],p[0]),l(h,c,p[3],p[2]),l(h,c,p[1],p[2])]);break;case 11:x.push([l(h,c,p[1],p[2]),l(h,c,p[0],p[2]),l(h,c,p[3],p[2])]);break;case 12:x.push([l(h,c,p[3],p[0]),l(h,c,p[2],p[0]),l(h,c,p[2],p[1])],[l(h,c,p[3],p[1]),l(h,c,p[3],p[0]),l(h,c,p[2],p[1])]);break;case 13:x.push([l(h,c,p[0],p[1]),l(h,c,p[2],p[1]),l(h,c,p[3],p[1])]);break;case 14:x.push([l(h,c,p[2],p[0]),l(h,c,p[1],p[0]),l(h,c,p[3],p[0])]);break;case 15:break}}else if(w===3){var A=(v[p[0]]<<0)+(v[p[1]]<<1)+(v[p[2]]<<2);if(A===0||A===7)continue;switch(A){case 0:break;case 1:x.push([l(h,c,p[0],p[2]),l(h,c,p[0],p[1])]);break;case 2:x.push([l(h,c,p[1],p[0]),l(h,c,p[1],p[2])]);break;case 3:x.push([l(h,c,p[0],p[2]),l(h,c,p[1],p[2])]);break;case 4:x.push([l(h,c,p[2],p[1]),l(h,c,p[2],p[0])]);break;case 5:x.push([l(h,c,p[2],p[1]),l(h,c,p[0],p[1])]);break;case 6:x.push([l(h,c,p[1],p[0]),l(h,c,p[2],p[0])]);break;case 7:break}}else if(w===2){var A=(v[p[0]]<<0)+(v[p[1]]<<1);if(A===0||A===3)continue;switch(A){case 0:break;case 1:x.push([l(h,c,p[0],p[1])]);break;case 2:x.push([l(h,c,p[1],p[0])]);break;case 3:break}}}return x}return u}];function o(s){return a[s]()}},6803:function(n,a,o){"use strict";var s,l=o(8828),u=o(1755);function f(C){for(var M=0,P=Math.max,D=0,q=C.length;D<q;++D)M=P(M,C[D].length);return M-1}s=f;function c(C){for(var M=-1,P=Math.max,D=0,q=C.length;D<q;++D)for(var O=C[D],U=0,B=O.length;U<B;++U)M=P(M,O[U]);return M+1}s=c;function h(C){for(var M=new Array(C.length),P=0,D=C.length;P<D;++P)M[P]=C[P].slice(0);return M}s=h;function v(C,M){var P=C.length,D=C.length-M.length,q=Math.min;if(D)return D;switch(P){case 0:return 0;case 1:return C[0]-M[0];case 2:var N=C[0]+C[1]-M[0]-M[1];return N||q(C[0],C[1])-q(M[0],M[1]);case 3:var O=C[0]+C[1],U=M[0]+M[1];if(N=O+C[2]-(U+M[2]),N)return N;var B=q(C[0],C[1]),F=q(M[0],M[1]),N=q(B,C[2])-q(F,M[2]);return N||q(B+C[2],O)-q(F+M[2],U);default:var X=C.slice(0);X.sort();var K=M.slice(0);K.sort();for(var ne=0;ne<P;++ne)if(D=X[ne]-K[ne],D)return D;return 0}}a.Fw=v;function d(C,M){return v(C[0],M[0])}function x(C,M){if(M){for(var P=C.length,D=new Array(P),q=0;q<P;++q)D[q]=[C[q],M[q]];D.sort(d);for(var q=0;q<P;++q)C[q]=D[q][0],M[q]=D[q][1];return C}else return C.sort(v),C}s=x;function b(C){if(C.length===0)return[];for(var M=1,P=C.length,D=1;D<P;++D){var q=C[D];if(v(q,C[D-1])){if(D===M){M++;continue}C[M++]=q}}return C.length=M,C}s=b;function p(C,M){for(var P=0,D=C.length-1,q=-1;P<=D;){var O=P+D>>1,U=v(C[O],M);U<=0?(U===0&&(q=O),P=O+1):U>0&&(D=O-1)}return q}s=p;function w(C,M){for(var P=new Array(C.length),D=0,q=P.length;D<q;++D)P[D]=[];for(var O=[],D=0,U=M.length;D<U;++D)for(var B=M[D],F=B.length,N=1,X=1<<F;N<X;++N){O.length=l.popCount(N);for(var K=0,ne=0;ne<F;++ne)N&1<<ne&&(O[K++]=B[ne]);var fe=p(C,O);if(!(fe<0))for(;P[fe++].push(D),!(fe>=C.length||v(C[fe],O)!==0););}return P}s=w;function A(C,M){if(!M)return w(b(k(C,0)),C,0);for(var P=new Array(M),D=0;D<M;++D)P[D]=[];for(var D=0,q=C.length;D<q;++D)for(var O=C[D],U=0,B=O.length;U<B;++U)P[O[U]].push(D);return P}s=A;function T(C){for(var M=[],P=0,D=C.length;P<D;++P)for(var q=C[P],O=q.length|0,U=1,B=1<<O;U<B;++U){for(var F=[],N=0;N<O;++N)U>>>N&1&&F.push(q[N]);M.push(F)}return x(M)}s=T;function k(C,M){if(M<0)return[];for(var P=[],D=(1<<M+1)-1,q=0;q<C.length;++q)for(var O=C[q],U=D;U<1<<O.length;U=l.nextCombination(U)){for(var B=new Array(M+1),F=0,N=0;N<O.length;++N)U&1<<N&&(B[F++]=O[N]);P.push(B)}return x(P)}s=k;function _(C){for(var M=[],P=0,D=C.length;P<D;++P)for(var q=C[P],O=0,U=q.length;O<U;++O){for(var B=new Array(q.length-1),F=0,N=0;F<U;++F)F!==O&&(B[N++]=q[F]);M.push(B)}return x(M)}s=_;function E(C,M){for(var P=new u(M),D=0;D<C.length;++D)for(var q=C[D],O=0;O<q.length;++O)for(var U=O+1;U<q.length;++U)P.link(q[O],q[U]);for(var B=[],F=P.ranks,D=0;D<F.length;++D)F[D]=-1;for(var D=0;D<C.length;++D){var N=P.find(C[D][0]);F[N]<0?(F[N]=B.length,B.push([C[D].slice(0)])):B[F[N]].push(C[D].slice(0))}return B}function S(C){for(var M=b(x(k(C,0))),P=new u(M.length),D=0;D<C.length;++D)for(var q=C[D],O=0;O<q.length;++O)for(var U=p(M,[q[O]]),B=O+1;B<q.length;++B)P.link(U,p(M,[q[B]]));for(var F=[],N=P.ranks,D=0;D<N.length;++D)N[D]=-1;for(var D=0;D<C.length;++D){var X=P.find(p(M,[C[D][0]]));N[X]<0?(N[X]=F.length,F.push([C[D].slice(0)])):F[N[X]].push(C[D].slice(0))}return F}function g(C,M){return M?E(C,M):S(C)}s=g},3105:function(n,a){"use strict";"use restrict";var o=32;a.INT_BITS=o,a.INT_MAX=2147483647,a.INT_MIN=-1<<o-1,a.sign=function(u){return(u>0)-(u<0)},a.abs=function(u){var f=u>>o-1;return(u^f)-f},a.min=function(u,f){return f^(u^f)&-(u<f)},a.max=function(u,f){return u^(u^f)&-(u<f)},a.isPow2=function(u){return!(u&u-1)&&!!u},a.log2=function(u){var f,c;return f=(u>65535)<<4,u>>>=f,c=(u>255)<<3,u>>>=c,f|=c,c=(u>15)<<2,u>>>=c,f|=c,c=(u>3)<<1,u>>>=c,f|=c,f|u>>1},a.log10=function(u){return u>=1e9?9:u>=1e8?8:u>=1e7?7:u>=1e6?6:u>=1e5?5:u>=1e4?4:u>=1e3?3:u>=100?2:u>=10?1:0},a.popCount=function(u){return u=u-(u>>>1&1431655765),u=(u&858993459)+(u>>>2&858993459),(u+(u>>>4)&252645135)*16843009>>>24};function s(u){var f=32;return u&=-u,u&&f--,u&65535&&(f-=16),u&16711935&&(f-=8),u&252645135&&(f-=4),u&858993459&&(f-=2),u&1431655765&&(f-=1),f}a.countTrailingZeros=s,a.nextPow2=function(u){return u+=u===0,--u,u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,u|=u>>>16,u+1},a.prevPow2=function(u){return u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,u|=u>>>16,u-(u>>>1)},a.parity=function(u){return u^=u>>>16,u^=u>>>8,u^=u>>>4,u&=15,27030>>>u&1};var l=new Array(256);(function(u){for(var f=0;f<256;++f){var c=f,h=f,v=7;for(c>>>=1;c;c>>>=1)h<<=1,h|=c&1,--v;u[f]=h<<v&255}})(l),a.reverse=function(u){return l[u&255]<<24|l[u>>>8&255]<<16|l[u>>>16&255]<<8|l[u>>>24&255]},a.interleave2=function(u,f){return u&=65535,u=(u|u<<8)&16711935,u=(u|u<<4)&252645135,u=(u|u<<2)&858993459,u=(u|u<<1)&1431655765,f&=65535,f=(f|f<<8)&16711935,f=(f|f<<4)&252645135,f=(f|f<<2)&858993459,f=(f|f<<1)&1431655765,u|f<<1},a.deinterleave2=function(u,f){return u=u>>>f&1431655765,u=(u|u>>>1)&858993459,u=(u|u>>>2)&252645135,u=(u|u>>>4)&16711935,u=(u|u>>>16)&65535,u<<16>>16},a.interleave3=function(u,f,c){return u&=1023,u=(u|u<<16)&4278190335,u=(u|u<<8)&251719695,u=(u|u<<4)&3272356035,u=(u|u<<2)&1227133513,f&=1023,f=(f|f<<16)&4278190335,f=(f|f<<8)&251719695,f=(f|f<<4)&3272356035,f=(f|f<<2)&1227133513,u|=f<<1,c&=1023,c=(c|c<<16)&4278190335,c=(c|c<<8)&251719695,c=(c|c<<4)&3272356035,c=(c|c<<2)&1227133513,u|c<<2},a.deinterleave3=function(u,f){return u=u>>>f&1227133513,u=(u|u>>>2)&3272356035,u=(u|u>>>4)&251719695,u=(u|u>>>8)&4278190335,u=(u|u>>>16)&1023,u<<22>>22},a.nextCombination=function(u){var f=u|u-1;return f+1|(~f&-~f)-1>>>s(u)+1}},2014:function(n,a,o){"use strict";"use restrict";var s=o(3105),l=o(4623);function u(g){for(var C=0,M=Math.max,P=0,D=g.length;P<D;++P)C=M(C,g[P].length);return C-1}a.dimension=u;function f(g){for(var C=-1,M=Math.max,P=0,D=g.length;P<D;++P)for(var q=g[P],O=0,U=q.length;O<U;++O)C=M(C,q[O]);return C+1}a.countVertices=f;function c(g){for(var C=new Array(g.length),M=0,P=g.length;M<P;++M)C[M]=g[M].slice(0);return C}a.cloneCells=c;function h(g,C){var M=g.length,P=g.length-C.length,D=Math.min;if(P)return P;switch(M){case 0:return 0;case 1:return g[0]-C[0];case 2:var F=g[0]+g[1]-C[0]-C[1];return F||D(g[0],g[1])-D(C[0],C[1]);case 3:var q=g[0]+g[1],O=C[0]+C[1];if(F=q+g[2]-(O+C[2]),F)return F;var U=D(g[0],g[1]),B=D(C[0],C[1]),F=D(U,g[2])-D(B,C[2]);return F||D(U+g[2],q)-D(B+C[2],O);default:var N=g.slice(0);N.sort();var X=C.slice(0);X.sort();for(var K=0;K<M;++K)if(P=N[K]-X[K],P)return P;return 0}}a.compareCells=h;function v(g,C){return h(g[0],C[0])}function d(g,C){if(C){for(var M=g.length,P=new Array(M),D=0;D<M;++D)P[D]=[g[D],C[D]];P.sort(v);for(var D=0;D<M;++D)g[D]=P[D][0],C[D]=P[D][1];return g}else return g.sort(h),g}a.normalize=d;function x(g){if(g.length===0)return[];for(var C=1,M=g.length,P=1;P<M;++P){var D=g[P];if(h(D,g[P-1])){if(P===C){C++;continue}g[C++]=D}}return g.length=C,g}a.unique=x;function b(g,C){for(var M=0,P=g.length-1,D=-1;M<=P;){var q=M+P>>1,O=h(g[q],C);O<=0?(O===0&&(D=q),M=q+1):O>0&&(P=q-1)}return D}a.findCell=b;function p(g,C){for(var M=new Array(g.length),P=0,D=M.length;P<D;++P)M[P]=[];for(var q=[],P=0,O=C.length;P<O;++P)for(var U=C[P],B=U.length,F=1,N=1<<B;F<N;++F){q.length=s.popCount(F);for(var X=0,K=0;K<B;++K)F&1<<K&&(q[X++]=U[K]);var ne=b(g,q);if(!(ne<0))for(;M[ne++].push(P),!(ne>=g.length||h(g[ne],q)!==0););}return M}a.incidence=p;function w(g,C){if(!C)return p(x(T(g,0)),g,0);for(var M=new Array(C),P=0;P<C;++P)M[P]=[];for(var P=0,D=g.length;P<D;++P)for(var q=g[P],O=0,U=q.length;O<U;++O)M[q[O]].push(P);return M}a.dual=w;function A(g){for(var C=[],M=0,P=g.length;M<P;++M)for(var D=g[M],q=D.length|0,O=1,U=1<<q;O<U;++O){for(var B=[],F=0;F<q;++F)O>>>F&1&&B.push(D[F]);C.push(B)}return d(C)}a.explode=A;function T(g,C){if(C<0)return[];for(var M=[],P=(1<<C+1)-1,D=0;D<g.length;++D)for(var q=g[D],O=P;O<1<<q.length;O=s.nextCombination(O)){for(var U=new Array(C+1),B=0,F=0;F<q.length;++F)O&1<<F&&(U[B++]=q[F]);M.push(U)}return d(M)}a.skeleton=T;function k(g){for(var C=[],M=0,P=g.length;M<P;++M)for(var D=g[M],q=0,O=D.length;q<O;++q){for(var U=new Array(D.length-1),B=0,F=0;B<O;++B)B!==q&&(U[F++]=D[B]);C.push(U)}return d(C)}a.boundary=k;function _(g,C){for(var M=new l(C),P=0;P<g.length;++P)for(var D=g[P],q=0;q<D.length;++q)for(var O=q+1;O<D.length;++O)M.link(D[q],D[O]);for(var U=[],B=M.ranks,P=0;P<B.length;++P)B[P]=-1;for(var P=0;P<g.length;++P){var F=M.find(g[P][0]);B[F]<0?(B[F]=U.length,U.push([g[P].slice(0)])):U[B[F]].push(g[P].slice(0))}return U}function E(g){for(var C=x(d(T(g,0))),M=new l(C.length),P=0;P<g.length;++P)for(var D=g[P],q=0;q<D.length;++q)for(var O=b(C,[D[q]]),U=q+1;U<D.length;++U)M.link(O,b(C,[D[U]]));for(var B=[],F=M.ranks,P=0;P<F.length;++P)F[P]=-1;for(var P=0;P<g.length;++P){var N=M.find(b(C,[g[P][0]]));F[N]<0?(F[N]=B.length,B.push([g[P].slice(0)])):B[F[N]].push(g[P].slice(0))}return B}function S(g,C){return C?_(g,C):E(g)}a.connectedComponents=S},4623:function(n){"use strict";"use restrict";n.exports=a;function a(o){this.roots=new Array(o),this.ranks=new Array(o);for(var s=0;s<o;++s)this.roots[s]=s,this.ranks[s]=0}a.prototype.length=function(){return this.roots.length},a.prototype.makeSet=function(){var o=this.roots.length;return this.roots.push(o),this.ranks.push(0),o},a.prototype.find=function(o){for(var s=this.roots;s[o]!==o;){var l=s[o];s[o]=s[l],o=l}return o},a.prototype.link=function(o,s){var l=this.find(o),u=this.find(s);if(l!==u){var f=this.ranks,c=this.roots,h=f[l],v=f[u];h<v?c[l]=u:v<h?c[u]=l:(c[u]=l,++f[l])}}},5878:function(n,a,o){"use strict";n.exports=f;var s=o(3250),l=o(2014);function u(c,h,v){var d=Math.abs(s(c,h,v)),x=Math.sqrt(Math.pow(h[0]-v[0],2)+Math.pow(h[1]-v[1],2));return d/x}function f(c,h,v){for(var d=h.length,x=c.length,b=new Array(d),p=new Array(d),w=new Array(d),A=new Array(d),T=0;T<d;++T)b[T]=p[T]=-1,w[T]=1/0,A[T]=!1;for(var T=0;T<x;++T){var k=c[T];if(k.length!==2)throw new Error("Input must be a graph");var _=k[1],E=k[0];p[E]!==-1?p[E]=-2:p[E]=_,b[_]!==-1?b[_]=-2:b[_]=E}function S(Z){if(A[Z])return 1/0;var oe=b[Z],ce=p[Z];return oe<0||ce<0?1/0:u(h[Z],h[oe],h[ce])}function g(Z,oe){var ce=B[Z],le=B[oe];B[Z]=le,B[oe]=ce,F[ce]=oe,F[le]=Z}function C(Z){return w[B[Z]]}function M(Z){return Z&1?Z-1>>1:(Z>>1)-1}function P(Z){for(var oe=C(Z);;){var ce=oe,le=2*Z+1,me=2*(Z+1),he=Z;if(le<X){var te=C(le);te<ce&&(he=le,ce=te)}if(me<X){var ge=C(me);ge<ce&&(he=me)}if(he===Z)return Z;g(Z,he),Z=he}}function D(Z){for(var oe=C(Z);Z>0;){var ce=M(Z);if(ce>=0){var le=C(ce);if(oe<le){g(Z,ce),Z=ce;continue}}return Z}}function q(){if(X>0){var Z=B[0];return g(0,X-1),X-=1,P(0),Z}return-1}function O(Z,oe){var ce=B[Z];return w[ce]===oe?Z:(w[ce]=-1/0,D(Z),q(),w[ce]=oe,X+=1,D(X-1))}function U(Z){if(!A[Z]){A[Z]=!0;var oe=b[Z],ce=p[Z];b[ce]>=0&&(b[ce]=oe),p[oe]>=0&&(p[oe]=ce),F[oe]>=0&&O(F[oe],S(oe)),F[ce]>=0&&O(F[ce],S(ce))}}for(var B=[],F=new Array(d),T=0;T<d;++T){var N=w[T]=S(T);N<1/0?(F[T]=B.length,B.push(T)):F[T]=-1}for(var X=B.length,T=X>>1;T>=0;--T)P(T);for(;;){var K=q();if(K<0||w[K]>v)break;U(K)}for(var ne=[],T=0;T<d;++T)A[T]||(F[T]=ne.length,ne.push(h[T].slice()));var fe=ne.length;function ue(Z,oe){if(Z[oe]<0)return oe;var ce=oe,le=oe;do{var me=Z[le];if(!A[le]||me<0||me===le||(le=me,me=Z[le],!A[le]||me<0||me===le))break;le=me,ce=Z[ce]}while(ce!==le);for(var he=oe;he!==le;he=Z[he])Z[he]=le;return le}var ee=[];return c.forEach(function(Z){var oe=ue(b,Z[0]),ce=ue(p,Z[1]);if(oe>=0&&ce>=0&&oe!==ce){var le=F[oe],me=F[ce];le!==me&&ee.push([le,me])}}),l.unique(l.normalize(ee)),{positions:ne,edges:ee}}},1303:function(n,a,o){"use strict";n.exports=u;var s=o(3250);function l(f,c){var h,v;if(c[0][0]<c[1][0])h=c[0],v=c[1];else if(c[0][0]>c[1][0])h=c[1],v=c[0];else{var d=Math.min(f[0][1],f[1][1]),x=Math.max(f[0][1],f[1][1]),b=Math.min(c[0][1],c[1][1]),p=Math.max(c[0][1],c[1][1]);return x<b?x-b:d>p?d-p:x-p}var w,A;f[0][1]<f[1][1]?(w=f[0],A=f[1]):(w=f[1],A=f[0]);var T=s(v,h,w);return T||(T=s(v,h,A),T)?T:A-v}function u(f,c){var h,v;if(c[0][0]<c[1][0])h=c[0],v=c[1];else if(c[0][0]>c[1][0])h=c[1],v=c[0];else return l(c,f);var d,x;if(f[0][0]<f[1][0])d=f[0],x=f[1];else if(f[0][0]>f[1][0])d=f[1],x=f[0];else return-l(f,c);var b=s(h,v,x),p=s(h,v,d);if(b<0){if(p<=0)return b}else if(b>0){if(p>=0)return b}else if(p)return p;if(b=s(x,d,v),p=s(x,d,h),b<0){if(p<=0)return b}else if(b>0){if(p>=0)return b}else if(p)return p;return v[0]-x[0]}},4209:function(n,a,o){"use strict";n.exports=p;var s=o(2478),l=o(3840),u=o(3250),f=o(1303);function c(w,A,T){this.slabs=w,this.coordinates=A,this.horizontal=T}var h=c.prototype;function v(w,A){return w.y-A}function d(w,A){for(var T=null;w;){var k=w.key,_,E;k[0][0]<k[1][0]?(_=k[0],E=k[1]):(_=k[1],E=k[0]);var S=u(_,E,A);if(S<0)w=w.left;else if(S>0)if(A[0]!==k[1][0])T=w,w=w.right;else{var g=d(w.right,A);if(g)return g;w=w.left}else{if(A[0]!==k[1][0])return w;var g=d(w.right,A);if(g)return g;w=w.left}}return T}h.castUp=function(w){var A=s.le(this.coordinates,w[0]);if(A<0)return-1;var T=this.slabs[A],k=d(this.slabs[A],w),_=-1;if(k&&(_=k.value),this.coordinates[A]===w[0]){var E=null;if(k&&(E=k.key),A>0){var S=d(this.slabs[A-1],w);S&&(E?f(S.key,E)>0&&(E=S.key,_=S.value):(_=S.value,E=S.key))}var g=this.horizontal[A];if(g.length>0){var C=s.ge(g,w[1],v);if(C<g.length){var M=g[C];if(w[1]===M.y){if(M.closed)return M.index;for(;C<g.length-1&&g[C+1].y===w[1];)if(C=C+1,M=g[C],M.closed)return M.index;if(M.y===w[1]&&!M.start){if(C=C+1,C>=g.length)return _;M=g[C]}}if(M.start)if(E){var P=u(E[0],E[1],[w[0],M.y]);E[0][0]>E[1][0]&&(P=-P),P>0&&(_=M.index)}else _=M.index;else M.y!==w[1]&&(_=M.index)}}}return _};function x(w,A,T,k){this.y=w,this.index=A,this.start=T,this.closed=k}function b(w,A,T,k){this.x=w,this.segment=A,this.create=T,this.index=k}function p(w){for(var A=w.length,T=2*A,k=new Array(T),_=0;_<A;++_){var E=w[_],S=E[0][0]<E[1][0];k[2*_]=new b(E[0][0],E,S,_),k[2*_+1]=new b(E[1][0],E,!S,_)}k.sort(function(B,F){var N=B.x-F.x;return N||(N=B.create-F.create,N)?N:Math.min(B.segment[0][1],B.segment[1][1])-Math.min(F.segment[0][1],F.segment[1][1])});for(var g=l(f),C=[],M=[],P=[],D=-1/0,_=0;_<T;){for(var q=k[_].x,O=[];_<T;){var U=k[_];if(U.x!==q)break;_+=1,U.segment[0][0]===U.x&&U.segment[1][0]===U.x?U.create&&(U.segment[0][1]<U.segment[1][1]?(O.push(new x(U.segment[0][1],U.index,!0,!0)),O.push(new x(U.segment[1][1],U.index,!1,!1))):(O.push(new x(U.segment[1][1],U.index,!0,!1)),O.push(new x(U.segment[0][1],U.index,!1,!0)))):U.create?g=g.insert(U.segment,U.index):g=g.remove(U.segment)}C.push(g.root),M.push(q),P.push(O)}return new c(C,M,P)}},5202:function(n,a,o){"use strict";var s=o(1944),l=o(8210);n.exports=c,n.exports.positive=h,n.exports.negative=v;function u(d,x){var b=l(s(d,x),[x[x.length-1]]);return b[b.length-1]}function f(d,x,b,p){var w=p-x,A=-x/w;A<0?A=0:A>1&&(A=1);for(var T=1-A,k=d.length,_=new Array(k),E=0;E<k;++E)_[E]=A*d[E]+T*b[E];return _}function c(d,x){for(var b=[],p=[],w=u(d[d.length-1],x),A=d[d.length-1],T=d[0],k=0;k<d.length;++k,A=T){T=d[k];var _=u(T,x);if(w<0&&_>0||w>0&&_<0){var E=f(A,_,T,w);b.push(E),p.push(E.slice())}_<0?p.push(T.slice()):_>0?b.push(T.slice()):(b.push(T.slice()),p.push(T.slice())),w=_}return{positive:b,negative:p}}function h(d,x){for(var b=[],p=u(d[d.length-1],x),w=d[d.length-1],A=d[0],T=0;T<d.length;++T,w=A){A=d[T];var k=u(A,x);(p<0&&k>0||p>0&&k<0)&&b.push(f(w,k,A,p)),k>=0&&b.push(A.slice()),p=k}return b}function v(d,x){for(var b=[],p=u(d[d.length-1],x),w=d[d.length-1],A=d[0],T=0;T<d.length;++T,w=A){A=d[T];var k=u(A,x);(p<0&&k>0||p>0&&k<0)&&b.push(f(w,k,A,p)),k<=0&&b.push(A.slice()),p=k}return b}},3387:function(n,a,o){var s;(function(){"use strict";var l={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function u(d){return c(v(d),arguments)}function f(d,x){return u.apply(null,[d].concat(x||[]))}function c(d,x){var b=1,p=d.length,w,A="",T,k,_,E,S,g,C,M;for(T=0;T<p;T++)if(typeof d[T]=="string")A+=d[T];else if(typeof d[T]=="object"){if(_=d[T],_.keys)for(w=x[b],k=0;k<_.keys.length;k++){if(w==null)throw new Error(u('[sprintf] Cannot access property "%s" of undefined value "%s"',_.keys[k],_.keys[k-1]));w=w[_.keys[k]]}else _.param_no?w=x[_.param_no]:w=x[b++];if(l.not_type.test(_.type)&&l.not_primitive.test(_.type)&&w instanceof Function&&(w=w()),l.numeric_arg.test(_.type)&&typeof w!="number"&&isNaN(w))throw new TypeError(u("[sprintf] expecting number but found %T",w));switch(l.number.test(_.type)&&(C=w>=0),_.type){case"b":w=parseInt(w,10).toString(2);break;case"c":w=String.fromCharCode(parseInt(w,10));break;case"d":case"i":w=parseInt(w,10);break;case"j":w=JSON.stringify(w,null,_.width?parseInt(_.width):0);break;case"e":w=_.precision?parseFloat(w).toExponential(_.precision):parseFloat(w).toExponential();break;case"f":w=_.precision?parseFloat(w).toFixed(_.precision):parseFloat(w);break;case"g":w=_.precision?String(Number(w.toPrecision(_.precision))):parseFloat(w);break;case"o":w=(parseInt(w,10)>>>0).toString(8);break;case"s":w=String(w),w=_.precision?w.substring(0,_.precision):w;break;case"t":w=String(!!w),w=_.precision?w.substring(0,_.precision):w;break;case"T":w=Object.prototype.toString.call(w).slice(8,-1).toLowerCase(),w=_.precision?w.substring(0,_.precision):w;break;case"u":w=parseInt(w,10)>>>0;break;case"v":w=w.valueOf(),w=_.precision?w.substring(0,_.precision):w;break;case"x":w=(parseInt(w,10)>>>0).toString(16);break;case"X":w=(parseInt(w,10)>>>0).toString(16).toUpperCase();break}l.json.test(_.type)?A+=w:(l.number.test(_.type)&&(!C||_.sign)?(M=C?"+":"-",w=w.toString().replace(l.sign,"")):M="",S=_.pad_char?_.pad_char==="0"?"0":_.pad_char.charAt(1):" ",g=_.width-(M+w).length,E=_.width&&g>0?S.repeat(g):"",A+=_.align?M+w+E:S==="0"?M+E+w:E+M+w)}return A}var h=Object.create(null);function v(d){if(h[d])return h[d];for(var x=d,b,p=[],w=0;x;){if((b=l.text.exec(x))!==null)p.push(b[0]);else if((b=l.modulo.exec(x))!==null)p.push("%");else if((b=l.placeholder.exec(x))!==null){if(b[2]){w|=1;var A=[],T=b[2],k=[];if((k=l.key.exec(T))!==null)for(A.push(k[1]);(T=T.substring(k[0].length))!=="";)if((k=l.key_access.exec(T))!==null)A.push(k[1]);else if((k=l.index_access.exec(T))!==null)A.push(k[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");b[2]=A}else w|=2;if(w===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");p.push({placeholder:b[0],param_no:b[1],keys:b[2],sign:b[3],pad_char:b[4],align:b[5],width:b[6],precision:b[7],type:b[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");x=x.substring(b[0].length)}return h[d]=p}a.sprintf=u,a.vsprintf=f,typeof window!="undefined"&&(window.sprintf=u,window.vsprintf=f,s=function(){return{sprintf:u,vsprintf:f}}.call(a,o,a,n),s!==void 0&&(n.exports=s))})()},3711:function(n,a,o){"use strict";n.exports=v;var s=o(2640),l=o(781),u={"2d":function(d,x,b){var p=d({order:x,scalarArguments:3,getters:b==="generic"?[0]:void 0,phase:function(A,T,k,_){return A>_|0},vertex:function(A,T,k,_,E,S,g,C,M,P,D,q,O){var U=(g<<0)+(C<<1)+(M<<2)+(P<<3)|0;if(!(U===0||U===15))switch(U){case 0:D.push([A-.5,T-.5]);break;case 1:D.push([A-.25-.25*(_+k-2*O)/(k-_),T-.25-.25*(E+k-2*O)/(k-E)]);break;case 2:D.push([A-.75-.25*(-_-k+2*O)/(_-k),T-.25-.25*(S+_-2*O)/(_-S)]);break;case 3:D.push([A-.5,T-.5-.5*(E+k+S+_-4*O)/(k-E+_-S)]);break;case 4:D.push([A-.25-.25*(S+E-2*O)/(E-S),T-.75-.25*(-E-k+2*O)/(E-k)]);break;case 5:D.push([A-.5-.5*(_+k+S+E-4*O)/(k-_+E-S),T-.5]);break;case 6:D.push([A-.5-.25*(-_-k+S+E)/(_-k+E-S),T-.5-.25*(-E-k+S+_)/(E-k+_-S)]);break;case 7:D.push([A-.75-.25*(S+E-2*O)/(E-S),T-.75-.25*(S+_-2*O)/(_-S)]);break;case 8:D.push([A-.75-.25*(-S-E+2*O)/(S-E),T-.75-.25*(-S-_+2*O)/(S-_)]);break;case 9:D.push([A-.5-.25*(_+k+-S-E)/(k-_+S-E),T-.5-.25*(E+k+-S-_)/(k-E+S-_)]);break;case 10:D.push([A-.5-.5*(-_-k+-S-E+4*O)/(_-k+S-E),T-.5]);break;case 11:D.push([A-.25-.25*(-S-E+2*O)/(S-E),T-.75-.25*(E+k-2*O)/(k-E)]);break;case 12:D.push([A-.5,T-.5-.5*(-E-k+-S-_+4*O)/(E-k+S-_)]);break;case 13:D.push([A-.75-.25*(_+k-2*O)/(k-_),T-.25-.25*(-S-_+2*O)/(S-_)]);break;case 14:D.push([A-.25-.25*(-_-k+2*O)/(_-k),T-.25-.25*(-E-k+2*O)/(E-k)]);break;case 15:D.push([A-.5,T-.5]);break}},cell:function(A,T,k,_,E,S,g,C,M){E?C.push([A,T]):C.push([T,A])}});return function(w,A){var T=[],k=[];return p(w,T,k,A),{positions:T,cells:k}}}};function f(d,x){var b=d.length+"d",p=u[b];if(p)return p(s,d,x)}function c(d,x){for(var b=l(d,x),p=b.length,w=new Array(p),A=new Array(p),T=0;T<p;++T)w[T]=[b[T]],A[T]=[T];return{positions:w,cells:A}}var h={};function v(d,w){if(d.dimension<=0)return{positions:[],cells:[]};if(d.dimension===1)return c(d,w);var b=d.order.join()+"-"+d.dtype,p=h[b],w=+w||0;return p||(p=h[b]=f(d.order,d.dtype)),p(d,w)}},529:function(n,a,o){"use strict";n.exports=c;var s=o(4359),l=window||process.global||{},u=l.__TEXT_CACHE||{};l.__TEXT_CACHE={};function f(h){for(var v=h.cells,d=h.positions,x=new Float32Array(v.length*6),b=0,p=0,w=0;w<v.length;++w)for(var A=v[w],T=0;T<3;++T){var k=d[A[T]];x[b++]=k[0],x[b++]=k[1]+1.4,p=Math.max(k[0],p)}return{data:x,shape:p}}function c(h,v,x){var x=x||{},b=x.fontStyle||"normal",p=x.fontWeight||"normal",w=x.fontVariant||"normal",A=[b,p,w,h].join("_"),T=u[A];T||(T=u[A]={" ":{data:new Float32Array(0),shape:.2}});var k=T[v];if(!k)if(v.length<=1||!/\d/.test(v))k=T[v]=f(s(v,{triangles:!0,font:h,fontStyle:b,fontWeight:p,fontVariant:w,textAlign:x.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var _=v.split(/(\d|\s)/),E=new Array(_.length),S=0,g=0,C=0;C<_.length;++C)E[C]=c(h,_[C]),S+=E[C].data.length,g+=E[C].shape,C>0&&(g+=.02);for(var M=new Float32Array(S),P=0,D=-.5*g,C=0;C<E.length;++C){for(var q=E[C].data,O=0;O<q.length;O+=2)M[P++]=q[O]+D,M[P++]=q[O+1];D+=E[C].shape+.02}k=T[v]={data:M,shape:g}}return k}},665:function(n,a,o){"use strict";var s=o(3202);n.exports=c;var l=96;function u(h,v){var d=s(getComputedStyle(h).getPropertyValue(v));return d[0]*c(d[1],h)}function f(h,v){var d=document.createElement("div");d.style["font-size"]="128"+h,v.appendChild(d);var x=u(d,"font-size")/128;return v.removeChild(d),x}function c(h,v){switch(v=v||document.body,h=(h||"px").trim().toLowerCase(),(v===window||v===document)&&(v=document.body),h){case"%":return v.clientHeight/100;case"ch":case"ex":return f(h,v);case"em":return u(v,"font-size");case"rem":return u(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return l;case"cm":return l/2.54;case"mm":return l/25.4;case"pt":return l/72;case"pc":return l/6}return 1}},7261:function(n,a,o){"use strict";n.exports=A;var s=o(9215),l=o(7608),u=o(6079),f=o(5911),c=o(3536),h=o(244);function v(T,k,_){return Math.sqrt(Math.pow(T,2)+Math.pow(k,2)+Math.pow(_,2))}function d(T){return Math.min(1,Math.max(-1,T))}function x(T){var k=Math.abs(T[0]),_=Math.abs(T[1]),E=Math.abs(T[2]),S=[0,0,0];k>Math.max(_,E)?S[2]=1:_>Math.max(k,E)?S[0]=1:S[1]=1;for(var g=0,C=0,M=0;M<3;++M)g+=T[M]*T[M],C+=S[M]*T[M];for(var M=0;M<3;++M)S[M]-=C/g*T[M];return c(S,S),S}function b(T,k,_,E,S,g,C,M){this.center=s(_),this.up=s(E),this.right=s(S),this.radius=s([g]),this.angle=s([C,M]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(T,k),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var P=0;P<16;++P)this.computedMatrix[P]=.5;this.recalcMatrix(0)}var p=b.prototype;p.setDistanceLimits=function(T,k){T>0?T=Math.log(T):T=-1/0,k>0?k=Math.log(k):k=1/0,k=Math.max(k,T),this.radius.bounds[0][0]=T,this.radius.bounds[1][0]=k},p.getDistanceLimits=function(T){var k=this.radius.bounds[0];return T?(T[0]=Math.exp(k[0][0]),T[1]=Math.exp(k[1][0]),T):[Math.exp(k[0][0]),Math.exp(k[1][0])]},p.recalcMatrix=function(T){this.center.curve(T),this.up.curve(T),this.right.curve(T),this.radius.curve(T),this.angle.curve(T);for(var k=this.computedUp,_=this.computedRight,E=0,S=0,g=0;g<3;++g)S+=k[g]*_[g],E+=k[g]*k[g];for(var C=Math.sqrt(E),M=0,g=0;g<3;++g)_[g]-=k[g]*S/E,M+=_[g]*_[g],k[g]/=C;for(var P=Math.sqrt(M),g=0;g<3;++g)_[g]/=P;var D=this.computedToward;f(D,k,_),c(D,D);for(var q=Math.exp(this.computedRadius[0]),O=this.computedAngle[0],U=this.computedAngle[1],B=Math.cos(O),F=Math.sin(O),N=Math.cos(U),X=Math.sin(U),K=this.computedCenter,ne=B*N,fe=F*N,ue=X,ee=-B*X,Z=-F*X,oe=N,ce=this.computedEye,le=this.computedMatrix,g=0;g<3;++g){var me=ne*_[g]+fe*D[g]+ue*k[g];le[4*g+1]=ee*_[g]+Z*D[g]+oe*k[g],le[4*g+2]=me,le[4*g+3]=0}var he=le[1],te=le[5],ge=le[9],ae=le[2],_e=le[6],Ce=le[10],qe=te*Ce-ge*_e,rt=ge*ae-he*Ce,Re=he*_e-te*ae,Ie=v(qe,rt,Re);qe/=Ie,rt/=Ie,Re/=Ie,le[0]=qe,le[4]=rt,le[8]=Re;for(var g=0;g<3;++g)ce[g]=K[g]+le[2+4*g]*q;for(var g=0;g<3;++g){for(var M=0,ot=0;ot<3;++ot)M+=le[g+4*ot]*ce[ot];le[12+g]=-M}le[15]=1},p.getMatrix=function(T,k){this.recalcMatrix(T);var _=this.computedMatrix;if(k){for(var E=0;E<16;++E)k[E]=_[E];return k}return _};var w=[0,0,0];p.rotate=function(T,k,_,E){if(this.angle.move(T,k,_),E){this.recalcMatrix(T);var S=this.computedMatrix;w[0]=S[2],w[1]=S[6],w[2]=S[10];for(var g=this.computedUp,C=this.computedRight,M=this.computedToward,P=0;P<3;++P)S[4*P]=g[P],S[4*P+1]=C[P],S[4*P+2]=M[P];u(S,S,E,w);for(var P=0;P<3;++P)g[P]=S[4*P],C[P]=S[4*P+1];this.up.set(T,g[0],g[1],g[2]),this.right.set(T,C[0],C[1],C[2])}},p.pan=function(T,k,_,E){k=k||0,_=_||0,E=E||0,this.recalcMatrix(T);var S=this.computedMatrix,g=Math.exp(this.computedRadius[0]),C=S[1],M=S[5],P=S[9],D=v(C,M,P);C/=D,M/=D,P/=D;var q=S[0],O=S[4],U=S[8],B=q*C+O*M+U*P;q-=C*B,O-=M*B,U-=P*B;var F=v(q,O,U);q/=F,O/=F,U/=F;var N=q*k+C*_,X=O*k+M*_,K=U*k+P*_;this.center.move(T,N,X,K);var ne=Math.exp(this.computedRadius[0]);ne=Math.max(1e-4,ne+E),this.radius.set(T,Math.log(ne))},p.translate=function(T,k,_,E){this.center.move(T,k||0,_||0,E||0)},p.setMatrix=function(T,k,_,E){var S=1;typeof _=="number"&&(S=_|0),(S<0||S>3)&&(S=1);var g=(S+2)%3,C=(S+1)%3;k||(this.recalcMatrix(T),k=this.computedMatrix);var M=k[S],P=k[S+4],D=k[S+8];if(E){var O=Math.abs(M),U=Math.abs(P),B=Math.abs(D),F=Math.max(O,U,B);O===F?(M=M<0?-1:1,P=D=0):B===F?(D=D<0?-1:1,M=P=0):(P=P<0?-1:1,M=D=0)}else{var q=v(M,P,D);M/=q,P/=q,D/=q}var N=k[g],X=k[g+4],K=k[g+8],ne=N*M+X*P+K*D;N-=M*ne,X-=P*ne,K-=D*ne;var fe=v(N,X,K);N/=fe,X/=fe,K/=fe;var ue=P*K-D*X,ee=D*N-M*K,Z=M*X-P*N,oe=v(ue,ee,Z);ue/=oe,ee/=oe,Z/=oe,this.center.jump(T,Ht,Me,Ke),this.radius.idle(T),this.up.jump(T,M,P,D),this.right.jump(T,N,X,K);var ce,le;if(S===2){var me=k[1],he=k[5],te=k[9],ge=me*N+he*X+te*K,ae=me*ue+he*ee+te*Z;rt<0?ce=-Math.PI/2:ce=Math.PI/2,le=Math.atan2(ae,ge)}else{var _e=k[2],Ce=k[6],qe=k[10],rt=_e*M+Ce*P+qe*D,Re=_e*N+Ce*X+qe*K,Ie=_e*ue+Ce*ee+qe*Z;ce=Math.asin(d(rt)),le=Math.atan2(Ie,Re)}this.angle.jump(T,le,ce),this.recalcMatrix(T);var ot=k[2],lt=k[6],ht=k[10],xt=this.computedMatrix;l(xt,k);var Vt=xt[15],Ht=xt[12]/Vt,Me=xt[13]/Vt,Ke=xt[14]/Vt,We=Math.exp(this.computedRadius[0]);this.center.jump(T,Ht-ot*We,Me-lt*We,Ke-ht*We)},p.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},p.idle=function(T){this.center.idle(T),this.up.idle(T),this.right.idle(T),this.radius.idle(T),this.angle.idle(T)},p.flush=function(T){this.center.flush(T),this.up.flush(T),this.right.flush(T),this.radius.flush(T),this.angle.flush(T)},p.setDistance=function(T,k){k>0&&this.radius.set(T,Math.log(k))},p.lookAt=function(T,k,_,E){this.recalcMatrix(T),k=k||this.computedEye,_=_||this.computedCenter,E=E||this.computedUp;var S=E[0],g=E[1],C=E[2],M=v(S,g,C);if(!(M<1e-6)){S/=M,g/=M,C/=M;var P=k[0]-_[0],D=k[1]-_[1],q=k[2]-_[2],O=v(P,D,q);if(!(O<1e-6)){P/=O,D/=O,q/=O;var U=this.computedRight,B=U[0],F=U[1],N=U[2],X=S*B+g*F+C*N;B-=X*S,F-=X*g,N-=X*C;var K=v(B,F,N);if(!(K<.01&&(B=g*q-C*D,F=C*P-S*q,N=S*D-g*P,K=v(B,F,N),K<1e-6))){B/=K,F/=K,N/=K,this.up.set(T,S,g,C),this.right.set(T,B,F,N),this.center.set(T,_[0],_[1],_[2]),this.radius.set(T,Math.log(O));var ne=g*N-C*F,fe=C*B-S*N,ue=S*F-g*B,ee=v(ne,fe,ue);ne/=ee,fe/=ee,ue/=ee;var Z=S*P+g*D+C*q,oe=B*P+F*D+N*q,ce=ne*P+fe*D+ue*q,le=Math.asin(d(Z)),me=Math.atan2(ce,oe),he=this.angle._state,te=he[he.length-1],ge=he[he.length-2];te=te%(2*Math.PI);var ae=Math.abs(te+2*Math.PI-me),_e=Math.abs(te-me),Ce=Math.abs(te-2*Math.PI-me);ae<_e&&(te+=2*Math.PI),Ce<_e&&(te-=2*Math.PI),this.angle.jump(this.angle.lastT(),te,ge),this.angle.set(T,me,le)}}}};function A(T){T=T||{};var k=T.center||[0,0,0],_=T.up||[0,1,0],E=T.right||x(_),S=T.radius||1,g=T.theta||0,C=T.phi||0;if(k=[].slice.call(k,0,3),_=[].slice.call(_,0,3),c(_,_),E=[].slice.call(E,0,3),c(E,E),"eye"in T){var M=T.eye,P=[M[0]-k[0],M[1]-k[1],M[2]-k[2]];f(E,P,_),v(E[0],E[1],E[2])<1e-6?E=x(_):c(E,E),S=v(P[0],P[1],P[2]);var D=h(_,P)/S,q=h(E,P)/S;C=Math.acos(D),g=Math.acos(q)}return S=Math.log(S),new b(T.zoomMin,T.zoomMax,k,_,E,S,g,C)}},5250:function(n){"use strict";n.exports=o;var a=+(Math.pow(2,27)+1);function o(s,l,u){var f=s*l,c=a*s,h=c-s,v=c-h,d=s-v,x=a*l,b=x-l,p=x-b,w=l-p,A=f-v*p,T=A-d*p,k=T-v*w,_=d*w-k;return u?(u[0]=_,u[1]=f,u):[_,f]}},9362:function(n){"use strict";n.exports=a;function a(o,s,l){var u=o+s,f=u-o,c=u-f,h=s-f,v=o-c;return l?(l[0]=v+h,l[1]=u,l):[v+h,u]}},1888:function(n,a,o){"use strict";var s=o(8828),l=o(1338),u=o(4793).hp;o.g.__TYPEDARRAY_POOL||(o.g.__TYPEDARRAY_POOL={UINT8:l([32,0]),UINT16:l([32,0]),UINT32:l([32,0]),BIGUINT64:l([32,0]),INT8:l([32,0]),INT16:l([32,0]),INT32:l([32,0]),BIGINT64:l([32,0]),FLOAT:l([32,0]),DOUBLE:l([32,0]),DATA:l([32,0]),UINT8C:l([32,0]),BUFFER:l([32,0])});var f=typeof Uint8ClampedArray!="undefined",c=typeof BigUint64Array!="undefined",h=typeof BigInt64Array!="undefined",v=o.g.__TYPEDARRAY_POOL;v.UINT8C||(v.UINT8C=l([32,0])),v.BIGUINT64||(v.BIGUINT64=l([32,0])),v.BIGINT64||(v.BIGINT64=l([32,0])),v.BUFFER||(v.BUFFER=l([32,0]));var d=v.DATA,x=v.BUFFER;a.free=function(B){if(u.isBuffer(B))x[s.log2(B.length)].push(B);else{if(Object.prototype.toString.call(B)!=="[object ArrayBuffer]"&&(B=B.buffer),!B)return;var F=B.length||B.byteLength,N=s.log2(F)|0;d[N].push(B)}};function b(U){if(U){var B=U.length||U.byteLength,F=s.log2(B);d[F].push(U)}}function p(U){b(U.buffer)}a.freeUint8=a.freeUint16=a.freeUint32=a.freeBigUint64=a.freeInt8=a.freeInt16=a.freeInt32=a.freeBigInt64=a.freeFloat32=a.freeFloat=a.freeFloat64=a.freeDouble=a.freeUint8Clamped=a.freeDataView=p,a.freeArrayBuffer=b,a.freeBuffer=function(B){x[s.log2(B.length)].push(B)},a.malloc=function(B,F){if(F===void 0||F==="arraybuffer")return w(B);switch(F){case"uint8":return A(B);case"uint16":return T(B);case"uint32":return k(B);case"int8":return _(B);case"int16":return E(B);case"int32":return S(B);case"float":case"float32":return g(B);case"double":case"float64":return C(B);case"uint8_clamped":return M(B);case"bigint64":return D(B);case"biguint64":return P(B);case"buffer":return O(B);case"data":case"dataview":return q(B);default:return null}return null};function w(B){var B=s.nextPow2(B),F=s.log2(B),N=d[F];return N.length>0?N.pop():new ArrayBuffer(B)}a.mallocArrayBuffer=w;function A(U){return new Uint8Array(w(U),0,U)}a.mallocUint8=A;function T(U){return new Uint16Array(w(2*U),0,U)}a.mallocUint16=T;function k(U){return new Uint32Array(w(4*U),0,U)}a.mallocUint32=k;function _(U){return new Int8Array(w(U),0,U)}a.mallocInt8=_;function E(U){return new Int16Array(w(2*U),0,U)}a.mallocInt16=E;function S(U){return new Int32Array(w(4*U),0,U)}a.mallocInt32=S;function g(U){return new Float32Array(w(4*U),0,U)}a.mallocFloat32=a.mallocFloat=g;function C(U){return new Float64Array(w(8*U),0,U)}a.mallocFloat64=a.mallocDouble=C;function M(U){return f?new Uint8ClampedArray(w(U),0,U):A(U)}a.mallocUint8Clamped=M;function P(U){return c?new BigUint64Array(w(8*U),0,U):null}a.mallocBigUint64=P;function D(U){return h?new BigInt64Array(w(8*U),0,U):null}a.mallocBigInt64=D;function q(U){return new DataView(w(U),0,U)}a.mallocDataView=q;function O(U){U=s.nextPow2(U);var B=s.log2(U),F=x[B];return F.length>0?F.pop():new u(U)}a.mallocBuffer=O,a.clearCache=function(){for(var B=0;B<32;++B)v.UINT8[B].length=0,v.UINT16[B].length=0,v.UINT32[B].length=0,v.INT8[B].length=0,v.INT16[B].length=0,v.INT32[B].length=0,v.FLOAT[B].length=0,v.DOUBLE[B].length=0,v.BIGUINT64[B].length=0,v.BIGINT64[B].length=0,v.UINT8C[B].length=0,d[B].length=0,x[B].length=0}},1755:function(n){"use strict";"use restrict";n.exports=a;function a(s){this.roots=new Array(s),this.ranks=new Array(s);for(var l=0;l<s;++l)this.roots[l]=l,this.ranks[l]=0}var o=a.prototype;Object.defineProperty(o,"length",{get:function(){return this.roots.length}}),o.makeSet=function(){var s=this.roots.length;return this.roots.push(s),this.ranks.push(0),s},o.find=function(s){for(var l=s,u=this.roots;u[s]!==s;)s=u[s];for(;u[l]!==s;){var f=u[l];u[l]=s,l=f}return s},o.link=function(s,l){var u=this.find(s),f=this.find(l);if(u!==f){var c=this.ranks,h=this.roots,v=c[u],d=c[f];v<d?h[u]=f:d<v?h[f]=u:(h[f]=u,++c[u])}}},1682:function(n){"use strict";function a(l,u){for(var f=1,c=l.length,h=l[0],v=l[0],d=1;d<c;++d)if(v=h,h=l[d],u(h,v)){if(d===f){f++;continue}l[f++]=h}return l.length=f,l}function o(l){for(var u=1,f=l.length,c=l[0],h=l[0],v=1;v<f;++v,h=c)if(h=c,c=l[v],c!==h){if(v===u){u++;continue}l[u++]=c}return l.length=u,l}function s(l,u,f){return l.length===0?l:u?(f||l.sort(u),a(l,u)):(f||l.sort(),o(l))}n.exports=s},4359:function(n,a,o){"use strict";n.exports=f;var s=o(7718),l=null,u=null;typeof document!="undefined"&&(l=document.createElement("canvas"),l.width=8192,l.height=1024,u=l.getContext("2d"));function f(c,h){return(typeof h!="object"||h===null)&&(h={}),s(c,h.canvas||l,h.context||u,h)}},7718:function(n,a,o){n.exports=D,n.exports.processPixels=P;var s=o(3711),l=o(9618),u=o(5878),f=o(332),c=o(2538),h=o(2095),v="b",d="b|",x="i",b="i|",p="sup",w="+",A="+1",T="sub",k="-",_="-1";function E(q,O,U,B){for(var F="<"+q+">",N="</"+q+">",X=F.length,K=N.length,ne=O[0]===w||O[0]===k,fe=0,ue=-K;fe>-1&&(fe=U.indexOf(F,fe),!(fe===-1||(ue=U.indexOf(N,fe+X),ue===-1)||ue<=fe));){for(var ee=fe;ee<ue+K;++ee)if(ee<fe+X||ee>=ue)B[ee]=null,U=U.substr(0,ee)+" "+U.substr(ee+1);else if(B[ee]!==null){var Z=B[ee].indexOf(O[0]);Z===-1?B[ee]+=O:ne&&(B[ee]=B[ee].substr(0,Z+1)+(1+parseInt(B[ee][Z+1]))+B[ee].substr(Z+2))}var oe=fe+X,ce=U.substr(oe,ue-oe),le=ce.indexOf(F);le!==-1?fe=le:fe=ue+K}return B}function S(q,O,U){for(var B=O.textAlign||"start",F=O.textBaseline||"alphabetic",N=[1<<30,1<<30],X=[0,0],K=q.length,ne=0;ne<K;++ne)for(var fe=q[ne],ue=0;ue<2;++ue)N[ue]=Math.min(N[ue],fe[ue])|0,X[ue]=Math.max(X[ue],fe[ue])|0;var ee=0;switch(B){case"center":ee=-.5*(N[0]+X[0]);break;case"right":case"end":ee=-X[0];break;case"left":case"start":ee=-N[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+B+"'")}var Z=0;switch(F){case"hanging":case"top":Z=-N[1];break;case"middle":Z=-.5*(N[1]+X[1]);break;case"alphabetic":case"ideographic":Z=-3*U;break;case"bottom":Z=-X[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+F+"'")}var oe=1/U;return"lineHeight"in O?oe*=+O.lineHeight:"width"in O?oe=O.width/(X[0]-N[0]):"height"in O&&(oe=O.height/(X[1]-N[1])),q.map(function(ce){return[oe*(ce[0]+ee),oe*(ce[1]+Z)]})}function g(q,O,U,B,F,N){U=U.replace(/\n/g,""),N.breaklines===!0?U=U.replace(/\<br\>/g,`
`):U=U.replace(/\<br\>/g," ");var X="",K=[];for(te=0;te<U.length;++te)K[te]=X;N.bolds===!0&&(K=E(v,d,U,K)),N.italics===!0&&(K=E(x,b,U,K)),N.superscripts===!0&&(K=E(p,A,U,K)),N.subscripts===!0&&(K=E(T,_,U,K));var ne=[],fe="";for(te=0;te<U.length;++te)K[te]!==null&&(fe+=U[te],ne.push(K[te]));var ue=fe.split(`
`),ee=ue.length,Z=Math.round(F*B),oe=B,ce=B*2,le=0,me=ee*Z+ce;q.height<me&&(q.height=me),O.fillStyle="#000",O.fillRect(0,0,q.width,q.height),O.fillStyle="#fff";var he,te,ge,ae,_e,Ce=0,qe="";function rt(){if(qe!==""){var Me=O.measureText(qe).width;O.fillText(qe,oe+ge,ce+ae),ge+=Me}}function Re(){return""+Math.round(_e)+"px "}function Ie(Me,Ke){var We=""+O.font;if(N.subscripts===!0){var et=Me.indexOf(k),vt=Ke.indexOf(k),at=et>-1?parseInt(Me[1+et]):0,Xe=vt>-1?parseInt(Ke[1+vt]):0;at!==Xe&&(We=We.replace(Re(),"?px "),_e*=Math.pow(.75,Xe-at),We=We.replace("?px ",Re())),ae+=.25*Z*(Xe-at)}if(N.superscripts===!0){var dt=Me.indexOf(w),_t=Ke.indexOf(w),$t=dt>-1?parseInt(Me[1+dt]):0,Ut=_t>-1?parseInt(Ke[1+_t]):0;$t!==Ut&&(We=We.replace(Re(),"?px "),_e*=Math.pow(.75,Ut-$t),We=We.replace("?px ",Re())),ae-=.25*Z*(Ut-$t)}if(N.bolds===!0){var fr=Me.indexOf(d)>-1,ar=Ke.indexOf(d)>-1;!fr&&ar&&(cr?We=We.replace("italic ","italic bold "):We="bold "+We),fr&&!ar&&(We=We.replace("bold ",""))}if(N.italics===!0){var cr=Me.indexOf(b)>-1,It=Ke.indexOf(b)>-1;!cr&&It&&(We="italic "+We),cr&&!It&&(We=We.replace("italic ",""))}O.font=We}for(he=0;he<ee;++he){var ot=ue[he]+`
`;for(ge=0,ae=he*Z,_e=B,qe="",te=0;te<ot.length;++te){var lt=te+Ce<ne.length?ne[te+Ce]:ne[ne.length-1];X===lt?qe+=ot[te]:(rt(),qe=ot[te],lt!==void 0&&(Ie(X,lt),X=lt))}rt(),Ce+=ot.length;var ht=Math.round(ge+2*oe)|0;le<ht&&(le=ht)}var xt=le,Vt=ce+Z*ee,Ht=l(O.getImageData(0,0,xt,Vt).data,[Vt,xt,4]);return Ht.pick(-1,-1,0).transpose(1,0)}function C(q,O){var U=s(q,128);return O?u(U.cells,U.positions,.25):{edges:U.cells,positions:U.positions}}function M(q,O,U,B){var F=C(q,B),N=S(F.positions,O,U),X=F.edges,K=O.orientation==="ccw";if(f(N,X),O.polygons||O.polygon||O.polyline){for(var ne=h(X,N),fe=new Array(ne.length),ue=0;ue<ne.length;++ue){for(var ee=ne[ue],Z=new Array(ee.length),oe=0;oe<ee.length;++oe){for(var ce=ee[oe],le=new Array(ce.length),me=0;me<ce.length;++me)le[me]=N[ce[me]].slice();K&&le.reverse(),Z[oe]=le}fe[ue]=Z}return fe}else return O.triangles||O.triangulate||O.triangle?{cells:c(N,X,{delaunay:!1,exterior:!1,interior:!0}),positions:N}:{edges:X,positions:N}}function P(q,O,U){try{return M(q,O,U,!0)}catch(B){}try{return M(q,O,U,!1)}catch(B){}return O.polygons||O.polyline||O.polygon?[]:O.triangles||O.triangulate||O.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function D(q,O,U,B){var F=64,N=1.25,X={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};B&&(B.size&&B.size>0&&(F=B.size),B.lineSpacing&&B.lineSpacing>0&&(N=B.lineSpacing),B.styletags&&B.styletags.breaklines&&(X.breaklines=!!B.styletags.breaklines),B.styletags&&B.styletags.bolds&&(X.bolds=!!B.styletags.bolds),B.styletags&&B.styletags.italics&&(X.italics=!!B.styletags.italics),B.styletags&&B.styletags.subscripts&&(X.subscripts=!!B.styletags.subscripts),B.styletags&&B.styletags.superscripts&&(X.superscripts=!!B.styletags.superscripts)),U.font=[B.fontStyle,B.fontVariant,B.fontWeight,F+"px",B.font].filter(function(ne){return ne}).join(" "),U.textAlign="start",U.textBaseline="alphabetic",U.direction="ltr";var K=g(O,U,q,F,N,X);return P(K,B,F)}},1538:function(n){(function(){"use strict";if(typeof ses!="undefined"&&ses.ok&&!ses.ok())return;function o(M){M.permitHostObjects___&&M.permitHostObjects___(o)}typeof ses!="undefined"&&(ses.weakMapPermitHostObjects=o);var s=!1;if(typeof WeakMap=="function"){var l=WeakMap;if(!(typeof navigator!="undefined"&&/Firefox/.test(navigator.userAgent))){var u=new l,f=Object.freeze({});if(u.set(f,1),u.get(f)!==1)s=!0;else{n.exports=WeakMap;return}}}var c=Object.prototype.hasOwnProperty,h=Object.getOwnPropertyNames,v=Object.defineProperty,d=Object.isExtensible,x="weakmap:",b=x+"ident:"+Math.random()+"___";if(typeof crypto!="undefined"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var p=new ArrayBuffer(25),w=new Uint8Array(p);crypto.getRandomValues(w),b=x+"rand:"+Array.prototype.map.call(w,function(M){return(M%36).toString(36)}).join("")+"___"}function A(M){return!(M.substr(0,x.length)==x&&M.substr(M.length-3)==="___")}if(v(Object,"getOwnPropertyNames",{value:function(P){return h(P).filter(A)}}),"getPropertyNames"in Object){var T=Object.getPropertyNames;v(Object,"getPropertyNames",{value:function(P){return T(P).filter(A)}})}function k(M){if(M!==Object(M))throw new TypeError("Not an object: "+M);var P=M[b];if(P&&P.key===M)return P;if(d(M)){P={key:M};try{return v(M,b,{value:P,writable:!1,enumerable:!1,configurable:!1}),P}catch(D){return}}}(function(){var M=Object.freeze;v(Object,"freeze",{value:function(O){return k(O),M(O)}});var P=Object.seal;v(Object,"seal",{value:function(O){return k(O),P(O)}});var D=Object.preventExtensions;v(Object,"preventExtensions",{value:function(O){return k(O),D(O)}})})();function _(M){return M.prototype=null,Object.freeze(M)}var E=!1;function S(){!E&&typeof console!="undefined"&&(E=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var g=0,C=function(){this instanceof C||S();var M=[],P=[],D=g++;function q(F,N){var X,K=k(F);return K?D in K?K[D]:N:(X=M.indexOf(F),X>=0?P[X]:N)}function O(F){var N=k(F);return N?D in N:M.indexOf(F)>=0}function U(F,N){var X,K=k(F);return K?K[D]=N:(X=M.indexOf(F),X>=0?P[X]=N:(X=M.length,P[X]=N,M[X]=F)),this}function B(F){var N=k(F),X,K;return N?D in N&&delete N[D]:(X=M.indexOf(F),X<0?!1:(K=M.length-1,M[X]=void 0,P[X]=P[K],M[X]=M[K],M.length=K,P.length=K,!0))}return Object.create(C.prototype,{get___:{value:_(q)},has___:{value:_(O)},set___:{value:_(U)},delete___:{value:_(B)}})};C.prototype=Object.create(Object.prototype,{get:{value:function(P,D){return this.get___(P,D)},writable:!0,configurable:!0},has:{value:function(P){return this.has___(P)},writable:!0,configurable:!0},set:{value:function(P,D){return this.set___(P,D)},writable:!0,configurable:!0},delete:{value:function(P){return this.delete___(P)},writable:!0,configurable:!0}}),typeof l=="function"?function(){s&&typeof Proxy!="undefined"&&(Proxy=void 0);function M(){this instanceof C||S();var P=new l,D=void 0,q=!1;function O(N,X){return D?P.has(N)?P.get(N):D.get___(N,X):P.get(N,X)}function U(N){return P.has(N)||(D?D.has___(N):!1)}var B;s?B=function(N,X){return P.set(N,X),P.has(N)||(D||(D=new C),D.set(N,X)),this}:B=function(N,X){if(q)try{P.set(N,X)}catch(K){D||(D=new C),D.set___(N,X)}else P.set(N,X);return this};function F(N){var X=!!P.delete(N);return D&&D.delete___(N)||X}return Object.create(C.prototype,{get___:{value:_(O)},has___:{value:_(U)},set___:{value:_(B)},delete___:{value:_(F)},permitHostObjects___:{value:_(function(N){if(N===o)q=!0;else throw new Error("bogus call to permitHostObjects___")})}})}M.prototype=C.prototype,n.exports=M,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy!="undefined"&&(Proxy=void 0),n.exports=C)})()},236:function(n,a,o){var s=o(8284);n.exports=l;function l(){var u={};return function(f){if((typeof f!="object"||f===null)&&typeof f!="function")throw new Error("Weakmap-shim: Key must be object");var c=f.valueOf(u);return c&&c.identity===u?c:s(f,u)}}},8284:function(n){n.exports=a;function a(o,s){var l={identity:s},u=o.valueOf;return Object.defineProperty(o,"valueOf",{value:function(f){return f!==s?u.apply(this,arguments):l},writable:!0}),l}},606:function(n,a,o){var s=o(236);n.exports=l;function l(){var u=s();return{get:function(f,c){var h=u(f);return h.hasOwnProperty("value")?h.value:c},set:function(f,c){return u(f).value=c,this},has:function(f){return"value"in u(f)},delete:function(f){return delete u(f).value}}}},3349:function(n){"use strict";function a(){return function(c,h,v,d,x,b){var p=c[0],w=v[0],A=[0],T=w;d|=0;var k=0,_=w;for(k=0;k<p;++k){{var E=h[d]-b,S=h[d+T]-b;E>=0!=S>=0&&x.push(A[0]+.5+.5*(E+S)/(E-S))}d+=_,++A[0]}}}function o(){return a()}var s=o;function l(c){var h={};return function(d,x,b){var p=d.dtype,w=d.order,A=[p,w.join()].join(),T=h[A];return T||(h[A]=T=c([p,w])),T(d.shape.slice(0),d.data,d.stride,d.offset|0,x,b)}}function u(c){return l(s.bind(void 0,c))}function f(c){return u({funcName:c.funcName})}n.exports=f({funcName:"zeroCrossings"})},781:function(n,a,o){"use strict";n.exports=l;var s=o(3349);function l(u,f){var c=[];return f=+f||0,s(u.hi(u.shape[0]-1),c,f),c}},7790:function(){}},t={};function r(n){var a=t[n];if(a!==void 0)return a.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}(function(){r.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(n){if(typeof window=="object")return window}}()})(),function(){r.nmd=function(n){return n.paths=[],n.children||(n.children=[]),n}}();var i=r(1964);_Ce.exports=i})()});var wCe=ie((svr,bCe)=>{"use strict";bCe.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var SCe=ie((lvr,MCe)=>{"use strict";var TCe=wCe();MCe.exports=Z4t;var ACe={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function Z4t(e){var t,r=[],i=1,n;if(typeof e=="string")if(e=e.toLowerCase(),TCe[e])r=TCe[e].slice(),n="rgb";else if(e==="transparent")i=0,n="rgb",r=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(e)){var a=e.slice(1),o=a.length,s=o<=4;i=1,s?(r=[parseInt(a[0]+a[0],16),parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16)],o===4&&(i=parseInt(a[3]+a[3],16)/255)):(r=[parseInt(a[0]+a[1],16),parseInt(a[2]+a[3],16),parseInt(a[4]+a[5],16)],o===8&&(i=parseInt(a[6]+a[7],16)/255)),r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0),n="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(e)){var l=t[1],u=l==="rgb",a=l.replace(/a$/,"");n=a;var o=a==="cmyk"?4:a==="gray"?1:3;r=t[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(h,v){if(/%$/.test(h))return v===o?parseFloat(h)/100:a==="rgb"?parseFloat(h)*255/100:parseFloat(h);if(a[v]==="h"){if(/deg$/.test(h))return parseFloat(h);if(ACe[h]!==void 0)return ACe[h]}return parseFloat(h)}),l===a&&r.push(1),i=u||r[o]===void 0?1:r[o],r=r.slice(0,o)}else e.length>10&&/[0-9](?:\s|\/)/.test(e)&&(r=e.match(/([0-9]+)/g).map(function(f){return parseFloat(f)}),n=e.match(/([a-z])/ig).join("").toLowerCase());else isNaN(e)?Array.isArray(e)||e.length?(r=[e[0],e[1],e[2]],n="rgb",i=e.length===4?e[3]:1):e instanceof Object&&(e.r!=null||e.red!=null||e.R!=null?(n="rgb",r=[e.r||e.red||e.R||0,e.g||e.green||e.G||0,e.b||e.blue||e.B||0]):(n="hsl",r=[e.h||e.hue||e.H||0,e.s||e.saturation||e.S||0,e.l||e.lightness||e.L||e.b||e.brightness]),i=e.a||e.alpha||e.opacity||1,e.opacity!=null&&(i/=100)):(n="rgb",r=[e>>>16,(e&65280)>>>8,e&255]);return{space:n,values:r,alpha:i}}});var kCe=ie((uvr,ECe)=>{"use strict";ECe.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}});var LCe=ie((fvr,CCe)=>{"use strict";var j4t=kCe();CCe.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(e){var t=e[0]/360,r=e[1]/100,i=e[2]/100,n,a,o,s,l;if(r===0)return l=i*255,[l,l,l];i<.5?a=i*(1+r):a=i+r-i*r,n=2*i-a,s=[0,0,0];for(var u=0;u<3;u++)o=t+1/3*-(u-1),o<0?o++:o>1&&o--,6*o<1?l=n+(a-n)*6*o:2*o<1?l=a:3*o<2?l=n+(a-n)*(2/3-o)*6:l=n,s[u]=l*255;return s}};j4t.hsl=function(e){var t=e[0]/255,r=e[1]/255,i=e[2]/255,n=Math.min(t,r,i),a=Math.max(t,r,i),o=a-n,s,l,u;return a===n?s=0:t===a?s=(r-i)/o:r===a?s=2+(i-t)/o:i===a&&(s=4+(t-r)/o),s=Math.min(s*60,360),s<0&&(s+=360),u=(n+a)/2,a===n?l=0:u<=.5?l=o/(a+n):l=o/(2-a-n),[s,l*100,u*100]}});var C3=ie((cvr,PCe)=>{PCe.exports=K4t;function K4t(e,t,r){return t<r?e<t?t:e>r?r:e:e<r?r:e>t?t:e}});var nG=ie((hvr,RCe)=>{"use strict";var J4t=SCe(),Q4t=LCe(),$R=C3();RCe.exports=function(t){var r,i,n,a=J4t(t);return a.space?(r=Array(3),r[0]=$R(a.values[0],0,255),r[1]=$R(a.values[1],0,255),r[2]=$R(a.values[2],0,255),a.space[0]==="h"&&(r=Q4t.rgb(r)),r.push($R(a.alpha,0,1)),r):[]}});var eD=ie((vvr,DCe)=>{DCe.exports=function(e){switch(e){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}});var l1=ie((dvr,ICe)=>{"use strict";var $4t=nG(),tD=C3(),eLt=eD();ICe.exports=function(t,r){(r==="float"||!r)&&(r="array"),r==="uint"&&(r="uint8"),r==="uint_clamped"&&(r="uint8_clamped");var i=eLt(r),n=new i(4),a=r!=="uint8"&&r!=="uint8_clamped";return(!t.length||typeof t=="string")&&(t=$4t(t),t[0]/=255,t[1]/=255,t[2]/=255),tLt(t)?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3]!=null?t[3]:255,a&&(n[0]/=255,n[1]/=255,n[2]/=255,n[3]/=255),n):(a?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3]!=null?t[3]:1):(n[0]=tD(Math.floor(t[0]*255),0,255),n[1]=tD(Math.floor(t[1]*255),0,255),n[2]=tD(Math.floor(t[2]*255),0,255),n[3]=t[3]==null?255:tD(Math.floor(t[3]*255),0,255)),n)};function tLt(e){return!!(e instanceof Uint8Array||e instanceof Uint8ClampedArray||Array.isArray(e)&&(e[0]>1||e[0]===0)&&(e[1]>1||e[1]===0)&&(e[2]>1||e[2]===0)&&(!e[3]||e[3]>1))}});var Op=ie((pvr,FCe)=>{"use strict";var rLt=l1();function nLt(e){return e?rLt(e):[0,0,0,1]}FCe.exports=nLt});var gy=ie((gvr,VCe)=>{"use strict";var NCe=la(),iLt=Kf(),rD=l1(),nD=ul(),aLt=Qu().defaultLine,qCe=hh().isArrayOrTypedArray,iG=rD(aLt),UCe=1;function zCe(e,t){var r=e;return r[3]*=t,r}function OCe(e){if(NCe(e))return iG;var t=rD(e);return t.length?t:iG}function BCe(e){return NCe(e)?e:UCe}function oLt(e,t,r){var i=e.color;i&&i._inputArray&&(i=i._inputArray);var n=qCe(i),a=qCe(t),o=nD.extractOpts(e),s=[],l,u,f,c,h;if(o.colorscale!==void 0?l=nD.makeColorScaleFuncFromTrace(e):l=OCe,n?u=function(d,x){return d[x]===void 0?iG:rD(l(d[x]))}:u=OCe,a?f=function(d,x){return d[x]===void 0?UCe:BCe(d[x])}:f=BCe,n||a)for(var v=0;v<r;v++)c=u(i,v),h=f(t,v),s[v]=zCe(c,h);else s=zCe(rD(i),t);return s}function sLt(e){var t=nD.extractOpts(e),r=t.colorscale;return t.reversescale&&(r=nD.flipScale(t.colorscale)),r.map(function(i){var n=i[0],a=iLt(i[1]),o=a.toRgb();return{index:n,rgb:[o.r,o.g,o.b,o.a]}})}VCe.exports={formatColor:oLt,parseColorScale:sLt}});var aG=ie((yvr,HCe)=>{"use strict";HCe.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}});var iD=ie((mvr,GCe)=>{"use strict";GCe.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}});var WCe=ie((xvr,YCe)=>{"use strict";var lLt=Ti();function oG(e,t,r,i){if(!t||!t.visible)return null;for(var n=lLt.getComponentMethod("errorbars","makeComputeError")(t),a=new Array(e.length),o=0;o<e.length;o++){var s=n(+e[o],o);if(i.type==="log"){var l=i.c2l(e[o]),u=e[o]-s[0],f=e[o]+s[1];if(a[o]=[(i.c2l(u,!0)-l)*r,(i.c2l(f,!0)-l)*r],u>0){var c=i.c2l(u);i._lowerLogErrorBound||(i._lowerLogErrorBound=c),i._lowerErrorBound=Math.min(i._lowerLogErrorBound,c)}}else a[o]=[-s[0]*r,s[1]*r]}return a}function uLt(e){for(var t=0;t<e.length;t++)if(e[t])return e[t].length;return 0}function fLt(e,t,r){var i=[oG(e.x,e.error_x,t[0],r.xaxis),oG(e.y,e.error_y,t[1],r.yaxis),oG(e.z,e.error_z,t[2],r.zaxis)],n=uLt(i);if(n===0)return null;for(var a=new Array(n),o=0;o<n;o++){for(var s=[[0,0,0],[0,0,0]],l=0;l<3;l++)if(i[l])for(var u=0;u<2;u++)s[u][l]=i[l][o][u];a[o]=s}return a}YCe.exports=fLt});var t4e=ie((_vr,e4e)=>{"use strict";var cLt=_u().gl_line3d,XCe=_u().gl_scatter3d,hLt=_u().gl_error3d,vLt=_u().gl_mesh3d,dLt=_u().delaunay_triangulate,yy=Zt(),QCe=Op(),aD=gy().formatColor,pLt=PA(),sG=aG(),gLt=iD(),yLt=Wi(),mLt=ad().appendArrayPointValue,xLt=WCe();function $Ce(e,t){this.scene=e,this.uid=t,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var uG=$Ce.prototype;uG.handlePick=function(e){if(e.object&&(e.object===this.linePlot||e.object===this.delaunayMesh||e.object===this.textMarkers||e.object===this.scatterPlot)){var t=e.index=e.data.index;return e.object.highlight&&e.object.highlight(null),this.scatterPlot&&(e.object=this.scatterPlot,this.scatterPlot.highlight(e.data)),e.textLabel="",this.textLabels&&(yy.isArrayOrTypedArray(this.textLabels)?(this.textLabels[t]||this.textLabels[t]===0)&&(e.textLabel=this.textLabels[t]):e.textLabel=this.textLabels),e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]],!0}};function _Lt(e,t,r){var i=(r+1)%3,n=(r+2)%3,a=[],o=[],s;for(s=0;s<e.length;++s){var l=e[s];isNaN(l[i])||!isFinite(l[i])||isNaN(l[n])||!isFinite(l[n])||(a.push([l[i],l[n]]),o.push(s))}var u=dLt(a);for(s=0;s<u.length;++s)for(var f=u[s],c=0;c<f.length;++c)f[c]=o[f[c]];return{positions:e,cells:u,meshColor:t}}function bLt(e){for(var t=[0,0,0],r=[[0,0,0],[0,0,0],[0,0,0]],i=[1,1,1],n=0;n<3;n++){var a=e[n];a&&a.copy_zstyle!==!1&&e[2].visible!==!1&&(a=e[2]),!(!a||!a.visible)&&(t[n]=a.width/2,r[n]=QCe(a.color),i[n]=a.thickness)}return{capSize:t,color:r,lineWidth:i}}function ZCe(e){return e==null?0:e.indexOf("left")>-1?-1:e.indexOf("right")>-1?1:0}function jCe(e){return e==null?0:e.indexOf("top")>-1?-1:e.indexOf("bottom")>-1?1:0}function wLt(e){var t=0,r=0,i=[t,r];if(Array.isArray(e))for(var n=0;n<e.length;n++)i[n]=[t,r],e[n]&&(i[n][0]=ZCe(e[n]),i[n][1]=jCe(e[n]));else i[0]=ZCe(e),i[1]=jCe(e);return i}function TLt(e,t){return t(e*4)}function ALt(e){return gLt[e]}function lG(e,t,r,i,n){var a=null;if(yy.isArrayOrTypedArray(e)){a=[];for(var o=0;o<t;o++)e[o]===void 0?a[o]=i:a[o]=r(e[o],n)}else a=r(e,yy.identity);return a}function MLt(e,t){var r=[],i=e.fullSceneLayout,n=e.dataScale,a=i.xaxis,o=i.yaxis,s=i.zaxis,l=t.marker,u=t.line,f=t.x||[],c=t.y||[],h=t.z||[],v=f.length,d=t.xcalendar,x=t.ycalendar,b=t.zcalendar,p,w,A,T,k,_;for(k=0;k<v;k++)p=a.d2l(f[k],0,d)*n[0],w=o.d2l(c[k],0,x)*n[1],A=s.d2l(h[k],0,b)*n[2],r[k]=[p,w,A];if(Array.isArray(t.text))_=t.text;else if(yy.isTypedArray(t.text))_=Array.from(t.text);else if(t.text!==void 0)for(_=new Array(v),k=0;k<v;k++)_[k]=t.text;function E(ne,fe){var ue=i[ne];return yLt.tickText(ue,ue.d2l(fe),!0).text}var S=t.texttemplate;if(S){var g=e.fullLayout,C=g._d3locale,M=Array.isArray(S),P=M?Math.min(S.length,v):v,D=M?function(ne){return S[ne]}:function(){return S};for(_=new Array(P),k=0;k<P;k++){var q={x:f[k],y:c[k],z:h[k]},O={xLabel:E("xaxis",f[k]),yLabel:E("yaxis",c[k]),zLabel:E("zaxis",h[k])},U={};mLt(U,t,k);var B=t._meta||{};_[k]=yy.texttemplateString(D(k),O,C,U,q,B)}}if(T={position:r,mode:t.mode,text:_},"line"in t&&(T.lineColor=aD(u,1,v),T.lineWidth=u.width,T.lineDashes=u.dash),"marker"in t){var F=pLt(t);T.scatterColor=aD(l,1,v),T.scatterSize=lG(l.size,v,TLt,20,F),T.scatterMarker=lG(l.symbol,v,ALt,"\u25CF"),T.scatterLineWidth=l.line.width,T.scatterLineColor=aD(l.line,1,v),T.scatterAngle=0}"textposition"in t&&(T.textOffset=wLt(t.textposition),T.textColor=aD(t.textfont,1,v),T.textSize=lG(t.textfont.size,v,yy.identity,12),T.textFontFamily=t.textfont.family,T.textFontWeight=t.textfont.weight,T.textFontStyle=t.textfont.style,T.textFontVariant=t.textfont.variant,T.textAngle=0);var N=["x","y","z"];for(T.project=[!1,!1,!1],T.projectScale=[1,1,1],T.projectOpacity=[1,1,1],k=0;k<3;++k){var X=t.projection[N[k]];(T.project[k]=X.show)&&(T.projectOpacity[k]=X.opacity,T.projectScale[k]=X.scale)}T.errorBounds=xLt(t,n,i);var K=bLt([t.error_x,t.error_y,t.error_z]);return T.errorColor=K.color,T.errorLineWidth=K.lineWidth,T.errorCapSize=K.capSize,T.delaunayAxis=t.surfaceaxis,T.delaunayColor=QCe(t.surfacecolor),T}function KCe(e){if(yy.isArrayOrTypedArray(e)){var t=e[0];return yy.isArrayOrTypedArray(t)&&(e=t),"rgb("+e.slice(0,3).map(function(r){return Math.round(r*255)})+")"}return null}function JCe(e){return yy.isArrayOrTypedArray(e)?e.length===4&&typeof e[0]=="number"?KCe(e):e.map(KCe):null}uG.update=function(e){var t=this.scene.glplot.gl,r,i,n,a,o=sG.solid;this.data=e;var s=MLt(this.scene,e);"mode"in s&&(this.mode=s.mode),"lineDashes"in s&&s.lineDashes in sG&&(o=sG[s.lineDashes]),this.color=JCe(s.scatterColor)||JCe(s.lineColor),this.dataPoints=s.position,r={gl:this.scene.glplot.gl,position:s.position,color:s.lineColor,lineWidth:s.lineWidth||1,dashes:o[0],dashScale:o[1],opacity:e.opacity,connectGaps:e.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(r):(this.linePlot=cLt(r),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var l=e.opacity;if(e.marker&&e.marker.opacity!==void 0&&(l*=e.marker.opacity),i={gl:this.scene.glplot.gl,position:s.position,color:s.scatterColor,size:s.scatterSize,glyph:s.scatterMarker,opacity:l,orthographic:!0,lineWidth:s.scatterLineWidth,lineColor:s.scatterLineColor,project:s.project,projectScale:s.projectScale,projectOpacity:s.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(i):(this.scatterPlot=XCe(i),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),a={gl:this.scene.glplot.gl,position:s.position,glyph:s.text,color:s.textColor,size:s.textSize,angle:s.textAngle,alignment:s.textOffset,font:s.textFontFamily,fontWeight:s.textFontWeight,fontStyle:s.textFontStyle,fontVariant:s.textFontVariant,orthographic:!0,lineWidth:0,project:!1,opacity:e.opacity},this.textLabels=e.hovertext||e.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(a):(this.textMarkers=XCe(a),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),n={gl:this.scene.glplot.gl,position:s.position,color:s.errorColor,error:s.errorBounds,lineWidth:s.errorLineWidth,capSize:s.errorCapSize,opacity:e.opacity},this.errorBars?s.errorBounds?this.errorBars.update(n):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):s.errorBounds&&(this.errorBars=hLt(n),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),s.delaunayAxis>=0){var u=_Lt(s.position,s.delaunayColor,s.delaunayAxis);u.opacity=e.opacity,this.delaunayMesh?this.delaunayMesh.update(u):(u.gl=t,this.delaunayMesh=vLt(u),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)};uG.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function SLt(e,t){var r=new $Ce(e,t.uid);return r.update(t),r}e4e.exports=SLt});var dG=ie((bvr,i4e)=>{"use strict";var my=Bl(),ELt=Xs(),vG=Ls(),fG=kl().axisHoverFormat,kLt=Ba().hovertemplateAttrs,CLt=Ba().texttemplateAttrs,r4e=rs(),LLt=aG(),PLt=iD(),S0=aa().extendFlat,RLt=Zs().overrideAll,n4e=sx(),DLt=my.line,O_=my.marker,ILt=O_.line,FLt=S0({width:DLt.width,dash:{valType:"enumerated",values:n4e(LLt),dflt:"solid"}},vG("line"));function cG(e){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var hG=i4e.exports=RLt({x:my.x,y:my.y,z:{valType:"data_array"},text:S0({},my.text,{}),texttemplate:CLt({},{}),hovertext:S0({},my.hovertext,{}),hovertemplate:kLt(),xhoverformat:fG("x"),yhoverformat:fG("y"),zhoverformat:fG("z"),mode:S0({},my.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:cG("x"),y:cG("y"),z:cG("z")},connectgaps:my.connectgaps,line:FLt,marker:S0({symbol:{valType:"enumerated",values:n4e(PLt),dflt:"circle",arrayOk:!0},size:S0({},O_.size,{dflt:8}),sizeref:O_.sizeref,sizemin:O_.sizemin,sizemode:O_.sizemode,opacity:S0({},O_.opacity,{arrayOk:!1}),colorbar:O_.colorbar,line:S0({width:S0({},ILt.width,{arrayOk:!1})},vG("marker.line"))},vG("marker")),textposition:S0({},my.textposition,{dflt:"top center"}),textfont:ELt({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,variantValues:["normal","small-caps"]}),opacity:r4e.opacity,hoverinfo:S0({},r4e.hoverinfo)},"calc","nested");hG.x.editType=hG.y.editType=hG.z.editType="calc+clearAxisTypes"});var s4e=ie((wvr,o4e)=>{"use strict";var a4e=Ti(),qLt=Zt(),pG=Ks(),zLt=xp(),OLt=l0(),BLt=u0(),NLt=dG();o4e.exports=function(t,r,i,n){function a(v,d){return qLt.coerce(t,r,NLt,v,d)}var o=ULt(t,r,a,n);if(!o){r.visible=!1;return}a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),a("mode"),pG.hasMarkers(r)&&zLt(t,r,i,n,a,{noSelect:!0,noAngle:!0}),pG.hasLines(r)&&(a("connectgaps"),OLt(t,r,i,n,a)),pG.hasText(r)&&(a("texttemplate"),BLt(t,r,n,a,{noSelect:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var s=(r.line||{}).color,l=(r.marker||{}).color;a("surfaceaxis")>=0&&a("surfacecolor",s||l);for(var u=["x","y","z"],f=0;f<3;++f){var c="projection."+u[f];a(c+".show")&&(a(c+".opacity"),a(c+".scale"))}var h=a4e.getComponentMethod("errorbars","supplyDefaults");h(t,r,s||l||i,{axis:"z"}),h(t,r,s||l||i,{axis:"y",inherit:"z"}),h(t,r,s||l||i,{axis:"x",inherit:"z"})};function ULt(e,t,r,i){var n=0,a=r("x"),o=r("y"),s=r("z"),l=a4e.getComponentMethod("calendars","handleTraceDefaults");return l(e,t,["x","y","z"],i),a&&o&&s&&(n=Math.min(a.length,o.length,s.length),t._length=t._xlength=t._ylength=t._zlength=n),n}});var gG=ie((Tvr,l4e)=>{"use strict";var VLt=K0(),HLt=_p();l4e.exports=function(t,r){var i=[{x:!1,y:!1,trace:r,t:{}}];return VLt(i,r),HLt(t,r),i}});var f4e=ie((Avr,u4e)=>{u4e.exports=GLt;function GLt(e,t){if(typeof e!="string")throw new TypeError("must specify type string");if(t=t||{},typeof document=="undefined"&&!t.canvas)return null;var r=t.canvas||document.createElement("canvas");typeof t.width=="number"&&(r.width=t.width),typeof t.height=="number"&&(r.height=t.height);var i=t,n;try{var a=[e];e.indexOf("webgl")===0&&a.push("experimental-"+e);for(var o=0;o<a.length;o++)if(n=r.getContext(a[o],i),n)return n}catch(s){n=null}return n||null}});var yG=ie((Mvr,c4e)=>{var YLt=f4e();c4e.exports=function(t){return YLt("webgl",t)}});var oD=ie((Svr,v4e)=>{"use strict";var h4e=_i(),WLt=function(){};v4e.exports=function(t){for(var r in t)typeof t[r]=="function"&&(t[r]=WLt);t.destroy=function(){t.container.parentNode.removeChild(t.container)};var i=document.createElement("div");i.className="no-webgl",i.style.cursor="pointer",i.style.fontSize="24px",i.style.color=h4e.defaults[0],i.style.position="absolute",i.style.left=i.style.top="0px",i.style.width=i.style.height="100%",i.style["background-color"]=h4e.lightLine,i.style["z-index"]=30;var n=document.createElement("p");return n.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",n.style.position="relative",n.style.top="50%",n.style.left="50%",n.style.height="30%",n.style.width="50%",n.style.margin="-15% 0 0 -25%",i.appendChild(n),t.container.appendChild(i),t.container.style.background="#FFFFFF",t.container.onclick=function(){window.open("https://get.webgl.org")},!1}});var g4e=ie((Evr,p4e)=>{"use strict";var B_=Op(),XLt=Zt(),ZLt=["xaxis","yaxis","zaxis"];function d4e(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickFontWeight=["normal","normal","normal","normal"],this.tickFontStyle=["normal","normal","normal","normal"],this.tickFontVariant=["normal","normal","normal","normal"],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelFontWeight=["normal","normal","normal","normal"],this.labelFontStyle=["normal","normal","normal","normal"],this.labelFontVariant=["normal","normal","normal","normal"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var jLt=d4e.prototype;jLt.merge=function(e,t){for(var r=this,i=0;i<3;++i){var n=t[ZLt[i]];if(!n.visible){r.tickEnable[i]=!1,r.labelEnable[i]=!1,r.lineEnable[i]=!1,r.lineTickEnable[i]=!1,r.gridEnable[i]=!1,r.zeroEnable[i]=!1,r.backgroundEnable[i]=!1;continue}r.labels[i]=e._meta?XLt.templateString(n.title.text,e._meta):n.title.text,"font"in n.title&&(n.title.font.color&&(r.labelColor[i]=B_(n.title.font.color)),n.title.font.family&&(r.labelFont[i]=n.title.font.family),n.title.font.size&&(r.labelSize[i]=n.title.font.size),n.title.font.weight&&(r.labelFontWeight[i]=n.title.font.weight),n.title.font.style&&(r.labelFontStyle[i]=n.title.font.style),n.title.font.variant&&(r.labelFontVariant[i]=n.title.font.variant)),"showline"in n&&(r.lineEnable[i]=n.showline),"linecolor"in n&&(r.lineColor[i]=B_(n.linecolor)),"linewidth"in n&&(r.lineWidth[i]=n.linewidth),"showgrid"in n&&(r.gridEnable[i]=n.showgrid),"gridcolor"in n&&(r.gridColor[i]=B_(n.gridcolor)),"gridwidth"in n&&(r.gridWidth[i]=n.gridwidth),n.type==="log"?r.zeroEnable[i]=!1:"zeroline"in n&&(r.zeroEnable[i]=n.zeroline),"zerolinecolor"in n&&(r.zeroLineColor[i]=B_(n.zerolinecolor)),"zerolinewidth"in n&&(r.zeroLineWidth[i]=n.zerolinewidth),"ticks"in n&&n.ticks?r.lineTickEnable[i]=!0:r.lineTickEnable[i]=!1,"ticklen"in n&&(r.lineTickLength[i]=r._defaultLineTickLength[i]=n.ticklen),"tickcolor"in n&&(r.lineTickColor[i]=B_(n.tickcolor)),"tickwidth"in n&&(r.lineTickWidth[i]=n.tickwidth),"tickangle"in n&&(r.tickAngle[i]=n.tickangle==="auto"?-3600:Math.PI*-n.tickangle/180),"showticklabels"in n&&(r.tickEnable[i]=n.showticklabels),"tickfont"in n&&(n.tickfont.color&&(r.tickColor[i]=B_(n.tickfont.color)),n.tickfont.family&&(r.tickFont[i]=n.tickfont.family),n.tickfont.size&&(r.tickSize[i]=n.tickfont.size),n.tickfont.weight&&(r.tickFontWeight[i]=n.tickfont.weight),n.tickfont.style&&(r.tickFontStyle[i]=n.tickfont.style),n.tickfont.variant&&(r.tickFontVariant[i]=n.tickfont.variant)),"mirror"in n?["ticks","all","allticks"].indexOf(n.mirror)!==-1?(r.lineTickMirror[i]=!0,r.lineMirror[i]=!0):n.mirror===!0?(r.lineTickMirror[i]=!1,r.lineMirror[i]=!0):(r.lineTickMirror[i]=!1,r.lineMirror[i]=!1):r.lineMirror[i]=!1,"showbackground"in n&&n.showbackground!==!1?(r.backgroundEnable[i]=!0,r.backgroundColor[i]=B_(n.backgroundcolor)):r.backgroundEnable[i]=!1}};function KLt(e,t){var r=new d4e;return r.merge(e,t),r}p4e.exports=KLt});var x4e=ie((kvr,m4e)=>{"use strict";var JLt=Op(),QLt=["xaxis","yaxis","zaxis"];function y4e(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var $Lt=y4e.prototype;$Lt.merge=function(e){for(var t=0;t<3;++t){var r=e[QLt[t]];if(!r.visible){this.enabled[t]=!1,this.drawSides[t]=!1;continue}this.enabled[t]=r.showspikes,this.colors[t]=JLt(r.spikecolor),this.drawSides[t]=r.spikesides,this.lineWidth[t]=r.spikethickness}};function ePt(e){var t=new y4e;return t.merge(e),t}m4e.exports=ePt});var w4e=ie((Cvr,b4e)=>{"use strict";b4e.exports=aPt;var _4e=Wi(),tPt=Zt(),rPt=["xaxis","yaxis","zaxis"],nPt=[0,0,0];function iPt(e){for(var t=new Array(3),r=0;r<3;++r){for(var i=e[r],n=new Array(i.length),a=0;a<i.length;++a)n[a]=i[a].x;t[r]=n}return t}function aPt(e){for(var t=e.axesOptions,r=e.glplot.axesPixels,i=e.fullSceneLayout,n=[[],[],[]],a=0;a<3;++a){var o=i[rPt[a]];if(o._length=(r[a].hi-r[a].lo)*r[a].pixelsPerDataUnit/e.dataScale[a],Math.abs(o._length)===1/0||isNaN(o._length))n[a]=[];else{o._input_range=o.range.slice(),o.range[0]=r[a].lo/e.dataScale[a],o.range[1]=r[a].hi/e.dataScale[a],o._m=1/(e.dataScale[a]*r[a].pixelsPerDataUnit),o.range[0]===o.range[1]&&(o.range[0]-=1,o.range[1]+=1);var s=o.tickmode;if(o.tickmode==="auto"){o.tickmode="linear";var l=o.nticks||tPt.constrain(o._length/40,4,9);_4e.autoTicks(o,Math.abs(o.range[1]-o.range[0])/l)}for(var u=_4e.calcTicks(o,{msUTC:!0}),f=0;f<u.length;++f)u[f].x=u[f].x*e.dataScale[a],o.type==="date"&&(u[f].text=u[f].text.replace(/\<br\>/g," "));n[a]=u,o.tickmode=s}}t.ticks=n;for(var a=0;a<3;++a){nPt[a]=.5*(e.glplot.bounds[0][a]+e.glplot.bounds[1][a]);for(var f=0;f<2;++f)t.bounds[f][a]=e.glplot.bounds[f][a]}e.contourLevels=iPt(n)}});var C4e=ie((Lvr,k4e)=>{"use strict";var M4e=_u().gl_plot3d,oPt=M4e.createCamera,T4e=M4e.createScene,sPt=yG(),lPt=VA(),uD=Ti(),Lv=Zt(),lD=Lv.preserveDrawingBuffer(),fD=Wi(),E0=Ol(),uPt=Op(),fPt=oD(),cPt=RB(),hPt=g4e(),vPt=x4e(),dPt=w4e(),pPt=Ld().applyAutorangeOptions,DE,sD,S4e=!1;function E4e(e,t){var r=document.createElement("div"),i=e.container;this.graphDiv=e.graphDiv;var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.style.position="absolute",n.style.top=n.style.left="0px",n.style.width=n.style.height="100%",n.style["z-index"]=20,n.style["pointer-events"]="none",r.appendChild(n),this.svgContainer=n,r.id=e.id,r.style.position="absolute",r.style.top=r.style.left="0px",r.style.width=r.style.height="100%",i.appendChild(r),this.fullLayout=t,this.id=e.id||"scene",this.fullSceneLayout=t[this.id],this.plotArgs=[[],{},{}],this.axesOptions=hPt(t,t[this.id]),this.spikeOptions=vPt(t[this.id]),this.container=r,this.staticMode=!!e.staticPlot,this.pixelRatio=this.pixelRatio||e.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=uD.getComponentMethod("annotations3d","convert"),this.drawAnnotations=uD.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var wh=E4e.prototype;wh.prepareOptions=function(){var e=this,t={canvas:e.canvas,gl:e.gl,glOptions:{preserveDrawingBuffer:lD,premultipliedAlpha:!0,antialias:!0},container:e.container,axes:e.axesOptions,spikes:e.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:e.camera,pixelRatio:e.pixelRatio};if(e.staticMode){if(!sD&&(DE=document.createElement("canvas"),sD=sPt({canvas:DE,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!sD))throw new Error("error creating static canvas/context for image server");t.gl=sD,t.canvas=DE}return t};var A4e=!0;wh.tryCreatePlot=function(){var e=this,t=e.prepareOptions(),r=!0;try{e.glplot=T4e(t)}catch(i){if(e.staticMode||!A4e||lD)r=!1;else{Lv.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{lD=t.glOptions.preserveDrawingBuffer=!0,e.glplot=T4e(t)}catch(n){lD=t.glOptions.preserveDrawingBuffer=!1,r=!1}}}return A4e=!1,r};wh.initializeGLCamera=function(){var e=this,t=e.fullSceneLayout.camera,r=t.projection.type==="orthographic";e.camera=oPt(e.container,{center:[t.center.x,t.center.y,t.center.z],eye:[t.eye.x,t.eye.y,t.eye.z],up:[t.up.x,t.up.y,t.up.z],_ortho:r,zoomMin:.01,zoomMax:100,mode:"orbit"})};wh.initializeGLPlot=function(){var e=this;e.initializeGLCamera();var t=e.tryCreatePlot();if(!t)return fPt(e);e.traces={},e.make4thDimension();var r=e.graphDiv,i=r.layout,n=function(){var o={};return e.isCameraChanged(i)&&(o[e.id+".camera"]=e.getCamera()),e.isAspectChanged(i)&&(o[e.id+".aspectratio"]=e.glplot.getAspectratio(),i[e.id].aspectmode!=="manual"&&(e.fullSceneLayout.aspectmode=i[e.id].aspectmode=o[e.id+".aspectmode"]="manual")),o},a=function(o){if(o.fullSceneLayout.dragmode!==!1){var s=n();o.saveLayout(i),o.graphDiv.emit("plotly_relayout",s)}};return e.glplot.canvas&&(e.glplot.canvas.addEventListener("mouseup",function(){a(e)}),e.glplot.canvas.addEventListener("touchstart",function(){S4e=!0}),e.glplot.canvas.addEventListener("wheel",function(o){if(r._context._scrollZoom.gl3d){if(e.camera._ortho){var s=o.deltaX>o.deltaY?1.1:.9090909090909091,l=e.glplot.getAspectratio();e.glplot.setAspectratio({x:s*l.x,y:s*l.y,z:s*l.z})}a(e)}},lPt?{passive:!1}:!1),e.glplot.canvas.addEventListener("mousemove",function(){if(e.fullSceneLayout.dragmode!==!1&&e.camera.mouseListener.buttons!==0){var o=n();e.graphDiv.emit("plotly_relayouting",o)}}),e.staticMode||e.glplot.canvas.addEventListener("webglcontextlost",function(o){r&&r.emit&&r.emit("plotly_webglcontextlost",{event:o,layer:e.id})},!1)),e.glplot.oncontextloss=function(){e.recoverContext()},e.glplot.onrender=function(){e.render()},!0};wh.render=function(){var e=this,t=e.graphDiv,r,i=e.svgContainer,n=e.container.getBoundingClientRect();t._fullLayout._calcInverseTransform(t);var a=t._fullLayout._invScaleX,o=t._fullLayout._invScaleY,s=n.width*a,l=n.height*o;i.setAttributeNS(null,"viewBox","0 0 "+s+" "+l),i.setAttributeNS(null,"width",s),i.setAttributeNS(null,"height",l),dPt(e),e.glplot.axes.update(e.axesOptions);for(var u=Object.keys(e.traces),f=null,c=e.glplot.selection,h=0;h<u.length;++h)r=e.traces[u[h]],r.data.hoverinfo!=="skip"&&r.handlePick(c)&&(f=r),r.setContourLevels&&r.setContourLevels();function v(C,M,P){var D=e.fullSceneLayout[C+"axis"];return D.type!=="log"&&(M=D.d2l(M)),fD.hoverLabelText(D,M,P)}if(f!==null){var d=cPt(e.glplot.cameraParams,c.dataCoordinate);r=f.data;var x=t._fullData[r.index],b=c.index,p={xLabel:v("x",c.traceCoordinate[0],r.xhoverformat),yLabel:v("y",c.traceCoordinate[1],r.yhoverformat),zLabel:v("z",c.traceCoordinate[2],r.zhoverformat)},w=E0.castHoverinfo(x,e.fullLayout,b),A=(w||"").split("+"),T=w&&w==="all";!x.hovertemplate&&!T&&(A.indexOf("x")===-1&&(p.xLabel=void 0),A.indexOf("y")===-1&&(p.yLabel=void 0),A.indexOf("z")===-1&&(p.zLabel=void 0),A.indexOf("text")===-1&&(c.textLabel=void 0),A.indexOf("name")===-1&&(f.name=void 0));var k,_=[];r.type==="cone"||r.type==="streamtube"?(p.uLabel=v("x",c.traceCoordinate[3],r.uhoverformat),(T||A.indexOf("u")!==-1)&&_.push("u: "+p.uLabel),p.vLabel=v("y",c.traceCoordinate[4],r.vhoverformat),(T||A.indexOf("v")!==-1)&&_.push("v: "+p.vLabel),p.wLabel=v("z",c.traceCoordinate[5],r.whoverformat),(T||A.indexOf("w")!==-1)&&_.push("w: "+p.wLabel),p.normLabel=c.traceCoordinate[6].toPrecision(3),(T||A.indexOf("norm")!==-1)&&_.push("norm: "+p.normLabel),r.type==="streamtube"&&(p.divergenceLabel=c.traceCoordinate[7].toPrecision(3),(T||A.indexOf("divergence")!==-1)&&_.push("divergence: "+p.divergenceLabel)),c.textLabel&&_.push(c.textLabel),k=_.join("<br>")):r.type==="isosurface"||r.type==="volume"?(p.valueLabel=fD.hoverLabelText(e._mockAxis,e._mockAxis.d2l(c.traceCoordinate[3]),r.valuehoverformat),_.push("value: "+p.valueLabel),c.textLabel&&_.push(c.textLabel),k=_.join("<br>")):k=c.textLabel;var E={x:c.traceCoordinate[0],y:c.traceCoordinate[1],z:c.traceCoordinate[2],data:x._input,fullData:x,curveNumber:x.index,pointNumber:b};E0.appendArrayPointValue(E,x,b),r._module.eventData&&(E=x._module.eventData(E,c,x,{},b));var S={points:[E]};if(e.fullSceneLayout.hovermode){var g=[];E0.loneHover({trace:x,x:(.5+.5*d[0]/d[3])*s,y:(.5-.5*d[1]/d[3])*l,xLabel:p.xLabel,yLabel:p.yLabel,zLabel:p.zLabel,text:k,name:f.name,color:E0.castHoverOption(x,b,"bgcolor")||f.color,borderColor:E0.castHoverOption(x,b,"bordercolor"),fontFamily:E0.castHoverOption(x,b,"font.family"),fontSize:E0.castHoverOption(x,b,"font.size"),fontColor:E0.castHoverOption(x,b,"font.color"),nameLength:E0.castHoverOption(x,b,"namelength"),textAlign:E0.castHoverOption(x,b,"align"),hovertemplate:Lv.castOption(x,b,"hovertemplate"),hovertemplateLabels:Lv.extendFlat({},E,p),eventData:[E]},{container:i,gd:t,inOut_bbox:g}),E.bbox=g[0]}c.distance<5&&(c.buttons||S4e)?t.emit("plotly_click",S):t.emit("plotly_hover",S),this.oldEventData=S}else E0.loneUnhover(i),this.oldEventData&&t.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;e.drawAnnotations(e)};wh.recoverContext=function(){var e=this;e.glplot.dispose();var t=function(){if(e.glplot.gl.isContextLost()){requestAnimationFrame(t);return}if(!e.initializeGLPlot()){Lv.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}e.plot.apply(e,e.plotArgs)};requestAnimationFrame(t)};var IE=["xaxis","yaxis","zaxis"];function gPt(e,t,r){for(var i=e.fullSceneLayout,n=0;n<3;n++){var a=IE[n],o=a.charAt(0),s=i[a],l=t[o],u=t[o+"calendar"],f=t["_"+o+"length"];if(!Lv.isArrayOrTypedArray(l))r[0][n]=Math.min(r[0][n],0),r[1][n]=Math.max(r[1][n],f-1);else for(var c,h=0;h<(f||l.length);h++)if(Lv.isArrayOrTypedArray(l[h]))for(var v=0;v<l[h].length;++v)c=s.d2l(l[h][v],0,u),!isNaN(c)&&isFinite(c)&&(r[0][n]=Math.min(r[0][n],c),r[1][n]=Math.max(r[1][n],c));else c=s.d2l(l[h],0,u),!isNaN(c)&&isFinite(c)&&(r[0][n]=Math.min(r[0][n],c),r[1][n]=Math.max(r[1][n],c))}}function yPt(e,t){for(var r=e.fullSceneLayout,i=r.annotations||[],n=0;n<3;n++)for(var a=IE[n],o=a.charAt(0),s=r[a],l=0;l<i.length;l++){var u=i[l];if(u.visible){var f=s.r2l(u[o]);!isNaN(f)&&isFinite(f)&&(t[0][n]=Math.min(t[0][n],f),t[1][n]=Math.max(t[1][n],f))}}}wh.plot=function(e,t,r){var i=this;if(i.plotArgs=[e,t,r],!i.glplot.contextLost){var n,a,o,s,l,u,f=t[i.id],c=r[i.id];i.fullLayout=t,i.fullSceneLayout=f,i.axesOptions.merge(t,f),i.spikeOptions.merge(f),i.setViewport(f),i.updateFx(f.dragmode,f.hovermode),i.camera.enableWheel=i.graphDiv._context._scrollZoom.gl3d,i.glplot.setClearColor(uPt(f.bgcolor)),i.setConvert(l),e?Array.isArray(e)||(e=[e]):e=[];var h=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(o=0;o<e.length;++o)n=e[o],!(n.visible!==!0||n._length===0)&&gPt(this,n,h);yPt(this,h);var v=[1,1,1];for(s=0;s<3;++s)h[1][s]===h[0][s]?v[s]=1:v[s]=1/(h[1][s]-h[0][s]);for(i.dataScale=v,i.convertAnnotations(this),o=0;o<e.length;++o)n=e[o],!(n.visible!==!0||n._length===0)&&(a=i.traces[n.uid],a?a.data.type===n.type?a.update(n):(a.dispose(),a=n._module.plot(this,n),i.traces[n.uid]=a):(a=n._module.plot(this,n),i.traces[n.uid]=a),a.name=n.name);var d=Object.keys(i.traces);e:for(o=0;o<d.length;++o){for(s=0;s<e.length;++s)if(e[s].uid===d[o]&&e[s].visible===!0&&e[s]._length!==0)continue e;a=i.traces[d[o]],a.dispose(),delete i.traces[d[o]]}i.glplot.objects.sort(function(K,ne){return K._trace.data.index-ne._trace.data.index});var x=[[0,0,0],[0,0,0]],b=[],p={};for(o=0;o<3;++o){l=f[IE[o]],u=l.type,u in p?(p[u].acc*=v[o],p[u].count+=1):p[u]={acc:v[o],count:1};var w;if(l.autorange){x[0][o]=1/0,x[1][o]=-1/0;var A=i.glplot.objects,T=i.fullSceneLayout.annotations||[],k=l._name.charAt(0);for(s=0;s<A.length;s++){var _=A[s],E=_.bounds,S=_._trace.data._pad||0;_.constructor.name==="ErrorBars"&&l._lowerLogErrorBound?x[0][o]=Math.min(x[0][o],l._lowerLogErrorBound):x[0][o]=Math.min(x[0][o],E[0][o]/v[o]-S),x[1][o]=Math.max(x[1][o],E[1][o]/v[o]+S)}for(s=0;s<T.length;s++){var g=T[s];if(g.visible){var C=l.r2l(g[k]);x[0][o]=Math.min(x[0][o],C),x[1][o]=Math.max(x[1][o],C)}}if("rangemode"in l&&l.rangemode==="tozero"&&(x[0][o]=Math.min(x[0][o],0),x[1][o]=Math.max(x[1][o],0)),x[0][o]>x[1][o])x[0][o]=-1,x[1][o]=1;else{var M=x[1][o]-x[0][o];x[0][o]-=M/32,x[1][o]+=M/32}if(w=[x[0][o],x[1][o]],w=pPt(w,l),x[0][o]=w[0],x[1][o]=w[1],l.isReversed()){var P=x[0][o];x[0][o]=x[1][o],x[1][o]=P}}else w=l.range,x[0][o]=l.r2l(w[0]),x[1][o]=l.r2l(w[1]);x[0][o]===x[1][o]&&(x[0][o]-=1,x[1][o]+=1),b[o]=x[1][o]-x[0][o],l.range=[x[0][o],x[1][o]],l.limitRange(),i.glplot.setBounds(o,{min:l.range[0]*v[o],max:l.range[1]*v[o]})}var D,q=f.aspectmode;if(q==="cube")D=[1,1,1];else if(q==="manual"){var O=f.aspectratio;D=[O.x,O.y,O.z]}else if(q==="auto"||q==="data"){var U=[1,1,1];for(o=0;o<3;++o){l=f[IE[o]],u=l.type;var B=p[u];U[o]=Math.pow(B.acc,1/B.count)/v[o]}q==="data"||Math.max.apply(null,U)/Math.min.apply(null,U)<=4?D=U:D=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");f.aspectratio.x=c.aspectratio.x=D[0],f.aspectratio.y=c.aspectratio.y=D[1],f.aspectratio.z=c.aspectratio.z=D[2],i.glplot.setAspectratio(f.aspectratio),i.viewInitial.aspectratio||(i.viewInitial.aspectratio={x:f.aspectratio.x,y:f.aspectratio.y,z:f.aspectratio.z}),i.viewInitial.aspectmode||(i.viewInitial.aspectmode=f.aspectmode);var F=f.domain||null,N=t._size||null;if(F&&N){var X=i.container.style;X.position="absolute",X.left=N.l+F.x[0]*N.w+"px",X.top=N.t+(1-F.y[1])*N.h+"px",X.width=N.w*(F.x[1]-F.x[0])+"px",X.height=N.h*(F.y[1]-F.y[0])+"px"}i.glplot.redraw()}};wh.destroy=function(){var e=this;e.glplot&&(e.camera.mouseListener.enabled=!1,e.container.removeEventListener("wheel",e.camera.wheelListener),e.camera=null,e.glplot.dispose(),e.container.parentNode.removeChild(e.container),e.glplot=null)};function mPt(e){return[[e.eye.x,e.eye.y,e.eye.z],[e.center.x,e.center.y,e.center.z],[e.up.x,e.up.y,e.up.z]]}function xPt(e){return{up:{x:e.up[0],y:e.up[1],z:e.up[2]},center:{x:e.center[0],y:e.center[1],z:e.center[2]},eye:{x:e.eye[0],y:e.eye[1],z:e.eye[2]},projection:{type:e._ortho===!0?"orthographic":"perspective"}}}wh.getCamera=function(){var e=this;return e.camera.view.recalcMatrix(e.camera.view.lastT()),xPt(e.camera)};wh.setViewport=function(e){var t=this,r=e.camera;t.camera.lookAt.apply(this,mPt(r)),t.glplot.setAspectratio(e.aspectratio);var i=r.projection.type==="orthographic",n=t.camera._ortho;i!==n&&(t.glplot.redraw(),t.glplot.clearRGBA(),t.glplot.dispose(),t.initializeGLPlot())};wh.isCameraChanged=function(e){var t=this,r=t.getCamera(),i=Lv.nestedProperty(e,t.id+".camera"),n=i.get();function a(u,f,c,h){var v=["up","center","eye"],d=["x","y","z"];return f[v[c]]&&u[v[c]][d[h]]===f[v[c]][d[h]]}var o=!1;if(n===void 0)o=!0;else{for(var s=0;s<3;s++)for(var l=0;l<3;l++)if(!a(r,n,s,l)){o=!0;break}(!n.projection||r.projection&&r.projection.type!==n.projection.type)&&(o=!0)}return o};wh.isAspectChanged=function(e){var t=this,r=t.glplot.getAspectratio(),i=Lv.nestedProperty(e,t.id+".aspectratio"),n=i.get();return n===void 0||n.x!==r.x||n.y!==r.y||n.z!==r.z};wh.saveLayout=function(e){var t=this,r=t.fullLayout,i,n,a,o,s,l,u=t.isCameraChanged(e),f=t.isAspectChanged(e),c=u||f;if(c){var h={};if(u&&(i=t.getCamera(),n=Lv.nestedProperty(e,t.id+".camera"),a=n.get(),h[t.id+".camera"]=a),f&&(o=t.glplot.getAspectratio(),s=Lv.nestedProperty(e,t.id+".aspectratio"),l=s.get(),h[t.id+".aspectratio"]=l),uD.call("_storeDirectGUIEdit",e,r._preGUI,h),u){n.set(i);var v=Lv.nestedProperty(r,t.id+".camera");v.set(i)}if(f){s.set(o);var d=Lv.nestedProperty(r,t.id+".aspectratio");d.set(o),t.glplot.redraw()}}return c};wh.updateFx=function(e,t){var r=this,i=r.camera;if(i)if(e==="orbit")i.mode="orbit",i.keyBindingMode="rotate";else if(e==="turntable"){i.up=[0,0,1],i.mode="turntable",i.keyBindingMode="rotate";var n=r.graphDiv,a=n._fullLayout,o=r.fullSceneLayout.camera,s=o.up.x,l=o.up.y,u=o.up.z;if(u/Math.sqrt(s*s+l*l+u*u)<.999){var f=r.id+".camera.up",c={x:0,y:0,z:1},h={};h[f]=c;var v=n.layout;uD.call("_storeDirectGUIEdit",v,a._preGUI,h),o.up=c,Lv.nestedProperty(v,f).set(c)}}else i.keyBindingMode=e;r.fullSceneLayout.hovermode=t};function _Pt(e,t,r){for(var i=0,n=r-1;i<n;++i,--n)for(var a=0;a<t;++a)for(var o=0;o<4;++o){var s=4*(t*i+a)+o,l=4*(t*n+a)+o,u=e[s];e[s]=e[l],e[l]=u}}function bPt(e,t,r){for(var i=0;i<r;++i)for(var n=0;n<t;++n){var a=4*(t*i+n),o=e[a+3];if(o>0)for(var s=255/o,l=0;l<3;++l)e[a+l]=Math.min(s*e[a+l],255)}}wh.toImage=function(e){var t=this;e||(e="png"),t.staticMode&&t.container.appendChild(DE),t.glplot.redraw();var r=t.glplot.gl,i=r.drawingBufferWidth,n=r.drawingBufferHeight;r.bindFramebuffer(r.FRAMEBUFFER,null);var a=new Uint8Array(i*n*4);r.readPixels(0,0,i,n,r.RGBA,r.UNSIGNED_BYTE,a),_Pt(a,i,n),bPt(a,i,n);var o=document.createElement("canvas");o.width=i,o.height=n;var s=o.getContext("2d",{willReadFrequently:!0}),l=s.createImageData(i,n);l.data.set(a),s.putImageData(l,0,0);var u;switch(e){case"jpeg":u=o.toDataURL("image/jpeg");break;case"webp":u=o.toDataURL("image/webp");break;default:u=o.toDataURL("image/png")}return t.staticMode&&t.container.removeChild(DE),u};wh.setConvert=function(){for(var e=this,t=0;t<3;t++){var r=e.fullSceneLayout[IE[t]];fD.setConvert(r,e.fullLayout),r.setScale=Lv.noop}};wh.make4thDimension=function(){var e=this,t=e.graphDiv,r=t._fullLayout;e._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},fD.setConvert(e._mockAxis,r)};k4e.exports=E4e});var P4e=ie((Pvr,L4e)=>{"use strict";L4e.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}});var xG=ie((Rvr,R4e)=>{"use strict";var wPt=_i(),Ga=gc(),mG=aa().extendFlat,TPt=Zs().overrideAll;R4e.exports=TPt({visible:Ga.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:wPt.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:Ga.color,categoryorder:Ga.categoryorder,categoryarray:Ga.categoryarray,title:{text:Ga.title.text,font:Ga.title.font},type:mG({},Ga.type,{values:["-","linear","log","date","category"]}),autotypenumbers:Ga.autotypenumbers,autorange:Ga.autorange,autorangeoptions:{minallowed:Ga.autorangeoptions.minallowed,maxallowed:Ga.autorangeoptions.maxallowed,clipmin:Ga.autorangeoptions.clipmin,clipmax:Ga.autorangeoptions.clipmax,include:Ga.autorangeoptions.include,editType:"plot"},rangemode:Ga.rangemode,minallowed:Ga.minallowed,maxallowed:Ga.maxallowed,range:mG({},Ga.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:Ga.minor.tickmode,nticks:Ga.nticks,tick0:Ga.tick0,dtick:Ga.dtick,tickvals:Ga.tickvals,ticktext:Ga.ticktext,ticks:Ga.ticks,mirror:Ga.mirror,ticklen:Ga.ticklen,tickwidth:Ga.tickwidth,tickcolor:Ga.tickcolor,showticklabels:Ga.showticklabels,labelalias:Ga.labelalias,tickfont:Ga.tickfont,tickangle:Ga.tickangle,tickprefix:Ga.tickprefix,showtickprefix:Ga.showtickprefix,ticksuffix:Ga.ticksuffix,showticksuffix:Ga.showticksuffix,showexponent:Ga.showexponent,exponentformat:Ga.exponentformat,minexponent:Ga.minexponent,separatethousands:Ga.separatethousands,tickformat:Ga.tickformat,tickformatstops:Ga.tickformatstops,hoverformat:Ga.hoverformat,showline:Ga.showline,linecolor:Ga.linecolor,linewidth:Ga.linewidth,showgrid:Ga.showgrid,gridcolor:mG({},Ga.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:Ga.gridwidth,zeroline:Ga.zeroline,zerolinecolor:Ga.zerolinecolor,zerolinewidth:Ga.zerolinewidth,_deprecated:{title:Ga._deprecated.title,titlefont:Ga._deprecated.titlefont}},"plot","from-root")});var TG=ie((Dvr,D4e)=>{"use strict";var _G=xG(),APt=fl().attributes,bG=aa().extendFlat,MPt=Zt().counterRegex;function wG(e,t,r){return{x:{valType:"number",dflt:e,editType:"camera"},y:{valType:"number",dflt:t,editType:"camera"},z:{valType:"number",dflt:r,editType:"camera"},editType:"camera"}}D4e.exports={_arrayAttrRegexps:[MPt("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:bG(wG(0,0,1),{}),center:bG(wG(0,0,0),{}),eye:bG(wG(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:APt({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:_G,yaxis:_G,zaxis:_G,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}});var z4e=ie((Ivr,q4e)=>{"use strict";var SPt=Kf().mix,I4e=Zt(),EPt=ko(),kPt=xG(),CPt=gB(),LPt=qM(),F4e=["xaxis","yaxis","zaxis"],PPt=100*136/187;q4e.exports=function(t,r,i){var n,a;function o(u,f){return I4e.coerce(n,a,kPt,u,f)}for(var s=0;s<F4e.length;s++){var l=F4e[s];n=t[l]||{},a=EPt.newContainer(r,l),a._id=l[0]+i.scene,a._name=l,CPt(n,a,o,i),LPt(n,a,o,{font:i.font,letter:l[0],data:i.data,showGrid:!0,noAutotickangles:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:i.bgColor,calendar:i.calendar},i.fullLayout),o("gridcolor",SPt(a.color,i.bgColor,PPt).toRgbString()),o("title.text",l[0]),a.setScale=I4e.noop,o("showspikes")&&(o("spikesides"),o("spikethickness"),o("spikecolor",a.color)),o("showaxeslabels"),o("showbackground")&&o("backgroundcolor")}}});var U4e=ie((Fvr,N4e)=>{"use strict";var RPt=Zt(),DPt=_i(),IPt=Ti(),FPt=r_(),qPt=z4e(),O4e=TG(),zPt=pc().getSubplotData,B4e="gl3d";N4e.exports=function(t,r,i){var n=r._basePlotModules.length>1;function a(o){if(!n){var s=RPt.validate(t[o],O4e[o]);if(s)return t[o]}}FPt(t,r,i,{type:B4e,attributes:O4e,handleDefaults:OPt,fullLayout:r,font:r.font,fullData:i,getDfltFromLayout:a,autotypenumbersDflt:r.autotypenumbers,paper_bgcolor:r.paper_bgcolor,calendar:r.calendar})};function OPt(e,t,r,i){for(var n=r("bgcolor"),a=DPt.combine(n,i.paper_bgcolor),o=["up","center","eye"],s=0;s<o.length;s++)r("camera."+o[s]+".x"),r("camera."+o[s]+".y"),r("camera."+o[s]+".z");r("camera.projection.type");var l=!!r("aspectratio.x")&&!!r("aspectratio.y")&&!!r("aspectratio.z"),u=l?"manual":"auto",f=r("aspectmode",u);l||(e.aspectratio=t.aspectratio={x:1,y:1,z:1},f==="manual"&&(t.aspectmode="auto"),e.aspectmode=t.aspectmode);var c=zPt(i.fullData,B4e,i.id);qPt(e,t,{font:i.font,scene:i.id,data:c,bgColor:a,calendar:i.calendar,autotypenumbersDflt:i.autotypenumbersDflt,fullLayout:i.fullLayout}),IPt.getComponentMethod("annotations3d","handleDefaults")(e,t,i);var h=i.getDfltFromLayout("dragmode");if(h!==!1&&!h)if(h="orbit",e.camera&&e.camera.up){var v=e.camera.up.x,d=e.camera.up.y,x=e.camera.up.z;x!==0&&(!v||!d||!x||x/Math.sqrt(v*v+d*d+x*x)>.999)&&(h="turntable")}else h="turntable";r("dragmode",h),r("hovermode",i.getDfltFromLayout("hovermode"))}});var u1=ie(Pv=>{"use strict";var BPt=Zs().overrideAll,NPt=Dg(),UPt=C4e(),VPt=pc().getSubplotData,HPt=Zt(),GPt=Cd(),L3="gl3d",AG="scene";Pv.name=L3;Pv.attr=AG;Pv.idRoot=AG;Pv.idRegex=Pv.attrRegex=HPt.counterRegex("scene");Pv.attributes=P4e();Pv.layoutAttributes=TG();Pv.baseLayoutAttrOverrides=BPt({hoverlabel:NPt.hoverlabel},"plot","nested");Pv.supplyLayoutDefaults=U4e();Pv.plot=function(t){for(var r=t._fullLayout,i=t._fullData,n=r._subplots[L3],a=0;a<n.length;a++){var o=n[a],s=VPt(i,L3,o),l=r[o],u=l.camera,f=l._scene;f||(f=new UPt({id:o,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio,camera:u},r),l._scene=f),f.viewInitial||(f.viewInitial={up:{x:u.up.x,y:u.up.y,z:u.up.z},eye:{x:u.eye.x,y:u.eye.y,z:u.eye.z},center:{x:u.center.x,y:u.center.y,z:u.center.z}}),f.plot(s,r,t.layout)}};Pv.clean=function(e,t,r,i){for(var n=i._subplots[L3]||[],a=0;a<n.length;a++){var o=n[a];!t[o]&&i[o]._scene&&(i[o]._scene.destroy(),i._infolayer&&i._infolayer.selectAll(".annotation-"+o).remove())}};Pv.toSVG=function(e){for(var t=e._fullLayout,r=t._subplots[L3],i=t._size,n=0;n<r.length;n++){var a=t[r[n]],o=a.domain,s=a._scene,l=s.toImage("png"),u=t._glimages.append("svg:image");u.attr({xmlns:GPt.svg,"xlink:href":l,x:i.l+i.w*o.x[0],y:i.t+i.h*(1-o.y[1]),width:i.w*(o.x[1]-o.x[0]),height:i.h*(o.y[1]-o.y[0]),preserveAspectRatio:"none"}),s.destroy()}};Pv.cleanId=function(t){if(t.match(/^scene[0-9]*$/)){var r=t.substr(5);return r==="1"&&(r=""),AG+r}};Pv.updateFx=function(e){for(var t=e._fullLayout,r=t._subplots[L3],i=0;i<r.length;i++){var n=t[r[i]]._scene;n.updateFx(t.dragmode,t.hovermode)}}});var H4e=ie((zvr,V4e)=>{"use strict";V4e.exports={plot:t4e(),attributes:dG(),markerSymbols:iD(),supplyDefaults:s4e(),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:gG(),moduleType:"trace",name:"scatter3d",basePlotModule:u1(),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}});var Y4e=ie((Ovr,G4e)=>{"use strict";G4e.exports=H4e()});var FE=ie((Bvr,Z4e)=>{"use strict";var W4e=_i(),cD=Ls(),MG=kl().axisHoverFormat,YPt=Ba().hovertemplateAttrs,X4e=rs(),P3=aa().extendFlat,WPt=Zs().overrideAll;function SG(e){return{valType:"boolean",dflt:!1}}function EG(e){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:SG("x"),y:SG("y"),z:SG("z")},color:{valType:"color",dflt:W4e.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:W4e.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var hD=Z4e.exports=WPt(P3({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:YPt(),xhoverformat:MG("x"),yhoverformat:MG("y"),zhoverformat:MG("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},cD("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:EG("x"),y:EG("y"),z:EG("z")},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:P3({},cD.zauto,{}),zmin:P3({},cD.zmin,{}),zmax:P3({},cD.zmax,{})},hoverinfo:P3({},X4e.hoverinfo),showlegend:P3({},X4e.showlegend,{dflt:!1})}),"calc","nested");hD.x.editType=hD.y.editType=hD.z.editType="calc+clearAxisTypes";hD.transforms=void 0});var LG=ie((Nvr,J4e)=>{"use strict";var XPt=Ti(),j4e=Zt(),ZPt=$f(),jPt=FE(),kG=.1;function KPt(e,t){for(var r=[],i=32,n=0;n<i;n++){var a=n/(i-1),o=t+(1-t)*(1-Math.pow(Math.sin(e*a*Math.PI),2));r.push([a,Math.max(0,Math.min(1,o))])}return r}function JPt(e){var t=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||+e[0][0]!=0||+e[e.length-1][0]!=1)return!1;for(var r=0;r<e.length;r++){var i=e[r];if(i.length!==2||+i[0]<t)return!1;t=+i[0]}return!0}function QPt(e,t,r,i){var n,a;function o(b,p){return j4e.coerce(e,t,jPt,b,p)}var s=o("x"),l=o("y"),u=o("z");if(!u||!u.length||s&&s.length<1||l&&l.length<1){t.visible=!1;return}t._xlength=Array.isArray(s)&&j4e.isArrayOrTypedArray(s[0])?u.length:u[0].length,t._ylength=u.length;var f=XPt.getComponentMethod("calendars","handleTraceDefaults");f(e,t,["x","y","z"],i),o("text"),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(b){o(b)});var c=o("surfacecolor"),h=["x","y","z"];for(n=0;n<3;++n){var v="contours."+h[n],d=o(v+".show"),x=o(v+".highlight");if(d||x)for(a=0;a<3;++a)o(v+".project."+h[a]);d&&(o(v+".color"),o(v+".width"),o(v+".usecolormap")),x&&(o(v+".highlightcolor"),o(v+".highlightwidth")),o(v+".start"),o(v+".end"),o(v+".size")}c||(CG(e,"zmin","cmin"),CG(e,"zmax","cmax"),CG(e,"zauto","cauto")),ZPt(e,t,i,o,{prefix:"",cLetter:"c"}),K4e(e,t,i,o),t._length=null}function K4e(e,t,r,i){var n=i("opacityscale");n==="max"?t.opacityscale=[[0,kG],[1,1]]:n==="min"?t.opacityscale=[[0,1],[1,kG]]:n==="extremes"?t.opacityscale=KPt(1,kG):JPt(n)||(t.opacityscale=void 0)}function CG(e,t,r){t in e&&!(r in e)&&(e[r]=e[t])}J4e.exports={supplyDefaults:QPt,opacityscaleDefaults:K4e}});var eLe=ie((Uvr,$4e)=>{"use strict";var Q4e=xv();$4e.exports=function(t,r){r.surfacecolor?Q4e(t,r,{vals:r.surfacecolor,containerStr:"",cLetter:"c"}):Q4e(t,r,{vals:r.z,containerStr:"",cLetter:"c"})}});var oLe=ie((Vvr,aLe)=>{"use strict";var $Pt=_u().gl_surface3d,R3=_u().ndarray,e6t=_u().ndarray_linear_interpolate.d2,t6t=pP(),r6t=gP(),qE=Zt().isArrayOrTypedArray,n6t=gy().parseColorScale,tLe=Op(),i6t=ul().extractOpts;function nLe(e,t,r){this.scene=e,this.uid=r,this.surface=t,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var k0=nLe.prototype;k0.getXat=function(e,t,r,i){var n=qE(this.data.x)?qE(this.data.x[0])?this.data.x[t][e]:this.data.x[e]:e;return r===void 0?n:i.d2l(n,0,r)};k0.getYat=function(e,t,r,i){var n=qE(this.data.y)?qE(this.data.y[0])?this.data.y[t][e]:this.data.y[t]:t;return r===void 0?n:i.d2l(n,0,r)};k0.getZat=function(e,t,r,i){var n=this.data.z[t][e];return n===null&&this.data.connectgaps&&this.data._interpolatedZ&&(n=this.data._interpolatedZ[t][e]),r===void 0?n:i.d2l(n,0,r)};k0.handlePick=function(e){if(e.object===this.surface){var t=(e.data.index[0]-1)/this.dataScaleX-1,r=(e.data.index[1]-1)/this.dataScaleY-1,i=Math.max(Math.min(Math.round(t),this.data.z[0].length-1),0),n=Math.max(Math.min(Math.round(r),this.data._ylength-1),0);e.index=[i,n],e.traceCoordinate=[this.getXat(i,n),this.getYat(i,n),this.getZat(i,n)],e.dataCoordinate=[this.getXat(i,n,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(i,n,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(i,n,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var a=0;a<3;a++){var o=e.dataCoordinate[a];o!=null&&(e.dataCoordinate[a]*=this.scene.dataScale[a])}var s=this.data.hovertext||this.data.text;return qE(s)&&s[n]&&s[n][i]!==void 0?e.textLabel=s[n][i]:s?e.textLabel=s:e.textLabel="",e.data.dataCoordinate=e.dataCoordinate.slice(),this.surface.highlight(e.data),this.scene.glplot.spikes.position=e.dataCoordinate,!0}};function a6t(e){var t=e[0].rgb,r=e[e.length-1].rgb;return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}var D3=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function o6t(e,t){if(e<t)return 0;for(var r=0;Math.floor(e%t)===0;)e/=t,r++;return r}function PG(e){for(var t=[],r=0;r<D3.length;r++){var i=D3[r];t.push(o6t(e,i))}return t}function s6t(e){for(var t=PG(e),r=e,i=0;i<D3.length;i++)if(t[i]>0){r=D3[i];break}return r}function l6t(e,t){if(!(e<1||t<1)){for(var r=PG(e),i=PG(t),n=1,a=0;a<D3.length;a++)n*=Math.pow(D3[a],Math.max(r[a],i[a]));return n}}function u6t(e){if(e.length!==0){for(var t=1,r=0;r<e.length;r++)t=l6t(t,e[r]);return t}}k0.calcXnums=function(e){var t,r=[];for(t=1;t<e;t++){var i=this.getXat(t-1,0),n=this.getXat(t,0);n!==i&&i!==void 0&&i!==null&&n!==void 0&&n!==null?r[t-1]=Math.abs(n-i):r[t-1]=0}var a=0;for(t=1;t<e;t++)a+=r[t-1];for(t=1;t<e;t++)r[t-1]===0?r[t-1]=1:r[t-1]=Math.round(a/r[t-1]);return r};k0.calcYnums=function(e){var t,r=[];for(t=1;t<e;t++){var i=this.getYat(0,t-1),n=this.getYat(0,t);n!==i&&i!==void 0&&i!==null&&n!==void 0&&n!==null?r[t-1]=Math.abs(n-i):r[t-1]=0}var a=0;for(t=1;t<e;t++)a+=r[t-1];for(t=1;t<e;t++)r[t-1]===0?r[t-1]=1:r[t-1]=Math.round(a/r[t-1]);return r};var iLe=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],rLe=iLe[9],vD=iLe[13];k0.estimateScale=function(e,t){for(var r=t===0?this.calcXnums(e):this.calcYnums(e),i=1+u6t(r);i<rLe;)i*=2;for(;i>vD;)i--,i/=s6t(i),i++,i<rLe&&(i=vD);var n=Math.round(i/e);return n>1?n:1};function f6t(e,t,r){var i=r[8]+r[2]*t[0]+r[5]*t[1];return e[0]=(r[6]+r[0]*t[0]+r[3]*t[1])/i,e[1]=(r[7]+r[1]*t[0]+r[4]*t[1])/i,e}function c6t(e,t,r){return h6t(e,t,f6t,r),e}function h6t(e,t,r,i){for(var n=[0,0],a=e.shape[0],o=e.shape[1],s=0;s<a;s++)for(var l=0;l<o;l++)r(n,[s,l],i),e.set(s,l,e6t(t,n[0],n[1]));return e}k0.refineCoords=function(e){for(var t=this.dataScaleX,r=this.dataScaleY,i=e[0].shape[0],n=e[0].shape[1],a=Math.floor(e[0].shape[0]*t+1)|0,o=Math.floor(e[0].shape[1]*r+1)|0,s=1+i+1,l=1+n+1,u=R3(new Float32Array(s*l),[s,l]),f=[1/t,0,0,0,1/r,0,0,0,1],c=0;c<e.length;++c){this.surface.padField(u,e[c]);var h=R3(new Float32Array(a*o),[a,o]);c6t(h,u,f),e[c]=h}};function v6t(e,t){for(var r=!1,i=0;i<e.length;i++)if(t===e[i]){r=!0;break}r===!1&&e.push(t)}k0.setContourLevels=function(){var e=[[],[],[]],t=[!1,!1,!1],r=!1,i,n,a;for(i=0;i<3;++i)if(this.showContour[i]&&(r=!0,this.contourSize[i]>0&&this.contourStart[i]!==null&&this.contourEnd[i]!==null&&this.contourEnd[i]>this.contourStart[i]))for(t[i]=!0,n=this.contourStart[i];n<this.contourEnd[i];n+=this.contourSize[i])a=n*this.scene.dataScale[i],v6t(e[i],a);if(r){var o=[[],[],[]];for(i=0;i<3;++i)this.showContour[i]&&(o[i]=t[i]?e[i]:this.scene.contourLevels[i]);this.surface.update({levels:o})}};k0.update=function(e){var t=this.scene,r=t.fullSceneLayout,i=this.surface,n=n6t(e),a=t.dataScale,o=e.z[0].length,s=e._ylength,l=t.contourLevels;this.data=e;var u,f,c,h,v=[];for(u=0;u<3;u++)for(v[u]=[],f=0;f<o;f++)v[u][f]=[];for(f=0;f<o;f++)for(c=0;c<s;c++)v[0][f][c]=this.getXat(f,c,e.xcalendar,r.xaxis),v[1][f][c]=this.getYat(f,c,e.ycalendar,r.yaxis),v[2][f][c]=this.getZat(f,c,e.zcalendar,r.zaxis);if(e.connectgaps)for(e._emptypoints=r6t(v[2]),t6t(v[2],e._emptypoints),e._interpolatedZ=[],f=0;f<o;f++)for(e._interpolatedZ[f]=[],c=0;c<s;c++)e._interpolatedZ[f][c]=v[2][f][c];for(u=0;u<3;u++)for(f=0;f<o;f++)for(c=0;c<s;c++)h=v[u][f][c],h==null?v[u][f][c]=NaN:h=v[u][f][c]*=a[u];for(u=0;u<3;u++)for(f=0;f<o;f++)for(c=0;c<s;c++)h=v[u][f][c],h!=null&&(this.minValues[u]>h&&(this.minValues[u]=h),this.maxValues[u]<h&&(this.maxValues[u]=h));for(u=0;u<3;u++)this.objectOffset[u]=.5*(this.minValues[u]+this.maxValues[u]);for(u=0;u<3;u++)for(f=0;f<o;f++)for(c=0;c<s;c++)h=v[u][f][c],h!=null&&(v[u][f][c]-=this.objectOffset[u]);var d=[R3(new Float32Array(o*s),[o,s]),R3(new Float32Array(o*s),[o,s]),R3(new Float32Array(o*s),[o,s])];for(u=0;u<3;u++)for(f=0;f<o;f++)for(c=0;c<s;c++)d[u].set(f,c,v[u][f][c]);v=[];var x={colormap:n,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!e.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:e.opacityscale,opacity:e.opacity},b=i6t(e);if(x.intensityBounds=[b.min,b.max],e.surfacecolor){var p=R3(new Float32Array(o*s),[o,s]);for(f=0;f<o;f++)for(c=0;c<s;c++)p.set(f,c,e.surfacecolor[c][f]);d.push(p)}else x.intensityBounds[0]*=a[2],x.intensityBounds[1]*=a[2];(vD<d[0].shape[0]||vD<d[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(d[0].shape[0],0),this.dataScaleY=this.estimateScale(d[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(d)),e.surfacecolor&&(x.intensity=d.pop());var w=[!0,!0,!0],A=["x","y","z"];for(u=0;u<3;++u){var T=e.contours[A[u]];w[u]=T.highlight,x.showContour[u]=T.show||T.highlight,x.showContour[u]&&(x.contourProject[u]=[T.project.x,T.project.y,T.project.z],T.show?(this.showContour[u]=!0,x.levels[u]=l[u],i.highlightColor[u]=x.contourColor[u]=tLe(T.color),T.usecolormap?i.highlightTint[u]=x.contourTint[u]=0:i.highlightTint[u]=x.contourTint[u]=1,x.contourWidth[u]=T.width,this.contourStart[u]=T.start,this.contourEnd[u]=T.end,this.contourSize[u]=T.size):(this.showContour[u]=!1,this.contourStart[u]=null,this.contourEnd[u]=null,this.contourSize[u]=0),T.highlight&&(x.dynamicColor[u]=tLe(T.highlightcolor),x.dynamicWidth[u]=T.highlightwidth))}a6t(n)&&(x.vertexColor=!0),x.objectOffset=this.objectOffset,x.coords=d,i.update(x),i.visible=e.visible,i.enableDynamic=w,i.enableHighlight=w,i.snapToData=!0,"lighting"in e&&(i.ambientLight=e.lighting.ambient,i.diffuseLight=e.lighting.diffuse,i.specularLight=e.lighting.specular,i.roughness=e.lighting.roughness,i.fresnel=e.lighting.fresnel),"lightposition"in e&&(i.lightPosition=[e.lightposition.x,e.lightposition.y,e.lightposition.z])};k0.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function d6t(e,t){var r=e.glplot.gl,i=$Pt({gl:r}),n=new nLe(e,i,t.uid);return i._trace=n,n.update(t),e.glplot.add(i),n}aLe.exports=d6t});var lLe=ie((Hvr,sLe)=>{"use strict";sLe.exports={attributes:FE(),supplyDefaults:LG().supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:eLe(),plot:oLe(),moduleType:"trace",name:"surface",basePlotModule:u1(),categories:["gl3d","2dMap","showLegend"],meta:{}}});var fLe=ie((Gvr,uLe)=>{"use strict";uLe.exports=lLe()});var I3=ie((Yvr,hLe)=>{"use strict";var p6t=Ls(),RG=kl().axisHoverFormat,g6t=Ba().hovertemplateAttrs,f1=FE(),cLe=rs(),c1=aa().extendFlat;hLe.exports=c1({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:g6t({editType:"calc"}),xhoverformat:RG("x"),yhoverformat:RG("y"),zhoverformat:RG("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},p6t("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:f1.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:c1({},f1.contours.x.show,{}),color:f1.contours.x.color,width:f1.contours.x.width,editType:"calc"},lightposition:{x:c1({},f1.lightposition.x,{dflt:1e5}),y:c1({},f1.lightposition.y,{dflt:1e5}),z:c1({},f1.lightposition.z,{dflt:0}),editType:"calc"},lighting:c1({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},f1.lighting),hoverinfo:c1({},cLe.hoverinfo,{editType:"calc"}),showlegend:c1({},cLe.showlegend,{dflt:!1})})});var pD=ie((Wvr,dLe)=>{"use strict";var y6t=Ls(),dD=kl().axisHoverFormat,m6t=Ba().hovertemplateAttrs,zE=I3(),vLe=rs(),DG=aa().extendFlat,x6t=Zs().overrideAll;function IG(e){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function FG(e){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var N_=dLe.exports=x6t(DG({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:IG("x"),y:IG("y"),z:IG("z")},caps:{x:FG("x"),y:FG("y"),z:FG("z")},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:m6t(),xhoverformat:dD("x"),yhoverformat:dD("y"),zhoverformat:dD("z"),valuehoverformat:dD("value",1),showlegend:DG({},vLe.showlegend,{dflt:!1})},y6t("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:zE.opacity,lightposition:zE.lightposition,lighting:zE.lighting,flatshading:zE.flatshading,contour:zE.contour,hoverinfo:DG({},vLe.hoverinfo)}),"calc","nested");N_.flatshading.dflt=!0;N_.lighting.facenormalsepsilon.dflt=0;N_.x.editType=N_.y.editType=N_.z.editType=N_.value.editType="calc+clearAxisTypes";N_.transforms=void 0});var qG=ie((Xvr,gLe)=>{"use strict";var _6t=Zt(),b6t=Ti(),w6t=pD(),T6t=$f();function A6t(e,t,r,i){function n(a,o){return _6t.coerce(e,t,w6t,a,o)}pLe(e,t,r,i,n)}function pLe(e,t,r,i,n){var a=n("isomin"),o=n("isomax");o!=null&&a!==void 0&&a!==null&&a>o&&(t.isomin=null,t.isomax=null);var s=n("x"),l=n("y"),u=n("z"),f=n("value");if(!s||!s.length||!l||!l.length||!u||!u.length||!f||!f.length){t.visible=!1;return}var c=b6t.getComponentMethod("calendars","handleTraceDefaults");c(e,t,["x","y","z"],i),n("valuehoverformat"),["x","y","z"].forEach(function(x){n(x+"hoverformat");var b="caps."+x,p=n(b+".show");p&&n(b+".fill");var w="slices."+x,A=n(w+".show");A&&(n(w+".fill"),n(w+".locations"))});var h=n("spaceframe.show");h&&n("spaceframe.fill");var v=n("surface.show");v&&(n("surface.count"),n("surface.fill"),n("surface.pattern"));var d=n("contour.show");d&&(n("contour.color"),n("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(x){n(x)}),T6t(e,t,i,n,{prefix:"",cLetter:"c"}),t._length=null}gLe.exports={supplyDefaults:A6t,supplyIsoDefaults:pLe}});var gD=ie((Zvr,mLe)=>{"use strict";var OG=Zt(),M6t=xv();function S6t(e,t){t._len=Math.min(t.u.length,t.v.length,t.w.length,t.x.length,t.y.length,t.z.length),t._u=hg(t.u,t._len),t._v=hg(t.v,t._len),t._w=hg(t.w,t._len),t._x=hg(t.x,t._len),t._y=hg(t.y,t._len),t._z=hg(t.z,t._len);var r=yLe(t);t._gridFill=r.fill,t._Xs=r.Xs,t._Ys=r.Ys,t._Zs=r.Zs,t._len=r.len;var i=0,n,a,o;t.starts&&(n=hg(t.starts.x||[]),a=hg(t.starts.y||[]),o=hg(t.starts.z||[]),i=Math.min(n.length,a.length,o.length)),t._startsX=n||[],t._startsY=a||[],t._startsZ=o||[];var s=0,l=1/0,u;for(u=0;u<t._len;u++){var f=t._u[u],c=t._v[u],h=t._w[u],v=Math.sqrt(f*f+c*c+h*h);s=Math.max(s,v),l=Math.min(l,v)}for(M6t(e,t,{vals:[l,s],containerStr:"",cLetter:"c"}),u=0;u<i;u++){var d=n[u];r.xMax=Math.max(r.xMax,d),r.xMin=Math.min(r.xMin,d);var x=a[u];r.yMax=Math.max(r.yMax,x),r.yMin=Math.min(r.yMin,x);var b=o[u];r.zMax=Math.max(r.zMax,b),r.zMin=Math.min(r.zMin,b)}t._slen=i,t._normMax=s,t._xbnds=[r.xMin,r.xMax],t._ybnds=[r.yMin,r.yMax],t._zbnds=[r.zMin,r.zMax]}function yLe(e){var t=e._x,r=e._y,i=e._z,n=e._len,a,o,s,l=-1/0,u=1/0,f=-1/0,c=1/0,h=-1/0,v=1/0,d="",x,b,p,w,A,T,k,_,E;for(n&&(w=t[0],T=r[0],_=i[0]),n>1&&(A=t[n-1],k=r[n-1],E=i[n-1]),a=0;a<n;a++)l=Math.max(l,t[a]),u=Math.min(u,t[a]),f=Math.max(f,r[a]),c=Math.min(c,r[a]),h=Math.max(h,i[a]),v=Math.min(v,i[a]),!x&&t[a]!==w&&(x=!0,d+="x"),!b&&r[a]!==T&&(b=!0,d+="y"),!p&&i[a]!==_&&(p=!0,d+="z");x||(d+="x"),b||(d+="y"),p||(d+="z");var S=zG(e._x),g=zG(e._y),C=zG(e._z);d=d.replace("x",(w>A?"-":"+")+"x"),d=d.replace("y",(T>k?"-":"+")+"y"),d=d.replace("z",(_>E?"-":"+")+"z");var M=function(){n=0,S=[],g=[],C=[]};(!n||n<S.length*g.length*C.length)&&M();var P=function(me){return me==="x"?t:me==="y"?r:i},D=function(me){return me==="x"?S:me==="y"?g:C},q=function(me){return me[n-1]<me[0]?-1:1},O=P(d[1]),U=P(d[3]),B=P(d[5]),F=D(d[1]).length,N=D(d[3]).length,X=D(d[5]).length,K=!1,ne=function(me,he,te){return F*(N*me+he)+te},fe=q(P(d[1])),ue=q(P(d[3])),ee=q(P(d[5]));for(a=0;a<X-1;a++){for(o=0;o<N-1;o++){for(s=0;s<F-1;s++){var Z=ne(a,o,s),oe=ne(a,o,s+1),ce=ne(a,o+1,s),le=ne(a+1,o,s);if((!(O[Z]*fe<O[oe]*fe)||!(U[Z]*ue<U[ce]*ue)||!(B[Z]*ee<B[le]*ee))&&(K=!0),K)break}if(K)break}if(K)break}return K&&(OG.warn("Encountered arbitrary coordinates! Unable to input data grid."),M()),{xMin:u,yMin:c,zMin:v,xMax:l,yMax:f,zMax:h,Xs:S,Ys:g,Zs:C,len:n,fill:d}}function zG(e){return OG.distinctVals(e).vals}function hg(e,t){if(t===void 0&&(t=e.length),OG.isTypedArray(e))return e.subarray(0,t);for(var r=[],i=0;i<t;i++)r[i]=+e[i];return r}mLe.exports={calc:S6t,filter:hg,processGrid:yLe}});var BG=ie((jvr,xLe)=>{"use strict";var E6t=xv(),k6t=gD().processGrid,yD=gD().filter;xLe.exports=function(t,r){r._len=Math.min(r.x.length,r.y.length,r.z.length,r.value.length),r._x=yD(r.x,r._len),r._y=yD(r.y,r._len),r._z=yD(r.z,r._len),r._value=yD(r.value,r._len);var i=k6t(r);r._gridFill=i.fill,r._Xs=i.Xs,r._Ys=i.Ys,r._Zs=i.Zs,r._len=i.len;for(var n=1/0,a=-1/0,o=0;o<r._len;o++){var s=r._value[o];n=Math.min(n,s),a=Math.max(a,s)}r._minValues=n,r._maxValues=a,r._vMin=r.isomin===void 0||r.isomin===null?n:r.isomin,r._vMax=r.isomax===void 0||r.isomax===null?a:r.isomax,E6t(t,r,{vals:[r._vMin,r._vMax],containerStr:"",cLetter:"c"})}});var F3=ie((Kvr,_Le)=>{"use strict";_Le.exports=function(t,r,i,n){n=n||t.length;for(var a=new Array(n),o=0;o<n;o++)a[o]=[t[o],r[o],i[o]];return a}});var mD=ie((Jvr,ALe)=>{"use strict";var C6t=_u().gl_mesh3d,L6t=gy().parseColorScale,P6t=Zt().isArrayOrTypedArray,R6t=Op(),D6t=ul().extractOpts,bLe=F3(),OE=function(e,t){for(var r=t.length-1;r>0;r--){var i=Math.min(t[r],t[r-1]),n=Math.max(t[r],t[r-1]);if(n>i&&i<e&&e<=n)return{id:r,distRatio:(n-e)/(n-i)}}return{id:0,distRatio:0}};function wLe(e,t,r){this.scene=e,this.uid=r,this.mesh=t,this.name="",this.data=null,this.showContour=!1}var NG=wLe.prototype;NG.handlePick=function(e){if(e.object===this.mesh){var t=e.data.index,r=this.data._meshX[t],i=this.data._meshY[t],n=this.data._meshZ[t],a=this.data._Ys.length,o=this.data._Zs.length,s=OE(r,this.data._Xs).id,l=OE(i,this.data._Ys).id,u=OE(n,this.data._Zs).id,f=e.index=u+o*l+o*a*s;e.traceCoordinate=[this.data._meshX[f],this.data._meshY[f],this.data._meshZ[f],this.data._value[f]];var c=this.data.hovertext||this.data.text;return P6t(c)&&c[f]!==void 0?e.textLabel=c[f]:c&&(e.textLabel=c),!0}};NG.update=function(e){var t=this.scene,r=t.fullSceneLayout;this.data=TLe(e);function i(l,u,f,c){return u.map(function(h){return l.d2l(h,0,c)*f})}var n=bLe(i(r.xaxis,e._meshX,t.dataScale[0],e.xcalendar),i(r.yaxis,e._meshY,t.dataScale[1],e.ycalendar),i(r.zaxis,e._meshZ,t.dataScale[2],e.zcalendar)),a=bLe(e._meshI,e._meshJ,e._meshK),o={positions:n,cells:a,lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,contourEnable:e.contour.show,contourColor:R6t(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading},s=D6t(e);o.vertexIntensity=e._meshIntensity,o.vertexIntensityBounds=[s.min,s.max],o.colormap=L6t(e),this.mesh.update(o)};NG.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var I6t=["xyz","xzy","yxz","yzx","zxy","zyx"];function TLe(e){e._meshI=[],e._meshJ=[],e._meshK=[];var t=e.surface.show,r=e.spaceframe.show,i=e.surface.fill,n=e.spaceframe.fill,a=!1,o=!1,s=0,l,u,f=e._Xs,c=e._Ys,h=e._Zs,v=f.length,d=c.length,x=h.length,b=I6t.indexOf(e._gridFill.replace(/-/g,"").replace(/\+/g,"")),p=function(We,et,vt){switch(b){case 5:return vt+x*et+x*d*We;case 4:return vt+x*We+x*v*et;case 3:return et+d*vt+d*x*We;case 2:return et+d*We+d*v*vt;case 1:return We+v*vt+v*x*et;default:return We+v*et+v*d*vt}},w=e._minValues,A=e._maxValues,T=e._vMin,k=e._vMax,_,E,S,g;function C(We,et,vt){for(var at=g.length,Xe=u;Xe<at;Xe++)if(We===_[Xe]&&et===E[Xe]&&vt===S[Xe])return Xe;return-1}function M(){u=l}function P(){_=[],E=[],S=[],g=[],l=0,M()}function D(We,et,vt,at){return _.push(We),E.push(et),S.push(vt),g.push(at),l++,l-1}function q(We,et,vt){return e._meshI.push(We),e._meshJ.push(et),e._meshK.push(vt),s++,s-1}function O(We,et,vt){for(var at=[],Xe=0;Xe<We.length;Xe++)at[Xe]=(We[Xe]+et[Xe]+vt[Xe])/3;return at}function U(We,et,vt){for(var at=[],Xe=0;Xe<We.length;Xe++)at[Xe]=We[Xe]*(1-vt)+vt*et[Xe];return at}var B;function F(We){B=We}function N(We,et){var vt=We[0],at=We[1],Xe=We[2],dt=O(vt,at,Xe),_t=Math.sqrt(1-B),$t=U(dt,vt,_t),Ut=U(dt,at,_t),fr=U(dt,Xe,_t),ar=et[0],cr=et[1],It=et[2];return{xyzv:[[vt,at,Ut],[Ut,$t,vt],[at,Xe,fr],[fr,Ut,at],[Xe,vt,$t],[$t,fr,Xe]],abc:[[ar,cr,-1],[-1,-1,ar],[cr,It,-1],[-1,-1,cr],[It,ar,-1],[-1,-1,It]]}}function X(We,et){return We==="all"||We===null?!0:We.indexOf(et)>-1}function K(We,et){return We===null?et:We}function ne(We,et,vt){M();var at=[et],Xe=[vt];if(B>=1)at=[et],Xe=[vt];else if(B>0){var dt=N(et,vt);at=dt.xyzv,Xe=dt.abc}for(var _t=0;_t<at.length;_t++){et=at[_t],vt=Xe[_t];for(var $t=[],Ut=0;Ut<3;Ut++){var fr=et[Ut][0],ar=et[Ut][1],cr=et[Ut][2],It=et[Ut][3],gt=vt[Ut]>-1?vt[Ut]:C(fr,ar,cr);gt>-1?$t[Ut]=gt:$t[Ut]=D(fr,ar,cr,K(We,It))}q($t[0],$t[1],$t[2])}}function fe(We,et,vt){var at=function(Xe,dt,_t){ne(We,[et[Xe],et[dt],et[_t]],[vt[Xe],vt[dt],vt[_t]])};at(0,1,2),at(2,3,0)}function ue(We,et,vt){var at=function(Xe,dt,_t){ne(We,[et[Xe],et[dt],et[_t]],[vt[Xe],vt[dt],vt[_t]])};at(0,1,2),at(3,0,1),at(2,3,0),at(1,2,3)}function ee(We,et,vt,at){var Xe=We[3];Xe<vt&&(Xe=vt),Xe>at&&(Xe=at);for(var dt=(We[3]-Xe)/(We[3]-et[3]+1e-9),_t=[],$t=0;$t<4;$t++)_t[$t]=(1-dt)*We[$t]+dt*et[$t];return _t}function Z(We,et,vt){return We>=et&&We<=vt}function oe(We){var et=.001*(k-T);return We>=T-et&&We<=k+et}function ce(We){for(var et=[],vt=0;vt<4;vt++){var at=We[vt];et.push([e._x[at],e._y[at],e._z[at],e._value[at]])}return et}var le=3;function me(We,et,vt,at,Xe,dt){dt||(dt=1),vt=[-1,-1,-1];var _t=!1,$t=[Z(et[0][3],at,Xe),Z(et[1][3],at,Xe),Z(et[2][3],at,Xe)];if(!$t[0]&&!$t[1]&&!$t[2])return!1;var Ut=function(ar,cr,It){return oe(cr[0][3])&&oe(cr[1][3])&&oe(cr[2][3])?(ne(ar,cr,It),!0):dt<le?me(ar,cr,It,T,k,++dt):!1};if($t[0]&&$t[1]&&$t[2])return Ut(We,et,vt)||_t;var fr=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(ar){if($t[ar[0]]&&$t[ar[1]]&&!$t[ar[2]]){var cr=et[ar[0]],It=et[ar[1]],gt=et[ar[2]],kt=ee(gt,cr,at,Xe),Je=ee(gt,It,at,Xe);_t=Ut(We,[Je,kt,cr],[-1,-1,vt[ar[0]]])||_t,_t=Ut(We,[cr,It,Je],[vt[ar[0]],vt[ar[1]],-1])||_t,fr=!0}}),fr||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(ar){if($t[ar[0]]&&!$t[ar[1]]&&!$t[ar[2]]){var cr=et[ar[0]],It=et[ar[1]],gt=et[ar[2]],kt=ee(It,cr,at,Xe),Je=ee(gt,cr,at,Xe);_t=Ut(We,[Je,kt,cr],[-1,-1,vt[ar[0]]])||_t,fr=!0}}),_t}function he(We,et,vt,at){var Xe=!1,dt=ce(et),_t=[Z(dt[0][3],vt,at),Z(dt[1][3],vt,at),Z(dt[2][3],vt,at),Z(dt[3][3],vt,at)];if(!_t[0]&&!_t[1]&&!_t[2]&&!_t[3])return Xe;if(_t[0]&&_t[1]&&_t[2]&&_t[3])return o&&(Xe=ue(We,dt,et)||Xe),Xe;var $t=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Ut){if(_t[Ut[0]]&&_t[Ut[1]]&&_t[Ut[2]]&&!_t[Ut[3]]){var fr=dt[Ut[0]],ar=dt[Ut[1]],cr=dt[Ut[2]],It=dt[Ut[3]];if(o)Xe=ne(We,[fr,ar,cr],[et[Ut[0]],et[Ut[1]],et[Ut[2]]])||Xe;else{var gt=ee(It,fr,vt,at),kt=ee(It,ar,vt,at),Je=ee(It,cr,vt,at);Xe=ne(null,[gt,kt,Je],[-1,-1,-1])||Xe}$t=!0}}),$t||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Ut){if(_t[Ut[0]]&&_t[Ut[1]]&&!_t[Ut[2]]&&!_t[Ut[3]]){var fr=dt[Ut[0]],ar=dt[Ut[1]],cr=dt[Ut[2]],It=dt[Ut[3]],gt=ee(cr,fr,vt,at),kt=ee(cr,ar,vt,at),Je=ee(It,ar,vt,at),Ze=ee(It,fr,vt,at);o?(Xe=ne(We,[fr,Ze,gt],[et[Ut[0]],-1,-1])||Xe,Xe=ne(We,[ar,kt,Je],[et[Ut[1]],-1,-1])||Xe):Xe=fe(null,[gt,kt,Je,Ze],[-1,-1,-1,-1])||Xe,$t=!0}}),$t)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Ut){if(_t[Ut[0]]&&!_t[Ut[1]]&&!_t[Ut[2]]&&!_t[Ut[3]]){var fr=dt[Ut[0]],ar=dt[Ut[1]],cr=dt[Ut[2]],It=dt[Ut[3]],gt=ee(ar,fr,vt,at),kt=ee(cr,fr,vt,at),Je=ee(It,fr,vt,at);o?(Xe=ne(We,[fr,gt,kt],[et[Ut[0]],-1,-1])||Xe,Xe=ne(We,[fr,kt,Je],[et[Ut[0]],-1,-1])||Xe,Xe=ne(We,[fr,Je,gt],[et[Ut[0]],-1,-1])||Xe):Xe=ne(null,[gt,kt,Je],[-1,-1,-1])||Xe,$t=!0}}),Xe}function te(We,et,vt,at,Xe,dt,_t,$t,Ut,fr,ar){var cr=!1;return a&&(X(We,"A")&&(cr=he(null,[et,vt,at,dt],fr,ar)||cr),X(We,"B")&&(cr=he(null,[vt,at,Xe,Ut],fr,ar)||cr),X(We,"C")&&(cr=he(null,[vt,dt,_t,Ut],fr,ar)||cr),X(We,"D")&&(cr=he(null,[at,dt,$t,Ut],fr,ar)||cr),X(We,"E")&&(cr=he(null,[vt,at,dt,Ut],fr,ar)||cr)),o&&(cr=he(We,[vt,at,dt,Ut],fr,ar)||cr),cr}function ge(We,et,vt,at,Xe,dt,_t,$t){return[$t[0]===!0?!0:me(We,ce([et,vt,at]),[et,vt,at],dt,_t),$t[1]===!0?!0:me(We,ce([at,Xe,et]),[at,Xe,et],dt,_t)]}function ae(We,et,vt,at,Xe,dt,_t,$t,Ut){return $t?ge(We,et,vt,Xe,at,dt,_t,Ut):ge(We,vt,Xe,at,et,dt,_t,Ut)}function _e(We,et,vt,at,Xe,dt,_t){var $t=!1,Ut,fr,ar,cr,It=function(){$t=me(We,[Ut,fr,ar],[-1,-1,-1],Xe,dt)||$t,$t=me(We,[ar,cr,Ut],[-1,-1,-1],Xe,dt)||$t},gt=_t[0],kt=_t[1],Je=_t[2];return gt&&(Ut=U(ce([p(et,vt-0,at-0)])[0],ce([p(et-1,vt-0,at-0)])[0],gt),fr=U(ce([p(et,vt-0,at-1)])[0],ce([p(et-1,vt-0,at-1)])[0],gt),ar=U(ce([p(et,vt-1,at-1)])[0],ce([p(et-1,vt-1,at-1)])[0],gt),cr=U(ce([p(et,vt-1,at-0)])[0],ce([p(et-1,vt-1,at-0)])[0],gt),It()),kt&&(Ut=U(ce([p(et-0,vt,at-0)])[0],ce([p(et-0,vt-1,at-0)])[0],kt),fr=U(ce([p(et-0,vt,at-1)])[0],ce([p(et-0,vt-1,at-1)])[0],kt),ar=U(ce([p(et-1,vt,at-1)])[0],ce([p(et-1,vt-1,at-1)])[0],kt),cr=U(ce([p(et-1,vt,at-0)])[0],ce([p(et-1,vt-1,at-0)])[0],kt),It()),Je&&(Ut=U(ce([p(et-0,vt-0,at)])[0],ce([p(et-0,vt-0,at-1)])[0],Je),fr=U(ce([p(et-0,vt-1,at)])[0],ce([p(et-0,vt-1,at-1)])[0],Je),ar=U(ce([p(et-1,vt-1,at)])[0],ce([p(et-1,vt-1,at-1)])[0],Je),cr=U(ce([p(et-1,vt-0,at)])[0],ce([p(et-1,vt-0,at-1)])[0],Je),It()),$t}function Ce(We,et,vt,at,Xe,dt,_t,$t,Ut,fr,ar,cr){var It=We;return cr?(a&&We==="even"&&(It=null),te(It,et,vt,at,Xe,dt,_t,$t,Ut,fr,ar)):(a&&We==="odd"&&(It=null),te(It,Ut,$t,_t,dt,Xe,at,vt,et,fr,ar))}function qe(We,et,vt,at,Xe){for(var dt=[],_t=0,$t=0;$t<et.length;$t++)for(var Ut=et[$t],fr=1;fr<x;fr++)for(var ar=1;ar<d;ar++)dt.push(ae(We,p(Ut,ar-1,fr-1),p(Ut,ar-1,fr),p(Ut,ar,fr-1),p(Ut,ar,fr),vt,at,(Ut+ar+fr)%2,Xe&&Xe[_t]?Xe[_t]:[])),_t++;return dt}function rt(We,et,vt,at,Xe){for(var dt=[],_t=0,$t=0;$t<et.length;$t++)for(var Ut=et[$t],fr=1;fr<v;fr++)for(var ar=1;ar<x;ar++)dt.push(ae(We,p(fr-1,Ut,ar-1),p(fr,Ut,ar-1),p(fr-1,Ut,ar),p(fr,Ut,ar),vt,at,(fr+Ut+ar)%2,Xe&&Xe[_t]?Xe[_t]:[])),_t++;return dt}function Re(We,et,vt,at,Xe){for(var dt=[],_t=0,$t=0;$t<et.length;$t++)for(var Ut=et[$t],fr=1;fr<d;fr++)for(var ar=1;ar<v;ar++)dt.push(ae(We,p(ar-1,fr-1,Ut),p(ar-1,fr,Ut),p(ar,fr-1,Ut),p(ar,fr,Ut),vt,at,(ar+fr+Ut)%2,Xe&&Xe[_t]?Xe[_t]:[])),_t++;return dt}function Ie(We,et,vt){for(var at=1;at<x;at++)for(var Xe=1;Xe<d;Xe++)for(var dt=1;dt<v;dt++)Ce(We,p(dt-1,Xe-1,at-1),p(dt-1,Xe-1,at),p(dt-1,Xe,at-1),p(dt-1,Xe,at),p(dt,Xe-1,at-1),p(dt,Xe-1,at),p(dt,Xe,at-1),p(dt,Xe,at),et,vt,(dt+Xe+at)%2)}function ot(We,et,vt){o=!0,Ie(We,et,vt),o=!1}function lt(We,et,vt){a=!0,Ie(We,et,vt),a=!1}function ht(We,et,vt,at,Xe,dt){for(var _t=[],$t=0,Ut=0;Ut<et.length;Ut++)for(var fr=et[Ut],ar=1;ar<x;ar++)for(var cr=1;cr<d;cr++)_t.push(_e(We,fr,cr,ar,vt,at,Xe[Ut],dt&&dt[$t]?dt[$t]:[])),$t++;return _t}function xt(We,et,vt,at,Xe,dt){for(var _t=[],$t=0,Ut=0;Ut<et.length;Ut++)for(var fr=et[Ut],ar=1;ar<v;ar++)for(var cr=1;cr<x;cr++)_t.push(_e(We,ar,fr,cr,vt,at,Xe[Ut],dt&&dt[$t]?dt[$t]:[])),$t++;return _t}function Vt(We,et,vt,at,Xe,dt){for(var _t=[],$t=0,Ut=0;Ut<et.length;Ut++)for(var fr=et[Ut],ar=1;ar<d;ar++)for(var cr=1;cr<v;cr++)_t.push(_e(We,cr,ar,fr,vt,at,Xe[Ut],dt&&dt[$t]?dt[$t]:[])),$t++;return _t}function Ht(We,et){for(var vt=[],at=We;at<et;at++)vt.push(at);return vt}function Me(){for(var We=0;We<v;We++)for(var et=0;et<d;et++)for(var vt=0;vt<x;vt++){var at=p(We,et,vt);D(e._x[at],e._y[at],e._z[at],e._value[at])}}function Ke(){P(),Me();var We=null;if(r&&n&&(F(n),ot(We,T,k)),t&&i){F(i);for(var et=e.surface.pattern,vt=e.surface.count,at=0;at<vt;at++){var Xe=vt===1?.5:at/(vt-1),dt=(1-Xe)*T+Xe*k,_t=Math.abs(dt-w),$t=Math.abs(dt-A),Ut=_t>$t?[w,dt]:[dt,A];lt(et,Ut[0],Ut[1])}}var fr=[[Math.min(T,A),Math.max(T,A)],[Math.min(w,k),Math.max(w,k)]];["x","y","z"].forEach(function(ar){for(var cr=[],It=0;It<fr.length;It++){var gt=0,kt=fr[It][0],Je=fr[It][1],Ze=e.slices[ar];if(Ze.show&&Ze.fill){F(Ze.fill);var At=[],Se=[],pe=[];if(Ze.locations.length)for(var Te=0;Te<Ze.locations.length;Te++){var it=OE(Ze.locations[Te],ar==="x"?f:ar==="y"?c:h);it.distRatio===0?At.push(it.id):it.id>0&&(Se.push(it.id),ar==="x"?pe.push([it.distRatio,0,0]):ar==="y"?pe.push([0,it.distRatio,0]):pe.push([0,0,it.distRatio]))}else ar==="x"?At=Ht(1,v-1):ar==="y"?At=Ht(1,d-1):At=Ht(1,x-1);Se.length>0&&(ar==="x"?cr[gt]=ht(We,Se,kt,Je,pe,cr[gt]):ar==="y"?cr[gt]=xt(We,Se,kt,Je,pe,cr[gt]):cr[gt]=Vt(We,Se,kt,Je,pe,cr[gt]),gt++),At.length>0&&(ar==="x"?cr[gt]=qe(We,At,kt,Je,cr[gt]):ar==="y"?cr[gt]=rt(We,At,kt,Je,cr[gt]):cr[gt]=Re(We,At,kt,Je,cr[gt]),gt++)}var Dt=e.caps[ar];Dt.show&&Dt.fill&&(F(Dt.fill),ar==="x"?cr[gt]=qe(We,[0,v-1],kt,Je,cr[gt]):ar==="y"?cr[gt]=rt(We,[0,d-1],kt,Je,cr[gt]):cr[gt]=Re(We,[0,x-1],kt,Je,cr[gt]),gt++)}}),s===0&&P(),e._meshX=_,e._meshY=E,e._meshZ=S,e._meshIntensity=g,e._Xs=f,e._Ys=c,e._Zs=h}return Ke(),e}function F6t(e,t){var r=e.glplot.gl,i=C6t({gl:r}),n=new wLe(e,i,t.uid);return i._trace=n,n.update(t),e.glplot.add(i),n}ALe.exports={findNearestOnAxis:OE,generateIsoMeshes:TLe,createIsosurfaceTrace:F6t}});var SLe=ie((Qvr,MLe)=>{"use strict";MLe.exports={attributes:pD(),supplyDefaults:qG().supplyDefaults,calc:BG(),colorbar:{min:"cmin",max:"cmax"},plot:mD().createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:u1(),categories:["gl3d","showLegend"],meta:{}}});var kLe=ie(($vr,ELe)=>{"use strict";ELe.exports=SLe()});var VG=ie((edr,LLe)=>{"use strict";var q6t=Ls(),sf=pD(),z6t=FE(),CLe=rs(),UG=aa().extendFlat,O6t=Zs().overrideAll,BE=LLe.exports=O6t(UG({x:sf.x,y:sf.y,z:sf.z,value:sf.value,isomin:sf.isomin,isomax:sf.isomax,surface:sf.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:sf.slices,caps:sf.caps,text:sf.text,hovertext:sf.hovertext,xhoverformat:sf.xhoverformat,yhoverformat:sf.yhoverformat,zhoverformat:sf.zhoverformat,valuehoverformat:sf.valuehoverformat,hovertemplate:sf.hovertemplate},q6t("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:sf.colorbar,opacity:sf.opacity,opacityscale:z6t.opacityscale,lightposition:sf.lightposition,lighting:sf.lighting,flatshading:sf.flatshading,contour:sf.contour,hoverinfo:UG({},CLe.hoverinfo),showlegend:UG({},CLe.showlegend,{dflt:!1})}),"calc","nested");BE.x.editType=BE.y.editType=BE.z.editType=BE.value.editType="calc+clearAxisTypes";BE.transforms=void 0});var RLe=ie((tdr,PLe)=>{"use strict";var B6t=Zt(),N6t=VG(),U6t=qG().supplyIsoDefaults,V6t=LG().opacityscaleDefaults;PLe.exports=function(t,r,i,n){function a(o,s){return B6t.coerce(t,r,N6t,o,s)}U6t(t,r,i,n,a),V6t(t,r,n,a)}});var qLe=ie((rdr,FLe)=>{"use strict";var H6t=_u().gl_mesh3d,G6t=gy().parseColorScale,Y6t=Zt().isArrayOrTypedArray,W6t=Op(),X6t=ul().extractOpts,DLe=F3(),HG=mD().findNearestOnAxis,Z6t=mD().generateIsoMeshes;function ILe(e,t,r){this.scene=e,this.uid=r,this.mesh=t,this.name="",this.data=null,this.showContour=!1}var GG=ILe.prototype;GG.handlePick=function(e){if(e.object===this.mesh){var t=e.data.index,r=this.data._meshX[t],i=this.data._meshY[t],n=this.data._meshZ[t],a=this.data._Ys.length,o=this.data._Zs.length,s=HG(r,this.data._Xs).id,l=HG(i,this.data._Ys).id,u=HG(n,this.data._Zs).id,f=e.index=u+o*l+o*a*s;e.traceCoordinate=[this.data._meshX[f],this.data._meshY[f],this.data._meshZ[f],this.data._value[f]];var c=this.data.hovertext||this.data.text;return Y6t(c)&&c[f]!==void 0?e.textLabel=c[f]:c&&(e.textLabel=c),!0}};GG.update=function(e){var t=this.scene,r=t.fullSceneLayout;this.data=Z6t(e);function i(l,u,f,c){return u.map(function(h){return l.d2l(h,0,c)*f})}var n=DLe(i(r.xaxis,e._meshX,t.dataScale[0],e.xcalendar),i(r.yaxis,e._meshY,t.dataScale[1],e.ycalendar),i(r.zaxis,e._meshZ,t.dataScale[2],e.zcalendar)),a=DLe(e._meshI,e._meshJ,e._meshK),o={positions:n,cells:a,lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,opacityscale:e.opacityscale,contourEnable:e.contour.show,contourColor:W6t(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading},s=X6t(e);o.vertexIntensity=e._meshIntensity,o.vertexIntensityBounds=[s.min,s.max],o.colormap=G6t(e),this.mesh.update(o)};GG.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function j6t(e,t){var r=e.glplot.gl,i=H6t({gl:r}),n=new ILe(e,i,t.uid);return i._trace=n,n.update(t),e.glplot.add(i),n}FLe.exports=j6t});var OLe=ie((ndr,zLe)=>{"use strict";zLe.exports={attributes:VG(),supplyDefaults:RLe(),calc:BG(),colorbar:{min:"cmin",max:"cmax"},plot:qLe(),moduleType:"trace",name:"volume",basePlotModule:u1(),categories:["gl3d","showLegend"],meta:{}}});var NLe=ie((idr,BLe)=>{"use strict";BLe.exports=OLe()});var HLe=ie((adr,VLe)=>{"use strict";var K6t=Ti(),ULe=Zt(),J6t=$f(),Q6t=I3();VLe.exports=function(t,r,i,n){function a(f,c){return ULe.coerce(t,r,Q6t,f,c)}function o(f){var c=f.map(function(h){var v=a(h);return v&&ULe.isArrayOrTypedArray(v)?v:null});return c.every(function(h){return h&&h.length===c[0].length})&&c}var s=o(["x","y","z"]);if(!s){r.visible=!1;return}if(o(["i","j","k"]),r.i&&(!r.j||!r.k)||r.j&&(!r.k||!r.i)||r.k&&(!r.i||!r.j)){r.visible=!1;return}var l=K6t.getComponentMethod("calendars","handleTraceDefaults");l(t,r,["x","y","z"],n),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(f){a(f)});var u=a("contour.show");u&&(a("contour.color"),a("contour.width")),"intensity"in t?(a("intensity"),a("intensitymode"),J6t(t,r,n,a,{prefix:"",cLetter:"c"})):(r.showscale=!1,"facecolor"in t?a("facecolor"):"vertexcolor"in t?a("vertexcolor"):a("color",i)),a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),r._length=null}});var YLe=ie((odr,GLe)=>{"use strict";var $6t=xv();GLe.exports=function(t,r){r.intensity&&$6t(t,r,{vals:r.intensity,containerStr:"",cLetter:"c"})}});var KLe=ie((sdr,jLe)=>{"use strict";var eRt=_u().gl_mesh3d,tRt=_u().delaunay_triangulate,rRt=_u().alpha_shape,nRt=_u().convex_hull,iRt=gy().parseColorScale,aRt=Zt().isArrayOrTypedArray,ZG=Op(),oRt=ul().extractOpts,WLe=F3();function ZLe(e,t,r){this.scene=e,this.uid=r,this.mesh=t,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var jG=ZLe.prototype;jG.handlePick=function(e){if(e.object===this.mesh){var t=e.index=e.data.index;e.data._cellCenter?e.traceCoordinate=e.data.dataCoordinate:e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]];var r=this.data.hovertext||this.data.text;return aRt(r)&&r[t]!==void 0?e.textLabel=r[t]:r&&(e.textLabel=r),!0}};function XLe(e){for(var t=[],r=e.length,i=0;i<r;i++)t[i]=ZG(e[i]);return t}function YG(e,t,r,i){for(var n=[],a=t.length,o=0;o<a;o++)n[o]=e.d2l(t[o],0,i)*r;return n}function WG(e){for(var t=[],r=e.length,i=0;i<r;i++)t[i]=Math.round(e[i]);return t}function sRt(e,t){for(var r=["x","y","z"].indexOf(e),i=[],n=t.length,a=0;a<n;a++)i[a]=[t[a][(r+1)%3],t[a][(r+2)%3]];return tRt(i)}function XG(e,t){for(var r=e.length,i=0;i<r;i++)if(e[i]<=-.5||e[i]>=t-.5)return!1;return!0}jG.update=function(e){var t=this.scene,r=t.fullSceneLayout;this.data=e;var i=e.x.length,n=WLe(YG(r.xaxis,e.x,t.dataScale[0],e.xcalendar),YG(r.yaxis,e.y,t.dataScale[1],e.ycalendar),YG(r.zaxis,e.z,t.dataScale[2],e.zcalendar)),a;if(e.i&&e.j&&e.k){if(e.i.length!==e.j.length||e.j.length!==e.k.length||!XG(e.i,i)||!XG(e.j,i)||!XG(e.k,i))return;a=WLe(WG(e.i),WG(e.j),WG(e.k))}else e.alphahull===0?a=nRt(n):e.alphahull>0?a=rRt(e.alphahull,n):a=sRt(e.delaunayaxis,n);var o={positions:n,cells:a,lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,contourEnable:e.contour.show,contourColor:ZG(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading};if(e.intensity){var s=oRt(e);this.color="#fff";var l=e.intensitymode;o[l+"Intensity"]=e.intensity,o[l+"IntensityBounds"]=[s.min,s.max],o.colormap=iRt(e)}else e.vertexcolor?(this.color=e.vertexcolor[0],o.vertexColors=XLe(e.vertexcolor)):e.facecolor?(this.color=e.facecolor[0],o.cellColors=XLe(e.facecolor)):(this.color=e.color,o.meshColor=ZG(e.color));this.mesh.update(o)};jG.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function lRt(e,t){var r=e.glplot.gl,i=eRt({gl:r}),n=new ZLe(e,i,t.uid);return i._trace=n,n.update(t),e.glplot.add(i),n}jLe.exports=lRt});var QLe=ie((ldr,JLe)=>{"use strict";JLe.exports={attributes:I3(),supplyDefaults:HLe(),calc:YLe(),colorbar:{min:"cmin",max:"cmax"},plot:KLe(),moduleType:"trace",name:"mesh3d",basePlotModule:u1(),categories:["gl3d","showLegend"],meta:{}}});var ePe=ie((udr,$Le)=>{"use strict";$Le.exports=QLe()});var JG=ie((fdr,rPe)=>{"use strict";var uRt=Ls(),q3=kl().axisHoverFormat,fRt=Ba().hovertemplateAttrs,cRt=I3(),tPe=rs(),KG=aa().extendFlat,NE={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute","raw"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:fRt({editType:"calc"},{keys:["norm"]}),uhoverformat:q3("u",1),vhoverformat:q3("v",1),whoverformat:q3("w",1),xhoverformat:q3("x"),yhoverformat:q3("y"),zhoverformat:q3("z"),showlegend:KG({},tPe.showlegend,{dflt:!1})};KG(NE,uRt("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var hRt=["opacity","lightposition","lighting"];hRt.forEach(function(e){NE[e]=cRt[e]});NE.hoverinfo=KG({},tPe.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"});NE.transforms=void 0;rPe.exports=NE});var iPe=ie((cdr,nPe)=>{"use strict";var vRt=Zt(),dRt=$f(),pRt=JG();nPe.exports=function(t,r,i,n){function a(v,d){return vRt.coerce(t,r,pRt,v,d)}var o=a("u"),s=a("v"),l=a("w"),u=a("x"),f=a("y"),c=a("z");if(!o||!o.length||!s||!s.length||!l||!l.length||!u||!u.length||!f||!f.length||!c||!c.length){r.visible=!1;return}var h=a("sizemode");a("sizeref",h==="raw"?1:.5),a("anchor"),a("lighting.ambient"),a("lighting.diffuse"),a("lighting.specular"),a("lighting.roughness"),a("lighting.fresnel"),a("lightposition.x"),a("lightposition.y"),a("lightposition.z"),dRt(t,r,n,a,{prefix:"",cLetter:"c"}),a("text"),a("hovertext"),a("hovertemplate"),a("uhoverformat"),a("vhoverformat"),a("whoverformat"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),r._length=null}});var oPe=ie((hdr,aPe)=>{"use strict";var gRt=xv();aPe.exports=function(t,r){for(var i=r.u,n=r.v,a=r.w,o=Math.min(r.x.length,r.y.length,r.z.length,i.length,n.length,a.length),s=-1/0,l=1/0,u=0;u<o;u++){var f=i[u],c=n[u],h=a[u],v=Math.sqrt(f*f+c*c+h*h);s=Math.max(s,v),l=Math.min(l,v)}r._len=o,r._normMax=s,gRt(t,r,{vals:[l,s],containerStr:"",cLetter:"c"})}});var cPe=ie((vdr,fPe)=>{"use strict";var yRt=_u().gl_cone3d,mRt=_u().gl_cone3d.createConeMesh,xRt=Zt().simpleMap,_Rt=gy().parseColorScale,bRt=ul().extractOpts,wRt=Zt().isArrayOrTypedArray,sPe=F3();function lPe(e,t){this.scene=e,this.uid=t,this.mesh=null,this.data=null}var QG=lPe.prototype;QG.handlePick=function(e){if(e.object===this.mesh){var t=e.index=e.data.index,r=this.data.x[t],i=this.data.y[t],n=this.data.z[t],a=this.data.u[t],o=this.data.v[t],s=this.data.w[t];e.traceCoordinate=[r,i,n,a,o,s,Math.sqrt(a*a+o*o+s*s)];var l=this.data.hovertext||this.data.text;return wRt(l)&&l[t]!==void 0?e.textLabel=l[t]:l&&(e.textLabel=l),!0}};var TRt={xaxis:0,yaxis:1,zaxis:2},ARt={tip:1,tail:0,cm:.25,center:.5},MRt={tip:1,tail:1,cm:.75,center:.5};function uPe(e,t){var r=e.fullSceneLayout,i=e.dataScale,n={};function a(f,c){var h=r[c],v=i[TRt[c]];return xRt(f,function(d){return h.d2l(d)*v})}n.vectors=sPe(a(t.u,"xaxis"),a(t.v,"yaxis"),a(t.w,"zaxis"),t._len),n.positions=sPe(a(t.x,"xaxis"),a(t.y,"yaxis"),a(t.z,"zaxis"),t._len);var o=bRt(t);n.colormap=_Rt(t),n.vertexIntensityBounds=[o.min/t._normMax,o.max/t._normMax],n.coneOffset=ARt[t.anchor];var s=t.sizemode;s==="scaled"?n.coneSize=t.sizeref||.5:s==="absolute"?n.coneSize=t.sizeref&&t._normMax?t.sizeref/t._normMax:.5:s==="raw"&&(n.coneSize=t.sizeref),n.coneSizemode=s;var l=yRt(n),u=t.lightposition;return l.lightPosition=[u.x,u.y,u.z],l.ambient=t.lighting.ambient,l.diffuse=t.lighting.diffuse,l.specular=t.lighting.specular,l.roughness=t.lighting.roughness,l.fresnel=t.lighting.fresnel,l.opacity=t.opacity,t._pad=MRt[t.anchor]*l.vectorScale*l.coneScale*t._normMax,l}QG.update=function(e){this.data=e;var t=uPe(this.scene,e);this.mesh.update(t)};QG.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function SRt(e,t){var r=e.glplot.gl,i=uPe(e,t),n=mRt(r,i),a=new lPe(e,t.uid);return a.mesh=n,a.data=t,n._trace=a,e.glplot.add(n),a}fPe.exports=SRt});var vPe=ie((ddr,hPe)=>{"use strict";hPe.exports={moduleType:"trace",name:"cone",basePlotModule:u1(),categories:["gl3d","showLegend"],attributes:JG(),supplyDefaults:iPe(),colorbar:{min:"cmin",max:"cmax"},calc:oPe(),plot:cPe(),eventData:function(e,t){return e.norm=t.traceCoordinate[6],e},meta:{}}});var pPe=ie((pdr,dPe)=>{"use strict";dPe.exports=vPe()});var eY=ie((gdr,yPe)=>{"use strict";var ERt=Ls(),z3=kl().axisHoverFormat,kRt=Ba().hovertemplateAttrs,CRt=I3(),gPe=rs(),$G=aa().extendFlat,UE={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:kRt({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:z3("u",1),vhoverformat:z3("v",1),whoverformat:z3("w",1),xhoverformat:z3("x"),yhoverformat:z3("y"),zhoverformat:z3("z"),showlegend:$G({},gPe.showlegend,{dflt:!1})};$G(UE,ERt("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var LRt=["opacity","lightposition","lighting"];LRt.forEach(function(e){UE[e]=CRt[e]});UE.hoverinfo=$G({},gPe.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"});UE.transforms=void 0;yPe.exports=UE});var xPe=ie((ydr,mPe)=>{"use strict";var PRt=Zt(),RRt=$f(),DRt=eY();mPe.exports=function(t,r,i,n){function a(h,v){return PRt.coerce(t,r,DRt,h,v)}var o=a("u"),s=a("v"),l=a("w"),u=a("x"),f=a("y"),c=a("z");if(!o||!o.length||!s||!s.length||!l||!l.length||!u||!u.length||!f||!f.length||!c||!c.length){r.visible=!1;return}a("starts.x"),a("starts.y"),a("starts.z"),a("maxdisplayed"),a("sizeref"),a("lighting.ambient"),a("lighting.diffuse"),a("lighting.specular"),a("lighting.roughness"),a("lighting.fresnel"),a("lightposition.x"),a("lightposition.y"),a("lightposition.z"),RRt(t,r,n,a,{prefix:"",cLetter:"c"}),a("text"),a("hovertext"),a("hovertemplate"),a("uhoverformat"),a("vhoverformat"),a("whoverformat"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),r._length=null}});var EPe=ie((mdr,SPe)=>{"use strict";var wPe=_u().gl_streamtube3d,IRt=wPe.createTubeMesh,FRt=Zt(),qRt=gy().parseColorScale,zRt=ul().extractOpts,_Pe=F3(),TPe={xaxis:0,yaxis:1,zaxis:2};function APe(e,t){this.scene=e,this.uid=t,this.mesh=null,this.data=null}var rY=APe.prototype;rY.handlePick=function(e){var t=this.scene.fullSceneLayout,r=this.scene.dataScale;function i(o,s){var l=t[s],u=r[TPe[s]];return l.l2c(o)/u}if(e.object===this.mesh){var n=e.data.position,a=e.data.velocity;return e.traceCoordinate=[i(n[0],"xaxis"),i(n[1],"yaxis"),i(n[2],"zaxis"),i(a[0],"xaxis"),i(a[1],"yaxis"),i(a[2],"zaxis"),e.data.intensity*this.data._normMax,e.data.divergence],e.textLabel=this.data.hovertext||this.data.text,!0}};function bPe(e){var t=e.length,r;return t>2?r=e.slice(1,t-1):t===2?r=[(e[0]+e[1])/2]:r=e,r}function tY(e){var t=e.length;return t===1?[.5,.5]:[e[1]-e[0],e[t-1]-e[t-2]]}function MPe(e,t){var r=e.fullSceneLayout,i=e.dataScale,n=t._len,a={};function o(P,D){var q=r[D],O=i[TPe[D]];return FRt.simpleMap(P,function(U){return q.d2l(U)*O})}if(a.vectors=_Pe(o(t._u,"xaxis"),o(t._v,"yaxis"),o(t._w,"zaxis"),n),!n)return{positions:[],cells:[]};var s=o(t._Xs,"xaxis"),l=o(t._Ys,"yaxis"),u=o(t._Zs,"zaxis");a.meshgrid=[s,l,u],a.gridFill=t._gridFill;var f=t._slen;if(f)a.startingPositions=_Pe(o(t._startsX,"xaxis"),o(t._startsY,"yaxis"),o(t._startsZ,"zaxis"));else{for(var c=l[0],h=bPe(s),v=bPe(u),d=new Array(h.length*v.length),x=0,b=0;b<h.length;b++)for(var p=0;p<v.length;p++)d[x++]=[h[b],c,v[p]];a.startingPositions=d}a.colormap=qRt(t),a.tubeSize=t.sizeref,a.maxLength=t.maxdisplayed;var w=o(t._xbnds,"xaxis"),A=o(t._ybnds,"yaxis"),T=o(t._zbnds,"zaxis"),k=tY(s),_=tY(l),E=tY(u),S=[[w[0]-k[0],A[0]-_[0],T[0]-E[0]],[w[1]+k[1],A[1]+_[1],T[1]+E[1]]],g=wPe(a,S),C=zRt(t);g.vertexIntensityBounds=[C.min/t._normMax,C.max/t._normMax];var M=t.lightposition;return g.lightPosition=[M.x,M.y,M.z],g.ambient=t.lighting.ambient,g.diffuse=t.lighting.diffuse,g.specular=t.lighting.specular,g.roughness=t.lighting.roughness,g.fresnel=t.lighting.fresnel,g.opacity=t.opacity,t._pad=g.tubeScale*t.sizeref*2,g}rY.update=function(e){this.data=e;var t=MPe(this.scene,e);this.mesh.update(t)};rY.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function ORt(e,t){var r=e.glplot.gl,i=MPe(e,t),n=IRt(r,i),a=new APe(e,t.uid);return a.mesh=n,a.data=t,n._trace=a,e.glplot.add(n),a}SPe.exports=ORt});var CPe=ie((xdr,kPe)=>{"use strict";kPe.exports={moduleType:"trace",name:"streamtube",basePlotModule:u1(),categories:["gl3d","showLegend"],attributes:eY(),supplyDefaults:xPe(),colorbar:{min:"cmin",max:"cmax"},calc:gD().calc,plot:EPe(),eventData:function(e,t){return e.tubex=e.x,e.tubey=e.y,e.tubez=e.z,e.tubeu=t.traceCoordinate[3],e.tubev=t.traceCoordinate[4],e.tubew=t.traceCoordinate[5],e.norm=t.traceCoordinate[6],e.divergence=t.traceCoordinate[7],delete e.x,delete e.y,delete e.z,e},meta:{}}});var PPe=ie((_dr,LPe)=>{"use strict";LPe.exports=CPe()});var O3=ie((bdr,IPe)=>{"use strict";var BRt=Ba().hovertemplateAttrs,NRt=Ba().texttemplateAttrs,URt=X0(),vg=Bl(),VRt=rs(),RPe=Ls(),HRt=dc().dash,U_=aa().extendFlat,GRt=Zs().overrideAll,Bp=vg.marker,DPe=vg.line,YRt=Bp.line;IPe.exports=GRt({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:U_({},vg.mode,{dflt:"markers"}),text:U_({},vg.text,{}),texttemplate:NRt({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:U_({},vg.hovertext,{}),textfont:vg.textfont,textposition:vg.textposition,line:{color:DPe.color,width:DPe.width,dash:HRt},connectgaps:vg.connectgaps,marker:U_({symbol:Bp.symbol,opacity:Bp.opacity,angle:Bp.angle,angleref:U_({},Bp.angleref,{values:["previous","up","north"]}),standoff:Bp.standoff,size:Bp.size,sizeref:Bp.sizeref,sizemin:Bp.sizemin,sizemode:Bp.sizemode,colorbar:Bp.colorbar,line:U_({width:YRt.width},RPe("marker.line")),gradient:Bp.gradient},RPe("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:URt(),selected:vg.selected,unselected:vg.unselected,hoverinfo:U_({},VRt.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:BRt()},"calc","nested")});var qPe=ie((wdr,FPe)=>{"use strict";var nY=Zt(),iY=Ks(),WRt=xp(),XRt=l0(),ZRt=u0(),jRt=j0(),KRt=O3();FPe.exports=function(t,r,i,n){function a(v,d){return nY.coerce(t,r,KRt,v,d)}var o=a("locations"),s;if(o&&o.length){var l=a("geojson"),u;(typeof l=="string"&&l!==""||nY.isPlainObject(l))&&(u="geojson-id");var f=a("locationmode",u);f==="geojson-id"&&a("featureidkey"),s=o.length}else{var c=a("lon")||[],h=a("lat")||[];s=Math.min(c.length,h.length)}if(!s){r.visible=!1;return}r._length=s,a("text"),a("hovertext"),a("hovertemplate"),a("mode"),iY.hasMarkers(r)&&WRt(t,r,i,n,a,{gradient:!0}),iY.hasLines(r)&&(XRt(t,r,i,n,a),a("connectgaps")),iY.hasText(r)&&(a("texttemplate"),ZRt(t,r,n,a)),a("fill"),r.fill!=="none"&&jRt(t,r,i,a),nY.coerceSelectionMarkerOpacity(r,a)}});var BPe=ie((Tdr,OPe)=>{"use strict";var zPe=Wi();OPe.exports=function(t,r,i){var n={},a=i[r.geo]._subplot,o=a.mockAxis,s=t.lonlat;return n.lonLabel=zPe.tickText(o,o.c2l(s[0]),!0).text,n.latLabel=zPe.tickText(o,o.c2l(s[1]),!0).text,n}});var oY=ie((Adr,HPe)=>{"use strict";var aY=la(),NPe=eo().BADNUM,JRt=_p(),QRt=K0(),$Rt=bp(),eDt=Zt().isArrayOrTypedArray,UPe=Zt()._;function VPe(e){return e&&typeof e=="string"}HPe.exports=function(t,r){var i=eDt(r.locations),n=i?r.locations.length:r._length,a=new Array(n),o;r.geojson?o=function(h){return VPe(h)||aY(h)}:o=VPe;for(var s=0;s<n;s++){var l=a[s]={};if(i){var u=r.locations[s];l.loc=o(u)?u:null}else{var f=r.lon[s],c=r.lat[s];aY(f)&&aY(c)?l.lonlat=[+f,+c]:l.lonlat=[NPe,NPe]}}return QRt(a,r),JRt(t,r),$Rt(a,r),n&&(a[0].t={labels:{lat:UPe(t,"lat:")+" ",lon:UPe(t,"lon:")+" "}}),a}});var VE=ie(Th=>{"use strict";Th.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"};Th.axesNames=["lonaxis","lataxis"];Th.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360};Th.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180};Th.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}};Th.clipPad=.001;Th.precision=.1;Th.landColor="#F0DC82";Th.waterColor="#3399FF";Th.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"};Th.sphereSVG={type:"Sphere"};Th.fillLayers={ocean:1,land:1,lakes:1};Th.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1};Th.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"];Th.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"];Th.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}});var sY=ie((xD,GPe)=>{(function(e,t){typeof xD=="object"&&typeof GPe!="undefined"?t(xD):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.topojson=e.topojson||{}))})(xD,function(e){"use strict";function t(A){return A}function r(A){if(A==null)return t;var T,k,_=A.scale[0],E=A.scale[1],S=A.translate[0],g=A.translate[1];return function(C,M){M||(T=k=0);var P=2,D=C.length,q=new Array(D);for(q[0]=(T+=C[0])*_+S,q[1]=(k+=C[1])*E+g;P<D;)q[P]=C[P],++P;return q}}function i(A){var T=r(A.transform),k,_=1/0,E=_,S=-_,g=-_;function C(P){P=T(P),P[0]<_&&(_=P[0]),P[0]>S&&(S=P[0]),P[1]<E&&(E=P[1]),P[1]>g&&(g=P[1])}function M(P){switch(P.type){case"GeometryCollection":P.geometries.forEach(M);break;case"Point":C(P.coordinates);break;case"MultiPoint":P.coordinates.forEach(C);break}}A.arcs.forEach(function(P){for(var D=-1,q=P.length,O;++D<q;)O=T(P[D],D),O[0]<_&&(_=O[0]),O[0]>S&&(S=O[0]),O[1]<E&&(E=O[1]),O[1]>g&&(g=O[1])});for(k in A.objects)M(A.objects[k]);return[_,E,S,g]}function n(A,T){for(var k,_=A.length,E=_-T;E<--_;)k=A[E],A[E++]=A[_],A[_]=k}function a(A,T){return typeof T=="string"&&(T=A.objects[T]),T.type==="GeometryCollection"?{type:"FeatureCollection",features:T.geometries.map(function(k){return o(A,k)})}:o(A,T)}function o(A,T){var k=T.id,_=T.bbox,E=T.properties==null?{}:T.properties,S=s(A,T);return k==null&&_==null?{type:"Feature",properties:E,geometry:S}:_==null?{type:"Feature",id:k,properties:E,geometry:S}:{type:"Feature",id:k,bbox:_,properties:E,geometry:S}}function s(A,T){var k=r(A.transform),_=A.arcs;function E(D,q){q.length&&q.pop();for(var O=_[D<0?~D:D],U=0,B=O.length;U<B;++U)q.push(k(O[U],U));D<0&&n(q,B)}function S(D){return k(D)}function g(D){for(var q=[],O=0,U=D.length;O<U;++O)E(D[O],q);return q.length<2&&q.push(q[0]),q}function C(D){for(var q=g(D);q.length<4;)q.push(q[0]);return q}function M(D){return D.map(C)}function P(D){var q=D.type,O;switch(q){case"GeometryCollection":return{type:q,geometries:D.geometries.map(P)};case"Point":O=S(D.coordinates);break;case"MultiPoint":O=D.coordinates.map(S);break;case"LineString":O=g(D.arcs);break;case"MultiLineString":O=D.arcs.map(g);break;case"Polygon":O=M(D.arcs);break;case"MultiPolygon":O=D.arcs.map(M);break;default:return null}return{type:q,coordinates:O}}return P(T)}function l(A,T){var k={},_={},E={},S=[],g=-1;T.forEach(function(P,D){var q=A.arcs[P<0?~P:P],O;q.length<3&&!q[1][0]&&!q[1][1]&&(O=T[++g],T[g]=P,T[D]=O)}),T.forEach(function(P){var D=C(P),q=D[0],O=D[1],U,B;if(U=E[q])if(delete E[U.end],U.push(P),U.end=O,B=_[O]){delete _[B.start];var F=B===U?U:U.concat(B);_[F.start=U.start]=E[F.end=B.end]=F}else _[U.start]=E[U.end]=U;else if(U=_[O])if(delete _[U.start],U.unshift(P),U.start=q,B=E[q]){delete E[B.end];var N=B===U?U:B.concat(U);_[N.start=B.start]=E[N.end=U.end]=N}else _[U.start]=E[U.end]=U;else U=[P],_[U.start=q]=E[U.end=O]=U});function C(P){var D=A.arcs[P<0?~P:P],q=D[0],O;return A.transform?(O=[0,0],D.forEach(function(U){O[0]+=U[0],O[1]+=U[1]})):O=D[D.length-1],P<0?[O,q]:[q,O]}function M(P,D){for(var q in P){var O=P[q];delete D[O.start],delete O.start,delete O.end,O.forEach(function(U){k[U<0?~U:U]=1}),S.push(O)}}return M(E,_),M(_,E),T.forEach(function(P){k[P<0?~P:P]||S.push([P])}),S}function u(A){return s(A,f.apply(this,arguments))}function f(A,T,k){var _,E,S;if(arguments.length>1)_=c(A,T,k);else for(E=0,_=new Array(S=A.arcs.length);E<S;++E)_[E]=E;return{type:"MultiLineString",arcs:l(A,_)}}function c(A,T,k){var _=[],E=[],S;function g(q){var O=q<0?~q:q;(E[O]||(E[O]=[])).push({i:q,g:S})}function C(q){q.forEach(g)}function M(q){q.forEach(C)}function P(q){q.forEach(M)}function D(q){switch(S=q,q.type){case"GeometryCollection":q.geometries.forEach(D);break;case"LineString":C(q.arcs);break;case"MultiLineString":case"Polygon":M(q.arcs);break;case"MultiPolygon":P(q.arcs);break}}return D(T),E.forEach(k==null?function(q){_.push(q[0].i)}:function(q){k(q[0].g,q[q.length-1].g)&&_.push(q[0].i)}),_}function h(A){for(var T=-1,k=A.length,_,E=A[k-1],S=0;++T<k;)_=E,E=A[T],S+=_[0]*E[1]-_[1]*E[0];return Math.abs(S)}function v(A){return s(A,d.apply(this,arguments))}function d(A,T){var k={},_=[],E=[];T.forEach(S);function S(M){switch(M.type){case"GeometryCollection":M.geometries.forEach(S);break;case"Polygon":g(M.arcs);break;case"MultiPolygon":M.arcs.forEach(g);break}}function g(M){M.forEach(function(P){P.forEach(function(D){(k[D=D<0?~D:D]||(k[D]=[])).push(M)})}),_.push(M)}function C(M){return h(s(A,{type:"Polygon",arcs:[M]}).coordinates[0])}return _.forEach(function(M){if(!M._){var P=[],D=[M];for(M._=1,E.push(P);M=D.pop();)P.push(M),M.forEach(function(q){q.forEach(function(O){k[O<0?~O:O].forEach(function(U){U._||(U._=1,D.push(U))})})})}}),_.forEach(function(M){delete M._}),{type:"MultiPolygon",arcs:E.map(function(M){var P=[],D;if(M.forEach(function(F){F.forEach(function(N){N.forEach(function(X){k[X<0?~X:X].length<2&&P.push(X)})})}),P=l(A,P),(D=P.length)>1)for(var q=1,O=C(P[0]),U,B;q<D;++q)(U=C(P[q]))>O&&(B=P[0],P[0]=P[q],P[q]=B,O=U);return P}).filter(function(M){return M.length>0})}}function x(A,T){for(var k=0,_=A.length;k<_;){var E=k+_>>>1;A[E]<T?k=E+1:_=E}return k}function b(A){var T={},k=A.map(function(){return[]});function _(F,N){F.forEach(function(X){X<0&&(X=~X);var K=T[X];K?K.push(N):T[X]=[N]})}function E(F,N){F.forEach(function(X){_(X,N)})}function S(F,N){F.type==="GeometryCollection"?F.geometries.forEach(function(X){S(X,N)}):F.type in g&&g[F.type](F.arcs,N)}var g={LineString:_,MultiLineString:E,Polygon:E,MultiPolygon:function(F,N){F.forEach(function(X){E(X,N)})}};A.forEach(S);for(var C in T)for(var M=T[C],P=M.length,D=0;D<P;++D)for(var q=D+1;q<P;++q){var O=M[D],U=M[q],B;(B=k[O])[C=x(B,U)]!==U&&B.splice(C,0,U),(B=k[U])[C=x(B,O)]!==O&&B.splice(C,0,O)}return k}function p(A){if(A==null)return t;var T,k,_=A.scale[0],E=A.scale[1],S=A.translate[0],g=A.translate[1];return function(C,M){M||(T=k=0);var P=2,D=C.length,q=new Array(D),O=Math.round((C[0]-S)/_),U=Math.round((C[1]-g)/E);for(q[0]=O-T,T=O,q[1]=U-k,k=U;P<D;)q[P]=C[P],++P;return q}}function w(A,T){if(A.transform)throw new Error("already quantized");if(!T||!T.scale){if(!((g=Math.floor(T))>=2))throw new Error("n must be \u22652");M=A.bbox||i(A);var k=M[0],_=M[1],E=M[2],S=M[3],g;T={scale:[E-k?(E-k)/(g-1):1,S-_?(S-_)/(g-1):1],translate:[k,_]}}else M=A.bbox;var C=p(T),M,P,D=A.objects,q={};function O(F){return C(F)}function U(F){var N;switch(F.type){case"GeometryCollection":N={type:"GeometryCollection",geometries:F.geometries.map(U)};break;case"Point":N={type:"Point",coordinates:O(F.coordinates)};break;case"MultiPoint":N={type:"MultiPoint",coordinates:F.coordinates.map(O)};break;default:return F}return F.id!=null&&(N.id=F.id),F.bbox!=null&&(N.bbox=F.bbox),F.properties!=null&&(N.properties=F.properties),N}function B(F){var N=0,X=1,K=F.length,ne,fe=new Array(K);for(fe[0]=C(F[0],0);++N<K;)((ne=C(F[N],N))[0]||ne[1])&&(fe[X++]=ne);return X===1&&(fe[X++]=[0,0]),fe.length=X,fe}for(P in D)q[P]=U(D[P]);return{type:"Topology",bbox:M,transform:T,objects:q,arcs:A.arcs.map(B)}}e.bbox=i,e.feature=a,e.merge=v,e.mergeArcs=d,e.mesh=u,e.meshArcs=f,e.neighbors=b,e.quantize=w,e.transform=r,e.untransform=p,Object.defineProperty(e,"__esModule",{value:!0})})});var _D=ie((Sdr,YPe)=>{"use strict";var lY=YPe.exports={},tDt=VE().locationmodeToLayer,rDt=sY().feature;lY.getTopojsonName=function(e){return[e.scope.replace(/ /g,"-"),"_",e.resolution.toString(),"m"].join("")};lY.getTopojsonPath=function(e,t){return e+t+".json"};lY.getTopojsonFeatures=function(e,t){var r=tDt[e.locationmode],i=t.objects[r];return rDt(t,i).features}});var GE=ie(HE=>{"use strict";var nDt=eo().BADNUM;HE.calcTraceToLineCoords=function(e){for(var t=e[0].trace,r=t.connectgaps,i=[],n=[],a=0;a<e.length;a++){var o=e[a],s=o.lonlat;s[0]!==nDt?n.push(s):!r&&n.length>0&&(i.push(n),n=[])}return n.length>0&&i.push(n),i};HE.makeLine=function(e){return e.length===1?{type:"LineString",coordinates:e[0]}:{type:"MultiLineString",coordinates:e}};HE.makePolygon=function(e){if(e.length===1)return{type:"Polygon",coordinates:e};for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=[e[r]];return{type:"MultiPolygon",coordinates:t}};HE.makeBlank=function(){return{type:"Point",coordinates:[]}}});var XPe=ie((kdr,WPe)=>{WPe.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}});var $Pe=ie(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});io.earthRadius=63710088e-1;io.factors={centimeters:io.earthRadius*100,centimetres:io.earthRadius*100,degrees:io.earthRadius/111325,feet:io.earthRadius*3.28084,inches:io.earthRadius*39.37,kilometers:io.earthRadius/1e3,kilometres:io.earthRadius/1e3,meters:io.earthRadius,metres:io.earthRadius,miles:io.earthRadius/1609.344,millimeters:io.earthRadius*1e3,millimetres:io.earthRadius*1e3,nauticalmiles:io.earthRadius/1852,radians:1,yards:io.earthRadius*1.0936};io.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/io.earthRadius,yards:1.0936133};io.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function h1(e,t,r){r===void 0&&(r={});var i={type:"Feature"};return(r.id===0||r.id)&&(i.id=r.id),r.bbox&&(i.bbox=r.bbox),i.properties=t||{},i.geometry=e,i}io.feature=h1;function iDt(e,t,r){switch(r===void 0&&(r={}),e){case"Point":return uY(t).geometry;case"LineString":return cY(t).geometry;case"Polygon":return fY(t).geometry;case"MultiPoint":return jPe(t).geometry;case"MultiLineString":return ZPe(t).geometry;case"MultiPolygon":return KPe(t).geometry;default:throw new Error(e+" is invalid")}}io.geometry=iDt;function uY(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!bD(e[0])||!bD(e[1]))throw new Error("coordinates must contain numbers");var i={type:"Point",coordinates:e};return h1(i,t,r)}io.point=uY;function aDt(e,t,r){return r===void 0&&(r={}),wD(e.map(function(i){return uY(i,t)}),r)}io.points=aDt;function fY(e,t,r){r===void 0&&(r={});for(var i=0,n=e;i<n.length;i++){var a=n[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<a[a.length-1].length;o++)if(a[a.length-1][o]!==a[0][o])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:e};return h1(s,t,r)}io.polygon=fY;function oDt(e,t,r){return r===void 0&&(r={}),wD(e.map(function(i){return fY(i,t)}),r)}io.polygons=oDt;function cY(e,t,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:e};return h1(i,t,r)}io.lineString=cY;function sDt(e,t,r){return r===void 0&&(r={}),wD(e.map(function(i){return cY(i,t)}),r)}io.lineStrings=sDt;function wD(e,t){t===void 0&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}io.featureCollection=wD;function ZPe(e,t,r){r===void 0&&(r={});var i={type:"MultiLineString",coordinates:e};return h1(i,t,r)}io.multiLineString=ZPe;function jPe(e,t,r){r===void 0&&(r={});var i={type:"MultiPoint",coordinates:e};return h1(i,t,r)}io.multiPoint=jPe;function KPe(e,t,r){r===void 0&&(r={});var i={type:"MultiPolygon",coordinates:e};return h1(i,t,r)}io.multiPolygon=KPe;function lDt(e,t,r){r===void 0&&(r={});var i={type:"GeometryCollection",geometries:e};return h1(i,t,r)}io.geometryCollection=lDt;function uDt(e,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r}io.round=uDt;function JPe(e,t){t===void 0&&(t="kilometers");var r=io.factors[t];if(!r)throw new Error(t+" units is invalid");return e*r}io.radiansToLength=JPe;function hY(e,t){t===void 0&&(t="kilometers");var r=io.factors[t];if(!r)throw new Error(t+" units is invalid");return e/r}io.lengthToRadians=hY;function fDt(e,t){return QPe(hY(e,t))}io.lengthToDegrees=fDt;function cDt(e){var t=e%360;return t<0&&(t+=360),t}io.bearingToAzimuth=cDt;function QPe(e){var t=e%(2*Math.PI);return t*180/Math.PI}io.radiansToDegrees=QPe;function hDt(e){var t=e%360;return t*Math.PI/180}io.degreesToRadians=hDt;function vDt(e,t,r){if(t===void 0&&(t="kilometers"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return JPe(hY(e,t),r)}io.convertLength=vDt;function dDt(e,t,r){if(t===void 0&&(t="meters"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=io.areaFactors[t];if(!i)throw new Error("invalid original units");var n=io.areaFactors[r];if(!n)throw new Error("invalid final units");return e/i*n}io.convertArea=dDt;function bD(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}io.isNumber=bD;function pDt(e){return!!e&&e.constructor===Object}io.isObject=pDt;function gDt(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(t){if(!bD(t))throw new Error("bbox must only contain numbers")})}io.validateBBox=gDt;function yDt(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}io.validateId=yDt});var i6e=ie(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});var ev=$Pe();function YE(e,t,r){if(e!==null)for(var i,n,a,o,s,l,u,f=0,c=0,h,v=e.type,d=v==="FeatureCollection",x=v==="Feature",b=d?e.features.length:1,p=0;p<b;p++){u=d?e.features[p].geometry:x?e.geometry:e,h=u?u.type==="GeometryCollection":!1,s=h?u.geometries.length:1;for(var w=0;w<s;w++){var A=0,T=0;if(o=h?u.geometries[w]:u,o!==null){l=o.coordinates;var k=o.type;switch(f=r&&(k==="Polygon"||k==="MultiPolygon")?1:0,k){case null:break;case"Point":if(t(l,c,p,A,T)===!1)return!1;c++,A++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(t(l[i],c,p,A,T)===!1)return!1;c++,k==="MultiPoint"&&A++}k==="LineString"&&A++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(n=0;n<l[i].length-f;n++){if(t(l[i][n],c,p,A,T)===!1)return!1;c++}k==="MultiLineString"&&A++,k==="Polygon"&&T++}k==="Polygon"&&A++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(T=0,n=0;n<l[i].length;n++){for(a=0;a<l[i][n].length-f;a++){if(t(l[i][n][a],c,p,A,T)===!1)return!1;c++}T++}A++}break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(YE(o.geometries[i],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function mDt(e,t,r,i){var n=r;return YE(e,function(a,o,s,l,u){o===0&&r===void 0?n=a:n=t(n,a,o,s,l,u)},i),n}function e6e(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&t(e.features[r].properties,r)!==!1;r++);break;case"Feature":t(e.properties,0);break}}function xDt(e,t,r){var i=r;return e6e(e,function(n,a){a===0&&r===void 0?i=n:i=t(i,n,a)}),i}function t6e(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function _Dt(e,t,r){var i=r;return t6e(e,function(n,a){a===0&&r===void 0?i=n:i=t(i,n,a)}),i}function bDt(e){var t=[];return YE(e,function(r){t.push(r)}),t}function vY(e,t){var r,i,n,a,o,s,l,u,f,c,h=0,v=e.type==="FeatureCollection",d=e.type==="Feature",x=v?e.features.length:1;for(r=0;r<x;r++){for(s=v?e.features[r].geometry:d?e.geometry:e,u=v?e.features[r].properties:d?e.properties:{},f=v?e.features[r].bbox:d?e.bbox:void 0,c=v?e.features[r].id:d?e.id:void 0,l=s?s.type==="GeometryCollection":!1,o=l?s.geometries.length:1,n=0;n<o;n++){if(a=l?s.geometries[n]:s,a===null){if(t(null,h,u,f,c)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(a,h,u,f,c)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<a.geometries.length;i++)if(t(a.geometries[i],h,u,f,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}h++}}function wDt(e,t,r){var i=r;return vY(e,function(n,a,o,s,l){a===0&&r===void 0?i=n:i=t(i,n,a,o,s,l)}),i}function TD(e,t){vY(e,function(r,i,n,a,o){var s=r===null?null:r.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return t(ev.feature(r,n,{bbox:a,id:o}),i,0)===!1?!1:void 0}var l;switch(s){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<r.coordinates.length;u++){var f=r.coordinates[u],c={type:l,coordinates:f};if(t(ev.feature(c,n),i,u)===!1)return!1}})}function TDt(e,t,r){var i=r;return TD(e,function(n,a,o){a===0&&o===0&&r===void 0?i=n:i=t(i,n,a,o)}),i}function r6e(e,t){TD(e,function(r,i,n){var a=0;if(r.geometry){var o=r.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var s,l=0,u=0,f=0;if(YE(r,function(c,h,v,d,x){if(s===void 0||i>l||d>u||x>f){s=c,l=i,u=d,f=x,a=0;return}var b=ev.lineString([s,c],r.properties);if(t(b,i,n,x,a)===!1)return!1;a++,s=c})===!1)return!1}}})}function ADt(e,t,r){var i=r,n=!1;return r6e(e,function(a,o,s,l,u){n===!1&&r===void 0?i=a:i=t(i,a,o,s,l,u),n=!0}),i}function n6e(e,t){if(!e)throw new Error("geojson is required");TD(e,function(r,i,n){if(r.geometry!==null){var a=r.geometry.type,o=r.geometry.coordinates;switch(a){case"LineString":if(t(r,i,n,0,0)===!1)return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(t(ev.lineString(o[s],r.properties),i,n,s)===!1)return!1;break}}})}function MDt(e,t,r){var i=r;return n6e(e,function(n,a,o,s){a===0&&r===void 0?i=n:i=t(i,n,a,o,s)}),i}function SDt(e,t){if(t=t||{},!ev.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,n=t.geometryIndex||0,a=t.segmentIndex||0,o=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),o=o||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":o=o||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var l=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=l.length+a-1),ev.lineString([l[a],l[a+1]],o,t);case"Polygon":return n<0&&(n=l.length+n),a<0&&(a=l[n].length+a-1),ev.lineString([l[n][a],l[n][a+1]],o,t);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a-1),ev.lineString([l[i][a],l[i][a+1]],o,t);case"MultiPolygon":return i<0&&(i=l.length+i),n<0&&(n=l[i].length+n),a<0&&(a=l[i][n].length-a-1),ev.lineString([l[i][n][a],l[i][n][a+1]],o,t)}throw new Error("geojson is invalid")}function EDt(e,t){if(t=t||{},!ev.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,n=t.geometryIndex||0,a=t.coordIndex||0,o=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),o=o||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":o=o||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var l=s.coordinates;switch(s.type){case"Point":return ev.point(l,o,t);case"MultiPoint":return i<0&&(i=l.length+i),ev.point(l[i],o,t);case"LineString":return a<0&&(a=l.length+a),ev.point(l[a],o,t);case"Polygon":return n<0&&(n=l.length+n),a<0&&(a=l[n].length+a),ev.point(l[n][a],o,t);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),ev.point(l[i][a],o,t);case"MultiPolygon":return i<0&&(i=l.length+i),n<0&&(n=l[i].length+n),a<0&&(a=l[i][n].length-a),ev.point(l[i][n][a],o,t)}throw new Error("geojson is invalid")}_c.coordEach=YE;_c.coordReduce=mDt;_c.propEach=e6e;_c.propReduce=xDt;_c.featureEach=t6e;_c.featureReduce=_Dt;_c.coordAll=bDt;_c.geomEach=vY;_c.geomReduce=wDt;_c.flattenEach=TD;_c.flattenReduce=TDt;_c.segmentEach=r6e;_c.segmentReduce=ADt;_c.lineEach=n6e;_c.lineReduce=MDt;_c.findSegment=SDt;_c.findPoint=EDt});var l6e=ie(pY=>{"use strict";Object.defineProperty(pY,"__esModule",{value:!0});var kDt=i6e(),a6e=6378137;function CDt(e){return kDt.geomReduce(e,function(t,r){return t+LDt(r)},0)}pY.default=CDt;function LDt(e){var t=0,r;switch(e.type){case"Polygon":return o6e(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)t+=o6e(e.coordinates[r]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function o6e(e){var t=0;if(e&&e.length>0){t+=Math.abs(s6e(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(s6e(e[r]))}return t}function s6e(e){var t,r,i,n,a,o,s,l=0,u=e.length;if(u>2){for(s=0;s<u;s++)s===u-2?(n=u-2,a=u-1,o=0):s===u-1?(n=u-1,a=0,o=1):(n=s,a=s+1,o=s+2),t=e[n],r=e[a],i=e[o],l+=(dY(i[0])-dY(t[0]))*Math.sin(dY(r[1]));l=l*a6e*a6e/2}return l}function dY(e){return e*Math.PI/180}});var _Y=ie(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});za.earthRadius=63710088e-1;za.factors={centimeters:za.earthRadius*100,centimetres:za.earthRadius*100,degrees:za.earthRadius/111325,feet:za.earthRadius*3.28084,inches:za.earthRadius*39.37,kilometers:za.earthRadius/1e3,kilometres:za.earthRadius/1e3,meters:za.earthRadius,metres:za.earthRadius,miles:za.earthRadius/1609.344,millimeters:za.earthRadius*1e3,millimetres:za.earthRadius*1e3,nauticalmiles:za.earthRadius/1852,radians:1,yards:za.earthRadius/1.0936};za.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/za.earthRadius,yards:1/1.0936};za.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function v1(e,t,r){r===void 0&&(r={});var i={type:"Feature"};return(r.id===0||r.id)&&(i.id=r.id),r.bbox&&(i.bbox=r.bbox),i.properties=t||{},i.geometry=e,i}za.feature=v1;function PDt(e,t,r){switch(r===void 0&&(r={}),e){case"Point":return gY(t).geometry;case"LineString":return mY(t).geometry;case"Polygon":return yY(t).geometry;case"MultiPoint":return f6e(t).geometry;case"MultiLineString":return u6e(t).geometry;case"MultiPolygon":return c6e(t).geometry;default:throw new Error(e+" is invalid")}}za.geometry=PDt;function gY(e,t,r){r===void 0&&(r={});var i={type:"Point",coordinates:e};return v1(i,t,r)}za.point=gY;function RDt(e,t,r){return r===void 0&&(r={}),AD(e.map(function(i){return gY(i,t)}),r)}za.points=RDt;function yY(e,t,r){r===void 0&&(r={});for(var i=0,n=e;i<n.length;i++){var a=n[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<a[a.length-1].length;o++)if(a[a.length-1][o]!==a[0][o])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:e};return v1(s,t,r)}za.polygon=yY;function DDt(e,t,r){return r===void 0&&(r={}),AD(e.map(function(i){return yY(i,t)}),r)}za.polygons=DDt;function mY(e,t,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:e};return v1(i,t,r)}za.lineString=mY;function IDt(e,t,r){return r===void 0&&(r={}),AD(e.map(function(i){return mY(i,t)}),r)}za.lineStrings=IDt;function AD(e,t){t===void 0&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}za.featureCollection=AD;function u6e(e,t,r){r===void 0&&(r={});var i={type:"MultiLineString",coordinates:e};return v1(i,t,r)}za.multiLineString=u6e;function f6e(e,t,r){r===void 0&&(r={});var i={type:"MultiPoint",coordinates:e};return v1(i,t,r)}za.multiPoint=f6e;function c6e(e,t,r){r===void 0&&(r={});var i={type:"MultiPolygon",coordinates:e};return v1(i,t,r)}za.multiPolygon=c6e;function FDt(e,t,r){r===void 0&&(r={});var i={type:"GeometryCollection",geometries:e};return v1(i,t,r)}za.geometryCollection=FDt;function qDt(e,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r}za.round=qDt;function h6e(e,t){t===void 0&&(t="kilometers");var r=za.factors[t];if(!r)throw new Error(t+" units is invalid");return e*r}za.radiansToLength=h6e;function xY(e,t){t===void 0&&(t="kilometers");var r=za.factors[t];if(!r)throw new Error(t+" units is invalid");return e/r}za.lengthToRadians=xY;function zDt(e,t){return v6e(xY(e,t))}za.lengthToDegrees=zDt;function ODt(e){var t=e%360;return t<0&&(t+=360),t}za.bearingToAzimuth=ODt;function v6e(e){var t=e%(2*Math.PI);return t*180/Math.PI}za.radiansToDegrees=v6e;function BDt(e){var t=e%360;return t*Math.PI/180}za.degreesToRadians=BDt;function NDt(e,t,r){if(t===void 0&&(t="kilometers"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return h6e(xY(e,t),r)}za.convertLength=NDt;function UDt(e,t,r){if(t===void 0&&(t="meters"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=za.areaFactors[t];if(!i)throw new Error("invalid original units");var n=za.areaFactors[r];if(!n)throw new Error("invalid final units");return e/i*n}za.convertArea=UDt;function d6e(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)&&!/^\s*$/.test(e)}za.isNumber=d6e;function VDt(e){return!!e&&e.constructor===Object}za.isObject=VDt;function HDt(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(t){if(!d6e(t))throw new Error("bbox must only contain numbers")})}za.validateBBox=HDt;function GDt(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}za.validateId=GDt;function YDt(){throw new Error("method has been renamed to `radiansToDegrees`")}za.radians2degrees=YDt;function WDt(){throw new Error("method has been renamed to `degreesToRadians`")}za.degrees2radians=WDt;function XDt(){throw new Error("method has been renamed to `lengthToDegrees`")}za.distanceToDegrees=XDt;function ZDt(){throw new Error("method has been renamed to `lengthToRadians`")}za.distanceToRadians=ZDt;function jDt(){throw new Error("method has been renamed to `radiansToLength`")}za.radiansToDistance=jDt;function KDt(){throw new Error("method has been renamed to `bearingToAzimuth`")}za.bearingToAngle=KDt;function JDt(){throw new Error("method has been renamed to `convertLength`")}za.convertDistance=JDt});var x6e=ie(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});var tv=_Y();function WE(e,t,r){if(e!==null)for(var i,n,a,o,s,l,u,f=0,c=0,h,v=e.type,d=v==="FeatureCollection",x=v==="Feature",b=d?e.features.length:1,p=0;p<b;p++){u=d?e.features[p].geometry:x?e.geometry:e,h=u?u.type==="GeometryCollection":!1,s=h?u.geometries.length:1;for(var w=0;w<s;w++){var A=0,T=0;if(o=h?u.geometries[w]:u,o!==null){l=o.coordinates;var k=o.type;switch(f=r&&(k==="Polygon"||k==="MultiPolygon")?1:0,k){case null:break;case"Point":if(t(l,c,p,A,T)===!1)return!1;c++,A++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(t(l[i],c,p,A,T)===!1)return!1;c++,k==="MultiPoint"&&A++}k==="LineString"&&A++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(n=0;n<l[i].length-f;n++){if(t(l[i][n],c,p,A,T)===!1)return!1;c++}k==="MultiLineString"&&A++,k==="Polygon"&&T++}k==="Polygon"&&A++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(T=0,n=0;n<l[i].length;n++){for(a=0;a<l[i][n].length-f;a++){if(t(l[i][n][a],c,p,A,T)===!1)return!1;c++}T++}A++}break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(WE(o.geometries[i],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function QDt(e,t,r,i){var n=r;return WE(e,function(a,o,s,l,u){o===0&&r===void 0?n=a:n=t(n,a,o,s,l,u)},i),n}function p6e(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&t(e.features[r].properties,r)!==!1;r++);break;case"Feature":t(e.properties,0);break}}function $Dt(e,t,r){var i=r;return p6e(e,function(n,a){a===0&&r===void 0?i=n:i=t(i,n,a)}),i}function g6e(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function eIt(e,t,r){var i=r;return g6e(e,function(n,a){a===0&&r===void 0?i=n:i=t(i,n,a)}),i}function tIt(e){var t=[];return WE(e,function(r){t.push(r)}),t}function bY(e,t){var r,i,n,a,o,s,l,u,f,c,h=0,v=e.type==="FeatureCollection",d=e.type==="Feature",x=v?e.features.length:1;for(r=0;r<x;r++){for(s=v?e.features[r].geometry:d?e.geometry:e,u=v?e.features[r].properties:d?e.properties:{},f=v?e.features[r].bbox:d?e.bbox:void 0,c=v?e.features[r].id:d?e.id:void 0,l=s?s.type==="GeometryCollection":!1,o=l?s.geometries.length:1,n=0;n<o;n++){if(a=l?s.geometries[n]:s,a===null){if(t(null,h,u,f,c)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(a,h,u,f,c)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<a.geometries.length;i++)if(t(a.geometries[i],h,u,f,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}h++}}function rIt(e,t,r){var i=r;return bY(e,function(n,a,o,s,l){a===0&&r===void 0?i=n:i=t(i,n,a,o,s,l)}),i}function MD(e,t){bY(e,function(r,i,n,a,o){var s=r===null?null:r.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return t(tv.feature(r,n,{bbox:a,id:o}),i,0)===!1?!1:void 0}var l;switch(s){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<r.coordinates.length;u++){var f=r.coordinates[u],c={type:l,coordinates:f};if(t(tv.feature(c,n),i,u)===!1)return!1}})}function nIt(e,t,r){var i=r;return MD(e,function(n,a,o){a===0&&o===0&&r===void 0?i=n:i=t(i,n,a,o)}),i}function y6e(e,t){MD(e,function(r,i,n){var a=0;if(r.geometry){var o=r.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var s,l=0,u=0,f=0;if(WE(r,function(c,h,v,d,x){if(s===void 0||i>l||d>u||x>f){s=c,l=i,u=d,f=x,a=0;return}var b=tv.lineString([s,c],r.properties);if(t(b,i,n,x,a)===!1)return!1;a++,s=c})===!1)return!1}}})}function iIt(e,t,r){var i=r,n=!1;return y6e(e,function(a,o,s,l,u){n===!1&&r===void 0?i=a:i=t(i,a,o,s,l,u),n=!0}),i}function m6e(e,t){if(!e)throw new Error("geojson is required");MD(e,function(r,i,n){if(r.geometry!==null){var a=r.geometry.type,o=r.geometry.coordinates;switch(a){case"LineString":if(t(r,i,n,0,0)===!1)return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(t(tv.lineString(o[s],r.properties),i,n,s)===!1)return!1;break}}})}function aIt(e,t,r){var i=r;return m6e(e,function(n,a,o,s){a===0&&r===void 0?i=n:i=t(i,n,a,o,s)}),i}function oIt(e,t){if(t=t||{},!tv.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,n=t.geometryIndex||0,a=t.segmentIndex||0,o=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),o=o||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":o=o||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var l=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=l.length+a-1),tv.lineString([l[a],l[a+1]],o,t);case"Polygon":return n<0&&(n=l.length+n),a<0&&(a=l[n].length+a-1),tv.lineString([l[n][a],l[n][a+1]],o,t);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a-1),tv.lineString([l[i][a],l[i][a+1]],o,t);case"MultiPolygon":return i<0&&(i=l.length+i),n<0&&(n=l[i].length+n),a<0&&(a=l[i][n].length-a-1),tv.lineString([l[i][n][a],l[i][n][a+1]],o,t)}throw new Error("geojson is invalid")}function sIt(e,t){if(t=t||{},!tv.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,n=t.geometryIndex||0,a=t.coordIndex||0,o=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),o=o||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":o=o||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var l=s.coordinates;switch(s.type){case"Point":return tv.point(l,o,t);case"MultiPoint":return i<0&&(i=l.length+i),tv.point(l[i],o,t);case"LineString":return a<0&&(a=l.length+a),tv.point(l[a],o,t);case"Polygon":return n<0&&(n=l.length+n),a<0&&(a=l[n].length+a),tv.point(l[n][a],o,t);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),tv.point(l[i][a],o,t);case"MultiPolygon":return i<0&&(i=l.length+i),n<0&&(n=l[i].length+n),a<0&&(a=l[i][n].length-a),tv.point(l[i][n][a],o,t)}throw new Error("geojson is invalid")}bc.coordEach=WE;bc.coordReduce=QDt;bc.propEach=p6e;bc.propReduce=$Dt;bc.featureEach=g6e;bc.featureReduce=eIt;bc.coordAll=tIt;bc.geomEach=bY;bc.geomReduce=rIt;bc.flattenEach=MD;bc.flattenReduce=nIt;bc.segmentEach=y6e;bc.segmentReduce=iIt;bc.lineEach=m6e;bc.lineReduce=aIt;bc.findSegment=oIt;bc.findPoint=sIt});var _6e=ie(wY=>{"use strict";Object.defineProperty(wY,"__esModule",{value:!0});var lIt=x6e(),uIt=_Y();function fIt(e,t){t===void 0&&(t={});var r=0,i=0,n=0;return lIt.coordEach(e,function(a){r+=a[0],i+=a[1],n++}),uIt.point([r/n,i/n],t.properties)}wY.default=fIt});var S6e=ie(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.earthRadius=63710088e-1;ao.factors={centimeters:ao.earthRadius*100,centimetres:ao.earthRadius*100,degrees:ao.earthRadius/111325,feet:ao.earthRadius*3.28084,inches:ao.earthRadius*39.37,kilometers:ao.earthRadius/1e3,kilometres:ao.earthRadius/1e3,meters:ao.earthRadius,metres:ao.earthRadius,miles:ao.earthRadius/1609.344,millimeters:ao.earthRadius*1e3,millimetres:ao.earthRadius*1e3,nauticalmiles:ao.earthRadius/1852,radians:1,yards:ao.earthRadius*1.0936};ao.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ao.earthRadius,yards:1.0936133};ao.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function d1(e,t,r){r===void 0&&(r={});var i={type:"Feature"};return(r.id===0||r.id)&&(i.id=r.id),r.bbox&&(i.bbox=r.bbox),i.properties=t||{},i.geometry=e,i}ao.feature=d1;function cIt(e,t,r){switch(r===void 0&&(r={}),e){case"Point":return TY(t).geometry;case"LineString":return MY(t).geometry;case"Polygon":return AY(t).geometry;case"MultiPoint":return w6e(t).geometry;case"MultiLineString":return b6e(t).geometry;case"MultiPolygon":return T6e(t).geometry;default:throw new Error(e+" is invalid")}}ao.geometry=cIt;function TY(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!SD(e[0])||!SD(e[1]))throw new Error("coordinates must contain numbers");var i={type:"Point",coordinates:e};return d1(i,t,r)}ao.point=TY;function hIt(e,t,r){return r===void 0&&(r={}),ED(e.map(function(i){return TY(i,t)}),r)}ao.points=hIt;function AY(e,t,r){r===void 0&&(r={});for(var i=0,n=e;i<n.length;i++){var a=n[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<a[a.length-1].length;o++)if(a[a.length-1][o]!==a[0][o])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:e};return d1(s,t,r)}ao.polygon=AY;function vIt(e,t,r){return r===void 0&&(r={}),ED(e.map(function(i){return AY(i,t)}),r)}ao.polygons=vIt;function MY(e,t,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:e};return d1(i,t,r)}ao.lineString=MY;function dIt(e,t,r){return r===void 0&&(r={}),ED(e.map(function(i){return MY(i,t)}),r)}ao.lineStrings=dIt;function ED(e,t){t===void 0&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}ao.featureCollection=ED;function b6e(e,t,r){r===void 0&&(r={});var i={type:"MultiLineString",coordinates:e};return d1(i,t,r)}ao.multiLineString=b6e;function w6e(e,t,r){r===void 0&&(r={});var i={type:"MultiPoint",coordinates:e};return d1(i,t,r)}ao.multiPoint=w6e;function T6e(e,t,r){r===void 0&&(r={});var i={type:"MultiPolygon",coordinates:e};return d1(i,t,r)}ao.multiPolygon=T6e;function pIt(e,t,r){r===void 0&&(r={});var i={type:"GeometryCollection",geometries:e};return d1(i,t,r)}ao.geometryCollection=pIt;function gIt(e,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r}ao.round=gIt;function A6e(e,t){t===void 0&&(t="kilometers");var r=ao.factors[t];if(!r)throw new Error(t+" units is invalid");return e*r}ao.radiansToLength=A6e;function SY(e,t){t===void 0&&(t="kilometers");var r=ao.factors[t];if(!r)throw new Error(t+" units is invalid");return e/r}ao.lengthToRadians=SY;function yIt(e,t){return M6e(SY(e,t))}ao.lengthToDegrees=yIt;function mIt(e){var t=e%360;return t<0&&(t+=360),t}ao.bearingToAzimuth=mIt;function M6e(e){var t=e%(2*Math.PI);return t*180/Math.PI}ao.radiansToDegrees=M6e;function xIt(e){var t=e%360;return t*Math.PI/180}ao.degreesToRadians=xIt;function _It(e,t,r){if(t===void 0&&(t="kilometers"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return A6e(SY(e,t),r)}ao.convertLength=_It;function bIt(e,t,r){if(t===void 0&&(t="meters"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=ao.areaFactors[t];if(!i)throw new Error("invalid original units");var n=ao.areaFactors[r];if(!n)throw new Error("invalid final units");return e/i*n}ao.convertArea=bIt;function SD(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}ao.isNumber=SD;function wIt(e){return!!e&&e.constructor===Object}ao.isObject=wIt;function TIt(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(t){if(!SD(t))throw new Error("bbox must only contain numbers")})}ao.validateBBox=TIt;function AIt(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}ao.validateId=AIt});var P6e=ie(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});var rv=S6e();function XE(e,t,r){if(e!==null)for(var i,n,a,o,s,l,u,f=0,c=0,h,v=e.type,d=v==="FeatureCollection",x=v==="Feature",b=d?e.features.length:1,p=0;p<b;p++){u=d?e.features[p].geometry:x?e.geometry:e,h=u?u.type==="GeometryCollection":!1,s=h?u.geometries.length:1;for(var w=0;w<s;w++){var A=0,T=0;if(o=h?u.geometries[w]:u,o!==null){l=o.coordinates;var k=o.type;switch(f=r&&(k==="Polygon"||k==="MultiPolygon")?1:0,k){case null:break;case"Point":if(t(l,c,p,A,T)===!1)return!1;c++,A++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(t(l[i],c,p,A,T)===!1)return!1;c++,k==="MultiPoint"&&A++}k==="LineString"&&A++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(n=0;n<l[i].length-f;n++){if(t(l[i][n],c,p,A,T)===!1)return!1;c++}k==="MultiLineString"&&A++,k==="Polygon"&&T++}k==="Polygon"&&A++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(T=0,n=0;n<l[i].length;n++){for(a=0;a<l[i][n].length-f;a++){if(t(l[i][n][a],c,p,A,T)===!1)return!1;c++}T++}A++}break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(XE(o.geometries[i],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function MIt(e,t,r,i){var n=r;return XE(e,function(a,o,s,l,u){o===0&&r===void 0?n=a:n=t(n,a,o,s,l,u)},i),n}function E6e(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&t(e.features[r].properties,r)!==!1;r++);break;case"Feature":t(e.properties,0);break}}function SIt(e,t,r){var i=r;return E6e(e,function(n,a){a===0&&r===void 0?i=n:i=t(i,n,a)}),i}function k6e(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function EIt(e,t,r){var i=r;return k6e(e,function(n,a){a===0&&r===void 0?i=n:i=t(i,n,a)}),i}function kIt(e){var t=[];return XE(e,function(r){t.push(r)}),t}function EY(e,t){var r,i,n,a,o,s,l,u,f,c,h=0,v=e.type==="FeatureCollection",d=e.type==="Feature",x=v?e.features.length:1;for(r=0;r<x;r++){for(s=v?e.features[r].geometry:d?e.geometry:e,u=v?e.features[r].properties:d?e.properties:{},f=v?e.features[r].bbox:d?e.bbox:void 0,c=v?e.features[r].id:d?e.id:void 0,l=s?s.type==="GeometryCollection":!1,o=l?s.geometries.length:1,n=0;n<o;n++){if(a=l?s.geometries[n]:s,a===null){if(t(null,h,u,f,c)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(a,h,u,f,c)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<a.geometries.length;i++)if(t(a.geometries[i],h,u,f,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}h++}}function CIt(e,t,r){var i=r;return EY(e,function(n,a,o,s,l){a===0&&r===void 0?i=n:i=t(i,n,a,o,s,l)}),i}function kD(e,t){EY(e,function(r,i,n,a,o){var s=r===null?null:r.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return t(rv.feature(r,n,{bbox:a,id:o}),i,0)===!1?!1:void 0}var l;switch(s){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<r.coordinates.length;u++){var f=r.coordinates[u],c={type:l,coordinates:f};if(t(rv.feature(c,n),i,u)===!1)return!1}})}function LIt(e,t,r){var i=r;return kD(e,function(n,a,o){a===0&&o===0&&r===void 0?i=n:i=t(i,n,a,o)}),i}function C6e(e,t){kD(e,function(r,i,n){var a=0;if(r.geometry){var o=r.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var s,l=0,u=0,f=0;if(XE(r,function(c,h,v,d,x){if(s===void 0||i>l||d>u||x>f){s=c,l=i,u=d,f=x,a=0;return}var b=rv.lineString([s,c],r.properties);if(t(b,i,n,x,a)===!1)return!1;a++,s=c})===!1)return!1}}})}function PIt(e,t,r){var i=r,n=!1;return C6e(e,function(a,o,s,l,u){n===!1&&r===void 0?i=a:i=t(i,a,o,s,l,u),n=!0}),i}function L6e(e,t){if(!e)throw new Error("geojson is required");kD(e,function(r,i,n){if(r.geometry!==null){var a=r.geometry.type,o=r.geometry.coordinates;switch(a){case"LineString":if(t(r,i,n,0,0)===!1)return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(t(rv.lineString(o[s],r.properties),i,n,s)===!1)return!1;break}}})}function RIt(e,t,r){var i=r;return L6e(e,function(n,a,o,s){a===0&&r===void 0?i=n:i=t(i,n,a,o,s)}),i}function DIt(e,t){if(t=t||{},!rv.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,n=t.geometryIndex||0,a=t.segmentIndex||0,o=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),o=o||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":o=o||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var l=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=l.length+a-1),rv.lineString([l[a],l[a+1]],o,t);case"Polygon":return n<0&&(n=l.length+n),a<0&&(a=l[n].length+a-1),rv.lineString([l[n][a],l[n][a+1]],o,t);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a-1),rv.lineString([l[i][a],l[i][a+1]],o,t);case"MultiPolygon":return i<0&&(i=l.length+i),n<0&&(n=l[i].length+n),a<0&&(a=l[i][n].length-a-1),rv.lineString([l[i][n][a],l[i][n][a+1]],o,t)}throw new Error("geojson is invalid")}function IIt(e,t){if(t=t||{},!rv.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,n=t.geometryIndex||0,a=t.coordIndex||0,o=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),o=o||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":o=o||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var l=s.coordinates;switch(s.type){case"Point":return rv.point(l,o,t);case"MultiPoint":return i<0&&(i=l.length+i),rv.point(l[i],o,t);case"LineString":return a<0&&(a=l.length+a),rv.point(l[a],o,t);case"Polygon":return n<0&&(n=l.length+n),a<0&&(a=l[n].length+a),rv.point(l[n][a],o,t);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),rv.point(l[i][a],o,t);case"MultiPolygon":return i<0&&(i=l.length+i),n<0&&(n=l[i].length+n),a<0&&(a=l[i][n].length-a),rv.point(l[i][n][a],o,t)}throw new Error("geojson is invalid")}wc.coordEach=XE;wc.coordReduce=MIt;wc.propEach=E6e;wc.propReduce=SIt;wc.featureEach=k6e;wc.featureReduce=EIt;wc.coordAll=kIt;wc.geomEach=EY;wc.geomReduce=CIt;wc.flattenEach=kD;wc.flattenReduce=LIt;wc.segmentEach=C6e;wc.segmentReduce=PIt;wc.lineEach=L6e;wc.lineReduce=RIt;wc.findSegment=DIt;wc.findPoint=IIt});var R6e=ie(CY=>{"use strict";Object.defineProperty(CY,"__esModule",{value:!0});var FIt=P6e();function kY(e){var t=[1/0,1/0,-1/0,-1/0];return FIt.coordEach(e,function(r){t[0]>r[0]&&(t[0]=r[0]),t[1]>r[1]&&(t[1]=r[1]),t[2]<r[0]&&(t[2]=r[0]),t[3]<r[1]&&(t[3]=r[1])}),t}kY.default=kY;CY.default=kY});var N3=ie((Odr,z6e)=>{"use strict";var qIt=Mi(),F6e=XPe(),zIt=l6e(),OIt=_6e(),BIt=R6e(),D6e=mA(),B3=Qy(),NIt=Rg(),UIt=sA(),CD=aM(),I6e=Object.keys(F6e),VIt={"ISO-3":D6e,"USA-states":D6e,"country names":HIt};function HIt(e){for(var t=0;t<I6e.length;t++){var r=I6e[t],i=new RegExp(F6e[r]);if(i.test(e.trim().toLowerCase()))return r}return B3.log("Unrecognized country name: "+e+"."),!1}function GIt(e,t,r){if(!t||typeof t!="string")return!1;var i=VIt[e](t),n,a,o;if(i){if(e==="USA-states")for(n=[],o=0;o<r.length;o++)a=r[o],a.properties&&a.properties.gu&&a.properties.gu==="USA"&&n.push(a);else n=r;for(o=0;o<n.length;o++)if(a=n[o],a.id===i)return a;B3.log(["Location with id",i,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function YIt(e){var t=e.geometry,r=t.coordinates,i=e.id,n=[],a,o,s,l;function u(f){for(var c=0;c<f.length-1;c++)if(f[c][0]>0&&f[c+1][0]<0)return c;return null}switch(i==="RUS"||i==="FJI"?a=function(f){var c;if(u(f)===null)c=f;else for(c=new Array(f.length),l=0;l<f.length;l++)c[l]=[f[l][0]<0?f[l][0]+360:f[l][0],f[l][1]];n.push(CD.tester(c))}:i==="ATA"?a=function(f){var c=u(f);if(c===null)return n.push(CD.tester(f));var h=new Array(f.length+1),v=0;for(l=0;l<f.length;l++)l>c?h[v++]=[f[l][0]+360,f[l][1]]:l===c?(h[v++]=f[l],h[v++]=[f[l][0],-90]):h[v++]=f[l];var d=CD.tester(h);d.pts.pop(),n.push(d)}:a=function(f){n.push(CD.tester(f))},t.type){case"MultiPolygon":for(o=0;o<r.length;o++)for(s=0;s<r[o].length;s++)a(r[o][s]);break;case"Polygon":for(o=0;o<r.length;o++)a(r[o]);break}return n}function q6e(e){var t=e.geojson,r=window.PlotlyGeoAssets||{},i=typeof t=="string"?r[t]:t;return NIt(i)?i:(B3.error("Oops ... something went wrong when fetching "+t),!1)}function WIt(e){var t=e[0].trace,r=q6e(t);if(!r)return!1;var i={},n=[],a;for(a=0;a<t._length;a++){var o=e[a];(o.loc||o.loc===0)&&(i[o.loc]=o)}function s(f){var c=UIt(f,t.featureidkey||"id").get(),h=i[c];if(h){var v=f.geometry;if(v.type==="Polygon"||v.type==="MultiPolygon"){var d={type:"Feature",id:c,geometry:v,properties:{}};d.properties.ct=XIt(d),h.fIn=f,h.fOut=d,n.push(d)}else B3.log(["Location",h.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete i[c]}switch(r.type){case"FeatureCollection":var l=r.features;for(a=0;a<l.length;a++)s(l[a]);break;case"Feature":s(r);break;default:return B3.warn(["Invalid GeoJSON type",(r.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var u in i)B3.log(["Location *"+u+"*","does not have a matching feature with id-key","*"+t.featureidkey+"*."].join(" "));return n}function XIt(e){var t=e.geometry,r;if(t.type==="MultiPolygon")for(var i=t.coordinates,n=0,a=0;a<i.length;a++){var o={type:"Polygon",coordinates:i[a]},s=zIt.default(o);s>n&&(n=s,r=o)}else r=t;return OIt.default(r).geometry.coordinates}function ZIt(e){var t=window.PlotlyGeoAssets||{},r=[];function i(l){return new Promise(function(u,f){qIt.json(l,function(c,h){if(c){delete t[l];var v=c.status===404?'GeoJSON at URL "'+l+'" does not exist.':"Unexpected error while fetching from "+l;return f(new Error(v))}return t[l]=h,u(h)})})}function n(l){return new Promise(function(u,f){var c=0,h=setInterval(function(){if(t[l]&&t[l]!=="pending")return clearInterval(h),u(t[l]);if(c>100)return clearInterval(h),f("Unexpected error while fetching from "+l);c++},50)})}for(var a=0;a<e.length;a++){var o=e[a][0].trace,s=o.geojson;typeof s=="string"&&(t[s]?t[s]==="pending"&&r.push(n(s)):(t[s]="pending",r.push(i(s))))}return r}function jIt(e){return BIt.default(e)}z6e.exports={locationToFeature:GIt,feature2polygons:YIt,getTraceGeojson:q6e,extractTraceFeature:WIt,fetchTraceGeoData:ZIt,computeBbox:jIt}});var LY=ie((Bdr,N6e)=>{"use strict";var KIt=Mi(),JIt=oa(),O6e=_i(),B6e=Sv(),QIt=B6e.stylePoints,$It=B6e.styleText;N6e.exports=function(t,r){r&&eFt(t,r)};function eFt(e,t){var r=t[0].trace,i=t[0].node3;i.style("opacity",t[0].trace.opacity),QIt(i,r,e),$It(i,r,e),i.selectAll("path.js-line").style("fill","none").each(function(n){var a=KIt.select(this),o=n.trace,s=o.line||{};a.call(O6e.stroke,s.color).call(JIt.dashLine,s.dash||"",s.width||0),o.fill!=="none"&&a.call(O6e.fill,o.fillcolor)})}});var IY=ie((Ndr,H6e)=>{"use strict";var U6e=Mi(),PD=Zt(),tFt=_D().getTopojsonFeatures,PY=GE(),LD=N3(),V6e=Ld().findExtremes,DY=eo().BADNUM,rFt=wp().calcMarkerSize,RY=Ks(),nFt=LY();function iFt(e,t,r){var i=t.layers.frontplot.select(".scatterlayer"),n=PD.makeTraceGroups(i,r,"trace scattergeo");function a(o,s){o.lonlat[0]===DY&&U6e.select(s).remove()}n.selectAll("*").remove(),n.each(function(o){var s=U6e.select(this),l=o[0].trace;if(RY.hasLines(l)||l.fill!=="none"){var u=PY.calcTraceToLineCoords(o),f=l.fill!=="none"?PY.makePolygon(u):PY.makeLine(u);s.selectAll("path.js-line").data([{geojson:f,trace:l}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}RY.hasMarkers(l)&&s.selectAll("path.point").data(PD.identity).enter().append("path").classed("point",!0).each(function(c){a(c,this)}),RY.hasText(l)&&s.selectAll("g").data(PD.identity).enter().append("g").append("text").each(function(c){a(c,this)}),nFt(e,o)})}function aFt(e,t){var r=e[0].trace,i=t[r.geo],n=i._subplot,a=r._length,o,s;if(PD.isArrayOrTypedArray(r.locations)){var l=r.locationmode,u=l==="geojson-id"?LD.extractTraceFeature(e):tFt(r,n.topojson);for(o=0;o<a;o++){s=e[o];var f=l==="geojson-id"?s.fOut:LD.locationToFeature(l,s.loc,u);s.lonlat=f?f.properties.ct:[DY,DY]}}var c={padded:!0},h,v;if(i.fitbounds==="geojson"&&r.locationmode==="geojson-id"){var d=LD.computeBbox(LD.getTraceGeojson(r));h=[d[0],d[2]],v=[d[1],d[3]]}else{for(h=new Array(a),v=new Array(a),o=0;o<a;o++)s=e[o],h[o]=s.lonlat[0],v[o]=s.lonlat[1];c.ppad=rFt(r,a)}r._extremes.lon=V6e(i.lonaxis._ax,h,c),r._extremes.lat=V6e(i.lataxis._ax,v,c)}H6e.exports={calcGeoJSON:aFt,plot:iFt}});var Y6e=ie((Udr,G6e)=>{"use strict";var oFt=Ol(),sFt=eo().BADNUM,lFt=J2(),uFt=Zt().fillText,fFt=O3();G6e.exports=function(t,r,i){var n=t.cd,a=n[0].trace,o=t.xa,s=t.ya,l=t.subplot,u=l.projection.isLonLatOverEdges,f=l.project;function c(w){var A=w.lonlat;if(A[0]===sFt||u(A))return 1/0;var T=f(A),k=f([r,i]),_=Math.abs(T[0]-k[0]),E=Math.abs(T[1]-k[1]),S=Math.max(3,w.mrc||0);return Math.max(Math.sqrt(_*_+E*E)-S,1-3/S)}if(oFt.getClosest(n,c,t),t.index!==!1){var h=n[t.index],v=h.lonlat,d=[o.c2p(v),s.c2p(v)],x=h.mrc||1;t.x0=d[0]-x,t.x1=d[0]+x,t.y0=d[1]-x,t.y1=d[1]+x,t.loc=h.loc,t.lon=v[0],t.lat=v[1];var b={};b[a.geo]={_subplot:l};var p=a._module.formatLabels(h,a,b);return t.lonLabel=p.lonLabel,t.latLabel=p.latLabel,t.color=lFt(a,h),t.extraText=cFt(a,h,t,n[0].t.labels),t.hovertemplate=a.hovertemplate,[t]}};function cFt(e,t,r,i){if(e.hovertemplate)return;var n=t.hi||e.hoverinfo,a=n==="all"?fFt.hoverinfo.flags:n.split("+"),o=a.indexOf("location")!==-1&&Array.isArray(e.locations),s=a.indexOf("lon")!==-1,l=a.indexOf("lat")!==-1,u=a.indexOf("text")!==-1,f=[];function c(h){return h+"\xB0"}return o?f.push(t.loc):s&&l?f.push("("+c(r.latLabel)+", "+c(r.lonLabel)+")"):s?f.push(i.lon+c(r.lonLabel)):l&&f.push(i.lat+c(r.latLabel)),u&&uFt(t,e,f),f.join("<br>")}});var X6e=ie((Vdr,W6e)=>{"use strict";W6e.exports=function(t,r,i,n,a){t.lon=r.lon,t.lat=r.lat,t.location=r.loc?r.loc:null;var o=n[a];return o.fIn&&o.fIn.properties&&(t.properties=o.fIn.properties),t}});var K6e=ie((Hdr,j6e)=>{"use strict";var Z6e=Ks(),hFt=eo().BADNUM;j6e.exports=function(t,r){var i=t.cd,n=t.xaxis,a=t.yaxis,o=[],s=i[0].trace,l,u,f,c,h,v=!Z6e.hasMarkers(s)&&!Z6e.hasText(s);if(v)return[];if(r===!1)for(h=0;h<i.length;h++)i[h].selected=0;else for(h=0;h<i.length;h++)l=i[h],u=l.lonlat,u[0]!==hFt&&(f=n.c2p(u),c=a.c2p(u),r.contains([f,c],null,h,t)?(o.push({pointNumber:h,lon:u[0],lat:u[1]}),l.selected=1):l.selected=0);return o}});var ZE=ie((RD,J6e)=>{(function(e,t){typeof RD=="object"&&typeof J6e!="undefined"?t(RD):typeof define=="function"&&define.amd?define(["exports"],t):t(e.d3=e.d3||{})})(RD,function(e){"use strict";function t(ce,le){return ce<le?-1:ce>le?1:ce>=le?0:NaN}function r(ce){return ce.length===1&&(ce=i(ce)),{left:function(le,me,he,te){for(he==null&&(he=0),te==null&&(te=le.length);he<te;){var ge=he+te>>>1;ce(le[ge],me)<0?he=ge+1:te=ge}return he},right:function(le,me,he,te){for(he==null&&(he=0),te==null&&(te=le.length);he<te;){var ge=he+te>>>1;ce(le[ge],me)>0?te=ge:he=ge+1}return he}}}function i(ce){return function(le,me){return t(ce(le),me)}}var n=r(t),a=n.right,o=n.left;function s(ce,le){le==null&&(le=l);for(var me=0,he=ce.length-1,te=ce[0],ge=new Array(he<0?0:he);me<he;)ge[me]=le(te,te=ce[++me]);return ge}function l(ce,le){return[ce,le]}function u(ce,le,me){var he=ce.length,te=le.length,ge=new Array(he*te),ae,_e,Ce,qe;for(me==null&&(me=l),ae=Ce=0;ae<he;++ae)for(qe=ce[ae],_e=0;_e<te;++_e,++Ce)ge[Ce]=me(qe,le[_e]);return ge}function f(ce,le){return le<ce?-1:le>ce?1:le>=ce?0:NaN}function c(ce){return ce===null?NaN:+ce}function h(ce,le){var me=ce.length,he=0,te=-1,ge=0,ae,_e,Ce=0;if(le==null)for(;++te<me;)isNaN(ae=c(ce[te]))||(_e=ae-ge,ge+=_e/++he,Ce+=_e*(ae-ge));else for(;++te<me;)isNaN(ae=c(le(ce[te],te,ce)))||(_e=ae-ge,ge+=_e/++he,Ce+=_e*(ae-ge));if(he>1)return Ce/(he-1)}function v(ce,le){var me=h(ce,le);return me&&Math.sqrt(me)}function d(ce,le){var me=ce.length,he=-1,te,ge,ae;if(le==null){for(;++he<me;)if((te=ce[he])!=null&&te>=te)for(ge=ae=te;++he<me;)(te=ce[he])!=null&&(ge>te&&(ge=te),ae<te&&(ae=te))}else for(;++he<me;)if((te=le(ce[he],he,ce))!=null&&te>=te)for(ge=ae=te;++he<me;)(te=le(ce[he],he,ce))!=null&&(ge>te&&(ge=te),ae<te&&(ae=te));return[ge,ae]}var x=Array.prototype,b=x.slice,p=x.map;function w(ce){return function(){return ce}}function A(ce){return ce}function T(ce,le,me){ce=+ce,le=+le,me=(te=arguments.length)<2?(le=ce,ce=0,1):te<3?1:+me;for(var he=-1,te=Math.max(0,Math.ceil((le-ce)/me))|0,ge=new Array(te);++he<te;)ge[he]=ce+he*me;return ge}var k=Math.sqrt(50),_=Math.sqrt(10),E=Math.sqrt(2);function S(ce,le,me){var he,te=-1,ge,ae,_e;if(le=+le,ce=+ce,me=+me,ce===le&&me>0)return[ce];if((he=le<ce)&&(ge=ce,ce=le,le=ge),(_e=g(ce,le,me))===0||!isFinite(_e))return[];if(_e>0)for(ce=Math.ceil(ce/_e),le=Math.floor(le/_e),ae=new Array(ge=Math.ceil(le-ce+1));++te<ge;)ae[te]=(ce+te)*_e;else for(ce=Math.floor(ce*_e),le=Math.ceil(le*_e),ae=new Array(ge=Math.ceil(ce-le+1));++te<ge;)ae[te]=(ce-te)/_e;return he&&ae.reverse(),ae}function g(ce,le,me){var he=(le-ce)/Math.max(0,me),te=Math.floor(Math.log(he)/Math.LN10),ge=he/Math.pow(10,te);return te>=0?(ge>=k?10:ge>=_?5:ge>=E?2:1)*Math.pow(10,te):-Math.pow(10,-te)/(ge>=k?10:ge>=_?5:ge>=E?2:1)}function C(ce,le,me){var he=Math.abs(le-ce)/Math.max(0,me),te=Math.pow(10,Math.floor(Math.log(he)/Math.LN10)),ge=he/te;return ge>=k?te*=10:ge>=_?te*=5:ge>=E&&(te*=2),le<ce?-te:te}function M(ce){return Math.ceil(Math.log(ce.length)/Math.LN2)+1}function P(){var ce=A,le=d,me=M;function he(te){var ge,ae=te.length,_e,Ce=new Array(ae);for(ge=0;ge<ae;++ge)Ce[ge]=ce(te[ge],ge,te);var qe=le(Ce),rt=qe[0],Re=qe[1],Ie=me(Ce,rt,Re);Array.isArray(Ie)||(Ie=C(rt,Re,Ie),Ie=T(Math.ceil(rt/Ie)*Ie,Re,Ie));for(var ot=Ie.length;Ie[0]<=rt;)Ie.shift(),--ot;for(;Ie[ot-1]>Re;)Ie.pop(),--ot;var lt=new Array(ot+1),ht;for(ge=0;ge<=ot;++ge)ht=lt[ge]=[],ht.x0=ge>0?Ie[ge-1]:rt,ht.x1=ge<ot?Ie[ge]:Re;for(ge=0;ge<ae;++ge)_e=Ce[ge],rt<=_e&&_e<=Re&&lt[a(Ie,_e,0,ot)].push(te[ge]);return lt}return he.value=function(te){return arguments.length?(ce=typeof te=="function"?te:w(te),he):ce},he.domain=function(te){return arguments.length?(le=typeof te=="function"?te:w([te[0],te[1]]),he):le},he.thresholds=function(te){return arguments.length?(me=typeof te=="function"?te:Array.isArray(te)?w(b.call(te)):w(te),he):me},he}function D(ce,le,me){if(me==null&&(me=c),!!(he=ce.length)){if((le=+le)<=0||he<2)return+me(ce[0],0,ce);if(le>=1)return+me(ce[he-1],he-1,ce);var he,te=(he-1)*le,ge=Math.floor(te),ae=+me(ce[ge],ge,ce),_e=+me(ce[ge+1],ge+1,ce);return ae+(_e-ae)*(te-ge)}}function q(ce,le,me){return ce=p.call(ce,c).sort(t),Math.ceil((me-le)/(2*(D(ce,.75)-D(ce,.25))*Math.pow(ce.length,-1/3)))}function O(ce,le,me){return Math.ceil((me-le)/(3.5*v(ce)*Math.pow(ce.length,-1/3)))}function U(ce,le){var me=ce.length,he=-1,te,ge;if(le==null){for(;++he<me;)if((te=ce[he])!=null&&te>=te)for(ge=te;++he<me;)(te=ce[he])!=null&&te>ge&&(ge=te)}else for(;++he<me;)if((te=le(ce[he],he,ce))!=null&&te>=te)for(ge=te;++he<me;)(te=le(ce[he],he,ce))!=null&&te>ge&&(ge=te);return ge}function B(ce,le){var me=ce.length,he=me,te=-1,ge,ae=0;if(le==null)for(;++te<me;)isNaN(ge=c(ce[te]))?--he:ae+=ge;else for(;++te<me;)isNaN(ge=c(le(ce[te],te,ce)))?--he:ae+=ge;if(he)return ae/he}function F(ce,le){var me=ce.length,he=-1,te,ge=[];if(le==null)for(;++he<me;)isNaN(te=c(ce[he]))||ge.push(te);else for(;++he<me;)isNaN(te=c(le(ce[he],he,ce)))||ge.push(te);return D(ge.sort(t),.5)}function N(ce){for(var le=ce.length,me,he=-1,te=0,ge,ae;++he<le;)te+=ce[he].length;for(ge=new Array(te);--le>=0;)for(ae=ce[le],me=ae.length;--me>=0;)ge[--te]=ae[me];return ge}function X(ce,le){var me=ce.length,he=-1,te,ge;if(le==null){for(;++he<me;)if((te=ce[he])!=null&&te>=te)for(ge=te;++he<me;)(te=ce[he])!=null&&ge>te&&(ge=te)}else for(;++he<me;)if((te=le(ce[he],he,ce))!=null&&te>=te)for(ge=te;++he<me;)(te=le(ce[he],he,ce))!=null&&ge>te&&(ge=te);return ge}function K(ce,le){for(var me=le.length,he=new Array(me);me--;)he[me]=ce[le[me]];return he}function ne(ce,le){if(me=ce.length){var me,he=0,te=0,ge,ae=ce[te];for(le==null&&(le=t);++he<me;)(le(ge=ce[he],ae)<0||le(ae,ae)!==0)&&(ae=ge,te=he);if(le(ae,ae)===0)return te}}function fe(ce,le,me){for(var he=(me==null?ce.length:me)-(le=le==null?0:+le),te,ge;he;)ge=Math.random()*he--|0,te=ce[he+le],ce[he+le]=ce[ge+le],ce[ge+le]=te;return ce}function ue(ce,le){var me=ce.length,he=-1,te,ge=0;if(le==null)for(;++he<me;)(te=+ce[he])&&(ge+=te);else for(;++he<me;)(te=+le(ce[he],he,ce))&&(ge+=te);return ge}function ee(ce){if(!(ge=ce.length))return[];for(var le=-1,me=X(ce,Z),he=new Array(me);++le<me;)for(var te=-1,ge,ae=he[le]=new Array(ge);++te<ge;)ae[te]=ce[te][le];return he}function Z(ce){return ce.length}function oe(){return ee(arguments)}e.bisect=a,e.bisectRight=a,e.bisectLeft=o,e.ascending=t,e.bisector=r,e.cross=u,e.descending=f,e.deviation=v,e.extent=d,e.histogram=P,e.thresholdFreedmanDiaconis=q,e.thresholdScott=O,e.thresholdSturges=M,e.max=U,e.mean=B,e.median=F,e.merge=N,e.min=X,e.pairs=s,e.permute=K,e.quantile=D,e.range=T,e.scan=ne,e.shuffle=fe,e.sum=ue,e.ticks=S,e.tickIncrement=g,e.tickStep=C,e.transpose=ee,e.variance=h,e.zip=oe,Object.defineProperty(e,"__esModule",{value:!0})})});var FY=ie((DD,Q6e)=>{(function(e,t){typeof DD=="object"&&typeof Q6e!="undefined"?t(DD,ZE()):typeof define=="function"&&define.amd?define(["exports","d3-array"],t):(e=e||self,t(e.d3=e.d3||{},e.d3))})(DD,function(e,t){"use strict";function r(){return new i}function i(){this.reset()}i.prototype={constructor:i,reset:function(){this.s=this.t=0},add:function(Ue){a(n,Ue,this.t),a(this,n.s,this.s),this.s?this.t+=n.t:this.s=n.t},valueOf:function(){return this.s}};var n=new i;function a(Ue,st,Gt){var Rt=Ue.s=st+Gt,hr=Rt-st,Lr=Rt-hr;Ue.t=st-Lr+(Gt-hr)}var o=1e-6,s=1e-12,l=Math.PI,u=l/2,f=l/4,c=l*2,h=180/l,v=l/180,d=Math.abs,x=Math.atan,b=Math.atan2,p=Math.cos,w=Math.ceil,A=Math.exp,T=Math.log,k=Math.pow,_=Math.sin,E=Math.sign||function(Ue){return Ue>0?1:Ue<0?-1:0},S=Math.sqrt,g=Math.tan;function C(Ue){return Ue>1?0:Ue<-1?l:Math.acos(Ue)}function M(Ue){return Ue>1?u:Ue<-1?-u:Math.asin(Ue)}function P(Ue){return(Ue=_(Ue/2))*Ue}function D(){}function q(Ue,st){Ue&&U.hasOwnProperty(Ue.type)&&U[Ue.type](Ue,st)}var O={Feature:function(Ue,st){q(Ue.geometry,st)},FeatureCollection:function(Ue,st){for(var Gt=Ue.features,Rt=-1,hr=Gt.length;++Rt<hr;)q(Gt[Rt].geometry,st)}},U={Sphere:function(Ue,st){st.sphere()},Point:function(Ue,st){Ue=Ue.coordinates,st.point(Ue[0],Ue[1],Ue[2])},MultiPoint:function(Ue,st){for(var Gt=Ue.coordinates,Rt=-1,hr=Gt.length;++Rt<hr;)Ue=Gt[Rt],st.point(Ue[0],Ue[1],Ue[2])},LineString:function(Ue,st){B(Ue.coordinates,st,0)},MultiLineString:function(Ue,st){for(var Gt=Ue.coordinates,Rt=-1,hr=Gt.length;++Rt<hr;)B(Gt[Rt],st,0)},Polygon:function(Ue,st){F(Ue.coordinates,st)},MultiPolygon:function(Ue,st){for(var Gt=Ue.coordinates,Rt=-1,hr=Gt.length;++Rt<hr;)F(Gt[Rt],st)},GeometryCollection:function(Ue,st){for(var Gt=Ue.geometries,Rt=-1,hr=Gt.length;++Rt<hr;)q(Gt[Rt],st)}};function B(Ue,st,Gt){var Rt=-1,hr=Ue.length-Gt,Lr;for(st.lineStart();++Rt<hr;)Lr=Ue[Rt],st.point(Lr[0],Lr[1],Lr[2]);st.lineEnd()}function F(Ue,st){var Gt=-1,Rt=Ue.length;for(st.polygonStart();++Gt<Rt;)B(Ue[Gt],st,1);st.polygonEnd()}function N(Ue,st){Ue&&O.hasOwnProperty(Ue.type)?O[Ue.type](Ue,st):q(Ue,st)}var X=r(),K=r(),ne,fe,ue,ee,Z,oe={point:D,lineStart:D,lineEnd:D,polygonStart:function(){X.reset(),oe.lineStart=ce,oe.lineEnd=le},polygonEnd:function(){var Ue=+X;K.add(Ue<0?c+Ue:Ue),this.lineStart=this.lineEnd=this.point=D},sphere:function(){K.add(c)}};function ce(){oe.point=me}function le(){he(ne,fe)}function me(Ue,st){oe.point=he,ne=Ue,fe=st,Ue*=v,st*=v,ue=Ue,ee=p(st=st/2+f),Z=_(st)}function he(Ue,st){Ue*=v,st*=v,st=st/2+f;var Gt=Ue-ue,Rt=Gt>=0?1:-1,hr=Rt*Gt,Lr=p(st),zr=_(st),Zr=Z*zr,an=ee*Lr+Zr*p(hr),Sn=Zr*Rt*_(hr);X.add(b(Sn,an)),ue=Ue,ee=Lr,Z=zr}function te(Ue){return K.reset(),N(Ue,oe),K*2}function ge(Ue){return[b(Ue[1],Ue[0]),M(Ue[2])]}function ae(Ue){var st=Ue[0],Gt=Ue[1],Rt=p(Gt);return[Rt*p(st),Rt*_(st),_(Gt)]}function _e(Ue,st){return Ue[0]*st[0]+Ue[1]*st[1]+Ue[2]*st[2]}function Ce(Ue,st){return[Ue[1]*st[2]-Ue[2]*st[1],Ue[2]*st[0]-Ue[0]*st[2],Ue[0]*st[1]-Ue[1]*st[0]]}function qe(Ue,st){Ue[0]+=st[0],Ue[1]+=st[1],Ue[2]+=st[2]}function rt(Ue,st){return[Ue[0]*st,Ue[1]*st,Ue[2]*st]}function Re(Ue){var st=S(Ue[0]*Ue[0]+Ue[1]*Ue[1]+Ue[2]*Ue[2]);Ue[0]/=st,Ue[1]/=st,Ue[2]/=st}var Ie,ot,lt,ht,xt,Vt,Ht,Me,Ke=r(),We,et,vt={point:at,lineStart:dt,lineEnd:_t,polygonStart:function(){vt.point=$t,vt.lineStart=Ut,vt.lineEnd=fr,Ke.reset(),oe.polygonStart()},polygonEnd:function(){oe.polygonEnd(),vt.point=at,vt.lineStart=dt,vt.lineEnd=_t,X<0?(Ie=-(lt=180),ot=-(ht=90)):Ke>o?ht=90:Ke<-o&&(ot=-90),et[0]=Ie,et[1]=lt},sphere:function(){Ie=-(lt=180),ot=-(ht=90)}};function at(Ue,st){We.push(et=[Ie=Ue,lt=Ue]),st<ot&&(ot=st),st>ht&&(ht=st)}function Xe(Ue,st){var Gt=ae([Ue*v,st*v]);if(Me){var Rt=Ce(Me,Gt),hr=[Rt[1],-Rt[0],0],Lr=Ce(hr,Rt);Re(Lr),Lr=ge(Lr);var zr=Ue-xt,Zr=zr>0?1:-1,an=Lr[0]*h*Zr,Sn,Nr=d(zr)>180;Nr^(Zr*xt<an&&an<Zr*Ue)?(Sn=Lr[1]*h,Sn>ht&&(ht=Sn)):(an=(an+360)%360-180,Nr^(Zr*xt<an&&an<Zr*Ue)?(Sn=-Lr[1]*h,Sn<ot&&(ot=Sn)):(st<ot&&(ot=st),st>ht&&(ht=st))),Nr?Ue<xt?ar(Ie,Ue)>ar(Ie,lt)&&(lt=Ue):ar(Ue,lt)>ar(Ie,lt)&&(Ie=Ue):lt>=Ie?(Ue<Ie&&(Ie=Ue),Ue>lt&&(lt=Ue)):Ue>xt?ar(Ie,Ue)>ar(Ie,lt)&&(lt=Ue):ar(Ue,lt)>ar(Ie,lt)&&(Ie=Ue)}else We.push(et=[Ie=Ue,lt=Ue]);st<ot&&(ot=st),st>ht&&(ht=st),Me=Gt,xt=Ue}function dt(){vt.point=Xe}function _t(){et[0]=Ie,et[1]=lt,vt.point=at,Me=null}function $t(Ue,st){if(Me){var Gt=Ue-xt;Ke.add(d(Gt)>180?Gt+(Gt>0?360:-360):Gt)}else Vt=Ue,Ht=st;oe.point(Ue,st),Xe(Ue,st)}function Ut(){oe.lineStart()}function fr(){$t(Vt,Ht),oe.lineEnd(),d(Ke)>o&&(Ie=-(lt=180)),et[0]=Ie,et[1]=lt,Me=null}function ar(Ue,st){return(st-=Ue)<0?st+360:st}function cr(Ue,st){return Ue[0]-st[0]}function It(Ue,st){return Ue[0]<=Ue[1]?Ue[0]<=st&&st<=Ue[1]:st<Ue[0]||Ue[1]<st}function gt(Ue){var st,Gt,Rt,hr,Lr,zr,Zr;if(ht=lt=-(Ie=ot=1/0),We=[],N(Ue,vt),Gt=We.length){for(We.sort(cr),st=1,Rt=We[0],Lr=[Rt];st<Gt;++st)hr=We[st],It(Rt,hr[0])||It(Rt,hr[1])?(ar(Rt[0],hr[1])>ar(Rt[0],Rt[1])&&(Rt[1]=hr[1]),ar(hr[0],Rt[1])>ar(Rt[0],Rt[1])&&(Rt[0]=hr[0])):Lr.push(Rt=hr);for(zr=-1/0,Gt=Lr.length-1,st=0,Rt=Lr[Gt];st<=Gt;Rt=hr,++st)hr=Lr[st],(Zr=ar(Rt[1],hr[0]))>zr&&(zr=Zr,Ie=hr[0],lt=Rt[1])}return We=et=null,Ie===1/0||ot===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ie,ot],[lt,ht]]}var kt,Je,Ze,At,Se,pe,Te,it,Dt,Wt,er,qr,Vr,mr,Fr,nn,jn={sphere:D,point:xn,lineStart:ki,lineEnd:Si,polygonStart:function(){jn.lineStart=nt,jn.lineEnd=ze},polygonEnd:function(){jn.lineStart=ki,jn.lineEnd=Si}};function xn(Ue,st){Ue*=v,st*=v;var Gt=p(st);pn(Gt*p(Ue),Gt*_(Ue),_(st))}function pn(Ue,st,Gt){++kt,Ze+=(Ue-Ze)/kt,At+=(st-At)/kt,Se+=(Gt-Se)/kt}function ki(){jn.point=qn}function qn(Ue,st){Ue*=v,st*=v;var Gt=p(st);mr=Gt*p(Ue),Fr=Gt*_(Ue),nn=_(st),jn.point=bi,pn(mr,Fr,nn)}function bi(Ue,st){Ue*=v,st*=v;var Gt=p(st),Rt=Gt*p(Ue),hr=Gt*_(Ue),Lr=_(st),zr=b(S((zr=Fr*Lr-nn*hr)*zr+(zr=nn*Rt-mr*Lr)*zr+(zr=mr*hr-Fr*Rt)*zr),mr*Rt+Fr*hr+nn*Lr);Je+=zr,pe+=zr*(mr+(mr=Rt)),Te+=zr*(Fr+(Fr=hr)),it+=zr*(nn+(nn=Lr)),pn(mr,Fr,nn)}function Si(){jn.point=xn}function nt(){jn.point=ut}function ze(){mt(qr,Vr),jn.point=xn}function ut(Ue,st){qr=Ue,Vr=st,Ue*=v,st*=v,jn.point=mt;var Gt=p(st);mr=Gt*p(Ue),Fr=Gt*_(Ue),nn=_(st),pn(mr,Fr,nn)}function mt(Ue,st){Ue*=v,st*=v;var Gt=p(st),Rt=Gt*p(Ue),hr=Gt*_(Ue),Lr=_(st),zr=Fr*Lr-nn*hr,Zr=nn*Rt-mr*Lr,an=mr*hr-Fr*Rt,Sn=S(zr*zr+Zr*Zr+an*an),Nr=M(Sn),tn=Sn&&-Nr/Sn;Dt+=tn*zr,Wt+=tn*Zr,er+=tn*an,Je+=Nr,pe+=Nr*(mr+(mr=Rt)),Te+=Nr*(Fr+(Fr=hr)),it+=Nr*(nn+(nn=Lr)),pn(mr,Fr,nn)}function Ot(Ue){kt=Je=Ze=At=Se=pe=Te=it=Dt=Wt=er=0,N(Ue,jn);var st=Dt,Gt=Wt,Rt=er,hr=st*st+Gt*Gt+Rt*Rt;return hr<s&&(st=pe,Gt=Te,Rt=it,Je<o&&(st=Ze,Gt=At,Rt=Se),hr=st*st+Gt*Gt+Rt*Rt,hr<s)?[NaN,NaN]:[b(Gt,st)*h,M(Rt/S(hr))*h]}function nr(Ue){return function(){return Ue}}function yr(Ue,st){function Gt(Rt,hr){return Rt=Ue(Rt,hr),st(Rt[0],Rt[1])}return Ue.invert&&st.invert&&(Gt.invert=function(Rt,hr){return Rt=st.invert(Rt,hr),Rt&&Ue.invert(Rt[0],Rt[1])}),Gt}function vr(Ue,st){return[d(Ue)>l?Ue+Math.round(-Ue/c)*c:Ue,st]}vr.invert=vr;function Rr(Ue,st,Gt){return(Ue%=c)?st||Gt?yr(Yr(Ue),Xr(st,Gt)):Yr(Ue):st||Gt?Xr(st,Gt):vr}function Gr(Ue){return function(st,Gt){return st+=Ue,[st>l?st-c:st<-l?st+c:st,Gt]}}function Yr(Ue){var st=Gr(Ue);return st.invert=Gr(-Ue),st}function Xr(Ue,st){var Gt=p(Ue),Rt=_(Ue),hr=p(st),Lr=_(st);function zr(Zr,an){var Sn=p(an),Nr=p(Zr)*Sn,tn=_(Zr)*Sn,rn=_(an),An=rn*Gt+Nr*Rt;return[b(tn*hr-An*Lr,Nr*Gt-rn*Rt),M(An*hr+tn*Lr)]}return zr.invert=function(Zr,an){var Sn=p(an),Nr=p(Zr)*Sn,tn=_(Zr)*Sn,rn=_(an),An=rn*hr-tn*Lr;return[b(tn*hr+rn*Lr,Nr*Gt+An*Rt),M(An*Gt-Nr*Rt)]},zr}function on(Ue){Ue=Rr(Ue[0]*v,Ue[1]*v,Ue.length>2?Ue[2]*v:0);function st(Gt){return Gt=Ue(Gt[0]*v,Gt[1]*v),Gt[0]*=h,Gt[1]*=h,Gt}return st.invert=function(Gt){return Gt=Ue.invert(Gt[0]*v,Gt[1]*v),Gt[0]*=h,Gt[1]*=h,Gt},st}function wn(Ue,st,Gt,Rt,hr,Lr){if(Gt){var zr=p(st),Zr=_(st),an=Rt*Gt;hr==null?(hr=st+Rt*c,Lr=st-an/2):(hr=Vi(zr,hr),Lr=Vi(zr,Lr),(Rt>0?hr<Lr:hr>Lr)&&(hr+=Rt*c));for(var Sn,Nr=hr;Rt>0?Nr>Lr:Nr<Lr;Nr-=an)Sn=ge([zr,-Zr*p(Nr),-Zr*_(Nr)]),Ue.point(Sn[0],Sn[1])}}function Vi(Ue,st){st=ae(st),st[0]-=Ue,Re(st);var Gt=C(-st[1]);return((-st[2]<0?-Gt:Gt)+c-o)%c}function vi(){var Ue=nr([0,0]),st=nr(90),Gt=nr(6),Rt,hr,Lr={point:zr};function zr(an,Sn){Rt.push(an=hr(an,Sn)),an[0]*=h,an[1]*=h}function Zr(){var an=Ue.apply(this,arguments),Sn=st.apply(this,arguments)*v,Nr=Gt.apply(this,arguments)*v;return Rt=[],hr=Rr(-an[0]*v,-an[1]*v,0).invert,wn(Lr,Sn,Nr,1),an={type:"Polygon",coordinates:[Rt]},Rt=hr=null,an}return Zr.center=function(an){return arguments.length?(Ue=typeof an=="function"?an:nr([+an[0],+an[1]]),Zr):Ue},Zr.radius=function(an){return arguments.length?(st=typeof an=="function"?an:nr(+an),Zr):st},Zr.precision=function(an){return arguments.length?(Gt=typeof an=="function"?an:nr(+an),Zr):Gt},Zr}function Zi(){var Ue=[],st;return{point:function(Gt,Rt,hr){st.push([Gt,Rt,hr])},lineStart:function(){Ue.push(st=[])},lineEnd:D,rejoin:function(){Ue.length>1&&Ue.push(Ue.pop().concat(Ue.shift()))},result:function(){var Gt=Ue;return Ue=[],st=null,Gt}}}function Xi(Ue,st){return d(Ue[0]-st[0])<o&&d(Ue[1]-st[1])<o}function ta(Ue,st,Gt,Rt){this.x=Ue,this.z=st,this.o=Gt,this.e=Rt,this.v=!1,this.n=this.p=null}function Ya(Ue,st,Gt,Rt,hr){var Lr=[],zr=[],Zr,an;if(Ue.forEach(function(Xn){if(!((Oi=Xn.length-1)<=0)){var Oi,Fi=Xn[0],Hi=Xn[Oi],ji;if(Xi(Fi,Hi)){if(!Fi[2]&&!Hi[2]){for(hr.lineStart(),Zr=0;Zr<Oi;++Zr)hr.point((Fi=Xn[Zr])[0],Fi[1]);hr.lineEnd();return}Hi[0]+=2*o}Lr.push(ji=new ta(Fi,Xn,null,!0)),zr.push(ji.o=new ta(Fi,null,ji,!1)),Lr.push(ji=new ta(Hi,Xn,null,!1)),zr.push(ji.o=new ta(Hi,null,ji,!0))}}),!!Lr.length){for(zr.sort(st),Pi(Lr),Pi(zr),Zr=0,an=zr.length;Zr<an;++Zr)zr[Zr].e=Gt=!Gt;for(var Sn=Lr[0],Nr,tn;;){for(var rn=Sn,An=!0;rn.v;)if((rn=rn.n)===Sn)return;Nr=rn.z,hr.lineStart();do{if(rn.v=rn.o.v=!0,rn.e){if(An)for(Zr=0,an=Nr.length;Zr<an;++Zr)hr.point((tn=Nr[Zr])[0],tn[1]);else Rt(rn.x,rn.n.x,1,hr);rn=rn.n}else{if(An)for(Nr=rn.p.z,Zr=Nr.length-1;Zr>=0;--Zr)hr.point((tn=Nr[Zr])[0],tn[1]);else Rt(rn.x,rn.p.x,-1,hr);rn=rn.p}rn=rn.o,Nr=rn.z,An=!An}while(!rn.v);hr.lineEnd()}}}function Pi(Ue){if(st=Ue.length){for(var st,Gt=0,Rt=Ue[0],hr;++Gt<st;)Rt.n=hr=Ue[Gt],hr.p=Rt,Rt=hr;Rt.n=hr=Ue[0],hr.p=Rt}}var Bn=r();function Qi(Ue){return d(Ue[0])<=l?Ue[0]:E(Ue[0])*((d(Ue[0])+l)%c-l)}function ya(Ue,st){var Gt=Qi(st),Rt=st[1],hr=_(Rt),Lr=[_(Gt),-p(Gt),0],zr=0,Zr=0;Bn.reset(),hr===1?Rt=u+o:hr===-1&&(Rt=-u-o);for(var an=0,Sn=Ue.length;an<Sn;++an)if(tn=(Nr=Ue[an]).length)for(var Nr,tn,rn=Nr[tn-1],An=Qi(rn),Xn=rn[1]/2+f,Oi=_(Xn),Fi=p(Xn),Hi=0;Hi<tn;++Hi,An=Un,Oi=Ki,Fi=ca,rn=ji){var ji=Nr[Hi],Un=Qi(ji),ri=ji[1]/2+f,Ki=_(ri),ca=p(ri),Ja=Un-An,_o=Ja>=0?1:-1,go=_o*Ja,bo=go>l,Na=Oi*Ki;if(Bn.add(b(Na*_o*_(go),Fi*ca+Na*p(go))),zr+=bo?Ja+_o*c:Ja,bo^An>=Gt^Un>=Gt){var ws=Ce(ae(rn),ae(ji));Re(ws);var Ko=Ce(Lr,ws);Re(Ko);var Uo=(bo^Ja>=0?-1:1)*M(Ko[2]);(Rt>Uo||Rt===Uo&&(ws[0]||ws[1]))&&(Zr+=bo^Ja>=0?1:-1)}}return(zr<-o||zr<o&&Bn<-o)^Zr&1}function Nn(Ue,st,Gt,Rt){return function(hr){var Lr=st(hr),zr=Zi(),Zr=st(zr),an=!1,Sn,Nr,tn,rn={point:An,lineStart:Oi,lineEnd:Fi,polygonStart:function(){rn.point=Hi,rn.lineStart=ji,rn.lineEnd=Un,Nr=[],Sn=[]},polygonEnd:function(){rn.point=An,rn.lineStart=Oi,rn.lineEnd=Fi,Nr=t.merge(Nr);var ri=ya(Sn,Rt);Nr.length?(an||(hr.polygonStart(),an=!0),Ya(Nr,Bt,ri,Gt,hr)):ri&&(an||(hr.polygonStart(),an=!0),hr.lineStart(),Gt(null,null,1,hr),hr.lineEnd()),an&&(hr.polygonEnd(),an=!1),Nr=Sn=null},sphere:function(){hr.polygonStart(),hr.lineStart(),Gt(null,null,1,hr),hr.lineEnd(),hr.polygonEnd()}};function An(ri,Ki){Ue(ri,Ki)&&hr.point(ri,Ki)}function Xn(ri,Ki){Lr.point(ri,Ki)}function Oi(){rn.point=Xn,Lr.lineStart()}function Fi(){rn.point=An,Lr.lineEnd()}function Hi(ri,Ki){tn.push([ri,Ki]),Zr.point(ri,Ki)}function ji(){Zr.lineStart(),tn=[]}function Un(){Hi(tn[0][0],tn[0][1]),Zr.lineEnd();var ri=Zr.clean(),Ki=zr.result(),ca,Ja=Ki.length,_o,go,bo;if(tn.pop(),Sn.push(tn),tn=null,!!Ja){if(ri&1){if(go=Ki[0],(_o=go.length-1)>0){for(an||(hr.polygonStart(),an=!0),hr.lineStart(),ca=0;ca<_o;++ca)hr.point((bo=go[ca])[0],bo[1]);hr.lineEnd()}return}Ja>1&&ri&2&&Ki.push(Ki.pop().concat(Ki.shift())),Nr.push(Ki.filter(je))}}return rn}}function je(Ue){return Ue.length>1}function Bt(Ue,st){return((Ue=Ue.x)[0]<0?Ue[1]-u-o:u-Ue[1])-((st=st.x)[0]<0?st[1]-u-o:u-st[1])}var ur=Nn(function(){return!0},br,ln,[-l,-u]);function br(Ue){var st=NaN,Gt=NaN,Rt=NaN,hr;return{lineStart:function(){Ue.lineStart(),hr=1},point:function(Lr,zr){var Zr=Lr>0?l:-l,an=d(Lr-st);d(an-l)<o?(Ue.point(st,Gt=(Gt+zr)/2>0?u:-u),Ue.point(Rt,Gt),Ue.lineEnd(),Ue.lineStart(),Ue.point(Zr,Gt),Ue.point(Lr,Gt),hr=0):Rt!==Zr&&an>=l&&(d(st-Rt)<o&&(st-=Rt*o),d(Lr-Zr)<o&&(Lr-=Zr*o),Gt=Jr(st,Gt,Lr,zr),Ue.point(Rt,Gt),Ue.lineEnd(),Ue.lineStart(),Ue.point(Zr,Gt),hr=0),Ue.point(st=Lr,Gt=zr),Rt=Zr},lineEnd:function(){Ue.lineEnd(),st=Gt=NaN},clean:function(){return 2-hr}}}function Jr(Ue,st,Gt,Rt){var hr,Lr,zr=_(Ue-Gt);return d(zr)>o?x((_(st)*(Lr=p(Rt))*_(Gt)-_(Rt)*(hr=p(st))*_(Ue))/(hr*Lr*zr)):(st+Rt)/2}function ln(Ue,st,Gt,Rt){var hr;if(Ue==null)hr=Gt*u,Rt.point(-l,hr),Rt.point(0,hr),Rt.point(l,hr),Rt.point(l,0),Rt.point(l,-hr),Rt.point(0,-hr),Rt.point(-l,-hr),Rt.point(-l,0),Rt.point(-l,hr);else if(d(Ue[0]-st[0])>o){var Lr=Ue[0]<st[0]?l:-l;hr=Gt*Lr/2,Rt.point(-Lr,hr),Rt.point(0,hr),Rt.point(Lr,hr)}else Rt.point(st[0],st[1])}function yn(Ue){var st=p(Ue),Gt=6*v,Rt=st>0,hr=d(st)>o;function Lr(Nr,tn,rn,An){wn(An,Ue,Gt,rn,Nr,tn)}function zr(Nr,tn){return p(Nr)*p(tn)>st}function Zr(Nr){var tn,rn,An,Xn,Oi;return{lineStart:function(){Xn=An=!1,Oi=1},point:function(Fi,Hi){var ji=[Fi,Hi],Un,ri=zr(Fi,Hi),Ki=Rt?ri?0:Sn(Fi,Hi):ri?Sn(Fi+(Fi<0?l:-l),Hi):0;if(!tn&&(Xn=An=ri)&&Nr.lineStart(),ri!==An&&(Un=an(tn,ji),(!Un||Xi(tn,Un)||Xi(ji,Un))&&(ji[2]=1)),ri!==An)Oi=0,ri?(Nr.lineStart(),Un=an(ji,tn),Nr.point(Un[0],Un[1])):(Un=an(tn,ji),Nr.point(Un[0],Un[1],2),Nr.lineEnd()),tn=Un;else if(hr&&tn&&Rt^ri){var ca;!(Ki&rn)&&(ca=an(ji,tn,!0))&&(Oi=0,Rt?(Nr.lineStart(),Nr.point(ca[0][0],ca[0][1]),Nr.point(ca[1][0],ca[1][1]),Nr.lineEnd()):(Nr.point(ca[1][0],ca[1][1]),Nr.lineEnd(),Nr.lineStart(),Nr.point(ca[0][0],ca[0][1],3)))}ri&&(!tn||!Xi(tn,ji))&&Nr.point(ji[0],ji[1]),tn=ji,An=ri,rn=Ki},lineEnd:function(){An&&Nr.lineEnd(),tn=null},clean:function(){return Oi|(Xn&&An)<<1}}}function an(Nr,tn,rn){var An=ae(Nr),Xn=ae(tn),Oi=[1,0,0],Fi=Ce(An,Xn),Hi=_e(Fi,Fi),ji=Fi[0],Un=Hi-ji*ji;if(!Un)return!rn&&Nr;var ri=st*Hi/Un,Ki=-st*ji/Un,ca=Ce(Oi,Fi),Ja=rt(Oi,ri),_o=rt(Fi,Ki);qe(Ja,_o);var go=ca,bo=_e(Ja,go),Na=_e(go,go),ws=bo*bo-Na*(_e(Ja,Ja)-1);if(!(ws<0)){var Ko=S(ws),Uo=rt(go,(-bo-Ko)/Na);if(qe(Uo,Ja),Uo=ge(Uo),!rn)return Uo;var hi=Nr[0],ea=tn[0],Ts=Nr[1],Ml=tn[1],Wl;ea<hi&&(Wl=hi,hi=ea,ea=Wl);var su=ea-hi,Xu=d(su-l)<o,Wf=Xu||su<o;if(!Xu&&Ml<Ts&&(Wl=Ts,Ts=Ml,Ml=Wl),Wf?Xu?Ts+Ml>0^Uo[1]<(d(Uo[0]-hi)<o?Ts:Ml):Ts<=Uo[1]&&Uo[1]<=Ml:su>l^(hi<=Uo[0]&&Uo[0]<=ea)){var lu=rt(go,(-bo+Ko)/Na);return qe(lu,Ja),[Uo,ge(lu)]}}}function Sn(Nr,tn){var rn=Rt?Ue:l-Ue,An=0;return Nr<-rn?An|=1:Nr>rn&&(An|=2),tn<-rn?An|=4:tn>rn&&(An|=8),An}return Nn(zr,Zr,Lr,Rt?[0,-Ue]:[-l,Ue-l])}function Cr(Ue,st,Gt,Rt,hr,Lr){var zr=Ue[0],Zr=Ue[1],an=st[0],Sn=st[1],Nr=0,tn=1,rn=an-zr,An=Sn-Zr,Xn;if(Xn=Gt-zr,!(!rn&&Xn>0)){if(Xn/=rn,rn<0){if(Xn<Nr)return;Xn<tn&&(tn=Xn)}else if(rn>0){if(Xn>tn)return;Xn>Nr&&(Nr=Xn)}if(Xn=hr-zr,!(!rn&&Xn<0)){if(Xn/=rn,rn<0){if(Xn>tn)return;Xn>Nr&&(Nr=Xn)}else if(rn>0){if(Xn<Nr)return;Xn<tn&&(tn=Xn)}if(Xn=Rt-Zr,!(!An&&Xn>0)){if(Xn/=An,An<0){if(Xn<Nr)return;Xn<tn&&(tn=Xn)}else if(An>0){if(Xn>tn)return;Xn>Nr&&(Nr=Xn)}if(Xn=Lr-Zr,!(!An&&Xn<0)){if(Xn/=An,An<0){if(Xn>tn)return;Xn>Nr&&(Nr=Xn)}else if(An>0){if(Xn<Nr)return;Xn<tn&&(tn=Xn)}return Nr>0&&(Ue[0]=zr+Nr*rn,Ue[1]=Zr+Nr*An),tn<1&&(st[0]=zr+tn*rn,st[1]=Zr+tn*An),!0}}}}}var vn=1e9,gi=-vn;function Wn(Ue,st,Gt,Rt){function hr(Sn,Nr){return Ue<=Sn&&Sn<=Gt&&st<=Nr&&Nr<=Rt}function Lr(Sn,Nr,tn,rn){var An=0,Xn=0;if(Sn==null||(An=zr(Sn,tn))!==(Xn=zr(Nr,tn))||an(Sn,Nr)<0^tn>0)do rn.point(An===0||An===3?Ue:Gt,An>1?Rt:st);while((An=(An+tn+4)%4)!==Xn);else rn.point(Nr[0],Nr[1])}function zr(Sn,Nr){return d(Sn[0]-Ue)<o?Nr>0?0:3:d(Sn[0]-Gt)<o?Nr>0?2:1:d(Sn[1]-st)<o?Nr>0?1:0:Nr>0?3:2}function Zr(Sn,Nr){return an(Sn.x,Nr.x)}function an(Sn,Nr){var tn=zr(Sn,1),rn=zr(Nr,1);return tn!==rn?tn-rn:tn===0?Nr[1]-Sn[1]:tn===1?Sn[0]-Nr[0]:tn===2?Sn[1]-Nr[1]:Nr[0]-Sn[0]}return function(Sn){var Nr=Sn,tn=Zi(),rn,An,Xn,Oi,Fi,Hi,ji,Un,ri,Ki,ca,Ja={point:_o,lineStart:ws,lineEnd:Ko,polygonStart:bo,polygonEnd:Na};function _o(hi,ea){hr(hi,ea)&&Nr.point(hi,ea)}function go(){for(var hi=0,ea=0,Ts=An.length;ea<Ts;++ea)for(var Ml=An[ea],Wl=1,su=Ml.length,Xu=Ml[0],Wf,lu,Rc=Xu[0],Dc=Xu[1];Wl<su;++Wl)Wf=Rc,lu=Dc,Xu=Ml[Wl],Rc=Xu[0],Dc=Xu[1],lu<=Rt?Dc>Rt&&(Rc-Wf)*(Rt-lu)>(Dc-lu)*(Ue-Wf)&&++hi:Dc<=Rt&&(Rc-Wf)*(Rt-lu)<(Dc-lu)*(Ue-Wf)&&--hi;return hi}function bo(){Nr=tn,rn=[],An=[],ca=!0}function Na(){var hi=go(),ea=ca&&hi,Ts=(rn=t.merge(rn)).length;(ea||Ts)&&(Sn.polygonStart(),ea&&(Sn.lineStart(),Lr(null,null,1,Sn),Sn.lineEnd()),Ts&&Ya(rn,Zr,hi,Lr,Sn),Sn.polygonEnd()),Nr=Sn,rn=An=Xn=null}function ws(){Ja.point=Uo,An&&An.push(Xn=[]),Ki=!0,ri=!1,ji=Un=NaN}function Ko(){rn&&(Uo(Oi,Fi),Hi&&ri&&tn.rejoin(),rn.push(tn.result())),Ja.point=_o,ri&&Nr.lineEnd()}function Uo(hi,ea){var Ts=hr(hi,ea);if(An&&Xn.push([hi,ea]),Ki)Oi=hi,Fi=ea,Hi=Ts,Ki=!1,Ts&&(Nr.lineStart(),Nr.point(hi,ea));else if(Ts&&ri)Nr.point(hi,ea);else{var Ml=[ji=Math.max(gi,Math.min(vn,ji)),Un=Math.max(gi,Math.min(vn,Un))],Wl=[hi=Math.max(gi,Math.min(vn,hi)),ea=Math.max(gi,Math.min(vn,ea))];Cr(Ml,Wl,Ue,st,Gt,Rt)?(ri||(Nr.lineStart(),Nr.point(Ml[0],Ml[1])),Nr.point(Wl[0],Wl[1]),Ts||Nr.lineEnd(),ca=!1):Ts&&(Nr.lineStart(),Nr.point(hi,ea),ca=!1)}ji=hi,Un=ea,ri=Ts}return Ja}}function zi(){var Ue=0,st=0,Gt=960,Rt=500,hr,Lr,zr;return zr={stream:function(Zr){return hr&&Lr===Zr?hr:hr=Wn(Ue,st,Gt,Rt)(Lr=Zr)},extent:function(Zr){return arguments.length?(Ue=+Zr[0][0],st=+Zr[0][1],Gt=+Zr[1][0],Rt=+Zr[1][1],hr=Lr=null,zr):[[Ue,st],[Gt,Rt]]}}}var fa=r(),to,ma,uo,Ka={sphere:D,point:D,lineStart:jo,lineEnd:D,polygonStart:D,polygonEnd:D};function jo(){Ka.point=xs,Ka.lineEnd=Ho}function Ho(){Ka.point=Ka.lineEnd=D}function xs(Ue,st){Ue*=v,st*=v,to=Ue,ma=_(st),uo=p(st),Ka.point=ss}function ss(Ue,st){Ue*=v,st*=v;var Gt=_(st),Rt=p(st),hr=d(Ue-to),Lr=p(hr),zr=_(hr),Zr=Rt*zr,an=uo*Gt-ma*Rt*Lr,Sn=ma*Gt+uo*Rt*Lr;fa.add(b(S(Zr*Zr+an*an),Sn)),to=Ue,ma=Gt,uo=Rt}function al(Ue){return fa.reset(),N(Ue,Ka),+fa}var so=[null,null],vs={type:"LineString",coordinates:so};function Co(Ue,st){return so[0]=Ue,so[1]=st,al(vs)}var ds={Feature:function(Ue,st){return es(Ue.geometry,st)},FeatureCollection:function(Ue,st){for(var Gt=Ue.features,Rt=-1,hr=Gt.length;++Rt<hr;)if(es(Gt[Rt].geometry,st))return!0;return!1}},$o={Sphere:function(){return!0},Point:function(Ue,st){return Oa(Ue.coordinates,st)},MultiPoint:function(Ue,st){for(var Gt=Ue.coordinates,Rt=-1,hr=Gt.length;++Rt<hr;)if(Oa(Gt[Rt],st))return!0;return!1},LineString:function(Ue,st){return vo(Ue.coordinates,st)},MultiLineString:function(Ue,st){for(var Gt=Ue.coordinates,Rt=-1,hr=Gt.length;++Rt<hr;)if(vo(Gt[Rt],st))return!0;return!1},Polygon:function(Ue,st){return Al(Ue.coordinates,st)},MultiPolygon:function(Ue,st){for(var Gt=Ue.coordinates,Rt=-1,hr=Gt.length;++Rt<hr;)if(Al(Gt[Rt],st))return!0;return!1},GeometryCollection:function(Ue,st){for(var Gt=Ue.geometries,Rt=-1,hr=Gt.length;++Rt<hr;)if(es(Gt[Rt],st))return!0;return!1}};function es(Ue,st){return Ue&&$o.hasOwnProperty(Ue.type)?$o[Ue.type](Ue,st):!1}function Oa(Ue,st){return Co(Ue,st)===0}function vo(Ue,st){for(var Gt,Rt,hr,Lr=0,zr=Ue.length;Lr<zr;Lr++){if(Rt=Co(Ue[Lr],st),Rt===0||Lr>0&&(hr=Co(Ue[Lr],Ue[Lr-1]),hr>0&&Gt<=hr&&Rt<=hr&&(Gt+Rt-hr)*(1-Math.pow((Gt-Rt)/hr,2))<s*hr))return!0;Gt=Rt}return!1}function Al(Ue,st){return!!ya(Ue.map(ru),Vu(st))}function ru(Ue){return Ue=Ue.map(Vu),Ue.pop(),Ue}function Vu(Ue){return[Ue[0]*v,Ue[1]*v]}function ls(Ue,st){return(Ue&&ds.hasOwnProperty(Ue.type)?ds[Ue.type]:es)(Ue,st)}function dn(Ue,st,Gt){var Rt=t.range(Ue,st-o,Gt).concat(st);return function(hr){return Rt.map(function(Lr){return[hr,Lr]})}}function wi(Ue,st,Gt){var Rt=t.range(Ue,st-o,Gt).concat(st);return function(hr){return Rt.map(function(Lr){return[Lr,hr]})}}function sc(){var Ue,st,Gt,Rt,hr,Lr,zr,Zr,an=10,Sn=an,Nr=90,tn=360,rn,An,Xn,Oi,Fi=2.5;function Hi(){return{type:"MultiLineString",coordinates:ji()}}function ji(){return t.range(w(Rt/Nr)*Nr,Gt,Nr).map(Xn).concat(t.range(w(Zr/tn)*tn,zr,tn).map(Oi)).concat(t.range(w(st/an)*an,Ue,an).filter(function(Un){return d(Un%Nr)>o}).map(rn)).concat(t.range(w(Lr/Sn)*Sn,hr,Sn).filter(function(Un){return d(Un%tn)>o}).map(An))}return Hi.lines=function(){return ji().map(function(Un){return{type:"LineString",coordinates:Un}})},Hi.outline=function(){return{type:"Polygon",coordinates:[Xn(Rt).concat(Oi(zr).slice(1),Xn(Gt).reverse().slice(1),Oi(Zr).reverse().slice(1))]}},Hi.extent=function(Un){return arguments.length?Hi.extentMajor(Un).extentMinor(Un):Hi.extentMinor()},Hi.extentMajor=function(Un){return arguments.length?(Rt=+Un[0][0],Gt=+Un[1][0],Zr=+Un[0][1],zr=+Un[1][1],Rt>Gt&&(Un=Rt,Rt=Gt,Gt=Un),Zr>zr&&(Un=Zr,Zr=zr,zr=Un),Hi.precision(Fi)):[[Rt,Zr],[Gt,zr]]},Hi.extentMinor=function(Un){return arguments.length?(st=+Un[0][0],Ue=+Un[1][0],Lr=+Un[0][1],hr=+Un[1][1],st>Ue&&(Un=st,st=Ue,Ue=Un),Lr>hr&&(Un=Lr,Lr=hr,hr=Un),Hi.precision(Fi)):[[st,Lr],[Ue,hr]]},Hi.step=function(Un){return arguments.length?Hi.stepMajor(Un).stepMinor(Un):Hi.stepMinor()},Hi.stepMajor=function(Un){return arguments.length?(Nr=+Un[0],tn=+Un[1],Hi):[Nr,tn]},Hi.stepMinor=function(Un){return arguments.length?(an=+Un[0],Sn=+Un[1],Hi):[an,Sn]},Hi.precision=function(Un){return arguments.length?(Fi=+Un,rn=dn(Lr,hr,90),An=wi(st,Ue,Fi),Xn=dn(Zr,zr,90),Oi=wi(Rt,Gt,Fi),Hi):Fi},Hi.extentMajor([[-180,-90+o],[180,90-o]]).extentMinor([[-180,-80-o],[180,80+o]])}function Pl(){return sc()()}function us(Ue,st){var Gt=Ue[0]*v,Rt=Ue[1]*v,hr=st[0]*v,Lr=st[1]*v,zr=p(Rt),Zr=_(Rt),an=p(Lr),Sn=_(Lr),Nr=zr*p(Gt),tn=zr*_(Gt),rn=an*p(hr),An=an*_(hr),Xn=2*M(S(P(Lr-Rt)+zr*an*P(hr-Gt))),Oi=_(Xn),Fi=Xn?function(Hi){var ji=_(Hi*=Xn)/Oi,Un=_(Xn-Hi)/Oi,ri=Un*Nr+ji*rn,Ki=Un*tn+ji*An,ca=Un*Zr+ji*Sn;return[b(Ki,ri)*h,b(ca,S(ri*ri+Ki*Ki))*h]}:function(){return[Gt*h,Rt*h]};return Fi.distance=Xn,Fi}function dl(Ue){return Ue}var ts=r(),Rl=r(),wu,oi,Aa,Ca,Fs={point:D,lineStart:D,lineEnd:D,polygonStart:function(){Fs.lineStart=If,Fs.lineEnd=jc},polygonEnd:function(){Fs.lineStart=Fs.lineEnd=Fs.point=D,ts.add(d(Rl)),Rl.reset()},result:function(){var Ue=ts/2;return ts.reset(),Ue}};function If(){Fs.point=Ma}function Ma(Ue,st){Fs.point=Ff,wu=Aa=Ue,oi=Ca=st}function Ff(Ue,st){Rl.add(Ca*Ue-Aa*st),Aa=Ue,Ca=st}function jc(){Ff(wu,oi)}var pl=1/0,hf=pl,tl=-pl,Lo=tl,nu={point:Tu,lineStart:D,lineEnd:D,polygonStart:D,polygonEnd:D,result:function(){var Ue=[[pl,hf],[tl,Lo]];return tl=Lo=-(hf=pl=1/0),Ue}};function Tu(Ue,st){Ue<pl&&(pl=Ue),Ue>tl&&(tl=Ue),st<hf&&(hf=st),st>Lo&&(Lo=st)}var Sh=0,Hu=0,ov=0,Sc=0,fo=0,qf=0,Eh=0,Us=0,_s=0,kh,vf,Mo,ps,yo={point:Po,lineStart:Ec,lineEnd:df,polygonStart:function(){yo.lineStart=bd,yo.lineEnd=Au},polygonEnd:function(){yo.point=Po,yo.lineStart=Ec,yo.lineEnd=df},result:function(){var Ue=_s?[Eh/_s,Us/_s]:qf?[Sc/qf,fo/qf]:ov?[Sh/ov,Hu/ov]:[NaN,NaN];return Sh=Hu=ov=Sc=fo=qf=Eh=Us=_s=0,Ue}};function Po(Ue,st){Sh+=Ue,Hu+=st,++ov}function Ec(){yo.point=qs}function qs(Ue,st){yo.point=Hl,Po(Mo=Ue,ps=st)}function Hl(Ue,st){var Gt=Ue-Mo,Rt=st-ps,hr=S(Gt*Gt+Rt*Rt);Sc+=hr*(Mo+Ue)/2,fo+=hr*(ps+st)/2,qf+=hr,Po(Mo=Ue,ps=st)}function df(){yo.point=Po}function bd(){yo.point=Xp}function Au(){Gl(kh,vf)}function Xp(Ue,st){yo.point=Gl,Po(kh=Mo=Ue,vf=ps=st)}function Gl(Ue,st){var Gt=Ue-Mo,Rt=st-ps,hr=S(Gt*Gt+Rt*Rt);Sc+=hr*(Mo+Ue)/2,fo+=hr*(ps+st)/2,qf+=hr,hr=ps*Ue-Mo*st,Eh+=hr*(Mo+Ue),Us+=hr*(ps+st),_s+=hr*3,Po(Mo=Ue,ps=st)}function po(Ue){this._context=Ue}po.prototype={_radius:4.5,pointRadius:function(Ue){return this._radius=Ue,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(Ue,st){switch(this._point){case 0:{this._context.moveTo(Ue,st),this._point=1;break}case 1:{this._context.lineTo(Ue,st);break}default:{this._context.moveTo(Ue+this._radius,st),this._context.arc(Ue,st,this._radius,0,c);break}}},result:D};var zv=r(),pf,Yl,sv,Ch,lv,Mu={point:D,lineStart:function(){Mu.point=Ov},lineEnd:function(){pf&&uv(Yl,sv),Mu.point=D},polygonStart:function(){pf=!0},polygonEnd:function(){pf=null},result:function(){var Ue=+zv;return zv.reset(),Ue}};function Ov(Ue,st){Mu.point=uv,Yl=Ch=Ue,sv=lv=st}function uv(Ue,st){Ch-=Ue,lv-=st,zv.add(S(Ch*Ch+lv*lv)),Ch=Ue,lv=st}function Lh(){this._string=[]}Lh.prototype={_radius:4.5,_circle:fv(4.5),pointRadius:function(Ue){return(Ue=+Ue)!==this._radius&&(this._radius=Ue,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(Ue,st){switch(this._point){case 0:{this._string.push("M",Ue,",",st),this._point=1;break}case 1:{this._string.push("L",Ue,",",st);break}default:{this._circle==null&&(this._circle=fv(this._radius)),this._string.push("M",Ue,",",st,this._circle);break}}},result:function(){if(this._string.length){var Ue=this._string.join("");return this._string=[],Ue}else return null}};function fv(Ue){return"m0,"+Ue+"a"+Ue+","+Ue+" 0 1,1 0,"+-2*Ue+"a"+Ue+","+Ue+" 0 1,1 0,"+2*Ue+"z"}function wd(Ue,st){var Gt=4.5,Rt,hr;function Lr(zr){return zr&&(typeof Gt=="function"&&hr.pointRadius(+Gt.apply(this,arguments)),N(zr,Rt(hr))),hr.result()}return Lr.area=function(zr){return N(zr,Rt(Fs)),Fs.result()},Lr.measure=function(zr){return N(zr,Rt(Mu)),Mu.result()},Lr.bounds=function(zr){return N(zr,Rt(nu)),nu.result()},Lr.centroid=function(zr){return N(zr,Rt(yo)),yo.result()},Lr.projection=function(zr){return arguments.length?(Rt=zr==null?(Ue=null,dl):(Ue=zr).stream,Lr):Ue},Lr.context=function(zr){return arguments.length?(hr=zr==null?(st=null,new Lh):new po(st=zr),typeof Gt!="function"&&hr.pointRadius(Gt),Lr):st},Lr.pointRadius=function(zr){return arguments.length?(Gt=typeof zr=="function"?zr:(hr.pointRadius(+zr),+zr),Lr):Gt},Lr.projection(Ue).context(st)}function Zd(Ue){return{stream:zf(Ue)}}function zf(Ue){return function(st){var Gt=new Bv;for(var Rt in Ue)Gt[Rt]=Ue[Rt];return Gt.stream=st,Gt}}function Bv(){}Bv.prototype={constructor:Bv,point:function(Ue,st){this.stream.point(Ue,st)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function lc(Ue,st,Gt){var Rt=Ue.clipExtent&&Ue.clipExtent();return Ue.scale(150).translate([0,0]),Rt!=null&&Ue.clipExtent(null),N(Gt,Ue.stream(nu)),st(nu.result()),Rt!=null&&Ue.clipExtent(Rt),Ue}function Ph(Ue,st,Gt){return lc(Ue,function(Rt){var hr=st[1][0]-st[0][0],Lr=st[1][1]-st[0][1],zr=Math.min(hr/(Rt[1][0]-Rt[0][0]),Lr/(Rt[1][1]-Rt[0][1])),Zr=+st[0][0]+(hr-zr*(Rt[1][0]+Rt[0][0]))/2,an=+st[0][1]+(Lr-zr*(Rt[1][1]+Rt[0][1]))/2;Ue.scale(150*zr).translate([Zr,an])},Gt)}function Gu(Ue,st,Gt){return Ph(Ue,[[0,0],st],Gt)}function kc(Ue,st,Gt){return lc(Ue,function(Rt){var hr=+st,Lr=hr/(Rt[1][0]-Rt[0][0]),zr=(hr-Lr*(Rt[1][0]+Rt[0][0]))/2,Zr=-Lr*Rt[0][1];Ue.scale(150*Lr).translate([zr,Zr])},Gt)}function Of(Ue,st,Gt){return lc(Ue,function(Rt){var hr=+st,Lr=hr/(Rt[1][1]-Rt[0][1]),zr=-Lr*Rt[0][0],Zr=(hr-Lr*(Rt[1][1]+Rt[0][1]))/2;Ue.scale(150*Lr).translate([zr,Zr])},Gt)}var Nv=16,Uv=p(30*v);function Vv(Ue,st){return+st?hv(Ue,st):cv(Ue)}function cv(Ue){return zf({point:function(st,Gt){st=Ue(st,Gt),this.stream.point(st[0],st[1])}})}function hv(Ue,st){function Gt(Rt,hr,Lr,zr,Zr,an,Sn,Nr,tn,rn,An,Xn,Oi,Fi){var Hi=Sn-Rt,ji=Nr-hr,Un=Hi*Hi+ji*ji;if(Un>4*st&&Oi--){var ri=zr+rn,Ki=Zr+An,ca=an+Xn,Ja=S(ri*ri+Ki*Ki+ca*ca),_o=M(ca/=Ja),go=d(d(ca)-1)<o||d(Lr-tn)<o?(Lr+tn)/2:b(Ki,ri),bo=Ue(go,_o),Na=bo[0],ws=bo[1],Ko=Na-Rt,Uo=ws-hr,hi=ji*Ko-Hi*Uo;(hi*hi/Un>st||d((Hi*Ko+ji*Uo)/Un-.5)>.3||zr*rn+Zr*An+an*Xn<Uv)&&(Gt(Rt,hr,Lr,zr,Zr,an,Na,ws,go,ri/=Ja,Ki/=Ja,ca,Oi,Fi),Fi.point(Na,ws),Gt(Na,ws,go,ri,Ki,ca,Sn,Nr,tn,rn,An,Xn,Oi,Fi))}}return function(Rt){var hr,Lr,zr,Zr,an,Sn,Nr,tn,rn,An,Xn,Oi,Fi={point:Hi,lineStart:ji,lineEnd:ri,polygonStart:function(){Rt.polygonStart(),Fi.lineStart=Ki},polygonEnd:function(){Rt.polygonEnd(),Fi.lineStart=ji}};function Hi(_o,go){_o=Ue(_o,go),Rt.point(_o[0],_o[1])}function ji(){tn=NaN,Fi.point=Un,Rt.lineStart()}function Un(_o,go){var bo=ae([_o,go]),Na=Ue(_o,go);Gt(tn,rn,Nr,An,Xn,Oi,tn=Na[0],rn=Na[1],Nr=_o,An=bo[0],Xn=bo[1],Oi=bo[2],Nv,Rt),Rt.point(tn,rn)}function ri(){Fi.point=Hi,Rt.lineEnd()}function Ki(){ji(),Fi.point=ca,Fi.lineEnd=Ja}function ca(_o,go){Un(hr=_o,go),Lr=tn,zr=rn,Zr=An,an=Xn,Sn=Oi,Fi.point=Un}function Ja(){Gt(tn,rn,Nr,An,Xn,Oi,Lr,zr,hr,Zr,an,Sn,Nv,Rt),Fi.lineEnd=ri,ri()}return Fi}}var Hv=zf({point:function(Ue,st){this.stream.point(Ue*v,st*v)}});function iu(Ue){return zf({point:function(st,Gt){var Rt=Ue(st,Gt);return this.stream.point(Rt[0],Rt[1])}})}function vv(Ue,st,Gt,Rt,hr){function Lr(zr,Zr){return zr*=Rt,Zr*=hr,[st+Ue*zr,Gt-Ue*Zr]}return Lr.invert=function(zr,Zr){return[(zr-st)/Ue*Rt,(Gt-Zr)/Ue*hr]},Lr}function ol(Ue,st,Gt,Rt,hr,Lr){var zr=p(Lr),Zr=_(Lr),an=zr*Ue,Sn=Zr*Ue,Nr=zr/Ue,tn=Zr/Ue,rn=(Zr*Gt-zr*st)/Ue,An=(Zr*st+zr*Gt)/Ue;function Xn(Oi,Fi){return Oi*=Rt,Fi*=hr,[an*Oi-Sn*Fi+st,Gt-Sn*Oi-an*Fi]}return Xn.invert=function(Oi,Fi){return[Rt*(Nr*Oi-tn*Fi+rn),hr*(An-tn*Oi-Nr*Fi)]},Xn}function au(Ue){return Bf(function(){return Ue})()}function Bf(Ue){var st,Gt=150,Rt=480,hr=250,Lr=0,zr=0,Zr=0,an=0,Sn=0,Nr,tn=0,rn=1,An=1,Xn=null,Oi=ur,Fi=null,Hi,ji,Un,ri=dl,Ki=.5,ca,Ja,_o,go,bo;function Na(hi){return _o(hi[0]*v,hi[1]*v)}function ws(hi){return hi=_o.invert(hi[0],hi[1]),hi&&[hi[0]*h,hi[1]*h]}Na.stream=function(hi){return go&&bo===hi?go:go=Hv(iu(Nr)(Oi(ca(ri(bo=hi)))))},Na.preclip=function(hi){return arguments.length?(Oi=hi,Xn=void 0,Uo()):Oi},Na.postclip=function(hi){return arguments.length?(ri=hi,Fi=Hi=ji=Un=null,Uo()):ri},Na.clipAngle=function(hi){return arguments.length?(Oi=+hi?yn(Xn=hi*v):(Xn=null,ur),Uo()):Xn*h},Na.clipExtent=function(hi){return arguments.length?(ri=hi==null?(Fi=Hi=ji=Un=null,dl):Wn(Fi=+hi[0][0],Hi=+hi[0][1],ji=+hi[1][0],Un=+hi[1][1]),Uo()):Fi==null?null:[[Fi,Hi],[ji,Un]]},Na.scale=function(hi){return arguments.length?(Gt=+hi,Ko()):Gt},Na.translate=function(hi){return arguments.length?(Rt=+hi[0],hr=+hi[1],Ko()):[Rt,hr]},Na.center=function(hi){return arguments.length?(Lr=hi[0]%360*v,zr=hi[1]%360*v,Ko()):[Lr*h,zr*h]},Na.rotate=function(hi){return arguments.length?(Zr=hi[0]%360*v,an=hi[1]%360*v,Sn=hi.length>2?hi[2]%360*v:0,Ko()):[Zr*h,an*h,Sn*h]},Na.angle=function(hi){return arguments.length?(tn=hi%360*v,Ko()):tn*h},Na.reflectX=function(hi){return arguments.length?(rn=hi?-1:1,Ko()):rn<0},Na.reflectY=function(hi){return arguments.length?(An=hi?-1:1,Ko()):An<0},Na.precision=function(hi){return arguments.length?(ca=Vv(Ja,Ki=hi*hi),Uo()):S(Ki)},Na.fitExtent=function(hi,ea){return Ph(Na,hi,ea)},Na.fitSize=function(hi,ea){return Gu(Na,hi,ea)},Na.fitWidth=function(hi,ea){return kc(Na,hi,ea)},Na.fitHeight=function(hi,ea){return Of(Na,hi,ea)};function Ko(){var hi=ol(Gt,0,0,rn,An,tn).apply(null,st(Lr,zr)),ea=(tn?ol:vv)(Gt,Rt-hi[0],hr-hi[1],rn,An,tn);return Nr=Rr(Zr,an,Sn),Ja=yr(st,ea),_o=yr(Nr,Ja),ca=Vv(Ja,Ki),Uo()}function Uo(){return go=bo=null,Na}return function(){return st=Ue.apply(this,arguments),Na.invert=st.invert&&ws,Ko()}}function Vs(Ue){var st=0,Gt=l/3,Rt=Bf(Ue),hr=Rt(st,Gt);return hr.parallels=function(Lr){return arguments.length?Rt(st=Lr[0]*v,Gt=Lr[1]*v):[st*h,Gt*h]},hr}function Kc(Ue){var st=p(Ue);function Gt(Rt,hr){return[Rt*st,_(hr)/st]}return Gt.invert=function(Rt,hr){return[Rt/st,M(hr*st)]},Gt}function Nf(Ue,st){var Gt=_(Ue),Rt=(Gt+_(st))/2;if(d(Rt)<o)return Kc(Ue);var hr=1+Gt*(2*Rt-Gt),Lr=S(hr)/Rt;function zr(Zr,an){var Sn=S(hr-2*Rt*_(an))/Rt;return[Sn*_(Zr*=Rt),Lr-Sn*p(Zr)]}return zr.invert=function(Zr,an){var Sn=Lr-an,Nr=b(Zr,d(Sn))*E(Sn);return Sn*Rt<0&&(Nr-=l*E(Zr)*E(Sn)),[Nr/Rt,M((hr-(Zr*Zr+Sn*Sn)*Rt*Rt)/(2*Rt))]},zr}function Dl(){return Vs(Nf).scale(155.424).center([0,33.6442])}function zs(){return Dl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function jd(Ue){var st=Ue.length;return{point:function(Gt,Rt){for(var hr=-1;++hr<st;)Ue[hr].point(Gt,Rt)},sphere:function(){for(var Gt=-1;++Gt<st;)Ue[Gt].sphere()},lineStart:function(){for(var Gt=-1;++Gt<st;)Ue[Gt].lineStart()},lineEnd:function(){for(var Gt=-1;++Gt<st;)Ue[Gt].lineEnd()},polygonStart:function(){for(var Gt=-1;++Gt<st;)Ue[Gt].polygonStart()},polygonEnd:function(){for(var Gt=-1;++Gt<st;)Ue[Gt].polygonEnd()}}}function Kd(){var Ue,st,Gt=zs(),Rt,hr=Dl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Lr,zr=Dl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Zr,an,Sn={point:function(rn,An){an=[rn,An]}};function Nr(rn){var An=rn[0],Xn=rn[1];return an=null,Rt.point(An,Xn),an||(Lr.point(An,Xn),an)||(Zr.point(An,Xn),an)}Nr.invert=function(rn){var An=Gt.scale(),Xn=Gt.translate(),Oi=(rn[0]-Xn[0])/An,Fi=(rn[1]-Xn[1])/An;return(Fi>=.12&&Fi<.234&&Oi>=-.425&&Oi<-.214?hr:Fi>=.166&&Fi<.234&&Oi>=-.214&&Oi<-.115?zr:Gt).invert(rn)},Nr.stream=function(rn){return Ue&&st===rn?Ue:Ue=jd([Gt.stream(st=rn),hr.stream(rn),zr.stream(rn)])},Nr.precision=function(rn){return arguments.length?(Gt.precision(rn),hr.precision(rn),zr.precision(rn),tn()):Gt.precision()},Nr.scale=function(rn){return arguments.length?(Gt.scale(rn),hr.scale(rn*.35),zr.scale(rn),Nr.translate(Gt.translate())):Gt.scale()},Nr.translate=function(rn){if(!arguments.length)return Gt.translate();var An=Gt.scale(),Xn=+rn[0],Oi=+rn[1];return Rt=Gt.translate(rn).clipExtent([[Xn-.455*An,Oi-.238*An],[Xn+.455*An,Oi+.238*An]]).stream(Sn),Lr=hr.translate([Xn-.307*An,Oi+.201*An]).clipExtent([[Xn-.425*An+o,Oi+.12*An+o],[Xn-.214*An-o,Oi+.234*An-o]]).stream(Sn),Zr=zr.translate([Xn-.205*An,Oi+.212*An]).clipExtent([[Xn-.214*An+o,Oi+.166*An+o],[Xn-.115*An-o,Oi+.234*An-o]]).stream(Sn),tn()},Nr.fitExtent=function(rn,An){return Ph(Nr,rn,An)},Nr.fitSize=function(rn,An){return Gu(Nr,rn,An)},Nr.fitWidth=function(rn,An){return kc(Nr,rn,An)},Nr.fitHeight=function(rn,An){return Of(Nr,rn,An)};function tn(){return Ue=st=null,Nr}return Nr.scale(1070)}function Su(Ue){return function(st,Gt){var Rt=p(st),hr=p(Gt),Lr=Ue(Rt*hr);return[Lr*hr*_(st),Lr*_(Gt)]}}function gf(Ue){return function(st,Gt){var Rt=S(st*st+Gt*Gt),hr=Ue(Rt),Lr=_(hr),zr=p(hr);return[b(st*Lr,Rt*zr),M(Rt&&Gt*Lr/Rt)]}}var ou=Su(function(Ue){return S(2/(1+Ue))});ou.invert=gf(function(Ue){return 2*M(Ue/2)});function Jd(){return au(ou).scale(124.75).clipAngle(180-.001)}var Jc=Su(function(Ue){return(Ue=C(Ue))&&Ue/_(Ue)});Jc.invert=gf(function(Ue){return Ue});function Qc(){return au(Jc).scale(79.4188).clipAngle(180-.001)}function Eu(Ue,st){return[Ue,T(g((u+st)/2))]}Eu.invert=function(Ue,st){return[Ue,2*x(A(st))-u]};function Gv(){return dv(Eu).scale(961/c)}function dv(Ue){var st=au(Ue),Gt=st.center,Rt=st.scale,hr=st.translate,Lr=st.clipExtent,zr=null,Zr,an,Sn;st.scale=function(tn){return arguments.length?(Rt(tn),Nr()):Rt()},st.translate=function(tn){return arguments.length?(hr(tn),Nr()):hr()},st.center=function(tn){return arguments.length?(Gt(tn),Nr()):Gt()},st.clipExtent=function(tn){return arguments.length?(tn==null?zr=Zr=an=Sn=null:(zr=+tn[0][0],Zr=+tn[0][1],an=+tn[1][0],Sn=+tn[1][1]),Nr()):zr==null?null:[[zr,Zr],[an,Sn]]};function Nr(){var tn=l*Rt(),rn=st(on(st.rotate()).invert([0,0]));return Lr(zr==null?[[rn[0]-tn,rn[1]-tn],[rn[0]+tn,rn[1]+tn]]:Ue===Eu?[[Math.max(rn[0]-tn,zr),Zr],[Math.min(rn[0]+tn,an),Sn]]:[[zr,Math.max(rn[1]-tn,Zr)],[an,Math.min(rn[1]+tn,Sn)]])}return Nr()}function pv(Ue){return g((u+Ue)/2)}function Yv(Ue,st){var Gt=p(Ue),Rt=Ue===st?_(Ue):T(Gt/p(st))/T(pv(st)/pv(Ue)),hr=Gt*k(pv(Ue),Rt)/Rt;if(!Rt)return Eu;function Lr(zr,Zr){hr>0?Zr<-u+o&&(Zr=-u+o):Zr>u-o&&(Zr=u-o);var an=hr/k(pv(Zr),Rt);return[an*_(Rt*zr),hr-an*p(Rt*zr)]}return Lr.invert=function(zr,Zr){var an=hr-Zr,Sn=E(Rt)*S(zr*zr+an*an),Nr=b(zr,d(an))*E(an);return an*Rt<0&&(Nr-=l*E(zr)*E(an)),[Nr/Rt,2*x(k(hr/Sn,1/Rt))-u]},Lr}function $c(){return Vs(Yv).scale(109.5).parallels([30,30])}function Uf(Ue,st){return[Ue,st]}Uf.invert=Uf;function Cc(){return au(Uf).scale(152.63)}function Rh(Ue,st){var Gt=p(Ue),Rt=Ue===st?_(Ue):(Gt-p(st))/(st-Ue),hr=Gt/Rt+Ue;if(d(Rt)<o)return Uf;function Lr(zr,Zr){var an=hr-Zr,Sn=Rt*zr;return[an*_(Sn),hr-an*p(Sn)]}return Lr.invert=function(zr,Zr){var an=hr-Zr,Sn=b(zr,d(an))*E(an);return an*Rt<0&&(Sn-=l*E(zr)*E(an)),[Sn/Rt,hr-E(Rt)*S(zr*zr+an*an)]},Lr}function Td(){return Vs(Rh).scale(131.154).center([0,13.9389])}var No=1.340264,eh=-.081106,Lc=893e-6,Pc=.003796,th=S(3)/2,yf=12;function uc(Ue,st){var Gt=M(th*_(st)),Rt=Gt*Gt,hr=Rt*Rt*Rt;return[Ue*p(Gt)/(th*(No+3*eh*Rt+hr*(7*Lc+9*Pc*Rt))),Gt*(No+eh*Rt+hr*(Lc+Pc*Rt))]}uc.invert=function(Ue,st){for(var Gt=st,Rt=Gt*Gt,hr=Rt*Rt*Rt,Lr=0,zr,Zr,an;Lr<yf&&(Zr=Gt*(No+eh*Rt+hr*(Lc+Pc*Rt))-st,an=No+3*eh*Rt+hr*(7*Lc+9*Pc*Rt),Gt-=zr=Zr/an,Rt=Gt*Gt,hr=Rt*Rt*Rt,!(d(zr)<s));++Lr);return[th*Ue*(No+3*eh*Rt+hr*(7*Lc+9*Pc*Rt))/p(Gt),M(_(Gt)/th)]};function Wv(){return au(uc).scale(177.158)}function Hs(Ue,st){var Gt=p(st),Rt=p(Ue)*Gt;return[Gt*_(Ue)/Rt,_(st)/Rt]}Hs.invert=gf(x);function gv(){return au(Hs).scale(144.049).clipAngle(60)}function Vf(){var Ue=1,st=0,Gt=0,Rt=1,hr=1,Lr=0,zr,Zr,an=null,Sn,Nr,tn,rn=1,An=1,Xn=zf({point:function(ri,Ki){var ca=Un([ri,Ki]);this.stream.point(ca[0],ca[1])}}),Oi=dl,Fi,Hi;function ji(){return rn=Ue*Rt,An=Ue*hr,Fi=Hi=null,Un}function Un(ri){var Ki=ri[0]*rn,ca=ri[1]*An;if(Lr){var Ja=ca*zr-Ki*Zr;Ki=Ki*zr+ca*Zr,ca=Ja}return[Ki+st,ca+Gt]}return Un.invert=function(ri){var Ki=ri[0]-st,ca=ri[1]-Gt;if(Lr){var Ja=ca*zr+Ki*Zr;Ki=Ki*zr-ca*Zr,ca=Ja}return[Ki/rn,ca/An]},Un.stream=function(ri){return Fi&&Hi===ri?Fi:Fi=Xn(Oi(Hi=ri))},Un.postclip=function(ri){return arguments.length?(Oi=ri,an=Sn=Nr=tn=null,ji()):Oi},Un.clipExtent=function(ri){return arguments.length?(Oi=ri==null?(an=Sn=Nr=tn=null,dl):Wn(an=+ri[0][0],Sn=+ri[0][1],Nr=+ri[1][0],tn=+ri[1][1]),ji()):an==null?null:[[an,Sn],[Nr,tn]]},Un.scale=function(ri){return arguments.length?(Ue=+ri,ji()):Ue},Un.translate=function(ri){return arguments.length?(st=+ri[0],Gt=+ri[1],ji()):[st,Gt]},Un.angle=function(ri){return arguments.length?(Lr=ri%360*v,Zr=_(Lr),zr=p(Lr),ji()):Lr*h},Un.reflectX=function(ri){return arguments.length?(Rt=ri?-1:1,ji()):Rt<0},Un.reflectY=function(ri){return arguments.length?(hr=ri?-1:1,ji()):hr<0},Un.fitExtent=function(ri,Ki){return Ph(Un,ri,Ki)},Un.fitSize=function(ri,Ki){return Gu(Un,ri,Ki)},Un.fitWidth=function(ri,Ki){return kc(Un,ri,Ki)},Un.fitHeight=function(ri,Ki){return Of(Un,ri,Ki)},Un}function Hf(Ue,st){var Gt=st*st,Rt=Gt*Gt;return[Ue*(.8707-.131979*Gt+Rt*(-.013791+Rt*(.003971*Gt-.001529*Rt))),st*(1.007226+Gt*(.015085+Rt*(-.044475+.028874*Gt-.005916*Rt)))]}Hf.invert=function(Ue,st){var Gt=st,Rt=25,hr;do{var Lr=Gt*Gt,zr=Lr*Lr;Gt-=hr=(Gt*(1.007226+Lr*(.015085+zr*(-.044475+.028874*Lr-.005916*zr)))-st)/(1.007226+Lr*(.015085*3+zr*(-.044475*7+.028874*9*Lr-.005916*11*zr)))}while(d(hr)>o&&--Rt>0);return[Ue/(.8707+(Lr=Gt*Gt)*(-.131979+Lr*(-.013791+Lr*Lr*Lr*(.003971-.001529*Lr)))),Gt]};function Gf(){return au(Hf).scale(175.295)}function bs(Ue,st){return[p(st)*_(Ue),_(st)]}bs.invert=gf(M);function yl(){return au(bs).scale(249.5).clipAngle(90+o)}function Yu(Ue,st){var Gt=p(st),Rt=1+p(Ue)*Gt;return[Gt*_(Ue)/Rt,_(st)/Rt]}Yu.invert=gf(function(Ue){return 2*x(Ue)});function Yf(){return au(Yu).scale(250).clipAngle(142)}function Wu(Ue,st){return[T(g((u+st)/2)),-Ue]}Wu.invert=function(Ue,st){return[-st,2*x(A(Ue))-u]};function Dh(){var Ue=dv(Wu),st=Ue.center,Gt=Ue.rotate;return Ue.center=function(Rt){return arguments.length?st([-Rt[1],Rt[0]]):(Rt=st(),[Rt[1],-Rt[0]])},Ue.rotate=function(Rt){return arguments.length?Gt([Rt[0],Rt[1],Rt.length>2?Rt[2]+90:90]):(Rt=Gt(),[Rt[0],Rt[1],Rt[2]-90])},Gt([0,0,90]).scale(159.155)}e.geoAlbers=zs,e.geoAlbersUsa=Kd,e.geoArea=te,e.geoAzimuthalEqualArea=Jd,e.geoAzimuthalEqualAreaRaw=ou,e.geoAzimuthalEquidistant=Qc,e.geoAzimuthalEquidistantRaw=Jc,e.geoBounds=gt,e.geoCentroid=Ot,e.geoCircle=vi,e.geoClipAntimeridian=ur,e.geoClipCircle=yn,e.geoClipExtent=zi,e.geoClipRectangle=Wn,e.geoConicConformal=$c,e.geoConicConformalRaw=Yv,e.geoConicEqualArea=Dl,e.geoConicEqualAreaRaw=Nf,e.geoConicEquidistant=Td,e.geoConicEquidistantRaw=Rh,e.geoContains=ls,e.geoDistance=Co,e.geoEqualEarth=Wv,e.geoEqualEarthRaw=uc,e.geoEquirectangular=Cc,e.geoEquirectangularRaw=Uf,e.geoGnomonic=gv,e.geoGnomonicRaw=Hs,e.geoGraticule=sc,e.geoGraticule10=Pl,e.geoIdentity=Vf,e.geoInterpolate=us,e.geoLength=al,e.geoMercator=Gv,e.geoMercatorRaw=Eu,e.geoNaturalEarth1=Gf,e.geoNaturalEarth1Raw=Hf,e.geoOrthographic=yl,e.geoOrthographicRaw=bs,e.geoPath=wd,e.geoProjection=au,e.geoProjectionMutator=Bf,e.geoRotation=on,e.geoStereographic=Yf,e.geoStereographicRaw=Yu,e.geoStream=N,e.geoTransform=Zd,e.geoTransverseMercator=Dh,e.geoTransverseMercatorRaw=Wu,Object.defineProperty(e,"__esModule",{value:!0})})});var eRe=ie((ID,$6e)=>{(function(e,t){typeof ID=="object"&&typeof $6e!="undefined"?t(ID,FY(),ZE()):typeof define=="function"&&define.amd?define(["exports","d3-geo","d3-array"],t):t(e.d3=e.d3||{},e.d3,e.d3)})(ID,function(e,t,r){"use strict";var i=Math.abs,n=Math.atan,a=Math.atan2,o=Math.cos,s=Math.exp,l=Math.floor,u=Math.log,f=Math.max,c=Math.min,h=Math.pow,v=Math.round,d=Math.sign||function(de){return de>0?1:de<0?-1:0},x=Math.sin,b=Math.tan,p=1e-6,w=1e-12,A=Math.PI,T=A/2,k=A/4,_=Math.SQRT1_2,E=O(2),S=O(A),g=A*2,C=180/A,M=A/180;function P(de){return de?de/Math.sin(de):1}function D(de){return de>1?T:de<-1?-T:Math.asin(de)}function q(de){return de>1?0:de<-1?A:Math.acos(de)}function O(de){return de>0?Math.sqrt(de):0}function U(de){return de=s(2*de),(de-1)/(de+1)}function B(de){return(s(de)-s(-de))/2}function F(de){return(s(de)+s(-de))/2}function N(de){return u(de+O(de*de+1))}function X(de){return u(de+O(de*de-1))}function K(de){var we=b(de/2),Le=2*u(o(de/2))/(we*we);function De(He,Ve){var Qe=o(He),zt=o(Ve),Jt=x(Ve),qt=zt*Qe,Qt=-((1-qt?u((1+qt)/2)/(1-qt):-.5)+Le/(1+qt));return[Qt*zt*x(He),Qt*Jt]}return De.invert=function(He,Ve){var Qe=O(He*He+Ve*Ve),zt=-de/2,Jt=50,qt;if(!Qe)return[0,0];do{var Qt=zt/2,or=o(Qt),_r=x(Qt),Sr=_r/or,Hr=-u(i(or));zt-=qt=(2/Sr*Hr-Le*Sr-Qe)/(-Hr/(_r*_r)+1-Le/(2*or*or))*(or<0?.7:1)}while(i(qt)>p&&--Jt>0);var un=x(zt);return[a(He*un,Qe*o(zt)),D(Ve*un/Qe)]},De}function ne(){var de=T,we=t.geoProjectionMutator(K),Le=we(de);return Le.radius=function(De){return arguments.length?we(de=De*M):de*C},Le.scale(179.976).clipAngle(147)}function fe(de,we){var Le=o(we),De=P(q(Le*o(de/=2)));return[2*Le*x(de)*De,x(we)*De]}fe.invert=function(de,we){if(!(de*de+4*we*we>A*A+p)){var Le=de,De=we,He=25;do{var Ve=x(Le),Qe=x(Le/2),zt=o(Le/2),Jt=x(De),qt=o(De),Qt=x(2*De),or=Jt*Jt,_r=qt*qt,Sr=Qe*Qe,Hr=1-_r*zt*zt,un=Hr?q(qt*zt)*O(Ln=1/Hr):Ln=0,Ln,yi=2*un*qt*Qe-de,Ji=un*Jt-we,ra=Ln*(_r*Sr+un*qt*zt*or),sa=Ln*(.5*Ve*Qt-un*2*Jt*Qe),pa=Ln*.25*(Qt*Qe-un*Jt*_r*Ve),Ro=Ln*(or*zt+un*Sr*qt),Jo=sa*pa-Ro*ra;if(!Jo)break;var ba=(Ji*sa-yi*Ro)/Jo,qa=(yi*pa-Ji*ra)/Jo;Le-=ba,De-=qa}while((i(ba)>p||i(qa)>p)&&--He>0);return[Le,De]}};function ue(){return t.geoProjection(fe).scale(152.63)}function ee(de){var we=x(de),Le=o(de),De=de>=0?1:-1,He=b(De*de),Ve=(1+we-Le)/2;function Qe(zt,Jt){var qt=o(Jt),Qt=o(zt/=2);return[(1+qt)*x(zt),(De*Jt>-a(Qt,He)-.001?0:-De*10)+Ve+x(Jt)*Le-(1+qt)*we*Qt]}return Qe.invert=function(zt,Jt){var qt=0,Qt=0,or=50;do{var _r=o(qt),Sr=x(qt),Hr=o(Qt),un=x(Qt),Ln=1+Hr,yi=Ln*Sr-zt,Ji=Ve+un*Le-Ln*we*_r-Jt,ra=Ln*_r/2,sa=-Sr*un,pa=we*Ln*Sr/2,Ro=Le*Hr+we*_r*un,Jo=sa*pa-Ro*ra,ba=(Ji*sa-yi*Ro)/Jo/2,qa=(yi*pa-Ji*ra)/Jo;i(qa)>2&&(qa/=2),qt-=ba,Qt-=qa}while((i(ba)>p||i(qa)>p)&&--or>0);return De*Qt>-a(o(qt),He)-.001?[qt*2,Qt]:null},Qe}function Z(){var de=20*M,we=de>=0?1:-1,Le=b(we*de),De=t.geoProjectionMutator(ee),He=De(de),Ve=He.stream;return He.parallel=function(Qe){return arguments.length?(Le=b((we=(de=Qe*M)>=0?1:-1)*de),De(de)):de*C},He.stream=function(Qe){var zt=He.rotate(),Jt=Ve(Qe),qt=(He.rotate([0,0]),Ve(Qe)),Qt=He.precision();return He.rotate(zt),Jt.sphere=function(){qt.polygonStart(),qt.lineStart();for(var or=we*-180;we*or<180;or+=we*90)qt.point(or,we*90);if(de)for(;we*(or-=3*we*Qt)>=-180;)qt.point(or,we*-a(o(or*M/2),Le)*C);qt.lineEnd(),qt.polygonEnd()},Jt},He.scale(218.695).center([0,28.0974])}function oe(de,we){var Le=b(we/2),De=O(1-Le*Le),He=1+De*o(de/=2),Ve=x(de)*De/He,Qe=Le/He,zt=Ve*Ve,Jt=Qe*Qe;return[4/3*Ve*(3+zt-3*Jt),4/3*Qe*(3+3*zt-Jt)]}oe.invert=function(de,we){if(de*=3/8,we*=3/8,!de&&i(we)>1)return null;var Le=de*de,De=we*we,He=1+Le+De,Ve=O((He-O(He*He-4*we*we))/2),Qe=D(Ve)/3,zt=Ve?X(i(we/Ve))/3:N(i(de))/3,Jt=o(Qe),qt=F(zt),Qt=qt*qt-Jt*Jt;return[d(de)*2*a(B(zt)*Jt,.25-Qt),d(we)*2*a(qt*x(Qe),.25+Qt)]};function ce(){return t.geoProjection(oe).scale(66.1603)}var le=O(8),me=u(1+E);function he(de,we){var Le=i(we);return Le<k?[de,u(b(k+we/2))]:[de*o(Le)*(2*E-1/x(Le)),d(we)*(2*E*(Le-k)-u(b(Le/2)))]}he.invert=function(de,we){if((Ve=i(we))<me)return[de,2*n(s(we))-T];var Le=k,De=25,He,Ve;do{var Qe=o(Le/2),zt=b(Le/2);Le-=He=(le*(Le-k)-u(zt)-Ve)/(le-Qe*Qe/(2*zt))}while(i(He)>w&&--De>0);return[de/(o(Le)*(le-1/x(Le))),d(we)*Le]};function te(){return t.geoProjection(he).scale(112.314)}function ge(de){var we=2*A/de;function Le(De,He){var Ve=t.geoAzimuthalEquidistantRaw(De,He);if(i(De)>T){var Qe=a(Ve[1],Ve[0]),zt=O(Ve[0]*Ve[0]+Ve[1]*Ve[1]),Jt=we*v((Qe-T)/we)+T,qt=a(x(Qe-=Jt),2-o(Qe));Qe=Jt+D(A/zt*x(qt))-qt,Ve[0]=zt*o(Qe),Ve[1]=zt*x(Qe)}return Ve}return Le.invert=function(De,He){var Ve=O(De*De+He*He);if(Ve>T){var Qe=a(He,De),zt=we*v((Qe-T)/we)+T,Jt=Qe>zt?-1:1,qt=Ve*o(zt-Qe),Qt=1/b(Jt*q((qt-A)/O(A*(A-2*qt)+Ve*Ve)));Qe=zt+2*n((Qt+Jt*O(Qt*Qt-3))/3),De=Ve*o(Qe),He=Ve*x(Qe)}return t.geoAzimuthalEquidistantRaw.invert(De,He)},Le}function ae(){var de=5,we=t.geoProjectionMutator(ge),Le=we(de),De=Le.stream,He=.01,Ve=-o(He*M),Qe=x(He*M);return Le.lobes=function(zt){return arguments.length?we(de=+zt):de},Le.stream=function(zt){var Jt=Le.rotate(),qt=De(zt),Qt=(Le.rotate([0,0]),De(zt));return Le.rotate(Jt),qt.sphere=function(){Qt.polygonStart(),Qt.lineStart();for(var or=0,_r=360/de,Sr=2*A/de,Hr=90-180/de,un=T;or<de;++or,Hr-=_r,un-=Sr)Qt.point(a(Qe*o(un),Ve)*C,D(Qe*x(un))*C),Hr<-90?(Qt.point(-90,-180-Hr-He),Qt.point(-90,-180-Hr+He)):(Qt.point(90,Hr+He),Qt.point(90,Hr-He));Qt.lineEnd(),Qt.polygonEnd()},qt},Le.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)}function _e(de,we){if(arguments.length<2&&(we=de),we===1)return t.geoAzimuthalEqualAreaRaw;if(we===1/0)return Ce;function Le(De,He){var Ve=t.geoAzimuthalEqualAreaRaw(De/we,He);return Ve[0]*=de,Ve}return Le.invert=function(De,He){var Ve=t.geoAzimuthalEqualAreaRaw.invert(De/de,He);return Ve[0]*=we,Ve},Le}function Ce(de,we){return[de*o(we)/o(we/=2),2*x(we)]}Ce.invert=function(de,we){var Le=2*D(we/2);return[de*o(Le/2)/o(Le),Le]};function qe(){var de=2,we=t.geoProjectionMutator(_e),Le=we(de);return Le.coefficient=function(De){return arguments.length?we(de=+De):de},Le.scale(169.529)}function rt(de,we,Le){var De=100,He,Ve,Qe;Le=Le===void 0?0:+Le,we=+we;do Ve=de(Le),Qe=de(Le+p),Ve===Qe&&(Qe=Ve+p),Le-=He=-1*p*(Ve-we)/(Ve-Qe);while(De-- >0&&i(He)>p);return De<0?NaN:Le}function Re(de,we,Le){return we===void 0&&(we=40),Le===void 0&&(Le=w),function(De,He,Ve,Qe){var zt,Jt,qt;Ve=Ve===void 0?0:+Ve,Qe=Qe===void 0?0:+Qe;for(var Qt=0;Qt<we;Qt++){var or=de(Ve,Qe),_r=or[0]-De,Sr=or[1]-He;if(i(_r)<Le&&i(Sr)<Le)break;var Hr=_r*_r+Sr*Sr;if(Hr>zt){Ve-=Jt/=2,Qe-=qt/=2;continue}zt=Hr;var un=(Ve>0?-1:1)*Le,Ln=(Qe>0?-1:1)*Le,yi=de(Ve+un,Qe),Ji=de(Ve,Qe+Ln),ra=(yi[0]-or[0])/un,sa=(yi[1]-or[1])/un,pa=(Ji[0]-or[0])/Ln,Ro=(Ji[1]-or[1])/Ln,Jo=Ro*ra-sa*pa,ba=(i(Jo)<.5?.5:1)/Jo;if(Jt=(Sr*pa-_r*Ro)*ba,qt=(_r*sa-Sr*ra)*ba,Ve+=Jt,Qe+=qt,i(Jt)<Le&&i(qt)<Le)break}return[Ve,Qe]}}function Ie(){var de=_e(1.68,2),we=1.4,Le=12;function De(He,Ve){if(He+Ve<-we){var Qe=(He-Ve+1.6)*(He+Ve+we)/8;He+=Qe,Ve-=.8*Qe*x(Ve+A/2)}var zt=de(He,Ve),Jt=(1-o(He*Ve))/Le;return zt[1]<0&&(zt[0]*=1+Jt),zt[1]>0&&(zt[1]*=1+Jt/1.5*zt[0]*zt[0]),zt}return De.invert=Re(De),De}function ot(){return t.geoProjection(Ie()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function lt(de,we){var Le=de*x(we),De=30,He;do we-=He=(we+x(we)-Le)/(1+o(we));while(i(He)>p&&--De>0);return we/2}function ht(de,we,Le){function De(He,Ve){return[de*He*o(Ve=lt(Le,Ve)),we*x(Ve)]}return De.invert=function(He,Ve){return Ve=D(Ve/we),[He/(de*o(Ve)),D((2*Ve+x(2*Ve))/Le)]},De}var xt=ht(E/T,E,A);function Vt(){return t.geoProjection(xt).scale(169.529)}var Ht=2.00276,Me=1.11072;function Ke(de,we){var Le=lt(A,we);return[Ht*de/(1/o(we)+Me/o(Le)),(we+E*x(Le))/Ht]}Ke.invert=function(de,we){var Le=Ht*we,De=we<0?-k:k,He=25,Ve,Qe;do Qe=Le-E*x(De),De-=Ve=(x(2*De)+2*De-A*x(Qe))/(2*o(2*De)+2+A*o(Qe)*E*o(De));while(i(Ve)>p&&--He>0);return Qe=Le-E*x(De),[de*(1/o(Qe)+Me/o(De))/Ht,Qe]};function We(){return t.geoProjection(Ke).scale(160.857)}function et(de){var we=0,Le=t.geoProjectionMutator(de),De=Le(we);return De.parallel=function(He){return arguments.length?Le(we=He*M):we*C},De}function vt(de,we){return[de*o(we),we]}vt.invert=function(de,we){return[de/o(we),we]};function at(){return t.geoProjection(vt).scale(152.63)}function Xe(de){if(!de)return vt;var we=1/b(de);function Le(De,He){var Ve=we+de-He,Qe=Ve&&De*o(He)/Ve;return[Ve*x(Qe),we-Ve*o(Qe)]}return Le.invert=function(De,He){var Ve=O(De*De+(He=we-He)*He),Qe=we+de-Ve;return[Ve/o(Qe)*a(De,He),Qe]},Le}function dt(){return et(Xe).scale(123.082).center([0,26.1441]).parallel(45)}function _t(de){function we(Le,De){var He=T-De,Ve=He&&Le*de*x(He)/He;return[He*x(Ve)/de,T-He*o(Ve)]}return we.invert=function(Le,De){var He=Le*de,Ve=T-De,Qe=O(He*He+Ve*Ve),zt=a(He,Ve);return[(Qe?Qe/x(Qe):1)*zt/de,T-Qe]},we}function $t(){var de=.5,we=t.geoProjectionMutator(_t),Le=we(de);return Le.fraction=function(De){return arguments.length?we(de=+De):de},Le.scale(158.837)}var Ut=ht(1,4/A,A);function fr(){return t.geoProjection(Ut).scale(152.63)}function ar(de,we,Le,De,He,Ve){var Qe=o(Ve),zt;if(i(de)>1||i(Ve)>1)zt=q(Le*He+we*De*Qe);else{var Jt=x(de/2),qt=x(Ve/2);zt=2*D(O(Jt*Jt+we*De*qt*qt))}return i(zt)>p?[zt,a(De*x(Ve),we*He-Le*De*Qe)]:[0,0]}function cr(de,we,Le){return q((de*de+we*we-Le*Le)/(2*de*we))}function It(de){return de-2*A*l((de+A)/(2*A))}function gt(de,we,Le){for(var De=[[de[0],de[1],x(de[1]),o(de[1])],[we[0],we[1],x(we[1]),o(we[1])],[Le[0],Le[1],x(Le[1]),o(Le[1])]],He=De[2],Ve,Qe=0;Qe<3;++Qe,He=Ve)Ve=De[Qe],He.v=ar(Ve[1]-He[1],He[3],He[2],Ve[3],Ve[2],Ve[0]-He[0]),He.point=[0,0];var zt=cr(De[0].v[0],De[2].v[0],De[1].v[0]),Jt=cr(De[0].v[0],De[1].v[0],De[2].v[0]),qt=A-zt;De[2].point[1]=0,De[0].point[0]=-(De[1].point[0]=De[0].v[0]/2);var Qt=[De[2].point[0]=De[0].point[0]+De[2].v[0]*o(zt),2*(De[0].point[1]=De[1].point[1]=De[2].v[0]*x(zt))];function or(_r,Sr){var Hr=x(Sr),un=o(Sr),Ln=new Array(3),yi;for(yi=0;yi<3;++yi){var Ji=De[yi];if(Ln[yi]=ar(Sr-Ji[1],Ji[3],Ji[2],un,Hr,_r-Ji[0]),!Ln[yi][0])return Ji.point;Ln[yi][1]=It(Ln[yi][1]-Ji.v[1])}var ra=Qt.slice();for(yi=0;yi<3;++yi){var sa=yi==2?0:yi+1,pa=cr(De[yi].v[0],Ln[yi][0],Ln[sa][0]);Ln[yi][1]<0&&(pa=-pa),yi?yi==1?(pa=Jt-pa,ra[0]-=Ln[yi][0]*o(pa),ra[1]-=Ln[yi][0]*x(pa)):(pa=qt-pa,ra[0]+=Ln[yi][0]*o(pa),ra[1]+=Ln[yi][0]*x(pa)):(ra[0]+=Ln[yi][0]*o(pa),ra[1]-=Ln[yi][0]*x(pa))}return ra[0]/=3,ra[1]/=3,ra}return or}function kt(de){return de[0]*=M,de[1]*=M,de}function Je(){return Ze([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Ze(de,we,Le){var De=t.geoCentroid({type:"MultiPoint",coordinates:[de,we,Le]}),He=[-De[0],-De[1]],Ve=t.geoRotation(He),Qe=gt(kt(Ve(de)),kt(Ve(we)),kt(Ve(Le)));Qe.invert=Re(Qe);var zt=t.geoProjection(Qe).rotate(He),Jt=zt.center;return delete zt.rotate,zt.center=function(qt){return arguments.length?Jt(Ve(qt)):Ve.invert(Jt())},zt.clipAngle(90)}function At(de,we){var Le=O(1-x(we));return[2/S*de*Le,S*(1-Le)]}At.invert=function(de,we){var Le=(Le=we/S-1)*Le;return[Le>0?de*O(A/Le)/2:0,D(1-Le)]};function Se(){return t.geoProjection(At).scale(95.6464).center([0,30])}function pe(de){var we=b(de);function Le(De,He){return[De,(De?De/x(De):1)*(x(He)*o(De)-we*o(He))]}return Le.invert=we?function(De,He){De&&(He*=x(De)/De);var Ve=o(De);return[De,2*a(O(Ve*Ve+we*we-He*He)-Ve,we-He)]}:function(De,He){return[De,D(De?He*b(De)/De:He)]},Le}function Te(){return et(pe).scale(249.828).clipAngle(90)}var it=O(3);function Dt(de,we){return[it*de*(2*o(2*we/3)-1)/S,it*S*x(we/3)]}Dt.invert=function(de,we){var Le=3*D(we/(it*S));return[S*de/(it*(2*o(2*Le/3)-1)),Le]};function Wt(){return t.geoProjection(Dt).scale(156.19)}function er(de){var we=o(de);function Le(De,He){return[De*we,x(He)/we]}return Le.invert=function(De,He){return[De/we,D(He*we)]},Le}function qr(){return et(er).parallel(38.58).scale(195.044)}function Vr(de){var we=o(de);function Le(De,He){return[De*we,(1+we)*b(He/2)]}return Le.invert=function(De,He){return[De/we,n(He/(1+we))*2]},Le}function mr(){return et(Vr).scale(124.75)}function Fr(de,we){var Le=O(8/(3*A));return[Le*de*(1-i(we)/A),Le*we]}Fr.invert=function(de,we){var Le=O(8/(3*A)),De=we/Le;return[de/(Le*(1-i(De)/A)),De]};function nn(){return t.geoProjection(Fr).scale(165.664)}function jn(de,we){var Le=O(4-3*x(i(we)));return[2/O(6*A)*de*Le,d(we)*O(2*A/3)*(2-Le)]}jn.invert=function(de,we){var Le=2-i(we)/O(2*A/3);return[de*O(6*A)/(2*Le),d(we)*D((4-Le*Le)/3)]};function xn(){return t.geoProjection(jn).scale(165.664)}function pn(de,we){var Le=O(A*(4+A));return[2/Le*de*(1+O(1-4*we*we/(A*A))),4/Le*we]}pn.invert=function(de,we){var Le=O(A*(4+A))/2;return[de*Le/(1+O(1-we*we*(4+A)/(4*A))),we*Le/2]};function ki(){return t.geoProjection(pn).scale(180.739)}function qn(de,we){var Le=(2+T)*x(we);we/=2;for(var De=0,He=1/0;De<10&&i(He)>p;De++){var Ve=o(we);we-=He=(we+x(we)*(Ve+2)-Le)/(2*Ve*(1+Ve))}return[2/O(A*(4+A))*de*(1+o(we)),2*O(A/(4+A))*x(we)]}qn.invert=function(de,we){var Le=we*O((4+A)/A)/2,De=D(Le),He=o(De);return[de/(2/O(A*(4+A))*(1+He)),D((De+Le*(He+2))/(2+T))]};function bi(){return t.geoProjection(qn).scale(180.739)}function Si(de,we){return[de*(1+o(we))/O(2+A),2*we/O(2+A)]}Si.invert=function(de,we){var Le=O(2+A),De=we*Le/2;return[Le*de/(1+o(De)),De]};function nt(){return t.geoProjection(Si).scale(173.044)}function ze(de,we){for(var Le=(1+T)*x(we),De=0,He=1/0;De<10&&i(He)>p;De++)we-=He=(we+x(we)-Le)/(1+o(we));return Le=O(2+A),[de*(1+o(we))/Le,2*we/Le]}ze.invert=function(de,we){var Le=1+T,De=O(Le/2);return[de*2*De/(1+o(we*=De)),D((we+x(we))/Le)]};function ut(){return t.geoProjection(ze).scale(173.044)}var mt=3+2*E;function Ot(de,we){var Le=x(de/=2),De=o(de),He=O(o(we)),Ve=o(we/=2),Qe=x(we)/(Ve+E*De*He),zt=O(2/(1+Qe*Qe)),Jt=O((E*Ve+(De+Le)*He)/(E*Ve+(De-Le)*He));return[mt*(zt*(Jt-1/Jt)-2*u(Jt)),mt*(zt*Qe*(Jt+1/Jt)-2*n(Qe))]}Ot.invert=function(de,we){if(!(Ve=oe.invert(de/1.2,we*1.065)))return null;var Le=Ve[0],De=Ve[1],He=20,Ve;de/=mt,we/=mt;do{var Qe=Le/2,zt=De/2,Jt=x(Qe),qt=o(Qe),Qt=x(zt),or=o(zt),_r=o(De),Sr=O(_r),Hr=Qt/(or+E*qt*Sr),un=Hr*Hr,Ln=O(2/(1+un)),yi=E*or+(qt+Jt)*Sr,Ji=E*or+(qt-Jt)*Sr,ra=yi/Ji,sa=O(ra),pa=sa-1/sa,Ro=sa+1/sa,Jo=Ln*pa-2*u(sa)-de,ba=Ln*Hr*Ro-2*n(Hr)-we,qa=Qt&&_*Sr*Jt*un/Qt,gs=(E*qt*or+Sr)/(2*(or+E*qt*Sr)*(or+E*qt*Sr)*Sr),sl=-.5*Hr*Ln*Ln*Ln,rl=sl*qa,ro=sl*gs,Wa=(Wa=2*or+E*Sr*(qt-Jt))*Wa*sa,Il=(E*qt*or*Sr+_r)/Wa,Sl=-(E*Jt*Qt)/(Sr*Wa),Cu=pa*rl-2*Il/sa+Ln*(Il+Il/ra),fu=pa*ro-2*Sl/sa+Ln*(Sl+Sl/ra),Fl=Hr*Ro*rl-2*qa/(1+un)+Ln*Ro*qa+Ln*Hr*(Il-Il/ra),El=Hr*Ro*ro-2*gs/(1+un)+Ln*Ro*gs+Ln*Hr*(Sl-Sl/ra),xf=fu*Fl-El*Cu;if(!xf)break;var ju=(ba*fu-Jo*El)/xf,Ku=(Jo*Fl-ba*Cu)/xf;Le-=ju,De=f(-T,c(T,De-Ku))}while((i(ju)>p||i(Ku)>p)&&--He>0);return i(i(De)-T)<p?[0,De]:He&&[Le,De]};function nr(){return t.geoProjection(Ot).scale(62.5271)}var yr=o(35*M);function vr(de,we){var Le=b(we/2);return[de*yr*O(1-Le*Le),(1+yr)*Le]}vr.invert=function(de,we){var Le=we/(1+yr);return[de&&de/(yr*O(1-Le*Le)),2*n(Le)]};function Rr(){return t.geoProjection(vr).scale(137.152)}function Gr(de,we){var Le=we/2,De=o(Le);return[2*de/S*o(we)*De*De,S*b(Le)]}Gr.invert=function(de,we){var Le=n(we/S),De=o(Le),He=2*Le;return[de*S/2/(o(He)*De*De),He]};function Yr(){return t.geoProjection(Gr).scale(135.264)}function Xr(de){var we=1-de,Le=Ve(A,0)[0]-Ve(-A,0)[0],De=Ve(0,T)[1]-Ve(0,-T)[1],He=O(2*De/Le);function Ve(Jt,qt){var Qt=o(qt),or=x(qt);return[Qt/(we+de*Qt)*Jt,we*qt+de*or]}function Qe(Jt,qt){var Qt=Ve(Jt,qt);return[Qt[0]*He,Qt[1]/He]}function zt(Jt){return Qe(0,Jt)[1]}return Qe.invert=function(Jt,qt){var Qt=rt(zt,qt),or=Jt/He*(de+we/o(Qt));return[or,Qt]},Qe}function on(){var de=.5,we=t.geoProjectionMutator(Xr),Le=we(de);return Le.alpha=function(De){return arguments.length?we(de=+De):de},Le.scale(168.725)}function wn(de){return[de[0]/2,D(b(de[1]/2*M))*C]}function Vi(de){return[de[0]*2,2*n(x(de[1]*M))*C]}function vi(de){de==null&&(de=t.geoOrthographic);var we=de(),Le=t.geoEquirectangular().scale(C).precision(0).clipAngle(null).translate([0,0]);function De(Ve){return we(wn(Ve))}we.invert&&(De.invert=function(Ve){return Vi(we.invert(Ve))}),De.stream=function(Ve){var Qe=we.stream(Ve),zt=Le.stream({point:function(Jt,qt){Qe.point(Jt/2,D(b(-qt/2*M))*C)},lineStart:function(){Qe.lineStart()},lineEnd:function(){Qe.lineEnd()},polygonStart:function(){Qe.polygonStart()},polygonEnd:function(){Qe.polygonEnd()}});return zt.sphere=Qe.sphere,zt};function He(Ve){De[Ve]=function(){return arguments.length?(we[Ve].apply(we,arguments),De):we[Ve]()}}return De.rotate=function(Ve){return arguments.length?(Le.rotate(Ve),De):Le.rotate()},De.center=function(Ve){return arguments.length?(we.center(wn(Ve)),De):Vi(we.center())},He("angle"),He("clipAngle"),He("clipExtent"),He("fitExtent"),He("fitHeight"),He("fitSize"),He("fitWidth"),He("scale"),He("translate"),He("precision"),De.scale(249.5)}function Zi(de,we){var Le=2*A/we,De=de*de;function He(Ve,Qe){var zt=t.geoAzimuthalEquidistantRaw(Ve,Qe),Jt=zt[0],qt=zt[1],Qt=Jt*Jt+qt*qt;if(Qt>De){var or=O(Qt),_r=a(qt,Jt),Sr=Le*v(_r/Le),Hr=_r-Sr,un=de*o(Hr),Ln=(de*x(Hr)-Hr*x(un))/(T-un),yi=Xi(Hr,Ln),Ji=(A-de)/ta(yi,un,A);Jt=or;var ra=50,sa;do Jt-=sa=(de+ta(yi,un,Jt)*Ji-or)/(yi(Jt)*Ji);while(i(sa)>p&&--ra>0);qt=Hr*x(Jt),Jt<T&&(qt-=Ln*(Jt-T));var pa=x(Sr),Ro=o(Sr);zt[0]=Jt*Ro-qt*pa,zt[1]=Jt*pa+qt*Ro}return zt}return He.invert=function(Ve,Qe){var zt=Ve*Ve+Qe*Qe;if(zt>De){var Jt=O(zt),qt=a(Qe,Ve),Qt=Le*v(qt/Le),or=qt-Qt;Ve=Jt*o(or),Qe=Jt*x(or);for(var _r=Ve-T,Sr=x(Ve),Hr=Qe/Sr,un=Ve<T?1/0:0,Ln=10;;){var yi=de*x(Hr),Ji=de*o(Hr),ra=x(Ji),sa=T-Ji,pa=(yi-Hr*ra)/sa,Ro=Xi(Hr,pa);if(i(un)<w||!--Ln)break;Hr-=un=(Hr*Sr-pa*_r-Qe)/(Sr-_r*2*(sa*(Ji+Hr*yi*o(Ji)-ra)-yi*(yi-Hr*ra))/(sa*sa))}Jt=de+ta(Ro,Ji,Ve)*(A-de)/ta(Ro,Ji,A),qt=Qt+Hr,Ve=Jt*o(qt),Qe=Jt*x(qt)}return t.geoAzimuthalEquidistantRaw.invert(Ve,Qe)},He}function Xi(de,we){return function(Le){var De=de*o(Le);return Le<T&&(De-=we),O(1+De*De)}}function ta(de,we,Le){for(var De=50,He=(Le-we)/De,Ve=de(we)+de(Le),Qe=1,zt=we;Qe<De;++Qe)Ve+=2*de(zt+=He);return Ve*.5*He}function Ya(){var de=6,we=30*M,Le=o(we),De=x(we),He=t.geoProjectionMutator(Zi),Ve=He(we,de),Qe=Ve.stream,zt=.01,Jt=-o(zt*M),qt=x(zt*M);return Ve.radius=function(Qt){return arguments.length?(Le=o(we=Qt*M),De=x(we),He(we,de)):we*C},Ve.lobes=function(Qt){return arguments.length?He(we,de=+Qt):de},Ve.stream=function(Qt){var or=Ve.rotate(),_r=Qe(Qt),Sr=(Ve.rotate([0,0]),Qe(Qt));return Ve.rotate(or),_r.sphere=function(){Sr.polygonStart(),Sr.lineStart();for(var Hr=0,un=2*A/de,Ln=0;Hr<de;++Hr,Ln-=un)Sr.point(a(qt*o(Ln),Jt)*C,D(qt*x(Ln))*C),Sr.point(a(De*o(Ln-un/2),Le)*C,D(De*x(Ln-un/2))*C);Sr.lineEnd(),Sr.polygonEnd()},_r},Ve.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)}function Pi(de,we,Le,De,He,Ve,Qe,zt){arguments.length<8&&(zt=0);function Jt(qt,Qt){if(!Qt)return[de*qt/A,0];var or=Qt*Qt,_r=de+or*(we+or*(Le+or*De)),Sr=Qt*(He-1+or*(Ve-zt+or*Qe)),Hr=(_r*_r+Sr*Sr)/(2*Sr),un=qt*D(_r/Hr)/A;return[Hr*x(un),Qt*(1+or*zt)+Hr*(1-o(un))]}return Jt.invert=function(qt,Qt){var or=A*qt/de,_r=Qt,Sr,Hr,un=50;do{var Ln=_r*_r,yi=de+Ln*(we+Ln*(Le+Ln*De)),Ji=_r*(He-1+Ln*(Ve-zt+Ln*Qe)),ra=yi*yi+Ji*Ji,sa=2*Ji,pa=ra/sa,Ro=pa*pa,Jo=D(yi/pa)/A,ba=or*Jo,qa=yi*yi,gs=(2*we+Ln*(4*Le+Ln*6*De))*_r,sl=He+Ln*(3*Ve+Ln*5*Qe),rl=2*(yi*gs+Ji*(sl-1)),ro=2*(sl-1),Wa=(rl*sa-ra*ro)/(sa*sa),Il=o(ba),Sl=x(ba),Cu=pa*Il,fu=pa*Sl,Fl=or/A*(1/O(1-qa/Ro))*(gs*pa-yi*Wa)/Ro,El=fu-qt,xf=_r*(1+Ln*zt)+pa-Cu-Qt,ju=Wa*Sl+Cu*Fl,Ku=Cu*Jo,V=1+Wa-(Wa*Il-fu*Fl),J=fu*Jo,se=ju*J-V*Ku;if(!se)break;or-=Sr=(xf*ju-El*V)/se,_r-=Hr=(El*J-xf*Ku)/se}while((i(Sr)>p||i(Hr)>p)&&--un>0);return[or,_r]},Jt}var Bn=Pi(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function Qi(){return t.geoProjection(Bn).scale(149.995)}var ya=Pi(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Nn(){return t.geoProjection(ya).scale(153.93)}var je=Pi(5/6*A,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Bt(){return t.geoProjection(je).scale(130.945)}function ur(de,we){var Le=de*de,De=we*we;return[de*(1-.162388*De)*(.87-952426e-9*Le*Le),we*(1+De/12)]}ur.invert=function(de,we){var Le=de,De=we,He=50,Ve;do{var Qe=De*De;De-=Ve=(De*(1+Qe/12)-we)/(1+Qe/4)}while(i(Ve)>p&&--He>0);He=50,de/=1-.162388*Qe;do{var zt=(zt=Le*Le)*zt;Le-=Ve=(Le*(.87-952426e-9*zt)-de)/(.87-.00476213*zt)}while(i(Ve)>p&&--He>0);return[Le,De]};function br(){return t.geoProjection(ur).scale(131.747)}var Jr=Pi(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function ln(){return t.geoProjection(Jr).scale(131.087)}function yn(de){var we=de(T,0)[0]-de(-T,0)[0];function Le(De,He){var Ve=De>0?-.5:.5,Qe=de(De+Ve*A,He);return Qe[0]-=Ve*we,Qe}return de.invert&&(Le.invert=function(De,He){var Ve=De>0?-.5:.5,Qe=de.invert(De+Ve*we,He),zt=Qe[0]-Ve*A;return zt<-A?zt+=2*A:zt>A&&(zt-=2*A),Qe[0]=zt,Qe}),Le}function Cr(de,we){var Le=d(de),De=d(we),He=o(we),Ve=o(de)*He,Qe=x(de)*He,zt=x(De*we);de=i(a(Qe,zt)),we=D(Ve),i(de-T)>p&&(de%=T);var Jt=vn(de>A/4?T-de:de,we);return de>A/4&&(zt=Jt[0],Jt[0]=-Jt[1],Jt[1]=-zt),Jt[0]*=Le,Jt[1]*=-De,Jt}Cr.invert=function(de,we){i(de)>1&&(de=d(de)*2-de),i(we)>1&&(we=d(we)*2-we);var Le=d(de),De=d(we),He=-Le*de,Ve=-De*we,Qe=Ve/He<1,zt=gi(Qe?Ve:He,Qe?He:Ve),Jt=zt[0],qt=zt[1],Qt=o(qt);return Qe&&(Jt=-T-Jt),[Le*(a(x(Jt)*Qt,-x(qt))+A),De*D(o(Jt)*Qt)]};function vn(de,we){if(we===T)return[0,0];var Le=x(we),De=Le*Le,He=De*De,Ve=1+He,Qe=1+3*He,zt=1-He,Jt=D(1/O(Ve)),qt=zt+De*Ve*Jt,Qt=(1-Le)/qt,or=O(Qt),_r=Qt*Ve,Sr=O(_r),Hr=or*zt,un,Ln;if(de===0)return[0,-(Hr+De*Sr)];var yi=o(we),Ji=1/yi,ra=2*Le*yi,sa=(-3*De+Jt*Qe)*ra,pa=(-qt*yi-(1-Le)*sa)/(qt*qt),Ro=.5*pa/or,Jo=zt*Ro-2*De*or*ra,ba=De*Ve*pa+Qt*Qe*ra,qa=-Ji*ra,gs=-Ji*ba,sl=-2*Ji*Jo,rl=4*de/A,ro;if(de>.222*A||we<A/4&&de>.175*A){if(un=(Hr+De*O(_r*(1+He)-Hr*Hr))/(1+He),de>A/4)return[un,un];var Wa=un,Il=.5*un;un=.5*(Il+Wa),Ln=50;do{var Sl=O(_r-un*un),Cu=un*(sl+qa*Sl)+gs*D(un/Sr)-rl;if(!Cu)break;Cu<0?Il=un:Wa=un,un=.5*(Il+Wa)}while(i(Wa-Il)>p&&--Ln>0)}else{un=p,Ln=25;do{var fu=un*un,Fl=O(_r-fu),El=sl+qa*Fl,xf=un*El+gs*D(un/Sr)-rl,ju=El+(gs-qa*fu)/Fl;un-=ro=Fl?xf/ju:0}while(i(ro)>p&&--Ln>0)}return[un,-Hr-De*O(_r-un*un)]}function gi(de,we){for(var Le=0,De=1,He=.5,Ve=50;;){var Qe=He*He,zt=O(He),Jt=D(1/O(1+Qe)),qt=1-Qe+He*(1+Qe)*Jt,Qt=(1-zt)/qt,or=O(Qt),_r=Qt*(1+Qe),Sr=or*(1-Qe),Hr=_r-de*de,un=O(Hr),Ln=we+Sr+He*un;if(i(De-Le)<w||--Ve===0||Ln===0)break;Ln>0?Le=He:De=He,He=.5*(Le+De)}if(!Ve)return null;var yi=D(zt),Ji=o(yi),ra=1/Ji,sa=2*zt*Ji,pa=(-3*He+Jt*(1+3*Qe))*sa,Ro=(-qt*Ji-(1-zt)*pa)/(qt*qt),Jo=.5*Ro/or,ba=(1-Qe)*Jo-2*He*or*sa,qa=-2*ra*ba,gs=-ra*sa,sl=-ra*(He*(1+Qe)*Ro+Qt*(1+3*Qe)*sa);return[A/4*(de*(qa+gs*un)+sl*D(de/O(_r))),yi]}function Wn(){return t.geoProjection(yn(Cr)).scale(239.75)}function zi(de,we,Le){var De,He,Ve;return de?(De=fa(de,Le),we?(He=fa(we,1-Le),Ve=He[1]*He[1]+Le*De[0]*De[0]*He[0]*He[0],[[De[0]*He[2]/Ve,De[1]*De[2]*He[0]*He[1]/Ve],[De[1]*He[1]/Ve,-De[0]*De[2]*He[0]*He[2]/Ve],[De[2]*He[1]*He[2]/Ve,-Le*De[0]*De[1]*He[0]/Ve]]):[[De[0],0],[De[1],0],[De[2],0]]):(He=fa(we,1-Le),[[0,He[0]/He[1]],[1/He[1],0],[He[2]/He[1],0]])}function fa(de,we){var Le,De,He,Ve,Qe;if(we<p)return Ve=x(de),De=o(de),Le=we*(de-Ve*De)/4,[Ve-Le*De,De+Le*Ve,1-we*Ve*Ve/2,de-Le];if(we>=1-p)return Le=(1-we)/4,De=F(de),Ve=U(de),He=1/De,Qe=De*B(de),[Ve+Le*(Qe-de)/(De*De),He-Le*Ve*He*(Qe-de),He+Le*Ve*He*(Qe+de),2*n(s(de))-T+Le*(Qe-de)/De];var zt=[1,0,0,0,0,0,0,0,0],Jt=[O(we),0,0,0,0,0,0,0,0],qt=0;for(De=O(1-we),Qe=1;i(Jt[qt]/zt[qt])>p&&qt<8;)Le=zt[qt++],Jt[qt]=(Le-De)/2,zt[qt]=(Le+De)/2,De=O(Le*De),Qe*=2;He=Qe*zt[qt]*de;do Ve=Jt[qt]*x(De=He)/zt[qt],He=(D(Ve)+He)/2;while(--qt);return[x(He),Ve=o(He),Ve/o(He-De),He]}function to(de,we,Le){var De=i(de),He=i(we),Ve=B(He);if(De){var Qe=1/x(De),zt=1/(b(De)*b(De)),Jt=-(zt+Le*(Ve*Ve*Qe*Qe)-1+Le),qt=(Le-1)*zt,Qt=(-Jt+O(Jt*Jt-4*qt))/2;return[ma(n(1/O(Qt)),Le)*d(de),ma(n(O((Qt/zt-1)/Le)),1-Le)*d(we)]}return[0,ma(n(Ve),1-Le)*d(we)]}function ma(de,we){if(!we)return de;if(we===1)return u(b(de/2+k));for(var Le=1,De=O(1-we),He=O(we),Ve=0;i(He)>p;Ve++){if(de%A){var Qe=n(De*b(de)/Le);Qe<0&&(Qe+=A),de+=Qe+~~(de/A)*A}else de+=de;He=(Le+De)/2,De=O(Le*De),He=((Le=He)-De)/2}return de/(h(2,Ve)*Le)}function uo(de,we){var Le=(E-1)/(E+1),De=O(1-Le*Le),He=ma(T,De*De),Ve=-1,Qe=u(b(A/4+i(we)/2)),zt=s(Ve*Qe)/O(Le),Jt=Ka(zt*o(Ve*de),zt*x(Ve*de)),qt=to(Jt[0],Jt[1],De*De);return[-qt[1],(we>=0?1:-1)*(.5*He-qt[0])]}function Ka(de,we){var Le=de*de,De=we+1,He=1-Le-we*we;return[.5*((de>=0?T:-T)-a(He,2*de)),-.25*u(He*He+4*Le)+.5*u(De*De+Le)]}function jo(de,we){var Le=we[0]*we[0]+we[1]*we[1];return[(de[0]*we[0]+de[1]*we[1])/Le,(de[1]*we[0]-de[0]*we[1])/Le]}uo.invert=function(de,we){var Le=(E-1)/(E+1),De=O(1-Le*Le),He=ma(T,De*De),Ve=-1,Qe=zi(.5*He-we,-de,De*De),zt=jo(Qe[0],Qe[1]),Jt=a(zt[1],zt[0])/Ve;return[Jt,2*n(s(.5/Ve*u(Le*zt[0]*zt[0]+Le*zt[1]*zt[1])))-T]};function Ho(){return t.geoProjection(yn(uo)).scale(151.496)}function xs(de){var we=x(de),Le=o(de),De=ss(de);De.invert=ss(-de);function He(Ve,Qe){var zt=De(Ve,Qe);Ve=zt[0],Qe=zt[1];var Jt=x(Qe),qt=o(Qe),Qt=o(Ve),or=q(we*Jt+Le*qt*Qt),_r=x(or),Sr=i(_r)>p?or/_r:1;return[Sr*Le*x(Ve),(i(Ve)>T?Sr:-Sr)*(we*qt-Le*Jt*Qt)]}return He.invert=function(Ve,Qe){var zt=O(Ve*Ve+Qe*Qe),Jt=-x(zt),qt=o(zt),Qt=zt*qt,or=-Qe*Jt,_r=zt*we,Sr=O(Qt*Qt+or*or-_r*_r),Hr=a(Qt*_r+or*Sr,or*_r-Qt*Sr),un=(zt>T?-1:1)*a(Ve*Jt,zt*o(Hr)*qt+Qe*x(Hr)*Jt);return De.invert(un,Hr)},He}function ss(de){var we=x(de),Le=o(de);return function(De,He){var Ve=o(He),Qe=o(De)*Ve,zt=x(De)*Ve,Jt=x(He);return[a(zt,Qe*Le-Jt*we),D(Jt*Le+Qe*we)]}}function al(){var de=0,we=t.geoProjectionMutator(xs),Le=we(de),De=Le.rotate,He=Le.stream,Ve=t.geoCircle();return Le.parallel=function(Qe){if(!arguments.length)return de*C;var zt=Le.rotate();return we(de=Qe*M).rotate(zt)},Le.rotate=function(Qe){return arguments.length?(De.call(Le,[Qe[0],Qe[1]-de*C]),Ve.center([-Qe[0],-Qe[1]]),Le):(Qe=De.call(Le),Qe[1]+=de*C,Qe)},Le.stream=function(Qe){return Qe=He(Qe),Qe.sphere=function(){Qe.polygonStart();var zt=.01,Jt=Ve.radius(90-zt)().coordinates[0],qt=Jt.length-1,Qt=-1,or;for(Qe.lineStart();++Qt<qt;)Qe.point((or=Jt[Qt])[0],or[1]);for(Qe.lineEnd(),Jt=Ve.radius(90+zt)().coordinates[0],qt=Jt.length-1,Qe.lineStart();--Qt>=0;)Qe.point((or=Jt[Qt])[0],or[1]);Qe.lineEnd(),Qe.polygonEnd()},Qe},Le.scale(79.4187).parallel(45).clipAngle(180-.001)}var so=3,vs=D(1-1/so)*C,Co=er(0);function ds(de){var we=vs*M,Le=At(A,we)[0]-At(-A,we)[0],De=Co(0,we)[1],He=At(0,we)[1],Ve=S-He,Qe=g/de,zt=4/g,Jt=De+Ve*Ve*4/g;function qt(Qt,or){var _r,Sr=i(or);if(Sr>we){var Hr=c(de-1,f(0,l((Qt+A)/Qe)));Qt+=A*(de-1)/de-Hr*Qe,_r=At(Qt,Sr),_r[0]=_r[0]*g/Le-g*(de-1)/(2*de)+Hr*g/de,_r[1]=De+(_r[1]-He)*4*Ve/g,or<0&&(_r[1]=-_r[1])}else _r=Co(Qt,or);return _r[0]*=zt,_r[1]/=Jt,_r}return qt.invert=function(Qt,or){Qt/=zt,or*=Jt;var _r=i(or);if(_r>De){var Sr=c(de-1,f(0,l((Qt+A)/Qe)));Qt=(Qt+A*(de-1)/de-Sr*Qe)*Le/g;var Hr=At.invert(Qt,.25*(_r-De)*g/Ve+He);return Hr[0]-=A*(de-1)/de-Sr*Qe,or<0&&(Hr[1]=-Hr[1]),Hr}return Co.invert(Qt,or)},qt}function $o(de,we){return[de,we&1?90-p:vs]}function es(de,we){return[de,we&1?-90+p:-vs]}function Oa(de){return[de[0]*(1-p),de[1]]}function vo(de){var we=[].concat(r.range(-180,180+de/2,de).map($o),r.range(180,-180-de/2,-de).map(es));return{type:"Polygon",coordinates:[de===180?we.map(Oa):we]}}function Al(){var de=4,we=t.geoProjectionMutator(ds),Le=we(de),De=Le.stream;return Le.lobes=function(He){return arguments.length?we(de=+He):de},Le.stream=function(He){var Ve=Le.rotate(),Qe=De(He),zt=(Le.rotate([0,0]),De(He));return Le.rotate(Ve),Qe.sphere=function(){t.geoStream(vo(180/de),zt)},Qe},Le.scale(239.75)}function ru(de){var we=1+de,Le=x(1/we),De=D(Le),He=2*O(A/(Ve=A+4*De*we)),Ve,Qe=.5*He*(we+O(de*(2+de))),zt=de*de,Jt=we*we;function qt(Qt,or){var _r=1-x(or),Sr,Hr;if(_r&&_r<2){var un=T-or,Ln=25,yi;do{var Ji=x(un),ra=o(un),sa=De+a(Ji,we-ra),pa=1+Jt-2*we*ra;un-=yi=(un-zt*De-we*Ji+pa*sa-.5*_r*Ve)/(2*we*Ji*sa)}while(i(yi)>w&&--Ln>0);Sr=He*O(pa),Hr=Qt*sa/A}else Sr=He*(de+_r),Hr=Qt*De/A;return[Sr*x(Hr),Qe-Sr*o(Hr)]}return qt.invert=function(Qt,or){var _r=Qt*Qt+(or-=Qe)*or,Sr=(1+Jt-_r/(He*He))/(2*we),Hr=q(Sr),un=x(Hr),Ln=De+a(un,we-Sr);return[D(Qt/O(_r))*A/Ln,D(1-2*(Hr-zt*De-we*un+(1+Jt-2*we*Sr)*Ln)/Ve)]},qt}function Vu(){var de=1,we=t.geoProjectionMutator(ru),Le=we(de);return Le.ratio=function(De){return arguments.length?we(de=+De):de},Le.scale(167.774).center([0,18.67])}var ls=.7109889596207567,dn=.0528035274542;function wi(de,we){return we>-ls?(de=xt(de,we),de[1]+=dn,de):vt(de,we)}wi.invert=function(de,we){return we>-ls?xt.invert(de,we-dn):vt.invert(de,we)};function sc(){return t.geoProjection(wi).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function Pl(de,we){return i(we)>ls?(de=xt(de,we),de[1]-=we>0?dn:-dn,de):vt(de,we)}Pl.invert=function(de,we){return i(we)>ls?xt.invert(de,we+(we>0?dn:-dn)):vt.invert(de,we)};function us(){return t.geoProjection(Pl).scale(152.63)}function dl(de,we,Le,De){var He=O(4*A/(2*Le+(1+de-we/2)*x(2*Le)+(de+we)/2*x(4*Le)+we/2*x(6*Le))),Ve=O(De*x(Le)*O((1+de*o(2*Le)+we*o(4*Le))/(1+de+we))),Qe=Le*Jt(1);function zt(or){return O(1+de*o(2*or)+we*o(4*or))}function Jt(or){var _r=or*Le;return(2*_r+(1+de-we/2)*x(2*_r)+(de+we)/2*x(4*_r)+we/2*x(6*_r))/Le}function qt(or){return zt(or)*x(or)}var Qt=function(or,_r){var Sr=Le*rt(Jt,Qe*x(_r)/Le,_r/A);isNaN(Sr)&&(Sr=Le*d(_r));var Hr=He*zt(Sr);return[Hr*Ve*or/A*o(Sr),Hr/Ve*x(Sr)]};return Qt.invert=function(or,_r){var Sr=rt(qt,_r*Ve/He);return[or*A/(o(Sr)*He*Ve*zt(Sr)),D(Le*Jt(Sr/Le)/Qe)]},Le===0&&(He=O(De/A),Qt=function(or,_r){return[or*He,x(_r)/He]},Qt.invert=function(or,_r){return[or/He,D(_r*He)]}),Qt}function ts(){var de=1,we=0,Le=45*M,De=2,He=t.geoProjectionMutator(dl),Ve=He(de,we,Le,De);return Ve.a=function(Qe){return arguments.length?He(de=+Qe,we,Le,De):de},Ve.b=function(Qe){return arguments.length?He(de,we=+Qe,Le,De):we},Ve.psiMax=function(Qe){return arguments.length?He(de,we,Le=+Qe*M,De):Le*C},Ve.ratio=function(Qe){return arguments.length?He(de,we,Le,De=+Qe):De},Ve.scale(180.739)}function Rl(de,we,Le,De,He,Ve,Qe,zt,Jt,qt,Qt){if(Qt.nanEncountered)return NaN;var or,_r,Sr,Hr,un,Ln,yi,Ji,ra,sa;if(or=Le-we,_r=de(we+or*.25),Sr=de(Le-or*.25),isNaN(_r)){Qt.nanEncountered=!0;return}if(isNaN(Sr)){Qt.nanEncountered=!0;return}return Hr=or*(De+4*_r+He)/12,un=or*(He+4*Sr+Ve)/12,Ln=Hr+un,sa=(Ln-Qe)/15,qt>Jt?(Qt.maxDepthCount++,Ln+sa):Math.abs(sa)<zt?Ln+sa:(yi=we+or*.5,Ji=Rl(de,we,yi,De,_r,He,Hr,zt*.5,Jt,qt+1,Qt),isNaN(Ji)?(Qt.nanEncountered=!0,NaN):(ra=Rl(de,yi,Le,He,Sr,Ve,un,zt*.5,Jt,qt+1,Qt),isNaN(ra)?(Qt.nanEncountered=!0,NaN):Ji+ra))}function wu(de,we,Le,De,He){var Ve={maxDepthCount:0,nanEncountered:!1};De===void 0&&(De=1e-8),He===void 0&&(He=20);var Qe=de(we),zt=de(.5*(we+Le)),Jt=de(Le),qt=(Qe+4*zt+Jt)*(Le-we)/6,Qt=Rl(de,we,Le,Qe,zt,Jt,qt,De,He,1,Ve);return Qt}function oi(de,we,Le){function De(Sr){return de+(1-de)*h(1-h(Sr,we),1/we)}function He(Sr){return wu(De,0,Sr,1e-4)}for(var Ve=1/He(1),Qe=1e3,zt=(1+1e-8)*Ve,Jt=[],qt=0;qt<=Qe;qt++)Jt.push(He(qt/Qe)*zt);function Qt(Sr){var Hr=0,un=Qe,Ln=Qe>>1;do Jt[Ln]>Sr?un=Ln:Hr=Ln,Ln=Hr+un>>1;while(Ln>Hr);var yi=Jt[Ln+1]-Jt[Ln];return yi&&(yi=(Sr-Jt[Ln+1])/yi),(Ln+1+yi)/Qe}var or=2*Qt(1)/A*Ve/Le,_r=function(Sr,Hr){var un=Qt(i(x(Hr))),Ln=De(un)*Sr;return un/=or,[Ln,Hr>=0?un:-un]};return _r.invert=function(Sr,Hr){var un;return Hr*=or,i(Hr)<1&&(un=d(Hr)*D(He(i(Hr))*Ve)),[Sr/De(i(Hr)),un]},_r}function Aa(){var de=0,we=2.5,Le=1.183136,De=t.geoProjectionMutator(oi),He=De(de,we,Le);return He.alpha=function(Ve){return arguments.length?De(de=+Ve,we,Le):de},He.k=function(Ve){return arguments.length?De(de,we=+Ve,Le):we},He.gamma=function(Ve){return arguments.length?De(de,we,Le=+Ve):Le},He.scale(152.63)}function Ca(de,we){return i(de[0]-we[0])<p&&i(de[1]-we[1])<p}function Fs(de,we){for(var Le=-1,De=de.length,He=de[0],Ve,Qe,zt,Jt=[];++Le<De;){Ve=de[Le],Qe=(Ve[0]-He[0])/we,zt=(Ve[1]-He[1])/we;for(var qt=0;qt<we;++qt)Jt.push([He[0]+qt*Qe,He[1]+qt*zt]);He=Ve}return Jt.push(Ve),Jt}function If(de){var we=[],Le,De,He,Ve,Qe,zt,Jt,qt=de[0].length;for(Jt=0;Jt<qt;++Jt)Le=de[0][Jt],De=Le[0][0],He=Le[0][1],Ve=Le[1][1],Qe=Le[2][0],zt=Le[2][1],we.push(Fs([[De+p,He+p],[De+p,Ve-p],[Qe-p,Ve-p],[Qe-p,zt+p]],30));for(Jt=de[1].length-1;Jt>=0;--Jt)Le=de[1][Jt],De=Le[0][0],He=Le[0][1],Ve=Le[1][1],Qe=Le[2][0],zt=Le[2][1],we.push(Fs([[Qe-p,zt-p],[Qe-p,Ve+p],[De+p,Ve+p],[De+p,He-p]],30));return{type:"Polygon",coordinates:[r.merge(we)]}}function Ma(de,we,Le){var De,He;function Ve(Jt,qt){for(var Qt=qt<0?-1:1,or=we[+(qt<0)],_r=0,Sr=or.length-1;_r<Sr&&Jt>or[_r][2][0];++_r);var Hr=de(Jt-or[_r][1][0],qt);return Hr[0]+=de(or[_r][1][0],Qt*qt>Qt*or[_r][0][1]?or[_r][0][1]:qt)[0],Hr}Le?Ve.invert=Le(Ve):de.invert&&(Ve.invert=function(Jt,qt){for(var Qt=He[+(qt<0)],or=we[+(qt<0)],_r=0,Sr=Qt.length;_r<Sr;++_r){var Hr=Qt[_r];if(Hr[0][0]<=Jt&&Jt<Hr[1][0]&&Hr[0][1]<=qt&&qt<Hr[1][1]){var un=de.invert(Jt-de(or[_r][1][0],0)[0],qt);return un[0]+=or[_r][1][0],Ca(Ve(un[0],un[1]),[Jt,qt])?un:null}}});var Qe=t.geoProjection(Ve),zt=Qe.stream;return Qe.stream=function(Jt){var qt=Qe.rotate(),Qt=zt(Jt),or=(Qe.rotate([0,0]),zt(Jt));return Qe.rotate(qt),Qt.sphere=function(){t.geoStream(De,or)},Qt},Qe.lobes=function(Jt){return arguments.length?(De=If(Jt),we=Jt.map(function(qt){return qt.map(function(Qt){return[[Qt[0][0]*M,Qt[0][1]*M],[Qt[1][0]*M,Qt[1][1]*M],[Qt[2][0]*M,Qt[2][1]*M]]})}),He=we.map(function(qt){return qt.map(function(Qt){var or=de(Qt[0][0],Qt[0][1])[0],_r=de(Qt[2][0],Qt[2][1])[0],Sr=de(Qt[1][0],Qt[0][1])[1],Hr=de(Qt[1][0],Qt[1][1])[1],un;return Sr>Hr&&(un=Sr,Sr=Hr,Hr=un),[[or,Sr],[_r,Hr]]})}),Qe):we.map(function(qt){return qt.map(function(Qt){return[[Qt[0][0]*C,Qt[0][1]*C],[Qt[1][0]*C,Qt[1][1]*C],[Qt[2][0]*C,Qt[2][1]*C]]})})},we!=null&&Qe.lobes(we),Qe}var Ff=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function jc(){return Ma(Ke,Ff).scale(160.857)}var pl=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function hf(){return Ma(Pl,pl).scale(152.63)}var tl=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Lo(){return Ma(xt,tl).scale(169.529)}var nu=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Tu(){return Ma(xt,nu).scale(169.529).rotate([20,0])}var Sh=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Hu(){return Ma(wi,Sh,Re).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var ov=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Sc(){return Ma(vt,ov).scale(152.63).rotate([-20,0])}function fo(de,we){return[3/g*de*O(A*A/3-we*we),we]}fo.invert=function(de,we){return[g/3*de/O(A*A/3-we*we),we]};function qf(){return t.geoProjection(fo).scale(158.837)}function Eh(de){function we(Le,De){if(i(i(De)-T)<p)return[0,De<0?-2:2];var He=x(De),Ve=h((1+He)/(1-He),de/2),Qe=.5*(Ve+1/Ve)+o(Le*=de);return[2*x(Le)/Qe,(Ve-1/Ve)/Qe]}return we.invert=function(Le,De){var He=i(De);if(i(He-2)<p)return Le?null:[0,d(De)*T];if(He>2)return null;Le/=2,De/=2;var Ve=Le*Le,Qe=De*De,zt=2*De/(1+Ve+Qe);return zt=h((1+zt)/(1-zt),1/de),[a(2*Le,1-Ve-Qe)/de,D((zt-1)/(zt+1))]},we}function Us(){var de=.5,we=t.geoProjectionMutator(Eh),Le=we(de);return Le.spacing=function(De){return arguments.length?we(de=+De):de},Le.scale(124.75)}var _s=A/E;function kh(de,we){return[de*(1+O(o(we)))/2,we/(o(we/2)*o(de/6))]}kh.invert=function(de,we){var Le=i(de),De=i(we),He=p,Ve=T;De<_s?Ve*=De/_s:He+=6*q(_s/De);for(var Qe=0;Qe<25;Qe++){var zt=x(Ve),Jt=O(o(Ve)),qt=x(Ve/2),Qt=o(Ve/2),or=x(He/6),_r=o(He/6),Sr=.5*He*(1+Jt)-Le,Hr=Ve/(Qt*_r)-De,un=Jt?-.25*He*zt/Jt:0,Ln=.5*(1+Jt),yi=(1+.5*Ve*qt/Qt)/(Qt*_r),Ji=Ve/Qt*(or/6)/(_r*_r),ra=un*Ji-yi*Ln,sa=(Sr*Ji-Hr*Ln)/ra,pa=(Hr*un-Sr*yi)/ra;if(Ve-=sa,He-=pa,i(sa)<p&&i(pa)<p)break}return[de<0?-He:He,we<0?-Ve:Ve]};function vf(){return t.geoProjection(kh).scale(97.2672)}function Mo(de,we){var Le=de*de,De=we*we;return[de*(.975534+De*(-.119161+Le*-.0143059+De*-.0547009)),we*(1.00384+Le*(.0802894+De*-.02855+Le*199025e-9)+De*(.0998909+De*-.0491032))]}Mo.invert=function(de,we){var Le=d(de)*A,De=we/2,He=50;do{var Ve=Le*Le,Qe=De*De,zt=Le*De,Jt=Le*(.975534+Qe*(-.119161+Ve*-.0143059+Qe*-.0547009))-de,qt=De*(1.00384+Ve*(.0802894+Qe*-.02855+Ve*199025e-9)+Qe*(.0998909+Qe*-.0491032))-we,Qt=.975534-Qe*(.119161+3*Ve*.0143059+Qe*.0547009),or=-zt*(2*.119161+4*.0547009*Qe+2*.0143059*Ve),_r=zt*(2*.0802894+4*199025e-9*Ve+2*-.02855*Qe),Sr=1.00384+Ve*(.0802894+199025e-9*Ve)+Qe*(3*(.0998909-.02855*Ve)-5*.0491032*Qe),Hr=or*_r-Sr*Qt,un=(qt*or-Jt*Sr)/Hr,Ln=(Jt*_r-qt*Qt)/Hr;Le-=un,De-=Ln}while((i(un)>p||i(Ln)>p)&&--He>0);return He&&[Le,De]};function ps(){return t.geoProjection(Mo).scale(139.98)}function yo(de,we){return[x(de)/o(we),b(we)*o(de)]}yo.invert=function(de,we){var Le=de*de,De=we*we,He=De+1,Ve=Le+He,Qe=de?_*O((Ve-O(Ve*Ve-4*Le))/Le):1/O(He);return[D(de*Qe),d(we)*q(Qe)]};function Po(){return t.geoProjection(yo).scale(144.049).clipAngle(90-.001)}function Ec(de){var we=o(de),Le=b(k+de/2);function De(He,Ve){var Qe=Ve-de,zt=i(Qe)<p?He*we:i(zt=k+Ve/2)<p||i(i(zt)-T)<p?0:He*Qe/u(b(zt)/Le);return[zt,Qe]}return De.invert=function(He,Ve){var Qe,zt=Ve+de;return[i(Ve)<p?He/we:i(Qe=k+zt/2)<p||i(i(Qe)-T)<p?0:He*u(b(Qe)/Le)/Ve,zt]},De}function qs(){return et(Ec).parallel(40).scale(158.837)}function Hl(de,we){return[de,1.25*u(b(k+.4*we))]}Hl.invert=function(de,we){return[de,2.5*n(s(.8*we))-.625*A]};function df(){return t.geoProjection(Hl).scale(108.318)}function bd(de){var we=de.length-1;function Le(De,He){for(var Ve=o(He),Qe=2/(1+Ve*o(De)),zt=Qe*Ve*x(De),Jt=Qe*x(He),qt=we,Qt=de[qt],or=Qt[0],_r=Qt[1],Sr;--qt>=0;)Qt=de[qt],or=Qt[0]+zt*(Sr=or)-Jt*_r,_r=Qt[1]+zt*_r+Jt*Sr;return or=zt*(Sr=or)-Jt*_r,_r=zt*_r+Jt*Sr,[or,_r]}return Le.invert=function(De,He){var Ve=20,Qe=De,zt=He;do{for(var Jt=we,qt=de[Jt],Qt=qt[0],or=qt[1],_r=0,Sr=0,Hr;--Jt>=0;)qt=de[Jt],_r=Qt+Qe*(Hr=_r)-zt*Sr,Sr=or+Qe*Sr+zt*Hr,Qt=qt[0]+Qe*(Hr=Qt)-zt*or,or=qt[1]+Qe*or+zt*Hr;_r=Qt+Qe*(Hr=_r)-zt*Sr,Sr=or+Qe*Sr+zt*Hr,Qt=Qe*(Hr=Qt)-zt*or-De,or=Qe*or+zt*Hr-He;var un=_r*_r+Sr*Sr,Ln,yi;Qe-=Ln=(Qt*_r+or*Sr)/un,zt-=yi=(or*_r-Qt*Sr)/un}while(i(Ln)+i(yi)>p*p&&--Ve>0);if(Ve){var Ji=O(Qe*Qe+zt*zt),ra=2*n(Ji*.5),sa=x(ra);return[a(Qe*sa,Ji*o(ra)),Ji?D(zt*sa/Ji):0]}},Le}var Au=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Xp=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Gl=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],po=[[.9245,0],[0,0],[.01943,0]],zv=[[.721316,0],[0,0],[-.00881625,-.00617325]];function pf(){return Mu(Au,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function Yl(){return Mu(Xp,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function sv(){return Mu(Gl,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Ch(){return Mu(po,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function lv(){return Mu(zv,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Mu(de,we){var Le=t.geoProjection(bd(de)).rotate(we).clipAngle(90),De=t.geoRotation(we),He=Le.center;return delete Le.rotate,Le.center=function(Ve){return arguments.length?He(De(Ve)):De.invert(He())},Le}var Ov=O(6),uv=O(7);function Lh(de,we){var Le=D(7*x(we)/(3*Ov));return[Ov*de*(2*o(2*Le/3)-1)/uv,9*x(Le/3)/uv]}Lh.invert=function(de,we){var Le=3*D(we*uv/9);return[de*uv/(Ov*(2*o(2*Le/3)-1)),D(x(Le)*3*Ov/7)]};function fv(){return t.geoProjection(Lh).scale(164.859)}function wd(de,we){for(var Le=(1+_)*x(we),De=we,He=0,Ve;He<25&&(De-=Ve=(x(De/2)+x(De)-Le)/(.5*o(De/2)+o(De)),!(i(Ve)<p));He++);return[de*(1+2*o(De)/o(De/2))/(3*E),2*O(3)*x(De/2)/O(2+E)]}wd.invert=function(de,we){var Le=we*O(2+E)/(2*O(3)),De=2*D(Le);return[3*E*de/(1+2*o(De)/o(De/2)),D((Le+x(De))/(1+_))]};function Zd(){return t.geoProjection(wd).scale(188.209)}function zf(de,we){for(var Le=O(6/(4+A)),De=(1+A/4)*x(we),He=we/2,Ve=0,Qe;Ve<25&&(He-=Qe=(He/2+x(He)-De)/(.5+o(He)),!(i(Qe)<p));Ve++);return[Le*(.5+o(He))*de/1.5,Le*He]}zf.invert=function(de,we){var Le=O(6/(4+A)),De=we/Le;return i(i(De)-T)<p&&(De=De<0?-T:T),[1.5*de/(Le*(.5+o(De))),D((De/2+x(De))/(1+A/4))]};function Bv(){return t.geoProjection(zf).scale(166.518)}function lc(de,we){var Le=we*we,De=Le*Le,He=Le*De;return[de*(.84719-.13063*Le+He*He*(-.04515+.05494*Le-.02326*De+.00331*He)),we*(1.01183+De*De*(-.02625+.01926*Le-.00396*De))]}lc.invert=function(de,we){var Le=we,De=25,He,Ve,Qe,zt;do Ve=Le*Le,Qe=Ve*Ve,Le-=He=(Le*(1.01183+Qe*Qe*(-.02625+.01926*Ve-.00396*Qe))-we)/(1.01183+Qe*Qe*(9*-.02625+11*.01926*Ve+13*-.00396*Qe));while(i(He)>w&&--De>0);return Ve=Le*Le,Qe=Ve*Ve,zt=Ve*Qe,[de/(.84719-.13063*Ve+zt*zt*(-.04515+.05494*Ve-.02326*Qe+.00331*zt)),Le]};function Ph(){return t.geoProjection(lc).scale(175.295)}function Gu(de,we){return[de*(1+o(we))/2,2*(we-b(we/2))]}Gu.invert=function(de,we){for(var Le=we/2,De=0,He=1/0;De<10&&i(He)>p;++De){var Ve=o(we/2);we-=He=(we-b(we/2)-Le)/(1-.5/(Ve*Ve))}return[2*de/(1+o(we)),we]};function kc(){return t.geoProjection(Gu).scale(152.63)}var Of=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Nv(){return Ma(_e(1/0),Of).rotate([20,0]).scale(152.63)}function Uv(de,we){var Le=x(we),De=o(we),He=d(de);if(de===0||i(we)===T)return[0,we];if(we===0)return[de,0];if(i(de)===T)return[de*De,T*Le];var Ve=A/(2*de)-2*de/A,Qe=2*we/A,zt=(1-Qe*Qe)/(Le-Qe),Jt=Ve*Ve,qt=zt*zt,Qt=1+Jt/qt,or=1+qt/Jt,_r=(Ve*Le/zt-Ve/2)/Qt,Sr=(qt*Le/Jt+zt/2)/or,Hr=_r*_r+De*De/Qt,un=Sr*Sr-(qt*Le*Le/Jt+zt*Le-1)/or;return[T*(_r+O(Hr)*He),T*(Sr+O(un<0?0:un)*d(-we*Ve)*He)]}Uv.invert=function(de,we){de/=T,we/=T;var Le=de*de,De=we*we,He=Le+De,Ve=A*A;return[de?(He-1+O((1-He)*(1-He)+4*Le))/(2*de)*T:0,rt(function(Qe){return He*(A*x(Qe)-2*Qe)*A+4*Qe*Qe*(we-x(Qe))+2*A*Qe-Ve*we},0)]};function Vv(){return t.geoProjection(Uv).scale(127.267)}var cv=1.0148,hv=.23185,Hv=-.14499,iu=.02406,vv=cv,ol=5*hv,au=7*Hv,Bf=9*iu,Vs=1.790857183;function Kc(de,we){var Le=we*we;return[de,we*(cv+Le*Le*(hv+Le*(Hv+iu*Le)))]}Kc.invert=function(de,we){we>Vs?we=Vs:we<-Vs&&(we=-Vs);var Le=we,De;do{var He=Le*Le;Le-=De=(Le*(cv+He*He*(hv+He*(Hv+iu*He)))-we)/(vv+He*He*(ol+He*(au+Bf*He)))}while(i(De)>p);return[de,Le]};function Nf(){return t.geoProjection(Kc).scale(139.319)}function Dl(de,we){if(i(we)<p)return[de,0];var Le=b(we),De=de*x(we);return[x(De)/Le,we+(1-o(De))/Le]}Dl.invert=function(de,we){if(i(we)<p)return[de,0];var Le=de*de+we*we,De=we*.5,He=10,Ve;do{var Qe=b(De),zt=1/o(De),Jt=Le-2*we*De+De*De;De-=Ve=(Qe*Jt+2*(De-we))/(2+Jt*zt*zt+2*(De-we)*Qe)}while(i(Ve)>p&&--He>0);return Qe=b(De),[(i(we)<i(De+1/Qe)?D(de*Qe):d(we)*d(de)*(q(i(de*Qe))+T))/x(De),De]};function zs(){return t.geoProjection(Dl).scale(103.74)}function jd(de,we){var Le=gf(de[1],de[0]),De=gf(we[1],we[0]),He=Jd(Le,De),Ve=ou(Le)/ou(De);return Su([1,0,de[0][0],0,1,de[0][1]],Su([Ve,0,0,0,Ve,0],Su([o(He),x(He),0,-x(He),o(He),0],[1,0,-we[0][0],0,1,-we[0][1]])))}function Kd(de){var we=1/(de[0]*de[4]-de[1]*de[3]);return[we*de[4],-we*de[1],we*(de[1]*de[5]-de[2]*de[4]),-we*de[3],we*de[0],we*(de[2]*de[3]-de[0]*de[5])]}function Su(de,we){return[de[0]*we[0]+de[1]*we[3],de[0]*we[1]+de[1]*we[4],de[0]*we[2]+de[1]*we[5]+de[2],de[3]*we[0]+de[4]*we[3],de[3]*we[1]+de[4]*we[4],de[3]*we[2]+de[4]*we[5]+de[5]]}function gf(de,we){return[de[0]-we[0],de[1]-we[1]]}function ou(de){return O(de[0]*de[0]+de[1]*de[1])}function Jd(de,we){return a(de[0]*we[1]-de[1]*we[0],de[0]*we[0]+de[1]*we[1])}function Jc(de,we,Le){De(de,{transform:null});function De(qt,Qt){if(qt.edges=dv(qt.face),Qt.face){var or=qt.shared=Gv(qt.face,Qt.face),_r=jd(or.map(Qt.project),or.map(qt.project));qt.transform=Qt.transform?Su(Qt.transform,_r):_r;for(var Sr=Qt.edges,Hr=0,un=Sr.length;Hr<un;++Hr)Eu(or[0],Sr[Hr][1])&&Eu(or[1],Sr[Hr][0])&&(Sr[Hr]=qt),Eu(or[0],Sr[Hr][0])&&Eu(or[1],Sr[Hr][1])&&(Sr[Hr]=qt);for(Sr=qt.edges,Hr=0,un=Sr.length;Hr<un;++Hr)Eu(or[0],Sr[Hr][0])&&Eu(or[1],Sr[Hr][1])&&(Sr[Hr]=Qt),Eu(or[0],Sr[Hr][1])&&Eu(or[1],Sr[Hr][0])&&(Sr[Hr]=Qt)}else qt.transform=Qt.transform;return qt.children&&qt.children.forEach(function(Ln){De(Ln,qt)}),qt}function He(qt,Qt){var or=we(qt,Qt),_r=or.project([qt*C,Qt*C]),Sr;return(Sr=or.transform)?[Sr[0]*_r[0]+Sr[1]*_r[1]+Sr[2],-(Sr[3]*_r[0]+Sr[4]*_r[1]+Sr[5])]:(_r[1]=-_r[1],_r)}pv(de)&&(He.invert=function(qt,Qt){var or=Ve(de,[qt,-Qt]);return or&&(or[0]*=M,or[1]*=M,or)});function Ve(qt,Qt){var or=qt.project.invert,_r=qt.transform,Sr=Qt;if(_r&&(_r=Kd(_r),Sr=[_r[0]*Sr[0]+_r[1]*Sr[1]+_r[2],_r[3]*Sr[0]+_r[4]*Sr[1]+_r[5]]),or&&qt===Qe(Hr=or(Sr)))return Hr;for(var Hr,un=qt.children,Ln=0,yi=un&&un.length;Ln<yi;++Ln)if(Hr=Ve(un[Ln],Qt))return Hr}function Qe(qt){return we(qt[0]*M,qt[1]*M)}var zt=t.geoProjection(He),Jt=zt.stream;return zt.stream=function(qt){var Qt=zt.rotate(),or=Jt(qt),_r=(zt.rotate([0,0]),Jt(qt));return zt.rotate(Qt),or.sphere=function(){_r.polygonStart(),_r.lineStart(),Qc(_r,de),_r.lineEnd(),_r.polygonEnd()},or},zt.angle(Le==null?-30:Le*C)}function Qc(de,we,Le){var De,He=we.edges,Ve=He.length,Qe,zt={type:"MultiPoint",coordinates:we.face},Jt=we.face.filter(function(un){return i(un[1])!==90}),qt=t.geoBounds({type:"MultiPoint",coordinates:Jt}),Qt=!1,or=-1,_r=qt[1][0]-qt[0][0],Sr=_r===180||_r===360?[(qt[0][0]+qt[1][0])/2,(qt[0][1]+qt[1][1])/2]:t.geoCentroid(zt);if(Le)for(;++or<Ve&&He[or]!==Le;);++or;for(var Hr=0;Hr<Ve;++Hr)Qe=He[(Hr+or)%Ve],Array.isArray(Qe)?(Qt||(de.point((De=t.geoInterpolate(Qe[0],Sr)(p))[0],De[1]),Qt=!0),de.point((De=t.geoInterpolate(Qe[1],Sr)(p))[0],De[1])):(Qt=!1,Qe!==Le&&Qc(de,Qe,we))}function Eu(de,we){return de&&we&&de[0]===we[0]&&de[1]===we[1]}function Gv(de,we){for(var Le,De,He=de.length,Ve=null,Qe=0;Qe<He;++Qe){Le=de[Qe];for(var zt=we.length;--zt>=0;)if(De=we[zt],Le[0]===De[0]&&Le[1]===De[1]){if(Ve)return[Ve,Le];Ve=Le}}}function dv(de){for(var we=de.length,Le=[],De=de[we-1],He=0;He<we;++He)Le.push([De,De=de[He]]);return Le}function pv(de){return de.project.invert||de.children&&de.children.some(pv)}var Yv=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],$c=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(de){return de.map(function(we){return Yv[we]})});function Uf(de){de=de||function(Le){var De=t.geoCentroid({type:"MultiPoint",coordinates:Le});return t.geoGnomonic().scale(1).translate([0,0]).rotate([-De[0],-De[1]])};var we=$c.map(function(Le){return{face:Le,project:de(Le)}});return[-1,0,0,1,0,1,4,5].forEach(function(Le,De){var He=we[Le];He&&(He.children||(He.children=[])).push(we[De])}),Jc(we[0],function(Le,De){return we[Le<-A/2?De<0?6:4:Le<0?De<0?2:0:Le<A/2?De<0?3:1:De<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Cc=2/O(3);function Rh(de,we){var Le=At(de,we);return[Le[0]*Cc,Le[1]]}Rh.invert=function(de,we){return At.invert(de/Cc,we)};function Td(de){de=de||function(Le){var De=t.geoCentroid({type:"MultiPoint",coordinates:Le});return t.geoProjection(Rh).translate([0,0]).scale(1).rotate(De[1]>0?[-De[0],0]:[180-De[0],180])};var we=$c.map(function(Le){return{face:Le,project:de(Le)}});return[-1,0,0,1,0,1,4,5].forEach(function(Le,De){var He=we[Le];He&&(He.children||(He.children=[])).push(we[De])}),Jc(we[0],function(Le,De){return we[Le<-A/2?De<0?6:4:Le<0?De<0?2:0:Le<A/2?De<0?3:1:De<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function No(de){de=de||function(Qe){var zt=Qe.length===6?t.geoCentroid({type:"MultiPoint",coordinates:Qe}):Qe[0];return t.geoGnomonic().scale(1).translate([0,0]).rotate([-zt[0],-zt[1]])};var we=$c.map(function(Qe){for(var zt=Qe.map(th),Jt=zt.length,qt=zt[Jt-1],Qt,or=[],_r=0;_r<Jt;++_r)Qt=zt[_r],or.push(Pc([qt[0]*.9486832980505138+Qt[0]*.31622776601683794,qt[1]*.9486832980505138+Qt[1]*.31622776601683794,qt[2]*.9486832980505138+Qt[2]*.31622776601683794]),Pc([Qt[0]*.9486832980505138+qt[0]*.31622776601683794,Qt[1]*.9486832980505138+qt[1]*.31622776601683794,Qt[2]*.9486832980505138+qt[2]*.31622776601683794])),qt=Qt;return or}),Le=[],De=[-1,0,0,1,0,1,4,5];we.forEach(function(Qe,zt){for(var Jt=$c[zt],qt=Jt.length,Qt=Le[zt]=[],or=0;or<qt;++or)we.push([Jt[or],Qe[(or*2+2)%(2*qt)],Qe[(or*2+1)%(2*qt)]]),De.push(zt),Qt.push(Lc(th(Qe[(or*2+2)%(2*qt)]),th(Qe[(or*2+1)%(2*qt)])))});var He=we.map(function(Qe){return{project:de(Qe),face:Qe}});De.forEach(function(Qe,zt){var Jt=He[Qe];Jt&&(Jt.children||(Jt.children=[])).push(He[zt])});function Ve(Qe,zt){var Jt=o(zt),qt=[Jt*o(Qe),Jt*x(Qe),x(zt)],Qt=Qe<-A/2?zt<0?6:4:Qe<0?zt<0?2:0:Qe<A/2?zt<0?3:1:zt<0?7:5,or=Le[Qt];return He[eh(or[0],qt)<0?8+3*Qt:eh(or[1],qt)<0?8+3*Qt+1:eh(or[2],qt)<0?8+3*Qt+2:Qt]}return Jc(He[0],Ve).angle(-30).scale(110.625).center([0,45])}function eh(de,we){for(var Le=0,De=de.length,He=0;Le<De;++Le)He+=de[Le]*we[Le];return He}function Lc(de,we){return[de[1]*we[2]-de[2]*we[1],de[2]*we[0]-de[0]*we[2],de[0]*we[1]-de[1]*we[0]]}function Pc(de){return[a(de[1],de[0])*C,D(f(-1,c(1,de[2])))*C]}function th(de){var we=de[0]*M,Le=de[1]*M,De=o(Le);return[De*o(we),De*x(we),x(Le)]}function yf(){}function uc(de){if((Le=de.length)<4)return!1;for(var we=0,Le,De=de[Le-1][1]*de[0][0]-de[Le-1][0]*de[0][1];++we<Le;)De+=de[we-1][1]*de[we][0]-de[we-1][0]*de[we][1];return De<=0}function Wv(de,we){for(var Le=we[0],De=we[1],He=!1,Ve=0,Qe=de.length,zt=Qe-1;Ve<Qe;zt=Ve++){var Jt=de[Ve],qt=Jt[0],Qt=Jt[1],or=de[zt],_r=or[0],Sr=or[1];Qt>De^Sr>De&&Le<(_r-qt)*(De-Qt)/(Sr-Qt)+qt&&(He=!He)}return He}function Hs(de,we){var Le=we.stream,De;if(!Le)throw new Error("invalid projection");switch(de&&de.type){case"Feature":De=Vf;break;case"FeatureCollection":De=gv;break;default:De=Gf;break}return De(de,Le)}function gv(de,we){return{type:"FeatureCollection",features:de.features.map(function(Le){return Vf(Le,we)})}}function Vf(de,we){return{type:"Feature",id:de.id,properties:de.properties,geometry:Gf(de.geometry,we)}}function Hf(de,we){return{type:"GeometryCollection",geometries:de.geometries.map(function(Le){return Gf(Le,we)})}}function Gf(de,we){if(!de)return null;if(de.type==="GeometryCollection")return Hf(de,we);var Le;switch(de.type){case"Point":Le=Yu;break;case"MultiPoint":Le=Yu;break;case"LineString":Le=Yf;break;case"MultiLineString":Le=Yf;break;case"Polygon":Le=Wu;break;case"MultiPolygon":Le=Wu;break;case"Sphere":Le=Wu;break;default:return null}return t.geoStream(de,we(Le)),Le.result()}var bs=[],yl=[],Yu={point:function(de,we){bs.push([de,we])},result:function(){var de=bs.length?bs.length<2?{type:"Point",coordinates:bs[0]}:{type:"MultiPoint",coordinates:bs}:null;return bs=[],de}},Yf={lineStart:yf,point:function(de,we){bs.push([de,we])},lineEnd:function(){bs.length&&(yl.push(bs),bs=[])},result:function(){var de=yl.length?yl.length<2?{type:"LineString",coordinates:yl[0]}:{type:"MultiLineString",coordinates:yl}:null;return yl=[],de}},Wu={polygonStart:yf,lineStart:yf,point:function(de,we){bs.push([de,we])},lineEnd:function(){var de=bs.length;if(de){do bs.push(bs[0].slice());while(++de<4);yl.push(bs),bs=[]}},polygonEnd:yf,result:function(){if(!yl.length)return null;var de=[],we=[];return yl.forEach(function(Le){uc(Le)?de.push([Le]):we.push(Le)}),we.forEach(function(Le){var De=Le[0];de.some(function(He){if(Wv(He[0],De))return He.push(Le),!0})||de.push([Le])}),yl=[],de.length?de.length>1?{type:"MultiPolygon",coordinates:de}:{type:"Polygon",coordinates:de[0]}:null}};function Dh(de){var we=de(T,0)[0]-de(-T,0)[0];function Le(De,He){var Ve=i(De)<T,Qe=de(Ve?De:De>0?De-A:De+A,He),zt=(Qe[0]-Qe[1])*_,Jt=(Qe[0]+Qe[1])*_;if(Ve)return[zt,Jt];var qt=we*_,Qt=zt>0^Jt>0?-1:1;return[Qt*zt-d(Jt)*qt,Qt*Jt-d(zt)*qt]}return de.invert&&(Le.invert=function(De,He){var Ve=(De+He)*_,Qe=(He-De)*_,zt=i(Ve)<.5*we&&i(Qe)<.5*we;if(!zt){var Jt=we*_,qt=Ve>0^Qe>0?-1:1,Qt=-qt*De+(Qe>0?1:-1)*Jt,or=-qt*He+(Ve>0?1:-1)*Jt;Ve=(-Qt-or)*_,Qe=(Qt-or)*_}var _r=de.invert(Ve,Qe);return zt||(_r[0]+=Ve>0?A:-A),_r}),t.geoProjection(Le).rotate([-90,-90,45]).clipAngle(180-.001)}function Ue(){return Dh(Cr).scale(176.423)}function st(){return Dh(uo).scale(111.48)}function Gt(de,we){if(!(0<=(we=+we)&&we<=20))throw new Error("invalid digits");function Le(qt){var Qt=qt.length,or=2,_r=new Array(Qt);for(_r[0]=+qt[0].toFixed(we),_r[1]=+qt[1].toFixed(we);or<Qt;)_r[or]=qt[or],++or;return _r}function De(qt){return qt.map(Le)}function He(qt){for(var Qt=Le(qt[0]),or=[Qt],_r=1;_r<qt.length;_r++){var Sr=Le(qt[_r]);(Sr.length>2||Sr[0]!=Qt[0]||Sr[1]!=Qt[1])&&(or.push(Sr),Qt=Sr)}return or.length===1&&qt.length>1&&or.push(Le(qt[qt.length-1])),or}function Ve(qt){return qt.map(He)}function Qe(qt){if(qt==null)return qt;var Qt;switch(qt.type){case"GeometryCollection":Qt={type:"GeometryCollection",geometries:qt.geometries.map(Qe)};break;case"Point":Qt={type:"Point",coordinates:Le(qt.coordinates)};break;case"MultiPoint":Qt={type:qt.type,coordinates:De(qt.coordinates)};break;case"LineString":Qt={type:qt.type,coordinates:He(qt.coordinates)};break;case"MultiLineString":case"Polygon":Qt={type:qt.type,coordinates:Ve(qt.coordinates)};break;case"MultiPolygon":Qt={type:"MultiPolygon",coordinates:qt.coordinates.map(Ve)};break;default:return qt}return qt.bbox!=null&&(Qt.bbox=qt.bbox),Qt}function zt(qt){var Qt={type:"Feature",properties:qt.properties,geometry:Qe(qt.geometry)};return qt.id!=null&&(Qt.id=qt.id),qt.bbox!=null&&(Qt.bbox=qt.bbox),Qt}if(de!=null)switch(de.type){case"Feature":return zt(de);case"FeatureCollection":{var Jt={type:"FeatureCollection",features:de.features.map(zt)};return de.bbox!=null&&(Jt.bbox=de.bbox),Jt}default:return Qe(de)}return de}function Rt(de){var we=x(de);function Le(De,He){var Ve=we?b(De*we/2)/we:De/2;if(!He)return[2*Ve,-de];var Qe=2*n(Ve*x(He)),zt=1/b(He);return[x(Qe)*zt,He+(1-o(Qe))*zt-de]}return Le.invert=function(De,He){if(i(He+=de)<p)return[we?2*n(we*De/2)/we:De,0];var Ve=De*De+He*He,Qe=0,zt=10,Jt;do{var qt=b(Qe),Qt=1/o(Qe),or=Ve-2*He*Qe+Qe*Qe;Qe-=Jt=(qt*or+2*(Qe-He))/(2+or*Qt*Qt+2*(Qe-He)*qt)}while(i(Jt)>p&&--zt>0);var _r=De*(qt=b(Qe)),Sr=b(i(He)<i(Qe+1/qt)?D(_r)*.5:q(_r)*.5+A/4)/x(Qe);return[we?2*n(we*Sr)/we:2*Sr,Qe]},Le}function hr(){return et(Rt).scale(131.215)}var Lr=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];Lr.forEach(function(de){de[1]*=1.0144});function zr(de,we){var Le=c(18,i(we)*36/A),De=l(Le),He=Le-De,Ve=(or=Lr[De])[0],Qe=or[1],zt=(or=Lr[++De])[0],Jt=or[1],qt=(or=Lr[c(19,++De)])[0],Qt=or[1],or;return[de*(zt+He*(qt-Ve)/2+He*He*(qt-2*zt+Ve)/2),(we>0?T:-T)*(Jt+He*(Qt-Qe)/2+He*He*(Qt-2*Jt+Qe)/2)]}zr.invert=function(de,we){var Le=we/T,De=Le*90,He=c(18,i(De/5)),Ve=f(0,l(He));do{var Qe=Lr[Ve][1],zt=Lr[Ve+1][1],Jt=Lr[c(19,Ve+2)][1],qt=Jt-Qe,Qt=Jt-2*zt+Qe,or=2*(i(Le)-zt)/qt,_r=Qt/qt,Sr=or*(1-_r*or*(1-2*_r*or));if(Sr>=0||Ve===1){De=(we>=0?5:-5)*(Sr+He);var Hr=50,un;do He=c(18,i(De)/5),Ve=l(He),Sr=He-Ve,Qe=Lr[Ve][1],zt=Lr[Ve+1][1],Jt=Lr[c(19,Ve+2)][1],De-=(un=(we>=0?T:-T)*(zt+Sr*(Jt-Qe)/2+Sr*Sr*(Jt-2*zt+Qe)/2)-we)*C;while(i(un)>w&&--Hr>0);break}}while(--Ve>=0);var Ln=Lr[Ve][0],yi=Lr[Ve+1][0],Ji=Lr[c(19,Ve+2)][0];return[de/(yi+Sr*(Ji-Ln)/2+Sr*Sr*(Ji-2*yi+Ln)/2),De*M]};function Zr(){return t.geoProjection(zr).scale(152.63)}function an(de){function we(Le,De){var He=o(De),Ve=(de-1)/(de-He*o(Le));return[Ve*He*x(Le),Ve*x(De)]}return we.invert=function(Le,De){var He=Le*Le+De*De,Ve=O(He),Qe=(de-O(1-He*(de+1)/(de-1)))/((de-1)/Ve+Ve/(de-1));return[a(Le*Qe,Ve*O(1-Qe*Qe)),Ve?D(De*Qe/Ve):0]},we}function Sn(de,we){var Le=an(de);if(!we)return Le;var De=o(we),He=x(we);function Ve(Qe,zt){var Jt=Le(Qe,zt),qt=Jt[1],Qt=qt*He/(de-1)+De;return[Jt[0]*De/Qt,qt/Qt]}return Ve.invert=function(Qe,zt){var Jt=(de-1)/(de-1-zt*He);return Le.invert(Jt*Qe,Jt*zt*De)},Ve}function Nr(){var de=2,we=0,Le=t.geoProjectionMutator(Sn),De=Le(de,we);return De.distance=function(He){return arguments.length?Le(de=+He,we):de},De.tilt=function(He){return arguments.length?Le(de,we=He*M):we*C},De.scale(432.147).clipAngle(q(1/de)*C-1e-6)}var tn=1e-4,rn=1e4,An=-180,Xn=An+tn,Oi=180,Fi=Oi-tn,Hi=-90,ji=Hi+tn,Un=90,ri=Un-tn;function Ki(de){return de.length>0}function ca(de){return Math.floor(de*rn)/rn}function Ja(de){return de===Hi||de===Un?[0,de]:[An,ca(de)]}function _o(de){var we=de[0],Le=de[1],De=!1;return we<=Xn?(we=An,De=!0):we>=Fi&&(we=Oi,De=!0),Le<=ji?(Le=Hi,De=!0):Le>=ri&&(Le=Un,De=!0),De?[we,Le]:de}function go(de){return de.map(_o)}function bo(de,we,Le){for(var De=0,He=de.length;De<He;++De){var Ve=de[De].slice();Le.push({index:-1,polygon:we,ring:Ve});for(var Qe=0,zt=Ve.length;Qe<zt;++Qe){var Jt=Ve[Qe],qt=Jt[0],Qt=Jt[1];if(qt<=Xn||qt>=Fi||Qt<=ji||Qt>=ri){Ve[Qe]=_o(Jt);for(var or=Qe+1;or<zt;++or){var _r=Ve[or],Sr=_r[0],Hr=_r[1];if(Sr>Xn&&Sr<Fi&&Hr>ji&&Hr<ri)break}if(or===Qe+1)continue;if(Qe){var un={index:-1,polygon:we,ring:Ve.slice(0,Qe+1)};un.ring[un.ring.length-1]=Ja(Qt),Le[Le.length-1]=un}else Le.pop();if(or>=zt)break;Le.push({index:-1,polygon:we,ring:Ve=Ve.slice(or-1)}),Ve[0]=Ja(Ve[0][1]),Qe=-1,zt=Ve.length}}}}function Na(de){var we,Le=de.length,De={},He={},Ve,Qe,zt,Jt,qt;for(we=0;we<Le;++we){if(Ve=de[we],Qe=Ve.ring[0],Jt=Ve.ring[Ve.ring.length-1],Qe[0]===Jt[0]&&Qe[1]===Jt[1]){Ve.polygon.push(Ve.ring),de[we]=null;continue}Ve.index=we,De[Qe]=He[Jt]=Ve}for(we=0;we<Le;++we)if(Ve=de[we],Ve){if(Qe=Ve.ring[0],Jt=Ve.ring[Ve.ring.length-1],zt=He[Qe],qt=De[Jt],delete De[Qe],delete He[Jt],Qe[0]===Jt[0]&&Qe[1]===Jt[1]){Ve.polygon.push(Ve.ring);continue}zt?(delete He[Qe],delete De[zt.ring[0]],zt.ring.pop(),de[zt.index]=null,Ve={index:-1,polygon:zt.polygon,ring:zt.ring.concat(Ve.ring)},zt===qt?Ve.polygon.push(Ve.ring):(Ve.index=Le++,de.push(De[Ve.ring[0]]=He[Ve.ring[Ve.ring.length-1]]=Ve))):qt?(delete De[Jt],delete He[qt.ring[qt.ring.length-1]],Ve.ring.pop(),Ve={index:Le++,polygon:qt.polygon,ring:Ve.ring.concat(qt.ring)},de[qt.index]=null,de.push(De[Ve.ring[0]]=He[Ve.ring[Ve.ring.length-1]]=Ve)):(Ve.ring.push(Ve.ring[0]),Ve.polygon.push(Ve.ring))}}function ws(de){var we={type:"Feature",geometry:Ko(de.geometry)};return de.id!=null&&(we.id=de.id),de.bbox!=null&&(we.bbox=de.bbox),de.properties!=null&&(we.properties=de.properties),we}function Ko(de){if(de==null)return de;var we,Le,De,He;switch(de.type){case"GeometryCollection":we={type:"GeometryCollection",geometries:de.geometries.map(Ko)};break;case"Point":we={type:"Point",coordinates:_o(de.coordinates)};break;case"MultiPoint":case"LineString":we={type:de.type,coordinates:go(de.coordinates)};break;case"MultiLineString":we={type:"MultiLineString",coordinates:de.coordinates.map(go)};break;case"Polygon":{var Ve=[];bo(de.coordinates,Ve,Le=[]),Na(Le),we={type:"Polygon",coordinates:Ve};break}case"MultiPolygon":{Le=[],De=-1,He=de.coordinates.length;for(var Qe=new Array(He);++De<He;)bo(de.coordinates[De],Qe[De]=[],Le);Na(Le),we={type:"MultiPolygon",coordinates:Qe.filter(Ki)};break}default:return de}return de.bbox!=null&&(we.bbox=de.bbox),we}function Uo(de){if(de==null)return de;switch(de.type){case"Feature":return ws(de);case"FeatureCollection":{var we={type:"FeatureCollection",features:de.features.map(ws)};return de.bbox!=null&&(we.bbox=de.bbox),we}default:return Ko(de)}}function hi(de,we){var Le=b(we/2),De=x(k*Le);return[de*(.74482-.34588*De*De),1.70711*Le]}hi.invert=function(de,we){var Le=we/1.70711,De=x(k*Le);return[de/(.74482-.34588*De*De),2*n(Le)]};function ea(){return t.geoProjection(hi).scale(146.153)}function Ts(de,we,Le){var De=t.geoInterpolate(we,Le),He=De(.5),Ve=t.geoRotation([-He[0],-He[1]])(we),Qe=De.distance/2,zt=-D(x(Ve[1]*M)/x(Qe)),Jt=[-He[0],-He[1],-(Ve[0]>0?A-zt:zt)*C],qt=t.geoProjection(de(Qe)).rotate(Jt),Qt=t.geoRotation(Jt),or=qt.center;return delete qt.rotate,qt.center=function(_r){return arguments.length?or(Qt(_r)):Qt.invert(or())},qt.clipAngle(90)}function Ml(de){var we=o(de);function Le(De,He){var Ve=t.geoGnomonicRaw(De,He);return Ve[0]*=we,Ve}return Le.invert=function(De,He){return t.geoGnomonicRaw.invert(De/we,He)},Le}function Wl(){return su([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function su(de,we){return Ts(Ml,de,we)}function Xu(de){if(!(de*=2))return t.geoAzimuthalEquidistantRaw;var we=-de/2,Le=-we,De=de*de,He=b(Le),Ve=.5/x(Le);function Qe(zt,Jt){var qt=q(o(Jt)*o(zt-we)),Qt=q(o(Jt)*o(zt-Le)),or=Jt<0?-1:1;return qt*=qt,Qt*=Qt,[(qt-Qt)/(2*de),or*O(4*De*Qt-(De-qt+Qt)*(De-qt+Qt))/(2*de)]}return Qe.invert=function(zt,Jt){var qt=Jt*Jt,Qt=o(O(qt+(_r=zt+we)*_r)),or=o(O(qt+(_r=zt+Le)*_r)),_r,Sr;return[a(Sr=Qt-or,_r=(Qt+or)*He),(Jt<0?-1:1)*q(O(_r*_r+Sr*Sr)*Ve)]},Qe}function Wf(){return lu([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function lu(de,we){return Ts(Xu,de,we)}function Rc(de,we){if(i(we)<p)return[de,0];var Le=i(we/T),De=D(Le);if(i(de)<p||i(i(we)-T)<p)return[0,d(we)*A*b(De/2)];var He=o(De),Ve=i(A/de-de/A)/2,Qe=Ve*Ve,zt=He/(Le+He-1),Jt=zt*(2/Le-1),qt=Jt*Jt,Qt=qt+Qe,or=zt-qt,_r=Qe+zt;return[d(de)*A*(Ve*or+O(Qe*or*or-Qt*(zt*zt-qt)))/Qt,d(we)*A*(Jt*_r-Ve*O((Qe+1)*Qt-_r*_r))/Qt]}Rc.invert=function(de,we){if(i(we)<p)return[de,0];if(i(de)<p)return[0,T*x(2*n(we/A))];var Le=(de/=A)*de,De=(we/=A)*we,He=Le+De,Ve=He*He,Qe=-i(we)*(1+He),zt=Qe-2*De+Le,Jt=-2*Qe+1+2*De+Ve,qt=De/Jt+(2*zt*zt*zt/(Jt*Jt*Jt)-9*Qe*zt/(Jt*Jt))/27,Qt=(Qe-zt*zt/(3*Jt))/Jt,or=2*O(-Qt/3),_r=q(3*qt/(Qt*or))/3;return[A*(He-1+O(1+2*(Le-De)+Ve))/(2*de),d(we)*A*(-or*o(_r+A/3)-zt/(3*Jt))]};function Dc(){return t.geoProjection(Rc).scale(79.4183)}function fc(de,we){if(i(we)<p)return[de,0];var Le=i(we/T),De=D(Le);if(i(de)<p||i(i(we)-T)<p)return[0,d(we)*A*b(De/2)];var He=o(De),Ve=i(A/de-de/A)/2,Qe=Ve*Ve,zt=He*(O(1+Qe)-Ve*He)/(1+Qe*Le*Le);return[d(de)*A*zt,d(we)*A*O(1-zt*(2*Ve+zt))]}fc.invert=function(de,we){if(!de)return[0,T*x(2*n(we/A))];var Le=i(de/A),De=(1-Le*Le-(we/=A)*we)/(2*Le),He=De*De,Ve=O(He+1);return[d(de)*A*(Ve-De),d(we)*T*x(2*a(O((1-2*De*Le)*(De+Ve)-Le),O(Ve+De+Le)))]};function Ih(){return t.geoProjection(fc).scale(79.4183)}function rh(de,we){if(i(we)<p)return[de,0];var Le=we/T,De=D(Le);if(i(de)<p||i(i(we)-T)<p)return[0,A*b(De/2)];var He=(A/de-de/A)/2,Ve=Le/(1+o(De));return[A*(d(de)*O(He*He+1-Ve*Ve)-He),A*Ve]}rh.invert=function(de,we){if(!we)return[de,0];var Le=we/A,De=(A*A*(1-Le*Le)-de*de)/(2*A*de);return[de?A*(d(de)*O(De*De+1)-De):0,T*x(2*n(Le))]};function cc(){return t.geoProjection(rh).scale(79.4183)}function mf(de,we){if(!we)return[de,0];var Le=i(we);if(!de||Le===T)return[0,we];var De=Le/T,He=De*De,Ve=(8*De-He*(He+2)-5)/(2*He*(De-1)),Qe=Ve*Ve,zt=De*Ve,Jt=He+Qe+2*zt,qt=De+3*Ve,Qt=de/T,or=Qt+1/Qt,_r=d(i(de)-T)*O(or*or-4),Sr=_r*_r,Hr=Jt*(He+Qe*Sr-1)+(1-He)*(He*(qt*qt+4*Qe)+12*zt*Qe+4*Qe*Qe),un=(_r*(Jt+Qe-1)+2*O(Hr))/(4*Jt+Sr);return[d(de)*T*un,d(we)*T*O(1+_r*i(un)-un*un)]}mf.invert=function(de,we){var Le;if(!de||!we)return[de,we];we/=A;var De=d(de)*de/T,He=(De*De-1+4*we*we)/i(De),Ve=He*He,Qe=2*we,zt=50;do{var Jt=Qe*Qe,qt=(8*Qe-Jt*(Jt+2)-5)/(2*Jt*(Qe-1)),Qt=(3*Qe-Jt*Qe-10)/(2*Jt*Qe),or=qt*qt,_r=Qe*qt,Sr=Qe+qt,Hr=Sr*Sr,un=Qe+3*qt,Ln=Hr*(Jt+or*Ve-1)+(1-Jt)*(Jt*(un*un+4*or)+or*(12*_r+4*or)),yi=-2*Sr*(4*_r*or+(1-4*Jt+3*Jt*Jt)*(1+Qt)+or*(-6+14*Jt-Ve+(-8+8*Jt-2*Ve)*Qt)+_r*(-8+12*Jt+(-10+10*Jt-Ve)*Qt)),Ji=O(Ln),ra=He*(Hr+or-1)+2*Ji-De*(4*Hr+Ve),sa=He*(2*qt*Qt+2*Sr*(1+Qt))+yi/Ji-8*Sr*(He*(-1+or+Hr)+2*Ji)*(1+Qt)/(Ve+4*Hr);Qe-=Le=ra/sa}while(Le>p&&--zt>0);return[d(de)*(O(He*He+4)+He)*A/4,T*Qe]};function Zu(){return t.geoProjection(mf).scale(127.16)}function Fh(de,we,Le,De,He){function Ve(Qe,zt){var Jt=Le*x(De*zt),qt=O(1-Jt*Jt),Qt=O(2/(1+qt*o(Qe*=He)));return[de*qt*Qt*x(Qe),we*Jt*Qt]}return Ve.invert=function(Qe,zt){var Jt=Qe/de,qt=zt/we,Qt=O(Jt*Jt+qt*qt),or=2*D(Qt/2);return[a(Qe*b(or),de*Qt)/He,Qt&&D(zt*x(or)/(we*Le*Qt))/De]},Ve}function Xv(de,we,Le,De){var He=A/3;de=f(de,p),we=f(we,p),de=c(de,T),we=c(we,A-p),Le=f(Le,0),Le=c(Le,100-p),De=f(De,p);var Ve=Le/100+1,Qe=De/100,zt=q(Ve*o(He))/He,Jt=x(de)/x(zt*T),qt=we/A,Qt=O(Qe*x(de/2)/x(we/2)),or=Qt/O(qt*Jt*zt),_r=1/(Qt*O(qt*Jt*zt));return Fh(or,_r,Jt,zt,qt)}function qh(){var de=65*M,we=60*M,Le=20,De=200,He=t.geoProjectionMutator(Xv),Ve=He(de,we,Le,De);return Ve.poleline=function(Qe){return arguments.length?He(de=+Qe*M,we,Le,De):de*C},Ve.parallels=function(Qe){return arguments.length?He(de,we=+Qe*M,Le,De):we*C},Ve.inflation=function(Qe){return arguments.length?He(de,we,Le=+Qe,De):Le},Ve.ratio=function(Qe){return arguments.length?He(de,we,Le,De=+Qe):De},Ve.scale(163.775)}function Zv(){return qh().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}var Ic=4*A+3*O(3),ku=2*O(2*A*O(3)/Ic),nh=ht(ku*O(3)/A,ku,Ic/6);function ih(){return t.geoProjection(nh).scale(176.84)}function ah(de,we){return[de*O(1-3*we*we/(A*A)),we]}ah.invert=function(de,we){return[de/O(1-3*we*we/(A*A)),we]};function Xf(){return t.geoProjection(ah).scale(152.63)}function zh(de,we){var Le=o(we),De=o(de)*Le,He=1-De,Ve=o(de=a(x(de)*Le,-x(we))),Qe=x(de);return Le=O(1-De*De),[Qe*Le-Ve*He,-Ve*Le-Qe*He]}zh.invert=function(de,we){var Le=(de*de+we*we)/-2,De=O(-Le*(2+Le)),He=we*Le+de*De,Ve=de*Le-we*De,Qe=O(Ve*Ve+He*He);return[a(De*He,Qe*(1+Le)),Qe?-D(De*Ve/Qe):0]};function jv(){return t.geoProjection(zh).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)}function Oh(de,we){var Le=fe(de,we);return[(Le[0]+de/T)/2,(Le[1]+we)/2]}Oh.invert=function(de,we){var Le=de,De=we,He=25;do{var Ve=o(De),Qe=x(De),zt=x(2*De),Jt=Qe*Qe,qt=Ve*Ve,Qt=x(Le),or=o(Le/2),_r=x(Le/2),Sr=_r*_r,Hr=1-qt*or*or,un=Hr?q(Ve*or)*O(Ln=1/Hr):Ln=0,Ln,yi=.5*(2*un*Ve*_r+Le/T)-de,Ji=.5*(un*Qe+De)-we,ra=.5*Ln*(qt*Sr+un*Ve*or*Jt)+.5/T,sa=Ln*(Qt*zt/4-un*Qe*_r),pa=.125*Ln*(zt*_r-un*Qe*qt*Qt),Ro=.5*Ln*(Jt*or+un*Sr*Ve)+.5,Jo=sa*pa-Ro*ra,ba=(Ji*sa-yi*Ro)/Jo,qa=(yi*pa-Ji*ra)/Jo;Le-=ba,De-=qa}while((i(ba)>p||i(qa)>p)&&--He>0);return[Le,De]};function uu(){return t.geoProjection(Oh).scale(158.837)}e.geoNaturalEarth=t.geoNaturalEarth1,e.geoNaturalEarthRaw=t.geoNaturalEarth1Raw,e.geoAiry=ne,e.geoAiryRaw=K,e.geoAitoff=ue,e.geoAitoffRaw=fe,e.geoArmadillo=Z,e.geoArmadilloRaw=ee,e.geoAugust=ce,e.geoAugustRaw=oe,e.geoBaker=te,e.geoBakerRaw=he,e.geoBerghaus=ae,e.geoBerghausRaw=ge,e.geoBertin1953=ot,e.geoBertin1953Raw=Ie,e.geoBoggs=We,e.geoBoggsRaw=Ke,e.geoBonne=dt,e.geoBonneRaw=Xe,e.geoBottomley=$t,e.geoBottomleyRaw=_t,e.geoBromley=fr,e.geoBromleyRaw=Ut,e.geoChamberlin=Ze,e.geoChamberlinRaw=gt,e.geoChamberlinAfrica=Je,e.geoCollignon=Se,e.geoCollignonRaw=At,e.geoCraig=Te,e.geoCraigRaw=pe,e.geoCraster=Wt,e.geoCrasterRaw=Dt,e.geoCylindricalEqualArea=qr,e.geoCylindricalEqualAreaRaw=er,e.geoCylindricalStereographic=mr,e.geoCylindricalStereographicRaw=Vr,e.geoEckert1=nn,e.geoEckert1Raw=Fr,e.geoEckert2=xn,e.geoEckert2Raw=jn,e.geoEckert3=ki,e.geoEckert3Raw=pn,e.geoEckert4=bi,e.geoEckert4Raw=qn,e.geoEckert5=nt,e.geoEckert5Raw=Si,e.geoEckert6=ut,e.geoEckert6Raw=ze,e.geoEisenlohr=nr,e.geoEisenlohrRaw=Ot,e.geoFahey=Rr,e.geoFaheyRaw=vr,e.geoFoucaut=Yr,e.geoFoucautRaw=Gr,e.geoFoucautSinusoidal=on,e.geoFoucautSinusoidalRaw=Xr,e.geoGilbert=vi,e.geoGingery=Ya,e.geoGingeryRaw=Zi,e.geoGinzburg4=Qi,e.geoGinzburg4Raw=Bn,e.geoGinzburg5=Nn,e.geoGinzburg5Raw=ya,e.geoGinzburg6=Bt,e.geoGinzburg6Raw=je,e.geoGinzburg8=br,e.geoGinzburg8Raw=ur,e.geoGinzburg9=ln,e.geoGinzburg9Raw=Jr,e.geoGringorten=Wn,e.geoGringortenRaw=Cr,e.geoGuyou=Ho,e.geoGuyouRaw=uo,e.geoHammer=qe,e.geoHammerRaw=_e,e.geoHammerRetroazimuthal=al,e.geoHammerRetroazimuthalRaw=xs,e.geoHealpix=Al,e.geoHealpixRaw=ds,e.geoHill=Vu,e.geoHillRaw=ru,e.geoHomolosine=us,e.geoHomolosineRaw=Pl,e.geoHufnagel=ts,e.geoHufnagelRaw=dl,e.geoHyperelliptical=Aa,e.geoHyperellipticalRaw=oi,e.geoInterrupt=Ma,e.geoInterruptedBoggs=jc,e.geoInterruptedHomolosine=hf,e.geoInterruptedMollweide=Lo,e.geoInterruptedMollweideHemispheres=Tu,e.geoInterruptedSinuMollweide=Hu,e.geoInterruptedSinusoidal=Sc,e.geoKavrayskiy7=qf,e.geoKavrayskiy7Raw=fo,e.geoLagrange=Us,e.geoLagrangeRaw=Eh,e.geoLarrivee=vf,e.geoLarriveeRaw=kh,e.geoLaskowski=ps,e.geoLaskowskiRaw=Mo,e.geoLittrow=Po,e.geoLittrowRaw=yo,e.geoLoximuthal=qs,e.geoLoximuthalRaw=Ec,e.geoMiller=df,e.geoMillerRaw=Hl,e.geoModifiedStereographic=Mu,e.geoModifiedStereographicRaw=bd,e.geoModifiedStereographicAlaska=pf,e.geoModifiedStereographicGs48=Yl,e.geoModifiedStereographicGs50=sv,e.geoModifiedStereographicMiller=Ch,e.geoModifiedStereographicLee=lv,e.geoMollweide=Vt,e.geoMollweideRaw=xt,e.geoMtFlatPolarParabolic=fv,e.geoMtFlatPolarParabolicRaw=Lh,e.geoMtFlatPolarQuartic=Zd,e.geoMtFlatPolarQuarticRaw=wd,e.geoMtFlatPolarSinusoidal=Bv,e.geoMtFlatPolarSinusoidalRaw=zf,e.geoNaturalEarth2=Ph,e.geoNaturalEarth2Raw=lc,e.geoNellHammer=kc,e.geoNellHammerRaw=Gu,e.geoInterruptedQuarticAuthalic=Nv,e.geoNicolosi=Vv,e.geoNicolosiRaw=Uv,e.geoPatterson=Nf,e.geoPattersonRaw=Kc,e.geoPolyconic=zs,e.geoPolyconicRaw=Dl,e.geoPolyhedral=Jc,e.geoPolyhedralButterfly=Uf,e.geoPolyhedralCollignon=Td,e.geoPolyhedralWaterman=No,e.geoProject=Hs,e.geoGringortenQuincuncial=Ue,e.geoPeirceQuincuncial=st,e.geoPierceQuincuncial=st,e.geoQuantize=Gt,e.geoQuincuncial=Dh,e.geoRectangularPolyconic=hr,e.geoRectangularPolyconicRaw=Rt,e.geoRobinson=Zr,e.geoRobinsonRaw=zr,e.geoSatellite=Nr,e.geoSatelliteRaw=Sn,e.geoSinuMollweide=sc,e.geoSinuMollweideRaw=wi,e.geoSinusoidal=at,e.geoSinusoidalRaw=vt,e.geoStitch=Uo,e.geoTimes=ea,e.geoTimesRaw=hi,e.geoTwoPointAzimuthal=su,e.geoTwoPointAzimuthalRaw=Ml,e.geoTwoPointAzimuthalUsa=Wl,e.geoTwoPointEquidistant=lu,e.geoTwoPointEquidistantRaw=Xu,e.geoTwoPointEquidistantUsa=Wf,e.geoVanDerGrinten=Dc,e.geoVanDerGrintenRaw=Rc,e.geoVanDerGrinten2=Ih,e.geoVanDerGrinten2Raw=fc,e.geoVanDerGrinten3=cc,e.geoVanDerGrinten3Raw=rh,e.geoVanDerGrinten4=Zu,e.geoVanDerGrinten4Raw=mf,e.geoWagner=qh,e.geoWagner7=Zv,e.geoWagnerRaw=Xv,e.geoWagner4=ih,e.geoWagner4Raw=nh,e.geoWagner6=Xf,e.geoWagner6Raw=ah,e.geoWiechel=jv,e.geoWiechelRaw=zh,e.geoWinkel3=uu,e.geoWinkel3Raw=Oh,Object.defineProperty(e,"__esModule",{value:!0})})});var aRe=ie((Gdr,iRe)=>{"use strict";var Rf=Mi(),qY=Zt(),vFt=Ti(),U3=Math.PI/180,V_=180/Math.PI,OY={cursor:"pointer"},BY={cursor:"auto"};function dFt(e,t){var r=e.projection,i;return t._isScoped?i=pFt:t._isClipped?i=yFt:i=gFt,i(e,r)}iRe.exports=dFt;function NY(e,t){return Rf.behavior.zoom().translate(t.translate()).scale(t.scale())}function UY(e,t,r){var i=e.id,n=e.graphDiv,a=n.layout,o=a[i],s=n._fullLayout,l=s[i],u={},f={};function c(h,v){u[i+"."+h]=qY.nestedProperty(o,h).get(),vFt.call("_storeDirectGUIEdit",a,s._preGUI,u);var d=qY.nestedProperty(l,h);d.get()!==v&&(d.set(v),qY.nestedProperty(o,h).set(v),f[i+"."+h]=v)}r(c),c("projection.scale",t.scale()/e.fitScale),c("fitbounds",!1),n.emit("plotly_relayout",f)}function pFt(e,t){var r=NY(e,t);function i(){Rf.select(this).style(OY)}function n(){t.scale(Rf.event.scale).translate(Rf.event.translate),e.render(!0);var s=t.invert(e.midPt);e.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":t.scale()/e.fitScale,"geo.center.lon":s[0],"geo.center.lat":s[1]})}function a(s){var l=t.invert(e.midPt);s("center.lon",l[0]),s("center.lat",l[1])}function o(){Rf.select(this).style(BY),UY(e,t,a)}return r.on("zoomstart",i).on("zoom",n).on("zoomend",o),r}function gFt(e,t){var r=NY(e,t),i=2,n,a,o,s,l,u,f,c,h;function v(A){return t.invert(A)}function d(A){var T=v(A);if(!T)return!0;var k=t(T);return Math.abs(k[0]-A[0])>i||Math.abs(k[1]-A[1])>i}function x(){Rf.select(this).style(OY),n=Rf.mouse(this),a=t.rotate(),o=t.translate(),s=a,l=v(n)}function b(){if(u=Rf.mouse(this),d(n)){r.scale(t.scale()),r.translate(t.translate());return}t.scale(Rf.event.scale),t.translate([o[0],Rf.event.translate[1]]),l?v(u)&&(c=v(u),f=[s[0]+(c[0]-l[0]),a[1],a[2]],t.rotate(f),s=f):(n=u,l=v(n)),h=!0,e.render(!0);var A=t.rotate(),T=t.invert(e.midPt);e.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":t.scale()/e.fitScale,"geo.center.lon":T[0],"geo.center.lat":T[1],"geo.projection.rotation.lon":-A[0]})}function p(){Rf.select(this).style(BY),h&&UY(e,t,w)}function w(A){var T=t.rotate(),k=t.invert(e.midPt);A("projection.rotation.lon",-T[0]),A("center.lon",k[0]),A("center.lat",k[1])}return r.on("zoomstart",x).on("zoom",b).on("zoomend",p),r}function yFt(e,t){var r={r:t.rotate(),k:t.scale()},i=NY(e,t),n=MFt(i,"zoomstart","zoom","zoomend"),a=0,o=i.on,s;i.on("zoomstart",function(){Rf.select(this).style(OY);var h=Rf.mouse(this),v=t.rotate(),d=v,x=t.translate(),b=mFt(v);s=FD(t,h),o.call(i,"zoom",function(){var p=Rf.mouse(this);if(t.scale(r.k=Rf.event.scale),!s)h=p,s=FD(t,h);else if(FD(t,p)){t.rotate(v).translate(x);var w=FD(t,p),A=_Ft(s,w),T=wFt(xFt(b,A)),k=r.r=bFt(T,s,d);(!isFinite(k[0])||!isFinite(k[1])||!isFinite(k[2]))&&(k=d),t.rotate(k),d=k}u(n.of(this,arguments))}),l(n.of(this,arguments))}).on("zoomend",function(){Rf.select(this).style(BY),o.call(i,"zoom",null),f(n.of(this,arguments)),UY(e,t,c)}).on("zoom.redraw",function(){e.render(!0);var h=t.rotate();e.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":t.scale()/e.fitScale,"geo.projection.rotation.lon":-h[0],"geo.projection.rotation.lat":-h[1]})});function l(h){a++||h({type:"zoomstart"})}function u(h){h({type:"zoom"})}function f(h){--a||h({type:"zoomend"})}function c(h){var v=t.rotate();h("projection.rotation.lon",-v[0]),h("projection.rotation.lat",-v[1])}return Rf.rebind(i,n,"on")}function FD(e,t){var r=e.invert(t);return r&&isFinite(r[0])&&isFinite(r[1])&&TFt(r)}function mFt(e){var t=.5*e[0]*U3,r=.5*e[1]*U3,i=.5*e[2]*U3,n=Math.sin(t),a=Math.cos(t),o=Math.sin(r),s=Math.cos(r),l=Math.sin(i),u=Math.cos(i);return[a*s*u+n*o*l,n*s*u-a*o*l,a*o*u+n*s*l,a*s*l-n*o*u]}function xFt(e,t){var r=e[0],i=e[1],n=e[2],a=e[3],o=t[0],s=t[1],l=t[2],u=t[3];return[r*o-i*s-n*l-a*u,r*s+i*o+n*u-a*l,r*l-i*u+n*o+a*s,r*u+i*l-n*s+a*o]}function _Ft(e,t){if(!(!e||!t)){var r=AFt(e,t),i=Math.sqrt(nRe(r,r)),n=.5*Math.acos(Math.max(-1,Math.min(1,nRe(e,t)))),a=Math.sin(n)/i;return i&&[Math.cos(n),r[2]*a,-r[1]*a,r[0]*a]}}function bFt(e,t,r){var i=zY(t,2,e[0]);i=zY(i,1,e[1]),i=zY(i,0,e[2]-r[2]);var n=t[0],a=t[1],o=t[2],s=i[0],l=i[1],u=i[2],f=Math.atan2(a,n)*V_,c=Math.sqrt(n*n+a*a),h,v;Math.abs(l)>c?(v=(l>0?90:-90)-f,h=0):(v=Math.asin(l/c)*V_-f,h=Math.sqrt(c*c-l*l));var d=180-v-2*f,x=(Math.atan2(u,s)-Math.atan2(o,h))*V_,b=(Math.atan2(u,s)-Math.atan2(o,-h))*V_,p=tRe(r[0],r[1],v,x),w=tRe(r[0],r[1],d,b);return p<=w?[v,x,r[2]]:[d,b,r[2]]}function tRe(e,t,r,i){var n=rRe(r-e),a=rRe(i-t);return Math.sqrt(n*n+a*a)}function rRe(e){return(e%360+540)%360-180}function zY(e,t,r){var i=r*U3,n=e.slice(),a=t===0?1:0,o=t===2?1:2,s=Math.cos(i),l=Math.sin(i);return n[a]=e[a]*s-e[o]*l,n[o]=e[o]*s+e[a]*l,n}function wFt(e){return[Math.atan2(2*(e[0]*e[1]+e[2]*e[3]),1-2*(e[1]*e[1]+e[2]*e[2]))*V_,Math.asin(Math.max(-1,Math.min(1,2*(e[0]*e[2]-e[3]*e[1]))))*V_,Math.atan2(2*(e[0]*e[3]+e[1]*e[2]),1-2*(e[2]*e[2]+e[3]*e[3]))*V_]}function TFt(e){var t=e[0]*U3,r=e[1]*U3,i=Math.cos(r);return[i*Math.cos(t),i*Math.sin(t),Math.sin(r)]}function nRe(e,t){for(var r=0,i=0,n=e.length;i<n;++i)r+=e[i]*t[i];return r}function AFt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function MFt(e){for(var t=0,r=arguments.length,i=[];++t<r;)i.push(arguments[t]);var n=Rf.dispatch.apply(null,i);return n.of=function(a,o){return function(s){var l;try{l=s.sourceEvent=Rf.event,s.target=e,Rf.event=s,n[s.type].apply(a,o)}finally{Rf.event=l}}},n}});var hRe=ie((Ydr,cRe)=>{"use strict";var xy=Mi(),GY=FY(),SFt=GY.geoPath,EFt=GY.geoDistance,kFt=eRe(),CFt=Ti(),KE=Zt(),LFt=KE.strTranslate,qD=_i(),jE=oa(),oRe=Ol(),PFt=js(),HY=Wi(),sRe=Ld().getAutoRange,VY=Yh(),RFt=Ef().prepSelect,DFt=Ef().clearOutline,IFt=Ef().selectOnClick,FFt=aRe(),Rv=VE(),qFt=N3(),uRe=_D(),zFt=sY().feature;function fRe(e){this.id=e.id,this.graphDiv=e.graphDiv,this.container=e.container,this.topojsonURL=e.topojsonURL,this.isStatic=e.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var C0=fRe.prototype;cRe.exports=function(t){return new fRe(t)};C0.plot=function(e,t,r,i){var n=this;if(i)return n.update(e,t,!0);n._geoCalcData=e,n._fullLayout=t;var a=t[this.id],o=[],s=!1;for(var l in Rv.layerNameToAdjective)if(l!=="frame"&&a["show"+l]){s=!0;break}for(var u=!1,f=0;f<e.length;f++){var c=e[0][0].trace;c._geo=n,c.locationmode&&(s=!0);var h=c.marker;if(h){var v=h.angle,d=h.angleref;(v||d==="north"||d==="previous")&&(u=!0)}}if(this._hasMarkerAngles=u,s){var x=uRe.getTopojsonName(a);(n.topojson===null||x!==n.topojsonName)&&(n.topojsonName=x,PlotlyGeoAssets.topojson[n.topojsonName]===void 0&&o.push(n.fetchTopojson()))}o=o.concat(qFt.fetchTraceGeoData(e)),r.push(new Promise(function(b,p){Promise.all(o).then(function(){n.topojson=PlotlyGeoAssets.topojson[n.topojsonName],n.update(e,t),b()}).catch(p)}))};C0.fetchTopojson=function(){var e=this,t=uRe.getTopojsonPath(e.topojsonURL,e.topojsonName);return new Promise(function(r,i){xy.json(t,function(n,a){if(n)return n.status===404?i(new Error(["plotly.js could not find topojson file at",t+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):i(new Error(["unexpected error while fetching topojson file at",t].join(" ")));PlotlyGeoAssets.topojson[e.topojsonName]=a,r()})})};C0.update=function(e,t,r){var i=t[this.id];this.hasChoropleth=!1;for(var n=0;n<e.length;n++){var a=e[n],o=a[0].trace;o.type==="choropleth"&&(this.hasChoropleth=!0),o.visible===!0&&o._length>0&&o._module.calcGeoJSON(a,t)}if(!r){var s=this.updateProjection(e,t);if(s)return;(!this.viewInitial||this.scope!==i.scope)&&this.saveViewInitial(i)}this.scope=i.scope,this.updateBaseLayers(t,i),this.updateDims(t,i),this.updateFx(t,i),PFt.generalUpdatePerTraceModule(this.graphDiv,this,e,i);var l=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=l.selectAll(".point"),this.dataPoints.text=l.selectAll("text"),this.dataPaths.line=l.selectAll(".js-line");var u=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=u.selectAll("path"),this._render()};C0.updateProjection=function(e,t){var r=this.graphDiv,i=t[this.id],n=t._size,a=i.domain,o=i.projection,s=i.lonaxis,l=i.lataxis,u=s._ax,f=l._ax,c=this.projection=OFt(i),h=[[n.l+n.w*a.x[0],n.t+n.h*(1-a.y[1])],[n.l+n.w*a.x[1],n.t+n.h*(1-a.y[0])]],v=i.center||{},d=o.rotation||{},x=s.range||[],b=l.range||[];if(i.fitbounds){u._length=h[1][0]-h[0][0],f._length=h[1][1]-h[0][1],u.range=sRe(r,u),f.range=sRe(r,f);var p=(u.range[0]+u.range[1])/2,w=(f.range[0]+f.range[1])/2;if(i._isScoped)v={lon:p,lat:w};else if(i._isClipped){v={lon:p,lat:w},d={lon:p,lat:w,roll:d.roll};var A=o.type,T=Rv.lonaxisSpan[A]/2||180,k=Rv.lataxisSpan[A]/2||90;x=[p-T,p+T],b=[w-k,w+k]}else v={lon:p,lat:w},d={lon:p,lat:d.lat,roll:d.roll}}c.center([v.lon-d.lon,v.lat-d.lat]).rotate([-d.lon,-d.lat,d.roll]).parallels(o.parallels);var _=lRe(x,b);c.fitExtent(h,_);var E=this.bounds=c.getBounds(_),S=this.fitScale=c.scale(),g=c.translate();if(i.fitbounds){var C=c.getBounds(lRe(u.range,f.range)),M=Math.min((E[1][0]-E[0][0])/(C[1][0]-C[0][0]),(E[1][1]-E[0][1])/(C[1][1]-C[0][1]));isFinite(M)?c.scale(M*S):KE.warn("Something went wrong during"+this.id+"fitbounds computations.")}else c.scale(o.scale*S);var P=this.midPt=[(E[0][0]+E[1][0])/2,(E[0][1]+E[1][1])/2];if(c.translate([g[0]+(P[0]-g[0]),g[1]+(P[1]-g[1])]).clipExtent(E),i._isAlbersUsa){var D=c([v.lon,v.lat]),q=c.translate();c.translate([q[0]-(D[0]-q[0]),q[1]-(D[1]-q[1])])}};C0.updateBaseLayers=function(e,t){var r=this,i=r.topojson,n=r.layers,a=r.basePaths;function o(h){return h==="lonaxis"||h==="lataxis"}function s(h){return!!Rv.lineLayers[h]}function l(h){return!!Rv.fillLayers[h]}var u=this.hasChoropleth?Rv.layersForChoropleth:Rv.layers,f=u.filter(function(h){return s(h)||l(h)?t["show"+h]:o(h)?t[h].showgrid:!0}),c=r.framework.selectAll(".layer").data(f,String);c.exit().each(function(h){delete n[h],delete a[h],xy.select(this).remove()}),c.enter().append("g").attr("class",function(h){return"layer "+h}).each(function(h){var v=n[h]=xy.select(this);h==="bg"?r.bgRect=v.append("rect").style("pointer-events","all"):o(h)?a[h]=v.append("path").style("fill","none"):h==="backplot"?v.append("g").classed("choroplethlayer",!0):h==="frontplot"?v.append("g").classed("scatterlayer",!0):s(h)?a[h]=v.append("path").style("fill","none").style("stroke-miterlimit",2):l(h)&&(a[h]=v.append("path").style("stroke","none"))}),c.order(),c.each(function(h){var v=a[h],d=Rv.layerNameToAdjective[h];h==="frame"?v.datum(Rv.sphereSVG):s(h)||l(h)?v.datum(zFt(i,i.objects[h])):o(h)&&v.datum(BFt(h,t,e)).call(qD.stroke,t[h].gridcolor).call(jE.dashLine,t[h].griddash,t[h].gridwidth),s(h)?v.call(qD.stroke,t[d+"color"]).call(jE.dashLine,"",t[d+"width"]):l(h)&&v.call(qD.fill,t[d+"color"])})};C0.updateDims=function(e,t){var r=this.bounds,i=(t.framewidth||0)/2,n=r[0][0]-i,a=r[0][1]-i,o=r[1][0]-n+i,s=r[1][1]-a+i;jE.setRect(this.clipRect,n,a,o,s),this.bgRect.call(jE.setRect,n,a,o,s).call(qD.fill,t.bgcolor),this.xaxis._offset=n,this.xaxis._length=o,this.yaxis._offset=a,this.yaxis._length=s};C0.updateFx=function(e,t){var r=this,i=r.graphDiv,n=r.bgRect,a=e.dragmode,o=e.clickmode;if(r.isStatic)return;function s(){var c=r.viewInitial,h={};for(var v in c)h[r.id+"."+v]=c[v];CFt.call("_guiRelayout",i,h),i.emit("plotly_doubleclick",null)}function l(c){return r.projection.invert([c[0]+r.xaxis._offset,c[1]+r.yaxis._offset])}var u=function(c,h){if(h.isRect){var v=c.range={};v[r.id]=[l([h.xmin,h.ymin]),l([h.xmax,h.ymax])]}else{var d=c.lassoPoints={};d[r.id]=h.map(l)}},f={element:r.bgRect.node(),gd:i,plotinfo:{id:r.id,xaxis:r.xaxis,yaxis:r.yaxis,fillRangeItems:u},xaxes:[r.xaxis],yaxes:[r.yaxis],subplot:r.id,clickFn:function(c){c===2&&DFt(i)}};a==="pan"?(n.node().onmousedown=null,n.call(FFt(r,t)),n.on("dblclick.zoom",s),i._context._scrollZoom.geo||n.on("wheel.zoom",null)):(a==="select"||a==="lasso")&&(n.on(".zoom",null),f.prepFn=function(c,h,v){RFt(c,h,v,f,a)},VY.init(f)),n.on("mousemove",function(){var c=r.projection.invert(KE.getPositionFromD3Event());if(!c)return VY.unhover(i,xy.event);r.xaxis.p2c=function(){return c[0]},r.yaxis.p2c=function(){return c[1]},oRe.hover(i,xy.event,r.id)}),n.on("mouseout",function(){i._dragging||VY.unhover(i,xy.event)}),n.on("click",function(){a!=="select"&&a!=="lasso"&&(o.indexOf("select")>-1&&IFt(xy.event,i,[r.xaxis],[r.yaxis],r.id,f),o.indexOf("event")>-1&&oRe.click(i,xy.event))})};C0.makeFramework=function(){var e=this,t=e.graphDiv,r=t._fullLayout,i="clip"+r._uid+e.id;e.clipDef=r._clips.append("clipPath").attr("id",i),e.clipRect=e.clipDef.append("rect"),e.framework=xy.select(e.container).append("g").attr("class","geo "+e.id).call(jE.setClipUrl,i,t),e.project=function(n){var a=e.projection(n);return a?[a[0]-e.xaxis._offset,a[1]-e.yaxis._offset]:[null,null]},e.xaxis={_id:"x",c2p:function(n){return e.project(n)[0]}},e.yaxis={_id:"y",c2p:function(n){return e.project(n)[1]}},e.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},HY.setConvert(e.mockAxis,r)};C0.saveViewInitial=function(e){var t=e.center||{},r=e.projection,i=r.rotation||{};this.viewInitial={fitbounds:e.fitbounds,"projection.scale":r.scale};var n;e._isScoped?n={"center.lon":t.lon,"center.lat":t.lat}:e._isClipped?n={"projection.rotation.lon":i.lon,"projection.rotation.lat":i.lat}:n={"center.lon":t.lon,"center.lat":t.lat,"projection.rotation.lon":i.lon},KE.extendFlat(this.viewInitial,n)};C0.render=function(e){this._hasMarkerAngles&&e?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()};C0._render=function(){var e=this.projection,t=e.getPath(),r;function i(a){var o=e(a.lonlat);return o?LFt(o[0],o[1]):null}function n(a){return e.isLonLatOverEdges(a.lonlat)?"none":null}for(r in this.basePaths)this.basePaths[r].attr("d",t);for(r in this.dataPaths)this.dataPaths[r].attr("d",function(a){return t(a.geojson)});for(r in this.dataPoints)this.dataPoints[r].attr("display",n).attr("transform",i)};function OFt(e){var t=e.projection,r=t.type,i=Rv.projNames[r];i="geo"+KE.titleCase(i);for(var n=GY[i]||kFt[i],a=n(),o=e._isSatellite?Math.acos(1/t.distance)*180/Math.PI:e._isClipped?Rv.lonaxisSpan[r]/2:null,s=["center","rotate","parallels","clipExtent"],l=function(c){return c?a:[]},u=0;u<s.length;u++){var f=s[u];typeof a[f]!="function"&&(a[f]=l)}return a.isLonLatOverEdges=function(c){if(a(c)===null)return!0;if(o){var h=a.rotate(),v=EFt(c,[-h[0],-h[1]]),d=o*Math.PI/180;return v>d}else return!1},a.getPath=function(){return SFt().projection(a)},a.getBounds=function(c){return a.getPath().bounds(c)},a.precision(Rv.precision),e._isSatellite&&a.tilt(t.tilt).distance(t.distance),o&&a.clipAngle(o-Rv.clipPad),a}function BFt(e,t,r){var i=1e-6,n=2.5,a=t[e],o=Rv.scopeDefaults[t.scope],s,l,u;e==="lonaxis"?(s=o.lonaxisRange,l=o.lataxisRange,u=function(w,A){return[w,A]}):e==="lataxis"&&(s=o.lataxisRange,l=o.lonaxisRange,u=function(w,A){return[A,w]});var f={type:"linear",range:[s[0],s[1]-i],tick0:a.tick0,dtick:a.dtick};HY.setConvert(f,r);var c=HY.calcTicks(f);!t.isScoped&&e==="lonaxis"&&c.pop();for(var h=c.length,v=new Array(h),d=0;d<h;d++)for(var x=c[d].x,b=v[d]=[],p=l[0];p<l[1]+n;p+=n)b.push(u(x,p));return{type:"MultiLineString",coordinates:v}}function lRe(e,t){var r=Rv.clipPad,i=e[0]+r,n=e[1]-r,a=t[0]+r,o=t[1]-r;i>0&&n<0&&(n+=360);var s=(n-i)/4;return{type:"Polygon",coordinates:[[[i,a],[i,o],[i+s,o],[i+2*s,o],[i+3*s,o],[n,o],[n,a],[n-s,a],[n-2*s,a],[n-3*s,a],[i,a]]]}}});var YY=ie((Wdr,pRe)=>{"use strict";var H3=Qu(),NFt=fl().attributes,UFt=dc().dash,V3=VE(),VFt=Zs().overrideAll,vRe=sx(),dRe={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:H3.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:UFt},HFt=pRe.exports=VFt({domain:NFt({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:vRe(V3.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:vRe(V3.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:H3.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:V3.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:V3.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:V3.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:V3.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:H3.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:H3.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:H3.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:H3.background},lonaxis:dRe,lataxis:dRe},"plot","from-root");HFt.uirevision={valType:"any",editType:"none"}});var mRe=ie((Xdr,yRe)=>{"use strict";var zD=Zt(),GFt=r_(),YFt=pc().getSubplotData,OD=VE(),WFt=YY(),gRe=OD.axesNames;yRe.exports=function(t,r,i){GFt(t,r,i,{type:"geo",attributes:WFt,handleDefaults:XFt,fullData:i,partition:"y"})};function XFt(e,t,r,i){var n=YFt(i.fullData,"geo",i.id),a=n.map(function(K){return K._expandedIndex}),o=r("resolution"),s=r("scope"),l=OD.scopeDefaults[s],u=r("projection.type",l.projType),f=t._isAlbersUsa=u==="albers usa";f&&(s=t.scope="usa");var c=t._isScoped=s!=="world",h=t._isSatellite=u==="satellite",v=t._isConic=u.indexOf("conic")!==-1||u==="albers",d=t._isClipped=!!OD.lonaxisSpan[u];if(e.visible===!1){var x=zD.extendDeep({},t._template);x.showcoastlines=!1,x.showcountries=!1,x.showframe=!1,x.showlakes=!1,x.showland=!1,x.showocean=!1,x.showrivers=!1,x.showsubunits=!1,x.lonaxis&&(x.lonaxis.showgrid=!1),x.lataxis&&(x.lataxis.showgrid=!1),t._template=x}for(var b=r("visible"),p,w=0;w<gRe.length;w++){var A=gRe[w],T=[30,10][w],k;if(c)k=l[A+"Range"];else{var _=OD[A+"Span"],E=(_[u]||_["*"])/2,S=r("projection.rotation."+A.substr(0,3),l.projRotate[w]);k=[S-E,S+E]}var g=r(A+".range",k);r(A+".tick0"),r(A+".dtick",T),p=r(A+".showgrid",b?void 0:!1),p&&(r(A+".gridcolor"),r(A+".gridwidth"),r(A+".griddash")),t[A]._ax={type:"linear",_id:A.slice(0,3),_traceIndices:a,setScale:zD.identity,c2l:zD.identity,r2l:zD.identity,autorange:!0,range:g.slice(),_m:1,_input:{}}}var C=t.lonaxis.range,M=t.lataxis.range,P=C[0],D=C[1];P>0&&D<0&&(D+=360);var q=(P+D)/2,O;if(!f){var U=c?l.projRotate:[q,0,0];O=r("projection.rotation.lon",U[0]),r("projection.rotation.lat",U[1]),r("projection.rotation.roll",U[2]),p=r("showcoastlines",!c&&b),p&&(r("coastlinecolor"),r("coastlinewidth")),p=r("showocean",b?void 0:!1),p&&r("oceancolor")}var B,F;if(f?(B=-96.6,F=38.7):(B=c?q:O,F=(M[0]+M[1])/2),r("center.lon",B),r("center.lat",F),h&&(r("projection.tilt"),r("projection.distance")),v){var N=l.projParallels||[0,60];r("projection.parallels",N)}r("projection.scale"),p=r("showland",b?void 0:!1),p&&r("landcolor"),p=r("showlakes",b?void 0:!1),p&&r("lakecolor"),p=r("showrivers",b?void 0:!1),p&&(r("rivercolor"),r("riverwidth")),p=r("showcountries",c&&s!=="usa"&&b),p&&(r("countrycolor"),r("countrywidth")),(s==="usa"||s==="north america"&&o===50)&&(r("showsubunits",b),r("subunitcolor"),r("subunitwidth")),c||(p=r("showframe",b),p&&(r("framecolor"),r("framewidth"))),r("bgcolor");var X=r("fitbounds");X&&(delete t.projection.scale,c?(delete t.center.lon,delete t.center.lat):d?(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon,delete t.projection.rotation.lat,delete t.lonaxis.range,delete t.lataxis.range):(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon))}});var WY=ie((Zdr,bRe)=>{"use strict";var ZFt=pc().getSubplotCalcData,jFt=Zt().counterRegex,KFt=hRe(),dg="geo",xRe=jFt(dg),_Re={};_Re[dg]={valType:"subplotid",dflt:dg,editType:"calc"};function JFt(e){for(var t=e._fullLayout,r=e.calcdata,i=t._subplots[dg],n=0;n<i.length;n++){var a=i[n],o=ZFt(r,dg,a),s=t[a],l=s._subplot;l||(l=KFt({id:a,graphDiv:e,container:t._geolayer.node(),topojsonURL:e._context.topojsonURL,staticPlot:e._context.staticPlot}),t[a]._subplot=l),l.plot(o,t,e._promises)}}function QFt(e,t,r,i){for(var n=i._subplots[dg]||[],a=0;a<n.length;a++){var o=n[a],s=i[o]._subplot;!t[o]&&s&&(s.framework.remove(),s.clipDef.remove())}}function $Ft(e){for(var t=e._fullLayout,r=t._subplots[dg],i=0;i<r.length;i++){var n=t[r[i]],a=n._subplot;a.updateFx(t,n)}}bRe.exports={attr:dg,name:dg,idRoot:dg,idRegex:xRe,attrRegex:xRe,attributes:_Re,layoutAttributes:YY(),supplyLayoutDefaults:mRe(),plot:JFt,updateFx:$Ft,clean:QFt}});var TRe=ie((jdr,wRe)=>{"use strict";wRe.exports={attributes:O3(),supplyDefaults:qPe(),colorbar:yh(),formatLabels:BPe(),calc:oY(),calcGeoJSON:IY().calcGeoJSON,plot:IY().plot,style:LY(),styleOnSelect:Sv().styleOnSelect,hoverPoints:Y6e(),eventData:X6e(),selectPoints:K6e(),moduleType:"trace",name:"scattergeo",basePlotModule:WY(),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}});var MRe=ie((Kdr,ARe)=>{"use strict";ARe.exports=TRe()});var JE=ie((Jdr,kRe)=>{"use strict";var e8t=Ba().hovertemplateAttrs,g1=O3(),t8t=Ls(),SRe=rs(),r8t=Qu().defaultLine,p1=aa().extendFlat,ERe=g1.marker.line;kRe.exports=p1({locations:{valType:"data_array",editType:"calc"},locationmode:g1.locationmode,z:{valType:"data_array",editType:"calc"},geojson:p1({},g1.geojson,{}),featureidkey:g1.featureidkey,text:p1({},g1.text,{}),hovertext:p1({},g1.hovertext,{}),marker:{line:{color:p1({},ERe.color,{dflt:r8t}),width:p1({},ERe.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:g1.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:g1.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:p1({},SRe.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:e8t(),showlegend:p1({},SRe.showlegend,{dflt:!1})},t8t("",{cLetter:"z",editTypeOverride:"calc"}))});var LRe=ie((Qdr,CRe)=>{"use strict";var BD=Zt(),n8t=$f(),i8t=JE();CRe.exports=function(t,r,i,n){function a(h,v){return BD.coerce(t,r,i8t,h,v)}var o=a("locations"),s=a("z");if(!(o&&o.length&&BD.isArrayOrTypedArray(s)&&s.length)){r.visible=!1;return}r._length=Math.min(o.length,s.length);var l=a("geojson"),u;(typeof l=="string"&&l!==""||BD.isPlainObject(l))&&(u="geojson-id");var f=a("locationmode",u);f==="geojson-id"&&a("featureidkey"),a("text"),a("hovertext"),a("hovertemplate");var c=a("marker.line.width");c&&a("marker.line.color"),a("marker.opacity"),n8t(t,r,n,a,{prefix:"",cLetter:"z"}),BD.coerceSelectionMarkerOpacity(r,a)}});var XY=ie(($dr,DRe)=>{"use strict";var PRe=la(),a8t=eo().BADNUM,o8t=xv(),s8t=K0(),l8t=bp();function RRe(e){return e&&typeof e=="string"}DRe.exports=function(t,r){var i=r._length,n=new Array(i),a;r.geojson?a=function(f){return RRe(f)||PRe(f)}:a=RRe;for(var o=0;o<i;o++){var s=n[o]={},l=r.locations[o],u=r.z[o];a(l)&&PRe(u)?(s.loc=l,s.z=u):(s.loc=null,s.z=a8t),s.index=o}return s8t(n,r),o8t(t,r,{vals:r.z,containerStr:"",cLetter:"z"}),l8t(n,r),n}});var ND=ie((epr,FRe)=>{"use strict";var u8t=Mi(),f8t=_i(),ZY=oa(),c8t=ul();function h8t(e,t){t&&IRe(e,t)}function IRe(e,t){var r=t[0].trace,i=t[0].node3,n=i.selectAll(".choroplethlocation"),a=r.marker||{},o=a.line||{},s=c8t.makeColorScaleFuncFromTrace(r);n.each(function(l){u8t.select(this).attr("fill",s(l.z)).call(f8t.stroke,l.mlc||o.color).call(ZY.dashLine,"",l.mlw||o.width||0).style("opacity",a.opacity)}),ZY.selectedPointStyle(n,r)}function v8t(e,t){var r=t[0].node3,i=t[0].trace;i.selectedpoints?ZY.selectedPointStyle(r.selectAll(".choroplethlocation"),i):IRe(e,t)}FRe.exports={style:h8t,styleOnSelect:v8t}});var jY=ie((tpr,ORe)=>{"use strict";var d8t=Mi(),qRe=Zt(),G3=N3(),p8t=_D().getTopojsonFeatures,zRe=Ld().findExtremes,g8t=ND().style;function y8t(e,t,r){var i=t.layers.backplot.select(".choroplethlayer");qRe.makeTraceGroups(i,r,"trace choropleth").each(function(n){var a=d8t.select(this),o=a.selectAll("path.choroplethlocation").data(qRe.identity);o.enter().append("path").classed("choroplethlocation",!0),o.exit().remove(),g8t(e,n)})}function m8t(e,t){for(var r=e[0].trace,i=t[r.geo],n=i._subplot,a=r.locationmode,o=r._length,s=a==="geojson-id"?G3.extractTraceFeature(e):p8t(r,n.topojson),l=[],u=[],f=0;f<o;f++){var c=e[f],h=a==="geojson-id"?c.fOut:G3.locationToFeature(a,c.loc,s);if(h){c.geojson=h,c.ct=h.properties.ct,c._polygons=G3.feature2polygons(h);var v=G3.computeBbox(h);l.push(v[0],v[2]),u.push(v[1],v[3])}else c.geojson=null}if(i.fitbounds==="geojson"&&a==="geojson-id"){var d=G3.computeBbox(G3.getTraceGeojson(r));l=[d[0],d[2]],u=[d[1],d[3]]}var x={padded:!0};r._extremes.lon=zRe(i.lonaxis._ax,l,x),r._extremes.lat=zRe(i.lataxis._ax,u,x)}ORe.exports={calcGeoJSON:m8t,plot:y8t}});var KY=ie((rpr,BRe)=>{"use strict";var x8t=Wi(),_8t=JE(),b8t=Zt().fillText;BRe.exports=function(t,r,i){var n=t.cd,a=n[0].trace,o=t.subplot,s,l,u,f,c=[r,i],h=[r+360,i];for(l=0;l<n.length;l++)if(s=n[l],f=!1,s._polygons){for(u=0;u<s._polygons.length;u++)s._polygons[u].contains(c)&&(f=!f),s._polygons[u].contains(h)&&(f=!f);if(f)break}if(!(!f||!s))return t.x0=t.x1=t.xa.c2p(s.ct),t.y0=t.y1=t.ya.c2p(s.ct),t.index=s.index,t.location=s.loc,t.z=s.z,t.zLabel=x8t.tickText(o.mockAxis,o.mockAxis.c2l(s.z),"hover").text,t.hovertemplate=s.hovertemplate,w8t(t,a,s),[t]};function w8t(e,t,r){if(!t.hovertemplate){var i=r.hi||t.hoverinfo,n=String(r.loc),a=i==="all"?_8t.hoverinfo.flags:i.split("+"),o=a.indexOf("name")!==-1,s=a.indexOf("location")!==-1,l=a.indexOf("z")!==-1,u=a.indexOf("text")!==-1,f=!o&&s,c=[];f?e.nameOverride=n:(o&&(e.nameOverride=t.name),s&&c.push(n)),l&&c.push(e.zLabel),u&&b8t(r,t,c),e.extraText=c.join("<br>")}}});var JY=ie((npr,NRe)=>{"use strict";NRe.exports=function(t,r,i,n,a){t.location=r.location,t.z=r.z;var o=n[a];return o.fIn&&o.fIn.properties&&(t.properties=o.fIn.properties),t.ct=o.ct,t}});var QY=ie((ipr,URe)=>{"use strict";URe.exports=function(t,r){var i=t.cd,n=t.xaxis,a=t.yaxis,o=[],s,l,u,f,c;if(r===!1)for(s=0;s<i.length;s++)i[s].selected=0;else for(s=0;s<i.length;s++)l=i[s],u=l.ct,u&&(f=n.c2p(u),c=a.c2p(u),r.contains([f,c],null,s,t)?(o.push({pointNumber:s,lon:u[0],lat:u[1]}),l.selected=1):l.selected=0);return o}});var HRe=ie((apr,VRe)=>{"use strict";VRe.exports={attributes:JE(),supplyDefaults:LRe(),colorbar:t_(),calc:XY(),calcGeoJSON:jY().calcGeoJSON,plot:jY().plot,style:ND().style,styleOnSelect:ND().styleOnSelect,hoverPoints:KY(),eventData:JY(),selectPoints:QY(),moduleType:"trace",name:"choropleth",basePlotModule:WY(),categories:["geo","noOpacity","showLegend"],meta:{}}});var YRe=ie((opr,GRe)=>{"use strict";GRe.exports=HRe()});var UD=ie((spr,XRe)=>{"use strict";var T8t=Ti(),Vd=Zt(),A8t=J2();function M8t(e,t,r,i){var n=e.cd,a=n[0].t,o=n[0].trace,s=e.xa,l=e.ya,u=a.x,f=a.y,c=s.c2p(t),h=l.c2p(r),v=e.distance,d;if(a.tree){var x=s.p2c(c-v),b=s.p2c(c+v),p=l.p2c(h-v),w=l.p2c(h+v);i==="x"?d=a.tree.range(Math.min(x,b),Math.min(l._rl[0],l._rl[1]),Math.max(x,b),Math.max(l._rl[0],l._rl[1])):d=a.tree.range(Math.min(x,b),Math.min(p,w),Math.max(x,b),Math.max(p,w))}else d=a.ids;var A,T,k,_,E,S,g,C,M,P=v;if(i==="x"){var D=!!o.xperiodalignment,q=!!o.yperiodalignment;for(E=0;E<d.length;E++){if(A=d[E],k=u[A],S=Math.abs(s.c2p(k)-c),D){var O=s.c2p(o._xStarts[A]),U=s.c2p(o._xEnds[A]);S=c>=Math.min(O,U)&&c<=Math.max(O,U)?0:1/0}if(S<P){if(P=S,_=f[A],g=l.c2p(_)-h,q){var B=l.c2p(o._yStarts[A]),F=l.c2p(o._yEnds[A]);g=h>=Math.min(B,F)&&h<=Math.max(B,F)?0:1/0}M=Math.sqrt(S*S+g*g),T=d[E]}}}else for(E=d.length-1;E>-1;E--)A=d[E],k=u[A],_=f[A],S=s.c2p(k)-c,g=l.c2p(_)-h,C=Math.sqrt(S*S+g*g),C<P&&(P=M=C,T=A);return e.index=T,e.distance=P,e.dxy=M,T===void 0?[e]:[WRe(e,u,f,o)]}function WRe(e,t,r,i){var n=e.xa,a=e.ya,o=e.distance,s=e.dxy,l=e.index,u={pointNumber:l,x:t[l],y:r[l]};u.tx=Vd.isArrayOrTypedArray(i.text)?i.text[l]:i.text,u.htx=Array.isArray(i.hovertext)?i.hovertext[l]:i.hovertext,u.data=Array.isArray(i.customdata)?i.customdata[l]:i.customdata,u.tp=Array.isArray(i.textposition)?i.textposition[l]:i.textposition;var f=i.textfont;f&&(u.ts=Vd.isArrayOrTypedArray(f.size)?f.size[l]:f.size,u.tc=Vd.isArrayOrTypedArray(f.color)?f.color[l]:f.color,u.tf=Array.isArray(f.family)?f.family[l]:f.family,u.tw=Array.isArray(f.weight)?f.weight[l]:f.weight,u.ty=Array.isArray(f.style)?f.style[l]:f.style,u.tv=Array.isArray(f.variant)?f.variant[l]:f.variant);var c=i.marker;c&&(u.ms=Vd.isArrayOrTypedArray(c.size)?c.size[l]:c.size,u.mo=Vd.isArrayOrTypedArray(c.opacity)?c.opacity[l]:c.opacity,u.mx=Vd.isArrayOrTypedArray(c.symbol)?c.symbol[l]:c.symbol,u.ma=Vd.isArrayOrTypedArray(c.angle)?c.angle[l]:c.angle,u.mc=Vd.isArrayOrTypedArray(c.color)?c.color[l]:c.color);var h=c&&c.line;h&&(u.mlc=Array.isArray(h.color)?h.color[l]:h.color,u.mlw=Vd.isArrayOrTypedArray(h.width)?h.width[l]:h.width);var v=c&&c.gradient;v&&v.type!=="none"&&(u.mgt=Array.isArray(v.type)?v.type[l]:v.type,u.mgc=Array.isArray(v.color)?v.color[l]:v.color);var d=n.c2p(u.x,!0),x=a.c2p(u.y,!0),b=u.mrc||1,p=i.hoverlabel;p&&(u.hbg=Array.isArray(p.bgcolor)?p.bgcolor[l]:p.bgcolor,u.hbc=Array.isArray(p.bordercolor)?p.bordercolor[l]:p.bordercolor,u.hts=Vd.isArrayOrTypedArray(p.font.size)?p.font.size[l]:p.font.size,u.htc=Array.isArray(p.font.color)?p.font.color[l]:p.font.color,u.htf=Array.isArray(p.font.family)?p.font.family[l]:p.font.family,u.hnl=Vd.isArrayOrTypedArray(p.namelength)?p.namelength[l]:p.namelength);var w=i.hoverinfo;w&&(u.hi=Array.isArray(w)?w[l]:w);var A=i.hovertemplate;A&&(u.ht=Array.isArray(A)?A[l]:A);var T={};T[e.index]=u;var k=i._origX,_=i._origY,E=Vd.extendFlat({},e,{color:A8t(i,u),x0:d-b,x1:d+b,xLabelVal:k?k[l]:u.x,y0:x-b,y1:x+b,yLabelVal:_?_[l]:u.y,cd:T,distance:o,spikeDistance:s,hovertemplate:u.ht});return u.htx?E.text=u.htx:u.tx?E.text=u.tx:i.text&&(E.text=i.text),Vd.fillText(u,i,E),T8t.getComponentMethod("errorbars","hoverInfo")(u,i,E),E}XRe.exports={hoverPoints:M8t,calcHover:WRe}});var y1=ie((lpr,jRe)=>{"use strict";var ZRe=20;jRe.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:ZRe,SYMBOL_STROKE:ZRe/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}});var QE=ie((upr,$Re)=>{"use strict";var S8t=rs(),E8t=Xs(),k8t=X0(),$l=Bl(),KRe=kl().axisHoverFormat,JRe=Ls(),C8t=sx(),$Y=aa().extendFlat,L8t=Zs().overrideAll,P8t=y1().DASHES,QRe=$l.line,_y=$l.marker,R8t=_y.line,Y3=$Re.exports=L8t({x:$l.x,x0:$l.x0,dx:$l.dx,y:$l.y,y0:$l.y0,dy:$l.dy,xperiod:$l.xperiod,yperiod:$l.yperiod,xperiod0:$l.xperiod0,yperiod0:$l.yperiod0,xperiodalignment:$l.xperiodalignment,yperiodalignment:$l.yperiodalignment,xhoverformat:KRe("x"),yhoverformat:KRe("y"),text:$l.text,hovertext:$l.hovertext,textposition:$l.textposition,textfont:E8t({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,noNumericWeightValues:!0,variantValues:["normal","small-caps"]}),mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:QRe.color,width:QRe.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:C8t(P8t),dflt:"solid"}},marker:$Y({},JRe("marker"),{symbol:_y.symbol,angle:_y.angle,size:_y.size,sizeref:_y.sizeref,sizemin:_y.sizemin,sizemode:_y.sizemode,opacity:_y.opacity,colorbar:_y.colorbar,line:$Y({},JRe("marker.line"),{width:R8t.width})}),connectgaps:$l.connectgaps,fill:$Y({},$l.fill,{dflt:"none"}),fillcolor:k8t(),selected:{marker:$l.selected.marker,textfont:$l.selected.textfont},unselected:{marker:$l.unselected.marker,textfont:$l.unselected.textfont},opacity:S8t.opacity},"calc","nested");Y3.x.editType=Y3.y.editType=Y3.x0.editType=Y3.y0.editType="calc+clearAxisTypes";Y3.hovertemplate=$l.hovertemplate;Y3.texttemplate=$l.texttemplate});var VD=ie(eW=>{"use strict";var eDe=y1();eW.isOpenSymbol=function(e){return typeof e=="string"?eDe.OPEN_RE.test(e):e%200>100};eW.isDotSymbol=function(e){return typeof e=="string"?eDe.DOT_RE.test(e):e>200}});var nDe=ie((cpr,rDe)=>{"use strict";var tDe=Zt(),D8t=Ti(),I8t=VD(),F8t=QE(),q8t=W0(),HD=Ks(),z8t=U2(),O8t=s0(),B8t=xp(),N8t=l0(),U8t=j0(),V8t=u0();rDe.exports=function(t,r,i,n){function a(v,d){return tDe.coerce(t,r,F8t,v,d)}var o=t.marker?I8t.isOpenSymbol(t.marker.symbol):!1,s=HD.isBubble(t),l=z8t(t,r,n,a);if(!l){r.visible=!1;return}O8t(t,r,n,a),a("xhoverformat"),a("yhoverformat");var u=l<q8t.PTS_LINESONLY?"lines+markers":"lines";a("text"),a("hovertext"),a("hovertemplate"),a("mode",u),HD.hasMarkers(r)&&(B8t(t,r,i,n,a,{noAngleRef:!0,noStandOff:!0}),a("marker.line.width",o||s?1:0)),HD.hasLines(r)&&(a("connectgaps"),N8t(t,r,i,n,a),a("line.shape")),HD.hasText(r)&&(a("texttemplate"),V8t(t,r,n,a,{noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var f=(r.line||{}).color,c=(r.marker||{}).color;a("fill"),r.fill!=="none"&&U8t(t,r,i,a);var h=D8t.getComponentMethod("errorbars","supplyDefaults");h(t,r,f||c||i,{axis:"y"}),h(t,r,f||c||i,{axis:"x",inherit:"y"}),tDe.coerceSelectionMarkerOpacity(r,a)}});var aDe=ie((hpr,iDe)=>{"use strict";var H8t=pL();iDe.exports=function(t,r,i){var n=t.i;return"x"in t||(t.x=r._x[n]),"y"in t||(t.y=r._y[n]),H8t(t,r,i)}});var sDe=ie((vpr,oDe)=>{"use strict";function G8t(e,t,r,i,n){for(var a=n+1;i<=n;){var o=i+n>>>1,s=e[o],l=r!==void 0?r(s,t):s-t;l>=0?(a=o,n=o-1):i=o+1}return a}function Y8t(e,t,r,i,n){for(var a=n+1;i<=n;){var o=i+n>>>1,s=e[o],l=r!==void 0?r(s,t):s-t;l>0?(a=o,n=o-1):i=o+1}return a}function W8t(e,t,r,i,n){for(var a=i-1;i<=n;){var o=i+n>>>1,s=e[o],l=r!==void 0?r(s,t):s-t;l<0?(a=o,i=o+1):n=o-1}return a}function X8t(e,t,r,i,n){for(var a=i-1;i<=n;){var o=i+n>>>1,s=e[o],l=r!==void 0?r(s,t):s-t;l<=0?(a=o,i=o+1):n=o-1}return a}function Z8t(e,t,r,i,n){for(;i<=n;){var a=i+n>>>1,o=e[a],s=r!==void 0?r(o,t):o-t;if(s===0)return a;s<=0?i=a+1:n=a-1}return-1}function $E(e,t,r,i,n,a){return typeof r=="function"?a(e,t,r,i===void 0?0:i|0,n===void 0?e.length-1:n|0):a(e,t,void 0,r===void 0?0:r|0,i===void 0?e.length-1:i|0)}oDe.exports={ge:function(e,t,r,i,n){return $E(e,t,r,i,n,G8t)},gt:function(e,t,r,i,n){return $E(e,t,r,i,n,Y8t)},lt:function(e,t,r,i,n){return $E(e,t,r,i,n,W8t)},le:function(e,t,r,i,n){return $E(e,t,r,i,n,X8t)},eq:function(e,t,r,i,n){return $E(e,t,r,i,n,Z8t)}}});var pg=ie((dpr,uDe)=>{"use strict";uDe.exports=function(t,r,i){var n={},a,o;if(typeof r=="string"&&(r=lDe(r)),Array.isArray(r)){var s={};for(o=0;o<r.length;o++)s[r[o]]=!0;r=s}for(a in r)r[a]=lDe(r[a]);var l={};for(a in r){var u=r[a];if(Array.isArray(u))for(o=0;o<u.length;o++){var f=u[o];if(i&&(l[f]=!0),f in t){if(n[a]=t[f],i)for(var c=o;c<u.length;c++)l[u[c]]=!0;break}}else a in t&&(r[a]&&(n[a]=t[a]),i&&(l[a]=!0))}if(i)for(a in t)l[a]||(n[a]=t[a]);return n};var tW={};function lDe(e){return tW[e]?tW[e]:(typeof e=="string"&&(e=tW[e]=e.split(/\s*,\s*|\s+/)),e)}});var W3=ie((ppr,fDe)=>{"use strict";var j8t=pg();fDe.exports=K8t;function K8t(e){var t;return arguments.length>1&&(e=arguments),typeof e=="string"?e=e.split(/\s/).map(parseFloat):typeof e=="number"&&(e=[e]),e.length&&typeof e[0]=="number"?e.length===1?t={width:e[0],height:e[0],x:0,y:0}:e.length===2?t={width:e[0],height:e[1],x:0,y:0}:t={x:e[0],y:e[1],width:e[2]-e[0]||0,height:e[3]-e[1]||0}:e&&(e=j8t(e,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),t={x:e.left||0,y:e.top||0},e.width==null?e.right?t.width=e.right-t.x:t.width=0:t.width=e.width,e.height==null?e.bottom?t.height=e.bottom-t.y:t.height=0:t.height=e.height),t}});var H_=ie((gpr,cDe)=>{"use strict";cDe.exports=J8t;function J8t(e,t){if(!e||e.length==null)throw Error("Argument should be an array");t==null?t=1:t=Math.floor(t);for(var r=Array(t*2),i=0;i<t;i++){for(var n=-1/0,a=1/0,o=i,s=e.length;o<s;o+=t)e[o]>n&&(n=e[o]),e[o]<a&&(a=e[o]);r[i]=a,r[t+i]=n}return r}});var vDe=ie((ypr,hDe)=>{hDe.exports=function(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==void 0)return arguments[e]}});var G_=ie((mpr,pDe)=>{var dDe=eD();pDe.exports=Q8t;function Q8t(e,t,r){if(!e)throw new TypeError("must specify data as first parameter");if(r=+(r||0)|0,Array.isArray(e)&&e[0]&&typeof e[0][0]=="number"){var i=e[0].length,n=e.length*i,a,o,s,l;(!t||typeof t=="string")&&(t=new(dDe(t||"float32"))(n+r));var u=t.length-r;if(n!==u)throw new Error("source length "+n+" ("+i+"x"+e.length+") does not match destination length "+u);for(a=0,s=r;a<e.length;a++)for(o=0;o<i;o++)t[s++]=e[a][o]===null?NaN:e[a][o]}else if(!t||typeof t=="string"){var f=dDe(t||"float32");if(Array.isArray(e)||t==="array")for(t=new f(e.length+r),a=0,s=r,l=t.length;s<l;s++,a++)t[s]=e[a]===null?NaN:e[a];else r===0?t=new f(e):(t=new f(e.length+r),t.set(e,r))}else t.set(e,r);return t}});var yDe=ie((xpr,gDe)=>{"use strict";gDe.exports=function(e){var t=typeof e;return e!==null&&(t==="object"||t==="function")}});var xDe=ie((_pr,mDe)=>{"use strict";mDe.exports=Math.log2||function(e){return Math.log(e)*Math.LOG2E}});var SDe=ie((bpr,MDe)=>{"use strict";var _De=sDe(),bDe=C3(),$8t=W3(),eqt=H_(),wDe=pg(),rW=vDe(),tqt=G_(),rqt=yDe(),nqt=eD(),TDe=xDe(),iqt=1073741824;MDe.exports=function(t,r){r||(r={}),t=tqt(t,"float64"),r=wDe(r,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});let i=rW(r.maxDepth,255),n=rW(r.bounds,eqt(t,2));n[0]===n[2]&&n[2]++,n[1]===n[3]&&n[3]++;let a=ADe(t,n),o=t.length>>>1,s;r.dtype||(r.dtype="array"),typeof r.dtype=="string"?s=new(nqt(r.dtype))(o):r.dtype&&(s=r.dtype,Array.isArray(s)&&(s.length=o));for(let p=0;p<o;++p)s[p]=p;let l=[],u=[],f=[],c=[];v(0,0,1,s,0,1);let h=0;for(let p=0;p<l.length;p++){let w=l[p];if(s.set)s.set(w,h);else for(let T=0,k=w.length;T<k;T++)s[T+h]=w[T];let A=h+l[p].length;c[p]=[h,A],h=A}return s.range=d,s;function v(p,w,A,T,k,_){if(!T.length)return null;let E=l[k]||(l[k]=[]),S=f[k]||(f[k]=[]),g=u[k]||(u[k]=[]),C=E.length;if(k++,k>i||_>iqt){for(let F=0;F<T.length;F++)E.push(T[F]),S.push(_),g.push(null,null,null,null);return C}if(E.push(T[0]),S.push(_),T.length<=1)return g.push(null,null,null,null),C;let M=A*.5,P=p+M,D=w+M,q=[],O=[],U=[],B=[];for(let F=1,N=T.length;F<N;F++){let X=T[F],K=a[X*2],ne=a[X*2+1];K<P?ne<D?q.push(X):O.push(X):ne<D?U.push(X):B.push(X)}return _<<=2,g.push(v(p,w,M,q,k,_),v(p,D,M,O,k,_+1),v(P,w,M,U,k,_+2),v(P,D,M,B,k,_+3)),C}function d(...p){let w;if(rqt(p[p.length-1])){let U=p.pop();!p.length&&(U.x!=null||U.l!=null||U.left!=null)&&(p=[U],w={}),w=wDe(U,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else w={};p.length||(p=n);let A=$8t(...p),[T,k,_,E]=[Math.min(A.x,A.x+A.width),Math.min(A.y,A.y+A.height),Math.max(A.x,A.x+A.width),Math.max(A.y,A.y+A.height)],[S,g,C,M]=ADe([T,k,_,E],n),P=rW(w.level,l.length);if(w.d!=null){let U;typeof w.d=="number"?U=[w.d,w.d]:w.d.length&&(U=w.d),P=Math.min(Math.max(Math.ceil(-TDe(Math.abs(U[0])/(n[2]-n[0]))),Math.ceil(-TDe(Math.abs(U[1])/(n[3]-n[1])))),P)}if(P=Math.min(P,l.length),w.lod)return x(S,g,C,M,P);let D=[];q(0,0,1,0,0,1);function q(U,B,F,N,X,K){if(X===null||K===null)return;let ne=U+F,fe=B+F;if(S>ne||g>fe||C<U||M<B||N>=P||X===K)return;let ue=l[N];K===void 0&&(K=ue.length);for(let ge=X;ge<K;ge++){let ae=ue[ge],_e=t[ae*2],Ce=t[ae*2+1];_e>=T&&_e<=_&&Ce>=k&&Ce<=E&&D.push(ae)}let ee=u[N],Z=ee[X*4+0],oe=ee[X*4+1],ce=ee[X*4+2],le=ee[X*4+3],me=O(ee,X+1),he=F*.5,te=N+1;q(U,B,he,te,Z,oe||ce||le||me),q(U,B+he,he,te,oe,ce||le||me),q(U+he,B,he,te,ce,le||me),q(U+he,B+he,he,te,le,me)}function O(U,B){let F=null,N=0;for(;F===null;)if(F=U[B*4+N],N++,N>U.length)return null;return F}return D}function x(p,w,A,T,k){let _=[];for(let E=0;E<k;E++){let S=f[E],g=c[E][0],C=b(p,w,E),M=b(A,T,E),P=_De.ge(S,C),D=_De.gt(S,M,P,S.length-1);_[E]=[P+g,D+g]}return _}function b(p,w,A){let T=1,k=.5,_=.5,E=.5;for(let S=0;S<A;S++)T<<=2,T+=p<k?w<_?0:1:w<_?2:3,E*=.5,k+=p<k?-E:E,_+=w<_?-E:E;return T}};function ADe(e,t){let[r,i,n,a]=t,o=1/(n-r),s=1/(a-i),l=new Array(e.length);for(let u=0,f=e.length/2;u<f;u++)l[2*u]=bDe((e[2*u]-r)*o,0,1),l[2*u+1]=bDe((e[2*u+1]-i)*s,0,1);return l}});var GD=ie((wpr,EDe)=>{"use strict";EDe.exports=SDe()});var nW=ie((Tpr,kDe)=>{kDe.exports=aqt;function aqt(e){var t=0,r=0,i=0,n=0;return e.map(function(a){a=a.slice();var o=a[0],s=o.toUpperCase();if(o!=s)switch(a[0]=s,o){case"a":a[6]+=i,a[7]+=n;break;case"v":a[1]+=n;break;case"h":a[1]+=i;break;default:for(var l=1;l<a.length;)a[l++]+=i,a[l++]+=n}switch(s){case"Z":i=t,n=r;break;case"H":i=a[1];break;case"V":n=a[1];break;case"M":i=t=a[1],n=r=a[2];break;default:i=a[a.length-2],n=a[a.length-1]}return a})}});var PDe=ie((YD,LDe)=>{"use strict";Object.defineProperty(YD,"__esModule",{value:!0});var oqt=function(){function e(t,r){var i=[],n=!0,a=!1,o=void 0;try{for(var s=t[Symbol.iterator](),l;!(n=(l=s.next()).done)&&(i.push(l.value),!(r&&i.length===r));n=!0);}catch(u){a=!0,o=u}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}return i}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e5=Math.PI*2,iW=function(t,r,i,n,a,o,s){var l=t.x,u=t.y;l*=r,u*=i;var f=n*l-a*u,c=a*l+n*u;return{x:f+o,y:c+s}},sqt=function(t,r){var i=r===1.5707963267948966?.551915024494:r===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(r/4),n=Math.cos(t),a=Math.sin(t),o=Math.cos(t+r),s=Math.sin(t+r);return[{x:n-a*i,y:a+n*i},{x:o+s*i,y:s-o*i},{x:o,y:s}]},CDe=function(t,r,i,n){var a=t*n-r*i<0?-1:1,o=t*i+r*n;return o>1&&(o=1),o<-1&&(o=-1),a*Math.acos(o)},lqt=function(t,r,i,n,a,o,s,l,u,f,c,h){var v=Math.pow(a,2),d=Math.pow(o,2),x=Math.pow(c,2),b=Math.pow(h,2),p=v*d-v*b-d*x;p<0&&(p=0),p/=v*b+d*x,p=Math.sqrt(p)*(s===l?-1:1);var w=p*a/o*h,A=p*-o/a*c,T=f*w-u*A+(t+i)/2,k=u*w+f*A+(r+n)/2,_=(c-w)/a,E=(h-A)/o,S=(-c-w)/a,g=(-h-A)/o,C=CDe(1,0,_,E),M=CDe(_,E,S,g);return l===0&&M>0&&(M-=e5),l===1&&M<0&&(M+=e5),[T,k,C,M]},uqt=function(t){var r=t.px,i=t.py,n=t.cx,a=t.cy,o=t.rx,s=t.ry,l=t.xAxisRotation,u=l===void 0?0:l,f=t.largeArcFlag,c=f===void 0?0:f,h=t.sweepFlag,v=h===void 0?0:h,d=[];if(o===0||s===0)return[];var x=Math.sin(u*e5/360),b=Math.cos(u*e5/360),p=b*(r-n)/2+x*(i-a)/2,w=-x*(r-n)/2+b*(i-a)/2;if(p===0&&w===0)return[];o=Math.abs(o),s=Math.abs(s);var A=Math.pow(p,2)/Math.pow(o,2)+Math.pow(w,2)/Math.pow(s,2);A>1&&(o*=Math.sqrt(A),s*=Math.sqrt(A));var T=lqt(r,i,n,a,o,s,c,v,x,b,p,w),k=oqt(T,4),_=k[0],E=k[1],S=k[2],g=k[3],C=Math.abs(g)/(e5/4);Math.abs(1-C)<1e-7&&(C=1);var M=Math.max(Math.ceil(C),1);g/=M;for(var P=0;P<M;P++)d.push(sqt(S,g)),S+=g;return d.map(function(D){var q=iW(D[0],o,s,b,x,_,E),O=q.x,U=q.y,B=iW(D[1],o,s,b,x,_,E),F=B.x,N=B.y,X=iW(D[2],o,s,b,x,_,E),K=X.x,ne=X.y;return{x1:O,y1:U,x2:F,y2:N,x:K,y:ne}})};YD.default=uqt;LDe.exports=YD.default});var IDe=ie((Apr,DDe)=>{"use strict";DDe.exports=cqt;var fqt=PDe();function cqt(e){for(var t,r=[],i=0,n=0,a=0,o=0,s=null,l=null,u=0,f=0,c=0,h=e.length;c<h;c++){var v=e[c],d=v[0];switch(d){case"M":a=v[1],o=v[2];break;case"A":var x=fqt({px:u,py:f,cx:v[6],cy:v[7],rx:v[1],ry:v[2],xAxisRotation:v[3],largeArcFlag:v[4],sweepFlag:v[5]});if(!x.length)continue;for(var b=0,p;b<x.length;b++)p=x[b],v=["C",p.x1,p.y1,p.x2,p.y2,p.x,p.y],b<x.length-1&&r.push(v);break;case"S":var w=u,A=f;(t=="C"||t=="S")&&(w+=w-i,A+=A-n),v=["C",w,A,v[1],v[2],v[3],v[4]];break;case"T":t=="Q"||t=="T"?(s=u*2-s,l=f*2-l):(s=u,l=f),v=RDe(u,f,s,l,v[1],v[2]);break;case"Q":s=v[1],l=v[2],v=RDe(u,f,v[1],v[2],v[3],v[4]);break;case"L":v=WD(u,f,v[1],v[2]);break;case"H":v=WD(u,f,v[1],f);break;case"V":v=WD(u,f,u,v[1]);break;case"Z":v=WD(u,f,a,o);break}t=d,u=v[v.length-2],f=v[v.length-1],v.length>4?(i=v[v.length-4],n=v[v.length-3]):(i=u,n=f),r.push(v)}return r}function WD(e,t,r,i){return["C",e,t,r,i,r,i]}function RDe(e,t,r,i,n,a){return["C",e/3+2/3*r,t/3+2/3*i,n/3+2/3*r,a/3+2/3*i,n,a]}});var aW=ie((Mpr,FDe)=>{"use strict";FDe.exports=function(t){return typeof t!="string"?!1:(t=t.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(t)&&/[\dz]$/i.test(t)&&t.length>4))}});var ODe=ie((Spr,zDe)=>{"use strict";var hqt=RA(),vqt=nW(),dqt=IDe(),pqt=aW(),qDe=WS();zDe.exports=gqt;function gqt(e){if(Array.isArray(e)&&e.length===1&&typeof e[0]=="string"&&(e=e[0]),typeof e=="string"&&(qDe(pqt(e),"String is not an SVG path."),e=hqt(e)),qDe(Array.isArray(e),"Argument should be a string or an array of path segments."),e=vqt(e),e=dqt(e),!e.length)return[0,0,0,0];for(var t=[1/0,1/0,-1/0,-1/0],r=0,i=e.length;r<i;r++)for(var n=e[r].slice(1),a=0;a<n.length;a+=2)n[a+0]<t[0]&&(t[0]=n[a+0]),n[a+1]<t[1]&&(t[1]=n[a+1]),n[a+0]>t[2]&&(t[2]=n[a+0]),n[a+1]>t[3]&&(t[3]=n[a+1]);return t}});var GDe=ie((Epr,HDe)=>{var Y_=Math.PI,BDe=VDe(120);HDe.exports=yqt;function yqt(e){for(var t,r=[],i=0,n=0,a=0,o=0,s=null,l=null,u=0,f=0,c=0,h=e.length;c<h;c++){var v=e[c],d=v[0];switch(d){case"M":a=v[1],o=v[2];break;case"A":v=UDe(u,f,v[1],v[2],VDe(v[3]),v[4],v[5],v[6],v[7]),v.unshift("C"),v.length>7&&(r.push(v.splice(0,7)),v.unshift("C"));break;case"S":var x=u,b=f;(t=="C"||t=="S")&&(x+=x-i,b+=b-n),v=["C",x,b,v[1],v[2],v[3],v[4]];break;case"T":t=="Q"||t=="T"?(s=u*2-s,l=f*2-l):(s=u,l=f),v=NDe(u,f,s,l,v[1],v[2]);break;case"Q":s=v[1],l=v[2],v=NDe(u,f,v[1],v[2],v[3],v[4]);break;case"L":v=XD(u,f,v[1],v[2]);break;case"H":v=XD(u,f,v[1],f);break;case"V":v=XD(u,f,u,v[1]);break;case"Z":v=XD(u,f,a,o);break}t=d,u=v[v.length-2],f=v[v.length-1],v.length>4?(i=v[v.length-4],n=v[v.length-3]):(i=u,n=f),r.push(v)}return r}function XD(e,t,r,i){return["C",e,t,r,i,r,i]}function NDe(e,t,r,i,n,a){return["C",e/3+2/3*r,t/3+2/3*i,n/3+2/3*r,a/3+2/3*i,n,a]}function UDe(e,t,r,i,n,a,o,s,l,u){if(u)A=u[0],T=u[1],p=u[2],w=u[3];else{var f=oW(e,t,-n);e=f.x,t=f.y,f=oW(s,l,-n),s=f.x,l=f.y;var c=(e-s)/2,h=(t-l)/2,v=c*c/(r*r)+h*h/(i*i);v>1&&(v=Math.sqrt(v),r=v*r,i=v*i);var d=r*r,x=i*i,b=(a==o?-1:1)*Math.sqrt(Math.abs((d*x-d*h*h-x*c*c)/(d*h*h+x*c*c)));b==1/0&&(b=1);var p=b*r*h/i+(e+s)/2,w=b*-i*c/r+(t+l)/2,A=Math.asin(((t-w)/i).toFixed(9)),T=Math.asin(((l-w)/i).toFixed(9));A=e<p?Y_-A:A,T=s<p?Y_-T:T,A<0&&(A=Y_*2+A),T<0&&(T=Y_*2+T),o&&A>T&&(A=A-Y_*2),!o&&T>A&&(T=T-Y_*2)}if(Math.abs(T-A)>BDe){var k=T,_=s,E=l;T=A+BDe*(o&&T>A?1:-1),s=p+r*Math.cos(T),l=w+i*Math.sin(T);var S=UDe(s,l,r,i,n,0,o,_,E,[T,k,p,w])}var g=Math.tan((T-A)/4),C=4/3*r*g,M=4/3*i*g,P=[2*e-(e+C*Math.sin(A)),2*t-(t-M*Math.cos(A)),s+C*Math.sin(T),l-M*Math.cos(T),s,l];if(u)return P;S&&(P=P.concat(S));for(var D=0;D<P.length;){var q=oW(P[D],P[D+1],n);P[D++]=q.x,P[D++]=q.y}return P}function oW(e,t,r){return{x:e*Math.cos(r)-t*Math.sin(r),y:e*Math.sin(r)+t*Math.cos(r)}}function VDe(e){return e*(Y_/180)}});var WDe=ie((kpr,YDe)=>{var mqt=nW(),xqt=GDe(),_qt={M:"moveTo",C:"bezierCurveTo"};YDe.exports=function(e,t){e.beginPath(),xqt(mqt(t)).forEach(function(r){var i=r[0],n=r.slice(1);e[_qt[i]].apply(e,n)}),e.closePath()}});var KDe=ie((Cpr,jDe)=>{"use strict";var bqt=C3();jDe.exports=wqt;var t5=1e20;function wqt(e,t){t||(t={});var r=t.cutoff==null?.25:t.cutoff,i=t.radius==null?8:t.radius,n=t.channel||0,a,o,s,l,u,f,c,h,v,d,x;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!t.width||!t.height)throw Error("For raw data width and height should be provided by options");a=t.width,o=t.height,l=e,t.stride?f=t.stride:f=Math.floor(e.length/a/o)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(h=e,c=h.getContext("2d"),a=h.width,o=h.height,v=c.getImageData(0,0,a,o),l=v.data,f=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(h=e.canvas,c=e,a=h.width,o=h.height,v=c.getImageData(0,0,a,o),l=v.data,f=4):window.ImageData&&e instanceof window.ImageData&&(v=e,a=e.width,o=e.height,l=v.data,f=4);if(s=Math.max(a,o),window.Uint8ClampedArray&&l instanceof window.Uint8ClampedArray||window.Uint8Array&&l instanceof window.Uint8Array)for(u=l,l=Array(a*o),d=0,x=u.length;d<x;d++)l[d]=u[d*f+n]/255;else if(f!==1)throw Error("Raw data can have only 1 value per pixel");var b=Array(a*o),p=Array(a*o),w=Array(s),A=Array(s),T=Array(s+1),k=Array(s);for(d=0,x=a*o;d<x;d++){var _=l[d];b[d]=_===1?0:_===0?t5:Math.pow(Math.max(0,.5-_),2),p[d]=_===1?t5:_===0?0:Math.pow(Math.max(0,_-.5),2)}XDe(b,a,o,w,A,k,T),XDe(p,a,o,w,A,k,T);var E=window.Float32Array?new Float32Array(a*o):new Array(a*o);for(d=0,x=a*o;d<x;d++)E[d]=bqt(1-((b[d]-p[d])/i+r),0,1);return E}function XDe(e,t,r,i,n,a,o){for(var s=0;s<t;s++){for(var l=0;l<r;l++)i[l]=e[l*t+s];for(ZDe(i,n,a,o,r),l=0;l<r;l++)e[l*t+s]=n[l]}for(l=0;l<r;l++){for(s=0;s<t;s++)i[s]=e[l*t+s];for(ZDe(i,n,a,o,t),s=0;s<t;s++)e[l*t+s]=Math.sqrt(n[s])}}function ZDe(e,t,r,i,n){r[0]=0,i[0]=-t5,i[1]=+t5;for(var a=1,o=0;a<n;a++){for(var s=(e[a]+a*a-(e[r[o]]+r[o]*r[o]))/(2*a-2*r[o]);s<=i[o];)o--,s=(e[a]+a*a-(e[r[o]]+r[o]*r[o]))/(2*a-2*r[o]);o++,r[o]=a,i[o]=s,i[o+1]=+t5}for(a=0,o=0;a<n;a++){for(;i[o+1]<a;)o++;t[a]=(a-r[o])*(a-r[o])+e[r[o]]}}});var QDe=ie((Lpr,JDe)=>{"use strict";var Tqt=ODe(),Aqt=RA(),Mqt=WDe(),Sqt=aW(),Eqt=KDe(),sW=document.createElement("canvas"),Dv=sW.getContext("2d");JDe.exports=kqt;function kqt(e,t){if(!Sqt(e))throw Error("Argument should be valid svg path string");t||(t={});var r,i;t.shape?(r=t.shape[0],i=t.shape[1]):(r=sW.width=t.w||t.width||200,i=sW.height=t.h||t.height||200);var n=Math.min(r,i),a=t.stroke||0,o=t.viewbox||t.viewBox||Tqt(e),s=[r/(o[2]-o[0]),i/(o[3]-o[1])],l=Math.min(s[0]||0,s[1]||0)/2;if(Dv.fillStyle="black",Dv.fillRect(0,0,r,i),Dv.fillStyle="white",a&&(typeof a!="number"&&(a=1),a>0?Dv.strokeStyle="white":Dv.strokeStyle="black",Dv.lineWidth=Math.abs(a)),Dv.translate(r*.5,i*.5),Dv.scale(l,l),Cqt()){var u=new Path2D(e);Dv.fill(u),a&&Dv.stroke(u)}else{var f=Aqt(e);Mqt(Dv,f),Dv.fill(),a&&Dv.stroke()}Dv.setTransform(1,0,0,1,0,0);var c=Eqt(Dv,{cutoff:t.cutoff!=null?t.cutoff:.5,radius:t.radius!=null?t.radius:n*.5});return c}var ZD;function Cqt(){if(ZD!=null)return ZD;var e=document.createElement("canvas").getContext("2d");if(e.canvas.width=e.canvas.height=1,!window.Path2D)return ZD=!1;var t=new Path2D("M0,0h1v1h-1v-1Z");e.fillStyle="black",e.fill(t);var r=e.getImageData(0,0,1,1);return ZD=r&&r.data&&r.data[3]===255}});var X_=ie((Ppr,uIe)=>{"use strict";var KD=la(),Lqt=QDe(),jD=l1(),Pqt=Ti(),j3=Zt(),Bu=j3.isArrayOrTypedArray,X3=oa(),$De=zl(),eIe=gy().formatColor,Z3=Ks(),Rqt=PA(),uW=VD(),r5=y1(),Dqt=jy().DESELECTDIM,tIe={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},Iqt=ad().appendArrayPointValue;function Fqt(e,t){var r,i={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},n=e._context.plotGlPixelRatio;if(t.visible!==!0)return i;if(Z3.hasText(t)&&(i.text=lIe(e,t),i.textSel=nIe(e,t,t.selected),i.textUnsel=nIe(e,t,t.unselected)),Z3.hasMarkers(t)&&(i.marker=cW(e,t),i.markerSel=fW(e,t,t.selected),i.markerUnsel=fW(e,t,t.unselected),!t.unselected&&Bu(t.marker.opacity))){var a=t.marker.opacity;for(i.markerUnsel.opacity=new Array(a.length),r=0;r<a.length;r++)i.markerUnsel.opacity[r]=Dqt*a[r]}if(Z3.hasLines(t)){i.line={overlay:!0,thickness:t.line.width*n,color:t.line.color,opacity:t.opacity};var o=(r5.DASHES[t.line.dash]||[1]).slice();for(r=0;r<o.length;++r)o[r]*=t.line.width*n;i.line.dashes=o}return t.error_x&&t.error_x.visible&&(i.errorX=iIe(t,t.error_x,n)),t.error_y&&t.error_y.visible&&(i.errorY=iIe(t,t.error_y,n)),t.fill&&t.fill!=="none"&&(i.fill={closed:!0,fill:t.fillcolor,thickness:0}),i}function lIe(e,t){var r=e._fullLayout,i=t._length,n=t.textfont,a=t.textposition,o=Bu(a)?a:[a],s=n.color,l=n.size,u=n.family,f=n.weight,c=n.style,h=n.variant,v={},d,x=e._context.plotGlPixelRatio,b=t.texttemplate;if(b){v.text=[];var p=r._d3locale,w=Array.isArray(b),A=w?Math.min(b.length,i):i,T=w?function(M){return b[M]}:function(){return b};for(d=0;d<A;d++){var k={i:d},_=t._module.formatLabels(k,t,r),E={};Iqt(E,t,d);var S=t._meta||{};v.text.push(j3.texttemplateString(T(d),_,p,E,k,S))}}else Bu(t.text)&&t.text.length<i?v.text=t.text.slice():v.text=t.text;if(Bu(v.text))for(d=v.text.length;d<i;d++)v.text[d]="";for(v.opacity=t.opacity,v.font={},v.align=[],v.baseline=[],d=0;d<o.length;d++){var g=o[d].split(/\s+/);switch(g[1]){case"left":v.align.push("right");break;case"right":v.align.push("left");break;default:v.align.push(g[1])}switch(g[0]){case"top":v.baseline.push("bottom");break;case"bottom":v.baseline.push("top");break;default:v.baseline.push(g[0])}}if(Bu(s))for(v.color=new Array(i),d=0;d<i;d++)v.color[d]=s[d];else v.color=s;if(Bu(l)||Array.isArray(u)||Bu(f)||Array.isArray(c)||Array.isArray(h))for(v.font=new Array(i),d=0;d<i;d++){var C=v.font[d]={};C.size=(j3.isTypedArray(l)?l[d]:Bu(l)?KD(l[d])?l[d]:0:l)*x,C.family=Array.isArray(u)?u[d]:u,C.weight=rIe(Bu(f)?f[d]:f),C.style=Array.isArray(c)?c[d]:c,C.variant=Array.isArray(h)?h[d]:h}else v.font={size:l*x,family:u,weight:rIe(f),style:c,variant:h};return v}function rIe(e){return e<=1e3?e>500?"bold":"normal":e}function cW(e,t){var r=t._length,i=t.marker,n={},a,o=Bu(i.symbol),s=Bu(i.angle),l=Bu(i.color),u=Bu(i.line.color),f=Bu(i.opacity),c=Bu(i.size),h=Bu(i.line.width),v;if(o||(v=uW.isOpenSymbol(i.symbol)),o||l||u||f||s){n.symbols=new Array(r),n.angles=new Array(r),n.colors=new Array(r),n.borderColors=new Array(r);var d=i.symbol,x=i.angle,b=eIe(i,i.opacity,r),p=eIe(i.line,i.opacity,r);if(!Bu(p[0])){var w=p;for(p=Array(r),a=0;a<r;a++)p[a]=w}if(!Bu(b[0])){var A=b;for(b=Array(r),a=0;a<r;a++)b[a]=A}if(!Bu(d)){var T=d;for(d=Array(r),a=0;a<r;a++)d[a]=T}if(!Bu(x)){var k=x;for(x=Array(r),a=0;a<r;a++)x[a]=k}for(n.symbols=d,n.angles=x,n.colors=b,n.borderColors=p,a=0;a<r;a++)o&&(v=uW.isOpenSymbol(i.symbol[a])),v&&(p[a]=b[a].slice(),b[a]=b[a].slice(),b[a][3]=0);for(n.opacity=t.opacity,n.markers=new Array(r),a=0;a<r;a++)n.markers[a]=sIe({mx:n.symbols[a],ma:n.angles[a]},t)}else v?(n.color=jD(i.color,"uint8"),n.color[3]=0,n.borderColor=jD(i.color,"uint8")):(n.color=jD(i.color,"uint8"),n.borderColor=jD(i.line.color,"uint8")),n.opacity=t.opacity*i.opacity,n.marker=sIe({mx:i.symbol,ma:i.angle},t);var _=1,E=Rqt(t,_),S;if(c||h){var g=n.sizes=new Array(r),C=n.borderSizes=new Array(r),M=0,P;if(c){for(a=0;a<r;a++)g[a]=E(i.size[a]),M+=g[a];P=M/r}else for(S=E(i.size),a=0;a<r;a++)g[a]=S;if(h)for(a=0;a<r;a++)C[a]=i.line.width[a];else for(S=i.line.width,a=0;a<r;a++)C[a]=S;n.sizeAvg=P}else n.size=E(i&&i.size||10),n.borderSizes=E(i.line.width);return n}function fW(e,t,r){var i=t.marker,n={};return r&&(r.marker&&r.marker.symbol?n=cW(e,j3.extendFlat({},i,r.marker)):r.marker&&(r.marker.size&&(n.size=r.marker.size),r.marker.color&&(n.colors=r.marker.color),r.marker.opacity!==void 0&&(n.opacity=r.marker.opacity))),n}function nIe(e,t,r){var i={};if(!r)return i;if(r.textfont){var n={opacity:1,text:t.text,texttemplate:t.texttemplate,textposition:t.textposition,textfont:j3.extendFlat({},t.textfont)};r.textfont&&j3.extendFlat(n.textfont,r.textfont),i=lIe(e,n)}return i}function iIe(e,t,r){var i={capSize:t.width*2*r,lineWidth:t.thickness*r,color:t.color};return t.copy_ystyle&&(i=e.error_y),i}var aIe=r5.SYMBOL_SDF_SIZE,W_=r5.SYMBOL_SIZE,oIe=r5.SYMBOL_STROKE,lW={},qqt=X3.symbolFuncs[0](W_*.05);function sIe(e,t){var r=e.mx;if(r==="circle")return null;var i,n,a=X3.symbolNumber(r),o=X3.symbolFuncs[a%100],s=!!X3.symbolNoDot[a%100],l=!!X3.symbolNoFill[a%100],u=uW.isDotSymbol(r);if(e.ma&&(r+="_"+e.ma),lW[r])return lW[r];var f=X3.getMarkerAngle(e,t);return u&&!s?i=o(W_*1.1,f)+qqt:i=o(W_,f),n=Lqt(i,{w:aIe,h:aIe,viewBox:[-W_,-W_,W_,W_],stroke:l?oIe:-oIe}),lW[r]=n,n||null}function zqt(e,t,r){var i=r.length,n=i/2,a,o;if(Z3.hasLines(t)&&n)if(t.line.shape==="hv"){for(a=[],o=0;o<n-1;o++)isNaN(r[o*2])||isNaN(r[o*2+1])?a.push(NaN,NaN,NaN,NaN):(a.push(r[o*2],r[o*2+1]),!isNaN(r[o*2+2])&&!isNaN(r[o*2+3])?a.push(r[o*2+2],r[o*2+1]):a.push(NaN,NaN));a.push(r[i-2],r[i-1])}else if(t.line.shape==="hvh"){for(a=[],o=0;o<n-1;o++)if(isNaN(r[o*2])||isNaN(r[o*2+1])||isNaN(r[o*2+2])||isNaN(r[o*2+3]))!isNaN(r[o*2])&&!isNaN(r[o*2+1])?a.push(r[o*2],r[o*2+1]):a.push(NaN,NaN),a.push(NaN,NaN);else{var s=(r[o*2]+r[o*2+2])/2;a.push(r[o*2],r[o*2+1],s,r[o*2+1],s,r[o*2+3])}a.push(r[i-2],r[i-1])}else if(t.line.shape==="vhv"){for(a=[],o=0;o<n-1;o++)if(isNaN(r[o*2])||isNaN(r[o*2+1])||isNaN(r[o*2+2])||isNaN(r[o*2+3]))!isNaN(r[o*2])&&!isNaN(r[o*2+1])?a.push(r[o*2],r[o*2+1]):a.push(NaN,NaN),a.push(NaN,NaN);else{var l=(r[o*2+1]+r[o*2+3])/2;a.push(r[o*2],r[o*2+1],r[o*2],l,r[o*2+2],l)}a.push(r[i-2],r[i-1])}else if(t.line.shape==="vh"){for(a=[],o=0;o<n-1;o++)isNaN(r[o*2])||isNaN(r[o*2+1])?a.push(NaN,NaN,NaN,NaN):(a.push(r[o*2],r[o*2+1]),!isNaN(r[o*2+2])&&!isNaN(r[o*2+3])?a.push(r[o*2],r[o*2+3]):a.push(NaN,NaN));a.push(r[i-2],r[i-1])}else a=r;var u=!1;for(o=0;o<a.length;o++)if(isNaN(a[o])){u=!0;break}var f=u||a.length>r5.TOO_MANY_POINTS||Z3.hasMarkers(t)?"rect":"round";if(u&&t.connectgaps){var c=a[0],h=a[1];for(o=0;o<a.length;o+=2)isNaN(a[o])||isNaN(a[o+1])?(a[o]=c,a[o+1]=h):(c=a[o],h=a[o+1])}return{join:f,positions:a}}function Oqt(e,t,r,i,n){var a=Pqt.getComponentMethod("errorbars","makeComputeError"),o=$De.getFromId(e,t.xaxis,"x"),s=$De.getFromId(e,t.yaxis,"y"),l=r.length/2,u={};function f(c,h){var v=h._id.charAt(0),d=t["error_"+v];if(d&&d.visible&&(h.type==="linear"||h.type==="log")){for(var x=a(d),b={x:0,y:1}[v],p={x:[0,1,2,3],y:[2,3,0,1]}[v],w=new Float64Array(4*l),A=1/0,T=-1/0,k=0,_=0;k<l;k++,_+=4){var E=c[k];if(KD(E)){var S=r[k*2+b],g=x(E,k),C=g[0],M=g[1];if(KD(C)&&KD(M)){var P=E-C,D=E+M;w[_+p[0]]=S-h.c2l(P),w[_+p[1]]=h.c2l(D)-S,w[_+p[2]]=0,w[_+p[3]]=0,A=Math.min(A,E-C),T=Math.max(T,E+M)}}}u[v]={positions:r,errors:w,_bnds:[A,T]}}}return f(i,o),f(n,s),u}function Bqt(e,t,r,i){var n=t._length,a={},o;if(Z3.hasMarkers(t)){var s=r.font,l=r.align,u=r.baseline;for(a.offset=new Array(n),o=0;o<n;o++){var f=i.sizes?i.sizes[o]:i.size,c=Bu(s)?s[o].size:s.size,h=Bu(l)?l.length>1?l[o]:l[0]:l,v=Bu(u)?u.length>1?u[o]:u[0]:u,d=tIe[h],x=tIe[v],b=f?f/.8+1:0,p=-x*b-x*.5;a.offset[o]=[d*b/c,p/c]}}return a}uIe.exports={style:Fqt,markerStyle:cW,markerSelection:fW,linePositions:zqt,errorBarPositions:Oqt,textPosition:Bqt}});var hW=ie((Rpr,fIe)=>{"use strict";var JD=Zt();fIe.exports=function(t,r){var i=r._scene,n={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},a={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return r._scene||(i=r._scene={},i.init=function(){JD.extendFlat(i,a,n)},i.init(),i.update=function(s){var l=JD.repeat(s,i.count);if(i.fill2d&&i.fill2d.update(l),i.scatter2d&&i.scatter2d.update(l),i.line2d&&i.line2d.update(l),i.error2d&&i.error2d.update(l.concat(l)),i.select2d&&i.select2d.update(l),i.glText)for(var u=0;u<i.count;u++)i.glText[u].update(s)},i.draw=function(){for(var s=i.count,l=i.fill2d,u=i.error2d,f=i.line2d,c=i.scatter2d,h=i.glText,v=i.select2d,d=i.selectBatch,x=i.unselectBatch,b=0;b<s;b++){if(l&&i.fillOrder[b]&&l.draw(i.fillOrder[b]),f&&i.lineOptions[b]&&f.draw(b),u&&(i.errorXOptions[b]&&u.draw(b),i.errorYOptions[b]&&u.draw(b+s)),c&&i.markerOptions[b])if(x[b].length){var p=JD.repeat([],i.count);p[b]=x[b],c.draw(p)}else d[b].length||c.draw(b);h[b]&&i.textOptions[b]&&h[b].render()}v&&v.draw(d),i.dirty=!1},i.destroy=function(){i.fill2d&&i.fill2d.destroy&&i.fill2d.destroy(),i.scatter2d&&i.scatter2d.destroy&&i.scatter2d.destroy(),i.error2d&&i.error2d.destroy&&i.error2d.destroy(),i.line2d&&i.line2d.destroy&&i.line2d.destroy(),i.select2d&&i.select2d.destroy&&i.select2d.destroy(),i.glText&&i.glText.forEach(function(s){s.destroy&&s.destroy()}),i.lineOptions=null,i.fillOptions=null,i.markerOptions=null,i.markerSelectedOptions=null,i.markerUnselectedOptions=null,i.errorXOptions=null,i.errorYOptions=null,i.textOptions=null,i.textSelectedOptions=null,i.textUnselectedOptions=null,i.selectBatch=null,i.unselectBatch=null,r._scene=null}),i.dirty||JD.extendFlat(i,n),i}});var gIe=ie((Dpr,pIe)=>{"use strict";var Nqt=GD(),K3=Zt(),cIe=zl(),Uqt=Ld().findExtremes,hIe=f0(),vW=wp(),Vqt=vW.calcMarkerSize,Hqt=vW.calcAxisExpansion,Gqt=vW.setFirstScatter,Yqt=_p(),J3=X_(),Wqt=hW(),vIe=eo().BADNUM,Xqt=y1().TOO_MANY_POINTS;pIe.exports=function(t,r){var i=t._fullLayout,n=r._xA=cIe.getFromId(t,r.xaxis,"x"),a=r._yA=cIe.getFromId(t,r.yaxis,"y"),o=i._plots[r.xaxis+r.yaxis],s=r._length,l=s>=Xqt,u=s*2,f={},c,h=n.makeCalcdata(r,"x"),v=a.makeCalcdata(r,"y"),d=hIe(r,n,"x",h),x=hIe(r,a,"y",v),b=d.vals,p=x.vals;r._x=b,r._y=p,r.xperiodalignment&&(r._origX=h,r._xStarts=d.starts,r._xEnds=d.ends),r.yperiodalignment&&(r._origY=v,r._yStarts=x.starts,r._yEnds=x.ends);var w=new Array(u),A=new Array(s);for(c=0;c<s;c++)w[c*2]=b[c]===vIe?NaN:b[c],w[c*2+1]=p[c]===vIe?NaN:p[c],A[c]=c;if(n.type==="log")for(c=0;c<u;c+=2)w[c]=n.c2l(w[c]);if(a.type==="log")for(c=1;c<u;c+=2)w[c]=a.c2l(w[c]);l&&n.type!=="log"&&a.type!=="log"?f.tree=Nqt(w):f.ids=A,Yqt(t,r);var T=Zqt(t,o,r,w,b,p),k=Wqt(t,o);Gqt(i,r);var _;return l?T.marker&&(_=T.marker.sizeAvg||Math.max(T.marker.size,3)):_=Vqt(r,s),Hqt(t,r,n,a,b,p,_),T.errorX&&dIe(r,n,T.errorX),T.errorY&&dIe(r,a,T.errorY),T.fill&&!k.fill2d&&(k.fill2d=!0),T.marker&&!k.scatter2d&&(k.scatter2d=!0),T.line&&!k.line2d&&(k.line2d=!0),(T.errorX||T.errorY)&&!k.error2d&&(k.error2d=!0),T.text&&!k.glText&&(k.glText=!0),T.marker&&(T.marker.snap=s),k.lineOptions.push(T.line),k.errorXOptions.push(T.errorX),k.errorYOptions.push(T.errorY),k.fillOptions.push(T.fill),k.markerOptions.push(T.marker),k.markerSelectedOptions.push(T.markerSel),k.markerUnselectedOptions.push(T.markerUnsel),k.textOptions.push(T.text),k.textSelectedOptions.push(T.textSel),k.textUnselectedOptions.push(T.textUnsel),k.selectBatch.push([]),k.unselectBatch.push([]),f._scene=k,f.index=k.count,f.x=b,f.y=p,f.positions=w,k.count++,[{x:!1,y:!1,t:f,trace:r}]};function dIe(e,t,r){var i=e._extremes[t._id],n=Uqt(t,r._bnds,{padded:!0});i.min=i.min.concat(n.min),i.max=i.max.concat(n.max)}function Zqt(e,t,r,i,n,a){var o=J3.style(e,r);if(o.marker&&(o.marker.positions=i),o.line&&i.length>1&&K3.extendFlat(o.line,J3.linePositions(e,r,i)),o.errorX||o.errorY){var s=J3.errorBarPositions(e,r,i,n,a);o.errorX&&K3.extendFlat(o.errorX,s.x),o.errorY&&K3.extendFlat(o.errorY,s.y)}return o.text&&(K3.extendFlat(o.text,{positions:i},J3.textPosition(e,r,o.text,o.marker)),K3.extendFlat(o.textSel,{positions:i},J3.textPosition(e,r,o.text,o.markerSel)),K3.extendFlat(o.textUnsel,{positions:i},J3.textPosition(e,r,o.text,o.markerUnsel))),o}});var dW=ie((Ipr,mIe)=>{"use strict";var yIe=Zt(),jqt=_i(),Kqt=jy().DESELECTDIM;function Jqt(e){var t=e[0],r=t.trace,i=t.t,n=i._scene,a=i.index,o=n.selectBatch[a],s=n.unselectBatch[a],l=n.textOptions[a],u=n.textSelectedOptions[a]||{},f=n.textUnselectedOptions[a]||{},c=yIe.extendFlat({},l),h,v;if(o.length||s.length){var d=u.color,x=f.color,b=l.color,p=yIe.isArrayOrTypedArray(b);for(c.color=new Array(r._length),h=0;h<o.length;h++)v=o[h],c.color[v]=d||(p?b[v]:b);for(h=0;h<s.length;h++){v=s[h];var w=p?b[v]:b;c.color[v]=x||(d?w:jqt.addOpacity(w,Kqt))}}n.glText[a].update(c)}mIe.exports={styleTextSelection:Jqt}});var pW=ie((Fpr,_Ie)=>{"use strict";var xIe=Ks(),Qqt=dW().styleTextSelection;_Ie.exports=function(t,r){var i=t.cd,n=t.xaxis,a=t.yaxis,o=[],s=i[0].trace,l=i[0].t,u=s._length,f=l.x,c=l.y,h=l._scene,v=l.index;if(!h)return o;var d=xIe.hasText(s),x=xIe.hasMarkers(s),b=!x&&!d;if(s.visible!==!0||b)return o;var p=[],w=[];if(r!==!1&&!r.degenerate)for(var A=0;A<u;A++)r.contains([l.xpx[A],l.ypx[A]],!1,A,t)?(p.push(A),o.push({pointNumber:A,x:n.c2d(f[A]),y:a.c2d(c[A])})):w.push(A);if(x){var T=h.scatter2d;if(!p.length&&!w.length){var k=new Array(h.count);k[v]=h.markerOptions[v],T.update.apply(T,k)}else if(!h.selectBatch[v].length&&!h.unselectBatch[v].length){var _=new Array(h.count);_[v]=h.markerUnselectedOptions[v],T.update.apply(T,_)}}return h.selectBatch[v]=p,h.unselectBatch[v]=w,d&&Qqt(i),o}});var wIe=ie((qpr,bIe)=>{"use strict";var $qt=UD();bIe.exports={moduleType:"trace",name:"scattergl",basePlotModule:yu(),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:QE(),supplyDefaults:nDe(),crossTraceDefaults:K7(),colorbar:yh(),formatLabels:aDe(),calc:gIe(),hoverPoints:$qt.hoverPoints,selectPoints:pW(),meta:{}}});var AIe=ie((zpr,$D)=>{"use strict";var QD=C3();$D.exports=TIe;$D.exports.to=TIe;$D.exports.from=ezt;function TIe(e,t){t==null&&(t=!0);var r=e[0],i=e[1],n=e[2],a=e[3];a==null&&(a=t?1:255),t&&(r*=255,i*=255,n*=255,a*=255),r=QD(r,0,255)&255,i=QD(i,0,255)&255,n=QD(n,0,255)&255,a=QD(a,0,255)&255;var o=r*16777216+(i<<16)+(n<<8)+a;return o}function ezt(e,t){e=+e;var r=e>>>24,i=(e&16711680)>>>16,n=(e&65280)>>>8,a=e&255;return t===!1?[r,i,n,a]:[r/255,i/255,n/255,a/255]}});var lf=ie((Opr,SIe)=>{"use strict";var MIe=Object.getOwnPropertySymbols,tzt=Object.prototype.hasOwnProperty,rzt=Object.prototype.propertyIsEnumerable;function nzt(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function izt(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var i=Object.getOwnPropertyNames(t).map(function(a){return t[a]});if(i.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(a){n[a]=a}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch(a){return!1}}SIe.exports=izt()?Object.assign:function(e,t){for(var r,i=nzt(e),n,a=1;a<arguments.length;a++){r=Object(arguments[a]);for(var o in r)tzt.call(r,o)&&(i[o]=r[o]);if(MIe){n=MIe(r);for(var s=0;s<n.length;s++)rzt.call(r,n[s])&&(i[n[s]]=r[n[s]])}}return i}});var kIe=ie((Bpr,EIe)=>{EIe.exports=function(e){typeof e=="string"&&(e=[e]);for(var t=[].slice.call(arguments,1),r=[],i=0;i<e.length-1;i++)r.push(e[i],t[i]||"");return r.push(e[i]),r.join("")}});var gW=ie((Npr,CIe)=>{"use strict";CIe.exports=function(t,r,i){Array.isArray(i)||(i=[].slice.call(arguments,2));for(var n=0,a=i.length;n<a;n++){var o=i[n];for(var s in o)if(!(r[s]!==void 0&&!Array.isArray(r[s])&&t[s]===r[s])&&s in r){var l;if(o[s]===!0)l=r[s];else{if(o[s]===!1)continue;if(typeof o[s]=="function"&&(l=o[s](r[s],t,r),l===void 0))continue}t[s]=l}}return t}});var PIe=ie((Upr,LIe)=>{"use strict";LIe.exports=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))});var eI=ie((Vpr,Q3)=>{"use strict";Q3.exports=n5;Q3.exports.float32=Q3.exports.float=n5;Q3.exports.fract32=Q3.exports.fract=azt;var RIe=new Float32Array(1);function azt(e,t){if(e.length){if(e instanceof Float32Array)return new Float32Array(e.length);t instanceof Float32Array||(t=n5(e));for(var r=0,i=t.length;r<i;r++)t[r]=e[r]-t[r];return t}return n5(e-n5(e))}function n5(e){return e.length?e instanceof Float32Array?e:new Float32Array(e):(RIe[0]=e,RIe[0])}});var mW=ie((Hpr,FIe)=>{"use strict";function ozt(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,n,a,o,s=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(i=a.call(r)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(f){u=!0,n=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw n}}return s}}function szt(e,t){return fzt(e)||ozt(e,t)||IIe(e,t)||vzt()}function lzt(e){return uzt(e)||czt(e)||IIe(e)||hzt()}function uzt(e){if(Array.isArray(e))return yW(e)}function fzt(e){if(Array.isArray(e))return e}function czt(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function IIe(e,t){if(e){if(typeof e=="string")return yW(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yW(e,t)}}function yW(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function hzt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vzt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var dzt=l1(),pzt=H_(),gzt=AIe(),yzt=GD(),Z_=lf(),tI=kIe(),mzt=pg(),xzt=gW(),_zt=G_(),DIe=PIe(),rI=eI(),bzt=W3(),wzt=Yc;function Yc(e,t){var r=this;if(!(this instanceof Yc))return new Yc(e,t);typeof e=="function"?(t||(t={}),t.regl=e):(t=e,e=null),t&&t.length&&(t.positions=t),e=t.regl;var i=e._gl,n,a=[],o={},s=[],l=[null],u=[null],f=255,c=100;this.tooManyColors=DIe,n=e.texture({data:new Uint8Array(f*4),width:f,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),Z_(this,{regl:e,gl:i,groups:s,markerCache:u,markerTextures:l,palette:a,paletteIds:o,paletteTexture:n,maxColors:f,maxSize:c,canvas:i.canvas}),this.update(t);var h={uniforms:{constPointSize:!!t.constPointSize,opacity:e.prop("opacity"),paletteSize:function(b,p){return[r.tooManyColors?0:f,n.height]},pixelRatio:e.context("pixelRatio"),scale:e.prop("scale"),scaleFract:e.prop("scaleFract"),translate:e.prop("translate"),translateFract:e.prop("translateFract"),markerTexture:e.prop("markerTexture"),paletteTexture:n},attributes:{x:function(b,p){return p.xAttr||{buffer:p.positionBuffer,stride:8,offset:0}},y:function(b,p){return p.yAttr||{buffer:p.positionBuffer,stride:8,offset:4}},xFract:function(b,p){return p.xAttr?{constant:[0,0]}:{buffer:p.positionFractBuffer,stride:8,offset:0}},yFract:function(b,p){return p.yAttr?{constant:[0,0]}:{buffer:p.positionFractBuffer,stride:8,offset:4}},size:function(b,p){return p.size.length?{buffer:p.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(p.size*255/r.maxSize)]}},borderSize:function(b,p){return p.borderSize.length?{buffer:p.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(p.borderSize*255/r.maxSize)]}},colorId:function(b,p){return p.color.length?{buffer:p.colorBuffer,stride:r.tooManyColors?8:4,offset:0}:{constant:r.tooManyColors?a.slice(p.color*4,p.color*4+4):[p.color]}},borderColorId:function(b,p){return p.borderColor.length?{buffer:p.colorBuffer,stride:r.tooManyColors?8:4,offset:r.tooManyColors?4:2}:{constant:r.tooManyColors?a.slice(p.borderColor*4,p.borderColor*4+4):[p.borderColor]}},isActive:function(b,p){return p.activation===!0?{constant:[1]}:p.activation?p.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:e.prop("elements"),count:e.prop("count"),offset:e.prop("offset"),primitive:"points"},v=Z_({},h);v.frag=tI([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),v.vert=tI([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}
`]),this.drawMarker=e(v);var d=Z_({},h);d.frag=tI([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),d.vert=tI([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),DIe&&(d.frag=d.frag.replace("smoothstep","smoothStep"),v.frag=v.frag.replace("smoothstep","smoothStep")),this.drawCircle=e(d)}Yc.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4};Yc.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this};Yc.prototype.draw=function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var n=this.groups;if(r.length===1&&Array.isArray(r[0])&&(r[0][0]===null||Array.isArray(r[0][0]))&&(r=r[0]),this.regl._refresh(),r.length)for(var a=0;a<r.length;a++)this.drawItem(a,r[a]);else n.forEach(function(o,s){e.drawItem(s)});return this};Yc.prototype.drawItem=function(e,t){var r=this.groups,i=r[e];if(typeof t=="number"&&(e=t,i=r[t],t=null),!!(i&&i.count&&i.opacity)){i.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,i,t));for(var n=[],a=1;a<i.activation.length;a++)!i.activation[a]||i.activation[a]!==!0&&!i.activation[a].data.length||n.push.apply(n,lzt(this.getMarkerDrawOptions(a,i,t)));n.length&&this.drawMarker(n)}};Yc.prototype.getMarkerDrawOptions=function(e,t,r){var i=t.range,n=t.tree,a=t.viewport,o=t.activation,s=t.selectionBuffer,l=t.count,u=this.regl;if(!n)return r?[Z_({},t,{markerTexture:this.markerTextures[e],activation:o[e],count:r.length,elements:r,offset:0})]:[Z_({},t,{markerTexture:this.markerTextures[e],activation:o[e],offset:0})];var f=[],c=n.range(i,{lod:!0,px:[(i[2]-i[0])/a.width,(i[3]-i[1])/a.height]});if(r){for(var h=o[e],v=h.data,d=new Uint8Array(l),x=0;x<r.length;x++){var b=r[x];d[b]=v?v[b]:1}s.subdata(d)}for(var p=c.length;p--;){var w=szt(c[p],2),A=w[0],T=w[1];f.push(Z_({},t,{markerTexture:this.markerTextures[e],activation:r?s:o[e],offset:A,count:T-A}))}return f};Yc.prototype.update=function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];if(r.length){r.length===1&&Array.isArray(r[0])&&(r=r[0]);var n=this.groups,a=this.gl,o=this.regl,s=this.maxSize,l=this.maxColors,u=this.palette;this.groups=n=r.map(function(f,c){var h=n[c];if(f===void 0)return h;f===null?f={positions:null}:typeof f=="function"?f={ondraw:f}:typeof f[0]=="number"&&(f={positions:f}),f=mzt(f,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),f.positions===null&&(f.positions=[]),f.tooManyColors!=null&&(e.tooManyColors=f.tooManyColors),h||(n[c]=h={id:c,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:o.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:o.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:o.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:o.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:o.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},f=Z_({},Yc.defaults,f)),f.positions&&!("marker"in f)&&(f.marker=h.marker,delete h.marker),f.marker&&!("positions"in f)&&(f.positions=h.positions,delete h.positions);var v=0,d=0;if(xzt(h,f,[{snap:!0,size:function(B,F){return B==null&&(B=Yc.defaults.size),v+=B&&B.length?1:0,B},borderSize:function(B,F){return B==null&&(B=Yc.defaults.borderSize),v+=B&&B.length?1:0,B},opacity:parseFloat,color:function(B,F){return B==null&&(B=Yc.defaults.color),B=e.updateColor(B),d++,B},borderColor:function(B,F){return B==null&&(B=Yc.defaults.borderColor),B=e.updateColor(B),d++,B},bounds:function(B,F,N){return"range"in N||(N.range=null),B},positions:function(B,F,N){var X=F.snap,K=F.positionBuffer,ne=F.positionFractBuffer,fe=F.selectionBuffer;if(B.x||B.y)return B.x.length?F.xAttr={buffer:o.buffer(B.x),offset:0,stride:4,count:B.x.length}:F.xAttr={buffer:B.x.buffer,offset:B.x.offset*4||0,stride:(B.x.stride||1)*4,count:B.x.count},B.y.length?F.yAttr={buffer:o.buffer(B.y),offset:0,stride:4,count:B.y.length}:F.yAttr={buffer:B.y.buffer,offset:B.y.offset*4||0,stride:(B.y.stride||1)*4,count:B.y.count},F.count=Math.max(F.xAttr.count,F.yAttr.count),B;B=_zt(B,"float64");var ue=F.count=Math.floor(B.length/2),ee=F.bounds=ue?pzt(B,2):null;if(!N.range&&!F.range&&(delete F.range,N.range=ee),!N.marker&&!F.marker&&(delete F.marker,N.marker=null),X&&(X===!0||ue>X)?F.tree=yzt(B,{bounds:ee}):X&&X.length&&(F.tree=X),F.tree){var Z={primitive:"points",usage:"static",data:F.tree,type:"uint32"};F.elements?F.elements(Z):F.elements=o.elements(Z)}var oe=rI.float32(B);K({data:oe,usage:"dynamic"});var ce=rI.fract32(B,oe);return ne({data:ce,usage:"dynamic"}),fe({data:new Uint8Array(ue),type:"uint8",usage:"stream"}),B}},{marker:function(B,F,N){var X=F.activation;if(X.forEach(function(ce){return ce&&ce.destroy&&ce.destroy()}),X.length=0,!B||typeof B[0]=="number"){var K=e.addMarker(B);X[K]=!0}else{for(var ne=[],fe=0,ue=Math.min(B.length,F.count);fe<ue;fe++){var ee=e.addMarker(B[fe]);ne[ee]||(ne[ee]=new Uint8Array(F.count)),ne[ee][fe]=1}for(var Z=0;Z<ne.length;Z++)if(ne[Z]){var oe={data:ne[Z],type:"uint8",usage:"static"};X[Z]?X[Z](oe):X[Z]=o.buffer(oe),X[Z].data=ne[Z]}}return B},range:function(B,F,N){var X=F.bounds;if(X)return B||(B=X),F.scale=[1/(B[2]-B[0]),1/(B[3]-B[1])],F.translate=[-B[0],-B[1]],F.scaleFract=rI.fract(F.scale),F.translateFract=rI.fract(F.translate),B},viewport:function(B){var F=bzt(B||[a.drawingBufferWidth,a.drawingBufferHeight]);return F}}]),v){var x=h,b=x.count,p=x.size,w=x.borderSize,A=x.sizeBuffer,T=new Uint8Array(b*2);if(p.length||w.length)for(var k=0;k<b;k++)T[k*2]=Math.round((p[k]==null?p:p[k])*255/s),T[k*2+1]=Math.round((w[k]==null?w:w[k])*255/s);A({data:T,usage:"dynamic"})}if(d){var _=h,E=_.count,S=_.color,g=_.borderColor,C=_.colorBuffer,M;if(e.tooManyColors){if(S.length||g.length){M=new Uint8Array(E*8);for(var P=0;P<E;P++){var D=S[P];M[P*8]=u[D*4],M[P*8+1]=u[D*4+1],M[P*8+2]=u[D*4+2],M[P*8+3]=u[D*4+3];var q=g[P];M[P*8+4]=u[q*4],M[P*8+5]=u[q*4+1],M[P*8+6]=u[q*4+2],M[P*8+7]=u[q*4+3]}}}else if(S.length||g.length){M=new Uint8Array(E*4+2);for(var O=0;O<E;O++)S[O]!=null&&(M[O*4]=S[O]%l,M[O*4+1]=Math.floor(S[O]/l)),g[O]!=null&&(M[O*4+2]=g[O]%l,M[O*4+3]=Math.floor(g[O]/l))}C({data:M||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return h})}};Yc.prototype.addMarker=function(e){var t=this.markerTextures,r=this.regl,i=this.markerCache,n=e==null?0:i.indexOf(e);if(n>=0)return n;var a;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)a=e;else{a=new Uint8Array(e.length);for(var o=0,s=e.length;o<s;o++)a[o]=e[o]*255}var l=Math.floor(Math.sqrt(a.length));return n=t.length,i.push(e),t.push(r.texture({channels:1,data:a,radius:l,mag:"linear",min:"linear"})),n};Yc.prototype.updateColor=function(e){var t=this.paletteIds,r=this.palette,i=this.maxColors;Array.isArray(e)||(e=[e]);var n=[];if(typeof e[0]=="number"){var a=[];if(Array.isArray(e))for(var o=0;o<e.length;o+=4)a.push(e.slice(o,o+4));else for(var s=0;s<e.length;s+=4)a.push(e.subarray(s,s+4));e=a}for(var l=0;l<e.length;l++){var u=e[l];u=dzt(u,"uint8");var f=gzt(u,!1);if(t[f]==null){var c=r.length;t[f]=Math.floor(c/4),r[c]=u[0],r[c+1]=u[1],r[c+2]=u[2],r[c+3]=u[3]}n[l]=t[f]}return!this.tooManyColors&&r.length>i*4&&(this.tooManyColors=!0),this.updatePalette(r),n.length===1?n[0]:n};Yc.prototype.updatePalette=function(e){if(!this.tooManyColors){var t=this.maxColors,r=this.paletteTexture,i=Math.ceil(e.length*.25/t);if(i>1){e=e.slice();for(var n=e.length*.25%t;n<i*t;n++)e.push(0,0,0,0)}r.height<i&&r.resize(t,i),r.subimage({width:Math.min(e.length*.25,t),height:i,data:e},0,0)}};Yc.prototype.destroy=function(){return this.groups.forEach(function(e){e.sizeBuffer.destroy(),e.positionBuffer.destroy(),e.positionFractBuffer.destroy(),e.colorBuffer.destroy(),e.activation.forEach(function(t){return t&&t.destroy&&t.destroy()}),e.selectionBuffer.destroy(),e.elements&&e.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(e){return e&&e.destroy&&e.destroy()}),this};var Tzt=lf(),Azt=function(t,r){var i=new wzt(t,r),n=i.render.bind(i);return Tzt(n,{render:n,update:i.update.bind(i),draw:i.draw.bind(i),destroy:i.destroy.bind(i),regl:i.regl,gl:i.gl,canvas:i.gl.canvas,groups:i.groups,markers:i.markerCache,palette:i.palette}),n};FIe.exports=Azt});var NIe=ie((Gpr,wW)=>{"use strict";wW.exports=aI;wW.exports.default=aI;function aI(e,t,r){r=r||2;var i=t&&t.length,n=i?t[0]*r:e.length,a=zIe(e,0,n,r,!0),o=[];if(!a||a.next===a.prev)return o;var s,l,u,f,c,h,v;if(i&&(a=Czt(e,t,a,r)),e.length>80*r){s=u=e[0],l=f=e[1];for(var d=r;d<n;d+=r)c=e[d],h=e[d+1],c<s&&(s=c),h<l&&(l=h),c>u&&(u=c),h>f&&(f=h);v=Math.max(u-s,f-l),v=v!==0?1/v:0}return i5(a,o,r,s,l,v),o}function zIe(e,t,r,i,n){var a,o;if(n===bW(e,t,r,i)>0)for(a=t;a<r;a+=i)o=qIe(a,e[a],e[a+1],o);else for(a=r-i;a>=t;a-=i)o=qIe(a,e[a],e[a+1],o);return o&&oI(o,o.next)&&(o5(o),o=o.next),o}function m1(e,t){if(!e)return e;t||(t=e);var r=e,i;do if(i=!1,!r.steiner&&(oI(r,r.next)||Nu(r.prev,r,r.next)===0)){if(o5(r),r=t=r.prev,r===r.next)break;i=!0}else r=r.next;while(i||r!==t);return t}function i5(e,t,r,i,n,a,o){if(e){!o&&a&&Izt(e,i,n,a);for(var s=e,l,u;e.prev!==e.next;){if(l=e.prev,u=e.next,a?Szt(e,i,n,a):Mzt(e)){t.push(l.i/r),t.push(e.i/r),t.push(u.i/r),o5(e),e=u.next,s=u.next;continue}if(e=u,e===s){o?o===1?(e=Ezt(m1(e),t,r),i5(e,t,r,i,n,a,2)):o===2&&kzt(e,t,r,i,n,a):i5(m1(e),t,r,i,n,a,1);break}}}}function Mzt(e){var t=e.prev,r=e,i=e.next;if(Nu(t,r,i)>=0)return!1;for(var n=e.next.next;n!==e.prev;){if($3(t.x,t.y,r.x,r.y,i.x,i.y,n.x,n.y)&&Nu(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function Szt(e,t,r,i){var n=e.prev,a=e,o=e.next;if(Nu(n,a,o)>=0)return!1;for(var s=n.x<a.x?n.x<o.x?n.x:o.x:a.x<o.x?a.x:o.x,l=n.y<a.y?n.y<o.y?n.y:o.y:a.y<o.y?a.y:o.y,u=n.x>a.x?n.x>o.x?n.x:o.x:a.x>o.x?a.x:o.x,f=n.y>a.y?n.y>o.y?n.y:o.y:a.y>o.y?a.y:o.y,c=xW(s,l,t,r,i),h=xW(u,f,t,r,i),v=e.prevZ,d=e.nextZ;v&&v.z>=c&&d&&d.z<=h;){if(v!==e.prev&&v!==e.next&&$3(n.x,n.y,a.x,a.y,o.x,o.y,v.x,v.y)&&Nu(v.prev,v,v.next)>=0||(v=v.prevZ,d!==e.prev&&d!==e.next&&$3(n.x,n.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Nu(d.prev,d,d.next)>=0))return!1;d=d.nextZ}for(;v&&v.z>=c;){if(v!==e.prev&&v!==e.next&&$3(n.x,n.y,a.x,a.y,o.x,o.y,v.x,v.y)&&Nu(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;d&&d.z<=h;){if(d!==e.prev&&d!==e.next&&$3(n.x,n.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Nu(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Ezt(e,t,r){var i=e;do{var n=i.prev,a=i.next.next;!oI(n,a)&&OIe(n,i,i.next,a)&&a5(n,a)&&a5(a,n)&&(t.push(n.i/r),t.push(i.i/r),t.push(a.i/r),o5(i),o5(i.next),i=e=a),i=i.next}while(i!==e);return m1(i)}function kzt(e,t,r,i,n,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&zzt(o,s)){var l=BIe(o,s);o=m1(o,o.next),l=m1(l,l.next),i5(o,t,r,i,n,a),i5(l,t,r,i,n,a);return}s=s.next}o=o.next}while(o!==e)}function Czt(e,t,r,i){var n=[],a,o,s,l,u;for(a=0,o=t.length;a<o;a++)s=t[a]*i,l=a<o-1?t[a+1]*i:e.length,u=zIe(e,s,l,i,!1),u===u.next&&(u.steiner=!0),n.push(qzt(u));for(n.sort(Lzt),a=0;a<n.length;a++)Pzt(n[a],r),r=m1(r,r.next);return r}function Lzt(e,t){return e.x-t.x}function Pzt(e,t){if(t=Rzt(e,t),t){var r=BIe(t,e);m1(t,t.next),m1(r,r.next)}}function Rzt(e,t){var r=t,i=e.x,n=e.y,a=-1/0,o;do{if(n<=r.y&&n>=r.next.y&&r.next.y!==r.y){var s=r.x+(n-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(n===r.y)return r;if(n===r.next.y)return r.next}o=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!o)return null;if(i===a)return o;var l=o,u=o.x,f=o.y,c=1/0,h;r=o;do i>=r.x&&r.x>=u&&i!==r.x&&$3(n<f?i:a,n,u,f,n<f?a:i,n,r.x,r.y)&&(h=Math.abs(n-r.y)/(i-r.x),a5(r,e)&&(h<c||h===c&&(r.x>o.x||r.x===o.x&&Dzt(o,r)))&&(o=r,c=h)),r=r.next;while(r!==l);return o}function Dzt(e,t){return Nu(e.prev,e,t.prev)<0&&Nu(t.next,e,e.next)<0}function Izt(e,t,r,i){var n=e;do n.z===null&&(n.z=xW(n.x,n.y,t,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,Fzt(n)}function Fzt(e){var t,r,i,n,a,o,s,l,u=1;do{for(r=e,e=null,a=null,o=0;r;){for(o++,i=r,s=0,t=0;t<u&&(s++,i=i.nextZ,!!i);t++);for(l=u;s>0||l>0&&i;)s!==0&&(l===0||!i||r.z<=i.z)?(n=r,r=r.nextZ,s--):(n=i,i=i.nextZ,l--),a?a.nextZ=n:e=n,n.prevZ=a,a=n;r=i}a.nextZ=null,u*=2}while(o>1);return e}function xW(e,t,r,i,n){return e=32767*(e-r)*n,t=32767*(t-i)*n,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function qzt(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function $3(e,t,r,i,n,a,o,s){return(n-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(i-s)-(r-o)*(t-s)>=0&&(r-o)*(a-s)-(n-o)*(i-s)>=0}function zzt(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Ozt(e,t)&&(a5(e,t)&&a5(t,e)&&Bzt(e,t)&&(Nu(e.prev,e,t.prev)||Nu(e,t.prev,t))||oI(e,t)&&Nu(e.prev,e,e.next)>0&&Nu(t.prev,t,t.next)>0)}function Nu(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function oI(e,t){return e.x===t.x&&e.y===t.y}function OIe(e,t,r,i){var n=iI(Nu(e,t,r)),a=iI(Nu(e,t,i)),o=iI(Nu(r,i,e)),s=iI(Nu(r,i,t));return!!(n!==a&&o!==s||n===0&&nI(e,r,t)||a===0&&nI(e,i,t)||o===0&&nI(r,e,i)||s===0&&nI(r,t,i))}function nI(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function iI(e){return e>0?1:e<0?-1:0}function Ozt(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&OIe(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function a5(e,t){return Nu(e.prev,e,e.next)<0?Nu(e,t,e.next)>=0&&Nu(e,e.prev,t)>=0:Nu(e,t,e.prev)<0||Nu(e,e.next,t)<0}function Bzt(e,t){var r=e,i=!1,n=(e.x+t.x)/2,a=(e.y+t.y)/2;do r.y>a!=r.next.y>a&&r.next.y!==r.y&&n<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==e);return i}function BIe(e,t){var r=new _W(e.i,e.x,e.y),i=new _W(t.i,t.x,t.y),n=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,a.next=i,i.prev=a,i}function qIe(e,t,r,i){var n=new _W(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function o5(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function _W(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}aI.deviation=function(e,t,r,i){var n=t&&t.length,a=n?t[0]*r:e.length,o=Math.abs(bW(e,0,a,r));if(n)for(var s=0,l=t.length;s<l;s++){var u=t[s]*r,f=s<l-1?t[s+1]*r:e.length;o-=Math.abs(bW(e,u,f,r))}var c=0;for(s=0;s<i.length;s+=3){var h=i[s]*r,v=i[s+1]*r,d=i[s+2]*r;c+=Math.abs((e[h]-e[d])*(e[v+1]-e[h+1])-(e[h]-e[v])*(e[d+1]-e[h+1]))}return o===0&&c===0?0:Math.abs((c-o)/o)};function bW(e,t,r,i){for(var n=0,a=t,o=r-i;a<r;a+=i)n+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return n}aI.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},i=0,n=0;n<e.length;n++){for(var a=0;a<e[n].length;a++)for(var o=0;o<t;o++)r.vertices.push(e[n][a][o]);n>0&&(i+=e[n-1].length,r.holes.push(i))}return r}});var VIe=ie((Ypr,UIe)=>{"use strict";var Nzt=H_();UIe.exports=Uzt;function Uzt(e,t,r){if(!e||e.length==null)throw Error("Argument should be an array");t==null&&(t=1),r==null&&(r=Nzt(e,t));for(var i=0;i<t;i++){var n=r[t+i],a=r[i],o=i,s=e.length;if(n===1/0&&a===-1/0)for(o=i;o<s;o+=t)e[o]=e[o]===n?1:e[o]===a?0:.5;else if(n===1/0)for(o=i;o<s;o+=t)e[o]=e[o]===n?1:0;else if(a===-1/0)for(o=i;o<s;o+=t)e[o]=e[o]===a?0:1;else{var l=n-a;for(o=i;o<s;o+=t)isNaN(e[o])||(e[o]=l===0?.5:(e[o]-a)/l)}}return e}});var GIe=ie((Wpr,HIe)=>{"use strict";HIe.exports=function(){var e,t;if(typeof WeakMap!="function")return!1;try{e=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch(r){return!1}return!(String(e)!=="[object WeakMap]"||typeof e.set!="function"||e.set({},1)!==e||typeof e.delete!="function"||typeof e.has!="function"||e.get(t)!=="one")}});var WIe=ie((Xpr,YIe)=>{"use strict";YIe.exports=function(){}});var x1=ie((Zpr,XIe)=>{"use strict";var Vzt=WIe()();XIe.exports=function(e){return e!==Vzt&&e!==null}});var TW=ie((jpr,jIe)=>{"use strict";var Hzt=Object.create,Gzt=Object.getPrototypeOf,ZIe={};jIe.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||Hzt;return typeof e!="function"?!1:Gzt(e(t(null),ZIe))===ZIe}});var AW=ie((Kpr,KIe)=>{"use strict";var Yzt=x1(),Wzt={function:!0,object:!0};KIe.exports=function(e){return Yzt(e)&&Wzt[typeof e]||!1}});var by=ie((Jpr,JIe)=>{"use strict";var Xzt=x1();JIe.exports=function(e){if(!Xzt(e))throw new TypeError("Cannot use null or undefined");return e}});var $Ie=ie((Qpr,QIe)=>{"use strict";var MW=Object.create,sI;TW()()||(sI=SW());QIe.exports=function(){var e,t,r;return!sI||sI.level!==1?MW:(e={},t={},r={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(i){if(i==="__proto__"){t[i]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}t[i]=r}),Object.defineProperties(e,t),Object.defineProperty(sI,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:e}),function(i,n){return MW(i===null?e:i,n)})}()});var SW=ie(($pr,eFe)=>{"use strict";var Zzt=AW(),jzt=by(),Kzt=Object.prototype.isPrototypeOf,Jzt=Object.defineProperty,Qzt={configurable:!0,enumerable:!1,writable:!0,value:void 0},lI;lI=function(e,t){if(jzt(e),t===null||Zzt(t))return e;throw new TypeError("Prototype must be null or an object")};eFe.exports=function(e){var t,r;return e?(e.level===2?e.set?(r=e.set,t=function(i,n){return r.call(lI(i,n),n),i}):t=function(i,n){return lI(i,n).__proto__=n,i}:t=function i(n,a){var o;return lI(n,a),o=Kzt.call(i.nullPolyfill,n),o&&delete i.nullPolyfill.__proto__,a===null&&(a=i.nullPolyfill),n.__proto__=a,o&&Jzt(i.nullPolyfill,"__proto__",Qzt),n},Object.defineProperty(t,"level",{configurable:!1,enumerable:!1,writable:!1,value:e.level})):null}(function(){var e=Object.create(null),t={},r,i=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(i){try{r=i.set,r.call(e,t)}catch(n){}if(Object.getPrototypeOf(e)===t)return{set:r,level:2}}return e.__proto__=t,Object.getPrototypeOf(e)===t?{level:2}:(e={},e.__proto__=t,Object.getPrototypeOf(e)===t?{level:1}:!1)}());$Ie()});var uI=ie((e0r,tFe)=>{"use strict";tFe.exports=TW()()?Object.setPrototypeOf:SW()});var nFe=ie((t0r,rFe)=>{"use strict";var $zt=AW();rFe.exports=function(e){if(!$zt(e))throw new TypeError(e+" is not an Object");return e}});var aFe=ie((r0r,iFe)=>{"use strict";var eOt=Object.create(null),tOt=Math.random;iFe.exports=function(){var e;do e=tOt().toString(36).slice(2);while(eOt[e]);return e}});var j_=ie((n0r,oFe)=>{"use strict";var rOt=void 0;oFe.exports=function(e){return e!==rOt&&e!==null}});var fI=ie((i0r,sFe)=>{"use strict";var nOt=j_(),iOt={object:!0,function:!0,undefined:!0};sFe.exports=function(e){return nOt(e)?hasOwnProperty.call(iOt,typeof e):!1}});var uFe=ie((a0r,lFe)=>{"use strict";var aOt=fI();lFe.exports=function(e){if(!aOt(e))return!1;try{return e.constructor?e.constructor.prototype===e:!1}catch(t){return!1}}});var cFe=ie((o0r,fFe)=>{"use strict";var oOt=uFe();fFe.exports=function(e){if(typeof e!="function"||!hasOwnProperty.call(e,"length"))return!1;try{if(typeof e.length!="number"||typeof e.call!="function"||typeof e.apply!="function")return!1}catch(t){return!1}return!oOt(e)}});var EW=ie((s0r,hFe)=>{"use strict";var sOt=cFe(),lOt=/^\s*class[\s{/}]/,uOt=Function.prototype.toString;hFe.exports=function(e){return!(!sOt(e)||lOt.test(uOt.call(e)))}});var dFe=ie((l0r,vFe)=>{"use strict";vFe.exports=function(){var e=Object.assign,t;return typeof e!="function"?!1:(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}});var gFe=ie((u0r,pFe)=>{"use strict";pFe.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}});var mFe=ie((f0r,yFe)=>{"use strict";var fOt=x1(),cOt=Object.keys;yFe.exports=function(e){return cOt(fOt(e)?Object(e):e)}});var _Fe=ie((c0r,xFe)=>{"use strict";xFe.exports=gFe()()?Object.keys:mFe()});var wFe=ie((h0r,bFe)=>{"use strict";var hOt=_Fe(),vOt=by(),dOt=Math.max;bFe.exports=function(e,t){var r,i,n=dOt(arguments.length,2),a;for(e=Object(vOt(e)),a=function(o){try{e[o]=t[o]}catch(s){r||(r=s)}},i=1;i<n;++i)t=arguments[i],hOt(t).forEach(a);if(r!==void 0)throw r;return e}});var cI=ie((v0r,TFe)=>{"use strict";TFe.exports=dFe()()?Object.assign:wFe()});var kW=ie((d0r,AFe)=>{"use strict";var pOt=x1(),gOt=Array.prototype.forEach,yOt=Object.create,mOt=function(e,t){var r;for(r in e)t[r]=e[r]};AFe.exports=function(e){var t=yOt(null);return gOt.call(arguments,function(r){pOt(r)&&mOt(Object(r),t)}),t}});var SFe=ie((p0r,MFe)=>{"use strict";var CW="razdwatrzy";MFe.exports=function(){return typeof CW.contains!="function"?!1:CW.contains("dwa")===!0&&CW.contains("foo")===!1}});var kFe=ie((g0r,EFe)=>{"use strict";var xOt=String.prototype.indexOf;EFe.exports=function(e){return xOt.call(this,e,arguments[1])>-1}});var LW=ie((y0r,CFe)=>{"use strict";CFe.exports=SFe()()?String.prototype.contains:kFe()});var wy=ie((m0r,DFe)=>{"use strict";var hI=j_(),LFe=EW(),PFe=cI(),RFe=kW(),s5=LW(),_Ot=DFe.exports=function(e,t){var r,i,n,a,o;return arguments.length<2||typeof e!="string"?(a=t,t=e,e=null):a=arguments[2],hI(e)?(r=s5.call(e,"c"),i=s5.call(e,"e"),n=s5.call(e,"w")):(r=n=!0,i=!1),o={value:t,configurable:r,enumerable:i,writable:n},a?PFe(RFe(a),o):o};_Ot.gs=function(e,t,r){var i,n,a,o;return typeof e!="string"?(a=r,r=t,t=e,e=null):a=arguments[3],hI(t)?LFe(t)?hI(r)?LFe(r)||(a=r,r=void 0):r=void 0:(a=t,t=r=void 0):t=void 0,hI(e)?(i=s5.call(e,"c"),n=s5.call(e,"e")):(i=!0,n=!1),o={get:t,set:r,configurable:i,enumerable:n},a?PFe(RFe(a),o):o}});var l5=ie((x0r,FFe)=>{"use strict";var IFe=Object.prototype.toString,bOt=IFe.call(function(){return arguments}());FFe.exports=function(e){return IFe.call(e)===bOt}});var u5=ie((_0r,zFe)=>{"use strict";var qFe=Object.prototype.toString,wOt=qFe.call("");zFe.exports=function(e){return typeof e=="string"||e&&typeof e=="object"&&(e instanceof String||qFe.call(e)===wOt)||!1}});var BFe=ie((b0r,OFe)=>{"use strict";OFe.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}});var VFe=ie((w0r,UFe)=>{var NFe=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};UFe.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return NFe()}try{return __global__||NFe()}finally{delete Object.prototype.__global__}}()});var f5=ie((T0r,HFe)=>{"use strict";HFe.exports=BFe()()?globalThis:VFe()});var YFe=ie((A0r,GFe)=>{"use strict";var TOt=f5(),PW={object:!0,symbol:!0};GFe.exports=function(){var e=TOt.Symbol,t;if(typeof e!="function")return!1;t=e("test symbol");try{String(t)}catch(r){return!1}return!(!PW[typeof e.iterator]||!PW[typeof e.toPrimitive]||!PW[typeof e.toStringTag])}});var XFe=ie((M0r,WFe)=>{"use strict";WFe.exports=function(e){return e?typeof e=="symbol"?!0:!e.constructor||e.constructor.name!=="Symbol"?!1:e[e.constructor.toStringTag]==="Symbol":!1}});var RW=ie((S0r,ZFe)=>{"use strict";var AOt=XFe();ZFe.exports=function(e){if(!AOt(e))throw new TypeError(e+" is not a symbol");return e}});var $Fe=ie((E0r,QFe)=>{"use strict";var jFe=wy(),MOt=Object.create,KFe=Object.defineProperty,SOt=Object.prototype,JFe=MOt(null);QFe.exports=function(e){for(var t=0,r,i;JFe[e+(t||"")];)++t;return e+=t||"",JFe[e]=!0,r="@@"+e,KFe(SOt,r,jFe.gs(null,function(n){i||(i=!0,KFe(this,r,jFe(n)),i=!1)})),r}});var t8e=ie((k0r,e8e)=>{"use strict";var L0=wy(),uf=f5().Symbol;e8e.exports=function(e){return Object.defineProperties(e,{hasInstance:L0("",uf&&uf.hasInstance||e("hasInstance")),isConcatSpreadable:L0("",uf&&uf.isConcatSpreadable||e("isConcatSpreadable")),iterator:L0("",uf&&uf.iterator||e("iterator")),match:L0("",uf&&uf.match||e("match")),replace:L0("",uf&&uf.replace||e("replace")),search:L0("",uf&&uf.search||e("search")),species:L0("",uf&&uf.species||e("species")),split:L0("",uf&&uf.split||e("split")),toPrimitive:L0("",uf&&uf.toPrimitive||e("toPrimitive")),toStringTag:L0("",uf&&uf.toStringTag||e("toStringTag")),unscopables:L0("",uf&&uf.unscopables||e("unscopables"))})}});var i8e=ie((C0r,n8e)=>{"use strict";var r8e=wy(),EOt=RW(),c5=Object.create(null);n8e.exports=function(e){return Object.defineProperties(e,{for:r8e(function(t){return c5[t]?c5[t]:c5[t]=e(String(t))}),keyFor:r8e(function(t){var r;EOt(t);for(r in c5)if(c5[r]===t)return r})})}});var s8e=ie((L0r,o8e)=>{"use strict";var gg=wy(),DW=RW(),vI=f5().Symbol,kOt=$Fe(),COt=t8e(),LOt=i8e(),POt=Object.create,IW=Object.defineProperties,dI=Object.defineProperty,nv,eT,a8e;if(typeof vI=="function")try{String(vI()),a8e=!0}catch(e){}else vI=null;eT=function(t){if(this instanceof eT)throw new TypeError("Symbol is not a constructor");return nv(t)};o8e.exports=nv=function e(t){var r;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return a8e?vI(t):(r=POt(eT.prototype),t=t===void 0?"":String(t),IW(r,{__description__:gg("",t),__name__:gg("",kOt(t))}))};COt(nv);LOt(nv);IW(eT.prototype,{constructor:gg(nv),toString:gg("",function(){return this.__name__})});IW(nv.prototype,{toString:gg(function(){return"Symbol ("+DW(this).__description__+")"}),valueOf:gg(function(){return DW(this)})});dI(nv.prototype,nv.toPrimitive,gg("",function(){var e=DW(this);return typeof e=="symbol"?e:e.toString()}));dI(nv.prototype,nv.toStringTag,gg("c","Symbol"));dI(eT.prototype,nv.toStringTag,gg("c",nv.prototype[nv.toStringTag]));dI(eT.prototype,nv.toPrimitive,gg("c",nv.prototype[nv.toPrimitive]))});var _1=ie((P0r,l8e)=>{"use strict";l8e.exports=YFe()()?f5().Symbol:s8e()});var f8e=ie((R0r,u8e)=>{"use strict";var ROt=by();u8e.exports=function(){return ROt(this).length=0,this}});var tT=ie((D0r,c8e)=>{"use strict";c8e.exports=function(e){if(typeof e!="function")throw new TypeError(e+" is not a function");return e}});var v8e=ie((I0r,h8e)=>{"use strict";var DOt=j_(),IOt=fI(),FOt=Object.prototype.toString;h8e.exports=function(e){if(!DOt(e))return null;if(IOt(e)){var t=e.toString;if(typeof t!="function"||t===FOt)return null}try{return""+e}catch(r){return null}}});var p8e=ie((F0r,d8e)=>{"use strict";d8e.exports=function(e){try{return e.toString()}catch(t){try{return String(e)}catch(r){return null}}}});var y8e=ie((q0r,g8e)=>{"use strict";var qOt=p8e(),zOt=/[\n\r\u2028\u2029]/g;g8e.exports=function(e){var t=qOt(e);return t===null?"<Non-coercible to string value>":(t.length>100&&(t=t.slice(0,99)+"\u2026"),t=t.replace(zOt,function(r){switch(r){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),t)}});var FW=ie((z0r,_8e)=>{"use strict";var m8e=j_(),OOt=fI(),BOt=v8e(),NOt=y8e(),x8e=function(e,t){return e.replace("%v",NOt(t))};_8e.exports=function(e,t,r){if(!OOt(r))throw new TypeError(x8e(t,e));if(!m8e(e)){if("default"in r)return r.default;if(r.isOptional)return null}var i=BOt(r.errorMessage);throw m8e(i)||(i=t),new TypeError(x8e(i,e))}});var w8e=ie((O0r,b8e)=>{"use strict";var UOt=FW(),VOt=j_();b8e.exports=function(e){return VOt(e)?e:UOt(e,"Cannot use %v",arguments[1])}});var A8e=ie((B0r,T8e)=>{"use strict";var HOt=FW(),GOt=EW();T8e.exports=function(e){return GOt(e)?e:HOt(e,"%v is not a plain function",arguments[1])}});var S8e=ie((N0r,M8e)=>{"use strict";M8e.exports=function(){var e=Array.from,t,r;return typeof e!="function"?!1:(t=["raz","dwa"],r=e(t),!!(r&&r!==t&&r[1]==="dwa"))}});var k8e=ie((U0r,E8e)=>{"use strict";var YOt=Object.prototype.toString,WOt=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);E8e.exports=function(e){return typeof e=="function"&&WOt(YOt.call(e))}});var L8e=ie((V0r,C8e)=>{"use strict";C8e.exports=function(){var e=Math.sign;return typeof e!="function"?!1:e(10)===1&&e(-20)===-1}});var R8e=ie((H0r,P8e)=>{"use strict";P8e.exports=function(e){return e=Number(e),isNaN(e)||e===0?e:e>0?1:-1}});var I8e=ie((G0r,D8e)=>{"use strict";D8e.exports=L8e()()?Math.sign:R8e()});var q8e=ie((Y0r,F8e)=>{"use strict";var XOt=I8e(),ZOt=Math.abs,jOt=Math.floor;F8e.exports=function(e){return isNaN(e)?0:(e=Number(e),e===0||!isFinite(e)?e:XOt(e)*jOt(ZOt(e)))}});var O8e=ie((W0r,z8e)=>{"use strict";var KOt=q8e(),JOt=Math.max;z8e.exports=function(e){return JOt(0,KOt(e))}});var V8e=ie((X0r,U8e)=>{"use strict";var QOt=_1().iterator,$Ot=l5(),e7t=k8e(),t7t=O8e(),B8e=tT(),r7t=by(),n7t=x1(),i7t=u5(),N8e=Array.isArray,qW=Function.prototype.call,K_={configurable:!0,enumerable:!0,writable:!0,value:null},zW=Object.defineProperty;U8e.exports=function(e){var t=arguments[1],r=arguments[2],i,n,a,o,s,l,u,f,c,h;if(e=Object(r7t(e)),n7t(t)&&B8e(t),!this||this===Array||!e7t(this)){if(!t){if($Ot(e))return s=e.length,s!==1?Array.apply(null,e):(o=new Array(1),o[0]=e[0],o);if(N8e(e)){for(o=new Array(s=e.length),n=0;n<s;++n)o[n]=e[n];return o}}o=[]}else i=this;if(!N8e(e)){if((c=e[QOt])!==void 0){for(u=B8e(c).call(e),i&&(o=new i),f=u.next(),n=0;!f.done;)h=t?qW.call(t,r,f.value,n):f.value,i?(K_.value=h,zW(o,n,K_)):o[n]=h,f=u.next(),++n;s=n}else if(i7t(e)){for(s=e.length,i&&(o=new i),n=0,a=0;n<s;++n)h=e[n],n+1<s&&(l=h.charCodeAt(0),l>=55296&&l<=56319&&(h+=e[++n])),h=t?qW.call(t,r,h,a):h,i?(K_.value=h,zW(o,a,K_)):o[a]=h,++a;s=a}}if(s===void 0)for(s=t7t(e.length),i&&(o=new i(s)),n=0;n<s;++n)h=t?qW.call(t,r,e[n],n):e[n],i?(K_.value=h,zW(o,n,K_)):o[n]=h;return i&&(K_.value=null,o.length=s),o}});var G8e=ie((Z0r,H8e)=>{"use strict";H8e.exports=S8e()()?Array.from:V8e()});var W8e=ie((j0r,Y8e)=>{"use strict";var a7t=G8e(),o7t=cI(),s7t=by();Y8e.exports=function(e){var t=Object(s7t(e)),r=arguments[1],i=Object(arguments[2]);if(t!==e&&!r)return t;var n={};return r?a7t(r,function(a){(i.ensure||a in e)&&(n[a]=e[a])}):o7t(n,e),n}});var j8e=ie((K0r,Z8e)=>{"use strict";var l7t=tT(),u7t=by(),f7t=Function.prototype.bind,X8e=Function.prototype.call,c7t=Object.keys,h7t=Object.prototype.propertyIsEnumerable;Z8e.exports=function(e,t){return function(r,i){var n,a=arguments[2],o=arguments[3];return r=Object(u7t(r)),l7t(i),n=c7t(r),o&&n.sort(typeof o=="function"?f7t.call(o,r):void 0),typeof e!="function"&&(e=n[e]),X8e.call(e,n,function(s,l){return h7t.call(r,s)?X8e.call(i,a,r[s],s,r,l):t})}}});var J8e=ie((J0r,K8e)=>{"use strict";K8e.exports=j8e()("forEach")});var $8e=ie((Q0r,Q8e)=>{"use strict";var v7t=tT(),d7t=J8e(),p7t=Function.prototype.call;Q8e.exports=function(e,t){var r={},i=arguments[2];return v7t(t),d7t(e,function(n,a,o,s){r[a]=p7t.call(t,i,n,a,o,s)}),r}});var nqe=ie(($0r,rqe)=>{"use strict";var g7t=j_(),y7t=w8e(),eqe=A8e(),m7t=W8e(),x7t=kW(),_7t=$8e(),b7t=Function.prototype.bind,w7t=Object.defineProperty,T7t=Object.prototype.hasOwnProperty,tqe;tqe=function(e,t,r){var i=y7t(t)&&eqe(t.value),n;return n=m7t(t),delete n.writable,delete n.value,n.get=function(){return!r.overwriteDefinition&&T7t.call(this,e)?i:(t.value=b7t.call(i,r.resolveContext?r.resolveContext(this):this),w7t(this,e,t),this[e])},n};rqe.exports=function(e){var t=x7t(arguments[1]);return g7t(t.resolveContext)&&eqe(t.resolveContext),_7t(e,function(r,i){return tqe(i,r,t)})}});var OW=ie((egr,sqe)=>{"use strict";var A7t=f8e(),M7t=cI(),S7t=tT(),E7t=by(),gd=wy(),k7t=nqe(),iqe=_1(),aqe=Object.defineProperty,oqe=Object.defineProperties,h5;sqe.exports=h5=function(e,t){if(!(this instanceof h5))throw new TypeError("Constructor requires 'new'");oqe(this,{__list__:gd("w",E7t(e)),__context__:gd("w",t),__nextIndex__:gd("w",0)}),t&&(S7t(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))};delete h5.prototype.constructor;oqe(h5.prototype,M7t({_next:gd(function(){var e;if(this.__list__){if(this.__redo__&&(e=this.__redo__.shift(),e!==void 0))return e;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:gd(function(){return this._createResult(this._next())}),_createResult:gd(function(e){return e===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:gd(function(e){return this.__list__[e]}),_unBind:gd(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:gd(function(){return"[object "+(this[iqe.toStringTag]||"Object")+"]"})},k7t({_onAdd:gd(function(e){if(!(e>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){aqe(this,"__redo__",gd("c",[e]));return}this.__redo__.forEach(function(t,r){t>=e&&(this.__redo__[r]=++t)},this),this.__redo__.push(e)}}),_onDelete:gd(function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(t=this.__redo__.indexOf(e),t!==-1&&this.__redo__.splice(t,1),this.__redo__.forEach(function(r,i){r>e&&(this.__redo__[i]=--r)},this)))}),_onClear:gd(function(){this.__redo__&&A7t.call(this.__redo__),this.__nextIndex__=0})})));aqe(h5.prototype,iqe.iterator,gd(function(){return this}))});var hqe=ie((tgr,cqe)=>{"use strict";var lqe=uI(),uqe=LW(),BW=wy(),C7t=_1(),NW=OW(),fqe=Object.defineProperty,rT;rT=cqe.exports=function(e,t){if(!(this instanceof rT))throw new TypeError("Constructor requires 'new'");NW.call(this,e),t?uqe.call(t,"key+value")?t="key+value":uqe.call(t,"key")?t="key":t="value":t="value",fqe(this,"__kind__",BW("",t))};lqe&&lqe(rT,NW);delete rT.prototype.constructor;rT.prototype=Object.create(NW.prototype,{_resolve:BW(function(e){return this.__kind__==="value"?this.__list__[e]:this.__kind__==="key+value"?[e,this.__list__[e]]:e})});fqe(rT.prototype,C7t.toStringTag,BW("c","Array Iterator"))});var gqe=ie((rgr,pqe)=>{"use strict";var vqe=uI(),pI=wy(),L7t=_1(),UW=OW(),dqe=Object.defineProperty,nT;nT=pqe.exports=function(e){if(!(this instanceof nT))throw new TypeError("Constructor requires 'new'");e=String(e),UW.call(this,e),dqe(this,"__length__",pI("",e.length))};vqe&&vqe(nT,UW);delete nT.prototype.constructor;nT.prototype=Object.create(UW.prototype,{_next:pI(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:pI(function(e){var t=this.__list__[e],r;return this.__nextIndex__===this.__length__?t:(r=t.charCodeAt(0),r>=55296&&r<=56319?t+this.__list__[this.__nextIndex__++]:t)})});dqe(nT.prototype,L7t.toStringTag,pI("c","String Iterator"))});var mqe=ie((ngr,yqe)=>{"use strict";var P7t=l5(),R7t=x1(),D7t=u5(),I7t=_1().iterator,F7t=Array.isArray;yqe.exports=function(e){return R7t(e)?F7t(e)||D7t(e)||P7t(e)?!0:typeof e[I7t]=="function":!1}});var _qe=ie((igr,xqe)=>{"use strict";var q7t=mqe();xqe.exports=function(e){if(!q7t(e))throw new TypeError(e+" is not iterable");return e}});var VW=ie((agr,Tqe)=>{"use strict";var z7t=l5(),O7t=u5(),bqe=hqe(),B7t=gqe(),N7t=_qe(),wqe=_1().iterator;Tqe.exports=function(e){return typeof N7t(e)[wqe]=="function"?e[wqe]():z7t(e)?new bqe(e):O7t(e)?new B7t(e):new bqe(e)}});var Mqe=ie((ogr,Aqe)=>{"use strict";var U7t=l5(),V7t=tT(),H7t=u5(),G7t=VW(),Y7t=Array.isArray,HW=Function.prototype.call,W7t=Array.prototype.some;Aqe.exports=function(e,t){var r,i=arguments[2],n,a,o,s,l,u,f;if(Y7t(e)||U7t(e)?r="array":H7t(e)?r="string":e=G7t(e),V7t(t),a=function(){o=!0},r==="array"){W7t.call(e,function(c){return HW.call(t,i,c,a),o});return}if(r==="string"){for(l=e.length,s=0;s<l&&(u=e[s],s+1<l&&(f=u.charCodeAt(0),f>=55296&&f<=56319&&(u+=e[++s])),HW.call(t,i,u,a),!o);++s);return}for(n=e.next();!n.done;){if(HW.call(t,i,n.value,a),o)return;n=e.next()}}});var Eqe=ie((sgr,Sqe)=>{"use strict";Sqe.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()});var Lqe=ie((lgr,Cqe)=>{"use strict";var X7t=x1(),yI=uI(),gI=nFe(),Z7t=by(),j7t=aFe(),Ty=wy(),K7t=VW(),J7t=Mqe(),Q7t=_1().toStringTag,kqe=Eqe(),$7t=Array.isArray,YW=Object.defineProperty,GW=Object.prototype.hasOwnProperty,eBt=Object.getPrototypeOf,b1;Cqe.exports=b1=function(){var e=arguments[0],t;if(!(this instanceof b1))throw new TypeError("Constructor requires 'new'");return t=kqe&&yI&&WeakMap!==b1?yI(new WeakMap,eBt(this)):this,X7t(e)&&($7t(e)||(e=K7t(e))),YW(t,"__weakMapData__",Ty("c","$weakMap$"+j7t())),e&&J7t(e,function(r){Z7t(r),t.set(r[0],r[1])}),t};kqe&&(yI&&yI(b1,WeakMap),b1.prototype=Object.create(WeakMap.prototype,{constructor:Ty(b1)}));Object.defineProperties(b1.prototype,{delete:Ty(function(e){return GW.call(gI(e),this.__weakMapData__)?(delete e[this.__weakMapData__],!0):!1}),get:Ty(function(e){if(GW.call(gI(e),this.__weakMapData__))return e[this.__weakMapData__]}),has:Ty(function(e){return GW.call(gI(e),this.__weakMapData__)}),set:Ty(function(e,t){return YW(gI(e),this.__weakMapData__,Ty("c",t)),this}),toString:Ty(function(){return"[object WeakMap]"})});YW(b1.prototype,Q7t,Ty("c","WeakMap"))});var WW=ie((ugr,Pqe)=>{"use strict";Pqe.exports=GIe()()?WeakMap:Lqe()});var Dqe=ie((fgr,Rqe)=>{"use strict";Rqe.exports=function(e,t,r){if(typeof Array.prototype.findIndex=="function")return e.findIndex(t,r);if(typeof t!="function")throw new TypeError("predicate must be a function");var i=Object(e),n=i.length;if(n===0)return-1;for(var a=0;a<n;a++)if(t.call(r,i[a],a,i))return a;return-1}});var jW=ie((cgr,qqe)=>{"use strict";var mI=l1(),tBt=H_(),ZW=lf(),rBt=pg(),nBt=G_(),Iqe=NIe(),iBt=VIe(),{float32:aBt,fract32:XW}=eI(),oBt=WW(),Fqe=W3(),sBt=Dqe(),lBt=`
precision highp float;

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`,uBt=`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`,fBt=`
precision highp float;

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`,cBt=`
precision highp float;
varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`,hBt=`
precision highp float;

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);


	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`,vBt=`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`;qqe.exports=hl;function hl(e,t){if(!(this instanceof hl))return new hl(e,t);if(typeof e=="function"?(t||(t={}),t.regl=e):t=e,t.length&&(t.positions=t),e=t.regl,!e.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=e._gl,this.regl=e,this.passes=[],this.shaders=hl.shaders.has(e)?hl.shaders.get(e):hl.shaders.set(e,hl.createShaders(e)).get(e),this.update(t)}hl.dashMult=2;hl.maxPatternLength=256;hl.precisionThreshold=3e6;hl.maxPoints=1e4;hl.maxLines=2048;hl.shaders=new oBt;hl.createShaders=function(e){let t=e.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),r={primitive:"triangle strip",instances:e.prop("count"),count:4,offset:0,uniforms:{miterMode:(o,s)=>s.join==="round"?2:1,miterLimit:e.prop("miterLimit"),scale:e.prop("scale"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),translate:e.prop("translate"),thickness:e.prop("thickness"),dashTexture:e.prop("dashTexture"),opacity:e.prop("opacity"),pixelRatio:e.context("pixelRatio"),id:e.prop("id"),dashLength:e.prop("dashLength"),viewport:(o,s)=>[s.viewport.x,s.viewport.y,o.viewportWidth,o.viewportHeight],depth:e.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:(o,s)=>!s.overlay},stencil:{enable:!1},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport")},i=e(ZW({vert:lBt,frag:uBt,attributes:{lineEnd:{buffer:t,divisor:0,stride:8,offset:0},lineTop:{buffer:t,divisor:0,stride:8,offset:4},aCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:e.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},r)),n;try{n=e(ZW({cull:{enable:!0,face:"back"},vert:hBt,frag:vBt,attributes:{lineEnd:{buffer:t,divisor:0,stride:8,offset:0},lineTop:{buffer:t,divisor:0,stride:8,offset:4},aColor:{buffer:e.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:e.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},r))}catch(o){n=i}return{fill:e({primitive:"triangle",elements:(o,s)=>s.triangles,offset:0,vert:fBt,frag:cBt,uniforms:{scale:e.prop("scale"),color:e.prop("fill"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),translate:e.prop("translate"),opacity:e.prop("opacity"),pixelRatio:e.context("pixelRatio"),id:e.prop("id"),viewport:(o,s)=>[s.viewport.x,s.viewport.y,o.viewportWidth,o.viewportHeight]},attributes:{position:{buffer:e.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:8}},blend:r.blend,depth:{enable:!1},scissor:r.scissor,stencil:r.stencil,viewport:r.viewport}),rect:i,miter:n}};hl.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null};hl.prototype.render=function(...e){e.length&&this.update(...e),this.draw()};hl.prototype.draw=function(...e){return(e.length?e:this.passes).forEach((t,r)=>{if(t&&Array.isArray(t))return this.draw(...t);typeof t=="number"&&(t=this.passes[t]),t&&t.count>1&&t.opacity&&(this.regl._refresh(),t.fill&&t.triangles&&t.triangles.length>2&&this.shaders.fill(t),t.thickness&&(t.scale[0]*t.viewport.width>hl.precisionThreshold||t.scale[1]*t.viewport.height>hl.precisionThreshold?this.shaders.rect(t):t.join==="rect"||!t.join&&(t.thickness<=2||t.count>=hl.maxPoints)?this.shaders.rect(t):this.shaders.miter(t)))}),this};hl.prototype.update=function(e){if(!e)return;e.length!=null?typeof e[0]=="number"&&(e=[{positions:e}]):Array.isArray(e)||(e=[e]);let{regl:t,gl:r}=this;if(e.forEach((n,a)=>{let o=this.passes[a];if(n!==void 0){if(n===null){this.passes[a]=null;return}if(typeof n[0]=="number"&&(n={positions:n}),n=rBt(n,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),o||(this.passes[a]=o={id:a,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:t.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:t.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:t.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:t.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},n=ZW({},hl.defaults,n)),n.thickness!=null&&(o.thickness=parseFloat(n.thickness)),n.opacity!=null&&(o.opacity=parseFloat(n.opacity)),n.miterLimit!=null&&(o.miterLimit=parseFloat(n.miterLimit)),n.overlay!=null&&(o.overlay=!!n.overlay,a<hl.maxLines&&(o.depth=2*(hl.maxLines-1-a%hl.maxLines)/hl.maxLines-1)),n.join!=null&&(o.join=n.join),n.hole!=null&&(o.hole=n.hole),n.fill!=null&&(o.fill=n.fill?mI(n.fill,"uint8"):null),n.viewport!=null&&(o.viewport=Fqe(n.viewport)),o.viewport||(o.viewport=Fqe([r.drawingBufferWidth,r.drawingBufferHeight])),n.close!=null&&(o.close=n.close),n.positions===null&&(n.positions=[]),n.positions){let u,f;if(n.positions.x&&n.positions.y){let d=n.positions.x,x=n.positions.y;f=o.count=Math.max(d.length,x.length),u=new Float64Array(f*2);for(let b=0;b<f;b++)u[b*2]=d[b],u[b*2+1]=x[b]}else u=nBt(n.positions,"float64"),f=o.count=Math.floor(u.length/2);let c=o.bounds=tBt(u,2);if(o.fill){let d=[],x={},b=0;for(let p=0,w=0,A=o.count;p<A;p++){let T=u[p*2],k=u[p*2+1];isNaN(T)||isNaN(k)||T==null||k==null?(T=u[b*2],k=u[b*2+1],x[p]=b):b=p,d[w++]=T,d[w++]=k}if(n.splitNull){o.count-1 in x||(x[o.count]=o.count-1);let p=Object.keys(x).map(Number).sort((k,_)=>k-_),w=[],A=0,T=o.hole!=null?o.hole[0]:null;if(T!=null){let k=sBt(p,_=>_>=T);p=p.slice(0,k),p.push(T)}for(let k=0;k<p.length;k++){let _=d.slice(A*2,p[k]*2).concat(T?d.slice(T*2):[]),E=(o.hole||[]).map(g=>g-T+(p[k]-A)),S=Iqe(_,E);S=S.map(g=>g+A+(g+A<p[k]?0:T-p[k])),w.push(...S),A=p[k]+1}for(let k=0,_=w.length;k<_;k++)x[w[k]]!=null&&(w[k]=x[w[k]]);o.triangles=w}else{let p=Iqe(d,o.hole||[]);for(let w=0,A=p.length;w<A;w++)x[p[w]]!=null&&(p[w]=x[p[w]]);o.triangles=p}}let h=new Float64Array(u);iBt(h,2,c);let v=new Float64Array(f*2+6);o.close?u[0]===u[f*2-2]&&u[1]===u[f*2-1]?(v[0]=h[f*2-4],v[1]=h[f*2-3]):(v[0]=h[f*2-2],v[1]=h[f*2-1]):(v[0]=h[0],v[1]=h[1]),v.set(h,2),o.close?u[0]===u[f*2-2]&&u[1]===u[f*2-1]?(v[f*2+2]=h[2],v[f*2+3]=h[3],o.count-=1):(v[f*2+2]=h[0],v[f*2+3]=h[1],v[f*2+4]=h[2],v[f*2+5]=h[3]):(v[f*2+2]=h[f*2-2],v[f*2+3]=h[f*2-1],v[f*2+4]=h[f*2-2],v[f*2+5]=h[f*2-1]);var s=aBt(v);o.positionBuffer(s);var l=XW(v,s);o.positionFractBuffer(l)}if(n.range?o.range=n.range:o.range||(o.range=o.bounds),(n.range||n.positions)&&o.count){let u=o.bounds,f=u[2]-u[0],c=u[3]-u[1],h=o.range[2]-o.range[0],v=o.range[3]-o.range[1];o.scale=[f/h,c/v],o.translate=[-o.range[0]/h+u[0]/h||0,-o.range[1]/v+u[1]/v||0],o.scaleFract=XW(o.scale),o.translateFract=XW(o.translate)}if(n.dashes){let u=0,f;if(!n.dashes||n.dashes.length<2)u=1,f=new Uint8Array([255,255,255,255,255,255,255,255]);else{u=0;for(let v=0;v<n.dashes.length;++v)u+=n.dashes[v];f=new Uint8Array(u*hl.dashMult);let c=0,h=255;for(let v=0;v<2;v++)for(let d=0;d<n.dashes.length;++d){for(let x=0,b=n.dashes[d]*hl.dashMult*.5;x<b;++x)f[c++]=h;h^=255}}o.dashLength=u,o.dashTexture({channels:1,data:f,width:f.length,height:1,mag:"linear",min:"linear"},0,0)}if(n.color){let u=o.count,f=n.color;f||(f="transparent");let c=new Uint8Array(u*4+4);if(!Array.isArray(f)||typeof f[0]=="number"){let h=mI(f,"uint8");for(let v=0;v<u+1;v++)c.set(h,v*4)}else{for(let h=0;h<u;h++){let v=mI(f[h],"uint8");c.set(v,h*4)}c.set(mI(f[0],"uint8"),u*4)}o.colorBuffer({usage:"dynamic",type:"uint8",data:c})}}}),e.length<this.passes.length){for(let n=e.length;n<this.passes.length;n++){let a=this.passes[n];a&&(a.colorBuffer.destroy(),a.positionBuffer.destroy(),a.dashTexture.destroy())}this.passes.length=e.length}let i=[];for(let n=0;n<this.passes.length;n++)this.passes[n]!==null&&i.push(this.passes[n]);return this.passes=i,this};hl.prototype.destroy=function(){return this.passes.forEach(e=>{e.colorBuffer.destroy(),e.positionBuffer.destroy(),e.dashTexture.destroy()}),this.passes.length=0,this}});var Uqe=ie((hgr,Nqe)=>{"use strict";var dBt=H_(),pBt=l1(),gBt=gW(),yBt=pg(),zqe=lf(),Oqe=G_(),{float32:mBt,fract32:KW}=eI();Nqe.exports=xBt;var Bqe=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function xBt(e,t){if(typeof e=="function"?(t||(t={}),t.regl=e):t=e,t.length&&(t.positions=t),e=t.regl,!e.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");let r=e._gl,i,n,a,o,s,l,u={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},f=[];return o=e.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),n=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),a=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),s=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),l=e.buffer({usage:"static",type:"float",data:Bqe}),d(t),i=e({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:e.prop("range"),lineWidth:e.prop("lineWidth"),capSize:e.prop("capSize"),opacity:e.prop("opacity"),scale:e.prop("scale"),translate:e.prop("translate"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),viewport:(b,p)=>[p.viewport.x,p.viewport.y,b.viewportWidth,b.viewportHeight]},attributes:{color:{buffer:o,offset:(b,p)=>p.offset*4,divisor:1},position:{buffer:n,offset:(b,p)=>p.offset*8,divisor:1},positionFract:{buffer:a,offset:(b,p)=>p.offset*8,divisor:1},error:{buffer:s,offset:(b,p)=>p.offset*16,divisor:1},direction:{buffer:l,stride:24,offset:0},lineOffset:{buffer:l,stride:24,offset:8},capOffset:{buffer:l,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport"),stencil:!1,instances:e.prop("count"),count:Bqe.length}),zqe(c,{update:d,draw:h,destroy:x,regl:e,gl:r,canvas:r.canvas,groups:f}),c;function c(b){b?d(b):b===null&&x(),h()}function h(b){if(typeof b=="number")return v(b);b&&!Array.isArray(b)&&(b=[b]),e._refresh(),f.forEach((p,w)=>{if(p){if(b&&(b[w]?p.draw=!0:p.draw=!1),!p.draw){p.draw=!0;return}v(w)}})}function v(b){typeof b=="number"&&(b=f[b]),b!=null&&b&&b.count&&b.color&&b.opacity&&b.positions&&b.positions.length>1&&(b.scaleRatio=[b.scale[0]*b.viewport.width,b.scale[1]*b.viewport.height],i(b),b.after&&b.after(b))}function d(b){if(!b)return;b.length!=null?typeof b[0]=="number"&&(b=[{positions:b}]):Array.isArray(b)||(b=[b]);let p=0,w=0;if(c.groups=f=b.map((k,_)=>{let E=f[_];if(k)typeof k=="function"?k={after:k}:typeof k[0]=="number"&&(k={positions:k});else return E;return k=yBt(k,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),E||(f[_]=E={id:_,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},k=zqe({},u,k)),gBt(E,k,[{lineWidth:S=>+S*.5,capSize:S=>+S*.5,opacity:parseFloat,errors:S=>(S=Oqe(S),w+=S.length,S),positions:(S,g)=>(S=Oqe(S,"float64"),g.count=Math.floor(S.length/2),g.bounds=dBt(S,2),g.offset=p,p+=g.count,S)},{color:(S,g)=>{let C=g.count;if(S||(S="transparent"),!Array.isArray(S)||typeof S[0]=="number"){let P=S;S=Array(C);for(let D=0;D<C;D++)S[D]=P}if(S.length<C)throw Error("Not enough colors");let M=new Uint8Array(C*4);for(let P=0;P<C;P++){let D=pBt(S[P],"uint8");M.set(D,P*4)}return M},range:(S,g,C)=>{let M=g.bounds;return S||(S=M),g.scale=[1/(S[2]-S[0]),1/(S[3]-S[1])],g.translate=[-S[0],-S[1]],g.scaleFract=KW(g.scale),g.translateFract=KW(g.translate),S},viewport:S=>{let g;return Array.isArray(S)?g={x:S[0],y:S[1],width:S[2]-S[0],height:S[3]-S[1]}:S?(g={x:S.x||S.left||0,y:S.y||S.top||0},S.right?g.width=S.right-g.x:g.width=S.w||S.width||0,S.bottom?g.height=S.bottom-g.y:g.height=S.h||S.height||0):g={x:0,y:0,width:r.drawingBufferWidth,height:r.drawingBufferHeight},g}}]),E}),p||w){let k=f.reduce((g,C,M)=>g+(C?C.count:0),0),_=new Float64Array(k*2),E=new Uint8Array(k*4),S=new Float32Array(k*4);f.forEach((g,C)=>{if(!g)return;let{positions:M,count:P,offset:D,color:q,errors:O}=g;P&&(E.set(q,D*4),S.set(O,D*4),_.set(M,D*2))});var A=mBt(_);n(A);var T=KW(_,A);a(T),o(E),s(S)}}function x(){n.destroy(),a.destroy(),o.destroy(),s.destroy(),l.destroy()}}});var Gqe=ie((vgr,Hqe)=>{var Vqe=/[\'\"]/;Hqe.exports=function(t){return t?(Vqe.test(t.charAt(0))&&(t=t.substr(1)),Vqe.test(t.charAt(t.length-1))&&(t=t.substr(0,t.length-1)),t):""}});var JW=ie(()=>{});var QW=ie(()=>{});var $W=ie(()=>{});var eX=ie(()=>{});var tX=ie(()=>{});var Zqe=ie((Agr,Xqe)=>{"use strict";function Yqe(e,t){if(typeof e!="string")return[e];var r=[e];typeof t=="string"||Array.isArray(t)?t={brackets:t}:t||(t={});var i=t.brackets?Array.isArray(t.brackets)?t.brackets:[t.brackets]:["{}","[]","()"],n=t.escape||"___",a=!!t.flat;i.forEach(function(l){var u=new RegExp(["\\",l[0],"[^\\",l[0],"\\",l[1],"]*\\",l[1]].join("")),f=[];function c(h,v,d){var x=r.push(h.slice(l[0].length,-l[1].length))-1;return f.push(x),n+x+n}r.forEach(function(h,v){for(var d,x=0;h!=d;)if(d=h,h=h.replace(u,c),x++>1e4)throw Error("References have circular dependency. Please, check them.");r[v]=h}),f=f.reverse(),r=r.map(function(h){return f.forEach(function(v){h=h.replace(new RegExp("(\\"+n+v+"\\"+n+")","g"),l[0]+"$1"+l[1])}),h})});var o=new RegExp("\\"+n+"([0-9]+)\\"+n);function s(l,u,f){for(var c=[],h,v=0;h=o.exec(l);){if(v++>1e4)throw Error("Circular references in parenthesis");c.push(l.slice(0,h.index)),c.push(s(u[h[1]],u)),l=l.slice(h.index+h[0].length)}return c.push(l),c}return a?r:s(r[0],r)}function Wqe(e,t){if(t&&t.flat){var r=t&&t.escape||"___",i=e[0],n;if(!i)return"";for(var a=new RegExp("\\"+r+"([0-9]+)\\"+r),o=0;i!=n;){if(o++>1e4)throw Error("Circular references in "+e);n=i,i=i.replace(a,s)}return i}return e.reduce(function l(u,f){return Array.isArray(f)&&(f=f.reduce(l,"")),u+f},"");function s(l,u){if(e[u]==null)throw Error("Reference "+u+"is undefined");return e[u]}}function rX(e,t){return Array.isArray(e)?Wqe(e,t):Yqe(e,t)}rX.parse=Yqe;rX.stringify=Wqe;Xqe.exports=rX});var Jqe=ie((Mgr,Kqe)=>{"use strict";var jqe=Zqe();Kqe.exports=function(t,r,i){if(t==null)throw Error("First argument should be a string");if(r==null)throw Error("Separator should be a string or a RegExp");i?(typeof i=="string"||Array.isArray(i))&&(i={ignore:i}):i={},i.escape==null&&(i.escape=!0),i.ignore==null?i.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof i.ignore=="string"&&(i.ignore=[i.ignore]),i.ignore=i.ignore.map(function(c){return c.length===1&&(c=c+c),c}));var n=jqe.parse(t,{flat:!0,brackets:i.ignore}),a=n[0],o=a.split(r);if(i.escape){for(var s=[],l=0;l<o.length;l++){var u=o[l],f=o[l+1];u[u.length-1]==="\\"&&u[u.length-2]!=="\\"?(s.push(u+r+f),l++):s.push(u)}o=s}for(var l=0;l<o.length;l++)n[0]=o[l],o[l]=jqe.stringify(n,{flat:!0});return o}});var Qqe=ie(()=>{});var nX=ie((kgr,$qe)=>{"use strict";var _Bt=Qqe();$qe.exports={isSize:function(t){return/^[\d\.]/.test(t)||t.indexOf("/")!==-1||_Bt.indexOf(t)!==-1}}});var nze=ie((Cgr,rze)=>{"use strict";var bBt=Gqe(),wBt=JW(),TBt=QW(),ABt=$W(),MBt=eX(),SBt=tX(),iX=Jqe(),EBt=nX().isSize;rze.exports=tze;var v5=tze.cache={};function tze(e){if(typeof e!="string")throw new Error("Font argument must be a string.");if(v5[e])return v5[e];if(e==="")throw new Error("Cannot parse an empty string.");if(TBt.indexOf(e)!==-1)return v5[e]={system:e};for(var t={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},r=iX(e,/\s+/),i;i=r.shift();){if(wBt.indexOf(i)!==-1)return["style","variant","weight","stretch"].forEach(function(a){t[a]=i}),v5[e]=t;if(MBt.indexOf(i)!==-1){t.style=i;continue}if(i==="normal"||i==="small-caps"){t.variant=i;continue}if(SBt.indexOf(i)!==-1){t.stretch=i;continue}if(ABt.indexOf(i)!==-1){t.weight=i;continue}if(EBt(i)){var n=iX(i,"/");if(t.size=n[0],n[1]!=null?t.lineHeight=eze(n[1]):r[0]==="/"&&(r.shift(),t.lineHeight=eze(r.shift())),!r.length)throw new Error("Missing required font-family.");return t.family=iX(r.join(" "),/\s*,\s*/).map(bBt),v5[e]=t}throw new Error("Unknown or unsupported font token: "+i)}throw new Error("Missing required font-size.")}function eze(e){var t=parseFloat(e);return t.toString()===e?t:e}});var oX=ie((Lgr,ize)=>{"use strict";var kBt=pg(),CBt=nX().isSize,LBt=p5(JW()),PBt=p5(QW()),RBt=p5($W()),DBt=p5(eX()),IBt=p5(tX()),FBt={normal:1,"small-caps":1},qBt={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},aX={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};ize.exports=function(t){if(t=kBt(t,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),t.system)return t.system&&d5(t.system,PBt),t.system;if(d5(t.style,DBt),d5(t.variant,FBt),d5(t.weight,RBt),d5(t.stretch,IBt),t.size==null&&(t.size=aX.size),typeof t.size=="number"&&(t.size+="px"),!CBt)throw Error("Bad size value `"+t.size+"`");t.family||(t.family=aX.family),Array.isArray(t.family)&&(t.family.length||(t.family=[aX.family]),t.family=t.family.map(function(i){return qBt[i]?i:'"'+i+'"'}).join(", "));var r=[];return r.push(t.style),t.variant!==t.style&&r.push(t.variant),t.weight!==t.variant&&t.weight!==t.style&&r.push(t.weight),t.stretch!==t.weight&&t.stretch!==t.variant&&t.stretch!==t.style&&r.push(t.stretch),r.push(t.size+(t.lineHeight==null||t.lineHeight==="normal"||t.lineHeight+""=="1"?"":"/"+t.lineHeight)),r.push(t.family),r.filter(Boolean).join(" ")};function d5(e,t){if(e&&!t[e]&&!LBt[e])throw Error("Unknown keyword `"+e+"`");return e}function p5(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=1;return t}});var oze=ie((Pgr,aze)=>{"use strict";aze.exports={parse:nze(),stringify:oX()}});var uX=ie((sX,lX)=>{(function(e,t){typeof sX=="object"&&typeof lX!="undefined"?lX.exports=t():typeof define=="function"&&define.amd?define(t):e.createREGL=t()})(sX,function(){"use strict";var e=function(Ye,Yt){for(var lr=Object.keys(Yt),Or=0;Or<lr.length;++Or)Ye[lr[Or]]=Yt[lr[Or]];return Ye},t=0,r=0,i=5,n=6;function a(Ye,Yt){this.id=t++,this.type=Ye,this.data=Yt}function o(Ye){return Ye.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function s(Ye){if(Ye.length===0)return[];var Yt=Ye.charAt(0),lr=Ye.charAt(Ye.length-1);if(Ye.length>1&&Yt===lr&&(Yt==='"'||Yt==="'"))return['"'+o(Ye.substr(1,Ye.length-2))+'"'];var Or=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ye);if(Or)return s(Ye.substr(0,Or.index)).concat(s(Or[1])).concat(s(Ye.substr(Or.index+Or[0].length)));var $r=Ye.split(".");if($r.length===1)return['"'+o(Ye)+'"'];for(var jr=[],Kr=0;Kr<$r.length;++Kr)jr=jr.concat(s($r[Kr]));return jr}function l(Ye){return"["+s(Ye).join("][")+"]"}function u(Ye,Yt){return new a(Ye,l(Yt+""))}function f(Ye){return typeof Ye=="function"&&!Ye._reglType||Ye instanceof a}function c(Ye,Yt){if(typeof Ye=="function")return new a(r,Ye);if(typeof Ye=="number"||typeof Ye=="boolean")return new a(i,Ye);if(Array.isArray(Ye))return new a(n,Ye.map(function(lr,Or){return c(lr,Yt+"["+Or+"]")}));if(Ye instanceof a)return Ye}var h={DynamicVariable:a,define:u,isDynamic:f,unbox:c,accessor:l},v={next:typeof requestAnimationFrame=="function"?function(Ye){return requestAnimationFrame(Ye)}:function(Ye){return setTimeout(Ye,16)},cancel:typeof cancelAnimationFrame=="function"?function(Ye){return cancelAnimationFrame(Ye)}:clearTimeout},d=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function x(){var Ye={"":0},Yt=[""];return{id:function(lr){var Or=Ye[lr];return Or||(Or=Ye[lr]=Yt.length,Yt.push(lr),Or)},str:function(lr){return Yt[lr]}}}function b(Ye,Yt,lr){var Or=document.createElement("canvas");e(Or.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Ye.appendChild(Or),Ye===document.body&&(Or.style.position="absolute",e(Ye.style,{margin:0,padding:0}));function $r(){var _n=window.innerWidth,ti=window.innerHeight;if(Ye!==document.body){var Zn=Or.getBoundingClientRect();_n=Zn.right-Zn.left,ti=Zn.bottom-Zn.top}Or.width=lr*_n,Or.height=lr*ti}var jr;Ye!==document.body&&typeof ResizeObserver=="function"?(jr=new ResizeObserver(function(){setTimeout($r)}),jr.observe(Ye)):window.addEventListener("resize",$r,!1);function Kr(){jr?jr.disconnect():window.removeEventListener("resize",$r),Ye.removeChild(Or)}return $r(),{canvas:Or,onDestroy:Kr}}function p(Ye,Yt){function lr(Or){try{return Ye.getContext(Or,Yt)}catch($r){return null}}return lr("webgl")||lr("experimental-webgl")||lr("webgl-experimental")}function w(Ye){return typeof Ye.nodeName=="string"&&typeof Ye.appendChild=="function"&&typeof Ye.getBoundingClientRect=="function"}function A(Ye){return typeof Ye.drawArrays=="function"||typeof Ye.drawElements=="function"}function T(Ye){return typeof Ye=="string"?Ye.split():Ye}function k(Ye){return typeof Ye=="string"?document.querySelector(Ye):Ye}function _(Ye){var Yt=Ye||{},lr,Or,$r,jr,Kr={},_n=[],ti=[],Zn=typeof window=="undefined"?1:window.devicePixelRatio,In=!1,ia={},Gn=function(Br){},Vn=function(){};if(typeof Yt=="string"?lr=document.querySelector(Yt):typeof Yt=="object"&&(w(Yt)?lr=Yt:A(Yt)?(jr=Yt,$r=jr.canvas):("gl"in Yt?jr=Yt.gl:"canvas"in Yt?$r=k(Yt.canvas):"container"in Yt&&(Or=k(Yt.container)),"attributes"in Yt&&(Kr=Yt.attributes),"extensions"in Yt&&(_n=T(Yt.extensions)),"optionalExtensions"in Yt&&(ti=T(Yt.optionalExtensions)),"onDone"in Yt&&(Gn=Yt.onDone),"profile"in Yt&&(In=!!Yt.profile),"pixelRatio"in Yt&&(Zn=+Yt.pixelRatio),"cachedCode"in Yt&&(ia=Yt.cachedCode))),lr&&(lr.nodeName.toLowerCase()==="canvas"?$r=lr:Or=lr),!jr){if(!$r){var bn=b(Or||document.body,Gn,Zn);if(!bn)return null;$r=bn.canvas,Vn=bn.onDestroy}Kr.premultipliedAlpha===void 0&&(Kr.premultipliedAlpha=!0),jr=p($r,Kr)}return jr?{gl:jr,canvas:$r,container:Or,extensions:_n,optionalExtensions:ti,pixelRatio:Zn,profile:In,cachedCode:ia,onDone:Gn,onDestroy:Vn}:(Vn(),Gn("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function E(Ye,Yt){var lr={};function Or(Kr){var _n=Kr.toLowerCase(),ti;try{ti=lr[_n]=Ye.getExtension(_n)}catch(Zn){}return!!ti}for(var $r=0;$r<Yt.extensions.length;++$r){var jr=Yt.extensions[$r];if(!Or(jr))return Yt.onDestroy(),Yt.onDone('"'+jr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Yt.optionalExtensions.forEach(Or),{extensions:lr,restore:function(){Object.keys(lr).forEach(function(Kr){if(lr[Kr]&&!Or(Kr))throw new Error("(regl): error restoring extension "+Kr)})}}}function S(Ye,Yt){for(var lr=Array(Ye),Or=0;Or<Ye;++Or)lr[Or]=Yt(Or);return lr}var g=5120,C=5121,M=5122,P=5123,D=5124,q=5125,O=5126;function U(Ye){for(var Yt=16;Yt<=1<<28;Yt*=16)if(Ye<=Yt)return Yt;return 0}function B(Ye){var Yt,lr;return Yt=(Ye>65535)<<4,Ye>>>=Yt,lr=(Ye>255)<<3,Ye>>>=lr,Yt|=lr,lr=(Ye>15)<<2,Ye>>>=lr,Yt|=lr,lr=(Ye>3)<<1,Ye>>>=lr,Yt|=lr,Yt|Ye>>1}function F(){var Ye=S(8,function(){return[]});function Yt(jr){var Kr=U(jr),_n=Ye[B(Kr)>>2];return _n.length>0?_n.pop():new ArrayBuffer(Kr)}function lr(jr){Ye[B(jr.byteLength)>>2].push(jr)}function Or(jr,Kr){var _n=null;switch(jr){case g:_n=new Int8Array(Yt(Kr),0,Kr);break;case C:_n=new Uint8Array(Yt(Kr),0,Kr);break;case M:_n=new Int16Array(Yt(2*Kr),0,Kr);break;case P:_n=new Uint16Array(Yt(2*Kr),0,Kr);break;case D:_n=new Int32Array(Yt(4*Kr),0,Kr);break;case q:_n=new Uint32Array(Yt(4*Kr),0,Kr);break;case O:_n=new Float32Array(Yt(4*Kr),0,Kr);break;default:return null}return _n.length!==Kr?_n.subarray(0,Kr):_n}function $r(jr){lr(jr.buffer)}return{alloc:Yt,free:lr,allocType:Or,freeType:$r}}var N=F();N.zero=F();var X=3408,K=3410,ne=3411,fe=3412,ue=3413,ee=3414,Z=3415,oe=33901,ce=33902,le=3379,me=3386,he=34921,te=36347,ge=36348,ae=35661,_e=35660,Ce=34930,qe=36349,rt=34076,Re=34024,Ie=7936,ot=7937,lt=7938,ht=35724,xt=34047,Vt=36063,Ht=34852,Me=3553,Ke=34067,We=34069,et=33984,vt=6408,at=5126,Xe=5121,dt=36160,_t=36053,$t=36064,Ut=16384,fr=function(Ye,Yt){var lr=1;Yt.ext_texture_filter_anisotropic&&(lr=Ye.getParameter(xt));var Or=1,$r=1;Yt.webgl_draw_buffers&&(Or=Ye.getParameter(Ht),$r=Ye.getParameter(Vt));var jr=!!Yt.oes_texture_float;if(jr){var Kr=Ye.createTexture();Ye.bindTexture(Me,Kr),Ye.texImage2D(Me,0,vt,1,1,0,vt,at,null);var _n=Ye.createFramebuffer();if(Ye.bindFramebuffer(dt,_n),Ye.framebufferTexture2D(dt,$t,Me,Kr,0),Ye.bindTexture(Me,null),Ye.checkFramebufferStatus(dt)!==_t)jr=!1;else{Ye.viewport(0,0,1,1),Ye.clearColor(1,0,0,1),Ye.clear(Ut);var ti=N.allocType(at,4);Ye.readPixels(0,0,1,1,vt,at,ti),Ye.getError()?jr=!1:(Ye.deleteFramebuffer(_n),Ye.deleteTexture(Kr),jr=ti[0]===1),N.freeType(ti)}}var Zn=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),In=!0;if(!Zn){var ia=Ye.createTexture(),Gn=N.allocType(Xe,36);Ye.activeTexture(et),Ye.bindTexture(Ke,ia),Ye.texImage2D(We,0,vt,3,3,0,vt,Xe,Gn),N.freeType(Gn),Ye.bindTexture(Ke,null),Ye.deleteTexture(ia),In=!Ye.getError()}return{colorBits:[Ye.getParameter(K),Ye.getParameter(ne),Ye.getParameter(fe),Ye.getParameter(ue)],depthBits:Ye.getParameter(ee),stencilBits:Ye.getParameter(Z),subpixelBits:Ye.getParameter(X),extensions:Object.keys(Yt).filter(function(Vn){return!!Yt[Vn]}),maxAnisotropic:lr,maxDrawbuffers:Or,maxColorAttachments:$r,pointSizeDims:Ye.getParameter(oe),lineWidthDims:Ye.getParameter(ce),maxViewportDims:Ye.getParameter(me),maxCombinedTextureUnits:Ye.getParameter(ae),maxCubeMapSize:Ye.getParameter(rt),maxRenderbufferSize:Ye.getParameter(Re),maxTextureUnits:Ye.getParameter(Ce),maxTextureSize:Ye.getParameter(le),maxAttributes:Ye.getParameter(he),maxVertexUniforms:Ye.getParameter(te),maxVertexTextureUnits:Ye.getParameter(_e),maxVaryingVectors:Ye.getParameter(ge),maxFragmentUniforms:Ye.getParameter(qe),glsl:Ye.getParameter(ht),renderer:Ye.getParameter(ot),vendor:Ye.getParameter(Ie),version:Ye.getParameter(lt),readFloat:jr,npotTextureCube:In}},ar=function(Ye){return Ye instanceof Uint8Array||Ye instanceof Uint16Array||Ye instanceof Uint32Array||Ye instanceof Int8Array||Ye instanceof Int16Array||Ye instanceof Int32Array||Ye instanceof Float32Array||Ye instanceof Float64Array||Ye instanceof Uint8ClampedArray};function cr(Ye){return!!Ye&&typeof Ye=="object"&&Array.isArray(Ye.shape)&&Array.isArray(Ye.stride)&&typeof Ye.offset=="number"&&Ye.shape.length===Ye.stride.length&&(Array.isArray(Ye.data)||ar(Ye.data))}var It=function(Ye){return Object.keys(Ye).map(function(Yt){return Ye[Yt]})},gt={shape:pe,flatten:Se};function kt(Ye,Yt,lr){for(var Or=0;Or<Yt;++Or)lr[Or]=Ye[Or]}function Je(Ye,Yt,lr,Or){for(var $r=0,jr=0;jr<Yt;++jr)for(var Kr=Ye[jr],_n=0;_n<lr;++_n)Or[$r++]=Kr[_n]}function Ze(Ye,Yt,lr,Or,$r,jr){for(var Kr=jr,_n=0;_n<Yt;++_n)for(var ti=Ye[_n],Zn=0;Zn<lr;++Zn)for(var In=ti[Zn],ia=0;ia<Or;++ia)$r[Kr++]=In[ia]}function At(Ye,Yt,lr,Or,$r){for(var jr=1,Kr=lr+1;Kr<Yt.length;++Kr)jr*=Yt[Kr];var _n=Yt[lr];if(Yt.length-lr===4){var ti=Yt[lr+1],Zn=Yt[lr+2],In=Yt[lr+3];for(Kr=0;Kr<_n;++Kr)Ze(Ye[Kr],ti,Zn,In,Or,$r),$r+=jr}else for(Kr=0;Kr<_n;++Kr)At(Ye[Kr],Yt,lr+1,Or,$r),$r+=jr}function Se(Ye,Yt,lr,Or){var $r=1;if(Yt.length)for(var jr=0;jr<Yt.length;++jr)$r*=Yt[jr];else $r=0;var Kr=Or||N.allocType(lr,$r);switch(Yt.length){case 0:break;case 1:kt(Ye,Yt[0],Kr);break;case 2:Je(Ye,Yt[0],Yt[1],Kr);break;case 3:Ze(Ye,Yt[0],Yt[1],Yt[2],Kr,0);break;default:At(Ye,Yt,0,Kr,0)}return Kr}function pe(Ye){for(var Yt=[],lr=Ye;lr.length;lr=lr[0])Yt.push(lr.length);return Yt}var Te={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},it=5120,Dt=5122,Wt=5124,er=5121,qr=5123,Vr=5125,mr=5126,Fr=5126,nn={int8:it,int16:Dt,int32:Wt,uint8:er,uint16:qr,uint32:Vr,float:mr,float32:Fr},jn=35048,xn=35040,pn={dynamic:jn,stream:xn,static:35044},ki=gt.flatten,qn=gt.shape,bi=35044,Si=35040,nt=5121,ze=5126,ut=[];ut[5120]=1,ut[5122]=2,ut[5124]=4,ut[5121]=1,ut[5123]=2,ut[5125]=4,ut[5126]=4;function mt(Ye){return Te[Object.prototype.toString.call(Ye)]|0}function Ot(Ye,Yt){for(var lr=0;lr<Yt.length;++lr)Ye[lr]=Yt[lr]}function nr(Ye,Yt,lr,Or,$r,jr,Kr){for(var _n=0,ti=0;ti<lr;++ti)for(var Zn=0;Zn<Or;++Zn)Ye[_n++]=Yt[$r*ti+jr*Zn+Kr]}function yr(Ye,Yt,lr,Or){var $r=0,jr={};function Kr(Br){this.id=$r++,this.buffer=Ye.createBuffer(),this.type=Br,this.usage=bi,this.byteLength=0,this.dimension=1,this.dtype=nt,this.persistentData=null,lr.profile&&(this.stats={size:0})}Kr.prototype.bind=function(){Ye.bindBuffer(this.type,this.buffer)},Kr.prototype.destroy=function(){Gn(this)};var _n=[];function ti(Br,hn){var Yn=_n.pop();return Yn||(Yn=new Kr(Br)),Yn.bind(),ia(Yn,hn,Si,0,1,!1),Yn}function Zn(Br){_n.push(Br)}function In(Br,hn,Yn){Br.byteLength=hn.byteLength,Ye.bufferData(Br.type,hn,Yn)}function ia(Br,hn,Yn,Jn,Cn,mi){var ai;if(Br.usage=Yn,Array.isArray(hn)){if(Br.dtype=Jn||ze,hn.length>0){var $i;if(Array.isArray(hn[0])){ai=qn(hn);for(var Pn=1,Mn=1;Mn<ai.length;++Mn)Pn*=ai[Mn];Br.dimension=Pn,$i=ki(hn,ai,Br.dtype),In(Br,$i,Yn),mi?Br.persistentData=$i:N.freeType($i)}else if(typeof hn[0]=="number"){Br.dimension=Cn;var Ri=N.allocType(Br.dtype,hn.length);Ot(Ri,hn),In(Br,Ri,Yn),mi?Br.persistentData=Ri:N.freeType(Ri)}else ar(hn[0])&&(Br.dimension=hn[0].length,Br.dtype=Jn||mt(hn[0])||ze,$i=ki(hn,[hn.length,hn[0].length],Br.dtype),In(Br,$i,Yn),mi?Br.persistentData=$i:N.freeType($i))}}else if(ar(hn))Br.dtype=Jn||mt(hn),Br.dimension=Cn,In(Br,hn,Yn),mi&&(Br.persistentData=new Uint8Array(new Uint8Array(hn.buffer)));else if(cr(hn)){ai=hn.shape;var di=hn.stride,ni=hn.offset,Qn=0,Ei=0,na=0,Ea=0;ai.length===1?(Qn=ai[0],Ei=1,na=di[0],Ea=0):ai.length===2&&(Qn=ai[0],Ei=ai[1],na=di[0],Ea=di[1]),Br.dtype=Jn||mt(hn.data)||ze,Br.dimension=Ei;var pi=N.allocType(Br.dtype,Qn*Ei);nr(pi,hn.data,Qn,Ei,na,Ea,ni),In(Br,pi,Yn),mi?Br.persistentData=pi:N.freeType(pi)}else hn instanceof ArrayBuffer&&(Br.dtype=nt,Br.dimension=Cn,In(Br,hn,Yn),mi&&(Br.persistentData=new Uint8Array(new Uint8Array(hn))))}function Gn(Br){Yt.bufferCount--,Or(Br);var hn=Br.buffer;Ye.deleteBuffer(hn),Br.buffer=null,delete jr[Br.id]}function Vn(Br,hn,Yn,Jn){Yt.bufferCount++;var Cn=new Kr(hn);jr[Cn.id]=Cn;function mi(Pn){var Mn=bi,Ri=null,di=0,ni=0,Qn=1;return Array.isArray(Pn)||ar(Pn)||cr(Pn)||Pn instanceof ArrayBuffer?Ri=Pn:typeof Pn=="number"?di=Pn|0:Pn&&("data"in Pn&&(Ri=Pn.data),"usage"in Pn&&(Mn=pn[Pn.usage]),"type"in Pn&&(ni=nn[Pn.type]),"dimension"in Pn&&(Qn=Pn.dimension|0),"length"in Pn&&(di=Pn.length|0)),Cn.bind(),Ri?ia(Cn,Ri,Mn,ni,Qn,Jn):(di&&Ye.bufferData(Cn.type,di,Mn),Cn.dtype=ni||nt,Cn.usage=Mn,Cn.dimension=Qn,Cn.byteLength=di),lr.profile&&(Cn.stats.size=Cn.byteLength*ut[Cn.dtype]),mi}function ai(Pn,Mn){Ye.bufferSubData(Cn.type,Mn,Pn)}function $i(Pn,Mn){var Ri=(Mn||0)|0,di;if(Cn.bind(),ar(Pn)||Pn instanceof ArrayBuffer)ai(Pn,Ri);else if(Array.isArray(Pn)){if(Pn.length>0){if(typeof Pn[0]=="number"){var ni=N.allocType(Cn.dtype,Pn.length);Ot(ni,Pn),ai(ni,Ri),N.freeType(ni)}else if(Array.isArray(Pn[0])||ar(Pn[0])){di=qn(Pn);var Qn=ki(Pn,di,Cn.dtype);ai(Qn,Ri),N.freeType(Qn)}}}else if(cr(Pn)){di=Pn.shape;var Ei=Pn.stride,na=0,Ea=0,pi=0,Ui=0;di.length===1?(na=di[0],Ea=1,pi=Ei[0],Ui=0):di.length===2&&(na=di[0],Ea=di[1],pi=Ei[0],Ui=Ei[1]);var ha=Array.isArray(Pn.data)?Cn.dtype:mt(Pn.data),_a=N.allocType(ha,na*Ea);nr(_a,Pn.data,na,Ea,pi,Ui,Pn.offset),ai(_a,Ri),N.freeType(_a)}return mi}return Yn||mi(Br),mi._reglType="buffer",mi._buffer=Cn,mi.subdata=$i,lr.profile&&(mi.stats=Cn.stats),mi.destroy=function(){Gn(Cn)},mi}function bn(){It(jr).forEach(function(Br){Br.buffer=Ye.createBuffer(),Ye.bindBuffer(Br.type,Br.buffer),Ye.bufferData(Br.type,Br.persistentData||Br.byteLength,Br.usage)})}return lr.profile&&(Yt.getTotalBufferSize=function(){var Br=0;return Object.keys(jr).forEach(function(hn){Br+=jr[hn].stats.size}),Br}),{create:Vn,createStream:ti,destroyStream:Zn,clear:function(){It(jr).forEach(Gn),_n.forEach(Gn)},getBuffer:function(Br){return Br&&Br._buffer instanceof Kr?Br._buffer:null},restore:bn,_initBuffer:ia}}var vr=0,Rr=0,Gr=1,Yr=1,Xr=4,on=4,wn={points:vr,point:Rr,lines:Gr,line:Yr,triangles:Xr,triangle:on,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Vi=0,vi=1,Zi=4,Xi=5120,ta=5121,Ya=5122,Pi=5123,Bn=5124,Qi=5125,ya=34963,Nn=35040,je=35044;function Bt(Ye,Yt,lr,Or){var $r={},jr=0,Kr={uint8:ta,uint16:Pi};Yt.oes_element_index_uint&&(Kr.uint32=Qi);function _n(bn){this.id=jr++,$r[this.id]=this,this.buffer=bn,this.primType=Zi,this.vertCount=0,this.type=0}_n.prototype.bind=function(){this.buffer.bind()};var ti=[];function Zn(bn){var Br=ti.pop();return Br||(Br=new _n(lr.create(null,ya,!0,!1)._buffer)),ia(Br,bn,Nn,-1,-1,0,0),Br}function In(bn){ti.push(bn)}function ia(bn,Br,hn,Yn,Jn,Cn,mi){bn.buffer.bind();var ai;if(Br){var $i=mi;!mi&&(!ar(Br)||cr(Br)&&!ar(Br.data))&&($i=Yt.oes_element_index_uint?Qi:Pi),lr._initBuffer(bn.buffer,Br,hn,$i,3)}else Ye.bufferData(ya,Cn,hn),bn.buffer.dtype=ai||ta,bn.buffer.usage=hn,bn.buffer.dimension=3,bn.buffer.byteLength=Cn;if(ai=mi,!mi){switch(bn.buffer.dtype){case ta:case Xi:ai=ta;break;case Pi:case Ya:ai=Pi;break;case Qi:case Bn:ai=Qi;break;default:}bn.buffer.dtype=ai}bn.type=ai;var Pn=Jn;Pn<0&&(Pn=bn.buffer.byteLength,ai===Pi?Pn>>=1:ai===Qi&&(Pn>>=2)),bn.vertCount=Pn;var Mn=Yn;if(Yn<0){Mn=Zi;var Ri=bn.buffer.dimension;Ri===1&&(Mn=Vi),Ri===2&&(Mn=vi),Ri===3&&(Mn=Zi)}bn.primType=Mn}function Gn(bn){Or.elementsCount--,delete $r[bn.id],bn.buffer.destroy(),bn.buffer=null}function Vn(bn,Br){var hn=lr.create(null,ya,!0),Yn=new _n(hn._buffer);Or.elementsCount++;function Jn(Cn){if(!Cn)hn(),Yn.primType=Zi,Yn.vertCount=0,Yn.type=ta;else if(typeof Cn=="number")hn(Cn),Yn.primType=Zi,Yn.vertCount=Cn|0,Yn.type=ta;else{var mi=null,ai=je,$i=-1,Pn=-1,Mn=0,Ri=0;Array.isArray(Cn)||ar(Cn)||cr(Cn)?mi=Cn:("data"in Cn&&(mi=Cn.data),"usage"in Cn&&(ai=pn[Cn.usage]),"primitive"in Cn&&($i=wn[Cn.primitive]),"count"in Cn&&(Pn=Cn.count|0),"type"in Cn&&(Ri=Kr[Cn.type]),"length"in Cn?Mn=Cn.length|0:(Mn=Pn,Ri===Pi||Ri===Ya?Mn*=2:(Ri===Qi||Ri===Bn)&&(Mn*=4))),ia(Yn,mi,ai,$i,Pn,Mn,Ri)}return Jn}return Jn(bn),Jn._reglType="elements",Jn._elements=Yn,Jn.subdata=function(Cn,mi){return hn.subdata(Cn,mi),Jn},Jn.destroy=function(){Gn(Yn)},Jn}return{create:Vn,createStream:Zn,destroyStream:In,getElements:function(bn){return typeof bn=="function"&&bn._elements instanceof _n?bn._elements:null},clear:function(){It($r).forEach(Gn)}}}var ur=new Float32Array(1),br=new Uint32Array(ur.buffer),Jr=5123;function ln(Ye){for(var Yt=N.allocType(Jr,Ye.length),lr=0;lr<Ye.length;++lr)if(isNaN(Ye[lr]))Yt[lr]=65535;else if(Ye[lr]===1/0)Yt[lr]=31744;else if(Ye[lr]===-1/0)Yt[lr]=64512;else{ur[0]=Ye[lr];var Or=br[0],$r=Or>>>31<<15,jr=(Or<<1>>>24)-127,Kr=Or>>13&1023;if(jr<-24)Yt[lr]=$r;else if(jr<-14){var _n=-14-jr;Yt[lr]=$r+(Kr+1024>>_n)}else jr>15?Yt[lr]=$r+31744:Yt[lr]=$r+(jr+15<<10)+Kr}return Yt}function yn(Ye){return Array.isArray(Ye)||ar(Ye)}var Cr=34467,vn=3553,gi=34067,Wn=34069,zi=6408,fa=6406,to=6407,ma=6409,uo=6410,Ka=32854,jo=32855,Ho=36194,xs=32819,ss=32820,al=33635,so=34042,vs=6402,Co=34041,ds=35904,$o=35906,es=36193,Oa=33776,vo=33777,Al=33778,ru=33779,Vu=35986,ls=35987,dn=34798,wi=35840,sc=35841,Pl=35842,us=35843,dl=36196,ts=5121,Rl=5123,wu=5125,oi=5126,Aa=10242,Ca=10243,Fs=10497,If=33071,Ma=33648,Ff=10240,jc=10241,pl=9728,hf=9729,tl=9984,Lo=9985,nu=9986,Tu=9987,Sh=33170,Hu=4352,ov=4353,Sc=4354,fo=34046,qf=3317,Eh=37440,Us=37441,_s=37443,kh=37444,vf=33984,Mo=[tl,nu,Lo,Tu],ps=[0,ma,uo,to,zi],yo={};yo[ma]=yo[fa]=yo[vs]=1,yo[Co]=yo[uo]=2,yo[to]=yo[ds]=3,yo[zi]=yo[$o]=4;function Po(Ye){return"[object "+Ye+"]"}var Ec=Po("HTMLCanvasElement"),qs=Po("OffscreenCanvas"),Hl=Po("CanvasRenderingContext2D"),df=Po("ImageBitmap"),bd=Po("HTMLImageElement"),Au=Po("HTMLVideoElement"),Xp=Object.keys(Te).concat([Ec,qs,Hl,df,bd,Au]),Gl=[];Gl[ts]=1,Gl[oi]=4,Gl[es]=2,Gl[Rl]=2,Gl[wu]=4;var po=[];po[Ka]=2,po[jo]=2,po[Ho]=2,po[Co]=4,po[Oa]=.5,po[vo]=.5,po[Al]=1,po[ru]=1,po[Vu]=.5,po[ls]=1,po[dn]=1,po[wi]=.5,po[sc]=.25,po[Pl]=.5,po[us]=.25,po[dl]=.5;function zv(Ye){return Array.isArray(Ye)&&(Ye.length===0||typeof Ye[0]=="number")}function pf(Ye){if(!Array.isArray(Ye))return!1;var Yt=Ye.length;return!(Yt===0||!yn(Ye[0]))}function Yl(Ye){return Object.prototype.toString.call(Ye)}function sv(Ye){return Yl(Ye)===Ec}function Ch(Ye){return Yl(Ye)===qs}function lv(Ye){return Yl(Ye)===Hl}function Mu(Ye){return Yl(Ye)===df}function Ov(Ye){return Yl(Ye)===bd}function uv(Ye){return Yl(Ye)===Au}function Lh(Ye){if(!Ye)return!1;var Yt=Yl(Ye);return Xp.indexOf(Yt)>=0?!0:zv(Ye)||pf(Ye)||cr(Ye)}function fv(Ye){return Te[Object.prototype.toString.call(Ye)]|0}function wd(Ye,Yt){var lr=Yt.length;switch(Ye.type){case ts:case Rl:case wu:case oi:var Or=N.allocType(Ye.type,lr);Or.set(Yt),Ye.data=Or;break;case es:Ye.data=ln(Yt);break;default:}}function Zd(Ye,Yt){return N.allocType(Ye.type===es?oi:Ye.type,Yt)}function zf(Ye,Yt){Ye.type===es?(Ye.data=ln(Yt),N.freeType(Yt)):Ye.data=Yt}function Bv(Ye,Yt,lr,Or,$r,jr){for(var Kr=Ye.width,_n=Ye.height,ti=Ye.channels,Zn=Kr*_n*ti,In=Zd(Ye,Zn),ia=0,Gn=0;Gn<_n;++Gn)for(var Vn=0;Vn<Kr;++Vn)for(var bn=0;bn<ti;++bn)In[ia++]=Yt[lr*Vn+Or*Gn+$r*bn+jr];zf(Ye,In)}function lc(Ye,Yt,lr,Or,$r,jr){var Kr;if(typeof po[Ye]!="undefined"?Kr=po[Ye]:Kr=yo[Ye]*Gl[Yt],jr&&(Kr*=6),$r){for(var _n=0,ti=lr;ti>=1;)_n+=Kr*ti*ti,ti/=2;return _n}else return Kr*lr*Or}function Ph(Ye,Yt,lr,Or,$r,jr,Kr){var _n={"don't care":Hu,"dont care":Hu,nice:Sc,fast:ov},ti={repeat:Fs,clamp:If,mirror:Ma},Zn={nearest:pl,linear:hf},In=e({mipmap:Tu,"nearest mipmap nearest":tl,"linear mipmap nearest":Lo,"nearest mipmap linear":nu,"linear mipmap linear":Tu},Zn),ia={none:0,browser:kh},Gn={uint8:ts,rgba4:xs,rgb565:al,"rgb5 a1":ss},Vn={alpha:fa,luminance:ma,"luminance alpha":uo,rgb:to,rgba:zi,rgba4:Ka,"rgb5 a1":jo,rgb565:Ho},bn={};Yt.ext_srgb&&(Vn.srgb=ds,Vn.srgba=$o),Yt.oes_texture_float&&(Gn.float32=Gn.float=oi),Yt.oes_texture_half_float&&(Gn.float16=Gn["half float"]=es),Yt.webgl_depth_texture&&(e(Vn,{depth:vs,"depth stencil":Co}),e(Gn,{uint16:Rl,uint32:wu,"depth stencil":so})),Yt.webgl_compressed_texture_s3tc&&e(bn,{"rgb s3tc dxt1":Oa,"rgba s3tc dxt1":vo,"rgba s3tc dxt3":Al,"rgba s3tc dxt5":ru}),Yt.webgl_compressed_texture_atc&&e(bn,{"rgb atc":Vu,"rgba atc explicit alpha":ls,"rgba atc interpolated alpha":dn}),Yt.webgl_compressed_texture_pvrtc&&e(bn,{"rgb pvrtc 4bppv1":wi,"rgb pvrtc 2bppv1":sc,"rgba pvrtc 4bppv1":Pl,"rgba pvrtc 2bppv1":us}),Yt.webgl_compressed_texture_etc1&&(bn["rgb etc1"]=dl);var Br=Array.prototype.slice.call(Ye.getParameter(Cr));Object.keys(bn).forEach(function($){var ve=bn[$];Br.indexOf(ve)>=0&&(Vn[$]=ve)});var hn=Object.keys(Vn);lr.textureFormats=hn;var Yn=[];Object.keys(Vn).forEach(function($){var ve=Vn[$];Yn[ve]=$});var Jn=[];Object.keys(Gn).forEach(function($){var ve=Gn[$];Jn[ve]=$});var Cn=[];Object.keys(Zn).forEach(function($){var ve=Zn[$];Cn[ve]=$});var mi=[];Object.keys(In).forEach(function($){var ve=In[$];mi[ve]=$});var ai=[];Object.keys(ti).forEach(function($){var ve=ti[$];ai[ve]=$});var $i=hn.reduce(function($,ve){var Ee=Vn[ve];return Ee===ma||Ee===fa||Ee===ma||Ee===uo||Ee===vs||Ee===Co||Yt.ext_srgb&&(Ee===ds||Ee===$o)?$[Ee]=Ee:Ee===jo||ve.indexOf("rgba")>=0?$[Ee]=zi:$[Ee]=to,$},{});function Pn(){this.internalformat=zi,this.format=zi,this.type=ts,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=kh,this.width=0,this.height=0,this.channels=0}function Mn($,ve){$.internalformat=ve.internalformat,$.format=ve.format,$.type=ve.type,$.compressed=ve.compressed,$.premultiplyAlpha=ve.premultiplyAlpha,$.flipY=ve.flipY,$.unpackAlignment=ve.unpackAlignment,$.colorSpace=ve.colorSpace,$.width=ve.width,$.height=ve.height,$.channels=ve.channels}function Ri($,ve){if(!(typeof ve!="object"||!ve)){if("premultiplyAlpha"in ve&&($.premultiplyAlpha=ve.premultiplyAlpha),"flipY"in ve&&($.flipY=ve.flipY),"alignment"in ve&&($.unpackAlignment=ve.alignment),"colorSpace"in ve&&($.colorSpace=ia[ve.colorSpace]),"type"in ve){var Ee=ve.type;$.type=Gn[Ee]}var Oe=$.width,pt=$.height,wt=$.channels,yt=!1;"shape"in ve?(Oe=ve.shape[0],pt=ve.shape[1],ve.shape.length===3&&(wt=ve.shape[2],yt=!0)):("radius"in ve&&(Oe=pt=ve.radius),"width"in ve&&(Oe=ve.width),"height"in ve&&(pt=ve.height),"channels"in ve&&(wt=ve.channels,yt=!0)),$.width=Oe|0,$.height=pt|0,$.channels=wt|0;var Be=!1;if("format"in ve){var $e=ve.format,ft=$.internalformat=Vn[$e];$.format=$i[ft],$e in Gn&&("type"in ve||($.type=Gn[$e])),$e in bn&&($.compressed=!0),Be=!0}!yt&&Be?$.channels=yo[$.format]:yt&&!Be&&$.channels!==ps[$.format]&&($.format=$.internalformat=ps[$.channels])}}function di($){Ye.pixelStorei(Eh,$.flipY),Ye.pixelStorei(Us,$.premultiplyAlpha),Ye.pixelStorei(_s,$.colorSpace),Ye.pixelStorei(qf,$.unpackAlignment)}function ni(){Pn.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Qn($,ve){var Ee=null;if(Lh(ve)?Ee=ve:ve&&(Ri($,ve),"x"in ve&&($.xOffset=ve.x|0),"y"in ve&&($.yOffset=ve.y|0),Lh(ve.data)&&(Ee=ve.data)),ve.copy){var Oe=$r.viewportWidth,pt=$r.viewportHeight;$.width=$.width||Oe-$.xOffset,$.height=$.height||pt-$.yOffset,$.needsCopy=!0}else if(!Ee)$.width=$.width||1,$.height=$.height||1,$.channels=$.channels||4;else if(ar(Ee))$.channels=$.channels||4,$.data=Ee,!("type"in ve)&&$.type===ts&&($.type=fv(Ee));else if(zv(Ee))$.channels=$.channels||4,wd($,Ee),$.alignment=1,$.needsFree=!0;else if(cr(Ee)){var wt=Ee.data;!Array.isArray(wt)&&$.type===ts&&($.type=fv(wt));var yt=Ee.shape,Be=Ee.stride,$e,ft,Tt,Lt,Pt,jt;yt.length===3?(Tt=yt[2],jt=Be[2]):(Tt=1,jt=1),$e=yt[0],ft=yt[1],Lt=Be[0],Pt=Be[1],$.alignment=1,$.width=$e,$.height=ft,$.channels=Tt,$.format=$.internalformat=ps[Tt],$.needsFree=!0,Bv($,wt,Lt,Pt,jt,Ee.offset)}else if(sv(Ee)||Ch(Ee)||lv(Ee))sv(Ee)||Ch(Ee)?$.element=Ee:$.element=Ee.canvas,$.width=$.element.width,$.height=$.element.height,$.channels=4;else if(Mu(Ee))$.element=Ee,$.width=Ee.width,$.height=Ee.height,$.channels=4;else if(Ov(Ee))$.element=Ee,$.width=Ee.naturalWidth,$.height=Ee.naturalHeight,$.channels=4;else if(uv(Ee))$.element=Ee,$.width=Ee.videoWidth,$.height=Ee.videoHeight,$.channels=4;else if(pf(Ee)){var Nt=$.width||Ee[0].length,Ft=$.height||Ee.length,Kt=$.channels;yn(Ee[0][0])?Kt=Kt||Ee[0][0].length:Kt=Kt||1;for(var Ct=gt.shape(Ee),sr=1,xr=0;xr<Ct.length;++xr)sr*=Ct[xr];var Dr=Zd($,sr);gt.flatten(Ee,Ct,"",Dr),zf($,Dr),$.alignment=1,$.width=Nt,$.height=Ft,$.channels=Kt,$.format=$.internalformat=ps[Kt],$.needsFree=!0}$.type===oi||$.type}function Ei($,ve,Ee){var Oe=$.element,pt=$.data,wt=$.internalformat,yt=$.format,Be=$.type,$e=$.width,ft=$.height;di($),Oe?Ye.texImage2D(ve,Ee,yt,yt,Be,Oe):$.compressed?Ye.compressedTexImage2D(ve,Ee,wt,$e,ft,0,pt):$.needsCopy?(Or(),Ye.copyTexImage2D(ve,Ee,yt,$.xOffset,$.yOffset,$e,ft,0)):Ye.texImage2D(ve,Ee,yt,$e,ft,0,yt,Be,pt||null)}function na($,ve,Ee,Oe,pt){var wt=$.element,yt=$.data,Be=$.internalformat,$e=$.format,ft=$.type,Tt=$.width,Lt=$.height;di($),wt?Ye.texSubImage2D(ve,pt,Ee,Oe,$e,ft,wt):$.compressed?Ye.compressedTexSubImage2D(ve,pt,Ee,Oe,Be,Tt,Lt,yt):$.needsCopy?(Or(),Ye.copyTexSubImage2D(ve,pt,Ee,Oe,$.xOffset,$.yOffset,Tt,Lt)):Ye.texSubImage2D(ve,pt,Ee,Oe,Tt,Lt,$e,ft,yt)}var Ea=[];function pi(){return Ea.pop()||new ni}function Ui($){$.needsFree&&N.freeType($.data),ni.call($),Ea.push($)}function ha(){Pn.call(this),this.genMipmaps=!1,this.mipmapHint=Hu,this.mipmask=0,this.images=Array(16)}function _a($,ve,Ee){var Oe=$.images[0]=pi();$.mipmask=1,Oe.width=$.width=ve,Oe.height=$.height=Ee,Oe.channels=$.channels=4}function Xa($,ve){var Ee=null;if(Lh(ve))Ee=$.images[0]=pi(),Mn(Ee,$),Qn(Ee,ve),$.mipmask=1;else if(Ri($,ve),Array.isArray(ve.mipmap))for(var Oe=ve.mipmap,pt=0;pt<Oe.length;++pt)Ee=$.images[pt]=pi(),Mn(Ee,$),Ee.width>>=pt,Ee.height>>=pt,Qn(Ee,Oe[pt]),$.mipmask|=1<<pt;else Ee=$.images[0]=pi(),Mn(Ee,$),Qn(Ee,ve),$.mipmask=1;Mn($,$.images[0]),$.compressed&&($.internalformat===Oa||$.internalformat===vo||$.internalformat===Al||$.internalformat)}function Cs($,ve){for(var Ee=$.images,Oe=0;Oe<Ee.length;++Oe){if(!Ee[Oe])return;Ei(Ee[Oe],ve,Oe)}}var cu=[];function co(){var $=cu.pop()||new ha;Pn.call($),$.mipmask=0;for(var ve=0;ve<16;++ve)$.images[ve]=null;return $}function hu($){for(var ve=$.images,Ee=0;Ee<ve.length;++Ee)ve[Ee]&&Ui(ve[Ee]),ve[Ee]=null;cu.push($)}function ys(){this.minFilter=pl,this.magFilter=pl,this.wrapS=If,this.wrapT=If,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Hu}function Zl($,ve){if("min"in ve){var Ee=ve.min;$.minFilter=In[Ee],Mo.indexOf($.minFilter)>=0&&!("faces"in ve)&&($.genMipmaps=!0)}if("mag"in ve){var Oe=ve.mag;$.magFilter=Zn[Oe]}var pt=$.wrapS,wt=$.wrapT;if("wrap"in ve){var yt=ve.wrap;typeof yt=="string"?pt=wt=ti[yt]:Array.isArray(yt)&&(pt=ti[yt[0]],wt=ti[yt[1]])}else{if("wrapS"in ve){var Be=ve.wrapS;pt=ti[Be]}if("wrapT"in ve){var $e=ve.wrapT;wt=ti[$e]}}if($.wrapS=pt,$.wrapT=wt,"anisotropic"in ve){var ft=ve.anisotropic;$.anisotropic=ve.anisotropic}if("mipmap"in ve){var Tt=!1;switch(typeof ve.mipmap){case"string":$.mipmapHint=_n[ve.mipmap],$.genMipmaps=!0,Tt=!0;break;case"boolean":Tt=$.genMipmaps=ve.mipmap;break;case"object":$.genMipmaps=!1,Tt=!0;break;default:}Tt&&!("min"in ve)&&($.minFilter=tl)}}function Zf($,ve){Ye.texParameteri(ve,jc,$.minFilter),Ye.texParameteri(ve,Ff,$.magFilter),Ye.texParameteri(ve,Aa,$.wrapS),Ye.texParameteri(ve,Ca,$.wrapT),Yt.ext_texture_filter_anisotropic&&Ye.texParameteri(ve,fo,$.anisotropic),$.genMipmaps&&(Ye.hint(Sh,$.mipmapHint),Ye.generateMipmap(ve))}var hc=0,Ms={},jl=lr.maxTextureUnits,vu=Array(jl).map(function(){return null});function no($){Pn.call(this),this.mipmask=0,this.internalformat=zi,this.id=hc++,this.refCount=1,this.target=$,this.texture=Ye.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new ys,Kr.profile&&(this.stats={size:0})}function Lu($){Ye.activeTexture(vf),Ye.bindTexture($.target,$.texture)}function Qa(){var $=vu[0];$?Ye.bindTexture($.target,$.texture):Ye.bindTexture(vn,null)}function H($){var ve=$.texture,Ee=$.unit,Oe=$.target;Ee>=0&&(Ye.activeTexture(vf+Ee),Ye.bindTexture(Oe,null),vu[Ee]=null),Ye.deleteTexture(ve),$.texture=null,$.params=null,$.pixels=null,$.refCount=0,delete Ms[$.id],jr.textureCount--}e(no.prototype,{bind:function(){var $=this;$.bindCount+=1;var ve=$.unit;if(ve<0){for(var Ee=0;Ee<jl;++Ee){var Oe=vu[Ee];if(Oe){if(Oe.bindCount>0)continue;Oe.unit=-1}vu[Ee]=$,ve=Ee;break}ve>=jl,Kr.profile&&jr.maxTextureUnits<ve+1&&(jr.maxTextureUnits=ve+1),$.unit=ve,Ye.activeTexture(vf+ve),Ye.bindTexture($.target,$.texture)}return ve},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&H(this)}});function R($,ve){var Ee=new no(vn);Ms[Ee.id]=Ee,jr.textureCount++;function Oe(yt,Be){var $e=Ee.texInfo;ys.call($e);var ft=co();return typeof yt=="number"?typeof Be=="number"?_a(ft,yt|0,Be|0):_a(ft,yt|0,yt|0):yt?(Zl($e,yt),Xa(ft,yt)):_a(ft,1,1),$e.genMipmaps&&(ft.mipmask=(ft.width<<1)-1),Ee.mipmask=ft.mipmask,Mn(Ee,ft),Ee.internalformat=ft.internalformat,Oe.width=ft.width,Oe.height=ft.height,Lu(Ee),Cs(ft,vn),Zf($e,vn),Qa(),hu(ft),Kr.profile&&(Ee.stats.size=lc(Ee.internalformat,Ee.type,ft.width,ft.height,$e.genMipmaps,!1)),Oe.format=Yn[Ee.internalformat],Oe.type=Jn[Ee.type],Oe.mag=Cn[$e.magFilter],Oe.min=mi[$e.minFilter],Oe.wrapS=ai[$e.wrapS],Oe.wrapT=ai[$e.wrapT],Oe}function pt(yt,Be,$e,ft){var Tt=Be|0,Lt=$e|0,Pt=ft|0,jt=pi();return Mn(jt,Ee),jt.width=0,jt.height=0,Qn(jt,yt),jt.width=jt.width||(Ee.width>>Pt)-Tt,jt.height=jt.height||(Ee.height>>Pt)-Lt,Lu(Ee),na(jt,vn,Tt,Lt,Pt),Qa(),Ui(jt),Oe}function wt(yt,Be){var $e=yt|0,ft=Be|0||$e;if($e===Ee.width&&ft===Ee.height)return Oe;Oe.width=Ee.width=$e,Oe.height=Ee.height=ft,Lu(Ee);for(var Tt=0;Ee.mipmask>>Tt;++Tt){var Lt=$e>>Tt,Pt=ft>>Tt;if(!Lt||!Pt)break;Ye.texImage2D(vn,Tt,Ee.format,Lt,Pt,0,Ee.format,Ee.type,null)}return Qa(),Kr.profile&&(Ee.stats.size=lc(Ee.internalformat,Ee.type,$e,ft,!1,!1)),Oe}return Oe($,ve),Oe.subimage=pt,Oe.resize=wt,Oe._reglType="texture2d",Oe._texture=Ee,Kr.profile&&(Oe.stats=Ee.stats),Oe.destroy=function(){Ee.decRef()},Oe}function G($,ve,Ee,Oe,pt,wt){var yt=new no(gi);Ms[yt.id]=yt,jr.cubeCount++;var Be=new Array(6);function $e(Lt,Pt,jt,Nt,Ft,Kt){var Ct,sr=yt.texInfo;for(ys.call(sr),Ct=0;Ct<6;++Ct)Be[Ct]=co();if(typeof Lt=="number"||!Lt){var xr=Lt|0||1;for(Ct=0;Ct<6;++Ct)_a(Be[Ct],xr,xr)}else if(typeof Lt=="object")if(Pt)Xa(Be[0],Lt),Xa(Be[1],Pt),Xa(Be[2],jt),Xa(Be[3],Nt),Xa(Be[4],Ft),Xa(Be[5],Kt);else if(Zl(sr,Lt),Ri(yt,Lt),"faces"in Lt){var Dr=Lt.faces;for(Ct=0;Ct<6;++Ct)Mn(Be[Ct],yt),Xa(Be[Ct],Dr[Ct])}else for(Ct=0;Ct<6;++Ct)Xa(Be[Ct],Lt);for(Mn(yt,Be[0]),sr.genMipmaps?yt.mipmask=(Be[0].width<<1)-1:yt.mipmask=Be[0].mipmask,yt.internalformat=Be[0].internalformat,$e.width=Be[0].width,$e.height=Be[0].height,Lu(yt),Ct=0;Ct<6;++Ct)Cs(Be[Ct],Wn+Ct);for(Zf(sr,gi),Qa(),Kr.profile&&(yt.stats.size=lc(yt.internalformat,yt.type,$e.width,$e.height,sr.genMipmaps,!0)),$e.format=Yn[yt.internalformat],$e.type=Jn[yt.type],$e.mag=Cn[sr.magFilter],$e.min=mi[sr.minFilter],$e.wrapS=ai[sr.wrapS],$e.wrapT=ai[sr.wrapT],Ct=0;Ct<6;++Ct)hu(Be[Ct]);return $e}function ft(Lt,Pt,jt,Nt,Ft){var Kt=jt|0,Ct=Nt|0,sr=Ft|0,xr=pi();return Mn(xr,yt),xr.width=0,xr.height=0,Qn(xr,Pt),xr.width=xr.width||(yt.width>>sr)-Kt,xr.height=xr.height||(yt.height>>sr)-Ct,Lu(yt),na(xr,Wn+Lt,Kt,Ct,sr),Qa(),Ui(xr),$e}function Tt(Lt){var Pt=Lt|0;if(Pt!==yt.width){$e.width=yt.width=Pt,$e.height=yt.height=Pt,Lu(yt);for(var jt=0;jt<6;++jt)for(var Nt=0;yt.mipmask>>Nt;++Nt)Ye.texImage2D(Wn+jt,Nt,yt.format,Pt>>Nt,Pt>>Nt,0,yt.format,yt.type,null);return Qa(),Kr.profile&&(yt.stats.size=lc(yt.internalformat,yt.type,$e.width,$e.height,!1,!0)),$e}}return $e($,ve,Ee,Oe,pt,wt),$e.subimage=ft,$e.resize=Tt,$e._reglType="textureCube",$e._texture=yt,Kr.profile&&($e.stats=yt.stats),$e.destroy=function(){yt.decRef()},$e}function I(){for(var $=0;$<jl;++$)Ye.activeTexture(vf+$),Ye.bindTexture(vn,null),vu[$]=null;It(Ms).forEach(H),jr.cubeCount=0,jr.textureCount=0}Kr.profile&&(jr.getTotalTextureSize=function(){var $=0;return Object.keys(Ms).forEach(function(ve){$+=Ms[ve].stats.size}),$});function W(){for(var $=0;$<jl;++$){var ve=vu[$];ve&&(ve.bindCount=0,ve.unit=-1,vu[$]=null)}It(Ms).forEach(function(Ee){Ee.texture=Ye.createTexture(),Ye.bindTexture(Ee.target,Ee.texture);for(var Oe=0;Oe<32;++Oe)if(Ee.mipmask&1<<Oe)if(Ee.target===vn)Ye.texImage2D(vn,Oe,Ee.internalformat,Ee.width>>Oe,Ee.height>>Oe,0,Ee.internalformat,Ee.type,null);else for(var pt=0;pt<6;++pt)Ye.texImage2D(Wn+pt,Oe,Ee.internalformat,Ee.width>>Oe,Ee.height>>Oe,0,Ee.internalformat,Ee.type,null);Zf(Ee.texInfo,Ee.target)})}function re(){for(var $=0;$<jl;++$){var ve=vu[$];ve&&(ve.bindCount=0,ve.unit=-1,vu[$]=null),Ye.activeTexture(vf+$),Ye.bindTexture(vn,null),Ye.bindTexture(gi,null)}}return{create2D:R,createCube:G,clear:I,getTexture:function($){return null},restore:W,refresh:re}}var Gu=36161,kc=32854,Of=32855,Nv=36194,Uv=33189,Vv=36168,cv=34041,hv=35907,Hv=34836,iu=34842,vv=34843,ol=[];ol[kc]=2,ol[Of]=2,ol[Nv]=2,ol[Uv]=2,ol[Vv]=1,ol[cv]=4,ol[hv]=4,ol[Hv]=16,ol[iu]=8,ol[vv]=6;function au(Ye,Yt,lr){return ol[Ye]*Yt*lr}var Bf=function(Ye,Yt,lr,Or,$r){var jr={rgba4:kc,rgb565:Nv,"rgb5 a1":Of,depth:Uv,stencil:Vv,"depth stencil":cv};Yt.ext_srgb&&(jr.srgba=hv),Yt.ext_color_buffer_half_float&&(jr.rgba16f=iu,jr.rgb16f=vv),Yt.webgl_color_buffer_float&&(jr.rgba32f=Hv);var Kr=[];Object.keys(jr).forEach(function(Vn){var bn=jr[Vn];Kr[bn]=Vn});var _n=0,ti={};function Zn(Vn){this.id=_n++,this.refCount=1,this.renderbuffer=Vn,this.format=kc,this.width=0,this.height=0,$r.profile&&(this.stats={size:0})}Zn.prototype.decRef=function(){--this.refCount<=0&&In(this)};function In(Vn){var bn=Vn.renderbuffer;Ye.bindRenderbuffer(Gu,null),Ye.deleteRenderbuffer(bn),Vn.renderbuffer=null,Vn.refCount=0,delete ti[Vn.id],Or.renderbufferCount--}function ia(Vn,bn){var Br=new Zn(Ye.createRenderbuffer());ti[Br.id]=Br,Or.renderbufferCount++;function hn(Jn,Cn){var mi=0,ai=0,$i=kc;if(typeof Jn=="object"&&Jn){var Pn=Jn;if("shape"in Pn){var Mn=Pn.shape;mi=Mn[0]|0,ai=Mn[1]|0}else"radius"in Pn&&(mi=ai=Pn.radius|0),"width"in Pn&&(mi=Pn.width|0),"height"in Pn&&(ai=Pn.height|0);"format"in Pn&&($i=jr[Pn.format])}else typeof Jn=="number"?(mi=Jn|0,typeof Cn=="number"?ai=Cn|0:ai=mi):Jn||(mi=ai=1);if(!(mi===Br.width&&ai===Br.height&&$i===Br.format))return hn.width=Br.width=mi,hn.height=Br.height=ai,Br.format=$i,Ye.bindRenderbuffer(Gu,Br.renderbuffer),Ye.renderbufferStorage(Gu,$i,mi,ai),$r.profile&&(Br.stats.size=au(Br.format,Br.width,Br.height)),hn.format=Kr[Br.format],hn}function Yn(Jn,Cn){var mi=Jn|0,ai=Cn|0||mi;return mi===Br.width&&ai===Br.height||(hn.width=Br.width=mi,hn.height=Br.height=ai,Ye.bindRenderbuffer(Gu,Br.renderbuffer),Ye.renderbufferStorage(Gu,Br.format,mi,ai),$r.profile&&(Br.stats.size=au(Br.format,Br.width,Br.height))),hn}return hn(Vn,bn),hn.resize=Yn,hn._reglType="renderbuffer",hn._renderbuffer=Br,$r.profile&&(hn.stats=Br.stats),hn.destroy=function(){Br.decRef()},hn}$r.profile&&(Or.getTotalRenderbufferSize=function(){var Vn=0;return Object.keys(ti).forEach(function(bn){Vn+=ti[bn].stats.size}),Vn});function Gn(){It(ti).forEach(function(Vn){Vn.renderbuffer=Ye.createRenderbuffer(),Ye.bindRenderbuffer(Gu,Vn.renderbuffer),Ye.renderbufferStorage(Gu,Vn.format,Vn.width,Vn.height)}),Ye.bindRenderbuffer(Gu,null)}return{create:ia,clear:function(){It(ti).forEach(In)},restore:Gn}},Vs=36160,Kc=36161,Nf=3553,Dl=34069,zs=36064,jd=36096,Kd=36128,Su=33306,gf=36053,ou=36193,Jd=5121,Jc=5126,Qc=6407,Eu=6408,Gv=[];Gv[Eu]=4,Gv[Qc]=3;var dv=[];dv[Jd]=1,dv[Jc]=4,dv[ou]=2;function pv(Ye,Yt,lr,Or,$r,jr){var Kr={cur:null,next:null,dirty:!1,setFBO:null},_n=["rgba"],ti=["rgba4","rgb565","rgb5 a1"];Yt.ext_srgb&&ti.push("srgba"),Yt.ext_color_buffer_half_float&&ti.push("rgba16f","rgb16f"),Yt.webgl_color_buffer_float&&ti.push("rgba32f");var Zn=["uint8"];Yt.oes_texture_half_float&&Zn.push("half float","float16"),Yt.oes_texture_float&&Zn.push("float","float32");function In(ni,Qn,Ei){this.target=ni,this.texture=Qn,this.renderbuffer=Ei;var na=0,Ea=0;Qn?(na=Qn.width,Ea=Qn.height):Ei&&(na=Ei.width,Ea=Ei.height),this.width=na,this.height=Ea}function ia(ni){ni&&(ni.texture&&ni.texture._texture.decRef(),ni.renderbuffer&&ni.renderbuffer._renderbuffer.decRef())}function Gn(ni,Qn,Ei){if(ni)if(ni.texture){var na=ni.texture._texture,Ea=Math.max(1,na.width),pi=Math.max(1,na.height);na.refCount+=1}else{var Ui=ni.renderbuffer._renderbuffer;Ui.refCount+=1}}function Vn(ni,Qn){Qn&&(Qn.texture?Ye.framebufferTexture2D(Vs,ni,Qn.target,Qn.texture._texture.texture,0):Ye.framebufferRenderbuffer(Vs,ni,Kc,Qn.renderbuffer._renderbuffer.renderbuffer))}function bn(ni){var Qn=Nf,Ei=null,na=null,Ea=ni;typeof ni=="object"&&(Ea=ni.data,"target"in ni&&(Qn=ni.target|0));var pi=Ea._reglType;return pi==="texture2d"||pi==="textureCube"?Ei=Ea:pi==="renderbuffer"&&(na=Ea,Qn=Kc),new In(Qn,Ei,na)}function Br(ni,Qn,Ei,na,Ea){if(Ei){var pi=Or.create2D({width:ni,height:Qn,format:na,type:Ea});return pi._texture.refCount=0,new In(Nf,pi,null)}else{var Ui=$r.create({width:ni,height:Qn,format:na});return Ui._renderbuffer.refCount=0,new In(Kc,null,Ui)}}function hn(ni){return ni&&(ni.texture||ni.renderbuffer)}function Yn(ni,Qn,Ei){ni&&(ni.texture?ni.texture.resize(Qn,Ei):ni.renderbuffer&&ni.renderbuffer.resize(Qn,Ei),ni.width=Qn,ni.height=Ei)}var Jn=0,Cn={};function mi(){this.id=Jn++,Cn[this.id]=this,this.framebuffer=Ye.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function ai(ni){ni.colorAttachments.forEach(ia),ia(ni.depthAttachment),ia(ni.stencilAttachment),ia(ni.depthStencilAttachment)}function $i(ni){var Qn=ni.framebuffer;Ye.deleteFramebuffer(Qn),ni.framebuffer=null,jr.framebufferCount--,delete Cn[ni.id]}function Pn(ni){var Qn;Ye.bindFramebuffer(Vs,ni.framebuffer);var Ei=ni.colorAttachments;for(Qn=0;Qn<Ei.length;++Qn)Vn(zs+Qn,Ei[Qn]);for(Qn=Ei.length;Qn<lr.maxColorAttachments;++Qn)Ye.framebufferTexture2D(Vs,zs+Qn,Nf,null,0);Ye.framebufferTexture2D(Vs,Su,Nf,null,0),Ye.framebufferTexture2D(Vs,jd,Nf,null,0),Ye.framebufferTexture2D(Vs,Kd,Nf,null,0),Vn(jd,ni.depthAttachment),Vn(Kd,ni.stencilAttachment),Vn(Su,ni.depthStencilAttachment);var na=Ye.checkFramebufferStatus(Vs);Ye.isContextLost(),Ye.bindFramebuffer(Vs,Kr.next?Kr.next.framebuffer:null),Kr.cur=Kr.next,Ye.getError()}function Mn(ni,Qn){var Ei=new mi;jr.framebufferCount++;function na(pi,Ui){var ha,_a=0,Xa=0,Cs=!0,cu=!0,co=null,hu=!0,ys="rgba",Zl="uint8",Zf=1,hc=null,Ms=null,jl=null,vu=!1;if(typeof pi=="number")_a=pi|0,Xa=Ui|0||_a;else if(!pi)_a=Xa=1;else{var no=pi;if("shape"in no){var Lu=no.shape;_a=Lu[0],Xa=Lu[1]}else"radius"in no&&(_a=Xa=no.radius),"width"in no&&(_a=no.width),"height"in no&&(Xa=no.height);("color"in no||"colors"in no)&&(co=no.color||no.colors,Array.isArray(co)),co||("colorCount"in no&&(Zf=no.colorCount|0),"colorTexture"in no&&(hu=!!no.colorTexture,ys="rgba4"),"colorType"in no&&(Zl=no.colorType,hu||(Zl==="half float"||Zl==="float16"?ys="rgba16f":(Zl==="float"||Zl==="float32")&&(ys="rgba32f"))),"colorFormat"in no&&(ys=no.colorFormat,_n.indexOf(ys)>=0?hu=!0:ti.indexOf(ys)>=0&&(hu=!1))),("depthTexture"in no||"depthStencilTexture"in no)&&(vu=!!(no.depthTexture||no.depthStencilTexture)),"depth"in no&&(typeof no.depth=="boolean"?Cs=no.depth:(hc=no.depth,cu=!1)),"stencil"in no&&(typeof no.stencil=="boolean"?cu=no.stencil:(Ms=no.stencil,Cs=!1)),"depthStencil"in no&&(typeof no.depthStencil=="boolean"?Cs=cu=no.depthStencil:(jl=no.depthStencil,Cs=!1,cu=!1))}var Qa=null,H=null,R=null,G=null;if(Array.isArray(co))Qa=co.map(bn);else if(co)Qa=[bn(co)];else for(Qa=new Array(Zf),ha=0;ha<Zf;++ha)Qa[ha]=Br(_a,Xa,hu,ys,Zl);_a=_a||Qa[0].width,Xa=Xa||Qa[0].height,hc?H=bn(hc):Cs&&!cu&&(H=Br(_a,Xa,vu,"depth","uint32")),Ms?R=bn(Ms):cu&&!Cs&&(R=Br(_a,Xa,!1,"stencil","uint8")),jl?G=bn(jl):!hc&&!Ms&&cu&&Cs&&(G=Br(_a,Xa,vu,"depth stencil","depth stencil"));var I=null;for(ha=0;ha<Qa.length;++ha)if(Gn(Qa[ha],_a,Xa),Qa[ha]&&Qa[ha].texture){var W=Gv[Qa[ha].texture._texture.format]*dv[Qa[ha].texture._texture.type];I===null&&(I=W)}return Gn(H,_a,Xa),Gn(R,_a,Xa),Gn(G,_a,Xa),ai(Ei),Ei.width=_a,Ei.height=Xa,Ei.colorAttachments=Qa,Ei.depthAttachment=H,Ei.stencilAttachment=R,Ei.depthStencilAttachment=G,na.color=Qa.map(hn),na.depth=hn(H),na.stencil=hn(R),na.depthStencil=hn(G),na.width=Ei.width,na.height=Ei.height,Pn(Ei),na}function Ea(pi,Ui){var ha=Math.max(pi|0,1),_a=Math.max(Ui|0||ha,1);if(ha===Ei.width&&_a===Ei.height)return na;for(var Xa=Ei.colorAttachments,Cs=0;Cs<Xa.length;++Cs)Yn(Xa[Cs],ha,_a);return Yn(Ei.depthAttachment,ha,_a),Yn(Ei.stencilAttachment,ha,_a),Yn(Ei.depthStencilAttachment,ha,_a),Ei.width=na.width=ha,Ei.height=na.height=_a,Pn(Ei),na}return na(ni,Qn),e(na,{resize:Ea,_reglType:"framebuffer",_framebuffer:Ei,destroy:function(){$i(Ei),ai(Ei)},use:function(pi){Kr.setFBO({framebuffer:na},pi)}})}function Ri(ni){var Qn=Array(6);function Ei(Ea){var pi,Ui={color:null},ha=0,_a=null,Xa="rgba",Cs="uint8",cu=1;if(typeof Ea=="number")ha=Ea|0;else if(!Ea)ha=1;else{var co=Ea;if("shape"in co){var hu=co.shape;ha=hu[0]}else"radius"in co&&(ha=co.radius|0),"width"in co?(ha=co.width|0,"height"in co):"height"in co&&(ha=co.height|0);("color"in co||"colors"in co)&&(_a=co.color||co.colors,Array.isArray(_a)),_a||("colorCount"in co&&(cu=co.colorCount|0),"colorType"in co&&(Cs=co.colorType),"colorFormat"in co&&(Xa=co.colorFormat)),"depth"in co&&(Ui.depth=co.depth),"stencil"in co&&(Ui.stencil=co.stencil),"depthStencil"in co&&(Ui.depthStencil=co.depthStencil)}var ys;if(_a)if(Array.isArray(_a))for(ys=[],pi=0;pi<_a.length;++pi)ys[pi]=_a[pi];else ys=[_a];else{ys=Array(cu);var Zl={radius:ha,format:Xa,type:Cs};for(pi=0;pi<cu;++pi)ys[pi]=Or.createCube(Zl)}for(Ui.color=Array(ys.length),pi=0;pi<ys.length;++pi){var Zf=ys[pi];ha=ha||Zf.width,Ui.color[pi]={target:Dl,data:ys[pi]}}for(pi=0;pi<6;++pi){for(var hc=0;hc<ys.length;++hc)Ui.color[hc].target=Dl+pi;pi>0&&(Ui.depth=Qn[0].depth,Ui.stencil=Qn[0].stencil,Ui.depthStencil=Qn[0].depthStencil),Qn[pi]?Qn[pi](Ui):Qn[pi]=Mn(Ui)}return e(Ei,{width:ha,height:ha,color:ys})}function na(Ea){var pi,Ui=Ea|0;if(Ui===Ei.width)return Ei;var ha=Ei.color;for(pi=0;pi<ha.length;++pi)ha[pi].resize(Ui);for(pi=0;pi<6;++pi)Qn[pi].resize(Ui);return Ei.width=Ei.height=Ui,Ei}return Ei(ni),e(Ei,{faces:Qn,resize:na,_reglType:"framebufferCube",destroy:function(){Qn.forEach(function(Ea){Ea.destroy()})}})}function di(){Kr.cur=null,Kr.next=null,Kr.dirty=!0,It(Cn).forEach(function(ni){ni.framebuffer=Ye.createFramebuffer(),Pn(ni)})}return e(Kr,{getFramebuffer:function(ni){if(typeof ni=="function"&&ni._reglType==="framebuffer"){var Qn=ni._framebuffer;if(Qn instanceof mi)return Qn}return null},create:Mn,createCube:Ri,clear:function(){It(Cn).forEach($i)},restore:di})}var Yv=5126,$c=34962,Uf=34963;function Cc(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Yv,this.offset=0,this.stride=0,this.divisor=0}function Rh(Ye,Yt,lr,Or,$r,jr,Kr){for(var _n=lr.maxAttributes,ti=new Array(_n),Zn=0;Zn<_n;++Zn)ti[Zn]=new Cc;var In=0,ia={},Gn={Record:Cc,scope:{},state:ti,currentVAO:null,targetVAO:null,restore:bn()?ai:function(){},createVAO:$i,getVAO:hn,destroyBuffer:Vn,setVAO:bn()?Yn:Jn,clear:bn()?Cn:function(){}};function Vn(Pn){for(var Mn=0;Mn<ti.length;++Mn){var Ri=ti[Mn];Ri.buffer===Pn&&(Ye.disableVertexAttribArray(Mn),Ri.buffer=null)}}function bn(){return Yt.oes_vertex_array_object}function Br(){return Yt.angle_instanced_arrays}function hn(Pn){return typeof Pn=="function"&&Pn._vao?Pn._vao:null}function Yn(Pn){if(Pn!==Gn.currentVAO){var Mn=bn();Pn?Mn.bindVertexArrayOES(Pn.vao):Mn.bindVertexArrayOES(null),Gn.currentVAO=Pn}}function Jn(Pn){if(Pn!==Gn.currentVAO){if(Pn)Pn.bindAttrs();else{for(var Mn=Br(),Ri=0;Ri<ti.length;++Ri){var di=ti[Ri];di.buffer?(Ye.enableVertexAttribArray(Ri),di.buffer.bind(),Ye.vertexAttribPointer(Ri,di.size,di.type,di.normalized,di.stride,di.offfset),Mn&&di.divisor&&Mn.vertexAttribDivisorANGLE(Ri,di.divisor)):(Ye.disableVertexAttribArray(Ri),Ye.vertexAttrib4f(Ri,di.x,di.y,di.z,di.w))}Kr.elements?Ye.bindBuffer(Uf,Kr.elements.buffer.buffer):Ye.bindBuffer(Uf,null)}Gn.currentVAO=Pn}}function Cn(){It(ia).forEach(function(Pn){Pn.destroy()})}function mi(){this.id=++In,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var Pn=bn();Pn?this.vao=Pn.createVertexArrayOES():this.vao=null,ia[this.id]=this,this.buffers=[]}mi.prototype.bindAttrs=function(){for(var Pn=Br(),Mn=this.attributes,Ri=0;Ri<Mn.length;++Ri){var di=Mn[Ri];di.buffer?(Ye.enableVertexAttribArray(Ri),Ye.bindBuffer($c,di.buffer.buffer),Ye.vertexAttribPointer(Ri,di.size,di.type,di.normalized,di.stride,di.offset),Pn&&di.divisor&&Pn.vertexAttribDivisorANGLE(Ri,di.divisor)):(Ye.disableVertexAttribArray(Ri),Ye.vertexAttrib4f(Ri,di.x,di.y,di.z,di.w))}for(var ni=Mn.length;ni<_n;++ni)Ye.disableVertexAttribArray(ni);var Qn=jr.getElements(this.elements);Qn?Ye.bindBuffer(Uf,Qn.buffer.buffer):Ye.bindBuffer(Uf,null)},mi.prototype.refresh=function(){var Pn=bn();Pn&&(Pn.bindVertexArrayOES(this.vao),this.bindAttrs(),Gn.currentVAO=null,Pn.bindVertexArrayOES(null))},mi.prototype.destroy=function(){if(this.vao){var Pn=bn();this===Gn.currentVAO&&(Gn.currentVAO=null,Pn.bindVertexArrayOES(null)),Pn.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ia[this.id]&&(delete ia[this.id],Or.vaoCount-=1)};function ai(){var Pn=bn();Pn&&It(ia).forEach(function(Mn){Mn.refresh()})}function $i(Pn){var Mn=new mi;Or.vaoCount+=1;function Ri(di){var ni;if(Array.isArray(di))ni=di,Mn.elements&&Mn.ownsElements&&Mn.elements.destroy(),Mn.elements=null,Mn.ownsElements=!1,Mn.offset=0,Mn.count=0,Mn.instances=-1,Mn.primitive=4;else{if(di.elements){var Qn=di.elements;Mn.ownsElements?typeof Qn=="function"&&Qn._reglType==="elements"?(Mn.elements.destroy(),Mn.ownsElements=!1):(Mn.elements(Qn),Mn.ownsElements=!1):jr.getElements(di.elements)?(Mn.elements=di.elements,Mn.ownsElements=!1):(Mn.elements=jr.create(di.elements),Mn.ownsElements=!0)}else Mn.elements=null,Mn.ownsElements=!1;ni=di.attributes,Mn.offset=0,Mn.count=-1,Mn.instances=-1,Mn.primitive=4,Mn.elements&&(Mn.count=Mn.elements._elements.vertCount,Mn.primitive=Mn.elements._elements.primType),"offset"in di&&(Mn.offset=di.offset|0),"count"in di&&(Mn.count=di.count|0),"instances"in di&&(Mn.instances=di.instances|0),"primitive"in di&&(Mn.primitive=wn[di.primitive])}var Ei={},na=Mn.attributes;na.length=ni.length;for(var Ea=0;Ea<ni.length;++Ea){var pi=ni[Ea],Ui=na[Ea]=new Cc,ha=pi.data||pi;if(Array.isArray(ha)||ar(ha)||cr(ha)){var _a;Mn.buffers[Ea]&&(_a=Mn.buffers[Ea],ar(ha)&&_a._buffer.byteLength>=ha.byteLength?_a.subdata(ha):(_a.destroy(),Mn.buffers[Ea]=null)),Mn.buffers[Ea]||(_a=Mn.buffers[Ea]=$r.create(pi,$c,!1,!0)),Ui.buffer=$r.getBuffer(_a),Ui.size=Ui.buffer.dimension|0,Ui.normalized=!1,Ui.type=Ui.buffer.dtype,Ui.offset=0,Ui.stride=0,Ui.divisor=0,Ui.state=1,Ei[Ea]=1}else $r.getBuffer(pi)?(Ui.buffer=$r.getBuffer(pi),Ui.size=Ui.buffer.dimension|0,Ui.normalized=!1,Ui.type=Ui.buffer.dtype,Ui.offset=0,Ui.stride=0,Ui.divisor=0,Ui.state=1):$r.getBuffer(pi.buffer)?(Ui.buffer=$r.getBuffer(pi.buffer),Ui.size=(+pi.size||Ui.buffer.dimension)|0,Ui.normalized=!!pi.normalized||!1,"type"in pi?Ui.type=nn[pi.type]:Ui.type=Ui.buffer.dtype,Ui.offset=(pi.offset||0)|0,Ui.stride=(pi.stride||0)|0,Ui.divisor=(pi.divisor||0)|0,Ui.state=1):"x"in pi&&(Ui.x=+pi.x||0,Ui.y=+pi.y||0,Ui.z=+pi.z||0,Ui.w=+pi.w||0,Ui.state=2)}for(var Xa=0;Xa<Mn.buffers.length;++Xa)!Ei[Xa]&&Mn.buffers[Xa]&&(Mn.buffers[Xa].destroy(),Mn.buffers[Xa]=null);return Mn.refresh(),Ri}return Ri.destroy=function(){for(var di=0;di<Mn.buffers.length;++di)Mn.buffers[di]&&Mn.buffers[di].destroy();Mn.buffers.length=0,Mn.ownsElements&&(Mn.elements.destroy(),Mn.elements=null,Mn.ownsElements=!1),Mn.destroy()},Ri._vao=Mn,Ri._reglType="vao",Ri(Pn)}return Gn}var Td=35632,No=35633,eh=35718,Lc=35721;function Pc(Ye,Yt,lr,Or){var $r={},jr={};function Kr(Br,hn,Yn,Jn){this.name=Br,this.id=hn,this.location=Yn,this.info=Jn}function _n(Br,hn){for(var Yn=0;Yn<Br.length;++Yn)if(Br[Yn].id===hn.id){Br[Yn].location=hn.location;return}Br.push(hn)}function ti(Br,hn,Yn){var Jn=Br===Td?$r:jr,Cn=Jn[hn];if(!Cn){var mi=Yt.str(hn);Cn=Ye.createShader(Br),Ye.shaderSource(Cn,mi),Ye.compileShader(Cn),Jn[hn]=Cn}return Cn}var Zn={},In=[],ia=0;function Gn(Br,hn){this.id=ia++,this.fragId=Br,this.vertId=hn,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Or.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Vn(Br,hn,Yn){var Jn,Cn,mi=ti(Td,Br.fragId),ai=ti(No,Br.vertId),$i=Br.program=Ye.createProgram();if(Ye.attachShader($i,mi),Ye.attachShader($i,ai),Yn)for(Jn=0;Jn<Yn.length;++Jn){var Pn=Yn[Jn];Ye.bindAttribLocation($i,Pn[0],Pn[1])}Ye.linkProgram($i);var Mn=Ye.getProgramParameter($i,eh);Or.profile&&(Br.stats.uniformsCount=Mn);var Ri=Br.uniforms;for(Jn=0;Jn<Mn;++Jn)if(Cn=Ye.getActiveUniform($i,Jn),Cn)if(Cn.size>1)for(var di=0;di<Cn.size;++di){var ni=Cn.name.replace("[0]","["+di+"]");_n(Ri,new Kr(ni,Yt.id(ni),Ye.getUniformLocation($i,ni),Cn))}else _n(Ri,new Kr(Cn.name,Yt.id(Cn.name),Ye.getUniformLocation($i,Cn.name),Cn));var Qn=Ye.getProgramParameter($i,Lc);Or.profile&&(Br.stats.attributesCount=Qn);var Ei=Br.attributes;for(Jn=0;Jn<Qn;++Jn)Cn=Ye.getActiveAttrib($i,Jn),Cn&&_n(Ei,new Kr(Cn.name,Yt.id(Cn.name),Ye.getAttribLocation($i,Cn.name),Cn))}Or.profile&&(lr.getMaxUniformsCount=function(){var Br=0;return In.forEach(function(hn){hn.stats.uniformsCount>Br&&(Br=hn.stats.uniformsCount)}),Br},lr.getMaxAttributesCount=function(){var Br=0;return In.forEach(function(hn){hn.stats.attributesCount>Br&&(Br=hn.stats.attributesCount)}),Br});function bn(){$r={},jr={};for(var Br=0;Br<In.length;++Br)Vn(In[Br],null,In[Br].attributes.map(function(hn){return[hn.location,hn.name]}))}return{clear:function(){var Br=Ye.deleteShader.bind(Ye);It($r).forEach(Br),$r={},It(jr).forEach(Br),jr={},In.forEach(function(hn){Ye.deleteProgram(hn.program)}),In.length=0,Zn={},lr.shaderCount=0},program:function(Br,hn,Yn,Jn){var Cn=Zn[hn];Cn||(Cn=Zn[hn]={});var mi=Cn[Br];if(mi&&(mi.refCount++,!Jn))return mi;var ai=new Gn(hn,Br);return lr.shaderCount++,Vn(ai,Yn,Jn),mi||(Cn[Br]=ai),In.push(ai),e(ai,{destroy:function(){if(ai.refCount--,ai.refCount<=0){Ye.deleteProgram(ai.program);var $i=In.indexOf(ai);In.splice($i,1),lr.shaderCount--}Cn[ai.vertId].refCount<=0&&(Ye.deleteShader(jr[ai.vertId]),delete jr[ai.vertId],delete Zn[ai.fragId][ai.vertId]),Object.keys(Zn[ai.fragId]).length||(Ye.deleteShader($r[ai.fragId]),delete $r[ai.fragId],delete Zn[ai.fragId])}})},restore:bn,shader:ti,frag:-1,vert:-1}}var th=6408,yf=5121,uc=3333,Wv=5126;function Hs(Ye,Yt,lr,Or,$r,jr,Kr){function _n(In){var ia;Yt.next===null?ia=yf:ia=Yt.next.colorAttachments[0].texture._texture.type;var Gn=0,Vn=0,bn=Or.framebufferWidth,Br=Or.framebufferHeight,hn=null;ar(In)?hn=In:In&&(Gn=In.x|0,Vn=In.y|0,bn=(In.width||Or.framebufferWidth-Gn)|0,Br=(In.height||Or.framebufferHeight-Vn)|0,hn=In.data||null),lr();var Yn=bn*Br*4;return hn||(ia===yf?hn=new Uint8Array(Yn):ia===Wv&&(hn=hn||new Float32Array(Yn))),Ye.pixelStorei(uc,4),Ye.readPixels(Gn,Vn,bn,Br,th,ia,hn),hn}function ti(In){var ia;return Yt.setFBO({framebuffer:In.framebuffer},function(){ia=_n(In)}),ia}function Zn(In){return!In||!("framebuffer"in In)?_n(In):ti(In)}return Zn}var gv=0,Vf="";function Hf(Ye){return yl(Gf(Wu(Ye)))}function Gf(Ye){return Ue(Nr(Dh(Ye),Ye.length*8))}function bs(Ye,Yt){var lr=Dh(Ye);lr.length>16&&(lr=Nr(lr,Ye.length*8));for(var Or=Array(16),$r=Array(16),jr=0;jr<16;jr++)Or[jr]=lr[jr]^909522486,$r[jr]=lr[jr]^1549556828;var Kr=Nr(Or.concat(Dh(Yt)),512+Yt.length*8);return Ue(Nr($r.concat(Kr),768))}function yl(Ye){for(var Yt=gv?"0123456789ABCDEF":"0123456789abcdef",lr="",Or,$r=0;$r<Ye.length;$r++)Or=Ye.charCodeAt($r),lr+=Yt.charAt(Or>>>4&15)+Yt.charAt(Or&15);return lr}function Yu(Ye){for(var Yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lr="",Or=Ye.length,$r=0;$r<Or;$r+=3)for(var jr=Ye.charCodeAt($r)<<16|($r+1<Or?Ye.charCodeAt($r+1)<<8:0)|($r+2<Or?Ye.charCodeAt($r+2):0),Kr=0;Kr<4;Kr++)$r*8+Kr*6>Ye.length*8?lr+=Vf:lr+=Yt.charAt(jr>>>6*(3-Kr)&63);return lr}function Yf(Ye,Yt){var lr=Yt.length,Or=Array(),$r,jr,Kr,_n,ti=Array(Math.ceil(Ye.length/2));for($r=0;$r<ti.length;$r++)ti[$r]=Ye.charCodeAt($r*2)<<8|Ye.charCodeAt($r*2+1);for(;ti.length>0;){for(_n=Array(),Kr=0,$r=0;$r<ti.length;$r++)Kr=(Kr<<16)+ti[$r],jr=Math.floor(Kr/lr),Kr-=jr*lr,(_n.length>0||jr>0)&&(_n[_n.length]=jr);Or[Or.length]=Kr,ti=_n}var Zn="";for($r=Or.length-1;$r>=0;$r--)Zn+=Yt.charAt(Or[$r]);var In=Math.ceil(Ye.length*8/(Math.log(Yt.length)/Math.log(2)));for($r=Zn.length;$r<In;$r++)Zn=Yt[0]+Zn;return Zn}function Wu(Ye){for(var Yt="",lr=-1,Or,$r;++lr<Ye.length;)Or=Ye.charCodeAt(lr),$r=lr+1<Ye.length?Ye.charCodeAt(lr+1):0,55296<=Or&&Or<=56319&&56320<=$r&&$r<=57343&&(Or=65536+((Or&1023)<<10)+($r&1023),lr++),Or<=127?Yt+=String.fromCharCode(Or):Or<=2047?Yt+=String.fromCharCode(192|Or>>>6&31,128|Or&63):Or<=65535?Yt+=String.fromCharCode(224|Or>>>12&15,128|Or>>>6&63,128|Or&63):Or<=2097151&&(Yt+=String.fromCharCode(240|Or>>>18&7,128|Or>>>12&63,128|Or>>>6&63,128|Or&63));return Yt}function Dh(Ye){for(var Yt=Array(Ye.length>>2),lr=0;lr<Yt.length;lr++)Yt[lr]=0;for(var lr=0;lr<Ye.length*8;lr+=8)Yt[lr>>5]|=(Ye.charCodeAt(lr/8)&255)<<24-lr%32;return Yt}function Ue(Ye){for(var Yt="",lr=0;lr<Ye.length*32;lr+=8)Yt+=String.fromCharCode(Ye[lr>>5]>>>24-lr%32&255);return Yt}function st(Ye,Yt){return Ye>>>Yt|Ye<<32-Yt}function Gt(Ye,Yt){return Ye>>>Yt}function Rt(Ye,Yt,lr){return Ye&Yt^~Ye&lr}function hr(Ye,Yt,lr){return Ye&Yt^Ye&lr^Yt&lr}function Lr(Ye){return st(Ye,2)^st(Ye,13)^st(Ye,22)}function zr(Ye){return st(Ye,6)^st(Ye,11)^st(Ye,25)}function Zr(Ye){return st(Ye,7)^st(Ye,18)^Gt(Ye,3)}function an(Ye){return st(Ye,17)^st(Ye,19)^Gt(Ye,10)}var Sn=new Array(1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998);function Nr(Ye,Yt){var lr=new Array(1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225),Or=new Array(64),$r,jr,Kr,_n,ti,Zn,In,ia,Gn,Vn,bn,Br;for(Ye[Yt>>5]|=128<<24-Yt%32,Ye[(Yt+64>>9<<4)+15]=Yt,Gn=0;Gn<Ye.length;Gn+=16){for($r=lr[0],jr=lr[1],Kr=lr[2],_n=lr[3],ti=lr[4],Zn=lr[5],In=lr[6],ia=lr[7],Vn=0;Vn<64;Vn++)Vn<16?Or[Vn]=Ye[Vn+Gn]:Or[Vn]=tn(tn(tn(an(Or[Vn-2]),Or[Vn-7]),Zr(Or[Vn-15])),Or[Vn-16]),bn=tn(tn(tn(tn(ia,zr(ti)),Rt(ti,Zn,In)),Sn[Vn]),Or[Vn]),Br=tn(Lr($r),hr($r,jr,Kr)),ia=In,In=Zn,Zn=ti,ti=tn(_n,bn),_n=Kr,Kr=jr,jr=$r,$r=tn(bn,Br);lr[0]=tn($r,lr[0]),lr[1]=tn(jr,lr[1]),lr[2]=tn(Kr,lr[2]),lr[3]=tn(_n,lr[3]),lr[4]=tn(ti,lr[4]),lr[5]=tn(Zn,lr[5]),lr[6]=tn(In,lr[6]),lr[7]=tn(ia,lr[7])}return lr}function tn(Ye,Yt){var lr=(Ye&65535)+(Yt&65535),Or=(Ye>>16)+(Yt>>16)+(lr>>16);return Or<<16|lr&65535}function rn(Ye){return Array.prototype.slice.call(Ye)}function An(Ye){return rn(Ye).join("")}function Xn(Ye){var Yt=Ye&&Ye.cache,lr=0,Or=[],$r=[],jr=[];function Kr(bn,Br){var hn=Br&&Br.stable;if(!hn){for(var Yn=0;Yn<$r.length;++Yn)if($r[Yn]===bn&&!jr[Yn])return Or[Yn]}var Jn="g"+lr++;return Or.push(Jn),$r.push(bn),jr.push(hn),Jn}function _n(){var bn=[];function Br(){bn.push.apply(bn,rn(arguments))}var hn=[];function Yn(){var Jn="v"+lr++;return hn.push(Jn),arguments.length>0&&(bn.push(Jn,"="),bn.push.apply(bn,rn(arguments)),bn.push(";")),Jn}return e(Br,{def:Yn,toString:function(){return An([hn.length>0?"var "+hn.join(",")+";":"",An(bn)])}})}function ti(){var bn=_n(),Br=_n(),hn=bn.toString,Yn=Br.toString;function Jn(Cn,mi){Br(Cn,mi,"=",bn.def(Cn,mi),";")}return e(function(){bn.apply(bn,rn(arguments))},{def:bn.def,entry:bn,exit:Br,save:Jn,set:function(Cn,mi,ai){Jn(Cn,mi),bn(Cn,mi,"=",ai,";")},toString:function(){return hn()+Yn()}})}function Zn(){var bn=An(arguments),Br=ti(),hn=ti(),Yn=Br.toString,Jn=hn.toString;return e(Br,{then:function(){return Br.apply(Br,rn(arguments)),this},else:function(){return hn.apply(hn,rn(arguments)),this},toString:function(){var Cn=Jn();return Cn&&(Cn="else{"+Cn+"}"),An(["if(",bn,"){",Yn(),"}",Cn])}})}var In=_n(),ia={};function Gn(bn,Br){var hn=[];function Yn(){var $i="a"+hn.length;return hn.push($i),$i}Br=Br||0;for(var Jn=0;Jn<Br;++Jn)Yn();var Cn=ti(),mi=Cn.toString,ai=ia[bn]=e(Cn,{arg:Yn,toString:function(){return An(["function(",hn.join(),"){",mi(),"}"])}});return ai}function Vn(){var bn=['"use strict";',In,"return {"];Object.keys(ia).forEach(function(Jn){bn.push('"',Jn,'":',ia[Jn].toString(),",")}),bn.push("}");var Br=An(bn).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),hn;if(Yt&&(hn=Hf(Br),Yt[hn]))return Yt[hn].apply(null,$r);var Yn=Function.apply(null,Or.concat(Br));return Yt&&(Yt[hn]=Yn),Yn.apply(null,$r)}return{global:In,link:Kr,block:_n,proc:Gn,scope:ti,cond:Zn,compile:Vn}}var Oi="xyzw".split(""),Fi=5121,Hi=1,ji=2,Un=0,ri=1,Ki=2,ca=3,Ja=4,_o=5,go=6,bo="dither",Na="blend.enable",ws="blend.color",Ko="blend.equation",Uo="blend.func",hi="depth.enable",ea="depth.func",Ts="depth.range",Ml="depth.mask",Wl="colorMask",su="cull.enable",Xu="cull.face",Wf="frontFace",lu="lineWidth",Rc="polygonOffset.enable",Dc="polygonOffset.offset",fc="sample.alpha",Ih="sample.enable",rh="sample.coverage",cc="stencil.enable",mf="stencil.mask",Zu="stencil.func",Fh="stencil.opFront",Xv="stencil.opBack",qh="scissor.enable",Zv="scissor.box",Ic="viewport",ku="profile",nh="framebuffer",ih="vert",ah="frag",Xf="elements",zh="primitive",jv="count",Oh="offset",uu="instances",de="vao",we="Width",Le="Height",De=nh+we,He=nh+Le,Ve=Ic+we,Qe=Ic+Le,zt="drawingBuffer",Jt=zt+we,qt=zt+Le,Qt=[Uo,Ko,Zu,Fh,Xv,rh,Ic,Zv,Dc],or=34962,_r=34963,Sr=2884,Hr=3042,un=3024,Ln=2960,yi=2929,Ji=3089,ra=32823,sa=32926,pa=32928,Ro=5126,Jo=35664,ba=35665,qa=35666,gs=5124,sl=35667,rl=35668,ro=35669,Wa=35670,Il=35671,Sl=35672,Cu=35673,fu=35674,Fl=35675,El=35676,xf=35678,ju=35680,Ku=4,V=1028,J=1029,se=2304,xe=2305,be=32775,Ae=32776,Ge=519,Pe=7680,tt=0,Mt=1,Et=32774,rr=513,tr=36160,Tr=36064,Er={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ir={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},gr={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},wr={cw:se,ccw:xe};function Pr(Ye){return Array.isArray(Ye)||ar(Ye)||cr(Ye)}function kr(Ye){return Ye.sort(function(Yt,lr){return Yt===Ic?-1:lr===Ic?1:Yt<lr?-1:1})}function pr(Ye,Yt,lr,Or){this.thisDep=Ye,this.contextDep=Yt,this.propDep=lr,this.append=Or}function mn(Ye){return Ye&&!(Ye.thisDep||Ye.contextDep||Ye.propDep)}function Tn(Ye){return new pr(!1,!1,!1,Ye)}function zn(Ye,Yt){var lr=Ye.type;if(lr===Un){var Or=Ye.data.length;return new pr(!0,Or>=1,Or>=2,Yt)}else if(lr===Ja){var $r=Ye.data;return new pr($r.thisDep,$r.contextDep,$r.propDep,Yt)}else{if(lr===_o)return new pr(!1,!1,!1,Yt);if(lr===go){for(var jr=!1,Kr=!1,_n=!1,ti=0;ti<Ye.data.length;++ti){var Zn=Ye.data[ti];if(Zn.type===ri)_n=!0;else if(Zn.type===Ki)Kr=!0;else if(Zn.type===ca)jr=!0;else if(Zn.type===Un){jr=!0;var In=Zn.data;In>=1&&(Kr=!0),In>=2&&(_n=!0)}else Zn.type===Ja&&(jr=jr||Zn.data.thisDep,Kr=Kr||Zn.data.contextDep,_n=_n||Zn.data.propDep)}return new pr(jr,Kr,_n,Yt)}else return new pr(lr===ca,lr===Ki,lr===ri,Yt)}}var Kn=new pr(!1,!1,!1,function(){});function Ci(Ye,Yt,lr,Or,$r,jr,Kr,_n,ti,Zn,In,ia,Gn,Vn,bn,Br){var hn=Zn.Record,Yn={add:32774,subtract:32778,"reverse subtract":32779};lr.ext_blend_minmax&&(Yn.min=be,Yn.max=Ae);var Jn=lr.angle_instanced_arrays,Cn=lr.webgl_draw_buffers,mi=lr.oes_vertex_array_object,ai={dirty:!0,profile:Br.profile},$i={},Pn=[],Mn={},Ri={};function di(Be){return Be.replace(".","_")}function ni(Be,$e,ft){var Tt=di(Be);Pn.push(Be),$i[Tt]=ai[Tt]=!!ft,Mn[Tt]=$e}function Qn(Be,$e,ft){var Tt=di(Be);Pn.push(Be),Array.isArray(ft)?(ai[Tt]=ft.slice(),$i[Tt]=ft.slice()):ai[Tt]=$i[Tt]=ft,Ri[Tt]=$e}function Ei(Be){return!!isNaN(Be)}ni(bo,un),ni(Na,Hr),Qn(ws,"blendColor",[0,0,0,0]),Qn(Ko,"blendEquationSeparate",[Et,Et]),Qn(Uo,"blendFuncSeparate",[Mt,tt,Mt,tt]),ni(hi,yi,!0),Qn(ea,"depthFunc",rr),Qn(Ts,"depthRange",[0,1]),Qn(Ml,"depthMask",!0),Qn(Wl,Wl,[!0,!0,!0,!0]),ni(su,Sr),Qn(Xu,"cullFace",J),Qn(Wf,Wf,xe),Qn(lu,lu,1),ni(Rc,ra),Qn(Dc,"polygonOffset",[0,0]),ni(fc,sa),ni(Ih,pa),Qn(rh,"sampleCoverage",[1,!1]),ni(cc,Ln),Qn(mf,"stencilMask",-1),Qn(Zu,"stencilFunc",[Ge,0,-1]),Qn(Fh,"stencilOpSeparate",[V,Pe,Pe,Pe]),Qn(Xv,"stencilOpSeparate",[J,Pe,Pe,Pe]),ni(qh,Ji),Qn(Zv,"scissor",[0,0,Ye.drawingBufferWidth,Ye.drawingBufferHeight]),Qn(Ic,Ic,[0,0,Ye.drawingBufferWidth,Ye.drawingBufferHeight]);var na={gl:Ye,context:Gn,strings:Yt,next:$i,current:ai,draw:ia,elements:jr,buffer:$r,shader:In,attributes:Zn.state,vao:Zn,uniforms:ti,framebuffer:_n,extensions:lr,timer:Vn,isBufferArgs:Pr},Ea={primTypes:wn,compareFuncs:ir,blendFuncs:Er,blendEquations:Yn,stencilOps:gr,glTypes:nn,orientationType:wr};Cn&&(Ea.backBuffer=[J],Ea.drawBuffer=S(Or.maxDrawbuffers,function(Be){return Be===0?[0]:S(Be,function($e){return Tr+$e})}));var pi=0;function Ui(){var Be=Xn({cache:bn}),$e=Be.link,ft=Be.global;Be.id=pi++,Be.batchId="0";var Tt=$e(na),Lt=Be.shared={props:"a0"};Object.keys(na).forEach(function(Kt){Lt[Kt]=ft.def(Tt,".",Kt)});var Pt=Be.next={},jt=Be.current={};Object.keys(Ri).forEach(function(Kt){Array.isArray(ai[Kt])&&(Pt[Kt]=ft.def(Lt.next,".",Kt),jt[Kt]=ft.def(Lt.current,".",Kt))});var Nt=Be.constants={};Object.keys(Ea).forEach(function(Kt){Nt[Kt]=ft.def(JSON.stringify(Ea[Kt]))}),Be.invoke=function(Kt,Ct){switch(Ct.type){case Un:var sr=["this",Lt.context,Lt.props,Be.batchId];return Kt.def($e(Ct.data),".call(",sr.slice(0,Math.max(Ct.data.length+1,4)),")");case ri:return Kt.def(Lt.props,Ct.data);case Ki:return Kt.def(Lt.context,Ct.data);case ca:return Kt.def("this",Ct.data);case Ja:return Ct.data.append(Be,Kt),Ct.data.ref;case _o:return Ct.data.toString();case go:return Ct.data.map(function(xr){return Be.invoke(Kt,xr)})}},Be.attribCache={};var Ft={};return Be.scopeAttrib=function(Kt){var Ct=Yt.id(Kt);if(Ct in Ft)return Ft[Ct];var sr=Zn.scope[Ct];sr||(sr=Zn.scope[Ct]=new hn);var xr=Ft[Ct]=$e(sr);return xr},Be}function ha(Be){var $e=Be.static,ft=Be.dynamic,Tt;if(ku in $e){var Lt=!!$e[ku];Tt=Tn(function(jt,Nt){return Lt}),Tt.enable=Lt}else if(ku in ft){var Pt=ft[ku];Tt=zn(Pt,function(jt,Nt){return jt.invoke(Nt,Pt)})}return Tt}function _a(Be,$e){var ft=Be.static,Tt=Be.dynamic;if(nh in ft){var Lt=ft[nh];return Lt?(Lt=_n.getFramebuffer(Lt),Tn(function(jt,Nt){var Ft=jt.link(Lt),Kt=jt.shared;Nt.set(Kt.framebuffer,".next",Ft);var Ct=Kt.context;return Nt.set(Ct,"."+De,Ft+".width"),Nt.set(Ct,"."+He,Ft+".height"),Ft})):Tn(function(jt,Nt){var Ft=jt.shared;Nt.set(Ft.framebuffer,".next","null");var Kt=Ft.context;return Nt.set(Kt,"."+De,Kt+"."+Jt),Nt.set(Kt,"."+He,Kt+"."+qt),"null"})}else if(nh in Tt){var Pt=Tt[nh];return zn(Pt,function(jt,Nt){var Ft=jt.invoke(Nt,Pt),Kt=jt.shared,Ct=Kt.framebuffer,sr=Nt.def(Ct,".getFramebuffer(",Ft,")");Nt.set(Ct,".next",sr);var xr=Kt.context;return Nt.set(xr,"."+De,sr+"?"+sr+".width:"+xr+"."+Jt),Nt.set(xr,"."+He,sr+"?"+sr+".height:"+xr+"."+qt),sr})}else return null}function Xa(Be,$e,ft){var Tt=Be.static,Lt=Be.dynamic;function Pt(Ft){if(Ft in Tt){var Kt=Tt[Ft],Ct=!0,sr=Kt.x|0,xr=Kt.y|0,Dr,fn;return"width"in Kt?Dr=Kt.width|0:Ct=!1,"height"in Kt?fn=Kt.height|0:Ct=!1,new pr(!Ct&&$e&&$e.thisDep,!Ct&&$e&&$e.contextDep,!Ct&&$e&&$e.propDep,function(si,Hn){var cn=si.shared.context,Rn=Dr;"width"in Kt||(Rn=Hn.def(cn,".",De,"-",sr));var En=fn;return"height"in Kt||(En=Hn.def(cn,".",He,"-",xr)),[sr,xr,Rn,En]})}else if(Ft in Lt){var Wr=Lt[Ft],gn=zn(Wr,function(si,Hn){var cn=si.invoke(Hn,Wr),Rn=si.shared.context,En=Hn.def(cn,".x|0"),$n=Hn.def(cn,".y|0"),xi=Hn.def('"width" in ',cn,"?",cn,".width|0:","(",Rn,".",De,"-",En,")"),Ra=Hn.def('"height" in ',cn,"?",cn,".height|0:","(",Rn,".",He,"-",$n,")");return[En,$n,xi,Ra]});return $e&&(gn.thisDep=gn.thisDep||$e.thisDep,gn.contextDep=gn.contextDep||$e.contextDep,gn.propDep=gn.propDep||$e.propDep),gn}else return $e?new pr($e.thisDep,$e.contextDep,$e.propDep,function(si,Hn){var cn=si.shared.context;return[0,0,Hn.def(cn,".",De),Hn.def(cn,".",He)]}):null}var jt=Pt(Ic);if(jt){var Nt=jt;jt=new pr(jt.thisDep,jt.contextDep,jt.propDep,function(Ft,Kt){var Ct=Nt.append(Ft,Kt),sr=Ft.shared.context;return Kt.set(sr,"."+Ve,Ct[2]),Kt.set(sr,"."+Qe,Ct[3]),Ct})}return{viewport:jt,scissor_box:Pt(Zv)}}function Cs(Be,$e){var ft=Be.static,Tt=typeof ft[ah]=="string"&&typeof ft[ih]=="string";if(Tt){if(Object.keys($e.dynamic).length>0)return null;var Lt=$e.static,Pt=Object.keys(Lt);if(Pt.length>0&&typeof Lt[Pt[0]]=="number"){for(var jt=[],Nt=0;Nt<Pt.length;++Nt)jt.push([Lt[Pt[Nt]]|0,Pt[Nt]]);return jt}}return null}function cu(Be,$e,ft){var Tt=Be.static,Lt=Be.dynamic;function Pt(Ct){if(Ct in Tt){var sr=Yt.id(Tt[Ct]),xr=Tn(function(){return sr});return xr.id=sr,xr}else if(Ct in Lt){var Dr=Lt[Ct];return zn(Dr,function(fn,Wr){var gn=fn.invoke(Wr,Dr),si=Wr.def(fn.shared.strings,".id(",gn,")");return si})}return null}var jt=Pt(ah),Nt=Pt(ih),Ft=null,Kt;return mn(jt)&&mn(Nt)?(Ft=In.program(Nt.id,jt.id,null,ft),Kt=Tn(function(Ct,sr){return Ct.link(Ft)})):Kt=new pr(jt&&jt.thisDep||Nt&&Nt.thisDep,jt&&jt.contextDep||Nt&&Nt.contextDep,jt&&jt.propDep||Nt&&Nt.propDep,function(Ct,sr){var xr=Ct.shared.shader,Dr;jt?Dr=jt.append(Ct,sr):Dr=sr.def(xr,".",ah);var fn;Nt?fn=Nt.append(Ct,sr):fn=sr.def(xr,".",ih);var Wr=xr+".program("+fn+","+Dr;return sr.def(Wr+")")}),{frag:jt,vert:Nt,progVar:Kt,program:Ft}}function co(Be,$e){var ft=Be.static,Tt=Be.dynamic,Lt={},Pt=!1;function jt(){if(de in ft){var Hn=ft[de];return Hn!==null&&Zn.getVAO(Hn)===null&&(Hn=Zn.createVAO(Hn)),Pt=!0,Lt.vao=Hn,Tn(function(Rn){var En=Zn.getVAO(Hn);return En?Rn.link(En):"null"})}else if(de in Tt){Pt=!0;var cn=Tt[de];return zn(cn,function(Rn,En){var $n=Rn.invoke(En,cn);return En.def(Rn.shared.vao+".getVAO("+$n+")")})}return null}var Nt=jt(),Ft=!1;function Kt(){if(Xf in ft){var Hn=ft[Xf];if(Lt.elements=Hn,Pr(Hn)){var cn=Lt.elements=jr.create(Hn,!0);Hn=jr.getElements(cn),Ft=!0}else Hn&&(Hn=jr.getElements(Hn),Ft=!0);var Rn=Tn(function($n,xi){if(Hn){var Ra=$n.link(Hn);return $n.ELEMENTS=Ra,Ra}return $n.ELEMENTS=null,null});return Rn.value=Hn,Rn}else if(Xf in Tt){Ft=!0;var En=Tt[Xf];return zn(En,function($n,xi){var Ra=$n.shared,Pa=Ra.isBufferArgs,wo=Ra.elements,ua=$n.invoke(xi,En),$a=xi.def("null"),Go=xi.def(Pa,"(",ua,")"),xl=$n.cond(Go).then($a,"=",wo,".createStream(",ua,");").else($a,"=",wo,".getElements(",ua,");");return xi.entry(xl),xi.exit($n.cond(Go).then(wo,".destroyStream(",$a,");")),$n.ELEMENTS=$a,$a})}else if(Pt)return new pr(Nt.thisDep,Nt.contextDep,Nt.propDep,function($n,xi){return xi.def($n.shared.vao+".currentVAO?"+$n.shared.elements+".getElements("+$n.shared.vao+".currentVAO.elements):null")});return null}var Ct=Kt();function sr(){if(zh in ft){var Hn=ft[zh];return Lt.primitive=Hn,Tn(function(Rn,En){return wn[Hn]})}else if(zh in Tt){var cn=Tt[zh];return zn(cn,function(Rn,En){var $n=Rn.constants.primTypes,xi=Rn.invoke(En,cn);return En.def($n,"[",xi,"]")})}else{if(Ft)return mn(Ct)?Ct.value?Tn(function(Rn,En){return En.def(Rn.ELEMENTS,".primType")}):Tn(function(){return Ku}):new pr(Ct.thisDep,Ct.contextDep,Ct.propDep,function(Rn,En){var $n=Rn.ELEMENTS;return En.def($n,"?",$n,".primType:",Ku)});if(Pt)return new pr(Nt.thisDep,Nt.contextDep,Nt.propDep,function(Rn,En){return En.def(Rn.shared.vao+".currentVAO?"+Rn.shared.vao+".currentVAO.primitive:"+Ku)})}return null}function xr(Hn,cn){if(Hn in ft){var Rn=ft[Hn]|0;return cn?Lt.offset=Rn:Lt.instances=Rn,Tn(function($n,xi){return cn&&($n.OFFSET=Rn),Rn})}else if(Hn in Tt){var En=Tt[Hn];return zn(En,function($n,xi){var Ra=$n.invoke(xi,En);return cn&&($n.OFFSET=Ra),Ra})}else if(cn){if(Ft)return Tn(function($n,xi){return $n.OFFSET=0,0});if(Pt)return new pr(Nt.thisDep,Nt.contextDep,Nt.propDep,function($n,xi){return xi.def($n.shared.vao+".currentVAO?"+$n.shared.vao+".currentVAO.offset:0")})}else if(Pt)return new pr(Nt.thisDep,Nt.contextDep,Nt.propDep,function($n,xi){return xi.def($n.shared.vao+".currentVAO?"+$n.shared.vao+".currentVAO.instances:-1")});return null}var Dr=xr(Oh,!0);function fn(){if(jv in ft){var Hn=ft[jv]|0;return Lt.count=Hn,Tn(function(){return Hn})}else if(jv in Tt){var cn=Tt[jv];return zn(cn,function(xi,Ra){var Pa=xi.invoke(Ra,cn);return Pa})}else if(Ft)if(mn(Ct)){if(Ct)return Dr?new pr(Dr.thisDep,Dr.contextDep,Dr.propDep,function(xi,Ra){var Pa=Ra.def(xi.ELEMENTS,".vertCount-",xi.OFFSET);return Pa}):Tn(function(xi,Ra){return Ra.def(xi.ELEMENTS,".vertCount")});var Rn=Tn(function(){return-1});return Rn}else{var En=new pr(Ct.thisDep||Dr.thisDep,Ct.contextDep||Dr.contextDep,Ct.propDep||Dr.propDep,function(xi,Ra){var Pa=xi.ELEMENTS;return xi.OFFSET?Ra.def(Pa,"?",Pa,".vertCount-",xi.OFFSET,":-1"):Ra.def(Pa,"?",Pa,".vertCount:-1")});return En}else if(Pt){var $n=new pr(Nt.thisDep,Nt.contextDep,Nt.propDep,function(xi,Ra){return Ra.def(xi.shared.vao,".currentVAO?",xi.shared.vao,".currentVAO.count:-1")});return $n}return null}var Wr=sr(),gn=fn(),si=xr(uu,!1);return{elements:Ct,primitive:Wr,count:gn,instances:si,offset:Dr,vao:Nt,vaoActive:Pt,elementsActive:Ft,static:Lt}}function hu(Be,$e){var ft=Be.static,Tt=Be.dynamic,Lt={};return Pn.forEach(function(Pt){var jt=di(Pt);function Nt(Ft,Kt){if(Pt in ft){var Ct=Ft(ft[Pt]);Lt[jt]=Tn(function(){return Ct})}else if(Pt in Tt){var sr=Tt[Pt];Lt[jt]=zn(sr,function(xr,Dr){return Kt(xr,Dr,xr.invoke(Dr,sr))})}}switch(Pt){case su:case Na:case bo:case cc:case hi:case qh:case Rc:case fc:case Ih:case Ml:return Nt(function(Ft){return Ft},function(Ft,Kt,Ct){return Ct});case ea:return Nt(function(Ft){return ir[Ft]},function(Ft,Kt,Ct){var sr=Ft.constants.compareFuncs;return Kt.def(sr,"[",Ct,"]")});case Ts:return Nt(function(Ft){return Ft},function(Ft,Kt,Ct){var sr=Kt.def("+",Ct,"[0]"),xr=Kt.def("+",Ct,"[1]");return[sr,xr]});case Uo:return Nt(function(Ft){var Kt="srcRGB"in Ft?Ft.srcRGB:Ft.src,Ct="srcAlpha"in Ft?Ft.srcAlpha:Ft.src,sr="dstRGB"in Ft?Ft.dstRGB:Ft.dst,xr="dstAlpha"in Ft?Ft.dstAlpha:Ft.dst;return[Er[Kt],Er[sr],Er[Ct],Er[xr]]},function(Ft,Kt,Ct){var sr=Ft.constants.blendFuncs;function xr(cn,Rn){var En=Kt.def('"',cn,Rn,'" in ',Ct,"?",Ct,".",cn,Rn,":",Ct,".",cn);return En}var Dr=xr("src","RGB"),fn=xr("dst","RGB"),Wr=Kt.def(sr,"[",Dr,"]"),gn=Kt.def(sr,"[",xr("src","Alpha"),"]"),si=Kt.def(sr,"[",fn,"]"),Hn=Kt.def(sr,"[",xr("dst","Alpha"),"]");return[Wr,si,gn,Hn]});case Ko:return Nt(function(Ft){if(typeof Ft=="string")return[Yn[Ft],Yn[Ft]];if(typeof Ft=="object")return[Yn[Ft.rgb],Yn[Ft.alpha]]},function(Ft,Kt,Ct){var sr=Ft.constants.blendEquations,xr=Kt.def(),Dr=Kt.def(),fn=Ft.cond("typeof ",Ct,'==="string"');return fn.then(xr,"=",Dr,"=",sr,"[",Ct,"];"),fn.else(xr,"=",sr,"[",Ct,".rgb];",Dr,"=",sr,"[",Ct,".alpha];"),Kt(fn),[xr,Dr]});case ws:return Nt(function(Ft){return S(4,function(Kt){return+Ft[Kt]})},function(Ft,Kt,Ct){return S(4,function(sr){return Kt.def("+",Ct,"[",sr,"]")})});case mf:return Nt(function(Ft){return Ft|0},function(Ft,Kt,Ct){return Kt.def(Ct,"|0")});case Zu:return Nt(function(Ft){var Kt=Ft.cmp||"keep",Ct=Ft.ref||0,sr="mask"in Ft?Ft.mask:-1;return[ir[Kt],Ct,sr]},function(Ft,Kt,Ct){var sr=Ft.constants.compareFuncs,xr=Kt.def('"cmp" in ',Ct,"?",sr,"[",Ct,".cmp]",":",Pe),Dr=Kt.def(Ct,".ref|0"),fn=Kt.def('"mask" in ',Ct,"?",Ct,".mask|0:-1");return[xr,Dr,fn]});case Fh:case Xv:return Nt(function(Ft){var Kt=Ft.fail||"keep",Ct=Ft.zfail||"keep",sr=Ft.zpass||"keep";return[Pt===Xv?J:V,gr[Kt],gr[Ct],gr[sr]]},function(Ft,Kt,Ct){var sr=Ft.constants.stencilOps;function xr(Dr){return Kt.def('"',Dr,'" in ',Ct,"?",sr,"[",Ct,".",Dr,"]:",Pe)}return[Pt===Xv?J:V,xr("fail"),xr("zfail"),xr("zpass")]});case Dc:return Nt(function(Ft){var Kt=Ft.factor|0,Ct=Ft.units|0;return[Kt,Ct]},function(Ft,Kt,Ct){var sr=Kt.def(Ct,".factor|0"),xr=Kt.def(Ct,".units|0");return[sr,xr]});case Xu:return Nt(function(Ft){var Kt=0;return Ft==="front"?Kt=V:Ft==="back"&&(Kt=J),Kt},function(Ft,Kt,Ct){return Kt.def(Ct,'==="front"?',V,":",J)});case lu:return Nt(function(Ft){return Ft},function(Ft,Kt,Ct){return Ct});case Wf:return Nt(function(Ft){return wr[Ft]},function(Ft,Kt,Ct){return Kt.def(Ct+'==="cw"?'+se+":"+xe)});case Wl:return Nt(function(Ft){return Ft.map(function(Kt){return!!Kt})},function(Ft,Kt,Ct){return S(4,function(sr){return"!!"+Ct+"["+sr+"]"})});case rh:return Nt(function(Ft){var Kt="value"in Ft?Ft.value:1,Ct=!!Ft.invert;return[Kt,Ct]},function(Ft,Kt,Ct){var sr=Kt.def('"value" in ',Ct,"?+",Ct,".value:1"),xr=Kt.def("!!",Ct,".invert");return[sr,xr]})}}),Lt}function ys(Be,$e){var ft=Be.static,Tt=Be.dynamic,Lt={};return Object.keys(ft).forEach(function(Pt){var jt=ft[Pt],Nt;if(typeof jt=="number"||typeof jt=="boolean")Nt=Tn(function(){return jt});else if(typeof jt=="function"){var Ft=jt._reglType;Ft==="texture2d"||Ft==="textureCube"?Nt=Tn(function(Kt){return Kt.link(jt)}):(Ft==="framebuffer"||Ft==="framebufferCube")&&(Nt=Tn(function(Kt){return Kt.link(jt.color[0])}))}else yn(jt)&&(Nt=Tn(function(Kt){var Ct=Kt.global.def("[",S(jt.length,function(sr){return jt[sr]}),"]");return Ct}));Nt.value=jt,Lt[Pt]=Nt}),Object.keys(Tt).forEach(function(Pt){var jt=Tt[Pt];Lt[Pt]=zn(jt,function(Nt,Ft){return Nt.invoke(Ft,jt)})}),Lt}function Zl(Be,$e){var ft=Be.static,Tt=Be.dynamic,Lt={};return Object.keys(ft).forEach(function(Pt){var jt=ft[Pt],Nt=Yt.id(Pt),Ft=new hn;if(Pr(jt))Ft.state=Hi,Ft.buffer=$r.getBuffer($r.create(jt,or,!1,!0)),Ft.type=0;else{var Kt=$r.getBuffer(jt);if(Kt)Ft.state=Hi,Ft.buffer=Kt,Ft.type=0;else if("constant"in jt){var Ct=jt.constant;Ft.buffer="null",Ft.state=ji,typeof Ct=="number"?Ft.x=Ct:Oi.forEach(function(si,Hn){Hn<Ct.length&&(Ft[si]=Ct[Hn])})}else{Pr(jt.buffer)?Kt=$r.getBuffer($r.create(jt.buffer,or,!1,!0)):Kt=$r.getBuffer(jt.buffer);var sr=jt.offset|0,xr=jt.stride|0,Dr=jt.size|0,fn=!!jt.normalized,Wr=0;"type"in jt&&(Wr=nn[jt.type]);var gn=jt.divisor|0;Ft.buffer=Kt,Ft.state=Hi,Ft.size=Dr,Ft.normalized=fn,Ft.type=Wr||Kt.dtype,Ft.offset=sr,Ft.stride=xr,Ft.divisor=gn}}Lt[Pt]=Tn(function(si,Hn){var cn=si.attribCache;if(Nt in cn)return cn[Nt];var Rn={isStream:!1};return Object.keys(Ft).forEach(function(En){Rn[En]=Ft[En]}),Ft.buffer&&(Rn.buffer=si.link(Ft.buffer),Rn.type=Rn.type||Rn.buffer+".dtype"),cn[Nt]=Rn,Rn})}),Object.keys(Tt).forEach(function(Pt){var jt=Tt[Pt];function Nt(Ft,Kt){var Ct=Ft.invoke(Kt,jt),sr=Ft.shared,xr=Ft.constants,Dr=sr.isBufferArgs,fn=sr.buffer,Wr={isStream:Kt.def(!1)},gn=new hn;gn.state=Hi,Object.keys(gn).forEach(function(Rn){Wr[Rn]=Kt.def(""+gn[Rn])});var si=Wr.buffer,Hn=Wr.type;Kt("if(",Dr,"(",Ct,")){",Wr.isStream,"=true;",si,"=",fn,".createStream(",or,",",Ct,");",Hn,"=",si,".dtype;","}else{",si,"=",fn,".getBuffer(",Ct,");","if(",si,"){",Hn,"=",si,".dtype;",'}else if("constant" in ',Ct,"){",Wr.state,"=",ji,";","if(typeof "+Ct+'.constant === "number"){',Wr[Oi[0]],"=",Ct,".constant;",Oi.slice(1).map(function(Rn){return Wr[Rn]}).join("="),"=0;","}else{",Oi.map(function(Rn,En){return Wr[Rn]+"="+Ct+".constant.length>"+En+"?"+Ct+".constant["+En+"]:0;"}).join(""),"}}else{","if(",Dr,"(",Ct,".buffer)){",si,"=",fn,".createStream(",or,",",Ct,".buffer);","}else{",si,"=",fn,".getBuffer(",Ct,".buffer);","}",Hn,'="type" in ',Ct,"?",xr.glTypes,"[",Ct,".type]:",si,".dtype;",Wr.normalized,"=!!",Ct,".normalized;");function cn(Rn){Kt(Wr[Rn],"=",Ct,".",Rn,"|0;")}return cn("size"),cn("offset"),cn("stride"),cn("divisor"),Kt("}}"),Kt.exit("if(",Wr.isStream,"){",fn,".destroyStream(",si,");","}"),Wr}Lt[Pt]=zn(jt,Nt)}),Lt}function Zf(Be){var $e=Be.static,ft=Be.dynamic,Tt={};return Object.keys($e).forEach(function(Lt){var Pt=$e[Lt];Tt[Lt]=Tn(function(jt,Nt){return typeof Pt=="number"||typeof Pt=="boolean"?""+Pt:jt.link(Pt)})}),Object.keys(ft).forEach(function(Lt){var Pt=ft[Lt];Tt[Lt]=zn(Pt,function(jt,Nt){return jt.invoke(Nt,Pt)})}),Tt}function hc(Be,$e,ft,Tt,Lt){var Pt=Be.static,jt=Be.dynamic,Nt=Cs(Be,$e),Ft=_a(Be,Lt),Kt=Xa(Be,Ft,Lt),Ct=co(Be,Lt),sr=hu(Be,Lt),xr=cu(Be,Lt,Nt);function Dr(cn){var Rn=Kt[cn];Rn&&(sr[cn]=Rn)}Dr(Ic),Dr(di(Zv));var fn=Object.keys(sr).length>0,Wr={framebuffer:Ft,draw:Ct,shader:xr,state:sr,dirty:fn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Wr.profile=ha(Be,Lt),Wr.uniforms=ys(ft,Lt),Wr.drawVAO=Wr.scopeVAO=Ct.vao,!Wr.drawVAO&&xr.program&&!Nt&&lr.angle_instanced_arrays&&Ct.static.elements){var gn=!0,si=xr.program.attributes.map(function(cn){var Rn=$e.static[cn];return gn=gn&&!!Rn,Rn});if(gn&&si.length>0){var Hn=Zn.getVAO(Zn.createVAO({attributes:si,elements:Ct.static.elements}));Wr.drawVAO=new pr(null,null,null,function(cn,Rn){return cn.link(Hn)}),Wr.useVAO=!0}}return Nt?Wr.useVAO=!0:Wr.attributes=Zl($e,Lt),Wr.context=Zf(Tt,Lt),Wr}function Ms(Be,$e,ft){var Tt=Be.shared,Lt=Tt.context,Pt=Be.scope();Object.keys(ft).forEach(function(jt){$e.save(Lt,"."+jt);var Nt=ft[jt],Ft=Nt.append(Be,$e);Array.isArray(Ft)?Pt(Lt,".",jt,"=[",Ft.join(),"];"):Pt(Lt,".",jt,"=",Ft,";")}),$e(Pt)}function jl(Be,$e,ft,Tt){var Lt=Be.shared,Pt=Lt.gl,jt=Lt.framebuffer,Nt;Cn&&(Nt=$e.def(Lt.extensions,".webgl_draw_buffers"));var Ft=Be.constants,Kt=Ft.drawBuffer,Ct=Ft.backBuffer,sr;ft?sr=ft.append(Be,$e):sr=$e.def(jt,".next"),Tt||$e("if(",sr,"!==",jt,".cur){"),$e("if(",sr,"){",Pt,".bindFramebuffer(",tr,",",sr,".framebuffer);"),Cn&&$e(Nt,".drawBuffersWEBGL(",Kt,"[",sr,".colorAttachments.length]);"),$e("}else{",Pt,".bindFramebuffer(",tr,",null);"),Cn&&$e(Nt,".drawBuffersWEBGL(",Ct,");"),$e("}",jt,".cur=",sr,";"),Tt||$e("}")}function vu(Be,$e,ft){var Tt=Be.shared,Lt=Tt.gl,Pt=Be.current,jt=Be.next,Nt=Tt.current,Ft=Tt.next,Kt=Be.cond(Nt,".dirty");Pn.forEach(function(Ct){var sr=di(Ct);if(!(sr in ft.state)){var xr,Dr;if(sr in jt){xr=jt[sr],Dr=Pt[sr];var fn=S(ai[sr].length,function(gn){return Kt.def(xr,"[",gn,"]")});Kt(Be.cond(fn.map(function(gn,si){return gn+"!=="+Dr+"["+si+"]"}).join("||")).then(Lt,".",Ri[sr],"(",fn,");",fn.map(function(gn,si){return Dr+"["+si+"]="+gn}).join(";"),";"))}else{xr=Kt.def(Ft,".",sr);var Wr=Be.cond(xr,"!==",Nt,".",sr);Kt(Wr),sr in Mn?Wr(Be.cond(xr).then(Lt,".enable(",Mn[sr],");").else(Lt,".disable(",Mn[sr],");"),Nt,".",sr,"=",xr,";"):Wr(Lt,".",Ri[sr],"(",xr,");",Nt,".",sr,"=",xr,";")}}}),Object.keys(ft.state).length===0&&Kt(Nt,".dirty=false;"),$e(Kt)}function no(Be,$e,ft,Tt){var Lt=Be.shared,Pt=Be.current,jt=Lt.current,Nt=Lt.gl,Ft;kr(Object.keys(ft)).forEach(function(Kt){var Ct=ft[Kt];if(!(Tt&&!Tt(Ct))){var sr=Ct.append(Be,$e);if(Mn[Kt]){var xr=Mn[Kt];mn(Ct)?(Ft=Be.link(sr,{stable:!0}),$e(Be.cond(Ft).then(Nt,".enable(",xr,");").else(Nt,".disable(",xr,");")),$e(jt,".",Kt,"=",Ft,";")):($e(Be.cond(sr).then(Nt,".enable(",xr,");").else(Nt,".disable(",xr,");")),$e(jt,".",Kt,"=",sr,";"))}else if(yn(sr)){var Dr=Pt[Kt];$e(Nt,".",Ri[Kt],"(",sr,");",sr.map(function(fn,Wr){return Dr+"["+Wr+"]="+fn}).join(";"),";")}else mn(Ct)?(Ft=Be.link(sr,{stable:!0}),$e(Nt,".",Ri[Kt],"(",Ft,");",jt,".",Kt,"=",Ft,";")):$e(Nt,".",Ri[Kt],"(",sr,");",jt,".",Kt,"=",sr,";")}})}function Lu(Be,$e){Jn&&(Be.instancing=$e.def(Be.shared.extensions,".angle_instanced_arrays"))}function Qa(Be,$e,ft,Tt,Lt){var Pt=Be.shared,jt=Be.stats,Nt=Pt.current,Ft=Pt.timer,Kt=ft.profile;function Ct(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var sr,xr;function Dr(cn){sr=$e.def(),cn(sr,"=",Ct(),";"),typeof Lt=="string"?cn(jt,".count+=",Lt,";"):cn(jt,".count++;"),Vn&&(Tt?(xr=$e.def(),cn(xr,"=",Ft,".getNumPendingQueries();")):cn(Ft,".beginQuery(",jt,");"))}function fn(cn){cn(jt,".cpuTime+=",Ct(),"-",sr,";"),Vn&&(Tt?cn(Ft,".pushScopeStats(",xr,",",Ft,".getNumPendingQueries(),",jt,");"):cn(Ft,".endQuery();"))}function Wr(cn){var Rn=$e.def(Nt,".profile");$e(Nt,".profile=",cn,";"),$e.exit(Nt,".profile=",Rn,";")}var gn;if(Kt){if(mn(Kt)){Kt.enable?(Dr($e),fn($e.exit),Wr("true")):Wr("false");return}gn=Kt.append(Be,$e),Wr(gn)}else gn=$e.def(Nt,".profile");var si=Be.block();Dr(si),$e("if(",gn,"){",si,"}");var Hn=Be.block();fn(Hn),$e.exit("if(",gn,"){",Hn,"}")}function H(Be,$e,ft,Tt,Lt){var Pt=Be.shared;function jt(Ft){switch(Ft){case Jo:case sl:case Il:return 2;case ba:case rl:case Sl:return 3;case qa:case ro:case Cu:return 4;default:return 1}}function Nt(Ft,Kt,Ct){var sr=Pt.gl,xr=$e.def(Ft,".location"),Dr=$e.def(Pt.attributes,"[",xr,"]"),fn=Ct.state,Wr=Ct.buffer,gn=[Ct.x,Ct.y,Ct.z,Ct.w],si=["buffer","normalized","offset","stride"];function Hn(){$e("if(!",Dr,".buffer){",sr,".enableVertexAttribArray(",xr,");}");var Rn=Ct.type,En;if(Ct.size?En=$e.def(Ct.size,"||",Kt):En=Kt,$e("if(",Dr,".type!==",Rn,"||",Dr,".size!==",En,"||",si.map(function(xi){return Dr+"."+xi+"!=="+Ct[xi]}).join("||"),"){",sr,".bindBuffer(",or,",",Wr,".buffer);",sr,".vertexAttribPointer(",[xr,En,Rn,Ct.normalized,Ct.stride,Ct.offset],");",Dr,".type=",Rn,";",Dr,".size=",En,";",si.map(function(xi){return Dr+"."+xi+"="+Ct[xi]+";"}).join(""),"}"),Jn){var $n=Ct.divisor;$e("if(",Dr,".divisor!==",$n,"){",Be.instancing,".vertexAttribDivisorANGLE(",[xr,$n],");",Dr,".divisor=",$n,";}")}}function cn(){$e("if(",Dr,".buffer){",sr,".disableVertexAttribArray(",xr,");",Dr,".buffer=null;","}if(",Oi.map(function(Rn,En){return Dr+"."+Rn+"!=="+gn[En]}).join("||"),"){",sr,".vertexAttrib4f(",xr,",",gn,");",Oi.map(function(Rn,En){return Dr+"."+Rn+"="+gn[En]+";"}).join(""),"}")}fn===Hi?Hn():fn===ji?cn():($e("if(",fn,"===",Hi,"){"),Hn(),$e("}else{"),cn(),$e("}"))}Tt.forEach(function(Ft){var Kt=Ft.name,Ct=ft.attributes[Kt],sr;if(Ct){if(!Lt(Ct))return;sr=Ct.append(Be,$e)}else{if(!Lt(Kn))return;var xr=Be.scopeAttrib(Kt);sr={},Object.keys(new hn).forEach(function(Dr){sr[Dr]=$e.def(xr,".",Dr)})}Nt(Be.link(Ft),jt(Ft.info.type),sr)})}function R(Be,$e,ft,Tt,Lt,Pt){for(var jt=Be.shared,Nt=jt.gl,Ft,Kt=0;Kt<Tt.length;++Kt){var Ct=Tt[Kt],sr=Ct.name,xr=Ct.info.type,Dr=ft.uniforms[sr],fn=Be.link(Ct),Wr=fn+".location",gn;if(Dr){if(!Lt(Dr))continue;if(mn(Dr)){var si=Dr.value;if(xr===xf||xr===ju){var Hn=Be.link(si._texture||si.color[0]._texture);$e(Nt,".uniform1i(",Wr,",",Hn+".bind());"),$e.exit(Hn,".unbind();")}else if(xr===fu||xr===Fl||xr===El){var cn=Be.global.def("new Float32Array(["+Array.prototype.slice.call(si)+"])"),Rn=2;xr===Fl?Rn=3:xr===El&&(Rn=4),$e(Nt,".uniformMatrix",Rn,"fv(",Wr,",false,",cn,");")}else{switch(xr){case Ro:Ft="1f";break;case Jo:Ft="2f";break;case ba:Ft="3f";break;case qa:Ft="4f";break;case Wa:Ft="1i";break;case gs:Ft="1i";break;case Il:Ft="2i";break;case sl:Ft="2i";break;case Sl:Ft="3i";break;case rl:Ft="3i";break;case Cu:Ft="4i";break;case ro:Ft="4i";break}$e(Nt,".uniform",Ft,"(",Wr,",",yn(si)?Array.prototype.slice.call(si):si,");")}continue}else gn=Dr.append(Be,$e)}else{if(!Lt(Kn))continue;gn=$e.def(jt.uniforms,"[",Yt.id(sr),"]")}xr===xf?$e("if(",gn,"&&",gn,'._reglType==="framebuffer"){',gn,"=",gn,".color[0];","}"):xr===ju&&$e("if(",gn,"&&",gn,'._reglType==="framebufferCube"){',gn,"=",gn,".color[0];","}");var En=1;switch(xr){case xf:case ju:var $n=$e.def(gn,"._texture");$e(Nt,".uniform1i(",Wr,",",$n,".bind());"),$e.exit($n,".unbind();");continue;case gs:case Wa:Ft="1i";break;case sl:case Il:Ft="2i",En=2;break;case rl:case Sl:Ft="3i",En=3;break;case ro:case Cu:Ft="4i",En=4;break;case Ro:Ft="1f";break;case Jo:Ft="2f",En=2;break;case ba:Ft="3f",En=3;break;case qa:Ft="4f",En=4;break;case fu:Ft="Matrix2fv";break;case Fl:Ft="Matrix3fv";break;case El:Ft="Matrix4fv";break}if(Ft.charAt(0)==="M"){$e(Nt,".uniform",Ft,"(",Wr,",");var xi=Math.pow(xr-fu+2,2),Ra=Be.global.def("new Float32Array(",xi,")");Array.isArray(gn)?$e("false,(",S(xi,function(Go){return Ra+"["+Go+"]="+gn[Go]}),",",Ra,")"):$e("false,(Array.isArray(",gn,")||",gn," instanceof Float32Array)?",gn,":(",S(xi,function(Go){return Ra+"["+Go+"]="+gn+"["+Go+"]"}),",",Ra,")"),$e(");")}else if(En>1){for(var Pa=[],wo=[],ua=0;ua<En;++ua)Array.isArray(gn)?wo.push(gn[ua]):wo.push($e.def(gn+"["+ua+"]")),Pt&&Pa.push($e.def());Pt&&$e("if(!",Be.batchId,"||",Pa.map(function(Go,xl){return Go+"!=="+wo[xl]}).join("||"),"){",Pa.map(function(Go,xl){return Go+"="+wo[xl]+";"}).join("")),$e(Nt,".uniform",Ft,"(",Wr,",",wo.join(","),");"),Pt&&$e("}")}else{if(Pt){var $a=$e.def();$e("if(!",Be.batchId,"||",$a,"!==",gn,"){",$a,"=",gn,";")}$e(Nt,".uniform",Ft,"(",Wr,",",gn,");"),Pt&&$e("}")}}}function G(Be,$e,ft,Tt){var Lt=Be.shared,Pt=Lt.gl,jt=Lt.draw,Nt=Tt.draw;function Ft(){var En=Nt.elements,$n,xi=$e;return En?((En.contextDep&&Tt.contextDynamic||En.propDep)&&(xi=ft),$n=En.append(Be,xi),Nt.elementsActive&&xi("if("+$n+")"+Pt+".bindBuffer("+_r+","+$n+".buffer.buffer);")):($n=xi.def(),xi($n,"=",jt,".",Xf,";","if(",$n,"){",Pt,".bindBuffer(",_r,",",$n,".buffer.buffer);}","else if(",Lt.vao,".currentVAO){",$n,"=",Be.shared.elements+".getElements("+Lt.vao,".currentVAO.elements);",mi?"":"if("+$n+")"+Pt+".bindBuffer("+_r+","+$n+".buffer.buffer);","}")),$n}function Kt(){var En=Nt.count,$n,xi=$e;return En?((En.contextDep&&Tt.contextDynamic||En.propDep)&&(xi=ft),$n=En.append(Be,xi)):$n=xi.def(jt,".",jv),$n}var Ct=Ft();function sr(En){var $n=Nt[En];return $n?$n.contextDep&&Tt.contextDynamic||$n.propDep?$n.append(Be,ft):$n.append(Be,$e):$e.def(jt,".",En)}var xr=sr(zh),Dr=sr(Oh),fn=Kt();if(typeof fn=="number"){if(fn===0)return}else ft("if(",fn,"){"),ft.exit("}");var Wr,gn;Jn&&(Wr=sr(uu),gn=Be.instancing);var si=Ct+".type",Hn=Nt.elements&&mn(Nt.elements)&&!Nt.vaoActive;function cn(){function En(){ft(gn,".drawElementsInstancedANGLE(",[xr,fn,si,Dr+"<<(("+si+"-"+Fi+")>>1)",Wr],");")}function $n(){ft(gn,".drawArraysInstancedANGLE(",[xr,Dr,fn,Wr],");")}Ct&&Ct!=="null"?Hn?En():(ft("if(",Ct,"){"),En(),ft("}else{"),$n(),ft("}")):$n()}function Rn(){function En(){ft(Pt+".drawElements("+[xr,fn,si,Dr+"<<(("+si+"-"+Fi+")>>1)"]+");")}function $n(){ft(Pt+".drawArrays("+[xr,Dr,fn]+");")}Ct&&Ct!=="null"?Hn?En():(ft("if(",Ct,"){"),En(),ft("}else{"),$n(),ft("}")):$n()}Jn&&(typeof Wr!="number"||Wr>=0)?typeof Wr=="string"?(ft("if(",Wr,">0){"),cn(),ft("}else if(",Wr,"<0){"),Rn(),ft("}")):cn():Rn()}function I(Be,$e,ft,Tt,Lt){var Pt=Ui(),jt=Pt.proc("body",Lt);return Jn&&(Pt.instancing=jt.def(Pt.shared.extensions,".angle_instanced_arrays")),Be(Pt,jt,ft,Tt),Pt.compile().body}function W(Be,$e,ft,Tt){Lu(Be,$e),ft.useVAO?ft.drawVAO?$e(Be.shared.vao,".setVAO(",ft.drawVAO.append(Be,$e),");"):$e(Be.shared.vao,".setVAO(",Be.shared.vao,".targetVAO);"):($e(Be.shared.vao,".setVAO(null);"),H(Be,$e,ft,Tt.attributes,function(){return!0})),R(Be,$e,ft,Tt.uniforms,function(){return!0},!1),G(Be,$e,$e,ft)}function re(Be,$e){var ft=Be.proc("draw",1);Lu(Be,ft),Ms(Be,ft,$e.context),jl(Be,ft,$e.framebuffer),vu(Be,ft,$e),no(Be,ft,$e.state),Qa(Be,ft,$e,!1,!0);var Tt=$e.shader.progVar.append(Be,ft);if(ft(Be.shared.gl,".useProgram(",Tt,".program);"),$e.shader.program)W(Be,ft,$e,$e.shader.program);else{ft(Be.shared.vao,".setVAO(null);");var Lt=Be.global.def("{}"),Pt=ft.def(Tt,".id"),jt=ft.def(Lt,"[",Pt,"]");ft(Be.cond(jt).then(jt,".call(this,a0);").else(jt,"=",Lt,"[",Pt,"]=",Be.link(function(Nt){return I(W,Be,$e,Nt,1)}),"(",Tt,");",jt,".call(this,a0);"))}Object.keys($e.state).length>0&&ft(Be.shared.current,".dirty=true;"),Be.shared.vao&&ft(Be.shared.vao,".setVAO(null);")}function $(Be,$e,ft,Tt){Be.batchId="a1",Lu(Be,$e);function Lt(){return!0}H(Be,$e,ft,Tt.attributes,Lt),R(Be,$e,ft,Tt.uniforms,Lt,!1),G(Be,$e,$e,ft)}function ve(Be,$e,ft,Tt){Lu(Be,$e);var Lt=ft.contextDep,Pt=$e.def(),jt="a0",Nt="a1",Ft=$e.def();Be.shared.props=Ft,Be.batchId=Pt;var Kt=Be.scope(),Ct=Be.scope();$e(Kt.entry,"for(",Pt,"=0;",Pt,"<",Nt,";++",Pt,"){",Ft,"=",jt,"[",Pt,"];",Ct,"}",Kt.exit);function sr(si){return si.contextDep&&Lt||si.propDep}function xr(si){return!sr(si)}if(ft.needsContext&&Ms(Be,Ct,ft.context),ft.needsFramebuffer&&jl(Be,Ct,ft.framebuffer),no(Be,Ct,ft.state,sr),ft.profile&&sr(ft.profile)&&Qa(Be,Ct,ft,!1,!0),Tt)ft.useVAO?ft.drawVAO?sr(ft.drawVAO)?Ct(Be.shared.vao,".setVAO(",ft.drawVAO.append(Be,Ct),");"):Kt(Be.shared.vao,".setVAO(",ft.drawVAO.append(Be,Kt),");"):Kt(Be.shared.vao,".setVAO(",Be.shared.vao,".targetVAO);"):(Kt(Be.shared.vao,".setVAO(null);"),H(Be,Kt,ft,Tt.attributes,xr),H(Be,Ct,ft,Tt.attributes,sr)),R(Be,Kt,ft,Tt.uniforms,xr,!1),R(Be,Ct,ft,Tt.uniforms,sr,!0),G(Be,Kt,Ct,ft);else{var Dr=Be.global.def("{}"),fn=ft.shader.progVar.append(Be,Ct),Wr=Ct.def(fn,".id"),gn=Ct.def(Dr,"[",Wr,"]");Ct(Be.shared.gl,".useProgram(",fn,".program);","if(!",gn,"){",gn,"=",Dr,"[",Wr,"]=",Be.link(function(si){return I($,Be,ft,si,2)}),"(",fn,");}",gn,".call(this,a0[",Pt,"],",Pt,");")}}function Ee(Be,$e){var ft=Be.proc("batch",2);Be.batchId="0",Lu(Be,ft);var Tt=!1,Lt=!0;Object.keys($e.context).forEach(function(Dr){Tt=Tt||$e.context[Dr].propDep}),Tt||(Ms(Be,ft,$e.context),Lt=!1);var Pt=$e.framebuffer,jt=!1;Pt?(Pt.propDep?Tt=jt=!0:Pt.contextDep&&Tt&&(jt=!0),jt||jl(Be,ft,Pt)):jl(Be,ft,null),$e.state.viewport&&$e.state.viewport.propDep&&(Tt=!0);function Nt(Dr){return Dr.contextDep&&Tt||Dr.propDep}vu(Be,ft,$e),no(Be,ft,$e.state,function(Dr){return!Nt(Dr)}),(!$e.profile||!Nt($e.profile))&&Qa(Be,ft,$e,!1,"a1"),$e.contextDep=Tt,$e.needsContext=Lt,$e.needsFramebuffer=jt;var Ft=$e.shader.progVar;if(Ft.contextDep&&Tt||Ft.propDep)ve(Be,ft,$e,null);else{var Kt=Ft.append(Be,ft);if(ft(Be.shared.gl,".useProgram(",Kt,".program);"),$e.shader.program)ve(Be,ft,$e,$e.shader.program);else{ft(Be.shared.vao,".setVAO(null);");var Ct=Be.global.def("{}"),sr=ft.def(Kt,".id"),xr=ft.def(Ct,"[",sr,"]");ft(Be.cond(xr).then(xr,".call(this,a0,a1);").else(xr,"=",Ct,"[",sr,"]=",Be.link(function(Dr){return I(ve,Be,$e,Dr,2)}),"(",Kt,");",xr,".call(this,a0,a1);"))}}Object.keys($e.state).length>0&&ft(Be.shared.current,".dirty=true;"),Be.shared.vao&&ft(Be.shared.vao,".setVAO(null);")}function Oe(Be,$e){var ft=Be.proc("scope",3);Be.batchId="a2";var Tt=Be.shared,Lt=Tt.current;if(Ms(Be,ft,$e.context),$e.framebuffer&&$e.framebuffer.append(Be,ft),kr(Object.keys($e.state)).forEach(function(Nt){var Ft=$e.state[Nt],Kt=Ft.append(Be,ft);yn(Kt)?Kt.forEach(function(Ct,sr){Ei(Ct)?ft.set(Be.next[Nt],"["+sr+"]",Ct):ft.set(Be.next[Nt],"["+sr+"]",Be.link(Ct,{stable:!0}))}):mn(Ft)?ft.set(Tt.next,"."+Nt,Be.link(Kt,{stable:!0})):ft.set(Tt.next,"."+Nt,Kt)}),Qa(Be,ft,$e,!0,!0),[Xf,Oh,jv,uu,zh].forEach(function(Nt){var Ft=$e.draw[Nt];if(Ft){var Kt=Ft.append(Be,ft);Ei(Kt)?ft.set(Tt.draw,"."+Nt,Kt):ft.set(Tt.draw,"."+Nt,Be.link(Kt),{stable:!0})}}),Object.keys($e.uniforms).forEach(function(Nt){var Ft=$e.uniforms[Nt].append(Be,ft);Array.isArray(Ft)&&(Ft="["+Ft.map(function(Kt){return Ei(Kt)?Kt:Be.link(Kt,{stable:!0})})+"]"),ft.set(Tt.uniforms,"["+Be.link(Yt.id(Nt),{stable:!0})+"]",Ft)}),Object.keys($e.attributes).forEach(function(Nt){var Ft=$e.attributes[Nt].append(Be,ft),Kt=Be.scopeAttrib(Nt);Object.keys(new hn).forEach(function(Ct){ft.set(Kt,"."+Ct,Ft[Ct])})}),$e.scopeVAO){var Pt=$e.scopeVAO.append(Be,ft);Ei(Pt)?ft.set(Tt.vao,".targetVAO",Pt):ft.set(Tt.vao,".targetVAO",Be.link(Pt,{stable:!0}))}function jt(Nt){var Ft=$e.shader[Nt];if(Ft){var Kt=Ft.append(Be,ft);Ei(Kt)?ft.set(Tt.shader,"."+Nt,Kt):ft.set(Tt.shader,"."+Nt,Be.link(Kt,{stable:!0}))}}jt(ih),jt(ah),Object.keys($e.state).length>0&&(ft(Lt,".dirty=true;"),ft.exit(Lt,".dirty=true;")),ft("a1(",Be.shared.context,",a0,",Be.batchId,");")}function pt(Be){if(!(typeof Be!="object"||yn(Be))){for(var $e=Object.keys(Be),ft=0;ft<$e.length;++ft)if(h.isDynamic(Be[$e[ft]]))return!0;return!1}}function wt(Be,$e,ft){var Tt=$e.static[ft];if(!Tt||!pt(Tt))return;var Lt=Be.global,Pt=Object.keys(Tt),jt=!1,Nt=!1,Ft=!1,Kt=Be.global.def("{}");Pt.forEach(function(sr){var xr=Tt[sr];if(h.isDynamic(xr)){typeof xr=="function"&&(xr=Tt[sr]=h.unbox(xr));var Dr=zn(xr,null);jt=jt||Dr.thisDep,Ft=Ft||Dr.propDep,Nt=Nt||Dr.contextDep}else{switch(Lt(Kt,".",sr,"="),typeof xr){case"number":Lt(xr);break;case"string":Lt('"',xr,'"');break;case"object":Array.isArray(xr)&&Lt("[",xr.join(),"]");break;default:Lt(Be.link(xr));break}Lt(";")}});function Ct(sr,xr){Pt.forEach(function(Dr){var fn=Tt[Dr];if(h.isDynamic(fn)){var Wr=sr.invoke(xr,fn);xr(Kt,".",Dr,"=",Wr,";")}})}$e.dynamic[ft]=new h.DynamicVariable(Ja,{thisDep:jt,contextDep:Nt,propDep:Ft,ref:Kt,append:Ct}),delete $e.static[ft]}function yt(Be,$e,ft,Tt,Lt){var Pt=Ui();Pt.stats=Pt.link(Lt),Object.keys($e.static).forEach(function(Nt){wt(Pt,$e,Nt)}),Qt.forEach(function(Nt){wt(Pt,Be,Nt)});var jt=hc(Be,$e,ft,Tt,Pt);return jt.shader.program&&(jt.shader.program.attributes.sort(function(Nt,Ft){return Nt.name<Ft.name?-1:1}),jt.shader.program.uniforms.sort(function(Nt,Ft){return Nt.name<Ft.name?-1:1})),re(Pt,jt),Oe(Pt,jt),Ee(Pt,jt),e(Pt.compile(),{destroy:function(){jt.shader.program.destroy()}})}return{next:$i,current:ai,procs:function(){var Be=Ui(),$e=Be.proc("poll"),ft=Be.proc("refresh"),Tt=Be.block();$e(Tt),ft(Tt);var Lt=Be.shared,Pt=Lt.gl,jt=Lt.next,Nt=Lt.current;Tt(Nt,".dirty=false;"),jl(Be,$e),jl(Be,ft,null,!0);var Ft;Jn&&(Ft=Be.link(Jn)),lr.oes_vertex_array_object&&ft(Be.link(lr.oes_vertex_array_object),".bindVertexArrayOES(null);");var Kt=ft.def(Lt.attributes),Ct=ft.def(0),sr=Be.cond(Ct,".buffer");sr.then(Pt,".enableVertexAttribArray(i);",Pt,".bindBuffer(",or,",",Ct,".buffer.buffer);",Pt,".vertexAttribPointer(i,",Ct,".size,",Ct,".type,",Ct,".normalized,",Ct,".stride,",Ct,".offset);").else(Pt,".disableVertexAttribArray(i);",Pt,".vertexAttrib4f(i,",Ct,".x,",Ct,".y,",Ct,".z,",Ct,".w);",Ct,".buffer=null;");var xr=Be.link(Or.maxAttributes,{stable:!0});return ft("for(var i=0;i<",xr,";++i){",Ct,"=",Kt,"[i];",sr,"}"),Jn&&ft("for(var i=0;i<",xr,";++i){",Ft,".vertexAttribDivisorANGLE(i,",Kt,"[i].divisor);","}"),ft(Be.shared.vao,".currentVAO=null;",Be.shared.vao,".setVAO(",Be.shared.vao,".targetVAO);"),Object.keys(Mn).forEach(function(Dr){var fn=Mn[Dr],Wr=Tt.def(jt,".",Dr),gn=Be.block();gn("if(",Wr,"){",Pt,".enable(",fn,")}else{",Pt,".disable(",fn,")}",Nt,".",Dr,"=",Wr,";"),ft(gn),$e("if(",Wr,"!==",Nt,".",Dr,"){",gn,"}")}),Object.keys(Ri).forEach(function(Dr){var fn=Ri[Dr],Wr=ai[Dr],gn,si,Hn=Be.block();if(Hn(Pt,".",fn,"("),yn(Wr)){var cn=Wr.length;gn=Be.global.def(jt,".",Dr),si=Be.global.def(Nt,".",Dr),Hn(S(cn,function(Rn){return gn+"["+Rn+"]"}),");",S(cn,function(Rn){return si+"["+Rn+"]="+gn+"["+Rn+"];"}).join("")),$e("if(",S(cn,function(Rn){return gn+"["+Rn+"]!=="+si+"["+Rn+"]"}).join("||"),"){",Hn,"}")}else gn=Tt.def(jt,".",Dr),si=Tt.def(Nt,".",Dr),Hn(gn,");",Nt,".",Dr,"=",gn,";"),$e("if(",gn,"!==",si,"){",Hn,"}");ft(Hn)}),Be.compile()}(),compile:yt}}function qi(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var xa=34918,Gi=34919,va=35007,mo=function(Ye,Yt){if(!Yt.ext_disjoint_timer_query)return null;var lr=[];function Or(){return lr.pop()||Yt.ext_disjoint_timer_query.createQueryEXT()}function $r(Yn){lr.push(Yn)}var jr=[];function Kr(Yn){var Jn=Or();Yt.ext_disjoint_timer_query.beginQueryEXT(va,Jn),jr.push(Jn),Vn(jr.length-1,jr.length,Yn)}function _n(){Yt.ext_disjoint_timer_query.endQueryEXT(va)}function ti(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Zn=[];function In(){return Zn.pop()||new ti}function ia(Yn){Zn.push(Yn)}var Gn=[];function Vn(Yn,Jn,Cn){var mi=In();mi.startQueryIndex=Yn,mi.endQueryIndex=Jn,mi.sum=0,mi.stats=Cn,Gn.push(mi)}var bn=[],Br=[];function hn(){var Yn,Jn,Cn=jr.length;if(Cn!==0){Br.length=Math.max(Br.length,Cn+1),bn.length=Math.max(bn.length,Cn+1),bn[0]=0,Br[0]=0;var mi=0;for(Yn=0,Jn=0;Jn<jr.length;++Jn){var ai=jr[Jn];Yt.ext_disjoint_timer_query.getQueryObjectEXT(ai,Gi)?(mi+=Yt.ext_disjoint_timer_query.getQueryObjectEXT(ai,xa),$r(ai)):jr[Yn++]=ai,bn[Jn+1]=mi,Br[Jn+1]=Yn}for(jr.length=Yn,Yn=0,Jn=0;Jn<Gn.length;++Jn){var $i=Gn[Jn],Pn=$i.startQueryIndex,Mn=$i.endQueryIndex;$i.sum+=bn[Mn]-bn[Pn];var Ri=Br[Pn],di=Br[Mn];di===Ri?($i.stats.gpuTime+=$i.sum/1e6,ia($i)):($i.startQueryIndex=Ri,$i.endQueryIndex=di,Gn[Yn++]=$i)}Gn.length=Yn}}return{beginQuery:Kr,endQuery:_n,pushScopeStats:Vn,update:hn,getNumPendingQueries:function(){return jr.length},clear:function(){lr.push.apply(lr,jr);for(var Yn=0;Yn<lr.length;Yn++)Yt.ext_disjoint_timer_query.deleteQueryEXT(lr[Yn]);jr.length=0,lr.length=0},restore:function(){jr.length=0,lr.length=0}}},Do=16384,So=256,kn=1024,da=34962,Sa="webglcontextlost",La="webglcontextrestored",As=1,Gs=2,ml=3;function fs(Ye,Yt){for(var lr=0;lr<Ye.length;++lr)if(Ye[lr]===Yt)return lr;return-1}function Xl(Ye){var Yt=_(Ye);if(!Yt)return null;var lr=Yt.gl,Or=lr.getContextAttributes(),$r=lr.isContextLost(),jr=E(lr,Yt);if(!jr)return null;var Kr=x(),_n=qi(),ti=Yt.cachedCode||{},Zn=jr.extensions,In=mo(lr,Zn),ia=d(),Gn=lr.drawingBufferWidth,Vn=lr.drawingBufferHeight,bn={tick:0,time:0,viewportWidth:Gn,viewportHeight:Vn,framebufferWidth:Gn,framebufferHeight:Vn,drawingBufferWidth:Gn,drawingBufferHeight:Vn,pixelRatio:Yt.pixelRatio},Br={},hn={elements:null,primitive:4,count:-1,offset:0,instances:-1},Yn=fr(lr,Zn),Jn=yr(lr,_n,Yt,ai),Cn=Bt(lr,Zn,Jn,_n),mi=Rh(lr,Zn,Yn,_n,Jn,Cn,hn);function ai(I){return mi.destroyBuffer(I)}var $i=Pc(lr,Kr,_n,Yt),Pn=Ph(lr,Zn,Yn,function(){di.procs.poll()},bn,_n,Yt),Mn=Bf(lr,Zn,Yn,_n,Yt),Ri=pv(lr,Zn,Yn,Pn,Mn,_n),di=Ci(lr,Kr,Zn,Yn,Jn,Cn,Pn,Ri,Br,mi,$i,hn,bn,In,ti,Yt),ni=Hs(lr,Ri,di.procs.poll,bn,Or,Zn,Yn),Qn=di.next,Ei=lr.canvas,na=[],Ea=[],pi=[],Ui=[Yt.onDestroy],ha=null;function _a(){if(na.length===0){In&&In.update(),ha=null;return}ha=v.next(_a),vu();for(var I=na.length-1;I>=0;--I){var W=na[I];W&&W(bn,null,0)}lr.flush(),In&&In.update()}function Xa(){!ha&&na.length>0&&(ha=v.next(_a))}function Cs(){ha&&(v.cancel(_a),ha=null)}function cu(I){I.preventDefault(),$r=!0,Cs(),Ea.forEach(function(W){W()})}function co(I){lr.getError(),$r=!1,jr.restore(),$i.restore(),Jn.restore(),Pn.restore(),Mn.restore(),Ri.restore(),mi.restore(),In&&In.restore(),di.procs.refresh(),Xa(),pi.forEach(function(W){W()})}Ei&&(Ei.addEventListener(Sa,cu,!1),Ei.addEventListener(La,co,!1));function hu(){na.length=0,Cs(),Ei&&(Ei.removeEventListener(Sa,cu),Ei.removeEventListener(La,co)),$i.clear(),Ri.clear(),Mn.clear(),mi.clear(),Pn.clear(),Cn.clear(),Jn.clear(),In&&In.clear(),Ui.forEach(function(I){I()})}function ys(I){function W(Pt){var jt=e({},Pt);delete jt.uniforms,delete jt.attributes,delete jt.context,delete jt.vao,"stencil"in jt&&jt.stencil.op&&(jt.stencil.opBack=jt.stencil.opFront=jt.stencil.op,delete jt.stencil.op);function Nt(Ft){if(Ft in jt){var Kt=jt[Ft];delete jt[Ft],Object.keys(Kt).forEach(function(Ct){jt[Ft+"."+Ct]=Kt[Ct]})}}return Nt("blend"),Nt("depth"),Nt("cull"),Nt("stencil"),Nt("polygonOffset"),Nt("scissor"),Nt("sample"),"vao"in Pt&&(jt.vao=Pt.vao),jt}function re(Pt,jt){var Nt={},Ft={};return Object.keys(Pt).forEach(function(Kt){var Ct=Pt[Kt];if(h.isDynamic(Ct)){Ft[Kt]=h.unbox(Ct,Kt);return}else if(jt&&Array.isArray(Ct)){for(var sr=0;sr<Ct.length;++sr)if(h.isDynamic(Ct[sr])){Ft[Kt]=h.unbox(Ct,Kt);return}}Nt[Kt]=Ct}),{dynamic:Ft,static:Nt}}var $=re(I.context||{},!0),ve=re(I.uniforms||{},!0),Ee=re(I.attributes||{},!1),Oe=re(W(I),!1),pt={gpuTime:0,cpuTime:0,count:0},wt=di.compile(Oe,Ee,ve,$,pt),yt=wt.draw,Be=wt.batch,$e=wt.scope,ft=[];function Tt(Pt){for(;ft.length<Pt;)ft.push(null);return ft}function Lt(Pt,jt){var Nt;if(typeof Pt=="function")return $e.call(this,null,Pt,0);if(typeof jt=="function")if(typeof Pt=="number")for(Nt=0;Nt<Pt;++Nt)$e.call(this,null,jt,Nt);else if(Array.isArray(Pt))for(Nt=0;Nt<Pt.length;++Nt)$e.call(this,Pt[Nt],jt,Nt);else return $e.call(this,Pt,jt,0);else if(typeof Pt=="number"){if(Pt>0)return Be.call(this,Tt(Pt|0),Pt|0)}else if(Array.isArray(Pt)){if(Pt.length)return Be.call(this,Pt,Pt.length)}else return yt.call(this,Pt)}return e(Lt,{stats:pt,destroy:function(){wt.destroy()}})}var Zl=Ri.setFBO=ys({framebuffer:h.define.call(null,As,"framebuffer")});function Zf(I,W){var re=0;di.procs.poll();var $=W.color;$&&(lr.clearColor(+$[0]||0,+$[1]||0,+$[2]||0,+$[3]||0),re|=Do),"depth"in W&&(lr.clearDepth(+W.depth),re|=So),"stencil"in W&&(lr.clearStencil(W.stencil|0),re|=kn),lr.clear(re)}function hc(I){if("framebuffer"in I)if(I.framebuffer&&I.framebuffer_reglType==="framebufferCube")for(var W=0;W<6;++W)Zl(e({framebuffer:I.framebuffer.faces[W]},I),Zf);else Zl(I,Zf);else Zf(null,I)}function Ms(I){na.push(I);function W(){var re=fs(na,I);function $(){var ve=fs(na,$);na[ve]=na[na.length-1],na.length-=1,na.length<=0&&Cs()}na[re]=$}return Xa(),{cancel:W}}function jl(){var I=Qn.viewport,W=Qn.scissor_box;I[0]=I[1]=W[0]=W[1]=0,bn.viewportWidth=bn.framebufferWidth=bn.drawingBufferWidth=I[2]=W[2]=lr.drawingBufferWidth,bn.viewportHeight=bn.framebufferHeight=bn.drawingBufferHeight=I[3]=W[3]=lr.drawingBufferHeight}function vu(){bn.tick+=1,bn.time=Lu(),jl(),di.procs.poll()}function no(){Pn.refresh(),jl(),di.procs.refresh(),In&&In.update()}function Lu(){return(d()-ia)/1e3}no();function Qa(I,W){var re;switch(I){case"frame":return Ms(W);case"lost":re=Ea;break;case"restore":re=pi;break;case"destroy":re=Ui;break;default:}return re.push(W),{cancel:function(){for(var $=0;$<re.length;++$)if(re[$]===W){re[$]=re[re.length-1],re.pop();return}}}}function H(){return ti}function R(I){Object.entries(I).forEach(function(W){ti[W[0]]=W[1]})}var G=e(ys,{clear:hc,prop:h.define.bind(null,As),context:h.define.bind(null,Gs),this:h.define.bind(null,ml),draw:ys({}),buffer:function(I){return Jn.create(I,da,!1,!1)},elements:function(I){return Cn.create(I,!1)},texture:Pn.create2D,cube:Pn.createCube,renderbuffer:Mn.create,framebuffer:Ri.create,framebufferCube:Ri.createCube,vao:mi.createVAO,attributes:Or,frame:Ms,on:Qa,limits:Yn,hasExtension:function(I){return Yn.extensions.indexOf(I.toLowerCase())>=0},read:ni,destroy:hu,_gl:lr,_refresh:no,poll:function(){vu(),In&&In.update()},now:Lu,stats:_n,getCachedCode:H,preloadCachedCode:R});return Yt.onDone(null,G),G}return Xl})});var cze=ie((Rgr,fze)=>{"use strict";var zBt=pg();fze.exports=function(t){if(t?typeof t=="string"&&(t={container:t}):t={},lze(t)?t={container:t}:OBt(t)?t={container:t}:BBt(t)?t={gl:t}:t=zBt(t,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),t.pixelRatio||(t.pixelRatio=window.pixelRatio||1),t.gl)return t.gl;if(t.canvas&&(t.container=t.canvas.parentNode),t.container){if(typeof t.container=="string"){var r=document.querySelector(t.container);if(!r)throw Error("Element "+t.container+" is not found");t.container=r}lze(t.container)?(t.canvas=t.container,t.container=t.canvas.parentNode):t.canvas||(t.canvas=uze(),t.container.appendChild(t.canvas),sze(t))}else if(!t.canvas)if(typeof document!="undefined")t.container=document.body||document.documentElement,t.canvas=uze(),t.container.appendChild(t.canvas),sze(t);else throw Error("Not DOM environment. Use headless-gl.");return t.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(i){try{t.gl=t.canvas.getContext(i,t.attrs)}catch(n){}return t.gl}),t.gl};function sze(e){if(e.container)if(e.container==document.body)document.body.style.width||(e.canvas.width=e.width||e.pixelRatio*window.innerWidth),document.body.style.height||(e.canvas.height=e.height||e.pixelRatio*window.innerHeight);else{var t=e.container.getBoundingClientRect();e.canvas.width=e.width||t.right-t.left,e.canvas.height=e.height||t.bottom-t.top}}function lze(e){return typeof e.getContext=="function"&&"width"in e&&"height"in e}function OBt(e){return typeof e.nodeName=="string"&&typeof e.appendChild=="function"&&typeof e.getBoundingClientRect=="function"}function BBt(e){return typeof e.drawArrays=="function"||typeof e.drawElements=="function"}function uze(){var e=document.createElement("canvas");return e.style.position="absolute",e.style.top=0,e.style.left=0,e}});var vze=ie((Dgr,hze)=>{"use strict";var NBt=oX(),UBt=[32,126];hze.exports=VBt;function VBt(e){e=e||{};var t=e.shape?e.shape:e.canvas?[e.canvas.width,e.canvas.height]:[512,512],r=e.canvas||document.createElement("canvas"),i=e.font,n=typeof e.step=="number"?[e.step,e.step]:e.step||[32,32],a=e.chars||UBt;if(i&&typeof i!="string"&&(i=NBt(i)),!Array.isArray(a))a=String(a).split("");else if(a.length===2&&typeof a[0]=="number"&&typeof a[1]=="number"){for(var o=[],s=a[0],l=0;s<=a[1];s++)o[l++]=String.fromCharCode(s);a=o}t=t.slice(),r.width=t[0],r.height=t[1];var u=r.getContext("2d");u.fillStyle="#000",u.fillRect(0,0,r.width,r.height),u.font=i,u.textAlign="center",u.textBaseline="middle",u.fillStyle="#fff";for(var f=n[0]/2,c=n[1]/2,s=0;s<a.length;s++)u.fillText(a[s],f,c),(f+=n[0])>t[0]-n[0]/2&&(f=n[0]/2,c+=n[1]);return r}});var cX=ie(ff=>{"use strict";"use restrict";var fX=32;ff.INT_BITS=fX;ff.INT_MAX=2147483647;ff.INT_MIN=-1<<fX-1;ff.sign=function(e){return(e>0)-(e<0)};ff.abs=function(e){var t=e>>fX-1;return(e^t)-t};ff.min=function(e,t){return t^(e^t)&-(e<t)};ff.max=function(e,t){return e^(e^t)&-(e<t)};ff.isPow2=function(e){return!(e&e-1)&&!!e};ff.log2=function(e){var t,r;return t=(e>65535)<<4,e>>>=t,r=(e>255)<<3,e>>>=r,t|=r,r=(e>15)<<2,e>>>=r,t|=r,r=(e>3)<<1,e>>>=r,t|=r,t|e>>1};ff.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0};ff.popCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24};function dze(e){var t=32;return e&=-e,e&&t--,e&65535&&(t-=16),e&16711935&&(t-=8),e&252645135&&(t-=4),e&858993459&&(t-=2),e&1431655765&&(t-=1),t}ff.countTrailingZeros=dze;ff.nextPow2=function(e){return e+=e===0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1};ff.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)};ff.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,27030>>>e&1};var g5=new Array(256);(function(e){for(var t=0;t<256;++t){var r=t,i=t,n=7;for(r>>>=1;r;r>>>=1)i<<=1,i|=r&1,--n;e[t]=i<<n&255}})(g5);ff.reverse=function(e){return g5[e&255]<<24|g5[e>>>8&255]<<16|g5[e>>>16&255]<<8|g5[e>>>24&255]};ff.interleave2=function(e,t){return e&=65535,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1};ff.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=(e|e>>>1)&858993459,e=(e|e>>>2)&252645135,e=(e|e>>>4)&16711935,e=(e|e>>>16)&65535,e<<16>>16};ff.interleave3=function(e,t,r){return e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,e|=t<<1,r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,e|r<<2};ff.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=(e|e>>>2)&3272356035,e=(e|e>>>4)&251719695,e=(e|e>>>8)&4278190335,e=(e|e>>>16)&1023,e<<22>>22};ff.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>dze(e)+1}});var yze=ie((Fgr,gze)=>{"use strict";function pze(e,t,r){var i=e[r]|0;if(i<=0)return[];var n=new Array(i),a;if(r===e.length-1)for(a=0;a<i;++a)n[a]=t;else for(a=0;a<i;++a)n[a]=pze(e,t,r+1);return n}function HBt(e,t){var r,i;for(r=new Array(e),i=0;i<e;++i)r[i]=t;return r}function GBt(e,t){switch(typeof t=="undefined"&&(t=0),typeof e){case"number":if(e>0)return HBt(e|0,t);break;case"object":if(typeof e.length=="number")return pze(e,t,0);break}return[]}gze.exports=GBt});var Rze=ie(hs=>{"use strict";var w1=cX(),Ah=yze(),mze=o_().Buffer;window.__TYPEDARRAY_POOL||(window.__TYPEDARRAY_POOL={UINT8:Ah([32,0]),UINT16:Ah([32,0]),UINT32:Ah([32,0]),BIGUINT64:Ah([32,0]),INT8:Ah([32,0]),INT16:Ah([32,0]),INT32:Ah([32,0]),BIGINT64:Ah([32,0]),FLOAT:Ah([32,0]),DOUBLE:Ah([32,0]),DATA:Ah([32,0]),UINT8C:Ah([32,0]),BUFFER:Ah([32,0])});var YBt=typeof Uint8ClampedArray!="undefined",WBt=typeof BigUint64Array!="undefined",XBt=typeof BigInt64Array!="undefined",Df=window.__TYPEDARRAY_POOL;Df.UINT8C||(Df.UINT8C=Ah([32,0]));Df.BIGUINT64||(Df.BIGUINT64=Ah([32,0]));Df.BIGINT64||(Df.BIGINT64=Ah([32,0]));Df.BUFFER||(Df.BUFFER=Ah([32,0]));var xI=Df.DATA,_I=Df.BUFFER;hs.free=function(t){if(mze.isBuffer(t))_I[w1.log2(t.length)].push(t);else{if(Object.prototype.toString.call(t)!=="[object ArrayBuffer]"&&(t=t.buffer),!t)return;var r=t.length||t.byteLength,i=w1.log2(r)|0;xI[i].push(t)}};function xze(e){if(e){var t=e.length||e.byteLength,r=w1.log2(t);xI[r].push(e)}}function ZBt(e){xze(e.buffer)}hs.freeUint8=hs.freeUint16=hs.freeUint32=hs.freeBigUint64=hs.freeInt8=hs.freeInt16=hs.freeInt32=hs.freeBigInt64=hs.freeFloat32=hs.freeFloat=hs.freeFloat64=hs.freeDouble=hs.freeUint8Clamped=hs.freeDataView=ZBt;hs.freeArrayBuffer=xze;hs.freeBuffer=function(t){_I[w1.log2(t.length)].push(t)};hs.malloc=function(t,r){if(r===void 0||r==="arraybuffer")return yd(t);switch(r){case"uint8":return hX(t);case"uint16":return _ze(t);case"uint32":return bze(t);case"int8":return wze(t);case"int16":return Tze(t);case"int32":return Aze(t);case"float":case"float32":return Mze(t);case"double":case"float64":return Sze(t);case"uint8_clamped":return Eze(t);case"bigint64":return Cze(t);case"biguint64":return kze(t);case"buffer":return Pze(t);case"data":case"dataview":return Lze(t);default:return null}return null};function yd(t){var t=w1.nextPow2(t),r=w1.log2(t),i=xI[r];return i.length>0?i.pop():new ArrayBuffer(t)}hs.mallocArrayBuffer=yd;function hX(e){return new Uint8Array(yd(e),0,e)}hs.mallocUint8=hX;function _ze(e){return new Uint16Array(yd(2*e),0,e)}hs.mallocUint16=_ze;function bze(e){return new Uint32Array(yd(4*e),0,e)}hs.mallocUint32=bze;function wze(e){return new Int8Array(yd(e),0,e)}hs.mallocInt8=wze;function Tze(e){return new Int16Array(yd(2*e),0,e)}hs.mallocInt16=Tze;function Aze(e){return new Int32Array(yd(4*e),0,e)}hs.mallocInt32=Aze;function Mze(e){return new Float32Array(yd(4*e),0,e)}hs.mallocFloat32=hs.mallocFloat=Mze;function Sze(e){return new Float64Array(yd(8*e),0,e)}hs.mallocFloat64=hs.mallocDouble=Sze;function Eze(e){return YBt?new Uint8ClampedArray(yd(e),0,e):hX(e)}hs.mallocUint8Clamped=Eze;function kze(e){return WBt?new BigUint64Array(yd(8*e),0,e):null}hs.mallocBigUint64=kze;function Cze(e){return XBt?new BigInt64Array(yd(8*e),0,e):null}hs.mallocBigInt64=Cze;function Lze(e){return new DataView(yd(e),0,e)}hs.mallocDataView=Lze;function Pze(e){e=w1.nextPow2(e);var t=w1.log2(e),r=_I[t];return r.length>0?r.pop():new mze(e)}hs.mallocBuffer=Pze;hs.clearCache=function(){for(var t=0;t<32;++t)Df.UINT8[t].length=0,Df.UINT16[t].length=0,Df.UINT32[t].length=0,Df.INT8[t].length=0,Df.INT16[t].length=0,Df.INT32[t].length=0,Df.FLOAT[t].length=0,Df.DOUBLE[t].length=0,Df.BIGUINT64[t].length=0,Df.BIGINT64[t].length=0,Df.UINT8C[t].length=0,xI[t].length=0,_I[t].length=0}});var Ize=ie((zgr,Dze)=>{"use strict";var jBt=Object.prototype.toString;Dze.exports=function(e){var t;return jBt.call(e)==="[object Object]"&&(t=Object.getPrototypeOf(e),t===null||t===Object.getPrototypeOf({}))}});var vX=ie((Ogr,Fze)=>{Fze.exports=function(t,r){r||(r=[0,""]),t=String(t);var i=parseFloat(t,10);return r[0]=i,r[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",r}});var pX=ie((Bgr,zze)=>{"use strict";var KBt=vX();zze.exports=qze;var y5=96;function dX(e,t){var r=KBt(getComputedStyle(e).getPropertyValue(t));return r[0]*qze(r[1],e)}function JBt(e,t){var r=document.createElement("div");r.style["font-size"]="128"+e,t.appendChild(r);var i=dX(r,"font-size")/128;return t.removeChild(r),i}function qze(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),(t===window||t===document)&&(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return JBt(e,t);case"em":return dX(t,"font-size");case"rem":return dX(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return y5;case"cm":return y5/2.54;case"mm":return y5/25.4;case"pt":return y5/72;case"pc":return y5/6}return 1}});var Nze=ie((Ngr,Bze)=>{"use strict";Bze.exports=TI;var QBt=TI.canvas=document.createElement("canvas"),bI=QBt.getContext("2d"),Oze=wI([32,126]);TI.createPairs=wI;TI.ascii=Oze;function TI(e,t){Array.isArray(e)&&(e=e.join(", "));var r={},i,n=16,a=.05;t&&(t.length===2&&typeof t[0]=="number"?i=wI(t):Array.isArray(t)?i=t:(t.o?i=wI(t.o):t.pairs&&(i=t.pairs),t.fontSize&&(n=t.fontSize),t.threshold!=null&&(a=t.threshold))),i||(i=Oze),bI.font=n+"px "+e;for(var o=0;o<i.length;o++){var s=i[o],l=bI.measureText(s[0]).width+bI.measureText(s[1]).width,u=bI.measureText(s).width;if(Math.abs(l-u)>n*a){var f=(u-l)/n;r[s]=f*1e3}}return r}function wI(e){for(var t=[],r=e[0];r<=e[1];r++)for(var i=String.fromCharCode(r),n=e[0];n<e[1];n++){var a=String.fromCharCode(n),o=i+a;t.push(o)}return t}});var Gze=ie((Ugr,Hze)=>{"use strict";Hze.exports=T1;T1.canvas=document.createElement("canvas");T1.cache={};function T1(o,t){t||(t={}),(typeof o=="string"||Array.isArray(o))&&(t.family=o);var r=Array.isArray(t.family)?t.family.join(", "):t.family;if(!r)throw Error("`family` must be defined");var i=t.size||t.fontSize||t.em||48,n=t.weight||t.fontWeight||"",a=t.style||t.fontStyle||"",o=[a,n,i].join(" ")+"px "+r,s=t.origin||"top";if(T1.cache[r]&&i<=T1.cache[r].em)return Uze(T1.cache[r],s);var l=t.canvas||T1.canvas,u=l.getContext("2d"),f={upper:t.upper!==void 0?t.upper:"H",lower:t.lower!==void 0?t.lower:"x",descent:t.descent!==void 0?t.descent:"p",ascent:t.ascent!==void 0?t.ascent:"h",tittle:t.tittle!==void 0?t.tittle:"i",overshoot:t.overshoot!==void 0?t.overshoot:"O"},c=Math.ceil(i*1.5);l.height=c,l.width=c*.5,u.font=o;var h="H",v={top:0};u.clearRect(0,0,c,c),u.textBaseline="top",u.fillStyle="black",u.fillText(h,0,0);var d=yg(u.getImageData(0,0,c,c));u.clearRect(0,0,c,c),u.textBaseline="bottom",u.fillText(h,0,c);var x=yg(u.getImageData(0,0,c,c));v.lineHeight=v.bottom=c-x+d,u.clearRect(0,0,c,c),u.textBaseline="alphabetic",u.fillText(h,0,c);var b=yg(u.getImageData(0,0,c,c)),p=c-b-1+d;v.baseline=v.alphabetic=p,u.clearRect(0,0,c,c),u.textBaseline="middle",u.fillText(h,0,c*.5);var w=yg(u.getImageData(0,0,c,c));v.median=v.middle=c-w-1+d-c*.5,u.clearRect(0,0,c,c),u.textBaseline="hanging",u.fillText(h,0,c*.5);var A=yg(u.getImageData(0,0,c,c));v.hanging=c-A-1+d-c*.5,u.clearRect(0,0,c,c),u.textBaseline="ideographic",u.fillText(h,0,c);var T=yg(u.getImageData(0,0,c,c));if(v.ideographic=c-T-1+d,f.upper&&(u.clearRect(0,0,c,c),u.textBaseline="top",u.fillText(f.upper,0,0),v.upper=yg(u.getImageData(0,0,c,c)),v.capHeight=v.baseline-v.upper),f.lower&&(u.clearRect(0,0,c,c),u.textBaseline="top",u.fillText(f.lower,0,0),v.lower=yg(u.getImageData(0,0,c,c)),v.xHeight=v.baseline-v.lower),f.tittle&&(u.clearRect(0,0,c,c),u.textBaseline="top",u.fillText(f.tittle,0,0),v.tittle=yg(u.getImageData(0,0,c,c))),f.ascent&&(u.clearRect(0,0,c,c),u.textBaseline="top",u.fillText(f.ascent,0,0),v.ascent=yg(u.getImageData(0,0,c,c))),f.descent&&(u.clearRect(0,0,c,c),u.textBaseline="top",u.fillText(f.descent,0,0),v.descent=Vze(u.getImageData(0,0,c,c))),f.overshoot){u.clearRect(0,0,c,c),u.textBaseline="top",u.fillText(f.overshoot,0,0);var k=Vze(u.getImageData(0,0,c,c));v.overshoot=k-p}for(var _ in v)v[_]/=i;return v.em=i,T1.cache[r]=v,Uze(v,s)}function Uze(e,t){var r={};typeof t=="string"&&(t=e[t]);for(var i in e)i!=="em"&&(r[i]=e[i]-t);return r}function yg(e){for(var t=e.height,r=e.data,i=3;i<r.length;i+=4)if(r[i]!==0)return Math.floor((i-3)*.25/t)}function Vze(e){for(var t=e.height,r=e.data,i=r.length-1;i>0;i-=4)if(r[i]!==0)return Math.floor((i-3)*.25/t)}});var Zze=ie((Vgr,Xze)=>{"use strict";var iT=oze(),$Bt=pg(),eNt=uX(),tNt=cze(),rNt=WW(),gX=l1(),nNt=vze(),A1=Rze(),iNt=W3(),aNt=Ize(),oNt=vX(),sNt=pX(),lNt=Nze(),uNt=lf(),fNt=Gze(),cNt=G_(),hNt=cX(),Yze=hNt.nextPow2,Wze=new rNt,MI=!1;document.body&&(AI=document.body.appendChild(document.createElement("div")),AI.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(AI).fontStretch&&(MI=!0),document.body.removeChild(AI));var AI,el=function(t){vNt(t)?(t={regl:t},this.gl=t.regl._gl):this.gl=tNt(t),this.shader=Wze.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=t.regl||eNt({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),Wze.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(aNt(t)?t:{})};el.prototype.createShader=function(){var t=this.regl,r=t({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:t.prop("count"),offset:t.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:t.this("sizeBuffer")},width:{offset:0,stride:8,buffer:t.this("sizeBuffer")},char:t.this("charBuffer"),position:t.this("position")},uniforms:{atlasSize:function(n,a){return[a.atlas.width,a.atlas.height]},atlasDim:function(n,a){return[a.atlas.cols,a.atlas.rows]},atlas:function(n,a){return a.atlas.texture},charStep:function(n,a){return a.atlas.step},em:function(n,a){return a.atlas.em},color:t.prop("color"),opacity:t.prop("opacity"),viewport:t.this("viewportArray"),scale:t.this("scale"),align:t.prop("align"),baseline:t.prop("baseline"),translate:t.this("translate"),positionOffset:t.prop("positionOffset")},primitive:"points",viewport:t.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),i={};return{regl:t,draw:r,atlas:i}};el.prototype.update=function(t){var r=this;if(typeof t=="string")t={text:t};else if(!t)return;t=$Bt(t,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),t.opacity!=null&&(Array.isArray(t.opacity)?this.opacity=t.opacity.map(function(ue){return parseFloat(ue)}):this.opacity=parseFloat(t.opacity)),t.viewport!=null&&(this.viewport=iNt(t.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),t.kerning!=null&&(this.kerning=t.kerning),t.offset!=null&&(typeof t.offset=="number"&&(t.offset=[t.offset,0]),this.positionOffset=cNt(t.offset)),t.direction&&(this.direction=t.direction),t.range&&(this.range=t.range,this.scale=[1/(t.range[2]-t.range[0]),1/(t.range[3]-t.range[1])],this.translate=[-t.range[0],-t.range[1]]),t.scale&&(this.scale=t.scale),t.translate&&(this.translate=t.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!t.font&&(t.font=el.baseFontSize+"px sans-serif");var i=!1,n=!1;if(t.font&&(Array.isArray(t.font)?t.font:[t.font]).forEach(function(ue,ee){if(typeof ue=="string")try{ue=iT.parse(ue)}catch(_e){ue=iT.parse(el.baseFontSize+"px "+ue)}else{var Z=ue.style,oe=ue.weight,ce=ue.stretch,le=ue.variant;ue=iT.parse(iT.stringify(ue)),Z&&(ue.style=Z),oe&&(ue.weight=oe),ce&&(ue.stretch=ce),le&&(ue.variant=le)}var me=iT.stringify({size:el.baseFontSize,family:ue.family,stretch:MI?ue.stretch:void 0,variant:ue.variant,weight:ue.weight,style:ue.style}),he=oNt(ue.size),te=Math.round(he[0]*sNt(he[1]));if(te!==r.fontSize[ee]&&(n=!0,r.fontSize[ee]=te),(!r.font[ee]||me!=r.font[ee].baseString)&&(i=!0,r.font[ee]=el.fonts[me],!r.font[ee])){var ge=ue.family.join(", "),ae=[ue.style];ue.style!=ue.variant&&ae.push(ue.variant),ue.variant!=ue.weight&&ae.push(ue.weight),MI&&ue.weight!=ue.stretch&&ae.push(ue.stretch),r.font[ee]={baseString:me,family:ge,weight:ue.weight,stretch:ue.stretch,style:ue.style,variant:ue.variant,width:{},kerning:{},metrics:fNt(ge,{origin:"top",fontSize:el.baseFontSize,fontStyle:ae.join(" ")})},el.fonts[me]=r.font[ee]}}),(i||n)&&this.font.forEach(function(ue,ee){var Z=iT.stringify({size:r.fontSize[ee],family:ue.family,stretch:MI?ue.stretch:void 0,variant:ue.variant,weight:ue.weight,style:ue.style});if(r.fontAtlas[ee]=r.shader.atlas[Z],!r.fontAtlas[ee]){var oe=ue.metrics;r.shader.atlas[Z]=r.fontAtlas[ee]={fontString:Z,step:Math.ceil(r.fontSize[ee]*oe.bottom*.5)*2,em:r.fontSize[ee],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:r.regl.texture()}}t.text==null&&(t.text=r.text)}),typeof t.text=="string"&&t.position&&t.position.length>2){for(var a=Array(t.position.length*.5),o=0;o<a.length;o++)a[o]=t.text;t.text=a}var s;if(t.text!=null||i){if(this.textOffsets=[0],Array.isArray(t.text)){this.count=t.text[0].length,this.counts=[this.count];for(var l=1;l<t.text.length;l++)this.textOffsets[l]=this.textOffsets[l-1]+t.text[l-1].length,this.count+=t.text[l].length,this.counts.push(t.text[l].length);this.text=t.text.join("")}else this.text=t.text,this.count=this.text.length,this.counts=[this.count];s=[],this.font.forEach(function(ue,ee){el.atlasContext.font=ue.baseString;for(var Z=r.fontAtlas[ee],oe=0;oe<r.text.length;oe++){var ce=r.text.charAt(oe);if(Z.ids[ce]==null&&(Z.ids[ce]=Z.chars.length,Z.chars.push(ce),s.push(ce)),ue.width[ce]==null&&(ue.width[ce]=el.atlasContext.measureText(ce).width/el.baseFontSize,r.kerning)){var le=[];for(var me in ue.width)le.push(me+ce,ce+me);uNt(ue.kerning,lNt(ue.family,{pairs:le}))}}})}if(t.position)if(t.position.length>2){for(var u=!t.position[0].length,f=A1.mallocFloat(this.count*2),c=0,h=0;c<this.counts.length;c++){var v=this.counts[c];if(u)for(var d=0;d<v;d++)f[h++]=t.position[c*2],f[h++]=t.position[c*2+1];else for(var x=0;x<v;x++)f[h++]=t.position[c][0],f[h++]=t.position[c][1]}this.position.call?this.position({type:"float",data:f}):this.position=this.regl.buffer({type:"float",data:f}),A1.freeFloat(f)}else this.position.destroy&&this.position.destroy(),this.position={constant:t.position};if(t.text||i){var b=A1.mallocUint8(this.count),p=A1.mallocFloat(this.count*2);this.textWidth=[];for(var w=0,A=0;w<this.counts.length;w++){for(var T=this.counts[w],k=this.font[w]||this.font[0],_=this.fontAtlas[w]||this.fontAtlas[0],E=0;E<T;E++){var S=this.text.charAt(A),g=this.text.charAt(A-1);if(b[A]=_.ids[S],p[A*2]=k.width[S],E){var C=p[A*2-2],M=p[A*2],P=p[A*2-1],D=P+C*.5+M*.5;if(this.kerning){var q=k.kerning[g+S];q&&(D+=q*.001)}p[A*2+1]=D}else p[A*2+1]=p[A*2]*.5;A++}this.textWidth.push(p.length?p[A*2-2]*.5+p[A*2-1]:0)}t.align||(t.align=this.align),this.charBuffer({data:b,type:"uint8",usage:"stream"}),this.sizeBuffer({data:p,type:"float",usage:"stream"}),A1.freeUint8(b),A1.freeFloat(p),s.length&&this.font.forEach(function(ue,ee){var Z=r.fontAtlas[ee],oe=Z.step,ce=Math.floor(el.maxAtlasSize/oe),le=Math.min(ce,Z.chars.length),me=Math.ceil(Z.chars.length/le),he=Yze(le*oe),te=Yze(me*oe);Z.width=he,Z.height=te,Z.rows=me,Z.cols=le,Z.em&&Z.texture({data:nNt({canvas:el.atlasCanvas,font:Z.fontString,chars:Z.chars,shape:[he,te],step:[oe,oe]})})})}if(t.align&&(this.align=t.align,this.alignOffset=this.textWidth.map(function(ue,ee){var Z=Array.isArray(r.align)?r.align.length>1?r.align[ee]:r.align[0]:r.align;if(typeof Z=="number")return Z;switch(Z){case"right":case"end":return-ue;case"center":case"centre":case"middle":return-ue*.5}return 0})),this.baseline==null&&t.baseline==null&&(t.baseline=0),t.baseline!=null&&(this.baseline=t.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(ue,ee){var Z=(r.font[ee]||r.font[0]).metrics,oe=0;return oe+=Z.bottom*.5,typeof ue=="number"?oe+=ue-Z.baseline:oe+=-Z[ue],oe*=-1,oe})),t.color!=null)if(t.color||(t.color="transparent"),typeof t.color=="string"||!isNaN(t.color))this.color=gX(t.color,"uint8");else{var O;if(typeof t.color[0]=="number"&&t.color.length>this.counts.length){var U=t.color.length;O=A1.mallocUint8(U);for(var B=(t.color.subarray||t.color.slice).bind(t.color),F=0;F<U;F+=4)O.set(gX(B(F,F+4),"uint8"),F)}else{var N=t.color.length;O=A1.mallocUint8(N*4);for(var X=0;X<N;X++)O.set(gX(t.color[X]||0,"uint8"),X*4)}this.color=O}if(t.position||t.text||t.color||t.baseline||t.align||t.font||t.offset||t.opacity){var K=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(K){var ne=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(ne);for(var fe=0;fe<this.batch.length;fe++)this.batch[fe]={count:this.counts.length>1?this.counts[fe]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[fe]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(fe*4,fe*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[fe]:this.opacity,baseline:this.baselineOffset[fe]!=null?this.baselineOffset[fe]:this.baselineOffset[0],align:this.align?this.alignOffset[fe]!=null?this.alignOffset[fe]:this.alignOffset[0]:0,atlas:this.fontAtlas[fe]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(fe*2,fe*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}};el.prototype.destroy=function(){};el.prototype.kerning=!0;el.prototype.position={constant:new Float32Array(2)};el.prototype.translate=null;el.prototype.scale=null;el.prototype.font=null;el.prototype.text="";el.prototype.positionOffset=[0,0];el.prototype.opacity=1;el.prototype.color=new Uint8Array([0,0,0,255]);el.prototype.alignOffset=[0,0];el.maxAtlasSize=1024;el.atlasCanvas=document.createElement("canvas");el.atlasContext=el.atlasCanvas.getContext("2d",{alpha:!1});el.baseFontSize=64;el.fonts={};function vNt(e){return typeof e=="function"&&e._gl&&e.prop&&e.texture&&e.buffer}Xze.exports=el});var SI=ie((Hgr,jze)=>{"use strict";var dNt=oD(),pNt=uX();jze.exports=function(t,r,i){var n=t._fullLayout,a=!0;return n._glcanvas.each(function(o){if(o.regl){o.regl.preloadCachedCode(i);return}if(!(o.pick&&!n._has("parcoords"))){try{o.regl=pNt({canvas:this,attributes:{antialias:!o.pick,preserveDrawingBuffer:!0},pixelRatio:t._context.plotGlPixelRatio||window.devicePixelRatio,extensions:r||[],cachedCode:i||{}})}catch(s){a=!1}o.regl||(a=!1),a&&this.addEventListener("webglcontextlost",function(s){t&&t.emit&&t.emit("plotly_webglcontextlost",{event:s,layer:o.key})},!1)}}),a||dNt({container:n._glcontainer.node()}),a}});var xX=ie((mX,eOe)=>{"use strict";var Kze=mW(),Jze=jW(),gNt=Uqe(),Qze=Zze(),yX=Zt(),yNt=n0().selectMode,mNt=SI(),xNt=Ks(),_Nt=uB(),bNt=dW().styleTextSelection,$ze={};function wNt(e,t,r,i){var n=e._size,a=e.width*i,o=e.height*i,s=n.l*i,l=n.b*i,u=n.r*i,f=n.t*i,c=n.w*i,h=n.h*i;return[s+t.domain[0]*c,l+r.domain[0]*h,a-u-(1-t.domain[1])*c,o-f-(1-r.domain[1])*h]}var mX=eOe.exports=function(t,r,i){if(i.length){var n=t._fullLayout,a=r._scene,o=r.xaxis,s=r.yaxis,l,u;if(a){var f=mNt(t,["ANGLE_instanced_arrays","OES_element_index_uint"],$ze);if(!f){a.init();return}var c=a.count,h=n._glcanvas.data()[0].regl;if(_Nt(t,r,i),a.dirty){if((a.line2d||a.error2d)&&!(a.scatter2d||a.fill2d||a.glText)&&h.clear({}),a.error2d===!0&&(a.error2d=gNt(h)),a.line2d===!0&&(a.line2d=Jze(h)),a.scatter2d===!0&&(a.scatter2d=Kze(h)),a.fill2d===!0&&(a.fill2d=Jze(h)),a.glText===!0)for(a.glText=new Array(c),l=0;l<c;l++)a.glText[l]=new Qze(h);if(a.glText){if(c>a.glText.length){var v=c-a.glText.length;for(l=0;l<v;l++)a.glText.push(new Qze(h))}else if(c<a.glText.length){var d=a.glText.length-c,x=a.glText.splice(c,d);x.forEach(function(N){N.destroy()})}for(l=0;l<c;l++)a.glText[l].update(a.textOptions[l])}if(a.line2d&&(a.line2d.update(a.lineOptions),a.lineOptions=a.lineOptions.map(function(N){if(N&&N.positions){for(var X=N.positions,K=0;K<X.length&&(isNaN(X[K])||isNaN(X[K+1]));)K+=2;for(var ne=X.length-2;ne>K&&(isNaN(X[ne])||isNaN(X[ne+1]));)ne-=2;N.positions=X.slice(K,ne+2)}return N}),a.line2d.update(a.lineOptions)),a.error2d){var b=(a.errorXOptions||[]).concat(a.errorYOptions||[]);a.error2d.update(b)}a.scatter2d&&a.scatter2d.update(a.markerOptions),a.fillOrder=yX.repeat(null,c),a.fill2d&&(a.fillOptions=a.fillOptions.map(function(N,X){var K=i[X];if(!(!N||!K||!K[0]||!K[0].trace)){var ne=K[0],fe=ne.trace,ue=ne.t,ee=a.lineOptions[X],Z,oe,ce=[];fe._ownfill&&ce.push(X),fe._nexttrace&&ce.push(X+1),ce.length&&(a.fillOrder[X]=ce);var le=[],me=ee&&ee.positions||ue.positions,he,te;if(fe.fill==="tozeroy"){for(he=0;he<me.length&&isNaN(me[he+1]);)he+=2;for(te=me.length-2;te>he&&isNaN(me[te+1]);)te-=2;me[he+1]!==0&&(le=[me[he],0]),le=le.concat(me.slice(he,te+2)),me[te+1]!==0&&(le=le.concat([me[te],0]))}else if(fe.fill==="tozerox"){for(he=0;he<me.length&&isNaN(me[he]);)he+=2;for(te=me.length-2;te>he&&isNaN(me[te]);)te-=2;me[he]!==0&&(le=[0,me[he+1]]),le=le.concat(me.slice(he,te+2)),me[te]!==0&&(le=le.concat([0,me[te+1]]))}else if(fe.fill==="toself"||fe.fill==="tonext"){for(le=[],Z=0,N.splitNull=!0,oe=0;oe<me.length;oe+=2)(isNaN(me[oe])||isNaN(me[oe+1]))&&(le=le.concat(me.slice(Z,oe)),le.push(me[Z],me[Z+1]),le.push(null,null),Z=oe+2);le=le.concat(me.slice(Z)),Z&&le.push(me[Z],me[Z+1])}else{var ge=fe._nexttrace;if(ge){var ae=a.lineOptions[X+1];if(ae){var _e=ae.positions;if(fe.fill==="tonexty"){for(le=me.slice(),X=Math.floor(_e.length/2);X--;){var Ce=_e[X*2],qe=_e[X*2+1];isNaN(Ce)||isNaN(qe)||le.push(Ce,qe)}N.fill=ge.fillcolor}}}}if(fe._prevtrace&&fe._prevtrace.fill==="tonext"){var rt=a.lineOptions[X-1].positions,Re=le.length/2;Z=Re;var Ie=[Z];for(oe=0;oe<rt.length;oe+=2)(isNaN(rt[oe])||isNaN(rt[oe+1]))&&(Ie.push(oe/2+Re+1),Z=oe+2);le=le.concat(rt),N.hole=Ie}return N.fillmode=fe.fill,N.opacity=fe.opacity,N.positions=le,N}}),a.fill2d.update(a.fillOptions))}var p=n.dragmode,w=yNt(p),A=n.clickmode.indexOf("select")>-1;for(l=0;l<c;l++){var T=i[l][0],k=T.trace,_=T.t,E=_.index,S=k._length,g=_.x,C=_.y;if(k.selectedpoints||w||A){if(w||(w=!0),k.selectedpoints){var M=a.selectBatch[E]=yX.selIndices2selPoints(k),P={};for(u=0;u<M.length;u++)P[M[u]]=1;var D=[];for(u=0;u<S;u++)P[u]||D.push(u);a.unselectBatch[E]=D}var q=_.xpx=new Array(S),O=_.ypx=new Array(S);for(u=0;u<S;u++)q[u]=o.c2p(g[u]),O[u]=s.c2p(C[u])}else _.xpx=_.ypx=null}if(w){if(a.select2d||(a.select2d=Kze(n._glcanvas.data()[1].regl)),a.scatter2d){var U=new Array(c);for(l=0;l<c;l++)U[l]=a.selectBatch[l].length||a.unselectBatch[l].length?a.markerUnselectedOptions[l]:{};a.scatter2d.update(U)}a.select2d&&(a.select2d.update(a.markerOptions),a.select2d.update(a.markerSelectedOptions)),a.glText&&i.forEach(function(N){var X=((N||[])[0]||{}).trace||{};xNt.hasText(X)&&bNt(N)})}else a.scatter2d&&a.scatter2d.update(a.markerOptions);var B={viewport:wNt(n,o,s,t._context.plotGlPixelRatio),range:[(o._rl||o.range)[0],(s._rl||s.range)[0],(o._rl||o.range)[1],(s._rl||s.range)[1]]},F=yX.repeat(B,a.count);a.fill2d&&a.fill2d.update(F),a.line2d&&a.line2d.update(F),a.error2d&&a.error2d.update(F.concat(F)),a.scatter2d&&a.scatter2d.update(F),a.select2d&&a.select2d.update(F),a.glText&&a.glText.forEach(function(N){N.update(B)})}}};mX.reglPrecompiled=$ze});var nOe=ie((Ggr,rOe)=>{"use strict";var tOe=wIe();tOe.plot=xX();rOe.exports=tOe});var aOe=ie((Ygr,iOe)=>{"use strict";iOe.exports=nOe()});var _X=ie((Wgr,uOe)=>{"use strict";var TNt=Bl(),lOe=Ls(),oOe=kl().axisHoverFormat,ANt=Ba().hovertemplateAttrs,m5=QE(),MNt=Af().idRegex,SNt=ko().templatedArray,aT=aa().extendFlat,Ay=TNt.marker,ENt=Ay.line,kNt=aT(lOe("marker.line",{editTypeOverride:"calc"}),{width:aT({},ENt.width,{editType:"calc"}),editType:"calc"}),EI=aT(lOe("marker"),{symbol:Ay.symbol,angle:Ay.angle,size:aT({},Ay.size,{editType:"markerSize"}),sizeref:Ay.sizeref,sizemin:Ay.sizemin,sizemode:Ay.sizemode,opacity:Ay.opacity,colorbar:Ay.colorbar,line:kNt,editType:"calc"});EI.color.editType=EI.cmin.editType=EI.cmax.editType="style";function sOe(e){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:MNt[e],editType:"plot"}}}uOe.exports={dimensions:SNt("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:aT({},m5.text,{}),hovertext:aT({},m5.hovertext,{}),hovertemplate:ANt(),xhoverformat:oOe("x"),yhoverformat:oOe("y"),marker:EI,xaxes:sOe("x"),yaxes:sOe("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:m5.selected.marker,editType:"calc"},unselected:{marker:m5.unselected.marker,editType:"calc"},opacity:m5.opacity}});var kI=ie((Xgr,fOe)=>{"use strict";fOe.exports=function(e,t,r,i){i||(i=1/0);var n,a;for(n=0;n<t.length;n++)a=t[n],a.visible&&(i=Math.min(i,a[r].length));for(i===1/0&&(i=0),e._length=i,n=0;n<t.length;n++)a=t[n],a.visible&&(a._length=i);return i}});var vOe=ie((Zgr,hOe)=>{"use strict";var bX=Zt(),CNt=dh(),cOe=_X(),LNt=Ks(),PNt=xp(),RNt=kI(),DNt=VD().isOpenSymbol;hOe.exports=function(t,r,i,n){function a(v,d){return bX.coerce(t,r,cOe,v,d)}var o=CNt(t,r,{name:"dimensions",handleItemDefaults:INt}),s=a("diagonal.visible"),l=a("showupperhalf"),u=a("showlowerhalf"),f=RNt(r,o,"values");if(!f||!s&&!l&&!u){r.visible=!1;return}a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),PNt(t,r,i,n,a,{noAngleRef:!0,noStandOff:!0});var c=DNt(r.marker.symbol),h=LNt.isBubble(r);a("marker.line.width",c||h?1:0),FNt(t,r,n,a),bX.coerceSelectionMarkerOpacity(r,a)};function INt(e,t){function r(n,a){return bX.coerce(e,t,cOe.dimensions,n,a)}r("label");var i=r("values");i&&i.length?r("visible"):t.visible=!1,r("axis.type"),r("axis.matches")}function FNt(e,t,r,i){var n=t.dimensions,a=n.length,o=t.showupperhalf,s=t.showlowerhalf,l=t.diagonal.visible,u,f,c=new Array(a),h=new Array(a);for(u=0;u<a;u++){var v=u?u+1:"";c[u]="x"+v,h[u]="y"+v}var d=i("xaxes",c),x=i("yaxes",h),b=t._diag=new Array(a);t._xaxes={},t._yaxes={};var p=[],w=[];function A(P,D,q,O){if(P){var U=P.charAt(0),B=r._splomAxes[U];if(t["_"+U+"axes"][P]=1,O.push(P),!(P in B)){var F=B[P]={};q&&(F.label=q.label||"",q.visible&&q.axis&&(q.axis.type&&(F.type=q.axis.type),q.axis.matches&&(F.matches=D)))}}}var T=!l&&!s,k=!l&&!o;for(t._axesDim={},u=0;u<a;u++){var _=n[u],E=u===0,S=u===a-1,g=E&&T||S&&k?void 0:d[u],C=E&&k||S&&T?void 0:x[u];A(g,C,_,p),A(C,g,_,w),b[u]=[g,C],t._axesDim[g]=u,t._axesDim[C]=u}for(u=0;u<p.length;u++)for(f=0;f<w.length;f++){var M=p[u]+w[f];(u>f&&o||u<f&&s||u===f&&(l||!s||!o))&&(r._splomSubplots[M]=1)}(!s||!l&&o&&s)&&(r._splomGridDflt.xside="bottom",r._splomGridDflt.yside="left")}});var gOe=ie((jgr,pOe)=>{"use strict";var dOe=Zt();pOe.exports=function(t,r){var i=t._fullLayout,n=r.uid,a=i._splomScenes;a||(a=i._splomScenes={});var o={dirty:!0,selectBatch:[],unselectBatch:[]},s={matrix:!1,selectBatch:[],unselectBatch:[]},l=a[r.uid];return l||(l=a[n]=dOe.extendFlat({},o,s),l.draw=function(){l.matrix&&l.matrix.draw&&(l.selectBatch.length||l.unselectBatch.length?l.matrix.draw(l.unselectBatch,l.selectBatch):l.matrix.draw()),l.dirty=!1},l.destroy=function(){l.matrix&&l.matrix.destroy&&l.matrix.destroy(),l.matrixOptions=null,l.selectBatch=null,l.unselectBatch=null,l=null}),l.dirty||dOe.extendFlat(l,o),l}});var xOe=ie((Kgr,mOe)=>{"use strict";var wX=Zt(),CI=zl(),qNt=wp().calcMarkerSize,zNt=wp().calcAxisExpansion,ONt=_p(),yOe=X_().markerSelection,BNt=X_().markerStyle,NNt=gOe(),UNt=eo().BADNUM,VNt=y1().TOO_MANY_POINTS;mOe.exports=function(t,r){var i=r.dimensions,n=r._length,a={},o=a.cdata=[],s=a.data=[],l=r._visibleDims=[],u,f,c,h,v;function d(A,T){for(var k=A.makeCalcdata({v:T.values,vcalendar:r.calendar},"v"),_=0;_<k.length;_++)k[_]=k[_]===UNt?NaN:k[_];o.push(k),s.push(A.type==="log"?wX.simpleMap(k,A.c2l):k)}for(u=0;u<i.length;u++)if(c=i[u],c.visible){if(h=CI.getFromId(t,r._diag[u][0]),v=CI.getFromId(t,r._diag[u][1]),h&&v&&h.type!==v.type){wX.log("Skipping splom dimension "+u+" with conflicting axis types");continue}h?(d(h,c),v&&v.type==="category"&&(v._categories=h._categories.slice())):d(v,c),l.push(u)}ONt(t,r),wX.extendFlat(a,BNt(t,r));var x=o.length,b=x*n>VNt,p;for(b?p=a.sizeAvg||Math.max(a.size,3):p=qNt(r,n),f=0;f<l.length;f++)u=l[f],c=i[u],h=CI.getFromId(t,r._diag[u][0])||{},v=CI.getFromId(t,r._diag[u][1])||{},zNt(t,r,h,v,o[f],o[f],p);var w=NNt(t,r);return w.matrix||(w.matrix=!0),w.matrixOptions=a,w.selectedOptions=yOe(t,r,r.selected),w.unselectedOptions=yOe(t,r,r.unselected),[{x:!1,y:!1,t:{},trace:r}]}});var bOe=ie((_Oe,x5)=>{(function(){var e,t,r,i,n,a;typeof performance!="undefined"&&performance!==null&&performance.now?x5.exports=function(){return performance.now()}:typeof process!="undefined"&&process!==null&&process.hrtime?(x5.exports=function(){return(e()-n)/1e6},t=process.hrtime,e=function(){var o;return o=t(),o[0]*1e9+o[1]},i=e(),a=process.uptime()*1e9,n=i-a):Date.now?(x5.exports=function(){return Date.now()-r},r=Date.now()):(x5.exports=function(){return new Date().getTime()-r},r=new Date().getTime())}).call(_Oe)});var TOe=ie((Jgr,RI)=>{var HNt=bOe(),My=window,LI=["moz","webkit"],sT="AnimationFrame",lT=My["request"+sT],_5=My["cancel"+sT]||My["cancelRequest"+sT];for(oT=0;!lT&&oT<LI.length;oT++)lT=My[LI[oT]+"Request"+sT],_5=My[LI[oT]+"Cancel"+sT]||My[LI[oT]+"CancelRequest"+sT];var oT;(!lT||!_5)&&(PI=0,TX=0,M1=[],wOe=1e3/60,lT=function(e){if(M1.length===0){var t=HNt(),r=Math.max(0,wOe-(t-PI));PI=r+t,setTimeout(function(){var i=M1.slice(0);M1.length=0;for(var n=0;n<i.length;n++)if(!i[n].cancelled)try{i[n].callback(PI)}catch(a){setTimeout(function(){throw a},0)}},Math.round(r))}return M1.push({handle:++TX,callback:e,cancelled:!1}),TX},_5=function(e){for(var t=0;t<M1.length;t++)M1[t].handle===e&&(M1[t].cancelled=!0)});var PI,TX,M1,wOe;RI.exports=function(e){return lT.call(My,e)};RI.exports.cancel=function(){_5.apply(My,arguments)};RI.exports.polyfill=function(e){e||(e=My),e.requestAnimationFrame=lT,e.cancelAnimationFrame=_5}});var MOe=ie((Qgr,AOe)=>{AOe.exports=function(t,r){var i=typeof t=="number",n=typeof r=="number";i&&!n?(r=t,t=0):!i&&!n&&(t=0,r=0),t=t|0,r=r|0;var a=r-t;if(a<0)throw new Error("array length must be positive");for(var o=new Array(a),s=0,l=t;s<a;s++,l++)o[s]=l;return o}});var COe=ie(($gr,kOe)=>{"use strict";var GNt=mW(),YNt=pg(),WNt=H_(),SOe=TOe(),XNt=MOe(),AX=W3(),ZNt=G_();kOe.exports=S1;function S1(e,t){if(!(this instanceof S1))return new S1(e,t);this.traces=[],this.passes={},this.regl=e,this.scatter=GNt(e),this.canvas=this.scatter.canvas}S1.prototype.render=function(...e){return e.length&&this.update(...e),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=SOe(()=>{this.draw(),this.dirty=!0,this.planned=null})):(this.draw(),this.dirty=!0,SOe(()=>{this.dirty=!1})),this)};S1.prototype.update=function(...e){if(!e.length)return;for(let i=0;i<e.length;i++)this.updateItem(i,e[i]);this.traces=this.traces.filter(Boolean);let t=[],r=0;for(let i=0;i<this.traces.length;i++){let n=this.traces[i],a=this.traces[i].passes;for(let o=0;o<a.length;o++)t.push(this.passes[a[o]]);n.passOffset=r,r+=n.passes.length}return this.scatter.update(...t),this};S1.prototype.updateItem=function(e,t){let{regl:r}=this;if(t===null)return this.traces[e]=null,this;if(!t)return this;let i=YNt(t,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),n=this.traces[e]||(this.traces[e]={id:e,buffer:r.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:AX([r._gl.drawingBufferWidth,r._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(i.color!=null&&(n.color=i.color),i.size!=null&&(n.size=i.size),i.marker!=null&&(n.marker=i.marker),i.borderColor!=null&&(n.borderColor=i.borderColor),i.borderSize!=null&&(n.borderSize=i.borderSize),i.opacity!=null&&(n.opacity=i.opacity),i.viewport&&(n.viewport=AX(i.viewport)),i.diagonal!=null&&(n.diagonal=i.diagonal),i.upper!=null&&(n.upper=i.upper),i.lower!=null&&(n.lower=i.lower),i.data){n.buffer(ZNt(i.data)),n.columns=i.data.length,n.count=i.data[0].length,n.bounds=[];for(let x=0;x<n.columns;x++)n.bounds[x]=WNt(i.data[x],1)}let a;i.range&&(n.range=i.range,a=n.range&&typeof n.range[0]!="number"),i.domain&&(n.domain=i.domain);let o=!1;i.padding!=null&&(Array.isArray(i.padding)&&i.padding.length===n.columns&&typeof i.padding[i.padding.length-1]=="number"?(n.padding=i.padding.map(EOe),o=!0):n.padding=EOe(i.padding));let s=n.columns,l=n.count,u=n.viewport.width,f=n.viewport.height,c=n.viewport.x,h=n.viewport.y,v=u/s,d=f/s;n.passes=[];for(let x=0;x<s;x++)for(let b=0;b<s;b++){if(!n.diagonal&&b===x||!n.upper&&x>b||!n.lower&&x<b)continue;let p=jNt(n.id,x,b),w=this.passes[p]||(this.passes[p]={});if(i.data&&(i.transpose?w.positions={x:{buffer:n.buffer,offset:b,count:l,stride:s},y:{buffer:n.buffer,offset:x,count:l,stride:s}}:w.positions={x:{buffer:n.buffer,offset:b*l,count:l},y:{buffer:n.buffer,offset:x*l,count:l}},w.bounds=DI(n.bounds,x,b)),i.domain||i.viewport||i.data){let A=o?DI(n.padding,x,b):n.padding;if(n.domain){let[T,k,_,E]=DI(n.domain,x,b);w.viewport=[c+T*u+A[0],h+k*f+A[1],c+_*u-A[2],h+E*f-A[3]]}else w.viewport=[c+b*v+v*A[0],h+x*d+d*A[1],c+(b+1)*v-v*A[2],h+(x+1)*d-d*A[3]]}i.color&&(w.color=n.color),i.size&&(w.size=n.size),i.marker&&(w.marker=n.marker),i.borderSize&&(w.borderSize=n.borderSize),i.borderColor&&(w.borderColor=n.borderColor),i.opacity&&(w.opacity=n.opacity),i.range&&(w.range=a?DI(n.range,x,b):n.range||w.bounds),n.passes.push(p)}return this};S1.prototype.draw=function(...e){if(!e.length)this.scatter.draw();else{let t=[];for(let r=0;r<e.length;r++)if(typeof e[r]=="number"){let{passes:i,passOffset:n}=this.traces[e[r]];t.push(...XNt(n,n+i.length))}else if(e[r].length){let i=e[r],{passes:n,passOffset:a}=this.traces[r];n=n.map((o,s)=>{t[a+s]=i})}this.scatter.draw(...t)}return this};S1.prototype.destroy=function(){return this.traces.forEach(e=>{e.buffer&&e.buffer.destroy&&e.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function jNt(e,t,r){let i=e.id!=null?e.id:e,n=t,a=r;return i<<16|(n&255)<<8|a&255}function DI(e,t,r){let i,n,a,o,s,l,u,f,c=e[t],h=e[r];return c.length>2?(i=c[0],a=c[2],n=c[1],o=c[3]):c.length?(i=n=c[0],a=o=c[1]):(i=c.x,n=c.y,a=c.x+c.width,o=c.y+c.height),h.length>2?(s=h[0],u=h[2],l=h[1],f=h[3]):h.length?(s=l=h[0],u=f=h[1]):(s=h.x,l=h.y,u=h.x+h.width,f=h.y+h.height),[s,n,u,o]}function EOe(e){if(typeof e=="number")return[e,e,e,e];if(e.length===2)return[e[0],e[1],e[0],e[1]];{let t=AX(e);return[t.x,t.y,t.x+t.width,t.y+t.height]}}});var POe=ie((eyr,LOe)=>{"use strict";var KNt=COe(),MX=Zt(),II=zl(),JNt=n0().selectMode;LOe.exports=function(t,r,i){if(i.length)for(var n=0;n<i.length;n++)QNt(t,i[n][0])};function QNt(e,t){var r=e._fullLayout,i=r._size,n=t.trace,a=t.t,o=r._splomScenes[n.uid],s=o.matrixOptions,l=s.cdata,u=r._glcanvas.data()[0].regl,f=r.dragmode,c,h,v,d,x;if(l.length!==0){s.lower=n.showupperhalf,s.upper=n.showlowerhalf,s.diagonal=n.diagonal.visible;var b=n._visibleDims,p=l.length,w=o.viewOpts={};for(w.ranges=new Array(p),w.domains=new Array(p),x=0;x<b.length;x++){v=b[x];var A=w.ranges[x]=new Array(4),T=w.domains[x]=new Array(4);c=II.getFromId(e,n._diag[v][0]),c&&(A[0]=c._rl[0],A[2]=c._rl[1],T[0]=c.domain[0],T[2]=c.domain[1]),h=II.getFromId(e,n._diag[v][1]),h&&(A[1]=h._rl[0],A[3]=h._rl[1],T[1]=h.domain[0],T[3]=h.domain[1])}var k=e._context.plotGlPixelRatio,_=i.l*k,E=i.b*k,S=i.w*k,g=i.h*k;w.viewport=[_,E,S+_,g+E],o.matrix===!0&&(o.matrix=KNt(u));var C=r.clickmode.indexOf("select")>-1,M=JNt(f)||!!n.selectedpoints||C,P=!0;if(M){var D=n._length;if(n.selectedpoints){o.selectBatch=n.selectedpoints;var q=n.selectedpoints,O={};for(v=0;v<q.length;v++)O[q[v]]=!0;var U=[];for(v=0;v<D;v++)O[v]||U.push(v);o.unselectBatch=U}var B=a.xpx=new Array(p),F=a.ypx=new Array(p);for(x=0;x<b.length;x++){if(v=b[x],c=II.getFromId(e,n._diag[v][0]),c)for(B[x]=new Array(D),d=0;d<D;d++)B[x][d]=c.c2p(l[x][d]);if(h=II.getFromId(e,n._diag[v][1]),h)for(F[x]=new Array(D),d=0;d<D;d++)F[x][d]=h.c2p(l[x][d])}if(o.selectBatch.length||o.unselectBatch.length){var N=MX.extendFlat({},s,o.unselectedOptions,w),X=MX.extendFlat({},s,o.selectedOptions,w);o.matrix.update(N,X),P=!1}}else a.xpx=a.ypx=null;if(P){var K=MX.extendFlat({},s,w);o.matrix.update(K,null)}}}});var SX=ie(ROe=>{"use strict";ROe.getDimIndex=function(t,r){for(var i=r._id,n=i.charAt(0),a={x:0,y:1}[n],o=t._visibleDims,s=0;s<o.length;s++){var l=o[s];if(t._diag[l][a]===i)return s}return!1}});var zOe=ie((ryr,qOe)=>{"use strict";var DOe=SX(),$Nt=UD().calcHover,IOe=Wi().getFromId,e9t=aa().extendFlat;function t9t(e,t,r,i,n){n||(n={});var a=(i||"").charAt(0)==="x",o=(i||"").charAt(0)==="y",s=FOe(e,t,r);if((a||o)&&n.hoversubplots==="axis"&&s[0])for(var l=(a?e.xa:e.ya)._subplotsWith,u=n.gd,f=e9t({},e),c=0;c<l.length;c++){var h=l[c];if(h!==e.xa._id+e.ya._id){o?f.xa=IOe(u,h,"x"):f.ya=IOe(u,h,"y");var v=a||o,d=FOe(f,t,r,v);s=s.concat(d)}}return s}function FOe(e,t,r,i){var n=e.cd,a=n[0].trace,o=e.scene,s=o.matrixOptions.cdata,l=e.xa,u=e.ya,f=l.c2p(t),c=u.c2p(r),h=e.distance,v=DOe.getDimIndex(a,l),d=DOe.getDimIndex(a,u);if(v===!1||d===!1)return[e];for(var x=s[v],b=s[d],p,w,A=h,T=0;T<x.length;T++)if(!(i&&T!==e.index)){var k=x[T],_=b[T],E=l.c2p(k)-f,S=u.c2p(_)-c,g=Math.sqrt(E*E+S*S);(i||g<A)&&(A=w=g,p=T)}return e.index=p,e.distance=A,e.dxy=w,p===void 0?[e]:[$Nt(e,x,b,a)]}qOe.exports={hoverPoints:t9t}});var HOe=ie((nyr,VOe)=>{"use strict";var UOe=Zt(),OOe=UOe.pushUnique,BOe=Ks(),NOe=SX();VOe.exports=function(t,r){var i=t.cd,n=i[0].trace,a=i[0].t,o=t.scene,s=o.matrixOptions.cdata,l=t.xaxis,u=t.yaxis,f=[];if(!o)return f;var c=!BOe.hasMarkers(n)&&!BOe.hasText(n);if(n.visible!==!0||c)return f;var h=NOe.getDimIndex(n,l),v=NOe.getDimIndex(n,u);if(h===!1||v===!1)return f;var d=a.xpx[h],x=a.ypx[v],b=s[h],p=s[v],w=(t.scene.selectBatch||[]).slice(),A=[];if(r!==!1&&!r.degenerate)for(var T=0;T<b.length;T++)r.contains([d[T],x[T]],null,T,t)?(f.push({pointNumber:T,x:b[T],y:p[T]}),OOe(w,T)):w.indexOf(T)!==-1?OOe(w,T):A.push(T);var k=o.matrixOptions;return!w.length&&!A.length?o.matrix.update(k,null):!o.selectBatch.length&&!o.unselectBatch.length&&o.matrix.update(o.unselectedOptions,UOe.extendFlat({},k,o.selectedOptions,o.viewOpts)),o.selectBatch=w,o.unselectBatch=A,f}});var WOe=ie((iyr,YOe)=>{"use strict";var GOe=Zt(),r9t=_p(),n9t=X_().markerStyle;YOe.exports=function(t,r){var i=r.trace,n=t._fullLayout._splomScenes[i.uid];if(n){r9t(t,i),GOe.extendFlat(n.matrixOptions,n9t(t,i));var a=GOe.extendFlat({},n.matrixOptions,n.viewOpts);n.matrix.update(a,null)}}});var ZOe=ie((ayr,XOe)=>{"use strict";var i9t=Ti(),a9t=rN();XOe.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:_X(),supplyDefaults:vOe(),colorbar:yh(),calc:xOe(),plot:POe(),hoverPoints:zOe().hoverPoints,selectPoints:HOe(),editStyle:WOe(),meta:{}};i9t.register(a9t)});var e7e=ie((oyr,$Oe)=>{"use strict";var o9t=jW(),s9t=Ti(),l9t=SI(),u9t=pc().getModuleCalcData,E1=yu(),jOe=zl().getFromId,KOe=Wi().shouldShowZeroLine,JOe="splom",QOe={};function f9t(e){var t=e._fullLayout,r=s9t.getModule(JOe),i=u9t(e.calcdata,r)[0],n=l9t(e,["ANGLE_instanced_arrays","OES_element_index_uint"],QOe);n&&(t._hasOnlyLargeSploms&&EX(e),r.plot(e,{},i))}function c9t(e){var t=e.calcdata,r=e._fullLayout;r._hasOnlyLargeSploms&&EX(e);for(var i=0;i<t.length;i++){var n=t[i][0],a=n.trace,o=r._splomScenes[a.uid];a.type==="splom"&&o&&o.matrix&&h9t(e,a,o)}}function h9t(e,t,r){for(var i=r.matrixOptions.data.length,n=t._visibleDims,a=r.viewOpts.ranges=new Array(i),o=0;o<n.length;o++){var s=n[o],l=a[o]=new Array(4),u=jOe(e,t._diag[s][0]);u&&(l[0]=u.r2l(u.range[0]),l[2]=u.r2l(u.range[1]));var f=jOe(e,t._diag[s][1]);f&&(l[1]=f.r2l(f.range[0]),l[3]=f.r2l(f.range[1]))}r.selectBatch.length||r.unselectBatch.length?r.matrix.update({ranges:a},{ranges:a}):r.matrix.update({ranges:a})}function EX(e){var t=e._fullLayout,r=t._glcanvas.data()[0].regl,i=t._splomGrid;i||(i=t._splomGrid=o9t(r)),i.update(v9t(e))}function v9t(e){var t=e._context.plotGlPixelRatio,r=e._fullLayout,i=r._size,n=[0,0,r.width*t,r.height*t],a={},o;function s(_,E,S,g,C,M){S*=t,g*=t,C*=t,M*=t;var P=E[_+"color"],D=E[_+"width"],q=String(P+D);q in a?a[q].data.push(NaN,NaN,S,g,C,M):a[q]={data:[S,g,C,M],join:"rect",thickness:D*t,color:P,viewport:n,range:n,overlay:!1}}for(o in r._splomSubplots){var l=r._plots[o],u=l.xaxis,f=l.yaxis,c=u._gridVals,h=f._gridVals,v=u._offset,d=u._length,x=f._length,b=i.b+f.domain[0]*i.h,p=-f._m,w=-p*f.r2l(f.range[0],f.calendar),A,T;if(u.showgrid)for(o=0;o<c.length;o++)A=v+u.l2p(c[o].x),s("grid",u,A,b,A,b+x);if(f.showgrid)for(o=0;o<h.length;o++)T=b+w+p*h[o].x,s("grid",f,v,T,v+d,T);KOe(e,u,f)&&(A=v+u.l2p(0),s("zeroline",u,A,b,A,b+x)),KOe(e,f,u)&&(T=b+w+0,s("zeroline",f,v,T,v+d,T))}var k=[];for(o in a)k.push(a[o]);return k}function d9t(e,t,r,i){var n={},a;if(i._splomScenes){for(a=0;a<e.length;a++){var o=e[a];o.type==="splom"&&(n[o.uid]=1)}for(a=0;a<r.length;a++){var s=r[a];if(!n[s.uid]){var l=i._splomScenes[s.uid];l&&l.destroy&&l.destroy(),i._splomScenes[s.uid]=null,delete i._splomScenes[s.uid]}}}Object.keys(i._splomScenes||{}).length===0&&delete i._splomScenes,i._splomGrid&&!t._hasOnlyLargeSploms&&i._hasOnlyLargeSploms&&(i._splomGrid.destroy(),i._splomGrid=null,delete i._splomGrid),E1.clean(e,t,r,i)}$Oe.exports={name:JOe,attr:E1.attr,attrRegex:E1.attrRegex,layoutAttributes:E1.layoutAttributes,supplyLayoutDefaults:E1.supplyLayoutDefaults,drawFramework:E1.drawFramework,plot:f9t,drag:c9t,updateGrid:EX,clean:d9t,updateFx:E1.updateFx,toSVG:E1.toSVG,reglPrecompiled:QOe}});var n7e=ie((syr,r7e)=>{"use strict";var t7e=ZOe();t7e.basePlotModule=e7e(),r7e.exports=t7e});var a7e=ie((lyr,i7e)=>{"use strict";i7e.exports=n7e()});var CX=ie((uyr,o7e)=>{"use strict";var kX=Bl();o7e.exports={x:kX.x,y:kX.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:kX.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}});var l7e=ie((fyr,s7e)=>{"use strict";var p9t=Zt(),g9t=CX();s7e.exports=function(t,r,i){function n(a,o){return p9t.coerce(t,r,g9t,a,o)}n("x"),n("y"),n("xbounds"),n("ybounds"),t.xy&&t.xy instanceof Float32Array&&(r.xy=t.xy),t.indices&&t.indices instanceof Int32Array&&(r.indices=t.indices),n("text"),n("marker.color",i),n("marker.opacity"),n("marker.blend"),n("marker.sizemin"),n("marker.sizemax"),n("marker.border.color",i),n("marker.border.arearatio"),r._length=null}});var v7e=ie((cyr,h7e)=>{"use strict";var y9t=_u().gl_pointcloud2d,m9t=Zt().isArrayOrTypedArray,u7e=Op(),f7e=Ld().findExtremes,x9t=J2();function c7e(e,t){this.scene=e,this.uid=t,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=y9t(e.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var FI=c7e.prototype;FI.handlePick=function(e){var t=this.idToIndex[e.pointId];return{trace:this,dataCoord:e.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[t*2],this.pickXYData[t*2+1]]:[this.pickXData[t],this.pickYData[t]],textLabel:m9t(this.textLabels)?this.textLabels[t]:this.textLabels,color:this.color,name:this.name,pointIndex:t,hoverinfo:this.hoverinfo}};FI.update=function(e){this.index=e.index,this.textLabels=e.text,this.name=e.name,this.hoverinfo=e.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(e),this.color=x9t(e,{})};FI.updateFast=function(e){var t=this.xData=this.pickXData=e.x,r=this.yData=this.pickYData=e.y,i=this.pickXYData=e.xy,n=e.xbounds&&e.ybounds,a=e.indices,o,s,l,u=this.bounds,f,c,h;if(i){if(l=i,o=i.length>>>1,n)u[0]=e.xbounds[0],u[2]=e.xbounds[1],u[1]=e.ybounds[0],u[3]=e.ybounds[1];else for(h=0;h<o;h++)f=l[h*2],c=l[h*2+1],f<u[0]&&(u[0]=f),f>u[2]&&(u[2]=f),c<u[1]&&(u[1]=c),c>u[3]&&(u[3]=c);if(a)s=a;else for(s=new Int32Array(o),h=0;h<o;h++)s[h]=h}else for(o=t.length,l=new Float32Array(2*o),s=new Int32Array(o),h=0;h<o;h++)f=t[h],c=r[h],s[h]=h,l[h*2]=f,l[h*2+1]=c,f<u[0]&&(u[0]=f),f>u[2]&&(u[2]=f),c<u[1]&&(u[1]=c),c>u[3]&&(u[3]=c);this.idToIndex=s,this.pointcloudOptions.idToIndex=s,this.pointcloudOptions.positions=l;var v=u7e(e.marker.color),d=u7e(e.marker.border.color),x=e.opacity*e.marker.opacity;v[3]*=x,this.pointcloudOptions.color=v;var b=e.marker.blend;if(b===null){var p=100;b=t.length<p||r.length<p}this.pointcloudOptions.blend=b,d[3]*=x,this.pointcloudOptions.borderColor=d;var w=e.marker.sizemin,A=Math.max(e.marker.sizemax,e.marker.sizemin);this.pointcloudOptions.sizeMin=w,this.pointcloudOptions.sizeMax=A,this.pointcloudOptions.areaRatio=e.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var T=this.scene.xaxis,k=this.scene.yaxis,_=A/2||.5;e._extremes[T._id]=f7e(T,[u[0],u[2]],{ppad:_}),e._extremes[k._id]=f7e(k,[u[1],u[3]],{ppad:_})};FI.dispose=function(){this.pointcloud.dispose()};function _9t(e,t){var r=new c7e(e,t.uid);return r.update(t),r}h7e.exports=_9t});var g7e=ie((hyr,p7e)=>{"use strict";var b9t=Wi(),J_=Op();function d7e(e){this.scene=e,this.gl=e.gl,this.pixelRatio=e.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var Q_=d7e.prototype,w9t=["xaxis","yaxis"];Q_.merge=function(e){this.titleEnable=!1,this.backgroundColor=J_(e.plot_bgcolor);var t,r,i,n,a,o,s,l,u,f,c;for(f=0;f<2;++f){t=w9t[f];var h=t.charAt(0);for(r=e[this.scene[t]._name],i=r.title.text===this.scene.fullLayout._dfltTitle[h]?"":r.title.text,c=0;c<=2;c+=2)this.labelEnable[f+c]=!1,this.labels[f+c]=i,this.labelColor[f+c]=J_(r.title.font.color),this.labelFont[f+c]=r.title.font.family,this.labelSize[f+c]=r.title.font.size,this.labelPad[f+c]=this.getLabelPad(t,r),this.tickEnable[f+c]=!1,this.tickColor[f+c]=J_((r.tickfont||{}).color),this.tickAngle[f+c]=r.tickangle==="auto"?0:Math.PI*-r.tickangle/180,this.tickPad[f+c]=this.getTickPad(r),this.tickMarkLength[f+c]=0,this.tickMarkWidth[f+c]=r.tickwidth||0,this.tickMarkColor[f+c]=J_(r.tickcolor),this.borderLineEnable[f+c]=!1,this.borderLineColor[f+c]=J_(r.linecolor),this.borderLineWidth[f+c]=r.linewidth||0;s=this.hasSharedAxis(r),a=this.hasAxisInDfltPos(t,r)&&!s,o=this.hasAxisInAltrPos(t,r)&&!s,n=r.mirror||!1,l=s?String(n).indexOf("all")!==-1:!!n,u=s?n==="allticks":String(n).indexOf("ticks")!==-1,a?this.labelEnable[f]=!0:o&&(this.labelEnable[f+2]=!0),a?this.tickEnable[f]=r.showticklabels:o&&(this.tickEnable[f+2]=r.showticklabels),(a||l)&&(this.borderLineEnable[f]=r.showline),(o||l)&&(this.borderLineEnable[f+2]=r.showline),(a||u)&&(this.tickMarkLength[f]=this.getTickMarkLength(r)),(o||u)&&(this.tickMarkLength[f+2]=this.getTickMarkLength(r)),this.gridLineEnable[f]=r.showgrid,this.gridLineColor[f]=J_(r.gridcolor),this.gridLineWidth[f]=r.gridwidth,this.zeroLineEnable[f]=r.zeroline,this.zeroLineColor[f]=J_(r.zerolinecolor),this.zeroLineWidth[f]=r.zerolinewidth}};Q_.hasSharedAxis=function(e){var t=this.scene,r=t.fullLayout._subplots.gl2d,i=b9t.findSubplotsWithAxis(r,e);return i.indexOf(t.id)!==0};Q_.hasAxisInDfltPos=function(e,t){var r=t.side;if(e==="xaxis")return r==="bottom";if(e==="yaxis")return r==="left"};Q_.hasAxisInAltrPos=function(e,t){var r=t.side;if(e==="xaxis")return r==="top";if(e==="yaxis")return r==="right"};Q_.getLabelPad=function(e,t){var r=1.5,i=t.title.font.size,n=t.showticklabels;if(e==="xaxis")return t.side==="top"?-10+i*(r+(n?1:0)):-10+i*(r+(n?.5:0));if(e==="yaxis")return t.side==="right"?10+i*(r+(n?1:.5)):10+i*(r+(n?.5:0))};Q_.getTickPad=function(e){return e.ticks==="outside"?10+e.ticklen:15};Q_.getTickMarkLength=function(e){if(!e.ticks)return 0;var t=e.ticklen;return e.ticks==="inside"?-t:t};function T9t(e){return new d7e(e)}p7e.exports=T9t});var y7e=ie(b5=>{"use strict";function A9t(e){if(typeof e=="object"){if("buttons"in e)return e.buttons;if("which"in e){var t=e.which;if(t===2)return 4;if(t===3)return 2;if(t>0)return 1<<t-1}else if("button"in e){var t=e.button;if(t===1)return 4;if(t===2)return 2;if(t>=0)return 1<<t}}return 0}b5.buttons=A9t;function LX(e){return e.target||e.srcElement||window}b5.element=LX;function M9t(e){if(typeof e=="object"){if("offsetX"in e)return e.offsetX;var t=LX(e),r=t.getBoundingClientRect();return e.clientX-r.left}return 0}b5.x=M9t;function S9t(e){if(typeof e=="object"){if("offsetY"in e)return e.offsetY;var t=LX(e),r=t.getBoundingClientRect();return e.clientY-r.top}return 0}b5.y=S9t});var x7e=ie((dyr,m7e)=>{"use strict";m7e.exports=E9t;var w5=y7e();function E9t(e,t){t||(t=e,e=window);var r=0,i=0,n=0,a={shift:!1,alt:!1,control:!1,meta:!1},o=!1;function s(w){var A=!1;return"altKey"in w&&(A=A||w.altKey!==a.alt,a.alt=!!w.altKey),"shiftKey"in w&&(A=A||w.shiftKey!==a.shift,a.shift=!!w.shiftKey),"ctrlKey"in w&&(A=A||w.ctrlKey!==a.control,a.control=!!w.ctrlKey),"metaKey"in w&&(A=A||w.metaKey!==a.meta,a.meta=!!w.metaKey),A}function l(w,A){var T=w5.x(A),k=w5.y(A);"buttons"in A&&(w=A.buttons|0),(w!==r||T!==i||k!==n||s(A))&&(r=w|0,i=T||0,n=k||0,t&&t(r,i,n,a))}function u(w){l(0,w)}function f(){(r||i||n||a.shift||a.alt||a.meta||a.control)&&(i=n=0,r=0,a.shift=a.alt=a.control=a.meta=!1,t&&t(0,0,0,a))}function c(w){s(w)&&t&&t(r,i,n,a)}function h(w){w5.buttons(w)===0?l(0,w):l(r,w)}function v(w){l(r|w5.buttons(w),w)}function d(w){l(r&~w5.buttons(w),w)}function x(){o||(o=!0,e.addEventListener("mousemove",h),e.addEventListener("mousedown",v),e.addEventListener("mouseup",d),e.addEventListener("mouseleave",u),e.addEventListener("mouseenter",u),e.addEventListener("mouseout",u),e.addEventListener("mouseover",u),e.addEventListener("blur",f),e.addEventListener("keyup",c),e.addEventListener("keydown",c),e.addEventListener("keypress",c),e!==window&&(window.addEventListener("blur",f),window.addEventListener("keyup",c),window.addEventListener("keydown",c),window.addEventListener("keypress",c)))}function b(){o&&(o=!1,e.removeEventListener("mousemove",h),e.removeEventListener("mousedown",v),e.removeEventListener("mouseup",d),e.removeEventListener("mouseleave",u),e.removeEventListener("mouseenter",u),e.removeEventListener("mouseout",u),e.removeEventListener("mouseover",u),e.removeEventListener("blur",f),e.removeEventListener("keyup",c),e.removeEventListener("keydown",c),e.removeEventListener("keypress",c),e!==window&&(window.removeEventListener("blur",f),window.removeEventListener("keyup",c),window.removeEventListener("keydown",c),window.removeEventListener("keypress",c)))}x();var p={element:e};return Object.defineProperties(p,{enabled:{get:function(){return o},set:function(w){w?x():b()},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return n},enumerable:!0},mods:{get:function(){return a},enumerable:!0}}),p}});var b7e=ie((pyr,_7e)=>{"use strict";var k9t=pX();_7e.exports=C9t;function C9t(e,t,r){typeof e=="function"&&(r=!!t,t=e,e=window);var i=k9t("ex",e),n=function(a){r&&a.preventDefault();var o=a.deltaX||0,s=a.deltaY||0,l=a.deltaZ||0,u=a.deltaMode,f=1;switch(u){case 1:f=i;break;case 2:f=window.innerHeight;break}if(o*=f,s*=f,l*=f,o||s||l)return t(o,s,l,a)};return e.addEventListener("wheel",n),n}});var M7e=ie((gyr,A7e)=>{"use strict";var L9t=x7e(),P9t=b7e(),w7e=cO(),T7e=Af(),PX=VA();A7e.exports=D9t;function R9t(e,t){this.element=e,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function D9t(e){var t=e.mouseContainer,r=e.glplot,i=new R9t(t,r);function n(){e.xaxis.autorange=!1,e.yaxis.autorange=!1}function a(){for(var s=e.graphDiv._fullLayout._axisConstraintGroups,l=e.xaxis._id,u=e.yaxis._id,f=0;f<s.length;f++)if(s[f][l]!==-1){if(s[f][u]!==-1)return!0;break}return!1}i.mouseListener=L9t(t,o),t.addEventListener("touchstart",function(s){var l=w7e(s.changedTouches[0],t);o(0,l[0],l[1]),o(1,l[0],l[1]),s.preventDefault()},PX?{passive:!1}:!1),t.addEventListener("touchmove",function(s){s.preventDefault();var l=w7e(s.changedTouches[0],t);o(1,l[0],l[1]),s.preventDefault()},PX?{passive:!1}:!1),t.addEventListener("touchend",function(s){o(0,i.lastPos[0],i.lastPos[1]),s.preventDefault()},PX?{passive:!1}:!1);function o(s,l,u){var f=e.calcDataBox(),c=r.viewBox,h=i.lastPos[0],v=i.lastPos[1],d=T7e.MINDRAG*r.pixelRatio,x=T7e.MINZOOM*r.pixelRatio,b,p;l*=r.pixelRatio,u*=r.pixelRatio,u=c[3]-c[1]-u;function w(S,g,C){var M=Math.min(g,C),P=Math.max(g,C);M!==P?(f[S]=M,f[S+2]=P,i.dataBox=f,e.setRanges(f)):(e.selectBox.selectBox=[0,0,1,1],e.glplot.setDirty())}switch(e.fullLayout.dragmode){case"zoom":if(s){var A=l/(c[2]-c[0])*(f[2]-f[0])+f[0],T=u/(c[3]-c[1])*(f[3]-f[1])+f[1];i.boxInited||(i.boxStart[0]=A,i.boxStart[1]=T,i.dragStart[0]=l,i.dragStart[1]=u),i.boxEnd[0]=A,i.boxEnd[1]=T,i.boxInited=!0,!i.boxEnabled&&(i.boxStart[0]!==i.boxEnd[0]||i.boxStart[1]!==i.boxEnd[1])&&(i.boxEnabled=!0);var k=Math.abs(i.dragStart[0]-l)<x,_=Math.abs(i.dragStart[1]-u)<x;if(a()&&!(k&&_)){b=i.boxEnd[0]-i.boxStart[0],p=i.boxEnd[1]-i.boxStart[1];var E=(f[3]-f[1])/(f[2]-f[0]);Math.abs(b*E)>Math.abs(p)?(i.boxEnd[1]=i.boxStart[1]+Math.abs(b)*E*(p>=0?1:-1),i.boxEnd[1]<f[1]?(i.boxEnd[1]=f[1],i.boxEnd[0]=i.boxStart[0]+(f[1]-i.boxStart[1])/Math.abs(E)):i.boxEnd[1]>f[3]&&(i.boxEnd[1]=f[3],i.boxEnd[0]=i.boxStart[0]+(f[3]-i.boxStart[1])/Math.abs(E))):(i.boxEnd[0]=i.boxStart[0]+Math.abs(p)/E*(b>=0?1:-1),i.boxEnd[0]<f[0]?(i.boxEnd[0]=f[0],i.boxEnd[1]=i.boxStart[1]+(f[0]-i.boxStart[0])*Math.abs(E)):i.boxEnd[0]>f[2]&&(i.boxEnd[0]=f[2],i.boxEnd[1]=i.boxStart[1]+(f[2]-i.boxStart[0])*Math.abs(E)))}else k&&(i.boxEnd[0]=i.boxStart[0]),_&&(i.boxEnd[1]=i.boxStart[1])}else i.boxEnabled?(b=i.boxStart[0]!==i.boxEnd[0],p=i.boxStart[1]!==i.boxEnd[1],b||p?(b&&(w(0,i.boxStart[0],i.boxEnd[0]),e.xaxis.autorange=!1),p&&(w(1,i.boxStart[1],i.boxEnd[1]),e.yaxis.autorange=!1),e.relayoutCallback()):e.glplot.setDirty(),i.boxEnabled=!1,i.boxInited=!1):i.boxInited&&(i.boxInited=!1);break;case"pan":i.boxEnabled=!1,i.boxInited=!1,s?(i.panning||(i.dragStart[0]=l,i.dragStart[1]=u),Math.abs(i.dragStart[0]-l)<d&&(l=i.dragStart[0]),Math.abs(i.dragStart[1]-u)<d&&(u=i.dragStart[1]),b=(h-l)*(f[2]-f[0])/(r.viewBox[2]-r.viewBox[0]),p=(v-u)*(f[3]-f[1])/(r.viewBox[3]-r.viewBox[1]),f[0]+=b,f[2]+=b,f[1]+=p,f[3]+=p,e.setRanges(f),i.panning=!0,i.lastInputTime=Date.now(),n(),e.cameraChanged(),e.handleAnnotations()):i.panning&&(i.panning=!1,e.relayoutCallback());break}i.lastPos[0]=l,i.lastPos[1]=u}return i.wheelListener=P9t(t,function(s,l){if(!e.scrollZoom)return!1;var u=e.calcDataBox(),f=r.viewBox,c=i.lastPos[0],h=i.lastPos[1],v=Math.exp(5*l/(f[3]-f[1])),d=c/(f[2]-f[0])*(u[2]-u[0])+u[0],x=h/(f[3]-f[1])*(u[3]-u[1])+u[1];return u[0]=(u[0]-d)*v+d,u[2]=(u[2]-d)*v+d,u[1]=(u[1]-x)*v+x,u[3]=(u[3]-x)*v+x,e.setRanges(u),i.lastInputTime=Date.now(),n(),e.cameraChanged(),e.handleAnnotations(),e.relayoutCallback(),!0},!0),i}});var D7e=ie((yyr,R7e)=>{"use strict";var k7e=Ti(),RX=Wi(),P0=Ol(),I9t=_u().gl_plot2d,F9t=_u().gl_spikes2d,q9t=_u().gl_select_box,S7e=yG(),z9t=g7e(),O9t=M7e(),B9t=oD(),C7e=Tm(),N9t=C7e.enforce,E7e=C7e.clean,U9t=Ld().doAutoRange,L7e=n0(),V9t=L7e.drawMode,H9t=L7e.selectMode,G9t=["xaxis","yaxis"],T5,qI,Y9t=Af().SUBPLOT_PATTERN;function P7e(e,t){this.container=e.container,this.graphDiv=e.graphDiv,this.pixelRatio=e.plotGlPixelRatio||window.devicePixelRatio,this.id=e.id,this.staticPlot=!!e.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(t),this.makeFramework(),!this.stopped&&(this.glplotOptions=z9t(this),this.glplotOptions.merge(t),this.glplot=I9t(this.glplotOptions),this.camera=O9t(this),this.traces={},this.spikes=F9t(this.glplot),this.selectBox=q9t(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}R7e.exports=P7e;var Wc=P7e.prototype;Wc.makeFramework=function(){if(this.staticPlot){if(!qI&&(T5=document.createElement("canvas"),qI=S7e({canvas:T5,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!qI))throw new Error("Error creating static canvas/context for image server");this.canvas=T5,this.gl=qI}else{var e=this.container.querySelector(".gl-canvas-focus"),t=S7e({canvas:e,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!t){B9t(this),this.stopped=!0;return}this.canvas=e,this.gl=t}var r=this.canvas;r.style.width="100%",r.style.height="100%",r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style["pointer-events"]="none",this.updateSize(r);var i=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");i.style.position="absolute",i.style.top=i.style.left="0px",i.style.width=i.style.height="100%",i.style["z-index"]=20,i.style["pointer-events"]="none";var n=this.mouseContainer=document.createElement("div");n.style.position="absolute",n.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var a=this.container;a.appendChild(i),a.appendChild(n);var o=this;n.addEventListener("mouseout",function(){o.isMouseOver=!1,o.unhover()}),n.addEventListener("mouseover",function(){o.isMouseOver=!0})};Wc.toImage=function(e){e||(e="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(T5),this.updateSize(this.canvas);var t=this.glplot.gl,r=t.drawingBufferWidth,i=t.drawingBufferHeight;t.clearColor(1,1,1,0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),t.bindFramebuffer(t.FRAMEBUFFER,null);var n=new Uint8Array(r*i*4);t.readPixels(0,0,r,i,t.RGBA,t.UNSIGNED_BYTE,n);for(var a=0,o=i-1;a<o;++a,--o)for(var s=0;s<r;++s)for(var l=0;l<4;++l){var u=n[4*(r*a+s)+l];n[4*(r*a+s)+l]=n[4*(r*o+s)+l],n[4*(r*o+s)+l]=u}var f=document.createElement("canvas");f.width=r,f.height=i;var c=f.getContext("2d",{willReadFrequently:!0}),h=c.createImageData(r,i);h.data.set(n),c.putImageData(h,0,0);var v;switch(e){case"jpeg":v=f.toDataURL("image/jpeg");break;case"webp":v=f.toDataURL("image/webp");break;default:v=f.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(T5),v};Wc.updateSize=function(e){e||(e=this.canvas);var t=this.pixelRatio,r=this.fullLayout,i=r.width,n=r.height,a=Math.ceil(t*i)|0,o=Math.ceil(t*n)|0;return(e.width!==a||e.height!==o)&&(e.width=a,e.height=o),e};Wc.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var e=[RX.calcTicks(this.xaxis),RX.calcTicks(this.yaxis)],t=0;t<2;++t)for(var r=0;r<e[t].length;++r)e[t][r].text=e[t][r].text+"";return e};function W9t(e,t){for(var r=0;r<2;++r){var i=e[r],n=t[r];if(i.length!==n.length)return!0;for(var a=0;a<i.length;++a)if(i[a].x!==n[a].x)return!0}return!1}Wc.updateRefs=function(e){this.fullLayout=e;var t=this.id.match(Y9t),r="xaxis"+t[1],i="yaxis"+t[2];this.xaxis=this.fullLayout[r],this.yaxis=this.fullLayout[i]};Wc.relayoutCallback=function(){var e=this.graphDiv,t=this.xaxis,r=this.yaxis,i=e.layout,n={},a=n[t._name+".range"]=t.range.slice(),o=n[r._name+".range"]=r.range.slice();n[t._name+".autorange"]=t.autorange,n[r._name+".autorange"]=r.autorange,k7e.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,n);var s=i[t._name];s.range=a,s.autorange=t.autorange;var l=i[r._name];l.range=o,l.autorange=r.autorange,n.lastInputTime=this.camera.lastInputTime,e.emit("plotly_relayout",n)};Wc.cameraChanged=function(){var e=this.camera;this.glplot.setDataBox(this.calcDataBox());var t=this.computeTickMarks(),r=this.glplotOptions.ticks;W9t(t,r)&&(this.glplotOptions.ticks=t,this.glplotOptions.dataBox=e.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())};Wc.handleAnnotations=function(){for(var e=this.graphDiv,t=this.fullLayout.annotations,r=0;r<t.length;r++){var i=t[r];i.xref===this.xaxis._id&&i.yref===this.yaxis._id&&k7e.getComponentMethod("annotations","drawOne")(e,r)}};Wc.destroy=function(){if(this.glplot){var e=this.traces;e&&Object.keys(e).map(function(t){e[t].dispose(),delete e[t]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}};Wc.plot=function(e,t,r){var i=this.glplot;this.updateRefs(r),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(e,t),this.updateFx(r.dragmode);var n=r.width,a=r.height;this.updateSize(this.canvas);var o=this.glplotOptions;o.merge(r),o.screenBox=[0,0,n,a];var s={_fullLayout:{_axisConstraintGroups:r._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:r._size}};E7e(s,this.xaxis),E7e(s,this.yaxis);var l=r._size,u=this.xaxis.domain,f=this.yaxis.domain;o.viewBox=[l.l+u[0]*l.w,l.b+f[0]*l.h,n-l.r-(1-u[1])*l.w,a-l.t-(1-f[1])*l.h],this.mouseContainer.style.width=l.w*(u[1]-u[0])+"px",this.mouseContainer.style.height=l.h*(f[1]-f[0])+"px",this.mouseContainer.height=l.h*(f[1]-f[0]),this.mouseContainer.style.left=l.l+u[0]*l.w+"px",this.mouseContainer.style.top=l.t+(1-f[1])*l.h+"px";var c,h;for(h=0;h<2;++h)c=this[G9t[h]],c._length=o.viewBox[h+2]-o.viewBox[h],U9t(this.graphDiv,c),c.setScale();N9t(s),o.ticks=this.computeTickMarks(),o.dataBox=this.calcDataBox(),o.merge(r),i.update(o),this.glplot.draw()};Wc.calcDataBox=function(){var e=this.xaxis,t=this.yaxis,r=e.range,i=t.range,n=e.r2l,a=t.r2l;return[n(r[0]),a(i[0]),n(r[1]),a(i[1])]};Wc.setRanges=function(e){var t=this.xaxis,r=this.yaxis,i=t.l2r,n=r.l2r;t.range=[i(e[0]),i(e[2])],r.range=[n(e[1]),n(e[3])]};Wc.updateTraces=function(e,t){var r=Object.keys(this.traces),i,n,a;this.fullData=e;e:for(i=0;i<r.length;i++){var o=r[i],s=this.traces[o];for(n=0;n<e.length;n++)if(a=e[n],a.uid===o&&a.type===s.type)continue e;s.dispose(),delete this.traces[o]}for(i=0;i<e.length;i++){a=e[i];var l=t[i],u=this.traces[a.uid];u?u.update(a,l):(u=a._module.plot(this,a,l),this.traces[a.uid]=u)}this.glplot.objects.sort(function(f,c){return f._trace.index-c._trace.index})};Wc.updateFx=function(e){H9t(e)||V9t(e)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),e==="pan"?this.mouseContainer.style.cursor="move":e==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null};Wc.emitPointAction=function(e,t){for(var r=e.trace.uid,i=e.pointIndex,n,a=0;a<this.fullData.length;a++)this.fullData[a].uid===r&&(n=this.fullData[a]);var o={x:e.traceCoord[0],y:e.traceCoord[1],curveNumber:n.index,pointNumber:i,data:n._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};P0.appendArrayPointValue(o,n,i),this.graphDiv.emit(t,{points:[o]})};Wc.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var e=this.glplot,t=this.camera,r=t.mouseListener,i=this.lastButtonState===1&&r.buttons===0,n=this.fullLayout;this.lastButtonState=r.buttons,this.cameraChanged();var a=r.x*e.pixelRatio,o=this.canvas.height-e.pixelRatio*r.y,s;if(t.boxEnabled&&n.dragmode==="zoom"){this.selectBox.enabled=!0;for(var l=this.selectBox.selectBox=[Math.min(t.boxStart[0],t.boxEnd[0]),Math.min(t.boxStart[1],t.boxEnd[1]),Math.max(t.boxStart[0],t.boxEnd[0]),Math.max(t.boxStart[1],t.boxEnd[1])],u=0;u<2;u++)t.boxStart[u]===t.boxEnd[u]&&(l[u]=e.dataBox[u],l[u+2]=e.dataBox[u+2]);e.setDirty()}else if(!t.panning&&this.isMouseOver){this.selectBox.enabled=!1;var f=n._size,c=this.xaxis.domain,h=this.yaxis.domain;s=e.pick(a/e.pixelRatio+f.l+c[0]*f.w,o/e.pixelRatio-(f.t+(1-h[1])*f.h));var v=s&&s.object._trace.handlePick(s);if(v&&i&&this.emitPointAction(v,"plotly_click"),s&&s.object._trace.hoverinfo!=="skip"&&n.hovermode&&v&&(!this.lastPickResult||this.lastPickResult.traceUid!==v.trace.uid||this.lastPickResult.dataCoord[0]!==v.dataCoord[0]||this.lastPickResult.dataCoord[1]!==v.dataCoord[1])){var d=v;this.lastPickResult={traceUid:v.trace?v.trace.uid:null,dataCoord:v.dataCoord.slice()},this.spikes.update({center:s.dataCoord}),d.screenCoord=[((e.viewBox[2]-e.viewBox[0])*(s.dataCoord[0]-e.dataBox[0])/(e.dataBox[2]-e.dataBox[0])+e.viewBox[0])/e.pixelRatio,(this.canvas.height-(e.viewBox[3]-e.viewBox[1])*(s.dataCoord[1]-e.dataBox[1])/(e.dataBox[3]-e.dataBox[1])-e.viewBox[1])/e.pixelRatio],this.emitPointAction(v,"plotly_hover");var x=this.fullData[d.trace.index]||{},b=d.pointIndex,p=P0.castHoverinfo(x,n,b);if(p&&p!=="all"){var w=p.split("+");w.indexOf("x")===-1&&(d.traceCoord[0]=void 0),w.indexOf("y")===-1&&(d.traceCoord[1]=void 0),w.indexOf("z")===-1&&(d.traceCoord[2]=void 0),w.indexOf("text")===-1&&(d.textLabel=void 0),w.indexOf("name")===-1&&(d.name=void 0)}P0.loneHover({x:d.screenCoord[0],y:d.screenCoord[1],xLabel:this.hoverFormatter("xaxis",d.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",d.traceCoord[1]),zLabel:d.traceCoord[2],text:d.textLabel,name:d.name,color:P0.castHoverOption(x,b,"bgcolor")||d.color,borderColor:P0.castHoverOption(x,b,"bordercolor"),fontFamily:P0.castHoverOption(x,b,"font.family"),fontSize:P0.castHoverOption(x,b,"font.size"),fontColor:P0.castHoverOption(x,b,"font.color"),nameLength:P0.castHoverOption(x,b,"namelength"),textAlign:P0.castHoverOption(x,b,"align")},{container:this.svgContainer,gd:this.graphDiv})}}s||this.unhover(),e.draw()}};Wc.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),P0.loneUnhover(this.svgContainer))};Wc.hoverFormatter=function(e,t){if(t!==void 0){var r=this[e];return RX.tickText(r,r.c2l(t),"hover").text}}});var DX=ie(Iv=>{"use strict";var I7e=Zs().overrideAll,X9t=D7e(),Z9t=ox(),j9t=Cd(),F7e=Af(),zI=yu(),K9t=Dg(),q7e=pc().getSubplotData;Iv.name="gl2d";Iv.attr=["xaxis","yaxis"];Iv.idRoot=["x","y"];Iv.idRegex=F7e.idRegex;Iv.attrRegex=F7e.attrRegex;Iv.attributes=dB();Iv.supplyLayoutDefaults=function(e,t,r){t._has("cartesian")||zI.supplyLayoutDefaults(e,t,r)};Iv.layoutAttrOverrides=I7e(zI.layoutAttributes,"plot","from-root");Iv.baseLayoutAttrOverrides=I7e({plot_bgcolor:Z9t.plot_bgcolor,hoverlabel:K9t.hoverlabel},"plot","nested");Iv.plot=function(t){for(var r=t._fullLayout,i=t._fullData,n=r._subplots.gl2d,a=0;a<n.length;a++){var o=n[a],s=r._plots[o],l=q7e(i,"gl2d",o),u=s._scene2d;u===void 0&&(u=new X9t({id:o,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio},r),s._scene2d=u),u.plot(l,t.calcdata,r,t.layout)}};Iv.clean=function(e,t,r,i){for(var n=i._subplots.gl2d||[],a=0;a<n.length;a++){var o=n[a],s=i._plots[o];if(s._scene2d){var l=q7e(e,"gl2d",o);l.length===0&&(s._scene2d.destroy(),delete i._plots[o])}}zI.clean.apply(this,arguments)};Iv.drawFramework=function(e){e._context.staticPlot||zI.drawFramework(e)};Iv.toSVG=function(e){for(var t=e._fullLayout,r=t._subplots.gl2d,i=0;i<r.length;i++){var n=t._plots[r[i]],a=n._scene2d,o=a.toImage("png"),s=t._glimages.append("svg:image");s.attr({xmlns:j9t.svg,"xlink:href":o,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),a.destroy()}};Iv.updateFx=function(e){for(var t=e._fullLayout,r=t._subplots.gl2d,i=0;i<r.length;i++){var n=t._plots[r[i]]._scene2d;n.updateFx(t.dragmode)}}});var O7e=ie((_yr,z7e)=>{"use strict";var xyr=["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" ");z7e.exports={attributes:CX(),supplyDefaults:l7e(),calc:gG(),plot:v7e(),moduleType:"trace",name:"pointcloud",basePlotModule:DX(),categories:["gl","gl2d","showLegend"],meta:{}}});var N7e=ie((byr,B7e)=>{"use strict";B7e.exports=O7e()});var FX=ie((wyr,V7e)=>{"use strict";var J9t=$x(),Q9t=Ls(),$9t=aa().extendFlat,eUt=Zs().overrideAll,U7e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],BI={};for(OI=0;OI<U7e.length;OI++)IX=U7e[OI],BI[IX]=J9t[IX];var IX,OI;BI.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"};$9t(BI,Q9t("",{cLetter:"z",autoColorDflt:!1}));V7e.exports=eUt(BI,"calc","nested")});var G7e=ie((Tyr,H7e)=>{"use strict";var tUt=Zt(),rUt=aS(),nUt=$f(),iUt=FX();H7e.exports=function(t,r,i,n){function a(s,l){return tUt.coerce(t,r,iUt,s,l)}var o=rUt(t,r,a,n);if(!o){r.visible=!1;return}a("text"),a("zsmooth"),nUt(t,r,n,a,{prefix:"",cLetter:"z"})}});var Z7e=ie((Ayr,X7e)=>{"use strict";var aUt=_u().gl_heatmap2d,Y7e=Wi(),oUt=Op();function W7e(e,t){this.scene=e,this.uid=t,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=aUt(e.glplot,this.options),this.heatmap._trace=this}var qX=W7e.prototype;qX.handlePick=function(e){var t=this.options,r=t.shape,i=e.pointId,n=i%r[0],a=Math.floor(i/r[0]),o=i;return{trace:this,dataCoord:e.dataCoord,traceCoord:[t.x[n],t.y[a],t.z[o]],textLabel:this.textLabels[i],name:this.name,pointIndex:[a,n],hoverinfo:this.hoverinfo}};qX.update=function(e,t){var r=t[0];this.index=e.index,this.name=e.name,this.hoverinfo=e.hoverinfo;var i=r.z;this.options.z=[].concat.apply([],i);var n=i[0].length,a=i.length;this.options.shape=[n,a],this.options.x=r.x,this.options.y=r.y,this.options.zsmooth=e.zsmooth;var o=sUt(e);this.options.colorLevels=o.colorLevels,this.options.colorValues=o.colorValues,this.textLabels=[].concat.apply([],e.text),this.heatmap.update(this.options);var s=this.scene.xaxis,l=this.scene.yaxis,u,f;e.zsmooth===!1&&(u={ppad:r.x[1]-r.x[0]},f={ppad:r.y[1]-r.y[0]}),e._extremes[s._id]=Y7e.findExtremes(s,r.x,u),e._extremes[l._id]=Y7e.findExtremes(l,r.y,f)};qX.dispose=function(){this.heatmap.dispose()};function sUt(e){for(var t=e.colorscale,r=e.zmin,i=e.zmax,n=t.length,a=new Array(n),o=new Array(4*n),s=0;s<n;s++){var l=t[s],u=oUt(l[1]);a[s]=r+l[0]*(i-r);for(var f=0;f<4;f++)o[4*s+f]=u[f]}return{colorLevels:a,colorValues:o}}function lUt(e,t,r){var i=new W7e(e,t.uid);return i.update(t,r),i}X7e.exports=lUt});var K7e=ie((Syr,j7e)=>{"use strict";var Myr=["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" ");j7e.exports={attributes:FX(),supplyDefaults:G7e(),colorbar:t_(),calc:sS(),plot:Z7e(),moduleType:"trace",name:"heatmapgl",basePlotModule:DX(),categories:["gl","gl2d","2dMap"],meta:{}}});var Q7e=ie((Eyr,J7e)=>{"use strict";J7e.exports=K7e()});var BX=ie((kyr,$7e)=>{"use strict";var uUt=Ls(),zX=gc(),OX=Xs(),fUt=fl().attributes,NI=aa().extendFlat,cUt=ko().templatedArray;$7e.exports={domain:fUt({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:OX({editType:"plot"}),tickfont:OX({autoShadowDflt:!0,editType:"plot"}),rangefont:OX({editType:"plot"}),dimensions:cUt("dimension",{label:{valType:"string",editType:"plot"},tickvals:NI({},zX.tickvals,{editType:"plot"}),ticktext:NI({},zX.ticktext,{editType:"plot"}),tickformat:NI({},zX.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:NI({editType:"calc"},uUt("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}});var A5=ie((Cyr,eBe)=>{"use strict";eBe.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}});var mg=ie((Lyr,rBe)=>{"use strict";var hUt=mA();function tBe(e){return[e]}rBe.exports={keyFun:function(e){return e.key},repeat:tBe,descend:hUt,wrap:tBe,unwrap:function(e){return e[0]}}});var VX=ie((Pyr,vBe)=>{"use strict";var Uu=A5(),R0=Mi(),vUt=mg().keyFun,UI=mg().repeat,uT=Zt().sorterAsc,dUt=Zt().strTranslate,nBe=Uu.bar.snapRatio;function iBe(e,t){return e*(1-nBe)+t*nBe}var aBe=Uu.bar.snapClose;function pUt(e,t){return e*(1-aBe)+t*aBe}function HI(e,t,r,i){if(gUt(r,i))return r;var n=e?-1:1,a=0,o=t.length-1;if(n<0){var s=a;a=o,o=s}for(var l=t[a],u=l,f=a;n*f<n*o;f+=n){var c=f+n,h=t[c];if(n*r<n*pUt(l,h))return iBe(l,u);if(n*r<n*h||c===o)return iBe(h,l);u=l,l=h}}function gUt(e,t){for(var r=0;r<t.length;r++)if(e>=t[r][0]&&e<=t[r][1])return!0;return!1}function yUt(e){e.attr("x",-Uu.bar.captureWidth/2).attr("width",Uu.bar.captureWidth)}function mUt(e){e.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function xUt(e){if(!e.brush.filterSpecified)return"0,"+e.height;for(var t=oBe(e.brush.filter.getConsolidated(),e.height),r=[0],i,n,a,o=t.length?t[0][0]:null,s=0;s<t.length;s++)i=t[s],n=i[1]-i[0],r.push(o),r.push(n),a=s+1,a<t.length&&(o=t[a][0]-i[1]);return r.push(e.height),r}function oBe(e,t){return e.map(function(r){return r.map(function(i){return Math.max(0,i*t)}).sort(uT)})}function _Ut(e,t){var r=Uu.bar.handleHeight;if(!(t>e[1]+r||t<e[0]-r))return t>=.9*e[1]+.1*e[0]?"n":t<=.9*e[0]+.1*e[1]?"s":"ns"}function sBe(){R0.select(document.body).style("cursor",null)}function UX(e){e.attr("stroke-dasharray",xUt)}function VI(e,t){var r=R0.select(e).selectAll(".highlight, .highlight-shadow"),i=t?r.transition().duration(Uu.bar.snapDuration).each("end",t):r;UX(i)}function lBe(e,t){var r=e.brush,i=r.filterSpecified,n=NaN,a={},o;if(i){var s=e.height,l=r.filter.getConsolidated(),u=oBe(l,s),f=NaN,c=NaN,h=NaN;for(o=0;o<=u.length;o++){var v=u[o];if(v&&v[0]<=t&&t<=v[1]){f=o;break}else if(c=o?o-1:NaN,v&&v[0]>t){h=o;break}}if(n=f,isNaN(n)&&(isNaN(c)||isNaN(h)?n=isNaN(c)?h:c:n=t-u[c][1]<u[h][0]-t?c:h),!isNaN(n)){var d=u[n],x=_Ut(d,t);x&&(a.interval=l[n],a.intervalPix=d,a.region=x)}}if(e.ordinal&&!a.region){var b=e.unitTickvals,p=e.unitToPaddedPx.invert(t);for(o=0;o<b.length;o++){var w=[b[Math.max(o-1,0)]*.25+b[o]*.75,b[Math.min(o+1,b.length-1)]*.25+b[o]*.75];if(p>=w[0]&&p<=w[1]){a.clickableOrdinalRange=w;break}}}return a}function bUt(e,t){R0.event.sourceEvent.stopPropagation();var r=t.height-R0.mouse(e)[1]-2*Uu.verticalPadding,i=t.unitToPaddedPx.invert(r),n=t.brush,a=lBe(t,r),o=a.interval,s=n.svgBrush;if(s.wasDragged=!1,s.grabbingBar=a.region==="ns",s.grabbingBar){var l=o.map(t.unitToPaddedPx);s.grabPoint=r-l[0]-Uu.verticalPadding,s.barLength=l[1]-l[0]}s.clickableOrdinalRange=a.clickableOrdinalRange,s.stayingIntervals=t.multiselect&&n.filterSpecified?n.filter.getConsolidated():[],o&&(s.stayingIntervals=s.stayingIntervals.filter(function(u){return u[0]!==o[0]&&u[1]!==o[1]})),s.startExtent=a.region?o[a.region==="s"?1:0]:i,t.parent.inBrushDrag=!0,s.brushStartCallback()}function uBe(e,t){R0.event.sourceEvent.stopPropagation();var r=t.height-R0.mouse(e)[1]-2*Uu.verticalPadding,i=t.brush.svgBrush;i.wasDragged=!0,i._dragging=!0,i.grabbingBar?i.newExtent=[r-i.grabPoint,r+i.barLength-i.grabPoint].map(t.unitToPaddedPx.invert):i.newExtent=[i.startExtent,t.unitToPaddedPx.invert(r)].sort(uT),t.brush.filterSpecified=!0,i.extent=i.stayingIntervals.concat([i.newExtent]),i.brushCallback(t),VI(e.parentNode)}function wUt(e,t){var r=t.brush,i=r.filter,n=r.svgBrush;n._dragging||(fBe(e,t),uBe(e,t),t.brush.svgBrush.wasDragged=!1),n._dragging=!1;var a=R0.event;a.sourceEvent.stopPropagation();var o=n.grabbingBar;if(n.grabbingBar=!1,n.grabLocation=void 0,t.parent.inBrushDrag=!1,sBe(),!n.wasDragged){n.wasDragged=void 0,n.clickableOrdinalRange?r.filterSpecified&&t.multiselect?n.extent.push(n.clickableOrdinalRange):(n.extent=[n.clickableOrdinalRange],r.filterSpecified=!0):o?(n.extent=n.stayingIntervals,n.extent.length===0&&NX(r)):NX(r),n.brushCallback(t),VI(e.parentNode),n.brushEndCallback(r.filterSpecified?i.getConsolidated():[]);return}var s=function(){i.set(i.getConsolidated())};if(t.ordinal){var l=t.unitTickvals;l[l.length-1]<l[0]&&l.reverse(),n.newExtent=[HI(0,l,n.newExtent[0],n.stayingIntervals),HI(1,l,n.newExtent[1],n.stayingIntervals)];var u=n.newExtent[1]>n.newExtent[0];n.extent=n.stayingIntervals.concat(u?[n.newExtent]:[]),n.extent.length||NX(r),n.brushCallback(t),u?VI(e.parentNode,s):(s(),VI(e.parentNode))}else s();n.brushEndCallback(r.filterSpecified?i.getConsolidated():[])}function fBe(e,t){var r=t.height-R0.mouse(e)[1]-2*Uu.verticalPadding,i=lBe(t,r),n="crosshair";i.clickableOrdinalRange?n="pointer":i.region&&(n=i.region+"-resize"),R0.select(document.body).style("cursor",n)}function TUt(e){e.on("mousemove",function(t){R0.event.preventDefault(),t.parent.inBrushDrag||fBe(this,t)}).on("mouseleave",function(t){t.parent.inBrushDrag||sBe()}).call(R0.behavior.drag().on("dragstart",function(t){bUt(this,t)}).on("drag",function(t){uBe(this,t)}).on("dragend",function(t){wUt(this,t)}))}function cBe(e,t){return e[0]-t[0]}function AUt(e,t,r){var i=r._context.staticPlot,n=e.selectAll(".background").data(UI);n.enter().append("rect").classed("background",!0).call(yUt).call(mUt).style("pointer-events",i?"none":"auto").attr("transform",dUt(0,Uu.verticalPadding)),n.call(TUt).attr("height",function(s){return s.height-Uu.verticalPadding});var a=e.selectAll(".highlight-shadow").data(UI);a.enter().append("line").classed("highlight-shadow",!0).attr("x",-Uu.bar.width/2).attr("stroke-width",Uu.bar.width+Uu.bar.strokeWidth).attr("stroke",t).attr("opacity",Uu.bar.strokeOpacity).attr("stroke-linecap","butt"),a.attr("y1",function(s){return s.height}).call(UX);var o=e.selectAll(".highlight").data(UI);o.enter().append("line").classed("highlight",!0).attr("x",-Uu.bar.width/2).attr("stroke-width",Uu.bar.width-Uu.bar.strokeWidth).attr("stroke",Uu.bar.fillColor).attr("opacity",Uu.bar.fillOpacity).attr("stroke-linecap","butt"),o.attr("y1",function(s){return s.height}).call(UX)}function MUt(e,t,r){var i=e.selectAll("."+Uu.cn.axisBrush).data(UI,vUt);i.enter().append("g").classed(Uu.cn.axisBrush,!0),AUt(i,t,r)}function SUt(e){return e.svgBrush.extent.map(function(t){return t.slice()})}function NX(e){e.filterSpecified=!1,e.svgBrush.extent=[[-1/0,1/0]]}function EUt(e){return function(r){var i=r.brush,n=SUt(i),a=n.slice();i.filter.set(a),e()}}function hBe(e){for(var t=e.slice(),r=[],i,n=t.shift();n;){for(i=n.slice();(n=t.shift())&&n[0]<=i[1];)i[1]=Math.max(i[1],n[1]);r.push(i)}return r.length===1&&r[0][0]>r[0][1]&&(r=[]),r}function kUt(){var e=[],t,r;return{set:function(i){e=i.map(function(n){return n.slice().sort(uT)}).sort(cBe),e.length===1&&e[0][0]===-1/0&&e[0][1]===1/0&&(e=[[0,-1]]),t=hBe(e),r=e.reduce(function(n,a){return[Math.min(n[0],a[0]),Math.max(n[1],a[1])]},[1/0,-1/0])},get:function(){return e.slice()},getConsolidated:function(){return t},getBounds:function(){return r}}}function CUt(e,t,r,i,n,a){var o=kUt();return o.set(r),{filter:o,filterSpecified:t,svgBrush:{extent:[],brushStartCallback:i,brushCallback:EUt(n),brushEndCallback:a}}}function LUt(e,t){if(Array.isArray(e[0])?(e=e.map(function(i){return i.sort(uT)}),t.multiselect?e=hBe(e.sort(cBe)):e=[e[0]]):e=[e.sort(uT)],t.tickvals){var r=t.tickvals.slice().sort(uT);if(e=e.map(function(i){var n=[HI(0,r,i[0],[]),HI(1,r,i[1],[])];if(n[1]>n[0])return n}).filter(function(i){return i}),!e.length)return}return e.length>1?e:e[0]}vBe.exports={makeBrush:CUt,ensureAxisBrush:MUt,cleanRanges:LUt}});var gBe=ie((Ryr,pBe)=>{"use strict";var k1=Zt(),PUt=Hh().hasColorscale,RUt=$f(),DUt=fl().defaults,IUt=dh(),FUt=Wi(),dBe=BX(),qUt=VX(),HX=A5().maxDimensionCount,zUt=kI();function OUt(e,t,r,i,n){var a=n("line.color",r);if(PUt(e,"line")&&k1.isArrayOrTypedArray(a)){if(a.length)return n("line.colorscale"),RUt(e,t,i,n,{prefix:"line.",cLetter:"c"}),a.length;t.line.color=r}return 1/0}function BUt(e,t,r,i){function n(u,f){return k1.coerce(e,t,dBe.dimensions,u,f)}var a=n("values"),o=n("visible");if(a&&a.length||(o=t.visible=!1),o){n("label"),n("tickvals"),n("ticktext"),n("tickformat");var s=n("range");t._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:s},FUt.setConvert(t._ax,i.layout),n("multiselect");var l=n("constraintrange");l&&(t.constraintrange=qUt.cleanRanges(l,t))}}pBe.exports=function(t,r,i,n){function a(f,c){return k1.coerce(t,r,dBe,f,c)}var o=t.dimensions;Array.isArray(o)&&o.length>HX&&(k1.log("parcoords traces support up to "+HX+" dimensions at the moment"),o.splice(HX));var s=IUt(t,r,{name:"dimensions",layout:n,handleItemDefaults:BUt}),l=OUt(t,r,i,n,a);DUt(r,n,a),(!Array.isArray(s)||!s.length)&&(r.visible=!1),zUt(r,s,"values",l);var u=k1.extendFlat({},n.font,{size:Math.round(n.font.size/1.2)});k1.coerceFont(a,"labelfont",u),k1.coerceFont(a,"tickfont",u,{autoShadowDflt:!0}),k1.coerceFont(a,"rangefont",u),a("labelangle"),a("labelside"),a("unselected.line.color"),a("unselected.line.opacity")}});var mBe=ie((Dyr,yBe)=>{"use strict";var NUt=Zt().isArrayOrTypedArray,GX=ul(),UUt=mg().wrap;yBe.exports=function(t,r){var i,n;return GX.hasColorscale(r,"line")&&NUt(r.line.color)?(i=r.line.color,n=GX.extractOpts(r.line).colorscale,GX.calc(t,r,{vals:i,containerStr:"line",cLetter:"c"})):(i=VUt(r._length),n=[[0,r.line.color],[1,r.line.color]]),UUt({lineColor:i,cscale:n})};function VUt(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=.5;return t}});var YX=ie(GI=>{"use strict";var HUt=Zt().isTypedArray;GI.convertTypedArray=function(e){return HUt(e)?Array.prototype.slice.call(e):e};GI.isOrdinal=function(e){return!!e.tickvals};GI.isVisible=function(e){return e.visible||!("visible"in e)}});var kBe=ie((Fyr,EBe)=>{"use strict";var GUt=["precision highp float;","","varying vec4 fragColor;","","attribute vec4 p01_04, p05_08, p09_12, p13_16,","               p17_20, p21_24, p25_28, p29_32,","               p33_36, p37_40, p41_44, p45_48,","               p49_52, p53_56, p57_60, colors;","","uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,","             loA, hiA, loB, hiB, loC, hiC, loD, hiD;","","uniform vec2 resolution, viewBoxPos, viewBoxSize;","uniform float maskHeight;","uniform float drwLayer; // 0: context, 1: focus, 2: pick","uniform vec4 contextColor;","uniform sampler2D maskTexture, palette;","","bool isPick    = (drwLayer > 1.5);","bool isContext = (drwLayer < 0.5);","","const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);","const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);","","float val(mat4 p, mat4 v) {","    return dot(matrixCompMult(p, v) * UNITS, UNITS);","}","","float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {","    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);","    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);","    return y1 * (1.0 - ratio) + y2 * ratio;","}","","int iMod(int a, int b) {","    return a - b * (a / b);","}","","bool fOutside(float p, float lo, float hi) {","    return (lo < hi) && (lo > p || p > hi);","}","","bool vOutside(vec4 p, vec4 lo, vec4 hi) {","    return (","        fOutside(p[0], lo[0], hi[0]) ||","        fOutside(p[1], lo[1], hi[1]) ||","        fOutside(p[2], lo[2], hi[2]) ||","        fOutside(p[3], lo[3], hi[3])","    );","}","","bool mOutside(mat4 p, mat4 lo, mat4 hi) {","    return (","        vOutside(p[0], lo[0], hi[0]) ||","        vOutside(p[1], lo[1], hi[1]) ||","        vOutside(p[2], lo[2], hi[2]) ||","        vOutside(p[3], lo[3], hi[3])","    );","}","","bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {","    return mOutside(A, loA, hiA) ||","           mOutside(B, loB, hiB) ||","           mOutside(C, loC, hiC) ||","           mOutside(D, loD, hiD);","}","","bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {","    mat4 pnts[4];","    pnts[0] = A;","    pnts[1] = B;","    pnts[2] = C;","    pnts[3] = D;","","    for(int i = 0; i < 4; ++i) {","        for(int j = 0; j < 4; ++j) {","            for(int k = 0; k < 4; ++k) {","                if(0 == iMod(","                    int(255.0 * texture2D(maskTexture,","                        vec2(","                            (float(i * 2 + j / 2) + 0.5) / 8.0,","                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight","                        ))[3]","                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),","                    2","                )) return true;","            }","        }","    }","    return false;","}","","vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {","    float x = 0.5 * sign(v) + 0.5;","    float y = axisY(x, A, B, C, D);","    float z = 1.0 - abs(v);","","    z += isContext ? 0.0 : 2.0 * float(","        outsideBoundingBox(A, B, C, D) ||","        outsideRasterMask(A, B, C, D)","    );","","    return vec4(","        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,","        z,","        1.0","    );","}","","void main() {","    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);","    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);","    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);","    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);","","    float v = colors[3];","","    gl_Position = position(isContext, v, A, B, C, D);","","    fragColor =","        isContext ? vec4(contextColor) :","        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));","}"].join(`
`),YUt=["precision highp float;","","varying vec4 fragColor;","","void main() {","    gl_FragColor = fragColor;","}"].join(`
`),M5=A5().maxDimensionCount,ABe=Zt(),xBe=1e-6,YI=2048,WUt=new Uint8Array(4),_Be=new Uint8Array(4),bBe={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function XUt(e){e.read({x:0,y:0,width:1,height:1,data:WUt})}function MBe(e,t,r,i,n){var a=e._gl;a.enable(a.SCISSOR_TEST),a.scissor(t,r,i,n),e.clear({color:[0,0,0,0],depth:1})}function ZUt(e,t,r,i,n,a){var o=a.key;function s(l){var u=Math.min(i,n-l*i);l===0&&(window.cancelAnimationFrame(r.currentRafs[o]),delete r.currentRafs[o],MBe(e,a.scissorX,a.scissorY,a.scissorWidth,a.viewBoxSize[1])),!r.clearOnly&&(a.count=2*u,a.offset=2*l*i,t(a),l*i+u<n&&(r.currentRafs[o]=window.requestAnimationFrame(function(){s(l+1)})),r.drawCompleted=!1)}r.drawCompleted||(XUt(e),r.drawCompleted=!0),s(0)}function jUt(e){return Math.max(xBe,Math.min(1-xBe,e))}function KUt(e,t){for(var r=new Array(256),i=0;i<256;i++)r[i]=e(i/255).concat(t);return r}function WX(e,t){return(e>>>8*t)%256/255}function JUt(e,t,r){for(var i=new Array(e*(M5+4)),n=0,a=0;a<e;a++){for(var o=0;o<M5;o++)i[n++]=o<t.length?t[o].paddedUnitValues[a]:.5;i[n++]=WX(a,2),i[n++]=WX(a,1),i[n++]=WX(a,0),i[n++]=jUt(r[a])}return i}function QUt(e,t,r){for(var i=new Array(t*8),n=0,a=0;a<t;a++)for(var o=0;o<2;o++)for(var s=0;s<4;s++){var l=e*4+s,u=r[a*64+l];l===63&&o===0&&(u*=-1),i[n++]=u}return i}function wBe(e){var t="0"+e;return t.substr(t.length-2)}function SBe(e){return e<M5?"p"+wBe(e+1)+"_"+wBe(e+4):"colors"}function $Ut(e,t,r){for(var i=0;i<=M5;i+=4)e[SBe(i)](QUt(i/4,t,r))}function eVt(e){for(var t={},r=0;r<=M5;r+=4)t[SBe(r)]=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return t}function tVt(e,t,r,i,n,a,o,s,l,u,f,c,h,v){for(var d=[[],[]],x=0;x<64;x++)d[0][x]=x===n?1:0,d[1][x]=x===a?1:0;o*=v,s*=v,l*=v,u*=v;var b=e.lines.canvasOverdrag*v,p=e.domain,w=e.canvasWidth*v,A=e.canvasHeight*v,T=e.pad.l*v,k=e.pad.b*v,_=e.layoutHeight*v,E=e.layoutWidth*v,S=e.deselectedLines.color,g=e.deselectedLines.opacity,C=ABe.extendFlat({key:f,resolution:[w,A],viewBoxPos:[o+b,s],viewBoxSize:[l,u],i0:n,i1:a,dim0A:d[0].slice(0,16),dim0B:d[0].slice(16,32),dim0C:d[0].slice(32,48),dim0D:d[0].slice(48,64),dim1A:d[1].slice(0,16),dim1B:d[1].slice(16,32),dim1C:d[1].slice(32,48),dim1D:d[1].slice(48,64),drwLayer:c,contextColor:[S[0]/255,S[1]/255,S[2]/255,g!=="auto"?S[3]*g:Math.max(1/255,Math.pow(1/e.lines.color.length,1/3))],scissorX:(i===t?0:o+b)+(T-b)+E*p.x[0],scissorWidth:(i===r?w-o+b:l+.5)+(i===t?o+b:0),scissorY:s+k+_*p.y[0],scissorHeight:u,viewportX:T-b+E*p.x[0],viewportY:k+_*p.y[0],viewportWidth:w,viewportHeight:A},h);return C}function TBe(e){var t=YI-1,r=Math.max(0,Math.floor(e[0]*t),0),i=Math.min(t,Math.ceil(e[1]*t),t);return[Math.min(r,i),Math.max(r,i)]}EBe.exports=function(e,t){var r=t.context,i=t.pick,n=t.regl,a=n._gl,o=a.getParameter(a.ALIASED_LINE_WIDTH_RANGE),s=Math.max(o[0],Math.min(o[1],t.viewModel.plotGlPixelRatio)),l={currentRafs:{},drawCompleted:!0,clearOnly:!1},u,f,c,h,v=eVt(n),d,x=n.texture(bBe),b=[];w(t);var p=n({profile:!1,blend:{enable:r,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!r,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:n.prop("scissorX"),y:n.prop("scissorY"),width:n.prop("scissorWidth"),height:n.prop("scissorHeight")}},viewport:{x:n.prop("viewportX"),y:n.prop("viewportY"),width:n.prop("viewportWidth"),height:n.prop("viewportHeight")},dither:!1,vert:GUt,frag:YUt,primitive:"lines",lineWidth:s,attributes:v,uniforms:{resolution:n.prop("resolution"),viewBoxPos:n.prop("viewBoxPos"),viewBoxSize:n.prop("viewBoxSize"),dim0A:n.prop("dim0A"),dim1A:n.prop("dim1A"),dim0B:n.prop("dim0B"),dim1B:n.prop("dim1B"),dim0C:n.prop("dim0C"),dim1C:n.prop("dim1C"),dim0D:n.prop("dim0D"),dim1D:n.prop("dim1D"),loA:n.prop("loA"),hiA:n.prop("hiA"),loB:n.prop("loB"),hiB:n.prop("hiB"),loC:n.prop("loC"),hiC:n.prop("hiC"),loD:n.prop("loD"),hiD:n.prop("hiD"),palette:x,contextColor:n.prop("contextColor"),maskTexture:n.prop("maskTexture"),drwLayer:n.prop("drwLayer"),maskHeight:n.prop("maskHeight")},offset:n.prop("offset"),count:n.prop("count")});function w(S){u=S.model,f=S.viewModel,c=f.dimensions.slice(),h=c[0]?c[0].values.length:0;var g=u.lines,C=i?g.color.map(function(P,D){return D/g.color.length}):g.color,M=JUt(h,c,C);$Ut(v,h,M),!r&&!i&&(x=n.texture(ABe.extendFlat({data:KUt(u.unitToColor,255)},bBe)))}function A(S){var g,C,M,P=[[],[]];for(M=0;M<64;M++){var D=!S&&M<c.length?c[M].brush.filter.getBounds():[-1/0,1/0];P[0][M]=D[0],P[1][M]=D[1]}var q=YI*8,O=new Array(q);for(g=0;g<q;g++)O[g]=255;if(!S)for(g=0;g<c.length;g++){var U=g%8,B=(g-U)/8,F=Math.pow(2,U),N=c[g],X=N.brush.filter.get();if(!(X.length<2)){var K=TBe(X[0])[1];for(C=1;C<X.length;C++){var ne=TBe(X[C]);for(M=K+1;M<ne[0];M++)O[M*8+B]&=~F;K=Math.max(K,ne[1])}}}var fe={shape:[8,YI],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:O};return d?d(fe):d=n.texture(fe),{maskTexture:d,maskHeight:YI,loA:P[0].slice(0,16),loB:P[0].slice(16,32),loC:P[0].slice(32,48),loD:P[0].slice(48,64),hiA:P[1].slice(0,16),hiB:P[1].slice(16,32),hiC:P[1].slice(32,48),hiD:P[1].slice(48,64)}}function T(S,g,C){var M=S.length,P,D,q,O=1/0,U=-1/0;for(P=0;P<M;P++)S[P].dim0.canvasX<O&&(O=S[P].dim0.canvasX,D=P),S[P].dim1.canvasX>U&&(U=S[P].dim1.canvasX,q=P);M===0&&MBe(n,0,0,u.canvasWidth,u.canvasHeight);var B=A(r);for(P=0;P<M;P++){var F=S[P],N=F.dim0.crossfilterDimensionIndex,X=F.dim1.crossfilterDimensionIndex,K=F.canvasX,ne=F.canvasY,fe=K+F.panelSizeX,ue=F.plotGlPixelRatio;if(g||!b[N]||b[N][0]!==K||b[N][1]!==fe){b[N]=[K,fe];var ee=tVt(u,D,q,P,N,X,K,ne,F.panelSizeX,F.panelSizeY,F.dim0.crossfilterDimensionIndex,r?0:i?2:1,B,ue);l.clearOnly=C;var Z=g?u.lines.blockLineCount:h;ZUt(n,p,l,Z,h,ee)}}}function k(S,g){return n.read({x:S,y:g,width:1,height:1,data:_Be}),_Be}function _(S,g,C,M){var P=new Uint8Array(4*C*M);return n.read({x:S,y:g,width:C,height:M,data:P}),P}function E(){e.style["pointer-events"]="none",x.destroy(),d&&d.destroy();for(var S in v)v[S].destroy()}return{render:T,readPixel:k,readPixels:_,destroy:E,update:w}}});var VBe=ie((qyr,UBe)=>{"use strict";var Tc=Mi(),Sy=Zt(),XX=Sy.isArrayOrTypedArray,IBe=Sy.numberFormat,FBe=nG(),qBe=Wi(),rVt=Sy.strRotate,xg=Sy.strTranslate,nVt=ks(),WI=oa(),CBe=ul(),KX=mg(),Np=KX.keyFun,_g=KX.repeat,zBe=KX.unwrap,fT=YX(),Oo=A5(),OBe=VX(),iVt=kBe();function LBe(e,t,r){return Sy.aggNums(e,null,t,r)}function BBe(e,t){return JX(LBe(Math.min,e,t),LBe(Math.max,e,t))}function XI(e){var t=e.range;return t?JX(t[0],t[1]):BBe(e.values,e._length)}function JX(e,t){return(isNaN(e)||!isFinite(e))&&(e=0),(isNaN(t)||!isFinite(t))&&(t=0),e===t&&(e===0?(e-=1,t+=1):(e*=.9,t*=1.1)),[e,t]}function aVt(e,t){return t?function(r,i){var n=t[i];return n==null?e(r):n}:e}function oVt(e,t,r,i,n){var a=XI(r);return i?Tc.scale.ordinal().domain(i.map(aVt(IBe(r.tickformat),n))).range(i.map(function(o){var s=(o-a[0])/(a[1]-a[0]);return e-t+s*(2*t-e)})):Tc.scale.linear().domain(a).range([e-t,t])}function sVt(e,t){return Tc.scale.linear().range([t,e-t])}function lVt(e,t){return Tc.scale.linear().domain(XI(e)).range([t,1-t])}function uVt(e){if(e.tickvals){var t=XI(e);return Tc.scale.ordinal().domain(e.tickvals).range(e.tickvals.map(function(r){return(r-t[0])/(t[1]-t[0])}))}}function fVt(e){var t=e.map(function(a){return a[0]}),r=e.map(function(a){var o=FBe(a[1]);return Tc.rgb("rgb("+o[0]+","+o[1]+","+o[2]+")")}),i=function(a){return function(o){return o[a]}},n="rgb".split("").map(function(a){return Tc.scale.linear().clamp(!0).domain(t).range(r.map(i(a)))});return function(a){return n.map(function(o){return o(a)})}}function jX(e){return e.dimensions.some(function(t){return t.brush.filterSpecified})}function cVt(e,t,r){var i=zBe(t),n=i.trace,a=fT.convertTypedArray(i.lineColor),o=n.line,s={color:FBe(n.unselected.line.color),opacity:n.unselected.line.opacity},l=CBe.extractOpts(o),u=l.reversescale?CBe.flipScale(i.cscale):i.cscale,f=n.domain,c=n.dimensions,h=e.width,v=n.labelangle,d=n.labelside,x=n.labelfont,b=n.tickfont,p=n.rangefont,w=Sy.extendDeepNoArrays({},o,{color:a.map(Tc.scale.linear().domain(XI({values:a,range:[l.min,l.max],_length:n._length}))),blockLineCount:Oo.blockLineCount,canvasOverdrag:Oo.overdrag*Oo.canvasPixelRatio}),A=Math.floor(h*(f.x[1]-f.x[0])),T=Math.floor(e.height*(f.y[1]-f.y[0])),k=e.margin||{l:80,r:80,t:100,b:80},_=A,E=T;return{key:r,colCount:c.filter(fT.isVisible).length,dimensions:c,tickDistance:Oo.tickDistance,unitToColor:fVt(u),lines:w,deselectedLines:s,labelAngle:v,labelSide:d,labelFont:x,tickFont:b,rangeFont:p,layoutWidth:h,layoutHeight:e.height,domain:f,translateX:f.x[0]*h,translateY:e.height-f.y[1]*e.height,pad:k,canvasWidth:_*Oo.canvasPixelRatio+2*w.canvasOverdrag,canvasHeight:E*Oo.canvasPixelRatio,width:_,height:E,canvasPixelRatio:Oo.canvasPixelRatio}}function hVt(e,t,r){var i=r.width,n=r.height,a=r.dimensions,o=r.canvasPixelRatio,s=function(h){return i*h/Math.max(1,r.colCount-1)},l=Oo.verticalPadding/n,u=sVt(n,Oo.verticalPadding),f={key:r.key,xScale:s,model:r,inBrushDrag:!1},c={};return f.dimensions=a.filter(fT.isVisible).map(function(h,v){var d=lVt(h,l),x=c[h.label];c[h.label]=(x||0)+1;var b=h.label+(x?"__"+x:""),p=h.constraintrange,w=p&&p.length;w&&!XX(p[0])&&(p=[p]);var A=w?p.map(function(D){return D.map(d)}):[[-1/0,1/0]],T=function(){var D=f;D.focusLayer&&D.focusLayer.render(D.panels,!0);var q=jX(D);!e.contextShown()&&q?(D.contextLayer&&D.contextLayer.render(D.panels,!0),e.contextShown(!0)):e.contextShown()&&!q&&(D.contextLayer&&D.contextLayer.render(D.panels,!0,!0),e.contextShown(!1))},k=h.values;k.length>h._length&&(k=k.slice(0,h._length));var _=h.tickvals,E;function S(D,q){return{val:D,text:E[q]}}function g(D,q){return D.val-q.val}if(XX(_)&&_.length){Sy.isTypedArray(_)&&(_=Array.from(_)),E=h.ticktext,!XX(E)||!E.length?E=_.map(IBe(h.tickformat)):E.length>_.length?E=E.slice(0,_.length):_.length>E.length&&(_=_.slice(0,E.length));for(var C=1;C<_.length;C++)if(_[C]<_[C-1]){for(var M=_.map(S).sort(g),P=0;P<_.length;P++)_[P]=M[P].val,E[P]=M[P].text;break}}else _=void 0;return k=fT.convertTypedArray(k),{key:b,label:h.label,tickFormat:h.tickformat,tickvals:_,ticktext:E,ordinal:fT.isOrdinal(h),multiselect:h.multiselect,xIndex:v,crossfilterDimensionIndex:v,visibleIndex:h._index,height:n,values:k,paddedUnitValues:k.map(d),unitTickvals:_&&_.map(d),xScale:s,x:s(v),canvasX:s(v)*o,unitToPaddedPx:u,domainScale:oVt(n,Oo.verticalPadding,h,_,E),ordinalScale:uVt(h),parent:f,model:r,brush:OBe.makeBrush(e,w,A,function(){e.linePickActive(!1)},T,function(D){if(f.focusLayer.render(f.panels,!0),f.pickLayer&&f.pickLayer.render(f.panels,!0),e.linePickActive(!0),t&&t.filterChanged){var q=d.invert,O=D.map(function(U){return U.map(q).sort(Sy.sorterAsc)}).sort(function(U,B){return U[0]-B[0]});t.filterChanged(f.key,h._index,O)}})}}),f}function PBe(e){e.classed(Oo.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function vVt(){var e=!0,t=!1;return{linePickActive:function(r){return arguments.length?e=!!r:e},contextShown:function(r){return arguments.length?t=!!r:t}}}function RBe(e,t){var r=t==="top"?1:-1,i=e*Math.PI/180,n=Math.sin(i),a=Math.cos(i);return{dir:r,dx:n,dy:a,degrees:e}}function ZX(e,t,r){for(var i=t.panels||(t.panels=[]),n=e.data(),a=0;a<n.length-1;a++){var o=i[a]||(i[a]={}),s=n[a],l=n[a+1];o.dim0=s,o.dim1=l,o.canvasX=s.canvasX,o.panelSizeX=l.canvasX-s.canvasX,o.panelSizeY=t.model.canvasHeight,o.y=0,o.canvasY=0,o.plotGlPixelRatio=r}}function dVt(e){for(var t=0;t<e.length;t++)for(var r=0;r<e[t].length;r++)for(var i=e[t][r].trace,n=i.dimensions,a=0;a<n.length;a++){var o=n[a].values,s=n[a]._ax;s&&(s.range?s.range=JX(s.range[0],s.range[1]):s.range=BBe(o,i._length),s.dtick||(s.dtick=.01*(Math.abs(s.range[1]-s.range[0])||1)),s.tickformat=n[a].tickformat,qBe.calcTicks(s),s.cleanRange())}}function NBe(e,t){return qBe.tickText(e._ax,t,!1).text}function DBe(e,t){if(e.ordinal)return"";var r=e.domainScale.domain(),i=r[t?r.length-1:0];return NBe(e.model.dimensions[e.visibleIndex],i)}UBe.exports=function(t,r,i,n){var a=t._context.staticPlot,o=t._fullLayout,s=o._toppaper,l=o._glcontainer,u=t._context.plotGlPixelRatio,f=t._fullLayout.paper_bgcolor;dVt(r);var c=vVt(),h=r.filter(function(P){return zBe(P).trace.visible}).map(cVt.bind(0,i)).map(hVt.bind(0,c,n));l.each(function(P,D){return Sy.extendFlat(P,h[D])});var v=l.selectAll(".gl-canvas").each(function(P){P.viewModel=h[0],P.viewModel.plotGlPixelRatio=u,P.viewModel.paperColor=f,P.model=P.viewModel?P.viewModel.model:null}),d=null,x=v.filter(function(P){return P.pick});x.style("pointer-events",a?"none":"auto").on("mousemove",function(P){if(c.linePickActive()&&P.lineLayer&&n&&n.hover){var D=Tc.event,q=this.width,O=this.height,U=Tc.mouse(this),B=U[0],F=U[1];if(B<0||F<0||B>=q||F>=O)return;var N=P.lineLayer.readPixel(B,O-1-F),X=N[3]!==0,K=X?N[2]+256*(N[1]+256*N[0]):null,ne={x:B,y:F,clientX:D.clientX,clientY:D.clientY,dataIndex:P.model.key,curveNumber:K};K!==d&&(X?n.hover(ne):n.unhover&&n.unhover(ne),d=K)}}),v.style("opacity",function(P){return P.pick?0:1}),s.style("background","rgba(255, 255, 255, 0)");var b=s.selectAll("."+Oo.cn.parcoords).data(h,Np);b.exit().remove(),b.enter().append("g").classed(Oo.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),b.attr("transform",function(P){return xg(P.model.translateX,P.model.translateY)});var p=b.selectAll("."+Oo.cn.parcoordsControlView).data(_g,Np);p.enter().append("g").classed(Oo.cn.parcoordsControlView,!0),p.attr("transform",function(P){return xg(P.model.pad.l,P.model.pad.t)});var w=p.selectAll("."+Oo.cn.yAxis).data(function(P){return P.dimensions},Np);w.enter().append("g").classed(Oo.cn.yAxis,!0),p.each(function(P){ZX(w,P,u)}),v.each(function(P){if(P.viewModel){!P.lineLayer||n?P.lineLayer=iVt(this,P):P.lineLayer.update(P),(P.key||P.key===0)&&(P.viewModel[P.key]=P.lineLayer);var D=!P.context||n;P.lineLayer.render(P.viewModel.panels,D)}}),w.attr("transform",function(P){return xg(P.xScale(P.xIndex),0)}),w.call(Tc.behavior.drag().origin(function(P){return P}).on("drag",function(P){var D=P.parent;c.linePickActive(!1),P.x=Math.max(-Oo.overdrag,Math.min(P.model.width+Oo.overdrag,Tc.event.x)),P.canvasX=P.x*P.model.canvasPixelRatio,w.sort(function(q,O){return q.x-O.x}).each(function(q,O){q.xIndex=O,q.x=P===q?q.x:q.xScale(q.xIndex),q.canvasX=q.x*q.model.canvasPixelRatio}),ZX(w,D,u),w.filter(function(q){return Math.abs(P.xIndex-q.xIndex)!==0}).attr("transform",function(q){return xg(q.xScale(q.xIndex),0)}),Tc.select(this).attr("transform",xg(P.x,0)),w.each(function(q,O,U){U===P.parent.key&&(D.dimensions[O]=q)}),D.contextLayer&&D.contextLayer.render(D.panels,!1,!jX(D)),D.focusLayer.render&&D.focusLayer.render(D.panels)}).on("dragend",function(P){var D=P.parent;P.x=P.xScale(P.xIndex),P.canvasX=P.x*P.model.canvasPixelRatio,ZX(w,D,u),Tc.select(this).attr("transform",function(q){return xg(q.x,0)}),D.contextLayer&&D.contextLayer.render(D.panels,!1,!jX(D)),D.focusLayer&&D.focusLayer.render(D.panels),D.pickLayer&&D.pickLayer.render(D.panels,!0),c.linePickActive(!0),n&&n.axesMoved&&n.axesMoved(D.key,D.dimensions.map(function(q){return q.crossfilterDimensionIndex}))})),w.exit().remove();var A=w.selectAll("."+Oo.cn.axisOverlays).data(_g,Np);A.enter().append("g").classed(Oo.cn.axisOverlays,!0),A.selectAll("."+Oo.cn.axis).remove();var T=A.selectAll("."+Oo.cn.axis).data(_g,Np);T.enter().append("g").classed(Oo.cn.axis,!0),T.each(function(P){var D=P.model.height/P.model.tickDistance,q=P.domainScale,O=q.domain();Tc.select(this).call(Tc.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(D,P.tickFormat).tickValues(P.ordinal?O:null).tickFormat(function(U){return fT.isOrdinal(P)?U:NBe(P.model.dimensions[P.visibleIndex],U)}).scale(q)),WI.font(T.selectAll("text"),P.model.tickFont)}),T.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),T.selectAll("text").style("cursor","default");var k=A.selectAll("."+Oo.cn.axisHeading).data(_g,Np);k.enter().append("g").classed(Oo.cn.axisHeading,!0);var _=k.selectAll("."+Oo.cn.axisTitle).data(_g,Np);_.enter().append("text").classed(Oo.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",a?"none":"auto"),_.text(function(P){return P.label}).each(function(P){var D=Tc.select(this);WI.font(D,P.model.labelFont),nVt.convertToTspans(D,t)}).attr("transform",function(P){var D=RBe(P.model.labelAngle,P.model.labelSide),q=Oo.axisTitleOffset;return(D.dir>0?"":xg(0,2*q+P.model.height))+rVt(D.degrees)+xg(-q*D.dx,-q*D.dy)}).attr("text-anchor",function(P){var D=RBe(P.model.labelAngle,P.model.labelSide),q=Math.abs(D.dx),O=Math.abs(D.dy);return 2*q>O?D.dir*D.dx<0?"start":"end":"middle"});var E=A.selectAll("."+Oo.cn.axisExtent).data(_g,Np);E.enter().append("g").classed(Oo.cn.axisExtent,!0);var S=E.selectAll("."+Oo.cn.axisExtentTop).data(_g,Np);S.enter().append("g").classed(Oo.cn.axisExtentTop,!0),S.attr("transform",xg(0,-Oo.axisExtentOffset));var g=S.selectAll("."+Oo.cn.axisExtentTopText).data(_g,Np);g.enter().append("text").classed(Oo.cn.axisExtentTopText,!0).call(PBe),g.text(function(P){return DBe(P,!0)}).each(function(P){WI.font(Tc.select(this),P.model.rangeFont)});var C=E.selectAll("."+Oo.cn.axisExtentBottom).data(_g,Np);C.enter().append("g").classed(Oo.cn.axisExtentBottom,!0),C.attr("transform",function(P){return xg(0,P.model.height+Oo.axisExtentOffset)});var M=C.selectAll("."+Oo.cn.axisExtentBottomText).data(_g,Np);M.enter().append("text").classed(Oo.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(PBe),M.text(function(P){return DBe(P,!1)}).each(function(P){WI.font(Tc.select(this),P.model.rangeFont)}),OBe.ensureAxisBrush(A,f,t)}});var $X=ie((QX,WBe)=>{"use strict";var pVt=VBe(),gVt=SI(),HBe=YX().isVisible,YBe={};function GBe(e,t,r){var i=t.indexOf(r),n=e.indexOf(i);return n===-1&&(n+=t.length),n}function yVt(e,t){return function(i,n){return GBe(e,t,i)-GBe(e,t,n)}}var QX=WBe.exports=function(t,r){var i=t._fullLayout,n=gVt(t,[],YBe);if(n){var a={},o={},s={},l={},u=i._size;r.forEach(function(d,x){var b=d[0].trace;s[x]=b.index;var p=l[x]=b._fullInput.index;a[x]=t.data[p].dimensions,o[x]=t.data[p].dimensions.slice()});var f=function(d,x,b){var p=o[d][x],w=b.map(function(S){return S.slice()}),A="dimensions["+x+"].constraintrange",T=i._tracePreGUI[t._fullData[s[d]]._fullInput.uid];if(T[A]===void 0){var k=p.constraintrange;T[A]=k||null}var _=t._fullData[s[d]].dimensions[x];w.length?(w.length===1&&(w=w[0]),p.constraintrange=w,_.constraintrange=w.slice(),w=[w]):(delete p.constraintrange,delete _.constraintrange,w=null);var E={};E[A]=w,t.emit("plotly_restyle",[E,[l[d]]])},c=function(d){t.emit("plotly_hover",d)},h=function(d){t.emit("plotly_unhover",d)},v=function(d,x){var b=yVt(x,o[d].filter(HBe));a[d].sort(b),o[d].filter(function(p){return!HBe(p)}).sort(function(p){return o[d].indexOf(p)}).forEach(function(p){a[d].splice(a[d].indexOf(p),1),a[d].splice(o[d].indexOf(p),0,p)}),t.emit("plotly_restyle",[{dimensions:[a[d]]},[l[d]]])};pVt(t,r,{width:u.w,height:u.h,margin:{t:u.t,r:u.r,b:u.b,l:u.l}},{filterChanged:f,hover:c,unhover:h,axesMoved:v})}};QX.reglPrecompiled=YBe});var ZBe=ie(S5=>{"use strict";var XBe=Mi(),mVt=pc().getModuleCalcData,xVt=$X(),_Vt=Cd();S5.name="parcoords";S5.plot=function(e){var t=mVt(e.calcdata,"parcoords")[0];t.length&&xVt(e,t)};S5.clean=function(e,t,r,i){var n=i._has&&i._has("parcoords"),a=t._has&&t._has("parcoords");n&&!a&&(i._paperdiv.selectAll(".parcoords").remove(),i._glimages.selectAll("*").remove())};S5.toSVG=function(e){var t=e._fullLayout._glimages,r=XBe.select(e).selectAll(".svg-container"),i=r.filter(function(a,o){return o===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function n(){var a=this,o=a.toDataURL("image/png"),s=t.append("svg:image");s.attr({xmlns:_Vt.svg,"xlink:href":o,preserveAspectRatio:"none",x:0,y:0,width:a.style.width,height:a.style.height})}i.each(n),window.setTimeout(function(){XBe.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}});var KBe=ie((Oyr,jBe)=>{"use strict";jBe.exports={attributes:BX(),supplyDefaults:gBe(),calc:mBe(),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:ZBe(),categories:["gl","regl","noOpacity","noHover"],meta:{}}});var $Be=ie((Byr,QBe)=>{"use strict";var JBe=KBe();JBe.plot=$X();QBe.exports=JBe});var tNe=ie((Nyr,eNe)=>{"use strict";eNe.exports=$Be()});var eZ=ie((Uyr,aNe)=>{"use strict";var nNe=aa().extendFlat,bVt=rs(),rNe=Xs(),wVt=Ls(),iNe=Ba().hovertemplateAttrs,TVt=fl().attributes,AVt=nNe({editType:"calc"},wVt("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:iNe({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});aNe.exports={domain:TVt({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:nNe({},bVt.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:iNe({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:rNe({editType:"calc"}),tickfont:rNe({autoShadowDflt:!0,editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:AVt,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}});var lNe=ie((Vyr,sNe)=>{"use strict";var cT=Zt(),MVt=Hh().hasColorscale,SVt=$f(),EVt=fl().defaults,kVt=dh(),oNe=eZ(),CVt=kI(),LVt=hh().isTypedArraySpec;function PVt(e,t,r,i,n){n("line.shape"),n("line.hovertemplate");var a=n("line.color",i.colorway[0]);if(MVt(e,"line")&&cT.isArrayOrTypedArray(a)){if(a.length)return n("line.colorscale"),SVt(e,t,i,n,{prefix:"line.",cLetter:"c"}),a.length;t.line.color=r}return 1/0}function RVt(e,t){function r(u,f){return cT.coerce(e,t,oNe.dimensions,u,f)}var i=r("values"),n=r("visible");if(i&&i.length||(n=t.visible=!1),n){r("label"),r("displayindex",t._index);var a=e.categoryarray,o=cT.isArrayOrTypedArray(a)&&a.length>0||LVt(a),s;o&&(s="array");var l=r("categoryorder",s);l==="array"?(r("categoryarray"),r("ticktext")):(delete e.categoryarray,delete e.ticktext),!o&&l==="array"&&(t.categoryorder="trace")}}sNe.exports=function(t,r,i,n){function a(u,f){return cT.coerce(t,r,oNe,u,f)}var o=kVt(t,r,{name:"dimensions",handleItemDefaults:RVt}),s=PVt(t,r,i,n,a);EVt(r,n,a),(!Array.isArray(o)||!o.length)&&(r.visible=!1),CVt(r,o,"values",s),a("hoveron"),a("hovertemplate"),a("arrangement"),a("bundlecolors"),a("sortpaths"),a("counts");var l=n.font;cT.coerceFont(a,"labelfont",l,{overrideDflt:{size:Math.round(l.size)}}),cT.coerceFont(a,"tickfont",l,{autoShadowDflt:!0,overrideDflt:{size:Math.round(l.size/1.2)}})}});var fNe=ie((Hyr,uNe)=>{"use strict";var DVt=mg().wrap,IVt=Hh().hasColorscale,FVt=xv(),qVt=qq(),zVt=oa(),E5=Zt(),OVt=la();uNe.exports=function(t,r){var i=E5.filterVisible(r.dimensions);if(i.length===0)return[];var n=i.map(function(g){var C;if(g.categoryorder==="trace")C=null;else if(g.categoryorder==="array")C=g.categoryarray;else{C=qVt(g.values);for(var M=!0,P=0;P<C.length;P++)if(!OVt(C[P])){M=!1;break}C.sort(M?E5.sorterAsc:void 0),g.categoryorder==="category descending"&&(C=C.reverse())}return YVt(g.values,C)}),a,o,s;E5.isArrayOrTypedArray(r.counts)?a=r.counts:a=[r.counts],WVt(i),i.forEach(function(g,C){XVt(g,n[C])});var l=r.line,u;l?(IVt(r,"line")&&FVt(t,r,{vals:r.line.color,containerStr:"line",cLetter:"c"}),u=zVt.tryColorscale(l)):u=E5.identity;function f(g){var C,M;return E5.isArrayOrTypedArray(l.color)?(C=l.color[g%l.color.length],M=C):C=l.color,{color:u(C),rawColor:M}}var c=i[0].values.length,h={},v=n.map(function(g){return g.inds});s=0;var d,x;for(d=0;d<c;d++){var b=[];for(x=0;x<v.length;x++)b.push(v[x][d]);o=a[d%a.length],s+=o;var p=f(d),w=b+"-"+p.rawColor;h[w]===void 0&&(h[w]=HVt(b,p.color,p.rawColor)),GVt(h[w],d,o)}var A=i.map(function(g,C){return NVt(C,g._index,g._displayindex,g.label,s)});for(d=0;d<c;d++)for(o=a[d%a.length],x=0;x<A.length;x++){var T=A[x].containerInd,k=n[x].inds[d],_=A[x].categories;if(_[k]===void 0){var E=r.dimensions[T]._categoryarray[k],S=r.dimensions[T]._ticktext[k];_[k]=UVt(x,k,E,S)}VVt(_[k],d,o)}return DVt(BVt(A,h,s))};function BVt(e,t,r){var i=e.map(function(n){return n.categories.length}).reduce(function(n,a){return Math.max(n,a)});return{dimensions:e,paths:t,trace:void 0,maxCats:i,count:r}}function NVt(e,t,r,i,n){return{dimensionInd:e,containerInd:t,displayInd:r,dimensionLabel:i,count:n,categories:[],dragX:null}}function UVt(e,t,r,i){return{dimensionInd:e,categoryInd:t,categoryValue:r,displayInd:t,categoryLabel:i,valueInds:[],count:0,dragY:null}}function VVt(e,t,r){e.valueInds.push(t),e.count+=r}function HVt(e,t,r){return{categoryInds:e,color:t,rawColor:r,valueInds:[],count:0}}function GVt(e,t,r){e.valueInds.push(t),e.count+=r}function YVt(e,t){t==null?t=[]:t=t.map(function(u){return u});var r={},i={},n=[];t.forEach(function(u,f){r[u]=0,i[u]=f});for(var a=0;a<e.length;a++){var o=e[a],s;r[o]===void 0?(r[o]=1,s=t.push(o)-1,i[o]=s):(r[o]++,s=i[o]),n.push(s)}var l=t.map(function(u){return r[u]});return{uniqueValues:t,uniqueCounts:l,inds:n}}function WVt(e){var t=e.map(function(i){return i.displayindex}),r;if(ZVt(t))for(r=0;r<e.length;r++)e[r]._displayindex=e[r].displayindex;else for(r=0;r<e.length;r++)e[r]._displayindex=r}function XVt(e,t){e._categoryarray=t.uniqueValues,e.ticktext===null||e.ticktext===void 0?e._ticktext=[]:e._ticktext=e.ticktext.slice();for(var r=e._ticktext.length;r<t.uniqueValues.length;r++)e._ticktext.push(t.uniqueValues[r])}function ZVt(e){for(var t=new Array(e.length),r=0;r<e.length;r++){if(e[r]<0||e[r]>=e.length||t[e[r]]!==void 0)return!1;t[e[r]]=!0}return!0}});var xNe=ie((Gyr,mNe)=>{"use strict";var Bo=Mi(),jVt=(P_(),jb(L_)).interpolateNumber,KVt=rL(),L5=Ol(),C1=Zt(),k5=C1.strTranslate,cNe=oa(),tZ=Kf(),JVt=ks();function QVt(e,t,r,i){var n=t._context.staticPlot,a=e.map(vHt.bind(0,t,r)),o=i.selectAll("g.parcatslayer").data([null]);o.enter().append("g").attr("class","parcatslayer").style("pointer-events",n?"none":"all");var s=o.selectAll("g.trace.parcats").data(a,Ey),l=s.enter().append("g").attr("class","trace parcats");s.attr("transform",function(w){return k5(w.x,w.y)}),l.append("g").attr("class","paths");var u=s.select("g.paths"),f=u.selectAll("path.path").data(function(w){return w.paths},Ey);f.attr("fill",function(w){return w.model.color});var c=f.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(w){return w.model.color}).attr("fill-opacity",0);iZ(c),f.attr("d",function(w){return w.svgD}),c.empty()||f.sort(rZ),f.exit().remove(),f.on("mouseover",$Vt).on("mouseout",eHt).on("click",tHt),l.append("g").attr("class","dimensions");var h=s.select("g.dimensions"),v=h.selectAll("g.dimension").data(function(w){return w.dimensions},Ey);v.enter().append("g").attr("class","dimension"),v.attr("transform",function(w){return k5(w.x,0)}),v.exit().remove();var d=v.selectAll("g.category").data(function(w){return w.categories},Ey),x=d.enter().append("g").attr("class","category");d.attr("transform",function(w){return k5(0,w.y)}),x.append("rect").attr("class","catrect").attr("pointer-events","none"),d.select("rect.catrect").attr("fill","none").attr("width",function(w){return w.width}).attr("height",function(w){return w.height}),vNe(x);var b=d.selectAll("rect.bandrect").data(function(w){return w.bands},Ey);b.each(function(){C1.raiseToTop(this)}),b.attr("fill",function(w){return w.color});var p=b.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(w){return w.color}).attr("fill-opacity",0);b.attr("fill",function(w){return w.color}).attr("width",function(w){return w.width}).attr("height",function(w){return w.height}).attr("y",function(w){return w.y}).attr("cursor",function(w){return w.parcatsViewModel.arrangement==="fixed"?"default":w.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),oZ(p),b.exit().remove(),x.append("text").attr("class","catlabel").attr("pointer-events","none"),d.select("text.catlabel").attr("text-anchor",function(w){return C5(w)?"start":"end"}).attr("alignment-baseline","middle").style("fill","rgb(0, 0, 0)").attr("x",function(w){return C5(w)?w.width+5:-5}).attr("y",function(w){return w.height/2}).text(function(w){return w.model.categoryLabel}).each(function(w){cNe.font(Bo.select(this),w.parcatsViewModel.categorylabelfont),JVt.convertToTspans(Bo.select(this),t)}),x.append("text").attr("class","dimlabel"),d.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(w){return w.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(w){return w.width/2}).attr("y",-5).text(function(w,A){return A===0?w.parcatsViewModel.model.dimensions[w.model.dimensionInd].dimensionLabel:null}).each(function(w){cNe.font(Bo.select(this),w.parcatsViewModel.labelfont)}),d.selectAll("rect.bandrect").on("mouseover",lHt).on("mouseout",uHt),d.exit().remove(),v.call(Bo.behavior.drag().origin(function(w){return{x:w.x,y:0}}).on("dragstart",fHt).on("drag",cHt).on("dragend",hHt)),s.each(function(w){w.traceSelection=Bo.select(this),w.pathSelection=Bo.select(this).selectAll("g.paths").selectAll("path.path"),w.dimensionSelection=Bo.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),s.exit().remove()}mNe.exports=function(e,t,r,i){QVt(r,e,i,t)};function Ey(e){return e.key}function C5(e){var t=e.parcatsViewModel.dimensions.length,r=e.parcatsViewModel.dimensions[t-1].model.dimensionInd;return e.model.dimensionInd===r}function rZ(e,t){return e.model.rawColor>t.model.rawColor?1:e.model.rawColor<t.model.rawColor?-1:0}function $Vt(e){if(!e.parcatsViewModel.dragDimension&&e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){C1.raiseToTop(this),aZ(Bo.select(this));var t=P5(e),r=nZ(e);if(e.parcatsViewModel.graphDiv.emit("plotly_hover",{points:t,event:Bo.event,constraints:r}),e.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var i=Bo.mouse(this)[0],n=e.parcatsViewModel.graphDiv,a=e.parcatsViewModel.trace,o=n._fullLayout,s=o._paperdiv.node().getBoundingClientRect(),l=e.parcatsViewModel.graphDiv.getBoundingClientRect(),u,f,c;for(c=0;c<e.leftXs.length-1;c++)if(e.leftXs[c]+e.dimWidths[c]-2<=i&&i<=e.leftXs[c+1]+2){var h=e.parcatsViewModel.dimensions[c],v=e.parcatsViewModel.dimensions[c+1];u=(h.x+h.width+v.x)/2,f=(e.topYs[c]+e.topYs[c+1]+e.height)/2;break}var d=e.parcatsViewModel.x+u,x=e.parcatsViewModel.y+f,b=tZ.mostReadable(e.model.color,["black","white"]),p=e.model.count,w=p/e.parcatsViewModel.model.count,A={countLabel:p,probabilityLabel:w.toFixed(3)},T=[];e.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&T.push(["Count:",A.countLabel].join(" ")),e.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&T.push(["P:",A.probabilityLabel].join(" "));var k=T.join("<br>"),_=Bo.mouse(n)[0];L5.loneHover({trace:a,x:d-s.left+l.left,y:x-s.top+l.top,text:k,color:e.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:b,idealAlign:_<d?"right":"left",hovertemplate:(a.line||{}).hovertemplate,hovertemplateLabels:A,eventData:[{data:a._input,fullData:a,count:p,probability:w}]},{container:o._hoverlayer.node(),outerContainer:o._paper.node(),gd:n})}}}function eHt(e){if(!e.parcatsViewModel.dragDimension&&(iZ(Bo.select(this)),L5.loneUnhover(e.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),e.parcatsViewModel.pathSelection.sort(rZ),e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var t=P5(e),r=nZ(e);e.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:t,event:Bo.event,constraints:r})}}function P5(e){for(var t=[],r=pNe(e.parcatsViewModel),i=0;i<e.model.valueInds.length;i++){var n=e.model.valueInds[i];t.push({curveNumber:r,pointNumber:n})}return t}function nZ(e){for(var t={},r=e.parcatsViewModel.model.dimensions,i=0;i<r.length;i++){var n=r[i],a=n.categories[e.model.categoryInds[i]];t[n.containerInd]=a.categoryValue}return e.model.rawColor!==void 0&&(t.color=e.model.rawColor),t}function tHt(e){if(e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var t=P5(e),r=nZ(e);e.parcatsViewModel.graphDiv.emit("plotly_click",{points:t,event:Bo.event,constraints:r})}}function iZ(e){e.attr("fill",function(t){return t.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function aZ(e){e.attr("fill-opacity",.8).attr("stroke",function(t){return tZ.mostReadable(t.model.color,["black","white"])}).attr("stroke-width",.3)}function rHt(e){e.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function vNe(e){e.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function nHt(e){e.attr("stroke","black").attr("stroke-width",1.5)}function oZ(e){e.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function ZI(e){var t=e.parcatsViewModel.pathSelection,r=e.categoryViewModel.model.dimensionInd,i=e.categoryViewModel.model.categoryInd;return t.filter(function(n){return n.model.categoryInds[r]===i&&n.model.color===e.color})}function iHt(e){var t=Bo.select(e.parentNode).selectAll("rect.bandrect");t.each(function(r){var i=ZI(r);aZ(i),i.each(function(){C1.raiseToTop(this)})}),rHt(Bo.select(e.parentNode))}function aHt(e){var t=Bo.select(e).datum(),r=ZI(t);aZ(r),r.each(function(){C1.raiseToTop(this)}),Bo.select(e.parentNode).selectAll("rect.bandrect").filter(function(i){return i.color===t.color}).each(function(){C1.raiseToTop(this),nHt(Bo.select(this))})}function sZ(e,t,r){var i=Bo.select(e).datum(),n=i.categoryViewModel.model,a=i.parcatsViewModel.graphDiv,o=Bo.select(e.parentNode).selectAll("rect.bandrect"),s=[];o.each(function(u){var f=ZI(u);f.each(function(c){Array.prototype.push.apply(s,P5(c))})});var l={};l[n.dimensionInd]=n.categoryValue,a.emit(t,{points:s,event:r,constraints:l})}function lZ(e,t,r){var i=Bo.select(e).datum(),n=i.categoryViewModel.model,a=i.parcatsViewModel.graphDiv,o=ZI(i),s=[];o.each(function(u){Array.prototype.push.apply(s,P5(u))});var l={};l[n.dimensionInd]=n.categoryValue,i.rawColor!==void 0&&(l.color=i.rawColor),a.emit(t,{points:s,event:r,constraints:l})}function dNe(e,t,r){e._fullLayout._calcInverseTransform(e);var i=e._fullLayout._invScaleX,n=e._fullLayout._invScaleY,a=Bo.select(r.parentNode).select("rect.catrect"),o=a.node().getBoundingClientRect(),s=a.datum(),l=s.parcatsViewModel,u=l.model.dimensions[s.model.dimensionInd],f=l.trace,c=o.top+o.height/2,h,v;l.dimensions.length>1&&u.displayInd===l.dimensions.length-1?(h=o.left,v="left"):(h=o.left+o.width,v="right");var d=s.model.count,x=s.model.categoryLabel,b=d/s.parcatsViewModel.model.count,p={countLabel:d,categoryLabel:x,probabilityLabel:b.toFixed(3)},w=[];s.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&w.push(["Count:",p.countLabel].join(" ")),s.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&w.push(["P("+p.categoryLabel+"):",p.probabilityLabel].join(" "));var A=w.join("<br>");return{trace:f,x:i*(h-t.left),y:n*(c-t.top),text:A,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:v,hovertemplate:f.hovertemplate,hovertemplateLabels:p,eventData:[{data:f._input,fullData:f,count:d,category:x,probability:b}]}}function oHt(e,t,r){var i=[];return Bo.select(r.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var n=this;i.push(dNe(e,t,n))}),i}function sHt(e,t,r){e._fullLayout._calcInverseTransform(e);var i=e._fullLayout._invScaleX,n=e._fullLayout._invScaleY,a=r.getBoundingClientRect(),o=Bo.select(r).datum(),s=o.categoryViewModel,l=s.parcatsViewModel,u=l.model.dimensions[s.model.dimensionInd],f=l.trace,c=a.y+a.height/2,h,v;l.dimensions.length>1&&u.displayInd===l.dimensions.length-1?(h=a.left,v="left"):(h=a.left+a.width,v="right");var d=s.model.categoryLabel,x=o.parcatsViewModel.model.count,b=0;o.categoryViewModel.bands.forEach(function(C){C.color===o.color&&(b+=C.count)});var p=s.model.count,w=0;l.pathSelection.each(function(C){C.model.color===o.color&&(w+=C.model.count)});var A=b/x,T=b/w,k=b/p,_={countLabel:b,categoryLabel:d,probabilityLabel:A.toFixed(3)},E=[];s.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&E.push(["Count:",_.countLabel].join(" ")),s.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(E.push("P(color \u2229 "+d+"): "+_.probabilityLabel),E.push("P("+d+" | color): "+T.toFixed(3)),E.push("P(color | "+d+"): "+k.toFixed(3)));var S=E.join("<br>"),g=tZ.mostReadable(o.color,["black","white"]);return{trace:f,x:i*(h-t.left),y:n*(c-t.top),text:S,color:o.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:g,fontSize:10,idealAlign:v,hovertemplate:f.hovertemplate,hovertemplateLabels:_,eventData:[{data:f._input,fullData:f,category:d,count:x,probability:A,categorycount:p,colorcount:w,bandcolorcount:b}]}}function lHt(e){if(!e.parcatsViewModel.dragDimension&&e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var t=Bo.mouse(this)[1];if(t<-1)return;var r=e.parcatsViewModel.graphDiv,i=r._fullLayout,n=i._paperdiv.node().getBoundingClientRect(),a=e.parcatsViewModel.hoveron,o=this;if(a==="color"?(aHt(o),lZ(o,"plotly_hover",Bo.event)):(iHt(o),sZ(o,"plotly_hover",Bo.event)),e.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var s;a==="category"?s=dNe(r,n,o):a==="color"?s=sHt(r,n,o):a==="dimension"&&(s=oHt(r,n,o)),s&&L5.loneHover(s,{container:i._hoverlayer.node(),outerContainer:i._paper.node(),gd:r})}}}function uHt(e){var t=e.parcatsViewModel;if(!t.dragDimension&&(iZ(t.pathSelection),vNe(t.dimensionSelection.selectAll("g.category")),oZ(t.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),L5.loneUnhover(t.graphDiv._fullLayout._hoverlayer.node()),t.pathSelection.sort(rZ),t.hoverinfoItems.indexOf("skip")===-1)){var r=e.parcatsViewModel.hoveron,i=this;r==="color"?lZ(i,"plotly_unhover",Bo.event):sZ(i,"plotly_unhover",Bo.event)}}function fHt(e){e.parcatsViewModel.arrangement!=="fixed"&&(e.dragDimensionDisplayInd=e.model.displayInd,e.initialDragDimensionDisplayInds=e.parcatsViewModel.model.dimensions.map(function(t){return t.displayInd}),e.dragHasMoved=!1,e.dragCategoryDisplayInd=null,Bo.select(this).selectAll("g.category").select("rect.catrect").each(function(t){var r=Bo.mouse(this)[0],i=Bo.mouse(this)[1];-2<=r&&r<=t.width+2&&-2<=i&&i<=t.height+2&&(e.dragCategoryDisplayInd=t.model.displayInd,e.initialDragCategoryDisplayInds=e.model.categories.map(function(n){return n.displayInd}),t.model.dragY=t.y,C1.raiseToTop(this.parentNode),Bo.select(this.parentNode).selectAll("rect.bandrect").each(function(n){n.y<i&&i<=n.y+n.height&&(e.potentialClickBand=this)}))}),e.parcatsViewModel.dragDimension=e,L5.loneUnhover(e.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function cHt(e){if(e.parcatsViewModel.arrangement!=="fixed"&&(e.dragHasMoved=!0,e.dragDimensionDisplayInd!==null)){var t=e.dragDimensionDisplayInd,r=t-1,i=t+1,n=e.parcatsViewModel.dimensions[t];if(e.dragCategoryDisplayInd!==null){var a=n.categories[e.dragCategoryDisplayInd];a.model.dragY+=Bo.event.dy;var o=a.model.dragY,s=a.model.displayInd,l=n.categories,u=l[s-1],f=l[s+1];u!==void 0&&o<u.y+u.height/2&&(a.model.displayInd=u.model.displayInd,u.model.displayInd=s),f!==void 0&&o+a.height>f.y+f.height/2&&(a.model.displayInd=f.model.displayInd,f.model.displayInd=s),e.dragCategoryDisplayInd=a.model.displayInd}if(e.dragCategoryDisplayInd===null||e.parcatsViewModel.arrangement==="freeform"){n.model.dragX=Bo.event.x;var c=e.parcatsViewModel.dimensions[r],h=e.parcatsViewModel.dimensions[i];c!==void 0&&n.model.dragX<c.x+c.width&&(n.model.displayInd=c.model.displayInd,c.model.displayInd=t),h!==void 0&&n.model.dragX+n.width>h.x&&(n.model.displayInd=h.model.displayInd,h.model.displayInd=e.dragDimensionDisplayInd),e.dragDimensionDisplayInd=n.model.displayInd}fZ(e.parcatsViewModel),uZ(e.parcatsViewModel),yNe(e.parcatsViewModel),gNe(e.parcatsViewModel)}}function hHt(e){if(e.parcatsViewModel.arrangement!=="fixed"&&e.dragDimensionDisplayInd!==null){Bo.select(this).selectAll("text").attr("font-weight","normal");var t={},r=pNe(e.parcatsViewModel),i=e.parcatsViewModel.model.dimensions.map(function(h){return h.displayInd}),n=e.initialDragDimensionDisplayInds.some(function(h,v){return h!==i[v]});n&&i.forEach(function(h,v){var d=e.parcatsViewModel.model.dimensions[v].containerInd;t["dimensions["+d+"].displayindex"]=h});var a=!1;if(e.dragCategoryDisplayInd!==null){var o=e.model.categories.map(function(h){return h.displayInd});if(a=e.initialDragCategoryDisplayInds.some(function(h,v){return h!==o[v]}),a){var s=e.model.categories.slice().sort(function(h,v){return h.displayInd-v.displayInd}),l=s.map(function(h){return h.categoryValue}),u=s.map(function(h){return h.categoryLabel});t["dimensions["+e.model.containerInd+"].categoryarray"]=[l],t["dimensions["+e.model.containerInd+"].ticktext"]=[u],t["dimensions["+e.model.containerInd+"].categoryorder"]="array"}}if(e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!e.dragHasMoved&&e.potentialClickBand&&(e.parcatsViewModel.hoveron==="color"?lZ(e.potentialClickBand,"plotly_click",Bo.event.sourceEvent):sZ(e.potentialClickBand,"plotly_click",Bo.event.sourceEvent)),e.model.dragX=null,e.dragCategoryDisplayInd!==null){var f=e.parcatsViewModel.dimensions[e.dragDimensionDisplayInd].categories[e.dragCategoryDisplayInd];f.model.dragY=null,e.dragCategoryDisplayInd=null}e.dragDimensionDisplayInd=null,e.parcatsViewModel.dragDimension=null,e.dragHasMoved=null,e.potentialClickBand=null,fZ(e.parcatsViewModel),uZ(e.parcatsViewModel);var c=Bo.transition().duration(300).ease("cubic-in-out");c.each(function(){yNe(e.parcatsViewModel,!0),gNe(e.parcatsViewModel,!0)}).each("end",function(){(n||a)&&KVt.restyle(e.parcatsViewModel.graphDiv,t,[r])})}}function pNe(e){for(var t,r=e.graphDiv._fullData,i=0;i<r.length;i++)if(e.key===r[i].uid){t=i;break}return t}function gNe(e,t){t===void 0&&(t=!1);function r(i){return t?i.transition():i}e.pathSelection.data(function(i){return i.paths},Ey),r(e.pathSelection).attr("d",function(i){return i.svgD})}function yNe(e,t){t===void 0&&(t=!1);function r(l){return t?l.transition():l}e.dimensionSelection.data(function(l){return l.dimensions},Ey);var i=e.dimensionSelection.selectAll("g.category").data(function(l){return l.categories},Ey);r(e.dimensionSelection).attr("transform",function(l){return k5(l.x,0)}),r(i).attr("transform",function(l){return k5(0,l.y)});var n=i.select(".dimlabel");n.text(function(l,u){return u===0?l.parcatsViewModel.model.dimensions[l.model.dimensionInd].dimensionLabel:null});var a=i.select(".catlabel");a.attr("text-anchor",function(l){return C5(l)?"start":"end"}).attr("x",function(l){return C5(l)?l.width+5:-5}).each(function(l){var u,f;C5(l)?(u=l.width+5,f="start"):(u=-5,f="end"),Bo.select(this).selectAll("tspan").attr("x",u).attr("text-anchor",f)});var o=i.selectAll("rect.bandrect").data(function(l){return l.bands},Ey),s=o.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(l){return l.color}).attr("fill-opacity",0);o.attr("fill",function(l){return l.color}).attr("width",function(l){return l.width}).attr("height",function(l){return l.height}).attr("y",function(l){return l.y}),oZ(s),o.each(function(){C1.raiseToTop(this)}),o.exit().remove()}function vHt(e,t,r){var i=r[0],n=t.margin||{l:80,r:80,t:100,b:80},a=i.trace,o=a.domain,s=t.width,l=t.height,u=Math.floor(s*(o.x[1]-o.x[0])),f=Math.floor(l*(o.y[1]-o.y[0])),c=o.x[0]*s+n.l,h=t.height-o.y[1]*t.height+n.t,v=a.line.shape,d;a.hoverinfo==="all"?d=["count","probability"]:d=(a.hoverinfo||"").split("+");var x={trace:a,key:a.uid,model:i,x:c,y:h,width:u,height:f,hoveron:a.hoveron,hoverinfoItems:d,arrangement:a.arrangement,bundlecolors:a.bundlecolors,sortpaths:a.sortpaths,labelfont:a.labelfont,categorylabelfont:a.tickfont,pathShape:v,dragDimension:null,margin:n,paths:[],dimensions:[],graphDiv:e,traceSelection:null,pathSelection:null,dimensionSelection:null};return i.dimensions&&(fZ(x),uZ(x)),x}function hNe(e,t,r,i,n){var a=[],o=[],s,l;for(l=0;l<r.length-1;l++)s=jVt(r[l]+e[l],e[l+1]),a.push(s(n)),o.push(s(1-n));var u="M "+e[0]+","+t[0];for(u+="l"+r[0]+",0 ",l=1;l<r.length;l++)u+="C"+a[l-1]+","+t[l-1]+" "+o[l-1]+","+t[l]+" "+e[l]+","+t[l],u+="l"+r[l]+",0 ";for(u+="l0,"+i+" ",u+="l -"+r[r.length-1]+",0 ",l=r.length-2;l>=0;l--)u+="C"+o[l]+","+(t[l+1]+i)+" "+a[l]+","+(t[l]+i)+" "+(e[l]+r[l])+","+(t[l]+i),u+="l-"+r[l]+",0 ";return u+="Z",u}function uZ(e){var t=e.dimensions,r=e.model,i=t.map(function(D){return D.categories.map(function(q){return q.y})}),n=e.model.dimensions.map(function(D){return D.categories.map(function(q){return q.displayInd})}),a=e.model.dimensions.map(function(D){return D.displayInd}),o=e.dimensions.map(function(D){return D.model.dimensionInd}),s=t.map(function(D){return D.x}),l=t.map(function(D){return D.width}),u=[];for(var f in r.paths)r.paths.hasOwnProperty(f)&&u.push(r.paths[f]);function c(D){var q=D.categoryInds.map(function(U,B){return n[B][U]}),O=o.map(function(U){return q[U]});return O}u.sort(function(D,q){var O=c(D),U=c(q);return e.sortpaths==="backward"&&(O.reverse(),U.reverse()),O.push(D.valueInds[0]),U.push(q.valueInds[0]),e.bundlecolors&&(O.unshift(D.rawColor),U.unshift(q.rawColor)),O<U?-1:O>U?1:0});for(var h=new Array(u.length),v=t[0].model.count,d=t[0].categories.map(function(D){return D.height}).reduce(function(D,q){return D+q}),x=0;x<u.length;x++){var b=u[x],p;v>0?p=d*(b.count/v):p=0;for(var w=new Array(i.length),A=0;A<b.categoryInds.length;A++){var T=b.categoryInds[A],k=n[A][T],_=a[A];w[_]=i[_][k],i[_][k]+=p;var E=e.dimensions[_].categories[k],S=E.bands.length,g=E.bands[S-1];if(g===void 0||b.rawColor!==g.rawColor){var C=g===void 0?0:g.y+g.height;E.bands.push({key:C,color:b.color,rawColor:b.rawColor,height:p,width:E.width,count:b.count,y:C,categoryViewModel:E,parcatsViewModel:e})}else{var M=E.bands[S-1];M.height+=p,M.count+=b.count}}var P;e.pathShape==="hspline"?P=hNe(s,w,l,p,.5):P=hNe(s,w,l,p,0),h[x]={key:b.valueInds[0],model:b,height:p,leftXs:s,topYs:w,dimWidths:l,svgD:P,parcatsViewModel:e}}e.paths=h}function fZ(e){var t=e.model.dimensions.map(function(o){return{displayInd:o.displayInd,dimensionInd:o.dimensionInd}});t.sort(function(o,s){return o.displayInd-s.displayInd});var r=[];for(var i in t){var n=t[i].dimensionInd,a=e.model.dimensions[n];r.push(dHt(e,a))}e.dimensions=r}function dHt(e,t){var r=40,i=16,n=e.model.dimensions.length,a=t.displayInd,o,s,l;n>1?o=(e.width-2*r-i)/(n-1):o=0,s=r,l=s+o*a;var u=[],f=e.model.maxCats,c=t.categories.length,h=8,v=t.count,d=e.height-h*(f-1),x,b,p,w,A,T=(f-c)*h/2,k=t.categories.map(function(_){return{displayInd:_.displayInd,categoryInd:_.categoryInd}});for(k.sort(function(_,E){return _.displayInd-E.displayInd}),A=0;A<c;A++)w=k[A].categoryInd,b=t.categories[w],v>0?x=b.count/v*d:x=0,p={key:b.valueInds[0],model:b,width:i,height:x,y:b.dragY!==null?b.dragY:T,bands:[],parcatsViewModel:e},T=T+x+h,u.push(p);return{key:t.dimensionInd,x:t.dragX!==null?t.dragX:l,y:0,width:i,model:t,categories:u,parcatsViewModel:e,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}});var cZ=ie((Yyr,_Ne)=>{"use strict";var pHt=xNe();_Ne.exports=function(t,r,i,n){var a=t._fullLayout,o=a._paper,s=a._size;pHt(t,o,r,{width:s.w,height:s.h,margin:{t:s.t,r:s.r,b:s.b,l:s.l}},i,n)}});var wNe=ie(jI=>{"use strict";var gHt=pc().getModuleCalcData,yHt=cZ(),bNe="parcats";jI.name=bNe;jI.plot=function(e,t,r,i){var n=gHt(e.calcdata,bNe);if(n.length){var a=n[0];yHt(e,a,r,i)}};jI.clean=function(e,t,r,i){var n=i._has&&i._has("parcats"),a=t._has&&t._has("parcats");n&&!a&&i._paperdiv.selectAll(".parcats").remove()}});var ANe=ie((Xyr,TNe)=>{"use strict";TNe.exports={attributes:eZ(),supplyDefaults:lNe(),calc:fNe(),plot:cZ(),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:wNe(),categories:["noOpacity"],meta:{}}});var SNe=ie((Zyr,MNe)=>{"use strict";MNe.exports=ANe()});var ky=ie((jyr,DNe)=>{"use strict";var mHt=sx(),ENe="1.13.4",PNe='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',kNe=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',PNe].join(" "),CNe=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),xHt=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),RNe={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:PNe,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:kNe,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:kNe,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:CNe,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:CNe,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:xHt,tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},LNe=mHt(RNe);DNe.exports={requiredVersion:ENe,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:RNe,styleValuesNonMapbox:LNe,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+ENe+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",LNe.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}});var R5=ie((Kyr,zNe)=>{"use strict";var INe=Zt(),FNe=_i().defaultLine,_Ht=fl().attributes,bHt=Xs(),wHt=Bl().textposition,THt=Zs().overrideAll,AHt=ko().templatedArray,hZ=ky(),qNe=bHt({noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0});qNe.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var MHt=zNe.exports=THt({_arrayAttrRegexps:[INe.counterRegex("mapbox",".layers",!0)],domain:_Ht({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:hZ.styleValuesMapbox.concat(hZ.styleValuesNonMapbox),dflt:hZ.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:AHt("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:FNe},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:FNe}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:qNe,textposition:INe.extendFlat({},wHt,{arrayOk:!1})}})},"plot","from-root");MHt.uirevision={valType:"any",editType:"none"}});var KI=ie((Jyr,NNe)=>{"use strict";var SHt=Ba().hovertemplateAttrs,EHt=Ba().texttemplateAttrs,kHt=X0(),D5=O3(),hT=Bl(),ONe=R5(),CHt=rs(),LHt=Ls(),$_=aa().extendFlat,PHt=Zs().overrideAll,RHt=R5(),BNe=D5.line,vT=D5.marker;NNe.exports=PHt({lon:D5.lon,lat:D5.lat,cluster:{enabled:{valType:"boolean"},maxzoom:$_({},RHt.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:$_({},vT.opacity,{dflt:1})},mode:$_({},hT.mode,{dflt:"markers"}),text:$_({},hT.text,{}),texttemplate:EHt({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:$_({},hT.hovertext,{}),line:{color:BNe.color,width:BNe.width},connectgaps:hT.connectgaps,marker:$_({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:vT.opacity,size:vT.size,sizeref:vT.sizeref,sizemin:vT.sizemin,sizemode:vT.sizemode},LHt("marker")),fill:D5.fill,fillcolor:kHt(),textfont:ONe.layers.symbol.textfont,textposition:ONe.layers.symbol.textposition,below:{valType:"string"},selected:{marker:hT.selected.marker},unselected:{marker:hT.unselected.marker},hoverinfo:$_({},CHt.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:SHt()},"calc","nested")});var vZ=ie((Qyr,UNe)=>{"use strict";var DHt=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extrabold Italic","Open Sans Extrabold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];UNe.exports={isSupportedFont:function(e){return DHt.indexOf(e)!==-1}}});var GNe=ie(($yr,HNe)=>{"use strict";var I5=Zt(),dZ=Ks(),IHt=xp(),FHt=l0(),qHt=u0(),zHt=j0(),VNe=KI(),OHt=vZ().isSupportedFont;HNe.exports=function(t,r,i,n){function a(p,w){return I5.coerce(t,r,VNe,p,w)}function o(p,w){return I5.coerce2(t,r,VNe,p,w)}var s=BHt(t,r,a);if(!s){r.visible=!1;return}if(a("text"),a("texttemplate"),a("hovertext"),a("hovertemplate"),a("mode"),a("below"),dZ.hasMarkers(r)){IHt(t,r,i,n,a,{noLine:!0,noAngle:!0}),a("marker.allowoverlap"),a("marker.angle");var l=r.marker;l.symbol!=="circle"&&(I5.isArrayOrTypedArray(l.size)&&(l.size=l.size[0]),I5.isArrayOrTypedArray(l.color)&&(l.color=l.color[0]))}dZ.hasLines(r)&&(FHt(t,r,i,n,a,{noDash:!0}),a("connectgaps"));var u=o("cluster.maxzoom"),f=o("cluster.step"),c=o("cluster.color",r.marker&&r.marker.color||i),h=o("cluster.size"),v=o("cluster.opacity"),d=u!==!1||f!==!1||c!==!1||h!==!1||v!==!1,x=a("cluster.enabled",d);if(x||dZ.hasText(r)){var b=n.font.family;qHt(t,r,n,a,{noSelect:!0,noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,font:{family:OHt(b)?b:"Open Sans Regular",weight:n.font.weight,style:n.font.style,size:n.font.size,color:n.font.color}})}a("fill"),r.fill!=="none"&&zHt(t,r,i,a),I5.coerceSelectionMarkerOpacity(r,a)};function BHt(e,t,r){var i=r("lon")||[],n=r("lat")||[],a=Math.min(i.length,n.length);return t._length=a,a}});var pZ=ie((emr,WNe)=>{"use strict";var YNe=Wi();WNe.exports=function(t,r,i){var n={},a=i[r.subplot]._subplot,o=a.mockAxis,s=t.lonlat;return n.lonLabel=YNe.tickText(o,o.c2l(s[0]),!0).text,n.latLabel=YNe.tickText(o,o.c2l(s[1]),!0).text,n}});var gZ=ie((tmr,ZNe)=>{"use strict";var XNe=Zt();ZNe.exports=function(t,r){var i=t.split(" "),n=i[0],a=i[1],o=XNe.isArrayOrTypedArray(r)?XNe.mean(r):r,s=.5+o/100,l=1.5+o/100,u=["",""],f=[0,0];switch(n){case"top":u[0]="top",f[1]=-l;break;case"bottom":u[0]="bottom",f[1]=l;break}switch(a){case"left":u[1]="right",f[0]=-s;break;case"right":u[1]="left",f[0]=s;break}var c;return u[0]&&u[1]?c=u.join("-"):u[0]?c=u[0]:u[1]?c=u[1]:c="center",{anchor:c,offset:f}}});var e9e=ie((rmr,$Ne)=>{"use strict";var JNe=la(),Xc=Zt(),NHt=eo().BADNUM,QI=GE(),jNe=ul(),UHt=oa(),VHt=PA(),$I=Ks(),HHt=vZ().isSupportedFont,GHt=gZ(),YHt=ad().appendArrayPointValue,WHt=ks().NEWLINES,XHt=ks().BR_TAG_ALL;$Ne.exports=function(t,r){var i=r[0].trace,n=i.visible===!0&&i._length!==0,a=i.fill!=="none",o=$I.hasLines(i),s=$I.hasMarkers(i),l=$I.hasText(i),u=s&&i.marker.symbol==="circle",f=s&&i.marker.symbol!=="circle",c=i.cluster&&i.cluster.enabled,h=JI("fill"),v=JI("line"),d=JI("circle"),x=JI("symbol"),b={fill:h,line:v,circle:d,symbol:x};if(!n)return b;var p;if((a||o)&&(p=QI.calcTraceToLineCoords(r)),a&&(h.geojson=QI.makePolygon(p),h.layout.visibility="visible",Xc.extendFlat(h.paint,{"fill-color":i.fillcolor})),o&&(v.geojson=QI.makeLine(p),v.layout.visibility="visible",Xc.extendFlat(v.paint,{"line-width":i.line.width,"line-color":i.line.color,"line-opacity":i.opacity})),u){var w=ZHt(r);d.geojson=w.geojson,d.layout.visibility="visible",c&&(d.filter=["!",["has","point_count"]],b.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":mZ(i.cluster.color,i.cluster.step),"circle-radius":mZ(i.cluster.size,i.cluster.step),"circle-opacity":mZ(i.cluster.opacity,i.cluster.step)}},b.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":KNe(i),"text-size":12}}),Xc.extendFlat(d.paint,{"circle-color":w.mcc,"circle-radius":w.mrc,"circle-opacity":w.mo})}if(u&&c&&(d.filter=["!",["has","point_count"]]),(f||l)&&(x.geojson=jHt(r,t),Xc.extendFlat(x.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),f&&(Xc.extendFlat(x.layout,{"icon-size":i.marker.size/10}),"angle"in i.marker&&i.marker.angle!=="auto"&&Xc.extendFlat(x.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),x.layout["icon-allow-overlap"]=i.marker.allowoverlap,Xc.extendFlat(x.paint,{"icon-opacity":i.opacity*i.marker.opacity,"icon-color":i.marker.color})),l)){var A=(i.marker||{}).size,T=GHt(i.textposition,A);Xc.extendFlat(x.layout,{"text-size":i.textfont.size,"text-anchor":T.anchor,"text-offset":T.offset,"text-font":KNe(i)}),Xc.extendFlat(x.paint,{"text-color":i.textfont.color,"text-opacity":i.opacity})}return b};function JI(e){return{type:e,geojson:QI.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function ZHt(e){var t=e[0].trace,r=t.marker,i=t.selectedpoints,n=Xc.isArrayOrTypedArray(r.color),a=Xc.isArrayOrTypedArray(r.size),o=Xc.isArrayOrTypedArray(r.opacity),s;function l(A){return t.opacity*A}function u(A){return A/2}var f;n&&(jNe.hasColorscale(t,"marker")?f=jNe.makeColorScaleFuncFromTrace(r):f=Xc.identity);var c;a&&(c=VHt(t));var h;o&&(h=function(A){var T=JNe(A)?+Xc.constrain(A,0,1):0;return l(T)});var v=[];for(s=0;s<e.length;s++){var d=e[s],x=d.lonlat;if(!QNe(x)){var b={};f&&(b.mcc=d.mcc=f(d.mc)),c&&(b.mrc=d.mrc=c(d.ms)),h&&(b.mo=h(d.mo)),i&&(b.selected=d.selected||0),v.push({type:"Feature",id:s+1,geometry:{type:"Point",coordinates:x},properties:b})}}var p;if(i)for(p=UHt.makeSelectedPointStyleFns(t),s=0;s<v.length;s++){var w=v[s].properties;p.selectedOpacityFn&&(w.mo=l(p.selectedOpacityFn(w))),p.selectedColorFn&&(w.mcc=p.selectedColorFn(w)),p.selectedSizeFn&&(w.mrc=p.selectedSizeFn(w))}return{geojson:{type:"FeatureCollection",features:v},mcc:n||p&&p.selectedColorFn?{type:"identity",property:"mcc"}:r.color,mrc:a||p&&p.selectedSizeFn?{type:"identity",property:"mrc"}:u(r.size),mo:o||p&&p.selectedOpacityFn?{type:"identity",property:"mo"}:l(r.opacity)}}function jHt(e,t){for(var r=t._fullLayout,i=e[0].trace,n=i.marker||{},a=n.symbol,o=n.angle,s=a!=="circle"?yZ(a):eF,l=o!=="auto"?yZ(o,!0):eF,u=$I.hasText(i)?yZ(i.text):eF,f=[],c=0;c<e.length;c++){var h=e[c];if(!QNe(h.lonlat)){var v=i.texttemplate,d;if(v){var x=Array.isArray(v)?v[c]||"":v,b=i._module.formatLabels(h,i,r),p={};YHt(p,i,h.i);var w=i._meta||{};d=Xc.texttemplateString(x,b,r._d3locale,p,h,w)}else d=u(c);d&&(d=d.replace(WHt,"").replace(XHt,`
`)),f.push({type:"Feature",geometry:{type:"Point",coordinates:h.lonlat},properties:{symbol:s(c),angle:l(c),text:d}})}}return{type:"FeatureCollection",features:f}}function yZ(e,t){return Xc.isArrayOrTypedArray(e)?t?function(r){return JNe(e[r])?+e[r]:0}:function(r){return e[r]}:e?function(){return e}:eF}function eF(){return""}function QNe(e){return e[0]===NHt}function mZ(e,t){var r;if(Xc.isArrayOrTypedArray(e)&&Xc.isArrayOrTypedArray(t)){r=["step",["get","point_count"],e[0]];for(var i=1;i<e.length;i++)r.push(t[i-1],e[i])}else r=e;return r}function KNe(e){var t=e.textfont,r=t.family,i=t.style,n=t.weight,a=r.split(" "),o=a[a.length-1]==="Italic";o&&a.pop(),o=o||i==="italic";var s=a.join(" ");n==="bold"&&a.indexOf("Bold")===-1?s+=" Bold":n<=1e3&&(a[0]==="Metropolis"?(s="Metropolis",n>850?s+=" Black":n>750?s+=" Extra Bold":n>650?s+=" Bold":n>550?s+=" Semi Bold":n>450?s+=" Medium":n>350?s+=" Regular":n>250?s+=" Light":n>150?s+=" Extra Light":s+=" Thin"):a.slice(0,2).join(" ")==="Open Sans"?(s="Open Sans",n>750?s+=" Extrabold":n>650?s+=" Bold":n>550?s+=" Semibold":n>350?s+=" Regular":s+=" Light"):a.slice(0,3).join(" ")==="Klokantech Noto Sans"&&(s="Klokantech Noto Sans",a[3]==="CJK"&&(s+=" CJK"),s+=n>500?" Bold":" Regular")),o&&(s+=" Italic"),s==="Open Sans Regular Italic"?s="Open Sans Italic":s==="Open Sans Regular Bold"?s="Open Sans Bold":s==="Open Sans Regular Bold Italic"?s="Open Sans Bold Italic":s==="Klokantech Noto Sans Regular Italic"&&(s="Klokantech Noto Sans Italic"),HHt(s)||(s=r);var l=s.split(", ");return l}});var i9e=ie((nmr,n9e)=>{"use strict";var KHt=Zt(),t9e=e9e(),dT=ky().traceLayerPrefix,Up={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function r9e(e,t,r,i){this.type="scattermapbox",this.subplot=e,this.uid=t,this.clusterEnabled=r,this.isHidden=i,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:dT+t+"-fill",line:dT+t+"-line",circle:dT+t+"-circle",symbol:dT+t+"-symbol",cluster:dT+t+"-cluster",clusterCount:dT+t+"-cluster-count"},this.below=null}var F5=r9e.prototype;F5.addSource=function(e,t,r){var i={type:"geojson",data:t.geojson};r&&r.enabled&&KHt.extendFlat(i,{cluster:!0,clusterMaxZoom:r.maxzoom});var n=this.subplot.map.getSource(this.sourceIds[e]);n?n.setData(t.geojson):this.subplot.map.addSource(this.sourceIds[e],i)};F5.setSourceData=function(e,t){this.subplot.map.getSource(this.sourceIds[e]).setData(t.geojson)};F5.addLayer=function(e,t,r){var i={type:t.type,id:this.layerIds[e],source:this.sourceIds[e],layout:t.layout,paint:t.paint};t.filter&&(i.filter=t.filter);for(var n=this.layerIds[e],a,o=this.subplot.getMapLayers(),s=0;s<o.length;s++)if(o[s].id===n){a=!0;break}a?(this.subplot.setOptions(n,"setLayoutProperty",i.layout),i.layout.visibility==="visible"&&this.subplot.setOptions(n,"setPaintProperty",i.paint)):this.subplot.addLayer(i,r)};F5.update=function(t){var r=t[0].trace,i=this.subplot,n=i.map,a=t9e(i.gd,t),o=i.belowLookup["trace-"+this.uid],s=!!(r.cluster&&r.cluster.enabled),l=!!this.clusterEnabled,u=this;function f(A){A||u.addSource("circle",a.circle,r.cluster);for(var T=Up.cluster,k=0;k<T.length;k++){var _=T[k],E=a[_];u.addLayer(_,E,o)}}function c(A){for(var T=Up.cluster,k=T.length-1;k>=0;k--){var _=T[k];n.removeLayer(u.layerIds[_])}A||n.removeSource(u.sourceIds.circle)}function h(A){for(var T=Up.nonCluster,k=0;k<T.length;k++){var _=T[k],E=a[_];A||u.addSource(_,E),u.addLayer(_,E,o)}}function v(A){for(var T=Up.nonCluster,k=T.length-1;k>=0;k--){var _=T[k];n.removeLayer(u.layerIds[_]),A||n.removeSource(u.sourceIds[_])}}function d(A){l?c(A):v(A)}function x(A){s?f(A):h(A)}function b(){for(var A=s?Up.cluster:Up.nonCluster,T=0;T<A.length;T++){var k=A[T],_=a[k];_&&(i.setOptions(u.layerIds[k],"setLayoutProperty",_.layout),_.layout.visibility==="visible"&&(k!=="cluster"&&u.setSourceData(k,_),i.setOptions(u.layerIds[k],"setPaintProperty",_.paint)))}}var p=this.isHidden,w=r.visible!==!0;w?p||d():p?w||x():l!==s?(d(),x()):(this.below!==o&&(d(!0),x(!0)),b()),this.clusterEnabled=s,this.isHidden=w,this.below=o,t[0].trace._glTrace=this};F5.dispose=function(){for(var t=this.subplot.map,r=this.clusterEnabled?Up.cluster:Up.nonCluster,i=r.length-1;i>=0;i--){var n=r[i];t.removeLayer(this.layerIds[n]),t.removeSource(this.sourceIds[n])}};n9e.exports=function(t,r){var i=r[0].trace,n=i.cluster&&i.cluster.enabled,a=i.visible!==!0,o=new r9e(t,i.uid,n,a),s=t9e(t.gd,r),l=o.below=t.belowLookup["trace-"+i.uid],u,f,c;if(n)for(o.addSource("circle",s.circle,i.cluster),u=0;u<Up.cluster.length;u++)f=Up.cluster[u],c=s[f],o.addLayer(f,c,l);else for(u=0;u<Up.nonCluster.length;u++)f=Up.nonCluster[u],c=s[f],o.addSource(f,c,i.cluster),o.addLayer(f,c,l);return r[0].trace._glTrace=o,o}});var tF=ie((imr,o9e)=>{"use strict";var JHt=Ol(),xZ=Zt(),QHt=J2(),$Ht=xZ.fillText,eGt=eo().BADNUM,tGt=ky().traceLayerPrefix;function rGt(e,t,r){var i=e.cd,n=i[0].trace,a=e.xa,o=e.ya,s=e.subplot,l=[],u=tGt+n.uid+"-circle",f=n.cluster&&n.cluster.enabled;if(f){var c=s.map.queryRenderedFeatures(null,{layers:[u]});l=c.map(function(S){return S.id})}var h=t>=0?Math.floor((t+180)/360):Math.ceil((t-180)/360),v=h*360,d=t-v;function x(S){var g=S.lonlat;if(g[0]===eGt||f&&l.indexOf(S.i+1)===-1)return 1/0;var C=xZ.modHalf(g[0],360),M=g[1],P=s.project([C,M]),D=P.x-a.c2p([d,M]),q=P.y-o.c2p([C,r]),O=Math.max(3,S.mrc||0);return Math.max(Math.sqrt(D*D+q*q)-O,1-3/O)}if(JHt.getClosest(i,x,e),e.index!==!1){var b=i[e.index],p=b.lonlat,w=[xZ.modHalf(p[0],360)+v,p[1]],A=a.c2p(w),T=o.c2p(w),k=b.mrc||1;e.x0=A-k,e.x1=A+k,e.y0=T-k,e.y1=T+k;var _={};_[n.subplot]={_subplot:s};var E=n._module.formatLabels(b,n,_);return e.lonLabel=E.lonLabel,e.latLabel=E.latLabel,e.color=QHt(n,b),e.extraText=a9e(n,b,i[0].t.labels),e.hovertemplate=n.hovertemplate,[e]}}function a9e(e,t,r){if(e.hovertemplate)return;var i=t.hi||e.hoverinfo,n=i.split("+"),a=n.indexOf("all")!==-1,o=n.indexOf("lon")!==-1,s=n.indexOf("lat")!==-1,l=t.lonlat,u=[];function f(c){return c+"\xB0"}return a||o&&s?u.push("("+f(l[1])+", "+f(l[0])+")"):o?u.push(r.lon+f(l[0])):s&&u.push(r.lat+f(l[1])),(a||n.indexOf("text")!==-1)&&$Ht(t,e,u),u.join("<br>")}o9e.exports={hoverPoints:rGt,getExtraText:a9e}});var l9e=ie((amr,s9e)=>{"use strict";s9e.exports=function(t,r){return t.lon=r.lon,t.lat=r.lat,t}});var f9e=ie((omr,u9e)=>{"use strict";var nGt=Zt(),iGt=Ks(),aGt=eo().BADNUM;u9e.exports=function(t,r){var i=t.cd,n=t.xaxis,a=t.yaxis,o=[],s=i[0].trace,l;if(!iGt.hasMarkers(s))return[];if(r===!1)for(l=0;l<i.length;l++)i[l].selected=0;else for(l=0;l<i.length;l++){var u=i[l],f=u.lonlat;if(f[0]!==aGt){var c=[nGt.modHalf(f[0],360),f[1]],h=[n.c2p(c),a.c2p(c)];r.contains(h,null,l,t)?(o.push({pointNumber:l,lon:f[0],lat:f[1]}),u.selected=1):u.selected=0}}return o}});var wZ=ie((_Z,bZ)=>{(function(e,t){typeof _Z=="object"&&typeof bZ!="undefined"?bZ.exports=t():typeof define=="function"&&define.amd?define(t):(e=e||self,e.mapboxgl=t())})(_Z,function(){"use strict";var e,t,r;function i(n,a){if(!e)e=a;else if(!t)t=a;else{var o="var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk);",s={};e(s),r=a(s),typeof window!="undefined"&&(r.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}}return i(["exports"],function(n){"use strict";function a(y,m){return m={exports:{}},y(m,m.exports),m.exports}var o="1.13.4",s=l;function l(y,m,L,z){this.cx=3*y,this.bx=3*(L-y)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*m,this.by=3*(z-m)-this.cy,this.ay=1-this.cy-this.by,this.p1x=y,this.p1y=z,this.p2x=L,this.p2y=z}l.prototype.sampleCurveX=function(y){return((this.ax*y+this.bx)*y+this.cx)*y},l.prototype.sampleCurveY=function(y){return((this.ay*y+this.by)*y+this.cy)*y},l.prototype.sampleCurveDerivativeX=function(y){return(3*this.ax*y+2*this.bx)*y+this.cx},l.prototype.solveCurveX=function(y,m){typeof m=="undefined"&&(m=1e-6);var L,z,Y,j,Q;for(Y=y,Q=0;Q<8;Q++){if(j=this.sampleCurveX(Y)-y,Math.abs(j)<m)return Y;var ye=this.sampleCurveDerivativeX(Y);if(Math.abs(ye)<1e-6)break;Y=Y-j/ye}if(L=0,z=1,Y=y,Y<L)return L;if(Y>z)return z;for(;L<z;){if(j=this.sampleCurveX(Y),Math.abs(j-y)<m)return Y;y>j?L=Y:z=Y,Y=(z-L)*.5+L}return Y},l.prototype.solve=function(y,m){return this.sampleCurveY(this.solveCurveX(y,m))};var u=f;function f(y,m){this.x=y,this.y=m}f.prototype={clone:function(){return new f(this.x,this.y)},add:function(y){return this.clone()._add(y)},sub:function(y){return this.clone()._sub(y)},multByPoint:function(y){return this.clone()._multByPoint(y)},divByPoint:function(y){return this.clone()._divByPoint(y)},mult:function(y){return this.clone()._mult(y)},div:function(y){return this.clone()._div(y)},rotate:function(y){return this.clone()._rotate(y)},rotateAround:function(y,m){return this.clone()._rotateAround(y,m)},matMult:function(y){return this.clone()._matMult(y)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(y){return this.x===y.x&&this.y===y.y},dist:function(y){return Math.sqrt(this.distSqr(y))},distSqr:function(y){var m=y.x-this.x,L=y.y-this.y;return m*m+L*L},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(y){return Math.atan2(this.y-y.y,this.x-y.x)},angleWith:function(y){return this.angleWithSep(y.x,y.y)},angleWithSep:function(y,m){return Math.atan2(this.x*m-this.y*y,this.x*y+this.y*m)},_matMult:function(y){var m=y[0]*this.x+y[1]*this.y,L=y[2]*this.x+y[3]*this.y;return this.x=m,this.y=L,this},_add:function(y){return this.x+=y.x,this.y+=y.y,this},_sub:function(y){return this.x-=y.x,this.y-=y.y,this},_mult:function(y){return this.x*=y,this.y*=y,this},_div:function(y){return this.x/=y,this.y/=y,this},_multByPoint:function(y){return this.x*=y.x,this.y*=y.y,this},_divByPoint:function(y){return this.x/=y.x,this.y/=y.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var y=this.y;return this.y=this.x,this.x=-y,this},_rotate:function(y){var m=Math.cos(y),L=Math.sin(y),z=m*this.x-L*this.y,Y=L*this.x+m*this.y;return this.x=z,this.y=Y,this},_rotateAround:function(y,m){var L=Math.cos(y),z=Math.sin(y),Y=m.x+L*(this.x-m.x)-z*(this.y-m.y),j=m.y+z*(this.x-m.x)+L*(this.y-m.y);return this.x=Y,this.y=j,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},f.convert=function(y){return y instanceof f?y:Array.isArray(y)?new f(y[0],y[1]):y};var c=typeof self!="undefined"?self:{};function h(y,m){if(Array.isArray(y)){if(!Array.isArray(m)||y.length!==m.length)return!1;for(var L=0;L<y.length;L++)if(!h(y[L],m[L]))return!1;return!0}if(typeof y=="object"&&y!==null&&m!==null){if(typeof m!="object")return!1;var z=Object.keys(y);if(z.length!==Object.keys(m).length)return!1;for(var Y in y)if(!h(y[Y],m[Y]))return!1;return!0}return y===m}var v=Math.pow(2,53)-1;function d(y){if(y<=0)return 0;if(y>=1)return 1;var m=y*y,L=m*y;return 4*(y<.5?L:3*(y-m)+L-.75)}function x(y,m,L,z){var Y=new s(y,m,L,z);return function(j){return Y.solve(j)}}var b=x(.25,.1,.25,1);function p(y,m,L){return Math.min(L,Math.max(m,y))}function w(y,m,L){var z=L-m,Y=((y-m)%z+z)%z+m;return Y===m?L:Y}function A(y,m,L){if(!y.length)return L(null,[]);var z=y.length,Y=new Array(y.length),j=null;y.forEach(function(Q,ye){m(Q,function(ke,Fe){ke&&(j=ke),Y[ye]=Fe,--z===0&&L(j,Y)})})}function T(y){var m=[];for(var L in y)m.push(y[L]);return m}function k(y,m){var L=[];for(var z in y)z in m||L.push(z);return L}function _(y){for(var m=[],L=arguments.length-1;L-- >0;)m[L]=arguments[L+1];for(var z=0,Y=m;z<Y.length;z+=1){var j=Y[z];for(var Q in j)y[Q]=j[Q]}return y}function E(y,m){for(var L={},z=0;z<m.length;z++){var Y=m[z];Y in y&&(L[Y]=y[Y])}return L}var S=1;function g(){return S++}function C(){function y(m){return m?(m^Math.random()*16>>m/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,y)}return y()}function M(y){return y<=1?1:Math.pow(2,Math.ceil(Math.log(y)/Math.LN2))}function P(y){return y?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(y):!1}function D(y,m){y.forEach(function(L){m[L]&&(m[L]=m[L].bind(m))})}function q(y,m){return y.indexOf(m,y.length-m.length)!==-1}function O(y,m,L){var z={};for(var Y in y)z[Y]=m.call(L||this,y[Y],Y,y);return z}function U(y,m,L){var z={};for(var Y in y)m.call(L||this,y[Y],Y,y)&&(z[Y]=y[Y]);return z}function B(y){return Array.isArray(y)?y.map(B):typeof y=="object"&&y?O(y,B):y}function F(y,m){for(var L=0;L<y.length;L++)if(m.indexOf(y[L])>=0)return!0;return!1}var N={};function X(y){N[y]||(typeof console!="undefined"&&console.warn(y),N[y]=!0)}function K(y,m,L){return(L.y-y.y)*(m.x-y.x)>(m.y-y.y)*(L.x-y.x)}function ne(y){for(var m=0,L=0,z=y.length,Y=z-1,j=void 0,Q=void 0;L<z;Y=L++)j=y[L],Q=y[Y],m+=(Q.x-j.x)*(j.y+Q.y);return m}function fe(y){var m=y[0],L=y[1],z=y[2];return L+=90,L*=Math.PI/180,z*=Math.PI/180,{x:m*Math.cos(L)*Math.sin(z),y:m*Math.sin(L)*Math.sin(z),z:m*Math.cos(z)}}function ue(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function ee(y){var m=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,L={};if(y.replace(m,function(Y,j,Q,ye){var ke=Q||ye;return L[j]=ke?ke.toLowerCase():!0,""}),L["max-age"]){var z=parseInt(L["max-age"],10);isNaN(z)?delete L["max-age"]:L["max-age"]=z}return L}var Z=null;function oe(y){if(Z==null){var m=y.navigator?y.navigator.userAgent:null;Z=!!y.safari||!!(m&&(/\b(iPad|iPhone|iPod)\b/.test(m)||m.match("Safari")&&!m.match("Chrome")))}return Z}function ce(y){try{var m=c[y];return m.setItem("_mapbox_test_",1),m.removeItem("_mapbox_test_"),!0}catch(L){return!1}}function le(y){return c.btoa(encodeURIComponent(y).replace(/%([0-9A-F]{2})/g,function(m,L){return String.fromCharCode(+("0x"+L))}))}function me(y){return decodeURIComponent(c.atob(y).split("").map(function(m){return"%"+("00"+m.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var he=c.performance&&c.performance.now?c.performance.now.bind(c.performance):Date.now.bind(Date),te=c.requestAnimationFrame||c.mozRequestAnimationFrame||c.webkitRequestAnimationFrame||c.msRequestAnimationFrame,ge=c.cancelAnimationFrame||c.mozCancelAnimationFrame||c.webkitCancelAnimationFrame||c.msCancelAnimationFrame,ae,_e,Ce={now:he,frame:function(m){var L=te(m);return{cancel:function(){return ge(L)}}},getImageData:function(m,L){L===void 0&&(L=0);var z=c.document.createElement("canvas"),Y=z.getContext("2d");if(!Y)throw new Error("failed to create canvas 2d context");return z.width=m.width,z.height=m.height,Y.drawImage(m,0,0,m.width,m.height),Y.getImageData(-L,-L,m.width+2*L,m.height+2*L)},resolveURL:function(m){return ae||(ae=c.document.createElement("a")),ae.href=m,ae.href},hardwareConcurrency:c.navigator&&c.navigator.hardwareConcurrency||4,get devicePixelRatio(){return c.devicePixelRatio},get prefersReducedMotion(){return c.matchMedia?(_e==null&&(_e=c.matchMedia("(prefers-reduced-motion: reduce)")),_e.matches):!1}},qe={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},rt={supported:!1,testSupport:ht},Re,Ie=!1,ot,lt=!1;c.document&&(ot=c.document.createElement("img"),ot.onload=function(){Re&&xt(Re),Re=null,lt=!0},ot.onerror=function(){Ie=!0,Re=null},ot.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function ht(y){Ie||!ot||(lt?xt(y):Re=y)}function xt(y){var m=y.createTexture();y.bindTexture(y.TEXTURE_2D,m);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,ot),y.isContextLost())return;rt.supported=!0}catch(L){}y.deleteTexture(m),Ie=!0}var Vt="01";function Ht(){for(var y="1",m="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",L="",z=0;z<10;z++)L+=m[Math.floor(Math.random()*62)];var Y=12*60*60*1e3,j=[y,Vt,L].join(""),Q=Date.now()+Y;return{token:j,tokenExpiresAt:Q}}var Me=function(m,L){this._transformRequestFn=m,this._customAccessToken=L,this._createSkuToken()};Me.prototype._createSkuToken=function(){var m=Ht();this._skuToken=m.token,this._skuTokenExpiresAt=m.tokenExpiresAt},Me.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Me.prototype.transformRequest=function(m,L){return this._transformRequestFn?this._transformRequestFn(m,L)||{url:m}:{url:m}},Me.prototype.normalizeStyleURL=function(m,L){if(!Ke(m))return m;var z=dt(m);return z.path="/styles/v1"+z.path,this._makeAPIURL(z,this._customAccessToken||L)},Me.prototype.normalizeGlyphsURL=function(m,L){if(!Ke(m))return m;var z=dt(m);return z.path="/fonts/v1"+z.path,this._makeAPIURL(z,this._customAccessToken||L)},Me.prototype.normalizeSourceURL=function(m,L){if(!Ke(m))return m;var z=dt(m);return z.path="/v4/"+z.authority+".json",z.params.push("secure"),this._makeAPIURL(z,this._customAccessToken||L)},Me.prototype.normalizeSpriteURL=function(m,L,z,Y){var j=dt(m);return Ke(m)?(j.path="/styles/v1"+j.path+"/sprite"+L+z,this._makeAPIURL(j,this._customAccessToken||Y)):(j.path+=""+L+z,_t(j))},Me.prototype.normalizeTileURL=function(m,L){if(this._isSkuTokenExpired()&&this._createSkuToken(),m&&!Ke(m))return m;var z=dt(m),Y=/(\.(png|jpg)\d*)(?=$)/,j=/^.+\/v4\//,Q=Ce.devicePixelRatio>=2||L===512?"@2x":"",ye=rt.supported?".webp":"$1";z.path=z.path.replace(Y,""+Q+ye),z.path=z.path.replace(j,"/"),z.path="/v4"+z.path;var ke=this._customAccessToken||at(z.params)||qe.ACCESS_TOKEN;return qe.REQUIRE_ACCESS_TOKEN&&ke&&this._skuToken&&z.params.push("sku="+this._skuToken),this._makeAPIURL(z,ke)},Me.prototype.canonicalizeTileURL=function(m,L){var z="/v4/",Y=/\.[\w]+$/,j=dt(m);if(!j.path.match(/(^\/v4\/)/)||!j.path.match(Y))return m;var Q="mapbox://tiles/";Q+=j.path.replace(z,"");var ye=j.params;return L&&(ye=ye.filter(function(ke){return!ke.match(/^access_token=/)})),ye.length&&(Q+="?"+ye.join("&")),Q},Me.prototype.canonicalizeTileset=function(m,L){for(var z=L?Ke(L):!1,Y=[],j=0,Q=m.tiles||[];j<Q.length;j+=1){var ye=Q[j];et(ye)?Y.push(this.canonicalizeTileURL(ye,z)):Y.push(ye)}return Y},Me.prototype._makeAPIURL=function(m,L){var z="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",Y=dt(qe.API_URL);if(m.protocol=Y.protocol,m.authority=Y.authority,m.protocol==="http"){var j=m.params.indexOf("secure");j>=0&&m.params.splice(j,1)}if(Y.path!=="/"&&(m.path=""+Y.path+m.path),!qe.REQUIRE_ACCESS_TOKEN)return _t(m);if(L=L||qe.ACCESS_TOKEN,!L)throw new Error("An API access token is required to use Mapbox GL. "+z);if(L[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+z);return m.params=m.params.filter(function(Q){return Q.indexOf("access_token")===-1}),m.params.push("access_token="+L),_t(m)};function Ke(y){return y.indexOf("mapbox:")===0}var We=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function et(y){return We.test(y)}function vt(y){return y.indexOf("sku=")>0&&et(y)}function at(y){for(var m=0,L=y;m<L.length;m+=1){var z=L[m],Y=z.match(/^access_token=(.*)$/);if(Y)return Y[1]}return null}var Xe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function dt(y){var m=y.match(Xe);if(!m)throw new Error("Unable to parse URL object");return{protocol:m[1],authority:m[2],path:m[3]||"/",params:m[4]?m[4].split("&"):[]}}function _t(y){var m=y.params.length?"?"+y.params.join("&"):"";return y.protocol+"://"+y.authority+y.path+m}var $t="mapbox.eventData";function Ut(y){if(!y)return null;var m=y.split(".");if(!m||m.length!==3)return null;try{var L=JSON.parse(me(m[1]));return L}catch(z){return null}}var fr=function(m){this.type=m,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};fr.prototype.getStorageKey=function(m){var L=Ut(qe.ACCESS_TOKEN),z="";return L&&L.u?z=le(L.u):z=qe.ACCESS_TOKEN||"",m?$t+"."+m+":"+z:$t+":"+z},fr.prototype.fetchEventData=function(){var m=ce("localStorage"),L=this.getStorageKey(),z=this.getStorageKey("uuid");if(m)try{var Y=c.localStorage.getItem(L);Y&&(this.eventData=JSON.parse(Y));var j=c.localStorage.getItem(z);j&&(this.anonId=j)}catch(Q){X("Unable to read from LocalStorage")}},fr.prototype.saveEventData=function(){var m=ce("localStorage"),L=this.getStorageKey(),z=this.getStorageKey("uuid");if(m)try{c.localStorage.setItem(z,this.anonId),Object.keys(this.eventData).length>=1&&c.localStorage.setItem(L,JSON.stringify(this.eventData))}catch(Y){X("Unable to write to LocalStorage")}},fr.prototype.processRequests=function(m){},fr.prototype.postEvent=function(m,L,z,Y){var j=this;if(qe.EVENTS_URL){var Q=dt(qe.EVENTS_URL);Q.params.push("access_token="+(Y||qe.ACCESS_TOKEN||""));var ye={event:this.type,created:new Date(m).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:o,skuId:Vt,userId:this.anonId},ke=L?_(ye,L):ye,Fe={url:_t(Q),headers:{"Content-Type":"text/plain"},body:JSON.stringify([ke])};this.pendingRequest=vr(Fe,function(Ne){j.pendingRequest=null,z(Ne),j.saveEventData(),j.processRequests(Y)})}},fr.prototype.queueRequest=function(m,L){this.queue.push(m),this.processRequests(L)};var ar=function(y){function m(){y.call(this,"map.load"),this.success={},this.skuToken=""}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.postMapLoadEvent=function(z,Y,j,Q){this.skuToken=j,(qe.EVENTS_URL&&Q||qe.ACCESS_TOKEN&&Array.isArray(z)&&z.some(function(ye){return Ke(ye)||et(ye)}))&&this.queueRequest({id:Y,timestamp:Date.now()},Q)},m.prototype.processRequests=function(z){var Y=this;if(!(this.pendingRequest||this.queue.length===0)){var j=this.queue.shift(),Q=j.id,ye=j.timestamp;Q&&this.success[Q]||(this.anonId||this.fetchEventData(),P(this.anonId)||(this.anonId=C()),this.postEvent(ye,{skuToken:this.skuToken},function(ke){ke||Q&&(Y.success[Q]=!0)},z))}},m}(fr),cr=function(y){function m(L){y.call(this,"appUserTurnstile"),this._customAccessToken=L}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.postTurnstileEvent=function(z,Y){qe.EVENTS_URL&&qe.ACCESS_TOKEN&&Array.isArray(z)&&z.some(function(j){return Ke(j)||et(j)})&&this.queueRequest(Date.now(),Y)},m.prototype.processRequests=function(z){var Y=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var j=Ut(qe.ACCESS_TOKEN),Q=j?j.u:qe.ACCESS_TOKEN,ye=Q!==this.eventData.tokenU;P(this.anonId)||(this.anonId=C(),ye=!0);var ke=this.queue.shift();if(this.eventData.lastSuccess){var Fe=new Date(this.eventData.lastSuccess),Ne=new Date(ke),ct=(ke-this.eventData.lastSuccess)/(24*60*60*1e3);ye=ye||ct>=1||ct<-1||Fe.getDate()!==Ne.getDate()}else ye=!0;if(!ye)return this.processRequests();this.postEvent(ke,{"enabled.telemetry":!1},function(St){St||(Y.eventData.lastSuccess=ke,Y.eventData.tokenU=Q)},z)}},m}(fr),It=new cr,gt=It.postTurnstileEvent.bind(It),kt=new ar,Je=kt.postMapLoadEvent.bind(kt),Ze="mapbox-tiles",At=500,Se=50,pe=1e3*60*7,Te;function it(){c.caches&&!Te&&(Te=c.caches.open(Ze))}var Dt;function Wt(y,m){if(Dt===void 0)try{new Response(new ReadableStream),Dt=!0}catch(L){Dt=!1}Dt?m(y.body):y.blob().then(m)}function er(y,m,L){if(it(),!!Te){var z={status:m.status,statusText:m.statusText,headers:new c.Headers};m.headers.forEach(function(Q,ye){return z.headers.set(ye,Q)});var Y=ee(m.headers.get("Cache-Control")||"");if(!Y["no-store"]){Y["max-age"]&&z.headers.set("Expires",new Date(L+Y["max-age"]*1e3).toUTCString());var j=new Date(z.headers.get("Expires")).getTime()-L;j<pe||Wt(m,function(Q){var ye=new c.Response(Q,z);it(),Te&&Te.then(function(ke){return ke.put(qr(y.url),ye)}).catch(function(ke){return X(ke.message)})})}}}function qr(y){var m=y.indexOf("?");return m<0?y:y.slice(0,m)}function Vr(y,m){if(it(),!Te)return m(null);var L=qr(y.url);Te.then(function(z){z.match(L).then(function(Y){var j=mr(Y);z.delete(L),j&&z.put(L,Y.clone()),m(null,Y,j)}).catch(m)}).catch(m)}function mr(y){if(!y)return!1;var m=new Date(y.headers.get("Expires")||0),L=ee(y.headers.get("Cache-Control")||"");return m>Date.now()&&!L["no-cache"]}var Fr=1/0;function nn(y){Fr++,Fr>Se&&(y.getActor().send("enforceCacheSizeLimit",At),Fr=0)}function jn(y){it(),Te&&Te.then(function(m){m.keys().then(function(L){for(var z=0;z<L.length-y;z++)m.delete(L[z])})})}function xn(y){var m=c.caches.delete(Ze);y&&m.catch(y).then(function(){return y()})}function pn(y,m){At=y,Se=m}var ki;function qn(){return ki==null&&(ki=c.OffscreenCanvas&&new c.OffscreenCanvas(1,1).getContext("2d")&&typeof c.createImageBitmap=="function"),ki}var bi={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(bi);var Si=function(y){function m(L,z,Y){z===401&&et(Y)&&(L+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),y.call(this,L),this.status=z,this.url=Y,this.name=this.constructor.name,this.message=L}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},m}(Error),nt=ue()?function(){return self.worker&&self.worker.referrer}:function(){return(c.location.protocol==="blob:"?c.parent:c).location.href},ze=function(y){return/^file:/.test(y)||/^file:/.test(nt())&&!/^\w+:/.test(y)};function ut(y,m){var L=new c.AbortController,z=new c.Request(y.url,{method:y.method||"GET",body:y.body,credentials:y.credentials,headers:y.headers,referrer:nt(),signal:L.signal}),Y=!1,j=!1,Q=vt(z.url);y.type==="json"&&z.headers.set("Accept","application/json");var ye=function(Fe,Ne,ct){if(!j){if(Fe&&Fe.message!=="SecurityError"&&X(Fe),Ne&&ct)return ke(Ne);var St=Date.now();c.fetch(z).then(function(bt){if(bt.ok){var Xt=Q?bt.clone():null;return ke(bt,Xt,St)}else return m(new Si(bt.statusText,bt.status,y.url))}).catch(function(bt){bt.code!==20&&m(new Error(bt.message))})}},ke=function(Fe,Ne,ct){(y.type==="arrayBuffer"?Fe.arrayBuffer():y.type==="json"?Fe.json():Fe.text()).then(function(St){j||(Ne&&ct&&er(z,Ne,ct),Y=!0,m(null,St,Fe.headers.get("Cache-Control"),Fe.headers.get("Expires")))}).catch(function(St){j||m(new Error(St.message))})};return Q?Vr(z,ye):ye(null,null),{cancel:function(){j=!0,Y||L.abort()}}}function mt(y,m){var L=new c.XMLHttpRequest;L.open(y.method||"GET",y.url,!0),y.type==="arrayBuffer"&&(L.responseType="arraybuffer");for(var z in y.headers)L.setRequestHeader(z,y.headers[z]);return y.type==="json"&&(L.responseType="text",L.setRequestHeader("Accept","application/json")),L.withCredentials=y.credentials==="include",L.onerror=function(){m(new Error(L.statusText))},L.onload=function(){if((L.status>=200&&L.status<300||L.status===0)&&L.response!==null){var Y=L.response;if(y.type==="json")try{Y=JSON.parse(L.response)}catch(j){return m(j)}m(null,Y,L.getResponseHeader("Cache-Control"),L.getResponseHeader("Expires"))}else m(new Si(L.statusText,L.status,y.url))},L.send(y.body),{cancel:function(){return L.abort()}}}var Ot=function(y,m){if(!ze(y.url)){if(c.fetch&&c.Request&&c.AbortController&&c.Request.prototype.hasOwnProperty("signal"))return ut(y,m);if(ue()&&self.worker&&self.worker.actor){var L=!0;return self.worker.actor.send("getResource",y,m,void 0,L)}}return mt(y,m)},nr=function(y,m){return Ot(_(y,{type:"json"}),m)},yr=function(y,m){return Ot(_(y,{type:"arrayBuffer"}),m)},vr=function(y,m){return Ot(_(y,{method:"POST"}),m)};function Rr(y){var m=c.document.createElement("a");return m.href=y,m.protocol===c.document.location.protocol&&m.host===c.document.location.host}var Gr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Yr(y,m,L,z){var Y=new c.Image,j=c.URL;Y.onload=function(){m(null,Y),j.revokeObjectURL(Y.src),Y.onload=null,c.requestAnimationFrame(function(){Y.src=Gr})},Y.onerror=function(){return m(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Q=new c.Blob([new Uint8Array(y)],{type:"image/png"});Y.cacheControl=L,Y.expires=z,Y.src=y.byteLength?j.createObjectURL(Q):Gr}function Xr(y,m){var L=new c.Blob([new Uint8Array(y)],{type:"image/png"});c.createImageBitmap(L).then(function(z){m(null,z)}).catch(function(z){m(new Error("Could not load image because of "+z.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var on,wn,Vi=function(){on=[],wn=0};Vi();var vi=function(y,m){if(rt.supported&&(y.headers||(y.headers={}),y.headers.accept="image/webp,*/*"),wn>=qe.MAX_PARALLEL_IMAGE_REQUESTS){var L={requestParameters:y,callback:m,cancelled:!1,cancel:function(){this.cancelled=!0}};return on.push(L),L}wn++;var z=!1,Y=function(){if(!z)for(z=!0,wn--;on.length&&wn<qe.MAX_PARALLEL_IMAGE_REQUESTS;){var Q=on.shift(),ye=Q.requestParameters,ke=Q.callback,Fe=Q.cancelled;Fe||(Q.cancel=vi(ye,ke).cancel)}},j=yr(y,function(Q,ye,ke,Fe){Y(),Q?m(Q):ye&&(qn()?Xr(ye,m):Yr(ye,m,ke,Fe))});return{cancel:function(){j.cancel(),Y()}}},Zi=function(y,m){var L=c.document.createElement("video");L.muted=!0,L.onloadstart=function(){m(null,L)};for(var z=0;z<y.length;z++){var Y=c.document.createElement("source");Rr(y[z])||(L.crossOrigin="Anonymous"),Y.src=y[z],L.appendChild(Y)}return{cancel:function(){}}};function Xi(y,m,L){var z=L[y]&&L[y].indexOf(m)!==-1;z||(L[y]=L[y]||[],L[y].push(m))}function ta(y,m,L){if(L&&L[y]){var z=L[y].indexOf(m);z!==-1&&L[y].splice(z,1)}}var Ya=function(m,L){L===void 0&&(L={}),_(this,L),this.type=m},Pi=function(y){function m(L,z){z===void 0&&(z={}),y.call(this,"error",_({error:L},z))}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m}(Ya),Bn=function(){};Bn.prototype.on=function(m,L){return this._listeners=this._listeners||{},Xi(m,L,this._listeners),this},Bn.prototype.off=function(m,L){return ta(m,L,this._listeners),ta(m,L,this._oneTimeListeners),this},Bn.prototype.once=function(m,L){return this._oneTimeListeners=this._oneTimeListeners||{},Xi(m,L,this._oneTimeListeners),this},Bn.prototype.fire=function(m,L){typeof m=="string"&&(m=new Ya(m,L||{}));var z=m.type;if(this.listens(z)){m.target=this;for(var Y=this._listeners&&this._listeners[z]?this._listeners[z].slice():[],j=0,Q=Y;j<Q.length;j+=1){var ye=Q[j];ye.call(this,m)}for(var ke=this._oneTimeListeners&&this._oneTimeListeners[z]?this._oneTimeListeners[z].slice():[],Fe=0,Ne=ke;Fe<Ne.length;Fe+=1){var ct=Ne[Fe];ta(z,ct,this._oneTimeListeners),ct.call(this,m)}var St=this._eventedParent;St&&(_(m,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),St.fire(m))}else m instanceof Pi&&console.error(m.error);return this},Bn.prototype.listens=function(m){return this._listeners&&this._listeners[m]&&this._listeners[m].length>0||this._oneTimeListeners&&this._oneTimeListeners[m]&&this._oneTimeListeners[m].length>0||this._eventedParent&&this._eventedParent.listens(m)},Bn.prototype.setEventedParent=function(m,L){return this._eventedParent=m,this._eventedParentData=L,this};var Qi=8,ya={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},Nn={"*":{type:"source"}},je=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Bt={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},ur={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},br={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Jr={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},ln={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},yn={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Cr={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},vn=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],gi={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Wn={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},zi={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},fa={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},to={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ma={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},uo={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ka={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},jo={type:"array",value:"*"},Ho={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},xs={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},ss={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},al={type:"array",value:"*",minimum:1},so={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},vs=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],Co={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},ds={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},$o={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},es={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Oa={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},vo={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Al={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},ru={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Vu={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},ls={"*":{type:"string"}},dn={$version:Qi,$root:ya,sources:Nn,source:je,source_vector:Bt,source_raster:ur,source_raster_dem:br,source_geojson:Jr,source_video:ln,source_image:yn,layer:Cr,layout:vn,layout_background:gi,layout_fill:Wn,layout_circle:zi,layout_heatmap:fa,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:to,layout_symbol:ma,layout_raster:uo,layout_hillshade:Ka,filter:jo,filter_operator:Ho,geometry_type:xs,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:ss,expression:al,light:so,paint:vs,paint_fill:Co,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:ds,paint_circle:$o,paint_heatmap:es,paint_symbol:Oa,paint_raster:vo,paint_hillshade:Al,paint_background:ru,transition:Vu,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:ls},wi=function(m,L,z,Y){this.message=(m?m+": ":"")+z,Y&&(this.identifier=Y),L!=null&&L.__line__&&(this.line=L.__line__)};function sc(y){var m=y.key,L=y.value;return L?[new wi(m,L,"constants have been deprecated as of v8")]:[]}function Pl(y){for(var m=[],L=arguments.length-1;L-- >0;)m[L]=arguments[L+1];for(var z=0,Y=m;z<Y.length;z+=1){var j=Y[z];for(var Q in j)y[Q]=j[Q]}return y}function us(y){return y instanceof Number||y instanceof String||y instanceof Boolean?y.valueOf():y}function dl(y){if(Array.isArray(y))return y.map(dl);if(y instanceof Object&&!(y instanceof Number||y instanceof String||y instanceof Boolean)){var m={};for(var L in y)m[L]=dl(y[L]);return m}return us(y)}var ts=function(y){function m(L,z){y.call(this,z),this.message=z,this.key=L}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m}(Error),Rl=function(m,L){L===void 0&&(L=[]),this.parent=m,this.bindings={};for(var z=0,Y=L;z<Y.length;z+=1){var j=Y[z],Q=j[0],ye=j[1];this.bindings[Q]=ye}};Rl.prototype.concat=function(m){return new Rl(this,m)},Rl.prototype.get=function(m){if(this.bindings[m])return this.bindings[m];if(this.parent)return this.parent.get(m);throw new Error(m+" not found in scope.")},Rl.prototype.has=function(m){return this.bindings[m]?!0:this.parent?this.parent.has(m):!1};var wu={kind:"null"},oi={kind:"number"},Aa={kind:"string"},Ca={kind:"boolean"},Fs={kind:"color"},If={kind:"object"},Ma={kind:"value"},Ff={kind:"error"},jc={kind:"collator"},pl={kind:"formatted"},hf={kind:"resolvedImage"};function tl(y,m){return{kind:"array",itemType:y,N:m}}function Lo(y){if(y.kind==="array"){var m=Lo(y.itemType);return typeof y.N=="number"?"array<"+m+", "+y.N+">":y.itemType.kind==="value"?"array":"array<"+m+">"}else return y.kind}var nu=[wu,oi,Aa,Ca,Fs,pl,If,tl(Ma),hf];function Tu(y,m){if(m.kind==="error")return null;if(y.kind==="array"){if(m.kind==="array"&&(m.N===0&&m.itemType.kind==="value"||!Tu(y.itemType,m.itemType))&&(typeof y.N!="number"||y.N===m.N))return null}else{if(y.kind===m.kind)return null;if(y.kind==="value")for(var L=0,z=nu;L<z.length;L+=1){var Y=z[L];if(!Tu(Y,m))return null}}return"Expected "+Lo(y)+" but found "+Lo(m)+" instead."}function Sh(y,m){return m.some(function(L){return L.kind===y.kind})}function Hu(y,m){return m.some(function(L){return L==="null"?y===null:L==="array"?Array.isArray(y):L==="object"?y&&!Array.isArray(y)&&typeof y=="object":L===typeof y})}var ov=a(function(y,m){var L={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function z(Fe){return Fe=Math.round(Fe),Fe<0?0:Fe>255?255:Fe}function Y(Fe){return Fe<0?0:Fe>1?1:Fe}function j(Fe){return Fe[Fe.length-1]==="%"?z(parseFloat(Fe)/100*255):z(parseInt(Fe))}function Q(Fe){return Fe[Fe.length-1]==="%"?Y(parseFloat(Fe)/100):Y(parseFloat(Fe))}function ye(Fe,Ne,ct){return ct<0?ct+=1:ct>1&&(ct-=1),ct*6<1?Fe+(Ne-Fe)*ct*6:ct*2<1?Ne:ct*3<2?Fe+(Ne-Fe)*(2/3-ct)*6:Fe}function ke(Fe){var Ne=Fe.replace(/ /g,"").toLowerCase();if(Ne in L)return L[Ne].slice();if(Ne[0]==="#"){if(Ne.length===4){var ct=parseInt(Ne.substr(1),16);return ct>=0&&ct<=4095?[(ct&3840)>>4|(ct&3840)>>8,ct&240|(ct&240)>>4,ct&15|(ct&15)<<4,1]:null}else if(Ne.length===7){var ct=parseInt(Ne.substr(1),16);return ct>=0&&ct<=16777215?[(ct&16711680)>>16,(ct&65280)>>8,ct&255,1]:null}return null}var St=Ne.indexOf("("),bt=Ne.indexOf(")");if(St!==-1&&bt+1===Ne.length){var Xt=Ne.substr(0,St),dr=Ne.substr(St+1,bt-(St+1)).split(","),Ir=1;switch(Xt){case"rgba":if(dr.length!==4)return null;Ir=Q(dr.pop());case"rgb":return dr.length!==3?null:[j(dr[0]),j(dr[1]),j(dr[2]),Ir];case"hsla":if(dr.length!==4)return null;Ir=Q(dr.pop());case"hsl":if(dr.length!==3)return null;var Ar=(parseFloat(dr[0])%360+360)%360/360,en=Q(dr[1]),Ur=Q(dr[2]),Qr=Ur<=.5?Ur*(en+1):Ur+en-Ur*en,sn=Ur*2-Qr;return[z(ye(sn,Qr,Ar+1/3)*255),z(ye(sn,Qr,Ar)*255),z(ye(sn,Qr,Ar-1/3)*255),Ir];default:return null}}return null}try{m.parseCSSColor=ke}catch(Fe){}}),Sc=ov.parseCSSColor,fo=function(m,L,z,Y){Y===void 0&&(Y=1),this.r=m,this.g=L,this.b=z,this.a=Y};fo.parse=function(m){if(m){if(m instanceof fo)return m;if(typeof m=="string"){var L=Sc(m);if(L)return new fo(L[0]/255*L[3],L[1]/255*L[3],L[2]/255*L[3],L[3])}}},fo.prototype.toString=function(){var m=this.toArray(),L=m[0],z=m[1],Y=m[2],j=m[3];return"rgba("+Math.round(L)+","+Math.round(z)+","+Math.round(Y)+","+j+")"},fo.prototype.toArray=function(){var m=this,L=m.r,z=m.g,Y=m.b,j=m.a;return j===0?[0,0,0,0]:[L*255/j,z*255/j,Y*255/j,j]},fo.black=new fo(0,0,0,1),fo.white=new fo(1,1,1,1),fo.transparent=new fo(0,0,0,0),fo.red=new fo(1,0,0,1);var qf=function(m,L,z){m?this.sensitivity=L?"variant":"case":this.sensitivity=L?"accent":"base",this.locale=z,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};qf.prototype.compare=function(m,L){return this.collator.compare(m,L)},qf.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Eh=function(m,L,z,Y,j){this.text=m,this.image=L,this.scale=z,this.fontStack=Y,this.textColor=j},Us=function(m){this.sections=m};Us.fromString=function(m){return new Us([new Eh(m,null,null,null,null)])},Us.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(m){return m.text.length!==0||m.image&&m.image.name.length!==0})},Us.factory=function(m){return m instanceof Us?m:Us.fromString(m)},Us.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(m){return m.text}).join("")},Us.prototype.serialize=function(){for(var m=["format"],L=0,z=this.sections;L<z.length;L+=1){var Y=z[L];if(Y.image){m.push(["image",Y.image.name]);continue}m.push(Y.text);var j={};Y.fontStack&&(j["text-font"]=["literal",Y.fontStack.split(",")]),Y.scale&&(j["font-scale"]=Y.scale),Y.textColor&&(j["text-color"]=["rgba"].concat(Y.textColor.toArray())),m.push(j)}return m};var _s=function(m){this.name=m.name,this.available=m.available};_s.prototype.toString=function(){return this.name},_s.fromString=function(m){return m?new _s({name:m,available:!1}):null},_s.prototype.serialize=function(){return["image",this.name]};function kh(y,m,L,z){if(!(typeof y=="number"&&y>=0&&y<=255&&typeof m=="number"&&m>=0&&m<=255&&typeof L=="number"&&L>=0&&L<=255)){var Y=typeof z=="number"?[y,m,L,z]:[y,m,L];return"Invalid rgba value ["+Y.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof z=="undefined"||typeof z=="number"&&z>=0&&z<=1?null:"Invalid rgba value ["+[y,m,L,z].join(", ")+"]: 'a' must be between 0 and 1."}function vf(y){if(y===null)return!0;if(typeof y=="string")return!0;if(typeof y=="boolean")return!0;if(typeof y=="number")return!0;if(y instanceof fo)return!0;if(y instanceof qf)return!0;if(y instanceof Us)return!0;if(y instanceof _s)return!0;if(Array.isArray(y)){for(var m=0,L=y;m<L.length;m+=1){var z=L[m];if(!vf(z))return!1}return!0}else if(typeof y=="object"){for(var Y in y)if(!vf(y[Y]))return!1;return!0}else return!1}function Mo(y){if(y===null)return wu;if(typeof y=="string")return Aa;if(typeof y=="boolean")return Ca;if(typeof y=="number")return oi;if(y instanceof fo)return Fs;if(y instanceof qf)return jc;if(y instanceof Us)return pl;if(y instanceof _s)return hf;if(Array.isArray(y)){for(var m=y.length,L,z=0,Y=y;z<Y.length;z+=1){var j=Y[z],Q=Mo(j);if(!L)L=Q;else{if(L===Q)continue;L=Ma;break}}return tl(L||Ma,m)}else return If}function ps(y){var m=typeof y;return y===null?"":m==="string"||m==="number"||m==="boolean"?String(y):y instanceof fo||y instanceof Us||y instanceof _s?y.toString():JSON.stringify(y)}var yo=function(m,L){this.type=m,this.value=L};yo.parse=function(m,L){if(m.length!==2)return L.error("'literal' expression requires exactly one argument, but found "+(m.length-1)+" instead.");if(!vf(m[1]))return L.error("invalid value");var z=m[1],Y=Mo(z),j=L.expectedType;return Y.kind==="array"&&Y.N===0&&j&&j.kind==="array"&&(typeof j.N!="number"||j.N===0)&&(Y=j),new yo(Y,z)},yo.prototype.evaluate=function(){return this.value},yo.prototype.eachChild=function(){},yo.prototype.outputDefined=function(){return!0},yo.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof fo?["rgba"].concat(this.value.toArray()):this.value instanceof Us?this.value.serialize():this.value};var Po=function(m){this.name="ExpressionEvaluationError",this.message=m};Po.prototype.toJSON=function(){return this.message};var Ec={string:Aa,number:oi,boolean:Ca,object:If},qs=function(m,L){this.type=m,this.args=L};qs.parse=function(m,L){if(m.length<2)return L.error("Expected at least one argument.");var z=1,Y,j=m[0];if(j==="array"){var Q;if(m.length>2){var ye=m[1];if(typeof ye!="string"||!(ye in Ec)||ye==="object")return L.error('The item type argument of "array" must be one of string, number, boolean',1);Q=Ec[ye],z++}else Q=Ma;var ke;if(m.length>3){if(m[2]!==null&&(typeof m[2]!="number"||m[2]<0||m[2]!==Math.floor(m[2])))return L.error('The length argument to "array" must be a positive integer literal',2);ke=m[2],z++}Y=tl(Q,ke)}else Y=Ec[j];for(var Fe=[];z<m.length;z++){var Ne=L.parse(m[z],z,Ma);if(!Ne)return null;Fe.push(Ne)}return new qs(Y,Fe)},qs.prototype.evaluate=function(m){for(var L=0;L<this.args.length;L++){var z=this.args[L].evaluate(m),Y=Tu(this.type,Mo(z));if(Y){if(L===this.args.length-1)throw new Po("Expected value to be of type "+Lo(this.type)+", but found "+Lo(Mo(z))+" instead.")}else return z}return null},qs.prototype.eachChild=function(m){this.args.forEach(m)},qs.prototype.outputDefined=function(){return this.args.every(function(m){return m.outputDefined()})},qs.prototype.serialize=function(){var m=this.type,L=[m.kind];if(m.kind==="array"){var z=m.itemType;if(z.kind==="string"||z.kind==="number"||z.kind==="boolean"){L.push(z.kind);var Y=m.N;(typeof Y=="number"||this.args.length>1)&&L.push(Y)}}return L.concat(this.args.map(function(j){return j.serialize()}))};var Hl=function(m){this.type=pl,this.sections=m};Hl.parse=function(m,L){if(m.length<2)return L.error("Expected at least one argument.");var z=m[1];if(!Array.isArray(z)&&typeof z=="object")return L.error("First argument must be an image or text section.");for(var Y=[],j=!1,Q=1;Q<=m.length-1;++Q){var ye=m[Q];if(j&&typeof ye=="object"&&!Array.isArray(ye)){j=!1;var ke=null;if(ye["font-scale"]&&(ke=L.parse(ye["font-scale"],1,oi),!ke))return null;var Fe=null;if(ye["text-font"]&&(Fe=L.parse(ye["text-font"],1,tl(Aa)),!Fe))return null;var Ne=null;if(ye["text-color"]&&(Ne=L.parse(ye["text-color"],1,Fs),!Ne))return null;var ct=Y[Y.length-1];ct.scale=ke,ct.font=Fe,ct.textColor=Ne}else{var St=L.parse(m[Q],1,Ma);if(!St)return null;var bt=St.type.kind;if(bt!=="string"&&bt!=="value"&&bt!=="null"&&bt!=="resolvedImage")return L.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");j=!0,Y.push({content:St,scale:null,font:null,textColor:null})}}return new Hl(Y)},Hl.prototype.evaluate=function(m){var L=function(z){var Y=z.content.evaluate(m);return Mo(Y)===hf?new Eh("",Y,null,null,null):new Eh(ps(Y),null,z.scale?z.scale.evaluate(m):null,z.font?z.font.evaluate(m).join(","):null,z.textColor?z.textColor.evaluate(m):null)};return new Us(this.sections.map(L))},Hl.prototype.eachChild=function(m){for(var L=0,z=this.sections;L<z.length;L+=1){var Y=z[L];m(Y.content),Y.scale&&m(Y.scale),Y.font&&m(Y.font),Y.textColor&&m(Y.textColor)}},Hl.prototype.outputDefined=function(){return!1},Hl.prototype.serialize=function(){for(var m=["format"],L=0,z=this.sections;L<z.length;L+=1){var Y=z[L];m.push(Y.content.serialize());var j={};Y.scale&&(j["font-scale"]=Y.scale.serialize()),Y.font&&(j["text-font"]=Y.font.serialize()),Y.textColor&&(j["text-color"]=Y.textColor.serialize()),m.push(j)}return m};var df=function(m){this.type=hf,this.input=m};df.parse=function(m,L){if(m.length!==2)return L.error("Expected two arguments.");var z=L.parse(m[1],1,Aa);return z?new df(z):L.error("No image name provided.")},df.prototype.evaluate=function(m){var L=this.input.evaluate(m),z=_s.fromString(L);return z&&m.availableImages&&(z.available=m.availableImages.indexOf(L)>-1),z},df.prototype.eachChild=function(m){m(this.input)},df.prototype.outputDefined=function(){return!1},df.prototype.serialize=function(){return["image",this.input.serialize()]};var bd={"to-boolean":Ca,"to-color":Fs,"to-number":oi,"to-string":Aa},Au=function(m,L){this.type=m,this.args=L};Au.parse=function(m,L){if(m.length<2)return L.error("Expected at least one argument.");var z=m[0];if((z==="to-boolean"||z==="to-string")&&m.length!==2)return L.error("Expected one argument.");for(var Y=bd[z],j=[],Q=1;Q<m.length;Q++){var ye=L.parse(m[Q],Q,Ma);if(!ye)return null;j.push(ye)}return new Au(Y,j)},Au.prototype.evaluate=function(m){if(this.type.kind==="boolean")return!!this.args[0].evaluate(m);if(this.type.kind==="color"){for(var L,z,Y=0,j=this.args;Y<j.length;Y+=1){var Q=j[Y];if(L=Q.evaluate(m),z=null,L instanceof fo)return L;if(typeof L=="string"){var ye=m.parseColor(L);if(ye)return ye}else if(Array.isArray(L)&&(L.length<3||L.length>4?z="Invalid rbga value "+JSON.stringify(L)+": expected an array containing either three or four numeric values.":z=kh(L[0],L[1],L[2],L[3]),!z))return new fo(L[0]/255,L[1]/255,L[2]/255,L[3])}throw new Po(z||"Could not parse color from value '"+(typeof L=="string"?L:String(JSON.stringify(L)))+"'")}else if(this.type.kind==="number"){for(var ke=null,Fe=0,Ne=this.args;Fe<Ne.length;Fe+=1){var ct=Ne[Fe];if(ke=ct.evaluate(m),ke===null)return 0;var St=Number(ke);if(!isNaN(St))return St}throw new Po("Could not convert "+JSON.stringify(ke)+" to number.")}else return this.type.kind==="formatted"?Us.fromString(ps(this.args[0].evaluate(m))):this.type.kind==="resolvedImage"?_s.fromString(ps(this.args[0].evaluate(m))):ps(this.args[0].evaluate(m))},Au.prototype.eachChild=function(m){this.args.forEach(m)},Au.prototype.outputDefined=function(){return this.args.every(function(m){return m.outputDefined()})},Au.prototype.serialize=function(){if(this.type.kind==="formatted")return new Hl([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new df(this.args[0]).serialize();var m=["to-"+this.type.kind];return this.eachChild(function(L){m.push(L.serialize())}),m};var Xp=["Unknown","Point","LineString","Polygon"],Gl=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Gl.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Gl.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Xp[this.feature.type]:this.feature.type:null},Gl.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Gl.prototype.canonicalID=function(){return this.canonical},Gl.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Gl.prototype.parseColor=function(m){var L=this._parseColorCache[m];return L||(L=this._parseColorCache[m]=fo.parse(m)),L};var po=function(m,L,z,Y){this.name=m,this.type=L,this._evaluate=z,this.args=Y};po.prototype.evaluate=function(m){return this._evaluate(m,this.args)},po.prototype.eachChild=function(m){this.args.forEach(m)},po.prototype.outputDefined=function(){return!1},po.prototype.serialize=function(){return[this.name].concat(this.args.map(function(m){return m.serialize()}))},po.parse=function(m,L){var z,Y=m[0],j=po.definitions[Y];if(!j)return L.error('Unknown expression "'+Y+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Q=Array.isArray(j)?j[0]:j.type,ye=Array.isArray(j)?[[j[1],j[2]]]:j.overloads,ke=ye.filter(function(Ni){var Yi=Ni[0];return!Array.isArray(Yi)||Yi.length===m.length-1}),Fe=null,Ne=0,ct=ke;Ne<ct.length;Ne+=1){var St=ct[Ne],bt=St[0],Xt=St[1];Fe=new Vs(L.registry,L.path,null,L.scope);for(var dr=[],Ir=!1,Ar=1;Ar<m.length;Ar++){var en=m[Ar],Ur=Array.isArray(bt)?bt[Ar-1]:bt.type,Qr=Fe.parse(en,1+dr.length,Ur);if(!Qr){Ir=!0;break}dr.push(Qr)}if(!Ir){if(Array.isArray(bt)&&bt.length!==dr.length){Fe.error("Expected "+bt.length+" arguments, but found "+dr.length+" instead.");continue}for(var sn=0;sn<dr.length;sn++){var Dn=Array.isArray(bt)?bt[sn]:bt.type,li=dr[sn];Fe.concat(sn+1).checkSubtype(Dn,li.type)}if(Fe.errors.length===0)return new po(Y,Q,Xt,dr)}}if(ke.length===1)(z=L.errors).push.apply(z,Fe.errors);else{for(var ii=ke.length?ke:ye,Bi=ii.map(function(Ni){var Yi=Ni[0];return zv(Yi)}).join(" | "),Ai=[],Di=1;Di<m.length;Di++){var wa=L.parse(m[Di],1+Ai.length);if(!wa)return null;Ai.push(Lo(wa.type))}L.error("Expected arguments of type "+Bi+", but found ("+Ai.join(", ")+") instead.")}return null},po.register=function(m,L){po.definitions=L;for(var z in L)m[z]=po};function zv(y){return Array.isArray(y)?"("+y.map(Lo).join(", ")+")":"("+Lo(y.type)+"...)"}var pf=function(m,L,z){this.type=jc,this.locale=z,this.caseSensitive=m,this.diacriticSensitive=L};pf.parse=function(m,L){if(m.length!==2)return L.error("Expected one argument.");var z=m[1];if(typeof z!="object"||Array.isArray(z))return L.error("Collator options argument must be an object.");var Y=L.parse(z["case-sensitive"]===void 0?!1:z["case-sensitive"],1,Ca);if(!Y)return null;var j=L.parse(z["diacritic-sensitive"]===void 0?!1:z["diacritic-sensitive"],1,Ca);if(!j)return null;var Q=null;return z.locale&&(Q=L.parse(z.locale,1,Aa),!Q)?null:new pf(Y,j,Q)},pf.prototype.evaluate=function(m){return new qf(this.caseSensitive.evaluate(m),this.diacriticSensitive.evaluate(m),this.locale?this.locale.evaluate(m):null)},pf.prototype.eachChild=function(m){m(this.caseSensitive),m(this.diacriticSensitive),this.locale&&m(this.locale)},pf.prototype.outputDefined=function(){return!1},pf.prototype.serialize=function(){var m={};return m["case-sensitive"]=this.caseSensitive.serialize(),m["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(m.locale=this.locale.serialize()),["collator",m]};var Yl=8192;function sv(y,m){y[0]=Math.min(y[0],m[0]),y[1]=Math.min(y[1],m[1]),y[2]=Math.max(y[2],m[0]),y[3]=Math.max(y[3],m[1])}function Ch(y){return(180+y)/360}function lv(y){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+y*Math.PI/360)))/360}function Mu(y,m){return!(y[0]<=m[0]||y[2]>=m[2]||y[1]<=m[1]||y[3]>=m[3])}function Ov(y,m){var L=Ch(y[0]),z=lv(y[1]),Y=Math.pow(2,m.z);return[Math.round(L*Y*Yl),Math.round(z*Y*Yl)]}function uv(y,m,L){var z=y[0]-m[0],Y=y[1]-m[1],j=y[0]-L[0],Q=y[1]-L[1];return z*Q-j*Y===0&&z*j<=0&&Y*Q<=0}function Lh(y,m,L){return m[1]>y[1]!=L[1]>y[1]&&y[0]<(L[0]-m[0])*(y[1]-m[1])/(L[1]-m[1])+m[0]}function fv(y,m){for(var L=!1,z=0,Y=m.length;z<Y;z++)for(var j=m[z],Q=0,ye=j.length;Q<ye-1;Q++){if(uv(y,j[Q],j[Q+1]))return!1;Lh(y,j[Q],j[Q+1])&&(L=!L)}return L}function wd(y,m){for(var L=0;L<m.length;L++)if(fv(y,m[L]))return!0;return!1}function Zd(y,m){return y[0]*m[1]-y[1]*m[0]}function zf(y,m,L,z){var Y=y[0]-L[0],j=y[1]-L[1],Q=m[0]-L[0],ye=m[1]-L[1],ke=z[0]-L[0],Fe=z[1]-L[1],Ne=Y*Fe-ke*j,ct=Q*Fe-ke*ye;return Ne>0&&ct<0||Ne<0&&ct>0}function Bv(y,m,L,z){var Y=[m[0]-y[0],m[1]-y[1]],j=[z[0]-L[0],z[1]-L[1]];return Zd(j,Y)===0?!1:!!(zf(y,m,L,z)&&zf(L,z,y,m))}function lc(y,m,L){for(var z=0,Y=L;z<Y.length;z+=1)for(var j=Y[z],Q=0;Q<j.length-1;++Q)if(Bv(y,m,j[Q],j[Q+1]))return!0;return!1}function Ph(y,m){for(var L=0;L<y.length;++L)if(!fv(y[L],m))return!1;for(var z=0;z<y.length-1;++z)if(lc(y[z],y[z+1],m))return!1;return!0}function Gu(y,m){for(var L=0;L<m.length;L++)if(Ph(y,m[L]))return!0;return!1}function kc(y,m,L){for(var z=[],Y=0;Y<y.length;Y++){for(var j=[],Q=0;Q<y[Y].length;Q++){var ye=Ov(y[Y][Q],L);sv(m,ye),j.push(ye)}z.push(j)}return z}function Of(y,m,L){for(var z=[],Y=0;Y<y.length;Y++){var j=kc(y[Y],m,L);z.push(j)}return z}function Nv(y,m,L,z){if(y[0]<L[0]||y[0]>L[2]){var Y=z*.5,j=y[0]-L[0]>Y?-z:L[0]-y[0]>Y?z:0;j===0&&(j=y[0]-L[2]>Y?-z:L[2]-y[0]>Y?z:0),y[0]+=j}sv(m,y)}function Uv(y){y[0]=y[1]=1/0,y[2]=y[3]=-1/0}function Vv(y,m,L,z){for(var Y=Math.pow(2,z.z)*Yl,j=[z.x*Yl,z.y*Yl],Q=[],ye=0,ke=y;ye<ke.length;ye+=1)for(var Fe=ke[ye],Ne=0,ct=Fe;Ne<ct.length;Ne+=1){var St=ct[Ne],bt=[St.x+j[0],St.y+j[1]];Nv(bt,m,L,Y),Q.push(bt)}return Q}function cv(y,m,L,z){for(var Y=Math.pow(2,z.z)*Yl,j=[z.x*Yl,z.y*Yl],Q=[],ye=0,ke=y;ye<ke.length;ye+=1){for(var Fe=ke[ye],Ne=[],ct=0,St=Fe;ct<St.length;ct+=1){var bt=St[ct],Xt=[bt.x+j[0],bt.y+j[1]];sv(m,Xt),Ne.push(Xt)}Q.push(Ne)}if(m[2]-m[0]<=Y/2){Uv(m);for(var dr=0,Ir=Q;dr<Ir.length;dr+=1)for(var Ar=Ir[dr],en=0,Ur=Ar;en<Ur.length;en+=1){var Qr=Ur[en];Nv(Qr,m,L,Y)}}return Q}function hv(y,m){var L=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],Y=y.canonicalID();if(m.type==="Polygon"){var j=kc(m.coordinates,z,Y),Q=Vv(y.geometry(),L,z,Y);if(!Mu(L,z))return!1;for(var ye=0,ke=Q;ye<ke.length;ye+=1){var Fe=ke[ye];if(!fv(Fe,j))return!1}}if(m.type==="MultiPolygon"){var Ne=Of(m.coordinates,z,Y),ct=Vv(y.geometry(),L,z,Y);if(!Mu(L,z))return!1;for(var St=0,bt=ct;St<bt.length;St+=1){var Xt=bt[St];if(!wd(Xt,Ne))return!1}}return!0}function Hv(y,m){var L=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],Y=y.canonicalID();if(m.type==="Polygon"){var j=kc(m.coordinates,z,Y),Q=cv(y.geometry(),L,z,Y);if(!Mu(L,z))return!1;for(var ye=0,ke=Q;ye<ke.length;ye+=1){var Fe=ke[ye];if(!Ph(Fe,j))return!1}}if(m.type==="MultiPolygon"){var Ne=Of(m.coordinates,z,Y),ct=cv(y.geometry(),L,z,Y);if(!Mu(L,z))return!1;for(var St=0,bt=ct;St<bt.length;St+=1){var Xt=bt[St];if(!Gu(Xt,Ne))return!1}}return!0}var iu=function(m,L){this.type=Ca,this.geojson=m,this.geometries=L};iu.parse=function(m,L){if(m.length!==2)return L.error("'within' expression requires exactly one argument, but found "+(m.length-1)+" instead.");if(vf(m[1])){var z=m[1];if(z.type==="FeatureCollection")for(var Y=0;Y<z.features.length;++Y){var j=z.features[Y].geometry.type;if(j==="Polygon"||j==="MultiPolygon")return new iu(z,z.features[Y].geometry)}else if(z.type==="Feature"){var Q=z.geometry.type;if(Q==="Polygon"||Q==="MultiPolygon")return new iu(z,z.geometry)}else if(z.type==="Polygon"||z.type==="MultiPolygon")return new iu(z,z)}return L.error("'within' expression requires valid geojson object that contains polygon geometry type.")},iu.prototype.evaluate=function(m){if(m.geometry()!=null&&m.canonicalID()!=null){if(m.geometryType()==="Point")return hv(m,this.geometries);if(m.geometryType()==="LineString")return Hv(m,this.geometries)}return!1},iu.prototype.eachChild=function(){},iu.prototype.outputDefined=function(){return!0},iu.prototype.serialize=function(){return["within",this.geojson]};function vv(y){if(y instanceof po){if(y.name==="get"&&y.args.length===1)return!1;if(y.name==="feature-state")return!1;if(y.name==="has"&&y.args.length===1)return!1;if(y.name==="properties"||y.name==="geometry-type"||y.name==="id")return!1;if(/^filter-/.test(y.name))return!1}if(y instanceof iu)return!1;var m=!0;return y.eachChild(function(L){m&&!vv(L)&&(m=!1)}),m}function ol(y){if(y instanceof po&&y.name==="feature-state")return!1;var m=!0;return y.eachChild(function(L){m&&!ol(L)&&(m=!1)}),m}function au(y,m){if(y instanceof po&&m.indexOf(y.name)>=0)return!1;var L=!0;return y.eachChild(function(z){L&&!au(z,m)&&(L=!1)}),L}var Bf=function(m,L){this.type=L.type,this.name=m,this.boundExpression=L};Bf.parse=function(m,L){if(m.length!==2||typeof m[1]!="string")return L.error("'var' expression requires exactly one string literal argument.");var z=m[1];return L.scope.has(z)?new Bf(z,L.scope.get(z)):L.error('Unknown variable "'+z+'". Make sure "'+z+'" has been bound in an enclosing "let" expression before using it.',1)},Bf.prototype.evaluate=function(m){return this.boundExpression.evaluate(m)},Bf.prototype.eachChild=function(){},Bf.prototype.outputDefined=function(){return!1},Bf.prototype.serialize=function(){return["var",this.name]};var Vs=function(m,L,z,Y,j){L===void 0&&(L=[]),Y===void 0&&(Y=new Rl),j===void 0&&(j=[]),this.registry=m,this.path=L,this.key=L.map(function(Q){return"["+Q+"]"}).join(""),this.scope=Y,this.errors=j,this.expectedType=z};Vs.prototype.parse=function(m,L,z,Y,j){return j===void 0&&(j={}),L?this.concat(L,z,Y)._parse(m,j):this._parse(m,j)},Vs.prototype._parse=function(m,L){(m===null||typeof m=="string"||typeof m=="boolean"||typeof m=="number")&&(m=["literal",m]);function z(Ne,ct,St){return St==="assert"?new qs(ct,[Ne]):St==="coerce"?new Au(ct,[Ne]):Ne}if(Array.isArray(m)){if(m.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var Y=m[0];if(typeof Y!="string")return this.error("Expression name must be a string, but found "+typeof Y+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var j=this.registry[Y];if(j){var Q=j.parse(m,this);if(!Q)return null;if(this.expectedType){var ye=this.expectedType,ke=Q.type;if((ye.kind==="string"||ye.kind==="number"||ye.kind==="boolean"||ye.kind==="object"||ye.kind==="array")&&ke.kind==="value")Q=z(Q,ye,L.typeAnnotation||"assert");else if((ye.kind==="color"||ye.kind==="formatted"||ye.kind==="resolvedImage")&&(ke.kind==="value"||ke.kind==="string"))Q=z(Q,ye,L.typeAnnotation||"coerce");else if(this.checkSubtype(ye,ke))return null}if(!(Q instanceof yo)&&Q.type.kind!=="resolvedImage"&&Kc(Q)){var Fe=new Gl;try{Q=new yo(Q.type,Q.evaluate(Fe))}catch(Ne){return this.error(Ne.message),null}}return Q}return this.error('Unknown expression "'+Y+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof m=="undefined"?this.error("'undefined' value invalid. Use null instead."):typeof m=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof m+" instead.")},Vs.prototype.concat=function(m,L,z){var Y=typeof m=="number"?this.path.concat(m):this.path,j=z?this.scope.concat(z):this.scope;return new Vs(this.registry,Y,L||null,j,this.errors)},Vs.prototype.error=function(m){for(var L=[],z=arguments.length-1;z-- >0;)L[z]=arguments[z+1];var Y=""+this.key+L.map(function(j){return"["+j+"]"}).join("");this.errors.push(new ts(Y,m))},Vs.prototype.checkSubtype=function(m,L){var z=Tu(m,L);return z&&this.error(z),z};function Kc(y){if(y instanceof Bf)return Kc(y.boundExpression);if(y instanceof po&&y.name==="error")return!1;if(y instanceof pf)return!1;if(y instanceof iu)return!1;var m=y instanceof Au||y instanceof qs,L=!0;return y.eachChild(function(z){m?L=L&&Kc(z):L=L&&z instanceof yo}),L?vv(y)&&au(y,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function Nf(y,m){for(var L=y.length-1,z=0,Y=L,j=0,Q,ye;z<=Y;)if(j=Math.floor((z+Y)/2),Q=y[j],ye=y[j+1],Q<=m){if(j===L||m<ye)return j;z=j+1}else if(Q>m)Y=j-1;else throw new Po("Input is not a number.");return 0}var Dl=function(m,L,z){this.type=m,this.input=L,this.labels=[],this.outputs=[];for(var Y=0,j=z;Y<j.length;Y+=1){var Q=j[Y],ye=Q[0],ke=Q[1];this.labels.push(ye),this.outputs.push(ke)}};Dl.parse=function(m,L){if(m.length-1<4)return L.error("Expected at least 4 arguments, but found only "+(m.length-1)+".");if((m.length-1)%2!==0)return L.error("Expected an even number of arguments.");var z=L.parse(m[1],1,oi);if(!z)return null;var Y=[],j=null;L.expectedType&&L.expectedType.kind!=="value"&&(j=L.expectedType);for(var Q=1;Q<m.length;Q+=2){var ye=Q===1?-1/0:m[Q],ke=m[Q+1],Fe=Q,Ne=Q+1;if(typeof ye!="number")return L.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Fe);if(Y.length&&Y[Y.length-1][0]>=ye)return L.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Fe);var ct=L.parse(ke,Ne,j);if(!ct)return null;j=j||ct.type,Y.push([ye,ct])}return new Dl(j,z,Y)},Dl.prototype.evaluate=function(m){var L=this.labels,z=this.outputs;if(L.length===1)return z[0].evaluate(m);var Y=this.input.evaluate(m);if(Y<=L[0])return z[0].evaluate(m);var j=L.length;if(Y>=L[j-1])return z[j-1].evaluate(m);var Q=Nf(L,Y);return z[Q].evaluate(m)},Dl.prototype.eachChild=function(m){m(this.input);for(var L=0,z=this.outputs;L<z.length;L+=1){var Y=z[L];m(Y)}},Dl.prototype.outputDefined=function(){return this.outputs.every(function(m){return m.outputDefined()})},Dl.prototype.serialize=function(){for(var m=["step",this.input.serialize()],L=0;L<this.labels.length;L++)L>0&&m.push(this.labels[L]),m.push(this.outputs[L].serialize());return m};function zs(y,m,L){return y*(1-L)+m*L}function jd(y,m,L){return new fo(zs(y.r,m.r,L),zs(y.g,m.g,L),zs(y.b,m.b,L),zs(y.a,m.a,L))}function Kd(y,m,L){return y.map(function(z,Y){return zs(z,m[Y],L)})}var Su=Object.freeze({__proto__:null,number:zs,color:jd,array:Kd}),gf=.95047,ou=1,Jd=1.08883,Jc=4/29,Qc=6/29,Eu=3*Qc*Qc,Gv=Qc*Qc*Qc,dv=Math.PI/180,pv=180/Math.PI;function Yv(y){return y>Gv?Math.pow(y,1/3):y/Eu+Jc}function $c(y){return y>Qc?y*y*y:Eu*(y-Jc)}function Uf(y){return 255*(y<=.0031308?12.92*y:1.055*Math.pow(y,1/2.4)-.055)}function Cc(y){return y/=255,y<=.04045?y/12.92:Math.pow((y+.055)/1.055,2.4)}function Rh(y){var m=Cc(y.r),L=Cc(y.g),z=Cc(y.b),Y=Yv((.4124564*m+.3575761*L+.1804375*z)/gf),j=Yv((.2126729*m+.7151522*L+.072175*z)/ou),Q=Yv((.0193339*m+.119192*L+.9503041*z)/Jd);return{l:116*j-16,a:500*(Y-j),b:200*(j-Q),alpha:y.a}}function Td(y){var m=(y.l+16)/116,L=isNaN(y.a)?m:m+y.a/500,z=isNaN(y.b)?m:m-y.b/200;return m=ou*$c(m),L=gf*$c(L),z=Jd*$c(z),new fo(Uf(3.2404542*L-1.5371385*m-.4985314*z),Uf(-.969266*L+1.8760108*m+.041556*z),Uf(.0556434*L-.2040259*m+1.0572252*z),y.alpha)}function No(y,m,L){return{l:zs(y.l,m.l,L),a:zs(y.a,m.a,L),b:zs(y.b,m.b,L),alpha:zs(y.alpha,m.alpha,L)}}function eh(y){var m=Rh(y),L=m.l,z=m.a,Y=m.b,j=Math.atan2(Y,z)*pv;return{h:j<0?j+360:j,c:Math.sqrt(z*z+Y*Y),l:L,alpha:y.a}}function Lc(y){var m=y.h*dv,L=y.c,z=y.l;return Td({l:z,a:Math.cos(m)*L,b:Math.sin(m)*L,alpha:y.alpha})}function Pc(y,m,L){var z=m-y;return y+L*(z>180||z<-180?z-360*Math.round(z/360):z)}function th(y,m,L){return{h:Pc(y.h,m.h,L),c:zs(y.c,m.c,L),l:zs(y.l,m.l,L),alpha:zs(y.alpha,m.alpha,L)}}var yf={forward:Rh,reverse:Td,interpolate:No},uc={forward:eh,reverse:Lc,interpolate:th},Wv=Object.freeze({__proto__:null,lab:yf,hcl:uc}),Hs=function(m,L,z,Y,j){this.type=m,this.operator=L,this.interpolation=z,this.input=Y,this.labels=[],this.outputs=[];for(var Q=0,ye=j;Q<ye.length;Q+=1){var ke=ye[Q],Fe=ke[0],Ne=ke[1];this.labels.push(Fe),this.outputs.push(Ne)}};Hs.interpolationFactor=function(m,L,z,Y){var j=0;if(m.name==="exponential")j=gv(L,m.base,z,Y);else if(m.name==="linear")j=gv(L,1,z,Y);else if(m.name==="cubic-bezier"){var Q=m.controlPoints,ye=new s(Q[0],Q[1],Q[2],Q[3]);j=ye.solve(gv(L,1,z,Y))}return j},Hs.parse=function(m,L){var z=m[0],Y=m[1],j=m[2],Q=m.slice(3);if(!Array.isArray(Y)||Y.length===0)return L.error("Expected an interpolation type expression.",1);if(Y[0]==="linear")Y={name:"linear"};else if(Y[0]==="exponential"){var ye=Y[1];if(typeof ye!="number")return L.error("Exponential interpolation requires a numeric base.",1,1);Y={name:"exponential",base:ye}}else if(Y[0]==="cubic-bezier"){var ke=Y.slice(1);if(ke.length!==4||ke.some(function(Ar){return typeof Ar!="number"||Ar<0||Ar>1}))return L.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);Y={name:"cubic-bezier",controlPoints:ke}}else return L.error("Unknown interpolation type "+String(Y[0]),1,0);if(m.length-1<4)return L.error("Expected at least 4 arguments, but found only "+(m.length-1)+".");if((m.length-1)%2!==0)return L.error("Expected an even number of arguments.");if(j=L.parse(j,2,oi),!j)return null;var Fe=[],Ne=null;z==="interpolate-hcl"||z==="interpolate-lab"?Ne=Fs:L.expectedType&&L.expectedType.kind!=="value"&&(Ne=L.expectedType);for(var ct=0;ct<Q.length;ct+=2){var St=Q[ct],bt=Q[ct+1],Xt=ct+3,dr=ct+4;if(typeof St!="number")return L.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Xt);if(Fe.length&&Fe[Fe.length-1][0]>=St)return L.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Xt);var Ir=L.parse(bt,dr,Ne);if(!Ir)return null;Ne=Ne||Ir.type,Fe.push([St,Ir])}return Ne.kind!=="number"&&Ne.kind!=="color"&&!(Ne.kind==="array"&&Ne.itemType.kind==="number"&&typeof Ne.N=="number")?L.error("Type "+Lo(Ne)+" is not interpolatable."):new Hs(Ne,z,Y,j,Fe)},Hs.prototype.evaluate=function(m){var L=this.labels,z=this.outputs;if(L.length===1)return z[0].evaluate(m);var Y=this.input.evaluate(m);if(Y<=L[0])return z[0].evaluate(m);var j=L.length;if(Y>=L[j-1])return z[j-1].evaluate(m);var Q=Nf(L,Y),ye=L[Q],ke=L[Q+1],Fe=Hs.interpolationFactor(this.interpolation,Y,ye,ke),Ne=z[Q].evaluate(m),ct=z[Q+1].evaluate(m);return this.operator==="interpolate"?Su[this.type.kind.toLowerCase()](Ne,ct,Fe):this.operator==="interpolate-hcl"?uc.reverse(uc.interpolate(uc.forward(Ne),uc.forward(ct),Fe)):yf.reverse(yf.interpolate(yf.forward(Ne),yf.forward(ct),Fe))},Hs.prototype.eachChild=function(m){m(this.input);for(var L=0,z=this.outputs;L<z.length;L+=1){var Y=z[L];m(Y)}},Hs.prototype.outputDefined=function(){return this.outputs.every(function(m){return m.outputDefined()})},Hs.prototype.serialize=function(){var m;this.interpolation.name==="linear"?m=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?m=["linear"]:m=["exponential",this.interpolation.base]:m=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var L=[this.operator,m,this.input.serialize()],z=0;z<this.labels.length;z++)L.push(this.labels[z],this.outputs[z].serialize());return L};function gv(y,m,L,z){var Y=z-L,j=y-L;return Y===0?0:m===1?j/Y:(Math.pow(m,j)-1)/(Math.pow(m,Y)-1)}var Vf=function(m,L){this.type=m,this.args=L};Vf.parse=function(m,L){if(m.length<2)return L.error("Expectected at least one argument.");var z=null,Y=L.expectedType;Y&&Y.kind!=="value"&&(z=Y);for(var j=[],Q=0,ye=m.slice(1);Q<ye.length;Q+=1){var ke=ye[Q],Fe=L.parse(ke,1+j.length,z,void 0,{typeAnnotation:"omit"});if(!Fe)return null;z=z||Fe.type,j.push(Fe)}var Ne=Y&&j.some(function(ct){return Tu(Y,ct.type)});return Ne?new Vf(Ma,j):new Vf(z,j)},Vf.prototype.evaluate=function(m){for(var L=null,z=0,Y,j=0,Q=this.args;j<Q.length;j+=1){var ye=Q[j];if(z++,L=ye.evaluate(m),L&&L instanceof _s&&!L.available&&(Y||(Y=L.name),L=null,z===this.args.length&&(L=Y)),L!==null)break}return L},Vf.prototype.eachChild=function(m){this.args.forEach(m)},Vf.prototype.outputDefined=function(){return this.args.every(function(m){return m.outputDefined()})},Vf.prototype.serialize=function(){var m=["coalesce"];return this.eachChild(function(L){m.push(L.serialize())}),m};var Hf=function(m,L){this.type=L.type,this.bindings=[].concat(m),this.result=L};Hf.prototype.evaluate=function(m){return this.result.evaluate(m)},Hf.prototype.eachChild=function(m){for(var L=0,z=this.bindings;L<z.length;L+=1){var Y=z[L];m(Y[1])}m(this.result)},Hf.parse=function(m,L){if(m.length<4)return L.error("Expected at least 3 arguments, but found "+(m.length-1)+" instead.");for(var z=[],Y=1;Y<m.length-1;Y+=2){var j=m[Y];if(typeof j!="string")return L.error("Expected string, but found "+typeof j+" instead.",Y);if(/[^a-zA-Z0-9_]/.test(j))return L.error("Variable names must contain only alphanumeric characters or '_'.",Y);var Q=L.parse(m[Y+1],Y+1);if(!Q)return null;z.push([j,Q])}var ye=L.parse(m[m.length-1],m.length-1,L.expectedType,z);return ye?new Hf(z,ye):null},Hf.prototype.outputDefined=function(){return this.result.outputDefined()},Hf.prototype.serialize=function(){for(var m=["let"],L=0,z=this.bindings;L<z.length;L+=1){var Y=z[L],j=Y[0],Q=Y[1];m.push(j,Q.serialize())}return m.push(this.result.serialize()),m};var Gf=function(m,L,z){this.type=m,this.index=L,this.input=z};Gf.parse=function(m,L){if(m.length!==3)return L.error("Expected 2 arguments, but found "+(m.length-1)+" instead.");var z=L.parse(m[1],1,oi),Y=L.parse(m[2],2,tl(L.expectedType||Ma));if(!z||!Y)return null;var j=Y.type;return new Gf(j.itemType,z,Y)},Gf.prototype.evaluate=function(m){var L=this.index.evaluate(m),z=this.input.evaluate(m);if(L<0)throw new Po("Array index out of bounds: "+L+" < 0.");if(L>=z.length)throw new Po("Array index out of bounds: "+L+" > "+(z.length-1)+".");if(L!==Math.floor(L))throw new Po("Array index must be an integer, but found "+L+" instead.");return z[L]},Gf.prototype.eachChild=function(m){m(this.index),m(this.input)},Gf.prototype.outputDefined=function(){return!1},Gf.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var bs=function(m,L){this.type=Ca,this.needle=m,this.haystack=L};bs.parse=function(m,L){if(m.length!==3)return L.error("Expected 2 arguments, but found "+(m.length-1)+" instead.");var z=L.parse(m[1],1,Ma),Y=L.parse(m[2],2,Ma);return!z||!Y?null:Sh(z.type,[Ca,Aa,oi,wu,Ma])?new bs(z,Y):L.error("Expected first argument to be of type boolean, string, number or null, but found "+Lo(z.type)+" instead")},bs.prototype.evaluate=function(m){var L=this.needle.evaluate(m),z=this.haystack.evaluate(m);if(!z)return!1;if(!Hu(L,["boolean","string","number","null"]))throw new Po("Expected first argument to be of type boolean, string, number or null, but found "+Lo(Mo(L))+" instead.");if(!Hu(z,["string","array"]))throw new Po("Expected second argument to be of type array or string, but found "+Lo(Mo(z))+" instead.");return z.indexOf(L)>=0},bs.prototype.eachChild=function(m){m(this.needle),m(this.haystack)},bs.prototype.outputDefined=function(){return!0},bs.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var yl=function(m,L,z){this.type=oi,this.needle=m,this.haystack=L,this.fromIndex=z};yl.parse=function(m,L){if(m.length<=2||m.length>=5)return L.error("Expected 3 or 4 arguments, but found "+(m.length-1)+" instead.");var z=L.parse(m[1],1,Ma),Y=L.parse(m[2],2,Ma);if(!z||!Y)return null;if(!Sh(z.type,[Ca,Aa,oi,wu,Ma]))return L.error("Expected first argument to be of type boolean, string, number or null, but found "+Lo(z.type)+" instead");if(m.length===4){var j=L.parse(m[3],3,oi);return j?new yl(z,Y,j):null}else return new yl(z,Y)},yl.prototype.evaluate=function(m){var L=this.needle.evaluate(m),z=this.haystack.evaluate(m);if(!Hu(L,["boolean","string","number","null"]))throw new Po("Expected first argument to be of type boolean, string, number or null, but found "+Lo(Mo(L))+" instead.");if(!Hu(z,["string","array"]))throw new Po("Expected second argument to be of type array or string, but found "+Lo(Mo(z))+" instead.");if(this.fromIndex){var Y=this.fromIndex.evaluate(m);return z.indexOf(L,Y)}return z.indexOf(L)},yl.prototype.eachChild=function(m){m(this.needle),m(this.haystack),this.fromIndex&&m(this.fromIndex)},yl.prototype.outputDefined=function(){return!1},yl.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var m=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),m]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Yu=function(m,L,z,Y,j,Q){this.inputType=m,this.type=L,this.input=z,this.cases=Y,this.outputs=j,this.otherwise=Q};Yu.parse=function(m,L){if(m.length<5)return L.error("Expected at least 4 arguments, but found only "+(m.length-1)+".");if(m.length%2!==1)return L.error("Expected an even number of arguments.");var z,Y;L.expectedType&&L.expectedType.kind!=="value"&&(Y=L.expectedType);for(var j={},Q=[],ye=2;ye<m.length-1;ye+=2){var ke=m[ye],Fe=m[ye+1];Array.isArray(ke)||(ke=[ke]);var Ne=L.concat(ye);if(ke.length===0)return Ne.error("Expected at least one branch label.");for(var ct=0,St=ke;ct<St.length;ct+=1){var bt=St[ct];if(typeof bt!="number"&&typeof bt!="string")return Ne.error("Branch labels must be numbers or strings.");if(typeof bt=="number"&&Math.abs(bt)>Number.MAX_SAFE_INTEGER)return Ne.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof bt=="number"&&Math.floor(bt)!==bt)return Ne.error("Numeric branch labels must be integer values.");if(!z)z=Mo(bt);else if(Ne.checkSubtype(z,Mo(bt)))return null;if(typeof j[String(bt)]!="undefined")return Ne.error("Branch labels must be unique.");j[String(bt)]=Q.length}var Xt=L.parse(Fe,ye,Y);if(!Xt)return null;Y=Y||Xt.type,Q.push(Xt)}var dr=L.parse(m[1],1,Ma);if(!dr)return null;var Ir=L.parse(m[m.length-1],m.length-1,Y);return!Ir||dr.type.kind!=="value"&&L.concat(1).checkSubtype(z,dr.type)?null:new Yu(z,Y,dr,j,Q,Ir)},Yu.prototype.evaluate=function(m){var L=this.input.evaluate(m),z=Mo(L)===this.inputType&&this.outputs[this.cases[L]]||this.otherwise;return z.evaluate(m)},Yu.prototype.eachChild=function(m){m(this.input),this.outputs.forEach(m),m(this.otherwise)},Yu.prototype.outputDefined=function(){return this.outputs.every(function(m){return m.outputDefined()})&&this.otherwise.outputDefined()},Yu.prototype.serialize=function(){for(var m=this,L=["match",this.input.serialize()],z=Object.keys(this.cases).sort(),Y=[],j={},Q=0,ye=z;Q<ye.length;Q+=1){var ke=ye[Q],Fe=j[this.cases[ke]];Fe===void 0?(j[this.cases[ke]]=Y.length,Y.push([this.cases[ke],[ke]])):Y[Fe][1].push(ke)}for(var Ne=function(dr){return m.inputType.kind==="number"?Number(dr):dr},ct=0,St=Y;ct<St.length;ct+=1){var bt=St[ct],Fe=bt[0],Xt=bt[1];Xt.length===1?L.push(Ne(Xt[0])):L.push(Xt.map(Ne)),L.push(this.outputs[outputIndex$1].serialize())}return L.push(this.otherwise.serialize()),L};var Yf=function(m,L,z){this.type=m,this.branches=L,this.otherwise=z};Yf.parse=function(m,L){if(m.length<4)return L.error("Expected at least 3 arguments, but found only "+(m.length-1)+".");if(m.length%2!==0)return L.error("Expected an odd number of arguments.");var z;L.expectedType&&L.expectedType.kind!=="value"&&(z=L.expectedType);for(var Y=[],j=1;j<m.length-1;j+=2){var Q=L.parse(m[j],j,Ca);if(!Q)return null;var ye=L.parse(m[j+1],j+1,z);if(!ye)return null;Y.push([Q,ye]),z=z||ye.type}var ke=L.parse(m[m.length-1],m.length-1,z);return ke?new Yf(z,Y,ke):null},Yf.prototype.evaluate=function(m){for(var L=0,z=this.branches;L<z.length;L+=1){var Y=z[L],j=Y[0],Q=Y[1];if(j.evaluate(m))return Q.evaluate(m)}return this.otherwise.evaluate(m)},Yf.prototype.eachChild=function(m){for(var L=0,z=this.branches;L<z.length;L+=1){var Y=z[L],j=Y[0],Q=Y[1];m(j),m(Q)}m(this.otherwise)},Yf.prototype.outputDefined=function(){return this.branches.every(function(m){var L=m[0],z=m[1];return z.outputDefined()})&&this.otherwise.outputDefined()},Yf.prototype.serialize=function(){var m=["case"];return this.eachChild(function(L){m.push(L.serialize())}),m};var Wu=function(m,L,z,Y){this.type=m,this.input=L,this.beginIndex=z,this.endIndex=Y};Wu.parse=function(m,L){if(m.length<=2||m.length>=5)return L.error("Expected 3 or 4 arguments, but found "+(m.length-1)+" instead.");var z=L.parse(m[1],1,Ma),Y=L.parse(m[2],2,oi);if(!z||!Y)return null;if(!Sh(z.type,[tl(Ma),Aa,Ma]))return L.error("Expected first argument to be of type array or string, but found "+Lo(z.type)+" instead");if(m.length===4){var j=L.parse(m[3],3,oi);return j?new Wu(z.type,z,Y,j):null}else return new Wu(z.type,z,Y)},Wu.prototype.evaluate=function(m){var L=this.input.evaluate(m),z=this.beginIndex.evaluate(m);if(!Hu(L,["string","array"]))throw new Po("Expected first argument to be of type array or string, but found "+Lo(Mo(L))+" instead.");if(this.endIndex){var Y=this.endIndex.evaluate(m);return L.slice(z,Y)}return L.slice(z)},Wu.prototype.eachChild=function(m){m(this.input),m(this.beginIndex),this.endIndex&&m(this.endIndex)},Wu.prototype.outputDefined=function(){return!1},Wu.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var m=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),m]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function Dh(y,m){return y==="=="||y==="!="?m.kind==="boolean"||m.kind==="string"||m.kind==="number"||m.kind==="null"||m.kind==="value":m.kind==="string"||m.kind==="number"||m.kind==="value"}function Ue(y,m,L){return m===L}function st(y,m,L){return m!==L}function Gt(y,m,L){return m<L}function Rt(y,m,L){return m>L}function hr(y,m,L){return m<=L}function Lr(y,m,L){return m>=L}function zr(y,m,L,z){return z.compare(m,L)===0}function Zr(y,m,L,z){return!zr(y,m,L,z)}function an(y,m,L,z){return z.compare(m,L)<0}function Sn(y,m,L,z){return z.compare(m,L)>0}function Nr(y,m,L,z){return z.compare(m,L)<=0}function tn(y,m,L,z){return z.compare(m,L)>=0}function rn(y,m,L){var z=y!=="=="&&y!=="!=";return function(){function Y(j,Q,ye){this.type=Ca,this.lhs=j,this.rhs=Q,this.collator=ye,this.hasUntypedArgument=j.type.kind==="value"||Q.type.kind==="value"}return Y.parse=function(Q,ye){if(Q.length!==3&&Q.length!==4)return ye.error("Expected two or three arguments.");var ke=Q[0],Fe=ye.parse(Q[1],1,Ma);if(!Fe)return null;if(!Dh(ke,Fe.type))return ye.concat(1).error('"'+ke+`" comparisons are not supported for type '`+Lo(Fe.type)+"'.");var Ne=ye.parse(Q[2],2,Ma);if(!Ne)return null;if(!Dh(ke,Ne.type))return ye.concat(2).error('"'+ke+`" comparisons are not supported for type '`+Lo(Ne.type)+"'.");if(Fe.type.kind!==Ne.type.kind&&Fe.type.kind!=="value"&&Ne.type.kind!=="value")return ye.error("Cannot compare types '"+Lo(Fe.type)+"' and '"+Lo(Ne.type)+"'.");z&&(Fe.type.kind==="value"&&Ne.type.kind!=="value"?Fe=new qs(Ne.type,[Fe]):Fe.type.kind!=="value"&&Ne.type.kind==="value"&&(Ne=new qs(Fe.type,[Ne])));var ct=null;if(Q.length===4){if(Fe.type.kind!=="string"&&Ne.type.kind!=="string"&&Fe.type.kind!=="value"&&Ne.type.kind!=="value")return ye.error("Cannot use collator to compare non-string types.");if(ct=ye.parse(Q[3],3,jc),!ct)return null}return new Y(Fe,Ne,ct)},Y.prototype.evaluate=function(Q){var ye=this.lhs.evaluate(Q),ke=this.rhs.evaluate(Q);if(z&&this.hasUntypedArgument){var Fe=Mo(ye),Ne=Mo(ke);if(Fe.kind!==Ne.kind||!(Fe.kind==="string"||Fe.kind==="number"))throw new Po('Expected arguments for "'+y+'" to be (string, string) or (number, number), but found ('+Fe.kind+", "+Ne.kind+") instead.")}if(this.collator&&!z&&this.hasUntypedArgument){var ct=Mo(ye),St=Mo(ke);if(ct.kind!=="string"||St.kind!=="string")return m(Q,ye,ke)}return this.collator?L(Q,ye,ke,this.collator.evaluate(Q)):m(Q,ye,ke)},Y.prototype.eachChild=function(Q){Q(this.lhs),Q(this.rhs),this.collator&&Q(this.collator)},Y.prototype.outputDefined=function(){return!0},Y.prototype.serialize=function(){var Q=[y];return this.eachChild(function(ye){Q.push(ye.serialize())}),Q},Y}()}var An=rn("==",Ue,zr),Xn=rn("!=",st,Zr),Oi=rn("<",Gt,an),Fi=rn(">",Rt,Sn),Hi=rn("<=",hr,Nr),ji=rn(">=",Lr,tn),Un=function(m,L,z,Y,j){this.type=Aa,this.number=m,this.locale=L,this.currency=z,this.minFractionDigits=Y,this.maxFractionDigits=j};Un.parse=function(m,L){if(m.length!==3)return L.error("Expected two arguments.");var z=L.parse(m[1],1,oi);if(!z)return null;var Y=m[2];if(typeof Y!="object"||Array.isArray(Y))return L.error("NumberFormat options argument must be an object.");var j=null;if(Y.locale&&(j=L.parse(Y.locale,1,Aa),!j))return null;var Q=null;if(Y.currency&&(Q=L.parse(Y.currency,1,Aa),!Q))return null;var ye=null;if(Y["min-fraction-digits"]&&(ye=L.parse(Y["min-fraction-digits"],1,oi),!ye))return null;var ke=null;return Y["max-fraction-digits"]&&(ke=L.parse(Y["max-fraction-digits"],1,oi),!ke)?null:new Un(z,j,Q,ye,ke)},Un.prototype.evaluate=function(m){return new Intl.NumberFormat(this.locale?this.locale.evaluate(m):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(m):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(m):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(m):void 0}).format(this.number.evaluate(m))},Un.prototype.eachChild=function(m){m(this.number),this.locale&&m(this.locale),this.currency&&m(this.currency),this.minFractionDigits&&m(this.minFractionDigits),this.maxFractionDigits&&m(this.maxFractionDigits)},Un.prototype.outputDefined=function(){return!1},Un.prototype.serialize=function(){var m={};return this.locale&&(m.locale=this.locale.serialize()),this.currency&&(m.currency=this.currency.serialize()),this.minFractionDigits&&(m["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(m["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),m]};var ri=function(m){this.type=oi,this.input=m};ri.parse=function(m,L){if(m.length!==2)return L.error("Expected 1 argument, but found "+(m.length-1)+" instead.");var z=L.parse(m[1],1);return z?z.type.kind!=="array"&&z.type.kind!=="string"&&z.type.kind!=="value"?L.error("Expected argument of type string or array, but found "+Lo(z.type)+" instead."):new ri(z):null},ri.prototype.evaluate=function(m){var L=this.input.evaluate(m);if(typeof L=="string")return L.length;if(Array.isArray(L))return L.length;throw new Po("Expected value to be of type string or array, but found "+Lo(Mo(L))+" instead.")},ri.prototype.eachChild=function(m){m(this.input)},ri.prototype.outputDefined=function(){return!1},ri.prototype.serialize=function(){var m=["length"];return this.eachChild(function(L){m.push(L.serialize())}),m};var Ki={"==":An,"!=":Xn,">":Fi,"<":Oi,">=":ji,"<=":Hi,array:qs,at:Gf,boolean:qs,case:Yf,coalesce:Vf,collator:pf,format:Hl,image:df,in:bs,"index-of":yl,interpolate:Hs,"interpolate-hcl":Hs,"interpolate-lab":Hs,length:ri,let:Hf,literal:yo,match:Yu,number:qs,"number-format":Un,object:qs,slice:Wu,step:Dl,string:qs,"to-boolean":Au,"to-color":Au,"to-number":Au,"to-string":Au,var:Bf,within:iu};function ca(y,m){var L=m[0],z=m[1],Y=m[2],j=m[3];L=L.evaluate(y),z=z.evaluate(y),Y=Y.evaluate(y);var Q=j?j.evaluate(y):1,ye=kh(L,z,Y,Q);if(ye)throw new Po(ye);return new fo(L/255*Q,z/255*Q,Y/255*Q,Q)}function Ja(y,m){return y in m}function _o(y,m){var L=m[y];return typeof L=="undefined"?null:L}function go(y,m,L,z){for(;L<=z;){var Y=L+z>>1;if(m[Y]===y)return!0;m[Y]>y?z=Y-1:L=Y+1}return!1}function bo(y){return{type:y}}po.register(Ki,{error:[Ff,[Aa],function(y,m){var L=m[0];throw new Po(L.evaluate(y))}],typeof:[Aa,[Ma],function(y,m){var L=m[0];return Lo(Mo(L.evaluate(y)))}],"to-rgba":[tl(oi,4),[Fs],function(y,m){var L=m[0];return L.evaluate(y).toArray()}],rgb:[Fs,[oi,oi,oi],ca],rgba:[Fs,[oi,oi,oi,oi],ca],has:{type:Ca,overloads:[[[Aa],function(y,m){var L=m[0];return Ja(L.evaluate(y),y.properties())}],[[Aa,If],function(y,m){var L=m[0],z=m[1];return Ja(L.evaluate(y),z.evaluate(y))}]]},get:{type:Ma,overloads:[[[Aa],function(y,m){var L=m[0];return _o(L.evaluate(y),y.properties())}],[[Aa,If],function(y,m){var L=m[0],z=m[1];return _o(L.evaluate(y),z.evaluate(y))}]]},"feature-state":[Ma,[Aa],function(y,m){var L=m[0];return _o(L.evaluate(y),y.featureState||{})}],properties:[If,[],function(y){return y.properties()}],"geometry-type":[Aa,[],function(y){return y.geometryType()}],id:[Ma,[],function(y){return y.id()}],zoom:[oi,[],function(y){return y.globals.zoom}],"heatmap-density":[oi,[],function(y){return y.globals.heatmapDensity||0}],"line-progress":[oi,[],function(y){return y.globals.lineProgress||0}],accumulated:[Ma,[],function(y){return y.globals.accumulated===void 0?null:y.globals.accumulated}],"+":[oi,bo(oi),function(y,m){for(var L=0,z=0,Y=m;z<Y.length;z+=1){var j=Y[z];L+=j.evaluate(y)}return L}],"*":[oi,bo(oi),function(y,m){for(var L=1,z=0,Y=m;z<Y.length;z+=1){var j=Y[z];L*=j.evaluate(y)}return L}],"-":{type:oi,overloads:[[[oi,oi],function(y,m){var L=m[0],z=m[1];return L.evaluate(y)-z.evaluate(y)}],[[oi],function(y,m){var L=m[0];return-L.evaluate(y)}]]},"/":[oi,[oi,oi],function(y,m){var L=m[0],z=m[1];return L.evaluate(y)/z.evaluate(y)}],"%":[oi,[oi,oi],function(y,m){var L=m[0],z=m[1];return L.evaluate(y)%z.evaluate(y)}],ln2:[oi,[],function(){return Math.LN2}],pi:[oi,[],function(){return Math.PI}],e:[oi,[],function(){return Math.E}],"^":[oi,[oi,oi],function(y,m){var L=m[0],z=m[1];return Math.pow(L.evaluate(y),z.evaluate(y))}],sqrt:[oi,[oi],function(y,m){var L=m[0];return Math.sqrt(L.evaluate(y))}],log10:[oi,[oi],function(y,m){var L=m[0];return Math.log(L.evaluate(y))/Math.LN10}],ln:[oi,[oi],function(y,m){var L=m[0];return Math.log(L.evaluate(y))}],log2:[oi,[oi],function(y,m){var L=m[0];return Math.log(L.evaluate(y))/Math.LN2}],sin:[oi,[oi],function(y,m){var L=m[0];return Math.sin(L.evaluate(y))}],cos:[oi,[oi],function(y,m){var L=m[0];return Math.cos(L.evaluate(y))}],tan:[oi,[oi],function(y,m){var L=m[0];return Math.tan(L.evaluate(y))}],asin:[oi,[oi],function(y,m){var L=m[0];return Math.asin(L.evaluate(y))}],acos:[oi,[oi],function(y,m){var L=m[0];return Math.acos(L.evaluate(y))}],atan:[oi,[oi],function(y,m){var L=m[0];return Math.atan(L.evaluate(y))}],min:[oi,bo(oi),function(y,m){return Math.min.apply(Math,m.map(function(L){return L.evaluate(y)}))}],max:[oi,bo(oi),function(y,m){return Math.max.apply(Math,m.map(function(L){return L.evaluate(y)}))}],abs:[oi,[oi],function(y,m){var L=m[0];return Math.abs(L.evaluate(y))}],round:[oi,[oi],function(y,m){var L=m[0],z=L.evaluate(y);return z<0?-Math.round(-z):Math.round(z)}],floor:[oi,[oi],function(y,m){var L=m[0];return Math.floor(L.evaluate(y))}],ceil:[oi,[oi],function(y,m){var L=m[0];return Math.ceil(L.evaluate(y))}],"filter-==":[Ca,[Aa,Ma],function(y,m){var L=m[0],z=m[1];return y.properties()[L.value]===z.value}],"filter-id-==":[Ca,[Ma],function(y,m){var L=m[0];return y.id()===L.value}],"filter-type-==":[Ca,[Aa],function(y,m){var L=m[0];return y.geometryType()===L.value}],"filter-<":[Ca,[Aa,Ma],function(y,m){var L=m[0],z=m[1],Y=y.properties()[L.value],j=z.value;return typeof Y==typeof j&&Y<j}],"filter-id-<":[Ca,[Ma],function(y,m){var L=m[0],z=y.id(),Y=L.value;return typeof z==typeof Y&&z<Y}],"filter->":[Ca,[Aa,Ma],function(y,m){var L=m[0],z=m[1],Y=y.properties()[L.value],j=z.value;return typeof Y==typeof j&&Y>j}],"filter-id->":[Ca,[Ma],function(y,m){var L=m[0],z=y.id(),Y=L.value;return typeof z==typeof Y&&z>Y}],"filter-<=":[Ca,[Aa,Ma],function(y,m){var L=m[0],z=m[1],Y=y.properties()[L.value],j=z.value;return typeof Y==typeof j&&Y<=j}],"filter-id-<=":[Ca,[Ma],function(y,m){var L=m[0],z=y.id(),Y=L.value;return typeof z==typeof Y&&z<=Y}],"filter->=":[Ca,[Aa,Ma],function(y,m){var L=m[0],z=m[1],Y=y.properties()[L.value],j=z.value;return typeof Y==typeof j&&Y>=j}],"filter-id->=":[Ca,[Ma],function(y,m){var L=m[0],z=y.id(),Y=L.value;return typeof z==typeof Y&&z>=Y}],"filter-has":[Ca,[Ma],function(y,m){var L=m[0];return L.value in y.properties()}],"filter-has-id":[Ca,[],function(y){return y.id()!==null&&y.id()!==void 0}],"filter-type-in":[Ca,[tl(Aa)],function(y,m){var L=m[0];return L.value.indexOf(y.geometryType())>=0}],"filter-id-in":[Ca,[tl(Ma)],function(y,m){var L=m[0];return L.value.indexOf(y.id())>=0}],"filter-in-small":[Ca,[Aa,tl(Ma)],function(y,m){var L=m[0],z=m[1];return z.value.indexOf(y.properties()[L.value])>=0}],"filter-in-large":[Ca,[Aa,tl(Ma)],function(y,m){var L=m[0],z=m[1];return go(y.properties()[L.value],z.value,0,z.value.length-1)}],all:{type:Ca,overloads:[[[Ca,Ca],function(y,m){var L=m[0],z=m[1];return L.evaluate(y)&&z.evaluate(y)}],[bo(Ca),function(y,m){for(var L=0,z=m;L<z.length;L+=1){var Y=z[L];if(!Y.evaluate(y))return!1}return!0}]]},any:{type:Ca,overloads:[[[Ca,Ca],function(y,m){var L=m[0],z=m[1];return L.evaluate(y)||z.evaluate(y)}],[bo(Ca),function(y,m){for(var L=0,z=m;L<z.length;L+=1){var Y=z[L];if(Y.evaluate(y))return!0}return!1}]]},"!":[Ca,[Ca],function(y,m){var L=m[0];return!L.evaluate(y)}],"is-supported-script":[Ca,[Aa],function(y,m){var L=m[0],z=y.globals&&y.globals.isSupportedScript;return z?z(L.evaluate(y)):!0}],upcase:[Aa,[Aa],function(y,m){var L=m[0];return L.evaluate(y).toUpperCase()}],downcase:[Aa,[Aa],function(y,m){var L=m[0];return L.evaluate(y).toLowerCase()}],concat:[Aa,bo(Ma),function(y,m){return m.map(function(L){return ps(L.evaluate(y))}).join("")}],"resolved-locale":[Aa,[jc],function(y,m){var L=m[0];return L.evaluate(y).resolvedLocale()}]});function Na(y){return{result:"success",value:y}}function ws(y){return{result:"error",value:y}}function Ko(y){return y["property-type"]==="data-driven"||y["property-type"]==="cross-faded-data-driven"}function Uo(y){return!!y.expression&&y.expression.parameters.indexOf("zoom")>-1}function hi(y){return!!y.expression&&y.expression.interpolated}function ea(y){return y instanceof Number?"number":y instanceof String?"string":y instanceof Boolean?"boolean":Array.isArray(y)?"array":y===null?"null":typeof y}function Ts(y){return typeof y=="object"&&y!==null&&!Array.isArray(y)}function Ml(y){return y}function Wl(y,m){var L=m.type==="color",z=y.stops&&typeof y.stops[0][0]=="object",Y=z||y.property!==void 0,j=z||!Y,Q=y.type||(hi(m)?"exponential":"interval");if(L&&(y=Pl({},y),y.stops&&(y.stops=y.stops.map(function(ii){return[ii[0],fo.parse(ii[1])]})),y.default?y.default=fo.parse(y.default):y.default=fo.parse(m.default)),y.colorSpace&&y.colorSpace!=="rgb"&&!Wv[y.colorSpace])throw new Error("Unknown color space: "+y.colorSpace);var ye,ke,Fe;if(Q==="exponential")ye=lu;else if(Q==="interval")ye=Wf;else if(Q==="categorical"){ye=Xu,ke=Object.create(null);for(var Ne=0,ct=y.stops;Ne<ct.length;Ne+=1){var St=ct[Ne];ke[St[0]]=St[1]}Fe=typeof y.stops[0][0]}else if(Q==="identity")ye=Rc;else throw new Error('Unknown function type "'+Q+'"');if(z){for(var bt={},Xt=[],dr=0;dr<y.stops.length;dr++){var Ir=y.stops[dr],Ar=Ir[0].zoom;bt[Ar]===void 0&&(bt[Ar]={zoom:Ar,type:y.type,property:y.property,default:y.default,stops:[]},Xt.push(Ar)),bt[Ar].stops.push([Ir[0].value,Ir[1]])}for(var en=[],Ur=0,Qr=Xt;Ur<Qr.length;Ur+=1){var sn=Qr[Ur];en.push([bt[sn].zoom,Wl(bt[sn],m)])}var Dn={name:"linear"};return{kind:"composite",interpolationType:Dn,interpolationFactor:Hs.interpolationFactor.bind(void 0,Dn),zoomStops:en.map(function(ii){return ii[0]}),evaluate:function(Bi,Ai){var Di=Bi.zoom;return lu({stops:en,base:y.base},m,Di).evaluate(Di,Ai)}}}else if(j){var li=Q==="exponential"?{name:"exponential",base:y.base!==void 0?y.base:1}:null;return{kind:"camera",interpolationType:li,interpolationFactor:Hs.interpolationFactor.bind(void 0,li),zoomStops:y.stops.map(function(ii){return ii[0]}),evaluate:function(ii){var Bi=ii.zoom;return ye(y,m,Bi,ke,Fe)}}}else return{kind:"source",evaluate:function(Bi,Ai){var Di=Ai&&Ai.properties?Ai.properties[y.property]:void 0;return Di===void 0?su(y.default,m.default):ye(y,m,Di,ke,Fe)}}}function su(y,m,L){if(y!==void 0)return y;if(m!==void 0)return m;if(L!==void 0)return L}function Xu(y,m,L,z,Y){var j=typeof L===Y?z[L]:void 0;return su(j,y.default,m.default)}function Wf(y,m,L){if(ea(L)!=="number")return su(y.default,m.default);var z=y.stops.length;if(z===1||L<=y.stops[0][0])return y.stops[0][1];if(L>=y.stops[z-1][0])return y.stops[z-1][1];var Y=Nf(y.stops.map(function(j){return j[0]}),L);return y.stops[Y][1]}function lu(y,m,L){var z=y.base!==void 0?y.base:1;if(ea(L)!=="number")return su(y.default,m.default);var Y=y.stops.length;if(Y===1||L<=y.stops[0][0])return y.stops[0][1];if(L>=y.stops[Y-1][0])return y.stops[Y-1][1];var j=Nf(y.stops.map(function(ct){return ct[0]}),L),Q=Dc(L,z,y.stops[j][0],y.stops[j+1][0]),ye=y.stops[j][1],ke=y.stops[j+1][1],Fe=Su[m.type]||Ml;if(y.colorSpace&&y.colorSpace!=="rgb"){var Ne=Wv[y.colorSpace];Fe=function(ct,St){return Ne.reverse(Ne.interpolate(Ne.forward(ct),Ne.forward(St),Q))}}return typeof ye.evaluate=="function"?{evaluate:function(){for(var St=[],bt=arguments.length;bt--;)St[bt]=arguments[bt];var Xt=ye.evaluate.apply(void 0,St),dr=ke.evaluate.apply(void 0,St);if(!(Xt===void 0||dr===void 0))return Fe(Xt,dr,Q)}}:Fe(ye,ke,Q)}function Rc(y,m,L){return m.type==="color"?L=fo.parse(L):m.type==="formatted"?L=Us.fromString(L.toString()):m.type==="resolvedImage"?L=_s.fromString(L.toString()):ea(L)!==m.type&&(m.type!=="enum"||!m.values[L])&&(L=void 0),su(L,y.default,m.default)}function Dc(y,m,L,z){var Y=z-L,j=y-L;return Y===0?0:m===1?j/Y:(Math.pow(m,j)-1)/(Math.pow(m,Y)-1)}var fc=function(m,L){this.expression=m,this._warningHistory={},this._evaluator=new Gl,this._defaultValue=L?Ic(L):null,this._enumValues=L&&L.type==="enum"?L.values:null};fc.prototype.evaluateWithoutErrorHandling=function(m,L,z,Y,j,Q){return this._evaluator.globals=m,this._evaluator.feature=L,this._evaluator.featureState=z,this._evaluator.canonical=Y,this._evaluator.availableImages=j||null,this._evaluator.formattedSection=Q,this.expression.evaluate(this._evaluator)},fc.prototype.evaluate=function(m,L,z,Y,j,Q){this._evaluator.globals=m,this._evaluator.feature=L||null,this._evaluator.featureState=z||null,this._evaluator.canonical=Y,this._evaluator.availableImages=j||null,this._evaluator.formattedSection=Q||null;try{var ye=this.expression.evaluate(this._evaluator);if(ye==null||typeof ye=="number"&&ye!==ye)return this._defaultValue;if(this._enumValues&&!(ye in this._enumValues))throw new Po("Expected value to be one of "+Object.keys(this._enumValues).map(function(ke){return JSON.stringify(ke)}).join(", ")+", but found "+JSON.stringify(ye)+" instead.");return ye}catch(ke){return this._warningHistory[ke.message]||(this._warningHistory[ke.message]=!0,typeof console!="undefined"&&console.warn(ke.message)),this._defaultValue}};function Ih(y){return Array.isArray(y)&&y.length>0&&typeof y[0]=="string"&&y[0]in Ki}function rh(y,m){var L=new Vs(Ki,[],m?Zv(m):void 0),z=L.parse(y,void 0,void 0,void 0,m&&m.type==="string"?{typeAnnotation:"coerce"}:void 0);return z?Na(new fc(z,m)):ws(L.errors)}var cc=function(m,L){this.kind=m,this._styleExpression=L,this.isStateDependent=m!=="constant"&&!ol(L.expression)};cc.prototype.evaluateWithoutErrorHandling=function(m,L,z,Y,j,Q){return this._styleExpression.evaluateWithoutErrorHandling(m,L,z,Y,j,Q)},cc.prototype.evaluate=function(m,L,z,Y,j,Q){return this._styleExpression.evaluate(m,L,z,Y,j,Q)};var mf=function(m,L,z,Y){this.kind=m,this.zoomStops=z,this._styleExpression=L,this.isStateDependent=m!=="camera"&&!ol(L.expression),this.interpolationType=Y};mf.prototype.evaluateWithoutErrorHandling=function(m,L,z,Y,j,Q){return this._styleExpression.evaluateWithoutErrorHandling(m,L,z,Y,j,Q)},mf.prototype.evaluate=function(m,L,z,Y,j,Q){return this._styleExpression.evaluate(m,L,z,Y,j,Q)},mf.prototype.interpolationFactor=function(m,L,z){return this.interpolationType?Hs.interpolationFactor(this.interpolationType,m,L,z):0};function Zu(y,m){if(y=rh(y,m),y.result==="error")return y;var L=y.value.expression,z=vv(L);if(!z&&!Ko(m))return ws([new ts("","data expressions not supported")]);var Y=au(L,["zoom"]);if(!Y&&!Uo(m))return ws([new ts("","zoom expressions not supported")]);var j=qh(L);if(!j&&!Y)return ws([new ts("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(j instanceof ts)return ws([j]);if(j instanceof Hs&&!hi(m))return ws([new ts("",'"interpolate" expressions cannot be used with this property')]);if(!j)return Na(z?new cc("constant",y.value):new cc("source",y.value));var Q=j instanceof Hs?j.interpolation:void 0;return Na(z?new mf("camera",y.value,j.labels,Q):new mf("composite",y.value,j.labels,Q))}var Fh=function(m,L){this._parameters=m,this._specification=L,Pl(this,Wl(this._parameters,this._specification))};Fh.deserialize=function(m){return new Fh(m._parameters,m._specification)},Fh.serialize=function(m){return{_parameters:m._parameters,_specification:m._specification}};function Xv(y,m){if(Ts(y))return new Fh(y,m);if(Ih(y)){var L=Zu(y,m);if(L.result==="error")throw new Error(L.value.map(function(Y){return Y.key+": "+Y.message}).join(", "));return L.value}else{var z=y;return typeof y=="string"&&m.type==="color"&&(z=fo.parse(y)),{kind:"constant",evaluate:function(){return z}}}}function qh(y){var m=null;if(y instanceof Hf)m=qh(y.result);else if(y instanceof Vf)for(var L=0,z=y.args;L<z.length;L+=1){var Y=z[L];if(m=qh(Y),m)break}else(y instanceof Dl||y instanceof Hs)&&y.input instanceof po&&y.input.name==="zoom"&&(m=y);return m instanceof ts||y.eachChild(function(j){var Q=qh(j);Q instanceof ts?m=Q:!m&&Q?m=new ts("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):m&&Q&&m!==Q&&(m=new ts("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),m}function Zv(y){var m={color:Fs,string:Aa,number:oi,enum:Aa,boolean:Ca,formatted:pl,resolvedImage:hf};return y.type==="array"?tl(m[y.value]||Ma,y.length):m[y.type]}function Ic(y){return y.type==="color"&&Ts(y.default)?new fo(0,0,0,0):y.type==="color"?fo.parse(y.default)||null:y.default===void 0?null:y.default}function ku(y){var m=y.key,L=y.value,z=y.valueSpec||{},Y=y.objectElementValidators||{},j=y.style,Q=y.styleSpec,ye=[],ke=ea(L);if(ke!=="object")return[new wi(m,L,"object expected, "+ke+" found")];for(var Fe in L){var Ne=Fe.split(".")[0],ct=z[Ne]||z["*"],St=void 0;if(Y[Ne])St=Y[Ne];else if(z[Ne])St=ba;else if(Y["*"])St=Y["*"];else if(z["*"])St=ba;else{ye.push(new wi(m,L[Fe],'unknown property "'+Fe+'"'));continue}ye=ye.concat(St({key:(m&&m+".")+Fe,value:L[Fe],valueSpec:ct,style:j,styleSpec:Q,object:L,objectKey:Fe},L))}for(var bt in z)Y[bt]||z[bt].required&&z[bt].default===void 0&&L[bt]===void 0&&ye.push(new wi(m,L,'missing required property "'+bt+'"'));return ye}function nh(y){var m=y.value,L=y.valueSpec,z=y.style,Y=y.styleSpec,j=y.key,Q=y.arrayElementValidator||ba;if(ea(m)!=="array")return[new wi(j,m,"array expected, "+ea(m)+" found")];if(L.length&&m.length!==L.length)return[new wi(j,m,"array length "+L.length+" expected, length "+m.length+" found")];if(L["min-length"]&&m.length<L["min-length"])return[new wi(j,m,"array length at least "+L["min-length"]+" expected, length "+m.length+" found")];var ye={type:L.value,values:L.values};Y.$version<7&&(ye.function=L.function),ea(L.value)==="object"&&(ye=L.value);for(var ke=[],Fe=0;Fe<m.length;Fe++)ke=ke.concat(Q({array:m,arrayIndex:Fe,value:m[Fe],valueSpec:ye,style:z,styleSpec:Y,key:j+"["+Fe+"]"}));return ke}function ih(y){var m=y.key,L=y.value,z=y.valueSpec,Y=ea(L);return Y==="number"&&L!==L&&(Y="NaN"),Y!=="number"?[new wi(m,L,"number expected, "+Y+" found")]:"minimum"in z&&L<z.minimum?[new wi(m,L,L+" is less than the minimum value "+z.minimum)]:"maximum"in z&&L>z.maximum?[new wi(m,L,L+" is greater than the maximum value "+z.maximum)]:[]}function ah(y){var m=y.valueSpec,L=us(y.value.type),z,Y={},j,Q,ye=L!=="categorical"&&y.value.property===void 0,ke=!ye,Fe=ea(y.value.stops)==="array"&&ea(y.value.stops[0])==="array"&&ea(y.value.stops[0][0])==="object",Ne=ku({key:y.key,value:y.value,valueSpec:y.styleSpec.function,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{stops:ct,default:Xt}});return L==="identity"&&ye&&Ne.push(new wi(y.key,y.value,'missing required property "property"')),L!=="identity"&&!y.value.stops&&Ne.push(new wi(y.key,y.value,'missing required property "stops"')),L==="exponential"&&y.valueSpec.expression&&!hi(y.valueSpec)&&Ne.push(new wi(y.key,y.value,"exponential functions not supported")),y.styleSpec.$version>=8&&(ke&&!Ko(y.valueSpec)?Ne.push(new wi(y.key,y.value,"property functions not supported")):ye&&!Uo(y.valueSpec)&&Ne.push(new wi(y.key,y.value,"zoom functions not supported"))),(L==="categorical"||Fe)&&y.value.property===void 0&&Ne.push(new wi(y.key,y.value,'"property" property is required')),Ne;function ct(dr){if(L==="identity")return[new wi(dr.key,dr.value,'identity function may not have a "stops" property')];var Ir=[],Ar=dr.value;return Ir=Ir.concat(nh({key:dr.key,value:Ar,valueSpec:dr.valueSpec,style:dr.style,styleSpec:dr.styleSpec,arrayElementValidator:St})),ea(Ar)==="array"&&Ar.length===0&&Ir.push(new wi(dr.key,Ar,"array must have at least one stop")),Ir}function St(dr){var Ir=[],Ar=dr.value,en=dr.key;if(ea(Ar)!=="array")return[new wi(en,Ar,"array expected, "+ea(Ar)+" found")];if(Ar.length!==2)return[new wi(en,Ar,"array length 2 expected, length "+Ar.length+" found")];if(Fe){if(ea(Ar[0])!=="object")return[new wi(en,Ar,"object expected, "+ea(Ar[0])+" found")];if(Ar[0].zoom===void 0)return[new wi(en,Ar,"object stop key must have zoom")];if(Ar[0].value===void 0)return[new wi(en,Ar,"object stop key must have value")];if(Q&&Q>us(Ar[0].zoom))return[new wi(en,Ar[0].zoom,"stop zoom values must appear in ascending order")];us(Ar[0].zoom)!==Q&&(Q=us(Ar[0].zoom),j=void 0,Y={}),Ir=Ir.concat(ku({key:en+"[0]",value:Ar[0],valueSpec:{zoom:{}},style:dr.style,styleSpec:dr.styleSpec,objectElementValidators:{zoom:ih,value:bt}}))}else Ir=Ir.concat(bt({key:en+"[0]",value:Ar[0],valueSpec:{},style:dr.style,styleSpec:dr.styleSpec},Ar));return Ih(dl(Ar[1]))?Ir.concat([new wi(en+"[1]",Ar[1],"expressions are not allowed in function stops.")]):Ir.concat(ba({key:en+"[1]",value:Ar[1],valueSpec:m,style:dr.style,styleSpec:dr.styleSpec}))}function bt(dr,Ir){var Ar=ea(dr.value),en=us(dr.value),Ur=dr.value!==null?dr.value:Ir;if(!z)z=Ar;else if(Ar!==z)return[new wi(dr.key,Ur,Ar+" stop domain type must match previous stop domain type "+z)];if(Ar!=="number"&&Ar!=="string"&&Ar!=="boolean")return[new wi(dr.key,Ur,"stop domain value must be a number, string, or boolean")];if(Ar!=="number"&&L!=="categorical"){var Qr="number expected, "+Ar+" found";return Ko(m)&&L===void 0&&(Qr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new wi(dr.key,Ur,Qr)]}return L==="categorical"&&Ar==="number"&&(!isFinite(en)||Math.floor(en)!==en)?[new wi(dr.key,Ur,"integer expected, found "+en)]:L!=="categorical"&&Ar==="number"&&j!==void 0&&en<j?[new wi(dr.key,Ur,"stop domain values must appear in ascending order")]:(j=en,L==="categorical"&&en in Y?[new wi(dr.key,Ur,"stop domain values must be unique")]:(Y[en]=!0,[]))}function Xt(dr){return ba({key:dr.key,value:dr.value,valueSpec:m,style:dr.style,styleSpec:dr.styleSpec})}}function Xf(y){var m=(y.expressionContext==="property"?Zu:rh)(dl(y.value),y.valueSpec);if(m.result==="error")return m.value.map(function(z){return new wi(""+y.key+z.key,y.value,z.message)});var L=m.value.expression||m.value._styleExpression.expression;if(y.expressionContext==="property"&&y.propertyKey==="text-font"&&!L.outputDefined())return[new wi(y.key,y.value,'Invalid data expression for "'+y.propertyKey+'". Output values must be contained as literals within the expression.')];if(y.expressionContext==="property"&&y.propertyType==="layout"&&!ol(L))return[new wi(y.key,y.value,'"feature-state" data expressions are not supported with layout properties.')];if(y.expressionContext==="filter"&&!ol(L))return[new wi(y.key,y.value,'"feature-state" data expressions are not supported with filters.')];if(y.expressionContext&&y.expressionContext.indexOf("cluster")===0){if(!au(L,["zoom","feature-state"]))return[new wi(y.key,y.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(y.expressionContext==="cluster-initial"&&!vv(L))return[new wi(y.key,y.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function zh(y){var m=y.value,L=y.key,z=ea(m);return z!=="boolean"?[new wi(L,m,"boolean expected, "+z+" found")]:[]}function jv(y){var m=y.key,L=y.value,z=ea(L);return z!=="string"?[new wi(m,L,"color expected, "+z+" found")]:Sc(L)===null?[new wi(m,L,'color expected, "'+L+'" found')]:[]}function Oh(y){var m=y.key,L=y.value,z=y.valueSpec,Y=[];return Array.isArray(z.values)?z.values.indexOf(us(L))===-1&&Y.push(new wi(m,L,"expected one of ["+z.values.join(", ")+"], "+JSON.stringify(L)+" found")):Object.keys(z.values).indexOf(us(L))===-1&&Y.push(new wi(m,L,"expected one of ["+Object.keys(z.values).join(", ")+"], "+JSON.stringify(L)+" found")),Y}function uu(y){if(y===!0||y===!1)return!0;if(!Array.isArray(y)||y.length===0)return!1;switch(y[0]){case"has":return y.length>=2&&y[1]!=="$id"&&y[1]!=="$type";case"in":return y.length>=3&&(typeof y[1]!="string"||Array.isArray(y[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return y.length!==3||Array.isArray(y[1])||Array.isArray(y[2]);case"any":case"all":for(var m=0,L=y.slice(1);m<L.length;m+=1){var z=L[m];if(!uu(z)&&typeof z!="boolean")return!1}return!0;default:return!0}}var de={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function we(y){if(y==null)return{filter:function(){return!0},needGeometry:!1};uu(y)||(y=He(y));var m=rh(y,de);if(m.result==="error")throw new Error(m.value.map(function(z){return z.key+": "+z.message}).join(", "));var L=De(y);return{filter:function(z,Y,j){return m.value.evaluate(z,Y,{},j)},needGeometry:L}}function Le(y,m){return y<m?-1:y>m?1:0}function De(y){if(!Array.isArray(y))return!1;if(y[0]==="within")return!0;for(var m=1;m<y.length;m++)if(De(y[m]))return!0;return!1}function He(y){if(!y)return!0;var m=y[0];if(y.length<=1)return m!=="any";var L=m==="=="?Ve(y[1],y[2],"=="):m==="!="?qt(Ve(y[1],y[2],"==")):m==="<"||m===">"||m==="<="||m===">="?Ve(y[1],y[2],m):m==="any"?Qe(y.slice(1)):m==="all"?["all"].concat(y.slice(1).map(He)):m==="none"?["all"].concat(y.slice(1).map(He).map(qt)):m==="in"?zt(y[1],y.slice(2)):m==="!in"?qt(zt(y[1],y.slice(2))):m==="has"?Jt(y[1]):m==="!has"?qt(Jt(y[1])):m==="within"?y:!0;return L}function Ve(y,m,L){switch(y){case"$type":return["filter-type-"+L,m];case"$id":return["filter-id-"+L,m];default:return["filter-"+L,y,m]}}function Qe(y){return["any"].concat(y.map(He))}function zt(y,m){if(m.length===0)return!1;switch(y){case"$type":return["filter-type-in",["literal",m]];case"$id":return["filter-id-in",["literal",m]];default:return m.length>200&&!m.some(function(L){return typeof L!=typeof m[0]})?["filter-in-large",y,["literal",m.sort(Le)]]:["filter-in-small",y,["literal",m]]}}function Jt(y){switch(y){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",y]}}function qt(y){return["!",y]}function Qt(y){return uu(dl(y.value))?Xf(Pl({},y,{expressionContext:"filter",valueSpec:{value:"boolean"}})):or(y)}function or(y){var m=y.value,L=y.key;if(ea(m)!=="array")return[new wi(L,m,"array expected, "+ea(m)+" found")];var z=y.styleSpec,Y,j=[];if(m.length<1)return[new wi(L,m,"filter array must have at least 1 element")];switch(j=j.concat(Oh({key:L+"[0]",value:m[0],valueSpec:z.filter_operator,style:y.style,styleSpec:y.styleSpec})),us(m[0])){case"<":case"<=":case">":case">=":m.length>=2&&us(m[1])==="$type"&&j.push(new wi(L,m,'"$type" cannot be use with operator "'+m[0]+'"'));case"==":case"!=":m.length!==3&&j.push(new wi(L,m,'filter array for operator "'+m[0]+'" must have 3 elements'));case"in":case"!in":m.length>=2&&(Y=ea(m[1]),Y!=="string"&&j.push(new wi(L+"[1]",m[1],"string expected, "+Y+" found")));for(var Q=2;Q<m.length;Q++)Y=ea(m[Q]),us(m[1])==="$type"?j=j.concat(Oh({key:L+"["+Q+"]",value:m[Q],valueSpec:z.geometry_type,style:y.style,styleSpec:y.styleSpec})):Y!=="string"&&Y!=="number"&&Y!=="boolean"&&j.push(new wi(L+"["+Q+"]",m[Q],"string, number, or boolean expected, "+Y+" found"));break;case"any":case"all":case"none":for(var ye=1;ye<m.length;ye++)j=j.concat(or({key:L+"["+ye+"]",value:m[ye],style:y.style,styleSpec:y.styleSpec}));break;case"has":case"!has":Y=ea(m[1]),m.length!==2?j.push(new wi(L,m,'filter array for "'+m[0]+'" operator must have 2 elements')):Y!=="string"&&j.push(new wi(L+"[1]",m[1],"string expected, "+Y+" found"));break;case"within":Y=ea(m[1]),m.length!==2?j.push(new wi(L,m,'filter array for "'+m[0]+'" operator must have 2 elements')):Y!=="object"&&j.push(new wi(L+"[1]",m[1],"object expected, "+Y+" found"));break}return j}function _r(y,m){var L=y.key,z=y.style,Y=y.styleSpec,j=y.value,Q=y.objectKey,ye=Y[m+"_"+y.layerType];if(!ye)return[];var ke=Q.match(/^(.*)-transition$/);if(m==="paint"&&ke&&ye[ke[1]]&&ye[ke[1]].transition)return ba({key:L,value:j,valueSpec:Y.transition,style:z,styleSpec:Y});var Fe=y.valueSpec||ye[Q];if(!Fe)return[new wi(L,j,'unknown property "'+Q+'"')];var Ne;if(ea(j)==="string"&&Ko(Fe)&&!Fe.tokens&&(Ne=/^{([^}]+)}$/.exec(j)))return[new wi(L,j,'"'+Q+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Ne[1])+" }`.")];var ct=[];return y.layerType==="symbol"&&(Q==="text-field"&&z&&!z.glyphs&&ct.push(new wi(L,j,'use of "text-field" requires a style "glyphs" property')),Q==="text-font"&&Ts(dl(j))&&us(j.type)==="identity"&&ct.push(new wi(L,j,'"text-font" does not support identity functions'))),ct.concat(ba({key:y.key,value:j,valueSpec:Fe,style:z,styleSpec:Y,expressionContext:"property",propertyType:m,propertyKey:Q}))}function Sr(y){return _r(y,"paint")}function Hr(y){return _r(y,"layout")}function un(y){var m=[],L=y.value,z=y.key,Y=y.style,j=y.styleSpec;!L.type&&!L.ref&&m.push(new wi(z,L,'either "type" or "ref" is required'));var Q=us(L.type),ye=us(L.ref);if(L.id)for(var ke=us(L.id),Fe=0;Fe<y.arrayIndex;Fe++){var Ne=Y.layers[Fe];us(Ne.id)===ke&&m.push(new wi(z,L.id,'duplicate layer id "'+L.id+'", previously used at line '+Ne.id.__line__))}if("ref"in L){["type","source","source-layer","filter","layout"].forEach(function(Xt){Xt in L&&m.push(new wi(z,L[Xt],'"'+Xt+'" is prohibited for ref layers'))});var ct;Y.layers.forEach(function(Xt){us(Xt.id)===ye&&(ct=Xt)}),ct?ct.ref?m.push(new wi(z,L.ref,"ref cannot reference another ref layer")):Q=us(ct.type):m.push(new wi(z,L.ref,'ref layer "'+ye+'" not found'))}else if(Q!=="background")if(!L.source)m.push(new wi(z,L,'missing required property "source"'));else{var St=Y.sources&&Y.sources[L.source],bt=St&&us(St.type);St?bt==="vector"&&Q==="raster"?m.push(new wi(z,L.source,'layer "'+L.id+'" requires a raster source')):bt==="raster"&&Q!=="raster"?m.push(new wi(z,L.source,'layer "'+L.id+'" requires a vector source')):bt==="vector"&&!L["source-layer"]?m.push(new wi(z,L,'layer "'+L.id+'" must specify a "source-layer"')):bt==="raster-dem"&&Q!=="hillshade"?m.push(new wi(z,L.source,"raster-dem source can only be used with layer type 'hillshade'.")):Q==="line"&&L.paint&&L.paint["line-gradient"]&&(bt!=="geojson"||!St.lineMetrics)&&m.push(new wi(z,L,'layer "'+L.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):m.push(new wi(z,L.source,'source "'+L.source+'" not found'))}return m=m.concat(ku({key:z,value:L,valueSpec:j.layer,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return ba({key:z+".type",value:L.type,valueSpec:j.layer.type,style:y.style,styleSpec:y.styleSpec,object:L,objectKey:"type"})},filter:Qt,layout:function(dr){return ku({layer:L,key:dr.key,value:dr.value,style:dr.style,styleSpec:dr.styleSpec,objectElementValidators:{"*":function(Ar){return Hr(Pl({layerType:Q},Ar))}}})},paint:function(dr){return ku({layer:L,key:dr.key,value:dr.value,style:dr.style,styleSpec:dr.styleSpec,objectElementValidators:{"*":function(Ar){return Sr(Pl({layerType:Q},Ar))}}})}}})),m}function Ln(y){var m=y.value,L=y.key,z=ea(m);return z!=="string"?[new wi(L,m,"string expected, "+z+" found")]:[]}var yi={promoteId:ra};function Ji(y){var m=y.value,L=y.key,z=y.styleSpec,Y=y.style;if(!m.type)return[new wi(L,m,'"type" is required')];var j=us(m.type),Q;switch(j){case"vector":case"raster":case"raster-dem":return Q=ku({key:L,value:m,valueSpec:z["source_"+j.replace("-","_")],style:y.style,styleSpec:z,objectElementValidators:yi}),Q;case"geojson":if(Q=ku({key:L,value:m,valueSpec:z.source_geojson,style:Y,styleSpec:z,objectElementValidators:yi}),m.cluster)for(var ye in m.clusterProperties){var ke=m.clusterProperties[ye],Fe=ke[0],Ne=ke[1],ct=typeof Fe=="string"?[Fe,["accumulated"],["get",ye]]:Fe;Q.push.apply(Q,Xf({key:L+"."+ye+".map",value:Ne,expressionContext:"cluster-map"})),Q.push.apply(Q,Xf({key:L+"."+ye+".reduce",value:ct,expressionContext:"cluster-reduce"}))}return Q;case"video":return ku({key:L,value:m,valueSpec:z.source_video,style:Y,styleSpec:z});case"image":return ku({key:L,value:m,valueSpec:z.source_image,style:Y,styleSpec:z});case"canvas":return[new wi(L,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Oh({key:L+".type",value:m.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:Y,styleSpec:z})}}function ra(y){var m=y.key,L=y.value;if(ea(L)==="string")return Ln({key:m,value:L});var z=[];for(var Y in L)z.push.apply(z,Ln({key:m+"."+Y,value:L[Y]}));return z}function sa(y){var m=y.value,L=y.styleSpec,z=L.light,Y=y.style,j=[],Q=ea(m);if(m===void 0)return j;if(Q!=="object")return j=j.concat([new wi("light",m,"object expected, "+Q+" found")]),j;for(var ye in m){var ke=ye.match(/^(.*)-transition$/);ke&&z[ke[1]]&&z[ke[1]].transition?j=j.concat(ba({key:ye,value:m[ye],valueSpec:L.transition,style:Y,styleSpec:L})):z[ye]?j=j.concat(ba({key:ye,value:m[ye],valueSpec:z[ye],style:Y,styleSpec:L})):j=j.concat([new wi(ye,m[ye],'unknown property "'+ye+'"')])}return j}function pa(y){return Ln(y).length===0?[]:Xf(y)}function Ro(y){return Ln(y).length===0?[]:Xf(y)}var Jo={"*":function(){return[]},array:nh,boolean:zh,number:ih,color:jv,constants:sc,enum:Oh,filter:Qt,function:ah,layer:un,object:ku,source:Ji,light:sa,string:Ln,formatted:pa,resolvedImage:Ro};function ba(y){var m=y.value,L=y.valueSpec,z=y.styleSpec;if(L.expression&&Ts(us(m)))return ah(y);if(L.expression&&Ih(dl(m)))return Xf(y);if(L.type&&Jo[L.type])return Jo[L.type](y);var Y=ku(Pl({},y,{valueSpec:L.type?z[L.type]:L}));return Y}function qa(y){var m=y.value,L=y.key,z=Ln(y);return z.length||(m.indexOf("{fontstack}")===-1&&z.push(new wi(L,m,'"glyphs" url must include a "{fontstack}" token')),m.indexOf("{range}")===-1&&z.push(new wi(L,m,'"glyphs" url must include a "{range}" token'))),z}function gs(y,m){m===void 0&&(m=dn);var L=[];return L=L.concat(ba({key:"",value:y,valueSpec:m.$root,styleSpec:m,style:y,objectElementValidators:{glyphs:qa,"*":function(){return[]}}})),y.constants&&(L=L.concat(sc({key:"constants",value:y.constants,style:y,styleSpec:m}))),sl(L)}gs.source=rl(Ji),gs.light=rl(sa),gs.layer=rl(un),gs.filter=rl(Qt),gs.paintProperty=rl(Sr),gs.layoutProperty=rl(Hr);function sl(y){return[].concat(y).sort(function(m,L){return m.line-L.line})}function rl(y){return function(){for(var m=[],L=arguments.length;L--;)m[L]=arguments[L];return sl(y.apply(this,m))}}var ro=gs,Wa=ro.light,Il=ro.paintProperty,Sl=ro.layoutProperty;function Cu(y,m){var L=!1;if(m&&m.length)for(var z=0,Y=m;z<Y.length;z+=1){var j=Y[z];y.fire(new Pi(new Error(j.message))),L=!0}return L}var fu=El,Fl=3;function El(y,m,L){var z=this.cells=[];if(y instanceof ArrayBuffer){this.arrayBuffer=y;var Y=new Int32Array(this.arrayBuffer);y=Y[0],m=Y[1],L=Y[2],this.d=m+2*L;for(var j=0;j<this.d*this.d;j++){var Q=Y[Fl+j],ye=Y[Fl+j+1];z.push(Q===ye?null:Y.subarray(Q,ye))}var ke=Y[Fl+z.length],Fe=Y[Fl+z.length+1];this.keys=Y.subarray(ke,Fe),this.bboxes=Y.subarray(Fe),this.insert=this._insertReadonly}else{this.d=m+2*L;for(var Ne=0;Ne<this.d*this.d;Ne++)z.push([]);this.keys=[],this.bboxes=[]}this.n=m,this.extent=y,this.padding=L,this.scale=m/y,this.uid=0;var ct=L/m*y;this.min=-ct,this.max=y+ct}El.prototype.insert=function(y,m,L,z,Y){this._forEachCell(m,L,z,Y,this._insertCell,this.uid++),this.keys.push(y),this.bboxes.push(m),this.bboxes.push(L),this.bboxes.push(z),this.bboxes.push(Y)},El.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},El.prototype._insertCell=function(y,m,L,z,Y,j){this.cells[Y].push(j)},El.prototype.query=function(y,m,L,z,Y){var j=this.min,Q=this.max;if(y<=j&&m<=j&&Q<=L&&Q<=z&&!Y)return Array.prototype.slice.call(this.keys);var ye=[],ke={};return this._forEachCell(y,m,L,z,this._queryCell,ye,ke,Y),ye},El.prototype._queryCell=function(y,m,L,z,Y,j,Q,ye){var ke=this.cells[Y];if(ke!==null)for(var Fe=this.keys,Ne=this.bboxes,ct=0;ct<ke.length;ct++){var St=ke[ct];if(Q[St]===void 0){var bt=St*4;(ye?ye(Ne[bt+0],Ne[bt+1],Ne[bt+2],Ne[bt+3]):y<=Ne[bt+2]&&m<=Ne[bt+3]&&L>=Ne[bt+0]&&z>=Ne[bt+1])?(Q[St]=!0,j.push(Fe[St])):Q[St]=!1}}},El.prototype._forEachCell=function(y,m,L,z,Y,j,Q,ye){for(var ke=this._convertToCellCoord(y),Fe=this._convertToCellCoord(m),Ne=this._convertToCellCoord(L),ct=this._convertToCellCoord(z),St=ke;St<=Ne;St++)for(var bt=Fe;bt<=ct;bt++){var Xt=this.d*bt+St;if(!(ye&&!ye(this._convertFromCellCoord(St),this._convertFromCellCoord(bt),this._convertFromCellCoord(St+1),this._convertFromCellCoord(bt+1)))&&Y.call(this,y,m,L,z,Xt,j,Q,ye))return}},El.prototype._convertFromCellCoord=function(y){return(y-this.padding)/this.scale},El.prototype._convertToCellCoord=function(y){return Math.max(0,Math.min(this.d-1,Math.floor(y*this.scale)+this.padding))},El.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var y=this.cells,m=Fl+this.cells.length+1+1,L=0,z=0;z<this.cells.length;z++)L+=this.cells[z].length;var Y=new Int32Array(m+L+this.keys.length+this.bboxes.length);Y[0]=this.extent,Y[1]=this.n,Y[2]=this.padding;for(var j=m,Q=0;Q<y.length;Q++){var ye=y[Q];Y[Fl+Q]=j,Y.set(ye,j),j+=ye.length}return Y[Fl+y.length]=j,Y.set(this.keys,j),j+=this.keys.length,Y[Fl+y.length+1]=j,Y.set(this.bboxes,j),j+=this.bboxes.length,Y.buffer};var xf=c.ImageData,ju=c.ImageBitmap,Ku={};function V(y,m,L){L===void 0&&(L={}),Object.defineProperty(m,"_classRegistryKey",{value:y,writeable:!1}),Ku[y]={klass:m,omit:L.omit||[],shallow:L.shallow||[]}}V("Object",Object),fu.serialize=function(m,L){var z=m.toArrayBuffer();return L&&L.push(z),{buffer:z}},fu.deserialize=function(m){return new fu(m.buffer)},V("Grid",fu),V("Color",fo),V("Error",Error),V("ResolvedImage",_s),V("StylePropertyFunction",Fh),V("StyleExpression",fc,{omit:["_evaluator"]}),V("ZoomDependentExpression",mf),V("ZoomConstantExpression",cc),V("CompoundExpression",po,{omit:["_evaluate"]});for(var J in Ki)Ki[J]._classRegistryKey||V("Expression_"+J,Ki[J]);function se(y){return y&&typeof ArrayBuffer!="undefined"&&(y instanceof ArrayBuffer||y.constructor&&y.constructor.name==="ArrayBuffer")}function xe(y){return ju&&y instanceof ju}function be(y,m){if(y==null||typeof y=="boolean"||typeof y=="number"||typeof y=="string"||y instanceof Boolean||y instanceof Number||y instanceof String||y instanceof Date||y instanceof RegExp)return y;if(se(y)||xe(y))return m&&m.push(y),y;if(ArrayBuffer.isView(y)){var L=y;return m&&m.push(L.buffer),L}if(y instanceof xf)return m&&m.push(y.data.buffer),y;if(Array.isArray(y)){for(var z=[],Y=0,j=y;Y<j.length;Y+=1){var Q=j[Y];z.push(be(Q,m))}return z}if(typeof y=="object"){var ye=y.constructor,ke=ye._classRegistryKey;if(!ke)throw new Error("can't serialize object of unregistered class");var Fe=ye.serialize?ye.serialize(y,m):{};if(!ye.serialize){for(var Ne in y)if(y.hasOwnProperty(Ne)&&!(Ku[ke].omit.indexOf(Ne)>=0)){var ct=y[Ne];Fe[Ne]=Ku[ke].shallow.indexOf(Ne)>=0?ct:be(ct,m)}y instanceof Error&&(Fe.message=y.message)}if(Fe.$name)throw new Error("$name property is reserved for worker serialization logic.");return ke!=="Object"&&(Fe.$name=ke),Fe}throw new Error("can't serialize object of type "+typeof y)}function Ae(y){if(y==null||typeof y=="boolean"||typeof y=="number"||typeof y=="string"||y instanceof Boolean||y instanceof Number||y instanceof String||y instanceof Date||y instanceof RegExp||se(y)||xe(y)||ArrayBuffer.isView(y)||y instanceof xf)return y;if(Array.isArray(y))return y.map(Ae);if(typeof y=="object"){var m=y.$name||"Object",L=Ku[m],z=L.klass;if(!z)throw new Error("can't deserialize unregistered class "+m);if(z.deserialize)return z.deserialize(y);for(var Y=Object.create(z.prototype),j=0,Q=Object.keys(y);j<Q.length;j+=1){var ye=Q[j];if(ye!=="$name"){var ke=y[ye];Y[ye]=Ku[m].shallow.indexOf(ye)>=0?ke:Ae(ke)}}return Y}throw new Error("can't deserialize object of type "+typeof y)}var Ge=function(){this.first=!0};Ge.prototype.update=function(m,L){var z=Math.floor(m);return this.first?(this.first=!1,this.lastIntegerZoom=z,this.lastIntegerZoomTime=0,this.lastZoom=m,this.lastFloorZoom=z,!0):(this.lastFloorZoom>z?(this.lastIntegerZoom=z+1,this.lastIntegerZoomTime=L):this.lastFloorZoom<z&&(this.lastIntegerZoom=z,this.lastIntegerZoomTime=L),m!==this.lastZoom?(this.lastZoom=m,this.lastFloorZoom=z,!0):!1)};var Pe={"Latin-1 Supplement":function(y){return y>=128&&y<=255},Arabic:function(y){return y>=1536&&y<=1791},"Arabic Supplement":function(y){return y>=1872&&y<=1919},"Arabic Extended-A":function(y){return y>=2208&&y<=2303},"Hangul Jamo":function(y){return y>=4352&&y<=4607},"Unified Canadian Aboriginal Syllabics":function(y){return y>=5120&&y<=5759},Khmer:function(y){return y>=6016&&y<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(y){return y>=6320&&y<=6399},"General Punctuation":function(y){return y>=8192&&y<=8303},"Letterlike Symbols":function(y){return y>=8448&&y<=8527},"Number Forms":function(y){return y>=8528&&y<=8591},"Miscellaneous Technical":function(y){return y>=8960&&y<=9215},"Control Pictures":function(y){return y>=9216&&y<=9279},"Optical Character Recognition":function(y){return y>=9280&&y<=9311},"Enclosed Alphanumerics":function(y){return y>=9312&&y<=9471},"Geometric Shapes":function(y){return y>=9632&&y<=9727},"Miscellaneous Symbols":function(y){return y>=9728&&y<=9983},"Miscellaneous Symbols and Arrows":function(y){return y>=11008&&y<=11263},"CJK Radicals Supplement":function(y){return y>=11904&&y<=12031},"Kangxi Radicals":function(y){return y>=12032&&y<=12255},"Ideographic Description Characters":function(y){return y>=12272&&y<=12287},"CJK Symbols and Punctuation":function(y){return y>=12288&&y<=12351},Hiragana:function(y){return y>=12352&&y<=12447},Katakana:function(y){return y>=12448&&y<=12543},Bopomofo:function(y){return y>=12544&&y<=12591},"Hangul Compatibility Jamo":function(y){return y>=12592&&y<=12687},Kanbun:function(y){return y>=12688&&y<=12703},"Bopomofo Extended":function(y){return y>=12704&&y<=12735},"CJK Strokes":function(y){return y>=12736&&y<=12783},"Katakana Phonetic Extensions":function(y){return y>=12784&&y<=12799},"Enclosed CJK Letters and Months":function(y){return y>=12800&&y<=13055},"CJK Compatibility":function(y){return y>=13056&&y<=13311},"CJK Unified Ideographs Extension A":function(y){return y>=13312&&y<=19903},"Yijing Hexagram Symbols":function(y){return y>=19904&&y<=19967},"CJK Unified Ideographs":function(y){return y>=19968&&y<=40959},"Yi Syllables":function(y){return y>=40960&&y<=42127},"Yi Radicals":function(y){return y>=42128&&y<=42191},"Hangul Jamo Extended-A":function(y){return y>=43360&&y<=43391},"Hangul Syllables":function(y){return y>=44032&&y<=55215},"Hangul Jamo Extended-B":function(y){return y>=55216&&y<=55295},"Private Use Area":function(y){return y>=57344&&y<=63743},"CJK Compatibility Ideographs":function(y){return y>=63744&&y<=64255},"Arabic Presentation Forms-A":function(y){return y>=64336&&y<=65023},"Vertical Forms":function(y){return y>=65040&&y<=65055},"CJK Compatibility Forms":function(y){return y>=65072&&y<=65103},"Small Form Variants":function(y){return y>=65104&&y<=65135},"Arabic Presentation Forms-B":function(y){return y>=65136&&y<=65279},"Halfwidth and Fullwidth Forms":function(y){return y>=65280&&y<=65519}};function tt(y){for(var m=0,L=y;m<L.length;m+=1){var z=L[m];if(tr(z.charCodeAt(0)))return!0}return!1}function Mt(y){for(var m=0,L=y;m<L.length;m+=1){var z=L[m];if(!Et(z.charCodeAt(0)))return!1}return!0}function Et(y){return!(Pe.Arabic(y)||Pe["Arabic Supplement"](y)||Pe["Arabic Extended-A"](y)||Pe["Arabic Presentation Forms-A"](y)||Pe["Arabic Presentation Forms-B"](y))}function rr(y){return y<11904?!1:!!(Pe["Bopomofo Extended"](y)||Pe.Bopomofo(y)||Pe["CJK Compatibility Forms"](y)||Pe["CJK Compatibility Ideographs"](y)||Pe["CJK Compatibility"](y)||Pe["CJK Radicals Supplement"](y)||Pe["CJK Strokes"](y)||Pe["CJK Symbols and Punctuation"](y)||Pe["CJK Unified Ideographs Extension A"](y)||Pe["CJK Unified Ideographs"](y)||Pe["Enclosed CJK Letters and Months"](y)||Pe["Halfwidth and Fullwidth Forms"](y)||Pe.Hiragana(y)||Pe["Ideographic Description Characters"](y)||Pe["Kangxi Radicals"](y)||Pe["Katakana Phonetic Extensions"](y)||Pe.Katakana(y)||Pe["Vertical Forms"](y)||Pe["Yi Radicals"](y)||Pe["Yi Syllables"](y))}function tr(y){return y===746||y===747?!0:y<4352?!1:!!(Pe["Bopomofo Extended"](y)||Pe.Bopomofo(y)||Pe["CJK Compatibility Forms"](y)&&!(y>=65097&&y<=65103)||Pe["CJK Compatibility Ideographs"](y)||Pe["CJK Compatibility"](y)||Pe["CJK Radicals Supplement"](y)||Pe["CJK Strokes"](y)||Pe["CJK Symbols and Punctuation"](y)&&!(y>=12296&&y<=12305)&&!(y>=12308&&y<=12319)&&y!==12336||Pe["CJK Unified Ideographs Extension A"](y)||Pe["CJK Unified Ideographs"](y)||Pe["Enclosed CJK Letters and Months"](y)||Pe["Hangul Compatibility Jamo"](y)||Pe["Hangul Jamo Extended-A"](y)||Pe["Hangul Jamo Extended-B"](y)||Pe["Hangul Jamo"](y)||Pe["Hangul Syllables"](y)||Pe.Hiragana(y)||Pe["Ideographic Description Characters"](y)||Pe.Kanbun(y)||Pe["Kangxi Radicals"](y)||Pe["Katakana Phonetic Extensions"](y)||Pe.Katakana(y)&&y!==12540||Pe["Halfwidth and Fullwidth Forms"](y)&&y!==65288&&y!==65289&&y!==65293&&!(y>=65306&&y<=65310)&&y!==65339&&y!==65341&&y!==65343&&!(y>=65371&&y<=65503)&&y!==65507&&!(y>=65512&&y<=65519)||Pe["Small Form Variants"](y)&&!(y>=65112&&y<=65118)&&!(y>=65123&&y<=65126)||Pe["Unified Canadian Aboriginal Syllabics"](y)||Pe["Unified Canadian Aboriginal Syllabics Extended"](y)||Pe["Vertical Forms"](y)||Pe["Yijing Hexagram Symbols"](y)||Pe["Yi Syllables"](y)||Pe["Yi Radicals"](y))}function Tr(y){return!!(Pe["Latin-1 Supplement"](y)&&(y===167||y===169||y===174||y===177||y===188||y===189||y===190||y===215||y===247)||Pe["General Punctuation"](y)&&(y===8214||y===8224||y===8225||y===8240||y===8241||y===8251||y===8252||y===8258||y===8263||y===8264||y===8265||y===8273)||Pe["Letterlike Symbols"](y)||Pe["Number Forms"](y)||Pe["Miscellaneous Technical"](y)&&(y>=8960&&y<=8967||y>=8972&&y<=8991||y>=8996&&y<=9e3||y===9003||y>=9085&&y<=9114||y>=9150&&y<=9165||y===9167||y>=9169&&y<=9179||y>=9186&&y<=9215)||Pe["Control Pictures"](y)&&y!==9251||Pe["Optical Character Recognition"](y)||Pe["Enclosed Alphanumerics"](y)||Pe["Geometric Shapes"](y)||Pe["Miscellaneous Symbols"](y)&&!(y>=9754&&y<=9759)||Pe["Miscellaneous Symbols and Arrows"](y)&&(y>=11026&&y<=11055||y>=11088&&y<=11097||y>=11192&&y<=11243)||Pe["CJK Symbols and Punctuation"](y)||Pe.Katakana(y)||Pe["Private Use Area"](y)||Pe["CJK Compatibility Forms"](y)||Pe["Small Form Variants"](y)||Pe["Halfwidth and Fullwidth Forms"](y)||y===8734||y===8756||y===8757||y>=9984&&y<=10087||y>=10102&&y<=10131||y===65532||y===65533)}function Er(y){return!(tr(y)||Tr(y))}function ir(y){return Pe.Arabic(y)||Pe["Arabic Supplement"](y)||Pe["Arabic Extended-A"](y)||Pe["Arabic Presentation Forms-A"](y)||Pe["Arabic Presentation Forms-B"](y)}function gr(y){return y>=1424&&y<=2303||Pe["Arabic Presentation Forms-A"](y)||Pe["Arabic Presentation Forms-B"](y)}function wr(y,m){return!(!m&&gr(y)||y>=2304&&y<=3583||y>=3840&&y<=4255||Pe.Khmer(y))}function Pr(y){for(var m=0,L=y;m<L.length;m+=1){var z=L[m];if(gr(z.charCodeAt(0)))return!0}return!1}function kr(y,m){for(var L=0,z=y;L<z.length;L+=1){var Y=z[L];if(!wr(Y.charCodeAt(0),m))return!1}return!0}var pr={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},mn=null,Tn=pr.unavailable,zn=null,Kn=function(y){y&&typeof y=="string"&&y.indexOf("NetworkError")>-1&&(Tn=pr.error),mn&&mn(y)};function Ci(){qi.fire(new Ya("pluginStateChange",{pluginStatus:Tn,pluginURL:zn}))}var qi=new Bn,xa=function(){return Tn},Gi=function(y){return y({pluginStatus:Tn,pluginURL:zn}),qi.on("pluginStateChange",y),y},va=function(y,m,L){if(L===void 0&&(L=!1),Tn===pr.deferred||Tn===pr.loading||Tn===pr.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");zn=Ce.resolveURL(y),Tn=pr.deferred,mn=m,Ci(),L||mo()},mo=function(){if(Tn!==pr.deferred||!zn)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Tn=pr.loading,Ci(),zn&&yr({url:zn},function(y){y?Kn(y):(Tn=pr.loaded,Ci())})},Do={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Tn===pr.loaded||Do.applyArabicShaping!=null},isLoading:function(){return Tn===pr.loading},setState:function(m){Tn=m.pluginStatus,zn=m.pluginURL},isParsed:function(){return Do.applyArabicShaping!=null&&Do.processBidirectionalText!=null&&Do.processStyledBidirectionalText!=null},getPluginURL:function(){return zn}},So=function(){!Do.isLoading()&&!Do.isLoaded()&&xa()==="deferred"&&mo()},kn=function(m,L){this.zoom=m,L?(this.now=L.now,this.fadeDuration=L.fadeDuration,this.zoomHistory=L.zoomHistory,this.transition=L.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ge,this.transition={})};kn.prototype.isSupportedScript=function(m){return kr(m,Do.isLoaded())},kn.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},kn.prototype.getCrossfadeParameters=function(){var m=this.zoom,L=m-Math.floor(m),z=this.crossFadingFactor();return m>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:L+(1-L)*z}:{fromScale:.5,toScale:1,t:1-(1-z)*L}};var da=function(m,L){this.property=m,this.value=L,this.expression=Xv(L===void 0?m.specification.default:L,m.specification)};da.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},da.prototype.possiblyEvaluate=function(m,L,z){return this.property.possiblyEvaluate(this,m,L,z)};var Sa=function(m){this.property=m,this.value=new da(m,void 0)};Sa.prototype.transitioned=function(m,L){return new As(this.property,this.value,L,_({},m.transition,this.transition),m.now)},Sa.prototype.untransitioned=function(){return new As(this.property,this.value,null,{},0)};var La=function(m){this._properties=m,this._values=Object.create(m.defaultTransitionablePropertyValues)};La.prototype.getValue=function(m){return B(this._values[m].value.value)},La.prototype.setValue=function(m,L){this._values.hasOwnProperty(m)||(this._values[m]=new Sa(this._values[m].property)),this._values[m].value=new da(this._values[m].property,L===null?void 0:B(L))},La.prototype.getTransition=function(m){return B(this._values[m].transition)},La.prototype.setTransition=function(m,L){this._values.hasOwnProperty(m)||(this._values[m]=new Sa(this._values[m].property)),this._values[m].transition=B(L)||void 0},La.prototype.serialize=function(){for(var m={},L=0,z=Object.keys(this._values);L<z.length;L+=1){var Y=z[L],j=this.getValue(Y);j!==void 0&&(m[Y]=j);var Q=this.getTransition(Y);Q!==void 0&&(m[Y+"-transition"]=Q)}return m},La.prototype.transitioned=function(m,L){for(var z=new Gs(this._properties),Y=0,j=Object.keys(this._values);Y<j.length;Y+=1){var Q=j[Y];z._values[Q]=this._values[Q].transitioned(m,L._values[Q])}return z},La.prototype.untransitioned=function(){for(var m=new Gs(this._properties),L=0,z=Object.keys(this._values);L<z.length;L+=1){var Y=z[L];m._values[Y]=this._values[Y].untransitioned()}return m};var As=function(m,L,z,Y,j){this.property=m,this.value=L,this.begin=j+Y.delay||0,this.end=this.begin+Y.duration||0,m.specification.transition&&(Y.delay||Y.duration)&&(this.prior=z)};As.prototype.possiblyEvaluate=function(m,L,z){var Y=m.now||0,j=this.value.possiblyEvaluate(m,L,z),Q=this.prior;if(Q){if(Y>this.end)return this.prior=null,j;if(this.value.isDataDriven())return this.prior=null,j;if(Y<this.begin)return Q.possiblyEvaluate(m,L,z);var ye=(Y-this.begin)/(this.end-this.begin);return this.property.interpolate(Q.possiblyEvaluate(m,L,z),j,d(ye))}else return j};var Gs=function(m){this._properties=m,this._values=Object.create(m.defaultTransitioningPropertyValues)};Gs.prototype.possiblyEvaluate=function(m,L,z){for(var Y=new Xl(this._properties),j=0,Q=Object.keys(this._values);j<Q.length;j+=1){var ye=Q[j];Y._values[ye]=this._values[ye].possiblyEvaluate(m,L,z)}return Y},Gs.prototype.hasTransition=function(){for(var m=0,L=Object.keys(this._values);m<L.length;m+=1){var z=L[m];if(this._values[z].prior)return!0}return!1};var ml=function(m){this._properties=m,this._values=Object.create(m.defaultPropertyValues)};ml.prototype.getValue=function(m){return B(this._values[m].value)},ml.prototype.setValue=function(m,L){this._values[m]=new da(this._values[m].property,L===null?void 0:B(L))},ml.prototype.serialize=function(){for(var m={},L=0,z=Object.keys(this._values);L<z.length;L+=1){var Y=z[L],j=this.getValue(Y);j!==void 0&&(m[Y]=j)}return m},ml.prototype.possiblyEvaluate=function(m,L,z){for(var Y=new Xl(this._properties),j=0,Q=Object.keys(this._values);j<Q.length;j+=1){var ye=Q[j];Y._values[ye]=this._values[ye].possiblyEvaluate(m,L,z)}return Y};var fs=function(m,L,z){this.property=m,this.value=L,this.parameters=z};fs.prototype.isConstant=function(){return this.value.kind==="constant"},fs.prototype.constantOr=function(m){return this.value.kind==="constant"?this.value.value:m},fs.prototype.evaluate=function(m,L,z,Y){return this.property.evaluate(this.value,this.parameters,m,L,z,Y)};var Xl=function(m){this._properties=m,this._values=Object.create(m.defaultPossiblyEvaluatedValues)};Xl.prototype.get=function(m){return this._values[m]};var Ye=function(m){this.specification=m};Ye.prototype.possiblyEvaluate=function(m,L){return m.expression.evaluate(L)},Ye.prototype.interpolate=function(m,L,z){var Y=Su[this.specification.type];return Y?Y(m,L,z):m};var Yt=function(m,L){this.specification=m,this.overrides=L};Yt.prototype.possiblyEvaluate=function(m,L,z,Y){return m.expression.kind==="constant"||m.expression.kind==="camera"?new fs(this,{kind:"constant",value:m.expression.evaluate(L,null,{},z,Y)},L):new fs(this,m.expression,L)},Yt.prototype.interpolate=function(m,L,z){if(m.value.kind!=="constant"||L.value.kind!=="constant")return m;if(m.value.value===void 0||L.value.value===void 0)return new fs(this,{kind:"constant",value:void 0},m.parameters);var Y=Su[this.specification.type];return Y?new fs(this,{kind:"constant",value:Y(m.value.value,L.value.value,z)},m.parameters):m},Yt.prototype.evaluate=function(m,L,z,Y,j,Q){return m.kind==="constant"?m.value:m.evaluate(L,z,Y,j,Q)};var lr=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.possiblyEvaluate=function(z,Y,j,Q){if(z.value===void 0)return new fs(this,{kind:"constant",value:void 0},Y);if(z.expression.kind==="constant"){var ye=z.expression.evaluate(Y,null,{},j,Q),ke=z.property.specification.type==="resolvedImage",Fe=ke&&typeof ye!="string"?ye.name:ye,Ne=this._calculate(Fe,Fe,Fe,Y);return new fs(this,{kind:"constant",value:Ne},Y)}else if(z.expression.kind==="camera"){var ct=this._calculate(z.expression.evaluate({zoom:Y.zoom-1}),z.expression.evaluate({zoom:Y.zoom}),z.expression.evaluate({zoom:Y.zoom+1}),Y);return new fs(this,{kind:"constant",value:ct},Y)}else return new fs(this,z.expression,Y)},m.prototype.evaluate=function(z,Y,j,Q,ye,ke){if(z.kind==="source"){var Fe=z.evaluate(Y,j,Q,ye,ke);return this._calculate(Fe,Fe,Fe,Y)}else return z.kind==="composite"?this._calculate(z.evaluate({zoom:Math.floor(Y.zoom)-1},j,Q),z.evaluate({zoom:Math.floor(Y.zoom)},j,Q),z.evaluate({zoom:Math.floor(Y.zoom)+1},j,Q),Y):z.value},m.prototype._calculate=function(z,Y,j,Q){var ye=Q.zoom;return ye>Q.zoomHistory.lastIntegerZoom?{from:z,to:Y}:{from:j,to:Y}},m.prototype.interpolate=function(z){return z},m}(Yt),Or=function(m){this.specification=m};Or.prototype.possiblyEvaluate=function(m,L,z,Y){if(m.value!==void 0)if(m.expression.kind==="constant"){var j=m.expression.evaluate(L,null,{},z,Y);return this._calculate(j,j,j,L)}else return this._calculate(m.expression.evaluate(new kn(Math.floor(L.zoom-1),L)),m.expression.evaluate(new kn(Math.floor(L.zoom),L)),m.expression.evaluate(new kn(Math.floor(L.zoom+1),L)),L)},Or.prototype._calculate=function(m,L,z,Y){var j=Y.zoom;return j>Y.zoomHistory.lastIntegerZoom?{from:m,to:L}:{from:z,to:L}},Or.prototype.interpolate=function(m){return m};var $r=function(m){this.specification=m};$r.prototype.possiblyEvaluate=function(m,L,z,Y){return!!m.expression.evaluate(L,null,{},z,Y)},$r.prototype.interpolate=function(){return!1};var jr=function(m){this.properties=m,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var L in m){var z=m[L];z.specification.overridable&&this.overridableProperties.push(L);var Y=this.defaultPropertyValues[L]=new da(z,void 0),j=this.defaultTransitionablePropertyValues[L]=new Sa(z);this.defaultTransitioningPropertyValues[L]=j.untransitioned(),this.defaultPossiblyEvaluatedValues[L]=Y.possiblyEvaluate({})}};V("DataDrivenProperty",Yt),V("DataConstantProperty",Ye),V("CrossFadedDataDrivenProperty",lr),V("CrossFadedProperty",Or),V("ColorRampProperty",$r);var Kr="-transition",_n=function(y){function m(L,z){if(y.call(this),this.id=L.id,this.type=L.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},L.type!=="custom"&&(L=L,this.metadata=L.metadata,this.minzoom=L.minzoom,this.maxzoom=L.maxzoom,L.type!=="background"&&(this.source=L.source,this.sourceLayer=L["source-layer"],this.filter=L.filter),z.layout&&(this._unevaluatedLayout=new ml(z.layout)),z.paint)){this._transitionablePaint=new La(z.paint);for(var Y in L.paint)this.setPaintProperty(Y,L.paint[Y],{validate:!1});for(var j in L.layout)this.setLayoutProperty(j,L.layout[j],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Xl(z.paint)}}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},m.prototype.getLayoutProperty=function(z){return z==="visibility"?this.visibility:this._unevaluatedLayout.getValue(z)},m.prototype.setLayoutProperty=function(z,Y,j){if(j===void 0&&(j={}),Y!=null){var Q="layers."+this.id+".layout."+z;if(this._validate(Sl,Q,z,Y,j))return}if(z==="visibility"){this.visibility=Y;return}this._unevaluatedLayout.setValue(z,Y)},m.prototype.getPaintProperty=function(z){return q(z,Kr)?this._transitionablePaint.getTransition(z.slice(0,-Kr.length)):this._transitionablePaint.getValue(z)},m.prototype.setPaintProperty=function(z,Y,j){if(j===void 0&&(j={}),Y!=null){var Q="layers."+this.id+".paint."+z;if(this._validate(Il,Q,z,Y,j))return!1}if(q(z,Kr))return this._transitionablePaint.setTransition(z.slice(0,-Kr.length),Y||void 0),!1;var ye=this._transitionablePaint._values[z],ke=ye.property.specification["property-type"]==="cross-faded-data-driven",Fe=ye.value.isDataDriven(),Ne=ye.value;this._transitionablePaint.setValue(z,Y),this._handleSpecialPaintPropertyUpdate(z);var ct=this._transitionablePaint._values[z].value,St=ct.isDataDriven();return St||Fe||ke||this._handleOverridablePaintPropertyUpdate(z,Ne,ct)},m.prototype._handleSpecialPaintPropertyUpdate=function(z){},m.prototype._handleOverridablePaintPropertyUpdate=function(z,Y,j){return!1},m.prototype.isHidden=function(z){return this.minzoom&&z<this.minzoom||this.maxzoom&&z>=this.maxzoom?!0:this.visibility==="none"},m.prototype.updateTransitions=function(z){this._transitioningPaint=this._transitionablePaint.transitioned(z,this._transitioningPaint)},m.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},m.prototype.recalculate=function(z,Y){z.getCrossfadeParameters&&(this._crossfadeParameters=z.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(z,void 0,Y)),this.paint=this._transitioningPaint.possiblyEvaluate(z,void 0,Y)},m.prototype.serialize=function(){var z={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(z.layout=z.layout||{},z.layout.visibility=this.visibility),U(z,function(Y,j){return Y!==void 0&&!(j==="layout"&&!Object.keys(Y).length)&&!(j==="paint"&&!Object.keys(Y).length)})},m.prototype._validate=function(z,Y,j,Q,ye){return ye===void 0&&(ye={}),ye&&ye.validate===!1?!1:Cu(this,z.call(ro,{key:Y,layerType:this.type,objectKey:j,value:Q,styleSpec:dn,style:{glyphs:!0,sprite:!0}}))},m.prototype.is3D=function(){return!1},m.prototype.isTileClipped=function(){return!1},m.prototype.hasOffscreenPass=function(){return!1},m.prototype.resize=function(){},m.prototype.isStateDependent=function(){for(var z in this.paint._values){var Y=this.paint.get(z);if(!(!(Y instanceof fs)||!Ko(Y.property.specification))&&(Y.value.kind==="source"||Y.value.kind==="composite")&&Y.value.isStateDependent)return!0}return!1},m}(Bn),ti={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Zn=function(m,L){this._structArray=m,this._pos1=L*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},In=128,ia=5,Gn=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};Gn.serialize=function(m,L){return m._trim(),L&&(m.isTransferred=!0,L.push(m.arrayBuffer)),{length:m.length,arrayBuffer:m.arrayBuffer}},Gn.deserialize=function(m){var L=Object.create(this.prototype);return L.arrayBuffer=m.arrayBuffer,L.length=m.length,L.capacity=m.arrayBuffer.byteLength/L.bytesPerElement,L._refreshViews(),L},Gn.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Gn.prototype.clear=function(){this.length=0},Gn.prototype.resize=function(m){this.reserve(m),this.length=m},Gn.prototype.reserve=function(m){if(m>this.capacity){this.capacity=Math.max(m,Math.floor(this.capacity*ia),In),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var L=this.uint8;this._refreshViews(),L&&this.uint8.set(L)}},Gn.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function Vn(y,m){m===void 0&&(m=1);var L=0,z=0,Y=y.map(function(Q){var ye=bn(Q.type),ke=L=Br(L,Math.max(m,ye)),Fe=Q.components||1;return z=Math.max(z,ye),L+=ye*Fe,{name:Q.name,type:Q.type,components:Fe,offset:ke}}),j=Br(L,Math.max(z,m));return{members:Y,size:j,alignment:m}}function bn(y){return ti[y].BYTES_PER_ELEMENT}function Br(y,m){return Math.ceil(y/m)*m}var hn=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(z,Y){var j=this.length;return this.resize(j+1),this.emplace(j,z,Y)},m.prototype.emplace=function(z,Y,j){var Q=z*2;return this.int16[Q+0]=Y,this.int16[Q+1]=j,z},m}(Gn);hn.prototype.bytesPerElement=4,V("StructArrayLayout2i4",hn);var Yn=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(z,Y,j,Q){var ye=this.length;return this.resize(ye+1),this.emplace(ye,z,Y,j,Q)},m.prototype.emplace=function(z,Y,j,Q,ye){var ke=z*4;return this.int16[ke+0]=Y,this.int16[ke+1]=j,this.int16[ke+2]=Q,this.int16[ke+3]=ye,z},m}(Gn);Yn.prototype.bytesPerElement=8,V("StructArrayLayout4i8",Yn);var Jn=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(z,Y,j,Q,ye,ke){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,z,Y,j,Q,ye,ke)},m.prototype.emplace=function(z,Y,j,Q,ye,ke,Fe){var Ne=z*6;return this.int16[Ne+0]=Y,this.int16[Ne+1]=j,this.int16[Ne+2]=Q,this.int16[Ne+3]=ye,this.int16[Ne+4]=ke,this.int16[Ne+5]=Fe,z},m}(Gn);Jn.prototype.bytesPerElement=12,V("StructArrayLayout2i4i12",Jn);var Cn=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(z,Y,j,Q,ye,ke){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,z,Y,j,Q,ye,ke)},m.prototype.emplace=function(z,Y,j,Q,ye,ke,Fe){var Ne=z*4,ct=z*8;return this.int16[Ne+0]=Y,this.int16[Ne+1]=j,this.uint8[ct+4]=Q,this.uint8[ct+5]=ye,this.uint8[ct+6]=ke,this.uint8[ct+7]=Fe,z},m}(Gn);Cn.prototype.bytesPerElement=8,V("StructArrayLayout2i4ub8",Cn);var mi=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},m.prototype.emplaceBack=function(z,Y){var j=this.length;return this.resize(j+1),this.emplace(j,z,Y)},m.prototype.emplace=function(z,Y,j){var Q=z*2;return this.float32[Q+0]=Y,this.float32[Q+1]=j,z},m}(Gn);mi.prototype.bytesPerElement=8,V("StructArrayLayout2f8",mi);var ai=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(z,Y,j,Q,ye,ke,Fe,Ne,ct,St){var bt=this.length;return this.resize(bt+1),this.emplace(bt,z,Y,j,Q,ye,ke,Fe,Ne,ct,St)},m.prototype.emplace=function(z,Y,j,Q,ye,ke,Fe,Ne,ct,St,bt){var Xt=z*10;return this.uint16[Xt+0]=Y,this.uint16[Xt+1]=j,this.uint16[Xt+2]=Q,this.uint16[Xt+3]=ye,this.uint16[Xt+4]=ke,this.uint16[Xt+5]=Fe,this.uint16[Xt+6]=Ne,this.uint16[Xt+7]=ct,this.uint16[Xt+8]=St,this.uint16[Xt+9]=bt,z},m}(Gn);ai.prototype.bytesPerElement=20,V("StructArrayLayout10ui20",ai);var $i=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(z,Y,j,Q,ye,ke,Fe,Ne,ct,St,bt,Xt){var dr=this.length;return this.resize(dr+1),this.emplace(dr,z,Y,j,Q,ye,ke,Fe,Ne,ct,St,bt,Xt)},m.prototype.emplace=function(z,Y,j,Q,ye,ke,Fe,Ne,ct,St,bt,Xt,dr){var Ir=z*12;return this.int16[Ir+0]=Y,this.int16[Ir+1]=j,this.int16[Ir+2]=Q,this.int16[Ir+3]=ye,this.uint16[Ir+4]=ke,this.uint16[Ir+5]=Fe,this.uint16[Ir+6]=Ne,this.uint16[Ir+7]=ct,this.int16[Ir+8]=St,this.int16[Ir+9]=bt,this.int16[Ir+10]=Xt,this.int16[Ir+11]=dr,z},m}(Gn);$i.prototype.bytesPerElement=24,V("StructArrayLayout4i4ui4i24",$i);var Pn=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},m.prototype.emplaceBack=function(z,Y,j){var Q=this.length;return this.resize(Q+1),this.emplace(Q,z,Y,j)},m.prototype.emplace=function(z,Y,j,Q){var ye=z*3;return this.float32[ye+0]=Y,this.float32[ye+1]=j,this.float32[ye+2]=Q,z},m}(Gn);Pn.prototype.bytesPerElement=12,V("StructArrayLayout3f12",Pn);var Mn=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},m.prototype.emplaceBack=function(z){var Y=this.length;return this.resize(Y+1),this.emplace(Y,z)},m.prototype.emplace=function(z,Y){var j=z*1;return this.uint32[j+0]=Y,z},m}(Gn);Mn.prototype.bytesPerElement=4,V("StructArrayLayout1ul4",Mn);var Ri=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(z,Y,j,Q,ye,ke,Fe,Ne,ct){var St=this.length;return this.resize(St+1),this.emplace(St,z,Y,j,Q,ye,ke,Fe,Ne,ct)},m.prototype.emplace=function(z,Y,j,Q,ye,ke,Fe,Ne,ct,St){var bt=z*10,Xt=z*5;return this.int16[bt+0]=Y,this.int16[bt+1]=j,this.int16[bt+2]=Q,this.int16[bt+3]=ye,this.int16[bt+4]=ke,this.int16[bt+5]=Fe,this.uint32[Xt+3]=Ne,this.uint16[bt+8]=ct,this.uint16[bt+9]=St,z},m}(Gn);Ri.prototype.bytesPerElement=20,V("StructArrayLayout6i1ul2ui20",Ri);var di=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(z,Y,j,Q,ye,ke){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,z,Y,j,Q,ye,ke)},m.prototype.emplace=function(z,Y,j,Q,ye,ke,Fe){var Ne=z*6;return this.int16[Ne+0]=Y,this.int16[Ne+1]=j,this.int16[Ne+2]=Q,this.int16[Ne+3]=ye,this.int16[Ne+4]=ke,this.int16[Ne+5]=Fe,z},m}(Gn);di.prototype.bytesPerElement=12,V("StructArrayLayout2i2i2i12",di);var ni=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(z,Y,j,Q,ye){var ke=this.length;return this.resize(ke+1),this.emplace(ke,z,Y,j,Q,ye)},m.prototype.emplace=function(z,Y,j,Q,ye,ke){var Fe=z*4,Ne=z*8;return this.float32[Fe+0]=Y,this.float32[Fe+1]=j,this.float32[Fe+2]=Q,this.int16[Ne+6]=ye,this.int16[Ne+7]=ke,z},m}(Gn);ni.prototype.bytesPerElement=16,V("StructArrayLayout2f1f2i16",ni);var Qn=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},m.prototype.emplaceBack=function(z,Y,j,Q){var ye=this.length;return this.resize(ye+1),this.emplace(ye,z,Y,j,Q)},m.prototype.emplace=function(z,Y,j,Q,ye){var ke=z*12,Fe=z*3;return this.uint8[ke+0]=Y,this.uint8[ke+1]=j,this.float32[Fe+1]=Q,this.float32[Fe+2]=ye,z},m}(Gn);Qn.prototype.bytesPerElement=12,V("StructArrayLayout2ub2f12",Qn);var Ei=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(z,Y,j){var Q=this.length;return this.resize(Q+1),this.emplace(Q,z,Y,j)},m.prototype.emplace=function(z,Y,j,Q){var ye=z*3;return this.uint16[ye+0]=Y,this.uint16[ye+1]=j,this.uint16[ye+2]=Q,z},m}(Gn);Ei.prototype.bytesPerElement=6,V("StructArrayLayout3ui6",Ei);var na=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},m.prototype.emplaceBack=function(z,Y,j,Q,ye,ke,Fe,Ne,ct,St,bt,Xt,dr,Ir,Ar,en,Ur){var Qr=this.length;return this.resize(Qr+1),this.emplace(Qr,z,Y,j,Q,ye,ke,Fe,Ne,ct,St,bt,Xt,dr,Ir,Ar,en,Ur)},m.prototype.emplace=function(z,Y,j,Q,ye,ke,Fe,Ne,ct,St,bt,Xt,dr,Ir,Ar,en,Ur,Qr){var sn=z*24,Dn=z*12,li=z*48;return this.int16[sn+0]=Y,this.int16[sn+1]=j,this.uint16[sn+2]=Q,this.uint16[sn+3]=ye,this.uint32[Dn+2]=ke,this.uint32[Dn+3]=Fe,this.uint32[Dn+4]=Ne,this.uint16[sn+10]=ct,this.uint16[sn+11]=St,this.uint16[sn+12]=bt,this.float32[Dn+7]=Xt,this.float32[Dn+8]=dr,this.uint8[li+36]=Ir,this.uint8[li+37]=Ar,this.uint8[li+38]=en,this.uint32[Dn+10]=Ur,this.int16[sn+22]=Qr,z},m}(Gn);na.prototype.bytesPerElement=48,V("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",na);var Ea=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},m.prototype.emplaceBack=function(z,Y,j,Q,ye,ke,Fe,Ne,ct,St,bt,Xt,dr,Ir,Ar,en,Ur,Qr,sn,Dn,li,ii,Bi,Ai,Di,wa,Ni,Yi){var Za=this.length;return this.resize(Za+1),this.emplace(Za,z,Y,j,Q,ye,ke,Fe,Ne,ct,St,bt,Xt,dr,Ir,Ar,en,Ur,Qr,sn,Dn,li,ii,Bi,Ai,Di,wa,Ni,Yi)},m.prototype.emplace=function(z,Y,j,Q,ye,ke,Fe,Ne,ct,St,bt,Xt,dr,Ir,Ar,en,Ur,Qr,sn,Dn,li,ii,Bi,Ai,Di,wa,Ni,Yi,Za){var ga=z*34,Io=z*17;return this.int16[ga+0]=Y,this.int16[ga+1]=j,this.int16[ga+2]=Q,this.int16[ga+3]=ye,this.int16[ga+4]=ke,this.int16[ga+5]=Fe,this.int16[ga+6]=Ne,this.int16[ga+7]=ct,this.uint16[ga+8]=St,this.uint16[ga+9]=bt,this.uint16[ga+10]=Xt,this.uint16[ga+11]=dr,this.uint16[ga+12]=Ir,this.uint16[ga+13]=Ar,this.uint16[ga+14]=en,this.uint16[ga+15]=Ur,this.uint16[ga+16]=Qr,this.uint16[ga+17]=sn,this.uint16[ga+18]=Dn,this.uint16[ga+19]=li,this.uint16[ga+20]=ii,this.uint16[ga+21]=Bi,this.uint16[ga+22]=Ai,this.uint32[Io+12]=Di,this.float32[Io+13]=wa,this.float32[Io+14]=Ni,this.float32[Io+15]=Yi,this.float32[Io+16]=Za,z},m}(Gn);Ea.prototype.bytesPerElement=68,V("StructArrayLayout8i15ui1ul4f68",Ea);var pi=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},m.prototype.emplaceBack=function(z){var Y=this.length;return this.resize(Y+1),this.emplace(Y,z)},m.prototype.emplace=function(z,Y){var j=z*1;return this.float32[j+0]=Y,z},m}(Gn);pi.prototype.bytesPerElement=4,V("StructArrayLayout1f4",pi);var Ui=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(z,Y,j){var Q=this.length;return this.resize(Q+1),this.emplace(Q,z,Y,j)},m.prototype.emplace=function(z,Y,j,Q){var ye=z*3;return this.int16[ye+0]=Y,this.int16[ye+1]=j,this.int16[ye+2]=Q,z},m}(Gn);Ui.prototype.bytesPerElement=6,V("StructArrayLayout3i6",Ui);var ha=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(z,Y,j){var Q=this.length;return this.resize(Q+1),this.emplace(Q,z,Y,j)},m.prototype.emplace=function(z,Y,j,Q){var ye=z*2,ke=z*4;return this.uint32[ye+0]=Y,this.uint16[ke+2]=j,this.uint16[ke+3]=Q,z},m}(Gn);ha.prototype.bytesPerElement=8,V("StructArrayLayout1ul2ui8",ha);var _a=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(z,Y){var j=this.length;return this.resize(j+1),this.emplace(j,z,Y)},m.prototype.emplace=function(z,Y,j){var Q=z*2;return this.uint16[Q+0]=Y,this.uint16[Q+1]=j,z},m}(Gn);_a.prototype.bytesPerElement=4,V("StructArrayLayout2ui4",_a);var Xa=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(z){var Y=this.length;return this.resize(Y+1),this.emplace(Y,z)},m.prototype.emplace=function(z,Y){var j=z*1;return this.uint16[j+0]=Y,z},m}(Gn);Xa.prototype.bytesPerElement=2,V("StructArrayLayout1ui2",Xa);var Cs=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},m.prototype.emplaceBack=function(z,Y,j,Q){var ye=this.length;return this.resize(ye+1),this.emplace(ye,z,Y,j,Q)},m.prototype.emplace=function(z,Y,j,Q,ye){var ke=z*4;return this.float32[ke+0]=Y,this.float32[ke+1]=j,this.float32[ke+2]=Q,this.float32[ke+3]=ye,z},m}(Gn);Cs.prototype.bytesPerElement=16,V("StructArrayLayout4f16",Cs);var cu=function(y){function m(){y.apply(this,arguments)}y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m;var L={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return L.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},L.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},L.x1.get=function(){return this._structArray.int16[this._pos2+2]},L.y1.get=function(){return this._structArray.int16[this._pos2+3]},L.x2.get=function(){return this._structArray.int16[this._pos2+4]},L.y2.get=function(){return this._structArray.int16[this._pos2+5]},L.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},L.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},L.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},L.anchorPoint.get=function(){return new u(this.anchorPointX,this.anchorPointY)},Object.defineProperties(m.prototype,L),m}(Zn);cu.prototype.size=20;var co=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.get=function(z){return new cu(this,z)},m}(Ri);V("CollisionBoxArray",co);var hu=function(y){function m(){y.apply(this,arguments)}y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m;var L={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return L.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},L.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},L.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},L.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},L.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},L.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},L.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},L.segment.get=function(){return this._structArray.uint16[this._pos2+10]},L.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},L.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},L.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},L.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},L.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},L.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},L.placedOrientation.set=function(z){this._structArray.uint8[this._pos1+37]=z},L.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},L.hidden.set=function(z){this._structArray.uint8[this._pos1+38]=z},L.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},L.crossTileID.set=function(z){this._structArray.uint32[this._pos4+10]=z},L.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(m.prototype,L),m}(Zn);hu.prototype.size=48;var ys=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.get=function(z){return new hu(this,z)},m}(na);V("PlacedSymbolArray",ys);var Zl=function(y){function m(){y.apply(this,arguments)}y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m;var L={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return L.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},L.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},L.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},L.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},L.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},L.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},L.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},L.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},L.key.get=function(){return this._structArray.uint16[this._pos2+8]},L.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},L.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},L.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},L.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},L.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},L.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},L.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},L.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},L.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},L.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},L.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},L.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},L.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},L.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},L.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},L.crossTileID.set=function(z){this._structArray.uint32[this._pos4+12]=z},L.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},L.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},L.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},L.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(m.prototype,L),m}(Zn);Zl.prototype.size=68;var Zf=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.get=function(z){return new Zl(this,z)},m}(Ea);V("SymbolInstanceArray",Zf);var hc=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.getoffsetX=function(z){return this.float32[z*1+0]},m}(pi);V("GlyphOffsetArray",hc);var Ms=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.getx=function(z){return this.int16[z*3+0]},m.prototype.gety=function(z){return this.int16[z*3+1]},m.prototype.gettileUnitDistanceFromAnchor=function(z){return this.int16[z*3+2]},m}(Ui);V("SymbolLineVertexArray",Ms);var jl=function(y){function m(){y.apply(this,arguments)}y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m;var L={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return L.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},L.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},L.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(m.prototype,L),m}(Zn);jl.prototype.size=8;var vu=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.get=function(z){return new jl(this,z)},m}(ha);V("FeatureIndexArray",vu);var no=Vn([{name:"a_pos",components:2,type:"Int16"}],4),Lu=no.members,Qa=function(m){m===void 0&&(m=[]),this.segments=m};Qa.prototype.prepareSegment=function(m,L,z,Y){var j=this.segments[this.segments.length-1];return m>Qa.MAX_VERTEX_ARRAY_LENGTH&&X("Max vertices per segment is "+Qa.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+m),(!j||j.vertexLength+m>Qa.MAX_VERTEX_ARRAY_LENGTH||j.sortKey!==Y)&&(j={vertexOffset:L.length,primitiveOffset:z.length,vertexLength:0,primitiveLength:0},Y!==void 0&&(j.sortKey=Y),this.segments.push(j)),j},Qa.prototype.get=function(){return this.segments},Qa.prototype.destroy=function(){for(var m=0,L=this.segments;m<L.length;m+=1){var z=L[m];for(var Y in z.vaos)z.vaos[Y].destroy()}},Qa.simpleSegment=function(m,L,z,Y){return new Qa([{vertexOffset:m,primitiveOffset:L,vertexLength:z,primitiveLength:Y,vaos:{},sortKey:0}])},Qa.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,V("SegmentVector",Qa);function H(y,m){return y=p(Math.floor(y),0,255),m=p(Math.floor(m),0,255),256*y+m}var R=Vn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),G=a(function(y){function m(L,z){var Y,j,Q,ye,ke,Fe,Ne,ct;for(Y=L.length&3,j=L.length-Y,Q=z,ke=3432918353,Fe=461845907,ct=0;ct<j;)Ne=L.charCodeAt(ct)&255|(L.charCodeAt(++ct)&255)<<8|(L.charCodeAt(++ct)&255)<<16|(L.charCodeAt(++ct)&255)<<24,++ct,Ne=(Ne&65535)*ke+(((Ne>>>16)*ke&65535)<<16)&4294967295,Ne=Ne<<15|Ne>>>17,Ne=(Ne&65535)*Fe+(((Ne>>>16)*Fe&65535)<<16)&4294967295,Q^=Ne,Q=Q<<13|Q>>>19,ye=(Q&65535)*5+(((Q>>>16)*5&65535)<<16)&4294967295,Q=(ye&65535)+27492+(((ye>>>16)+58964&65535)<<16);switch(Ne=0,Y){case 3:Ne^=(L.charCodeAt(ct+2)&255)<<16;case 2:Ne^=(L.charCodeAt(ct+1)&255)<<8;case 1:Ne^=L.charCodeAt(ct)&255,Ne=(Ne&65535)*ke+(((Ne>>>16)*ke&65535)<<16)&4294967295,Ne=Ne<<15|Ne>>>17,Ne=(Ne&65535)*Fe+(((Ne>>>16)*Fe&65535)<<16)&4294967295,Q^=Ne}return Q^=L.length,Q^=Q>>>16,Q=(Q&65535)*2246822507+(((Q>>>16)*2246822507&65535)<<16)&4294967295,Q^=Q>>>13,Q=(Q&65535)*3266489909+(((Q>>>16)*3266489909&65535)<<16)&4294967295,Q^=Q>>>16,Q>>>0}y.exports=m}),I=a(function(y){function m(L,z){for(var Y=L.length,j=z^Y,Q=0,ye;Y>=4;)ye=L.charCodeAt(Q)&255|(L.charCodeAt(++Q)&255)<<8|(L.charCodeAt(++Q)&255)<<16|(L.charCodeAt(++Q)&255)<<24,ye=(ye&65535)*1540483477+(((ye>>>16)*1540483477&65535)<<16),ye^=ye>>>24,ye=(ye&65535)*1540483477+(((ye>>>16)*1540483477&65535)<<16),j=(j&65535)*1540483477+(((j>>>16)*1540483477&65535)<<16)^ye,Y-=4,++Q;switch(Y){case 3:j^=(L.charCodeAt(Q+2)&255)<<16;case 2:j^=(L.charCodeAt(Q+1)&255)<<8;case 1:j^=L.charCodeAt(Q)&255,j=(j&65535)*1540483477+(((j>>>16)*1540483477&65535)<<16)}return j^=j>>>13,j=(j&65535)*1540483477+(((j>>>16)*1540483477&65535)<<16),j^=j>>>15,j>>>0}y.exports=m}),W=G,re=G,$=I;W.murmur3=re,W.murmur2=$;var ve=function(){this.ids=[],this.positions=[],this.indexed=!1};ve.prototype.add=function(m,L,z,Y){this.ids.push(Oe(m)),this.positions.push(L,z,Y)},ve.prototype.getPositions=function(m){for(var L=Oe(m),z=0,Y=this.ids.length-1;z<Y;){var j=z+Y>>1;this.ids[j]>=L?Y=j:z=j+1}for(var Q=[];this.ids[z]===L;){var ye=this.positions[3*z],ke=this.positions[3*z+1],Fe=this.positions[3*z+2];Q.push({index:ye,start:ke,end:Fe}),z++}return Q},ve.serialize=function(m,L){var z=new Float64Array(m.ids),Y=new Uint32Array(m.positions);return pt(z,Y,0,z.length-1),L&&L.push(z.buffer,Y.buffer),{ids:z,positions:Y}},ve.deserialize=function(m){var L=new ve;return L.ids=m.ids,L.positions=m.positions,L.indexed=!0,L};var Ee=Math.pow(2,53)-1;function Oe(y){var m=+y;return!isNaN(m)&&m<=Ee?m:W(String(y))}function pt(y,m,L,z){for(;L<z;){for(var Y=y[L+z>>1],j=L-1,Q=z+1;;){do j++;while(y[j]<Y);do Q--;while(y[Q]>Y);if(j>=Q)break;wt(y,j,Q),wt(m,3*j,3*Q),wt(m,3*j+1,3*Q+1),wt(m,3*j+2,3*Q+2)}Q-L<z-Q?(pt(y,m,L,Q),L=Q+1):(pt(y,m,Q+1,z),z=Q)}}function wt(y,m,L){var z=y[m];y[m]=y[L],y[L]=z}V("FeaturePositionMap",ve);var yt=function(m,L){this.gl=m.gl,this.location=L},Be=function(y){function m(L,z){y.call(this,L,z),this.current=0}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.set=function(z){this.current!==z&&(this.current=z,this.gl.uniform1i(this.location,z))},m}(yt),$e=function(y){function m(L,z){y.call(this,L,z),this.current=0}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.set=function(z){this.current!==z&&(this.current=z,this.gl.uniform1f(this.location,z))},m}(yt),ft=function(y){function m(L,z){y.call(this,L,z),this.current=[0,0]}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.set=function(z){(z[0]!==this.current[0]||z[1]!==this.current[1])&&(this.current=z,this.gl.uniform2f(this.location,z[0],z[1]))},m}(yt),Tt=function(y){function m(L,z){y.call(this,L,z),this.current=[0,0,0]}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.set=function(z){(z[0]!==this.current[0]||z[1]!==this.current[1]||z[2]!==this.current[2])&&(this.current=z,this.gl.uniform3f(this.location,z[0],z[1],z[2]))},m}(yt),Lt=function(y){function m(L,z){y.call(this,L,z),this.current=[0,0,0,0]}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.set=function(z){(z[0]!==this.current[0]||z[1]!==this.current[1]||z[2]!==this.current[2]||z[3]!==this.current[3])&&(this.current=z,this.gl.uniform4f(this.location,z[0],z[1],z[2],z[3]))},m}(yt),Pt=function(y){function m(L,z){y.call(this,L,z),this.current=fo.transparent}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.set=function(z){(z.r!==this.current.r||z.g!==this.current.g||z.b!==this.current.b||z.a!==this.current.a)&&(this.current=z,this.gl.uniform4f(this.location,z.r,z.g,z.b,z.a))},m}(yt),jt=new Float32Array(16),Nt=function(y){function m(L,z){y.call(this,L,z),this.current=jt}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.set=function(z){if(z[12]!==this.current[12]||z[0]!==this.current[0]){this.current=z,this.gl.uniformMatrix4fv(this.location,!1,z);return}for(var Y=1;Y<16;Y++)if(z[Y]!==this.current[Y]){this.current=z,this.gl.uniformMatrix4fv(this.location,!1,z);break}},m}(yt);function Ft(y){return[H(255*y.r,255*y.g),H(255*y.b,255*y.a)]}var Kt=function(m,L,z){this.value=m,this.uniformNames=L.map(function(Y){return"u_"+Y}),this.type=z};Kt.prototype.setUniform=function(m,L,z){m.set(z.constantOr(this.value))},Kt.prototype.getBinding=function(m,L,z){return this.type==="color"?new Pt(m,L):new $e(m,L)};var Ct=function(m,L){this.uniformNames=L.map(function(z){return"u_"+z}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ct.prototype.setConstantPatternPositions=function(m,L){this.pixelRatioFrom=L.pixelRatio,this.pixelRatioTo=m.pixelRatio,this.patternFrom=L.tlbr,this.patternTo=m.tlbr},Ct.prototype.setUniform=function(m,L,z,Y){var j=Y==="u_pattern_to"?this.patternTo:Y==="u_pattern_from"?this.patternFrom:Y==="u_pixel_ratio_to"?this.pixelRatioTo:Y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;j&&m.set(j)},Ct.prototype.getBinding=function(m,L,z){return z.substr(0,9)==="u_pattern"?new Lt(m,L):new $e(m,L)};var sr=function(m,L,z,Y){this.expression=m,this.type=z,this.maxValue=0,this.paintVertexAttributes=L.map(function(j){return{name:"a_"+j,type:"Float32",components:z==="color"?2:1,offset:0}}),this.paintVertexArray=new Y};sr.prototype.populatePaintArray=function(m,L,z,Y,j){var Q=this.paintVertexArray.length,ye=this.expression.evaluate(new kn(0),L,{},Y,[],j);this.paintVertexArray.resize(m),this._setPaintValue(Q,m,ye)},sr.prototype.updatePaintArray=function(m,L,z,Y){var j=this.expression.evaluate({zoom:0},z,Y);this._setPaintValue(m,L,j)},sr.prototype._setPaintValue=function(m,L,z){if(this.type==="color")for(var Y=Ft(z),j=m;j<L;j++)this.paintVertexArray.emplace(j,Y[0],Y[1]);else{for(var Q=m;Q<L;Q++)this.paintVertexArray.emplace(Q,z);this.maxValue=Math.max(this.maxValue,Math.abs(z))}},sr.prototype.upload=function(m){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=m.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},sr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var xr=function(m,L,z,Y,j,Q){this.expression=m,this.uniformNames=L.map(function(ye){return"u_"+ye+"_t"}),this.type=z,this.useIntegerZoom=Y,this.zoom=j,this.maxValue=0,this.paintVertexAttributes=L.map(function(ye){return{name:"a_"+ye,type:"Float32",components:z==="color"?4:2,offset:0}}),this.paintVertexArray=new Q};xr.prototype.populatePaintArray=function(m,L,z,Y,j){var Q=this.expression.evaluate(new kn(this.zoom),L,{},Y,[],j),ye=this.expression.evaluate(new kn(this.zoom+1),L,{},Y,[],j),ke=this.paintVertexArray.length;this.paintVertexArray.resize(m),this._setPaintValue(ke,m,Q,ye)},xr.prototype.updatePaintArray=function(m,L,z,Y){var j=this.expression.evaluate({zoom:this.zoom},z,Y),Q=this.expression.evaluate({zoom:this.zoom+1},z,Y);this._setPaintValue(m,L,j,Q)},xr.prototype._setPaintValue=function(m,L,z,Y){if(this.type==="color")for(var j=Ft(z),Q=Ft(Y),ye=m;ye<L;ye++)this.paintVertexArray.emplace(ye,j[0],j[1],Q[0],Q[1]);else{for(var ke=m;ke<L;ke++)this.paintVertexArray.emplace(ke,z,Y);this.maxValue=Math.max(this.maxValue,Math.abs(z),Math.abs(Y))}},xr.prototype.upload=function(m){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=m.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},xr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},xr.prototype.setUniform=function(m,L){var z=this.useIntegerZoom?Math.floor(L.zoom):L.zoom,Y=p(this.expression.interpolationFactor(z,this.zoom,this.zoom+1),0,1);m.set(Y)},xr.prototype.getBinding=function(m,L,z){return new $e(m,L)};var Dr=function(m,L,z,Y,j,Q){this.expression=m,this.type=L,this.useIntegerZoom=z,this.zoom=Y,this.layerId=Q,this.zoomInPaintVertexArray=new j,this.zoomOutPaintVertexArray=new j};Dr.prototype.populatePaintArray=function(m,L,z){var Y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(m),this.zoomOutPaintVertexArray.resize(m),this._setPaintValues(Y,m,L.patterns&&L.patterns[this.layerId],z)},Dr.prototype.updatePaintArray=function(m,L,z,Y,j){this._setPaintValues(m,L,z.patterns&&z.patterns[this.layerId],j)},Dr.prototype._setPaintValues=function(m,L,z,Y){if(!(!Y||!z)){var j=z.min,Q=z.mid,ye=z.max,ke=Y[j],Fe=Y[Q],Ne=Y[ye];if(!(!ke||!Fe||!Ne))for(var ct=m;ct<L;ct++)this.zoomInPaintVertexArray.emplace(ct,Fe.tl[0],Fe.tl[1],Fe.br[0],Fe.br[1],ke.tl[0],ke.tl[1],ke.br[0],ke.br[1],Fe.pixelRatio,ke.pixelRatio),this.zoomOutPaintVertexArray.emplace(ct,Fe.tl[0],Fe.tl[1],Fe.br[0],Fe.br[1],Ne.tl[0],Ne.tl[1],Ne.br[0],Ne.br[1],Fe.pixelRatio,Ne.pixelRatio)}},Dr.prototype.upload=function(m){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=m.createVertexBuffer(this.zoomInPaintVertexArray,R.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=m.createVertexBuffer(this.zoomOutPaintVertexArray,R.members,this.expression.isStateDependent))},Dr.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var fn=function(m,L,z){this.binders={},this._buffers=[];var Y=[];for(var j in m.paint._values)if(z(j)){var Q=m.paint.get(j);if(!(!(Q instanceof fs)||!Ko(Q.property.specification))){var ye=gn(j,m.type),ke=Q.value,Fe=Q.property.specification.type,Ne=Q.property.useIntegerZoom,ct=Q.property.specification["property-type"],St=ct==="cross-faded"||ct==="cross-faded-data-driven";if(ke.kind==="constant")this.binders[j]=St?new Ct(ke.value,ye):new Kt(ke.value,ye,Fe),Y.push("/u_"+j);else if(ke.kind==="source"||St){var bt=Hn(j,Fe,"source");this.binders[j]=St?new Dr(ke,Fe,Ne,L,bt,m.id):new sr(ke,ye,Fe,bt),Y.push("/a_"+j)}else{var Xt=Hn(j,Fe,"composite");this.binders[j]=new xr(ke,ye,Fe,Ne,L,Xt),Y.push("/z_"+j)}}}this.cacheKey=Y.sort().join("")};fn.prototype.getMaxValue=function(m){var L=this.binders[m];return L instanceof sr||L instanceof xr?L.maxValue:0},fn.prototype.populatePaintArrays=function(m,L,z,Y,j){for(var Q in this.binders){var ye=this.binders[Q];(ye instanceof sr||ye instanceof xr||ye instanceof Dr)&&ye.populatePaintArray(m,L,z,Y,j)}},fn.prototype.setConstantPatternPositions=function(m,L){for(var z in this.binders){var Y=this.binders[z];Y instanceof Ct&&Y.setConstantPatternPositions(m,L)}},fn.prototype.updatePaintArrays=function(m,L,z,Y,j){var Q=!1;for(var ye in m)for(var ke=L.getPositions(ye),Fe=0,Ne=ke;Fe<Ne.length;Fe+=1){var ct=Ne[Fe],St=z.feature(ct.index);for(var bt in this.binders){var Xt=this.binders[bt];if((Xt instanceof sr||Xt instanceof xr||Xt instanceof Dr)&&Xt.expression.isStateDependent===!0){var dr=Y.paint.get(bt);Xt.expression=dr.value,Xt.updatePaintArray(ct.start,ct.end,St,m[ye],j),Q=!0}}}return Q},fn.prototype.defines=function(){var m=[];for(var L in this.binders){var z=this.binders[L];(z instanceof Kt||z instanceof Ct)&&m.push.apply(m,z.uniformNames.map(function(Y){return"#define HAS_UNIFORM_"+Y}))}return m},fn.prototype.getBinderAttributes=function(){var m=[];for(var L in this.binders){var z=this.binders[L];if(z instanceof sr||z instanceof xr)for(var Y=0;Y<z.paintVertexAttributes.length;Y++)m.push(z.paintVertexAttributes[Y].name);else if(z instanceof Dr)for(var j=0;j<R.members.length;j++)m.push(R.members[j].name)}return m},fn.prototype.getBinderUniforms=function(){var m=[];for(var L in this.binders){var z=this.binders[L];if(z instanceof Kt||z instanceof Ct||z instanceof xr)for(var Y=0,j=z.uniformNames;Y<j.length;Y+=1){var Q=j[Y];m.push(Q)}}return m},fn.prototype.getPaintVertexBuffers=function(){return this._buffers},fn.prototype.getUniforms=function(m,L){var z=[];for(var Y in this.binders){var j=this.binders[Y];if(j instanceof Kt||j instanceof Ct||j instanceof xr)for(var Q=0,ye=j.uniformNames;Q<ye.length;Q+=1){var ke=ye[Q];if(L[ke]){var Fe=j.getBinding(m,L[ke],ke);z.push({name:ke,property:Y,binding:Fe})}}}return z},fn.prototype.setUniforms=function(m,L,z,Y){for(var j=0,Q=L;j<Q.length;j+=1){var ye=Q[j],ke=ye.name,Fe=ye.property,Ne=ye.binding;this.binders[Fe].setUniform(Ne,Y,z.get(Fe),ke)}},fn.prototype.updatePaintBuffers=function(m){this._buffers=[];for(var L in this.binders){var z=this.binders[L];if(m&&z instanceof Dr){var Y=m.fromScale===2?z.zoomInPaintVertexBuffer:z.zoomOutPaintVertexBuffer;Y&&this._buffers.push(Y)}else(z instanceof sr||z instanceof xr)&&z.paintVertexBuffer&&this._buffers.push(z.paintVertexBuffer)}},fn.prototype.upload=function(m){for(var L in this.binders){var z=this.binders[L];(z instanceof sr||z instanceof xr||z instanceof Dr)&&z.upload(m)}this.updatePaintBuffers()},fn.prototype.destroy=function(){for(var m in this.binders){var L=this.binders[m];(L instanceof sr||L instanceof xr||L instanceof Dr)&&L.destroy()}};var Wr=function(m,L,z){z===void 0&&(z=function(){return!0}),this.programConfigurations={};for(var Y=0,j=m;Y<j.length;Y+=1){var Q=j[Y];this.programConfigurations[Q.id]=new fn(Q,L,z)}this.needsUpload=!1,this._featureMap=new ve,this._bufferOffset=0};Wr.prototype.populatePaintArrays=function(m,L,z,Y,j,Q){for(var ye in this.programConfigurations)this.programConfigurations[ye].populatePaintArrays(m,L,Y,j,Q);L.id!==void 0&&this._featureMap.add(L.id,z,this._bufferOffset,m),this._bufferOffset=m,this.needsUpload=!0},Wr.prototype.updatePaintArrays=function(m,L,z,Y){for(var j=0,Q=z;j<Q.length;j+=1){var ye=Q[j];this.needsUpload=this.programConfigurations[ye.id].updatePaintArrays(m,this._featureMap,L,ye,Y)||this.needsUpload}},Wr.prototype.get=function(m){return this.programConfigurations[m]},Wr.prototype.upload=function(m){if(this.needsUpload){for(var L in this.programConfigurations)this.programConfigurations[L].upload(m);this.needsUpload=!1}},Wr.prototype.destroy=function(){for(var m in this.programConfigurations)this.programConfigurations[m].destroy()};function gn(y,m){var L={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return L[y]||[y.replace(m+"-","").replace(/-/g,"_")]}function si(y){var m={"line-pattern":{source:ai,composite:ai},"fill-pattern":{source:ai,composite:ai},"fill-extrusion-pattern":{source:ai,composite:ai}};return m[y]}function Hn(y,m,L){var z={color:{source:mi,composite:Cs},number:{source:pi,composite:mi}},Y=si(y);return Y&&Y[L]||z[m][L]}V("ConstantBinder",Kt),V("CrossFadedConstantBinder",Ct),V("SourceExpressionBinder",sr),V("CrossFadedCompositeBinder",Dr),V("CompositeExpressionBinder",xr),V("ProgramConfiguration",fn,{omit:["_buffers"]}),V("ProgramConfigurationSet",Wr);var cn=8192,Rn=15,En=Math.pow(2,Rn-1)-1,$n=-En-1;function xi(y){for(var m=cn/y.extent,L=y.loadGeometry(),z=0;z<L.length;z++)for(var Y=L[z],j=0;j<Y.length;j++){var Q=Y[j],ye=Math.round(Q.x*m),ke=Math.round(Q.y*m);Q.x=p(ye,$n,En),Q.y=p(ke,$n,En),(ye<Q.x||ye>Q.x+1||ke<Q.y||ke>Q.y+1)&&X("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return L}function Ra(y,m){return{type:y.type,id:y.id,properties:y.properties,geometry:m?xi(y):[]}}function Pa(y,m,L,z,Y){y.emplaceBack(m*2+(z+1)/2,L*2+(Y+1)/2)}var wo=function(m){this.zoom=m.zoom,this.overscaling=m.overscaling,this.layers=m.layers,this.layerIds=this.layers.map(function(L){return L.id}),this.index=m.index,this.hasPattern=!1,this.layoutVertexArray=new hn,this.indexArray=new Ei,this.segments=new Qa,this.programConfigurations=new Wr(m.layers,m.zoom),this.stateDependentLayerIds=this.layers.filter(function(L){return L.isStateDependent()}).map(function(L){return L.id})};wo.prototype.populate=function(m,L,z){var Y=this.layers[0],j=[],Q=null;Y.type==="circle"&&(Q=Y.layout.get("circle-sort-key"));for(var ye=0,ke=m;ye<ke.length;ye+=1){var Fe=ke[ye],Ne=Fe.feature,ct=Fe.id,St=Fe.index,bt=Fe.sourceLayerIndex,Xt=this.layers[0]._featureFilter.needGeometry,dr=Ra(Ne,Xt);if(this.layers[0]._featureFilter.filter(new kn(this.zoom),dr,z)){var Ir=Q?Q.evaluate(dr,{},z):void 0,Ar={id:ct,properties:Ne.properties,type:Ne.type,sourceLayerIndex:bt,index:St,geometry:Xt?dr.geometry:xi(Ne),patterns:{},sortKey:Ir};j.push(Ar)}}Q&&j.sort(function(Ai,Di){return Ai.sortKey-Di.sortKey});for(var en=0,Ur=j;en<Ur.length;en+=1){var Qr=Ur[en],sn=Qr,Dn=sn.geometry,li=sn.index,ii=sn.sourceLayerIndex,Bi=m[li].feature;this.addFeature(Qr,Dn,li,z),L.featureIndex.insert(Bi,Dn,li,ii,this.index)}},wo.prototype.update=function(m,L,z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(m,L,this.stateDependentLayers,z)},wo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},wo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},wo.prototype.upload=function(m){this.uploaded||(this.layoutVertexBuffer=m.createVertexBuffer(this.layoutVertexArray,Lu),this.indexBuffer=m.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(m),this.uploaded=!0},wo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},wo.prototype.addFeature=function(m,L,z,Y){for(var j=0,Q=L;j<Q.length;j+=1)for(var ye=Q[j],ke=0,Fe=ye;ke<Fe.length;ke+=1){var Ne=Fe[ke],ct=Ne.x,St=Ne.y;if(!(ct<0||ct>=cn||St<0||St>=cn)){var bt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,m.sortKey),Xt=bt.vertexLength;Pa(this.layoutVertexArray,ct,St,-1,-1),Pa(this.layoutVertexArray,ct,St,1,-1),Pa(this.layoutVertexArray,ct,St,1,1),Pa(this.layoutVertexArray,ct,St,-1,1),this.indexArray.emplaceBack(Xt,Xt+1,Xt+2),this.indexArray.emplaceBack(Xt,Xt+3,Xt+2),bt.vertexLength+=4,bt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,m,z,{},Y)},V("CircleBucket",wo,{omit:["layers"]});function ua(y,m){for(var L=0;L<y.length;L++)if(oh(m,y[L]))return!0;for(var z=0;z<m.length;z++)if(oh(y,m[z]))return!0;return!!Jv(y,m)}function $a(y,m,L){return!!(oh(y,m)||Qd(m,y,L))}function Go(y,m){if(y.length===1)return $d(m,y[0]);for(var L=0;L<m.length;L++)for(var z=m[L],Y=0;Y<z.length;Y++)if(oh(y,z[Y]))return!0;for(var j=0;j<y.length;j++)if($d(m,y[j]))return!0;for(var Q=0;Q<m.length;Q++)if(Jv(y,m[Q]))return!0;return!1}function xl(y,m,L){for(var z=0;z<m.length;z++){var Y=m[z];if(y.length>=3){for(var j=0;j<Y.length;j++)if(oh(y,Y[j]))return!0}if(Kv(y,Y,L))return!0}return!1}function Kv(y,m,L){if(y.length>1){if(Jv(y,m))return!0;for(var z=0;z<m.length;z++)if(Qd(m[z],y,L))return!0}for(var Y=0;Y<y.length;Y++)if(Qd(y[Y],m,L))return!0;return!1}function Jv(y,m){if(y.length===0||m.length===0)return!1;for(var L=0;L<y.length-1;L++)for(var z=y[L],Y=y[L+1],j=0;j<m.length-1;j++){var Q=m[j],ye=m[j+1];if(Ad(z,Y,Q,ye))return!0}return!1}function Ad(y,m,L,z){return K(y,L,z)!==K(m,L,z)&&K(y,m,L)!==K(y,m,z)}function Qd(y,m,L){var z=L*L;if(m.length===1)return y.distSqr(m[0])<z;for(var Y=1;Y<m.length;Y++){var j=m[Y-1],Q=m[Y];if(Eg(y,j,Q)<z)return!0}return!1}function Eg(y,m,L){var z=m.distSqr(L);if(z===0)return y.distSqr(m);var Y=((y.x-m.x)*(L.x-m.x)+(y.y-m.y)*(L.y-m.y))/z;return Y<0?y.distSqr(m):Y>1?y.distSqr(L):y.distSqr(L.sub(m)._mult(Y)._add(m))}function $d(y,m){for(var L=!1,z,Y,j,Q=0;Q<y.length;Q++){z=y[Q];for(var ye=0,ke=z.length-1;ye<z.length;ke=ye++)Y=z[ye],j=z[ke],Y.y>m.y!=j.y>m.y&&m.x<(j.x-Y.x)*(m.y-Y.y)/(j.y-Y.y)+Y.x&&(L=!L)}return L}function oh(y,m){for(var L=!1,z=0,Y=y.length-1;z<y.length;Y=z++){var j=y[z],Q=y[Y];j.y>m.y!=Q.y>m.y&&m.x<(Q.x-j.x)*(m.y-j.y)/(Q.y-j.y)+j.x&&(L=!L)}return L}function ep(y,m,L,z,Y){for(var j=0,Q=y;j<Q.length;j+=1){var ye=Q[j];if(m<=ye.x&&L<=ye.y&&z>=ye.x&&Y>=ye.y)return!0}var ke=[new u(m,L),new u(m,Y),new u(z,Y),new u(z,L)];if(y.length>2)for(var Fe=0,Ne=ke;Fe<Ne.length;Fe+=1){var ct=Ne[Fe];if(oh(y,ct))return!0}for(var St=0;St<y.length-1;St++){var bt=y[St],Xt=y[St+1];if(Bh(bt,Xt,ke))return!0}return!1}function Bh(y,m,L){var z=L[0],Y=L[2];if(y.x<z.x&&m.x<z.x||y.x>Y.x&&m.x>Y.x||y.y<z.y&&m.y<z.y||y.y>Y.y&&m.y>Y.y)return!1;var j=K(y,m,L[0]);return j!==K(y,m,L[1])||j!==K(y,m,L[2])||j!==K(y,m,L[3])}function sh(y,m,L){var z=m.paint.get(y).value;return z.kind==="constant"?z.value:L.programConfigurations.get(m.id).getMaxValue(y)}function Md(y){return Math.sqrt(y[0]*y[0]+y[1]*y[1])}function Zp(y,m,L,z,Y){if(!m[0]&&!m[1])return y;var j=u.convert(m)._mult(Y);L==="viewport"&&j._rotate(-z);for(var Q=[],ye=0;ye<y.length;ye++){var ke=y[ye];Q.push(ke.sub(j))}return Q}var Sd=new jr({"circle-sort-key":new Yt(dn.layout_circle["circle-sort-key"])}),Mb=new jr({"circle-radius":new Yt(dn.paint_circle["circle-radius"]),"circle-color":new Yt(dn.paint_circle["circle-color"]),"circle-blur":new Yt(dn.paint_circle["circle-blur"]),"circle-opacity":new Yt(dn.paint_circle["circle-opacity"]),"circle-translate":new Ye(dn.paint_circle["circle-translate"]),"circle-translate-anchor":new Ye(dn.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ye(dn.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ye(dn.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Yt(dn.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Yt(dn.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Yt(dn.paint_circle["circle-stroke-opacity"])}),By={paint:Mb,layout:Sd},_f=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var y=arguments,m=0,L=arguments.length;L--;)m+=y[L]*y[L];return Math.sqrt(m)});function Sb(){var y=new _f(4);return _f!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y}function j1(y,m,L){var z=m[0],Y=m[1],j=m[2],Q=m[3],ye=Math.sin(L),ke=Math.cos(L);return y[0]=z*ke+j*ye,y[1]=Y*ke+Q*ye,y[2]=z*-ye+j*ke,y[3]=Y*-ye+Q*ke,y}function Fc(){var y=new _f(9);return _f!=Float32Array&&(y[1]=0,y[2]=0,y[3]=0,y[5]=0,y[6]=0,y[7]=0),y[0]=1,y[4]=1,y[8]=1,y}function Ny(y,m){var L=Math.sin(m),z=Math.cos(m);return y[0]=z,y[1]=L,y[2]=0,y[3]=-L,y[4]=z,y[5]=0,y[6]=0,y[7]=0,y[8]=1,y}function Eb(){var y=new _f(16);return _f!=Float32Array&&(y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[11]=0,y[12]=0,y[13]=0,y[14]=0),y[0]=1,y[5]=1,y[10]=1,y[15]=1,y}function kb(y){var m=new _f(16);return m[0]=y[0],m[1]=y[1],m[2]=y[2],m[3]=y[3],m[4]=y[4],m[5]=y[5],m[6]=y[6],m[7]=y[7],m[8]=y[8],m[9]=y[9],m[10]=y[10],m[11]=y[11],m[12]=y[12],m[13]=y[13],m[14]=y[14],m[15]=y[15],m}function Cb(y){return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}function Uy(y,m){var L=m[0],z=m[1],Y=m[2],j=m[3],Q=m[4],ye=m[5],ke=m[6],Fe=m[7],Ne=m[8],ct=m[9],St=m[10],bt=m[11],Xt=m[12],dr=m[13],Ir=m[14],Ar=m[15],en=L*ye-z*Q,Ur=L*ke-Y*Q,Qr=L*Fe-j*Q,sn=z*ke-Y*ye,Dn=z*Fe-j*ye,li=Y*Fe-j*ke,ii=Ne*dr-ct*Xt,Bi=Ne*Ir-St*Xt,Ai=Ne*Ar-bt*Xt,Di=ct*Ir-St*dr,wa=ct*Ar-bt*dr,Ni=St*Ar-bt*Ir,Yi=en*Ni-Ur*wa+Qr*Di+sn*Ai-Dn*Bi+li*ii;return Yi?(Yi=1/Yi,y[0]=(ye*Ni-ke*wa+Fe*Di)*Yi,y[1]=(Y*wa-z*Ni-j*Di)*Yi,y[2]=(dr*li-Ir*Dn+Ar*sn)*Yi,y[3]=(St*Dn-ct*li-bt*sn)*Yi,y[4]=(ke*Ai-Q*Ni-Fe*Bi)*Yi,y[5]=(L*Ni-Y*Ai+j*Bi)*Yi,y[6]=(Ir*Qr-Xt*li-Ar*Ur)*Yi,y[7]=(Ne*li-St*Qr+bt*Ur)*Yi,y[8]=(Q*wa-ye*Ai+Fe*ii)*Yi,y[9]=(z*Ai-L*wa-j*ii)*Yi,y[10]=(Xt*Dn-dr*Qr+Ar*en)*Yi,y[11]=(ct*Qr-Ne*Dn-bt*en)*Yi,y[12]=(ye*Bi-Q*Di-ke*ii)*Yi,y[13]=(L*Di-z*Bi+Y*ii)*Yi,y[14]=(dr*Ur-Xt*sn-Ir*en)*Yi,y[15]=(Ne*sn-ct*Ur+St*en)*Yi,y):null}function Vy(y,m,L){var z=m[0],Y=m[1],j=m[2],Q=m[3],ye=m[4],ke=m[5],Fe=m[6],Ne=m[7],ct=m[8],St=m[9],bt=m[10],Xt=m[11],dr=m[12],Ir=m[13],Ar=m[14],en=m[15],Ur=L[0],Qr=L[1],sn=L[2],Dn=L[3];return y[0]=Ur*z+Qr*ye+sn*ct+Dn*dr,y[1]=Ur*Y+Qr*ke+sn*St+Dn*Ir,y[2]=Ur*j+Qr*Fe+sn*bt+Dn*Ar,y[3]=Ur*Q+Qr*Ne+sn*Xt+Dn*en,Ur=L[4],Qr=L[5],sn=L[6],Dn=L[7],y[4]=Ur*z+Qr*ye+sn*ct+Dn*dr,y[5]=Ur*Y+Qr*ke+sn*St+Dn*Ir,y[6]=Ur*j+Qr*Fe+sn*bt+Dn*Ar,y[7]=Ur*Q+Qr*Ne+sn*Xt+Dn*en,Ur=L[8],Qr=L[9],sn=L[10],Dn=L[11],y[8]=Ur*z+Qr*ye+sn*ct+Dn*dr,y[9]=Ur*Y+Qr*ke+sn*St+Dn*Ir,y[10]=Ur*j+Qr*Fe+sn*bt+Dn*Ar,y[11]=Ur*Q+Qr*Ne+sn*Xt+Dn*en,Ur=L[12],Qr=L[13],sn=L[14],Dn=L[15],y[12]=Ur*z+Qr*ye+sn*ct+Dn*dr,y[13]=Ur*Y+Qr*ke+sn*St+Dn*Ir,y[14]=Ur*j+Qr*Fe+sn*bt+Dn*Ar,y[15]=Ur*Q+Qr*Ne+sn*Xt+Dn*en,y}function Kl(y,m,L){var z=L[0],Y=L[1],j=L[2],Q,ye,ke,Fe,Ne,ct,St,bt,Xt,dr,Ir,Ar;return m===y?(y[12]=m[0]*z+m[4]*Y+m[8]*j+m[12],y[13]=m[1]*z+m[5]*Y+m[9]*j+m[13],y[14]=m[2]*z+m[6]*Y+m[10]*j+m[14],y[15]=m[3]*z+m[7]*Y+m[11]*j+m[15]):(Q=m[0],ye=m[1],ke=m[2],Fe=m[3],Ne=m[4],ct=m[5],St=m[6],bt=m[7],Xt=m[8],dr=m[9],Ir=m[10],Ar=m[11],y[0]=Q,y[1]=ye,y[2]=ke,y[3]=Fe,y[4]=Ne,y[5]=ct,y[6]=St,y[7]=bt,y[8]=Xt,y[9]=dr,y[10]=Ir,y[11]=Ar,y[12]=Q*z+Ne*Y+Xt*j+m[12],y[13]=ye*z+ct*Y+dr*j+m[13],y[14]=ke*z+St*Y+Ir*j+m[14],y[15]=Fe*z+bt*Y+Ar*j+m[15]),y}function Nh(y,m,L){var z=L[0],Y=L[1],j=L[2];return y[0]=m[0]*z,y[1]=m[1]*z,y[2]=m[2]*z,y[3]=m[3]*z,y[4]=m[4]*Y,y[5]=m[5]*Y,y[6]=m[6]*Y,y[7]=m[7]*Y,y[8]=m[8]*j,y[9]=m[9]*j,y[10]=m[10]*j,y[11]=m[11]*j,y[12]=m[12],y[13]=m[13],y[14]=m[14],y[15]=m[15],y}function Uh(y,m,L){var z=Math.sin(L),Y=Math.cos(L),j=m[4],Q=m[5],ye=m[6],ke=m[7],Fe=m[8],Ne=m[9],ct=m[10],St=m[11];return m!==y&&(y[0]=m[0],y[1]=m[1],y[2]=m[2],y[3]=m[3],y[12]=m[12],y[13]=m[13],y[14]=m[14],y[15]=m[15]),y[4]=j*Y+Fe*z,y[5]=Q*Y+Ne*z,y[6]=ye*Y+ct*z,y[7]=ke*Y+St*z,y[8]=Fe*Y-j*z,y[9]=Ne*Y-Q*z,y[10]=ct*Y-ye*z,y[11]=St*Y-ke*z,y}function Lb(y,m,L){var z=Math.sin(L),Y=Math.cos(L),j=m[0],Q=m[1],ye=m[2],ke=m[3],Fe=m[4],Ne=m[5],ct=m[6],St=m[7];return m!==y&&(y[8]=m[8],y[9]=m[9],y[10]=m[10],y[11]=m[11],y[12]=m[12],y[13]=m[13],y[14]=m[14],y[15]=m[15]),y[0]=j*Y+Fe*z,y[1]=Q*Y+Ne*z,y[2]=ye*Y+ct*z,y[3]=ke*Y+St*z,y[4]=Fe*Y-j*z,y[5]=Ne*Y-Q*z,y[6]=ct*Y-ye*z,y[7]=St*Y-ke*z,y}function YT(y,m,L,z,Y){var j=1/Math.tan(m/2),Q;return y[0]=j/L,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=j,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[11]=-1,y[12]=0,y[13]=0,y[15]=0,Y!=null&&Y!==1/0?(Q=1/(z-Y),y[10]=(Y+z)*Q,y[14]=2*Y*z*Q):(y[10]=-1,y[14]=-2*z),y}function C8(y,m,L,z,Y,j,Q){var ye=1/(m-L),ke=1/(z-Y),Fe=1/(j-Q);return y[0]=-2*ye,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=-2*ke,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=2*Fe,y[11]=0,y[12]=(m+L)*ye,y[13]=(Y+z)*ke,y[14]=(Q+j)*Fe,y[15]=1,y}var L8=Vy;function K1(){var y=new _f(3);return _f!=Float32Array&&(y[0]=0,y[1]=0,y[2]=0),y}function P8(y){var m=new _f(3);return m[0]=y[0],m[1]=y[1],m[2]=y[2],m}function Pb(y,m,L){return y[0]=m[0]+L[0],y[1]=m[1]+L[1],y[2]=m[2]+L[2],y}function R8(y,m,L){return y[0]=m[0]-L[0],y[1]=m[1]-L[1],y[2]=m[2]-L[2],y}function D8(y,m,L){return y[0]=m[0]*L,y[1]=m[1]*L,y[2]=m[2]*L,y}function WT(y,m){var L=m[0],z=m[1],Y=m[2],j=L*L+z*z+Y*Y;return j>0&&(j=1/Math.sqrt(j)),y[0]=m[0]*j,y[1]=m[1]*j,y[2]=m[2]*j,y}function Uje(y,m){return y[0]*m[0]+y[1]*m[1]+y[2]*m[2]}function Vje(y,m,L){var z=m[0],Y=m[1],j=m[2],Q=L[0],ye=L[1],ke=L[2];return y[0]=Y*ke-j*ye,y[1]=j*Q-z*ke,y[2]=z*ye-Y*Q,y}function Hje(y,m,L){var z=m[0],Y=m[1],j=m[2];return y[0]=z*L[0]+Y*L[3]+j*L[6],y[1]=z*L[1]+Y*L[4]+j*L[7],y[2]=z*L[2]+Y*L[5]+j*L[8],y}var Gje=R8,YQt=function(){var y=K1();return function(m,L,z,Y,j,Q){var ye,ke;for(L||(L=3),z||(z=0),Y?ke=Math.min(Y*L+z,m.length):ke=m.length,ye=z;ye<ke;ye+=L)y[0]=m[ye],y[1]=m[ye+1],y[2]=m[ye+2],j(y,y,Q),m[ye]=y[0],m[ye+1]=y[1],m[ye+2]=y[2];return m}}();function Yje(){var y=new _f(4);return _f!=Float32Array&&(y[0]=0,y[1]=0,y[2]=0,y[3]=0),y}function Wje(y,m,L){return y[0]=m[0]*L,y[1]=m[1]*L,y[2]=m[2]*L,y[3]=m[3]*L,y}function Xje(y,m){return y[0]*m[0]+y[1]*m[1]+y[2]*m[2]+y[3]*m[3]}function ik(y,m,L){var z=m[0],Y=m[1],j=m[2],Q=m[3];return y[0]=L[0]*z+L[4]*Y+L[8]*j+L[12]*Q,y[1]=L[1]*z+L[5]*Y+L[9]*j+L[13]*Q,y[2]=L[2]*z+L[6]*Y+L[10]*j+L[14]*Q,y[3]=L[3]*z+L[7]*Y+L[11]*j+L[15]*Q,y}var WQt=function(){var y=Yje();return function(m,L,z,Y,j,Q){var ye,ke;for(L||(L=4),z||(z=0),Y?ke=Math.min(Y*L+z,m.length):ke=m.length,ye=z;ye<ke;ye+=L)y[0]=m[ye],y[1]=m[ye+1],y[2]=m[ye+2],y[3]=m[ye+3],j(y,y,Q),m[ye]=y[0],m[ye+1]=y[1],m[ye+2]=y[2],m[ye+3]=y[3];return m}}();function Zje(){var y=new _f(2);return _f!=Float32Array&&(y[0]=0,y[1]=0),y}function jje(y){var m=y[0],L=y[1];return m*m+L*L}var Kje=jje,XQt=function(){var y=Zje();return function(m,L,z,Y,j,Q){var ye,ke;for(L||(L=2),z||(z=0),Y?ke=Math.min(Y*L+z,m.length):ke=m.length,ye=z;ye<ke;ye+=L)y[0]=m[ye],y[1]=m[ye+1],j(y,y,Q),m[ye]=y[0],m[ye+1]=y[1];return m}}(),Jje=function(y){function m(L){y.call(this,L,By)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.createBucket=function(z){return new wo(z)},m.prototype.queryRadius=function(z){var Y=z;return sh("circle-radius",this,Y)+sh("circle-stroke-width",this,Y)+Md(this.paint.get("circle-translate"))},m.prototype.queryIntersectsFeature=function(z,Y,j,Q,ye,ke,Fe,Ne){for(var ct=Zp(z,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),ke.angle,Fe),St=this.paint.get("circle-radius").evaluate(Y,j),bt=this.paint.get("circle-stroke-width").evaluate(Y,j),Xt=St+bt,dr=this.paint.get("circle-pitch-alignment")==="map",Ir=dr?ct:Qje(ct,Ne),Ar=dr?Xt*Fe:Xt,en=0,Ur=Q;en<Ur.length;en+=1)for(var Qr=Ur[en],sn=0,Dn=Qr;sn<Dn.length;sn+=1){var li=Dn[sn],ii=dr?li:EK(li,Ne),Bi=Ar,Ai=ik([],[li.x,li.y,0,1],Ne);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Bi*=Ai[3]/ke.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Bi*=ke.cameraToCenterDistance/Ai[3]),$a(Ir,ii,Bi))return!0}return!1},m}(_n);function EK(y,m){var L=ik([],[y.x,y.y,0,1],m);return new u(L[0]/L[3],L[1]/L[3])}function Qje(y,m){return y.map(function(L){return EK(L,m)})}var kK=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m}(wo);V("HeatmapBucket",kK,{omit:["layers"]});function I8(y,m,L,z){var Y=m.width,j=m.height;if(!z)z=new Uint8Array(Y*j*L);else if(z instanceof Uint8ClampedArray)z=new Uint8Array(z.buffer);else if(z.length!==Y*j*L)throw new RangeError("mismatched image size");return y.width=Y,y.height=j,y.data=z,y}function CK(y,m,L){var z=m.width,Y=m.height;if(!(z===y.width&&Y===y.height)){var j=I8({},{width:z,height:Y},L);F8(y,j,{x:0,y:0},{x:0,y:0},{width:Math.min(y.width,z),height:Math.min(y.height,Y)},L),y.width=z,y.height=Y,y.data=j.data}}function F8(y,m,L,z,Y,j){if(Y.width===0||Y.height===0)return m;if(Y.width>y.width||Y.height>y.height||L.x>y.width-Y.width||L.y>y.height-Y.height)throw new RangeError("out of range source coordinates for image copy");if(Y.width>m.width||Y.height>m.height||z.x>m.width-Y.width||z.y>m.height-Y.height)throw new RangeError("out of range destination coordinates for image copy");for(var Q=y.data,ye=m.data,ke=0;ke<Y.height;ke++)for(var Fe=((L.y+ke)*y.width+L.x)*j,Ne=((z.y+ke)*m.width+z.x)*j,ct=0;ct<Y.width*j;ct++)ye[Ne+ct]=Q[Fe+ct];return m}var J1=function(m,L){I8(this,m,1,L)};J1.prototype.resize=function(m){CK(this,m,1)},J1.prototype.clone=function(){return new J1({width:this.width,height:this.height},new Uint8Array(this.data))},J1.copy=function(m,L,z,Y,j){F8(m,L,z,Y,j,1)};var Vh=function(m,L){I8(this,m,4,L)};Vh.prototype.resize=function(m){CK(this,m,4)},Vh.prototype.replace=function(m,L){L?this.data.set(m):m instanceof Uint8ClampedArray?this.data=new Uint8Array(m.buffer):this.data=m},Vh.prototype.clone=function(){return new Vh({width:this.width,height:this.height},new Uint8Array(this.data))},Vh.copy=function(m,L,z,Y,j){F8(m,L,z,Y,j,4)},V("AlphaImage",J1),V("RGBAImage",Vh);var $je=new jr({"heatmap-radius":new Yt(dn.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Yt(dn.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ye(dn.paint_heatmap["heatmap-intensity"]),"heatmap-color":new $r(dn.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ye(dn.paint_heatmap["heatmap-opacity"])}),eKe={paint:$je};function LK(y){var m={},L=y.resolution||256,z=y.clips?y.clips.length:1,Y=y.image||new Vh({width:L,height:z}),j=function(en,Ur,Qr){m[y.evaluationKey]=Qr;var sn=y.expression.evaluate(m);Y.data[en+Ur+0]=Math.floor(sn.r*255/sn.a),Y.data[en+Ur+1]=Math.floor(sn.g*255/sn.a),Y.data[en+Ur+2]=Math.floor(sn.b*255/sn.a),Y.data[en+Ur+3]=Math.floor(sn.a*255)};if(y.clips)for(var Fe=0,Ne=0;Fe<z;++Fe,Ne+=L*4)for(var ct=0,St=0;ct<L;ct++,St+=4){var bt=ct/(L-1),Xt=y.clips[Fe],dr=Xt.start,Ir=Xt.end,Ar=dr*(1-bt)+Ir*bt;j(Ne,St,Ar)}else for(var Q=0,ye=0;Q<L;Q++,ye+=4){var ke=Q/(L-1);j(0,ye,ke)}return Y}var tKe=function(y){function m(L){y.call(this,L,eKe),this._updateColorRamp()}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.createBucket=function(z){return new kK(z)},m.prototype._handleSpecialPaintPropertyUpdate=function(z){z==="heatmap-color"&&this._updateColorRamp()},m.prototype._updateColorRamp=function(){var z=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=LK({expression:z,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},m.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},m.prototype.queryRadius=function(){return 0},m.prototype.queryIntersectsFeature=function(){return!1},m.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},m}(_n),rKe=new jr({"hillshade-illumination-direction":new Ye(dn.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ye(dn.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ye(dn.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ye(dn.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ye(dn.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ye(dn.paint_hillshade["hillshade-accent-color"])}),nKe={paint:rKe},iKe=function(y){function m(L){y.call(this,L,nKe)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},m}(_n),aKe=Vn([{name:"a_pos",components:2,type:"Int16"}],4),oKe=aKe.members,q8=ak,sKe=ak;function ak(y,m,L){L=L||2;var z=m&&m.length,Y=z?m[0]*L:y.length,j=PK(y,0,Y,L,!0),Q=[];if(!j||j.next===j.prev)return Q;var ye,ke,Fe,Ne,ct,St,bt;if(z&&(j=hKe(y,m,j,L)),y.length>80*L){ye=Fe=y[0],ke=Ne=y[1];for(var Xt=L;Xt<Y;Xt+=L)ct=y[Xt],St=y[Xt+1],ct<ye&&(ye=ct),St<ke&&(ke=St),ct>Fe&&(Fe=ct),St>Ne&&(Ne=St);bt=Math.max(Fe-ye,Ne-ke),bt=bt!==0?1/bt:0}return XT(j,Q,L,ye,ke,bt),Q}function PK(y,m,L,z,Y){var j,Q;if(Y===B8(y,m,L,z)>0)for(j=m;j<L;j+=z)Q=IK(j,y[j],y[j+1],Q);else for(j=L-z;j>=m;j-=z)Q=IK(j,y[j],y[j+1],Q);return Q&&ok(Q,Q.next)&&(jT(Q),Q=Q.next),Q}function Hy(y,m){if(!y)return y;m||(m=y);var L=y,z;do if(z=!1,!L.steiner&&(ok(L,L.next)||Pu(L.prev,L,L.next)===0)){if(jT(L),L=m=L.prev,L===L.next)break;z=!0}else L=L.next;while(z||L!==m);return m}function XT(y,m,L,z,Y,j,Q){if(y){!Q&&j&&yKe(y,z,Y,j);for(var ye=y,ke,Fe;y.prev!==y.next;){if(ke=y.prev,Fe=y.next,j?uKe(y,z,Y,j):lKe(y)){m.push(ke.i/L),m.push(y.i/L),m.push(Fe.i/L),jT(y),y=Fe.next,ye=Fe.next;continue}if(y=Fe,y===ye){Q?Q===1?(y=fKe(Hy(y),m,L),XT(y,m,L,z,Y,j,2)):Q===2&&cKe(y,m,L,z,Y,j):XT(Hy(y),m,L,z,Y,j,1);break}}}}function lKe(y){var m=y.prev,L=y,z=y.next;if(Pu(m,L,z)>=0)return!1;for(var Y=y.next.next;Y!==y.prev;){if(Rb(m.x,m.y,L.x,L.y,z.x,z.y,Y.x,Y.y)&&Pu(Y.prev,Y,Y.next)>=0)return!1;Y=Y.next}return!0}function uKe(y,m,L,z){var Y=y.prev,j=y,Q=y.next;if(Pu(Y,j,Q)>=0)return!1;for(var ye=Y.x<j.x?Y.x<Q.x?Y.x:Q.x:j.x<Q.x?j.x:Q.x,ke=Y.y<j.y?Y.y<Q.y?Y.y:Q.y:j.y<Q.y?j.y:Q.y,Fe=Y.x>j.x?Y.x>Q.x?Y.x:Q.x:j.x>Q.x?j.x:Q.x,Ne=Y.y>j.y?Y.y>Q.y?Y.y:Q.y:j.y>Q.y?j.y:Q.y,ct=z8(ye,ke,m,L,z),St=z8(Fe,Ne,m,L,z),bt=y.prevZ,Xt=y.nextZ;bt&&bt.z>=ct&&Xt&&Xt.z<=St;){if(bt!==y.prev&&bt!==y.next&&Rb(Y.x,Y.y,j.x,j.y,Q.x,Q.y,bt.x,bt.y)&&Pu(bt.prev,bt,bt.next)>=0||(bt=bt.prevZ,Xt!==y.prev&&Xt!==y.next&&Rb(Y.x,Y.y,j.x,j.y,Q.x,Q.y,Xt.x,Xt.y)&&Pu(Xt.prev,Xt,Xt.next)>=0))return!1;Xt=Xt.nextZ}for(;bt&&bt.z>=ct;){if(bt!==y.prev&&bt!==y.next&&Rb(Y.x,Y.y,j.x,j.y,Q.x,Q.y,bt.x,bt.y)&&Pu(bt.prev,bt,bt.next)>=0)return!1;bt=bt.prevZ}for(;Xt&&Xt.z<=St;){if(Xt!==y.prev&&Xt!==y.next&&Rb(Y.x,Y.y,j.x,j.y,Q.x,Q.y,Xt.x,Xt.y)&&Pu(Xt.prev,Xt,Xt.next)>=0)return!1;Xt=Xt.nextZ}return!0}function fKe(y,m,L){var z=y;do{var Y=z.prev,j=z.next.next;!ok(Y,j)&&RK(Y,z,z.next,j)&&ZT(Y,j)&&ZT(j,Y)&&(m.push(Y.i/L),m.push(z.i/L),m.push(j.i/L),jT(z),jT(z.next),z=y=j),z=z.next}while(z!==y);return Hy(z)}function cKe(y,m,L,z,Y,j){var Q=y;do{for(var ye=Q.next.next;ye!==Q.prev;){if(Q.i!==ye.i&&_Ke(Q,ye)){var ke=DK(Q,ye);Q=Hy(Q,Q.next),ke=Hy(ke,ke.next),XT(Q,m,L,z,Y,j),XT(ke,m,L,z,Y,j);return}ye=ye.next}Q=Q.next}while(Q!==y)}function hKe(y,m,L,z){var Y=[],j,Q,ye,ke,Fe;for(j=0,Q=m.length;j<Q;j++)ye=m[j]*z,ke=j<Q-1?m[j+1]*z:y.length,Fe=PK(y,ye,ke,z,!1),Fe===Fe.next&&(Fe.steiner=!0),Y.push(xKe(Fe));for(Y.sort(vKe),j=0;j<Y.length;j++)dKe(Y[j],L),L=Hy(L,L.next);return L}function vKe(y,m){return y.x-m.x}function dKe(y,m){if(m=pKe(y,m),m){var L=DK(m,y);Hy(m,m.next),Hy(L,L.next)}}function pKe(y,m){var L=m,z=y.x,Y=y.y,j=-1/0,Q;do{if(Y<=L.y&&Y>=L.next.y&&L.next.y!==L.y){var ye=L.x+(Y-L.y)*(L.next.x-L.x)/(L.next.y-L.y);if(ye<=z&&ye>j){if(j=ye,ye===z){if(Y===L.y)return L;if(Y===L.next.y)return L.next}Q=L.x<L.next.x?L:L.next}}L=L.next}while(L!==m);if(!Q)return null;if(z===j)return Q;var ke=Q,Fe=Q.x,Ne=Q.y,ct=1/0,St;L=Q;do z>=L.x&&L.x>=Fe&&z!==L.x&&Rb(Y<Ne?z:j,Y,Fe,Ne,Y<Ne?j:z,Y,L.x,L.y)&&(St=Math.abs(Y-L.y)/(z-L.x),ZT(L,y)&&(St<ct||St===ct&&(L.x>Q.x||L.x===Q.x&&gKe(Q,L)))&&(Q=L,ct=St)),L=L.next;while(L!==ke);return Q}function gKe(y,m){return Pu(y.prev,y,m.prev)<0&&Pu(m.next,y,y.next)<0}function yKe(y,m,L,z){var Y=y;do Y.z===null&&(Y.z=z8(Y.x,Y.y,m,L,z)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==y);Y.prevZ.nextZ=null,Y.prevZ=null,mKe(Y)}function mKe(y){var m,L,z,Y,j,Q,ye,ke,Fe=1;do{for(L=y,y=null,j=null,Q=0;L;){for(Q++,z=L,ye=0,m=0;m<Fe&&(ye++,z=z.nextZ,!!z);m++);for(ke=Fe;ye>0||ke>0&&z;)ye!==0&&(ke===0||!z||L.z<=z.z)?(Y=L,L=L.nextZ,ye--):(Y=z,z=z.nextZ,ke--),j?j.nextZ=Y:y=Y,Y.prevZ=j,j=Y;L=z}j.nextZ=null,Fe*=2}while(Q>1);return y}function z8(y,m,L,z,Y){return y=32767*(y-L)*Y,m=32767*(m-z)*Y,y=(y|y<<8)&16711935,y=(y|y<<4)&252645135,y=(y|y<<2)&858993459,y=(y|y<<1)&1431655765,m=(m|m<<8)&16711935,m=(m|m<<4)&252645135,m=(m|m<<2)&858993459,m=(m|m<<1)&1431655765,y|m<<1}function xKe(y){var m=y,L=y;do(m.x<L.x||m.x===L.x&&m.y<L.y)&&(L=m),m=m.next;while(m!==y);return L}function Rb(y,m,L,z,Y,j,Q,ye){return(Y-Q)*(m-ye)-(y-Q)*(j-ye)>=0&&(y-Q)*(z-ye)-(L-Q)*(m-ye)>=0&&(L-Q)*(j-ye)-(Y-Q)*(z-ye)>=0}function _Ke(y,m){return y.next.i!==m.i&&y.prev.i!==m.i&&!bKe(y,m)&&(ZT(y,m)&&ZT(m,y)&&wKe(y,m)&&(Pu(y.prev,y,m.prev)||Pu(y,m.prev,m))||ok(y,m)&&Pu(y.prev,y,y.next)>0&&Pu(m.prev,m,m.next)>0)}function Pu(y,m,L){return(m.y-y.y)*(L.x-m.x)-(m.x-y.x)*(L.y-m.y)}function ok(y,m){return y.x===m.x&&y.y===m.y}function RK(y,m,L,z){var Y=lk(Pu(y,m,L)),j=lk(Pu(y,m,z)),Q=lk(Pu(L,z,y)),ye=lk(Pu(L,z,m));return!!(Y!==j&&Q!==ye||Y===0&&sk(y,L,m)||j===0&&sk(y,z,m)||Q===0&&sk(L,y,z)||ye===0&&sk(L,m,z))}function sk(y,m,L){return m.x<=Math.max(y.x,L.x)&&m.x>=Math.min(y.x,L.x)&&m.y<=Math.max(y.y,L.y)&&m.y>=Math.min(y.y,L.y)}function lk(y){return y>0?1:y<0?-1:0}function bKe(y,m){var L=y;do{if(L.i!==y.i&&L.next.i!==y.i&&L.i!==m.i&&L.next.i!==m.i&&RK(L,L.next,y,m))return!0;L=L.next}while(L!==y);return!1}function ZT(y,m){return Pu(y.prev,y,y.next)<0?Pu(y,m,y.next)>=0&&Pu(y,y.prev,m)>=0:Pu(y,m,y.prev)<0||Pu(y,y.next,m)<0}function wKe(y,m){var L=y,z=!1,Y=(y.x+m.x)/2,j=(y.y+m.y)/2;do L.y>j!=L.next.y>j&&L.next.y!==L.y&&Y<(L.next.x-L.x)*(j-L.y)/(L.next.y-L.y)+L.x&&(z=!z),L=L.next;while(L!==y);return z}function DK(y,m){var L=new O8(y.i,y.x,y.y),z=new O8(m.i,m.x,m.y),Y=y.next,j=m.prev;return y.next=m,m.prev=y,L.next=Y,Y.prev=L,z.next=L,L.prev=z,j.next=z,z.prev=j,z}function IK(y,m,L,z){var Y=new O8(y,m,L);return z?(Y.next=z.next,Y.prev=z,z.next.prev=Y,z.next=Y):(Y.prev=Y,Y.next=Y),Y}function jT(y){y.next.prev=y.prev,y.prev.next=y.next,y.prevZ&&(y.prevZ.nextZ=y.nextZ),y.nextZ&&(y.nextZ.prevZ=y.prevZ)}function O8(y,m,L){this.i=y,this.x=m,this.y=L,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}ak.deviation=function(y,m,L,z){var Y=m&&m.length,j=Y?m[0]*L:y.length,Q=Math.abs(B8(y,0,j,L));if(Y)for(var ye=0,ke=m.length;ye<ke;ye++){var Fe=m[ye]*L,Ne=ye<ke-1?m[ye+1]*L:y.length;Q-=Math.abs(B8(y,Fe,Ne,L))}var ct=0;for(ye=0;ye<z.length;ye+=3){var St=z[ye]*L,bt=z[ye+1]*L,Xt=z[ye+2]*L;ct+=Math.abs((y[St]-y[Xt])*(y[bt+1]-y[St+1])-(y[St]-y[bt])*(y[Xt+1]-y[St+1]))}return Q===0&&ct===0?0:Math.abs((ct-Q)/Q)};function B8(y,m,L,z){for(var Y=0,j=m,Q=L-z;j<L;j+=z)Y+=(y[Q]-y[j])*(y[j+1]+y[Q+1]),Q=j;return Y}ak.flatten=function(y){for(var m=y[0][0].length,L={vertices:[],holes:[],dimensions:m},z=0,Y=0;Y<y.length;Y++){for(var j=0;j<y[Y].length;j++)for(var Q=0;Q<m;Q++)L.vertices.push(y[Y][j][Q]);Y>0&&(z+=y[Y-1].length,L.holes.push(z))}return L},q8.default=sKe;function TKe(y,m,L,z,Y){FK(y,m,L||0,z||y.length-1,Y||AKe)}function FK(y,m,L,z,Y){for(;z>L;){if(z-L>600){var j=z-L+1,Q=m-L+1,ye=Math.log(j),ke=.5*Math.exp(2*ye/3),Fe=.5*Math.sqrt(ye*ke*(j-ke)/j)*(Q-j/2<0?-1:1),Ne=Math.max(L,Math.floor(m-Q*ke/j+Fe)),ct=Math.min(z,Math.floor(m+(j-Q)*ke/j+Fe));FK(y,m,Ne,ct,Y)}var St=y[m],bt=L,Xt=z;for(KT(y,L,m),Y(y[z],St)>0&&KT(y,L,z);bt<Xt;){for(KT(y,bt,Xt),bt++,Xt--;Y(y[bt],St)<0;)bt++;for(;Y(y[Xt],St)>0;)Xt--}Y(y[L],St)===0?KT(y,L,Xt):(Xt++,KT(y,Xt,z)),Xt<=m&&(L=Xt+1),m<=Xt&&(z=Xt-1)}}function KT(y,m,L){var z=y[m];y[m]=y[L],y[L]=z}function AKe(y,m){return y<m?-1:y>m?1:0}function N8(y,m){var L=y.length;if(L<=1)return[y];for(var z=[],Y,j,Q=0;Q<L;Q++){var ye=ne(y[Q]);ye!==0&&(y[Q].area=Math.abs(ye),j===void 0&&(j=ye<0),j===ye<0?(Y&&z.push(Y),Y=[y[Q]]):Y.push(y[Q]))}if(Y&&z.push(Y),m>1)for(var ke=0;ke<z.length;ke++)z[ke].length<=m||(TKe(z[ke],m,1,z[ke].length-1,MKe),z[ke]=z[ke].slice(0,m));return z}function MKe(y,m){return m.area-y.area}function U8(y,m,L){for(var z=L.patternDependencies,Y=!1,j=0,Q=m;j<Q.length;j+=1){var ye=Q[j],ke=ye.paint.get(y+"-pattern");ke.isConstant()||(Y=!0);var Fe=ke.constantOr(null);Fe&&(Y=!0,z[Fe.to]=!0,z[Fe.from]=!0)}return Y}function V8(y,m,L,z,Y){for(var j=Y.patternDependencies,Q=0,ye=m;Q<ye.length;Q+=1){var ke=ye[Q],Fe=ke.paint.get(y+"-pattern"),Ne=Fe.value;if(Ne.kind!=="constant"){var ct=Ne.evaluate({zoom:z-1},L,{},Y.availableImages),St=Ne.evaluate({zoom:z},L,{},Y.availableImages),bt=Ne.evaluate({zoom:z+1},L,{},Y.availableImages);ct=ct&&ct.name?ct.name:ct,St=St&&St.name?St.name:St,bt=bt&&bt.name?bt.name:bt,j[ct]=!0,j[St]=!0,j[bt]=!0,L.patterns[ke.id]={min:ct,mid:St,max:bt}}}return L}var SKe=500,jp=function(m){this.zoom=m.zoom,this.overscaling=m.overscaling,this.layers=m.layers,this.layerIds=this.layers.map(function(L){return L.id}),this.index=m.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new hn,this.indexArray=new Ei,this.indexArray2=new _a,this.programConfigurations=new Wr(m.layers,m.zoom),this.segments=new Qa,this.segments2=new Qa,this.stateDependentLayerIds=this.layers.filter(function(L){return L.isStateDependent()}).map(function(L){return L.id})};jp.prototype.populate=function(m,L,z){this.hasPattern=U8("fill",this.layers,L);for(var Y=this.layers[0].layout.get("fill-sort-key"),j=[],Q=0,ye=m;Q<ye.length;Q+=1){var ke=ye[Q],Fe=ke.feature,Ne=ke.id,ct=ke.index,St=ke.sourceLayerIndex,bt=this.layers[0]._featureFilter.needGeometry,Xt=Ra(Fe,bt);if(this.layers[0]._featureFilter.filter(new kn(this.zoom),Xt,z)){var dr=Y?Y.evaluate(Xt,{},z,L.availableImages):void 0,Ir={id:Ne,properties:Fe.properties,type:Fe.type,sourceLayerIndex:St,index:ct,geometry:bt?Xt.geometry:xi(Fe),patterns:{},sortKey:dr};j.push(Ir)}}Y&&j.sort(function(Ai,Di){return Ai.sortKey-Di.sortKey});for(var Ar=0,en=j;Ar<en.length;Ar+=1){var Ur=en[Ar],Qr=Ur,sn=Qr.geometry,Dn=Qr.index,li=Qr.sourceLayerIndex;if(this.hasPattern){var ii=V8("fill",this.layers,Ur,this.zoom,L);this.patternFeatures.push(ii)}else this.addFeature(Ur,sn,Dn,z,{});var Bi=m[Dn].feature;L.featureIndex.insert(Bi,sn,Dn,li,this.index)}},jp.prototype.update=function(m,L,z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(m,L,this.stateDependentLayers,z)},jp.prototype.addFeatures=function(m,L,z){for(var Y=0,j=this.patternFeatures;Y<j.length;Y+=1){var Q=j[Y];this.addFeature(Q,Q.geometry,Q.index,L,z)}},jp.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},jp.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},jp.prototype.upload=function(m){this.uploaded||(this.layoutVertexBuffer=m.createVertexBuffer(this.layoutVertexArray,oKe),this.indexBuffer=m.createIndexBuffer(this.indexArray),this.indexBuffer2=m.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(m),this.uploaded=!0},jp.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},jp.prototype.addFeature=function(m,L,z,Y,j){for(var Q=0,ye=N8(L,SKe);Q<ye.length;Q+=1){for(var ke=ye[Q],Fe=0,Ne=0,ct=ke;Ne<ct.length;Ne+=1){var St=ct[Ne];Fe+=St.length}for(var bt=this.segments.prepareSegment(Fe,this.layoutVertexArray,this.indexArray),Xt=bt.vertexLength,dr=[],Ir=[],Ar=0,en=ke;Ar<en.length;Ar+=1){var Ur=en[Ar];if(Ur.length!==0){Ur!==ke[0]&&Ir.push(dr.length/2);var Qr=this.segments2.prepareSegment(Ur.length,this.layoutVertexArray,this.indexArray2),sn=Qr.vertexLength;this.layoutVertexArray.emplaceBack(Ur[0].x,Ur[0].y),this.indexArray2.emplaceBack(sn+Ur.length-1,sn),dr.push(Ur[0].x),dr.push(Ur[0].y);for(var Dn=1;Dn<Ur.length;Dn++)this.layoutVertexArray.emplaceBack(Ur[Dn].x,Ur[Dn].y),this.indexArray2.emplaceBack(sn+Dn-1,sn+Dn),dr.push(Ur[Dn].x),dr.push(Ur[Dn].y);Qr.vertexLength+=Ur.length,Qr.primitiveLength+=Ur.length}}for(var li=q8(dr,Ir),ii=0;ii<li.length;ii+=3)this.indexArray.emplaceBack(Xt+li[ii],Xt+li[ii+1],Xt+li[ii+2]);bt.vertexLength+=Fe,bt.primitiveLength+=li.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,m,z,j,Y)},V("FillBucket",jp,{omit:["layers","patternFeatures"]});var EKe=new jr({"fill-sort-key":new Yt(dn.layout_fill["fill-sort-key"])}),kKe=new jr({"fill-antialias":new Ye(dn.paint_fill["fill-antialias"]),"fill-opacity":new Yt(dn.paint_fill["fill-opacity"]),"fill-color":new Yt(dn.paint_fill["fill-color"]),"fill-outline-color":new Yt(dn.paint_fill["fill-outline-color"]),"fill-translate":new Ye(dn.paint_fill["fill-translate"]),"fill-translate-anchor":new Ye(dn.paint_fill["fill-translate-anchor"]),"fill-pattern":new lr(dn.paint_fill["fill-pattern"])}),CKe={paint:kKe,layout:EKe},LKe=function(y){function m(L){y.call(this,L,CKe)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.recalculate=function(z,Y){y.prototype.recalculate.call(this,z,Y);var j=this.paint._values["fill-outline-color"];j.value.kind==="constant"&&j.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},m.prototype.createBucket=function(z){return new jp(z)},m.prototype.queryRadius=function(){return Md(this.paint.get("fill-translate"))},m.prototype.queryIntersectsFeature=function(z,Y,j,Q,ye,ke,Fe){var Ne=Zp(z,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),ke.angle,Fe);return Go(Ne,Q)},m.prototype.isTileClipped=function(){return!0},m}(_n),PKe=Vn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),RKe=PKe.members,qK=Db;function Db(y,m,L,z,Y){this.properties={},this.extent=L,this.type=0,this._pbf=y,this._geometry=-1,this._keys=z,this._values=Y,y.readFields(DKe,this,m)}function DKe(y,m,L){y==1?m.id=L.readVarint():y==2?IKe(L,m):y==3?m.type=L.readVarint():y==4&&(m._geometry=L.pos)}function IKe(y,m){for(var L=y.readVarint()+y.pos;y.pos<L;){var z=m._keys[y.readVarint()],Y=m._values[y.readVarint()];m.properties[z]=Y}}Db.types=["Unknown","Point","LineString","Polygon"],Db.prototype.loadGeometry=function(){var y=this._pbf;y.pos=this._geometry;for(var m=y.readVarint()+y.pos,L=1,z=0,Y=0,j=0,Q=[],ye;y.pos<m;){if(z<=0){var ke=y.readVarint();L=ke&7,z=ke>>3}if(z--,L===1||L===2)Y+=y.readSVarint(),j+=y.readSVarint(),L===1&&(ye&&Q.push(ye),ye=[]),ye.push(new u(Y,j));else if(L===7)ye&&ye.push(ye[0].clone());else throw new Error("unknown command "+L)}return ye&&Q.push(ye),Q},Db.prototype.bbox=function(){var y=this._pbf;y.pos=this._geometry;for(var m=y.readVarint()+y.pos,L=1,z=0,Y=0,j=0,Q=1/0,ye=-1/0,ke=1/0,Fe=-1/0;y.pos<m;){if(z<=0){var Ne=y.readVarint();L=Ne&7,z=Ne>>3}if(z--,L===1||L===2)Y+=y.readSVarint(),j+=y.readSVarint(),Y<Q&&(Q=Y),Y>ye&&(ye=Y),j<ke&&(ke=j),j>Fe&&(Fe=j);else if(L!==7)throw new Error("unknown command "+L)}return[Q,ke,ye,Fe]},Db.prototype.toGeoJSON=function(y,m,L){var z=this.extent*Math.pow(2,L),Y=this.extent*y,j=this.extent*m,Q=this.loadGeometry(),ye=Db.types[this.type],ke,Fe;function Ne(bt){for(var Xt=0;Xt<bt.length;Xt++){var dr=bt[Xt],Ir=180-(dr.y+j)*360/z;bt[Xt]=[(dr.x+Y)*360/z-180,360/Math.PI*Math.atan(Math.exp(Ir*Math.PI/180))-90]}}switch(this.type){case 1:var ct=[];for(ke=0;ke<Q.length;ke++)ct[ke]=Q[ke][0];Q=ct,Ne(Q);break;case 2:for(ke=0;ke<Q.length;ke++)Ne(Q[ke]);break;case 3:for(Q=FKe(Q),ke=0;ke<Q.length;ke++)for(Fe=0;Fe<Q[ke].length;Fe++)Ne(Q[ke][Fe]);break}Q.length===1?Q=Q[0]:ye="Multi"+ye;var St={type:"Feature",geometry:{type:ye,coordinates:Q},properties:this.properties};return"id"in this&&(St.id=this.id),St};function FKe(y){var m=y.length;if(m<=1)return[y];for(var L=[],z,Y,j=0;j<m;j++){var Q=qKe(y[j]);Q!==0&&(Y===void 0&&(Y=Q<0),Y===Q<0?(z&&L.push(z),z=[y[j]]):z.push(y[j]))}return z&&L.push(z),L}function qKe(y){for(var m=0,L=0,z=y.length,Y=z-1,j,Q;L<z;Y=L++)j=y[L],Q=y[Y],m+=(Q.x-j.x)*(j.y+Q.y);return m}var zK=OK;function OK(y,m){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=y,this._keys=[],this._values=[],this._features=[],y.readFields(zKe,this,m),this.length=this._features.length}function zKe(y,m,L){y===15?m.version=L.readVarint():y===1?m.name=L.readString():y===5?m.extent=L.readVarint():y===2?m._features.push(L.pos):y===3?m._keys.push(L.readString()):y===4&&m._values.push(OKe(L))}function OKe(y){for(var m=null,L=y.readVarint()+y.pos;y.pos<L;){var z=y.readVarint()>>3;m=z===1?y.readString():z===2?y.readFloat():z===3?y.readDouble():z===4?y.readVarint64():z===5?y.readVarint():z===6?y.readSVarint():z===7?y.readBoolean():null}return m}OK.prototype.feature=function(y){if(y<0||y>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[y];var m=this._pbf.readVarint()+this._pbf.pos;return new qK(this._pbf,m,this.extent,this._keys,this._values)};var BKe=NKe;function NKe(y,m){this.layers=y.readFields(UKe,{},m)}function UKe(y,m,L){if(y===3){var z=new zK(L,L.readVarint()+L.pos);z.length&&(m[z.name]=z)}}var VKe=BKe,HKe=qK,GKe=zK,Ib={VectorTile:VKe,VectorTileFeature:HKe,VectorTileLayer:GKe},YKe=Ib.VectorTileFeature.types,WKe=500,H8=Math.pow(2,13);function JT(y,m,L,z,Y,j,Q,ye){y.emplaceBack(m,L,Math.floor(z*H8)*2+Q,Y*H8*2,j*H8*2,Math.round(ye))}var Kp=function(m){this.zoom=m.zoom,this.overscaling=m.overscaling,this.layers=m.layers,this.layerIds=this.layers.map(function(L){return L.id}),this.index=m.index,this.hasPattern=!1,this.layoutVertexArray=new Jn,this.indexArray=new Ei,this.programConfigurations=new Wr(m.layers,m.zoom),this.segments=new Qa,this.stateDependentLayerIds=this.layers.filter(function(L){return L.isStateDependent()}).map(function(L){return L.id})};Kp.prototype.populate=function(m,L,z){this.features=[],this.hasPattern=U8("fill-extrusion",this.layers,L);for(var Y=0,j=m;Y<j.length;Y+=1){var Q=j[Y],ye=Q.feature,ke=Q.id,Fe=Q.index,Ne=Q.sourceLayerIndex,ct=this.layers[0]._featureFilter.needGeometry,St=Ra(ye,ct);if(this.layers[0]._featureFilter.filter(new kn(this.zoom),St,z)){var bt={id:ke,sourceLayerIndex:Ne,index:Fe,geometry:ct?St.geometry:xi(ye),properties:ye.properties,type:ye.type,patterns:{}};this.hasPattern?this.features.push(V8("fill-extrusion",this.layers,bt,this.zoom,L)):this.addFeature(bt,bt.geometry,Fe,z,{}),L.featureIndex.insert(ye,bt.geometry,Fe,Ne,this.index,!0)}}},Kp.prototype.addFeatures=function(m,L,z){for(var Y=0,j=this.features;Y<j.length;Y+=1){var Q=j[Y],ye=Q.geometry;this.addFeature(Q,ye,Q.index,L,z)}},Kp.prototype.update=function(m,L,z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(m,L,this.stateDependentLayers,z)},Kp.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Kp.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Kp.prototype.upload=function(m){this.uploaded||(this.layoutVertexBuffer=m.createVertexBuffer(this.layoutVertexArray,RKe),this.indexBuffer=m.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(m),this.uploaded=!0},Kp.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Kp.prototype.addFeature=function(m,L,z,Y,j){for(var Q=0,ye=N8(L,WKe);Q<ye.length;Q+=1){for(var ke=ye[Q],Fe=0,Ne=0,ct=ke;Ne<ct.length;Ne+=1){var St=ct[Ne];Fe+=St.length}for(var bt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Xt=0,dr=ke;Xt<dr.length;Xt+=1){var Ir=dr[Xt];if(Ir.length!==0&&!ZKe(Ir))for(var Ar=0,en=0;en<Ir.length;en++){var Ur=Ir[en];if(en>=1){var Qr=Ir[en-1];if(!XKe(Ur,Qr)){bt.vertexLength+4>Qa.MAX_VERTEX_ARRAY_LENGTH&&(bt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var sn=Ur.sub(Qr)._perp()._unit(),Dn=Qr.dist(Ur);Ar+Dn>32768&&(Ar=0),JT(this.layoutVertexArray,Ur.x,Ur.y,sn.x,sn.y,0,0,Ar),JT(this.layoutVertexArray,Ur.x,Ur.y,sn.x,sn.y,0,1,Ar),Ar+=Dn,JT(this.layoutVertexArray,Qr.x,Qr.y,sn.x,sn.y,0,0,Ar),JT(this.layoutVertexArray,Qr.x,Qr.y,sn.x,sn.y,0,1,Ar);var li=bt.vertexLength;this.indexArray.emplaceBack(li,li+2,li+1),this.indexArray.emplaceBack(li+1,li+2,li+3),bt.vertexLength+=4,bt.primitiveLength+=2}}}}if(bt.vertexLength+Fe>Qa.MAX_VERTEX_ARRAY_LENGTH&&(bt=this.segments.prepareSegment(Fe,this.layoutVertexArray,this.indexArray)),YKe[m.type]==="Polygon"){for(var ii=[],Bi=[],Ai=bt.vertexLength,Di=0,wa=ke;Di<wa.length;Di+=1){var Ni=wa[Di];if(Ni.length!==0){Ni!==ke[0]&&Bi.push(ii.length/2);for(var Yi=0;Yi<Ni.length;Yi++){var Za=Ni[Yi];JT(this.layoutVertexArray,Za.x,Za.y,0,0,1,1,0),ii.push(Za.x),ii.push(Za.y)}}}for(var ga=q8(ii,Bi),Io=0;Io<ga.length;Io+=3)this.indexArray.emplaceBack(Ai+ga[Io],Ai+ga[Io+2],Ai+ga[Io+1]);bt.primitiveLength+=ga.length/3,bt.vertexLength+=Fe}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,m,z,j,Y)},V("FillExtrusionBucket",Kp,{omit:["layers","features"]});function XKe(y,m){return y.x===m.x&&(y.x<0||y.x>cn)||y.y===m.y&&(y.y<0||y.y>cn)}function ZKe(y){return y.every(function(m){return m.x<0})||y.every(function(m){return m.x>cn})||y.every(function(m){return m.y<0})||y.every(function(m){return m.y>cn})}var jKe=new jr({"fill-extrusion-opacity":new Ye(dn["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Yt(dn["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ye(dn["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ye(dn["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new lr(dn["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Yt(dn["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Yt(dn["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ye(dn["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),KKe={paint:jKe},JKe=function(y){function m(L){y.call(this,L,KKe)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.createBucket=function(z){return new Kp(z)},m.prototype.queryRadius=function(){return Md(this.paint.get("fill-extrusion-translate"))},m.prototype.is3D=function(){return!0},m.prototype.queryIntersectsFeature=function(z,Y,j,Q,ye,ke,Fe,Ne){var ct=Zp(z,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),ke.angle,Fe),St=this.paint.get("fill-extrusion-height").evaluate(Y,j),bt=this.paint.get("fill-extrusion-base").evaluate(Y,j),Xt=eJe(ct,Ne,ke,0),dr=$Ke(Q,bt,St,Ne),Ir=dr[0],Ar=dr[1];return QKe(Ir,Ar,Xt)},m}(_n);function QT(y,m){return y.x*m.x+y.y*m.y}function BK(y,m){if(y.length===1){for(var L=0,z=m[L++],Y;!Y||z.equals(Y);)if(Y=m[L++],!Y)return 1/0;for(;L<m.length;L++){var j=m[L],Q=y[0],ye=Y.sub(z),ke=j.sub(z),Fe=Q.sub(z),Ne=QT(ye,ye),ct=QT(ye,ke),St=QT(ke,ke),bt=QT(Fe,ye),Xt=QT(Fe,ke),dr=Ne*St-ct*ct,Ir=(St*bt-ct*Xt)/dr,Ar=(Ne*Xt-ct*bt)/dr,en=1-Ir-Ar,Ur=z.z*en+Y.z*Ir+j.z*Ar;if(isFinite(Ur))return Ur}return 1/0}else{for(var Qr=1/0,sn=0,Dn=m;sn<Dn.length;sn+=1){var li=Dn[sn];Qr=Math.min(Qr,li.z)}return Qr}}function QKe(y,m,L){var z=1/0;Go(L,m)&&(z=BK(L,m[0]));for(var Y=0;Y<m.length;Y++)for(var j=m[Y],Q=y[Y],ye=0;ye<j.length-1;ye++){var ke=j[ye],Fe=j[ye+1],Ne=Q[ye],ct=Q[ye+1],St=[ke,Fe,ct,Ne,ke];ua(L,St)&&(z=Math.min(z,BK(L,St)))}return z===1/0?!1:z}function $Ke(y,m,L,z){for(var Y=[],j=[],Q=z[8]*m,ye=z[9]*m,ke=z[10]*m,Fe=z[11]*m,Ne=z[8]*L,ct=z[9]*L,St=z[10]*L,bt=z[11]*L,Xt=0,dr=y;Xt<dr.length;Xt+=1){for(var Ir=dr[Xt],Ar=[],en=[],Ur=0,Qr=Ir;Ur<Qr.length;Ur+=1){var sn=Qr[Ur],Dn=sn.x,li=sn.y,ii=z[0]*Dn+z[4]*li+z[12],Bi=z[1]*Dn+z[5]*li+z[13],Ai=z[2]*Dn+z[6]*li+z[14],Di=z[3]*Dn+z[7]*li+z[15],wa=ii+Q,Ni=Bi+ye,Yi=Ai+ke,Za=Di+Fe,ga=ii+Ne,Io=Bi+ct,Es=Ai+St,Fo=Di+bt,qo=new u(wa/Za,Ni/Za);qo.z=Yi/Za,Ar.push(qo);var Eo=new u(ga/Fo,Io/Fo);Eo.z=Es/Fo,en.push(Eo)}Y.push(Ar),j.push(en)}return[Y,j]}function eJe(y,m,L,z){for(var Y=[],j=0,Q=y;j<Q.length;j+=1){var ye=Q[j],ke=[ye.x,ye.y,z,1];ik(ke,ke,m),Y.push(new u(ke[0]/ke[3],ke[1]/ke[3]))}return Y}var tJe=Vn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),rJe=tJe.members,nJe=Vn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),iJe=nJe.members,aJe=Ib.VectorTileFeature.types,NK=63,oJe=Math.cos(75/2*(Math.PI/180)),sJe=15,lJe=20,uJe=15,UK=1/2,VK=Math.pow(2,uJe-1)/UK,lh=function(m){var L=this;this.zoom=m.zoom,this.overscaling=m.overscaling,this.layers=m.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=m.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(z){L.gradients[z.id]={}}),this.layoutVertexArray=new Cn,this.layoutVertexArray2=new mi,this.indexArray=new Ei,this.programConfigurations=new Wr(m.layers,m.zoom),this.segments=new Qa,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};lh.prototype.populate=function(m,L,z){this.hasPattern=U8("line",this.layers,L);for(var Y=this.layers[0].layout.get("line-sort-key"),j=[],Q=0,ye=m;Q<ye.length;Q+=1){var ke=ye[Q],Fe=ke.feature,Ne=ke.id,ct=ke.index,St=ke.sourceLayerIndex,bt=this.layers[0]._featureFilter.needGeometry,Xt=Ra(Fe,bt);if(this.layers[0]._featureFilter.filter(new kn(this.zoom),Xt,z)){var dr=Y?Y.evaluate(Xt,{},z):void 0,Ir={id:Ne,properties:Fe.properties,type:Fe.type,sourceLayerIndex:St,index:ct,geometry:bt?Xt.geometry:xi(Fe),patterns:{},sortKey:dr};j.push(Ir)}}Y&&j.sort(function(Ai,Di){return Ai.sortKey-Di.sortKey});for(var Ar=0,en=j;Ar<en.length;Ar+=1){var Ur=en[Ar],Qr=Ur,sn=Qr.geometry,Dn=Qr.index,li=Qr.sourceLayerIndex;if(this.hasPattern){var ii=V8("line",this.layers,Ur,this.zoom,L);this.patternFeatures.push(ii)}else this.addFeature(Ur,sn,Dn,z,{});var Bi=m[Dn].feature;L.featureIndex.insert(Bi,sn,Dn,li,this.index)}},lh.prototype.update=function(m,L,z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(m,L,this.stateDependentLayers,z)},lh.prototype.addFeatures=function(m,L,z){for(var Y=0,j=this.patternFeatures;Y<j.length;Y+=1){var Q=j[Y];this.addFeature(Q,Q.geometry,Q.index,L,z)}},lh.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},lh.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},lh.prototype.upload=function(m){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=m.createVertexBuffer(this.layoutVertexArray2,iJe)),this.layoutVertexBuffer=m.createVertexBuffer(this.layoutVertexArray,rJe),this.indexBuffer=m.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(m),this.uploaded=!0},lh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},lh.prototype.lineFeatureClips=function(m){if(m.properties&&m.properties.hasOwnProperty("mapbox_clip_start")&&m.properties.hasOwnProperty("mapbox_clip_end")){var L=+m.properties.mapbox_clip_start,z=+m.properties.mapbox_clip_end;return{start:L,end:z}}},lh.prototype.addFeature=function(m,L,z,Y,j){var Q=this.layers[0].layout,ye=Q.get("line-join").evaluate(m,{}),ke=Q.get("line-cap"),Fe=Q.get("line-miter-limit"),Ne=Q.get("line-round-limit");this.lineClips=this.lineFeatureClips(m);for(var ct=0,St=L;ct<St.length;ct+=1){var bt=St[ct];this.addLine(bt,m,ye,ke,Fe,Ne)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,m,z,j,Y)},lh.prototype.addLine=function(m,L,z,Y,j,Q){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var ye=0;ye<m.length-1;ye++)this.totalDistance+=m[ye].dist(m[ye+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var ke=aJe[L.type]==="Polygon",Fe=m.length;Fe>=2&&m[Fe-1].equals(m[Fe-2]);)Fe--;for(var Ne=0;Ne<Fe-1&&m[Ne].equals(m[Ne+1]);)Ne++;if(!(Fe<(ke?3:2))){z==="bevel"&&(j=1.05);var ct=this.overscaling<=16?sJe*cn/(512*this.overscaling):0,St=this.segments.prepareSegment(Fe*10,this.layoutVertexArray,this.indexArray),bt,Xt=void 0,dr=void 0,Ir=void 0,Ar=void 0;this.e1=this.e2=-1,ke&&(bt=m[Fe-2],Ar=m[Ne].sub(bt)._unit()._perp());for(var en=Ne;en<Fe;en++)if(dr=en===Fe-1?ke?m[Ne+1]:void 0:m[en+1],!(dr&&m[en].equals(dr))){Ar&&(Ir=Ar),bt&&(Xt=bt),bt=m[en],Ar=dr?dr.sub(bt)._unit()._perp():Ir,Ir=Ir||Ar;var Ur=Ir.add(Ar);(Ur.x!==0||Ur.y!==0)&&Ur._unit();var Qr=Ir.x*Ar.x+Ir.y*Ar.y,sn=Ur.x*Ar.x+Ur.y*Ar.y,Dn=sn!==0?1/sn:1/0,li=2*Math.sqrt(2-2*sn),ii=sn<oJe&&Xt&&dr,Bi=Ir.x*Ar.y-Ir.y*Ar.x>0;if(ii&&en>Ne){var Ai=bt.dist(Xt);if(Ai>2*ct){var Di=bt.sub(bt.sub(Xt)._mult(ct/Ai)._round());this.updateDistance(Xt,Di),this.addCurrentVertex(Di,Ir,0,0,St),Xt=Di}}var wa=Xt&&dr,Ni=wa?z:ke?"butt":Y;if(wa&&Ni==="round"&&(Dn<Q?Ni="miter":Dn<=2&&(Ni="fakeround")),Ni==="miter"&&Dn>j&&(Ni="bevel"),Ni==="bevel"&&(Dn>2&&(Ni="flipbevel"),Dn<j&&(Ni="miter")),Xt&&this.updateDistance(Xt,bt),Ni==="miter")Ur._mult(Dn),this.addCurrentVertex(bt,Ur,0,0,St);else if(Ni==="flipbevel"){if(Dn>100)Ur=Ar.mult(-1);else{var Yi=Dn*Ir.add(Ar).mag()/Ir.sub(Ar).mag();Ur._perp()._mult(Yi*(Bi?-1:1))}this.addCurrentVertex(bt,Ur,0,0,St),this.addCurrentVertex(bt,Ur.mult(-1),0,0,St)}else if(Ni==="bevel"||Ni==="fakeround"){var Za=-Math.sqrt(Dn*Dn-1),ga=Bi?Za:0,Io=Bi?0:Za;if(Xt&&this.addCurrentVertex(bt,Ir,ga,Io,St),Ni==="fakeround")for(var Es=Math.round(li*180/Math.PI/lJe),Fo=1;Fo<Es;Fo++){var qo=Fo/Es;if(qo!==.5){var Eo=qo-.5,Os=1.0904+Qr*(-3.2452+Qr*(3.55645-Qr*1.43519)),Ws=.848013+Qr*(-1.06021+Qr*.215638);qo=qo+qo*Eo*(qo-1)*(Os*Eo*Eo+Ws)}var ql=Ar.sub(Ir)._mult(qo)._add(Ir)._unit()._mult(Bi?-1:1);this.addHalfVertex(bt,ql.x,ql.y,!1,Bi,0,St)}dr&&this.addCurrentVertex(bt,Ar,-ga,-Io,St)}else if(Ni==="butt")this.addCurrentVertex(bt,Ur,0,0,St);else if(Ni==="square"){var Jl=Xt?1:-1;this.addCurrentVertex(bt,Ur,Jl,Jl,St)}else Ni==="round"&&(Xt&&(this.addCurrentVertex(bt,Ir,0,0,St),this.addCurrentVertex(bt,Ir,1,1,St,!0)),dr&&(this.addCurrentVertex(bt,Ar,-1,-1,St,!0),this.addCurrentVertex(bt,Ar,0,0,St)));if(ii&&en<Fe-1){var wf=bt.dist(dr);if(wf>2*ct){var Iu=bt.add(dr.sub(bt)._mult(ct/wf)._round());this.updateDistance(bt,Iu),this.addCurrentVertex(Iu,Ar,0,0,St),bt=Iu}}}}},lh.prototype.addCurrentVertex=function(m,L,z,Y,j,Q){Q===void 0&&(Q=!1);var ye=L.x+L.y*z,ke=L.y-L.x*z,Fe=-L.x+L.y*Y,Ne=-L.y-L.x*Y;this.addHalfVertex(m,ye,ke,Q,!1,z,j),this.addHalfVertex(m,Fe,Ne,Q,!0,-Y,j),this.distance>VK/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(m,L,z,Y,j,Q))},lh.prototype.addHalfVertex=function(m,L,z,Y,j,Q,ye){var ke=m.x,Fe=m.y,Ne=this.lineClips?this.scaledDistance*(VK-1):this.scaledDistance,ct=Ne*UK;if(this.layoutVertexArray.emplaceBack((ke<<1)+(Y?1:0),(Fe<<1)+(j?1:0),Math.round(NK*L)+128,Math.round(NK*z)+128,(Q===0?0:Q<0?-1:1)+1|(ct&63)<<2,ct>>6),this.lineClips){var St=this.scaledDistance-this.lineClips.start,bt=this.lineClips.end-this.lineClips.start,Xt=St/bt;this.layoutVertexArray2.emplaceBack(Xt,this.lineClipsArray.length)}var dr=ye.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,dr),ye.primitiveLength++),j?this.e2=dr:this.e1=dr},lh.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},lh.prototype.updateDistance=function(m,L){this.distance+=m.dist(L),this.updateScaledDistance()},V("LineBucket",lh,{omit:["layers","patternFeatures"]});var fJe=new jr({"line-cap":new Ye(dn.layout_line["line-cap"]),"line-join":new Yt(dn.layout_line["line-join"]),"line-miter-limit":new Ye(dn.layout_line["line-miter-limit"]),"line-round-limit":new Ye(dn.layout_line["line-round-limit"]),"line-sort-key":new Yt(dn.layout_line["line-sort-key"])}),cJe=new jr({"line-opacity":new Yt(dn.paint_line["line-opacity"]),"line-color":new Yt(dn.paint_line["line-color"]),"line-translate":new Ye(dn.paint_line["line-translate"]),"line-translate-anchor":new Ye(dn.paint_line["line-translate-anchor"]),"line-width":new Yt(dn.paint_line["line-width"]),"line-gap-width":new Yt(dn.paint_line["line-gap-width"]),"line-offset":new Yt(dn.paint_line["line-offset"]),"line-blur":new Yt(dn.paint_line["line-blur"]),"line-dasharray":new Or(dn.paint_line["line-dasharray"]),"line-pattern":new lr(dn.paint_line["line-pattern"]),"line-gradient":new $r(dn.paint_line["line-gradient"])}),HK={paint:cJe,layout:fJe},hJe=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.possiblyEvaluate=function(z,Y){return Y=new kn(Math.floor(Y.zoom),{now:Y.now,fadeDuration:Y.fadeDuration,zoomHistory:Y.zoomHistory,transition:Y.transition}),y.prototype.possiblyEvaluate.call(this,z,Y)},m.prototype.evaluate=function(z,Y,j,Q){return Y=_({},Y,{zoom:Math.floor(Y.zoom)}),y.prototype.evaluate.call(this,z,Y,j,Q)},m}(Yt),GK=new hJe(HK.paint.properties["line-width"].specification);GK.useIntegerZoom=!0;var vJe=function(y){function m(L){y.call(this,L,HK),this.gradientVersion=0}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._handleSpecialPaintPropertyUpdate=function(z){if(z==="line-gradient"){var Y=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=Y._styleExpression.expression instanceof Dl,this.gradientVersion=(this.gradientVersion+1)%v}},m.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},m.prototype.recalculate=function(z,Y){y.prototype.recalculate.call(this,z,Y),this.paint._values["line-floorwidth"]=GK.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,z)},m.prototype.createBucket=function(z){return new lh(z)},m.prototype.queryRadius=function(z){var Y=z,j=YK(sh("line-width",this,Y),sh("line-gap-width",this,Y)),Q=sh("line-offset",this,Y);return j/2+Math.abs(Q)+Md(this.paint.get("line-translate"))},m.prototype.queryIntersectsFeature=function(z,Y,j,Q,ye,ke,Fe){var Ne=Zp(z,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),ke.angle,Fe),ct=Fe/2*YK(this.paint.get("line-width").evaluate(Y,j),this.paint.get("line-gap-width").evaluate(Y,j)),St=this.paint.get("line-offset").evaluate(Y,j);return St&&(Q=dJe(Q,St*Fe)),xl(Ne,Q,ct)},m.prototype.isTileClipped=function(){return!0},m}(_n);function YK(y,m){return m>0?m+2*y:y}function dJe(y,m){for(var L=[],z=new u(0,0),Y=0;Y<y.length;Y++){for(var j=y[Y],Q=[],ye=0;ye<j.length;ye++){var ke=j[ye-1],Fe=j[ye],Ne=j[ye+1],ct=ye===0?z:Fe.sub(ke)._unit()._perp(),St=ye===j.length-1?z:Ne.sub(Fe)._unit()._perp(),bt=ct._add(St)._unit(),Xt=bt.x*St.x+bt.y*St.y;bt._mult(1/Xt),Q.push(bt._mult(m)._add(Fe))}L.push(Q)}return L}var pJe=Vn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),gJe=Vn([{name:"a_projected_pos",components:3,type:"Float32"}],4),ZQt=Vn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),yJe=Vn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),jQt=Vn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),WK=Vn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),mJe=Vn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4),KQt=Vn([{name:"triangle",components:3,type:"Uint16"}]),JQt=Vn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),QQt=Vn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),$Qt=Vn([{type:"Float32",name:"offsetX"}]),e$t=Vn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function xJe(y,m,L){var z=m.layout.get("text-transform").evaluate(L,{});return z==="uppercase"?y=y.toLocaleUpperCase():z==="lowercase"&&(y=y.toLocaleLowerCase()),Do.applyArabicShaping&&(y=Do.applyArabicShaping(y)),y}function _Je(y,m,L){return y.sections.forEach(function(z){z.text=xJe(z.text,m,L)}),y}function bJe(y){var m={},L={},z=[],Y=0;function j(Ar){z.push(y[Ar]),Y++}function Q(Ar,en,Ur){var Qr=L[Ar];return delete L[Ar],L[en]=Qr,z[Qr].geometry[0].pop(),z[Qr].geometry[0]=z[Qr].geometry[0].concat(Ur[0]),Qr}function ye(Ar,en,Ur){var Qr=m[en];return delete m[en],m[Ar]=Qr,z[Qr].geometry[0].shift(),z[Qr].geometry[0]=Ur[0].concat(z[Qr].geometry[0]),Qr}function ke(Ar,en,Ur){var Qr=Ur?en[0][en[0].length-1]:en[0][0];return Ar+":"+Qr.x+":"+Qr.y}for(var Fe=0;Fe<y.length;Fe++){var Ne=y[Fe],ct=Ne.geometry,St=Ne.text?Ne.text.toString():null;if(!St){j(Fe);continue}var bt=ke(St,ct),Xt=ke(St,ct,!0);if(bt in L&&Xt in m&&L[bt]!==m[Xt]){var dr=ye(bt,Xt,ct),Ir=Q(bt,Xt,z[dr].geometry);delete m[bt],delete L[Xt],L[ke(St,z[Ir].geometry,!0)]=Ir,z[dr].geometry=null}else bt in L?Q(bt,Xt,ct):Xt in m?ye(bt,Xt,ct):(j(Fe),m[bt]=Y-1,L[Xt]=Y-1)}return z.filter(function(Ar){return Ar.geometry})}var $T={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function wJe(y){for(var m="",L=0;L<y.length;L++){var z=y.charCodeAt(L+1)||null,Y=y.charCodeAt(L-1)||null,j=(!z||!Er(z)||$T[y[L+1]])&&(!Y||!Er(Y)||$T[y[L-1]]);j&&$T[y[L]]?m+=$T[y[L]]:m+=y[L]}return m}var jf=24,TJe=function(y,m,L,z,Y){var j,Q,ye=Y*8-z-1,ke=(1<<ye)-1,Fe=ke>>1,Ne=-7,ct=L?Y-1:0,St=L?-1:1,bt=y[m+ct];for(ct+=St,j=bt&(1<<-Ne)-1,bt>>=-Ne,Ne+=ye;Ne>0;j=j*256+y[m+ct],ct+=St,Ne-=8);for(Q=j&(1<<-Ne)-1,j>>=-Ne,Ne+=z;Ne>0;Q=Q*256+y[m+ct],ct+=St,Ne-=8);if(j===0)j=1-Fe;else{if(j===ke)return Q?NaN:(bt?-1:1)*(1/0);Q=Q+Math.pow(2,z),j=j-Fe}return(bt?-1:1)*Q*Math.pow(2,j-z)},AJe=function(y,m,L,z,Y,j){var Q,ye,ke,Fe=j*8-Y-1,Ne=(1<<Fe)-1,ct=Ne>>1,St=Y===23?Math.pow(2,-24)-Math.pow(2,-77):0,bt=z?0:j-1,Xt=z?1:-1,dr=m<0||m===0&&1/m<0?1:0;for(m=Math.abs(m),isNaN(m)||m===1/0?(ye=isNaN(m)?1:0,Q=Ne):(Q=Math.floor(Math.log(m)/Math.LN2),m*(ke=Math.pow(2,-Q))<1&&(Q--,ke*=2),Q+ct>=1?m+=St/ke:m+=St*Math.pow(2,1-ct),m*ke>=2&&(Q++,ke/=2),Q+ct>=Ne?(ye=0,Q=Ne):Q+ct>=1?(ye=(m*ke-1)*Math.pow(2,Y),Q=Q+ct):(ye=m*Math.pow(2,ct-1)*Math.pow(2,Y),Q=0));Y>=8;y[L+bt]=ye&255,bt+=Xt,ye/=256,Y-=8);for(Q=Q<<Y|ye,Fe+=Y;Fe>0;y[L+bt]=Q&255,bt+=Xt,Q/=256,Fe-=8);y[L+bt-Xt]|=dr*128},uk={read:TJe,write:AJe},fk=Ys;function Ys(y){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(y)?y:new Uint8Array(y||0),this.pos=0,this.type=0,this.length=this.buf.length}Ys.Varint=0,Ys.Fixed64=1,Ys.Bytes=2,Ys.Fixed32=5;var G8=65536*65536,XK=1/G8,MJe=12,ZK=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");Ys.prototype={destroy:function(){this.buf=null},readFields:function(y,m,L){for(L=L||this.length;this.pos<L;){var z=this.readVarint(),Y=z>>3,j=this.pos;this.type=z&7,y(Y,m,this),this.pos===j&&this.skip(z)}return m},readMessage:function(y,m){return this.readFields(y,m,this.readVarint()+this.pos)},readFixed32:function(){var y=ck(this.buf,this.pos);return this.pos+=4,y},readSFixed32:function(){var y=KK(this.buf,this.pos);return this.pos+=4,y},readFixed64:function(){var y=ck(this.buf,this.pos)+ck(this.buf,this.pos+4)*G8;return this.pos+=8,y},readSFixed64:function(){var y=ck(this.buf,this.pos)+KK(this.buf,this.pos+4)*G8;return this.pos+=8,y},readFloat:function(){var y=uk.read(this.buf,this.pos,!0,23,4);return this.pos+=4,y},readDouble:function(){var y=uk.read(this.buf,this.pos,!0,52,8);return this.pos+=8,y},readVarint:function(y){var m=this.buf,L,z;return z=m[this.pos++],L=z&127,z<128||(z=m[this.pos++],L|=(z&127)<<7,z<128)||(z=m[this.pos++],L|=(z&127)<<14,z<128)||(z=m[this.pos++],L|=(z&127)<<21,z<128)?L:(z=m[this.pos],L|=(z&15)<<28,SJe(L,y,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var y=this.readVarint();return y%2===1?(y+1)/-2:y/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var y=this.readVarint()+this.pos,m=this.pos;return this.pos=y,y-m>=MJe&&ZK?NJe(this.buf,m,y):BJe(this.buf,m,y)},readBytes:function(){var y=this.readVarint()+this.pos,m=this.buf.subarray(this.pos,y);return this.pos=y,m},readPackedVarint:function(y,m){if(this.type!==Ys.Bytes)return y.push(this.readVarint(m));var L=kg(this);for(y=y||[];this.pos<L;)y.push(this.readVarint(m));return y},readPackedSVarint:function(y){if(this.type!==Ys.Bytes)return y.push(this.readSVarint());var m=kg(this);for(y=y||[];this.pos<m;)y.push(this.readSVarint());return y},readPackedBoolean:function(y){if(this.type!==Ys.Bytes)return y.push(this.readBoolean());var m=kg(this);for(y=y||[];this.pos<m;)y.push(this.readBoolean());return y},readPackedFloat:function(y){if(this.type!==Ys.Bytes)return y.push(this.readFloat());var m=kg(this);for(y=y||[];this.pos<m;)y.push(this.readFloat());return y},readPackedDouble:function(y){if(this.type!==Ys.Bytes)return y.push(this.readDouble());var m=kg(this);for(y=y||[];this.pos<m;)y.push(this.readDouble());return y},readPackedFixed32:function(y){if(this.type!==Ys.Bytes)return y.push(this.readFixed32());var m=kg(this);for(y=y||[];this.pos<m;)y.push(this.readFixed32());return y},readPackedSFixed32:function(y){if(this.type!==Ys.Bytes)return y.push(this.readSFixed32());var m=kg(this);for(y=y||[];this.pos<m;)y.push(this.readSFixed32());return y},readPackedFixed64:function(y){if(this.type!==Ys.Bytes)return y.push(this.readFixed64());var m=kg(this);for(y=y||[];this.pos<m;)y.push(this.readFixed64());return y},readPackedSFixed64:function(y){if(this.type!==Ys.Bytes)return y.push(this.readSFixed64());var m=kg(this);for(y=y||[];this.pos<m;)y.push(this.readSFixed64());return y},skip:function(y){var m=y&7;if(m===Ys.Varint)for(;this.buf[this.pos++]>127;);else if(m===Ys.Bytes)this.pos=this.readVarint()+this.pos;else if(m===Ys.Fixed32)this.pos+=4;else if(m===Ys.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+m)},writeTag:function(y,m){this.writeVarint(y<<3|m)},realloc:function(y){for(var m=this.length||16;m<this.pos+y;)m*=2;if(m!==this.length){var L=new Uint8Array(m);L.set(this.buf),this.buf=L,this.length=m}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(y){this.realloc(4),qb(this.buf,y,this.pos),this.pos+=4},writeSFixed32:function(y){this.realloc(4),qb(this.buf,y,this.pos),this.pos+=4},writeFixed64:function(y){this.realloc(8),qb(this.buf,y&-1,this.pos),qb(this.buf,Math.floor(y*XK),this.pos+4),this.pos+=8},writeSFixed64:function(y){this.realloc(8),qb(this.buf,y&-1,this.pos),qb(this.buf,Math.floor(y*XK),this.pos+4),this.pos+=8},writeVarint:function(y){if(y=+y||0,y>268435455||y<0){EJe(y,this);return}this.realloc(4),this.buf[this.pos++]=y&127|(y>127?128:0),!(y<=127)&&(this.buf[this.pos++]=(y>>>=7)&127|(y>127?128:0),!(y<=127)&&(this.buf[this.pos++]=(y>>>=7)&127|(y>127?128:0),!(y<=127)&&(this.buf[this.pos++]=y>>>7&127)))},writeSVarint:function(y){this.writeVarint(y<0?-y*2-1:y*2)},writeBoolean:function(y){this.writeVarint(!!y)},writeString:function(y){y=String(y),this.realloc(y.length*4),this.pos++;var m=this.pos;this.pos=UJe(this.buf,y,this.pos);var L=this.pos-m;L>=128&&jK(m,L,this),this.pos=m-1,this.writeVarint(L),this.pos+=L},writeFloat:function(y){this.realloc(4),uk.write(this.buf,y,this.pos,!0,23,4),this.pos+=4},writeDouble:function(y){this.realloc(8),uk.write(this.buf,y,this.pos,!0,52,8),this.pos+=8},writeBytes:function(y){var m=y.length;this.writeVarint(m),this.realloc(m);for(var L=0;L<m;L++)this.buf[this.pos++]=y[L]},writeRawMessage:function(y,m){this.pos++;var L=this.pos;y(m,this);var z=this.pos-L;z>=128&&jK(L,z,this),this.pos=L-1,this.writeVarint(z),this.pos+=z},writeMessage:function(y,m,L){this.writeTag(y,Ys.Bytes),this.writeRawMessage(m,L)},writePackedVarint:function(y,m){m.length&&this.writeMessage(y,LJe,m)},writePackedSVarint:function(y,m){m.length&&this.writeMessage(y,PJe,m)},writePackedBoolean:function(y,m){m.length&&this.writeMessage(y,IJe,m)},writePackedFloat:function(y,m){m.length&&this.writeMessage(y,RJe,m)},writePackedDouble:function(y,m){m.length&&this.writeMessage(y,DJe,m)},writePackedFixed32:function(y,m){m.length&&this.writeMessage(y,FJe,m)},writePackedSFixed32:function(y,m){m.length&&this.writeMessage(y,qJe,m)},writePackedFixed64:function(y,m){m.length&&this.writeMessage(y,zJe,m)},writePackedSFixed64:function(y,m){m.length&&this.writeMessage(y,OJe,m)},writeBytesField:function(y,m){this.writeTag(y,Ys.Bytes),this.writeBytes(m)},writeFixed32Field:function(y,m){this.writeTag(y,Ys.Fixed32),this.writeFixed32(m)},writeSFixed32Field:function(y,m){this.writeTag(y,Ys.Fixed32),this.writeSFixed32(m)},writeFixed64Field:function(y,m){this.writeTag(y,Ys.Fixed64),this.writeFixed64(m)},writeSFixed64Field:function(y,m){this.writeTag(y,Ys.Fixed64),this.writeSFixed64(m)},writeVarintField:function(y,m){this.writeTag(y,Ys.Varint),this.writeVarint(m)},writeSVarintField:function(y,m){this.writeTag(y,Ys.Varint),this.writeSVarint(m)},writeStringField:function(y,m){this.writeTag(y,Ys.Bytes),this.writeString(m)},writeFloatField:function(y,m){this.writeTag(y,Ys.Fixed32),this.writeFloat(m)},writeDoubleField:function(y,m){this.writeTag(y,Ys.Fixed64),this.writeDouble(m)},writeBooleanField:function(y,m){this.writeVarintField(y,!!m)}};function SJe(y,m,L){var z=L.buf,Y,j;if(j=z[L.pos++],Y=(j&112)>>4,j<128||(j=z[L.pos++],Y|=(j&127)<<3,j<128)||(j=z[L.pos++],Y|=(j&127)<<10,j<128)||(j=z[L.pos++],Y|=(j&127)<<17,j<128)||(j=z[L.pos++],Y|=(j&127)<<24,j<128)||(j=z[L.pos++],Y|=(j&1)<<31,j<128))return Fb(y,Y,m);throw new Error("Expected varint not more than 10 bytes")}function kg(y){return y.type===Ys.Bytes?y.readVarint()+y.pos:y.pos+1}function Fb(y,m,L){return L?m*4294967296+(y>>>0):(m>>>0)*4294967296+(y>>>0)}function EJe(y,m){var L,z;if(y>=0?(L=y%4294967296|0,z=y/4294967296|0):(L=~(-y%4294967296),z=~(-y/4294967296),L^4294967295?L=L+1|0:(L=0,z=z+1|0)),y>=18446744073709552e3||y<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");m.realloc(10),kJe(L,z,m),CJe(z,m)}function kJe(y,m,L){L.buf[L.pos++]=y&127|128,y>>>=7,L.buf[L.pos++]=y&127|128,y>>>=7,L.buf[L.pos++]=y&127|128,y>>>=7,L.buf[L.pos++]=y&127|128,y>>>=7,L.buf[L.pos]=y&127}function CJe(y,m){var L=(y&7)<<4;m.buf[m.pos++]|=L|((y>>>=3)?128:0),y&&(m.buf[m.pos++]=y&127|((y>>>=7)?128:0),y&&(m.buf[m.pos++]=y&127|((y>>>=7)?128:0),y&&(m.buf[m.pos++]=y&127|((y>>>=7)?128:0),y&&(m.buf[m.pos++]=y&127|((y>>>=7)?128:0),y&&(m.buf[m.pos++]=y&127)))))}function jK(y,m,L){var z=m<=16383?1:m<=2097151?2:m<=268435455?3:Math.floor(Math.log(m)/(Math.LN2*7));L.realloc(z);for(var Y=L.pos-1;Y>=y;Y--)L.buf[Y+z]=L.buf[Y]}function LJe(y,m){for(var L=0;L<y.length;L++)m.writeVarint(y[L])}function PJe(y,m){for(var L=0;L<y.length;L++)m.writeSVarint(y[L])}function RJe(y,m){for(var L=0;L<y.length;L++)m.writeFloat(y[L])}function DJe(y,m){for(var L=0;L<y.length;L++)m.writeDouble(y[L])}function IJe(y,m){for(var L=0;L<y.length;L++)m.writeBoolean(y[L])}function FJe(y,m){for(var L=0;L<y.length;L++)m.writeFixed32(y[L])}function qJe(y,m){for(var L=0;L<y.length;L++)m.writeSFixed32(y[L])}function zJe(y,m){for(var L=0;L<y.length;L++)m.writeFixed64(y[L])}function OJe(y,m){for(var L=0;L<y.length;L++)m.writeSFixed64(y[L])}function ck(y,m){return(y[m]|y[m+1]<<8|y[m+2]<<16)+y[m+3]*16777216}function qb(y,m,L){y[L]=m,y[L+1]=m>>>8,y[L+2]=m>>>16,y[L+3]=m>>>24}function KK(y,m){return(y[m]|y[m+1]<<8|y[m+2]<<16)+(y[m+3]<<24)}function BJe(y,m,L){for(var z="",Y=m;Y<L;){var j=y[Y],Q=null,ye=j>239?4:j>223?3:j>191?2:1;if(Y+ye>L)break;var ke,Fe,Ne;ye===1?j<128&&(Q=j):ye===2?(ke=y[Y+1],(ke&192)===128&&(Q=(j&31)<<6|ke&63,Q<=127&&(Q=null))):ye===3?(ke=y[Y+1],Fe=y[Y+2],(ke&192)===128&&(Fe&192)===128&&(Q=(j&15)<<12|(ke&63)<<6|Fe&63,(Q<=2047||Q>=55296&&Q<=57343)&&(Q=null))):ye===4&&(ke=y[Y+1],Fe=y[Y+2],Ne=y[Y+3],(ke&192)===128&&(Fe&192)===128&&(Ne&192)===128&&(Q=(j&15)<<18|(ke&63)<<12|(Fe&63)<<6|Ne&63,(Q<=65535||Q>=1114112)&&(Q=null))),Q===null?(Q=65533,ye=1):Q>65535&&(Q-=65536,z+=String.fromCharCode(Q>>>10&1023|55296),Q=56320|Q&1023),z+=String.fromCharCode(Q),Y+=ye}return z}function NJe(y,m,L){return ZK.decode(y.subarray(m,L))}function UJe(y,m,L){for(var z=0,Y,j;z<m.length;z++){if(Y=m.charCodeAt(z),Y>55295&&Y<57344)if(j)if(Y<56320){y[L++]=239,y[L++]=191,y[L++]=189,j=Y;continue}else Y=j-55296<<10|Y-56320|65536,j=null;else{Y>56319||z+1===m.length?(y[L++]=239,y[L++]=191,y[L++]=189):j=Y;continue}else j&&(y[L++]=239,y[L++]=191,y[L++]=189,j=null);Y<128?y[L++]=Y:(Y<2048?y[L++]=Y>>6|192:(Y<65536?y[L++]=Y>>12|224:(y[L++]=Y>>18|240,y[L++]=Y>>12&63|128),y[L++]=Y>>6&63|128),y[L++]=Y&63|128)}return L}var Y8=3;function VJe(y,m,L){y===1&&L.readMessage(HJe,m)}function HJe(y,m,L){if(y===3){var z=L.readMessage(GJe,{}),Y=z.id,j=z.bitmap,Q=z.width,ye=z.height,ke=z.left,Fe=z.top,Ne=z.advance;m.push({id:Y,bitmap:new J1({width:Q+2*Y8,height:ye+2*Y8},j),metrics:{width:Q,height:ye,left:ke,top:Fe,advance:Ne}})}}function GJe(y,m,L){y===1?m.id=L.readVarint():y===2?m.bitmap=L.readBytes():y===3?m.width=L.readVarint():y===4?m.height=L.readVarint():y===5?m.left=L.readSVarint():y===6?m.top=L.readSVarint():y===7&&(m.advance=L.readVarint())}function YJe(y){return new fk(y).readFields(VJe,[])}var JK=Y8;function QK(y){for(var m=0,L=0,z=0,Y=y;z<Y.length;z+=1){var j=Y[z];m+=j.w*j.h,L=Math.max(L,j.w)}y.sort(function(Ir,Ar){return Ar.h-Ir.h});for(var Q=Math.max(Math.ceil(Math.sqrt(m/.95)),L),ye=[{x:0,y:0,w:Q,h:1/0}],ke=0,Fe=0,Ne=0,ct=y;Ne<ct.length;Ne+=1)for(var St=ct[Ne],bt=ye.length-1;bt>=0;bt--){var Xt=ye[bt];if(!(St.w>Xt.w||St.h>Xt.h)){if(St.x=Xt.x,St.y=Xt.y,Fe=Math.max(Fe,St.y+St.h),ke=Math.max(ke,St.x+St.w),St.w===Xt.w&&St.h===Xt.h){var dr=ye.pop();bt<ye.length&&(ye[bt]=dr)}else St.h===Xt.h?(Xt.x+=St.w,Xt.w-=St.w):St.w===Xt.w?(Xt.y+=St.h,Xt.h-=St.h):(ye.push({x:Xt.x+St.w,y:Xt.y,w:Xt.w-St.w,h:St.h}),Xt.y+=St.h,Xt.h-=St.h);break}}return{w:ke,h:Fe,fill:m/(ke*Fe)||0}}var yv=1,hk=function(m,L){var z=L.pixelRatio,Y=L.version,j=L.stretchX,Q=L.stretchY,ye=L.content;this.paddedRect=m,this.pixelRatio=z,this.stretchX=j,this.stretchY=Q,this.content=ye,this.version=Y},eA={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};eA.tl.get=function(){return[this.paddedRect.x+yv,this.paddedRect.y+yv]},eA.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-yv,this.paddedRect.y+this.paddedRect.h-yv]},eA.tlbr.get=function(){return this.tl.concat(this.br)},eA.displaySize.get=function(){return[(this.paddedRect.w-yv*2)/this.pixelRatio,(this.paddedRect.h-yv*2)/this.pixelRatio]},Object.defineProperties(hk.prototype,eA);var tA=function(m,L){var z={},Y={};this.haveRenderCallbacks=[];var j=[];this.addImages(m,z,j),this.addImages(L,Y,j);var Q=QK(j),ye=Q.w,ke=Q.h,Fe=new Vh({width:ye||1,height:ke||1});for(var Ne in m){var ct=m[Ne],St=z[Ne].paddedRect;Vh.copy(ct.data,Fe,{x:0,y:0},{x:St.x+yv,y:St.y+yv},ct.data)}for(var bt in L){var Xt=L[bt],dr=Y[bt].paddedRect,Ir=dr.x+yv,Ar=dr.y+yv,en=Xt.data.width,Ur=Xt.data.height;Vh.copy(Xt.data,Fe,{x:0,y:0},{x:Ir,y:Ar},Xt.data),Vh.copy(Xt.data,Fe,{x:0,y:Ur-1},{x:Ir,y:Ar-1},{width:en,height:1}),Vh.copy(Xt.data,Fe,{x:0,y:0},{x:Ir,y:Ar+Ur},{width:en,height:1}),Vh.copy(Xt.data,Fe,{x:en-1,y:0},{x:Ir-1,y:Ar},{width:1,height:Ur}),Vh.copy(Xt.data,Fe,{x:0,y:0},{x:Ir+en,y:Ar},{width:1,height:Ur})}this.image=Fe,this.iconPositions=z,this.patternPositions=Y};tA.prototype.addImages=function(m,L,z){for(var Y in m){var j=m[Y],Q={x:0,y:0,w:j.data.width+2*yv,h:j.data.height+2*yv};z.push(Q),L[Y]=new hk(Q,j),j.hasRenderCallback&&this.haveRenderCallbacks.push(Y)}},tA.prototype.patchUpdatedImages=function(m,L){m.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var z in m.updatedImages)this.patchUpdatedImage(this.iconPositions[z],m.getImage(z),L),this.patchUpdatedImage(this.patternPositions[z],m.getImage(z),L)},tA.prototype.patchUpdatedImage=function(m,L,z){if(!(!m||!L)&&m.version!==L.version){m.version=L.version;var Y=m.tl,j=Y[0],Q=Y[1];z.update(L.data,void 0,{x:j,y:Q})}},V("ImagePosition",hk),V("ImageAtlas",tA);var Qv={horizontal:1,vertical:2,horizontalOnly:3},rA=-17;function WJe(y){for(var m=0,L=y;m<L.length;m+=1){var z=L[m];if(z.positionedGlyphs.length!==0)return!1}return!0}var $K=57344,eJ=63743,zb=function(){this.scale=1,this.fontStack="",this.imageName=null};zb.forText=function(m,L){var z=new zb;return z.scale=m||1,z.fontStack=L,z},zb.forImage=function(m){var L=new zb;return L.imageName=m,L};var qc=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};qc.fromFeature=function(m,L){for(var z=new qc,Y=0;Y<m.sections.length;Y++){var j=m.sections[Y];j.image?z.addImageSection(j):z.addTextSection(j,L)}return z},qc.prototype.length=function(){return this.text.length},qc.prototype.getSection=function(m){return this.sections[this.sectionIndex[m]]},qc.prototype.getSectionIndex=function(m){return this.sectionIndex[m]},qc.prototype.getCharCode=function(m){return this.text.charCodeAt(m)},qc.prototype.verticalizePunctuation=function(){this.text=wJe(this.text)},qc.prototype.trim=function(){for(var m=0,L=0;L<this.text.length&&D0[this.text.charCodeAt(L)];L++)m++;for(var z=this.text.length,Y=this.text.length-1;Y>=0&&Y>=m&&D0[this.text.charCodeAt(Y)];Y--)z--;this.text=this.text.substring(m,z),this.sectionIndex=this.sectionIndex.slice(m,z)},qc.prototype.substring=function(m,L){var z=new qc;return z.text=this.text.substring(m,L),z.sectionIndex=this.sectionIndex.slice(m,L),z.sections=this.sections,z},qc.prototype.toString=function(){return this.text},qc.prototype.getMaxScale=function(){var m=this;return this.sectionIndex.reduce(function(L,z){return Math.max(L,m.sections[z].scale)},0)},qc.prototype.addTextSection=function(m,L){this.text+=m.text,this.sections.push(zb.forText(m.scale,m.fontStack||L));for(var z=this.sections.length-1,Y=0;Y<m.text.length;++Y)this.sectionIndex.push(z)},qc.prototype.addImageSection=function(m){var L=m.image?m.image.name:"";if(L.length===0){X("Can't add FormattedSection with an empty image.");return}var z=this.getNextImageSectionCharCode();if(!z){X("Reached maximum number of images "+(eJ-$K+2));return}this.text+=String.fromCharCode(z),this.sections.push(zb.forImage(L)),this.sectionIndex.push(this.sections.length-1)},qc.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=eJ?null:++this.imageSectionID:(this.imageSectionID=$K,this.imageSectionID)};function XJe(y,m){for(var L=[],z=y.text,Y=0,j=0,Q=m;j<Q.length;j+=1){var ye=Q[j];L.push(y.substring(Y,ye)),Y=ye}return Y<z.length&&L.push(y.substring(Y,z.length)),L}function vk(y,m,L,z,Y,j,Q,ye,ke,Fe,Ne,ct,St,bt,Xt,dr){var Ir=qc.fromFeature(y,Y);ct===Qv.vertical&&Ir.verticalizePunctuation();var Ar,en=Do.processBidirectionalText,Ur=Do.processStyledBidirectionalText;if(en&&Ir.sections.length===1){Ar=[];for(var Qr=en(Ir.toString(),W8(Ir,Fe,j,m,z,bt,Xt)),sn=0,Dn=Qr;sn<Dn.length;sn+=1){var li=Dn[sn],ii=new qc;ii.text=li,ii.sections=Ir.sections;for(var Bi=0;Bi<li.length;Bi++)ii.sectionIndex.push(0);Ar.push(ii)}}else if(Ur){Ar=[];for(var Ai=Ur(Ir.text,Ir.sectionIndex,W8(Ir,Fe,j,m,z,bt,Xt)),Di=0,wa=Ai;Di<wa.length;Di+=1){var Ni=wa[Di],Yi=new qc;Yi.text=Ni[0],Yi.sectionIndex=Ni[1],Yi.sections=Ir.sections,Ar.push(Yi)}}else Ar=XJe(Ir,W8(Ir,Fe,j,m,z,bt,Xt));var Za=[],ga={positionedLines:Za,text:Ir.toString(),top:Ne[1],bottom:Ne[1],left:Ne[0],right:Ne[0],writingMode:ct,iconsInText:!1,verticalizable:!1};return KJe(ga,m,L,z,Ar,Q,ye,ke,ct,Fe,St,dr),WJe(Za)?!1:ga}var D0={};D0[9]=!0,D0[10]=!0,D0[11]=!0,D0[12]=!0,D0[13]=!0,D0[32]=!0;var mv={};mv[10]=!0,mv[32]=!0,mv[38]=!0,mv[40]=!0,mv[41]=!0,mv[43]=!0,mv[45]=!0,mv[47]=!0,mv[173]=!0,mv[183]=!0,mv[8203]=!0,mv[8208]=!0,mv[8211]=!0,mv[8231]=!0;function tJ(y,m,L,z,Y,j){if(m.imageName){var ke=z[m.imageName];return ke?ke.displaySize[0]*m.scale*jf/j+Y:0}else{var Q=L[m.fontStack],ye=Q&&Q[y];return ye?ye.metrics.advance*m.scale+Y:0}}function ZJe(y,m,L,z,Y,j){for(var Q=0,ye=0;ye<y.length();ye++){var ke=y.getSection(ye);Q+=tJ(y.getCharCode(ye),ke,z,Y,m,j)}var Fe=Math.max(1,Math.ceil(Q/L));return Q/Fe}function rJ(y,m,L,z){var Y=Math.pow(y-m,2);return z?y<m?Y/2:Y*2:Y+Math.abs(L)*L}function jJe(y,m,L){var z=0;return y===10&&(z-=1e4),L&&(z+=150),(y===40||y===65288)&&(z+=50),(m===41||m===65289)&&(z+=50),z}function nJ(y,m,L,z,Y,j){for(var Q=null,ye=rJ(m,L,Y,j),ke=0,Fe=z;ke<Fe.length;ke+=1){var Ne=Fe[ke],ct=m-Ne.x,St=rJ(ct,L,Y,j)+Ne.badness;St<=ye&&(Q=Ne,ye=St)}return{index:y,x:m,priorBreak:Q,badness:ye}}function iJ(y){return y?iJ(y.priorBreak).concat(y.index):[]}function W8(y,m,L,z,Y,j,Q){if(j!=="point")return[];if(!y)return[];for(var ye=[],ke=ZJe(y,m,L,z,Y,Q),Fe=y.text.indexOf("\u200B")>=0,Ne=0,ct=0;ct<y.length();ct++){var St=y.getSection(ct),bt=y.getCharCode(ct);if(D0[bt]||(Ne+=tJ(bt,St,z,Y,m,Q)),ct<y.length()-1){var Xt=rr(bt);(mv[bt]||Xt||St.imageName)&&ye.push(nJ(ct+1,Ne,ke,ye,jJe(bt,y.getCharCode(ct+1),Xt&&Fe),!1))}}return iJ(nJ(y.length(),Ne,ke,ye,0,!0))}function X8(y){var m=.5,L=.5;switch(y){case"right":case"top-right":case"bottom-right":m=1;break;case"left":case"top-left":case"bottom-left":m=0;break}switch(y){case"bottom":case"bottom-right":case"bottom-left":L=1;break;case"top":case"top-right":case"top-left":L=0;break}return{horizontalAlign:m,verticalAlign:L}}function KJe(y,m,L,z,Y,j,Q,ye,ke,Fe,Ne,ct){for(var St=0,bt=rA,Xt=0,dr=0,Ir=ye==="right"?1:ye==="left"?0:.5,Ar=0,en=0,Ur=Y;en<Ur.length;en+=1){var Qr=Ur[en];Qr.trim();var sn=Qr.getMaxScale(),Dn=(sn-1)*jf,li={positionedGlyphs:[],lineOffset:0};y.positionedLines[Ar]=li;var ii=li.positionedGlyphs,Bi=0;if(!Qr.length()){bt+=j,++Ar;continue}for(var Ai=0;Ai<Qr.length();Ai++){var Di=Qr.getSection(Ai),wa=Qr.getSectionIndex(Ai),Ni=Qr.getCharCode(Ai),Yi=0,Za=null,ga=null,Io=null,Es=jf,Fo=!(ke===Qv.horizontal||!Ne&&!tr(Ni)||Ne&&(D0[Ni]||ir(Ni)));if(Di.imageName){var ql=z[Di.imageName];if(!ql)continue;Io=Di.imageName,y.iconsInText=y.iconsInText||!0,ga=ql.paddedRect;var Jl=ql.displaySize;Di.scale=Di.scale*jf/ct,Za={width:Jl[0],height:Jl[1],left:yv,top:-JK,advance:Fo?Jl[1]:Jl[0]};var wf=jf-Jl[1]*Di.scale;Yi=Dn+wf,Es=Za.advance;var Iu=Fo?Jl[0]*Di.scale-jf*sn:Jl[1]*Di.scale-jf*sn;Iu>0&&Iu>Bi&&(Bi=Iu)}else{var qo=L[Di.fontStack],Eo=qo&&qo[Ni];if(Eo&&Eo.rect)ga=Eo.rect,Za=Eo.metrics;else{var Os=m[Di.fontStack],Ws=Os&&Os[Ni];if(!Ws)continue;Za=Ws.metrics}Yi=(sn-Di.scale)*jf}Fo?(y.verticalizable=!0,ii.push({glyph:Ni,imageName:Io,x:St,y:bt+Yi,vertical:Fo,scale:Di.scale,fontStack:Di.fontStack,sectionIndex:wa,metrics:Za,rect:ga}),St+=Es*Di.scale+Fe):(ii.push({glyph:Ni,imageName:Io,x:St,y:bt+Yi,vertical:Fo,scale:Di.scale,fontStack:Di.fontStack,sectionIndex:wa,metrics:Za,rect:ga}),St+=Za.advance*Di.scale+Fe)}if(ii.length!==0){var zc=St-Fe;Xt=Math.max(zc,Xt),JJe(ii,0,ii.length-1,Ir,Bi)}St=0;var Oc=j*sn+Bi;li.lineOffset=Math.max(Bi,Dn),bt+=Oc,dr=Math.max(Oc,dr),++Ar}var Tf=bt-rA,uh=X8(Q),fh=uh.horizontalAlign,Ju=uh.verticalAlign;QJe(y.positionedLines,Ir,fh,Ju,Xt,dr,j,Tf,Y.length),y.top+=-Ju*Tf,y.bottom=y.top+Tf,y.left+=-fh*Xt,y.right=y.left+Xt}function JJe(y,m,L,z,Y){if(!(!z&&!Y))for(var j=y[L],Q=j.metrics.advance*j.scale,ye=(y[L].x+Q)*z,ke=m;ke<=L;ke++)y[ke].x-=ye,y[ke].y+=Y}function QJe(y,m,L,z,Y,j,Q,ye,ke){var Fe=(m-L)*Y,Ne=0;j!==Q?Ne=-ye*z-rA:Ne=(-z*ke+.5)*Q;for(var ct=0,St=y;ct<St.length;ct+=1)for(var bt=St[ct],Xt=0,dr=bt.positionedGlyphs;Xt<dr.length;Xt+=1){var Ir=dr[Xt];Ir.x+=Fe,Ir.y+=Ne}}function $Je(y,m,L){var z=X8(L),Y=z.horizontalAlign,j=z.verticalAlign,Q=m[0],ye=m[1],ke=Q-y.displaySize[0]*Y,Fe=ke+y.displaySize[0],Ne=ye-y.displaySize[1]*j,ct=Ne+y.displaySize[1];return{image:y,top:Ne,bottom:ct,left:ke,right:Fe}}function aJ(y,m,L,z,Y,j){var Q=y.image,ye;if(Q.content){var ke=Q.content,Fe=Q.pixelRatio||1;ye=[ke[0]/Fe,ke[1]/Fe,Q.displaySize[0]-ke[2]/Fe,Q.displaySize[1]-ke[3]/Fe]}var Ne=m.left*j,ct=m.right*j,St,bt,Xt,dr;L==="width"||L==="both"?(dr=Y[0]+Ne-z[3],bt=Y[0]+ct+z[1]):(dr=Y[0]+(Ne+ct-Q.displaySize[0])/2,bt=dr+Q.displaySize[0]);var Ir=m.top*j,Ar=m.bottom*j;return L==="height"||L==="both"?(St=Y[1]+Ir-z[0],Xt=Y[1]+Ar+z[2]):(St=Y[1]+(Ir+Ar-Q.displaySize[1])/2,Xt=St+Q.displaySize[1]),{image:Q,top:St,right:bt,bottom:Xt,left:dr,collisionPadding:ye}}var Ob=function(y){function m(L,z,Y,j){y.call(this,L,z),this.angle=Y,j!==void 0&&(this.segment=j)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.clone=function(){return new m(this.x,this.y,this.angle,this.segment)},m}(u);V("Anchor",Ob);var Jp=128;function Z8(y,m){var L=m.expression;if(L.kind==="constant"){var z=L.evaluate(new kn(y+1));return{kind:"constant",layoutSize:z}}else{if(L.kind==="source")return{kind:"source"};for(var Y=L.zoomStops,j=L.interpolationType,Q=0;Q<Y.length&&Y[Q]<=y;)Q++;Q=Math.max(0,Q-1);for(var ye=Q;ye<Y.length&&Y[ye]<y+1;)ye++;ye=Math.min(Y.length-1,ye);var ke=Y[Q],Fe=Y[ye];if(L.kind==="composite")return{kind:"composite",minZoom:ke,maxZoom:Fe,interpolationType:j};var Ne=L.evaluate(new kn(ke)),ct=L.evaluate(new kn(Fe));return{kind:"camera",minZoom:ke,maxZoom:Fe,minSize:Ne,maxSize:ct,interpolationType:j}}}function oJ(y,m,L){var z=m.uSize,Y=m.uSizeT,j=L.lowerSize,Q=L.upperSize;return y.kind==="source"?j/Jp:y.kind==="composite"?zs(j/Jp,Q/Jp,Y):z}function sJ(y,m){var L=0,z=0;if(y.kind==="constant")z=y.layoutSize;else if(y.kind!=="source"){var Y=y.interpolationType,j=y.minZoom,Q=y.maxZoom,ye=Y?p(Hs.interpolationFactor(Y,m,j,Q),0,1):0;y.kind==="camera"?z=zs(y.minSize,y.maxSize,ye):L=ye}return{uSizeT:L,uSize:z}}var eQe=Object.freeze({__proto__:null,getSizeData:Z8,evaluateSizeForFeature:oJ,evaluateSizeForZoom:sJ,SIZE_PACK_FACTOR:Jp});function lJ(y,m,L,z,Y){if(m.segment===void 0)return!0;for(var j=m,Q=m.segment+1,ye=0;ye>-L/2;){if(Q--,Q<0)return!1;ye-=y[Q].dist(j),j=y[Q]}ye+=y[Q].dist(y[Q+1]),Q++;for(var ke=[],Fe=0;ye<L/2;){var Ne=y[Q-1],ct=y[Q],St=y[Q+1];if(!St)return!1;var bt=Ne.angleTo(ct)-ct.angleTo(St);for(bt=Math.abs((bt+3*Math.PI)%(Math.PI*2)-Math.PI),ke.push({distance:ye,angleDelta:bt}),Fe+=bt;ye-ke[0].distance>z;)Fe-=ke.shift().angleDelta;if(Fe>Y)return!1;Q++,ye+=ct.dist(St)}return!0}function uJ(y){for(var m=0,L=0;L<y.length-1;L++)m+=y[L].dist(y[L+1]);return m}function fJ(y,m,L){return y?3/5*m*L:0}function cJ(y,m){return Math.max(y?y.right-y.left:0,m?m.right-m.left:0)}function tQe(y,m,L,z,Y,j){for(var Q=fJ(L,Y,j),ye=cJ(L,z)*j,ke=0,Fe=uJ(y)/2,Ne=0;Ne<y.length-1;Ne++){var ct=y[Ne],St=y[Ne+1],bt=ct.dist(St);if(ke+bt>Fe){var Xt=(Fe-ke)/bt,dr=zs(ct.x,St.x,Xt),Ir=zs(ct.y,St.y,Xt),Ar=new Ob(dr,Ir,St.angleTo(ct),Ne);return Ar._round(),!Q||lJ(y,Ar,ye,Q,m)?Ar:void 0}ke+=bt}}function rQe(y,m,L,z,Y,j,Q,ye,ke){var Fe=fJ(z,j,Q),Ne=cJ(z,Y),ct=Ne*Q,St=y[0].x===0||y[0].x===ke||y[0].y===0||y[0].y===ke;m-ct<m/4&&(m=ct+m/4);var bt=j*2,Xt=St?m/2*ye%m:(Ne/2+bt)*Q*ye%m;return hJ(y,Xt,m,Fe,L,ct,St,!1,ke)}function hJ(y,m,L,z,Y,j,Q,ye,ke){for(var Fe=j/2,Ne=uJ(y),ct=0,St=m-L,bt=[],Xt=0;Xt<y.length-1;Xt++){for(var dr=y[Xt],Ir=y[Xt+1],Ar=dr.dist(Ir),en=Ir.angleTo(dr);St+L<ct+Ar;){St+=L;var Ur=(St-ct)/Ar,Qr=zs(dr.x,Ir.x,Ur),sn=zs(dr.y,Ir.y,Ur);if(Qr>=0&&Qr<ke&&sn>=0&&sn<ke&&St-Fe>=0&&St+Fe<=Ne){var Dn=new Ob(Qr,sn,en,Xt);Dn._round(),(!z||lJ(y,Dn,j,z,Y))&&bt.push(Dn)}}ct+=Ar}return!ye&&!bt.length&&!Q&&(bt=hJ(y,ct/2,L,z,Y,j,Q,!0,ke)),bt}function vJ(y,m,L,z,Y){for(var j=[],Q=0;Q<y.length;Q++)for(var ye=y[Q],ke=void 0,Fe=0;Fe<ye.length-1;Fe++){var Ne=ye[Fe],ct=ye[Fe+1];Ne.x<m&&ct.x<m||(Ne.x<m?Ne=new u(m,Ne.y+(ct.y-Ne.y)*((m-Ne.x)/(ct.x-Ne.x)))._round():ct.x<m&&(ct=new u(m,Ne.y+(ct.y-Ne.y)*((m-Ne.x)/(ct.x-Ne.x)))._round()),!(Ne.y<L&&ct.y<L)&&(Ne.y<L?Ne=new u(Ne.x+(ct.x-Ne.x)*((L-Ne.y)/(ct.y-Ne.y)),L)._round():ct.y<L&&(ct=new u(Ne.x+(ct.x-Ne.x)*((L-Ne.y)/(ct.y-Ne.y)),L)._round()),!(Ne.x>=z&&ct.x>=z)&&(Ne.x>=z?Ne=new u(z,Ne.y+(ct.y-Ne.y)*((z-Ne.x)/(ct.x-Ne.x)))._round():ct.x>=z&&(ct=new u(z,Ne.y+(ct.y-Ne.y)*((z-Ne.x)/(ct.x-Ne.x)))._round()),!(Ne.y>=Y&&ct.y>=Y)&&(Ne.y>=Y?Ne=new u(Ne.x+(ct.x-Ne.x)*((Y-Ne.y)/(ct.y-Ne.y)),Y)._round():ct.y>=Y&&(ct=new u(Ne.x+(ct.x-Ne.x)*((Y-Ne.y)/(ct.y-Ne.y)),Y)._round()),(!ke||!Ne.equals(ke[ke.length-1]))&&(ke=[Ne],j.push(ke)),ke.push(ct)))))}return j}var Bb=yv;function dJ(y,m,L,z){var Y=[],j=y.image,Q=j.pixelRatio,ye=j.paddedRect.w-2*Bb,ke=j.paddedRect.h-2*Bb,Fe=y.right-y.left,Ne=y.bottom-y.top,ct=j.stretchX||[[0,ye]],St=j.stretchY||[[0,ke]],bt=function(qo,Eo){return qo+Eo[1]-Eo[0]},Xt=ct.reduce(bt,0),dr=St.reduce(bt,0),Ir=ye-Xt,Ar=ke-dr,en=0,Ur=Xt,Qr=0,sn=dr,Dn=0,li=Ir,ii=0,Bi=Ar;if(j.content&&z){var Ai=j.content;en=dk(ct,0,Ai[0]),Qr=dk(St,0,Ai[1]),Ur=dk(ct,Ai[0],Ai[2]),sn=dk(St,Ai[1],Ai[3]),Dn=Ai[0]-en,ii=Ai[1]-Qr,li=Ai[2]-Ai[0]-Ur,Bi=Ai[3]-Ai[1]-sn}var Di=function(qo,Eo,Os,Ws){var ql=pk(qo.stretch-en,Ur,Fe,y.left),Jl=gk(qo.fixed-Dn,li,qo.stretch,Xt),wf=pk(Eo.stretch-Qr,sn,Ne,y.top),Iu=gk(Eo.fixed-ii,Bi,Eo.stretch,dr),zc=pk(Os.stretch-en,Ur,Fe,y.left),Oc=gk(Os.fixed-Dn,li,Os.stretch,Xt),Tf=pk(Ws.stretch-Qr,sn,Ne,y.top),uh=gk(Ws.fixed-ii,Bi,Ws.stretch,dr),fh=new u(ql,wf),Ju=new u(zc,wf),ch=new u(zc,Tf),$v=new u(ql,Tf),Pg=new u(Jl/Q,Iu/Q),Wy=new u(Oc/Q,uh/Q),Xy=m*Math.PI/180;if(Xy){var Zy=Math.sin(Xy),Xb=Math.cos(Xy),tp=[Xb,-Zy,Zy,Xb];fh._matMult(tp),Ju._matMult(tp),$v._matMult(tp),ch._matMult(tp)}var wk=qo.stretch+qo.fixed,rq=Os.stretch+Os.fixed,Tk=Eo.stretch+Eo.fixed,nq=Ws.stretch+Ws.fixed,Ed={x:j.paddedRect.x+Bb+wk,y:j.paddedRect.y+Bb+Tk,w:rq-wk,h:nq-Tk},Zb=li/Q/Fe,Ak=Bi/Q/Ne;return{tl:fh,tr:Ju,bl:$v,br:ch,tex:Ed,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Pg,pixelOffsetBR:Wy,minFontScaleX:Zb,minFontScaleY:Ak,isSDF:L}};if(!z||!j.stretchX&&!j.stretchY)Y.push(Di({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:ye+1},{fixed:0,stretch:ke+1}));else for(var wa=pJ(ct,Ir,Xt),Ni=pJ(St,Ar,dr),Yi=0;Yi<wa.length-1;Yi++)for(var Za=wa[Yi],ga=wa[Yi+1],Io=0;Io<Ni.length-1;Io++){var Es=Ni[Io],Fo=Ni[Io+1];Y.push(Di(Za,Es,ga,Fo))}return Y}function dk(y,m,L){for(var z=0,Y=0,j=y;Y<j.length;Y+=1){var Q=j[Y];z+=Math.max(m,Math.min(L,Q[1]))-Math.max(m,Math.min(L,Q[0]))}return z}function pJ(y,m,L){for(var z=[{fixed:-Bb,stretch:0}],Y=0,j=y;Y<j.length;Y+=1){var Q=j[Y],ye=Q[0],ke=Q[1],Fe=z[z.length-1];z.push({fixed:ye-Fe.stretch,stretch:Fe.stretch}),z.push({fixed:ye-Fe.stretch,stretch:Fe.stretch+(ke-ye)})}return z.push({fixed:m+Bb,stretch:L}),z}function pk(y,m,L,z){return y/m*L+z}function gk(y,m,L,z){return y-m*L/z}function nQe(y,m,L,z,Y,j,Q,ye){for(var ke=z.layout.get("text-rotate").evaluate(j,{})*Math.PI/180,Fe=[],Ne=0,ct=m.positionedLines;Ne<ct.length;Ne+=1)for(var St=ct[Ne],bt=0,Xt=St.positionedGlyphs;bt<Xt.length;bt+=1){var dr=Xt[bt];if(dr.rect){var Ir=dr.rect||{},Ar=1,en=JK+Ar,Ur=!0,Qr=1,sn=0,Dn=(Y||ye)&&dr.vertical,li=dr.metrics.advance*dr.scale/2;if(ye&&m.verticalizable){var ii=(dr.scale-1)*jf,Bi=(jf-dr.metrics.width*dr.scale)/2;sn=St.lineOffset/2-(dr.imageName?-Bi:ii)}if(dr.imageName){var Ai=Q[dr.imageName];Ur=Ai.sdf,Qr=Ai.pixelRatio,en=yv/Qr}var Di=Y?[dr.x+li,dr.y]:[0,0],wa=Y?[0,0]:[dr.x+li+L[0],dr.y+L[1]-sn],Ni=[0,0];Dn&&(Ni=wa,wa=[0,0]);var Yi=(dr.metrics.left-en)*dr.scale-li+wa[0],Za=(-dr.metrics.top-en)*dr.scale+wa[1],ga=Yi+Ir.w*dr.scale/Qr,Io=Za+Ir.h*dr.scale/Qr,Es=new u(Yi,Za),Fo=new u(ga,Za),qo=new u(Yi,Io),Eo=new u(ga,Io);if(Dn){var Os=new u(-li,li-rA),Ws=-Math.PI/2,ql=jf/2-li,Jl=dr.imageName?ql:0,wf=new u(5-rA-ql,-Jl),Iu=new(Function.prototype.bind.apply(u,[null].concat(Ni)));Es._rotateAround(Ws,Os)._add(wf)._add(Iu),Fo._rotateAround(Ws,Os)._add(wf)._add(Iu),qo._rotateAround(Ws,Os)._add(wf)._add(Iu),Eo._rotateAround(Ws,Os)._add(wf)._add(Iu)}if(ke){var zc=Math.sin(ke),Oc=Math.cos(ke),Tf=[Oc,-zc,zc,Oc];Es._matMult(Tf),Fo._matMult(Tf),qo._matMult(Tf),Eo._matMult(Tf)}var uh=new u(0,0),fh=new u(0,0),Ju=0,ch=0;Fe.push({tl:Es,tr:Fo,bl:qo,br:Eo,tex:Ir,writingMode:m.writingMode,glyphOffset:Di,sectionIndex:dr.sectionIndex,isSDF:Ur,pixelOffsetTL:uh,pixelOffsetBR:fh,minFontScaleX:Ju,minFontScaleY:ch})}}return Fe}var yk=function(m,L,z,Y,j,Q,ye,ke,Fe,Ne){if(this.boxStartIndex=m.length,Fe){var ct=Q.top,St=Q.bottom,bt=Q.collisionPadding;bt&&(ct-=bt[1],St+=bt[3]);var Xt=St-ct;Xt>0&&(Xt=Math.max(10,Xt),this.circleDiameter=Xt)}else{var dr=Q.top*ye-ke,Ir=Q.bottom*ye+ke,Ar=Q.left*ye-ke,en=Q.right*ye+ke,Ur=Q.collisionPadding;if(Ur&&(Ar-=Ur[0]*ye,dr-=Ur[1]*ye,en+=Ur[2]*ye,Ir+=Ur[3]*ye),Ne){var Qr=new u(Ar,dr),sn=new u(en,dr),Dn=new u(Ar,Ir),li=new u(en,Ir),ii=Ne*Math.PI/180;Qr._rotate(ii),sn._rotate(ii),Dn._rotate(ii),li._rotate(ii),Ar=Math.min(Qr.x,sn.x,Dn.x,li.x),en=Math.max(Qr.x,sn.x,Dn.x,li.x),dr=Math.min(Qr.y,sn.y,Dn.y,li.y),Ir=Math.max(Qr.y,sn.y,Dn.y,li.y)}m.emplaceBack(L.x,L.y,Ar,dr,en,Ir,z,Y,j)}this.boxEndIndex=m.length},Nb=function(m,L){if(m===void 0&&(m=[]),L===void 0&&(L=iQe),this.data=m,this.length=this.data.length,this.compare=L,this.length>0)for(var z=(this.length>>1)-1;z>=0;z--)this._down(z)};Nb.prototype.push=function(m){this.data.push(m),this.length++,this._up(this.length-1)},Nb.prototype.pop=function(){if(this.length!==0){var m=this.data[0],L=this.data.pop();return this.length--,this.length>0&&(this.data[0]=L,this._down(0)),m}},Nb.prototype.peek=function(){return this.data[0]},Nb.prototype._up=function(m){for(var L=this,z=L.data,Y=L.compare,j=z[m];m>0;){var Q=m-1>>1,ye=z[Q];if(Y(j,ye)>=0)break;z[m]=ye,m=Q}z[m]=j},Nb.prototype._down=function(m){for(var L=this,z=L.data,Y=L.compare,j=this.length>>1,Q=z[m];m<j;){var ye=(m<<1)+1,ke=z[ye],Fe=ye+1;if(Fe<this.length&&Y(z[Fe],ke)<0&&(ye=Fe,ke=z[Fe]),Y(ke,Q)>=0)break;z[m]=ke,m=ye}z[m]=Q};function iQe(y,m){return y<m?-1:y>m?1:0}function aQe(y,m,L){m===void 0&&(m=1),L===void 0&&(L=!1);for(var z=1/0,Y=1/0,j=-1/0,Q=-1/0,ye=y[0],ke=0;ke<ye.length;ke++){var Fe=ye[ke];(!ke||Fe.x<z)&&(z=Fe.x),(!ke||Fe.y<Y)&&(Y=Fe.y),(!ke||Fe.x>j)&&(j=Fe.x),(!ke||Fe.y>Q)&&(Q=Fe.y)}var Ne=j-z,ct=Q-Y,St=Math.min(Ne,ct),bt=St/2,Xt=new Nb([],oQe);if(St===0)return new u(z,Y);for(var dr=z;dr<j;dr+=St)for(var Ir=Y;Ir<Q;Ir+=St)Xt.push(new Ub(dr+bt,Ir+bt,bt,y));for(var Ar=lQe(y),en=Xt.length;Xt.length;){var Ur=Xt.pop();(Ur.d>Ar.d||!Ar.d)&&(Ar=Ur,L&&console.log("found best %d after %d probes",Math.round(1e4*Ur.d)/1e4,en)),!(Ur.max-Ar.d<=m)&&(bt=Ur.h/2,Xt.push(new Ub(Ur.p.x-bt,Ur.p.y-bt,bt,y)),Xt.push(new Ub(Ur.p.x+bt,Ur.p.y-bt,bt,y)),Xt.push(new Ub(Ur.p.x-bt,Ur.p.y+bt,bt,y)),Xt.push(new Ub(Ur.p.x+bt,Ur.p.y+bt,bt,y)),en+=4)}return L&&(console.log("num probes: "+en),console.log("best distance: "+Ar.d)),Ar.p}function oQe(y,m){return m.max-y.max}function Ub(y,m,L,z){this.p=new u(y,m),this.h=L,this.d=sQe(this.p,z),this.max=this.d+this.h*Math.SQRT2}function sQe(y,m){for(var L=!1,z=1/0,Y=0;Y<m.length;Y++)for(var j=m[Y],Q=0,ye=j.length,ke=ye-1;Q<ye;ke=Q++){var Fe=j[Q],Ne=j[ke];Fe.y>y.y!=Ne.y>y.y&&y.x<(Ne.x-Fe.x)*(y.y-Fe.y)/(Ne.y-Fe.y)+Fe.x&&(L=!L),z=Math.min(z,Eg(y,Fe,Ne))}return(L?1:-1)*Math.sqrt(z)}function lQe(y){for(var m=0,L=0,z=0,Y=y[0],j=0,Q=Y.length,ye=Q-1;j<Q;ye=j++){var ke=Y[j],Fe=Y[ye],Ne=ke.x*Fe.y-Fe.x*ke.y;L+=(ke.x+Fe.x)*Ne,z+=(ke.y+Fe.y)*Ne,m+=Ne*3}return new Ub(L/m,z/m,0,y)}var Vb=7,j8=Number.POSITIVE_INFINITY;function gJ(y,m){function L(Y,j){var Q=0,ye=0;j<0&&(j=0);var ke=j/Math.sqrt(2);switch(Y){case"top-right":case"top-left":ye=ke-Vb;break;case"bottom-right":case"bottom-left":ye=-ke+Vb;break;case"bottom":ye=-j+Vb;break;case"top":ye=j-Vb;break}switch(Y){case"top-right":case"bottom-right":Q=-ke;break;case"top-left":case"bottom-left":Q=ke;break;case"left":Q=j;break;case"right":Q=-j;break}return[Q,ye]}function z(Y,j,Q){var ye=0,ke=0;switch(j=Math.abs(j),Q=Math.abs(Q),Y){case"top-right":case"top-left":case"top":ke=Q-Vb;break;case"bottom-right":case"bottom-left":case"bottom":ke=-Q+Vb;break}switch(Y){case"top-right":case"bottom-right":case"right":ye=-j;break;case"top-left":case"bottom-left":case"left":ye=j;break}return[ye,ke]}return m[1]!==j8?z(y,m[0],m[1]):L(y,m[0])}function uQe(y,m,L,z,Y,j,Q){y.createArrays();var ye=512*y.overscaling;y.tilePixelRatio=cn/ye,y.compareText={},y.iconsNeedLinear=!1;var ke=y.layers[0].layout,Fe=y.layers[0]._unevaluatedLayout._values,Ne={};if(y.textSizeData.kind==="composite"){var ct=y.textSizeData,St=ct.minZoom,bt=ct.maxZoom;Ne.compositeTextSizes=[Fe["text-size"].possiblyEvaluate(new kn(St),Q),Fe["text-size"].possiblyEvaluate(new kn(bt),Q)]}if(y.iconSizeData.kind==="composite"){var Xt=y.iconSizeData,dr=Xt.minZoom,Ir=Xt.maxZoom;Ne.compositeIconSizes=[Fe["icon-size"].possiblyEvaluate(new kn(dr),Q),Fe["icon-size"].possiblyEvaluate(new kn(Ir),Q)]}Ne.layoutTextSize=Fe["text-size"].possiblyEvaluate(new kn(y.zoom+1),Q),Ne.layoutIconSize=Fe["icon-size"].possiblyEvaluate(new kn(y.zoom+1),Q),Ne.textMaxSize=Fe["text-size"].possiblyEvaluate(new kn(18));for(var Ar=ke.get("text-line-height")*jf,en=ke.get("text-rotation-alignment")==="map"&&ke.get("symbol-placement")!=="point",Ur=ke.get("text-keep-upright"),Qr=ke.get("text-size"),sn=function(){var ii=li[Dn],Bi=ke.get("text-font").evaluate(ii,{},Q).join(","),Ai=Qr.evaluate(ii,{},Q),Di=Ne.layoutTextSize.evaluate(ii,{},Q),wa=Ne.layoutIconSize.evaluate(ii,{},Q),Ni={horizontal:{},vertical:void 0},Yi=ii.text,Za=[0,0];if(Yi){var ga=Yi.toString(),Io=ke.get("text-letter-spacing").evaluate(ii,{},Q)*jf,Es=Mt(ga)?Io:0,Fo=ke.get("text-anchor").evaluate(ii,{},Q),qo=ke.get("text-variable-anchor");if(!qo){var Eo=ke.get("text-radial-offset").evaluate(ii,{},Q);Eo?Za=gJ(Fo,[Eo*jf,j8]):Za=ke.get("text-offset").evaluate(ii,{},Q).map(function(Pg){return Pg*jf})}var Os=en?"center":ke.get("text-justify").evaluate(ii,{},Q),Ws=ke.get("symbol-placement"),ql=Ws==="point"?ke.get("text-max-width").evaluate(ii,{},Q)*jf:0,Jl=function(){y.allowVerticalPlacement&&tt(ga)&&(Ni.vertical=vk(Yi,m,L,Y,Bi,ql,Ar,Fo,"left",Es,Za,Qv.vertical,!0,Ws,Di,Ai))};if(!en&&qo){for(var wf=Os==="auto"?qo.map(function(Pg){return K8(Pg)}):[Os],Iu=!1,zc=0;zc<wf.length;zc++){var Oc=wf[zc];if(!Ni.horizontal[Oc])if(Iu)Ni.horizontal[Oc]=Ni.horizontal[0];else{var Tf=vk(Yi,m,L,Y,Bi,ql,Ar,"center",Oc,Es,Za,Qv.horizontal,!1,Ws,Di,Ai);Tf&&(Ni.horizontal[Oc]=Tf,Iu=Tf.positionedLines.length===1)}}Jl()}else{Os==="auto"&&(Os=K8(Fo));var uh=vk(Yi,m,L,Y,Bi,ql,Ar,Fo,Os,Es,Za,Qv.horizontal,!1,Ws,Di,Ai);uh&&(Ni.horizontal[Os]=uh),Jl(),tt(ga)&&en&&Ur&&(Ni.vertical=vk(Yi,m,L,Y,Bi,ql,Ar,Fo,Os,Es,Za,Qv.vertical,!1,Ws,Di,Ai))}}var fh=void 0,Ju=!1;if(ii.icon&&ii.icon.name){var ch=z[ii.icon.name];ch&&(fh=$Je(Y[ii.icon.name],ke.get("icon-offset").evaluate(ii,{},Q),ke.get("icon-anchor").evaluate(ii,{},Q)),Ju=ch.sdf,y.sdfIcons===void 0?y.sdfIcons=ch.sdf:y.sdfIcons!==ch.sdf&&X("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ch.pixelRatio!==y.pixelRatio||ke.get("icon-rotate").constantOr(1)!==0)&&(y.iconsNeedLinear=!0))}var $v=mJ(Ni.horizontal)||Ni.vertical;y.iconsInText=$v?$v.iconsInText:!1,($v||fh)&&fQe(y,ii,Ni,fh,z,Ne,Di,wa,Za,Ju,Q)},Dn=0,li=y.features;Dn<li.length;Dn+=1)sn();j&&y.generateCollisionDebugBuffers()}function K8(y){switch(y){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function fQe(y,m,L,z,Y,j,Q,ye,ke,Fe,Ne){var ct=j.textMaxSize.evaluate(m,{});ct===void 0&&(ct=Q);var St=y.layers[0].layout,bt=St.get("icon-offset").evaluate(m,{},Ne),Xt=mJ(L.horizontal),dr=24,Ir=Q/dr,Ar=y.tilePixelRatio*Ir,en=y.tilePixelRatio*ct/dr,Ur=y.tilePixelRatio*ye,Qr=y.tilePixelRatio*St.get("symbol-spacing"),sn=St.get("text-padding")*y.tilePixelRatio,Dn=St.get("icon-padding")*y.tilePixelRatio,li=St.get("text-max-angle")/180*Math.PI,ii=St.get("text-rotation-alignment")==="map"&&St.get("symbol-placement")!=="point",Bi=St.get("icon-rotation-alignment")==="map"&&St.get("symbol-placement")!=="point",Ai=St.get("symbol-placement"),Di=Qr/2,wa=St.get("icon-text-fit"),Ni;z&&wa!=="none"&&(y.allowVerticalPlacement&&L.vertical&&(Ni=aJ(z,L.vertical,wa,St.get("icon-text-fit-padding"),bt,Ir)),Xt&&(z=aJ(z,Xt,wa,St.get("icon-text-fit-padding"),bt,Ir)));var Yi=function(Xb,tp){tp.x<0||tp.x>=cn||tp.y<0||tp.y>=cn||cQe(y,tp,Xb,L,z,Y,Ni,y.layers[0],y.collisionBoxArray,m.index,m.sourceLayerIndex,y.index,Ar,sn,ii,ke,Ur,Dn,Bi,bt,m,j,Fe,Ne,Q)};if(Ai==="line")for(var Za=0,ga=vJ(m.geometry,0,0,cn,cn);Za<ga.length;Za+=1)for(var Io=ga[Za],Es=rQe(Io,Qr,li,L.vertical||Xt,z,dr,en,y.overscaling,cn),Fo=0,qo=Es;Fo<qo.length;Fo+=1){var Eo=qo[Fo],Os=Xt;(!Os||!hQe(y,Os.text,Di,Eo))&&Yi(Io,Eo)}else if(Ai==="line-center")for(var Ws=0,ql=m.geometry;Ws<ql.length;Ws+=1){var Jl=ql[Ws];if(Jl.length>1){var wf=tQe(Jl,li,L.vertical||Xt,z,dr,en);wf&&Yi(Jl,wf)}}else if(m.type==="Polygon")for(var Iu=0,zc=N8(m.geometry,0);Iu<zc.length;Iu+=1){var Oc=zc[Iu],Tf=aQe(Oc,16);Yi(Oc[0],new Ob(Tf.x,Tf.y,0))}else if(m.type==="LineString")for(var uh=0,fh=m.geometry;uh<fh.length;uh+=1){var Ju=fh[uh];Yi(Ju,new Ob(Ju[0].x,Ju[0].y,0))}else if(m.type==="Point")for(var ch=0,$v=m.geometry;ch<$v.length;ch+=1)for(var Pg=$v[ch],Wy=0,Xy=Pg;Wy<Xy.length;Wy+=1){var Zy=Xy[Wy];Yi([Zy],new Ob(Zy.x,Zy.y,0))}}var nA=255,Gy=nA*Jp;function yJ(y,m,L,z,Y,j,Q,ye,ke,Fe,Ne,ct,St,bt,Xt){var dr=nQe(m,L,ye,Y,j,Q,z,y.allowVerticalPlacement),Ir=y.textSizeData,Ar=null;Ir.kind==="source"?(Ar=[Jp*Y.layout.get("text-size").evaluate(Q,{})],Ar[0]>Gy&&X(y.layerIds[0]+': Value for "text-size" is >= '+nA+'. Reduce your "text-size".')):Ir.kind==="composite"&&(Ar=[Jp*bt.compositeTextSizes[0].evaluate(Q,{},Xt),Jp*bt.compositeTextSizes[1].evaluate(Q,{},Xt)],(Ar[0]>Gy||Ar[1]>Gy)&&X(y.layerIds[0]+': Value for "text-size" is >= '+nA+'. Reduce your "text-size".')),y.addSymbols(y.text,dr,Ar,ye,j,Q,Fe,m,ke.lineStartIndex,ke.lineLength,St,Xt);for(var en=0,Ur=Ne;en<Ur.length;en+=1){var Qr=Ur[en];ct[Qr]=y.text.placedSymbolArray.length-1}return dr.length*4}function mJ(y){for(var m in y)return y[m];return null}function cQe(y,m,L,z,Y,j,Q,ye,ke,Fe,Ne,ct,St,bt,Xt,dr,Ir,Ar,en,Ur,Qr,sn,Dn,li,ii){var Bi,Ai=y.addToLineVertexArray(m,L),Di,wa,Ni,Yi,Za=0,ga=0,Io=0,Es=0,Fo=-1,qo=-1,Eo={},Os=W(""),Ws=0,ql=0;if(ye._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Bi=ye.layout.get("text-offset").evaluate(Qr,{},li).map(function(oA){return oA*jf}),Ws=Bi[0],ql=Bi[1]):(Ws=ye.layout.get("text-radial-offset").evaluate(Qr,{},li)*jf,ql=j8),y.allowVerticalPlacement&&z.vertical){var Jl=ye.layout.get("text-rotate").evaluate(Qr,{},li),wf=Jl+90,Iu=z.vertical;Ni=new yk(ke,m,Fe,Ne,ct,Iu,St,bt,Xt,wf),Q&&(Yi=new yk(ke,m,Fe,Ne,ct,Q,Ir,Ar,Xt,wf))}if(Y){var zc=ye.layout.get("icon-rotate").evaluate(Qr,{}),Oc=ye.layout.get("icon-text-fit")!=="none",Tf=dJ(Y,zc,Dn,Oc),uh=Q?dJ(Q,zc,Dn,Oc):void 0;wa=new yk(ke,m,Fe,Ne,ct,Y,Ir,Ar,!1,zc),Za=Tf.length*4;var fh=y.iconSizeData,Ju=null;fh.kind==="source"?(Ju=[Jp*ye.layout.get("icon-size").evaluate(Qr,{})],Ju[0]>Gy&&X(y.layerIds[0]+': Value for "icon-size" is >= '+nA+'. Reduce your "icon-size".')):fh.kind==="composite"&&(Ju=[Jp*sn.compositeIconSizes[0].evaluate(Qr,{},li),Jp*sn.compositeIconSizes[1].evaluate(Qr,{},li)],(Ju[0]>Gy||Ju[1]>Gy)&&X(y.layerIds[0]+': Value for "icon-size" is >= '+nA+'. Reduce your "icon-size".')),y.addSymbols(y.icon,Tf,Ju,Ur,en,Qr,!1,m,Ai.lineStartIndex,Ai.lineLength,-1,li),Fo=y.icon.placedSymbolArray.length-1,uh&&(ga=uh.length*4,y.addSymbols(y.icon,uh,Ju,Ur,en,Qr,Qv.vertical,m,Ai.lineStartIndex,Ai.lineLength,-1,li),qo=y.icon.placedSymbolArray.length-1)}for(var ch in z.horizontal){var $v=z.horizontal[ch];if(!Di){Os=W($v.text);var Pg=ye.layout.get("text-rotate").evaluate(Qr,{},li);Di=new yk(ke,m,Fe,Ne,ct,$v,St,bt,Xt,Pg)}var Wy=$v.positionedLines.length===1;if(Io+=yJ(y,m,$v,j,ye,Xt,Qr,dr,Ai,z.vertical?Qv.horizontal:Qv.horizontalOnly,Wy?Object.keys(z.horizontal):[ch],Eo,Fo,sn,li),Wy)break}z.vertical&&(Es+=yJ(y,m,z.vertical,j,ye,Xt,Qr,dr,Ai,Qv.vertical,["vertical"],Eo,qo,sn,li));var Xy=Di?Di.boxStartIndex:y.collisionBoxArray.length,Zy=Di?Di.boxEndIndex:y.collisionBoxArray.length,Xb=Ni?Ni.boxStartIndex:y.collisionBoxArray.length,tp=Ni?Ni.boxEndIndex:y.collisionBoxArray.length,wk=wa?wa.boxStartIndex:y.collisionBoxArray.length,rq=wa?wa.boxEndIndex:y.collisionBoxArray.length,Tk=Yi?Yi.boxStartIndex:y.collisionBoxArray.length,nq=Yi?Yi.boxEndIndex:y.collisionBoxArray.length,Ed=-1,Zb=function(oA,IJ){return oA&&oA.circleDiameter?Math.max(oA.circleDiameter,IJ):IJ};Ed=Zb(Di,Ed),Ed=Zb(Ni,Ed),Ed=Zb(wa,Ed),Ed=Zb(Yi,Ed);var Ak=Ed>-1?1:0;Ak&&(Ed*=ii/jf),y.glyphOffsetArray.length>=Ss.MAX_GLYPHS&&X("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Qr.sortKey!==void 0&&y.addToSortKeyRanges(y.symbolInstances.length,Qr.sortKey),y.symbolInstances.emplaceBack(m.x,m.y,Eo.right>=0?Eo.right:-1,Eo.center>=0?Eo.center:-1,Eo.left>=0?Eo.left:-1,Eo.vertical||-1,Fo,qo,Os,Xy,Zy,Xb,tp,wk,rq,Tk,nq,Fe,Io,Es,Za,ga,Ak,0,St,Ws,ql,Ed)}function hQe(y,m,L,z){var Y=y.compareText;if(!(m in Y))Y[m]=[];else for(var j=Y[m],Q=j.length-1;Q>=0;Q--)if(z.dist(j[Q])<L)return!0;return Y[m].push(z),!1}var vQe=Ib.VectorTileFeature.types,dQe=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function mk(y,m,L,z,Y,j,Q,ye,ke,Fe,Ne,ct,St){var bt=ye?Math.min(Gy,Math.round(ye[0])):0,Xt=ye?Math.min(Gy,Math.round(ye[1])):0;y.emplaceBack(m,L,Math.round(z*32),Math.round(Y*32),j,Q,(bt<<1)+(ke?1:0),Xt,Fe*16,Ne*16,ct*256,St*256)}function J8(y,m,L){y.emplaceBack(m.x,m.y,L),y.emplaceBack(m.x,m.y,L),y.emplaceBack(m.x,m.y,L),y.emplaceBack(m.x,m.y,L)}function pQe(y){for(var m=0,L=y.sections;m<L.length;m+=1){var z=L[m];if(Pr(z.text))return!0}return!1}var Hb=function(m){this.layoutVertexArray=new $i,this.indexArray=new Ei,this.programConfigurations=m,this.segments=new Qa,this.dynamicLayoutVertexArray=new Pn,this.opacityVertexArray=new Mn,this.placedSymbolArray=new ys};Hb.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Hb.prototype.upload=function(m,L,z,Y){this.isEmpty()||(z&&(this.layoutVertexBuffer=m.createVertexBuffer(this.layoutVertexArray,pJe.members),this.indexBuffer=m.createIndexBuffer(this.indexArray,L),this.dynamicLayoutVertexBuffer=m.createVertexBuffer(this.dynamicLayoutVertexArray,gJe.members,!0),this.opacityVertexBuffer=m.createVertexBuffer(this.opacityVertexArray,dQe,!0),this.opacityVertexBuffer.itemSize=1),(z||Y)&&this.programConfigurations.upload(m))},Hb.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},V("SymbolBuffers",Hb);var iA=function(m,L,z){this.layoutVertexArray=new m,this.layoutAttributes=L,this.indexArray=new z,this.segments=new Qa,this.collisionVertexArray=new Qn};iA.prototype.upload=function(m){this.layoutVertexBuffer=m.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=m.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=m.createVertexBuffer(this.collisionVertexArray,yJe.members,!0)},iA.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},V("CollisionBuffers",iA);var Ss=function(m){this.collisionBoxArray=m.collisionBoxArray,this.zoom=m.zoom,this.overscaling=m.overscaling,this.layers=m.layers,this.layerIds=this.layers.map(function(ke){return ke.id}),this.index=m.index,this.pixelRatio=m.pixelRatio,this.sourceLayerIndex=m.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Cb([]),this.placementViewportMatrix=Cb([]);var L=this.layers[0],z=L._unevaluatedLayout._values;this.textSizeData=Z8(this.zoom,z["text-size"]),this.iconSizeData=Z8(this.zoom,z["icon-size"]);var Y=this.layers[0].layout,j=Y.get("symbol-sort-key"),Q=Y.get("symbol-z-order");this.canOverlap=Y.get("text-allow-overlap")||Y.get("icon-allow-overlap")||Y.get("text-ignore-placement")||Y.get("icon-ignore-placement"),this.sortFeaturesByKey=Q!=="viewport-y"&&j.constantOr(1)!==void 0;var ye=Q==="viewport-y"||Q==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=ye&&this.canOverlap,Y.get("symbol-placement")==="point"&&(this.writingModes=Y.get("text-writing-mode").map(function(ke){return Qv[ke]})),this.stateDependentLayerIds=this.layers.filter(function(ke){return ke.isStateDependent()}).map(function(ke){return ke.id}),this.sourceID=m.sourceID};Ss.prototype.createArrays=function(){this.text=new Hb(new Wr(this.layers,this.zoom,function(m){return/^text/.test(m)})),this.icon=new Hb(new Wr(this.layers,this.zoom,function(m){return/^icon/.test(m)})),this.glyphOffsetArray=new hc,this.lineVertexArray=new Ms,this.symbolInstances=new Zf},Ss.prototype.calculateGlyphDependencies=function(m,L,z,Y,j){for(var Q=0;Q<m.length;Q++)if(L[m.charCodeAt(Q)]=!0,(z||Y)&&j){var ye=$T[m.charAt(Q)];ye&&(L[ye.charCodeAt(0)]=!0)}},Ss.prototype.populate=function(m,L,z){var Y=this.layers[0],j=Y.layout,Q=j.get("text-font"),ye=j.get("text-field"),ke=j.get("icon-image"),Fe=(ye.value.kind!=="constant"||ye.value.value instanceof Us&&!ye.value.value.isEmpty()||ye.value.value.toString().length>0)&&(Q.value.kind!=="constant"||Q.value.value.length>0),Ne=ke.value.kind!=="constant"||!!ke.value.value||Object.keys(ke.parameters).length>0,ct=j.get("symbol-sort-key");if(this.features=[],!(!Fe&&!Ne)){for(var St=L.iconDependencies,bt=L.glyphDependencies,Xt=L.availableImages,dr=new kn(this.zoom),Ir=0,Ar=m;Ir<Ar.length;Ir+=1){var en=Ar[Ir],Ur=en.feature,Qr=en.id,sn=en.index,Dn=en.sourceLayerIndex,li=Y._featureFilter.needGeometry,ii=Ra(Ur,li);if(Y._featureFilter.filter(dr,ii,z)){li||(ii.geometry=xi(Ur));var Bi=void 0;if(Fe){var Ai=Y.getValueAndResolveTokens("text-field",ii,z,Xt),Di=Us.factory(Ai);pQe(Di)&&(this.hasRTLText=!0),(!this.hasRTLText||xa()==="unavailable"||this.hasRTLText&&Do.isParsed())&&(Bi=_Je(Di,Y,ii))}var wa=void 0;if(Ne){var Ni=Y.getValueAndResolveTokens("icon-image",ii,z,Xt);Ni instanceof _s?wa=Ni:wa=_s.fromString(Ni)}if(!(!Bi&&!wa)){var Yi=this.sortFeaturesByKey?ct.evaluate(ii,{},z):void 0,Za={id:Qr,text:Bi,icon:wa,index:sn,sourceLayerIndex:Dn,geometry:ii.geometry,properties:Ur.properties,type:vQe[Ur.type],sortKey:Yi};if(this.features.push(Za),wa&&(St[wa.name]=!0),Bi){var ga=Q.evaluate(ii,{},z).join(","),Io=j.get("text-rotation-alignment")==="map"&&j.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Qv.vertical)>=0;for(var Es=0,Fo=Bi.sections;Es<Fo.length;Es+=1){var qo=Fo[Es];if(qo.image)St[qo.image.name]=!0;else{var Eo=tt(Bi.toString()),Os=qo.fontStack||ga,Ws=bt[Os]=bt[Os]||{};this.calculateGlyphDependencies(qo.text,Ws,Io,this.allowVerticalPlacement,Eo)}}}}}}j.get("symbol-placement")==="line"&&(this.features=bJe(this.features)),this.sortFeaturesByKey&&this.features.sort(function(ql,Jl){return ql.sortKey-Jl.sortKey})}},Ss.prototype.update=function(m,L,z){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(m,L,this.layers,z),this.icon.programConfigurations.updatePaintArrays(m,L,this.layers,z))},Ss.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Ss.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ss.prototype.upload=function(m){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(m),this.iconCollisionBox.upload(m)),this.text.upload(m,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(m,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Ss.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Ss.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Ss.prototype.addToLineVertexArray=function(m,L){var z=this.lineVertexArray.length;if(m.segment!==void 0){for(var Y=m.dist(L[m.segment+1]),j=m.dist(L[m.segment]),Q={},ye=m.segment+1;ye<L.length;ye++)Q[ye]={x:L[ye].x,y:L[ye].y,tileUnitDistanceFromAnchor:Y},ye<L.length-1&&(Y+=L[ye+1].dist(L[ye]));for(var ke=m.segment||0;ke>=0;ke--)Q[ke]={x:L[ke].x,y:L[ke].y,tileUnitDistanceFromAnchor:j},ke>0&&(j+=L[ke-1].dist(L[ke]));for(var Fe=0;Fe<L.length;Fe++){var Ne=Q[Fe];this.lineVertexArray.emplaceBack(Ne.x,Ne.y,Ne.tileUnitDistanceFromAnchor)}}return{lineStartIndex:z,lineLength:this.lineVertexArray.length-z}},Ss.prototype.addSymbols=function(m,L,z,Y,j,Q,ye,ke,Fe,Ne,ct,St){for(var bt=m.indexArray,Xt=m.layoutVertexArray,dr=m.segments.prepareSegment(4*L.length,Xt,bt,this.canOverlap?Q.sortKey:void 0),Ir=this.glyphOffsetArray.length,Ar=dr.vertexLength,en=this.allowVerticalPlacement&&ye===Qv.vertical?Math.PI/2:0,Ur=Q.text&&Q.text.sections,Qr=0;Qr<L.length;Qr++){var sn=L[Qr],Dn=sn.tl,li=sn.tr,ii=sn.bl,Bi=sn.br,Ai=sn.tex,Di=sn.pixelOffsetTL,wa=sn.pixelOffsetBR,Ni=sn.minFontScaleX,Yi=sn.minFontScaleY,Za=sn.glyphOffset,ga=sn.isSDF,Io=sn.sectionIndex,Es=dr.vertexLength,Fo=Za[1];mk(Xt,ke.x,ke.y,Dn.x,Fo+Dn.y,Ai.x,Ai.y,z,ga,Di.x,Di.y,Ni,Yi),mk(Xt,ke.x,ke.y,li.x,Fo+li.y,Ai.x+Ai.w,Ai.y,z,ga,wa.x,Di.y,Ni,Yi),mk(Xt,ke.x,ke.y,ii.x,Fo+ii.y,Ai.x,Ai.y+Ai.h,z,ga,Di.x,wa.y,Ni,Yi),mk(Xt,ke.x,ke.y,Bi.x,Fo+Bi.y,Ai.x+Ai.w,Ai.y+Ai.h,z,ga,wa.x,wa.y,Ni,Yi),J8(m.dynamicLayoutVertexArray,ke,en),bt.emplaceBack(Es,Es+1,Es+2),bt.emplaceBack(Es+1,Es+2,Es+3),dr.vertexLength+=4,dr.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Za[0]),(Qr===L.length-1||Io!==L[Qr+1].sectionIndex)&&m.programConfigurations.populatePaintArrays(Xt.length,Q,Q.index,{},St,Ur&&Ur[Io])}m.placedSymbolArray.emplaceBack(ke.x,ke.y,Ir,this.glyphOffsetArray.length-Ir,Ar,Fe,Ne,ke.segment,z?z[0]:0,z?z[1]:0,Y[0],Y[1],ye,0,!1,0,ct)},Ss.prototype._addCollisionDebugVertex=function(m,L,z,Y,j,Q){return L.emplaceBack(0,0),m.emplaceBack(z.x,z.y,Y,j,Math.round(Q.x),Math.round(Q.y))},Ss.prototype.addCollisionDebugVertices=function(m,L,z,Y,j,Q,ye){var ke=j.segments.prepareSegment(4,j.layoutVertexArray,j.indexArray),Fe=ke.vertexLength,Ne=j.layoutVertexArray,ct=j.collisionVertexArray,St=ye.anchorX,bt=ye.anchorY;this._addCollisionDebugVertex(Ne,ct,Q,St,bt,new u(m,L)),this._addCollisionDebugVertex(Ne,ct,Q,St,bt,new u(z,L)),this._addCollisionDebugVertex(Ne,ct,Q,St,bt,new u(z,Y)),this._addCollisionDebugVertex(Ne,ct,Q,St,bt,new u(m,Y)),ke.vertexLength+=4;var Xt=j.indexArray;Xt.emplaceBack(Fe,Fe+1),Xt.emplaceBack(Fe+1,Fe+2),Xt.emplaceBack(Fe+2,Fe+3),Xt.emplaceBack(Fe+3,Fe),ke.primitiveLength+=4},Ss.prototype.addDebugCollisionBoxes=function(m,L,z,Y){for(var j=m;j<L;j++){var Q=this.collisionBoxArray.get(j),ye=Q.x1,ke=Q.y1,Fe=Q.x2,Ne=Q.y2;this.addCollisionDebugVertices(ye,ke,Fe,Ne,Y?this.textCollisionBox:this.iconCollisionBox,Q.anchorPoint,z)}},Ss.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new iA(di,WK.members,_a),this.iconCollisionBox=new iA(di,WK.members,_a);for(var m=0;m<this.symbolInstances.length;m++){var L=this.symbolInstances.get(m);this.addDebugCollisionBoxes(L.textBoxStartIndex,L.textBoxEndIndex,L,!0),this.addDebugCollisionBoxes(L.verticalTextBoxStartIndex,L.verticalTextBoxEndIndex,L,!0),this.addDebugCollisionBoxes(L.iconBoxStartIndex,L.iconBoxEndIndex,L,!1),this.addDebugCollisionBoxes(L.verticalIconBoxStartIndex,L.verticalIconBoxEndIndex,L,!1)}},Ss.prototype._deserializeCollisionBoxesForSymbol=function(m,L,z,Y,j,Q,ye,ke,Fe){for(var Ne={},ct=L;ct<z;ct++){var St=m.get(ct);Ne.textBox={x1:St.x1,y1:St.y1,x2:St.x2,y2:St.y2,anchorPointX:St.anchorPointX,anchorPointY:St.anchorPointY},Ne.textFeatureIndex=St.featureIndex;break}for(var bt=Y;bt<j;bt++){var Xt=m.get(bt);Ne.verticalTextBox={x1:Xt.x1,y1:Xt.y1,x2:Xt.x2,y2:Xt.y2,anchorPointX:Xt.anchorPointX,anchorPointY:Xt.anchorPointY},Ne.verticalTextFeatureIndex=Xt.featureIndex;break}for(var dr=Q;dr<ye;dr++){var Ir=m.get(dr);Ne.iconBox={x1:Ir.x1,y1:Ir.y1,x2:Ir.x2,y2:Ir.y2,anchorPointX:Ir.anchorPointX,anchorPointY:Ir.anchorPointY},Ne.iconFeatureIndex=Ir.featureIndex;break}for(var Ar=ke;Ar<Fe;Ar++){var en=m.get(Ar);Ne.verticalIconBox={x1:en.x1,y1:en.y1,x2:en.x2,y2:en.y2,anchorPointX:en.anchorPointX,anchorPointY:en.anchorPointY},Ne.verticalIconFeatureIndex=en.featureIndex;break}return Ne},Ss.prototype.deserializeCollisionBoxes=function(m){this.collisionArrays=[];for(var L=0;L<this.symbolInstances.length;L++){var z=this.symbolInstances.get(L);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(m,z.textBoxStartIndex,z.textBoxEndIndex,z.verticalTextBoxStartIndex,z.verticalTextBoxEndIndex,z.iconBoxStartIndex,z.iconBoxEndIndex,z.verticalIconBoxStartIndex,z.verticalIconBoxEndIndex))}},Ss.prototype.hasTextData=function(){return this.text.segments.get().length>0},Ss.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Ss.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Ss.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Ss.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Ss.prototype.addIndicesForPlacedSymbol=function(m,L){for(var z=m.placedSymbolArray.get(L),Y=z.vertexStartIndex+z.numGlyphs*4,j=z.vertexStartIndex;j<Y;j+=4)m.indexArray.emplaceBack(j,j+1,j+2),m.indexArray.emplaceBack(j+1,j+2,j+3)},Ss.prototype.getSortedSymbolIndexes=function(m){if(this.sortedAngle===m&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var L=Math.sin(m),z=Math.cos(m),Y=[],j=[],Q=[],ye=0;ye<this.symbolInstances.length;++ye){Q.push(ye);var ke=this.symbolInstances.get(ye);Y.push(Math.round(L*ke.anchorX+z*ke.anchorY)|0),j.push(ke.featureIndex)}return Q.sort(function(Fe,Ne){return Y[Fe]-Y[Ne]||j[Ne]-j[Fe]}),Q},Ss.prototype.addToSortKeyRanges=function(m,L){var z=this.sortKeyRanges[this.sortKeyRanges.length-1];z&&z.sortKey===L?z.symbolInstanceEnd=m+1:this.sortKeyRanges.push({sortKey:L,symbolInstanceStart:m,symbolInstanceEnd:m+1})},Ss.prototype.sortFeatures=function(m){var L=this;if(this.sortFeaturesByY&&this.sortedAngle!==m&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(m),this.sortedAngle=m,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var z=0,Y=this.symbolInstanceIndexes;z<Y.length;z+=1){var j=Y[z],Q=this.symbolInstances.get(j);this.featureSortOrder.push(Q.featureIndex),[Q.rightJustifiedTextSymbolIndex,Q.centerJustifiedTextSymbolIndex,Q.leftJustifiedTextSymbolIndex].forEach(function(ye,ke,Fe){ye>=0&&Fe.indexOf(ye)===ke&&L.addIndicesForPlacedSymbol(L.text,ye)}),Q.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Q.verticalPlacedTextSymbolIndex),Q.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Q.placedIconSymbolIndex),Q.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Q.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},V("SymbolBucket",Ss,{omit:["layers","collisionBoxArray","features","compareText"]}),Ss.MAX_GLYPHS=65535,Ss.addDynamicAttributes=J8;function gQe(y,m){return m.replace(/{([^{}]+)}/g,function(L,z){return z in y?String(y[z]):""})}var yQe=new jr({"symbol-placement":new Ye(dn.layout_symbol["symbol-placement"]),"symbol-spacing":new Ye(dn.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ye(dn.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Yt(dn.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ye(dn.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ye(dn.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ye(dn.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ye(dn.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ye(dn.layout_symbol["icon-rotation-alignment"]),"icon-size":new Yt(dn.layout_symbol["icon-size"]),"icon-text-fit":new Ye(dn.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ye(dn.layout_symbol["icon-text-fit-padding"]),"icon-image":new Yt(dn.layout_symbol["icon-image"]),"icon-rotate":new Yt(dn.layout_symbol["icon-rotate"]),"icon-padding":new Ye(dn.layout_symbol["icon-padding"]),"icon-keep-upright":new Ye(dn.layout_symbol["icon-keep-upright"]),"icon-offset":new Yt(dn.layout_symbol["icon-offset"]),"icon-anchor":new Yt(dn.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ye(dn.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ye(dn.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ye(dn.layout_symbol["text-rotation-alignment"]),"text-field":new Yt(dn.layout_symbol["text-field"]),"text-font":new Yt(dn.layout_symbol["text-font"]),"text-size":new Yt(dn.layout_symbol["text-size"]),"text-max-width":new Yt(dn.layout_symbol["text-max-width"]),"text-line-height":new Ye(dn.layout_symbol["text-line-height"]),"text-letter-spacing":new Yt(dn.layout_symbol["text-letter-spacing"]),"text-justify":new Yt(dn.layout_symbol["text-justify"]),"text-radial-offset":new Yt(dn.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ye(dn.layout_symbol["text-variable-anchor"]),"text-anchor":new Yt(dn.layout_symbol["text-anchor"]),"text-max-angle":new Ye(dn.layout_symbol["text-max-angle"]),"text-writing-mode":new Ye(dn.layout_symbol["text-writing-mode"]),"text-rotate":new Yt(dn.layout_symbol["text-rotate"]),"text-padding":new Ye(dn.layout_symbol["text-padding"]),"text-keep-upright":new Ye(dn.layout_symbol["text-keep-upright"]),"text-transform":new Yt(dn.layout_symbol["text-transform"]),"text-offset":new Yt(dn.layout_symbol["text-offset"]),"text-allow-overlap":new Ye(dn.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ye(dn.layout_symbol["text-ignore-placement"]),"text-optional":new Ye(dn.layout_symbol["text-optional"])}),mQe=new jr({"icon-opacity":new Yt(dn.paint_symbol["icon-opacity"]),"icon-color":new Yt(dn.paint_symbol["icon-color"]),"icon-halo-color":new Yt(dn.paint_symbol["icon-halo-color"]),"icon-halo-width":new Yt(dn.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Yt(dn.paint_symbol["icon-halo-blur"]),"icon-translate":new Ye(dn.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ye(dn.paint_symbol["icon-translate-anchor"]),"text-opacity":new Yt(dn.paint_symbol["text-opacity"]),"text-color":new Yt(dn.paint_symbol["text-color"],{runtimeType:Fs,getOverride:function(y){return y.textColor},hasOverride:function(y){return!!y.textColor}}),"text-halo-color":new Yt(dn.paint_symbol["text-halo-color"]),"text-halo-width":new Yt(dn.paint_symbol["text-halo-width"]),"text-halo-blur":new Yt(dn.paint_symbol["text-halo-blur"]),"text-translate":new Ye(dn.paint_symbol["text-translate"]),"text-translate-anchor":new Ye(dn.paint_symbol["text-translate-anchor"])}),Q8={paint:mQe,layout:yQe},Gb=function(m){this.type=m.property.overrides?m.property.overrides.runtimeType:wu,this.defaultValue=m};Gb.prototype.evaluate=function(m){if(m.formattedSection){var L=this.defaultValue.property.overrides;if(L&&L.hasOverride(m.formattedSection))return L.getOverride(m.formattedSection)}return m.feature&&m.featureState?this.defaultValue.evaluate(m.feature,m.featureState):this.defaultValue.property.specification.default},Gb.prototype.eachChild=function(m){if(!this.defaultValue.isConstant()){var L=this.defaultValue.value;m(L._styleExpression.expression)}},Gb.prototype.outputDefined=function(){return!1},Gb.prototype.serialize=function(){return null},V("FormatSectionOverride",Gb,{omit:["defaultValue"]});var xQe=function(y){function m(L){y.call(this,L,Q8)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.recalculate=function(z,Y){if(y.prototype.recalculate.call(this,z,Y),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var j=this.layout.get("text-writing-mode");if(j){for(var Q=[],ye=0,ke=j;ye<ke.length;ye+=1){var Fe=ke[ye];Q.indexOf(Fe)<0&&Q.push(Fe)}this.layout._values["text-writing-mode"]=Q}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},m.prototype.getValueAndResolveTokens=function(z,Y,j,Q){var ye=this.layout.get(z).evaluate(Y,{},j,Q),ke=this._unevaluatedLayout._values[z];return!ke.isDataDriven()&&!Ih(ke.value)&&ye?gQe(Y.properties,ye):ye},m.prototype.createBucket=function(z){return new Ss(z)},m.prototype.queryRadius=function(){return 0},m.prototype.queryIntersectsFeature=function(){return!1},m.prototype._setPaintOverrides=function(){for(var z=0,Y=Q8.paint.overridableProperties;z<Y.length;z+=1){var j=Y[z];if(m.hasPaintOverride(this.layout,j)){var Q=this.paint.get(j),ye=new Gb(Q),ke=new fc(ye,Q.property.specification),Fe=null;Q.value.kind==="constant"||Q.value.kind==="source"?Fe=new cc("source",ke):Fe=new mf("composite",ke,Q.value.zoomStops,Q.value._interpolationType),this.paint._values[j]=new fs(Q.property,Fe,Q.parameters)}}},m.prototype._handleOverridablePaintPropertyUpdate=function(z,Y,j){return!this.layout||Y.isDataDriven()||j.isDataDriven()?!1:m.hasPaintOverride(this.layout,z)},m.hasPaintOverride=function(z,Y){var j=z.get("text-field"),Q=Q8.paint.properties[Y],ye=!1,ke=function(ct){for(var St=0,bt=ct;St<bt.length;St+=1){var Xt=bt[St];if(Q.overrides&&Q.overrides.hasOverride(Xt)){ye=!0;return}}};if(j.value.kind==="constant"&&j.value.value instanceof Us)ke(j.value.value.sections);else if(j.value.kind==="source"){var Fe=function(ct){if(!ye)if(ct instanceof yo&&Mo(ct.value)===pl){var St=ct.value;ke(St.sections)}else ct instanceof Hl?ke(ct.sections):ct.eachChild(Fe)},Ne=j.value;Ne._styleExpression&&Fe(Ne._styleExpression.expression)}return ye},m}(_n),_Qe=new jr({"background-color":new Ye(dn.paint_background["background-color"]),"background-pattern":new Or(dn.paint_background["background-pattern"]),"background-opacity":new Ye(dn.paint_background["background-opacity"])}),bQe={paint:_Qe},wQe=function(y){function m(L){y.call(this,L,bQe)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m}(_n),TQe=new jr({"raster-opacity":new Ye(dn.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ye(dn.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ye(dn.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ye(dn.paint_raster["raster-brightness-max"]),"raster-saturation":new Ye(dn.paint_raster["raster-saturation"]),"raster-contrast":new Ye(dn.paint_raster["raster-contrast"]),"raster-resampling":new Ye(dn.paint_raster["raster-resampling"]),"raster-fade-duration":new Ye(dn.paint_raster["raster-fade-duration"])}),AQe={paint:TQe},MQe=function(y){function m(L){y.call(this,L,AQe)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m}(_n);function SQe(y){var m=[],L=y.id;return L===void 0&&m.push({message:"layers."+L+': missing required property "id"'}),y.render===void 0&&m.push({message:"layers."+L+': missing required method "render"'}),y.renderingMode&&y.renderingMode!=="2d"&&y.renderingMode!=="3d"&&m.push({message:"layers."+L+': property "renderingMode" must be either "2d" or "3d"'}),m}var EQe=function(y){function m(L){y.call(this,L,{}),this.implementation=L}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},m.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},m.prototype.recalculate=function(){},m.prototype.updateTransitions=function(){},m.prototype.hasTransition=function(){},m.prototype.serialize=function(){},m.prototype.onAdd=function(z){this.implementation.onAdd&&this.implementation.onAdd(z,z.painter.context.gl)},m.prototype.onRemove=function(z){this.implementation.onRemove&&this.implementation.onRemove(z,z.painter.context.gl)},m}(_n),kQe={circle:Jje,heatmap:tKe,hillshade:iKe,fill:LKe,"fill-extrusion":JKe,line:vJe,symbol:xQe,background:wQe,raster:MQe};function CQe(y){return y.type==="custom"?new EQe(y):new kQe[y.type](y)}var xJ=c.HTMLImageElement,_J=c.HTMLCanvasElement,bJ=c.HTMLVideoElement,wJ=c.ImageData,xk=c.ImageBitmap,Q1=function(m,L,z,Y){this.context=m,this.format=z,this.texture=m.gl.createTexture(),this.update(L,Y)};Q1.prototype.update=function(m,L,z){var Y=m.width,j=m.height,Q=(!this.size||this.size[0]!==Y||this.size[1]!==j)&&!z,ye=this,ke=ye.context,Fe=ke.gl;if(this.useMipmap=!!(L&&L.useMipmap),Fe.bindTexture(Fe.TEXTURE_2D,this.texture),ke.pixelStoreUnpackFlipY.set(!1),ke.pixelStoreUnpack.set(1),ke.pixelStoreUnpackPremultiplyAlpha.set(this.format===Fe.RGBA&&(!L||L.premultiply!==!1)),Q)this.size=[Y,j],m instanceof xJ||m instanceof _J||m instanceof bJ||m instanceof wJ||xk&&m instanceof xk?Fe.texImage2D(Fe.TEXTURE_2D,0,this.format,this.format,Fe.UNSIGNED_BYTE,m):Fe.texImage2D(Fe.TEXTURE_2D,0,this.format,Y,j,0,this.format,Fe.UNSIGNED_BYTE,m.data);else{var Ne=z||{x:0,y:0},ct=Ne.x,St=Ne.y;m instanceof xJ||m instanceof _J||m instanceof bJ||m instanceof wJ||xk&&m instanceof xk?Fe.texSubImage2D(Fe.TEXTURE_2D,0,ct,St,Fe.RGBA,Fe.UNSIGNED_BYTE,m):Fe.texSubImage2D(Fe.TEXTURE_2D,0,ct,St,Y,j,Fe.RGBA,Fe.UNSIGNED_BYTE,m.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Fe.generateMipmap(Fe.TEXTURE_2D)},Q1.prototype.bind=function(m,L,z){var Y=this,j=Y.context,Q=j.gl;Q.bindTexture(Q.TEXTURE_2D,this.texture),z===Q.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(z=Q.LINEAR),m!==this.filter&&(Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MAG_FILTER,m),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MIN_FILTER,z||m),this.filter=m),L!==this.wrap&&(Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_S,L),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_T,L),this.wrap=L)},Q1.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0},Q1.prototype.destroy=function(){var m=this.context,L=m.gl;L.deleteTexture(this.texture),this.texture=null};var $8=function(m){var L=this;this._callback=m,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){L._triggered=!1,L._callback()})};$8.prototype.trigger=function(){var m=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){m._triggered=!1,m._callback()},0))},$8.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Yb=function(m,L,z){this.target=m,this.parent=L,this.mapId=z,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},D(["receive","process"],this),this.invoker=new $8(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ue()?m:c};Yb.prototype.send=function(m,L,z,Y,j){var Q=this;j===void 0&&(j=!1);var ye=Math.round(Math.random()*1e18).toString(36).substring(0,10);z&&(this.callbacks[ye]=z);var ke=oe(this.globalScope)?void 0:[];return this.target.postMessage({id:ye,type:m,hasCallback:!!z,targetMapId:Y,mustQueue:j,sourceMapId:this.mapId,data:be(L,ke)},ke),{cancel:function(){z&&delete Q.callbacks[ye],Q.target.postMessage({id:ye,type:"<cancel>",targetMapId:Y,sourceMapId:Q.mapId})}}},Yb.prototype.receive=function(m){var L=m.data,z=L.id;if(z&&!(L.targetMapId&&this.mapId!==L.targetMapId))if(L.type==="<cancel>"){delete this.tasks[z];var Y=this.cancelCallbacks[z];delete this.cancelCallbacks[z],Y&&Y()}else ue()||L.mustQueue?(this.tasks[z]=L,this.taskQueue.push(z),this.invoker.trigger()):this.processTask(z,L)},Yb.prototype.process=function(){if(this.taskQueue.length){var m=this.taskQueue.shift(),L=this.tasks[m];delete this.tasks[m],this.taskQueue.length&&this.invoker.trigger(),L&&this.processTask(m,L)}},Yb.prototype.processTask=function(m,L){var z=this;if(L.type==="<response>"){var Y=this.callbacks[m];delete this.callbacks[m],Y&&(L.error?Y(Ae(L.error)):Y(null,Ae(L.data)))}else{var j=!1,Q=oe(this.globalScope)?void 0:[],ye=L.hasCallback?function(St,bt){j=!0,delete z.cancelCallbacks[m],z.target.postMessage({id:m,type:"<response>",sourceMapId:z.mapId,error:St?be(St):null,data:be(bt,Q)},Q)}:function(St){j=!0},ke=null,Fe=Ae(L.data);if(this.parent[L.type])ke=this.parent[L.type](L.sourceMapId,Fe,ye);else if(this.parent.getWorkerSource){var Ne=L.type.split("."),ct=this.parent.getWorkerSource(L.sourceMapId,Ne[0],Fe.source);ke=ct[Ne[1]](Fe,ye)}else ye(new Error("Could not find function "+L.type));!j&&ke&&ke.cancel&&(this.cancelCallbacks[m]=ke.cancel)}},Yb.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function LQe(y,m,L){m=Math.pow(2,L)-m-1;var z=TJ(y*256,m*256,L),Y=TJ((y+1)*256,(m+1)*256,L);return z[0]+","+z[1]+","+Y[0]+","+Y[1]}function TJ(y,m,L){var z=2*Math.PI*6378137/256/Math.pow(2,L),Y=y*z-2*Math.PI*6378137/2,j=m*z-2*Math.PI*6378137/2;return[Y,j]}var Ru=function(m,L){m&&(L?this.setSouthWest(m).setNorthEast(L):m.length===4?this.setSouthWest([m[0],m[1]]).setNorthEast([m[2],m[3]]):this.setSouthWest(m[0]).setNorthEast(m[1]))};Ru.prototype.setNorthEast=function(m){return this._ne=m instanceof ll?new ll(m.lng,m.lat):ll.convert(m),this},Ru.prototype.setSouthWest=function(m){return this._sw=m instanceof ll?new ll(m.lng,m.lat):ll.convert(m),this},Ru.prototype.extend=function(m){var L=this._sw,z=this._ne,Y,j;if(m instanceof ll)Y=m,j=m;else if(m instanceof Ru){if(Y=m._sw,j=m._ne,!Y||!j)return this}else{if(Array.isArray(m))if(m.length===4||m.every(Array.isArray)){var Q=m;return this.extend(Ru.convert(Q))}else{var ye=m;return this.extend(ll.convert(ye))}return this}return!L&&!z?(this._sw=new ll(Y.lng,Y.lat),this._ne=new ll(j.lng,j.lat)):(L.lng=Math.min(Y.lng,L.lng),L.lat=Math.min(Y.lat,L.lat),z.lng=Math.max(j.lng,z.lng),z.lat=Math.max(j.lat,z.lat)),this},Ru.prototype.getCenter=function(){return new ll((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Ru.prototype.getSouthWest=function(){return this._sw},Ru.prototype.getNorthEast=function(){return this._ne},Ru.prototype.getNorthWest=function(){return new ll(this.getWest(),this.getNorth())},Ru.prototype.getSouthEast=function(){return new ll(this.getEast(),this.getSouth())},Ru.prototype.getWest=function(){return this._sw.lng},Ru.prototype.getSouth=function(){return this._sw.lat},Ru.prototype.getEast=function(){return this._ne.lng},Ru.prototype.getNorth=function(){return this._ne.lat},Ru.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Ru.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Ru.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Ru.prototype.contains=function(m){var L=ll.convert(m),z=L.lng,Y=L.lat,j=this._sw.lat<=Y&&Y<=this._ne.lat,Q=this._sw.lng<=z&&z<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Q=this._sw.lng>=z&&z>=this._ne.lng),j&&Q},Ru.convert=function(m){return!m||m instanceof Ru?m:new Ru(m)};var AJ=63710088e-1,ll=function(m,L){if(isNaN(m)||isNaN(L))throw new Error("Invalid LngLat object: ("+m+", "+L+")");if(this.lng=+m,this.lat=+L,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};ll.prototype.wrap=function(){return new ll(w(this.lng,-180,180),this.lat)},ll.prototype.toArray=function(){return[this.lng,this.lat]},ll.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},ll.prototype.distanceTo=function(m){var L=Math.PI/180,z=this.lat*L,Y=m.lat*L,j=Math.sin(z)*Math.sin(Y)+Math.cos(z)*Math.cos(Y)*Math.cos((m.lng-this.lng)*L),Q=AJ*Math.acos(Math.min(j,1));return Q},ll.prototype.toBounds=function(m){m===void 0&&(m=0);var L=40075017,z=360*m/L,Y=z/Math.cos(Math.PI/180*this.lat);return new Ru(new ll(this.lng-Y,this.lat-z),new ll(this.lng+Y,this.lat+z))},ll.convert=function(m){if(m instanceof ll)return m;if(Array.isArray(m)&&(m.length===2||m.length===3))return new ll(Number(m[0]),Number(m[1]));if(!Array.isArray(m)&&typeof m=="object"&&m!==null)return new ll(Number("lng"in m?m.lng:m.lon),Number(m.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var MJ=2*Math.PI*AJ;function SJ(y){return MJ*Math.cos(y*Math.PI/180)}function EJ(y){return(180+y)/360}function kJ(y){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+y*Math.PI/360)))/360}function CJ(y,m){return y/SJ(m)}function PQe(y){return y*360-180}function eq(y){var m=180-y*360;return 360/Math.PI*Math.atan(Math.exp(m*Math.PI/180))-90}function RQe(y,m){return y*SJ(eq(m))}function DQe(y){return 1/Math.cos(y*Math.PI/180)}var $1=function(m,L,z){z===void 0&&(z=0),this.x=+m,this.y=+L,this.z=+z};$1.fromLngLat=function(m,L){L===void 0&&(L=0);var z=ll.convert(m);return new $1(EJ(z.lng),kJ(z.lat),CJ(L,z.lat))},$1.prototype.toLngLat=function(){return new ll(PQe(this.x),eq(this.y))},$1.prototype.toAltitude=function(){return RQe(this.z,this.y)},$1.prototype.meterInMercatorCoordinateUnits=function(){return 1/MJ*DQe(eq(this.y))};var ex=function(m,L,z){this.z=m,this.x=L,this.y=z,this.key=aA(0,m,m,L,z)};ex.prototype.equals=function(m){return this.z===m.z&&this.x===m.x&&this.y===m.y},ex.prototype.url=function(m,L){var z=LQe(this.x,this.y,this.z),Y=IQe(this.z,this.x,this.y);return m[(this.x+this.y)%m.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(L==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",Y).replace("{bbox-epsg-3857}",z)},ex.prototype.getTilePoint=function(m){var L=Math.pow(2,this.z);return new u((m.x*L-this.x)*cn,(m.y*L-this.y)*cn)},ex.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var LJ=function(m,L){this.wrap=m,this.canonical=L,this.key=aA(m,L.z,L.z,L.x,L.y)},Du=function(m,L,z,Y,j){this.overscaledZ=m,this.wrap=L,this.canonical=new ex(z,+Y,+j),this.key=aA(L,m,z,Y,j)};Du.prototype.equals=function(m){return this.overscaledZ===m.overscaledZ&&this.wrap===m.wrap&&this.canonical.equals(m.canonical)},Du.prototype.scaledTo=function(m){var L=this.canonical.z-m;return m>this.canonical.z?new Du(m,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Du(m,this.wrap,m,this.canonical.x>>L,this.canonical.y>>L)},Du.prototype.calculateScaledKey=function(m,L){var z=this.canonical.z-m;return m>this.canonical.z?aA(this.wrap*+L,m,this.canonical.z,this.canonical.x,this.canonical.y):aA(this.wrap*+L,m,m,this.canonical.x>>z,this.canonical.y>>z)},Du.prototype.isChildOf=function(m){if(m.wrap!==this.wrap)return!1;var L=this.canonical.z-m.canonical.z;return m.overscaledZ===0||m.overscaledZ<this.overscaledZ&&m.canonical.x===this.canonical.x>>L&&m.canonical.y===this.canonical.y>>L},Du.prototype.children=function(m){if(this.overscaledZ>=m)return[new Du(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var L=this.canonical.z+1,z=this.canonical.x*2,Y=this.canonical.y*2;return[new Du(L,this.wrap,L,z,Y),new Du(L,this.wrap,L,z+1,Y),new Du(L,this.wrap,L,z,Y+1),new Du(L,this.wrap,L,z+1,Y+1)]},Du.prototype.isLessThan=function(m){return this.wrap<m.wrap?!0:this.wrap>m.wrap?!1:this.overscaledZ<m.overscaledZ?!0:this.overscaledZ>m.overscaledZ?!1:this.canonical.x<m.canonical.x?!0:this.canonical.x>m.canonical.x?!1:this.canonical.y<m.canonical.y},Du.prototype.wrapped=function(){return new Du(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Du.prototype.unwrapTo=function(m){return new Du(this.overscaledZ,m,this.canonical.z,this.canonical.x,this.canonical.y)},Du.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Du.prototype.toUnwrapped=function(){return new LJ(this.wrap,this.canonical)},Du.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Du.prototype.getTilePoint=function(m){return this.canonical.getTilePoint(new $1(m.x-this.wrap,m.y))};function aA(y,m,L,z,Y){y*=2,y<0&&(y=y*-1-1);var j=1<<L;return(j*j*y+j*Y+z).toString(36)+L.toString(36)+m.toString(36)}function IQe(y,m,L){for(var z="",Y,j=y;j>0;j--)Y=1<<j-1,z+=(m&Y?1:0)+(L&Y?2:0);return z}V("CanonicalTileID",ex),V("OverscaledTileID",Du,{omit:["posMatrix"]});var Cg=function(m,L,z){if(this.uid=m,L.height!==L.width)throw new RangeError("DEM tiles must be square");if(z&&z!=="mapbox"&&z!=="terrarium")return X('"'+z+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=L.height;var Y=this.dim=L.height-2;this.data=new Uint32Array(L.data.buffer),this.encoding=z||"mapbox";for(var j=0;j<Y;j++)this.data[this._idx(-1,j)]=this.data[this._idx(0,j)],this.data[this._idx(Y,j)]=this.data[this._idx(Y-1,j)],this.data[this._idx(j,-1)]=this.data[this._idx(j,0)],this.data[this._idx(j,Y)]=this.data[this._idx(j,Y-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(Y,-1)]=this.data[this._idx(Y-1,0)],this.data[this._idx(-1,Y)]=this.data[this._idx(0,Y-1)],this.data[this._idx(Y,Y)]=this.data[this._idx(Y-1,Y-1)]};Cg.prototype.get=function(m,L){var z=new Uint8Array(this.data.buffer),Y=this._idx(m,L)*4,j=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return j(z[Y],z[Y+1],z[Y+2])},Cg.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Cg.prototype._idx=function(m,L){if(m<-1||m>=this.dim+1||L<-1||L>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(L+1)*this.stride+(m+1)},Cg.prototype._unpackMapbox=function(m,L,z){return(m*256*256+L*256+z)/10-1e4},Cg.prototype._unpackTerrarium=function(m,L,z){return m*256+L+z/256-32768},Cg.prototype.getPixels=function(){return new Vh({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Cg.prototype.backfillBorder=function(m,L,z){if(this.dim!==m.dim)throw new Error("dem dimension mismatch");var Y=L*this.dim,j=L*this.dim+this.dim,Q=z*this.dim,ye=z*this.dim+this.dim;switch(L){case-1:Y=j-1;break;case 1:j=Y+1;break}switch(z){case-1:Q=ye-1;break;case 1:ye=Q+1;break}for(var ke=-L*this.dim,Fe=-z*this.dim,Ne=Q;Ne<ye;Ne++)for(var ct=Y;ct<j;ct++)this.data[this._idx(ct,Ne)]=m.data[this._idx(ct+ke,Ne+Fe)]},V("DEMData",Cg);function FQe(y,m){var L={};if(!m)return L;for(var z=function(){var Q=j[Y],ye=Q.layerIds.map(function(ct){return m.getLayer(ct)}).filter(Boolean);if(ye.length!==0){Q.layers=ye,Q.stateDependentLayerIds&&(Q.stateDependentLayers=Q.stateDependentLayerIds.map(function(ct){return ye.filter(function(St){return St.id===ct})[0]}));for(var ke=0,Fe=ye;ke<Fe.length;ke+=1){var Ne=Fe[ke];L[Ne.id]=Q}}},Y=0,j=y;Y<j.length;Y+=1)z();return L}var _k=function(m){this._stringToNumber={},this._numberToString=[];for(var L=0;L<m.length;L++){var z=m[L];this._stringToNumber[z]=L,this._numberToString[L]=z}};_k.prototype.encode=function(m){return this._stringToNumber[m]},_k.prototype.decode=function(m){return this._numberToString[m]};var bk=function(m,L,z,Y,j){this.type="Feature",this._vectorTileFeature=m,m._z=L,m._x=z,m._y=Y,this.properties=m.properties,this.id=j},tq={geometry:{configurable:!0}};tq.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},tq.geometry.set=function(y){this._geometry=y},bk.prototype.toJSON=function(){var m={geometry:this.geometry};for(var L in this)L==="_geometry"||L==="_vectorTileFeature"||(m[L]=this[L]);return m},Object.defineProperties(bk.prototype,tq);var Wb=function(){this.state={},this.stateChanges={},this.deletedStates={}};Wb.prototype.updateState=function(m,L,z){var Y=String(L);if(this.stateChanges[m]=this.stateChanges[m]||{},this.stateChanges[m][Y]=this.stateChanges[m][Y]||{},_(this.stateChanges[m][Y],z),this.deletedStates[m]===null){this.deletedStates[m]={};for(var j in this.state[m])j!==Y&&(this.deletedStates[m][j]=null)}else{var Q=this.deletedStates[m]&&this.deletedStates[m][Y]===null;if(Q){this.deletedStates[m][Y]={};for(var ye in this.state[m][Y])z[ye]||(this.deletedStates[m][Y][ye]=null)}else for(var ke in z){var Fe=this.deletedStates[m]&&this.deletedStates[m][Y]&&this.deletedStates[m][Y][ke]===null;Fe&&delete this.deletedStates[m][Y][ke]}}},Wb.prototype.removeFeatureState=function(m,L,z){var Y=this.deletedStates[m]===null;if(!Y){var j=String(L);if(this.deletedStates[m]=this.deletedStates[m]||{},z&&L!==void 0)this.deletedStates[m][j]!==null&&(this.deletedStates[m][j]=this.deletedStates[m][j]||{},this.deletedStates[m][j][z]=null);else if(L!==void 0){var Q=this.stateChanges[m]&&this.stateChanges[m][j];if(Q){this.deletedStates[m][j]={};for(z in this.stateChanges[m][j])this.deletedStates[m][j][z]=null}else this.deletedStates[m][j]=null}else this.deletedStates[m]=null}},Wb.prototype.getState=function(m,L){var z=String(L),Y=this.state[m]||{},j=this.stateChanges[m]||{},Q=_({},Y[z],j[z]);if(this.deletedStates[m]===null)return{};if(this.deletedStates[m]){var ye=this.deletedStates[m][L];if(ye===null)return{};for(var ke in ye)delete Q[ke]}return Q},Wb.prototype.initializeTileState=function(m,L){m.setFeatureState(this.state,L)},Wb.prototype.coalesceChanges=function(m,L){var z={};for(var Y in this.stateChanges){this.state[Y]=this.state[Y]||{};var j={};for(var Q in this.stateChanges[Y])this.state[Y][Q]||(this.state[Y][Q]={}),_(this.state[Y][Q],this.stateChanges[Y][Q]),j[Q]=this.state[Y][Q];z[Y]=j}for(var ye in this.deletedStates){this.state[ye]=this.state[ye]||{};var ke={};if(this.deletedStates[ye]===null)for(var Fe in this.state[ye])ke[Fe]={},this.state[ye][Fe]={};else for(var Ne in this.deletedStates[ye]){var ct=this.deletedStates[ye][Ne]===null;if(ct)this.state[ye][Ne]={};else for(var St=0,bt=Object.keys(this.deletedStates[ye][Ne]);St<bt.length;St+=1){var Xt=bt[St];delete this.state[ye][Ne][Xt]}ke[Ne]=this.state[ye][Ne]}z[ye]=z[ye]||{},_(z[ye],ke)}if(this.stateChanges={},this.deletedStates={},Object.keys(z).length!==0)for(var dr in m){var Ir=m[dr];Ir.setFeatureState(z,L)}};var Lg=function(m,L){this.tileID=m,this.x=m.canonical.x,this.y=m.canonical.y,this.z=m.canonical.z,this.grid=new fu(cn,16,0),this.grid3D=new fu(cn,16,0),this.featureIndexArray=new vu,this.promoteId=L};Lg.prototype.insert=function(m,L,z,Y,j,Q){var ye=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(z,Y,j);for(var ke=Q?this.grid3D:this.grid,Fe=0;Fe<L.length;Fe++){for(var Ne=L[Fe],ct=[1/0,1/0,-1/0,-1/0],St=0;St<Ne.length;St++){var bt=Ne[St];ct[0]=Math.min(ct[0],bt.x),ct[1]=Math.min(ct[1],bt.y),ct[2]=Math.max(ct[2],bt.x),ct[3]=Math.max(ct[3],bt.y)}ct[0]<cn&&ct[1]<cn&&ct[2]>=0&&ct[3]>=0&&ke.insert(ye,ct[0],ct[1],ct[2],ct[3])}},Lg.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ib.VectorTile(new fk(this.rawTileData)).layers,this.sourceLayerCoder=new _k(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Lg.prototype.query=function(m,L,z,Y){var j=this;this.loadVTLayers();for(var Q=m.params||{},ye=cn/m.tileSize/m.scale,ke=we(Q.filter),Fe=m.queryGeometry,Ne=m.queryPadding*ye,ct=RJ(Fe),St=this.grid.query(ct.minX-Ne,ct.minY-Ne,ct.maxX+Ne,ct.maxY+Ne),bt=RJ(m.cameraQueryGeometry),Xt=this.grid3D.query(bt.minX-Ne,bt.minY-Ne,bt.maxX+Ne,bt.maxY+Ne,function(Dn,li,ii,Bi){return ep(m.cameraQueryGeometry,Dn-Ne,li-Ne,ii+Ne,Bi+Ne)}),dr=0,Ir=Xt;dr<Ir.length;dr+=1){var Ar=Ir[dr];St.push(Ar)}St.sort(qQe);for(var en={},Ur,Qr=function(Dn){var li=St[Dn];if(li!==Ur){Ur=li;var ii=j.featureIndexArray.get(li),Bi=null;j.loadMatchingFeature(en,ii.bucketIndex,ii.sourceLayerIndex,ii.featureIndex,ke,Q.layers,Q.availableImages,L,z,Y,function(Ai,Di,wa){return Bi||(Bi=xi(Ai)),Di.queryIntersectsFeature(Fe,Ai,wa,Bi,j.z,m.transform,ye,m.pixelPosMatrix)})}},sn=0;sn<St.length;sn++)Qr(sn);return en},Lg.prototype.loadMatchingFeature=function(m,L,z,Y,j,Q,ye,ke,Fe,Ne,ct){var St=this.bucketLayerIDs[L];if(!(Q&&!F(Q,St))){var bt=this.sourceLayerCoder.decode(z),Xt=this.vtLayers[bt],dr=Xt.feature(Y);if(j.needGeometry){var Ir=Ra(dr,!0);if(!j.filter(new kn(this.tileID.overscaledZ),Ir,this.tileID.canonical))return}else if(!j.filter(new kn(this.tileID.overscaledZ),dr))return;for(var Ar=this.getId(dr,bt),en=0;en<St.length;en++){var Ur=St[en];if(!(Q&&Q.indexOf(Ur)<0)){var Qr=ke[Ur];if(Qr){var sn={};Ar!==void 0&&Ne&&(sn=Ne.getState(Qr.sourceLayer||"_geojsonTileLayer",Ar));var Dn=_({},Fe[Ur]);Dn.paint=PJ(Dn.paint,Qr.paint,dr,sn,ye),Dn.layout=PJ(Dn.layout,Qr.layout,dr,sn,ye);var li=!ct||ct(dr,Qr,sn);if(li){var ii=new bk(dr,this.z,this.x,this.y,Ar);ii.layer=Dn;var Bi=m[Ur];Bi===void 0&&(Bi=m[Ur]=[]),Bi.push({featureIndex:Y,feature:ii,intersectionZ:li})}}}}}},Lg.prototype.lookupSymbolFeatures=function(m,L,z,Y,j,Q,ye,ke){var Fe={};this.loadVTLayers();for(var Ne=we(j),ct=0,St=m;ct<St.length;ct+=1){var bt=St[ct];this.loadMatchingFeature(Fe,z,Y,bt,Ne,Q,ye,ke,L)}return Fe},Lg.prototype.hasLayer=function(m){for(var L=0,z=this.bucketLayerIDs;L<z.length;L+=1)for(var Y=z[L],j=0,Q=Y;j<Q.length;j+=1){var ye=Q[j];if(m===ye)return!0}return!1},Lg.prototype.getId=function(m,L){var z=m.id;if(this.promoteId){var Y=typeof this.promoteId=="string"?this.promoteId:this.promoteId[L];z=m.properties[Y],typeof z=="boolean"&&(z=Number(z))}return z},V("FeatureIndex",Lg,{omit:["rawTileData","sourceLayerCoder"]});function PJ(y,m,L,z,Y){return O(y,function(j,Q){var ye=m instanceof Xl?m.get(Q):null;return ye&&ye.evaluate?ye.evaluate(L,z,Y):ye})}function RJ(y){for(var m=1/0,L=1/0,z=-1/0,Y=-1/0,j=0,Q=y;j<Q.length;j+=1){var ye=Q[j];m=Math.min(m,ye.x),L=Math.min(L,ye.y),z=Math.max(z,ye.x),Y=Math.max(Y,ye.y)}return{minX:m,minY:L,maxX:z,maxY:Y}}function qQe(y,m){return m-y}var zQe=3e4,bf=function(m,L){this.tileID=m,this.uid=g(),this.uses=0,this.tileSize=L,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};bf.prototype.registerFadeDuration=function(m){var L=m+this.timeAdded;L<Ce.now()||this.fadeEndTime&&L<this.fadeEndTime||(this.fadeEndTime=L)},bf.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},bf.prototype.loadVectorData=function(m,L,z){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!m){this.collisionBoxArray=new co;return}m.featureIndex&&(this.latestFeatureIndex=m.featureIndex,m.rawTileData?(this.latestRawTileData=m.rawTileData,this.latestFeatureIndex.rawTileData=m.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=m.collisionBoxArray,this.buckets=FQe(m.buckets,L.style),this.hasSymbolBuckets=!1;for(var Y in this.buckets){var j=this.buckets[Y];if(j instanceof Ss)if(this.hasSymbolBuckets=!0,z)j.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Q in this.buckets){var ye=this.buckets[Q];if(ye instanceof Ss&&ye.hasRTLText){this.hasRTLText=!0,So();break}}this.queryPadding=0;for(var ke in this.buckets){var Fe=this.buckets[ke];this.queryPadding=Math.max(this.queryPadding,L.style.getLayer(ke).queryRadius(Fe))}m.imageAtlas&&(this.imageAtlas=m.imageAtlas),m.glyphAtlasImage&&(this.glyphAtlasImage=m.glyphAtlasImage)},bf.prototype.unloadVectorData=function(){for(var m in this.buckets)this.buckets[m].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},bf.prototype.getBucket=function(m){return this.buckets[m.id]},bf.prototype.upload=function(m){for(var L in this.buckets){var z=this.buckets[L];z.uploadPending()&&z.upload(m)}var Y=m.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Q1(m,this.imageAtlas.image,Y.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Q1(m,this.glyphAtlasImage,Y.ALPHA),this.glyphAtlasImage=null)},bf.prototype.prepare=function(m){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(m,this.imageAtlasTexture)},bf.prototype.queryRenderedFeatures=function(m,L,z,Y,j,Q,ye,ke,Fe,Ne){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:Y,cameraQueryGeometry:j,scale:Q,tileSize:this.tileSize,pixelPosMatrix:Ne,transform:ke,params:ye,queryPadding:this.queryPadding*Fe},m,L,z)},bf.prototype.querySourceFeatures=function(m,L){var z=this.latestFeatureIndex;if(!(!z||!z.rawTileData)){var Y=z.loadVTLayers(),j=L?L.sourceLayer:"",Q=Y._geojsonTileLayer||Y[j];if(Q)for(var ye=we(L&&L.filter),ke=this.tileID.canonical,Fe=ke.z,Ne=ke.x,ct=ke.y,St={z:Fe,x:Ne,y:ct},bt=0;bt<Q.length;bt++){var Xt=Q.feature(bt);if(ye.needGeometry){var dr=Ra(Xt,!0);if(!ye.filter(new kn(this.tileID.overscaledZ),dr,this.tileID.canonical))continue}else if(!ye.filter(new kn(this.tileID.overscaledZ),Xt))continue;var Ir=z.getId(Xt,j),Ar=new bk(Xt,Fe,Ne,ct,Ir);Ar.tile=St,m.push(Ar)}}},bf.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},bf.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},bf.prototype.setExpiryData=function(m){var L=this.expirationTime;if(m.cacheControl){var z=ee(m.cacheControl);z["max-age"]&&(this.expirationTime=Date.now()+z["max-age"]*1e3)}else m.expires&&(this.expirationTime=new Date(m.expires).getTime());if(this.expirationTime){var Y=Date.now(),j=!1;if(this.expirationTime>Y)j=!1;else if(!L)j=!0;else if(this.expirationTime<L)j=!0;else{var Q=this.expirationTime-L;Q?this.expirationTime=Y+Math.max(Q,zQe):j=!0}j?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},bf.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},bf.prototype.setFeatureState=function(m,L){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(m).length===0)){var z=this.latestFeatureIndex.loadVTLayers();for(var Y in this.buckets)if(L.style.hasLayer(Y)){var j=this.buckets[Y],Q=j.layers[0].sourceLayer||"_geojsonTileLayer",ye=z[Q],ke=m[Q];if(!(!ye||!ke||Object.keys(ke).length===0)){j.update(ke,ye,this.imageAtlas&&this.imageAtlas.patternPositions||{});var Fe=L&&L.style&&L.style.getLayer(Y);Fe&&(this.queryPadding=Math.max(this.queryPadding,Fe.queryRadius(j)))}}}},bf.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},bf.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ce.now()},bf.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},bf.prototype.setHoldDuration=function(m){this.symbolFadeHoldUntil=Ce.now()+m},bf.prototype.setDependencies=function(m,L){for(var z={},Y=0,j=L;Y<j.length;Y+=1){var Q=j[Y];z[Q]=!0}this.dependencies[m]=z},bf.prototype.hasDependency=function(m,L){for(var z=0,Y=m;z<Y.length;z+=1){var j=Y[z],Q=this.dependencies[j];if(Q)for(var ye=0,ke=L;ye<ke.length;ye+=1){var Fe=ke[ye];if(Q[Fe])return!0}}return!1};var OQe=["type","source","source-layer","minzoom","maxzoom","filter","layout"],Yy=c.performance,DJ=function(m){this._marks={start:[m.url,"start"].join("#"),end:[m.url,"end"].join("#"),measure:m.url.toString()},Yy.mark(this._marks.start)};DJ.prototype.finish=function(){Yy.mark(this._marks.end);var m=Yy.getEntriesByName(this._marks.measure);return m.length===0&&(Yy.measure(this._marks.measure,this._marks.start,this._marks.end),m=Yy.getEntriesByName(this._marks.measure),Yy.clearMarks(this._marks.start),Yy.clearMarks(this._marks.end),Yy.clearMeasures(this._marks.measure)),m},n.Actor=Yb,n.AlphaImage=J1,n.CanonicalTileID=ex,n.CollisionBoxArray=co,n.Color=fo,n.DEMData=Cg,n.DataConstantProperty=Ye,n.DictionaryCoder=_k,n.EXTENT=cn,n.ErrorEvent=Pi,n.EvaluationParameters=kn,n.Event=Ya,n.Evented=Bn,n.FeatureIndex=Lg,n.FillBucket=jp,n.FillExtrusionBucket=Kp,n.ImageAtlas=tA,n.ImagePosition=hk,n.LineBucket=lh,n.LngLat=ll,n.LngLatBounds=Ru,n.MercatorCoordinate=$1,n.ONE_EM=jf,n.OverscaledTileID=Du,n.Point=u,n.Point$1=u,n.Properties=jr,n.Protobuf=fk,n.RGBAImage=Vh,n.RequestManager=Me,n.RequestPerformance=DJ,n.ResourceType=bi,n.SegmentVector=Qa,n.SourceFeatureState=Wb,n.StructArrayLayout1ui2=Xa,n.StructArrayLayout2f1f2i16=ni,n.StructArrayLayout2i4=hn,n.StructArrayLayout3ui6=Ei,n.StructArrayLayout4i8=Yn,n.SymbolBucket=Ss,n.Texture=Q1,n.Tile=bf,n.Transitionable=La,n.Uniform1f=$e,n.Uniform1i=Be,n.Uniform2f=ft,n.Uniform3f=Tt,n.Uniform4f=Lt,n.UniformColor=Pt,n.UniformMatrix4f=Nt,n.UnwrappedTileID=LJ,n.ValidationError=wi,n.WritingMode=Qv,n.ZoomHistory=Ge,n.add=Pb,n.addDynamicAttributes=J8,n.asyncAll=A,n.bezier=x,n.bindAll=D,n.browser=Ce,n.cacheEntryPossiblyAdded=nn,n.clamp=p,n.clearTileCache=xn,n.clipLine=vJ,n.clone=kb,n.clone$1=B,n.clone$2=P8,n.collisionCircleLayout=mJe,n.config=qe,n.create=Eb,n.create$1=Fc,n.create$2=Sb,n.createCommonjsModule=a,n.createExpression=rh,n.createLayout=Vn,n.createStyleLayer=CQe,n.cross=Vje,n.deepEqual=h,n.dot=Uje,n.dot$1=Xje,n.ease=b,n.emitValidationErrors=Cu,n.endsWith=q,n.enforceCacheSizeLimit=jn,n.evaluateSizeForFeature=oJ,n.evaluateSizeForZoom=sJ,n.evaluateVariableOffset=gJ,n.evented=qi,n.extend=_,n.featureFilter=we,n.filterObject=U,n.fromRotation=Ny,n.getAnchorAlignment=X8,n.getAnchorJustification=K8,n.getArrayBuffer=yr,n.getImage=vi,n.getJSON=nr,n.getRTLTextPluginStatus=xa,n.getReferrer=nt,n.getVideo=Zi,n.identity=Cb,n.invert=Uy,n.isChar=Pe,n.isMapboxURL=Ke,n.keysDifference=k,n.makeRequest=Ot,n.mapObject=O,n.mercatorXfromLng=EJ,n.mercatorYfromLat=kJ,n.mercatorZfromAltitude=CJ,n.mul=L8,n.multiply=Vy,n.mvt=Ib,n.nextPowerOfTwo=M,n.normalize=WT,n.number=zs,n.offscreenCanvasSupported=qn,n.ortho=C8,n.parseGlyphPBF=YJe,n.pbf=fk,n.performSymbolLayout=uQe,n.perspective=YT,n.pick=E,n.plugin=Do,n.polygonIntersectsPolygon=ua,n.postMapLoadEvent=Je,n.postTurnstileEvent=gt,n.potpack=QK,n.refProperties=OQe,n.register=V,n.registerForPluginStateChange=Gi,n.renderColorRamp=LK,n.rotate=j1,n.rotateX=Uh,n.rotateZ=Lb,n.scale=Nh,n.scale$1=Wje,n.scale$2=D8,n.setCacheLimits=pn,n.setRTLTextPlugin=va,n.sphericalToCartesian=fe,n.sqrLen=Kje,n.styleSpec=dn,n.sub=Gje,n.symbolSize=eQe,n.transformMat3=Hje,n.transformMat4=ik,n.translate=Kl,n.triggerPluginCompletionEvent=Kn,n.uniqueId=g,n.validateCustomStyleLayer=SQe,n.validateLight=Wa,n.validateStyle=ro,n.values=T,n.vectorTile=Ib,n.version=o,n.warnOnce=X,n.webpSupported=rt,n.window=c,n.wrap=w}),i(["./shared"],function(n){"use strict";function a(nt){var ze=typeof nt;if(ze==="number"||ze==="boolean"||ze==="string"||nt===void 0||nt===null)return JSON.stringify(nt);if(Array.isArray(nt)){for(var ut="[",mt=0,Ot=nt;mt<Ot.length;mt+=1){var nr=Ot[mt];ut+=a(nr)+","}return ut+"]"}for(var yr=Object.keys(nt).sort(),vr="{",Rr=0;Rr<yr.length;Rr++)vr+=JSON.stringify(yr[Rr])+":"+a(nt[yr[Rr]])+",";return vr+"}"}function o(nt){for(var ze="",ut=0,mt=n.refProperties;ut<mt.length;ut+=1){var Ot=mt[ut];ze+="/"+a(nt[Ot])}return ze}function s(nt,ze){for(var ut={},mt=0;mt<nt.length;mt++){var Ot=ze&&ze[nt[mt].id]||o(nt[mt]);ze&&(ze[nt[mt].id]=Ot);var nr=ut[Ot];nr||(nr=ut[Ot]=[]),nr.push(nt[mt])}var yr=[];for(var vr in ut)yr.push(ut[vr]);return yr}var l=function(ze){this.keyCache={},ze&&this.replace(ze)};l.prototype.replace=function(ze){this._layerConfigs={},this._layers={},this.update(ze,[])},l.prototype.update=function(ze,ut){for(var mt=this,Ot=0,nr=ze;Ot<nr.length;Ot+=1){var yr=nr[Ot];this._layerConfigs[yr.id]=yr;var vr=this._layers[yr.id]=n.createStyleLayer(yr);vr._featureFilter=n.featureFilter(vr.filter),this.keyCache[yr.id]&&delete this.keyCache[yr.id]}for(var Rr=0,Gr=ut;Rr<Gr.length;Rr+=1){var Yr=Gr[Rr];delete this.keyCache[Yr],delete this._layerConfigs[Yr],delete this._layers[Yr]}this.familiesBySource={};for(var Xr=s(n.values(this._layerConfigs),this.keyCache),on=0,wn=Xr;on<wn.length;on+=1){var Vi=wn[on],vi=Vi.map(function(Bn){return mt._layers[Bn.id]}),Zi=vi[0];if(Zi.visibility!=="none"){var Xi=Zi.source||"",ta=this.familiesBySource[Xi];ta||(ta=this.familiesBySource[Xi]={});var Ya=Zi.sourceLayer||"_geojsonTileLayer",Pi=ta[Ya];Pi||(Pi=ta[Ya]=[]),Pi.push(vi)}}};var u=1,f=function(ze){var ut={},mt=[];for(var Ot in ze){var nr=ze[Ot],yr=ut[Ot]={};for(var vr in nr){var Rr=nr[+vr];if(!(!Rr||Rr.bitmap.width===0||Rr.bitmap.height===0)){var Gr={x:0,y:0,w:Rr.bitmap.width+2*u,h:Rr.bitmap.height+2*u};mt.push(Gr),yr[vr]={rect:Gr,metrics:Rr.metrics}}}}var Yr=n.potpack(mt),Xr=Yr.w,on=Yr.h,wn=new n.AlphaImage({width:Xr||1,height:on||1});for(var Vi in ze){var vi=ze[Vi];for(var Zi in vi){var Xi=vi[+Zi];if(!(!Xi||Xi.bitmap.width===0||Xi.bitmap.height===0)){var ta=ut[Vi][Zi].rect;n.AlphaImage.copy(Xi.bitmap,wn,{x:0,y:0},{x:ta.x+u,y:ta.y+u},Xi.bitmap)}}}this.image=wn,this.positions=ut};n.register("GlyphAtlas",f);var c=function(ze){this.tileID=new n.OverscaledTileID(ze.tileID.overscaledZ,ze.tileID.wrap,ze.tileID.canonical.z,ze.tileID.canonical.x,ze.tileID.canonical.y),this.uid=ze.uid,this.zoom=ze.zoom,this.pixelRatio=ze.pixelRatio,this.tileSize=ze.tileSize,this.source=ze.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ze.showCollisionBoxes,this.collectResourceTiming=!!ze.collectResourceTiming,this.returnDependencies=!!ze.returnDependencies,this.promoteId=ze.promoteId};c.prototype.parse=function(ze,ut,mt,Ot,nr){var yr=this;this.status="parsing",this.data=ze,this.collisionBoxArray=new n.CollisionBoxArray;var vr=new n.DictionaryCoder(Object.keys(ze.layers).sort()),Rr=new n.FeatureIndex(this.tileID,this.promoteId);Rr.bucketLayerIDs=[];var Gr={},Yr={featureIndex:Rr,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:mt},Xr=ut.familiesBySource[this.source];for(var on in Xr){var wn=ze.layers[on];if(wn){wn.version===1&&n.warnOnce('Vector tile source "'+this.source+'" layer "'+on+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Vi=vr.encode(on),vi=[],Zi=0;Zi<wn.length;Zi++){var Xi=wn.feature(Zi),ta=Rr.getId(Xi,on);vi.push({feature:Xi,id:ta,index:Zi,sourceLayerIndex:Vi})}for(var Ya=0,Pi=Xr[on];Ya<Pi.length;Ya+=1){var Bn=Pi[Ya],Qi=Bn[0];if(!(Qi.minzoom&&this.zoom<Math.floor(Qi.minzoom))&&!(Qi.maxzoom&&this.zoom>=Qi.maxzoom)&&Qi.visibility!=="none"){h(Bn,this.zoom,mt);var ya=Gr[Qi.id]=Qi.createBucket({index:Rr.bucketLayerIDs.length,layers:Bn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Vi,sourceID:this.source});ya.populate(vi,Yr,this.tileID.canonical),Rr.bucketLayerIDs.push(Bn.map(function(Cr){return Cr.id}))}}}}var Nn,je,Bt,ur,br=n.mapObject(Yr.glyphDependencies,function(Cr){return Object.keys(Cr).map(Number)});Object.keys(br).length?Ot.send("getGlyphs",{uid:this.uid,stacks:br},function(Cr,vn){Nn||(Nn=Cr,je=vn,yn.call(yr))}):je={};var Jr=Object.keys(Yr.iconDependencies);Jr.length?Ot.send("getImages",{icons:Jr,source:this.source,tileID:this.tileID,type:"icons"},function(Cr,vn){Nn||(Nn=Cr,Bt=vn,yn.call(yr))}):Bt={};var ln=Object.keys(Yr.patternDependencies);ln.length?Ot.send("getImages",{icons:ln,source:this.source,tileID:this.tileID,type:"patterns"},function(Cr,vn){Nn||(Nn=Cr,ur=vn,yn.call(yr))}):ur={},yn.call(this);function yn(){if(Nn)return nr(Nn);if(je&&Bt&&ur){var Cr=new f(je),vn=new n.ImageAtlas(Bt,ur);for(var gi in Gr){var Wn=Gr[gi];Wn instanceof n.SymbolBucket?(h(Wn.layers,this.zoom,mt),n.performSymbolLayout(Wn,je,Cr.positions,Bt,vn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Wn.hasPattern&&(Wn instanceof n.LineBucket||Wn instanceof n.FillBucket||Wn instanceof n.FillExtrusionBucket)&&(h(Wn.layers,this.zoom,mt),Wn.addFeatures(Yr,this.tileID.canonical,vn.patternPositions))}this.status="done",nr(null,{buckets:n.values(Gr).filter(function(zi){return!zi.isEmpty()}),featureIndex:Rr,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Cr.image,imageAtlas:vn,glyphMap:this.returnDependencies?je:null,iconMap:this.returnDependencies?Bt:null,glyphPositions:this.returnDependencies?Cr.positions:null})}}};function h(nt,ze,ut){for(var mt=new n.EvaluationParameters(ze),Ot=0,nr=nt;Ot<nr.length;Ot+=1){var yr=nr[Ot];yr.recalculate(mt,ut)}}function v(nt,ze){var ut=n.getArrayBuffer(nt.request,function(mt,Ot,nr,yr){mt?ze(mt):Ot&&ze(null,{vectorTile:new n.vectorTile.VectorTile(new n.pbf(Ot)),rawData:Ot,cacheControl:nr,expires:yr})});return function(){ut.cancel(),ze()}}var d=function(ze,ut,mt,Ot){this.actor=ze,this.layerIndex=ut,this.availableImages=mt,this.loadVectorData=Ot||v,this.loading={},this.loaded={}};d.prototype.loadTile=function(ze,ut){var mt=this,Ot=ze.uid;this.loading||(this.loading={});var nr=ze&&ze.request&&ze.request.collectResourceTiming?new n.RequestPerformance(ze.request):!1,yr=this.loading[Ot]=new c(ze);yr.abort=this.loadVectorData(ze,function(vr,Rr){if(delete mt.loading[Ot],vr||!Rr)return yr.status="done",mt.loaded[Ot]=yr,ut(vr);var Gr=Rr.rawData,Yr={};Rr.expires&&(Yr.expires=Rr.expires),Rr.cacheControl&&(Yr.cacheControl=Rr.cacheControl);var Xr={};if(nr){var on=nr.finish();on&&(Xr.resourceTiming=JSON.parse(JSON.stringify(on)))}yr.vectorTile=Rr.vectorTile,yr.parse(Rr.vectorTile,mt.layerIndex,mt.availableImages,mt.actor,function(wn,Vi){if(wn||!Vi)return ut(wn);ut(null,n.extend({rawTileData:Gr.slice(0)},Vi,Yr,Xr))}),mt.loaded=mt.loaded||{},mt.loaded[Ot]=yr})},d.prototype.reloadTile=function(ze,ut){var mt=this,Ot=this.loaded,nr=ze.uid,yr=this;if(Ot&&Ot[nr]){var vr=Ot[nr];vr.showCollisionBoxes=ze.showCollisionBoxes;var Rr=function(Gr,Yr){var Xr=vr.reloadCallback;Xr&&(delete vr.reloadCallback,vr.parse(vr.vectorTile,yr.layerIndex,mt.availableImages,yr.actor,Xr)),ut(Gr,Yr)};vr.status==="parsing"?vr.reloadCallback=Rr:vr.status==="done"&&(vr.vectorTile?vr.parse(vr.vectorTile,this.layerIndex,this.availableImages,this.actor,Rr):Rr())}},d.prototype.abortTile=function(ze,ut){var mt=this.loading,Ot=ze.uid;mt&&mt[Ot]&&mt[Ot].abort&&(mt[Ot].abort(),delete mt[Ot]),ut()},d.prototype.removeTile=function(ze,ut){var mt=this.loaded,Ot=ze.uid;mt&&mt[Ot]&&delete mt[Ot],ut()};var x=n.window.ImageBitmap,b=function(){this.loaded={}};b.prototype.loadTile=function(ze,ut){var mt=ze.uid,Ot=ze.encoding,nr=ze.rawImageData,yr=x&&nr instanceof x?this.getImageData(nr):nr,vr=new n.DEMData(mt,yr,Ot);this.loaded=this.loaded||{},this.loaded[mt]=vr,ut(null,vr)},b.prototype.getImageData=function(ze){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(ze.width,ze.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ze.width,this.offscreenCanvas.height=ze.height,this.offscreenCanvasContext.drawImage(ze,0,0,ze.width,ze.height);var ut=this.offscreenCanvasContext.getImageData(-1,-1,ze.width+2,ze.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new n.RGBAImage({width:ut.width,height:ut.height},ut.data)},b.prototype.removeTile=function(ze){var ut=this.loaded,mt=ze.uid;ut&&ut[mt]&&delete ut[mt]};var p=w;function w(nt,ze){var ut=nt&&nt.type,mt;if(ut==="FeatureCollection")for(mt=0;mt<nt.features.length;mt++)w(nt.features[mt],ze);else if(ut==="GeometryCollection")for(mt=0;mt<nt.geometries.length;mt++)w(nt.geometries[mt],ze);else if(ut==="Feature")w(nt.geometry,ze);else if(ut==="Polygon")A(nt.coordinates,ze);else if(ut==="MultiPolygon")for(mt=0;mt<nt.coordinates.length;mt++)A(nt.coordinates[mt],ze);return nt}function A(nt,ze){if(nt.length!==0){T(nt[0],ze);for(var ut=1;ut<nt.length;ut++)T(nt[ut],!ze)}}function T(nt,ze){for(var ut=0,mt=0,Ot=nt.length,nr=Ot-1;mt<Ot;nr=mt++)ut+=(nt[mt][0]-nt[nr][0])*(nt[nr][1]+nt[mt][1]);ut>=0!=!!ze&&nt.reverse()}var k=n.vectorTile.VectorTileFeature.prototype.toGeoJSON,_=function(ze){this._feature=ze,this.extent=n.EXTENT,this.type=ze.type,this.properties=ze.tags,"id"in ze&&!isNaN(ze.id)&&(this.id=parseInt(ze.id,10))};_.prototype.loadGeometry=function(){if(this._feature.type===1){for(var ze=[],ut=0,mt=this._feature.geometry;ut<mt.length;ut+=1){var Ot=mt[ut];ze.push([new n.Point$1(Ot[0],Ot[1])])}return ze}else{for(var nr=[],yr=0,vr=this._feature.geometry;yr<vr.length;yr+=1){for(var Rr=vr[yr],Gr=[],Yr=0,Xr=Rr;Yr<Xr.length;Yr+=1){var on=Xr[Yr];Gr.push(new n.Point$1(on[0],on[1]))}nr.push(Gr)}return nr}},_.prototype.toGeoJSON=function(ze,ut,mt){return k.call(this,ze,ut,mt)};var E=function(ze){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=n.EXTENT,this.length=ze.length,this._features=ze};E.prototype.feature=function(ze){return new _(this._features[ze])};var S=n.vectorTile.VectorTileFeature,g=C;function C(nt,ze){this.options=ze||{},this.features=nt,this.length=nt.length}C.prototype.feature=function(nt){return new M(this.features[nt],this.options.extent)};function M(nt,ze){this.id=typeof nt.id=="number"?nt.id:void 0,this.type=nt.type,this.rawGeometry=nt.type===1?[nt.geometry]:nt.geometry,this.properties=nt.tags,this.extent=ze||4096}M.prototype.loadGeometry=function(){var nt=this.rawGeometry;this.geometry=[];for(var ze=0;ze<nt.length;ze++){for(var ut=nt[ze],mt=[],Ot=0;Ot<ut.length;Ot++)mt.push(new n.Point$1(ut[Ot][0],ut[Ot][1]));this.geometry.push(mt)}return this.geometry},M.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var nt=this.geometry,ze=1/0,ut=-1/0,mt=1/0,Ot=-1/0,nr=0;nr<nt.length;nr++)for(var yr=nt[nr],vr=0;vr<yr.length;vr++){var Rr=yr[vr];ze=Math.min(ze,Rr.x),ut=Math.max(ut,Rr.x),mt=Math.min(mt,Rr.y),Ot=Math.max(Ot,Rr.y)}return[ze,mt,ut,Ot]},M.prototype.toGeoJSON=S.prototype.toGeoJSON;var P=U,D=U,q=B,O=g;function U(nt){var ze=new n.pbf;return F(nt,ze),ze.finish()}function B(nt,ze){ze=ze||{};var ut={};for(var mt in nt)ut[mt]=new g(nt[mt].features,ze),ut[mt].name=mt,ut[mt].version=ze.version,ut[mt].extent=ze.extent;return U({layers:ut})}function F(nt,ze){for(var ut in nt.layers)ze.writeMessage(3,N,nt.layers[ut])}function N(nt,ze){ze.writeVarintField(15,nt.version||1),ze.writeStringField(1,nt.name||""),ze.writeVarintField(5,nt.extent||4096);var ut,mt={keys:[],values:[],keycache:{},valuecache:{}};for(ut=0;ut<nt.length;ut++)mt.feature=nt.feature(ut),ze.writeMessage(2,X,mt);var Ot=mt.keys;for(ut=0;ut<Ot.length;ut++)ze.writeStringField(3,Ot[ut]);var nr=mt.values;for(ut=0;ut<nr.length;ut++)ze.writeMessage(4,ee,nr[ut])}function X(nt,ze){var ut=nt.feature;ut.id!==void 0&&ze.writeVarintField(1,ut.id),ze.writeMessage(2,K,nt),ze.writeVarintField(3,ut.type),ze.writeMessage(4,ue,ut)}function K(nt,ze){var ut=nt.feature,mt=nt.keys,Ot=nt.values,nr=nt.keycache,yr=nt.valuecache;for(var vr in ut.properties){var Rr=nr[vr];typeof Rr=="undefined"&&(mt.push(vr),Rr=mt.length-1,nr[vr]=Rr),ze.writeVarint(Rr);var Gr=ut.properties[vr],Yr=typeof Gr;Yr!=="string"&&Yr!=="boolean"&&Yr!=="number"&&(Gr=JSON.stringify(Gr));var Xr=Yr+":"+Gr,on=yr[Xr];typeof on=="undefined"&&(Ot.push(Gr),on=Ot.length-1,yr[Xr]=on),ze.writeVarint(on)}}function ne(nt,ze){return(ze<<3)+(nt&7)}function fe(nt){return nt<<1^nt>>31}function ue(nt,ze){for(var ut=nt.loadGeometry(),mt=nt.type,Ot=0,nr=0,yr=ut.length,vr=0;vr<yr;vr++){var Rr=ut[vr],Gr=1;mt===1&&(Gr=Rr.length),ze.writeVarint(ne(1,Gr));for(var Yr=mt===3?Rr.length-1:Rr.length,Xr=0;Xr<Yr;Xr++){Xr===1&&mt!==1&&ze.writeVarint(ne(2,Yr-1));var on=Rr[Xr].x-Ot,wn=Rr[Xr].y-nr;ze.writeVarint(fe(on)),ze.writeVarint(fe(wn)),Ot+=on,nr+=wn}mt===3&&ze.writeVarint(ne(7,1))}}function ee(nt,ze){var ut=typeof nt;ut==="string"?ze.writeStringField(1,nt):ut==="boolean"?ze.writeBooleanField(7,nt):ut==="number"&&(nt%1!==0?ze.writeDoubleField(3,nt):nt<0?ze.writeSVarintField(6,nt):ze.writeVarintField(5,nt))}P.fromVectorTileJs=D,P.fromGeojsonVt=q,P.GeoJSONWrapper=O;function Z(nt,ze,ut,mt,Ot,nr){if(!(Ot-mt<=ut)){var yr=mt+Ot>>1;oe(nt,ze,yr,mt,Ot,nr%2),Z(nt,ze,ut,mt,yr-1,nr+1),Z(nt,ze,ut,yr+1,Ot,nr+1)}}function oe(nt,ze,ut,mt,Ot,nr){for(;Ot>mt;){if(Ot-mt>600){var yr=Ot-mt+1,vr=ut-mt+1,Rr=Math.log(yr),Gr=.5*Math.exp(2*Rr/3),Yr=.5*Math.sqrt(Rr*Gr*(yr-Gr)/yr)*(vr-yr/2<0?-1:1),Xr=Math.max(mt,Math.floor(ut-vr*Gr/yr+Yr)),on=Math.min(Ot,Math.floor(ut+(yr-vr)*Gr/yr+Yr));oe(nt,ze,ut,Xr,on,nr)}var wn=ze[2*ut+nr],Vi=mt,vi=Ot;for(ce(nt,ze,mt,ut),ze[2*Ot+nr]>wn&&ce(nt,ze,mt,Ot);Vi<vi;){for(ce(nt,ze,Vi,vi),Vi++,vi--;ze[2*Vi+nr]<wn;)Vi++;for(;ze[2*vi+nr]>wn;)vi--}ze[2*mt+nr]===wn?ce(nt,ze,mt,vi):(vi++,ce(nt,ze,vi,Ot)),vi<=ut&&(mt=vi+1),ut<=vi&&(Ot=vi-1)}}function ce(nt,ze,ut,mt){le(nt,ut,mt),le(ze,2*ut,2*mt),le(ze,2*ut+1,2*mt+1)}function le(nt,ze,ut){var mt=nt[ze];nt[ze]=nt[ut],nt[ut]=mt}function me(nt,ze,ut,mt,Ot,nr,yr){for(var vr=[0,nt.length-1,0],Rr=[],Gr,Yr;vr.length;){var Xr=vr.pop(),on=vr.pop(),wn=vr.pop();if(on-wn<=yr){for(var Vi=wn;Vi<=on;Vi++)Gr=ze[2*Vi],Yr=ze[2*Vi+1],Gr>=ut&&Gr<=Ot&&Yr>=mt&&Yr<=nr&&Rr.push(nt[Vi]);continue}var vi=Math.floor((wn+on)/2);Gr=ze[2*vi],Yr=ze[2*vi+1],Gr>=ut&&Gr<=Ot&&Yr>=mt&&Yr<=nr&&Rr.push(nt[vi]);var Zi=(Xr+1)%2;(Xr===0?ut<=Gr:mt<=Yr)&&(vr.push(wn),vr.push(vi-1),vr.push(Zi)),(Xr===0?Ot>=Gr:nr>=Yr)&&(vr.push(vi+1),vr.push(on),vr.push(Zi))}return Rr}function he(nt,ze,ut,mt,Ot,nr){for(var yr=[0,nt.length-1,0],vr=[],Rr=Ot*Ot;yr.length;){var Gr=yr.pop(),Yr=yr.pop(),Xr=yr.pop();if(Yr-Xr<=nr){for(var on=Xr;on<=Yr;on++)te(ze[2*on],ze[2*on+1],ut,mt)<=Rr&&vr.push(nt[on]);continue}var wn=Math.floor((Xr+Yr)/2),Vi=ze[2*wn],vi=ze[2*wn+1];te(Vi,vi,ut,mt)<=Rr&&vr.push(nt[wn]);var Zi=(Gr+1)%2;(Gr===0?ut-Ot<=Vi:mt-Ot<=vi)&&(yr.push(Xr),yr.push(wn-1),yr.push(Zi)),(Gr===0?ut+Ot>=Vi:mt+Ot>=vi)&&(yr.push(wn+1),yr.push(Yr),yr.push(Zi))}return vr}function te(nt,ze,ut,mt){var Ot=nt-ut,nr=ze-mt;return Ot*Ot+nr*nr}var ge=function(nt){return nt[0]},ae=function(nt){return nt[1]},_e=function(ze,ut,mt,Ot,nr){ut===void 0&&(ut=ge),mt===void 0&&(mt=ae),Ot===void 0&&(Ot=64),nr===void 0&&(nr=Float64Array),this.nodeSize=Ot,this.points=ze;for(var yr=ze.length<65536?Uint16Array:Uint32Array,vr=this.ids=new yr(ze.length),Rr=this.coords=new nr(ze.length*2),Gr=0;Gr<ze.length;Gr++)vr[Gr]=Gr,Rr[2*Gr]=ut(ze[Gr]),Rr[2*Gr+1]=mt(ze[Gr]);Z(vr,Rr,Ot,0,vr.length-1,0)};_e.prototype.range=function(ze,ut,mt,Ot){return me(this.ids,this.coords,ze,ut,mt,Ot,this.nodeSize)},_e.prototype.within=function(ze,ut,mt){return he(this.ids,this.coords,ze,ut,mt,this.nodeSize)};var Ce={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(nt){return nt}},qe=function(ze){this.options=Ht(Object.create(Ce),ze),this.trees=new Array(this.options.maxZoom+1)};qe.prototype.load=function(ze){var ut=this.options,mt=ut.log,Ot=ut.minZoom,nr=ut.maxZoom,yr=ut.nodeSize;mt&&console.time("total time");var vr="prepare "+ze.length+" points";mt&&console.time(vr),this.points=ze;for(var Rr=[],Gr=0;Gr<ze.length;Gr++)ze[Gr].geometry&&Rr.push(Re(ze[Gr],Gr));this.trees[nr+1]=new _e(Rr,Me,Ke,yr,Float32Array),mt&&console.timeEnd(vr);for(var Yr=nr;Yr>=Ot;Yr--){var Xr=+Date.now();Rr=this._cluster(Rr,Yr),this.trees[Yr]=new _e(Rr,Me,Ke,yr,Float32Array),mt&&console.log("z%d: %d clusters in %dms",Yr,Rr.length,+Date.now()-Xr)}return mt&&console.timeEnd("total time"),this},qe.prototype.getClusters=function(ze,ut){var mt=((ze[0]+180)%360+360)%360-180,Ot=Math.max(-90,Math.min(90,ze[1])),nr=ze[2]===180?180:((ze[2]+180)%360+360)%360-180,yr=Math.max(-90,Math.min(90,ze[3]));if(ze[2]-ze[0]>=360)mt=-180,nr=180;else if(mt>nr){var vr=this.getClusters([mt,Ot,180,yr],ut),Rr=this.getClusters([-180,Ot,nr,yr],ut);return vr.concat(Rr)}for(var Gr=this.trees[this._limitZoom(ut)],Yr=Gr.range(lt(mt),ht(yr),lt(nr),ht(Ot)),Xr=[],on=0,wn=Yr;on<wn.length;on+=1){var Vi=wn[on],vi=Gr.points[Vi];Xr.push(vi.numPoints?Ie(vi):this.points[vi.index])}return Xr},qe.prototype.getChildren=function(ze){var ut=this._getOriginId(ze),mt=this._getOriginZoom(ze),Ot="No cluster with the specified id.",nr=this.trees[mt];if(!nr)throw new Error(Ot);var yr=nr.points[ut];if(!yr)throw new Error(Ot);for(var vr=this.options.radius/(this.options.extent*Math.pow(2,mt-1)),Rr=nr.within(yr.x,yr.y,vr),Gr=[],Yr=0,Xr=Rr;Yr<Xr.length;Yr+=1){var on=Xr[Yr],wn=nr.points[on];wn.parentId===ze&&Gr.push(wn.numPoints?Ie(wn):this.points[wn.index])}if(Gr.length===0)throw new Error(Ot);return Gr},qe.prototype.getLeaves=function(ze,ut,mt){ut=ut||10,mt=mt||0;var Ot=[];return this._appendLeaves(Ot,ze,ut,mt,0),Ot},qe.prototype.getTile=function(ze,ut,mt){var Ot=this.trees[this._limitZoom(ze)],nr=Math.pow(2,ze),yr=this.options,vr=yr.extent,Rr=yr.radius,Gr=Rr/vr,Yr=(mt-Gr)/nr,Xr=(mt+1+Gr)/nr,on={features:[]};return this._addTileFeatures(Ot.range((ut-Gr)/nr,Yr,(ut+1+Gr)/nr,Xr),Ot.points,ut,mt,nr,on),ut===0&&this._addTileFeatures(Ot.range(1-Gr/nr,Yr,1,Xr),Ot.points,nr,mt,nr,on),ut===nr-1&&this._addTileFeatures(Ot.range(0,Yr,Gr/nr,Xr),Ot.points,-1,mt,nr,on),on.features.length?on:null},qe.prototype.getClusterExpansionZoom=function(ze){for(var ut=this._getOriginZoom(ze)-1;ut<=this.options.maxZoom;){var mt=this.getChildren(ze);if(ut++,mt.length!==1)break;ze=mt[0].properties.cluster_id}return ut},qe.prototype._appendLeaves=function(ze,ut,mt,Ot,nr){for(var yr=this.getChildren(ut),vr=0,Rr=yr;vr<Rr.length;vr+=1){var Gr=Rr[vr],Yr=Gr.properties;if(Yr&&Yr.cluster?nr+Yr.point_count<=Ot?nr+=Yr.point_count:nr=this._appendLeaves(ze,Yr.cluster_id,mt,Ot,nr):nr<Ot?nr++:ze.push(Gr),ze.length===mt)break}return nr},qe.prototype._addTileFeatures=function(ze,ut,mt,Ot,nr,yr){for(var vr=0,Rr=ze;vr<Rr.length;vr+=1){var Gr=Rr[vr],Yr=ut[Gr],Xr=Yr.numPoints,on={type:1,geometry:[[Math.round(this.options.extent*(Yr.x*nr-mt)),Math.round(this.options.extent*(Yr.y*nr-Ot))]],tags:Xr?ot(Yr):this.points[Yr.index].properties},wn=void 0;Xr?wn=Yr.id:this.options.generateId?wn=Yr.index:this.points[Yr.index].id&&(wn=this.points[Yr.index].id),wn!==void 0&&(on.id=wn),yr.features.push(on)}},qe.prototype._limitZoom=function(ze){return Math.max(this.options.minZoom,Math.min(+ze,this.options.maxZoom+1))},qe.prototype._cluster=function(ze,ut){for(var mt=[],Ot=this.options,nr=Ot.radius,yr=Ot.extent,vr=Ot.reduce,Rr=Ot.minPoints,Gr=nr/(yr*Math.pow(2,ut)),Yr=0;Yr<ze.length;Yr++){var Xr=ze[Yr];if(!(Xr.zoom<=ut)){Xr.zoom=ut;for(var on=this.trees[ut+1],wn=on.within(Xr.x,Xr.y,Gr),Vi=Xr.numPoints||1,vi=Vi,Zi=0,Xi=wn;Zi<Xi.length;Zi+=1){var ta=Xi[Zi],Ya=on.points[ta];Ya.zoom>ut&&(vi+=Ya.numPoints||1)}if(vi>=Rr){for(var Pi=Xr.x*Vi,Bn=Xr.y*Vi,Qi=vr&&Vi>1?this._map(Xr,!0):null,ya=(Yr<<5)+(ut+1)+this.points.length,Nn=0,je=wn;Nn<je.length;Nn+=1){var Bt=je[Nn],ur=on.points[Bt];if(!(ur.zoom<=ut)){ur.zoom=ut;var br=ur.numPoints||1;Pi+=ur.x*br,Bn+=ur.y*br,ur.parentId=ya,vr&&(Qi||(Qi=this._map(Xr,!0)),vr(Qi,this._map(ur)))}}Xr.parentId=ya,mt.push(rt(Pi/vi,Bn/vi,ya,vi,Qi))}else if(mt.push(Xr),vi>1)for(var Jr=0,ln=wn;Jr<ln.length;Jr+=1){var yn=ln[Jr],Cr=on.points[yn];Cr.zoom<=ut||(Cr.zoom=ut,mt.push(Cr))}}}return mt},qe.prototype._getOriginId=function(ze){return ze-this.points.length>>5},qe.prototype._getOriginZoom=function(ze){return(ze-this.points.length)%32},qe.prototype._map=function(ze,ut){if(ze.numPoints)return ut?Ht({},ze.properties):ze.properties;var mt=this.points[ze.index].properties,Ot=this.options.map(mt);return ut&&Ot===mt?Ht({},Ot):Ot};function rt(nt,ze,ut,mt,Ot){return{x:nt,y:ze,zoom:1/0,id:ut,parentId:-1,numPoints:mt,properties:Ot}}function Re(nt,ze){var ut=nt.geometry.coordinates,mt=ut[0],Ot=ut[1];return{x:lt(mt),y:ht(Ot),zoom:1/0,index:ze,parentId:-1}}function Ie(nt){return{type:"Feature",id:nt.id,properties:ot(nt),geometry:{type:"Point",coordinates:[xt(nt.x),Vt(nt.y)]}}}function ot(nt){var ze=nt.numPoints,ut=ze>=1e4?Math.round(ze/1e3)+"k":ze>=1e3?Math.round(ze/100)/10+"k":ze;return Ht(Ht({},nt.properties),{cluster:!0,cluster_id:nt.id,point_count:ze,point_count_abbreviated:ut})}function lt(nt){return nt/360+.5}function ht(nt){var ze=Math.sin(nt*Math.PI/180),ut=.5-.25*Math.log((1+ze)/(1-ze))/Math.PI;return ut<0?0:ut>1?1:ut}function xt(nt){return(nt-.5)*360}function Vt(nt){var ze=(180-nt*360)*Math.PI/180;return 360*Math.atan(Math.exp(ze))/Math.PI-90}function Ht(nt,ze){for(var ut in ze)nt[ut]=ze[ut];return nt}function Me(nt){return nt.x}function Ke(nt){return nt.y}function We(nt,ze,ut,mt){for(var Ot=mt,nr=ut-ze>>1,yr=ut-ze,vr,Rr=nt[ze],Gr=nt[ze+1],Yr=nt[ut],Xr=nt[ut+1],on=ze+3;on<ut;on+=3){var wn=et(nt[on],nt[on+1],Rr,Gr,Yr,Xr);if(wn>Ot)vr=on,Ot=wn;else if(wn===Ot){var Vi=Math.abs(on-nr);Vi<yr&&(vr=on,yr=Vi)}}Ot>mt&&(vr-ze>3&&We(nt,ze,vr,mt),nt[vr+2]=Ot,ut-vr>3&&We(nt,vr,ut,mt))}function et(nt,ze,ut,mt,Ot,nr){var yr=Ot-ut,vr=nr-mt;if(yr!==0||vr!==0){var Rr=((nt-ut)*yr+(ze-mt)*vr)/(yr*yr+vr*vr);Rr>1?(ut=Ot,mt=nr):Rr>0&&(ut+=yr*Rr,mt+=vr*Rr)}return yr=nt-ut,vr=ze-mt,yr*yr+vr*vr}function vt(nt,ze,ut,mt){var Ot={id:typeof nt=="undefined"?null:nt,type:ze,geometry:ut,tags:mt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return at(Ot),Ot}function at(nt){var ze=nt.geometry,ut=nt.type;if(ut==="Point"||ut==="MultiPoint"||ut==="LineString")Xe(nt,ze);else if(ut==="Polygon"||ut==="MultiLineString")for(var mt=0;mt<ze.length;mt++)Xe(nt,ze[mt]);else if(ut==="MultiPolygon")for(mt=0;mt<ze.length;mt++)for(var Ot=0;Ot<ze[mt].length;Ot++)Xe(nt,ze[mt][Ot])}function Xe(nt,ze){for(var ut=0;ut<ze.length;ut+=3)nt.minX=Math.min(nt.minX,ze[ut]),nt.minY=Math.min(nt.minY,ze[ut+1]),nt.maxX=Math.max(nt.maxX,ze[ut]),nt.maxY=Math.max(nt.maxY,ze[ut+1])}function dt(nt,ze){var ut=[];if(nt.type==="FeatureCollection")for(var mt=0;mt<nt.features.length;mt++)_t(ut,nt.features[mt],ze,mt);else nt.type==="Feature"?_t(ut,nt,ze):_t(ut,{geometry:nt},ze);return ut}function _t(nt,ze,ut,mt){if(ze.geometry){var Ot=ze.geometry.coordinates,nr=ze.geometry.type,yr=Math.pow(ut.tolerance/((1<<ut.maxZoom)*ut.extent),2),vr=[],Rr=ze.id;if(ut.promoteId?Rr=ze.properties[ut.promoteId]:ut.generateId&&(Rr=mt||0),nr==="Point")$t(Ot,vr);else if(nr==="MultiPoint")for(var Gr=0;Gr<Ot.length;Gr++)$t(Ot[Gr],vr);else if(nr==="LineString")Ut(Ot,vr,yr,!1);else if(nr==="MultiLineString")if(ut.lineMetrics){for(Gr=0;Gr<Ot.length;Gr++)vr=[],Ut(Ot[Gr],vr,yr,!1),nt.push(vt(Rr,"LineString",vr,ze.properties));return}else fr(Ot,vr,yr,!1);else if(nr==="Polygon")fr(Ot,vr,yr,!0);else if(nr==="MultiPolygon")for(Gr=0;Gr<Ot.length;Gr++){var Yr=[];fr(Ot[Gr],Yr,yr,!0),vr.push(Yr)}else if(nr==="GeometryCollection"){for(Gr=0;Gr<ze.geometry.geometries.length;Gr++)_t(nt,{id:Rr,geometry:ze.geometry.geometries[Gr],properties:ze.properties},ut,mt);return}else throw new Error("Input data is not a valid GeoJSON object.");nt.push(vt(Rr,nr,vr,ze.properties))}}function $t(nt,ze){ze.push(ar(nt[0])),ze.push(cr(nt[1])),ze.push(0)}function Ut(nt,ze,ut,mt){for(var Ot,nr,yr=0,vr=0;vr<nt.length;vr++){var Rr=ar(nt[vr][0]),Gr=cr(nt[vr][1]);ze.push(Rr),ze.push(Gr),ze.push(0),vr>0&&(mt?yr+=(Ot*Gr-Rr*nr)/2:yr+=Math.sqrt(Math.pow(Rr-Ot,2)+Math.pow(Gr-nr,2))),Ot=Rr,nr=Gr}var Yr=ze.length-3;ze[2]=1,We(ze,0,Yr,ut),ze[Yr+2]=1,ze.size=Math.abs(yr),ze.start=0,ze.end=ze.size}function fr(nt,ze,ut,mt){for(var Ot=0;Ot<nt.length;Ot++){var nr=[];Ut(nt[Ot],nr,ut,mt),ze.push(nr)}}function ar(nt){return nt/360+.5}function cr(nt){var ze=Math.sin(nt*Math.PI/180),ut=.5-.25*Math.log((1+ze)/(1-ze))/Math.PI;return ut<0?0:ut>1?1:ut}function It(nt,ze,ut,mt,Ot,nr,yr,vr){if(ut/=ze,mt/=ze,nr>=ut&&yr<mt)return nt;if(yr<ut||nr>=mt)return null;for(var Rr=[],Gr=0;Gr<nt.length;Gr++){var Yr=nt[Gr],Xr=Yr.geometry,on=Yr.type,wn=Ot===0?Yr.minX:Yr.minY,Vi=Ot===0?Yr.maxX:Yr.maxY;if(wn>=ut&&Vi<mt){Rr.push(Yr);continue}else if(Vi<ut||wn>=mt)continue;var vi=[];if(on==="Point"||on==="MultiPoint")gt(Xr,vi,ut,mt,Ot);else if(on==="LineString")kt(Xr,vi,ut,mt,Ot,!1,vr.lineMetrics);else if(on==="MultiLineString")Ze(Xr,vi,ut,mt,Ot,!1);else if(on==="Polygon")Ze(Xr,vi,ut,mt,Ot,!0);else if(on==="MultiPolygon")for(var Zi=0;Zi<Xr.length;Zi++){var Xi=[];Ze(Xr[Zi],Xi,ut,mt,Ot,!0),Xi.length&&vi.push(Xi)}if(vi.length){if(vr.lineMetrics&&on==="LineString"){for(Zi=0;Zi<vi.length;Zi++)Rr.push(vt(Yr.id,on,vi[Zi],Yr.tags));continue}(on==="LineString"||on==="MultiLineString")&&(vi.length===1?(on="LineString",vi=vi[0]):on="MultiLineString"),(on==="Point"||on==="MultiPoint")&&(on=vi.length===3?"Point":"MultiPoint"),Rr.push(vt(Yr.id,on,vi,Yr.tags))}}return Rr.length?Rr:null}function gt(nt,ze,ut,mt,Ot){for(var nr=0;nr<nt.length;nr+=3){var yr=nt[nr+Ot];yr>=ut&&yr<=mt&&(ze.push(nt[nr]),ze.push(nt[nr+1]),ze.push(nt[nr+2]))}}function kt(nt,ze,ut,mt,Ot,nr,yr){for(var vr=Je(nt),Rr=Ot===0?Se:pe,Gr=nt.start,Yr,Xr,on=0;on<nt.length-3;on+=3){var wn=nt[on],Vi=nt[on+1],vi=nt[on+2],Zi=nt[on+3],Xi=nt[on+4],ta=Ot===0?wn:Vi,Ya=Ot===0?Zi:Xi,Pi=!1;yr&&(Yr=Math.sqrt(Math.pow(wn-Zi,2)+Math.pow(Vi-Xi,2))),ta<ut?Ya>ut&&(Xr=Rr(vr,wn,Vi,Zi,Xi,ut),yr&&(vr.start=Gr+Yr*Xr)):ta>mt?Ya<mt&&(Xr=Rr(vr,wn,Vi,Zi,Xi,mt),yr&&(vr.start=Gr+Yr*Xr)):At(vr,wn,Vi,vi),Ya<ut&&ta>=ut&&(Xr=Rr(vr,wn,Vi,Zi,Xi,ut),Pi=!0),Ya>mt&&ta<=mt&&(Xr=Rr(vr,wn,Vi,Zi,Xi,mt),Pi=!0),!nr&&Pi&&(yr&&(vr.end=Gr+Yr*Xr),ze.push(vr),vr=Je(nt)),yr&&(Gr+=Yr)}var Bn=nt.length-3;wn=nt[Bn],Vi=nt[Bn+1],vi=nt[Bn+2],ta=Ot===0?wn:Vi,ta>=ut&&ta<=mt&&At(vr,wn,Vi,vi),Bn=vr.length-3,nr&&Bn>=3&&(vr[Bn]!==vr[0]||vr[Bn+1]!==vr[1])&&At(vr,vr[0],vr[1],vr[2]),vr.length&&ze.push(vr)}function Je(nt){var ze=[];return ze.size=nt.size,ze.start=nt.start,ze.end=nt.end,ze}function Ze(nt,ze,ut,mt,Ot,nr){for(var yr=0;yr<nt.length;yr++)kt(nt[yr],ze,ut,mt,Ot,nr,!1)}function At(nt,ze,ut,mt){nt.push(ze),nt.push(ut),nt.push(mt)}function Se(nt,ze,ut,mt,Ot,nr){var yr=(nr-ze)/(mt-ze);return nt.push(nr),nt.push(ut+(Ot-ut)*yr),nt.push(1),yr}function pe(nt,ze,ut,mt,Ot,nr){var yr=(nr-ut)/(Ot-ut);return nt.push(ze+(mt-ze)*yr),nt.push(nr),nt.push(1),yr}function Te(nt,ze){var ut=ze.buffer/ze.extent,mt=nt,Ot=It(nt,1,-1-ut,ut,0,-1,2,ze),nr=It(nt,1,1-ut,2+ut,0,-1,2,ze);return(Ot||nr)&&(mt=It(nt,1,-ut,1+ut,0,-1,2,ze)||[],Ot&&(mt=it(Ot,1).concat(mt)),nr&&(mt=mt.concat(it(nr,-1)))),mt}function it(nt,ze){for(var ut=[],mt=0;mt<nt.length;mt++){var Ot=nt[mt],nr=Ot.type,yr;if(nr==="Point"||nr==="MultiPoint"||nr==="LineString")yr=Dt(Ot.geometry,ze);else if(nr==="MultiLineString"||nr==="Polygon"){yr=[];for(var vr=0;vr<Ot.geometry.length;vr++)yr.push(Dt(Ot.geometry[vr],ze))}else if(nr==="MultiPolygon")for(yr=[],vr=0;vr<Ot.geometry.length;vr++){for(var Rr=[],Gr=0;Gr<Ot.geometry[vr].length;Gr++)Rr.push(Dt(Ot.geometry[vr][Gr],ze));yr.push(Rr)}ut.push(vt(Ot.id,nr,yr,Ot.tags))}return ut}function Dt(nt,ze){var ut=[];ut.size=nt.size,nt.start!==void 0&&(ut.start=nt.start,ut.end=nt.end);for(var mt=0;mt<nt.length;mt+=3)ut.push(nt[mt]+ze,nt[mt+1],nt[mt+2]);return ut}function Wt(nt,ze){if(nt.transformed)return nt;var ut=1<<nt.z,mt=nt.x,Ot=nt.y,nr,yr,vr;for(nr=0;nr<nt.features.length;nr++){var Rr=nt.features[nr],Gr=Rr.geometry,Yr=Rr.type;if(Rr.geometry=[],Yr===1)for(yr=0;yr<Gr.length;yr+=2)Rr.geometry.push(er(Gr[yr],Gr[yr+1],ze,ut,mt,Ot));else for(yr=0;yr<Gr.length;yr++){var Xr=[];for(vr=0;vr<Gr[yr].length;vr+=2)Xr.push(er(Gr[yr][vr],Gr[yr][vr+1],ze,ut,mt,Ot));Rr.geometry.push(Xr)}}return nt.transformed=!0,nt}function er(nt,ze,ut,mt,Ot,nr){return[Math.round(ut*(nt*mt-Ot)),Math.round(ut*(ze*mt-nr))]}function qr(nt,ze,ut,mt,Ot){for(var nr=ze===Ot.maxZoom?0:Ot.tolerance/((1<<ze)*Ot.extent),yr={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ut,y:mt,z:ze,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},vr=0;vr<nt.length;vr++){yr.numFeatures++,Vr(yr,nt[vr],nr,Ot);var Rr=nt[vr].minX,Gr=nt[vr].minY,Yr=nt[vr].maxX,Xr=nt[vr].maxY;Rr<yr.minX&&(yr.minX=Rr),Gr<yr.minY&&(yr.minY=Gr),Yr>yr.maxX&&(yr.maxX=Yr),Xr>yr.maxY&&(yr.maxY=Xr)}return yr}function Vr(nt,ze,ut,mt){var Ot=ze.geometry,nr=ze.type,yr=[];if(nr==="Point"||nr==="MultiPoint")for(var vr=0;vr<Ot.length;vr+=3)yr.push(Ot[vr]),yr.push(Ot[vr+1]),nt.numPoints++,nt.numSimplified++;else if(nr==="LineString")mr(yr,Ot,nt,ut,!1,!1);else if(nr==="MultiLineString"||nr==="Polygon")for(vr=0;vr<Ot.length;vr++)mr(yr,Ot[vr],nt,ut,nr==="Polygon",vr===0);else if(nr==="MultiPolygon")for(var Rr=0;Rr<Ot.length;Rr++){var Gr=Ot[Rr];for(vr=0;vr<Gr.length;vr++)mr(yr,Gr[vr],nt,ut,!0,vr===0)}if(yr.length){var Yr=ze.tags||null;if(nr==="LineString"&&mt.lineMetrics){Yr={};for(var Xr in ze.tags)Yr[Xr]=ze.tags[Xr];Yr.mapbox_clip_start=Ot.start/Ot.size,Yr.mapbox_clip_end=Ot.end/Ot.size}var on={geometry:yr,type:nr==="Polygon"||nr==="MultiPolygon"?3:nr==="LineString"||nr==="MultiLineString"?2:1,tags:Yr};ze.id!==null&&(on.id=ze.id),nt.features.push(on)}}function mr(nt,ze,ut,mt,Ot,nr){var yr=mt*mt;if(mt>0&&ze.size<(Ot?yr:mt)){ut.numPoints+=ze.length/3;return}for(var vr=[],Rr=0;Rr<ze.length;Rr+=3)(mt===0||ze[Rr+2]>yr)&&(ut.numSimplified++,vr.push(ze[Rr]),vr.push(ze[Rr+1])),ut.numPoints++;Ot&&Fr(vr,nr),nt.push(vr)}function Fr(nt,ze){for(var ut=0,mt=0,Ot=nt.length,nr=Ot-2;mt<Ot;nr=mt,mt+=2)ut+=(nt[mt]-nt[nr])*(nt[mt+1]+nt[nr+1]);if(ut>0===ze)for(mt=0,Ot=nt.length;mt<Ot/2;mt+=2){var yr=nt[mt],vr=nt[mt+1];nt[mt]=nt[Ot-2-mt],nt[mt+1]=nt[Ot-1-mt],nt[Ot-2-mt]=yr,nt[Ot-1-mt]=vr}}function nn(nt,ze){return new jn(nt,ze)}function jn(nt,ze){ze=this.options=pn(Object.create(this.options),ze);var ut=ze.debug;if(ut&&console.time("preprocess data"),ze.maxZoom<0||ze.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ze.promoteId&&ze.generateId)throw new Error("promoteId and generateId cannot be used together.");var mt=dt(nt,ze);this.tiles={},this.tileCoords=[],ut&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ze.indexMaxZoom,ze.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),mt=Te(mt,ze),mt.length&&this.splitTile(mt,0,0,0),ut&&(mt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}jn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},jn.prototype.splitTile=function(nt,ze,ut,mt,Ot,nr,yr){for(var vr=[nt,ze,ut,mt],Rr=this.options,Gr=Rr.debug;vr.length;){mt=vr.pop(),ut=vr.pop(),ze=vr.pop(),nt=vr.pop();var Yr=1<<ze,Xr=xn(ze,ut,mt),on=this.tiles[Xr];if(!on&&(Gr>1&&console.time("creation"),on=this.tiles[Xr]=qr(nt,ze,ut,mt,Rr),this.tileCoords.push({z:ze,x:ut,y:mt}),Gr)){Gr>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ze,ut,mt,on.numFeatures,on.numPoints,on.numSimplified),console.timeEnd("creation"));var wn="z"+ze;this.stats[wn]=(this.stats[wn]||0)+1,this.total++}if(on.source=nt,Ot){if(ze===Rr.maxZoom||ze===Ot)continue;var Vi=1<<Ot-ze;if(ut!==Math.floor(nr/Vi)||mt!==Math.floor(yr/Vi))continue}else if(ze===Rr.indexMaxZoom||on.numPoints<=Rr.indexMaxPoints)continue;if(on.source=null,nt.length!==0){Gr>1&&console.time("clipping");var vi=.5*Rr.buffer/Rr.extent,Zi=.5-vi,Xi=.5+vi,ta=1+vi,Ya,Pi,Bn,Qi,ya,Nn;Ya=Pi=Bn=Qi=null,ya=It(nt,Yr,ut-vi,ut+Xi,0,on.minX,on.maxX,Rr),Nn=It(nt,Yr,ut+Zi,ut+ta,0,on.minX,on.maxX,Rr),nt=null,ya&&(Ya=It(ya,Yr,mt-vi,mt+Xi,1,on.minY,on.maxY,Rr),Pi=It(ya,Yr,mt+Zi,mt+ta,1,on.minY,on.maxY,Rr),ya=null),Nn&&(Bn=It(Nn,Yr,mt-vi,mt+Xi,1,on.minY,on.maxY,Rr),Qi=It(Nn,Yr,mt+Zi,mt+ta,1,on.minY,on.maxY,Rr),Nn=null),Gr>1&&console.timeEnd("clipping"),vr.push(Ya||[],ze+1,ut*2,mt*2),vr.push(Pi||[],ze+1,ut*2,mt*2+1),vr.push(Bn||[],ze+1,ut*2+1,mt*2),vr.push(Qi||[],ze+1,ut*2+1,mt*2+1)}}},jn.prototype.getTile=function(nt,ze,ut){var mt=this.options,Ot=mt.extent,nr=mt.debug;if(nt<0||nt>24)return null;var yr=1<<nt;ze=(ze%yr+yr)%yr;var vr=xn(nt,ze,ut);if(this.tiles[vr])return Wt(this.tiles[vr],Ot);nr>1&&console.log("drilling down to z%d-%d-%d",nt,ze,ut);for(var Rr=nt,Gr=ze,Yr=ut,Xr;!Xr&&Rr>0;)Rr--,Gr=Math.floor(Gr/2),Yr=Math.floor(Yr/2),Xr=this.tiles[xn(Rr,Gr,Yr)];return!Xr||!Xr.source?null:(nr>1&&console.log("found parent tile z%d-%d-%d",Rr,Gr,Yr),nr>1&&console.time("drilling down"),this.splitTile(Xr.source,Rr,Gr,Yr,nt,ze,ut),nr>1&&console.timeEnd("drilling down"),this.tiles[vr]?Wt(this.tiles[vr],Ot):null)};function xn(nt,ze,ut){return((1<<nt)*ut+ze)*32+nt}function pn(nt,ze){for(var ut in ze)nt[ut]=ze[ut];return nt}function ki(nt,ze){var ut=nt.tileID.canonical;if(!this._geoJSONIndex)return ze(null,null);var mt=this._geoJSONIndex.getTile(ut.z,ut.x,ut.y);if(!mt)return ze(null,null);var Ot=new E(mt.features),nr=P(Ot);(nr.byteOffset!==0||nr.byteLength!==nr.buffer.byteLength)&&(nr=new Uint8Array(nr)),ze(null,{vectorTile:Ot,rawData:nr.buffer})}var qn=function(nt){function ze(ut,mt,Ot,nr){nt.call(this,ut,mt,Ot,ki),nr&&(this.loadGeoJSON=nr)}return nt&&(ze.__proto__=nt),ze.prototype=Object.create(nt&&nt.prototype),ze.prototype.constructor=ze,ze.prototype.loadData=function(mt,Ot){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ot,this._pendingLoadDataParams=mt,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},ze.prototype._loadData=function(){var mt=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var Ot=this._pendingCallback,nr=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var yr=nr&&nr.request&&nr.request.collectResourceTiming?new n.RequestPerformance(nr.request):!1;this.loadGeoJSON(nr,function(vr,Rr){if(vr||!Rr)return Ot(vr);if(typeof Rr!="object")return Ot(new Error("Input data given to '"+nr.source+"' is not a valid GeoJSON object."));p(Rr,!0);try{if(nr.filter){var Gr=n.createExpression(nr.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Gr.result==="error")throw new Error(Gr.value.map(function(wn){return wn.key+": "+wn.message}).join(", "));var Yr=Rr.features.filter(function(wn){return Gr.value.evaluate({zoom:0},wn)});Rr={type:"FeatureCollection",features:Yr}}mt._geoJSONIndex=nr.cluster?new qe(bi(nr)).load(Rr.features):nn(Rr,nr.geojsonVtOptions)}catch(wn){return Ot(wn)}mt.loaded={};var Xr={};if(yr){var on=yr.finish();on&&(Xr.resourceTiming={},Xr.resourceTiming[nr.source]=JSON.parse(JSON.stringify(on)))}Ot(null,Xr)})}},ze.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},ze.prototype.reloadTile=function(mt,Ot){var nr=this.loaded,yr=mt.uid;return nr&&nr[yr]?nt.prototype.reloadTile.call(this,mt,Ot):this.loadTile(mt,Ot)},ze.prototype.loadGeoJSON=function(mt,Ot){if(mt.request)n.getJSON(mt.request,Ot);else if(typeof mt.data=="string")try{return Ot(null,JSON.parse(mt.data))}catch(nr){return Ot(new Error("Input data given to '"+mt.source+"' is not a valid GeoJSON object."))}else return Ot(new Error("Input data given to '"+mt.source+"' is not a valid GeoJSON object."))},ze.prototype.removeSource=function(mt,Ot){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ot()},ze.prototype.getClusterExpansionZoom=function(mt,Ot){try{Ot(null,this._geoJSONIndex.getClusterExpansionZoom(mt.clusterId))}catch(nr){Ot(nr)}},ze.prototype.getClusterChildren=function(mt,Ot){try{Ot(null,this._geoJSONIndex.getChildren(mt.clusterId))}catch(nr){Ot(nr)}},ze.prototype.getClusterLeaves=function(mt,Ot){try{Ot(null,this._geoJSONIndex.getLeaves(mt.clusterId,mt.limit,mt.offset))}catch(nr){Ot(nr)}},ze}(d);function bi(nt){var ze=nt.superclusterOptions,ut=nt.clusterProperties;if(!ut||!ze)return ze;for(var mt={},Ot={},nr={accumulated:null,zoom:0},yr={properties:null},vr=Object.keys(ut),Rr=0,Gr=vr;Rr<Gr.length;Rr+=1){var Yr=Gr[Rr],Xr=ut[Yr],on=Xr[0],wn=Xr[1],Vi=n.createExpression(wn),vi=n.createExpression(typeof on=="string"?[on,["accumulated"],["get",Yr]]:on);mt[Yr]=Vi.value,Ot[Yr]=vi.value}return ze.map=function(Zi){yr.properties=Zi;for(var Xi={},ta=0,Ya=vr;ta<Ya.length;ta+=1){var Pi=Ya[ta];Xi[Pi]=mt[Pi].evaluate(nr,yr)}return Xi},ze.reduce=function(Zi,Xi){yr.properties=Xi;for(var ta=0,Ya=vr;ta<Ya.length;ta+=1){var Pi=Ya[ta];nr.accumulated=Zi[Pi],Zi[Pi]=Ot[Pi].evaluate(nr,yr)}},ze}var Si=function(ze){var ut=this;this.self=ze,this.actor=new n.Actor(ze,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:d,geojson:qn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(mt,Ot){if(ut.workerSourceTypes[mt])throw new Error('Worker source with name "'+mt+'" already registered.');ut.workerSourceTypes[mt]=Ot},this.self.registerRTLTextPlugin=function(mt){if(n.plugin.isParsed())throw new Error("RTL text plugin already registered.");n.plugin.applyArabicShaping=mt.applyArabicShaping,n.plugin.processBidirectionalText=mt.processBidirectionalText,n.plugin.processStyledBidirectionalText=mt.processStyledBidirectionalText}};return Si.prototype.setReferrer=function(ze,ut){this.referrer=ut},Si.prototype.setImages=function(ze,ut,mt){this.availableImages[ze]=ut;for(var Ot in this.workerSources[ze]){var nr=this.workerSources[ze][Ot];for(var yr in nr)nr[yr].availableImages=ut}mt()},Si.prototype.setLayers=function(ze,ut,mt){this.getLayerIndex(ze).replace(ut),mt()},Si.prototype.updateLayers=function(ze,ut,mt){this.getLayerIndex(ze).update(ut.layers,ut.removedIds),mt()},Si.prototype.loadTile=function(ze,ut,mt){this.getWorkerSource(ze,ut.type,ut.source).loadTile(ut,mt)},Si.prototype.loadDEMTile=function(ze,ut,mt){this.getDEMWorkerSource(ze,ut.source).loadTile(ut,mt)},Si.prototype.reloadTile=function(ze,ut,mt){this.getWorkerSource(ze,ut.type,ut.source).reloadTile(ut,mt)},Si.prototype.abortTile=function(ze,ut,mt){this.getWorkerSource(ze,ut.type,ut.source).abortTile(ut,mt)},Si.prototype.removeTile=function(ze,ut,mt){this.getWorkerSource(ze,ut.type,ut.source).removeTile(ut,mt)},Si.prototype.removeDEMTile=function(ze,ut){this.getDEMWorkerSource(ze,ut.source).removeTile(ut)},Si.prototype.removeSource=function(ze,ut,mt){if(!(!this.workerSources[ze]||!this.workerSources[ze][ut.type]||!this.workerSources[ze][ut.type][ut.source])){var Ot=this.workerSources[ze][ut.type][ut.source];delete this.workerSources[ze][ut.type][ut.source],Ot.removeSource!==void 0?Ot.removeSource(ut,mt):mt()}},Si.prototype.loadWorkerSource=function(ze,ut,mt){try{this.self.importScripts(ut.url),mt()}catch(Ot){mt(Ot.toString())}},Si.prototype.syncRTLPluginState=function(ze,ut,mt){try{n.plugin.setState(ut);var Ot=n.plugin.getPluginURL();if(n.plugin.isLoaded()&&!n.plugin.isParsed()&&Ot!=null){this.self.importScripts(Ot);var nr=n.plugin.isParsed(),yr=nr?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ot);mt(yr,nr)}}catch(vr){mt(vr.toString())}},Si.prototype.getAvailableImages=function(ze){var ut=this.availableImages[ze];return ut||(ut=[]),ut},Si.prototype.getLayerIndex=function(ze){var ut=this.layerIndexes[ze];return ut||(ut=this.layerIndexes[ze]=new l),ut},Si.prototype.getWorkerSource=function(ze,ut,mt){var Ot=this;if(this.workerSources[ze]||(this.workerSources[ze]={}),this.workerSources[ze][ut]||(this.workerSources[ze][ut]={}),!this.workerSources[ze][ut][mt]){var nr={send:function(yr,vr,Rr){Ot.actor.send(yr,vr,Rr,ze)}};this.workerSources[ze][ut][mt]=new this.workerSourceTypes[ut](nr,this.getLayerIndex(ze),this.getAvailableImages(ze))}return this.workerSources[ze][ut][mt]},Si.prototype.getDEMWorkerSource=function(ze,ut){return this.demWorkerSources[ze]||(this.demWorkerSources[ze]={}),this.demWorkerSources[ze][ut]||(this.demWorkerSources[ze][ut]=new b),this.demWorkerSources[ze][ut]},Si.prototype.enforceCacheSizeLimit=function(ze,ut){n.enforceCacheSizeLimit(ut)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new Si(self)),Si}),i(["./shared"],function(n){"use strict";var a=n.createCommonjsModule(function(H){H.exports?H.exports=R:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=R,window.mapboxgl.notSupportedReason=G);function R(Tt){return!G(Tt)}function G(Tt){if(!I())return"not a browser";if(!W())return"insufficent Array support";if(!re())return"insufficient Function support";if(!$())return"insufficient Object support";if(!ve())return"insufficient JSON support";if(!Ee())return"insufficient worker support";if(!Oe())return"insufficient Uint8ClampedArray support";if(!pt())return"insufficient ArrayBuffer support";if(!wt())return"insufficient Canvas/getImageData support";if(!Be(Tt&&Tt.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function I(){return typeof window!="undefined"&&typeof document!="undefined"}function W(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function re(){return Function.prototype&&Function.prototype.bind}function $(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function ve(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function Ee(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Tt=new Blob([""],{type:"text/javascript"}),Lt=URL.createObjectURL(Tt),Pt,jt;try{jt=new Worker(Lt),Pt=!0}catch(Nt){Pt=!1}return jt&&jt.terminate(),URL.revokeObjectURL(Lt),Pt}function Oe(){return"Uint8ClampedArray"in window}function pt(){return ArrayBuffer.isView}function wt(){var Tt=document.createElement("canvas");Tt.width=Tt.height=1;var Lt=Tt.getContext("2d");if(!Lt)return!1;var Pt=Lt.getImageData(0,0,1,1);return Pt&&Pt.width===Tt.width}var yt={};function Be(Tt){return yt[Tt]===void 0&&(yt[Tt]=ft(Tt)),yt[Tt]}R.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function $e(Tt){var Lt=document.createElement("canvas"),Pt=Object.create(R.webGLContextAttributes);return Pt.failIfMajorPerformanceCaveat=Tt,Lt.probablySupportsContext?Lt.probablySupportsContext("webgl",Pt)||Lt.probablySupportsContext("experimental-webgl",Pt):Lt.supportsContext?Lt.supportsContext("webgl",Pt)||Lt.supportsContext("experimental-webgl",Pt):Lt.getContext("webgl",Pt)||Lt.getContext("experimental-webgl",Pt)}function ft(Tt){var Lt=$e(Tt);if(!Lt)return!1;var Pt=Lt.createShader(Lt.VERTEX_SHADER);return!Pt||Lt.isContextLost()?!1:(Lt.shaderSource(Pt,"void main() {}"),Lt.compileShader(Pt),Lt.getShaderParameter(Pt,Lt.COMPILE_STATUS)===!0)}}),o={};o.create=function(H,R,G){var I=n.window.document.createElement(H);return R!==void 0&&(I.className=R),G&&G.appendChild(I),I},o.createNS=function(H,R){var G=n.window.document.createElementNS(H,R);return G};var s=n.window.document&&n.window.document.documentElement.style;function l(H){if(!s)return H[0];for(var R=0;R<H.length;R++)if(H[R]in s)return H[R];return H[0]}var u=l(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),f;o.disableDrag=function(){s&&u&&(f=s[u],s[u]="none")},o.enableDrag=function(){s&&u&&(s[u]=f)};var c=l(["transform","WebkitTransform"]);o.setTransform=function(H,R){H.style[c]=R};var h=!1;try{var v=Object.defineProperty({},"passive",{get:function(){h=!0}});n.window.addEventListener("test",v,v),n.window.removeEventListener("test",v,v)}catch(H){h=!1}o.addEventListener=function(H,R,G,I){I===void 0&&(I={}),"passive"in I&&h?H.addEventListener(R,G,I):H.addEventListener(R,G,I.capture)},o.removeEventListener=function(H,R,G,I){I===void 0&&(I={}),"passive"in I&&h?H.removeEventListener(R,G,I):H.removeEventListener(R,G,I.capture)};var d=function(H){H.preventDefault(),H.stopPropagation(),n.window.removeEventListener("click",d,!0)};o.suppressClick=function(){n.window.addEventListener("click",d,!0),n.window.setTimeout(function(){n.window.removeEventListener("click",d,!0)},0)},o.mousePos=function(H,R){var G=H.getBoundingClientRect();return new n.Point(R.clientX-G.left-H.clientLeft,R.clientY-G.top-H.clientTop)},o.touchPos=function(H,R){for(var G=H.getBoundingClientRect(),I=[],W=0;W<R.length;W++)I.push(new n.Point(R[W].clientX-G.left-H.clientLeft,R[W].clientY-G.top-H.clientTop));return I},o.mouseButton=function(H){return typeof n.window.InstallTrigger!="undefined"&&H.button===2&&H.ctrlKey&&n.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:H.button},o.remove=function(H){H.parentNode&&H.parentNode.removeChild(H)};function x(H,R,G){var I,W,re,$=n.browser.devicePixelRatio>1?"@2x":"",ve=n.getJSON(R.transformRequest(R.normalizeSpriteURL(H,$,".json"),n.ResourceType.SpriteJSON),function(pt,wt){ve=null,re||(re=pt,I=wt,Oe())}),Ee=n.getImage(R.transformRequest(R.normalizeSpriteURL(H,$,".png"),n.ResourceType.SpriteImage),function(pt,wt){Ee=null,re||(re=pt,W=wt,Oe())});function Oe(){if(re)G(re);else if(I&&W){var pt=n.browser.getImageData(W),wt={};for(var yt in I){var Be=I[yt],$e=Be.width,ft=Be.height,Tt=Be.x,Lt=Be.y,Pt=Be.sdf,jt=Be.pixelRatio,Nt=Be.stretchX,Ft=Be.stretchY,Kt=Be.content,Ct=new n.RGBAImage({width:$e,height:ft});n.RGBAImage.copy(pt,Ct,{x:Tt,y:Lt},{x:0,y:0},{width:$e,height:ft}),wt[yt]={data:Ct,pixelRatio:jt,sdf:Pt,stretchX:Nt,stretchY:Ft,content:Kt}}G(null,wt)}}return{cancel:function(){ve&&(ve.cancel(),ve=null),Ee&&(Ee.cancel(),Ee=null)}}}function b(H){var R=H.userImage;if(R&&R.render){var G=R.render();if(G)return H.data.replace(new Uint8Array(R.data.buffer)),!0}return!1}var p=1,w=function(H){function R(){H.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new n.RGBAImage({width:1,height:1}),this.dirty=!0}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.isLoaded=function(){return this.loaded},R.prototype.setLoaded=function(I){if(this.loaded!==I&&(this.loaded=I,I)){for(var W=0,re=this.requestors;W<re.length;W+=1){var $=re[W],ve=$.ids,Ee=$.callback;this._notify(ve,Ee)}this.requestors=[]}},R.prototype.getImage=function(I){return this.images[I]},R.prototype.addImage=function(I,W){this._validate(I,W)&&(this.images[I]=W)},R.prototype._validate=function(I,W){var re=!0;return this._validateStretch(W.stretchX,W.data&&W.data.width)||(this.fire(new n.ErrorEvent(new Error('Image "'+I+'" has invalid "stretchX" value'))),re=!1),this._validateStretch(W.stretchY,W.data&&W.data.height)||(this.fire(new n.ErrorEvent(new Error('Image "'+I+'" has invalid "stretchY" value'))),re=!1),this._validateContent(W.content,W)||(this.fire(new n.ErrorEvent(new Error('Image "'+I+'" has invalid "content" value'))),re=!1),re},R.prototype._validateStretch=function(I,W){if(!I)return!0;for(var re=0,$=0,ve=I;$<ve.length;$+=1){var Ee=ve[$];if(Ee[0]<re||Ee[1]<Ee[0]||W<Ee[1])return!1;re=Ee[1]}return!0},R.prototype._validateContent=function(I,W){return I?!(I.length!==4||I[0]<0||W.data.width<I[0]||I[1]<0||W.data.height<I[1]||I[2]<0||W.data.width<I[2]||I[3]<0||W.data.height<I[3]||I[2]<I[0]||I[3]<I[1]):!0},R.prototype.updateImage=function(I,W){var re=this.images[I];W.version=re.version+1,this.images[I]=W,this.updatedImages[I]=!0},R.prototype.removeImage=function(I){var W=this.images[I];delete this.images[I],delete this.patterns[I],W.userImage&&W.userImage.onRemove&&W.userImage.onRemove()},R.prototype.listImages=function(){return Object.keys(this.images)},R.prototype.getImages=function(I,W){var re=!0;if(!this.isLoaded())for(var $=0,ve=I;$<ve.length;$+=1){var Ee=ve[$];this.images[Ee]||(re=!1)}this.isLoaded()||re?this._notify(I,W):this.requestors.push({ids:I,callback:W})},R.prototype._notify=function(I,W){for(var re={},$=0,ve=I;$<ve.length;$+=1){var Ee=ve[$];this.images[Ee]||this.fire(new n.Event("styleimagemissing",{id:Ee}));var Oe=this.images[Ee];Oe?re[Ee]={data:Oe.data.clone(),pixelRatio:Oe.pixelRatio,sdf:Oe.sdf,version:Oe.version,stretchX:Oe.stretchX,stretchY:Oe.stretchY,content:Oe.content,hasRenderCallback:!!(Oe.userImage&&Oe.userImage.render)}:n.warnOnce('Image "'+Ee+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}W(null,re)},R.prototype.getPixelSize=function(){var I=this.atlasImage,W=I.width,re=I.height;return{width:W,height:re}},R.prototype.getPattern=function(I){var W=this.patterns[I],re=this.getImage(I);if(!re)return null;if(W&&W.position.version===re.version)return W.position;if(W)W.position.version=re.version;else{var $=re.data.width+p*2,ve=re.data.height+p*2,Ee={w:$,h:ve,x:0,y:0},Oe=new n.ImagePosition(Ee,re);this.patterns[I]={bin:Ee,position:Oe}}return this._updatePatternAtlas(),this.patterns[I].position},R.prototype.bind=function(I){var W=I.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new n.Texture(I,this.atlasImage,W.RGBA),this.atlasTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE)},R.prototype._updatePatternAtlas=function(){var I=[];for(var W in this.patterns)I.push(this.patterns[W].bin);var re=n.potpack(I),$=re.w,ve=re.h,Ee=this.atlasImage;Ee.resize({width:$||1,height:ve||1});for(var Oe in this.patterns){var pt=this.patterns[Oe],wt=pt.bin,yt=wt.x+p,Be=wt.y+p,$e=this.images[Oe].data,ft=$e.width,Tt=$e.height;n.RGBAImage.copy($e,Ee,{x:0,y:0},{x:yt,y:Be},{width:ft,height:Tt}),n.RGBAImage.copy($e,Ee,{x:0,y:Tt-1},{x:yt,y:Be-1},{width:ft,height:1}),n.RGBAImage.copy($e,Ee,{x:0,y:0},{x:yt,y:Be+Tt},{width:ft,height:1}),n.RGBAImage.copy($e,Ee,{x:ft-1,y:0},{x:yt-1,y:Be},{width:1,height:Tt}),n.RGBAImage.copy($e,Ee,{x:0,y:0},{x:yt+ft,y:Be},{width:1,height:Tt})}this.dirty=!0},R.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},R.prototype.dispatchRenderCallbacks=function(I){for(var W=0,re=I;W<re.length;W+=1){var $=re[W];if(!this.callbackDispatchedThisFrame[$]){this.callbackDispatchedThisFrame[$]=!0;var ve=this.images[$],Ee=b(ve);Ee&&this.updateImage($,ve)}}},R}(n.Evented);function A(H,R,G,I,W){var re=R*256,$=re+255,ve=I.transformRequest(I.normalizeGlyphsURL(G).replace("{fontstack}",H).replace("{range}",re+"-"+$),n.ResourceType.Glyphs);n.getArrayBuffer(ve,function(Ee,Oe){if(Ee)W(Ee);else if(Oe){for(var pt={},wt=0,yt=n.parseGlyphPBF(Oe);wt<yt.length;wt+=1){var Be=yt[wt];pt[Be.id]=Be}W(null,pt)}})}var T=E,k=E,_=1e20;function E(H,R,G,I,W,re){this.fontSize=H||24,this.buffer=R===void 0?3:R,this.cutoff=I||.25,this.fontFamily=W||"sans-serif",this.fontWeight=re||"normal",this.radius=G||8;var $=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=$,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array($*$),this.gridInner=new Float64Array($*$),this.f=new Float64Array($),this.d=new Float64Array($),this.z=new Float64Array($+1),this.v=new Int16Array($),this.middle=Math.round($/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}E.prototype.draw=function(H){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(H,this.buffer,this.middle);for(var R=this.ctx.getImageData(0,0,this.size,this.size),G=new Uint8ClampedArray(this.size*this.size),I=0;I<this.size*this.size;I++){var W=R.data[I*4+3]/255;this.gridOuter[I]=W===1?0:W===0?_:Math.pow(Math.max(0,.5-W),2),this.gridInner[I]=W===1?_:W===0?0:Math.pow(Math.max(0,W-.5),2)}for(S(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),S(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),I=0;I<this.size*this.size;I++){var re=this.gridOuter[I]-this.gridInner[I];G[I]=Math.max(0,Math.min(255,Math.round(255-255*(re/this.radius+this.cutoff))))}return G};function S(H,R,G,I,W,re,$){for(var ve=0;ve<R;ve++){for(var Ee=0;Ee<G;Ee++)I[Ee]=H[Ee*R+ve];for(g(I,W,re,$,G),Ee=0;Ee<G;Ee++)H[Ee*R+ve]=W[Ee]}for(Ee=0;Ee<G;Ee++){for(ve=0;ve<R;ve++)I[ve]=H[Ee*R+ve];for(g(I,W,re,$,R),ve=0;ve<R;ve++)H[Ee*R+ve]=Math.sqrt(W[ve])}}function g(H,R,G,I,W){G[0]=0,I[0]=-_,I[1]=+_;for(var re=1,$=0;re<W;re++){for(var ve=(H[re]+re*re-(H[G[$]]+G[$]*G[$]))/(2*re-2*G[$]);ve<=I[$];)$--,ve=(H[re]+re*re-(H[G[$]]+G[$]*G[$]))/(2*re-2*G[$]);$++,G[$]=re,I[$]=ve,I[$+1]=+_}for(re=0,$=0;re<W;re++){for(;I[$+1]<re;)$++;R[re]=(re-G[$])*(re-G[$])+H[G[$]]}}T.default=k;var C=function(R,G){this.requestManager=R,this.localIdeographFontFamily=G,this.entries={}};C.prototype.setURL=function(R){this.url=R},C.prototype.getGlyphs=function(R,G){var I=this,W=[];for(var re in R)for(var $=0,ve=R[re];$<ve.length;$+=1){var Ee=ve[$];W.push({stack:re,id:Ee})}n.asyncAll(W,function(Oe,pt){var wt=Oe.stack,yt=Oe.id,Be=I.entries[wt];Be||(Be=I.entries[wt]={glyphs:{},requests:{},ranges:{}});var $e=Be.glyphs[yt];if($e!==void 0){pt(null,{stack:wt,id:yt,glyph:$e});return}if($e=I._tinySDF(Be,wt,yt),$e){Be.glyphs[yt]=$e,pt(null,{stack:wt,id:yt,glyph:$e});return}var ft=Math.floor(yt/256);if(ft*256>65535){pt(new Error("glyphs > 65535 not supported"));return}if(Be.ranges[ft]){pt(null,{stack:wt,id:yt,glyph:$e});return}var Tt=Be.requests[ft];Tt||(Tt=Be.requests[ft]=[],C.loadGlyphRange(wt,ft,I.url,I.requestManager,function(Lt,Pt){if(Pt){for(var jt in Pt)I._doesCharSupportLocalGlyph(+jt)||(Be.glyphs[+jt]=Pt[+jt]);Be.ranges[ft]=!0}for(var Nt=0,Ft=Tt;Nt<Ft.length;Nt+=1){var Kt=Ft[Nt];Kt(Lt,Pt)}delete Be.requests[ft]})),Tt.push(function(Lt,Pt){Lt?pt(Lt):Pt&&pt(null,{stack:wt,id:yt,glyph:Pt[yt]||null})})},function(Oe,pt){if(Oe)G(Oe);else if(pt){for(var wt={},yt=0,Be=pt;yt<Be.length;yt+=1){var $e=Be[yt],ft=$e.stack,Tt=$e.id,Lt=$e.glyph;(wt[ft]||(wt[ft]={}))[Tt]=Lt&&{id:Lt.id,bitmap:Lt.bitmap.clone(),metrics:Lt.metrics}}G(null,wt)}})},C.prototype._doesCharSupportLocalGlyph=function(R){return!!this.localIdeographFontFamily&&(n.isChar["CJK Unified Ideographs"](R)||n.isChar["Hangul Syllables"](R)||n.isChar.Hiragana(R)||n.isChar.Katakana(R))},C.prototype._tinySDF=function(R,G,I){var W=this.localIdeographFontFamily;if(W&&this._doesCharSupportLocalGlyph(I)){var re=R.tinySDF;if(!re){var $="400";/bold/i.test(G)?$="900":/medium/i.test(G)?$="500":/light/i.test(G)&&($="200"),re=R.tinySDF=new C.TinySDF(24,3,8,.25,W,$)}return{id:I,bitmap:new n.AlphaImage({width:30,height:30},re.draw(String.fromCharCode(I))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},C.loadGlyphRange=A,C.TinySDF=T;var M=function(){this.specification=n.styleSpec.light.position};M.prototype.possiblyEvaluate=function(R,G){return n.sphericalToCartesian(R.expression.evaluate(G))},M.prototype.interpolate=function(R,G,I){return{x:n.number(R.x,G.x,I),y:n.number(R.y,G.y,I),z:n.number(R.z,G.z,I)}};var P=new n.Properties({anchor:new n.DataConstantProperty(n.styleSpec.light.anchor),position:new M,color:new n.DataConstantProperty(n.styleSpec.light.color),intensity:new n.DataConstantProperty(n.styleSpec.light.intensity)}),D="-transition",q=function(H){function R(G){H.call(this),this._transitionable=new n.Transitionable(P),this.setLight(G),this._transitioning=this._transitionable.untransitioned()}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getLight=function(){return this._transitionable.serialize()},R.prototype.setLight=function(I,W){if(W===void 0&&(W={}),!this._validate(n.validateLight,I,W))for(var re in I){var $=I[re];n.endsWith(re,D)?this._transitionable.setTransition(re.slice(0,-D.length),$):this._transitionable.setValue(re,$)}},R.prototype.updateTransitions=function(I){this._transitioning=this._transitionable.transitioned(I,this._transitioning)},R.prototype.hasTransition=function(){return this._transitioning.hasTransition()},R.prototype.recalculate=function(I){this.properties=this._transitioning.possiblyEvaluate(I)},R.prototype._validate=function(I,W,re){return re&&re.validate===!1?!1:n.emitValidationErrors(this,I.call(n.validateStyle,n.extend({value:W,style:{glyphs:!0,sprite:!0},styleSpec:n.styleSpec})))},R}(n.Evented),O=function(R,G){this.width=R,this.height=G,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};O.prototype.getDash=function(R,G){var I=R.join(",")+String(G);return this.dashEntry[I]||(this.dashEntry[I]=this.addDash(R,G)),this.dashEntry[I]},O.prototype.getDashRanges=function(R,G,I){var W=R.length%2===1,re=[],$=W?-R[R.length-1]*I:0,ve=R[0]*I,Ee=!0;re.push({left:$,right:ve,isDash:Ee,zeroLength:R[0]===0});for(var Oe=R[0],pt=1;pt<R.length;pt++){Ee=!Ee;var wt=R[pt];$=Oe*I,Oe+=wt,ve=Oe*I,re.push({left:$,right:ve,isDash:Ee,zeroLength:wt===0})}return re},O.prototype.addRoundDash=function(R,G,I){for(var W=G/2,re=-I;re<=I;re++)for(var $=this.nextRow+I+re,ve=this.width*$,Ee=0,Oe=R[Ee],pt=0;pt<this.width;pt++){pt/Oe.right>1&&(Oe=R[++Ee]);var wt=Math.abs(pt-Oe.left),yt=Math.abs(pt-Oe.right),Be=Math.min(wt,yt),$e=void 0,ft=re/I*(W+1);if(Oe.isDash){var Tt=W-Math.abs(ft);$e=Math.sqrt(Be*Be+Tt*Tt)}else $e=W-Math.sqrt(Be*Be+ft*ft);this.data[ve+pt]=Math.max(0,Math.min(255,$e+128))}},O.prototype.addRegularDash=function(R){for(var G=R.length-1;G>=0;--G){var I=R[G],W=R[G+1];I.zeroLength?R.splice(G,1):W&&W.isDash===I.isDash&&(W.left=I.left,R.splice(G,1))}var re=R[0],$=R[R.length-1];re.isDash===$.isDash&&(re.left=$.left-this.width,$.right=re.right+this.width);for(var ve=this.width*this.nextRow,Ee=0,Oe=R[Ee],pt=0;pt<this.width;pt++){pt/Oe.right>1&&(Oe=R[++Ee]);var wt=Math.abs(pt-Oe.left),yt=Math.abs(pt-Oe.right),Be=Math.min(wt,yt),$e=Oe.isDash?Be:-Be;this.data[ve+pt]=Math.max(0,Math.min(255,$e+128))}},O.prototype.addDash=function(R,G){var I=G?7:0,W=2*I+1;if(this.nextRow+W>this.height)return n.warnOnce("LineAtlas out of space"),null;for(var re=0,$=0;$<R.length;$++)re+=R[$];if(re!==0){var ve=this.width/re,Ee=this.getDashRanges(R,this.width,ve);G?this.addRoundDash(Ee,ve,I):this.addRegularDash(Ee)}var Oe={y:(this.nextRow+I+.5)/this.height,height:2*I/this.height,width:re};return this.nextRow+=W,this.dirty=!0,Oe},O.prototype.bind=function(R){var G=R.gl;this.texture?(G.bindTexture(G.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,G.texSubImage2D(G.TEXTURE_2D,0,0,0,this.width,this.height,G.ALPHA,G.UNSIGNED_BYTE,this.data))):(this.texture=G.createTexture(),G.bindTexture(G.TEXTURE_2D,this.texture),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_S,G.REPEAT),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_T,G.REPEAT),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,G.LINEAR),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,G.LINEAR),G.texImage2D(G.TEXTURE_2D,0,G.ALPHA,this.width,this.height,0,G.ALPHA,G.UNSIGNED_BYTE,this.data))};var U=function H(R,G){this.workerPool=R,this.actors=[],this.currentActor=0,this.id=n.uniqueId();for(var I=this.workerPool.acquire(this.id),W=0;W<I.length;W++){var re=I[W],$=new H.Actor(re,G,this.id);$.name="Worker "+W,this.actors.push($)}};U.prototype.broadcast=function(R,G,I){I=I||function(){},n.asyncAll(this.actors,function(W,re){W.send(R,G,re)},I)},U.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},U.prototype.remove=function(){this.actors.forEach(function(R){R.remove()}),this.actors=[],this.workerPool.release(this.id)},U.Actor=n.Actor;function B(H,R,G){var I=function(W,re){if(W)return G(W);if(re){var $=n.pick(n.extend(re,H),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);re.vector_layers&&($.vectorLayers=re.vector_layers,$.vectorLayerIds=$.vectorLayers.map(function(ve){return ve.id})),$.tiles=R.canonicalizeTileset($,H.url),G(null,$)}};return H.url?n.getJSON(R.transformRequest(R.normalizeSourceURL(H.url),n.ResourceType.Source),I):n.browser.frame(function(){return I(null,H)})}var F=function(R,G,I){this.bounds=n.LngLatBounds.convert(this.validateBounds(R)),this.minzoom=G||0,this.maxzoom=I||24};F.prototype.validateBounds=function(R){return!Array.isArray(R)||R.length!==4?[-180,-90,180,90]:[Math.max(-180,R[0]),Math.max(-90,R[1]),Math.min(180,R[2]),Math.min(90,R[3])]},F.prototype.contains=function(R){var G=Math.pow(2,R.z),I={minX:Math.floor(n.mercatorXfromLng(this.bounds.getWest())*G),minY:Math.floor(n.mercatorYfromLat(this.bounds.getNorth())*G),maxX:Math.ceil(n.mercatorXfromLng(this.bounds.getEast())*G),maxY:Math.ceil(n.mercatorYfromLat(this.bounds.getSouth())*G)},W=R.x>=I.minX&&R.x<I.maxX&&R.y>=I.minY&&R.y<I.maxY;return W};var N=function(H){function R(G,I,W,re){if(H.call(this),this.id=G,this.dispatcher=W,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,n.extend(this,n.pick(I,["url","scheme","tileSize","promoteId"])),this._options=n.extend({type:"vector"},I),this._collectResourceTiming=I.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(re)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.load=function(){var I=this;this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=B(this._options,this.map._requestManager,function(W,re){I._tileJSONRequest=null,I._loaded=!0,W?I.fire(new n.ErrorEvent(W)):re&&(n.extend(I,re),re.bounds&&(I.tileBounds=new F(re.bounds,I.minzoom,I.maxzoom)),n.postTurnstileEvent(re.tiles,I.map._requestManager._customAccessToken),n.postMapLoadEvent(re.tiles,I.map._getMapId(),I.map._requestManager._skuToken,I.map._requestManager._customAccessToken),I.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})),I.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})))})},R.prototype.loaded=function(){return this._loaded},R.prototype.hasTile=function(I){return!this.tileBounds||this.tileBounds.contains(I.canonical)},R.prototype.onAdd=function(I){this.map=I,this.load()},R.prototype.setSourceProperty=function(I){this._tileJSONRequest&&this._tileJSONRequest.cancel(),I();var W=this.map.style.sourceCaches[this.id];W.clearTiles(),this.load()},R.prototype.setTiles=function(I){var W=this;return this.setSourceProperty(function(){W._options.tiles=I}),this},R.prototype.setUrl=function(I){var W=this;return this.setSourceProperty(function(){W.url=I,W._options.url=I}),this},R.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},R.prototype.serialize=function(){return n.extend({},this._options)},R.prototype.loadTile=function(I,W){var re=this.map._requestManager.normalizeTileURL(I.tileID.canonical.url(this.tiles,this.scheme)),$={request:this.map._requestManager.transformRequest(re,n.ResourceType.Tile),uid:I.uid,tileID:I.tileID,zoom:I.tileID.overscaledZ,tileSize:this.tileSize*I.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:n.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};$.request.collectResourceTiming=this._collectResourceTiming,!I.actor||I.state==="expired"?(I.actor=this.dispatcher.getActor(),I.request=I.actor.send("loadTile",$,ve.bind(this))):I.state==="loading"?I.reloadCallback=W:I.request=I.actor.send("reloadTile",$,ve.bind(this));function ve(Ee,Oe){if(delete I.request,I.aborted)return W(null);if(Ee&&Ee.status!==404)return W(Ee);Oe&&Oe.resourceTiming&&(I.resourceTiming=Oe.resourceTiming),this.map._refreshExpiredTiles&&Oe&&I.setExpiryData(Oe),I.loadVectorData(Oe,this.map.painter),n.cacheEntryPossiblyAdded(this.dispatcher),W(null),I.reloadCallback&&(this.loadTile(I,I.reloadCallback),I.reloadCallback=null)}},R.prototype.abortTile=function(I){I.request&&(I.request.cancel(),delete I.request),I.actor&&I.actor.send("abortTile",{uid:I.uid,type:this.type,source:this.id},void 0)},R.prototype.unloadTile=function(I){I.unloadVectorData(),I.actor&&I.actor.send("removeTile",{uid:I.uid,type:this.type,source:this.id},void 0)},R.prototype.hasTransition=function(){return!1},R}(n.Evented),X=function(H){function R(G,I,W,re){H.call(this),this.id=G,this.dispatcher=W,this.setEventedParent(re),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=n.extend({type:"raster"},I),n.extend(this,n.pick(I,["url","scheme","tileSize"]))}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.load=function(){var I=this;this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=B(this._options,this.map._requestManager,function(W,re){I._tileJSONRequest=null,I._loaded=!0,W?I.fire(new n.ErrorEvent(W)):re&&(n.extend(I,re),re.bounds&&(I.tileBounds=new F(re.bounds,I.minzoom,I.maxzoom)),n.postTurnstileEvent(re.tiles),n.postMapLoadEvent(re.tiles,I.map._getMapId(),I.map._requestManager._skuToken),I.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})),I.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})))})},R.prototype.loaded=function(){return this._loaded},R.prototype.onAdd=function(I){this.map=I,this.load()},R.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},R.prototype.serialize=function(){return n.extend({},this._options)},R.prototype.hasTile=function(I){return!this.tileBounds||this.tileBounds.contains(I.canonical)},R.prototype.loadTile=function(I,W){var re=this,$=this.map._requestManager.normalizeTileURL(I.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);I.request=n.getImage(this.map._requestManager.transformRequest($,n.ResourceType.Tile),function(ve,Ee){if(delete I.request,I.aborted)I.state="unloaded",W(null);else if(ve)I.state="errored",W(ve);else if(Ee){re.map._refreshExpiredTiles&&I.setExpiryData(Ee),delete Ee.cacheControl,delete Ee.expires;var Oe=re.map.painter.context,pt=Oe.gl;I.texture=re.map.painter.getTileTexture(Ee.width),I.texture?I.texture.update(Ee,{useMipmap:!0}):(I.texture=new n.Texture(Oe,Ee,pt.RGBA,{useMipmap:!0}),I.texture.bind(pt.LINEAR,pt.CLAMP_TO_EDGE,pt.LINEAR_MIPMAP_NEAREST),Oe.extTextureFilterAnisotropic&&pt.texParameterf(pt.TEXTURE_2D,Oe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Oe.extTextureFilterAnisotropicMax)),I.state="loaded",n.cacheEntryPossiblyAdded(re.dispatcher),W(null)}})},R.prototype.abortTile=function(I,W){I.request&&(I.request.cancel(),delete I.request),W()},R.prototype.unloadTile=function(I,W){I.texture&&this.map.painter.saveTileTexture(I.texture),W()},R.prototype.hasTransition=function(){return!1},R}(n.Evented),K=function(H){function R(G,I,W,re){H.call(this,G,I,W,re),this.type="raster-dem",this.maxzoom=22,this._options=n.extend({type:"raster-dem"},I),this.encoding=I.encoding||"mapbox"}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},R.prototype.loadTile=function(I,W){var re=this.map._requestManager.normalizeTileURL(I.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);I.request=n.getImage(this.map._requestManager.transformRequest(re,n.ResourceType.Tile),$.bind(this)),I.neighboringTiles=this._getNeighboringTiles(I.tileID);function $(Ee,Oe){if(delete I.request,I.aborted)I.state="unloaded",W(null);else if(Ee)I.state="errored",W(Ee);else if(Oe){this.map._refreshExpiredTiles&&I.setExpiryData(Oe),delete Oe.cacheControl,delete Oe.expires;var pt=n.window.ImageBitmap&&Oe instanceof n.window.ImageBitmap&&n.offscreenCanvasSupported(),wt=pt?Oe:n.browser.getImageData(Oe,1),yt={uid:I.uid,coord:I.tileID,source:this.id,rawImageData:wt,encoding:this.encoding};(!I.actor||I.state==="expired")&&(I.actor=this.dispatcher.getActor(),I.actor.send("loadDEMTile",yt,ve.bind(this)))}}function ve(Ee,Oe){Ee&&(I.state="errored",W(Ee)),Oe&&(I.dem=Oe,I.needsHillshadePrepare=!0,I.state="loaded",W(null))}},R.prototype._getNeighboringTiles=function(I){var W=I.canonical,re=Math.pow(2,W.z),$=(W.x-1+re)%re,ve=W.x===0?I.wrap-1:I.wrap,Ee=(W.x+1+re)%re,Oe=W.x+1===re?I.wrap+1:I.wrap,pt={};return pt[new n.OverscaledTileID(I.overscaledZ,ve,W.z,$,W.y).key]={backfilled:!1},pt[new n.OverscaledTileID(I.overscaledZ,Oe,W.z,Ee,W.y).key]={backfilled:!1},W.y>0&&(pt[new n.OverscaledTileID(I.overscaledZ,ve,W.z,$,W.y-1).key]={backfilled:!1},pt[new n.OverscaledTileID(I.overscaledZ,I.wrap,W.z,W.x,W.y-1).key]={backfilled:!1},pt[new n.OverscaledTileID(I.overscaledZ,Oe,W.z,Ee,W.y-1).key]={backfilled:!1}),W.y+1<re&&(pt[new n.OverscaledTileID(I.overscaledZ,ve,W.z,$,W.y+1).key]={backfilled:!1},pt[new n.OverscaledTileID(I.overscaledZ,I.wrap,W.z,W.x,W.y+1).key]={backfilled:!1},pt[new n.OverscaledTileID(I.overscaledZ,Oe,W.z,Ee,W.y+1).key]={backfilled:!1}),pt},R.prototype.unloadTile=function(I){I.demTexture&&this.map.painter.saveTileTexture(I.demTexture),I.fbo&&(I.fbo.destroy(),delete I.fbo),I.dem&&delete I.dem,delete I.neighboringTiles,I.state="unloaded",I.actor&&I.actor.send("removeDEMTile",{uid:I.uid,source:this.id})},R}(X),ne=function(H){function R(G,I,W,re){H.call(this),this.id=G,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=W.getActor(),this.setEventedParent(re),this._data=I.data,this._options=n.extend({},I),this._collectResourceTiming=I.collectResourceTiming,this._resourceTiming=[],I.maxzoom!==void 0&&(this.maxzoom=I.maxzoom),I.type&&(this.type=I.type),I.attribution&&(this.attribution=I.attribution),this.promoteId=I.promoteId;var $=n.EXTENT/this.tileSize;this.workerOptions=n.extend({source:this.id,cluster:I.cluster||!1,geojsonVtOptions:{buffer:(I.buffer!==void 0?I.buffer:128)*$,tolerance:(I.tolerance!==void 0?I.tolerance:.375)*$,extent:n.EXTENT,maxZoom:this.maxzoom,lineMetrics:I.lineMetrics||!1,generateId:I.generateId||!1},superclusterOptions:{maxZoom:I.clusterMaxZoom!==void 0?Math.min(I.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,I.clusterMinPoints||2),extent:n.EXTENT,radius:(I.clusterRadius||50)*$,log:!1,generateId:I.generateId||!1},clusterProperties:I.clusterProperties,filter:I.filter},I.workerOptions)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.load=function(){var I=this;this.fire(new n.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(W){if(W){I.fire(new n.ErrorEvent(W));return}var re={dataType:"source",sourceDataType:"metadata"};I._collectResourceTiming&&I._resourceTiming&&I._resourceTiming.length>0&&(re.resourceTiming=I._resourceTiming,I._resourceTiming=[]),I.fire(new n.Event("data",re))})},R.prototype.onAdd=function(I){this.map=I,this.load()},R.prototype.setData=function(I){var W=this;return this._data=I,this.fire(new n.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(re){if(re){W.fire(new n.ErrorEvent(re));return}var $={dataType:"source",sourceDataType:"content"};W._collectResourceTiming&&W._resourceTiming&&W._resourceTiming.length>0&&($.resourceTiming=W._resourceTiming,W._resourceTiming=[]),W.fire(new n.Event("data",$))}),this},R.prototype.getClusterExpansionZoom=function(I,W){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:I,source:this.id},W),this},R.prototype.getClusterChildren=function(I,W){return this.actor.send("geojson.getClusterChildren",{clusterId:I,source:this.id},W),this},R.prototype.getClusterLeaves=function(I,W,re,$){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:I,limit:W,offset:re},$),this},R.prototype._updateWorkerData=function(I){var W=this;this._loaded=!1;var re=n.extend({},this.workerOptions),$=this._data;typeof $=="string"?(re.request=this.map._requestManager.transformRequest(n.browser.resolveURL($),n.ResourceType.Source),re.request.collectResourceTiming=this._collectResourceTiming):re.data=JSON.stringify($),this.actor.send(this.type+".loadData",re,function(ve,Ee){W._removed||Ee&&Ee.abandoned||(W._loaded=!0,Ee&&Ee.resourceTiming&&Ee.resourceTiming[W.id]&&(W._resourceTiming=Ee.resourceTiming[W.id].slice(0)),W.actor.send(W.type+".coalesce",{source:re.source},null),I(ve))})},R.prototype.loaded=function(){return this._loaded},R.prototype.loadTile=function(I,W){var re=this,$=I.actor?"reloadTile":"loadTile";I.actor=this.actor;var ve={type:this.type,uid:I.uid,tileID:I.tileID,zoom:I.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:n.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};I.request=this.actor.send($,ve,function(Ee,Oe){return delete I.request,I.unloadVectorData(),I.aborted?W(null):Ee?W(Ee):(I.loadVectorData(Oe,re.map.painter,$==="reloadTile"),W(null))})},R.prototype.abortTile=function(I){I.request&&(I.request.cancel(),delete I.request),I.aborted=!0},R.prototype.unloadTile=function(I){I.unloadVectorData(),this.actor.send("removeTile",{uid:I.uid,type:this.type,source:this.id})},R.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},R.prototype.serialize=function(){return n.extend({},this._options,{type:this.type,data:this._data})},R.prototype.hasTransition=function(){return!1},R}(n.Evented),fe=n.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),ue=function(H){function R(G,I,W,re){H.call(this),this.id=G,this.dispatcher=W,this.coordinates=I.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(re),this.options=I}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.load=function(I,W){var re=this;this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this.url=this.options.url,n.getImage(this.map._requestManager.transformRequest(this.url,n.ResourceType.Image),function($,ve){re._loaded=!0,$?re.fire(new n.ErrorEvent($)):ve&&(re.image=ve,I&&(re.coordinates=I),W&&W(),re._finishLoading())})},R.prototype.loaded=function(){return this._loaded},R.prototype.updateImage=function(I){var W=this;return!this.image||!I.url?this:(this.options.url=I.url,this.load(I.coordinates,function(){W.texture=null}),this)},R.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})))},R.prototype.onAdd=function(I){this.map=I,this.load()},R.prototype.setCoordinates=function(I){var W=this;this.coordinates=I;var re=I.map(n.MercatorCoordinate.fromLngLat);this.tileID=ee(re),this.minzoom=this.maxzoom=this.tileID.z;var $=re.map(function(ve){return W.tileID.getTilePoint(ve)._round()});return this._boundsArray=new n.StructArrayLayout4i8,this._boundsArray.emplaceBack($[0].x,$[0].y,0,0),this._boundsArray.emplaceBack($[1].x,$[1].y,n.EXTENT,0),this._boundsArray.emplaceBack($[3].x,$[3].y,0,n.EXTENT),this._boundsArray.emplaceBack($[2].x,$[2].y,n.EXTENT,n.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})),this},R.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var I=this.map.painter.context,W=I.gl;this.boundsBuffer||(this.boundsBuffer=I.createVertexBuffer(this._boundsArray,fe.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new n.Texture(I,this.image,W.RGBA),this.texture.bind(W.LINEAR,W.CLAMP_TO_EDGE));for(var re in this.tiles){var $=this.tiles[re];$.state!=="loaded"&&($.state="loaded",$.texture=this.texture)}}},R.prototype.loadTile=function(I,W){this.tileID&&this.tileID.equals(I.tileID.canonical)?(this.tiles[String(I.tileID.wrap)]=I,I.buckets={},W(null)):(I.state="errored",W(null))},R.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},R.prototype.hasTransition=function(){return!1},R}(n.Evented);function ee(H){for(var R=1/0,G=1/0,I=-1/0,W=-1/0,re=0,$=H;re<$.length;re+=1){var ve=$[re];R=Math.min(R,ve.x),G=Math.min(G,ve.y),I=Math.max(I,ve.x),W=Math.max(W,ve.y)}var Ee=I-R,Oe=W-G,pt=Math.max(Ee,Oe),wt=Math.max(0,Math.floor(-Math.log(pt)/Math.LN2)),yt=Math.pow(2,wt);return new n.CanonicalTileID(wt,Math.floor((R+I)/2*yt),Math.floor((G+W)/2*yt))}var Z=function(H){function R(G,I,W,re){H.call(this,G,I,W,re),this.roundZoom=!0,this.type="video",this.options=I}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.load=function(){var I=this;this._loaded=!1;var W=this.options;this.urls=[];for(var re=0,$=W.urls;re<$.length;re+=1){var ve=$[re];this.urls.push(this.map._requestManager.transformRequest(ve,n.ResourceType.Source).url)}n.getVideo(this.urls,function(Ee,Oe){I._loaded=!0,Ee?I.fire(new n.ErrorEvent(Ee)):Oe&&(I.video=Oe,I.video.loop=!0,I.video.addEventListener("playing",function(){I.map.triggerRepaint()}),I.map&&I.video.play(),I._finishLoading())})},R.prototype.pause=function(){this.video&&this.video.pause()},R.prototype.play=function(){this.video&&this.video.play()},R.prototype.seek=function(I){if(this.video){var W=this.video.seekable;I<W.start(0)||I>W.end(0)?this.fire(new n.ErrorEvent(new n.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+W.start(0)+" and "+W.end(0)+"-second mark."))):this.video.currentTime=I}},R.prototype.getVideo=function(){return this.video},R.prototype.onAdd=function(I){this.map||(this.map=I,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},R.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var I=this.map.painter.context,W=I.gl;this.boundsBuffer||(this.boundsBuffer=I.createVertexBuffer(this._boundsArray,fe.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(W.LINEAR,W.CLAMP_TO_EDGE),W.texSubImage2D(W.TEXTURE_2D,0,0,0,W.RGBA,W.UNSIGNED_BYTE,this.video)):(this.texture=new n.Texture(I,this.video,W.RGBA),this.texture.bind(W.LINEAR,W.CLAMP_TO_EDGE));for(var re in this.tiles){var $=this.tiles[re];$.state!=="loaded"&&($.state="loaded",$.texture=this.texture)}}},R.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},R.prototype.hasTransition=function(){return this.video&&!this.video.paused},R}(ue),oe=function(H){function R(G,I,W,re){H.call(this,G,I,W,re),I.coordinates?(!Array.isArray(I.coordinates)||I.coordinates.length!==4||I.coordinates.some(function($){return!Array.isArray($)||$.length!==2||$.some(function(ve){return typeof ve!="number"})}))&&this.fire(new n.ErrorEvent(new n.ValidationError("sources."+G,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new n.ErrorEvent(new n.ValidationError("sources."+G,null,'missing required property "coordinates"'))),I.animate&&typeof I.animate!="boolean"&&this.fire(new n.ErrorEvent(new n.ValidationError("sources."+G,null,'optional "animate" property must be a boolean value'))),I.canvas?typeof I.canvas!="string"&&!(I.canvas instanceof n.window.HTMLCanvasElement)&&this.fire(new n.ErrorEvent(new n.ValidationError("sources."+G,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new n.ErrorEvent(new n.ValidationError("sources."+G,null,'missing required property "canvas"'))),this.options=I,this.animate=I.animate!==void 0?I.animate:!0}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof n.window.HTMLCanvasElement?this.options.canvas:n.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new n.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},R.prototype.getCanvas=function(){return this.canvas},R.prototype.onAdd=function(I){this.map=I,this.load(),this.canvas&&this.animate&&this.play()},R.prototype.onRemove=function(){this.pause()},R.prototype.prepare=function(){var I=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,I=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,I=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var W=this.map.painter.context,re=W.gl;this.boundsBuffer||(this.boundsBuffer=W.createVertexBuffer(this._boundsArray,fe.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(I||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new n.Texture(W,this.canvas,re.RGBA,{premultiply:!0});for(var $ in this.tiles){var ve=this.tiles[$];ve.state!=="loaded"&&(ve.state="loaded",ve.texture=this.texture)}}},R.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},R.prototype.hasTransition=function(){return this._playing},R.prototype._hasInvalidDimensions=function(){for(var I=0,W=[this.canvas.width,this.canvas.height];I<W.length;I+=1){var re=W[I];if(isNaN(re)||re<=0)return!0}return!1},R}(ue),ce={vector:N,raster:X,"raster-dem":K,geojson:ne,video:Z,image:ue,canvas:oe},le=function(H,R,G,I){var W=new ce[R.type](H,R,G,I);if(W.id!==H)throw new Error("Expected Source id to be "+H+" instead of "+W.id);return n.bindAll(["load","abort","unload","serialize","prepare"],W),W},me=function(H){return ce[H]},he=function(H,R){ce[H]=R};function te(H,R){var G=n.identity([]);return n.translate(G,G,[1,1,0]),n.scale(G,G,[H.width*.5,H.height*.5,1]),n.multiply(G,G,H.calculatePosMatrix(R.toUnwrapped()))}function ge(H,R,G){if(H)for(var I=0,W=H;I<W.length;I+=1){var re=W[I],$=R[re];if($&&$.source===G&&$.type==="fill-extrusion")return!0}else for(var ve in R){var Ee=R[ve];if(Ee.source===G&&Ee.type==="fill-extrusion")return!0}return!1}function ae(H,R,G,I,W,re){var $=ge(W&&W.layers,R,H.id),ve=re.maxPitchScaleFactor(),Ee=H.tilesIn(I,ve,$);Ee.sort(qe);for(var Oe=[],pt=0,wt=Ee;pt<wt.length;pt+=1){var yt=wt[pt];Oe.push({wrappedTileID:yt.tileID.wrapped().key,queryResults:yt.tile.queryRenderedFeatures(R,G,H._state,yt.queryGeometry,yt.cameraQueryGeometry,yt.scale,W,re,ve,te(H.transform,yt.tileID))})}var Be=rt(Oe);for(var $e in Be)Be[$e].forEach(function(ft){var Tt=ft.feature,Lt=H.getFeatureState(Tt.layer["source-layer"],Tt.id);Tt.source=Tt.layer.source,Tt.layer["source-layer"]&&(Tt.sourceLayer=Tt.layer["source-layer"]),Tt.state=Lt});return Be}function _e(H,R,G,I,W,re,$){for(var ve={},Ee=re.queryRenderedSymbols(I),Oe=[],pt=0,wt=Object.keys(Ee).map(Number);pt<wt.length;pt+=1){var yt=wt[pt];Oe.push($[yt])}Oe.sort(qe);for(var Be=function(){var Pt=ft[$e],jt=Pt.featureIndex.lookupSymbolFeatures(Ee[Pt.bucketInstanceId],R,Pt.bucketIndex,Pt.sourceLayerIndex,W.filter,W.layers,W.availableImages,H);for(var Nt in jt){var Ft=ve[Nt]=ve[Nt]||[],Kt=jt[Nt];Kt.sort(function(Dr,fn){var Wr=Pt.featureSortOrder;if(Wr){var gn=Wr.indexOf(Dr.featureIndex),si=Wr.indexOf(fn.featureIndex);return si-gn}else return fn.featureIndex-Dr.featureIndex});for(var Ct=0,sr=Kt;Ct<sr.length;Ct+=1){var xr=sr[Ct];Ft.push(xr)}}},$e=0,ft=Oe;$e<ft.length;$e+=1)Be();var Tt=function(Pt){ve[Pt].forEach(function(jt){var Nt=jt.feature,Ft=H[Pt],Kt=G[Ft.source],Ct=Kt.getFeatureState(Nt.layer["source-layer"],Nt.id);Nt.source=Nt.layer.source,Nt.layer["source-layer"]&&(Nt.sourceLayer=Nt.layer["source-layer"]),Nt.state=Ct})};for(var Lt in ve)Tt(Lt);return ve}function Ce(H,R){for(var G=H.getRenderableIds().map(function(Ee){return H.getTileByID(Ee)}),I=[],W={},re=0;re<G.length;re++){var $=G[re],ve=$.tileID.canonical.key;W[ve]||(W[ve]=!0,$.querySourceFeatures(I,R))}return I}function qe(H,R){var G=H.tileID,I=R.tileID;return G.overscaledZ-I.overscaledZ||G.canonical.y-I.canonical.y||G.wrap-I.wrap||G.canonical.x-I.canonical.x}function rt(H){for(var R={},G={},I=0,W=H;I<W.length;I+=1){var re=W[I],$=re.queryResults,ve=re.wrappedTileID,Ee=G[ve]=G[ve]||{};for(var Oe in $)for(var pt=$[Oe],wt=Ee[Oe]=Ee[Oe]||{},yt=R[Oe]=R[Oe]||[],Be=0,$e=pt;Be<$e.length;Be+=1){var ft=$e[Be];wt[ft.featureIndex]||(wt[ft.featureIndex]=!0,yt.push(ft))}}return R}var Re=function(R,G){this.max=R,this.onRemove=G,this.reset()};Re.prototype.reset=function(){for(var R in this.data)for(var G=0,I=this.data[R];G<I.length;G+=1){var W=I[G];W.timeout&&clearTimeout(W.timeout),this.onRemove(W.value)}return this.data={},this.order=[],this},Re.prototype.add=function(R,G,I){var W=this,re=R.wrapped().key;this.data[re]===void 0&&(this.data[re]=[]);var $={value:G,timeout:void 0};if(I!==void 0&&($.timeout=setTimeout(function(){W.remove(R,$)},I)),this.data[re].push($),this.order.push(re),this.order.length>this.max){var ve=this._getAndRemoveByKey(this.order[0]);ve&&this.onRemove(ve)}return this},Re.prototype.has=function(R){return R.wrapped().key in this.data},Re.prototype.getAndRemove=function(R){return this.has(R)?this._getAndRemoveByKey(R.wrapped().key):null},Re.prototype._getAndRemoveByKey=function(R){var G=this.data[R].shift();return G.timeout&&clearTimeout(G.timeout),this.data[R].length===0&&delete this.data[R],this.order.splice(this.order.indexOf(R),1),G.value},Re.prototype.getByKey=function(R){var G=this.data[R];return G?G[0].value:null},Re.prototype.get=function(R){if(!this.has(R))return null;var G=this.data[R.wrapped().key][0];return G.value},Re.prototype.remove=function(R,G){if(!this.has(R))return this;var I=R.wrapped().key,W=G===void 0?0:this.data[I].indexOf(G),re=this.data[I][W];return this.data[I].splice(W,1),re.timeout&&clearTimeout(re.timeout),this.data[I].length===0&&delete this.data[I],this.onRemove(re.value),this.order.splice(this.order.indexOf(I),1),this},Re.prototype.setMaxSize=function(R){for(this.max=R;this.order.length>this.max;){var G=this._getAndRemoveByKey(this.order[0]);G&&this.onRemove(G)}return this},Re.prototype.filter=function(R){var G=[];for(var I in this.data)for(var W=0,re=this.data[I];W<re.length;W+=1){var $=re[W];R($.value)||G.push($)}for(var ve=0,Ee=G;ve<Ee.length;ve+=1){var Oe=Ee[ve];this.remove(Oe.value.tileID,Oe)}};var Ie=function(R,G,I){this.context=R;var W=R.gl;this.buffer=W.createBuffer(),this.dynamicDraw=!!I,this.context.unbindVAO(),R.bindElementBuffer.set(this.buffer),W.bufferData(W.ELEMENT_ARRAY_BUFFER,G.arrayBuffer,this.dynamicDraw?W.DYNAMIC_DRAW:W.STATIC_DRAW),this.dynamicDraw||delete G.arrayBuffer};Ie.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Ie.prototype.updateData=function(R){var G=this.context.gl;this.context.unbindVAO(),this.bind(),G.bufferSubData(G.ELEMENT_ARRAY_BUFFER,0,R.arrayBuffer)},Ie.prototype.destroy=function(){var R=this.context.gl;this.buffer&&(R.deleteBuffer(this.buffer),delete this.buffer)};var ot={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},lt=function(R,G,I,W){this.length=G.length,this.attributes=I,this.itemSize=G.bytesPerElement,this.dynamicDraw=W,this.context=R;var re=R.gl;this.buffer=re.createBuffer(),R.bindVertexBuffer.set(this.buffer),re.bufferData(re.ARRAY_BUFFER,G.arrayBuffer,this.dynamicDraw?re.DYNAMIC_DRAW:re.STATIC_DRAW),this.dynamicDraw||delete G.arrayBuffer};lt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},lt.prototype.updateData=function(R){var G=this.context.gl;this.bind(),G.bufferSubData(G.ARRAY_BUFFER,0,R.arrayBuffer)},lt.prototype.enableAttributes=function(R,G){for(var I=0;I<this.attributes.length;I++){var W=this.attributes[I],re=G.attributes[W.name];re!==void 0&&R.enableVertexAttribArray(re)}},lt.prototype.setVertexAttribPointers=function(R,G,I){for(var W=0;W<this.attributes.length;W++){var re=this.attributes[W],$=G.attributes[re.name];$!==void 0&&R.vertexAttribPointer($,re.components,R[ot[re.type]],!1,this.itemSize,re.offset+this.itemSize*(I||0))}},lt.prototype.destroy=function(){var R=this.context.gl;this.buffer&&(R.deleteBuffer(this.buffer),delete this.buffer)};var ht=function(R){this.gl=R.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ht.prototype.get=function(){return this.current},ht.prototype.set=function(R){},ht.prototype.getDefault=function(){return this.default},ht.prototype.setDefault=function(){this.set(this.default)};var xt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return n.Color.transparent},R.prototype.set=function(I){var W=this.current;I.r===W.r&&I.g===W.g&&I.b===W.b&&I.a===W.a&&!this.dirty||(this.gl.clearColor(I.r,I.g,I.b,I.a),this.current=I,this.dirty=!1)},R}(ht),Vt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return 1},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.clearDepth(I),this.current=I,this.dirty=!1)},R}(ht),Ht=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return 0},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.clearStencil(I),this.current=I,this.dirty=!1)},R}(ht),Me=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return[!0,!0,!0,!0]},R.prototype.set=function(I){var W=this.current;I[0]===W[0]&&I[1]===W[1]&&I[2]===W[2]&&I[3]===W[3]&&!this.dirty||(this.gl.colorMask(I[0],I[1],I[2],I[3]),this.current=I,this.dirty=!1)},R}(ht),Ke=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!0},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.depthMask(I),this.current=I,this.dirty=!1)},R}(ht),We=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return 255},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.stencilMask(I),this.current=I,this.dirty=!1)},R}(ht),et=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},R.prototype.set=function(I){var W=this.current;I.func===W.func&&I.ref===W.ref&&I.mask===W.mask&&!this.dirty||(this.gl.stencilFunc(I.func,I.ref,I.mask),this.current=I,this.dirty=!1)},R}(ht),vt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){var I=this.gl;return[I.KEEP,I.KEEP,I.KEEP]},R.prototype.set=function(I){var W=this.current;I[0]===W[0]&&I[1]===W[1]&&I[2]===W[2]&&!this.dirty||(this.gl.stencilOp(I[0],I[1],I[2]),this.current=I,this.dirty=!1)},R}(ht),at=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;I?W.enable(W.STENCIL_TEST):W.disable(W.STENCIL_TEST),this.current=I,this.dirty=!1}},R}(ht),Xe=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return[0,1]},R.prototype.set=function(I){var W=this.current;I[0]===W[0]&&I[1]===W[1]&&!this.dirty||(this.gl.depthRange(I[0],I[1]),this.current=I,this.dirty=!1)},R}(ht),dt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;I?W.enable(W.DEPTH_TEST):W.disable(W.DEPTH_TEST),this.current=I,this.dirty=!1}},R}(ht),_t=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return this.gl.LESS},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.depthFunc(I),this.current=I,this.dirty=!1)},R}(ht),$t=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;I?W.enable(W.BLEND):W.disable(W.BLEND),this.current=I,this.dirty=!1}},R}(ht),Ut=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){var I=this.gl;return[I.ONE,I.ZERO]},R.prototype.set=function(I){var W=this.current;I[0]===W[0]&&I[1]===W[1]&&!this.dirty||(this.gl.blendFunc(I[0],I[1]),this.current=I,this.dirty=!1)},R}(ht),fr=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return n.Color.transparent},R.prototype.set=function(I){var W=this.current;I.r===W.r&&I.g===W.g&&I.b===W.b&&I.a===W.a&&!this.dirty||(this.gl.blendColor(I.r,I.g,I.b,I.a),this.current=I,this.dirty=!1)},R}(ht),ar=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return this.gl.FUNC_ADD},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.blendEquation(I),this.current=I,this.dirty=!1)},R}(ht),cr=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;I?W.enable(W.CULL_FACE):W.disable(W.CULL_FACE),this.current=I,this.dirty=!1}},R}(ht),It=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return this.gl.BACK},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.cullFace(I),this.current=I,this.dirty=!1)},R}(ht),gt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return this.gl.CCW},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.frontFace(I),this.current=I,this.dirty=!1)},R}(ht),kt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.useProgram(I),this.current=I,this.dirty=!1)},R}(ht),Je=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return this.gl.TEXTURE0},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.activeTexture(I),this.current=I,this.dirty=!1)},R}(ht),Ze=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){var I=this.gl;return[0,0,I.drawingBufferWidth,I.drawingBufferHeight]},R.prototype.set=function(I){var W=this.current;I[0]===W[0]&&I[1]===W[1]&&I[2]===W[2]&&I[3]===W[3]&&!this.dirty||(this.gl.viewport(I[0],I[1],I[2],I[3]),this.current=I,this.dirty=!1)},R}(ht),At=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;W.bindFramebuffer(W.FRAMEBUFFER,I),this.current=I,this.dirty=!1}},R}(ht),Se=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;W.bindRenderbuffer(W.RENDERBUFFER,I),this.current=I,this.dirty=!1}},R}(ht),pe=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;W.bindTexture(W.TEXTURE_2D,I),this.current=I,this.dirty=!1}},R}(ht),Te=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;W.bindBuffer(W.ARRAY_BUFFER,I),this.current=I,this.dirty=!1}},R}(ht),it=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(I){var W=this.gl;W.bindBuffer(W.ELEMENT_ARRAY_BUFFER,I),this.current=I,this.dirty=!1},R}(ht),Dt=function(H){function R(G){H.call(this,G),this.vao=G.extVertexArrayObject}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(I){!this.vao||I===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(I),this.current=I,this.dirty=!1)},R}(ht),Wt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return 4},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;W.pixelStorei(W.UNPACK_ALIGNMENT,I),this.current=I,this.dirty=!1}},R}(ht),er=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I),this.current=I,this.dirty=!1}},R}(ht),qr=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,I),this.current=I,this.dirty=!1}},R}(ht),Vr=function(H){function R(G,I){H.call(this,G),this.context=G,this.parent=I}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R}(ht),mr=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.setDirty=function(){this.dirty=!0},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var W=this.gl;W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,I,0),this.current=I,this.dirty=!1}},R}(Vr),Fr=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var W=this.gl;W.framebufferRenderbuffer(W.FRAMEBUFFER,W.DEPTH_ATTACHMENT,W.RENDERBUFFER,I),this.current=I,this.dirty=!1}},R}(Vr),nn=function(R,G,I,W){this.context=R,this.width=G,this.height=I;var re=R.gl,$=this.framebuffer=re.createFramebuffer();this.colorAttachment=new mr(R,$),W&&(this.depthAttachment=new Fr(R,$))};nn.prototype.destroy=function(){var R=this.context.gl,G=this.colorAttachment.get();if(G&&R.deleteTexture(G),this.depthAttachment){var I=this.depthAttachment.get();I&&R.deleteRenderbuffer(I)}R.deleteFramebuffer(this.framebuffer)};var jn=519,xn=function(R,G,I){this.func=R,this.mask=G,this.range=I};xn.ReadOnly=!1,xn.ReadWrite=!0,xn.disabled=new xn(jn,xn.ReadOnly,[0,1]);var pn=519,ki=7680,qn=function(R,G,I,W,re,$){this.test=R,this.ref=G,this.mask=I,this.fail=W,this.depthFail=re,this.pass=$};qn.disabled=new qn({func:pn,mask:0},0,0,ki,ki,ki);var bi=0,Si=1,nt=771,ze=function(R,G,I){this.blendFunction=R,this.blendColor=G,this.mask=I};ze.Replace=[Si,bi],ze.disabled=new ze(ze.Replace,n.Color.transparent,[!1,!1,!1,!1]),ze.unblended=new ze(ze.Replace,n.Color.transparent,[!0,!0,!0,!0]),ze.alphaBlended=new ze([Si,nt],n.Color.transparent,[!0,!0,!0,!0]);var ut=1029,mt=2305,Ot=function(R,G,I){this.enable=R,this.mode=G,this.frontFace=I};Ot.disabled=new Ot(!1,ut,mt),Ot.backCCW=new Ot(!0,ut,mt);var nr=function(R){this.gl=R,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new xt(this),this.clearDepth=new Vt(this),this.clearStencil=new Ht(this),this.colorMask=new Me(this),this.depthMask=new Ke(this),this.stencilMask=new We(this),this.stencilFunc=new et(this),this.stencilOp=new vt(this),this.stencilTest=new at(this),this.depthRange=new Xe(this),this.depthTest=new dt(this),this.depthFunc=new _t(this),this.blend=new $t(this),this.blendFunc=new Ut(this),this.blendColor=new fr(this),this.blendEquation=new ar(this),this.cullFace=new cr(this),this.cullFaceSide=new It(this),this.frontFace=new gt(this),this.program=new kt(this),this.activeTexture=new Je(this),this.viewport=new Ze(this),this.bindFramebuffer=new At(this),this.bindRenderbuffer=new Se(this),this.bindTexture=new pe(this),this.bindVertexBuffer=new Te(this),this.bindElementBuffer=new it(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Dt(this),this.pixelStoreUnpack=new Wt(this),this.pixelStoreUnpackPremultiplyAlpha=new er(this),this.pixelStoreUnpackFlipY=new qr(this),this.extTextureFilterAnisotropic=R.getExtension("EXT_texture_filter_anisotropic")||R.getExtension("MOZ_EXT_texture_filter_anisotropic")||R.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=R.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=R.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(R.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=R.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=R.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=R.getParameter(R.MAX_TEXTURE_SIZE)};nr.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},nr.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},nr.prototype.createIndexBuffer=function(R,G){return new Ie(this,R,G)},nr.prototype.createVertexBuffer=function(R,G,I){return new lt(this,R,G,I)},nr.prototype.createRenderbuffer=function(R,G,I){var W=this.gl,re=W.createRenderbuffer();return this.bindRenderbuffer.set(re),W.renderbufferStorage(W.RENDERBUFFER,R,G,I),this.bindRenderbuffer.set(null),re},nr.prototype.createFramebuffer=function(R,G,I){return new nn(this,R,G,I)},nr.prototype.clear=function(R){var G=R.color,I=R.depth,W=this.gl,re=0;G&&(re|=W.COLOR_BUFFER_BIT,this.clearColor.set(G),this.colorMask.set([!0,!0,!0,!0])),typeof I!="undefined"&&(re|=W.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(I),this.depthMask.set(!0)),W.clear(re)},nr.prototype.setCullFace=function(R){R.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(R.mode),this.frontFace.set(R.frontFace))},nr.prototype.setDepthMode=function(R){R.func===this.gl.ALWAYS&&!R.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(R.func),this.depthMask.set(R.mask),this.depthRange.set(R.range))},nr.prototype.setStencilMode=function(R){R.test.func===this.gl.ALWAYS&&!R.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(R.mask),this.stencilOp.set([R.fail,R.depthFail,R.pass]),this.stencilFunc.set({func:R.test.func,ref:R.ref,mask:R.test.mask}))},nr.prototype.setColorMode=function(R){n.deepEqual(R.blendFunction,ze.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(R.blendFunction),this.blendColor.set(R.blendColor)),this.colorMask.set(R.mask)},nr.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var yr=function(H){function R(G,I,W){var re=this;H.call(this),this.id=G,this.dispatcher=W,this.on("data",function($){$.dataType==="source"&&$.sourceDataType==="metadata"&&(re._sourceLoaded=!0),re._sourceLoaded&&!re._paused&&$.dataType==="source"&&$.sourceDataType==="content"&&(re.reload(),re.transform&&re.update(re.transform))}),this.on("error",function(){re._sourceErrored=!0}),this._source=le(G,I,W,this),this._tiles={},this._cache=new Re(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new n.SourceFeatureState}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.onAdd=function(I){this.map=I,this._maxTileCacheSize=I?I._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(I)},R.prototype.onRemove=function(I){this._source&&this._source.onRemove&&this._source.onRemove(I)},R.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var I in this._tiles){var W=this._tiles[I];if(W.state!=="loaded"&&W.state!=="errored")return!1}return!0},R.prototype.getSource=function(){return this._source},R.prototype.pause=function(){this._paused=!0},R.prototype.resume=function(){if(this._paused){var I=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,I&&this.reload(),this.transform&&this.update(this.transform)}},R.prototype._loadTile=function(I,W){return this._source.loadTile(I,W)},R.prototype._unloadTile=function(I){if(this._source.unloadTile)return this._source.unloadTile(I,function(){})},R.prototype._abortTile=function(I){if(this._source.abortTile)return this._source.abortTile(I,function(){})},R.prototype.serialize=function(){return this._source.serialize()},R.prototype.prepare=function(I){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var W in this._tiles){var re=this._tiles[W];re.upload(I),re.prepare(this.map.style.imageManager)}},R.prototype.getIds=function(){return n.values(this._tiles).map(function(I){return I.tileID}).sort(vr).map(function(I){return I.key})},R.prototype.getRenderableIds=function(I){var W=this,re=[];for(var $ in this._tiles)this._isIdRenderable($,I)&&re.push(this._tiles[$]);return I?re.sort(function(ve,Ee){var Oe=ve.tileID,pt=Ee.tileID,wt=new n.Point(Oe.canonical.x,Oe.canonical.y)._rotate(W.transform.angle),yt=new n.Point(pt.canonical.x,pt.canonical.y)._rotate(W.transform.angle);return Oe.overscaledZ-pt.overscaledZ||yt.y-wt.y||yt.x-wt.x}).map(function(ve){return ve.tileID.key}):re.map(function(ve){return ve.tileID}).sort(vr).map(function(ve){return ve.key})},R.prototype.hasRenderableParent=function(I){var W=this.findLoadedParent(I,0);return W?this._isIdRenderable(W.tileID.key):!1},R.prototype._isIdRenderable=function(I,W){return this._tiles[I]&&this._tiles[I].hasData()&&!this._coveredTiles[I]&&(W||!this._tiles[I].holdingForFade())},R.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var I in this._tiles)this._tiles[I].state!=="errored"&&this._reloadTile(I,"reloading")},R.prototype._reloadTile=function(I,W){var re=this._tiles[I];re&&(re.state!=="loading"&&(re.state=W),this._loadTile(re,this._tileLoaded.bind(this,re,I,W)))},R.prototype._tileLoaded=function(I,W,re,$){if($){I.state="errored",$.status!==404?this._source.fire(new n.ErrorEvent($,{tile:I})):this.update(this.transform);return}I.timeAdded=n.browser.now(),re==="expired"&&(I.refreshedUponExpiration=!0),this._setTileReloadTimer(W,I),this.getSource().type==="raster-dem"&&I.dem&&this._backfillDEM(I),this._state.initializeTileState(I,this.map?this.map.painter:null),this._source.fire(new n.Event("data",{dataType:"source",tile:I,coord:I.tileID}))},R.prototype._backfillDEM=function(I){for(var W=this.getRenderableIds(),re=0;re<W.length;re++){var $=W[re];if(I.neighboringTiles&&I.neighboringTiles[$]){var ve=this.getTileByID($);Ee(I,ve),Ee(ve,I)}}function Ee(Oe,pt){Oe.needsHillshadePrepare=!0;var wt=pt.tileID.canonical.x-Oe.tileID.canonical.x,yt=pt.tileID.canonical.y-Oe.tileID.canonical.y,Be=Math.pow(2,Oe.tileID.canonical.z),$e=pt.tileID.key;wt===0&&yt===0||Math.abs(yt)>1||(Math.abs(wt)>1&&(Math.abs(wt+Be)===1?wt+=Be:Math.abs(wt-Be)===1&&(wt-=Be)),!(!pt.dem||!Oe.dem)&&(Oe.dem.backfillBorder(pt.dem,wt,yt),Oe.neighboringTiles&&Oe.neighboringTiles[$e]&&(Oe.neighboringTiles[$e].backfilled=!0)))}},R.prototype.getTile=function(I){return this.getTileByID(I.key)},R.prototype.getTileByID=function(I){return this._tiles[I]},R.prototype._retainLoadedChildren=function(I,W,re,$){for(var ve in this._tiles){var Ee=this._tiles[ve];if(!($[ve]||!Ee.hasData()||Ee.tileID.overscaledZ<=W||Ee.tileID.overscaledZ>re)){for(var Oe=Ee.tileID;Ee&&Ee.tileID.overscaledZ>W+1;){var pt=Ee.tileID.scaledTo(Ee.tileID.overscaledZ-1);Ee=this._tiles[pt.key],Ee&&Ee.hasData()&&(Oe=pt)}for(var wt=Oe;wt.overscaledZ>W;)if(wt=wt.scaledTo(wt.overscaledZ-1),I[wt.key]){$[Oe.key]=Oe;break}}}},R.prototype.findLoadedParent=function(I,W){if(I.key in this._loadedParentTiles){var re=this._loadedParentTiles[I.key];return re&&re.tileID.overscaledZ>=W?re:null}for(var $=I.overscaledZ-1;$>=W;$--){var ve=I.scaledTo($),Ee=this._getLoadedTile(ve);if(Ee)return Ee}},R.prototype._getLoadedTile=function(I){var W=this._tiles[I.key];if(W&&W.hasData())return W;var re=this._cache.getByKey(I.wrapped().key);return re},R.prototype.updateCacheSize=function(I){var W=Math.ceil(I.width/this._source.tileSize)+1,re=Math.ceil(I.height/this._source.tileSize)+1,$=W*re,ve=5,Ee=Math.floor($*ve),Oe=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,Ee):Ee;this._cache.setMaxSize(Oe)},R.prototype.handleWrapJump=function(I){var W=this._prevLng===void 0?I:this._prevLng,re=I-W,$=re/360,ve=Math.round($);if(this._prevLng=I,ve){var Ee={};for(var Oe in this._tiles){var pt=this._tiles[Oe];pt.tileID=pt.tileID.unwrapTo(pt.tileID.wrap+ve),Ee[pt.tileID.key]=pt}this._tiles=Ee;for(var wt in this._timers)clearTimeout(this._timers[wt]),delete this._timers[wt];for(var yt in this._tiles){var Be=this._tiles[yt];this._setTileReloadTimer(yt,Be)}}},R.prototype.update=function(I){var W=this;if(this.transform=I,!(!this._sourceLoaded||this._paused)){this.updateCacheSize(I),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var re;this.used?this._source.tileID?re=I.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Dr){return new n.OverscaledTileID(Dr.canonical.z,Dr.wrap,Dr.canonical.z,Dr.canonical.x,Dr.canonical.y)}):(re=I.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(re=re.filter(function(Dr){return W._source.hasTile(Dr)}))):re=[];var $=I.coveringZoomLevel(this._source),ve=Math.max($-R.maxOverzooming,this._source.minzoom),Ee=Math.max($+R.maxUnderzooming,this._source.minzoom),Oe=this._updateRetainedTiles(re,$);if(Rr(this._source.type)){for(var pt={},wt={},yt=Object.keys(Oe),Be=0,$e=yt;Be<$e.length;Be+=1){var ft=$e[Be],Tt=Oe[ft],Lt=this._tiles[ft];if(!(!Lt||Lt.fadeEndTime&&Lt.fadeEndTime<=n.browser.now())){var Pt=this.findLoadedParent(Tt,ve);Pt&&(this._addTile(Pt.tileID),pt[Pt.tileID.key]=Pt.tileID),wt[ft]=Tt}}this._retainLoadedChildren(wt,$,Ee,Oe);for(var jt in pt)Oe[jt]||(this._coveredTiles[jt]=!0,Oe[jt]=pt[jt])}for(var Nt in Oe)this._tiles[Nt].clearFadeHold();for(var Ft=n.keysDifference(this._tiles,Oe),Kt=0,Ct=Ft;Kt<Ct.length;Kt+=1){var sr=Ct[Kt],xr=this._tiles[sr];xr.hasSymbolBuckets&&!xr.holdingForFade()?xr.setHoldDuration(this.map._fadeDuration):(!xr.hasSymbolBuckets||xr.symbolFadeFinished())&&this._removeTile(sr)}this._updateLoadedParentTileCache()}},R.prototype.releaseSymbolFadeTiles=function(){for(var I in this._tiles)this._tiles[I].holdingForFade()&&this._removeTile(I)},R.prototype._updateRetainedTiles=function(I,W){for(var re={},$={},ve=Math.max(W-R.maxOverzooming,this._source.minzoom),Ee=Math.max(W+R.maxUnderzooming,this._source.minzoom),Oe={},pt=0,wt=I;pt<wt.length;pt+=1){var yt=wt[pt],Be=this._addTile(yt);re[yt.key]=yt,!Be.hasData()&&W<this._source.maxzoom&&(Oe[yt.key]=yt)}this._retainLoadedChildren(Oe,W,Ee,re);for(var $e=0,ft=I;$e<ft.length;$e+=1){var Tt=ft[$e],Lt=this._tiles[Tt.key];if(!Lt.hasData()){if(W+1>this._source.maxzoom){var Pt=Tt.children(this._source.maxzoom)[0],jt=this.getTile(Pt);if(jt&&jt.hasData()){re[Pt.key]=Pt;continue}}else{var Nt=Tt.children(this._source.maxzoom);if(re[Nt[0].key]&&re[Nt[1].key]&&re[Nt[2].key]&&re[Nt[3].key])continue}for(var Ft=Lt.wasRequested(),Kt=Tt.overscaledZ-1;Kt>=ve;--Kt){var Ct=Tt.scaledTo(Kt);if($[Ct.key]||($[Ct.key]=!0,Lt=this.getTile(Ct),!Lt&&Ft&&(Lt=this._addTile(Ct)),Lt&&(re[Ct.key]=Ct,Ft=Lt.wasRequested(),Lt.hasData())))break}}}return re},R.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var I in this._tiles){for(var W=[],re=void 0,$=this._tiles[I].tileID;$.overscaledZ>0;){if($.key in this._loadedParentTiles){re=this._loadedParentTiles[$.key];break}W.push($.key);var ve=$.scaledTo($.overscaledZ-1);if(re=this._getLoadedTile(ve),re)break;$=ve}for(var Ee=0,Oe=W;Ee<Oe.length;Ee+=1){var pt=Oe[Ee];this._loadedParentTiles[pt]=re}}},R.prototype._addTile=function(I){var W=this._tiles[I.key];if(W)return W;W=this._cache.getAndRemove(I),W&&(this._setTileReloadTimer(I.key,W),W.tileID=I,this._state.initializeTileState(W,this.map?this.map.painter:null),this._cacheTimers[I.key]&&(clearTimeout(this._cacheTimers[I.key]),delete this._cacheTimers[I.key],this._setTileReloadTimer(I.key,W)));var re=!!W;return re||(W=new n.Tile(I,this._source.tileSize*I.overscaleFactor()),this._loadTile(W,this._tileLoaded.bind(this,W,I.key,W.state))),W?(W.uses++,this._tiles[I.key]=W,re||this._source.fire(new n.Event("dataloading",{tile:W,coord:W.tileID,dataType:"source"})),W):null},R.prototype._setTileReloadTimer=function(I,W){var re=this;I in this._timers&&(clearTimeout(this._timers[I]),delete this._timers[I]);var $=W.getExpiryTimeout();$&&(this._timers[I]=setTimeout(function(){re._reloadTile(I,"expired"),delete re._timers[I]},$))},R.prototype._removeTile=function(I){var W=this._tiles[I];W&&(W.uses--,delete this._tiles[I],this._timers[I]&&(clearTimeout(this._timers[I]),delete this._timers[I]),!(W.uses>0)&&(W.hasData()&&W.state!=="reloading"?this._cache.add(W.tileID,W,W.getExpiryTimeout()):(W.aborted=!0,this._abortTile(W),this._unloadTile(W))))},R.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var I in this._tiles)this._removeTile(I);this._cache.reset()},R.prototype.tilesIn=function(I,W,re){var $=this,ve=[],Ee=this.transform;if(!Ee)return ve;for(var Oe=re?Ee.getCameraQueryGeometry(I):I,pt=I.map(function(Kt){return Ee.pointCoordinate(Kt)}),wt=Oe.map(function(Kt){return Ee.pointCoordinate(Kt)}),yt=this.getIds(),Be=1/0,$e=1/0,ft=-1/0,Tt=-1/0,Lt=0,Pt=wt;Lt<Pt.length;Lt+=1){var jt=Pt[Lt];Be=Math.min(Be,jt.x),$e=Math.min($e,jt.y),ft=Math.max(ft,jt.x),Tt=Math.max(Tt,jt.y)}for(var Nt=function(Kt){var Ct=$._tiles[yt[Kt]];if(!Ct.holdingForFade()){var sr=Ct.tileID,xr=Math.pow(2,Ee.zoom-Ct.tileID.overscaledZ),Dr=W*Ct.queryPadding*n.EXTENT/Ct.tileSize/xr,fn=[sr.getTilePoint(new n.MercatorCoordinate(Be,$e)),sr.getTilePoint(new n.MercatorCoordinate(ft,Tt))];if(fn[0].x-Dr<n.EXTENT&&fn[0].y-Dr<n.EXTENT&&fn[1].x+Dr>=0&&fn[1].y+Dr>=0){var Wr=pt.map(function(si){return sr.getTilePoint(si)}),gn=wt.map(function(si){return sr.getTilePoint(si)});ve.push({tile:Ct,tileID:sr,queryGeometry:Wr,cameraQueryGeometry:gn,scale:xr})}}},Ft=0;Ft<yt.length;Ft++)Nt(Ft);return ve},R.prototype.getVisibleCoordinates=function(I){for(var W=this,re=this.getRenderableIds(I).map(function(Oe){return W._tiles[Oe].tileID}),$=0,ve=re;$<ve.length;$+=1){var Ee=ve[$];Ee.posMatrix=this.transform.calculatePosMatrix(Ee.toUnwrapped())}return re},R.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Rr(this._source.type))for(var I in this._tiles){var W=this._tiles[I];if(W.fadeEndTime!==void 0&&W.fadeEndTime>=n.browser.now())return!0}return!1},R.prototype.setFeatureState=function(I,W,re){I=I||"_geojsonTileLayer",this._state.updateState(I,W,re)},R.prototype.removeFeatureState=function(I,W,re){I=I||"_geojsonTileLayer",this._state.removeFeatureState(I,W,re)},R.prototype.getFeatureState=function(I,W){return I=I||"_geojsonTileLayer",this._state.getState(I,W)},R.prototype.setDependencies=function(I,W,re){var $=this._tiles[I];$&&$.setDependencies(W,re)},R.prototype.reloadTilesForDependencies=function(I,W){for(var re in this._tiles){var $=this._tiles[re];$.hasDependency(I,W)&&this._reloadTile(re,"reloading")}this._cache.filter(function(ve){return!ve.hasDependency(I,W)})},R}(n.Evented);yr.maxOverzooming=10,yr.maxUnderzooming=3;function vr(H,R){var G=Math.abs(H.wrap*2)-+(H.wrap<0),I=Math.abs(R.wrap*2)-+(R.wrap<0);return H.overscaledZ-R.overscaledZ||I-G||R.canonical.y-H.canonical.y||R.canonical.x-H.canonical.x}function Rr(H){return H==="raster"||H==="image"||H==="video"}function Gr(){return new n.window.Worker(Qa.workerUrl)}var Yr="mapboxgl_preloaded_worker_pool",Xr=function(){this.active={}};Xr.prototype.acquire=function(R){if(!this.workers)for(this.workers=[];this.workers.length<Xr.workerCount;)this.workers.push(new Gr);return this.active[R]=!0,this.workers.slice()},Xr.prototype.release=function(R){delete this.active[R],this.numActive()===0&&(this.workers.forEach(function(G){G.terminate()}),this.workers=null)},Xr.prototype.isPreloaded=function(){return!!this.active[Yr]},Xr.prototype.numActive=function(){return Object.keys(this.active).length};var on=Math.floor(n.browser.hardwareConcurrency/2);Xr.workerCount=Math.max(Math.min(on,6),1);var wn;function Vi(){return wn||(wn=new Xr),wn}function vi(){var H=Vi();H.acquire(Yr)}function Zi(){var H=wn;H&&(H.isPreloaded()&&H.numActive()===1?(H.release(Yr),wn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function Xi(H,R){var G={};for(var I in H)I!=="ref"&&(G[I]=H[I]);return n.refProperties.forEach(function(W){W in R&&(G[W]=R[W])}),G}function ta(H){H=H.slice();for(var R=Object.create(null),G=0;G<H.length;G++)R[H[G].id]=H[G];for(var I=0;I<H.length;I++)"ref"in H[I]&&(H[I]=Xi(H[I],R[H[I].ref]));return H}function Ya(){var H={},R=n.styleSpec.$version;for(var G in n.styleSpec.$root){var I=n.styleSpec.$root[G];if(I.required){var W=null;G==="version"?W=R:I.type==="array"?W=[]:W={},W!=null&&(H[G]=W)}}return H}var Pi={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Bn(H,R,G){G.push({command:Pi.addSource,args:[H,R[H]]})}function Qi(H,R,G){R.push({command:Pi.removeSource,args:[H]}),G[H]=!0}function ya(H,R,G,I){Qi(H,G,I),Bn(H,R,G)}function Nn(H,R,G){var I;for(I in H[G])if(H[G].hasOwnProperty(I)&&I!=="data"&&!n.deepEqual(H[G][I],R[G][I]))return!1;for(I in R[G])if(R[G].hasOwnProperty(I)&&I!=="data"&&!n.deepEqual(H[G][I],R[G][I]))return!1;return!0}function je(H,R,G,I){H=H||{},R=R||{};var W;for(W in H)H.hasOwnProperty(W)&&(R.hasOwnProperty(W)||Qi(W,G,I));for(W in R)R.hasOwnProperty(W)&&(H.hasOwnProperty(W)?n.deepEqual(H[W],R[W])||(H[W].type==="geojson"&&R[W].type==="geojson"&&Nn(H,R,W)?G.push({command:Pi.setGeoJSONSourceData,args:[W,R[W].data]}):ya(W,R,G,I)):Bn(W,R,G))}function Bt(H,R,G,I,W,re){H=H||{},R=R||{};var $;for($ in H)H.hasOwnProperty($)&&(n.deepEqual(H[$],R[$])||G.push({command:re,args:[I,$,R[$],W]}));for($ in R)!R.hasOwnProperty($)||H.hasOwnProperty($)||n.deepEqual(H[$],R[$])||G.push({command:re,args:[I,$,R[$],W]})}function ur(H){return H.id}function br(H,R){return H[R.id]=R,H}function Jr(H,R,G){H=H||[],R=R||[];var I=H.map(ur),W=R.map(ur),re=H.reduce(br,{}),$=R.reduce(br,{}),ve=I.slice(),Ee=Object.create(null),Oe,pt,wt,yt,Be,$e,ft;for(Oe=0,pt=0;Oe<I.length;Oe++)wt=I[Oe],$.hasOwnProperty(wt)?pt++:(G.push({command:Pi.removeLayer,args:[wt]}),ve.splice(ve.indexOf(wt,pt),1));for(Oe=0,pt=0;Oe<W.length;Oe++)wt=W[W.length-1-Oe],ve[ve.length-1-Oe]!==wt&&(re.hasOwnProperty(wt)?(G.push({command:Pi.removeLayer,args:[wt]}),ve.splice(ve.lastIndexOf(wt,ve.length-pt),1)):pt++,$e=ve[ve.length-Oe],G.push({command:Pi.addLayer,args:[$[wt],$e]}),ve.splice(ve.length-Oe,0,wt),Ee[wt]=!0);for(Oe=0;Oe<W.length;Oe++)if(wt=W[Oe],yt=re[wt],Be=$[wt],!(Ee[wt]||n.deepEqual(yt,Be))){if(!n.deepEqual(yt.source,Be.source)||!n.deepEqual(yt["source-layer"],Be["source-layer"])||!n.deepEqual(yt.type,Be.type)){G.push({command:Pi.removeLayer,args:[wt]}),$e=ve[ve.lastIndexOf(wt)+1],G.push({command:Pi.addLayer,args:[Be,$e]});continue}Bt(yt.layout,Be.layout,G,wt,null,Pi.setLayoutProperty),Bt(yt.paint,Be.paint,G,wt,null,Pi.setPaintProperty),n.deepEqual(yt.filter,Be.filter)||G.push({command:Pi.setFilter,args:[wt,Be.filter]}),(!n.deepEqual(yt.minzoom,Be.minzoom)||!n.deepEqual(yt.maxzoom,Be.maxzoom))&&G.push({command:Pi.setLayerZoomRange,args:[wt,Be.minzoom,Be.maxzoom]});for(ft in yt)yt.hasOwnProperty(ft)&&(ft==="layout"||ft==="paint"||ft==="filter"||ft==="metadata"||ft==="minzoom"||ft==="maxzoom"||(ft.indexOf("paint.")===0?Bt(yt[ft],Be[ft],G,wt,ft.slice(6),Pi.setPaintProperty):n.deepEqual(yt[ft],Be[ft])||G.push({command:Pi.setLayerProperty,args:[wt,ft,Be[ft]]})));for(ft in Be)!Be.hasOwnProperty(ft)||yt.hasOwnProperty(ft)||ft==="layout"||ft==="paint"||ft==="filter"||ft==="metadata"||ft==="minzoom"||ft==="maxzoom"||(ft.indexOf("paint.")===0?Bt(yt[ft],Be[ft],G,wt,ft.slice(6),Pi.setPaintProperty):n.deepEqual(yt[ft],Be[ft])||G.push({command:Pi.setLayerProperty,args:[wt,ft,Be[ft]]}))}}function ln(H,R){if(!H)return[{command:Pi.setStyle,args:[R]}];var G=[];try{if(!n.deepEqual(H.version,R.version))return[{command:Pi.setStyle,args:[R]}];n.deepEqual(H.center,R.center)||G.push({command:Pi.setCenter,args:[R.center]}),n.deepEqual(H.zoom,R.zoom)||G.push({command:Pi.setZoom,args:[R.zoom]}),n.deepEqual(H.bearing,R.bearing)||G.push({command:Pi.setBearing,args:[R.bearing]}),n.deepEqual(H.pitch,R.pitch)||G.push({command:Pi.setPitch,args:[R.pitch]}),n.deepEqual(H.sprite,R.sprite)||G.push({command:Pi.setSprite,args:[R.sprite]}),n.deepEqual(H.glyphs,R.glyphs)||G.push({command:Pi.setGlyphs,args:[R.glyphs]}),n.deepEqual(H.transition,R.transition)||G.push({command:Pi.setTransition,args:[R.transition]}),n.deepEqual(H.light,R.light)||G.push({command:Pi.setLight,args:[R.light]});var I={},W=[];je(H.sources,R.sources,W,I);var re=[];H.layers&&H.layers.forEach(function($){I[$.source]?G.push({command:Pi.removeLayer,args:[$.id]}):re.push($)}),G=G.concat(W),Jr(re,R.layers,G)}catch($){console.warn("Unable to compute style diff:",$),G=[{command:Pi.setStyle,args:[R]}]}return G}var yn=function(R,G){this.reset(R,G)};yn.prototype.reset=function(R,G){this.points=R||[],this._distances=[0];for(var I=1;I<this.points.length;I++)this._distances[I]=this._distances[I-1]+this.points[I].dist(this.points[I-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(G||0,this.length*.5),this.paddedLength=this.length-this.padding*2},yn.prototype.lerp=function(R){if(this.points.length===1)return this.points[0];R=n.clamp(R,0,1);for(var G=1,I=this._distances[G],W=R*this.paddedLength+this.padding;I<W&&G<this._distances.length;)I=this._distances[++G];var re=G-1,$=this._distances[re],ve=I-$,Ee=ve>0?(W-$)/ve:0;return this.points[re].mult(1-Ee).add(this.points[G].mult(Ee))};var Cr=function(R,G,I){var W=this.boxCells=[],re=this.circleCells=[];this.xCellCount=Math.ceil(R/I),this.yCellCount=Math.ceil(G/I);for(var $=0;$<this.xCellCount*this.yCellCount;$++)W.push([]),re.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=R,this.height=G,this.xScale=this.xCellCount/R,this.yScale=this.yCellCount/G,this.boxUid=0,this.circleUid=0};Cr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Cr.prototype.insert=function(R,G,I,W,re){this._forEachCell(G,I,W,re,this._insertBoxCell,this.boxUid++),this.boxKeys.push(R),this.bboxes.push(G),this.bboxes.push(I),this.bboxes.push(W),this.bboxes.push(re)},Cr.prototype.insertCircle=function(R,G,I,W){this._forEachCell(G-W,I-W,G+W,I+W,this._insertCircleCell,this.circleUid++),this.circleKeys.push(R),this.circles.push(G),this.circles.push(I),this.circles.push(W)},Cr.prototype._insertBoxCell=function(R,G,I,W,re,$){this.boxCells[re].push($)},Cr.prototype._insertCircleCell=function(R,G,I,W,re,$){this.circleCells[re].push($)},Cr.prototype._query=function(R,G,I,W,re,$){if(I<0||R>this.width||W<0||G>this.height)return re?!1:[];var ve=[];if(R<=0&&G<=0&&this.width<=I&&this.height<=W){if(re)return!0;for(var Ee=0;Ee<this.boxKeys.length;Ee++)ve.push({key:this.boxKeys[Ee],x1:this.bboxes[Ee*4],y1:this.bboxes[Ee*4+1],x2:this.bboxes[Ee*4+2],y2:this.bboxes[Ee*4+3]});for(var Oe=0;Oe<this.circleKeys.length;Oe++){var pt=this.circles[Oe*3],wt=this.circles[Oe*3+1],yt=this.circles[Oe*3+2];ve.push({key:this.circleKeys[Oe],x1:pt-yt,y1:wt-yt,x2:pt+yt,y2:wt+yt})}return $?ve.filter($):ve}else{var Be={hitTest:re,seenUids:{box:{},circle:{}}};return this._forEachCell(R,G,I,W,this._queryCell,ve,Be,$),re?ve.length>0:ve}},Cr.prototype._queryCircle=function(R,G,I,W,re){var $=R-I,ve=R+I,Ee=G-I,Oe=G+I;if(ve<0||$>this.width||Oe<0||Ee>this.height)return W?!1:[];var pt=[],wt={hitTest:W,circle:{x:R,y:G,radius:I},seenUids:{box:{},circle:{}}};return this._forEachCell($,Ee,ve,Oe,this._queryCellCircle,pt,wt,re),W?pt.length>0:pt},Cr.prototype.query=function(R,G,I,W,re){return this._query(R,G,I,W,!1,re)},Cr.prototype.hitTest=function(R,G,I,W,re){return this._query(R,G,I,W,!0,re)},Cr.prototype.hitTestCircle=function(R,G,I,W){return this._queryCircle(R,G,I,!0,W)},Cr.prototype._queryCell=function(R,G,I,W,re,$,ve,Ee){var Oe=ve.seenUids,pt=this.boxCells[re];if(pt!==null)for(var wt=this.bboxes,yt=0,Be=pt;yt<Be.length;yt+=1){var $e=Be[yt];if(!Oe.box[$e]){Oe.box[$e]=!0;var ft=$e*4;if(R<=wt[ft+2]&&G<=wt[ft+3]&&I>=wt[ft+0]&&W>=wt[ft+1]&&(!Ee||Ee(this.boxKeys[$e]))){if(ve.hitTest)return $.push(!0),!0;$.push({key:this.boxKeys[$e],x1:wt[ft],y1:wt[ft+1],x2:wt[ft+2],y2:wt[ft+3]})}}}var Tt=this.circleCells[re];if(Tt!==null)for(var Lt=this.circles,Pt=0,jt=Tt;Pt<jt.length;Pt+=1){var Nt=jt[Pt];if(!Oe.circle[Nt]){Oe.circle[Nt]=!0;var Ft=Nt*3;if(this._circleAndRectCollide(Lt[Ft],Lt[Ft+1],Lt[Ft+2],R,G,I,W)&&(!Ee||Ee(this.circleKeys[Nt]))){if(ve.hitTest)return $.push(!0),!0;var Kt=Lt[Ft],Ct=Lt[Ft+1],sr=Lt[Ft+2];$.push({key:this.circleKeys[Nt],x1:Kt-sr,y1:Ct-sr,x2:Kt+sr,y2:Ct+sr})}}}},Cr.prototype._queryCellCircle=function(R,G,I,W,re,$,ve,Ee){var Oe=ve.circle,pt=ve.seenUids,wt=this.boxCells[re];if(wt!==null)for(var yt=this.bboxes,Be=0,$e=wt;Be<$e.length;Be+=1){var ft=$e[Be];if(!pt.box[ft]){pt.box[ft]=!0;var Tt=ft*4;if(this._circleAndRectCollide(Oe.x,Oe.y,Oe.radius,yt[Tt+0],yt[Tt+1],yt[Tt+2],yt[Tt+3])&&(!Ee||Ee(this.boxKeys[ft])))return $.push(!0),!0}}var Lt=this.circleCells[re];if(Lt!==null)for(var Pt=this.circles,jt=0,Nt=Lt;jt<Nt.length;jt+=1){var Ft=Nt[jt];if(!pt.circle[Ft]){pt.circle[Ft]=!0;var Kt=Ft*3;if(this._circlesCollide(Pt[Kt],Pt[Kt+1],Pt[Kt+2],Oe.x,Oe.y,Oe.radius)&&(!Ee||Ee(this.circleKeys[Ft])))return $.push(!0),!0}}},Cr.prototype._forEachCell=function(R,G,I,W,re,$,ve,Ee){for(var Oe=this._convertToXCellCoord(R),pt=this._convertToYCellCoord(G),wt=this._convertToXCellCoord(I),yt=this._convertToYCellCoord(W),Be=Oe;Be<=wt;Be++)for(var $e=pt;$e<=yt;$e++){var ft=this.xCellCount*$e+Be;if(re.call(this,R,G,I,W,ft,$,ve,Ee))return}},Cr.prototype._convertToXCellCoord=function(R){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(R*this.xScale)))},Cr.prototype._convertToYCellCoord=function(R){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(R*this.yScale)))},Cr.prototype._circlesCollide=function(R,G,I,W,re,$){var ve=W-R,Ee=re-G,Oe=I+$;return Oe*Oe>ve*ve+Ee*Ee},Cr.prototype._circleAndRectCollide=function(R,G,I,W,re,$,ve){var Ee=($-W)/2,Oe=Math.abs(R-(W+Ee));if(Oe>Ee+I)return!1;var pt=(ve-re)/2,wt=Math.abs(G-(re+pt));if(wt>pt+I)return!1;if(Oe<=Ee||wt<=pt)return!0;var yt=Oe-Ee,Be=wt-pt;return yt*yt+Be*Be<=I*I};function vn(H,R,G,I,W){var re=n.create();return R?(n.scale(re,re,[1/W,1/W,1]),G||n.rotateZ(re,re,I.angle)):n.multiply(re,I.labelPlaneMatrix,H),re}function gi(H,R,G,I,W){if(R){var re=n.clone(H);return n.scale(re,re,[W,W,1]),G||n.rotateZ(re,re,-I.angle),re}else return I.glCoordMatrix}function Wn(H,R){var G=[H.x,H.y,0,1];al(G,G,R);var I=G[3];return{point:new n.Point(G[0]/I,G[1]/I),signedDistanceFromCamera:I}}function zi(H,R){return .5+.5*(H/R)}function fa(H,R){var G=H[0]/H[3],I=H[1]/H[3],W=G>=-R[0]&&G<=R[0]&&I>=-R[1]&&I<=R[1];return W}function to(H,R,G,I,W,re,$,ve){var Ee=I?H.textSizeData:H.iconSizeData,Oe=n.evaluateSizeForZoom(Ee,G.transform.zoom),pt=[256/G.width*2+1,256/G.height*2+1],wt=I?H.text.dynamicLayoutVertexArray:H.icon.dynamicLayoutVertexArray;wt.clear();for(var yt=H.lineVertexArray,Be=I?H.text.placedSymbolArray:H.icon.placedSymbolArray,$e=G.transform.width/G.transform.height,ft=!1,Tt=0;Tt<Be.length;Tt++){var Lt=Be.get(Tt);if(Lt.hidden||Lt.writingMode===n.WritingMode.vertical&&!ft){ss(Lt.numGlyphs,wt);continue}ft=!1;var Pt=[Lt.anchorX,Lt.anchorY,0,1];if(n.transformMat4(Pt,Pt,R),!fa(Pt,pt)){ss(Lt.numGlyphs,wt);continue}var jt=Pt[3],Nt=zi(G.transform.cameraToCenterDistance,jt),Ft=n.evaluateSizeForFeature(Ee,Oe,Lt),Kt=$?Ft/Nt:Ft*Nt,Ct=new n.Point(Lt.anchorX,Lt.anchorY),sr=Wn(Ct,W).point,xr={},Dr=Ka(Lt,Kt,!1,ve,R,W,re,H.glyphOffsetArray,yt,wt,sr,Ct,xr,$e);ft=Dr.useVertical,(Dr.notEnoughRoom||ft||Dr.needsFlipping&&Ka(Lt,Kt,!0,ve,R,W,re,H.glyphOffsetArray,yt,wt,sr,Ct,xr,$e).notEnoughRoom)&&ss(Lt.numGlyphs,wt)}I?H.text.dynamicLayoutVertexBuffer.updateData(wt):H.icon.dynamicLayoutVertexBuffer.updateData(wt)}function ma(H,R,G,I,W,re,$,ve,Ee,Oe,pt){var wt=ve.glyphStartIndex+ve.numGlyphs,yt=ve.lineStartIndex,Be=ve.lineStartIndex+ve.lineLength,$e=R.getoffsetX(ve.glyphStartIndex),ft=R.getoffsetX(wt-1),Tt=Ho(H*$e,G,I,W,re,$,ve.segment,yt,Be,Ee,Oe,pt);if(!Tt)return null;var Lt=Ho(H*ft,G,I,W,re,$,ve.segment,yt,Be,Ee,Oe,pt);return Lt?{first:Tt,last:Lt}:null}function uo(H,R,G,I){if(H===n.WritingMode.horizontal){var W=Math.abs(G.y-R.y),re=Math.abs(G.x-R.x)*I;if(W>re)return{useVertical:!0}}return(H===n.WritingMode.vertical?R.y<G.y:R.x>G.x)?{needsFlipping:!0}:null}function Ka(H,R,G,I,W,re,$,ve,Ee,Oe,pt,wt,yt,Be){var $e=R/24,ft=H.lineOffsetX*$e,Tt=H.lineOffsetY*$e,Lt;if(H.numGlyphs>1){var Pt=H.glyphStartIndex+H.numGlyphs,jt=H.lineStartIndex,Nt=H.lineStartIndex+H.lineLength,Ft=ma($e,ve,ft,Tt,G,pt,wt,H,Ee,re,yt);if(!Ft)return{notEnoughRoom:!0};var Kt=Wn(Ft.first.point,$).point,Ct=Wn(Ft.last.point,$).point;if(I&&!G){var sr=uo(H.writingMode,Kt,Ct,Be);if(sr)return sr}Lt=[Ft.first];for(var xr=H.glyphStartIndex+1;xr<Pt-1;xr++)Lt.push(Ho($e*ve.getoffsetX(xr),ft,Tt,G,pt,wt,H.segment,jt,Nt,Ee,re,yt));Lt.push(Ft.last)}else{if(I&&!G){var Dr=Wn(wt,W).point,fn=H.lineStartIndex+H.segment+1,Wr=new n.Point(Ee.getx(fn),Ee.gety(fn)),gn=Wn(Wr,W),si=gn.signedDistanceFromCamera>0?gn.point:jo(wt,Wr,Dr,1,W),Hn=uo(H.writingMode,Dr,si,Be);if(Hn)return Hn}var cn=Ho($e*ve.getoffsetX(H.glyphStartIndex),ft,Tt,G,pt,wt,H.segment,H.lineStartIndex,H.lineStartIndex+H.lineLength,Ee,re,yt);if(!cn)return{notEnoughRoom:!0};Lt=[cn]}for(var Rn=0,En=Lt;Rn<En.length;Rn+=1){var $n=En[Rn];n.addDynamicAttributes(Oe,$n.point,$n.angle)}return{}}function jo(H,R,G,I,W){var re=Wn(H.add(H.sub(R)._unit()),W).point,$=G.sub(re);return G.add($._mult(I/$.mag()))}function Ho(H,R,G,I,W,re,$,ve,Ee,Oe,pt,wt){var yt=I?H-R:H+R,Be=yt>0?1:-1,$e=0;I&&(Be*=-1,$e=Math.PI),Be<0&&($e+=Math.PI);for(var ft=Be>0?ve+$:ve+$+1,Tt=W,Lt=W,Pt=0,jt=0,Nt=Math.abs(yt),Ft=[];Pt+jt<=Nt;){if(ft+=Be,ft<ve||ft>=Ee)return null;if(Lt=Tt,Ft.push(Tt),Tt=wt[ft],Tt===void 0){var Kt=new n.Point(Oe.getx(ft),Oe.gety(ft)),Ct=Wn(Kt,pt);if(Ct.signedDistanceFromCamera>0)Tt=wt[ft]=Ct.point;else{var sr=ft-Be,xr=Pt===0?re:new n.Point(Oe.getx(sr),Oe.gety(sr));Tt=jo(xr,Kt,Lt,Nt-Pt+1,pt)}}Pt+=jt,jt=Lt.dist(Tt)}var Dr=(Nt-Pt)/jt,fn=Tt.sub(Lt),Wr=fn.mult(Dr)._add(Lt);Wr._add(fn._unit()._perp()._mult(G*Be));var gn=$e+Math.atan2(Tt.y-Lt.y,Tt.x-Lt.x);return Ft.push(Wr),{point:Wr,angle:gn,path:Ft}}var xs=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ss(H,R){for(var G=0;G<H;G++){var I=R.length;R.resize(I+4),R.float32.set(xs,I*3)}}function al(H,R,G){var I=R[0],W=R[1];return H[0]=G[0]*I+G[4]*W+G[12],H[1]=G[1]*I+G[5]*W+G[13],H[3]=G[3]*I+G[7]*W+G[15],H}var so=100,vs=function(R,G,I){G===void 0&&(G=new Cr(R.width+2*so,R.height+2*so,25)),I===void 0&&(I=new Cr(R.width+2*so,R.height+2*so,25)),this.transform=R,this.grid=G,this.ignoredGrid=I,this.pitchfactor=Math.cos(R._pitch)*R.cameraToCenterDistance,this.screenRightBoundary=R.width+so,this.screenBottomBoundary=R.height+so,this.gridRightBoundary=R.width+2*so,this.gridBottomBoundary=R.height+2*so};vs.prototype.placeCollisionBox=function(R,G,I,W,re){var $=this.projectAndGetPerspectiveRatio(W,R.anchorPointX,R.anchorPointY),ve=I*$.perspectiveRatio,Ee=R.x1*ve+$.point.x,Oe=R.y1*ve+$.point.y,pt=R.x2*ve+$.point.x,wt=R.y2*ve+$.point.y;return!this.isInsideGrid(Ee,Oe,pt,wt)||!G&&this.grid.hitTest(Ee,Oe,pt,wt,re)?{box:[],offscreen:!1}:{box:[Ee,Oe,pt,wt],offscreen:this.isOffscreen(Ee,Oe,pt,wt)}},vs.prototype.placeCollisionCircles=function(R,G,I,W,re,$,ve,Ee,Oe,pt,wt,yt,Be){var $e=[],ft=new n.Point(G.anchorX,G.anchorY),Tt=Wn(ft,$),Lt=zi(this.transform.cameraToCenterDistance,Tt.signedDistanceFromCamera),Pt=pt?re/Lt:re*Lt,jt=Pt/n.ONE_EM,Nt=Wn(ft,ve).point,Ft={},Kt=G.lineOffsetX*jt,Ct=G.lineOffsetY*jt,sr=ma(jt,W,Kt,Ct,!1,Nt,ft,G,I,ve,Ft),xr=!1,Dr=!1,fn=!0;if(sr){for(var Wr=yt*.5*Lt+Be,gn=new n.Point(-so,-so),si=new n.Point(this.screenRightBoundary,this.screenBottomBoundary),Hn=new yn,cn=sr.first,Rn=sr.last,En=[],$n=cn.path.length-1;$n>=1;$n--)En.push(cn.path[$n]);for(var xi=1;xi<Rn.path.length;xi++)En.push(Rn.path[xi]);var Ra=Wr*2.5;if(Ee){var Pa=En.map(function(Sd){return Wn(Sd,Ee)});Pa.some(function(Sd){return Sd.signedDistanceFromCamera<=0})?En=[]:En=Pa.map(function(Sd){return Sd.point})}var wo=[];if(En.length>0){for(var ua=En[0].clone(),$a=En[0].clone(),Go=1;Go<En.length;Go++)ua.x=Math.min(ua.x,En[Go].x),ua.y=Math.min(ua.y,En[Go].y),$a.x=Math.max($a.x,En[Go].x),$a.y=Math.max($a.y,En[Go].y);ua.x>=gn.x&&$a.x<=si.x&&ua.y>=gn.y&&$a.y<=si.y?wo=[En]:$a.x<gn.x||ua.x>si.x||$a.y<gn.y||ua.y>si.y?wo=[]:wo=n.clipLine([En],gn.x,gn.y,si.x,si.y)}for(var xl=0,Kv=wo;xl<Kv.length;xl+=1){var Jv=Kv[xl];Hn.reset(Jv,Wr*.25);var Ad=0;Hn.length<=.5*Wr?Ad=1:Ad=Math.ceil(Hn.paddedLength/Ra)+1;for(var Qd=0;Qd<Ad;Qd++){var Eg=Qd/Math.max(Ad-1,1),$d=Hn.lerp(Eg),oh=$d.x+so,ep=$d.y+so;$e.push(oh,ep,Wr,0);var Bh=oh-Wr,sh=ep-Wr,Md=oh+Wr,Zp=ep+Wr;if(fn=fn&&this.isOffscreen(Bh,sh,Md,Zp),Dr=Dr||this.isInsideGrid(Bh,sh,Md,Zp),!R&&this.grid.hitTestCircle(oh,ep,Wr,wt)&&(xr=!0,!Oe))return{circles:[],offscreen:!1,collisionDetected:xr}}}}return{circles:!Oe&&xr||!Dr?[]:$e,offscreen:fn,collisionDetected:xr}},vs.prototype.queryRenderedSymbols=function(R){if(R.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var G=[],I=1/0,W=1/0,re=-1/0,$=-1/0,ve=0,Ee=R;ve<Ee.length;ve+=1){var Oe=Ee[ve],pt=new n.Point(Oe.x+so,Oe.y+so);I=Math.min(I,pt.x),W=Math.min(W,pt.y),re=Math.max(re,pt.x),$=Math.max($,pt.y),G.push(pt)}for(var wt=this.grid.query(I,W,re,$).concat(this.ignoredGrid.query(I,W,re,$)),yt={},Be={},$e=0,ft=wt;$e<ft.length;$e+=1){var Tt=ft[$e],Lt=Tt.key;if(yt[Lt.bucketInstanceId]===void 0&&(yt[Lt.bucketInstanceId]={}),!yt[Lt.bucketInstanceId][Lt.featureIndex]){var Pt=[new n.Point(Tt.x1,Tt.y1),new n.Point(Tt.x2,Tt.y1),new n.Point(Tt.x2,Tt.y2),new n.Point(Tt.x1,Tt.y2)];n.polygonIntersectsPolygon(G,Pt)&&(yt[Lt.bucketInstanceId][Lt.featureIndex]=!0,Be[Lt.bucketInstanceId]===void 0&&(Be[Lt.bucketInstanceId]=[]),Be[Lt.bucketInstanceId].push(Lt.featureIndex))}}return Be},vs.prototype.insertCollisionBox=function(R,G,I,W,re){var $=G?this.ignoredGrid:this.grid,ve={bucketInstanceId:I,featureIndex:W,collisionGroupID:re};$.insert(ve,R[0],R[1],R[2],R[3])},vs.prototype.insertCollisionCircles=function(R,G,I,W,re){for(var $=G?this.ignoredGrid:this.grid,ve={bucketInstanceId:I,featureIndex:W,collisionGroupID:re},Ee=0;Ee<R.length;Ee+=4)$.insertCircle(ve,R[Ee],R[Ee+1],R[Ee+2])},vs.prototype.projectAndGetPerspectiveRatio=function(R,G,I){var W=[G,I,0,1];al(W,W,R);var re=new n.Point((W[0]/W[3]+1)/2*this.transform.width+so,(-W[1]/W[3]+1)/2*this.transform.height+so);return{point:re,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/W[3])}},vs.prototype.isOffscreen=function(R,G,I,W){return I<so||R>=this.screenRightBoundary||W<so||G>this.screenBottomBoundary},vs.prototype.isInsideGrid=function(R,G,I,W){return I>=0&&R<this.gridRightBoundary&&W>=0&&G<this.gridBottomBoundary},vs.prototype.getViewportMatrix=function(){var R=n.identity([]);return n.translate(R,R,[-so,-so,0]),R};function Co(H,R,G){return R*(n.EXTENT/(H.tileSize*Math.pow(2,G-H.tileID.overscaledZ)))}var ds=function(R,G,I,W){R?this.opacity=Math.max(0,Math.min(1,R.opacity+(R.placed?G:-G))):this.opacity=W&&I?1:0,this.placed=I};ds.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var $o=function(R,G,I,W,re){this.text=new ds(R?R.text:null,G,I,re),this.icon=new ds(R?R.icon:null,G,W,re)};$o.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var es=function(R,G,I){this.text=R,this.icon=G,this.skipFade=I},Oa=function(){this.invProjMatrix=n.create(),this.viewportMatrix=n.create(),this.circles=[]},vo=function(R,G,I,W,re){this.bucketInstanceId=R,this.featureIndex=G,this.sourceLayerIndex=I,this.bucketIndex=W,this.tileID=re},Al=function(R){this.crossSourceCollisions=R,this.maxGroupID=0,this.collisionGroups={}};Al.prototype.get=function(R){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[R]){var G=++this.maxGroupID;this.collisionGroups[R]={ID:G,predicate:function(I){return I.collisionGroupID===G}}}return this.collisionGroups[R]};function ru(H,R,G,I,W){var re=n.getAnchorAlignment(H),$=re.horizontalAlign,ve=re.verticalAlign,Ee=-($-.5)*R,Oe=-(ve-.5)*G,pt=n.evaluateVariableOffset(H,I);return new n.Point(Ee+pt[0]*W,Oe+pt[1]*W)}function Vu(H,R,G,I,W,re){var $=H.x1,ve=H.x2,Ee=H.y1,Oe=H.y2,pt=H.anchorPointX,wt=H.anchorPointY,yt=new n.Point(R,G);return I&&yt._rotate(W?re:-re),{x1:$+yt.x,y1:Ee+yt.y,x2:ve+yt.x,y2:Oe+yt.y,anchorPointX:pt,anchorPointY:wt}}var ls=function(R,G,I,W){this.transform=R.clone(),this.collisionIndex=new vs(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=G,this.retainedQueryData={},this.collisionGroups=new Al(I),this.collisionCircleArrays={},this.prevPlacement=W,W&&(W.prevPlacement=void 0),this.placedOrientations={}};ls.prototype.getBucketParts=function(R,G,I,W){var re=I.getBucket(G),$=I.latestFeatureIndex;if(!(!re||!$||G.id!==re.layerIds[0])){var ve=I.collisionBoxArray,Ee=re.layers[0].layout,Oe=Math.pow(2,this.transform.zoom-I.tileID.overscaledZ),pt=I.tileSize/n.EXTENT,wt=this.transform.calculatePosMatrix(I.tileID.toUnwrapped()),yt=Ee.get("text-pitch-alignment")==="map",Be=Ee.get("text-rotation-alignment")==="map",$e=Co(I,1,this.transform.zoom),ft=vn(wt,yt,Be,this.transform,$e),Tt=null;if(yt){var Lt=gi(wt,yt,Be,this.transform,$e);Tt=n.multiply([],this.transform.labelPlaneMatrix,Lt)}this.retainedQueryData[re.bucketInstanceId]=new vo(re.bucketInstanceId,$,re.sourceLayerIndex,re.index,I.tileID);var Pt={bucket:re,layout:Ee,posMatrix:wt,textLabelPlaneMatrix:ft,labelToScreenMatrix:Tt,scale:Oe,textPixelRatio:pt,holdingForFade:I.holdingForFade(),collisionBoxArray:ve,partiallyEvaluatedTextSize:n.evaluateSizeForZoom(re.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(re.sourceID)};if(W)for(var jt=0,Nt=re.sortKeyRanges;jt<Nt.length;jt+=1){var Ft=Nt[jt],Kt=Ft.sortKey,Ct=Ft.symbolInstanceStart,sr=Ft.symbolInstanceEnd;R.push({sortKey:Kt,symbolInstanceStart:Ct,symbolInstanceEnd:sr,parameters:Pt})}else R.push({symbolInstanceStart:0,symbolInstanceEnd:re.symbolInstances.length,parameters:Pt})}},ls.prototype.attemptAnchorPlacement=function(R,G,I,W,re,$,ve,Ee,Oe,pt,wt,yt,Be,$e,ft){var Tt=[yt.textOffset0,yt.textOffset1],Lt=ru(R,I,W,Tt,re),Pt=this.collisionIndex.placeCollisionBox(Vu(G,Lt.x,Lt.y,$,ve,this.transform.angle),wt,Ee,Oe,pt.predicate);if(ft){var jt=this.collisionIndex.placeCollisionBox(Vu(ft,Lt.x,Lt.y,$,ve,this.transform.angle),wt,Ee,Oe,pt.predicate);if(jt.box.length===0)return}if(Pt.box.length>0){var Nt;return this.prevPlacement&&this.prevPlacement.variableOffsets[yt.crossTileID]&&this.prevPlacement.placements[yt.crossTileID]&&this.prevPlacement.placements[yt.crossTileID].text&&(Nt=this.prevPlacement.variableOffsets[yt.crossTileID].anchor),this.variableOffsets[yt.crossTileID]={textOffset:Tt,width:I,height:W,anchor:R,textBoxScale:re,prevAnchor:Nt},this.markUsedJustification(Be,R,yt,$e),Be.allowVerticalPlacement&&(this.markUsedOrientation(Be,$e,yt),this.placedOrientations[yt.crossTileID]=$e),{shift:Lt,placedGlyphBoxes:Pt}}},ls.prototype.placeLayerBucketPart=function(R,G,I){var W=this,re=R.parameters,$=re.bucket,ve=re.layout,Ee=re.posMatrix,Oe=re.textLabelPlaneMatrix,pt=re.labelToScreenMatrix,wt=re.textPixelRatio,yt=re.holdingForFade,Be=re.collisionBoxArray,$e=re.partiallyEvaluatedTextSize,ft=re.collisionGroup,Tt=ve.get("text-optional"),Lt=ve.get("icon-optional"),Pt=ve.get("text-allow-overlap"),jt=ve.get("icon-allow-overlap"),Nt=ve.get("text-rotation-alignment")==="map",Ft=ve.get("text-pitch-alignment")==="map",Kt=ve.get("icon-text-fit")!=="none",Ct=ve.get("symbol-z-order")==="viewport-y",sr=Pt&&(jt||!$.hasIconData()||Lt),xr=jt&&(Pt||!$.hasTextData()||Tt);!$.collisionArrays&&Be&&$.deserializeCollisionBoxes(Be);var Dr=function(cn,Rn){if(!G[cn.crossTileID]){if(yt){W.placements[cn.crossTileID]=new es(!1,!1,!1);return}var En=!1,$n=!1,xi=!0,Ra=null,Pa={box:null,offscreen:null},wo={box:null,offscreen:null},ua=null,$a=null,Go=null,xl=0,Kv=0,Jv=0;Rn.textFeatureIndex?xl=Rn.textFeatureIndex:cn.useRuntimeCollisionCircles&&(xl=cn.featureIndex),Rn.verticalTextFeatureIndex&&(Kv=Rn.verticalTextFeatureIndex);var Ad=Rn.textBox;if(Ad){var Qd=function(Kl){var Nh=n.WritingMode.horizontal;if($.allowVerticalPlacement&&!Kl&&W.prevPlacement){var Uh=W.prevPlacement.placedOrientations[cn.crossTileID];Uh&&(W.placedOrientations[cn.crossTileID]=Uh,Nh=Uh,W.markUsedOrientation($,Nh,cn))}return Nh},Eg=function(Kl,Nh){if($.allowVerticalPlacement&&cn.numVerticalGlyphVertices>0&&Rn.verticalTextBox)for(var Uh=0,Lb=$.writingModes;Uh<Lb.length;Uh+=1){var YT=Lb[Uh];if(YT===n.WritingMode.vertical?(Pa=Nh(),wo=Pa):Pa=Kl(),Pa&&Pa.box&&Pa.box.length)break}else Pa=Kl()};if(ve.get("text-variable-anchor")){var Bh=ve.get("text-variable-anchor");if(W.prevPlacement&&W.prevPlacement.variableOffsets[cn.crossTileID]){var sh=W.prevPlacement.variableOffsets[cn.crossTileID];Bh.indexOf(sh.anchor)>0&&(Bh=Bh.filter(function(Kl){return Kl!==sh.anchor}),Bh.unshift(sh.anchor))}var Md=function(Kl,Nh,Uh){for(var Lb=Kl.x2-Kl.x1,YT=Kl.y2-Kl.y1,C8=cn.textBoxScale,L8=Kt&&!jt?Nh:null,K1={box:[],offscreen:!1},P8=Pt?Bh.length*2:Bh.length,Pb=0;Pb<P8;++Pb){var R8=Bh[Pb%Bh.length],D8=Pb>=Bh.length,WT=W.attemptAnchorPlacement(R8,Kl,Lb,YT,C8,Nt,Ft,wt,Ee,ft,D8,cn,$,Uh,L8);if(WT&&(K1=WT.placedGlyphBoxes,K1&&K1.box&&K1.box.length)){En=!0,Ra=WT.shift;break}}return K1},Zp=function(){return Md(Ad,Rn.iconBox,n.WritingMode.horizontal)},Sd=function(){var Kl=Rn.verticalTextBox,Nh=Pa&&Pa.box&&Pa.box.length;return $.allowVerticalPlacement&&!Nh&&cn.numVerticalGlyphVertices>0&&Kl?Md(Kl,Rn.verticalIconBox,n.WritingMode.vertical):{box:null,offscreen:null}};Eg(Zp,Sd),Pa&&(En=Pa.box,xi=Pa.offscreen);var Mb=Qd(Pa&&Pa.box);if(!En&&W.prevPlacement){var By=W.prevPlacement.variableOffsets[cn.crossTileID];By&&(W.variableOffsets[cn.crossTileID]=By,W.markUsedJustification($,By.anchor,cn,Mb))}}else{var $d=function(Kl,Nh){var Uh=W.collisionIndex.placeCollisionBox(Kl,Pt,wt,Ee,ft.predicate);return Uh&&Uh.box&&Uh.box.length&&(W.markUsedOrientation($,Nh,cn),W.placedOrientations[cn.crossTileID]=Nh),Uh},oh=function(){return $d(Ad,n.WritingMode.horizontal)},ep=function(){var Kl=Rn.verticalTextBox;return $.allowVerticalPlacement&&cn.numVerticalGlyphVertices>0&&Kl?$d(Kl,n.WritingMode.vertical):{box:null,offscreen:null}};Eg(oh,ep),Qd(Pa&&Pa.box&&Pa.box.length)}}if(ua=Pa,En=ua&&ua.box&&ua.box.length>0,xi=ua&&ua.offscreen,cn.useRuntimeCollisionCircles){var _f=$.text.placedSymbolArray.get(cn.centerJustifiedTextSymbolIndex),Sb=n.evaluateSizeForFeature($.textSizeData,$e,_f),j1=ve.get("text-padding"),Fc=cn.collisionCircleDiameter;$a=W.collisionIndex.placeCollisionCircles(Pt,_f,$.lineVertexArray,$.glyphOffsetArray,Sb,Ee,Oe,pt,I,Ft,ft.predicate,Fc,j1),En=Pt||$a.circles.length>0&&!$a.collisionDetected,xi=xi&&$a.offscreen}if(Rn.iconFeatureIndex&&(Jv=Rn.iconFeatureIndex),Rn.iconBox){var Ny=function(Kl){var Nh=Kt&&Ra?Vu(Kl,Ra.x,Ra.y,Nt,Ft,W.transform.angle):Kl;return W.collisionIndex.placeCollisionBox(Nh,jt,wt,Ee,ft.predicate)};wo&&wo.box&&wo.box.length&&Rn.verticalIconBox?(Go=Ny(Rn.verticalIconBox),$n=Go.box.length>0):(Go=Ny(Rn.iconBox),$n=Go.box.length>0),xi=xi&&Go.offscreen}var Eb=Tt||cn.numHorizontalGlyphVertices===0&&cn.numVerticalGlyphVertices===0,kb=Lt||cn.numIconVertices===0;if(!Eb&&!kb?$n=En=$n&&En:kb?Eb||($n=$n&&En):En=$n&&En,En&&ua&&ua.box&&(wo&&wo.box&&Kv?W.collisionIndex.insertCollisionBox(ua.box,ve.get("text-ignore-placement"),$.bucketInstanceId,Kv,ft.ID):W.collisionIndex.insertCollisionBox(ua.box,ve.get("text-ignore-placement"),$.bucketInstanceId,xl,ft.ID)),$n&&Go&&W.collisionIndex.insertCollisionBox(Go.box,ve.get("icon-ignore-placement"),$.bucketInstanceId,Jv,ft.ID),$a&&(En&&W.collisionIndex.insertCollisionCircles($a.circles,ve.get("text-ignore-placement"),$.bucketInstanceId,xl,ft.ID),I)){var Cb=$.bucketInstanceId,Uy=W.collisionCircleArrays[Cb];Uy===void 0&&(Uy=W.collisionCircleArrays[Cb]=new Oa);for(var Vy=0;Vy<$a.circles.length;Vy+=4)Uy.circles.push($a.circles[Vy+0]),Uy.circles.push($a.circles[Vy+1]),Uy.circles.push($a.circles[Vy+2]),Uy.circles.push($a.collisionDetected?1:0)}W.placements[cn.crossTileID]=new es(En||sr,$n||xr,xi||$.justReloaded),G[cn.crossTileID]=!0}};if(Ct)for(var fn=$.getSortedSymbolIndexes(this.transform.angle),Wr=fn.length-1;Wr>=0;--Wr){var gn=fn[Wr];Dr($.symbolInstances.get(gn),$.collisionArrays[gn])}else for(var si=R.symbolInstanceStart;si<R.symbolInstanceEnd;si++)Dr($.symbolInstances.get(si),$.collisionArrays[si]);if(I&&$.bucketInstanceId in this.collisionCircleArrays){var Hn=this.collisionCircleArrays[$.bucketInstanceId];n.invert(Hn.invProjMatrix,Ee),Hn.viewportMatrix=this.collisionIndex.getViewportMatrix()}$.justReloaded=!1},ls.prototype.markUsedJustification=function(R,G,I,W){var re={left:I.leftJustifiedTextSymbolIndex,center:I.centerJustifiedTextSymbolIndex,right:I.rightJustifiedTextSymbolIndex},$;W===n.WritingMode.vertical?$=I.verticalPlacedTextSymbolIndex:$=re[n.getAnchorJustification(G)];for(var ve=[I.leftJustifiedTextSymbolIndex,I.centerJustifiedTextSymbolIndex,I.rightJustifiedTextSymbolIndex,I.verticalPlacedTextSymbolIndex],Ee=0,Oe=ve;Ee<Oe.length;Ee+=1){var pt=Oe[Ee];pt>=0&&($>=0&&pt!==$?R.text.placedSymbolArray.get(pt).crossTileID=0:R.text.placedSymbolArray.get(pt).crossTileID=I.crossTileID)}},ls.prototype.markUsedOrientation=function(R,G,I){for(var W=G===n.WritingMode.horizontal||G===n.WritingMode.horizontalOnly?G:0,re=G===n.WritingMode.vertical?G:0,$=[I.leftJustifiedTextSymbolIndex,I.centerJustifiedTextSymbolIndex,I.rightJustifiedTextSymbolIndex],ve=0,Ee=$;ve<Ee.length;ve+=1){var Oe=Ee[ve];R.text.placedSymbolArray.get(Oe).placedOrientation=W}I.verticalPlacedTextSymbolIndex&&(R.text.placedSymbolArray.get(I.verticalPlacedTextSymbolIndex).placedOrientation=re)},ls.prototype.commit=function(R){this.commitTime=R,this.zoomAtLastRecencyCheck=this.transform.zoom;var G=this.prevPlacement,I=!1;this.prevZoomAdjustment=G?G.zoomAdjustment(this.transform.zoom):0;var W=G?G.symbolFadeChange(R):1,re=G?G.opacities:{},$=G?G.variableOffsets:{},ve=G?G.placedOrientations:{};for(var Ee in this.placements){var Oe=this.placements[Ee],pt=re[Ee];pt?(this.opacities[Ee]=new $o(pt,W,Oe.text,Oe.icon),I=I||Oe.text!==pt.text.placed||Oe.icon!==pt.icon.placed):(this.opacities[Ee]=new $o(null,W,Oe.text,Oe.icon,Oe.skipFade),I=I||Oe.text||Oe.icon)}for(var wt in re){var yt=re[wt];if(!this.opacities[wt]){var Be=new $o(yt,W,!1,!1);Be.isHidden()||(this.opacities[wt]=Be,I=I||yt.text.placed||yt.icon.placed)}}for(var $e in $)!this.variableOffsets[$e]&&this.opacities[$e]&&!this.opacities[$e].isHidden()&&(this.variableOffsets[$e]=$[$e]);for(var ft in ve)!this.placedOrientations[ft]&&this.opacities[ft]&&!this.opacities[ft].isHidden()&&(this.placedOrientations[ft]=ve[ft]);I?this.lastPlacementChangeTime=R:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=G?G.lastPlacementChangeTime:R)},ls.prototype.updateLayerOpacities=function(R,G){for(var I={},W=0,re=G;W<re.length;W+=1){var $=re[W],ve=$.getBucket(R);ve&&$.latestFeatureIndex&&R.id===ve.layerIds[0]&&this.updateBucketOpacities(ve,I,$.collisionBoxArray)}},ls.prototype.updateBucketOpacities=function(R,G,I){var W=this;R.hasTextData()&&R.text.opacityVertexArray.clear(),R.hasIconData()&&R.icon.opacityVertexArray.clear(),R.hasIconCollisionBoxData()&&R.iconCollisionBox.collisionVertexArray.clear(),R.hasTextCollisionBoxData()&&R.textCollisionBox.collisionVertexArray.clear();var re=R.layers[0].layout,$=new $o(null,0,!1,!1,!0),ve=re.get("text-allow-overlap"),Ee=re.get("icon-allow-overlap"),Oe=re.get("text-variable-anchor"),pt=re.get("text-rotation-alignment")==="map",wt=re.get("text-pitch-alignment")==="map",yt=re.get("icon-text-fit")!=="none",Be=new $o(null,0,ve&&(Ee||!R.hasIconData()||re.get("icon-optional")),Ee&&(ve||!R.hasTextData()||re.get("text-optional")),!0);!R.collisionArrays&&I&&(R.hasIconCollisionBoxData()||R.hasTextCollisionBoxData())&&R.deserializeCollisionBoxes(I);for(var $e=function(Pt,jt,Nt){for(var Ft=0;Ft<jt/4;Ft++)Pt.opacityVertexArray.emplaceBack(Nt)},ft=function(Pt){var jt=R.symbolInstances.get(Pt),Nt=jt.numHorizontalGlyphVertices,Ft=jt.numVerticalGlyphVertices,Kt=jt.crossTileID,Ct=G[Kt],sr=W.opacities[Kt];Ct?sr=$:sr||(sr=Be,W.opacities[Kt]=sr),G[Kt]=!0;var xr=Nt>0||Ft>0,Dr=jt.numIconVertices>0,fn=W.placedOrientations[jt.crossTileID],Wr=fn===n.WritingMode.vertical,gn=fn===n.WritingMode.horizontal||fn===n.WritingMode.horizontalOnly;if(xr){var si=wu(sr.text),Hn=Wr?oi:si;$e(R.text,Nt,Hn);var cn=gn?oi:si;$e(R.text,Ft,cn);var Rn=sr.text.isHidden();[jt.rightJustifiedTextSymbolIndex,jt.centerJustifiedTextSymbolIndex,jt.leftJustifiedTextSymbolIndex].forEach(function(Jv){Jv>=0&&(R.text.placedSymbolArray.get(Jv).hidden=Rn||Wr?1:0)}),jt.verticalPlacedTextSymbolIndex>=0&&(R.text.placedSymbolArray.get(jt.verticalPlacedTextSymbolIndex).hidden=Rn||gn?1:0);var En=W.variableOffsets[jt.crossTileID];En&&W.markUsedJustification(R,En.anchor,jt,fn);var $n=W.placedOrientations[jt.crossTileID];$n&&(W.markUsedJustification(R,"left",jt,$n),W.markUsedOrientation(R,$n,jt))}if(Dr){var xi=wu(sr.icon),Ra=!(yt&&jt.verticalPlacedIconSymbolIndex&&Wr);if(jt.placedIconSymbolIndex>=0){var Pa=Ra?xi:oi;$e(R.icon,jt.numIconVertices,Pa),R.icon.placedSymbolArray.get(jt.placedIconSymbolIndex).hidden=sr.icon.isHidden()}if(jt.verticalPlacedIconSymbolIndex>=0){var wo=Ra?oi:xi;$e(R.icon,jt.numVerticalIconVertices,wo),R.icon.placedSymbolArray.get(jt.verticalPlacedIconSymbolIndex).hidden=sr.icon.isHidden()}}if(R.hasIconCollisionBoxData()||R.hasTextCollisionBoxData()){var ua=R.collisionArrays[Pt];if(ua){var $a=new n.Point(0,0);if(ua.textBox||ua.verticalTextBox){var Go=!0;if(Oe){var xl=W.variableOffsets[Kt];xl?($a=ru(xl.anchor,xl.width,xl.height,xl.textOffset,xl.textBoxScale),pt&&$a._rotate(wt?W.transform.angle:-W.transform.angle)):Go=!1}ua.textBox&&dn(R.textCollisionBox.collisionVertexArray,sr.text.placed,!Go||Wr,$a.x,$a.y),ua.verticalTextBox&&dn(R.textCollisionBox.collisionVertexArray,sr.text.placed,!Go||gn,$a.x,$a.y)}var Kv=!!(!gn&&ua.verticalIconBox);ua.iconBox&&dn(R.iconCollisionBox.collisionVertexArray,sr.icon.placed,Kv,yt?$a.x:0,yt?$a.y:0),ua.verticalIconBox&&dn(R.iconCollisionBox.collisionVertexArray,sr.icon.placed,!Kv,yt?$a.x:0,yt?$a.y:0)}}},Tt=0;Tt<R.symbolInstances.length;Tt++)ft(Tt);if(R.sortFeatures(this.transform.angle),this.retainedQueryData[R.bucketInstanceId]&&(this.retainedQueryData[R.bucketInstanceId].featureSortOrder=R.featureSortOrder),R.hasTextData()&&R.text.opacityVertexBuffer&&R.text.opacityVertexBuffer.updateData(R.text.opacityVertexArray),R.hasIconData()&&R.icon.opacityVertexBuffer&&R.icon.opacityVertexBuffer.updateData(R.icon.opacityVertexArray),R.hasIconCollisionBoxData()&&R.iconCollisionBox.collisionVertexBuffer&&R.iconCollisionBox.collisionVertexBuffer.updateData(R.iconCollisionBox.collisionVertexArray),R.hasTextCollisionBoxData()&&R.textCollisionBox.collisionVertexBuffer&&R.textCollisionBox.collisionVertexBuffer.updateData(R.textCollisionBox.collisionVertexArray),R.bucketInstanceId in this.collisionCircleArrays){var Lt=this.collisionCircleArrays[R.bucketInstanceId];R.placementInvProjMatrix=Lt.invProjMatrix,R.placementViewportMatrix=Lt.viewportMatrix,R.collisionCircleArray=Lt.circles,delete this.collisionCircleArrays[R.bucketInstanceId]}},ls.prototype.symbolFadeChange=function(R){return this.fadeDuration===0?1:(R-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ls.prototype.zoomAdjustment=function(R){return Math.max(0,(this.transform.zoom-R)/1.5)},ls.prototype.hasTransitions=function(R){return this.stale||R-this.lastPlacementChangeTime<this.fadeDuration},ls.prototype.stillRecent=function(R,G){var I=this.zoomAtLastRecencyCheck===G?1-this.zoomAdjustment(G):1;return this.zoomAtLastRecencyCheck=G,this.commitTime+this.fadeDuration*I>R},ls.prototype.setStale=function(){this.stale=!0};function dn(H,R,G,I,W){H.emplaceBack(R?1:0,G?1:0,I||0,W||0),H.emplaceBack(R?1:0,G?1:0,I||0,W||0),H.emplaceBack(R?1:0,G?1:0,I||0,W||0),H.emplaceBack(R?1:0,G?1:0,I||0,W||0)}var wi=Math.pow(2,25),sc=Math.pow(2,24),Pl=Math.pow(2,17),us=Math.pow(2,16),dl=Math.pow(2,9),ts=Math.pow(2,8),Rl=Math.pow(2,1);function wu(H){if(H.opacity===0&&!H.placed)return 0;if(H.opacity===1&&H.placed)return 4294967295;var R=H.placed?1:0,G=Math.floor(H.opacity*127);return G*wi+R*sc+G*Pl+R*us+G*dl+R*ts+G*Rl+R}var oi=0,Aa=function(R){this._sortAcrossTiles=R.layout.get("symbol-z-order")!=="viewport-y"&&R.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Aa.prototype.continuePlacement=function(R,G,I,W,re){for(var $=this._bucketParts;this._currentTileIndex<R.length;){var ve=R[this._currentTileIndex];if(G.getBucketParts($,W,ve,this._sortAcrossTiles),this._currentTileIndex++,re())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,$.sort(function(Oe,pt){return Oe.sortKey-pt.sortKey}));this._currentPartIndex<$.length;){var Ee=$[this._currentPartIndex];if(G.placeLayerBucketPart(Ee,this._seenCrossTileIDs,I),this._currentPartIndex++,re())return!0}return!1};var Ca=function(R,G,I,W,re,$,ve){this.placement=new ls(R,re,$,ve),this._currentPlacementIndex=G.length-1,this._forceFullPlacement=I,this._showCollisionBoxes=W,this._done=!1};Ca.prototype.isDone=function(){return this._done},Ca.prototype.continuePlacement=function(R,G,I){for(var W=this,re=n.browser.now(),$=function(){var wt=n.browser.now()-re;return W._forceFullPlacement?!1:wt>2};this._currentPlacementIndex>=0;){var ve=R[this._currentPlacementIndex],Ee=G[ve],Oe=this.placement.collisionIndex.transform.zoom;if(Ee.type==="symbol"&&(!Ee.minzoom||Ee.minzoom<=Oe)&&(!Ee.maxzoom||Ee.maxzoom>Oe)){this._inProgressLayer||(this._inProgressLayer=new Aa(Ee));var pt=this._inProgressLayer.continuePlacement(I[Ee.source],this.placement,this._showCollisionBoxes,Ee,$);if(pt)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ca.prototype.commit=function(R){return this.placement.commit(R),this.placement};var Fs=512/n.EXTENT/2,If=function(R,G,I){this.tileID=R,this.indexedSymbolInstances={},this.bucketInstanceId=I;for(var W=0;W<G.length;W++){var re=G.get(W),$=re.key;this.indexedSymbolInstances[$]||(this.indexedSymbolInstances[$]=[]),this.indexedSymbolInstances[$].push({crossTileID:re.crossTileID,coord:this.getScaledCoordinates(re,R)})}};If.prototype.getScaledCoordinates=function(R,G){var I=G.canonical.z-this.tileID.canonical.z,W=Fs/Math.pow(2,I);return{x:Math.floor((G.canonical.x*n.EXTENT+R.anchorX)*W),y:Math.floor((G.canonical.y*n.EXTENT+R.anchorY)*W)}},If.prototype.findMatches=function(R,G,I){for(var W=this.tileID.canonical.z<G.canonical.z?1:Math.pow(2,this.tileID.canonical.z-G.canonical.z),re=0;re<R.length;re++){var $=R.get(re);if(!$.crossTileID){var ve=this.indexedSymbolInstances[$.key];if(ve)for(var Ee=this.getScaledCoordinates($,G),Oe=0,pt=ve;Oe<pt.length;Oe+=1){var wt=pt[Oe];if(Math.abs(wt.coord.x-Ee.x)<=W&&Math.abs(wt.coord.y-Ee.y)<=W&&!I[wt.crossTileID]){I[wt.crossTileID]=!0,$.crossTileID=wt.crossTileID;break}}}}};var Ma=function(){this.maxCrossTileID=0};Ma.prototype.generate=function(){return++this.maxCrossTileID};var Ff=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ff.prototype.handleWrapJump=function(R){var G=Math.round((R-this.lng)/360);if(G!==0)for(var I in this.indexes){var W=this.indexes[I],re={};for(var $ in W){var ve=W[$];ve.tileID=ve.tileID.unwrapTo(ve.tileID.wrap+G),re[ve.tileID.key]=ve}this.indexes[I]=re}this.lng=R},Ff.prototype.addBucket=function(R,G,I){if(this.indexes[R.overscaledZ]&&this.indexes[R.overscaledZ][R.key]){if(this.indexes[R.overscaledZ][R.key].bucketInstanceId===G.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(R.overscaledZ,this.indexes[R.overscaledZ][R.key])}for(var W=0;W<G.symbolInstances.length;W++){var re=G.symbolInstances.get(W);re.crossTileID=0}this.usedCrossTileIDs[R.overscaledZ]||(this.usedCrossTileIDs[R.overscaledZ]={});var $=this.usedCrossTileIDs[R.overscaledZ];for(var ve in this.indexes){var Ee=this.indexes[ve];if(Number(ve)>R.overscaledZ)for(var Oe in Ee){var pt=Ee[Oe];pt.tileID.isChildOf(R)&&pt.findMatches(G.symbolInstances,R,$)}else{var wt=R.scaledTo(Number(ve)),yt=Ee[wt.key];yt&&yt.findMatches(G.symbolInstances,R,$)}}for(var Be=0;Be<G.symbolInstances.length;Be++){var $e=G.symbolInstances.get(Be);$e.crossTileID||($e.crossTileID=I.generate(),$[$e.crossTileID]=!0)}return this.indexes[R.overscaledZ]===void 0&&(this.indexes[R.overscaledZ]={}),this.indexes[R.overscaledZ][R.key]=new If(R,G.symbolInstances,G.bucketInstanceId),!0},Ff.prototype.removeBucketCrossTileIDs=function(R,G){for(var I in G.indexedSymbolInstances)for(var W=0,re=G.indexedSymbolInstances[I];W<re.length;W+=1){var $=re[W];delete this.usedCrossTileIDs[R][$.crossTileID]}},Ff.prototype.removeStaleBuckets=function(R){var G=!1;for(var I in this.indexes){var W=this.indexes[I];for(var re in W)R[W[re].bucketInstanceId]||(this.removeBucketCrossTileIDs(I,W[re]),delete W[re],G=!0)}return G};var jc=function(){this.layerIndexes={},this.crossTileIDs=new Ma,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};jc.prototype.addLayer=function(R,G,I){var W=this.layerIndexes[R.id];W===void 0&&(W=this.layerIndexes[R.id]=new Ff);var re=!1,$={};W.handleWrapJump(I);for(var ve=0,Ee=G;ve<Ee.length;ve+=1){var Oe=Ee[ve],pt=Oe.getBucket(R);!pt||R.id!==pt.layerIds[0]||(pt.bucketInstanceId||(pt.bucketInstanceId=++this.maxBucketInstanceId),W.addBucket(Oe.tileID,pt,this.crossTileIDs)&&(re=!0),$[pt.bucketInstanceId]=!0)}return W.removeStaleBuckets($)&&(re=!0),re},jc.prototype.pruneUnusedLayers=function(R){var G={};R.forEach(function(W){G[W]=!0});for(var I in this.layerIndexes)G[I]||delete this.layerIndexes[I]};var pl=function(H,R){return n.emitValidationErrors(H,R&&R.filter(function(G){return G.identifier!=="source.canvas"}))},hf=n.pick(Pi,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),tl=n.pick(Pi,["setCenter","setZoom","setBearing","setPitch"]),Lo=Ya(),nu=function(H){function R(G,I){var W=this;I===void 0&&(I={}),H.call(this),this.map=G,this.dispatcher=new U(Vi(),this),this.imageManager=new w,this.imageManager.setEventedParent(this),this.glyphManager=new C(G._requestManager,I.localIdeographFontFamily),this.lineAtlas=new O(256,512),this.crossTileSymbolIndex=new jc,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new n.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",n.getReferrer());var re=this;this._rtlTextPluginCallback=R.registerForPluginStateChange(function($){var ve={pluginStatus:$.pluginStatus,pluginURL:$.pluginURL};re.dispatcher.broadcast("syncRTLPluginState",ve,function(Ee,Oe){if(n.triggerPluginCompletionEvent(Ee),Oe){var pt=Oe.every(function(yt){return yt});if(pt)for(var wt in re.sourceCaches)re.sourceCaches[wt].reload()}})}),this.on("data",function($){if(!($.dataType!=="source"||$.sourceDataType!=="metadata")){var ve=W.sourceCaches[$.sourceId];if(ve){var Ee=ve.getSource();if(!(!Ee||!Ee.vectorLayerIds))for(var Oe in W._layers){var pt=W._layers[Oe];pt.source===Ee.id&&W._validateLayer(pt)}}}})}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.loadURL=function(I,W){var re=this;W===void 0&&(W={}),this.fire(new n.Event("dataloading",{dataType:"style"}));var $=typeof W.validate=="boolean"?W.validate:!n.isMapboxURL(I);I=this.map._requestManager.normalizeStyleURL(I,W.accessToken);var ve=this.map._requestManager.transformRequest(I,n.ResourceType.Style);this._request=n.getJSON(ve,function(Ee,Oe){re._request=null,Ee?re.fire(new n.ErrorEvent(Ee)):Oe&&re._load(Oe,$)})},R.prototype.loadJSON=function(I,W){var re=this;W===void 0&&(W={}),this.fire(new n.Event("dataloading",{dataType:"style"})),this._request=n.browser.frame(function(){re._request=null,re._load(I,W.validate!==!1)})},R.prototype.loadEmpty=function(){this.fire(new n.Event("dataloading",{dataType:"style"})),this._load(Lo,!1)},R.prototype._load=function(I,W){if(!(W&&pl(this,n.validateStyle(I)))){this._loaded=!0,this.stylesheet=I;for(var re in I.sources)this.addSource(re,I.sources[re],{validate:!1});I.sprite?this._loadSprite(I.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(I.glyphs);var $=ta(this.stylesheet.layers);this._order=$.map(function(pt){return pt.id}),this._layers={},this._serializedLayers={};for(var ve=0,Ee=$;ve<Ee.length;ve+=1){var Oe=Ee[ve];Oe=n.createStyleLayer(Oe),Oe.setEventedParent(this,{layer:{id:Oe.id}}),this._layers[Oe.id]=Oe,this._serializedLayers[Oe.id]=Oe.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new q(this.stylesheet.light),this.fire(new n.Event("data",{dataType:"style"})),this.fire(new n.Event("style.load"))}},R.prototype._loadSprite=function(I){var W=this;this._spriteRequest=x(I,this.map._requestManager,function(re,$){if(W._spriteRequest=null,re)W.fire(new n.ErrorEvent(re));else if($)for(var ve in $)W.imageManager.addImage(ve,$[ve]);W.imageManager.setLoaded(!0),W._availableImages=W.imageManager.listImages(),W.dispatcher.broadcast("setImages",W._availableImages),W.fire(new n.Event("data",{dataType:"style"}))})},R.prototype._validateLayer=function(I){var W=this.sourceCaches[I.source];if(W){var re=I.sourceLayer;if(re){var $=W.getSource();($.type==="geojson"||$.vectorLayerIds&&$.vectorLayerIds.indexOf(re)===-1)&&this.fire(new n.ErrorEvent(new Error('Source layer "'+re+'" does not exist on source "'+$.id+'" as specified by style layer "'+I.id+'"')))}}},R.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var I in this.sourceCaches)if(!this.sourceCaches[I].loaded())return!1;return!!this.imageManager.isLoaded()},R.prototype._serializeLayers=function(I){for(var W=[],re=0,$=I;re<$.length;re+=1){var ve=$[re],Ee=this._layers[ve];Ee.type!=="custom"&&W.push(Ee.serialize())}return W},R.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var I in this.sourceCaches)if(this.sourceCaches[I].hasTransition())return!0;for(var W in this._layers)if(this._layers[W].hasTransition())return!0;return!1},R.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},R.prototype.update=function(I){if(this._loaded){var W=this._changed;if(this._changed){var re=Object.keys(this._updatedLayers),$=Object.keys(this._removedLayers);(re.length||$.length)&&this._updateWorkerLayers(re,$);for(var ve in this._updatedSources){var Ee=this._updatedSources[ve];Ee==="reload"?this._reloadSource(ve):Ee==="clear"&&this._clearSource(ve)}this._updateTilesForChangedImages();for(var Oe in this._updatedPaintProps)this._layers[Oe].updateTransitions(I);this.light.updateTransitions(I),this._resetUpdates()}var pt={};for(var wt in this.sourceCaches){var yt=this.sourceCaches[wt];pt[wt]=yt.used,yt.used=!1}for(var Be=0,$e=this._order;Be<$e.length;Be+=1){var ft=$e[Be],Tt=this._layers[ft];Tt.recalculate(I,this._availableImages),!Tt.isHidden(I.zoom)&&Tt.source&&(this.sourceCaches[Tt.source].used=!0)}for(var Lt in pt){var Pt=this.sourceCaches[Lt];pt[Lt]!==Pt.used&&Pt.fire(new n.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Lt}))}this.light.recalculate(I),this.z=I.zoom,W&&this.fire(new n.Event("data",{dataType:"style"}))}},R.prototype._updateTilesForChangedImages=function(){var I=Object.keys(this._changedImages);if(I.length){for(var W in this.sourceCaches)this.sourceCaches[W].reloadTilesForDependencies(["icons","patterns"],I);this._changedImages={}}},R.prototype._updateWorkerLayers=function(I,W){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(I),removedIds:W})},R.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},R.prototype.setState=function(I){var W=this;if(this._checkLoaded(),pl(this,n.validateStyle(I)))return!1;I=n.clone$1(I),I.layers=ta(I.layers);var re=ln(this.serialize(),I).filter(function(ve){return!(ve.command in tl)});if(re.length===0)return!1;var $=re.filter(function(ve){return!(ve.command in hf)});if($.length>0)throw new Error("Unimplemented: "+$.map(function(ve){return ve.command}).join(", ")+".");return re.forEach(function(ve){ve.command!=="setTransition"&&W[ve.command].apply(W,ve.args)}),this.stylesheet=I,!0},R.prototype.addImage=function(I,W){if(this.getImage(I))return this.fire(new n.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(I,W),this._afterImageUpdated(I)},R.prototype.updateImage=function(I,W){this.imageManager.updateImage(I,W)},R.prototype.getImage=function(I){return this.imageManager.getImage(I)},R.prototype.removeImage=function(I){if(!this.getImage(I))return this.fire(new n.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(I),this._afterImageUpdated(I)},R.prototype._afterImageUpdated=function(I){this._availableImages=this.imageManager.listImages(),this._changedImages[I]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new n.Event("data",{dataType:"style"}))},R.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},R.prototype.addSource=function(I,W,re){var $=this;if(re===void 0&&(re={}),this._checkLoaded(),this.sourceCaches[I]!==void 0)throw new Error("There is already a source with this ID");if(!W.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(W).join(", ")+".");var ve=["vector","raster","geojson","video","image"],Ee=ve.indexOf(W.type)>=0;if(!(Ee&&this._validate(n.validateStyle.source,"sources."+I,W,null,re))){this.map&&this.map._collectResourceTiming&&(W.collectResourceTiming=!0);var Oe=this.sourceCaches[I]=new yr(I,W,this.dispatcher);Oe.style=this,Oe.setEventedParent(this,function(){return{isSourceLoaded:$.loaded(),source:Oe.serialize(),sourceId:I}}),Oe.onAdd(this.map),this._changed=!0}},R.prototype.removeSource=function(I){if(this._checkLoaded(),this.sourceCaches[I]===void 0)throw new Error("There is no source with this ID");for(var W in this._layers)if(this._layers[W].source===I)return this.fire(new n.ErrorEvent(new Error('Source "'+I+'" cannot be removed while layer "'+W+'" is using it.')));var re=this.sourceCaches[I];delete this.sourceCaches[I],delete this._updatedSources[I],re.fire(new n.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:I})),re.setEventedParent(null),re.clearTiles(),re.onRemove&&re.onRemove(this.map),this._changed=!0},R.prototype.setGeoJSONSourceData=function(I,W){this._checkLoaded();var re=this.sourceCaches[I].getSource();re.setData(W),this._changed=!0},R.prototype.getSource=function(I){return this.sourceCaches[I]&&this.sourceCaches[I].getSource()},R.prototype.addLayer=function(I,W,re){re===void 0&&(re={}),this._checkLoaded();var $=I.id;if(this.getLayer($)){this.fire(new n.ErrorEvent(new Error('Layer with id "'+$+'" already exists on this map')));return}var ve;if(I.type==="custom"){if(pl(this,n.validateCustomStyleLayer(I)))return;ve=n.createStyleLayer(I)}else{if(typeof I.source=="object"&&(this.addSource($,I.source),I=n.clone$1(I),I=n.extend(I,{source:$})),this._validate(n.validateStyle.layer,"layers."+$,I,{arrayIndex:-1},re))return;ve=n.createStyleLayer(I),this._validateLayer(ve),ve.setEventedParent(this,{layer:{id:$}}),this._serializedLayers[ve.id]=ve.serialize()}var Ee=W?this._order.indexOf(W):this._order.length;if(W&&Ee===-1){this.fire(new n.ErrorEvent(new Error('Layer with id "'+W+'" does not exist on this map.')));return}if(this._order.splice(Ee,0,$),this._layerOrderChanged=!0,this._layers[$]=ve,this._removedLayers[$]&&ve.source&&ve.type!=="custom"){var Oe=this._removedLayers[$];delete this._removedLayers[$],Oe.type!==ve.type?this._updatedSources[ve.source]="clear":(this._updatedSources[ve.source]="reload",this.sourceCaches[ve.source].pause())}this._updateLayer(ve),ve.onAdd&&ve.onAdd(this.map)},R.prototype.moveLayer=function(I,W){this._checkLoaded(),this._changed=!0;var re=this._layers[I];if(!re){this.fire(new n.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style and cannot be moved.")));return}if(I!==W){var $=this._order.indexOf(I);this._order.splice($,1);var ve=W?this._order.indexOf(W):this._order.length;if(W&&ve===-1){this.fire(new n.ErrorEvent(new Error('Layer with id "'+W+'" does not exist on this map.')));return}this._order.splice(ve,0,I),this._layerOrderChanged=!0}},R.prototype.removeLayer=function(I){this._checkLoaded();var W=this._layers[I];if(!W){this.fire(new n.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style and cannot be removed.")));return}W.setEventedParent(null);var re=this._order.indexOf(I);this._order.splice(re,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[I]=W,delete this._layers[I],delete this._serializedLayers[I],delete this._updatedLayers[I],delete this._updatedPaintProps[I],W.onRemove&&W.onRemove(this.map)},R.prototype.getLayer=function(I){return this._layers[I]},R.prototype.hasLayer=function(I){return I in this._layers},R.prototype.setLayerZoomRange=function(I,W,re){this._checkLoaded();var $=this.getLayer(I);if(!$){this.fire(new n.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style and cannot have zoom extent.")));return}$.minzoom===W&&$.maxzoom===re||(W!=null&&($.minzoom=W),re!=null&&($.maxzoom=re),this._updateLayer($))},R.prototype.setFilter=function(I,W,re){re===void 0&&(re={}),this._checkLoaded();var $=this.getLayer(I);if(!$){this.fire(new n.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style and cannot be filtered.")));return}if(!n.deepEqual($.filter,W)){if(W==null){$.filter=void 0,this._updateLayer($);return}this._validate(n.validateStyle.filter,"layers."+$.id+".filter",W,null,re)||($.filter=n.clone$1(W),this._updateLayer($))}},R.prototype.getFilter=function(I){return n.clone$1(this.getLayer(I).filter)},R.prototype.setLayoutProperty=function(I,W,re,$){$===void 0&&($={}),this._checkLoaded();var ve=this.getLayer(I);if(!ve){this.fire(new n.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style and cannot be styled.")));return}n.deepEqual(ve.getLayoutProperty(W),re)||(ve.setLayoutProperty(W,re,$),this._updateLayer(ve))},R.prototype.getLayoutProperty=function(I,W){var re=this.getLayer(I);if(!re){this.fire(new n.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style.")));return}return re.getLayoutProperty(W)},R.prototype.setPaintProperty=function(I,W,re,$){$===void 0&&($={}),this._checkLoaded();var ve=this.getLayer(I);if(!ve){this.fire(new n.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style and cannot be styled.")));return}if(!n.deepEqual(ve.getPaintProperty(W),re)){var Ee=ve.setPaintProperty(W,re,$);Ee&&this._updateLayer(ve),this._changed=!0,this._updatedPaintProps[I]=!0}},R.prototype.getPaintProperty=function(I,W){return this.getLayer(I).getPaintProperty(W)},R.prototype.setFeatureState=function(I,W){this._checkLoaded();var re=I.source,$=I.sourceLayer,ve=this.sourceCaches[re];if(ve===void 0){this.fire(new n.ErrorEvent(new Error("The source '"+re+"' does not exist in the map's style.")));return}var Ee=ve.getSource().type;if(Ee==="geojson"&&$){this.fire(new n.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(Ee==="vector"&&!$){this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}I.id===void 0&&this.fire(new n.ErrorEvent(new Error("The feature id parameter must be provided."))),ve.setFeatureState($,I.id,W)},R.prototype.removeFeatureState=function(I,W){this._checkLoaded();var re=I.source,$=this.sourceCaches[re];if($===void 0){this.fire(new n.ErrorEvent(new Error("The source '"+re+"' does not exist in the map's style.")));return}var ve=$.getSource().type,Ee=ve==="vector"?I.sourceLayer:void 0;if(ve==="vector"&&!Ee){this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(W&&typeof I.id!="string"&&typeof I.id!="number"){this.fire(new n.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));return}$.removeFeatureState(Ee,I.id,W)},R.prototype.getFeatureState=function(I){this._checkLoaded();var W=I.source,re=I.sourceLayer,$=this.sourceCaches[W];if($===void 0){this.fire(new n.ErrorEvent(new Error("The source '"+W+"' does not exist in the map's style.")));return}var ve=$.getSource().type;if(ve==="vector"&&!re){this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return I.id===void 0&&this.fire(new n.ErrorEvent(new Error("The feature id parameter must be provided."))),$.getFeatureState(re,I.id)},R.prototype.getTransition=function(){return n.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},R.prototype.serialize=function(){return n.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:n.mapObject(this.sourceCaches,function(I){return I.serialize()}),layers:this._serializeLayers(this._order)},function(I){return I!==void 0})},R.prototype._updateLayer=function(I){this._updatedLayers[I.id]=!0,I.source&&!this._updatedSources[I.source]&&this.sourceCaches[I.source].getSource().type!=="raster"&&(this._updatedSources[I.source]="reload",this.sourceCaches[I.source].pause()),this._changed=!0},R.prototype._flattenAndSortRenderedFeatures=function(I){for(var W=this,re=function(gn){return W._layers[gn].type==="fill-extrusion"},$={},ve=[],Ee=this._order.length-1;Ee>=0;Ee--){var Oe=this._order[Ee];if(re(Oe)){$[Oe]=Ee;for(var pt=0,wt=I;pt<wt.length;pt+=1){var yt=wt[pt],Be=yt[Oe];if(Be)for(var $e=0,ft=Be;$e<ft.length;$e+=1){var Tt=ft[$e];ve.push(Tt)}}}}ve.sort(function(gn,si){return si.intersectionZ-gn.intersectionZ});for(var Lt=[],Pt=this._order.length-1;Pt>=0;Pt--){var jt=this._order[Pt];if(re(jt))for(var Nt=ve.length-1;Nt>=0;Nt--){var Ft=ve[Nt].feature;if($[Ft.layer.id]<Pt)break;Lt.push(Ft),ve.pop()}else for(var Kt=0,Ct=I;Kt<Ct.length;Kt+=1){var sr=Ct[Kt],xr=sr[jt];if(xr)for(var Dr=0,fn=xr;Dr<fn.length;Dr+=1){var Wr=fn[Dr];Lt.push(Wr.feature)}}}return Lt},R.prototype.queryRenderedFeatures=function(I,W,re){W&&W.filter&&this._validate(n.validateStyle.filter,"queryRenderedFeatures.filter",W.filter,null,W);var $={};if(W&&W.layers){if(!Array.isArray(W.layers))return this.fire(new n.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var ve=0,Ee=W.layers;ve<Ee.length;ve+=1){var Oe=Ee[ve],pt=this._layers[Oe];if(!pt)return this.fire(new n.ErrorEvent(new Error("The layer '"+Oe+"' does not exist in the map's style and cannot be queried for features."))),[];$[pt.source]=!0}}var wt=[];W.availableImages=this._availableImages;for(var yt in this.sourceCaches)W.layers&&!$[yt]||wt.push(ae(this.sourceCaches[yt],this._layers,this._serializedLayers,I,W,re));return this.placement&&wt.push(_e(this._layers,this._serializedLayers,this.sourceCaches,I,W,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(wt)},R.prototype.querySourceFeatures=function(I,W){W&&W.filter&&this._validate(n.validateStyle.filter,"querySourceFeatures.filter",W.filter,null,W);var re=this.sourceCaches[I];return re?Ce(re,W):[]},R.prototype.addSourceType=function(I,W,re){if(R.getSourceType(I))return re(new Error('A source type called "'+I+'" already exists.'));if(R.setSourceType(I,W),!W.workerSourceURL)return re(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:I,url:W.workerSourceURL},re)},R.prototype.getLight=function(){return this.light.getLight()},R.prototype.setLight=function(I,W){W===void 0&&(W={}),this._checkLoaded();var re=this.light.getLight(),$=!1;for(var ve in I)if(!n.deepEqual(I[ve],re[ve])){$=!0;break}if($){var Ee={now:n.browser.now(),transition:n.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(I,W),this.light.updateTransitions(Ee)}},R.prototype._validate=function(I,W,re,$,ve){return ve===void 0&&(ve={}),ve&&ve.validate===!1?!1:pl(this,I.call(n.validateStyle,n.extend({key:W,style:this.serialize(),value:re,styleSpec:n.styleSpec},$)))},R.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),n.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var I in this._layers){var W=this._layers[I];W.setEventedParent(null)}for(var re in this.sourceCaches)this.sourceCaches[re].clearTiles(),this.sourceCaches[re].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},R.prototype._clearSource=function(I){this.sourceCaches[I].clearTiles()},R.prototype._reloadSource=function(I){this.sourceCaches[I].resume(),this.sourceCaches[I].reload()},R.prototype._updateSources=function(I){for(var W in this.sourceCaches)this.sourceCaches[W].update(I)},R.prototype._generateCollisionBoxes=function(){for(var I in this.sourceCaches)this._reloadSource(I)},R.prototype._updatePlacement=function(I,W,re,$,ve){ve===void 0&&(ve=!1);for(var Ee=!1,Oe=!1,pt={},wt=0,yt=this._order;wt<yt.length;wt+=1){var Be=yt[wt],$e=this._layers[Be];if($e.type==="symbol"){if(!pt[$e.source]){var ft=this.sourceCaches[$e.source];pt[$e.source]=ft.getRenderableIds(!0).map(function(Kt){return ft.getTileByID(Kt)}).sort(function(Kt,Ct){return Ct.tileID.overscaledZ-Kt.tileID.overscaledZ||(Kt.tileID.isLessThan(Ct.tileID)?-1:1)})}var Tt=this.crossTileSymbolIndex.addLayer($e,pt[$e.source],I.center.lng);Ee=Ee||Tt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),ve=ve||this._layerOrderChanged||re===0,(ve||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(n.browser.now(),I.zoom))&&(this.pauseablePlacement=new Ca(I,this._order,ve,W,re,$,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,pt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(n.browser.now()),Oe=!0),Ee&&this.pauseablePlacement.placement.setStale()),Oe||Ee)for(var Lt=0,Pt=this._order;Lt<Pt.length;Lt+=1){var jt=Pt[Lt],Nt=this._layers[jt];Nt.type==="symbol"&&this.placement.updateLayerOpacities(Nt,pt[Nt.source])}var Ft=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(n.browser.now());return Ft},R.prototype._releaseSymbolFadeTiles=function(){for(var I in this.sourceCaches)this.sourceCaches[I].releaseSymbolFadeTiles()},R.prototype.getImages=function(I,W,re){this.imageManager.getImages(W.icons,re),this._updateTilesForChangedImages();var $=this.sourceCaches[W.source];$&&$.setDependencies(W.tileID.key,W.type,W.icons)},R.prototype.getGlyphs=function(I,W,re){this.glyphManager.getGlyphs(W.stacks,re)},R.prototype.getResource=function(I,W,re){return n.makeRequest(W,re)},R}(n.Evented);nu.getSourceType=me,nu.setSourceType=he,nu.registerForPluginStateChange=n.registerForPluginStateChange;var Tu=n.createLayout([{name:"a_pos",type:"Int16",components:2}]),Sh=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,Hu=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,ov=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Sc="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",fo=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,qf="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",Eh=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Us=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,_s="void main() {gl_FragColor=vec4(1.0);}",kh="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",vf=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Mo=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,ps=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,yo="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",Po="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",Ec="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",qs="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",Hl="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",df="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",bd="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",Au=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Xp=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,Gl=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,po=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,zv=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,pf=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Yl=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,sv=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,Ch=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,lv=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,Mu=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ov=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,uv=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Lh="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",fv=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,wd="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",Zd=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,zf=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Bv=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,lc=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Ph=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Gu=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,kc=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Of=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,Nv=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Uv="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",Vv=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,cv=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,hv=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Hv=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,iu=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,vv=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,ol=No(Sh,Hu),au=No(ov,Sc),Bf=No(fo,qf),Vs=No(Eh,Us),Kc=No(_s,kh),Nf=No(vf,Mo),Dl=No(ps,yo),zs=No(Po,Ec),jd=No(qs,Hl),Kd=No(df,bd),Su=No(Au,Xp),gf=No(Gl,po),ou=No(zv,pf),Jd=No(Yl,sv),Jc=No(Ch,lv),Qc=No(Mu,Ov),Eu=No(uv,Lh),Gv=No(fv,wd),dv=No(Zd,zf),pv=No(Bv,lc),Yv=No(Ph,Gu),$c=No(kc,Of),Uf=No(Nv,Uv),Cc=No(Vv,cv),Rh=No(hv,Hv),Td=No(iu,vv);function No(H,R){var G=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,I=R.match(/attribute ([\w]+) ([\w]+)/g),W=H.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),re=R.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),$=re?re.concat(W):W,ve={};return H=H.replace(G,function(Ee,Oe,pt,wt,yt){return ve[yt]=!0,Oe==="define"?`
#ifndef HAS_UNIFORM_u_`+yt+`
varying `+pt+" "+wt+" "+yt+`;
#else
uniform `+pt+" "+wt+" u_"+yt+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+yt+`
    `+pt+" "+wt+" "+yt+" = u_"+yt+`;
#endif
`}),R=R.replace(G,function(Ee,Oe,pt,wt,yt){var Be=wt==="float"?"vec2":"vec4",$e=yt.match(/color/)?"color":Be;return ve[yt]?Oe==="define"?`
#ifndef HAS_UNIFORM_u_`+yt+`
uniform lowp float u_`+yt+`_t;
attribute `+pt+" "+Be+" a_"+yt+`;
varying `+pt+" "+wt+" "+yt+`;
#else
uniform `+pt+" "+wt+" u_"+yt+`;
#endif
`:$e==="vec4"?`
#ifndef HAS_UNIFORM_u_`+yt+`
    `+yt+" = a_"+yt+`;
#else
    `+pt+" "+wt+" "+yt+" = u_"+yt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+yt+`
    `+yt+" = unpack_mix_"+$e+"(a_"+yt+", u_"+yt+`_t);
#else
    `+pt+" "+wt+" "+yt+" = u_"+yt+`;
#endif
`:Oe==="define"?`
#ifndef HAS_UNIFORM_u_`+yt+`
uniform lowp float u_`+yt+`_t;
attribute `+pt+" "+Be+" a_"+yt+`;
#else
uniform `+pt+" "+wt+" u_"+yt+`;
#endif
`:$e==="vec4"?`
#ifndef HAS_UNIFORM_u_`+yt+`
    `+pt+" "+wt+" "+yt+" = a_"+yt+`;
#else
    `+pt+" "+wt+" "+yt+" = u_"+yt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+yt+`
    `+pt+" "+wt+" "+yt+" = unpack_mix_"+$e+"(a_"+yt+", u_"+yt+`_t);
#else
    `+pt+" "+wt+" "+yt+" = u_"+yt+`;
#endif
`}),{fragmentSource:H,vertexSource:R,staticAttributes:I,staticUniforms:$}}var eh=Object.freeze({__proto__:null,prelude:ol,background:au,backgroundPattern:Bf,circle:Vs,clippingMask:Kc,heatmap:Nf,heatmapTexture:Dl,collisionBox:zs,collisionCircle:jd,debug:Kd,fill:Su,fillOutline:gf,fillOutlinePattern:ou,fillPattern:Jd,fillExtrusion:Jc,fillExtrusionPattern:Qc,hillshadePrepare:Eu,hillshade:Gv,line:dv,lineGradient:pv,linePattern:Yv,lineSDF:$c,raster:Uf,symbolIcon:Cc,symbolSDF:Rh,symbolTextAndIcon:Td}),Lc=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Lc.prototype.bind=function(R,G,I,W,re,$,ve,Ee){this.context=R;for(var Oe=this.boundPaintVertexBuffers.length!==W.length,pt=0;!Oe&&pt<W.length;pt++)this.boundPaintVertexBuffers[pt]!==W[pt]&&(Oe=!0);var wt=!this.vao||this.boundProgram!==G||this.boundLayoutVertexBuffer!==I||Oe||this.boundIndexBuffer!==re||this.boundVertexOffset!==$||this.boundDynamicVertexBuffer!==ve||this.boundDynamicVertexBuffer2!==Ee;!R.extVertexArrayObject||wt?this.freshBind(G,I,W,re,$,ve,Ee):(R.bindVertexArrayOES.set(this.vao),ve&&ve.bind(),re&&re.dynamicDraw&&re.bind(),Ee&&Ee.bind())},Lc.prototype.freshBind=function(R,G,I,W,re,$,ve){var Ee,Oe=R.numAttributes,pt=this.context,wt=pt.gl;if(pt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=pt.extVertexArrayObject.createVertexArrayOES(),pt.bindVertexArrayOES.set(this.vao),Ee=0,this.boundProgram=R,this.boundLayoutVertexBuffer=G,this.boundPaintVertexBuffers=I,this.boundIndexBuffer=W,this.boundVertexOffset=re,this.boundDynamicVertexBuffer=$,this.boundDynamicVertexBuffer2=ve;else{Ee=pt.currentNumAttributes||0;for(var yt=Oe;yt<Ee;yt++)wt.disableVertexAttribArray(yt)}G.enableAttributes(wt,R);for(var Be=0,$e=I;Be<$e.length;Be+=1){var ft=$e[Be];ft.enableAttributes(wt,R)}$&&$.enableAttributes(wt,R),ve&&ve.enableAttributes(wt,R),G.bind(),G.setVertexAttribPointers(wt,R,re);for(var Tt=0,Lt=I;Tt<Lt.length;Tt+=1){var Pt=Lt[Tt];Pt.bind(),Pt.setVertexAttribPointers(wt,R,re)}$&&($.bind(),$.setVertexAttribPointers(wt,R,re)),W&&W.bind(),ve&&(ve.bind(),ve.setVertexAttribPointers(wt,R,re)),pt.currentNumAttributes=Oe},Lc.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};function Pc(H){for(var R=[],G=0;G<H.length;G++)if(H[G]!==null){var I=H[G].split(" ");R.push(I.pop())}return R}var th=function(R,G,I,W,re,$){var ve=R.gl;this.program=ve.createProgram();for(var Ee=Pc(I.staticAttributes),Oe=W?W.getBinderAttributes():[],pt=Ee.concat(Oe),wt=I.staticUniforms?Pc(I.staticUniforms):[],yt=W?W.getBinderUniforms():[],Be=wt.concat(yt),$e=[],ft=0,Tt=Be;ft<Tt.length;ft+=1){var Lt=Tt[ft];$e.indexOf(Lt)<0&&$e.push(Lt)}var Pt=W?W.defines():[];$&&Pt.push("#define OVERDRAW_INSPECTOR;");var jt=Pt.concat(ol.fragmentSource,I.fragmentSource).join(`
`),Nt=Pt.concat(ol.vertexSource,I.vertexSource).join(`
`),Ft=ve.createShader(ve.FRAGMENT_SHADER);if(ve.isContextLost()){this.failedToCreate=!0;return}ve.shaderSource(Ft,jt),ve.compileShader(Ft),ve.attachShader(this.program,Ft);var Kt=ve.createShader(ve.VERTEX_SHADER);if(ve.isContextLost()){this.failedToCreate=!0;return}ve.shaderSource(Kt,Nt),ve.compileShader(Kt),ve.attachShader(this.program,Kt),this.attributes={};var Ct={};this.numAttributes=pt.length;for(var sr=0;sr<this.numAttributes;sr++)pt[sr]&&(ve.bindAttribLocation(this.program,sr,pt[sr]),this.attributes[pt[sr]]=sr);ve.linkProgram(this.program),ve.deleteShader(Kt),ve.deleteShader(Ft);for(var xr=0;xr<$e.length;xr++){var Dr=$e[xr];if(Dr&&!Ct[Dr]){var fn=ve.getUniformLocation(this.program,Dr);fn&&(Ct[Dr]=fn)}}this.fixedUniforms=re(R,Ct),this.binderUniforms=W?W.getUniforms(R,Ct):[]};th.prototype.draw=function(R,G,I,W,re,$,ve,Ee,Oe,pt,wt,yt,Be,$e,ft,Tt){var Lt,Pt=R.gl;if(!this.failedToCreate){R.program.set(this.program),R.setDepthMode(I),R.setStencilMode(W),R.setColorMode(re),R.setCullFace($);for(var jt in this.fixedUniforms)this.fixedUniforms[jt].set(ve[jt]);$e&&$e.setUniforms(R,this.binderUniforms,yt,{zoom:Be});for(var Nt=(Lt={},Lt[Pt.LINES]=2,Lt[Pt.TRIANGLES]=3,Lt[Pt.LINE_STRIP]=1,Lt)[G],Ft=0,Kt=wt.get();Ft<Kt.length;Ft+=1){var Ct=Kt[Ft],sr=Ct.vaos||(Ct.vaos={}),xr=sr[Ee]||(sr[Ee]=new Lc);xr.bind(R,this,Oe,$e?$e.getPaintVertexBuffers():[],pt,Ct.vertexOffset,ft,Tt),Pt.drawElements(G,Ct.primitiveLength*Nt,Pt.UNSIGNED_SHORT,Ct.primitiveOffset*Nt*2)}}};function yf(H,R,G){var I=1/Co(G,1,R.transform.tileZoom),W=Math.pow(2,G.tileID.overscaledZ),re=G.tileSize*Math.pow(2,R.transform.tileZoom)/W,$=re*(G.tileID.canonical.x+G.tileID.wrap*W),ve=re*G.tileID.canonical.y;return{u_image:0,u_texsize:G.imageAtlasTexture.size,u_scale:[I,H.fromScale,H.toScale],u_fade:H.t,u_pixel_coord_upper:[$>>16,ve>>16],u_pixel_coord_lower:[$&65535,ve&65535]}}function uc(H,R,G,I){var W=G.imageManager.getPattern(H.from.toString()),re=G.imageManager.getPattern(H.to.toString()),$=G.imageManager.getPixelSize(),ve=$.width,Ee=$.height,Oe=Math.pow(2,I.tileID.overscaledZ),pt=I.tileSize*Math.pow(2,G.transform.tileZoom)/Oe,wt=pt*(I.tileID.canonical.x+I.tileID.wrap*Oe),yt=pt*I.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:W.tl,u_pattern_br_a:W.br,u_pattern_tl_b:re.tl,u_pattern_br_b:re.br,u_texsize:[ve,Ee],u_mix:R.t,u_pattern_size_a:W.displaySize,u_pattern_size_b:re.displaySize,u_scale_a:R.fromScale,u_scale_b:R.toScale,u_tile_units_to_pixels:1/Co(I,1,G.transform.tileZoom),u_pixel_coord_upper:[wt>>16,yt>>16],u_pixel_coord_lower:[wt&65535,yt&65535]}}var Wv=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_lightpos:new n.Uniform3f(H,R.u_lightpos),u_lightintensity:new n.Uniform1f(H,R.u_lightintensity),u_lightcolor:new n.Uniform3f(H,R.u_lightcolor),u_vertical_gradient:new n.Uniform1f(H,R.u_vertical_gradient),u_opacity:new n.Uniform1f(H,R.u_opacity)}},Hs=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_lightpos:new n.Uniform3f(H,R.u_lightpos),u_lightintensity:new n.Uniform1f(H,R.u_lightintensity),u_lightcolor:new n.Uniform3f(H,R.u_lightcolor),u_vertical_gradient:new n.Uniform1f(H,R.u_vertical_gradient),u_height_factor:new n.Uniform1f(H,R.u_height_factor),u_image:new n.Uniform1i(H,R.u_image),u_texsize:new n.Uniform2f(H,R.u_texsize),u_pixel_coord_upper:new n.Uniform2f(H,R.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(H,R.u_pixel_coord_lower),u_scale:new n.Uniform3f(H,R.u_scale),u_fade:new n.Uniform1f(H,R.u_fade),u_opacity:new n.Uniform1f(H,R.u_opacity)}},gv=function(H,R,G,I){var W=R.style.light,re=W.properties.get("position"),$=[re.x,re.y,re.z],ve=n.create$1();W.properties.get("anchor")==="viewport"&&n.fromRotation(ve,-R.transform.angle),n.transformMat3($,$,ve);var Ee=W.properties.get("color");return{u_matrix:H,u_lightpos:$,u_lightintensity:W.properties.get("intensity"),u_lightcolor:[Ee.r,Ee.g,Ee.b],u_vertical_gradient:+G,u_opacity:I}},Vf=function(H,R,G,I,W,re,$){return n.extend(gv(H,R,G,I),yf(re,R,$),{u_height_factor:-Math.pow(2,W.overscaledZ)/$.tileSize/8})},Hf=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix)}},Gf=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_image:new n.Uniform1i(H,R.u_image),u_texsize:new n.Uniform2f(H,R.u_texsize),u_pixel_coord_upper:new n.Uniform2f(H,R.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(H,R.u_pixel_coord_lower),u_scale:new n.Uniform3f(H,R.u_scale),u_fade:new n.Uniform1f(H,R.u_fade)}},bs=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_world:new n.Uniform2f(H,R.u_world)}},yl=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_world:new n.Uniform2f(H,R.u_world),u_image:new n.Uniform1i(H,R.u_image),u_texsize:new n.Uniform2f(H,R.u_texsize),u_pixel_coord_upper:new n.Uniform2f(H,R.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(H,R.u_pixel_coord_lower),u_scale:new n.Uniform3f(H,R.u_scale),u_fade:new n.Uniform1f(H,R.u_fade)}},Yu=function(H){return{u_matrix:H}},Yf=function(H,R,G,I){return n.extend(Yu(H),yf(G,R,I))},Wu=function(H,R){return{u_matrix:H,u_world:R}},Dh=function(H,R,G,I,W){return n.extend(Yf(H,R,G,I),{u_world:W})},Ue=function(H,R){return{u_camera_to_center_distance:new n.Uniform1f(H,R.u_camera_to_center_distance),u_scale_with_map:new n.Uniform1i(H,R.u_scale_with_map),u_pitch_with_map:new n.Uniform1i(H,R.u_pitch_with_map),u_extrude_scale:new n.Uniform2f(H,R.u_extrude_scale),u_device_pixel_ratio:new n.Uniform1f(H,R.u_device_pixel_ratio),u_matrix:new n.UniformMatrix4f(H,R.u_matrix)}},st=function(H,R,G,I){var W=H.transform,re,$;if(I.paint.get("circle-pitch-alignment")==="map"){var ve=Co(G,1,W.zoom);re=!0,$=[ve,ve]}else re=!1,$=W.pixelsToGLUnits;return{u_camera_to_center_distance:W.cameraToCenterDistance,u_scale_with_map:+(I.paint.get("circle-pitch-scale")==="map"),u_matrix:H.translatePosMatrix(R.posMatrix,G,I.paint.get("circle-translate"),I.paint.get("circle-translate-anchor")),u_pitch_with_map:+re,u_device_pixel_ratio:n.browser.devicePixelRatio,u_extrude_scale:$}},Gt=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_camera_to_center_distance:new n.Uniform1f(H,R.u_camera_to_center_distance),u_pixels_to_tile_units:new n.Uniform1f(H,R.u_pixels_to_tile_units),u_extrude_scale:new n.Uniform2f(H,R.u_extrude_scale),u_overscale_factor:new n.Uniform1f(H,R.u_overscale_factor)}},Rt=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_inv_matrix:new n.UniformMatrix4f(H,R.u_inv_matrix),u_camera_to_center_distance:new n.Uniform1f(H,R.u_camera_to_center_distance),u_viewport_size:new n.Uniform2f(H,R.u_viewport_size)}},hr=function(H,R,G){var I=Co(G,1,R.zoom),W=Math.pow(2,R.zoom-G.tileID.overscaledZ),re=G.tileID.overscaleFactor();return{u_matrix:H,u_camera_to_center_distance:R.cameraToCenterDistance,u_pixels_to_tile_units:I,u_extrude_scale:[R.pixelsToGLUnits[0]/(I*W),R.pixelsToGLUnits[1]/(I*W)],u_overscale_factor:re}},Lr=function(H,R,G){return{u_matrix:H,u_inv_matrix:R,u_camera_to_center_distance:G.cameraToCenterDistance,u_viewport_size:[G.width,G.height]}},zr=function(H,R){return{u_color:new n.UniformColor(H,R.u_color),u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_overlay:new n.Uniform1i(H,R.u_overlay),u_overlay_scale:new n.Uniform1f(H,R.u_overlay_scale)}},Zr=function(H,R,G){return G===void 0&&(G=1),{u_matrix:H,u_color:R,u_overlay:0,u_overlay_scale:G}},an=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix)}},Sn=function(H){return{u_matrix:H}},Nr=function(H,R){return{u_extrude_scale:new n.Uniform1f(H,R.u_extrude_scale),u_intensity:new n.Uniform1f(H,R.u_intensity),u_matrix:new n.UniformMatrix4f(H,R.u_matrix)}},tn=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_world:new n.Uniform2f(H,R.u_world),u_image:new n.Uniform1i(H,R.u_image),u_color_ramp:new n.Uniform1i(H,R.u_color_ramp),u_opacity:new n.Uniform1f(H,R.u_opacity)}},rn=function(H,R,G,I){return{u_matrix:H,u_extrude_scale:Co(R,1,G),u_intensity:I}},An=function(H,R,G,I){var W=n.create();n.ortho(W,0,H.width,H.height,0,0,1);var re=H.context.gl;return{u_matrix:W,u_world:[re.drawingBufferWidth,re.drawingBufferHeight],u_image:G,u_color_ramp:I,u_opacity:R.paint.get("heatmap-opacity")}},Xn=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_image:new n.Uniform1i(H,R.u_image),u_latrange:new n.Uniform2f(H,R.u_latrange),u_light:new n.Uniform2f(H,R.u_light),u_shadow:new n.UniformColor(H,R.u_shadow),u_highlight:new n.UniformColor(H,R.u_highlight),u_accent:new n.UniformColor(H,R.u_accent)}},Oi=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_image:new n.Uniform1i(H,R.u_image),u_dimension:new n.Uniform2f(H,R.u_dimension),u_zoom:new n.Uniform1f(H,R.u_zoom),u_unpack:new n.Uniform4f(H,R.u_unpack)}},Fi=function(H,R,G){var I=G.paint.get("hillshade-shadow-color"),W=G.paint.get("hillshade-highlight-color"),re=G.paint.get("hillshade-accent-color"),$=G.paint.get("hillshade-illumination-direction")*(Math.PI/180);G.paint.get("hillshade-illumination-anchor")==="viewport"&&($-=H.transform.angle);var ve=!H.options.moving;return{u_matrix:H.transform.calculatePosMatrix(R.tileID.toUnwrapped(),ve),u_image:0,u_latrange:ji(H,R.tileID),u_light:[G.paint.get("hillshade-exaggeration"),$],u_shadow:I,u_highlight:W,u_accent:re}},Hi=function(H,R){var G=R.stride,I=n.create();return n.ortho(I,0,n.EXTENT,-n.EXTENT,0,0,1),n.translate(I,I,[0,-n.EXTENT,0]),{u_matrix:I,u_image:1,u_dimension:[G,G],u_zoom:H.overscaledZ,u_unpack:R.getUnpackVector()}};function ji(H,R){var G=Math.pow(2,R.canonical.z),I=R.canonical.y;return[new n.MercatorCoordinate(0,I/G).toLngLat().lat,new n.MercatorCoordinate(0,(I+1)/G).toLngLat().lat]}var Un=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_ratio:new n.Uniform1f(H,R.u_ratio),u_device_pixel_ratio:new n.Uniform1f(H,R.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(H,R.u_units_to_pixels)}},ri=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_ratio:new n.Uniform1f(H,R.u_ratio),u_device_pixel_ratio:new n.Uniform1f(H,R.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(H,R.u_units_to_pixels),u_image:new n.Uniform1i(H,R.u_image),u_image_height:new n.Uniform1f(H,R.u_image_height)}},Ki=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_texsize:new n.Uniform2f(H,R.u_texsize),u_ratio:new n.Uniform1f(H,R.u_ratio),u_device_pixel_ratio:new n.Uniform1f(H,R.u_device_pixel_ratio),u_image:new n.Uniform1i(H,R.u_image),u_units_to_pixels:new n.Uniform2f(H,R.u_units_to_pixels),u_scale:new n.Uniform3f(H,R.u_scale),u_fade:new n.Uniform1f(H,R.u_fade)}},ca=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_ratio:new n.Uniform1f(H,R.u_ratio),u_device_pixel_ratio:new n.Uniform1f(H,R.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(H,R.u_units_to_pixels),u_patternscale_a:new n.Uniform2f(H,R.u_patternscale_a),u_patternscale_b:new n.Uniform2f(H,R.u_patternscale_b),u_sdfgamma:new n.Uniform1f(H,R.u_sdfgamma),u_image:new n.Uniform1i(H,R.u_image),u_tex_y_a:new n.Uniform1f(H,R.u_tex_y_a),u_tex_y_b:new n.Uniform1f(H,R.u_tex_y_b),u_mix:new n.Uniform1f(H,R.u_mix)}},Ja=function(H,R,G){var I=H.transform;return{u_matrix:ws(H,R,G),u_ratio:1/Co(R,1,I.zoom),u_device_pixel_ratio:n.browser.devicePixelRatio,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]]}},_o=function(H,R,G,I){return n.extend(Ja(H,R,G),{u_image:0,u_image_height:I})},go=function(H,R,G,I){var W=H.transform,re=Na(R,W);return{u_matrix:ws(H,R,G),u_texsize:R.imageAtlasTexture.size,u_ratio:1/Co(R,1,W.zoom),u_device_pixel_ratio:n.browser.devicePixelRatio,u_image:0,u_scale:[re,I.fromScale,I.toScale],u_fade:I.t,u_units_to_pixels:[1/W.pixelsToGLUnits[0],1/W.pixelsToGLUnits[1]]}},bo=function(H,R,G,I,W){var re=H.transform,$=H.lineAtlas,ve=Na(R,re),Ee=G.layout.get("line-cap")==="round",Oe=$.getDash(I.from,Ee),pt=$.getDash(I.to,Ee),wt=Oe.width*W.fromScale,yt=pt.width*W.toScale;return n.extend(Ja(H,R,G),{u_patternscale_a:[ve/wt,-Oe.height/2],u_patternscale_b:[ve/yt,-pt.height/2],u_sdfgamma:$.width/(Math.min(wt,yt)*256*n.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Oe.y,u_tex_y_b:pt.y,u_mix:W.t})};function Na(H,R){return 1/Co(H,1,R.tileZoom)}function ws(H,R,G){return H.translatePosMatrix(R.tileID.posMatrix,R,G.paint.get("line-translate"),G.paint.get("line-translate-anchor"))}var Ko=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_tl_parent:new n.Uniform2f(H,R.u_tl_parent),u_scale_parent:new n.Uniform1f(H,R.u_scale_parent),u_buffer_scale:new n.Uniform1f(H,R.u_buffer_scale),u_fade_t:new n.Uniform1f(H,R.u_fade_t),u_opacity:new n.Uniform1f(H,R.u_opacity),u_image0:new n.Uniform1i(H,R.u_image0),u_image1:new n.Uniform1i(H,R.u_image1),u_brightness_low:new n.Uniform1f(H,R.u_brightness_low),u_brightness_high:new n.Uniform1f(H,R.u_brightness_high),u_saturation_factor:new n.Uniform1f(H,R.u_saturation_factor),u_contrast_factor:new n.Uniform1f(H,R.u_contrast_factor),u_spin_weights:new n.Uniform3f(H,R.u_spin_weights)}},Uo=function(H,R,G,I,W){return{u_matrix:H,u_tl_parent:R,u_scale_parent:G,u_buffer_scale:1,u_fade_t:I.mix,u_opacity:I.opacity*W.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:W.paint.get("raster-brightness-min"),u_brightness_high:W.paint.get("raster-brightness-max"),u_saturation_factor:Ts(W.paint.get("raster-saturation")),u_contrast_factor:ea(W.paint.get("raster-contrast")),u_spin_weights:hi(W.paint.get("raster-hue-rotate"))}};function hi(H){H*=Math.PI/180;var R=Math.sin(H),G=Math.cos(H);return[(2*G+1)/3,(-Math.sqrt(3)*R-G+1)/3,(Math.sqrt(3)*R-G+1)/3]}function ea(H){return H>0?1/(1-H):1+H}function Ts(H){return H>0?1-1/(1.001-H):-H}var Ml=function(H,R){return{u_is_size_zoom_constant:new n.Uniform1i(H,R.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(H,R.u_is_size_feature_constant),u_size_t:new n.Uniform1f(H,R.u_size_t),u_size:new n.Uniform1f(H,R.u_size),u_camera_to_center_distance:new n.Uniform1f(H,R.u_camera_to_center_distance),u_pitch:new n.Uniform1f(H,R.u_pitch),u_rotate_symbol:new n.Uniform1i(H,R.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(H,R.u_aspect_ratio),u_fade_change:new n.Uniform1f(H,R.u_fade_change),u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(H,R.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(H,R.u_coord_matrix),u_is_text:new n.Uniform1i(H,R.u_is_text),u_pitch_with_map:new n.Uniform1i(H,R.u_pitch_with_map),u_texsize:new n.Uniform2f(H,R.u_texsize),u_texture:new n.Uniform1i(H,R.u_texture)}},Wl=function(H,R){return{u_is_size_zoom_constant:new n.Uniform1i(H,R.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(H,R.u_is_size_feature_constant),u_size_t:new n.Uniform1f(H,R.u_size_t),u_size:new n.Uniform1f(H,R.u_size),u_camera_to_center_distance:new n.Uniform1f(H,R.u_camera_to_center_distance),u_pitch:new n.Uniform1f(H,R.u_pitch),u_rotate_symbol:new n.Uniform1i(H,R.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(H,R.u_aspect_ratio),u_fade_change:new n.Uniform1f(H,R.u_fade_change),u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(H,R.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(H,R.u_coord_matrix),u_is_text:new n.Uniform1i(H,R.u_is_text),u_pitch_with_map:new n.Uniform1i(H,R.u_pitch_with_map),u_texsize:new n.Uniform2f(H,R.u_texsize),u_texture:new n.Uniform1i(H,R.u_texture),u_gamma_scale:new n.Uniform1f(H,R.u_gamma_scale),u_device_pixel_ratio:new n.Uniform1f(H,R.u_device_pixel_ratio),u_is_halo:new n.Uniform1i(H,R.u_is_halo)}},su=function(H,R){return{u_is_size_zoom_constant:new n.Uniform1i(H,R.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(H,R.u_is_size_feature_constant),u_size_t:new n.Uniform1f(H,R.u_size_t),u_size:new n.Uniform1f(H,R.u_size),u_camera_to_center_distance:new n.Uniform1f(H,R.u_camera_to_center_distance),u_pitch:new n.Uniform1f(H,R.u_pitch),u_rotate_symbol:new n.Uniform1i(H,R.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(H,R.u_aspect_ratio),u_fade_change:new n.Uniform1f(H,R.u_fade_change),u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(H,R.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(H,R.u_coord_matrix),u_is_text:new n.Uniform1i(H,R.u_is_text),u_pitch_with_map:new n.Uniform1i(H,R.u_pitch_with_map),u_texsize:new n.Uniform2f(H,R.u_texsize),u_texsize_icon:new n.Uniform2f(H,R.u_texsize_icon),u_texture:new n.Uniform1i(H,R.u_texture),u_texture_icon:new n.Uniform1i(H,R.u_texture_icon),u_gamma_scale:new n.Uniform1f(H,R.u_gamma_scale),u_device_pixel_ratio:new n.Uniform1f(H,R.u_device_pixel_ratio),u_is_halo:new n.Uniform1i(H,R.u_is_halo)}},Xu=function(H,R,G,I,W,re,$,ve,Ee,Oe){var pt=W.transform;return{u_is_size_zoom_constant:+(H==="constant"||H==="source"),u_is_size_feature_constant:+(H==="constant"||H==="camera"),u_size_t:R?R.uSizeT:0,u_size:R?R.uSize:0,u_camera_to_center_distance:pt.cameraToCenterDistance,u_pitch:pt.pitch/360*2*Math.PI,u_rotate_symbol:+G,u_aspect_ratio:pt.width/pt.height,u_fade_change:W.options.fadeDuration?W.symbolFadeChange:1,u_matrix:re,u_label_plane_matrix:$,u_coord_matrix:ve,u_is_text:+Ee,u_pitch_with_map:+I,u_texsize:Oe,u_texture:0}},Wf=function(H,R,G,I,W,re,$,ve,Ee,Oe,pt){var wt=W.transform;return n.extend(Xu(H,R,G,I,W,re,$,ve,Ee,Oe),{u_gamma_scale:I?Math.cos(wt._pitch)*wt.cameraToCenterDistance:1,u_device_pixel_ratio:n.browser.devicePixelRatio,u_is_halo:+pt})},lu=function(H,R,G,I,W,re,$,ve,Ee,Oe){return n.extend(Wf(H,R,G,I,W,re,$,ve,!0,Ee,!0),{u_texsize_icon:Oe,u_texture_icon:1})},Rc=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_opacity:new n.Uniform1f(H,R.u_opacity),u_color:new n.UniformColor(H,R.u_color)}},Dc=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_opacity:new n.Uniform1f(H,R.u_opacity),u_image:new n.Uniform1i(H,R.u_image),u_pattern_tl_a:new n.Uniform2f(H,R.u_pattern_tl_a),u_pattern_br_a:new n.Uniform2f(H,R.u_pattern_br_a),u_pattern_tl_b:new n.Uniform2f(H,R.u_pattern_tl_b),u_pattern_br_b:new n.Uniform2f(H,R.u_pattern_br_b),u_texsize:new n.Uniform2f(H,R.u_texsize),u_mix:new n.Uniform1f(H,R.u_mix),u_pattern_size_a:new n.Uniform2f(H,R.u_pattern_size_a),u_pattern_size_b:new n.Uniform2f(H,R.u_pattern_size_b),u_scale_a:new n.Uniform1f(H,R.u_scale_a),u_scale_b:new n.Uniform1f(H,R.u_scale_b),u_pixel_coord_upper:new n.Uniform2f(H,R.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(H,R.u_pixel_coord_lower),u_tile_units_to_pixels:new n.Uniform1f(H,R.u_tile_units_to_pixels)}},fc=function(H,R,G){return{u_matrix:H,u_opacity:R,u_color:G}},Ih=function(H,R,G,I,W,re){return n.extend(uc(I,re,G,W),{u_matrix:H,u_opacity:R})},rh={fillExtrusion:Wv,fillExtrusionPattern:Hs,fill:Hf,fillPattern:Gf,fillOutline:bs,fillOutlinePattern:yl,circle:Ue,collisionBox:Gt,collisionCircle:Rt,debug:zr,clippingMask:an,heatmap:Nr,heatmapTexture:tn,hillshade:Xn,hillshadePrepare:Oi,line:Un,lineGradient:ri,linePattern:Ki,lineSDF:ca,raster:Ko,symbolIcon:Ml,symbolSDF:Wl,symbolTextAndIcon:su,background:Rc,backgroundPattern:Dc},cc;function mf(H,R,G,I,W,re,$){for(var ve=H.context,Ee=ve.gl,Oe=H.useProgram("collisionBox"),pt=[],wt=0,yt=0,Be=0;Be<I.length;Be++){var $e=I[Be],ft=R.getTile($e),Tt=ft.getBucket(G);if(Tt){var Lt=$e.posMatrix;(W[0]!==0||W[1]!==0)&&(Lt=H.translatePosMatrix($e.posMatrix,ft,W,re));var Pt=$?Tt.textCollisionBox:Tt.iconCollisionBox,jt=Tt.collisionCircleArray;if(jt.length>0){var Nt=n.create(),Ft=Lt;n.mul(Nt,Tt.placementInvProjMatrix,H.transform.glCoordMatrix),n.mul(Nt,Nt,Tt.placementViewportMatrix),pt.push({circleArray:jt,circleOffset:yt,transform:Ft,invTransform:Nt}),wt+=jt.length/4,yt=wt}Pt&&Oe.draw(ve,Ee.LINES,xn.disabled,qn.disabled,H.colorModeForRenderPass(),Ot.disabled,hr(Lt,H.transform,ft),G.id,Pt.layoutVertexBuffer,Pt.indexBuffer,Pt.segments,null,H.transform.zoom,null,null,Pt.collisionVertexBuffer)}}if(!(!$||!pt.length)){var Kt=H.useProgram("collisionCircle"),Ct=new n.StructArrayLayout2f1f2i16;Ct.resize(wt*4),Ct._trim();for(var sr=0,xr=0,Dr=pt;xr<Dr.length;xr+=1)for(var fn=Dr[xr],Wr=0;Wr<fn.circleArray.length/4;Wr++){var gn=Wr*4,si=fn.circleArray[gn+0],Hn=fn.circleArray[gn+1],cn=fn.circleArray[gn+2],Rn=fn.circleArray[gn+3];Ct.emplace(sr++,si,Hn,cn,Rn,0),Ct.emplace(sr++,si,Hn,cn,Rn,1),Ct.emplace(sr++,si,Hn,cn,Rn,2),Ct.emplace(sr++,si,Hn,cn,Rn,3)}(!cc||cc.length<wt*2)&&(cc=Zu(wt));for(var En=ve.createIndexBuffer(cc,!0),$n=ve.createVertexBuffer(Ct,n.collisionCircleLayout.members,!0),xi=0,Ra=pt;xi<Ra.length;xi+=1){var Pa=Ra[xi],wo=Lr(Pa.transform,Pa.invTransform,H.transform);Kt.draw(ve,Ee.TRIANGLES,xn.disabled,qn.disabled,H.colorModeForRenderPass(),Ot.disabled,wo,G.id,$n,En,n.SegmentVector.simpleSegment(0,Pa.circleOffset*2,Pa.circleArray.length,Pa.circleArray.length/2),null,H.transform.zoom,null,null,null)}$n.destroy(),En.destroy()}}function Zu(H){var R=H*2,G=new n.StructArrayLayout3ui6;G.resize(R),G._trim();for(var I=0;I<R;I++){var W=I*6;G.uint16[W+0]=I*4+0,G.uint16[W+1]=I*4+1,G.uint16[W+2]=I*4+2,G.uint16[W+3]=I*4+2,G.uint16[W+4]=I*4+3,G.uint16[W+5]=I*4+0}return G}var Fh=n.identity(new Float32Array(16));function Xv(H,R,G,I,W){if(H.renderPass==="translucent"){var re=qn.disabled,$=H.colorModeForRenderPass(),ve=G.layout.get("text-variable-anchor");ve&&Zv(I,H,G,R,G.layout.get("text-rotation-alignment"),G.layout.get("text-pitch-alignment"),W),G.paint.get("icon-opacity").constantOr(1)!==0&&nh(H,R,G,I,!1,G.paint.get("icon-translate"),G.paint.get("icon-translate-anchor"),G.layout.get("icon-rotation-alignment"),G.layout.get("icon-pitch-alignment"),G.layout.get("icon-keep-upright"),re,$),G.paint.get("text-opacity").constantOr(1)!==0&&nh(H,R,G,I,!0,G.paint.get("text-translate"),G.paint.get("text-translate-anchor"),G.layout.get("text-rotation-alignment"),G.layout.get("text-pitch-alignment"),G.layout.get("text-keep-upright"),re,$),R.map.showCollisionBoxes&&(mf(H,R,G,I,G.paint.get("text-translate"),G.paint.get("text-translate-anchor"),!0),mf(H,R,G,I,G.paint.get("icon-translate"),G.paint.get("icon-translate-anchor"),!1))}}function qh(H,R,G,I,W,re){var $=n.getAnchorAlignment(H),ve=$.horizontalAlign,Ee=$.verticalAlign,Oe=-(ve-.5)*R,pt=-(Ee-.5)*G,wt=n.evaluateVariableOffset(H,I);return new n.Point((Oe/W+wt[0])*re,(pt/W+wt[1])*re)}function Zv(H,R,G,I,W,re,$){for(var ve=R.transform,Ee=W==="map",Oe=re==="map",pt=0,wt=H;pt<wt.length;pt+=1){var yt=wt[pt],Be=I.getTile(yt),$e=Be.getBucket(G);if(!(!$e||!$e.text||!$e.text.segments.get().length)){var ft=$e.textSizeData,Tt=n.evaluateSizeForZoom(ft,ve.zoom),Lt=Co(Be,1,R.transform.zoom),Pt=vn(yt.posMatrix,Oe,Ee,R.transform,Lt),jt=G.layout.get("icon-text-fit")!=="none"&&$e.hasIconData();if(Tt){var Nt=Math.pow(2,ve.zoom-Be.tileID.overscaledZ);Ic($e,Ee,Oe,$,n.symbolSize,ve,Pt,yt.posMatrix,Nt,Tt,jt)}}}}function Ic(H,R,G,I,W,re,$,ve,Ee,Oe,pt){var wt=H.text.placedSymbolArray,yt=H.text.dynamicLayoutVertexArray,Be=H.icon.dynamicLayoutVertexArray,$e={};yt.clear();for(var ft=0;ft<wt.length;ft++){var Tt=wt.get(ft),Lt=H.allowVerticalPlacement&&!Tt.placedOrientation,Pt=!Tt.hidden&&Tt.crossTileID&&!Lt?I[Tt.crossTileID]:null;if(!Pt)ss(Tt.numGlyphs,yt);else{var jt=new n.Point(Tt.anchorX,Tt.anchorY),Nt=Wn(jt,G?ve:$),Ft=zi(re.cameraToCenterDistance,Nt.signedDistanceFromCamera),Kt=W.evaluateSizeForFeature(H.textSizeData,Oe,Tt)*Ft/n.ONE_EM;G&&(Kt*=H.tilePixelRatio/Ee);for(var Ct=Pt.width,sr=Pt.height,xr=Pt.anchor,Dr=Pt.textOffset,fn=Pt.textBoxScale,Wr=qh(xr,Ct,sr,Dr,fn,Kt),gn=G?Wn(jt.add(Wr),$).point:Nt.point.add(R?Wr.rotate(-re.angle):Wr),si=H.allowVerticalPlacement&&Tt.placedOrientation===n.WritingMode.vertical?Math.PI/2:0,Hn=0;Hn<Tt.numGlyphs;Hn++)n.addDynamicAttributes(yt,gn,si);pt&&Tt.associatedIconIndex>=0&&($e[Tt.associatedIconIndex]={shiftedAnchor:gn,angle:si})}}if(pt){Be.clear();for(var cn=H.icon.placedSymbolArray,Rn=0;Rn<cn.length;Rn++){var En=cn.get(Rn);if(En.hidden)ss(En.numGlyphs,Be);else{var $n=$e[Rn];if(!$n)ss(En.numGlyphs,Be);else for(var xi=0;xi<En.numGlyphs;xi++)n.addDynamicAttributes(Be,$n.shiftedAnchor,$n.angle)}}H.icon.dynamicLayoutVertexBuffer.updateData(Be)}H.text.dynamicLayoutVertexBuffer.updateData(yt)}function ku(H,R,G){return G.iconsInText&&R?"symbolTextAndIcon":H?"symbolSDF":"symbolIcon"}function nh(H,R,G,I,W,re,$,ve,Ee,Oe,pt,wt){for(var yt=H.context,Be=yt.gl,$e=H.transform,ft=ve==="map",Tt=Ee==="map",Lt=ft&&G.layout.get("symbol-placement")!=="point",Pt=ft&&!Tt&&!Lt,jt=G.layout.get("symbol-sort-key").constantOr(1)!==void 0,Nt=!1,Ft=H.depthModeForSublayer(0,xn.ReadOnly),Kt=G.layout.get("text-variable-anchor"),Ct=[],sr=0,xr=I;sr<xr.length;sr+=1){var Dr=xr[sr],fn=R.getTile(Dr),Wr=fn.getBucket(G);if(Wr){var gn=W?Wr.text:Wr.icon;if(!(!gn||!gn.segments.get().length)){var si=gn.programConfigurations.get(G.id),Hn=W||Wr.sdfIcons,cn=W?Wr.textSizeData:Wr.iconSizeData,Rn=Tt||$e.pitch!==0,En=H.useProgram(ku(Hn,W,Wr),si),$n=n.evaluateSizeForZoom(cn,$e.zoom),xi=void 0,Ra=[0,0],Pa=void 0,wo=void 0,ua=null,$a=void 0;if(W){if(Pa=fn.glyphAtlasTexture,wo=Be.LINEAR,xi=fn.glyphAtlasTexture.size,Wr.iconsInText){Ra=fn.imageAtlasTexture.size,ua=fn.imageAtlasTexture;var Go=cn.kind==="composite"||cn.kind==="camera";$a=Rn||H.options.rotating||H.options.zooming||Go?Be.LINEAR:Be.NEAREST}}else{var xl=G.layout.get("icon-size").constantOr(0)!==1||Wr.iconsNeedLinear;Pa=fn.imageAtlasTexture,wo=Hn||H.options.rotating||H.options.zooming||xl||Rn?Be.LINEAR:Be.NEAREST,xi=fn.imageAtlasTexture.size}var Kv=Co(fn,1,H.transform.zoom),Jv=vn(Dr.posMatrix,Tt,ft,H.transform,Kv),Ad=gi(Dr.posMatrix,Tt,ft,H.transform,Kv),Qd=Kt&&Wr.hasTextData(),Eg=G.layout.get("icon-text-fit")!=="none"&&Qd&&Wr.hasIconData();Lt&&to(Wr,Dr.posMatrix,H,W,Jv,Ad,Tt,Oe);var $d=H.translatePosMatrix(Dr.posMatrix,fn,re,$),oh=Lt||W&&Kt||Eg?Fh:Jv,ep=H.translatePosMatrix(Ad,fn,re,$,!0),Bh=Hn&&G.paint.get(W?"text-halo-width":"icon-halo-width").constantOr(1)!==0,sh=void 0;Hn?Wr.iconsInText?sh=lu(cn.kind,$n,Pt,Tt,H,$d,oh,ep,xi,Ra):sh=Wf(cn.kind,$n,Pt,Tt,H,$d,oh,ep,W,xi,!0):sh=Xu(cn.kind,$n,Pt,Tt,H,$d,oh,ep,W,xi);var Md={program:En,buffers:gn,uniformValues:sh,atlasTexture:Pa,atlasTextureIcon:ua,atlasInterpolation:wo,atlasInterpolationIcon:$a,isSDF:Hn,hasHalo:Bh};if(jt&&Wr.canOverlap){Nt=!0;for(var Zp=gn.segments.get(),Sd=0,Mb=Zp;Sd<Mb.length;Sd+=1){var By=Mb[Sd];Ct.push({segments:new n.SegmentVector([By]),sortKey:By.sortKey,state:Md})}}else Ct.push({segments:gn.segments,sortKey:0,state:Md})}}}Nt&&Ct.sort(function(Eb,kb){return Eb.sortKey-kb.sortKey});for(var _f=0,Sb=Ct;_f<Sb.length;_f+=1){var j1=Sb[_f],Fc=j1.state;if(yt.activeTexture.set(Be.TEXTURE0),Fc.atlasTexture.bind(Fc.atlasInterpolation,Be.CLAMP_TO_EDGE),Fc.atlasTextureIcon&&(yt.activeTexture.set(Be.TEXTURE1),Fc.atlasTextureIcon&&Fc.atlasTextureIcon.bind(Fc.atlasInterpolationIcon,Be.CLAMP_TO_EDGE)),Fc.isSDF){var Ny=Fc.uniformValues;Fc.hasHalo&&(Ny.u_is_halo=1,ih(Fc.buffers,j1.segments,G,H,Fc.program,Ft,pt,wt,Ny)),Ny.u_is_halo=0}ih(Fc.buffers,j1.segments,G,H,Fc.program,Ft,pt,wt,Fc.uniformValues)}}function ih(H,R,G,I,W,re,$,ve,Ee){var Oe=I.context,pt=Oe.gl;W.draw(Oe,pt.TRIANGLES,re,$,ve,Ot.disabled,Ee,G.id,H.layoutVertexBuffer,H.indexBuffer,R,G.paint,I.transform.zoom,H.programConfigurations.get(G.id),H.dynamicLayoutVertexBuffer,H.opacityVertexBuffer)}function ah(H,R,G,I){if(H.renderPass==="translucent"){var W=G.paint.get("circle-opacity"),re=G.paint.get("circle-stroke-width"),$=G.paint.get("circle-stroke-opacity"),ve=G.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(W.constantOr(1)===0&&(re.constantOr(1)===0||$.constantOr(1)===0))){for(var Ee=H.context,Oe=Ee.gl,pt=H.depthModeForSublayer(0,xn.ReadOnly),wt=qn.disabled,yt=H.colorModeForRenderPass(),Be=[],$e=0;$e<I.length;$e++){var ft=I[$e],Tt=R.getTile(ft),Lt=Tt.getBucket(G);if(Lt){var Pt=Lt.programConfigurations.get(G.id),jt=H.useProgram("circle",Pt),Nt=Lt.layoutVertexBuffer,Ft=Lt.indexBuffer,Kt=st(H,ft,Tt,G),Ct={programConfiguration:Pt,program:jt,layoutVertexBuffer:Nt,indexBuffer:Ft,uniformValues:Kt};if(ve)for(var sr=Lt.segments.get(),xr=0,Dr=sr;xr<Dr.length;xr+=1){var fn=Dr[xr];Be.push({segments:new n.SegmentVector([fn]),sortKey:fn.sortKey,state:Ct})}else Be.push({segments:Lt.segments,sortKey:0,state:Ct})}}ve&&Be.sort(function(Pa,wo){return Pa.sortKey-wo.sortKey});for(var Wr=0,gn=Be;Wr<gn.length;Wr+=1){var si=gn[Wr],Hn=si.state,cn=Hn.programConfiguration,Rn=Hn.program,En=Hn.layoutVertexBuffer,$n=Hn.indexBuffer,xi=Hn.uniformValues,Ra=si.segments;Rn.draw(Ee,Oe.TRIANGLES,pt,wt,yt,Ot.disabled,xi,G.id,En,$n,Ra,G.paint,H.transform.zoom,cn)}}}}function Xf(H,R,G,I){if(G.paint.get("heatmap-opacity")!==0)if(H.renderPass==="offscreen"){var W=H.context,re=W.gl,$=qn.disabled,ve=new ze([re.ONE,re.ONE],n.Color.transparent,[!0,!0,!0,!0]);zh(W,H,G),W.clear({color:n.Color.transparent});for(var Ee=0;Ee<I.length;Ee++){var Oe=I[Ee];if(!R.hasRenderableParent(Oe)){var pt=R.getTile(Oe),wt=pt.getBucket(G);if(wt){var yt=wt.programConfigurations.get(G.id),Be=H.useProgram("heatmap",yt),$e=H.transform,ft=$e.zoom;Be.draw(W,re.TRIANGLES,xn.disabled,$,ve,Ot.disabled,rn(Oe.posMatrix,pt,ft,G.paint.get("heatmap-intensity")),G.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,G.paint,H.transform.zoom,yt)}}}W.viewport.set([0,0,H.width,H.height])}else H.renderPass==="translucent"&&(H.context.setColorMode(H.colorModeForRenderPass()),Oh(H,G))}function zh(H,R,G){var I=H.gl;H.activeTexture.set(I.TEXTURE1),H.viewport.set([0,0,R.width/4,R.height/4]);var W=G.heatmapFbo;if(W)I.bindTexture(I.TEXTURE_2D,W.colorAttachment.get()),H.bindFramebuffer.set(W.framebuffer);else{var re=I.createTexture();I.bindTexture(I.TEXTURE_2D,re),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,I.CLAMP_TO_EDGE),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,I.CLAMP_TO_EDGE),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR),W=G.heatmapFbo=H.createFramebuffer(R.width/4,R.height/4,!1),jv(H,R,re,W)}}function jv(H,R,G,I){var W=H.gl,re=H.extRenderToTextureHalfFloat?H.extTextureHalfFloat.HALF_FLOAT_OES:W.UNSIGNED_BYTE;W.texImage2D(W.TEXTURE_2D,0,W.RGBA,R.width/4,R.height/4,0,W.RGBA,re,null),I.colorAttachment.set(G)}function Oh(H,R){var G=H.context,I=G.gl,W=R.heatmapFbo;if(W){G.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,W.colorAttachment.get()),G.activeTexture.set(I.TEXTURE1);var re=R.colorRampTexture;re||(re=R.colorRampTexture=new n.Texture(G,R.colorRamp,I.RGBA)),re.bind(I.LINEAR,I.CLAMP_TO_EDGE),H.useProgram("heatmapTexture").draw(G,I.TRIANGLES,xn.disabled,qn.disabled,H.colorModeForRenderPass(),Ot.disabled,An(H,R,0,1),R.id,H.viewportBuffer,H.quadTriangleIndexBuffer,H.viewportSegments,R.paint,H.transform.zoom)}}function uu(H,R,G,I){if(H.renderPass==="translucent"){var W=G.paint.get("line-opacity"),re=G.paint.get("line-width");if(!(W.constantOr(1)===0||re.constantOr(1)===0))for(var $=H.depthModeForSublayer(0,xn.ReadOnly),ve=H.colorModeForRenderPass(),Ee=G.paint.get("line-dasharray"),Oe=G.paint.get("line-pattern"),pt=Oe.constantOr(1),wt=G.paint.get("line-gradient"),yt=G.getCrossfadeParameters(),Be=pt?"linePattern":Ee?"lineSDF":wt?"lineGradient":"line",$e=H.context,ft=$e.gl,Tt=!0,Lt=0,Pt=I;Lt<Pt.length;Lt+=1){var jt=Pt[Lt],Nt=R.getTile(jt);if(!(pt&&!Nt.patternsLoaded())){var Ft=Nt.getBucket(G);if(Ft){var Kt=Ft.programConfigurations.get(G.id),Ct=H.context.program.get(),sr=H.useProgram(Be,Kt),xr=Tt||sr.program!==Ct,Dr=Oe.constantOr(null);if(Dr&&Nt.imageAtlas){var fn=Nt.imageAtlas,Wr=fn.patternPositions[Dr.to.toString()],gn=fn.patternPositions[Dr.from.toString()];Wr&&gn&&Kt.setConstantPatternPositions(Wr,gn)}var si=pt?go(H,Nt,G,yt):Ee?bo(H,Nt,G,Ee,yt):wt?_o(H,Nt,G,Ft.lineClipsArray.length):Ja(H,Nt,G);if(pt)$e.activeTexture.set(ft.TEXTURE0),Nt.imageAtlasTexture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),Kt.updatePaintBuffers(yt);else if(Ee&&(xr||H.lineAtlas.dirty))$e.activeTexture.set(ft.TEXTURE0),H.lineAtlas.bind($e);else if(wt){var Hn=Ft.gradients[G.id],cn=Hn.texture;if(G.gradientVersion!==Hn.version){var Rn=256;if(G.stepInterpolant){var En=R.getSource().maxzoom,$n=jt.canonical.z===En?Math.ceil(1<<H.transform.maxZoom-jt.canonical.z):1,xi=Ft.maxLineLength/n.EXTENT,Ra=1024,Pa=xi*Ra*$n;Rn=n.clamp(n.nextPowerOfTwo(Pa),256,$e.maxTextureSize)}Hn.gradient=n.renderColorRamp({expression:G.gradientExpression(),evaluationKey:"lineProgress",resolution:Rn,image:Hn.gradient||void 0,clips:Ft.lineClipsArray}),Hn.texture?Hn.texture.update(Hn.gradient):Hn.texture=new n.Texture($e,Hn.gradient,ft.RGBA),Hn.version=G.gradientVersion,cn=Hn.texture}$e.activeTexture.set(ft.TEXTURE0),cn.bind(G.stepInterpolant?ft.NEAREST:ft.LINEAR,ft.CLAMP_TO_EDGE)}sr.draw($e,ft.TRIANGLES,$,H.stencilModeForClipping(jt),ve,Ot.disabled,si,G.id,Ft.layoutVertexBuffer,Ft.indexBuffer,Ft.segments,G.paint,H.transform.zoom,Kt,Ft.layoutVertexBuffer2),Tt=!1}}}}}function de(H,R,G,I){var W=G.paint.get("fill-color"),re=G.paint.get("fill-opacity");if(re.constantOr(1)!==0){var $=H.colorModeForRenderPass(),ve=G.paint.get("fill-pattern"),Ee=H.opaquePassEnabledForLayer()&&!ve.constantOr(1)&&W.constantOr(n.Color.transparent).a===1&&re.constantOr(0)===1?"opaque":"translucent";if(H.renderPass===Ee){var Oe=H.depthModeForSublayer(1,H.renderPass==="opaque"?xn.ReadWrite:xn.ReadOnly);we(H,R,G,I,Oe,$,!1)}if(H.renderPass==="translucent"&&G.paint.get("fill-antialias")){var pt=H.depthModeForSublayer(G.getPaintProperty("fill-outline-color")?2:0,xn.ReadOnly);we(H,R,G,I,pt,$,!0)}}}function we(H,R,G,I,W,re,$){var ve=H.context.gl,Ee=G.paint.get("fill-pattern"),Oe=Ee&&Ee.constantOr(1),pt=G.getCrossfadeParameters(),wt,yt,Be,$e,ft;$?(yt=Oe&&!G.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",wt=ve.LINES):(yt=Oe?"fillPattern":"fill",wt=ve.TRIANGLES);for(var Tt=0,Lt=I;Tt<Lt.length;Tt+=1){var Pt=Lt[Tt],jt=R.getTile(Pt);if(!(Oe&&!jt.patternsLoaded())){var Nt=jt.getBucket(G);if(Nt){var Ft=Nt.programConfigurations.get(G.id),Kt=H.useProgram(yt,Ft);Oe&&(H.context.activeTexture.set(ve.TEXTURE0),jt.imageAtlasTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),Ft.updatePaintBuffers(pt));var Ct=Ee.constantOr(null);if(Ct&&jt.imageAtlas){var sr=jt.imageAtlas,xr=sr.patternPositions[Ct.to.toString()],Dr=sr.patternPositions[Ct.from.toString()];xr&&Dr&&Ft.setConstantPatternPositions(xr,Dr)}var fn=H.translatePosMatrix(Pt.posMatrix,jt,G.paint.get("fill-translate"),G.paint.get("fill-translate-anchor"));if(!$)$e=Nt.indexBuffer,ft=Nt.segments,Be=Oe?Yf(fn,H,pt,jt):Yu(fn);else{$e=Nt.indexBuffer2,ft=Nt.segments2;var Wr=[ve.drawingBufferWidth,ve.drawingBufferHeight];Be=yt==="fillOutlinePattern"&&Oe?Dh(fn,H,pt,jt,Wr):Wu(fn,Wr)}Kt.draw(H.context,wt,W,H.stencilModeForClipping(Pt),re,Ot.disabled,Be,G.id,Nt.layoutVertexBuffer,$e,ft,G.paint,H.transform.zoom,Ft)}}}}function Le(H,R,G,I){var W=G.paint.get("fill-extrusion-opacity");if(W!==0&&H.renderPass==="translucent"){var re=new xn(H.context.gl.LEQUAL,xn.ReadWrite,H.depthRangeFor3D);if(W===1&&!G.paint.get("fill-extrusion-pattern").constantOr(1)){var $=H.colorModeForRenderPass();De(H,R,G,I,re,qn.disabled,$)}else De(H,R,G,I,re,qn.disabled,ze.disabled),De(H,R,G,I,re,H.stencilModeFor3D(),H.colorModeForRenderPass())}}function De(H,R,G,I,W,re,$){for(var ve=H.context,Ee=ve.gl,Oe=G.paint.get("fill-extrusion-pattern"),pt=Oe.constantOr(1),wt=G.getCrossfadeParameters(),yt=G.paint.get("fill-extrusion-opacity"),Be=0,$e=I;Be<$e.length;Be+=1){var ft=$e[Be],Tt=R.getTile(ft),Lt=Tt.getBucket(G);if(Lt){var Pt=Lt.programConfigurations.get(G.id),jt=H.useProgram(pt?"fillExtrusionPattern":"fillExtrusion",Pt);pt&&(H.context.activeTexture.set(Ee.TEXTURE0),Tt.imageAtlasTexture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),Pt.updatePaintBuffers(wt));var Nt=Oe.constantOr(null);if(Nt&&Tt.imageAtlas){var Ft=Tt.imageAtlas,Kt=Ft.patternPositions[Nt.to.toString()],Ct=Ft.patternPositions[Nt.from.toString()];Kt&&Ct&&Pt.setConstantPatternPositions(Kt,Ct)}var sr=H.translatePosMatrix(ft.posMatrix,Tt,G.paint.get("fill-extrusion-translate"),G.paint.get("fill-extrusion-translate-anchor")),xr=G.paint.get("fill-extrusion-vertical-gradient"),Dr=pt?Vf(sr,H,xr,yt,ft,wt,Tt):gv(sr,H,xr,yt);jt.draw(ve,ve.gl.TRIANGLES,W,re,$,Ot.backCCW,Dr,G.id,Lt.layoutVertexBuffer,Lt.indexBuffer,Lt.segments,G.paint,H.transform.zoom,Pt)}}}function He(H,R,G,I){if(!(H.renderPass!=="offscreen"&&H.renderPass!=="translucent")){for(var W=H.context,re=H.depthModeForSublayer(0,xn.ReadOnly),$=H.colorModeForRenderPass(),ve=H.renderPass==="translucent"?H.stencilConfigForOverlap(I):[{},I],Ee=ve[0],Oe=ve[1],pt=0,wt=Oe;pt<wt.length;pt+=1){var yt=wt[pt],Be=R.getTile(yt);Be.needsHillshadePrepare&&H.renderPass==="offscreen"?Qe(H,Be,G,re,qn.disabled,$):H.renderPass==="translucent"&&Ve(H,Be,G,re,Ee[yt.overscaledZ],$)}W.viewport.set([0,0,H.width,H.height])}}function Ve(H,R,G,I,W,re){var $=H.context,ve=$.gl,Ee=R.fbo;if(Ee){var Oe=H.useProgram("hillshade");$.activeTexture.set(ve.TEXTURE0),ve.bindTexture(ve.TEXTURE_2D,Ee.colorAttachment.get());var pt=Fi(H,R,G);Oe.draw($,ve.TRIANGLES,I,W,re,Ot.disabled,pt,G.id,H.rasterBoundsBuffer,H.quadTriangleIndexBuffer,H.rasterBoundsSegments)}}function Qe(H,R,G,I,W,re){var $=H.context,ve=$.gl,Ee=R.dem;if(Ee&&Ee.data){var Oe=Ee.dim,pt=Ee.stride,wt=Ee.getPixels();if($.activeTexture.set(ve.TEXTURE1),$.pixelStoreUnpackPremultiplyAlpha.set(!1),R.demTexture=R.demTexture||H.getTileTexture(pt),R.demTexture){var yt=R.demTexture;yt.update(wt,{premultiply:!1}),yt.bind(ve.NEAREST,ve.CLAMP_TO_EDGE)}else R.demTexture=new n.Texture($,wt,ve.RGBA,{premultiply:!1}),R.demTexture.bind(ve.NEAREST,ve.CLAMP_TO_EDGE);$.activeTexture.set(ve.TEXTURE0);var Be=R.fbo;if(!Be){var $e=new n.Texture($,{width:Oe,height:Oe,data:null},ve.RGBA);$e.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),Be=R.fbo=$.createFramebuffer(Oe,Oe,!0),Be.colorAttachment.set($e.texture)}$.bindFramebuffer.set(Be.framebuffer),$.viewport.set([0,0,Oe,Oe]),H.useProgram("hillshadePrepare").draw($,ve.TRIANGLES,I,W,re,Ot.disabled,Hi(R.tileID,Ee),G.id,H.rasterBoundsBuffer,H.quadTriangleIndexBuffer,H.rasterBoundsSegments),R.needsHillshadePrepare=!1}}function zt(H,R,G,I){if(H.renderPass==="translucent"&&G.paint.get("raster-opacity")!==0&&I.length)for(var W=H.context,re=W.gl,$=R.getSource(),ve=H.useProgram("raster"),Ee=H.colorModeForRenderPass(),Oe=$ instanceof ue?[{},I]:H.stencilConfigForOverlap(I),pt=Oe[0],wt=Oe[1],yt=wt[wt.length-1].overscaledZ,Be=!H.options.moving,$e=0,ft=wt;$e<ft.length;$e+=1){var Tt=ft[$e],Lt=H.depthModeForSublayer(Tt.overscaledZ-yt,G.paint.get("raster-opacity")===1?xn.ReadWrite:xn.ReadOnly,re.LESS),Pt=R.getTile(Tt),jt=H.transform.calculatePosMatrix(Tt.toUnwrapped(),Be);Pt.registerFadeDuration(G.paint.get("raster-fade-duration"));var Nt=R.findLoadedParent(Tt,0),Ft=Jt(Pt,Nt,R,G,H.transform),Kt=void 0,Ct=void 0,sr=G.paint.get("raster-resampling")==="nearest"?re.NEAREST:re.LINEAR;W.activeTexture.set(re.TEXTURE0),Pt.texture.bind(sr,re.CLAMP_TO_EDGE,re.LINEAR_MIPMAP_NEAREST),W.activeTexture.set(re.TEXTURE1),Nt?(Nt.texture.bind(sr,re.CLAMP_TO_EDGE,re.LINEAR_MIPMAP_NEAREST),Kt=Math.pow(2,Nt.tileID.overscaledZ-Pt.tileID.overscaledZ),Ct=[Pt.tileID.canonical.x*Kt%1,Pt.tileID.canonical.y*Kt%1]):Pt.texture.bind(sr,re.CLAMP_TO_EDGE,re.LINEAR_MIPMAP_NEAREST);var xr=Uo(jt,Ct||[0,0],Kt||1,Ft,G);$ instanceof ue?ve.draw(W,re.TRIANGLES,Lt,qn.disabled,Ee,Ot.disabled,xr,G.id,$.boundsBuffer,H.quadTriangleIndexBuffer,$.boundsSegments):ve.draw(W,re.TRIANGLES,Lt,pt[Tt.overscaledZ],Ee,Ot.disabled,xr,G.id,H.rasterBoundsBuffer,H.quadTriangleIndexBuffer,H.rasterBoundsSegments)}}function Jt(H,R,G,I,W){var re=I.paint.get("raster-fade-duration");if(re>0){var $=n.browser.now(),ve=($-H.timeAdded)/re,Ee=R?($-R.timeAdded)/re:-1,Oe=G.getSource(),pt=W.coveringZoomLevel({tileSize:Oe.tileSize,roundZoom:Oe.roundZoom}),wt=!R||Math.abs(R.tileID.overscaledZ-pt)>Math.abs(H.tileID.overscaledZ-pt),yt=wt&&H.refreshedUponExpiration?1:n.clamp(wt?ve:1-Ee,0,1);return H.refreshedUponExpiration&&ve>=1&&(H.refreshedUponExpiration=!1),R?{opacity:1,mix:1-yt}:{opacity:yt,mix:0}}else return{opacity:1,mix:0}}function qt(H,R,G){var I=G.paint.get("background-color"),W=G.paint.get("background-opacity");if(W!==0){var re=H.context,$=re.gl,ve=H.transform,Ee=ve.tileSize,Oe=G.paint.get("background-pattern");if(!H.isPatternMissing(Oe)){var pt=!Oe&&I.a===1&&W===1&&H.opaquePassEnabledForLayer()?"opaque":"translucent";if(H.renderPass===pt){var wt=qn.disabled,yt=H.depthModeForSublayer(0,pt==="opaque"?xn.ReadWrite:xn.ReadOnly),Be=H.colorModeForRenderPass(),$e=H.useProgram(Oe?"backgroundPattern":"background"),ft=ve.coveringTiles({tileSize:Ee});Oe&&(re.activeTexture.set($.TEXTURE0),H.imageManager.bind(H.context));for(var Tt=G.getCrossfadeParameters(),Lt=0,Pt=ft;Lt<Pt.length;Lt+=1){var jt=Pt[Lt],Nt=H.transform.calculatePosMatrix(jt.toUnwrapped()),Ft=Oe?Ih(Nt,W,H,Oe,{tileID:jt,tileSize:Ee},Tt):fc(Nt,W,I);$e.draw(re,$.TRIANGLES,yt,wt,Be,Ot.disabled,Ft,G.id,H.tileExtentBuffer,H.quadTriangleIndexBuffer,H.tileExtentSegments)}}}}}var Qt=new n.Color(1,0,0,1),or=new n.Color(0,1,0,1),_r=new n.Color(0,0,1,1),Sr=new n.Color(1,0,1,1),Hr=new n.Color(0,1,1,1);function un(H){var R=H.transform.padding,G=3;yi(H,H.transform.height-(R.top||0),G,Qt),yi(H,R.bottom||0,G,or),Ji(H,R.left||0,G,_r),Ji(H,H.transform.width-(R.right||0),G,Sr);var I=H.transform.centerPoint;Ln(H,I.x,H.transform.height-I.y,Hr)}function Ln(H,R,G,I){var W=20,re=2;ra(H,R-re/2,G-W/2,re,W,I),ra(H,R-W/2,G-re/2,W,re,I)}function yi(H,R,G,I){ra(H,0,R+G/2,H.transform.width,G,I)}function Ji(H,R,G,I){ra(H,R-G/2,0,G,H.transform.height,I)}function ra(H,R,G,I,W,re){var $=H.context,ve=$.gl;ve.enable(ve.SCISSOR_TEST),ve.scissor(R*n.browser.devicePixelRatio,G*n.browser.devicePixelRatio,I*n.browser.devicePixelRatio,W*n.browser.devicePixelRatio),$.clear({color:re}),ve.disable(ve.SCISSOR_TEST)}function sa(H,R,G){for(var I=0;I<G.length;I++)pa(H,R,G[I])}function pa(H,R,G){var I=H.context,W=I.gl,re=G.posMatrix,$=H.useProgram("debug"),ve=xn.disabled,Ee=qn.disabled,Oe=H.colorModeForRenderPass(),pt="$debug";I.activeTexture.set(W.TEXTURE0),H.emptyTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE),$.draw(I,W.LINE_STRIP,ve,Ee,Oe,Ot.disabled,Zr(re,n.Color.red),pt,H.debugBuffer,H.tileBorderIndexBuffer,H.debugSegments);var wt=R.getTileByID(G.key).latestRawTileData,yt=wt&&wt.byteLength||0,Be=Math.floor(yt/1024),$e=R.getTile(G).tileSize,ft=512/Math.min($e,512)*(G.overscaledZ/H.transform.zoom)*.5,Tt=G.canonical.toString();G.overscaledZ!==G.canonical.z&&(Tt+=" => "+G.overscaledZ);var Lt=Tt+" "+Be+"kb";Ro(H,Lt),$.draw(I,W.TRIANGLES,ve,Ee,ze.alphaBlended,Ot.disabled,Zr(re,n.Color.transparent,ft),pt,H.debugBuffer,H.quadTriangleIndexBuffer,H.debugSegments)}function Ro(H,R){H.initDebugOverlayCanvas();var G=H.debugOverlayCanvas,I=H.context.gl,W=H.debugOverlayCanvas.getContext("2d");W.clearRect(0,0,G.width,G.height),W.shadowColor="white",W.shadowBlur=2,W.lineWidth=1.5,W.strokeStyle="white",W.textBaseline="top",W.font="bold 36px Open Sans, sans-serif",W.fillText(R,5,5),W.strokeText(R,5,5),H.debugOverlayTexture.update(G),H.debugOverlayTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE)}function Jo(H,R,G){var I=H.context,W=G.implementation;if(H.renderPass==="offscreen"){var re=W.prerender;re&&(H.setCustomLayerDefaults(),I.setColorMode(H.colorModeForRenderPass()),re.call(W,I.gl,H.transform.customLayerMatrix()),I.setDirty(),H.setBaseState())}else if(H.renderPass==="translucent"){H.setCustomLayerDefaults(),I.setColorMode(H.colorModeForRenderPass()),I.setStencilMode(qn.disabled);var $=W.renderingMode==="3d"?new xn(H.context.gl.LEQUAL,xn.ReadWrite,H.depthRangeFor3D):H.depthModeForSublayer(0,xn.ReadOnly);I.setDepthMode($),W.render(I.gl,H.transform.customLayerMatrix()),I.setDirty(),H.setBaseState(),I.bindFramebuffer.set(null)}}var ba={symbol:Xv,circle:ah,heatmap:Xf,line:uu,fill:de,"fill-extrusion":Le,hillshade:He,raster:zt,background:qt,debug:sa,custom:Jo},qa=function(R,G){this.context=new nr(R),this.transform=G,this._tileTextures={},this.setup(),this.numSublayers=yr.maxUnderzooming+yr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new jc,this.gpuTimers={}};qa.prototype.resize=function(R,G){if(this.width=R*n.browser.devicePixelRatio,this.height=G*n.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var I=0,W=this.style._order;I<W.length;I+=1){var re=W[I];this.style._layers[re].resize()}},qa.prototype.setup=function(){var R=this.context,G=new n.StructArrayLayout2i4;G.emplaceBack(0,0),G.emplaceBack(n.EXTENT,0),G.emplaceBack(0,n.EXTENT),G.emplaceBack(n.EXTENT,n.EXTENT),this.tileExtentBuffer=R.createVertexBuffer(G,Tu.members),this.tileExtentSegments=n.SegmentVector.simpleSegment(0,0,4,2);var I=new n.StructArrayLayout2i4;I.emplaceBack(0,0),I.emplaceBack(n.EXTENT,0),I.emplaceBack(0,n.EXTENT),I.emplaceBack(n.EXTENT,n.EXTENT),this.debugBuffer=R.createVertexBuffer(I,Tu.members),this.debugSegments=n.SegmentVector.simpleSegment(0,0,4,5);var W=new n.StructArrayLayout4i8;W.emplaceBack(0,0,0,0),W.emplaceBack(n.EXTENT,0,n.EXTENT,0),W.emplaceBack(0,n.EXTENT,0,n.EXTENT),W.emplaceBack(n.EXTENT,n.EXTENT,n.EXTENT,n.EXTENT),this.rasterBoundsBuffer=R.createVertexBuffer(W,fe.members),this.rasterBoundsSegments=n.SegmentVector.simpleSegment(0,0,4,2);var re=new n.StructArrayLayout2i4;re.emplaceBack(0,0),re.emplaceBack(1,0),re.emplaceBack(0,1),re.emplaceBack(1,1),this.viewportBuffer=R.createVertexBuffer(re,Tu.members),this.viewportSegments=n.SegmentVector.simpleSegment(0,0,4,2);var $=new n.StructArrayLayout1ui2;$.emplaceBack(0),$.emplaceBack(1),$.emplaceBack(3),$.emplaceBack(2),$.emplaceBack(0),this.tileBorderIndexBuffer=R.createIndexBuffer($);var ve=new n.StructArrayLayout3ui6;ve.emplaceBack(0,1,2),ve.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=R.createIndexBuffer(ve),this.emptyTexture=new n.Texture(R,{width:1,height:1,data:new Uint8Array([0,0,0,0])},R.gl.RGBA);var Ee=this.context.gl;this.stencilClearMode=new qn({func:Ee.ALWAYS,mask:0},0,255,Ee.ZERO,Ee.ZERO,Ee.ZERO)},qa.prototype.clearStencil=function(){var R=this.context,G=R.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var I=n.create();n.ortho(I,0,this.width,this.height,0,0,1),n.scale(I,I,[G.drawingBufferWidth,G.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(R,G.TRIANGLES,xn.disabled,this.stencilClearMode,ze.disabled,Ot.disabled,Sn(I),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},qa.prototype._renderTileClippingMasks=function(R,G){if(!(this.currentStencilSource===R.source||!R.isTileClipped()||!G||!G.length)){this.currentStencilSource=R.source;var I=this.context,W=I.gl;this.nextStencilID+G.length>256&&this.clearStencil(),I.setColorMode(ze.disabled),I.setDepthMode(xn.disabled);var re=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var $=0,ve=G;$<ve.length;$+=1){var Ee=ve[$],Oe=this._tileClippingMaskIDs[Ee.key]=this.nextStencilID++;re.draw(I,W.TRIANGLES,xn.disabled,new qn({func:W.ALWAYS,mask:0},Oe,255,W.KEEP,W.KEEP,W.REPLACE),ze.disabled,Ot.disabled,Sn(Ee.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},qa.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var R=this.nextStencilID++,G=this.context.gl;return new qn({func:G.NOTEQUAL,mask:255},R,255,G.KEEP,G.KEEP,G.REPLACE)},qa.prototype.stencilModeForClipping=function(R){var G=this.context.gl;return new qn({func:G.EQUAL,mask:255},this._tileClippingMaskIDs[R.key],0,G.KEEP,G.KEEP,G.REPLACE)},qa.prototype.stencilConfigForOverlap=function(R){var G,I=this.context.gl,W=R.sort(function(Oe,pt){return pt.overscaledZ-Oe.overscaledZ}),re=W[W.length-1].overscaledZ,$=W[0].overscaledZ-re+1;if($>1){this.currentStencilSource=void 0,this.nextStencilID+$>256&&this.clearStencil();for(var ve={},Ee=0;Ee<$;Ee++)ve[Ee+re]=new qn({func:I.GEQUAL,mask:255},Ee+this.nextStencilID,255,I.KEEP,I.KEEP,I.REPLACE);return this.nextStencilID+=$,[ve,W]}return[(G={},G[re]=qn.disabled,G),W]},qa.prototype.colorModeForRenderPass=function(){var R=this.context.gl;if(this._showOverdrawInspector){var G=8,I=1/G;return new ze([R.CONSTANT_COLOR,R.ONE],new n.Color(I,I,I,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?ze.unblended:ze.alphaBlended},qa.prototype.depthModeForSublayer=function(R,G,I){if(!this.opaquePassEnabledForLayer())return xn.disabled;var W=1-((1+this.currentLayer)*this.numSublayers+R)*this.depthEpsilon;return new xn(I||this.context.gl.LEQUAL,G,[W,W])},qa.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},qa.prototype.render=function(R,G){var I=this;this.style=R,this.options=G,this.lineAtlas=R.lineAtlas,this.imageManager=R.imageManager,this.glyphManager=R.glyphManager,this.symbolFadeChange=R.placement.symbolFadeChange(n.browser.now()),this.imageManager.beginFrame();var W=this.style._order,re=this.style.sourceCaches;for(var $ in re){var ve=re[$];ve.used&&ve.prepare(this.context)}var Ee={},Oe={},pt={};for(var wt in re){var yt=re[wt];Ee[wt]=yt.getVisibleCoordinates(),Oe[wt]=Ee[wt].slice().reverse(),pt[wt]=yt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Be=0;Be<W.length;Be++){var $e=W[Be];if(this.style._layers[$e].is3D()){this.opaquePassCutoff=Be;break}}this.renderPass="offscreen";for(var ft=0,Tt=W;ft<Tt.length;ft+=1){var Lt=Tt[ft],Pt=this.style._layers[Lt];if(!(!Pt.hasOffscreenPass()||Pt.isHidden(this.transform.zoom))){var jt=Oe[Pt.source];Pt.type!=="custom"&&!jt.length||this.renderLayer(this,re[Pt.source],Pt,jt)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:G.showOverdrawInspector?n.Color.black:n.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=G.showOverdrawInspector,this.depthRangeFor3D=[0,1-(R._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=W.length-1;this.currentLayer>=0;this.currentLayer--){var Nt=this.style._layers[W[this.currentLayer]],Ft=re[Nt.source],Kt=Ee[Nt.source];this._renderTileClippingMasks(Nt,Kt),this.renderLayer(this,Ft,Nt,Kt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<W.length;this.currentLayer++){var Ct=this.style._layers[W[this.currentLayer]],sr=re[Ct.source],xr=(Ct.type==="symbol"?pt:Oe)[Ct.source];this._renderTileClippingMasks(Ct,Ee[Ct.source]),this.renderLayer(this,sr,Ct,xr)}if(this.options.showTileBoundaries){var Dr,fn,Wr=n.values(this.style._layers);Wr.forEach(function(gn){gn.source&&!gn.isHidden(I.transform.zoom)&&(gn.source!==(fn&&fn.id)&&(fn=I.style.sourceCaches[gn.source]),(!Dr||Dr.getSource().maxzoom<fn.getSource().maxzoom)&&(Dr=fn))}),Dr&&ba.debug(this,Dr,Dr.getVisibleCoordinates())}this.options.showPadding&&un(this),this.context.setDefault()},qa.prototype.renderLayer=function(R,G,I,W){I.isHidden(this.transform.zoom)||I.type!=="background"&&I.type!=="custom"&&!W.length||(this.id=I.id,this.gpuTimingStart(I),ba[I.type](R,G,I,W,this.style.placement.variableOffsets),this.gpuTimingEnd())},qa.prototype.gpuTimingStart=function(R){if(this.options.gpuTiming){var G=this.context.extTimerQuery,I=this.gpuTimers[R.id];I||(I=this.gpuTimers[R.id]={calls:0,cpuTime:0,query:G.createQueryEXT()}),I.calls++,G.beginQueryEXT(G.TIME_ELAPSED_EXT,I.query)}},qa.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var R=this.context.extTimerQuery;R.endQueryEXT(R.TIME_ELAPSED_EXT)}},qa.prototype.collectGpuTimers=function(){var R=this.gpuTimers;return this.gpuTimers={},R},qa.prototype.queryGpuTimers=function(R){var G={};for(var I in R){var W=R[I],re=this.context.extTimerQuery,$=re.getQueryObjectEXT(W.query,re.QUERY_RESULT_EXT)/(1e3*1e3);re.deleteQueryEXT(W.query),G[I]=$}return G},qa.prototype.translatePosMatrix=function(R,G,I,W,re){if(!I[0]&&!I[1])return R;var $=re?W==="map"?this.transform.angle:0:W==="viewport"?-this.transform.angle:0;if($){var ve=Math.sin($),Ee=Math.cos($);I=[I[0]*Ee-I[1]*ve,I[0]*ve+I[1]*Ee]}var Oe=[re?I[0]:Co(G,I[0],this.transform.zoom),re?I[1]:Co(G,I[1],this.transform.zoom),0],pt=new Float32Array(16);return n.translate(pt,R,Oe),pt},qa.prototype.saveTileTexture=function(R){var G=this._tileTextures[R.size[0]];G?G.push(R):this._tileTextures[R.size[0]]=[R]},qa.prototype.getTileTexture=function(R){var G=this._tileTextures[R];return G&&G.length>0?G.pop():null},qa.prototype.isPatternMissing=function(R){if(!R)return!1;if(!R.from||!R.to)return!0;var G=this.imageManager.getPattern(R.from.toString()),I=this.imageManager.getPattern(R.to.toString());return!G||!I},qa.prototype.useProgram=function(R,G){this.cache=this.cache||{};var I=""+R+(G?G.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[I]||(this.cache[I]=new th(this.context,R,eh[R],G,rh[R],this._showOverdrawInspector)),this.cache[I]},qa.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},qa.prototype.setBaseState=function(){var R=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(R.FUNC_ADD)},qa.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=n.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var R=this.context.gl;this.debugOverlayTexture=new n.Texture(this.context,this.debugOverlayCanvas,R.RGBA)}},qa.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var gs=function(R,G){this.points=R,this.planes=G};gs.fromInvProjectionMatrix=function(R,G,I){var W=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],re=Math.pow(2,I),$=W.map(function(Oe){return n.transformMat4([],Oe,R)}).map(function(Oe){return n.scale$1([],Oe,1/Oe[3]/G*re)}),ve=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],Ee=ve.map(function(Oe){var pt=n.sub([],$[Oe[0]],$[Oe[1]]),wt=n.sub([],$[Oe[2]],$[Oe[1]]),yt=n.normalize([],n.cross([],pt,wt)),Be=-n.dot(yt,$[Oe[1]]);return yt.concat(Be)});return new gs($,Ee)};var sl=function(R,G){this.min=R,this.max=G,this.center=n.scale$2([],n.add([],this.min,this.max),.5)};sl.prototype.quadrant=function(R){for(var G=[R%2===0,R<2],I=n.clone$2(this.min),W=n.clone$2(this.max),re=0;re<G.length;re++)I[re]=G[re]?this.min[re]:this.center[re],W[re]=G[re]?this.center[re]:this.max[re];return W[2]=this.max[2],new sl(I,W)},sl.prototype.distanceX=function(R){var G=Math.max(Math.min(this.max[0],R[0]),this.min[0]);return G-R[0]},sl.prototype.distanceY=function(R){var G=Math.max(Math.min(this.max[1],R[1]),this.min[1]);return G-R[1]},sl.prototype.intersects=function(R){for(var G=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],I=!0,W=0;W<R.planes.length;W++){for(var re=R.planes[W],$=0,ve=0;ve<G.length;ve++)$+=n.dot$1(re,G[ve])>=0;if($===0)return 0;$!==G.length&&(I=!1)}if(I)return 2;for(var Ee=0;Ee<3;Ee++){for(var Oe=Number.MAX_VALUE,pt=-Number.MAX_VALUE,wt=0;wt<R.points.length;wt++){var yt=R.points[wt][Ee]-this.min[Ee];Oe=Math.min(Oe,yt),pt=Math.max(pt,yt)}if(pt<0||Oe>this.max[Ee]-this.min[Ee])return 0}return 1};var rl=function(R,G,I,W){if(R===void 0&&(R=0),G===void 0&&(G=0),I===void 0&&(I=0),W===void 0&&(W=0),isNaN(R)||R<0||isNaN(G)||G<0||isNaN(I)||I<0||isNaN(W)||W<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=R,this.bottom=G,this.left=I,this.right=W};rl.prototype.interpolate=function(R,G,I){return G.top!=null&&R.top!=null&&(this.top=n.number(R.top,G.top,I)),G.bottom!=null&&R.bottom!=null&&(this.bottom=n.number(R.bottom,G.bottom,I)),G.left!=null&&R.left!=null&&(this.left=n.number(R.left,G.left,I)),G.right!=null&&R.right!=null&&(this.right=n.number(R.right,G.right,I)),this},rl.prototype.getCenter=function(R,G){var I=n.clamp((this.left+R-this.right)/2,0,R),W=n.clamp((this.top+G-this.bottom)/2,0,G);return new n.Point(I,W)},rl.prototype.equals=function(R){return this.top===R.top&&this.bottom===R.bottom&&this.left===R.left&&this.right===R.right},rl.prototype.clone=function(){return new rl(this.top,this.bottom,this.left,this.right)},rl.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var ro=function(R,G,I,W,re){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=re===void 0?!0:re,this._minZoom=R||0,this._maxZoom=G||22,this._minPitch=I==null?0:I,this._maxPitch=W==null?60:W,this.setMaxBounds(),this.width=0,this.height=0,this._center=new n.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new rl,this._posMatrixCache={},this._alignedPosMatrixCache={}},Wa={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};ro.prototype.clone=function(){var R=new ro(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return R.tileSize=this.tileSize,R.latRange=this.latRange,R.width=this.width,R.height=this.height,R._center=this._center,R.zoom=this.zoom,R.angle=this.angle,R._fov=this._fov,R._pitch=this._pitch,R._unmodified=this._unmodified,R._edgeInsets=this._edgeInsets.clone(),R._calcMatrices(),R},Wa.minZoom.get=function(){return this._minZoom},Wa.minZoom.set=function(H){this._minZoom!==H&&(this._minZoom=H,this.zoom=Math.max(this.zoom,H))},Wa.maxZoom.get=function(){return this._maxZoom},Wa.maxZoom.set=function(H){this._maxZoom!==H&&(this._maxZoom=H,this.zoom=Math.min(this.zoom,H))},Wa.minPitch.get=function(){return this._minPitch},Wa.minPitch.set=function(H){this._minPitch!==H&&(this._minPitch=H,this.pitch=Math.max(this.pitch,H))},Wa.maxPitch.get=function(){return this._maxPitch},Wa.maxPitch.set=function(H){this._maxPitch!==H&&(this._maxPitch=H,this.pitch=Math.min(this.pitch,H))},Wa.renderWorldCopies.get=function(){return this._renderWorldCopies},Wa.renderWorldCopies.set=function(H){H===void 0?H=!0:H===null&&(H=!1),this._renderWorldCopies=H},Wa.worldSize.get=function(){return this.tileSize*this.scale},Wa.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Wa.size.get=function(){return new n.Point(this.width,this.height)},Wa.bearing.get=function(){return-this.angle/Math.PI*180},Wa.bearing.set=function(H){var R=-n.wrap(H,-180,180)*Math.PI/180;this.angle!==R&&(this._unmodified=!1,this.angle=R,this._calcMatrices(),this.rotationMatrix=n.create$2(),n.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Wa.pitch.get=function(){return this._pitch/Math.PI*180},Wa.pitch.set=function(H){var R=n.clamp(H,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==R&&(this._unmodified=!1,this._pitch=R,this._calcMatrices())},Wa.fov.get=function(){return this._fov/Math.PI*180},Wa.fov.set=function(H){H=Math.max(.01,Math.min(60,H)),this._fov!==H&&(this._unmodified=!1,this._fov=H/180*Math.PI,this._calcMatrices())},Wa.zoom.get=function(){return this._zoom},Wa.zoom.set=function(H){var R=Math.min(Math.max(H,this.minZoom),this.maxZoom);this._zoom!==R&&(this._unmodified=!1,this._zoom=R,this.scale=this.zoomScale(R),this.tileZoom=Math.floor(R),this.zoomFraction=R-this.tileZoom,this._constrain(),this._calcMatrices())},Wa.center.get=function(){return this._center},Wa.center.set=function(H){H.lat===this._center.lat&&H.lng===this._center.lng||(this._unmodified=!1,this._center=H,this._constrain(),this._calcMatrices())},Wa.padding.get=function(){return this._edgeInsets.toJSON()},Wa.padding.set=function(H){this._edgeInsets.equals(H)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,H,1),this._calcMatrices())},Wa.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},ro.prototype.isPaddingEqual=function(R){return this._edgeInsets.equals(R)},ro.prototype.interpolatePadding=function(R,G,I){this._unmodified=!1,this._edgeInsets.interpolate(R,G,I),this._constrain(),this._calcMatrices()},ro.prototype.coveringZoomLevel=function(R){var G=(R.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/R.tileSize));return Math.max(0,G)},ro.prototype.getVisibleUnwrappedCoordinates=function(R){var G=[new n.UnwrappedTileID(0,R)];if(this._renderWorldCopies)for(var I=this.pointCoordinate(new n.Point(0,0)),W=this.pointCoordinate(new n.Point(this.width,0)),re=this.pointCoordinate(new n.Point(this.width,this.height)),$=this.pointCoordinate(new n.Point(0,this.height)),ve=Math.floor(Math.min(I.x,W.x,re.x,$.x)),Ee=Math.floor(Math.max(I.x,W.x,re.x,$.x)),Oe=1,pt=ve-Oe;pt<=Ee+Oe;pt++)pt!==0&&G.push(new n.UnwrappedTileID(pt,R));return G},ro.prototype.coveringTiles=function(R){var G=this.coveringZoomLevel(R),I=G;if(R.minzoom!==void 0&&G<R.minzoom)return[];R.maxzoom!==void 0&&G>R.maxzoom&&(G=R.maxzoom);var W=n.MercatorCoordinate.fromLngLat(this.center),re=Math.pow(2,G),$=[re*W.x,re*W.y,0],ve=gs.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,G),Ee=R.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(Ee=G);var Oe=3,pt=function(Wr){return{aabb:new sl([Wr*re,0,0],[(Wr+1)*re,re,0]),zoom:0,x:0,y:0,wrap:Wr,fullyVisible:!1}},wt=[],yt=[],Be=G,$e=R.reparseOverscaled?I:G;if(this._renderWorldCopies)for(var ft=1;ft<=3;ft++)wt.push(pt(-ft)),wt.push(pt(ft));for(wt.push(pt(0));wt.length>0;){var Tt=wt.pop(),Lt=Tt.x,Pt=Tt.y,jt=Tt.fullyVisible;if(!jt){var Nt=Tt.aabb.intersects(ve);if(Nt===0)continue;jt=Nt===2}var Ft=Tt.aabb.distanceX($),Kt=Tt.aabb.distanceY($),Ct=Math.max(Math.abs(Ft),Math.abs(Kt)),sr=Oe+(1<<Be-Tt.zoom)-2;if(Tt.zoom===Be||Ct>sr&&Tt.zoom>=Ee){yt.push({tileID:new n.OverscaledTileID(Tt.zoom===Be?$e:Tt.zoom,Tt.wrap,Tt.zoom,Lt,Pt),distanceSq:n.sqrLen([$[0]-.5-Lt,$[1]-.5-Pt])});continue}for(var xr=0;xr<4;xr++){var Dr=(Lt<<1)+xr%2,fn=(Pt<<1)+(xr>>1);wt.push({aabb:Tt.aabb.quadrant(xr),zoom:Tt.zoom+1,x:Dr,y:fn,wrap:Tt.wrap,fullyVisible:jt})}}return yt.sort(function(Wr,gn){return Wr.distanceSq-gn.distanceSq}).map(function(Wr){return Wr.tileID})},ro.prototype.resize=function(R,G){this.width=R,this.height=G,this.pixelsToGLUnits=[2/R,-2/G],this._constrain(),this._calcMatrices()},Wa.unmodified.get=function(){return this._unmodified},ro.prototype.zoomScale=function(R){return Math.pow(2,R)},ro.prototype.scaleZoom=function(R){return Math.log(R)/Math.LN2},ro.prototype.project=function(R){var G=n.clamp(R.lat,-this.maxValidLatitude,this.maxValidLatitude);return new n.Point(n.mercatorXfromLng(R.lng)*this.worldSize,n.mercatorYfromLat(G)*this.worldSize)},ro.prototype.unproject=function(R){return new n.MercatorCoordinate(R.x/this.worldSize,R.y/this.worldSize).toLngLat()},Wa.point.get=function(){return this.project(this.center)},ro.prototype.setLocationAtPoint=function(R,G){var I=this.pointCoordinate(G),W=this.pointCoordinate(this.centerPoint),re=this.locationCoordinate(R),$=new n.MercatorCoordinate(re.x-(I.x-W.x),re.y-(I.y-W.y));this.center=this.coordinateLocation($),this._renderWorldCopies&&(this.center=this.center.wrap())},ro.prototype.locationPoint=function(R){return this.coordinatePoint(this.locationCoordinate(R))},ro.prototype.pointLocation=function(R){return this.coordinateLocation(this.pointCoordinate(R))},ro.prototype.locationCoordinate=function(R){return n.MercatorCoordinate.fromLngLat(R)},ro.prototype.coordinateLocation=function(R){return R.toLngLat()},ro.prototype.pointCoordinate=function(R){var G=0,I=[R.x,R.y,0,1],W=[R.x,R.y,1,1];n.transformMat4(I,I,this.pixelMatrixInverse),n.transformMat4(W,W,this.pixelMatrixInverse);var re=I[3],$=W[3],ve=I[0]/re,Ee=W[0]/$,Oe=I[1]/re,pt=W[1]/$,wt=I[2]/re,yt=W[2]/$,Be=wt===yt?0:(G-wt)/(yt-wt);return new n.MercatorCoordinate(n.number(ve,Ee,Be)/this.worldSize,n.number(Oe,pt,Be)/this.worldSize)},ro.prototype.coordinatePoint=function(R){var G=[R.x*this.worldSize,R.y*this.worldSize,0,1];return n.transformMat4(G,G,this.pixelMatrix),new n.Point(G[0]/G[3],G[1]/G[3])},ro.prototype.getBounds=function(){return new n.LngLatBounds().extend(this.pointLocation(new n.Point(0,0))).extend(this.pointLocation(new n.Point(this.width,0))).extend(this.pointLocation(new n.Point(this.width,this.height))).extend(this.pointLocation(new n.Point(0,this.height)))},ro.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new n.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},ro.prototype.setMaxBounds=function(R){R?(this.lngRange=[R.getWest(),R.getEast()],this.latRange=[R.getSouth(),R.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},ro.prototype.calculatePosMatrix=function(R,G){G===void 0&&(G=!1);var I=R.key,W=G?this._alignedPosMatrixCache:this._posMatrixCache;if(W[I])return W[I];var re=R.canonical,$=this.worldSize/this.zoomScale(re.z),ve=re.x+Math.pow(2,re.z)*R.wrap,Ee=n.identity(new Float64Array(16));return n.translate(Ee,Ee,[ve*$,re.y*$,0]),n.scale(Ee,Ee,[$/n.EXTENT,$/n.EXTENT,1]),n.multiply(Ee,G?this.alignedProjMatrix:this.projMatrix,Ee),W[I]=new Float32Array(Ee),W[I]},ro.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},ro.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var R=-90,G=90,I=-180,W=180,re,$,ve,Ee,Oe=this.size,pt=this._unmodified;if(this.latRange){var wt=this.latRange;R=n.mercatorYfromLat(wt[1])*this.worldSize,G=n.mercatorYfromLat(wt[0])*this.worldSize,re=G-R<Oe.y?Oe.y/(G-R):0}if(this.lngRange){var yt=this.lngRange;I=n.mercatorXfromLng(yt[0])*this.worldSize,W=n.mercatorXfromLng(yt[1])*this.worldSize,$=W-I<Oe.x?Oe.x/(W-I):0}var Be=this.point,$e=Math.max($||0,re||0);if($e){this.center=this.unproject(new n.Point($?(W+I)/2:Be.x,re?(G+R)/2:Be.y)),this.zoom+=this.scaleZoom($e),this._unmodified=pt,this._constraining=!1;return}if(this.latRange){var ft=Be.y,Tt=Oe.y/2;ft-Tt<R&&(Ee=R+Tt),ft+Tt>G&&(Ee=G-Tt)}if(this.lngRange){var Lt=Be.x,Pt=Oe.x/2;Lt-Pt<I&&(ve=I+Pt),Lt+Pt>W&&(ve=W-Pt)}(ve!==void 0||Ee!==void 0)&&(this.center=this.unproject(new n.Point(ve!==void 0?ve:Be.x,Ee!==void 0?Ee:Be.y))),this._unmodified=pt,this._constraining=!1}},ro.prototype._calcMatrices=function(){if(this.height){var R=this._fov/2,G=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(R)*this.height;var I=Math.PI/2+this._pitch,W=this._fov*(.5+G.y/this.height),re=Math.sin(W)*this.cameraToCenterDistance/Math.sin(n.clamp(Math.PI-I-W,.01,Math.PI-.01)),$=this.point,ve=$.x,Ee=$.y,Oe=Math.cos(Math.PI/2-this._pitch)*re+this.cameraToCenterDistance,pt=Oe*1.01,wt=this.height/50,yt=new Float64Array(16);n.perspective(yt,this._fov,this.width/this.height,wt,pt),yt[8]=-G.x*2/this.width,yt[9]=G.y*2/this.height,n.scale(yt,yt,[1,-1,1]),n.translate(yt,yt,[0,0,-this.cameraToCenterDistance]),n.rotateX(yt,yt,this._pitch),n.rotateZ(yt,yt,this.angle),n.translate(yt,yt,[-ve,-Ee,0]),this.mercatorMatrix=n.scale([],yt,[this.worldSize,this.worldSize,this.worldSize]),n.scale(yt,yt,[1,1,n.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=yt,this.invProjMatrix=n.invert([],this.projMatrix);var Be=this.width%2/2,$e=this.height%2/2,ft=Math.cos(this.angle),Tt=Math.sin(this.angle),Lt=ve-Math.round(ve)+ft*Be+Tt*$e,Pt=Ee-Math.round(Ee)+ft*$e+Tt*Be,jt=new Float64Array(yt);if(n.translate(jt,jt,[Lt>.5?Lt-1:Lt,Pt>.5?Pt-1:Pt,0]),this.alignedProjMatrix=jt,yt=n.create(),n.scale(yt,yt,[this.width/2,-this.height/2,1]),n.translate(yt,yt,[1,-1,0]),this.labelPlaneMatrix=yt,yt=n.create(),n.scale(yt,yt,[1,-1,1]),n.translate(yt,yt,[-1,-1,0]),n.scale(yt,yt,[2/this.width,2/this.height,1]),this.glCoordMatrix=yt,this.pixelMatrix=n.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),yt=n.invert(new Float64Array(16),this.pixelMatrix),!yt)throw new Error("failed to invert matrix");this.pixelMatrixInverse=yt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},ro.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var R=this.pointCoordinate(new n.Point(0,0)),G=[R.x*this.worldSize,R.y*this.worldSize,0,1],I=n.transformMat4(G,G,this.pixelMatrix);return I[3]/this.cameraToCenterDistance},ro.prototype.getCameraPoint=function(){var R=this._pitch,G=Math.tan(R)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new n.Point(0,G))},ro.prototype.getCameraQueryGeometry=function(R){var G=this.getCameraPoint();if(R.length===1)return[R[0],G];for(var I=G.x,W=G.y,re=G.x,$=G.y,ve=0,Ee=R;ve<Ee.length;ve+=1){var Oe=Ee[ve];I=Math.min(I,Oe.x),W=Math.min(W,Oe.y),re=Math.max(re,Oe.x),$=Math.max($,Oe.y)}return[new n.Point(I,W),new n.Point(re,W),new n.Point(re,$),new n.Point(I,$),new n.Point(I,W)]},Object.defineProperties(ro.prototype,Wa);function Il(H,R){var G=!1,I=null,W=function(){I=null,G&&(H(),I=setTimeout(W,R),G=!1)};return function(){return G=!0,I||W(),I}}var Sl=function(R){this._hashName=R&&encodeURIComponent(R),n.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Il(this._updateHashUnthrottled.bind(this),30*1e3/100)};Sl.prototype.addTo=function(R){return this._map=R,n.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Sl.prototype.remove=function(){return n.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Sl.prototype.getHashString=function(R){var G=this._map.getCenter(),I=Math.round(this._map.getZoom()*100)/100,W=Math.ceil((I*Math.LN2+Math.log(512/360/.5))/Math.LN10),re=Math.pow(10,W),$=Math.round(G.lng*re)/re,ve=Math.round(G.lat*re)/re,Ee=this._map.getBearing(),Oe=this._map.getPitch(),pt="";if(R?pt+="/"+$+"/"+ve+"/"+I:pt+=I+"/"+ve+"/"+$,(Ee||Oe)&&(pt+="/"+Math.round(Ee*10)/10),Oe&&(pt+="/"+Math.round(Oe)),this._hashName){var wt=this._hashName,yt=!1,Be=n.window.location.hash.slice(1).split("&").map(function($e){var ft=$e.split("=")[0];return ft===wt?(yt=!0,ft+"="+pt):$e}).filter(function($e){return $e});return yt||Be.push(wt+"="+pt),"#"+Be.join("&")}return"#"+pt},Sl.prototype._getCurrentHash=function(){var R=this,G=n.window.location.hash.replace("#","");if(this._hashName){var I;return G.split("&").map(function(W){return W.split("=")}).forEach(function(W){W[0]===R._hashName&&(I=W)}),(I&&I[1]||"").split("/")}return G.split("/")},Sl.prototype._onHashChange=function(){var R=this._getCurrentHash();if(R.length>=3&&!R.some(function(I){return isNaN(I)})){var G=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(R[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+R[2],+R[1]],zoom:+R[0],bearing:G,pitch:+(R[4]||0)}),!0}return!1},Sl.prototype._updateHashUnthrottled=function(){var R=n.window.location.href.replace(/(#.+)?$/,this.getHashString());try{n.window.history.replaceState(n.window.history.state,null,R)}catch(G){}};var Cu={linearity:.3,easing:n.bezier(0,0,.3,1)},fu=n.extend({deceleration:2500,maxSpeed:1400},Cu),Fl=n.extend({deceleration:20,maxSpeed:1400},Cu),El=n.extend({deceleration:1e3,maxSpeed:360},Cu),xf=n.extend({deceleration:1e3,maxSpeed:90},Cu),ju=function(R){this._map=R,this.clear()};ju.prototype.clear=function(){this._inertiaBuffer=[]},ju.prototype.record=function(R){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:n.browser.now(),settings:R})},ju.prototype._drainInertiaBuffer=function(){for(var R=this._inertiaBuffer,G=n.browser.now(),I=160;R.length>0&&G-R[0].time>I;)R.shift()},ju.prototype._onMoveEnd=function(R){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var G={zoom:0,bearing:0,pitch:0,pan:new n.Point(0,0),pinchAround:void 0,around:void 0},I=0,W=this._inertiaBuffer;I<W.length;I+=1){var re=W[I],$=re.settings;G.zoom+=$.zoomDelta||0,G.bearing+=$.bearingDelta||0,G.pitch+=$.pitchDelta||0,$.panDelta&&G.pan._add($.panDelta),$.around&&(G.around=$.around),$.pinchAround&&(G.pinchAround=$.pinchAround)}var ve=this._inertiaBuffer[this._inertiaBuffer.length-1],Ee=ve.time-this._inertiaBuffer[0].time,Oe={};if(G.pan.mag()){var pt=V(G.pan.mag(),Ee,n.extend({},fu,R||{}));Oe.offset=G.pan.mult(pt.amount/G.pan.mag()),Oe.center=this._map.transform.center,Ku(Oe,pt)}if(G.zoom){var wt=V(G.zoom,Ee,Fl);Oe.zoom=this._map.transform.zoom+wt.amount,Ku(Oe,wt)}if(G.bearing){var yt=V(G.bearing,Ee,El);Oe.bearing=this._map.transform.bearing+n.clamp(yt.amount,-179,179),Ku(Oe,yt)}if(G.pitch){var Be=V(G.pitch,Ee,xf);Oe.pitch=this._map.transform.pitch+Be.amount,Ku(Oe,Be)}if(Oe.zoom||Oe.bearing){var $e=G.pinchAround===void 0?G.around:G.pinchAround;Oe.around=$e?this._map.unproject($e):this._map.getCenter()}return this.clear(),n.extend(Oe,{noMoveStart:!0})}};function Ku(H,R){(!H.duration||H.duration<R.duration)&&(H.duration=R.duration,H.easing=R.easing)}function V(H,R,G){var I=G.maxSpeed,W=G.linearity,re=G.deceleration,$=n.clamp(H*W/(R/1e3),-I,I),ve=Math.abs($)/(re*W);return{easing:G.easing,duration:ve*1e3,amount:$*(ve/2)}}var J=function(H){function R(I,W,re,$){$===void 0&&($={});var ve=o.mousePos(W.getCanvasContainer(),re),Ee=W.unproject(ve);H.call(this,I,n.extend({point:ve,lngLat:Ee,originalEvent:re},$)),this._defaultPrevented=!1,this.target=W}H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R;var G={defaultPrevented:{configurable:!0}};return R.prototype.preventDefault=function(){this._defaultPrevented=!0},G.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(R.prototype,G),R}(n.Event),se=function(H){function R(I,W,re){var $=I==="touchend"?re.changedTouches:re.touches,ve=o.touchPos(W.getCanvasContainer(),$),Ee=ve.map(function(wt){return W.unproject(wt)}),Oe=ve.reduce(function(wt,yt,Be,$e){return wt.add(yt.div($e.length))},new n.Point(0,0)),pt=W.unproject(Oe);H.call(this,I,{points:ve,point:Oe,lngLats:Ee,lngLat:pt,originalEvent:re}),this._defaultPrevented=!1}H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R;var G={defaultPrevented:{configurable:!0}};return R.prototype.preventDefault=function(){this._defaultPrevented=!0},G.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(R.prototype,G),R}(n.Event),xe=function(H){function R(I,W,re){H.call(this,I,{originalEvent:re}),this._defaultPrevented=!1}H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R;var G={defaultPrevented:{configurable:!0}};return R.prototype.preventDefault=function(){this._defaultPrevented=!0},G.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(R.prototype,G),R}(n.Event),be=function(R,G){this._map=R,this._clickTolerance=G.clickTolerance};be.prototype.reset=function(){delete this._mousedownPos},be.prototype.wheel=function(R){return this._firePreventable(new xe(R.type,this._map,R))},be.prototype.mousedown=function(R,G){return this._mousedownPos=G,this._firePreventable(new J(R.type,this._map,R))},be.prototype.mouseup=function(R){this._map.fire(new J(R.type,this._map,R))},be.prototype.click=function(R,G){this._mousedownPos&&this._mousedownPos.dist(G)>=this._clickTolerance||this._map.fire(new J(R.type,this._map,R))},be.prototype.dblclick=function(R){return this._firePreventable(new J(R.type,this._map,R))},be.prototype.mouseover=function(R){this._map.fire(new J(R.type,this._map,R))},be.prototype.mouseout=function(R){this._map.fire(new J(R.type,this._map,R))},be.prototype.touchstart=function(R){return this._firePreventable(new se(R.type,this._map,R))},be.prototype.touchmove=function(R){this._map.fire(new se(R.type,this._map,R))},be.prototype.touchend=function(R){this._map.fire(new se(R.type,this._map,R))},be.prototype.touchcancel=function(R){this._map.fire(new se(R.type,this._map,R))},be.prototype._firePreventable=function(R){if(this._map.fire(R),R.defaultPrevented)return{}},be.prototype.isEnabled=function(){return!0},be.prototype.isActive=function(){return!1},be.prototype.enable=function(){},be.prototype.disable=function(){};var Ae=function(R){this._map=R};Ae.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Ae.prototype.mousemove=function(R){this._map.fire(new J(R.type,this._map,R))},Ae.prototype.mousedown=function(){this._delayContextMenu=!0},Ae.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new J("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Ae.prototype.contextmenu=function(R){this._delayContextMenu?this._contextMenuEvent=R:this._map.fire(new J(R.type,this._map,R)),this._map.listens("contextmenu")&&R.preventDefault()},Ae.prototype.isEnabled=function(){return!0},Ae.prototype.isActive=function(){return!1},Ae.prototype.enable=function(){},Ae.prototype.disable=function(){};var Ge=function(R,G){this._map=R,this._el=R.getCanvasContainer(),this._container=R.getContainer(),this._clickTolerance=G.clickTolerance||1};Ge.prototype.isEnabled=function(){return!!this._enabled},Ge.prototype.isActive=function(){return!!this._active},Ge.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Ge.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ge.prototype.mousedown=function(R,G){this.isEnabled()&&R.shiftKey&&R.button===0&&(o.disableDrag(),this._startPos=this._lastPos=G,this._active=!0)},Ge.prototype.mousemoveWindow=function(R,G){if(this._active){var I=G;if(!(this._lastPos.equals(I)||!this._box&&I.dist(this._startPos)<this._clickTolerance)){var W=this._startPos;this._lastPos=I,this._box||(this._box=o.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",R));var re=Math.min(W.x,I.x),$=Math.max(W.x,I.x),ve=Math.min(W.y,I.y),Ee=Math.max(W.y,I.y);o.setTransform(this._box,"translate("+re+"px,"+ve+"px)"),this._box.style.width=$-re+"px",this._box.style.height=Ee-ve+"px"}}},Ge.prototype.mouseupWindow=function(R,G){var I=this;if(this._active&&R.button===0){var W=this._startPos,re=G;if(this.reset(),o.suppressClick(),W.x===re.x&&W.y===re.y)this._fireEvent("boxzoomcancel",R);else return this._map.fire(new n.Event("boxzoomend",{originalEvent:R})),{cameraAnimation:function($){return $.fitScreenCoordinates(W,re,I._map.getBearing(),{linear:!0})}}}},Ge.prototype.keydown=function(R){this._active&&R.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",R))},Ge.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(o.remove(this._box),this._box=null),o.enableDrag(),delete this._startPos,delete this._lastPos},Ge.prototype._fireEvent=function(R,G){return this._map.fire(new n.Event(R,{originalEvent:G}))};function Pe(H,R){for(var G={},I=0;I<H.length;I++)G[H[I].identifier]=R[I];return G}function tt(H){for(var R=new n.Point(0,0),G=0,I=H;G<I.length;G+=1){var W=I[G];R._add(W)}return R.div(H.length)}var Mt=500,Et=500,rr=30,tr=function(R){this.reset(),this.numTouches=R.numTouches};tr.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},tr.prototype.touchstart=function(R,G,I){(this.centroid||I.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=R.timeStamp),I.length===this.numTouches&&(this.centroid=tt(G),this.touches=Pe(I,G)))},tr.prototype.touchmove=function(R,G,I){if(!(this.aborted||!this.centroid)){var W=Pe(I,G);for(var re in this.touches){var $=this.touches[re],ve=W[re];(!ve||ve.dist($)>rr)&&(this.aborted=!0)}}},tr.prototype.touchend=function(R,G,I){if((!this.centroid||R.timeStamp-this.startTime>Et)&&(this.aborted=!0),I.length===0){var W=!this.aborted&&this.centroid;if(this.reset(),W)return W}};var Tr=function(R){this.singleTap=new tr(R),this.numTaps=R.numTaps,this.reset()};Tr.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Tr.prototype.touchstart=function(R,G,I){this.singleTap.touchstart(R,G,I)},Tr.prototype.touchmove=function(R,G,I){this.singleTap.touchmove(R,G,I)},Tr.prototype.touchend=function(R,G,I){var W=this.singleTap.touchend(R,G,I);if(W){var re=R.timeStamp-this.lastTime<Mt,$=!this.lastTap||this.lastTap.dist(W)<rr;if((!re||!$)&&this.reset(),this.count++,this.lastTime=R.timeStamp,this.lastTap=W,this.count===this.numTaps)return this.reset(),W}};var Er=function(){this._zoomIn=new Tr({numTouches:1,numTaps:2}),this._zoomOut=new Tr({numTouches:2,numTaps:1}),this.reset()};Er.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Er.prototype.touchstart=function(R,G,I){this._zoomIn.touchstart(R,G,I),this._zoomOut.touchstart(R,G,I)},Er.prototype.touchmove=function(R,G,I){this._zoomIn.touchmove(R,G,I),this._zoomOut.touchmove(R,G,I)},Er.prototype.touchend=function(R,G,I){var W=this,re=this._zoomIn.touchend(R,G,I),$=this._zoomOut.touchend(R,G,I);if(re)return this._active=!0,R.preventDefault(),setTimeout(function(){return W.reset()},0),{cameraAnimation:function(ve){return ve.easeTo({duration:300,zoom:ve.getZoom()+1,around:ve.unproject(re)},{originalEvent:R})}};if($)return this._active=!0,R.preventDefault(),setTimeout(function(){return W.reset()},0),{cameraAnimation:function(ve){return ve.easeTo({duration:300,zoom:ve.getZoom()-1,around:ve.unproject($)},{originalEvent:R})}}},Er.prototype.touchcancel=function(){this.reset()},Er.prototype.enable=function(){this._enabled=!0},Er.prototype.disable=function(){this._enabled=!1,this.reset()},Er.prototype.isEnabled=function(){return this._enabled},Er.prototype.isActive=function(){return this._active};var ir=0,gr=2,wr={};wr[ir]=1,wr[gr]=2;function Pr(H,R){var G=wr[R];return H.buttons===void 0||(H.buttons&G)!==G}var kr=function(R){this.reset(),this._clickTolerance=R.clickTolerance||1};kr.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},kr.prototype._correctButton=function(R,G){return!1},kr.prototype._move=function(R,G){return{}},kr.prototype.mousedown=function(R,G){if(!this._lastPoint){var I=o.mouseButton(R);this._correctButton(R,I)&&(this._lastPoint=G,this._eventButton=I)}},kr.prototype.mousemoveWindow=function(R,G){var I=this._lastPoint;if(I){if(R.preventDefault(),Pr(R,this._eventButton)){this.reset();return}if(!(!this._moved&&G.dist(I)<this._clickTolerance))return this._moved=!0,this._lastPoint=G,this._move(I,G)}},kr.prototype.mouseupWindow=function(R){if(this._lastPoint){var G=o.mouseButton(R);G===this._eventButton&&(this._moved&&o.suppressClick(),this.reset())}},kr.prototype.enable=function(){this._enabled=!0},kr.prototype.disable=function(){this._enabled=!1,this.reset()},kr.prototype.isEnabled=function(){return this._enabled},kr.prototype.isActive=function(){return this._active};var pr=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.mousedown=function(I,W){H.prototype.mousedown.call(this,I,W),this._lastPoint&&(this._active=!0)},R.prototype._correctButton=function(I,W){return W===ir&&!I.ctrlKey},R.prototype._move=function(I,W){return{around:W,panDelta:W.sub(I)}},R}(kr),mn=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype._correctButton=function(I,W){return W===ir&&I.ctrlKey||W===gr},R.prototype._move=function(I,W){var re=.8,$=(W.x-I.x)*re;if($)return this._active=!0,{bearingDelta:$}},R.prototype.contextmenu=function(I){I.preventDefault()},R}(kr),Tn=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype._correctButton=function(I,W){return W===ir&&I.ctrlKey||W===gr},R.prototype._move=function(I,W){var re=-.5,$=(W.y-I.y)*re;if($)return this._active=!0,{pitchDelta:$}},R.prototype.contextmenu=function(I){I.preventDefault()},R}(kr),zn=function(R){this._minTouches=1,this._clickTolerance=R.clickTolerance||1,this.reset()};zn.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new n.Point(0,0)},zn.prototype.touchstart=function(R,G,I){return this._calculateTransform(R,G,I)},zn.prototype.touchmove=function(R,G,I){if(!(!this._active||I.length<this._minTouches))return R.preventDefault(),this._calculateTransform(R,G,I)},zn.prototype.touchend=function(R,G,I){this._calculateTransform(R,G,I),this._active&&I.length<this._minTouches&&this.reset()},zn.prototype.touchcancel=function(){this.reset()},zn.prototype._calculateTransform=function(R,G,I){I.length>0&&(this._active=!0);var W=Pe(I,G),re=new n.Point(0,0),$=new n.Point(0,0),ve=0;for(var Ee in W){var Oe=W[Ee],pt=this._touches[Ee];pt&&(re._add(Oe),$._add(Oe.sub(pt)),ve++,W[Ee]=Oe)}if(this._touches=W,!(ve<this._minTouches||!$.mag())){var wt=$.div(ve);if(this._sum._add(wt),!(this._sum.mag()<this._clickTolerance)){var yt=re.div(ve);return{around:yt,panDelta:wt}}}},zn.prototype.enable=function(){this._enabled=!0},zn.prototype.disable=function(){this._enabled=!1,this.reset()},zn.prototype.isEnabled=function(){return this._enabled},zn.prototype.isActive=function(){return this._active};var Kn=function(){this.reset()};Kn.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Kn.prototype._start=function(R){},Kn.prototype._move=function(R,G,I){return{}},Kn.prototype.touchstart=function(R,G,I){this._firstTwoTouches||I.length<2||(this._firstTwoTouches=[I[0].identifier,I[1].identifier],this._start([G[0],G[1]]))},Kn.prototype.touchmove=function(R,G,I){if(this._firstTwoTouches){R.preventDefault();var W=this._firstTwoTouches,re=W[0],$=W[1],ve=Ci(I,G,re),Ee=Ci(I,G,$);if(!(!ve||!Ee)){var Oe=this._aroundCenter?null:ve.add(Ee).div(2);return this._move([ve,Ee],Oe,R)}}},Kn.prototype.touchend=function(R,G,I){if(this._firstTwoTouches){var W=this._firstTwoTouches,re=W[0],$=W[1],ve=Ci(I,G,re),Ee=Ci(I,G,$);ve&&Ee||(this._active&&o.suppressClick(),this.reset())}},Kn.prototype.touchcancel=function(){this.reset()},Kn.prototype.enable=function(R){this._enabled=!0,this._aroundCenter=!!R&&R.around==="center"},Kn.prototype.disable=function(){this._enabled=!1,this.reset()},Kn.prototype.isEnabled=function(){return this._enabled},Kn.prototype.isActive=function(){return this._active};function Ci(H,R,G){for(var I=0;I<H.length;I++)if(H[I].identifier===G)return R[I]}var qi=.1;function xa(H,R){return Math.log(H/R)/Math.LN2}var Gi=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.reset=function(){H.prototype.reset.call(this),delete this._distance,delete this._startDistance},R.prototype._start=function(I){this._startDistance=this._distance=I[0].dist(I[1])},R.prototype._move=function(I,W){var re=this._distance;if(this._distance=I[0].dist(I[1]),!(!this._active&&Math.abs(xa(this._distance,this._startDistance))<qi))return this._active=!0,{zoomDelta:xa(this._distance,re),pinchAround:W}},R}(Kn),va=25;function mo(H,R){return H.angleWith(R)*180/Math.PI}var Do=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.reset=function(){H.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},R.prototype._start=function(I){this._startVector=this._vector=I[0].sub(I[1]),this._minDiameter=I[0].dist(I[1])},R.prototype._move=function(I,W){var re=this._vector;if(this._vector=I[0].sub(I[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:mo(this._vector,re),pinchAround:W}},R.prototype._isBelowThreshold=function(I){this._minDiameter=Math.min(this._minDiameter,I.mag());var W=Math.PI*this._minDiameter,re=va/W*360,$=mo(I,this._startVector);return Math.abs($)<re},R}(Kn);function So(H){return Math.abs(H.y)>Math.abs(H.x)}var kn=100,da=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.reset=function(){H.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},R.prototype._start=function(I){this._lastPoints=I,So(I[0].sub(I[1]))&&(this._valid=!1)},R.prototype._move=function(I,W,re){var $=I[0].sub(this._lastPoints[0]),ve=I[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically($,ve,re.timeStamp),!!this._valid){this._lastPoints=I,this._active=!0;var Ee=($.y+ve.y)/2,Oe=-.5;return{pitchDelta:Ee*Oe}}},R.prototype.gestureBeginsVertically=function(I,W,re){if(this._valid!==void 0)return this._valid;var $=2,ve=I.mag()>=$,Ee=W.mag()>=$;if(!(!ve&&!Ee)){if(!ve||!Ee)return this._firstMove===void 0&&(this._firstMove=re),re-this._firstMove<kn?void 0:!1;var Oe=I.y>0==W.y>0;return So(I)&&So(W)&&Oe}},R}(Kn),Sa={panStep:100,bearingStep:15,pitchStep:10},La=function(){var R=Sa;this._panStep=R.panStep,this._bearingStep=R.bearingStep,this._pitchStep=R.pitchStep,this._rotationDisabled=!1};La.prototype.reset=function(){this._active=!1},La.prototype.keydown=function(R){var G=this;if(!(R.altKey||R.ctrlKey||R.metaKey)){var I=0,W=0,re=0,$=0,ve=0;switch(R.keyCode){case 61:case 107:case 171:case 187:I=1;break;case 189:case 109:case 173:I=-1;break;case 37:R.shiftKey?W=-1:(R.preventDefault(),$=-1);break;case 39:R.shiftKey?W=1:(R.preventDefault(),$=1);break;case 38:R.shiftKey?re=1:(R.preventDefault(),ve=-1);break;case 40:R.shiftKey?re=-1:(R.preventDefault(),ve=1);break;default:return}return this._rotationDisabled&&(W=0,re=0),{cameraAnimation:function(Ee){var Oe=Ee.getZoom();Ee.easeTo({duration:300,easeId:"keyboardHandler",easing:As,zoom:I?Math.round(Oe)+I*(R.shiftKey?2:1):Oe,bearing:Ee.getBearing()+W*G._bearingStep,pitch:Ee.getPitch()+re*G._pitchStep,offset:[-$*G._panStep,-ve*G._panStep],center:Ee.getCenter()},{originalEvent:R})}}}},La.prototype.enable=function(){this._enabled=!0},La.prototype.disable=function(){this._enabled=!1,this.reset()},La.prototype.isEnabled=function(){return this._enabled},La.prototype.isActive=function(){return this._active},La.prototype.disableRotation=function(){this._rotationDisabled=!0},La.prototype.enableRotation=function(){this._rotationDisabled=!1};function As(H){return H*(2-H)}var Gs=4.000244140625,ml=1/100,fs=1/450,Xl=2,Ye=function(R,G){this._map=R,this._el=R.getCanvasContainer(),this._handler=G,this._delta=0,this._defaultZoomRate=ml,this._wheelZoomRate=fs,n.bindAll(["_onTimeout"],this)};Ye.prototype.setZoomRate=function(R){this._defaultZoomRate=R},Ye.prototype.setWheelZoomRate=function(R){this._wheelZoomRate=R},Ye.prototype.isEnabled=function(){return!!this._enabled},Ye.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Ye.prototype.isZooming=function(){return!!this._zooming},Ye.prototype.enable=function(R){this.isEnabled()||(this._enabled=!0,this._aroundCenter=R&&R.around==="center")},Ye.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ye.prototype.wheel=function(R){if(this.isEnabled()){var G=R.deltaMode===n.window.WheelEvent.DOM_DELTA_LINE?R.deltaY*40:R.deltaY,I=n.browser.now(),W=I-(this._lastWheelEventTime||0);this._lastWheelEventTime=I,G!==0&&G%Gs===0?this._type="wheel":G!==0&&Math.abs(G)<4?this._type="trackpad":W>400?(this._type=null,this._lastValue=G,this._timeout=setTimeout(this._onTimeout,40,R)):this._type||(this._type=Math.abs(W*G)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,G+=this._lastValue)),R.shiftKey&&G&&(G=G/4),this._type&&(this._lastWheelEvent=R,this._delta-=G,this._active||this._start(R)),R.preventDefault()}},Ye.prototype._onTimeout=function(R){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(R)},Ye.prototype._start=function(R){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var G=o.mousePos(this._el,R);this._around=n.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(G)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Ye.prototype.renderFrame=function(){var R=this;if(this._frameId&&(this._frameId=null,!!this.isActive())){var G=this._map.transform;if(this._delta!==0){var I=this._type==="wheel"&&Math.abs(this._delta)>Gs?this._wheelZoomRate:this._defaultZoomRate,W=Xl/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&W!==0&&(W=1/W);var re=typeof this._targetZoom=="number"?G.zoomScale(this._targetZoom):G.scale;this._targetZoom=Math.min(G.maxZoom,Math.max(G.minZoom,G.scaleZoom(re*W))),this._type==="wheel"&&(this._startZoom=G.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var $=typeof this._targetZoom=="number"?this._targetZoom:G.zoom,ve=this._startZoom,Ee=this._easing,Oe=!1,pt;if(this._type==="wheel"&&ve&&Ee){var wt=Math.min((n.browser.now()-this._lastWheelEventTime)/200,1),yt=Ee(wt);pt=n.number(ve,$,yt),wt<1?this._frameId||(this._frameId=!0):Oe=!0}else pt=$,Oe=!0;return this._active=!0,Oe&&(this._active=!1,this._finishTimeout=setTimeout(function(){R._zooming=!1,R._handler._triggerRenderFrame(),delete R._targetZoom,delete R._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Oe,zoomDelta:pt-G.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Ye.prototype._smoothOutEasing=function(R){var G=n.ease;if(this._prevEase){var I=this._prevEase,W=(n.browser.now()-I.start)/I.duration,re=I.easing(W+.01)-I.easing(W),$=.27/Math.sqrt(re*re+1e-4)*.01,ve=Math.sqrt(.27*.27-$*$);G=n.bezier($,ve,.25,1)}return this._prevEase={start:n.browser.now(),duration:R,easing:G},G},Ye.prototype.reset=function(){this._active=!1};var Yt=function(R,G){this._clickZoom=R,this._tapZoom=G};Yt.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Yt.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Yt.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Yt.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var lr=function(){this.reset()};lr.prototype.reset=function(){this._active=!1},lr.prototype.dblclick=function(R,G){return R.preventDefault(),{cameraAnimation:function(I){I.easeTo({duration:300,zoom:I.getZoom()+(R.shiftKey?-1:1),around:I.unproject(G)},{originalEvent:R})}}},lr.prototype.enable=function(){this._enabled=!0},lr.prototype.disable=function(){this._enabled=!1,this.reset()},lr.prototype.isEnabled=function(){return this._enabled},lr.prototype.isActive=function(){return this._active};var Or=function(){this._tap=new Tr({numTouches:1,numTaps:1}),this.reset()};Or.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Or.prototype.touchstart=function(R,G,I){this._swipePoint||(this._tapTime&&R.timeStamp-this._tapTime>Mt&&this.reset(),this._tapTime?I.length>0&&(this._swipePoint=G[0],this._swipeTouch=I[0].identifier):this._tap.touchstart(R,G,I))},Or.prototype.touchmove=function(R,G,I){if(!this._tapTime)this._tap.touchmove(R,G,I);else if(this._swipePoint){if(I[0].identifier!==this._swipeTouch)return;var W=G[0],re=W.y-this._swipePoint.y;return this._swipePoint=W,R.preventDefault(),this._active=!0,{zoomDelta:re/128}}},Or.prototype.touchend=function(R,G,I){if(this._tapTime)this._swipePoint&&I.length===0&&this.reset();else{var W=this._tap.touchend(R,G,I);W&&(this._tapTime=R.timeStamp)}},Or.prototype.touchcancel=function(){this.reset()},Or.prototype.enable=function(){this._enabled=!0},Or.prototype.disable=function(){this._enabled=!1,this.reset()},Or.prototype.isEnabled=function(){return this._enabled},Or.prototype.isActive=function(){return this._active};var $r=function(R,G,I){this._el=R,this._mousePan=G,this._touchPan=I};$r.prototype.enable=function(R){this._inertiaOptions=R||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},$r.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},$r.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},$r.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var jr=function(R,G,I){this._pitchWithRotate=R.pitchWithRotate,this._mouseRotate=G,this._mousePitch=I};jr.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},jr.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},jr.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},jr.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Kr=function(R,G,I,W){this._el=R,this._touchZoom=G,this._touchRotate=I,this._tapDragZoom=W,this._rotationDisabled=!1,this._enabled=!0};Kr.prototype.enable=function(R){this._touchZoom.enable(R),this._rotationDisabled||this._touchRotate.enable(R),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Kr.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Kr.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Kr.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Kr.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Kr.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var _n=function(H){return H.zoom||H.drag||H.pitch||H.rotate},ti=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R}(n.Event);function Zn(H){return H.panDelta&&H.panDelta.mag()||H.zoomDelta||H.bearingDelta||H.pitchDelta}var In=function(R,G){this._map=R,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ju(R),this._bearingSnap=G.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(G),n.bindAll(["handleEvent","handleWindowEvent"],this);var I=this._el;this._listeners=[[I,"touchstart",{passive:!0}],[I,"touchmove",{passive:!1}],[I,"touchend",void 0],[I,"touchcancel",void 0],[I,"mousedown",void 0],[I,"mousemove",void 0],[I,"mouseup",void 0],[n.window.document,"mousemove",{capture:!0}],[n.window.document,"mouseup",void 0],[I,"mouseover",void 0],[I,"mouseout",void 0],[I,"dblclick",void 0],[I,"click",void 0],[I,"keydown",{capture:!1}],[I,"keyup",void 0],[I,"wheel",{passive:!1}],[I,"contextmenu",void 0],[n.window,"blur",void 0]];for(var W=0,re=this._listeners;W<re.length;W+=1){var $=re[W],ve=$[0],Ee=$[1],Oe=$[2];o.addEventListener(ve,Ee,ve===n.window.document?this.handleWindowEvent:this.handleEvent,Oe)}};In.prototype.destroy=function(){for(var R=0,G=this._listeners;R<G.length;R+=1){var I=G[R],W=I[0],re=I[1],$=I[2];o.removeEventListener(W,re,W===n.window.document?this.handleWindowEvent:this.handleEvent,$)}},In.prototype._addDefaultHandlers=function(R){var G=this._map,I=G.getCanvasContainer();this._add("mapEvent",new be(G,R));var W=G.boxZoom=new Ge(G,R);this._add("boxZoom",W);var re=new Er,$=new lr;G.doubleClickZoom=new Yt($,re),this._add("tapZoom",re),this._add("clickZoom",$);var ve=new Or;this._add("tapDragZoom",ve);var Ee=G.touchPitch=new da;this._add("touchPitch",Ee);var Oe=new mn(R),pt=new Tn(R);G.dragRotate=new jr(R,Oe,pt),this._add("mouseRotate",Oe,["mousePitch"]),this._add("mousePitch",pt,["mouseRotate"]);var wt=new pr(R),yt=new zn(R);G.dragPan=new $r(I,wt,yt),this._add("mousePan",wt),this._add("touchPan",yt,["touchZoom","touchRotate"]);var Be=new Do,$e=new Gi;G.touchZoomRotate=new Kr(I,$e,Be,ve),this._add("touchRotate",Be,["touchPan","touchZoom"]),this._add("touchZoom",$e,["touchPan","touchRotate"]);var ft=G.scrollZoom=new Ye(G,this);this._add("scrollZoom",ft,["mousePan"]);var Tt=G.keyboard=new La;this._add("keyboard",Tt),this._add("blockableMapEvent",new Ae(G));for(var Lt=0,Pt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Lt<Pt.length;Lt+=1){var jt=Pt[Lt];R.interactive&&R[jt]&&G[jt].enable(R[jt])}},In.prototype._add=function(R,G,I){this._handlers.push({handlerName:R,handler:G,allowed:I}),this._handlersById[R]=G},In.prototype.stop=function(R){if(!this._updatingCamera){for(var G=0,I=this._handlers;G<I.length;G+=1){var W=I[G],re=W.handler;re.reset()}this._inertia.clear(),this._fireEvents({},{},R),this._changes=[]}},In.prototype.isActive=function(){for(var R=0,G=this._handlers;R<G.length;R+=1){var I=G[R],W=I.handler;if(W.isActive())return!0}return!1},In.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},In.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},In.prototype.isMoving=function(){return!!_n(this._eventsInProgress)||this.isZooming()},In.prototype._blockedByActive=function(R,G,I){for(var W in R)if(W!==I&&(!G||G.indexOf(W)<0))return!0;return!1},In.prototype.handleWindowEvent=function(R){this.handleEvent(R,R.type+"Window")},In.prototype._getMapTouches=function(R){for(var G=[],I=0,W=R;I<W.length;I+=1){var re=W[I],$=re.target;this._el.contains($)&&G.push(re)}return G},In.prototype.handleEvent=function(R,G){if(R.type==="blur"){this.stop(!0);return}this._updatingCamera=!0;for(var I=R.type==="renderFrame"?void 0:R,W={needsRenderFrame:!1},re={},$={},ve=R.touches?this._getMapTouches(R.touches):void 0,Ee=ve?o.touchPos(this._el,ve):o.mousePos(this._el,R),Oe=0,pt=this._handlers;Oe<pt.length;Oe+=1){var wt=pt[Oe],yt=wt.handlerName,Be=wt.handler,$e=wt.allowed;if(Be.isEnabled()){var ft=void 0;this._blockedByActive($,$e,yt)?Be.reset():Be[G||R.type]&&(ft=Be[G||R.type](R,Ee,ve),this.mergeHandlerResult(W,re,ft,yt,I),ft&&ft.needsRenderFrame&&this._triggerRenderFrame()),(ft||Be.isActive())&&($[yt]=Be)}}var Tt={};for(var Lt in this._previousActiveHandlers)$[Lt]||(Tt[Lt]=I);this._previousActiveHandlers=$,(Object.keys(Tt).length||Zn(W))&&(this._changes.push([W,re,Tt]),this._triggerRenderFrame()),(Object.keys($).length||Zn(W))&&this._map._stop(!0),this._updatingCamera=!1;var Pt=W.cameraAnimation;Pt&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Pt(this._map))},In.prototype.mergeHandlerResult=function(R,G,I,W,re){if(I){n.extend(R,I);var $={handlerName:W,originalEvent:I.originalEvent||re};I.zoomDelta!==void 0&&(G.zoom=$),I.panDelta!==void 0&&(G.drag=$),I.pitchDelta!==void 0&&(G.pitch=$),I.bearingDelta!==void 0&&(G.rotate=$)}},In.prototype._applyChanges=function(){for(var R={},G={},I={},W=0,re=this._changes;W<re.length;W+=1){var $=re[W],ve=$[0],Ee=$[1],Oe=$[2];ve.panDelta&&(R.panDelta=(R.panDelta||new n.Point(0,0))._add(ve.panDelta)),ve.zoomDelta&&(R.zoomDelta=(R.zoomDelta||0)+ve.zoomDelta),ve.bearingDelta&&(R.bearingDelta=(R.bearingDelta||0)+ve.bearingDelta),ve.pitchDelta&&(R.pitchDelta=(R.pitchDelta||0)+ve.pitchDelta),ve.around!==void 0&&(R.around=ve.around),ve.pinchAround!==void 0&&(R.pinchAround=ve.pinchAround),ve.noInertia&&(R.noInertia=ve.noInertia),n.extend(G,Ee),n.extend(I,Oe)}this._updateMapTransform(R,G,I),this._changes=[]},In.prototype._updateMapTransform=function(R,G,I){var W=this._map,re=W.transform;if(!Zn(R))return this._fireEvents(G,I,!0);var $=R.panDelta,ve=R.zoomDelta,Ee=R.bearingDelta,Oe=R.pitchDelta,pt=R.around,wt=R.pinchAround;wt!==void 0&&(pt=wt),W._stop(!0),pt=pt||W.transform.centerPoint;var yt=re.pointLocation($?pt.sub($):pt);Ee&&(re.bearing+=Ee),Oe&&(re.pitch+=Oe),ve&&(re.zoom+=ve),re.setLocationAtPoint(yt,pt),this._map._update(),R.noInertia||this._inertia.record(R),this._fireEvents(G,I,!0)},In.prototype._fireEvents=function(R,G,I){var W=this,re=_n(this._eventsInProgress),$=_n(R),ve={};for(var Ee in R){var Oe=R[Ee],pt=Oe.originalEvent;this._eventsInProgress[Ee]||(ve[Ee+"start"]=pt),this._eventsInProgress[Ee]=R[Ee]}!re&&$&&this._fireEvent("movestart",$.originalEvent);for(var wt in ve)this._fireEvent(wt,ve[wt]);$&&this._fireEvent("move",$.originalEvent);for(var yt in R){var Be=R[yt],$e=Be.originalEvent;this._fireEvent(yt,$e)}var ft={},Tt;for(var Lt in this._eventsInProgress){var Pt=this._eventsInProgress[Lt],jt=Pt.handlerName,Nt=Pt.originalEvent;this._handlersById[jt].isActive()||(delete this._eventsInProgress[Lt],Tt=G[jt]||Nt,ft[Lt+"end"]=Tt)}for(var Ft in ft)this._fireEvent(Ft,ft[Ft]);var Kt=_n(this._eventsInProgress);if(I&&(re||$)&&!Kt){this._updatingCamera=!0;var Ct=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),sr=function(xr){return xr!==0&&-W._bearingSnap<xr&&xr<W._bearingSnap};Ct?(sr(Ct.bearing||this._map.getBearing())&&(Ct.bearing=0),this._map.easeTo(Ct,{originalEvent:Tt})):(this._map.fire(new n.Event("moveend",{originalEvent:Tt})),sr(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},In.prototype._fireEvent=function(R,G){this._map.fire(new n.Event(R,G?{originalEvent:G}:{}))},In.prototype._requestFrame=function(){var R=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(G){delete R._frameId,R.handleEvent(new ti("renderFrame",{timeStamp:G})),R._applyChanges()})},In.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var ia=function(H){function R(G,I){H.call(this),this._moving=!1,this._zooming=!1,this.transform=G,this._bearingSnap=I.bearingSnap,n.bindAll(["_renderFrameCallback"],this)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getCenter=function(){return new n.LngLat(this.transform.center.lng,this.transform.center.lat)},R.prototype.setCenter=function(I,W){return this.jumpTo({center:I},W)},R.prototype.panBy=function(I,W,re){return I=n.Point.convert(I).mult(-1),this.panTo(this.transform.center,n.extend({offset:I},W),re)},R.prototype.panTo=function(I,W,re){return this.easeTo(n.extend({center:I},W),re)},R.prototype.getZoom=function(){return this.transform.zoom},R.prototype.setZoom=function(I,W){return this.jumpTo({zoom:I},W),this},R.prototype.zoomTo=function(I,W,re){return this.easeTo(n.extend({zoom:I},W),re)},R.prototype.zoomIn=function(I,W){return this.zoomTo(this.getZoom()+1,I,W),this},R.prototype.zoomOut=function(I,W){return this.zoomTo(this.getZoom()-1,I,W),this},R.prototype.getBearing=function(){return this.transform.bearing},R.prototype.setBearing=function(I,W){return this.jumpTo({bearing:I},W),this},R.prototype.getPadding=function(){return this.transform.padding},R.prototype.setPadding=function(I,W){return this.jumpTo({padding:I},W),this},R.prototype.rotateTo=function(I,W,re){return this.easeTo(n.extend({bearing:I},W),re)},R.prototype.resetNorth=function(I,W){return this.rotateTo(0,n.extend({duration:1e3},I),W),this},R.prototype.resetNorthPitch=function(I,W){return this.easeTo(n.extend({bearing:0,pitch:0,duration:1e3},I),W),this},R.prototype.snapToNorth=function(I,W){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(I,W):this},R.prototype.getPitch=function(){return this.transform.pitch},R.prototype.setPitch=function(I,W){return this.jumpTo({pitch:I},W),this},R.prototype.cameraForBounds=function(I,W){I=n.LngLatBounds.convert(I);var re=W&&W.bearing||0;return this._cameraForBoxAndBearing(I.getNorthWest(),I.getSouthEast(),re,W)},R.prototype._cameraForBoxAndBearing=function(I,W,re,$){var ve={top:0,bottom:0,right:0,left:0};if($=n.extend({padding:ve,offset:[0,0],maxZoom:this.transform.maxZoom},$),typeof $.padding=="number"){var Ee=$.padding;$.padding={top:Ee,bottom:Ee,right:Ee,left:Ee}}$.padding=n.extend(ve,$.padding);var Oe=this.transform,pt=Oe.padding,wt=Oe.project(n.LngLat.convert(I)),yt=Oe.project(n.LngLat.convert(W)),Be=wt.rotate(-re*Math.PI/180),$e=yt.rotate(-re*Math.PI/180),ft=new n.Point(Math.max(Be.x,$e.x),Math.max(Be.y,$e.y)),Tt=new n.Point(Math.min(Be.x,$e.x),Math.min(Be.y,$e.y)),Lt=ft.sub(Tt),Pt=(Oe.width-(pt.left+pt.right+$.padding.left+$.padding.right))/Lt.x,jt=(Oe.height-(pt.top+pt.bottom+$.padding.top+$.padding.bottom))/Lt.y;if(jt<0||Pt<0){n.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var Nt=Math.min(Oe.scaleZoom(Oe.scale*Math.min(Pt,jt)),$.maxZoom),Ft=typeof $.offset.x=="number"?new n.Point($.offset.x,$.offset.y):n.Point.convert($.offset),Kt=($.padding.left-$.padding.right)/2,Ct=($.padding.top-$.padding.bottom)/2,sr=new n.Point(Kt,Ct),xr=sr.rotate(re*Math.PI/180),Dr=Ft.add(xr),fn=Dr.mult(Oe.scale/Oe.zoomScale(Nt)),Wr=Oe.unproject(wt.add(yt).div(2).sub(fn));return{center:Wr,zoom:Nt,bearing:re}},R.prototype.fitBounds=function(I,W,re){return this._fitInternal(this.cameraForBounds(I,W),W,re)},R.prototype.fitScreenCoordinates=function(I,W,re,$,ve){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(n.Point.convert(I)),this.transform.pointLocation(n.Point.convert(W)),re,$),$,ve)},R.prototype._fitInternal=function(I,W,re){return I?(W=n.extend(I,W),delete W.padding,W.linear?this.easeTo(W,re):this.flyTo(W,re)):this},R.prototype.jumpTo=function(I,W){this.stop();var re=this.transform,$=!1,ve=!1,Ee=!1;return"zoom"in I&&re.zoom!==+I.zoom&&($=!0,re.zoom=+I.zoom),I.center!==void 0&&(re.center=n.LngLat.convert(I.center)),"bearing"in I&&re.bearing!==+I.bearing&&(ve=!0,re.bearing=+I.bearing),"pitch"in I&&re.pitch!==+I.pitch&&(Ee=!0,re.pitch=+I.pitch),I.padding!=null&&!re.isPaddingEqual(I.padding)&&(re.padding=I.padding),this.fire(new n.Event("movestart",W)).fire(new n.Event("move",W)),$&&this.fire(new n.Event("zoomstart",W)).fire(new n.Event("zoom",W)).fire(new n.Event("zoomend",W)),ve&&this.fire(new n.Event("rotatestart",W)).fire(new n.Event("rotate",W)).fire(new n.Event("rotateend",W)),Ee&&this.fire(new n.Event("pitchstart",W)).fire(new n.Event("pitch",W)).fire(new n.Event("pitchend",W)),this.fire(new n.Event("moveend",W))},R.prototype.easeTo=function(I,W){var re=this;this._stop(!1,I.easeId),I=n.extend({offset:[0,0],duration:500,easing:n.ease},I),(I.animate===!1||!I.essential&&n.browser.prefersReducedMotion)&&(I.duration=0);var $=this.transform,ve=this.getZoom(),Ee=this.getBearing(),Oe=this.getPitch(),pt=this.getPadding(),wt="zoom"in I?+I.zoom:ve,yt="bearing"in I?this._normalizeBearing(I.bearing,Ee):Ee,Be="pitch"in I?+I.pitch:Oe,$e="padding"in I?I.padding:$.padding,ft=n.Point.convert(I.offset),Tt=$.centerPoint.add(ft),Lt=$.pointLocation(Tt),Pt=n.LngLat.convert(I.center||Lt);this._normalizeCenter(Pt);var jt=$.project(Lt),Nt=$.project(Pt).sub(jt),Ft=$.zoomScale(wt-ve),Kt,Ct;I.around&&(Kt=n.LngLat.convert(I.around),Ct=$.locationPoint(Kt));var sr={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||wt!==ve,this._rotating=this._rotating||Ee!==yt,this._pitching=this._pitching||Be!==Oe,this._padding=!$.isPaddingEqual($e),this._easeId=I.easeId,this._prepareEase(W,I.noMoveStart,sr),this._ease(function(xr){if(re._zooming&&($.zoom=n.number(ve,wt,xr)),re._rotating&&($.bearing=n.number(Ee,yt,xr)),re._pitching&&($.pitch=n.number(Oe,Be,xr)),re._padding&&($.interpolatePadding(pt,$e,xr),Tt=$.centerPoint.add(ft)),Kt)$.setLocationAtPoint(Kt,Ct);else{var Dr=$.zoomScale($.zoom-ve),fn=wt>ve?Math.min(2,Ft):Math.max(.5,Ft),Wr=Math.pow(fn,1-xr),gn=$.unproject(jt.add(Nt.mult(xr*Wr)).mult(Dr));$.setLocationAtPoint($.renderWorldCopies?gn.wrap():gn,Tt)}re._fireMoveEvents(W)},function(xr){re._afterEase(W,xr)},I),this},R.prototype._prepareEase=function(I,W,re){re===void 0&&(re={}),this._moving=!0,!W&&!re.moving&&this.fire(new n.Event("movestart",I)),this._zooming&&!re.zooming&&this.fire(new n.Event("zoomstart",I)),this._rotating&&!re.rotating&&this.fire(new n.Event("rotatestart",I)),this._pitching&&!re.pitching&&this.fire(new n.Event("pitchstart",I))},R.prototype._fireMoveEvents=function(I){this.fire(new n.Event("move",I)),this._zooming&&this.fire(new n.Event("zoom",I)),this._rotating&&this.fire(new n.Event("rotate",I)),this._pitching&&this.fire(new n.Event("pitch",I))},R.prototype._afterEase=function(I,W){if(!(this._easeId&&W&&this._easeId===W)){delete this._easeId;var re=this._zooming,$=this._rotating,ve=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,re&&this.fire(new n.Event("zoomend",I)),$&&this.fire(new n.Event("rotateend",I)),ve&&this.fire(new n.Event("pitchend",I)),this.fire(new n.Event("moveend",I))}},R.prototype.flyTo=function(I,W){var re=this;if(!I.essential&&n.browser.prefersReducedMotion){var $=n.pick(I,["center","zoom","bearing","pitch","around"]);return this.jumpTo($,W)}this.stop(),I=n.extend({offset:[0,0],speed:1.2,curve:1.42,easing:n.ease},I);var ve=this.transform,Ee=this.getZoom(),Oe=this.getBearing(),pt=this.getPitch(),wt=this.getPadding(),yt="zoom"in I?n.clamp(+I.zoom,ve.minZoom,ve.maxZoom):Ee,Be="bearing"in I?this._normalizeBearing(I.bearing,Oe):Oe,$e="pitch"in I?+I.pitch:pt,ft="padding"in I?I.padding:ve.padding,Tt=ve.zoomScale(yt-Ee),Lt=n.Point.convert(I.offset),Pt=ve.centerPoint.add(Lt),jt=ve.pointLocation(Pt),Nt=n.LngLat.convert(I.center||jt);this._normalizeCenter(Nt);var Ft=ve.project(jt),Kt=ve.project(Nt).sub(Ft),Ct=I.curve,sr=Math.max(ve.width,ve.height),xr=sr/Tt,Dr=Kt.mag();if("minZoom"in I){var fn=n.clamp(Math.min(I.minZoom,Ee,yt),ve.minZoom,ve.maxZoom),Wr=sr/ve.zoomScale(fn-Ee);Ct=Math.sqrt(Wr/Dr*2)}var gn=Ct*Ct;function si(ua){var $a=(xr*xr-sr*sr+(ua?-1:1)*gn*gn*Dr*Dr)/(2*(ua?xr:sr)*gn*Dr);return Math.log(Math.sqrt($a*$a+1)-$a)}function Hn(ua){return(Math.exp(ua)-Math.exp(-ua))/2}function cn(ua){return(Math.exp(ua)+Math.exp(-ua))/2}function Rn(ua){return Hn(ua)/cn(ua)}var En=si(0),$n=function(ua){return cn(En)/cn(En+Ct*ua)},xi=function(ua){return sr*((cn(En)*Rn(En+Ct*ua)-Hn(En))/gn)/Dr},Ra=(si(1)-En)/Ct;if(Math.abs(Dr)<1e-6||!isFinite(Ra)){if(Math.abs(sr-xr)<1e-6)return this.easeTo(I,W);var Pa=xr<sr?-1:1;Ra=Math.abs(Math.log(xr/sr))/Ct,xi=function(){return 0},$n=function(ua){return Math.exp(Pa*Ct*ua)}}if("duration"in I)I.duration=+I.duration;else{var wo="screenSpeed"in I?+I.screenSpeed/Ct:+I.speed;I.duration=1e3*Ra/wo}return I.maxDuration&&I.duration>I.maxDuration&&(I.duration=0),this._zooming=!0,this._rotating=Oe!==Be,this._pitching=$e!==pt,this._padding=!ve.isPaddingEqual(ft),this._prepareEase(W,!1),this._ease(function(ua){var $a=ua*Ra,Go=1/$n($a);ve.zoom=ua===1?yt:Ee+ve.scaleZoom(Go),re._rotating&&(ve.bearing=n.number(Oe,Be,ua)),re._pitching&&(ve.pitch=n.number(pt,$e,ua)),re._padding&&(ve.interpolatePadding(wt,ft,ua),Pt=ve.centerPoint.add(Lt));var xl=ua===1?Nt:ve.unproject(Ft.add(Kt.mult(xi($a))).mult(Go));ve.setLocationAtPoint(ve.renderWorldCopies?xl.wrap():xl,Pt),re._fireMoveEvents(W)},function(){return re._afterEase(W)},I),this},R.prototype.isEasing=function(){return!!this._easeFrameId},R.prototype.stop=function(){return this._stop()},R.prototype._stop=function(I,W){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var re=this._onEaseEnd;delete this._onEaseEnd,re.call(this,W)}if(!I){var $=this.handlers;$&&$.stop(!1)}return this},R.prototype._ease=function(I,W,re){re.animate===!1||re.duration===0?(I(1),W()):(this._easeStart=n.browser.now(),this._easeOptions=re,this._onEaseFrame=I,this._onEaseEnd=W,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},R.prototype._renderFrameCallback=function(){var I=Math.min((n.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(I)),I<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},R.prototype._normalizeBearing=function(I,W){I=n.wrap(I,-180,180);var re=Math.abs(I-W);return Math.abs(I-360-W)<re&&(I-=360),Math.abs(I+360-W)<re&&(I+=360),I},R.prototype._normalizeCenter=function(I){var W=this.transform;if(!(!W.renderWorldCopies||W.lngRange)){var re=I.lng-W.center.lng;I.lng+=re>180?-360:re<-180?360:0}},R}(n.Evented),Gn=function(R){R===void 0&&(R={}),this.options=R,n.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Gn.prototype.getDefaultPosition=function(){return"bottom-right"},Gn.prototype.onAdd=function(R){var G=this.options&&this.options.compact;return this._map=R,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=o.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),G&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),G===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Gn.prototype.onRemove=function(){o.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Gn.prototype._setElementTitle=function(R,G){var I=this._map._getUIString("AttributionControl."+G);R.title=I,R.setAttribute("aria-label",I)},Gn.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Gn.prototype._updateEditLink=function(){var R=this._editLink;R||(R=this._editLink=this._container.querySelector(".mapbox-improve-map"));var G=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||n.config.ACCESS_TOKEN}];if(R){var I=G.reduce(function(W,re,$){return re.value&&(W+=re.key+"="+re.value+($<G.length-1?"&":"")),W},"?");R.href=n.config.FEEDBACK_URL+"/"+I+(this._map._hash?this._map._hash.getHashString(!0):""),R.rel="noopener nofollow",this._setElementTitle(R,"MapFeedback")}},Gn.prototype._updateData=function(R){R&&(R.sourceDataType==="metadata"||R.sourceDataType==="visibility"||R.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},Gn.prototype._updateAttributions=function(){if(this._map.style){var R=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?R=R.concat(this.options.customAttribution.map(function(Ee){return typeof Ee!="string"?"":Ee})):typeof this.options.customAttribution=="string"&&R.push(this.options.customAttribution)),this._map.style.stylesheet){var G=this._map.style.stylesheet;this.styleOwner=G.owner,this.styleId=G.id}var I=this._map.style.sourceCaches;for(var W in I){var re=I[W];if(re.used){var $=re.getSource();$.attribution&&R.indexOf($.attribution)<0&&R.push($.attribution)}}R.sort(function(Ee,Oe){return Ee.length-Oe.length}),R=R.filter(function(Ee,Oe){for(var pt=Oe+1;pt<R.length;pt++)if(R[pt].indexOf(Ee)>=0)return!1;return!0});var ve=R.join(" | ");ve!==this._attribHTML&&(this._attribHTML=ve,R.length?(this._innerContainer.innerHTML=ve,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Gn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Vn=function(){n.bindAll(["_updateLogo"],this),n.bindAll(["_updateCompact"],this)};Vn.prototype.onAdd=function(R){this._map=R,this._container=o.create("div","mapboxgl-ctrl");var G=o.create("a","mapboxgl-ctrl-logo");return G.target="_blank",G.rel="noopener nofollow",G.href="https://www.mapbox.com/",G.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),G.setAttribute("rel","noopener nofollow"),this._container.appendChild(G),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Vn.prototype.onRemove=function(){o.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Vn.prototype.getDefaultPosition=function(){return"bottom-left"},Vn.prototype._updateLogo=function(R){(!R||R.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},Vn.prototype._logoRequired=function(){if(this._map.style){var R=this._map.style.sourceCaches;for(var G in R){var I=R[G].getSource();if(I.mapbox_logo)return!0}return!1}},Vn.prototype._updateCompact=function(){var R=this._container.children;if(R.length){var G=R[0];this._map.getCanvasContainer().offsetWidth<250?G.classList.add("mapboxgl-compact"):G.classList.remove("mapboxgl-compact")}};var bn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};bn.prototype.add=function(R){var G=++this._id,I=this._queue;return I.push({callback:R,id:G,cancelled:!1}),G},bn.prototype.remove=function(R){for(var G=this._currentlyRunning,I=G?this._queue.concat(G):this._queue,W=0,re=I;W<re.length;W+=1){var $=re[W];if($.id===R){$.cancelled=!0;return}}},bn.prototype.run=function(R){R===void 0&&(R=0);var G=this._currentlyRunning=this._queue;this._queue=[];for(var I=0,W=G;I<W.length;I+=1){var re=W[I];if(!re.cancelled&&(re.callback(R),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},bn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Br={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},hn=n.window.HTMLImageElement,Yn=n.window.HTMLElement,Jn=n.window.ImageBitmap,Cn=-2,mi=22,ai=0,$i=60,Pn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:Cn,maxZoom:mi,minPitch:ai,maxPitch:$i,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Mn=function(H){function R(I){var W=this;if(I=n.extend({},Pn,I),I.minZoom!=null&&I.maxZoom!=null&&I.minZoom>I.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(I.minPitch!=null&&I.maxPitch!=null&&I.minPitch>I.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(I.minPitch!=null&&I.minPitch<ai)throw new Error("minPitch must be greater than or equal to "+ai);if(I.maxPitch!=null&&I.maxPitch>$i)throw new Error("maxPitch must be less than or equal to "+$i);var re=new ro(I.minZoom,I.maxZoom,I.minPitch,I.maxPitch,I.renderWorldCopies);if(H.call(this,re,I),this._interactive=I.interactive,this._maxTileCacheSize=I.maxTileCacheSize,this._failIfMajorPerformanceCaveat=I.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=I.preserveDrawingBuffer,this._antialias=I.antialias,this._trackResize=I.trackResize,this._bearingSnap=I.bearingSnap,this._refreshExpiredTiles=I.refreshExpiredTiles,this._fadeDuration=I.fadeDuration,this._crossSourceCollisions=I.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=I.collectResourceTiming,this._renderTaskQueue=new bn,this._controls=[],this._mapId=n.uniqueId(),this._locale=n.extend({},Br,I.locale),this._clickTolerance=I.clickTolerance,this._requestManager=new n.RequestManager(I.transformRequest,I.accessToken),typeof I.container=="string"){if(this._container=n.window.document.getElementById(I.container),!this._container)throw new Error("Container '"+I.container+"' not found.")}else if(I.container instanceof Yn)this._container=I.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(I.maxBounds&&this.setMaxBounds(I.maxBounds),n.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return W._update(!1)}),this.on("moveend",function(){return W._update(!1)}),this.on("zoom",function(){return W._update(!0)}),typeof n.window!="undefined"&&(n.window.addEventListener("online",this._onWindowOnline,!1),n.window.addEventListener("resize",this._onWindowResize,!1),n.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new In(this,I);var $=typeof I.hash=="string"&&I.hash||void 0;this._hash=I.hash&&new Sl($).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:I.center,zoom:I.zoom,bearing:I.bearing,pitch:I.pitch}),I.bounds&&(this.resize(),this.fitBounds(I.bounds,n.extend({},I.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=I.localIdeographFontFamily,I.style&&this.setStyle(I.style,{localIdeographFontFamily:I.localIdeographFontFamily}),I.attributionControl&&this.addControl(new Gn({customAttribution:I.customAttribution})),this.addControl(new Vn,I.logoPosition),this.on("style.load",function(){W.transform.unmodified&&W.jumpTo(W.style.stylesheet)}),this.on("data",function(ve){W._update(ve.dataType==="style"),W.fire(new n.Event(ve.dataType+"data",ve))}),this.on("dataloading",function(ve){W.fire(new n.Event(ve.dataType+"dataloading",ve))})}H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R;var G={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return R.prototype._getMapId=function(){return this._mapId},R.prototype.addControl=function(W,re){if(re===void 0&&(W.getDefaultPosition?re=W.getDefaultPosition():re="top-right"),!W||!W.onAdd)return this.fire(new n.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var $=W.onAdd(this);this._controls.push(W);var ve=this._controlPositions[re];return re.indexOf("bottom")!==-1?ve.insertBefore($,ve.firstChild):ve.appendChild($),this},R.prototype.removeControl=function(W){if(!W||!W.onRemove)return this.fire(new n.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var re=this._controls.indexOf(W);return re>-1&&this._controls.splice(re,1),W.onRemove(this),this},R.prototype.hasControl=function(W){return this._controls.indexOf(W)>-1},R.prototype.resize=function(W){var re=this._containerDimensions(),$=re[0],ve=re[1];this._resizeCanvas($,ve),this.transform.resize($,ve),this.painter.resize($,ve);var Ee=!this._moving;return Ee&&(this.stop(),this.fire(new n.Event("movestart",W)).fire(new n.Event("move",W))),this.fire(new n.Event("resize",W)),Ee&&this.fire(new n.Event("moveend",W)),this},R.prototype.getBounds=function(){return this.transform.getBounds()},R.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},R.prototype.setMaxBounds=function(W){return this.transform.setMaxBounds(n.LngLatBounds.convert(W)),this._update()},R.prototype.setMinZoom=function(W){if(W=W==null?Cn:W,W>=Cn&&W<=this.transform.maxZoom)return this.transform.minZoom=W,this._update(),this.getZoom()<W&&this.setZoom(W),this;throw new Error("minZoom must be between "+Cn+" and the current maxZoom, inclusive")},R.prototype.getMinZoom=function(){return this.transform.minZoom},R.prototype.setMaxZoom=function(W){if(W=W==null?mi:W,W>=this.transform.minZoom)return this.transform.maxZoom=W,this._update(),this.getZoom()>W&&this.setZoom(W),this;throw new Error("maxZoom must be greater than the current minZoom")},R.prototype.getMaxZoom=function(){return this.transform.maxZoom},R.prototype.setMinPitch=function(W){if(W=W==null?ai:W,W<ai)throw new Error("minPitch must be greater than or equal to "+ai);if(W>=ai&&W<=this.transform.maxPitch)return this.transform.minPitch=W,this._update(),this.getPitch()<W&&this.setPitch(W),this;throw new Error("minPitch must be between "+ai+" and the current maxPitch, inclusive")},R.prototype.getMinPitch=function(){return this.transform.minPitch},R.prototype.setMaxPitch=function(W){if(W=W==null?$i:W,W>$i)throw new Error("maxPitch must be less than or equal to "+$i);if(W>=this.transform.minPitch)return this.transform.maxPitch=W,this._update(),this.getPitch()>W&&this.setPitch(W),this;throw new Error("maxPitch must be greater than the current minPitch")},R.prototype.getMaxPitch=function(){return this.transform.maxPitch},R.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},R.prototype.setRenderWorldCopies=function(W){return this.transform.renderWorldCopies=W,this._update()},R.prototype.project=function(W){return this.transform.locationPoint(n.LngLat.convert(W))},R.prototype.unproject=function(W){return this.transform.pointLocation(n.Point.convert(W))},R.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},R.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},R.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},R.prototype._createDelegatedListener=function(W,re,$){var ve=this,Ee;if(W==="mouseenter"||W==="mouseover"){var Oe=!1,pt=function(Tt){var Lt=ve.getLayer(re)?ve.queryRenderedFeatures(Tt.point,{layers:[re]}):[];Lt.length?Oe||(Oe=!0,$.call(ve,new J(W,ve,Tt.originalEvent,{features:Lt}))):Oe=!1},wt=function(){Oe=!1};return{layer:re,listener:$,delegates:{mousemove:pt,mouseout:wt}}}else if(W==="mouseleave"||W==="mouseout"){var yt=!1,Be=function(Tt){var Lt=ve.getLayer(re)?ve.queryRenderedFeatures(Tt.point,{layers:[re]}):[];Lt.length?yt=!0:yt&&(yt=!1,$.call(ve,new J(W,ve,Tt.originalEvent)))},$e=function(Tt){yt&&(yt=!1,$.call(ve,new J(W,ve,Tt.originalEvent)))};return{layer:re,listener:$,delegates:{mousemove:Be,mouseout:$e}}}else{var ft=function(Tt){var Lt=ve.getLayer(re)?ve.queryRenderedFeatures(Tt.point,{layers:[re]}):[];Lt.length&&(Tt.features=Lt,$.call(ve,Tt),delete Tt.features)};return{layer:re,listener:$,delegates:(Ee={},Ee[W]=ft,Ee)}}},R.prototype.on=function(W,re,$){if($===void 0)return H.prototype.on.call(this,W,re);var ve=this._createDelegatedListener(W,re,$);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[W]=this._delegatedListeners[W]||[],this._delegatedListeners[W].push(ve);for(var Ee in ve.delegates)this.on(Ee,ve.delegates[Ee]);return this},R.prototype.once=function(W,re,$){if($===void 0)return H.prototype.once.call(this,W,re);var ve=this._createDelegatedListener(W,re,$);for(var Ee in ve.delegates)this.once(Ee,ve.delegates[Ee]);return this},R.prototype.off=function(W,re,$){var ve=this;if($===void 0)return H.prototype.off.call(this,W,re);var Ee=function(Oe){for(var pt=Oe[W],wt=0;wt<pt.length;wt++){var yt=pt[wt];if(yt.layer===re&&yt.listener===$){for(var Be in yt.delegates)ve.off(Be,yt.delegates[Be]);return pt.splice(wt,1),ve}}};return this._delegatedListeners&&this._delegatedListeners[W]&&Ee(this._delegatedListeners),this},R.prototype.queryRenderedFeatures=function(W,re){if(!this.style)return[];re===void 0&&W!==void 0&&!(W instanceof n.Point)&&!Array.isArray(W)&&(re=W,W=void 0),re=re||{},W=W||[[0,0],[this.transform.width,this.transform.height]];var $;if(W instanceof n.Point||typeof W[0]=="number")$=[n.Point.convert(W)];else{var ve=n.Point.convert(W[0]),Ee=n.Point.convert(W[1]);$=[ve,new n.Point(Ee.x,ve.y),Ee,new n.Point(ve.x,Ee.y),ve]}return this.style.queryRenderedFeatures($,re,this.transform)},R.prototype.querySourceFeatures=function(W,re){return this.style.querySourceFeatures(W,re)},R.prototype.setStyle=function(W,re){return re=n.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},re),re.diff!==!1&&re.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&W?(this._diffStyle(W,re),this):(this._localIdeographFontFamily=re.localIdeographFontFamily,this._updateStyle(W,re))},R.prototype._getUIString=function(W){var re=this._locale[W];if(re==null)throw new Error("Missing UI string '"+W+"'");return re},R.prototype._updateStyle=function(W,re){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),W)this.style=new nu(this,re||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof W=="string"?this.style.loadURL(W):this.style.loadJSON(W),this},R.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new nu(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},R.prototype._diffStyle=function(W,re){var $=this;if(typeof W=="string"){var ve=this._requestManager.normalizeStyleURL(W),Ee=this._requestManager.transformRequest(ve,n.ResourceType.Style);n.getJSON(Ee,function(Oe,pt){Oe?$.fire(new n.ErrorEvent(Oe)):pt&&$._updateDiff(pt,re)})}else typeof W=="object"&&this._updateDiff(W,re)},R.prototype._updateDiff=function(W,re){try{this.style.setState(W)&&this._update(!0)}catch($){n.warnOnce("Unable to perform style diff: "+($.message||$.error||$)+".  Rebuilding the style from scratch."),this._updateStyle(W,re)}},R.prototype.getStyle=function(){if(this.style)return this.style.serialize()},R.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():n.warnOnce("There is no style added to the map.")},R.prototype.addSource=function(W,re){return this._lazyInitEmptyStyle(),this.style.addSource(W,re),this._update(!0)},R.prototype.isSourceLoaded=function(W){var re=this.style&&this.style.sourceCaches[W];if(re===void 0){this.fire(new n.ErrorEvent(new Error("There is no source with ID '"+W+"'")));return}return re.loaded()},R.prototype.areTilesLoaded=function(){var W=this.style&&this.style.sourceCaches;for(var re in W){var $=W[re],ve=$._tiles;for(var Ee in ve){var Oe=ve[Ee];if(!(Oe.state==="loaded"||Oe.state==="errored"))return!1}}return!0},R.prototype.addSourceType=function(W,re,$){return this._lazyInitEmptyStyle(),this.style.addSourceType(W,re,$)},R.prototype.removeSource=function(W){return this.style.removeSource(W),this._update(!0)},R.prototype.getSource=function(W){return this.style.getSource(W)},R.prototype.addImage=function(W,re,$){$===void 0&&($={});var ve=$.pixelRatio;ve===void 0&&(ve=1);var Ee=$.sdf;Ee===void 0&&(Ee=!1);var Oe=$.stretchX,pt=$.stretchY,wt=$.content;this._lazyInitEmptyStyle();var yt=0;if(re instanceof hn||Jn&&re instanceof Jn){var Be=n.browser.getImageData(re),$e=Be.width,ft=Be.height,Tt=Be.data;this.style.addImage(W,{data:new n.RGBAImage({width:$e,height:ft},Tt),pixelRatio:ve,stretchX:Oe,stretchY:pt,content:wt,sdf:Ee,version:yt})}else{if(re.width===void 0||re.height===void 0)return this.fire(new n.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Lt=re.width,Pt=re.height,jt=re.data,Nt=re;this.style.addImage(W,{data:new n.RGBAImage({width:Lt,height:Pt},new Uint8Array(jt)),pixelRatio:ve,stretchX:Oe,stretchY:pt,content:wt,sdf:Ee,version:yt,userImage:Nt}),Nt.onAdd&&Nt.onAdd(this,W)}},R.prototype.updateImage=function(W,re){var $=this.style.getImage(W);if(!$)return this.fire(new n.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var ve=re instanceof hn||Jn&&re instanceof Jn?n.browser.getImageData(re):re,Ee=ve.width,Oe=ve.height,pt=ve.data;if(Ee===void 0||Oe===void 0)return this.fire(new n.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(Ee!==$.data.width||Oe!==$.data.height)return this.fire(new n.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var wt=!(re instanceof hn||Jn&&re instanceof Jn);$.data.replace(pt,wt),this.style.updateImage(W,$)},R.prototype.hasImage=function(W){return W?!!this.style.getImage(W):(this.fire(new n.ErrorEvent(new Error("Missing required image id"))),!1)},R.prototype.removeImage=function(W){this.style.removeImage(W)},R.prototype.loadImage=function(W,re){n.getImage(this._requestManager.transformRequest(W,n.ResourceType.Image),re)},R.prototype.listImages=function(){return this.style.listImages()},R.prototype.addLayer=function(W,re){return this._lazyInitEmptyStyle(),this.style.addLayer(W,re),this._update(!0)},R.prototype.moveLayer=function(W,re){return this.style.moveLayer(W,re),this._update(!0)},R.prototype.removeLayer=function(W){return this.style.removeLayer(W),this._update(!0)},R.prototype.getLayer=function(W){return this.style.getLayer(W)},R.prototype.setLayerZoomRange=function(W,re,$){return this.style.setLayerZoomRange(W,re,$),this._update(!0)},R.prototype.setFilter=function(W,re,$){return $===void 0&&($={}),this.style.setFilter(W,re,$),this._update(!0)},R.prototype.getFilter=function(W){return this.style.getFilter(W)},R.prototype.setPaintProperty=function(W,re,$,ve){return ve===void 0&&(ve={}),this.style.setPaintProperty(W,re,$,ve),this._update(!0)},R.prototype.getPaintProperty=function(W,re){return this.style.getPaintProperty(W,re)},R.prototype.setLayoutProperty=function(W,re,$,ve){return ve===void 0&&(ve={}),this.style.setLayoutProperty(W,re,$,ve),this._update(!0)},R.prototype.getLayoutProperty=function(W,re){return this.style.getLayoutProperty(W,re)},R.prototype.setLight=function(W,re){return re===void 0&&(re={}),this._lazyInitEmptyStyle(),this.style.setLight(W,re),this._update(!0)},R.prototype.getLight=function(){return this.style.getLight()},R.prototype.setFeatureState=function(W,re){return this.style.setFeatureState(W,re),this._update()},R.prototype.removeFeatureState=function(W,re){return this.style.removeFeatureState(W,re),this._update()},R.prototype.getFeatureState=function(W){return this.style.getFeatureState(W)},R.prototype.getContainer=function(){return this._container},R.prototype.getCanvasContainer=function(){return this._canvasContainer},R.prototype.getCanvas=function(){return this._canvas},R.prototype._containerDimensions=function(){var W=0,re=0;return this._container&&(W=this._container.clientWidth||400,re=this._container.clientHeight||300),[W,re]},R.prototype._detectMissingCSS=function(){var W=n.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");W!=="rgb(250, 128, 114)"&&n.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},R.prototype._setupContainer=function(){var W=this._container;W.classList.add("mapboxgl-map");var re=this._missingCSSCanary=o.create("div","mapboxgl-canary",W);re.style.visibility="hidden",this._detectMissingCSS();var $=this._canvasContainer=o.create("div","mapboxgl-canvas-container",W);this._interactive&&$.classList.add("mapboxgl-interactive"),this._canvas=o.create("canvas","mapboxgl-canvas",$),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var ve=this._containerDimensions();this._resizeCanvas(ve[0],ve[1]);var Ee=this._controlContainer=o.create("div","mapboxgl-control-container",W),Oe=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(pt){Oe[pt]=o.create("div","mapboxgl-ctrl-"+pt,Ee)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},R.prototype._resizeCanvas=function(W,re){var $=n.browser.devicePixelRatio||1;this._canvas.width=$*W,this._canvas.height=$*re,this._canvas.style.width=W+"px",this._canvas.style.height=re+"px"},R.prototype._setupPainter=function(){var W=n.extend({},a.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),re=this._canvas.getContext("webgl",W)||this._canvas.getContext("experimental-webgl",W);if(!re){this.fire(new n.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new qa(re,this.transform),n.webpSupported.testSupport(re)},R.prototype._contextLost=function(W){W.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new n.Event("webglcontextlost",{originalEvent:W}))},R.prototype._contextRestored=function(W){this._setupPainter(),this.resize(),this._update(),this.fire(new n.Event("webglcontextrestored",{originalEvent:W}))},R.prototype._onMapScroll=function(W){if(W.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},R.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},R.prototype._update=function(W){return this.style?(this._styleDirty=this._styleDirty||W,this._sourcesDirty=!0,this.triggerRepaint(),this):this},R.prototype._requestRenderFrame=function(W){return this._update(),this._renderTaskQueue.add(W)},R.prototype._cancelRenderFrame=function(W){this._renderTaskQueue.remove(W)},R.prototype._render=function(W){var re=this,$,ve=0,Ee=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&($=Ee.createQueryEXT(),Ee.beginQueryEXT(Ee.TIME_ELAPSED_EXT,$),ve=n.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(W),!this._removed){var Oe=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var pt=this.transform.zoom,wt=n.browser.now();this.style.zoomHistory.update(pt,wt);var yt=new n.EvaluationParameters(pt,{now:wt,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Be=yt.crossFadingFactor();(Be!==1||Be!==this._crossFadingFactor)&&(Oe=!0,this._crossFadingFactor=Be),this.style.update(yt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new n.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new n.Event("load"))),this.style&&(this.style.hasTransitions()||Oe)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var $e=n.browser.now()-ve;Ee.endQueryEXT(Ee.TIME_ELAPSED_EXT,$),setTimeout(function(){var Lt=Ee.getQueryObjectEXT($,Ee.QUERY_RESULT_EXT)/1e6;Ee.deleteQueryEXT($),re.fire(new n.Event("gpu-timing-frame",{cpuTime:$e,gpuTime:Lt}))},50)}if(this.listens("gpu-timing-layer")){var ft=this.painter.collectGpuTimers();setTimeout(function(){var Lt=re.painter.queryGpuTimers(ft);re.fire(new n.Event("gpu-timing-layer",{layerTimes:Lt}))},50)}var Tt=this._sourcesDirty||this._styleDirty||this._placementDirty;return Tt||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new n.Event("idle")),this._loaded&&!this._fullyLoaded&&!Tt&&(this._fullyLoaded=!0),this}},R.prototype.remove=function(){this._hash&&this._hash.remove();for(var W=0,re=this._controls;W<re.length;W+=1){var $=re[W];$.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof n.window!="undefined"&&(n.window.removeEventListener("resize",this._onWindowResize,!1),n.window.removeEventListener("orientationchange",this._onWindowResize,!1),n.window.removeEventListener("online",this._onWindowOnline,!1));var ve=this.painter.context.gl.getExtension("WEBGL_lose_context");ve&&ve.loseContext&&ve.loseContext(),Ri(this._canvasContainer),Ri(this._controlContainer),Ri(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new n.Event("remove"))},R.prototype.triggerRepaint=function(){var W=this;this.style&&!this._frame&&(this._frame=n.browser.frame(function(re){W._frame=null,W._render(re)}))},R.prototype._onWindowOnline=function(){this._update()},R.prototype._onWindowResize=function(W){this._trackResize&&this.resize({originalEvent:W})._update()},G.showTileBoundaries.get=function(){return!!this._showTileBoundaries},G.showTileBoundaries.set=function(I){this._showTileBoundaries!==I&&(this._showTileBoundaries=I,this._update())},G.showPadding.get=function(){return!!this._showPadding},G.showPadding.set=function(I){this._showPadding!==I&&(this._showPadding=I,this._update())},G.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},G.showCollisionBoxes.set=function(I){this._showCollisionBoxes!==I&&(this._showCollisionBoxes=I,I?this.style._generateCollisionBoxes():this._update())},G.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},G.showOverdrawInspector.set=function(I){this._showOverdrawInspector!==I&&(this._showOverdrawInspector=I,this._update())},G.repaint.get=function(){return!!this._repaint},G.repaint.set=function(I){this._repaint!==I&&(this._repaint=I,this.triggerRepaint())},G.vertices.get=function(){return!!this._vertices},G.vertices.set=function(I){this._vertices=I,this._update()},R.prototype._setCacheLimits=function(W,re){n.setCacheLimits(W,re)},G.version.get=function(){return n.version},Object.defineProperties(R.prototype,G),R}(ia);function Ri(H){H.parentNode&&H.parentNode.removeChild(H)}var di={showCompass:!0,showZoom:!0,visualizePitch:!1},ni=function(R){var G=this;this.options=n.extend({},di,R),this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(I){return I.preventDefault()}),this.options.showZoom&&(n.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(I){return G._map.zoomIn({},{originalEvent:I})}),o.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(I){return G._map.zoomOut({},{originalEvent:I})}),o.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(n.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(I){G.options.visualizePitch?G._map.resetNorthPitch({},{originalEvent:I}):G._map.resetNorth({},{originalEvent:I})}),this._compassIcon=o.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ni.prototype._updateZoomButtons=function(){var R=this._map.getZoom(),G=R===this._map.getMaxZoom(),I=R===this._map.getMinZoom();this._zoomInButton.disabled=G,this._zoomOutButton.disabled=I,this._zoomInButton.setAttribute("aria-disabled",G.toString()),this._zoomOutButton.setAttribute("aria-disabled",I.toString())},ni.prototype._rotateCompassArrow=function(){var R=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=R},ni.prototype.onAdd=function(R){return this._map=R,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Qn(this._map,this._compass,this.options.visualizePitch)),this._container},ni.prototype.onRemove=function(){o.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ni.prototype._createButton=function(R,G){var I=o.create("button",R,this._container);return I.type="button",I.addEventListener("click",G),I},ni.prototype._setButtonTitle=function(R,G){var I=this._map._getUIString("NavigationControl."+G);R.title=I,R.setAttribute("aria-label",I)};var Qn=function(R,G,I){I===void 0&&(I=!1),this._clickTolerance=10,this.element=G,this.mouseRotate=new mn({clickTolerance:R.dragRotate._mouseRotate._clickTolerance}),this.map=R,I&&(this.mousePitch=new Tn({clickTolerance:R.dragRotate._mousePitch._clickTolerance})),n.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),o.addEventListener(G,"mousedown",this.mousedown),o.addEventListener(G,"touchstart",this.touchstart,{passive:!1}),o.addEventListener(G,"touchmove",this.touchmove),o.addEventListener(G,"touchend",this.touchend),o.addEventListener(G,"touchcancel",this.reset)};Qn.prototype.down=function(R,G){this.mouseRotate.mousedown(R,G),this.mousePitch&&this.mousePitch.mousedown(R,G),o.disableDrag()},Qn.prototype.move=function(R,G){var I=this.map,W=this.mouseRotate.mousemoveWindow(R,G);if(W&&W.bearingDelta&&I.setBearing(I.getBearing()+W.bearingDelta),this.mousePitch){var re=this.mousePitch.mousemoveWindow(R,G);re&&re.pitchDelta&&I.setPitch(I.getPitch()+re.pitchDelta)}},Qn.prototype.off=function(){var R=this.element;o.removeEventListener(R,"mousedown",this.mousedown),o.removeEventListener(R,"touchstart",this.touchstart,{passive:!1}),o.removeEventListener(R,"touchmove",this.touchmove),o.removeEventListener(R,"touchend",this.touchend),o.removeEventListener(R,"touchcancel",this.reset),this.offTemp()},Qn.prototype.offTemp=function(){o.enableDrag(),o.removeEventListener(n.window,"mousemove",this.mousemove),o.removeEventListener(n.window,"mouseup",this.mouseup)},Qn.prototype.mousedown=function(R){this.down(n.extend({},R,{ctrlKey:!0,preventDefault:function(){return R.preventDefault()}}),o.mousePos(this.element,R)),o.addEventListener(n.window,"mousemove",this.mousemove),o.addEventListener(n.window,"mouseup",this.mouseup)},Qn.prototype.mousemove=function(R){this.move(R,o.mousePos(this.element,R))},Qn.prototype.mouseup=function(R){this.mouseRotate.mouseupWindow(R),this.mousePitch&&this.mousePitch.mouseupWindow(R),this.offTemp()},Qn.prototype.touchstart=function(R){R.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=o.touchPos(this.element,R.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return R.preventDefault()}},this._startPos))},Qn.prototype.touchmove=function(R){R.targetTouches.length!==1?this.reset():(this._lastPos=o.touchPos(this.element,R.targetTouches)[0],this.move({preventDefault:function(){return R.preventDefault()}},this._lastPos))},Qn.prototype.touchend=function(R){R.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Qn.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function Ei(H,R,G){if(H=new n.LngLat(H.lng,H.lat),R){var I=new n.LngLat(H.lng-360,H.lat),W=new n.LngLat(H.lng+360,H.lat),re=G.locationPoint(H).distSqr(R);G.locationPoint(I).distSqr(R)<re?H=I:G.locationPoint(W).distSqr(R)<re&&(H=W)}for(;Math.abs(H.lng-G.center.lng)>180;){var $=G.locationPoint(H);if($.x>=0&&$.y>=0&&$.x<=G.width&&$.y<=G.height)break;H.lng>G.center.lng?H.lng-=360:H.lng+=360}return H}var na={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ea(H,R,G){var I=H.classList;for(var W in na)I.remove("mapboxgl-"+G+"-anchor-"+W);I.add("mapboxgl-"+G+"-anchor-"+R)}var pi=function(H){function R(G,I){if(H.call(this),(G instanceof n.window.HTMLElement||I)&&(G=n.extend({element:G},I)),n.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=G&&G.anchor||"center",this._color=G&&G.color||"#3FB1CE",this._scale=G&&G.scale||1,this._draggable=G&&G.draggable||!1,this._clickTolerance=G&&G.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=G&&G.rotation||0,this._rotationAlignment=G&&G.rotationAlignment||"auto",this._pitchAlignment=G&&G.pitchAlignment&&G.pitchAlignment!=="auto"?G.pitchAlignment:this._rotationAlignment,!G||!G.element){this._defaultMarker=!0,this._element=o.create("div"),this._element.setAttribute("aria-label","Map marker");var W=o.createNS("http://www.w3.org/2000/svg","svg"),re=41,$=27;W.setAttributeNS(null,"display","block"),W.setAttributeNS(null,"height",re+"px"),W.setAttributeNS(null,"width",$+"px"),W.setAttributeNS(null,"viewBox","0 0 "+$+" "+re);var ve=o.createNS("http://www.w3.org/2000/svg","g");ve.setAttributeNS(null,"stroke","none"),ve.setAttributeNS(null,"stroke-width","1"),ve.setAttributeNS(null,"fill","none"),ve.setAttributeNS(null,"fill-rule","evenodd");var Ee=o.createNS("http://www.w3.org/2000/svg","g");Ee.setAttributeNS(null,"fill-rule","nonzero");var Oe=o.createNS("http://www.w3.org/2000/svg","g");Oe.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Oe.setAttributeNS(null,"fill","#000000");for(var pt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],wt=0,yt=pt;wt<yt.length;wt+=1){var Be=yt[wt],$e=o.createNS("http://www.w3.org/2000/svg","ellipse");$e.setAttributeNS(null,"opacity","0.04"),$e.setAttributeNS(null,"cx","10.5"),$e.setAttributeNS(null,"cy","5.80029008"),$e.setAttributeNS(null,"rx",Be.rx),$e.setAttributeNS(null,"ry",Be.ry),Oe.appendChild($e)}var ft=o.createNS("http://www.w3.org/2000/svg","g");ft.setAttributeNS(null,"fill",this._color);var Tt=o.createNS("http://www.w3.org/2000/svg","path");Tt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ft.appendChild(Tt);var Lt=o.createNS("http://www.w3.org/2000/svg","g");Lt.setAttributeNS(null,"opacity","0.25"),Lt.setAttributeNS(null,"fill","#000000");var Pt=o.createNS("http://www.w3.org/2000/svg","path");Pt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Lt.appendChild(Pt);var jt=o.createNS("http://www.w3.org/2000/svg","g");jt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),jt.setAttributeNS(null,"fill","#FFFFFF");var Nt=o.createNS("http://www.w3.org/2000/svg","g");Nt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Ft=o.createNS("http://www.w3.org/2000/svg","circle");Ft.setAttributeNS(null,"fill","#000000"),Ft.setAttributeNS(null,"opacity","0.25"),Ft.setAttributeNS(null,"cx","5.5"),Ft.setAttributeNS(null,"cy","5.5"),Ft.setAttributeNS(null,"r","5.4999962");var Kt=o.createNS("http://www.w3.org/2000/svg","circle");Kt.setAttributeNS(null,"fill","#FFFFFF"),Kt.setAttributeNS(null,"cx","5.5"),Kt.setAttributeNS(null,"cy","5.5"),Kt.setAttributeNS(null,"r","5.4999962"),Nt.appendChild(Ft),Nt.appendChild(Kt),Ee.appendChild(Oe),Ee.appendChild(ft),Ee.appendChild(Lt),Ee.appendChild(jt),Ee.appendChild(Nt),W.appendChild(Ee),W.setAttributeNS(null,"height",re*this._scale+"px"),W.setAttributeNS(null,"width",$*this._scale+"px"),this._element.appendChild(W),this._offset=n.Point.convert(G&&G.offset||[0,-14])}else this._element=G.element,this._offset=n.Point.convert(G&&G.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ct){Ct.preventDefault()}),this._element.addEventListener("mousedown",function(Ct){Ct.preventDefault()}),Ea(this._element,this._anchor,"marker"),this._popup=null}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.addTo=function(I){return this.remove(),this._map=I,I.getCanvasContainer().appendChild(this._element),I.on("move",this._update),I.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},R.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),o.remove(this._element),this._popup&&this._popup.remove(),this},R.prototype.getLngLat=function(){return this._lngLat},R.prototype.setLngLat=function(I){return this._lngLat=n.LngLat.convert(I),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},R.prototype.getElement=function(){return this._element},R.prototype.setPopup=function(I){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),I){if(!("offset"in I.options)){var W=38.1,re=13.5,$=Math.sqrt(Math.pow(re,2)/2);I.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-W],"bottom-left":[$,(W-re+$)*-1],"bottom-right":[-$,(W-re+$)*-1],left:[re,(W-re)*-1],right:[-re,(W-re)*-1]}:this._offset}this._popup=I,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},R.prototype._onKeyPress=function(I){var W=I.code,re=I.charCode||I.keyCode;(W==="Space"||W==="Enter"||re===32||re===13)&&this.togglePopup()},R.prototype._onMapClick=function(I){var W=I.originalEvent.target,re=this._element;this._popup&&(W===re||re.contains(W))&&this.togglePopup()},R.prototype.getPopup=function(){return this._popup},R.prototype.togglePopup=function(){var I=this._popup;if(I)I.isOpen()?I.remove():I.addTo(this._map);else return this;return this},R.prototype._update=function(I){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Ei(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var W="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?W="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(W="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var re="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?re="rotateX(0deg)":this._pitchAlignment==="map"&&(re="rotateX("+this._map.getPitch()+"deg)"),(!I||I.type==="moveend")&&(this._pos=this._pos.round()),o.setTransform(this._element,na[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+re+" "+W)}},R.prototype.getOffset=function(){return this._offset},R.prototype.setOffset=function(I){return this._offset=n.Point.convert(I),this._update(),this},R.prototype._onMove=function(I){if(!this._isDragging){var W=this._clickTolerance||this._map._clickTolerance;this._isDragging=I.point.dist(this._pointerdownPos)>=W}this._isDragging&&(this._pos=I.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new n.Event("dragstart"))),this.fire(new n.Event("drag")))},R.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new n.Event("dragend")),this._state="inactive"},R.prototype._addDragHandler=function(I){this._element.contains(I.originalEvent.target)&&(I.preventDefault(),this._positionDelta=I.point.sub(this._pos).add(this._offset),this._pointerdownPos=I.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},R.prototype.setDraggable=function(I){return this._draggable=!!I,this._map&&(I?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},R.prototype.isDraggable=function(){return this._draggable},R.prototype.setRotation=function(I){return this._rotation=I||0,this._update(),this},R.prototype.getRotation=function(){return this._rotation},R.prototype.setRotationAlignment=function(I){return this._rotationAlignment=I||"auto",this._update(),this},R.prototype.getRotationAlignment=function(){return this._rotationAlignment},R.prototype.setPitchAlignment=function(I){return this._pitchAlignment=I&&I!=="auto"?I:this._rotationAlignment,this._update(),this},R.prototype.getPitchAlignment=function(){return this._pitchAlignment},R}(n.Evented),Ui={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ha;function _a(H){ha!==void 0?H(ha):n.window.navigator.permissions!==void 0?n.window.navigator.permissions.query({name:"geolocation"}).then(function(R){ha=R.state!=="denied",H(ha)}):(ha=!!n.window.navigator.geolocation,H(ha))}var Xa=0,Cs=!1,cu=function(H){function R(G){H.call(this),this.options=n.extend({},Ui,G),n.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.onAdd=function(I){return this._map=I,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),_a(this._setupUI),this._container},R.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(n.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),o.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Xa=0,Cs=!1},R.prototype._isOutOfMapMaxBounds=function(I){var W=this._map.getMaxBounds(),re=I.coords;return W&&(re.longitude<W.getWest()||re.longitude>W.getEast()||re.latitude<W.getSouth()||re.latitude>W.getNorth())},R.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},R.prototype._onSuccess=function(I){if(this._map){if(this._isOutOfMapMaxBounds(I)){this._setErrorState(),this.fire(new n.Event("outofmaxbounds",I)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=I,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(I),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(I),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new n.Event("geolocate",I)),this._finish()}},R.prototype._updateCamera=function(I){var W=new n.LngLat(I.coords.longitude,I.coords.latitude),re=I.coords.accuracy,$=this._map.getBearing(),ve=n.extend({bearing:$},this.options.fitBoundsOptions);this._map.fitBounds(W.toBounds(re),ve,{geolocateSource:!0})},R.prototype._updateMarker=function(I){if(I){var W=new n.LngLat(I.coords.longitude,I.coords.latitude);this._accuracyCircleMarker.setLngLat(W).addTo(this._map),this._userLocationDotMarker.setLngLat(W).addTo(this._map),this._accuracy=I.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},R.prototype._updateCircleRadius=function(){var I=this._map._container.clientHeight/2,W=this._map.unproject([0,I]),re=this._map.unproject([1,I]),$=W.distanceTo(re),ve=Math.ceil(2*this._accuracy/$);this._circleElement.style.width=ve+"px",this._circleElement.style.height=ve+"px"},R.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},R.prototype._onError=function(I){if(this._map){if(this.options.trackUserLocation)if(I.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var W=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=W,this._geolocateButton.setAttribute("aria-label",W),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(I.code===3&&Cs)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new n.Event("error",I)),this._finish()}},R.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},R.prototype._setupUI=function(I){var W=this;if(this._container.addEventListener("contextmenu",function(ve){return ve.preventDefault()}),this._geolocateButton=o.create("button","mapboxgl-ctrl-geolocate",this._container),o.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",I===!1){n.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var re=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=re,this._geolocateButton.setAttribute("aria-label",re)}else{var $=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=$,this._geolocateButton.setAttribute("aria-label",$)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new pi(this._dotElement),this._circleElement=o.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new pi({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(ve){var Ee=ve.originalEvent&&ve.originalEvent.type==="resize";!ve.geolocateSource&&W._watchState==="ACTIVE_LOCK"&&!Ee&&(W._watchState="BACKGROUND",W._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),W._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),W.fire(new n.Event("trackuserlocationend")))})},R.prototype.trigger=function(){if(!this._setup)return n.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new n.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Xa--,Cs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new n.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new n.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Xa++;var I;Xa>1?(I={maximumAge:6e5,timeout:0},Cs=!0):(I=this.options.positionOptions,Cs=!1),this._geolocationWatchID=n.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,I)}}else n.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},R.prototype._clearWatch=function(){n.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},R}(n.Evented),co={maxWidth:100,unit:"metric"},hu=function(R){this.options=n.extend({},co,R),n.bindAll(["_onMove","setUnit"],this)};hu.prototype.getDefaultPosition=function(){return"bottom-left"},hu.prototype._onMove=function(){ys(this._map,this._container,this.options)},hu.prototype.onAdd=function(R){return this._map=R,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",R.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},hu.prototype.onRemove=function(){o.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},hu.prototype.setUnit=function(R){this.options.unit=R,ys(this._map,this._container,this.options)};function ys(H,R,G){var I=G&&G.maxWidth||100,W=H._container.clientHeight/2,re=H.unproject([0,W]),$=H.unproject([I,W]),ve=re.distanceTo($);if(G&&G.unit==="imperial"){var Ee=3.2808*ve;if(Ee>5280){var Oe=Ee/5280;Zl(R,I,Oe,H._getUIString("ScaleControl.Miles"))}else Zl(R,I,Ee,H._getUIString("ScaleControl.Feet"))}else if(G&&G.unit==="nautical"){var pt=ve/1852;Zl(R,I,pt,H._getUIString("ScaleControl.NauticalMiles"))}else ve>=1e3?Zl(R,I,ve/1e3,H._getUIString("ScaleControl.Kilometers")):Zl(R,I,ve,H._getUIString("ScaleControl.Meters"))}function Zl(H,R,G,I){var W=hc(G),re=W/G;H.style.width=R*re+"px",H.innerHTML=W+"&nbsp;"+I}function Zf(H){var R=Math.pow(10,Math.ceil(-Math.log(H)/Math.LN10));return Math.round(H*R)/R}function hc(H){var R=Math.pow(10,(""+Math.floor(H)).length-1),G=H/R;return G=G>=10?10:G>=5?5:G>=3?3:G>=2?2:G>=1?1:Zf(G),R*G}var Ms=function(R){this._fullscreen=!1,R&&R.container&&(R.container instanceof n.window.HTMLElement?this._container=R.container:n.warnOnce("Full screen control 'container' must be a DOM element.")),n.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in n.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in n.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in n.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in n.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ms.prototype.onAdd=function(R){return this._map=R,this._container||(this._container=this._map.getContainer()),this._controlContainer=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",n.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ms.prototype.onRemove=function(){o.remove(this._controlContainer),this._map=null,n.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ms.prototype._checkFullscreenSupport=function(){return!!(n.window.document.fullscreenEnabled||n.window.document.mozFullScreenEnabled||n.window.document.msFullscreenEnabled||n.window.document.webkitFullscreenEnabled)},Ms.prototype._setupUI=function(){var R=this._fullscreenButton=o.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);o.create("span","mapboxgl-ctrl-icon",R).setAttribute("aria-hidden",!0),R.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),n.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ms.prototype._updateTitle=function(){var R=this._getTitle();this._fullscreenButton.setAttribute("aria-label",R),this._fullscreenButton.title=R},Ms.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ms.prototype._isFullscreen=function(){return this._fullscreen},Ms.prototype._changeIcon=function(){var R=n.window.document.fullscreenElement||n.window.document.mozFullScreenElement||n.window.document.webkitFullscreenElement||n.window.document.msFullscreenElement;R===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ms.prototype._onClickFullscreen=function(){this._isFullscreen()?n.window.document.exitFullscreen?n.window.document.exitFullscreen():n.window.document.mozCancelFullScreen?n.window.document.mozCancelFullScreen():n.window.document.msExitFullscreen?n.window.document.msExitFullscreen():n.window.document.webkitCancelFullScreen&&n.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var jl={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},vu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),no=function(H){function R(G){H.call(this),this.options=n.extend(Object.create(jl),G),n.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.addTo=function(I){return this._map&&this.remove(),this._map=I,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new n.Event("open")),this},R.prototype.isOpen=function(){return!!this._map},R.prototype.remove=function(){return this._content&&o.remove(this._content),this._container&&(o.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new n.Event("close")),this},R.prototype.getLngLat=function(){return this._lngLat},R.prototype.setLngLat=function(I){return this._lngLat=n.LngLat.convert(I),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},R.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},R.prototype.getElement=function(){return this._container},R.prototype.setText=function(I){return this.setDOMContent(n.window.document.createTextNode(I))},R.prototype.setHTML=function(I){var W=n.window.document.createDocumentFragment(),re=n.window.document.createElement("body"),$;for(re.innerHTML=I;$=re.firstChild,!!$;)W.appendChild($);return this.setDOMContent(W)},R.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},R.prototype.setMaxWidth=function(I){return this.options.maxWidth=I,this._update(),this},R.prototype.setDOMContent=function(I){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=o.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(I),this._createCloseButton(),this._update(),this._focusFirstElement(),this},R.prototype.addClassName=function(I){this._container&&this._container.classList.add(I)},R.prototype.removeClassName=function(I){this._container&&this._container.classList.remove(I)},R.prototype.setOffset=function(I){return this.options.offset=I,this._update(),this},R.prototype.toggleClassName=function(I){if(this._container)return this._container.classList.toggle(I)},R.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=o.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},R.prototype._onMouseUp=function(I){this._update(I.point)},R.prototype._onMouseMove=function(I){this._update(I.point)},R.prototype._onDrag=function(I){this._update(I.point)},R.prototype._update=function(I){var W=this,re=this._lngLat||this._trackPointer;if(!(!this._map||!re||!this._content)&&(this._container||(this._container=o.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=o.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Be){return W._container.classList.add(Be)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ei(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!I))){var $=this._pos=this._trackPointer&&I?I:this._map.project(this._lngLat),ve=this.options.anchor,Ee=Lu(this.options.offset);if(!ve){var Oe=this._container.offsetWidth,pt=this._container.offsetHeight,wt;$.y+Ee.bottom.y<pt?wt=["top"]:$.y>this._map.transform.height-pt?wt=["bottom"]:wt=[],$.x<Oe/2?wt.push("left"):$.x>this._map.transform.width-Oe/2&&wt.push("right"),wt.length===0?ve="bottom":ve=wt.join("-")}var yt=$.add(Ee[ve]).round();o.setTransform(this._container,na[ve]+" translate("+yt.x+"px,"+yt.y+"px)"),Ea(this._container,ve,"popup")}},R.prototype._focusFirstElement=function(){if(!(!this.options.focusAfterOpen||!this._container)){var I=this._container.querySelector(vu);I&&I.focus()}},R.prototype._onClose=function(){this.remove()},R}(n.Evented);function Lu(H){if(H)if(typeof H=="number"){var R=Math.round(Math.sqrt(.5*Math.pow(H,2)));return{center:new n.Point(0,0),top:new n.Point(0,H),"top-left":new n.Point(R,R),"top-right":new n.Point(-R,R),bottom:new n.Point(0,-H),"bottom-left":new n.Point(R,-R),"bottom-right":new n.Point(-R,-R),left:new n.Point(H,0),right:new n.Point(-H,0)}}else if(H instanceof n.Point||Array.isArray(H)){var G=n.Point.convert(H);return{center:G,top:G,"top-left":G,"top-right":G,bottom:G,"bottom-left":G,"bottom-right":G,left:G,right:G}}else return{center:n.Point.convert(H.center||[0,0]),top:n.Point.convert(H.top||[0,0]),"top-left":n.Point.convert(H["top-left"]||[0,0]),"top-right":n.Point.convert(H["top-right"]||[0,0]),bottom:n.Point.convert(H.bottom||[0,0]),"bottom-left":n.Point.convert(H["bottom-left"]||[0,0]),"bottom-right":n.Point.convert(H["bottom-right"]||[0,0]),left:n.Point.convert(H.left||[0,0]),right:n.Point.convert(H.right||[0,0])};else return Lu(new n.Point(0,0))}var Qa={version:n.version,supported:a,setRTLTextPlugin:n.setRTLTextPlugin,getRTLTextPluginStatus:n.getRTLTextPluginStatus,Map:Mn,NavigationControl:ni,GeolocateControl:cu,AttributionControl:Gn,ScaleControl:hu,FullscreenControl:Ms,Popup:no,Marker:pi,Style:nu,LngLat:n.LngLat,LngLatBounds:n.LngLatBounds,Point:n.Point,MercatorCoordinate:n.MercatorCoordinate,Evented:n.Evented,config:n.config,prewarm:vi,clearPrewarmedResources:Zi,get accessToken(){return n.config.ACCESS_TOKEN},set accessToken(H){n.config.ACCESS_TOKEN=H},get baseApiUrl(){return n.config.API_URL},set baseApiUrl(H){n.config.API_URL=H},get workerCount(){return Xr.workerCount},set workerCount(H){Xr.workerCount=H},get maxParallelImageRequests(){return n.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(H){n.config.MAX_PARALLEL_IMAGE_REQUESTS=H},clearStorage:function(R){n.clearTileCache(R)},workerUrl:""};return Qa}),r})});var p9e=ie((smr,d9e)=>{"use strict";var eb=Zt(),oGt=ks().sanitizeHTML,sGt=gZ(),c9e=ky();function h9e(e,t){this.subplot=e,this.uid=e.uid+"-"+t,this.index=t,this.idSource="source-"+this.uid,this.idLayer=c9e.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var Vp=h9e.prototype;Vp.update=function(t){this.visible?this.needsNewImage(t)?this.updateImage(t):this.needsNewSource(t)?(this.removeLayer(),this.updateSource(t),this.updateLayer(t)):this.needsNewLayer(t)?this.updateLayer(t):this.updateStyle(t):(this.updateSource(t),this.updateLayer(t)),this.visible=rF(t)};Vp.needsNewImage=function(e){var t=this.subplot.map;return t.getSource(this.idSource)&&this.sourceType==="image"&&e.sourcetype==="image"&&(this.source!==e.source||JSON.stringify(this.coordinates)!==JSON.stringify(e.coordinates))};Vp.needsNewSource=function(e){return this.sourceType!==e.sourcetype||JSON.stringify(this.source)!==JSON.stringify(e.source)||this.layerType!==e.type};Vp.needsNewLayer=function(e){return this.layerType!==e.type||this.below!==this.subplot.belowLookup["layout-"+this.index]};Vp.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]};Vp.updateImage=function(e){var t=this.subplot.map;t.getSource(this.idSource).updateImage({url:e.source,coordinates:e.coordinates});var r=this.findFollowingMapboxLayerId(this.lookupBelow());r!==null&&this.subplot.map.moveLayer(this.idLayer,r)};Vp.updateSource=function(e){var t=this.subplot.map;if(t.getSource(this.idSource)&&t.removeSource(this.idSource),this.sourceType=e.sourcetype,this.source=e.source,!!rF(e)){var r=lGt(e);t.addSource(this.idSource,r)}};Vp.findFollowingMapboxLayerId=function(e){if(e==="traces")for(var t=this.subplot.getMapLayers(),r=0;r<t.length;r++){var i=t[r].id;if(typeof i=="string"&&i.indexOf(c9e.traceLayerPrefix)===0){e=i;break}}return e};Vp.updateLayer=function(e){var t=this.subplot,r=v9e(e),i=this.lookupBelow(),n=this.findFollowingMapboxLayerId(i);this.removeLayer(),rF(e)&&t.addLayer({id:this.idLayer,source:this.idSource,"source-layer":e.sourcelayer||"",type:e.type,minzoom:e.minzoom,maxzoom:e.maxzoom,layout:r.layout,paint:r.paint},n),this.layerType=e.type,this.below=i};Vp.updateStyle=function(e){if(rF(e)){var t=v9e(e);this.subplot.setOptions(this.idLayer,"setLayoutProperty",t.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",t.paint)}};Vp.removeLayer=function(){var e=this.subplot.map;e.getLayer(this.idLayer)&&e.removeLayer(this.idLayer)};Vp.dispose=function(){var e=this.subplot.map;e.getLayer(this.idLayer)&&e.removeLayer(this.idLayer),e.getSource(this.idSource)&&e.removeSource(this.idSource)};function rF(e){if(!e.visible)return!1;var t=e.source;if(Array.isArray(t)&&t.length>0){for(var r=0;r<t.length;r++)if(typeof t[r]!="string"||t[r].length===0)return!1;return!0}return eb.isPlainObject(t)||typeof t=="string"&&t.length>0}function v9e(e){var t={},r={};switch(e.type){case"circle":eb.extendFlat(r,{"circle-radius":e.circle.radius,"circle-color":e.color,"circle-opacity":e.opacity});break;case"line":eb.extendFlat(r,{"line-width":e.line.width,"line-color":e.color,"line-opacity":e.opacity,"line-dasharray":e.line.dash});break;case"fill":eb.extendFlat(r,{"fill-color":e.color,"fill-outline-color":e.fill.outlinecolor,"fill-opacity":e.opacity});break;case"symbol":var i=e.symbol,n=sGt(i.textposition,i.iconsize);eb.extendFlat(t,{"icon-image":i.icon+"-15","icon-size":i.iconsize/10,"text-field":i.text,"text-size":i.textfont.size,"text-anchor":n.anchor,"text-offset":n.offset,"symbol-placement":i.placement}),eb.extendFlat(r,{"icon-color":e.color,"text-color":i.textfont.color,"text-opacity":e.opacity});break;case"raster":eb.extendFlat(r,{"raster-fade-duration":0,"raster-opacity":e.opacity});break}return{layout:t,paint:r}}function lGt(e){var t=e.sourcetype,r=e.source,i={type:t},n;return t==="geojson"?n="data":t==="vector"?n=typeof r=="string"?"url":"tiles":t==="raster"?(n="tiles",i.tileSize=256):t==="image"&&(n="url",i.coordinates=e.coordinates),i[n]=r,e.sourceattribution&&(i.attribution=oGt(e.sourceattribution)),i}d9e.exports=function(t,r,i){var n=new h9e(t,r);return n.update(i),n}});var A9e=ie((lmr,T9e)=>{"use strict";var TZ=wZ(),AZ=Zt(),x9e=N3(),g9e=Ti(),uGt=Wi(),fGt=Yh(),nF=Ol(),_9e=n0(),cGt=_9e.drawMode,hGt=_9e.selectMode,vGt=Ef().prepSelect,dGt=Ef().clearOutline,pGt=Ef().clearSelectionsCache,gGt=Ef().selectOnClick,L1=ky(),yGt=p9e();function b9e(e,t){this.id=t,this.gd=e;var r=e._fullLayout,i=e._context;this.container=r._glcontainer.node(),this.isStatic=i.staticPlot,this.uid=r._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(r),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var cf=b9e.prototype;cf.plot=function(e,t,r){var i=this,n=t[i.id];i.map&&n.accesstoken!==i.accessToken&&(i.map.remove(),i.map=null,i.styleObj=null,i.traceHash={},i.layerList=[]);var a;i.map?a=new Promise(function(o,s){i.updateMap(e,t,o,s)}):a=new Promise(function(o,s){i.createMap(e,t,o,s)}),r.push(a)};cf.createMap=function(e,t,r,i){var n=this,a=t[n.id],o=n.styleObj=w9e(a.style,t);n.accessToken=a.accesstoken;var s=a.bounds,l=s?[[s.west,s.south],[s.east,s.north]]:null,u=n.map=new TZ.Map({container:n.div,style:o.style,center:MZ(a.center),zoom:a.zoom,bearing:a.bearing,pitch:a.pitch,maxBounds:l,interactive:!n.isStatic,preserveDrawingBuffer:n.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new TZ.AttributionControl({compact:!0}));u._canvas.style.left="0px",u._canvas.style.top="0px",n.rejectOnError(i),n.isStatic||n.initFx(e,t);var f=[];f.push(new Promise(function(c){u.once("load",c)})),f=f.concat(x9e.fetchTraceGeoData(e)),Promise.all(f).then(function(){n.fillBelowLookup(e,t),n.updateData(e),n.updateLayout(t),n.resolveOnRender(r)}).catch(i)};cf.updateMap=function(e,t,r,i){var n=this,a=n.map,o=t[this.id];n.rejectOnError(i);var s=[],l=w9e(o.style,t);JSON.stringify(n.styleObj)!==JSON.stringify(l)&&(n.styleObj=l,a.setStyle(l.style),n.traceHash={},s.push(new Promise(function(u){a.once("styledata",u)}))),s=s.concat(x9e.fetchTraceGeoData(e)),Promise.all(s).then(function(){n.fillBelowLookup(e,t),n.updateData(e),n.updateLayout(t),n.resolveOnRender(r)}).catch(i)};cf.fillBelowLookup=function(e,t){var r=t[this.id],i=r.layers,n,a,o=this.belowLookup={},s=!1;for(n=0;n<e.length;n++){var l=e[n][0].trace,u=l._module;typeof l.below=="string"?a=l.below:u.getBelow&&(a=u.getBelow(l,this)),a===""&&(s=!0),o["trace-"+l.uid]=a||""}for(n=0;n<i.length;n++){var f=i[n];typeof f.below=="string"?a=f.below:s?a="traces":a="",o["layout-"+n]=a}var c={},h,v;for(h in o)a=o[h],c[a]?c[a].push(h):c[a]=[h];for(a in c){var d=c[a];if(d.length>1)for(n=0;n<d.length;n++)h=d[n],h.indexOf("trace-")===0?(v=h.split("trace-")[1],this.traceHash[v]&&(this.traceHash[v].below=null)):h.indexOf("layout-")===0&&(v=h.split("layout-")[1],this.layerList[v]&&(this.layerList[v].below=null))}};var y9e={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};cf.updateData=function(e){var t=this.traceHash,r,i,n,a,o=e.slice().sort(function(c,h){return y9e[c[0].trace.type]-y9e[h[0].trace.type]});for(n=0;n<o.length;n++){var s=o[n];i=s[0].trace,r=t[i.uid];var l=!1;r&&(r.type===i.type?(r.update(s),l=!0):r.dispose()),!l&&i._module&&(t[i.uid]=i._module.plot(this,s))}var u=Object.keys(t);e:for(n=0;n<u.length;n++){var f=u[n];for(a=0;a<e.length;a++)if(i=e[a][0].trace,f===i.uid)continue e;r=t[f],r.dispose(),delete t[f]}};cf.updateLayout=function(e){var t=this.map,r=e[this.id];!this.dragging&&!this.wheeling&&(t.setCenter(MZ(r.center)),t.setZoom(r.zoom),t.setBearing(r.bearing),t.setPitch(r.pitch)),this.updateLayers(e),this.updateFramework(e),this.updateFx(e),this.map.resize(),this.gd._context._scrollZoom.mapbox?t.scrollZoom.enable():t.scrollZoom.disable()};cf.resolveOnRender=function(e){var t=this.map;t.on("render",function r(){t.loaded()&&(t.off("render",r),setTimeout(e,10))})};cf.rejectOnError=function(e){var t=this.map;function r(){e(new Error(L1.mapOnErrorMsg))}t.once("error",r),t.once("style.error",r),t.once("source.error",r),t.once("tile.error",r),t.once("layer.error",r)};cf.createFramework=function(e){var t=this,r=t.div=document.createElement("div");r.id=t.uid,r.style.position="absolute",t.container.appendChild(r),t.xaxis={_id:"x",c2p:function(i){return t.project(i).x}},t.yaxis={_id:"y",c2p:function(i){return t.project(i).y}},t.updateFramework(e),t.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},uGt.setConvert(t.mockAxis,e)};cf.initFx=function(e,t){var r=this,i=r.gd,n=r.map;n.on("moveend",function(s){if(r.map){var l=i._fullLayout;if(s.originalEvent||r.wheeling){var u=l[r.id];g9e.call("_storeDirectGUIEdit",i.layout,l._preGUI,r.getViewEdits(u));var f=r.getView();u._input.center=u.center=f.center,u._input.zoom=u.zoom=f.zoom,u._input.bearing=u.bearing=f.bearing,u._input.pitch=u.pitch=f.pitch,i.emit("plotly_relayout",r.getViewEditsWithDerived(f))}s.originalEvent&&s.originalEvent.type==="mouseup"?r.dragging=!1:r.wheeling&&(r.wheeling=!1),l._rehover&&l._rehover()}}),n.on("wheel",function(){r.wheeling=!0}),n.on("mousemove",function(s){var l=r.div.getBoundingClientRect(),u=[s.originalEvent.offsetX,s.originalEvent.offsetY];s.target.getBoundingClientRect=function(){return l},r.xaxis.p2c=function(){return n.unproject(u).lng},r.yaxis.p2c=function(){return n.unproject(u).lat},i._fullLayout._rehover=function(){i._fullLayout._hoversubplot===r.id&&i._fullLayout[r.id]&&nF.hover(i,s,r.id)},nF.hover(i,s,r.id),i._fullLayout._hoversubplot=r.id});function a(){nF.loneUnhover(t._hoverlayer)}n.on("dragstart",function(){r.dragging=!0,a()}),n.on("zoomstart",a),n.on("mouseout",function(){i._fullLayout._hoversubplot=null});function o(){var s=r.getView();i.emit("plotly_relayouting",r.getViewEditsWithDerived(s))}n.on("drag",o),n.on("zoom",o),n.on("dblclick",function(){var s=i._fullLayout[r.id];g9e.call("_storeDirectGUIEdit",i.layout,i._fullLayout._preGUI,r.getViewEdits(s));var l=r.viewInitial;n.setCenter(MZ(l.center)),n.setZoom(l.zoom),n.setBearing(l.bearing),n.setPitch(l.pitch);var u=r.getView();s._input.center=s.center=u.center,s._input.zoom=s.zoom=u.zoom,s._input.bearing=s.bearing=u.bearing,s._input.pitch=s.pitch=u.pitch,i.emit("plotly_doubleclick",null),i.emit("plotly_relayout",r.getViewEditsWithDerived(u))}),r.clearOutline=function(){pGt(r.dragOptions),dGt(r.dragOptions.gd)},r.onClickInPanFn=function(s){return function(l){var u=i._fullLayout.clickmode;u.indexOf("select")>-1&&gGt(l.originalEvent,i,[r.xaxis],[r.yaxis],r.id,s),u.indexOf("event")>-1&&nF.click(i,l.originalEvent)}}};cf.updateFx=function(e){var t=this,r=t.map,i=t.gd;if(t.isStatic)return;function n(l){var u=t.map.unproject(l);return[u.lng,u.lat]}var a=e.dragmode,o;o=function(l,u){if(u.isRect){var f=l.range={};f[t.id]=[n([u.xmin,u.ymin]),n([u.xmax,u.ymax])]}else{var c=l.lassoPoints={};c[t.id]=u.map(n)}};var s=t.dragOptions;t.dragOptions=AZ.extendDeep(s||{},{dragmode:e.dragmode,element:t.div,gd:i,plotinfo:{id:t.id,domain:e[t.id].domain,xaxis:t.xaxis,yaxis:t.yaxis,fillRangeItems:o},xaxes:[t.xaxis],yaxes:[t.yaxis],subplot:t.id}),r.off("click",t.onClickInPanHandler),hGt(a)||cGt(a)?(r.dragPan.disable(),r.on("zoomstart",t.clearOutline),t.dragOptions.prepFn=function(l,u,f){vGt(l,u,f,t.dragOptions,a)},fGt.init(t.dragOptions)):(r.dragPan.enable(),r.off("zoomstart",t.clearOutline),t.div.onmousedown=null,t.div.ontouchstart=null,t.div.removeEventListener("touchstart",t.div._ontouchstart),t.onClickInPanHandler=t.onClickInPanFn(t.dragOptions),r.on("click",t.onClickInPanHandler))};cf.updateFramework=function(e){var t=e[this.id].domain,r=e._size,i=this.div.style;i.width=r.w*(t.x[1]-t.x[0])+"px",i.height=r.h*(t.y[1]-t.y[0])+"px",i.left=r.l+t.x[0]*r.w+"px",i.top=r.t+(1-t.y[1])*r.h+"px",this.xaxis._offset=r.l+t.x[0]*r.w,this.xaxis._length=r.w*(t.x[1]-t.x[0]),this.yaxis._offset=r.t+(1-t.y[1])*r.h,this.yaxis._length=r.h*(t.y[1]-t.y[0])};cf.updateLayers=function(e){var t=e[this.id],r=t.layers,i=this.layerList,n;if(r.length!==i.length){for(n=0;n<i.length;n++)i[n].dispose();for(i=this.layerList=[],n=0;n<r.length;n++)i.push(yGt(this,n,r[n]))}else for(n=0;n<r.length;n++)i[n].update(r[n])};cf.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))};cf.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()};cf.setOptions=function(e,t,r){for(var i in r)this.map[t](e,i,r[i])};cf.getMapLayers=function(){return this.map.getStyle().layers};cf.addLayer=function(e,t){var r=this.map;if(typeof t=="string"){if(t===""){r.addLayer(e,t);return}for(var i=this.getMapLayers(),n=0;n<i.length;n++)if(t===i[n].id){r.addLayer(e,t);return}AZ.warn(["Trying to add layer with *below* value",t,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}r.addLayer(e)};cf.project=function(e){return this.map.project(new TZ.LngLat(e[0],e[1]))};cf.getView=function(){var e=this.map,t=e.getCenter(),r=t.lng,i=t.lat,n={lon:r,lat:i},a=e.getCanvas(),o=parseInt(a.style.width),s=parseInt(a.style.height);return{center:n,zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch(),_derived:{coordinates:[e.unproject([0,0]).toArray(),e.unproject([o,0]).toArray(),e.unproject([o,s]).toArray(),e.unproject([0,s]).toArray()]}}};cf.getViewEdits=function(e){for(var t=this.id,r=["center","zoom","bearing","pitch"],i={},n=0;n<r.length;n++){var a=r[n];i[t+"."+a]=e[a]}return i};cf.getViewEditsWithDerived=function(e){var t=this.id,r=this.getViewEdits(e);return r[t+"._derived"]=e._derived,r};function w9e(e,t){var r={};if(AZ.isPlainObject(e))r.id=e.id,r.style=e;else if(typeof e=="string")if(r.id=e,L1.styleValuesMapbox.indexOf(e)!==-1)r.style=m9e(e);else if(L1.stylesNonMapbox[e]){r.style=L1.stylesNonMapbox[e];var i=r.style.sources["plotly-"+e],n=i?i.tiles:void 0;n&&n[0]&&n[0].slice(-9)==="?api_key="&&(n[0]+=t._mapboxAccessToken)}else r.style=e;else r.id=L1.styleValueDflt,r.style=m9e(L1.styleValueDflt);return r.transition={duration:0,delay:0},r}function m9e(e){return L1.styleUrlPrefix+e+"-"+L1.styleUrlSuffix}function MZ(e){return[e.lon,e.lat]}T9e.exports=b9e});var E9e=ie((umr,S9e)=>{"use strict";var SZ=Zt(),mGt=r_(),xGt=dh(),M9e=R5();S9e.exports=function(t,r,i){mGt(t,r,i,{type:"mapbox",attributes:M9e,handleDefaults:_Gt,partition:"y",accessToken:r._mapboxAccessToken})};function _Gt(e,t,r,i){r("accesstoken",i.accessToken),r("style"),r("center.lon"),r("center.lat"),r("zoom"),r("bearing"),r("pitch");var n=r("bounds.west"),a=r("bounds.east"),o=r("bounds.south"),s=r("bounds.north");(n===void 0||a===void 0||o===void 0||s===void 0)&&delete t.bounds,xGt(e,t,{name:"layers",handleItemDefaults:bGt}),t._input=e}function bGt(e,t){function r(l,u){return SZ.coerce(e,t,M9e.layers,l,u)}var i=r("visible");if(i){var n=r("sourcetype"),a=n==="raster"||n==="image";r("source"),r("sourceattribution"),n==="vector"&&r("sourcelayer"),n==="image"&&r("coordinates");var o;a&&(o="raster");var s=r("type",o);a&&s!=="raster"&&(s=t.type="raster",SZ.log("Source types *raster* and *image* must drawn *raster* layer type.")),r("below"),r("color"),r("opacity"),r("minzoom"),r("maxzoom"),s==="circle"&&r("circle.radius"),s==="line"&&(r("line.width"),r("line.dash")),s==="fill"&&r("fill.outlinecolor"),s==="symbol"&&(r("symbol.icon"),r("symbol.iconsize"),r("symbol.text"),SZ.coerceFont(r,"symbol.textfont",void 0,{noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}),r("symbol.textposition"),r("symbol.placement"))}}});var iF=ie(md=>{"use strict";var k9e=wZ(),bg=Zt(),EZ=bg.strTranslate,wGt=bg.strScale,TGt=pc().getSubplotCalcData,AGt=Cd(),MGt=Mi(),C9e=oa(),SGt=ks(),EGt=A9e(),P1="mapbox",wg=md.constants=ky();md.name=P1;md.attr="subplot";md.idRoot=P1;md.idRegex=md.attrRegex=bg.counterRegex(P1);md.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}};md.layoutAttributes=R5();md.supplyLayoutDefaults=E9e();md.plot=function(t){var r=t._fullLayout,i=t.calcdata,n=r._subplots[P1];if(k9e.version!==wg.requiredVersion)throw new Error(wg.wrongVersionErrorMsg);var a=kGt(t,n);k9e.accessToken=a;for(var o=0;o<n.length;o++){var s=n[o],l=TGt(i,P1,s),u=r[s],f=u._subplot;f||(f=new EGt(t,s),r[s]._subplot=f),f.viewInitial||(f.viewInitial={center:bg.extendFlat({},u.center),zoom:u.zoom,bearing:u.bearing,pitch:u.pitch}),f.plot(l,r,t._promises)}};md.clean=function(e,t,r,i){for(var n=i._subplots[P1]||[],a=0;a<n.length;a++){var o=n[a];!t[o]&&i[o]._subplot&&i[o]._subplot.destroy()}};md.toSVG=function(e){for(var t=e._fullLayout,r=t._subplots[P1],i=t._size,n=0;n<r.length;n++){var a=t[r[n]],o=a.domain,s=a._subplot,l=s.toImage("png"),u=t._glimages.append("svg:image");u.attr({xmlns:AGt.svg,"xlink:href":l,x:i.l+i.w*o.x[0],y:i.t+i.h*(1-o.y[1]),width:i.w*(o.x[1]-o.x[0]),height:i.h*(o.y[1]-o.y[0]),preserveAspectRatio:"none"});var f=MGt.select(a._subplot.div),c=f.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!c){var h=t._glimages.append("g");h.attr("transform",EZ(i.l+i.w*o.x[0]+10,i.t+i.h*(1-o.y[0])-31)),h.append("path").attr("d",wg.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),h.append("path").attr("d",wg.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),h.append("path").attr("d",wg.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),h.append("polygon").attr("points",wg.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var v=f.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),d=t._glimages.append("g"),x=d.append("text");x.text(v).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":v});var b=C9e.bBox(x.node()),p=i.w*(o.x[1]-o.x[0]);if(b.width>p/2){var w=v.split("|").join("<br>");x.text(w).attr("data-unformatted",w).call(SGt.convertToTspans,e),b=C9e.bBox(x.node())}x.attr("transform",EZ(-3,-b.height+8)),d.insert("rect",".static-attribution").attr({x:-b.width-6,y:-b.height-3,width:b.width+6,height:b.height+3,fill:"rgba(255, 255, 255, 0.75)"});var A=1;b.width+6>p&&(A=p/(b.width+6));var T=[i.l+i.w*o.x[1],i.t+i.h*(1-o.y[0])];d.attr("transform",EZ(T[0],T[1])+wGt(A))}};function kGt(e,t){var r=e._fullLayout,i=e._context;if(i.mapboxAccessToken==="")return"";for(var n=[],a=[],o=!1,s=!1,l=0;l<t.length;l++){var u=r[t[l]],f=u.accesstoken;L9e(u.style)&&(f?bg.pushUnique(n,f):(L9e(u._input.style)&&(bg.error("Uses Mapbox map style, but did not set an access token."),o=!0),s=!0)),f&&bg.pushUnique(a,f)}if(s){var c=o?wg.noAccessTokenErrorMsg:wg.missingStyleErrorMsg;throw bg.error(c),new Error(c)}return n.length?(n.length>1&&bg.warn(wg.multipleTokensErrorMsg),n[0]):(a.length&&bg.log(["Listed mapbox access token(s)",a.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function L9e(e){return typeof e=="string"&&(wg.styleValuesMapbox.indexOf(e)!==-1||e.indexOf("mapbox://")===0||e.indexOf("stamen")===0)}md.updateFx=function(e){for(var t=e._fullLayout,r=t._subplots[P1],i=0;i<r.length;i++){var n=t[r[i]]._subplot;n.updateFx(t)}}});var R9e=ie((cmr,P9e)=>{"use strict";P9e.exports={attributes:KI(),supplyDefaults:GNe(),colorbar:yh(),formatLabels:pZ(),calc:oY(),plot:i9e(),hoverPoints:tF().hoverPoints,eventData:l9e(),selectPoints:f9e(),styleOnSelect:function(e,t){if(t){var r=t[0].trace;r._glTrace.update(t)}},moduleType:"trace",name:"scattermapbox",basePlotModule:iF(),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}});var I9e=ie((hmr,D9e)=>{"use strict";D9e.exports=R9e()});var kZ=ie((vmr,F9e)=>{"use strict";var Cy=JE(),CGt=Ls(),LGt=Ba().hovertemplateAttrs,PGt=rs(),R1=aa().extendFlat;F9e.exports=R1({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:R1({},Cy.featureidkey,{}),below:{valType:"string",editType:"plot"},text:Cy.text,hovertext:Cy.hovertext,marker:{line:{color:R1({},Cy.marker.line.color,{editType:"plot"}),width:R1({},Cy.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:R1({},Cy.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:R1({},Cy.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:R1({},Cy.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:Cy.hoverinfo,hovertemplate:LGt({},{keys:["properties"]}),showlegend:R1({},PGt.showlegend,{dflt:!1})},CGt("",{cLetter:"z",editTypeOverride:"calc"}))});var z9e=ie((dmr,q9e)=>{"use strict";var q5=Zt(),RGt=$f(),DGt=kZ();q9e.exports=function(t,r,i,n){function a(f,c){return q5.coerce(t,r,DGt,f,c)}var o=a("locations"),s=a("z"),l=a("geojson");if(!q5.isArrayOrTypedArray(o)||!o.length||!q5.isArrayOrTypedArray(s)||!s.length||!(typeof l=="string"&&l!==""||q5.isPlainObject(l))){r.visible=!1;return}a("featureidkey"),r._length=Math.min(o.length,s.length),a("below"),a("text"),a("hovertext"),a("hovertemplate");var u=a("marker.line.width");u&&a("marker.line.color"),a("marker.opacity"),RGt(t,r,n,a,{prefix:"",cLetter:"z"}),q5.coerceSelectionMarkerOpacity(r,a)}});var CZ=ie((pmr,N9e)=>{"use strict";var IGt=la(),Ly=Zt(),FGt=ul(),qGt=oa(),zGt=GE().makeBlank,O9e=N3();function OGt(e){var t=e[0].trace,r=t.visible===!0&&t._length!==0,i={layout:{visibility:"none"},paint:{}},n={layout:{visibility:"none"},paint:{}},a=t._opts={fill:i,line:n,geojson:zGt()};if(!r)return a;var o=O9e.extractTraceFeature(e);if(!o)return a;var s=FGt.makeColorScaleFuncFromTrace(t),l=t.marker,u=l.line||{},f;Ly.isArrayOrTypedArray(l.opacity)&&(f=function(w){var A=w.mo;return IGt(A)?+Ly.constrain(A,0,1):0});var c;Ly.isArrayOrTypedArray(u.color)&&(c=function(w){return w.mlc});var h;Ly.isArrayOrTypedArray(u.width)&&(h=function(w){return w.mlw});for(var v=0;v<e.length;v++){var d=e[v],x=d.fOut;if(x){var b=x.properties;b.fc=s(d.z),f&&(b.mo=f(d)),c&&(b.mlc=c(d)),h&&(b.mlw=h(d)),d.ct=b.ct,d._polygons=O9e.feature2polygons(x)}}var p=f?{type:"identity",property:"mo"}:l.opacity;return Ly.extendFlat(i.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":p}),Ly.extendFlat(n.paint,{"line-color":c?{type:"identity",property:"mlc"}:u.color,"line-width":h?{type:"identity",property:"mlw"}:u.width,"line-opacity":p}),i.layout.visibility="visible",n.layout.visibility="visible",a.geojson={type:"FeatureCollection",features:o},B9e(e),a}function B9e(e){var t=e[0].trace,r=t._opts,i;if(t.selectedpoints){for(var n=qGt.makeSelectedPointStyleFns(t),a=0;a<e.length;a++){var o=e[a];o.fOut&&(o.fOut.properties.mo2=n.selectedOpacityFn(o))}i={type:"identity",property:"mo2"}}else i=Ly.isArrayOrTypedArray(t.marker.opacity)?{type:"identity",property:"mo"}:t.marker.opacity;return Ly.extendFlat(r.fill.paint,{"fill-opacity":i}),Ly.extendFlat(r.line.paint,{"line-opacity":i}),r}N9e.exports={convert:OGt,convertOnSelect:B9e}});var Y9e=ie((gmr,G9e)=>{"use strict";var V9e=CZ().convert,BGt=CZ().convertOnSelect,U9e=ky().traceLayerPrefix;function H9e(e,t){this.type="choroplethmapbox",this.subplot=e,this.uid=t,this.sourceId="source-"+t,this.layerList=[["fill",U9e+t+"-fill"],["line",U9e+t+"-line"]],this.below=null}var pT=H9e.prototype;pT.update=function(e){this._update(V9e(e)),e[0].trace._glTrace=this};pT.updateOnSelect=function(e){this._update(BGt(e))};pT._update=function(e){var t=this.subplot,r=this.layerList,i=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(e.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(e,i),this.below=i);for(var n=0;n<r.length;n++){var a=r[n],o=a[0],s=a[1],l=e[o];t.setOptions(s,"setLayoutProperty",l.layout),l.layout.visibility==="visible"&&t.setOptions(s,"setPaintProperty",l.paint)}};pT._addLayers=function(e,t){for(var r=this.subplot,i=this.layerList,n=this.sourceId,a=0;a<i.length;a++){var o=i[a],s=o[0],l=e[s];r.addLayer({type:s,id:o[1],source:n,layout:l.layout,paint:l.paint},t)}};pT._removeLayers=function(){for(var e=this.subplot.map,t=this.layerList,r=t.length-1;r>=0;r--)e.removeLayer(t[r][1])};pT.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)};G9e.exports=function(t,r){var i=r[0].trace,n=new H9e(t,i.uid),a=n.sourceId,o=V9e(r),s=n.below=t.belowLookup["trace-"+i.uid];return t.map.addSource(a,{type:"geojson",data:o.geojson}),n._addLayers(o,s),r[0].trace._glTrace=n,n}});var X9e=ie((ymr,W9e)=>{"use strict";W9e.exports={attributes:kZ(),supplyDefaults:z9e(),colorbar:t_(),calc:XY(),plot:Y9e(),hoverPoints:KY(),eventData:JY(),selectPoints:QY(),styleOnSelect:function(e,t){if(t){var r=t[0].trace;r._glTrace.updateOnSelect(t)}},getBelow:function(e,t){for(var r=t.getMapLayers(),i=r.length-2;i>=0;i--){var n=r[i].id;if(typeof n=="string"&&n.indexOf("water")===0){for(var a=i+1;a<r.length;a++)if(n=r[a].id,typeof n=="string"&&n.indexOf("plotly-")===-1)return n}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:iF(),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}});var j9e=ie((mmr,Z9e)=>{"use strict";Z9e.exports=X9e()});var PZ=ie((xmr,J9e)=>{"use strict";var NGt=Ls(),UGt=Ba().hovertemplateAttrs,K9e=rs(),aF=KI(),LZ=aa().extendFlat;J9e.exports=LZ({lon:aF.lon,lat:aF.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:aF.text,hovertext:aF.hovertext,hoverinfo:LZ({},K9e.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:UGt(),showlegend:LZ({},K9e.showlegend,{dflt:!1})},NGt("",{cLetter:"z",editTypeOverride:"calc"}))});var $9e=ie((_mr,Q9e)=>{"use strict";var VGt=Zt(),HGt=$f(),GGt=PZ();Q9e.exports=function(t,r,i,n){function a(u,f){return VGt.coerce(t,r,GGt,u,f)}var o=a("lon")||[],s=a("lat")||[],l=Math.min(o.length,s.length);if(!l){r.visible=!1;return}r._length=l,a("z"),a("radius"),a("below"),a("text"),a("hovertext"),a("hovertemplate"),HGt(t,r,n,a,{prefix:"",cLetter:"z"})}});var rUe=ie((bmr,tUe)=>{"use strict";var RZ=la(),YGt=Zt().isArrayOrTypedArray,DZ=eo().BADNUM,WGt=xv(),eUe=Zt()._;tUe.exports=function(t,r){for(var i=r._length,n=new Array(i),a=r.z,o=YGt(a)&&a.length,s=0;s<i;s++){var l=n[s]={},u=r.lon[s],f=r.lat[s];if(l.lonlat=RZ(u)&&RZ(f)?[+u,+f]:[DZ,DZ],o){var c=a[s];l.z=RZ(c)?c:DZ}}return WGt(t,r,{vals:o?a:[0,1],containerStr:"",cLetter:"z"}),i&&(n[0].t={labels:{lat:eUe(t,"lat:")+" ",lon:eUe(t,"lon:")+" "}}),n}});var sUe=ie((wmr,oUe)=>{"use strict";var XGt=la(),IZ=Zt(),nUe=_i(),iUe=ul(),aUe=eo().BADNUM,ZGt=GE().makeBlank;oUe.exports=function(t){var r=t[0].trace,i=r.visible===!0&&r._length!==0,n={layout:{visibility:"none"},paint:{}},a=r._opts={heatmap:n,geojson:ZGt()};if(!i)return a;var o=[],s,l=r.z,u=r.radius,f=IZ.isArrayOrTypedArray(l)&&l.length,c=IZ.isArrayOrTypedArray(u);for(s=0;s<t.length;s++){var h=t[s],v=h.lonlat;if(v[0]!==aUe){var d={};if(f){var x=h.z;d.z=x!==aUe?x:0}c&&(d.r=XGt(u[s])&&u[s]>0?+u[s]:0),o.push({type:"Feature",geometry:{type:"Point",coordinates:v},properties:d})}}var b=iUe.extractOpts(r),p=b.reversescale?iUe.flipScale(b.colorscale):b.colorscale,w=p[0][1],A=nUe.opacity(w)<1?w:nUe.addOpacity(w,0),T=["interpolate",["linear"],["heatmap-density"],0,A];for(s=1;s<p.length;s++)T.push(p[s][0],p[s][1]);var k=["interpolate",["linear"],["get","z"],b.min,0,b.max,1];return IZ.extendFlat(a.heatmap.paint,{"heatmap-weight":f?k:1/(b.max-b.min),"heatmap-color":T,"heatmap-radius":c?{type:"identity",property:"r"}:r.radius,"heatmap-opacity":r.opacity}),a.geojson={type:"FeatureCollection",features:o},a.heatmap.layout.visibility="visible",a}});var cUe=ie((Tmr,fUe)=>{"use strict";var lUe=sUe(),jGt=ky().traceLayerPrefix;function uUe(e,t){this.type="densitymapbox",this.subplot=e,this.uid=t,this.sourceId="source-"+t,this.layerList=[["heatmap",jGt+t+"-heatmap"]],this.below=null}var oF=uUe.prototype;oF.update=function(e){var t=this.subplot,r=this.layerList,i=lUe(e),n=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(i.geojson),n!==this.below&&(this._removeLayers(),this._addLayers(i,n),this.below=n);for(var a=0;a<r.length;a++){var o=r[a],s=o[0],l=o[1],u=i[s];t.setOptions(l,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&t.setOptions(l,"setPaintProperty",u.paint)}};oF._addLayers=function(e,t){for(var r=this.subplot,i=this.layerList,n=this.sourceId,a=0;a<i.length;a++){var o=i[a],s=o[0],l=e[s];r.addLayer({type:s,id:o[1],source:n,layout:l.layout,paint:l.paint},t)}};oF._removeLayers=function(){for(var e=this.subplot.map,t=this.layerList,r=t.length-1;r>=0;r--)e.removeLayer(t[r][1])};oF.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)};fUe.exports=function(t,r){var i=r[0].trace,n=new uUe(t,i.uid),a=n.sourceId,o=lUe(r),s=n.below=t.belowLookup["trace-"+i.uid];return t.map.addSource(a,{type:"geojson",data:o.geojson}),n._addLayers(o,s),n}});var vUe=ie((Amr,hUe)=>{"use strict";var KGt=Wi(),JGt=tF().hoverPoints,QGt=tF().getExtraText;hUe.exports=function(t,r,i){var n=JGt(t,r,i);if(n){var a=n[0],o=a.cd,s=o[0].trace,l=o[a.index];if(delete a.color,"z"in l){var u=a.subplot.mockAxis;a.z=l.z,a.zLabel=KGt.tickText(u,u.c2l(l.z),"hover").text}return a.extraText=QGt(s,l,o[0].t.labels),[a]}}});var pUe=ie((Mmr,dUe)=>{"use strict";dUe.exports=function(t,r){return t.lon=r.lon,t.lat=r.lat,t.z=r.z,t}});var yUe=ie((Smr,gUe)=>{"use strict";gUe.exports={attributes:PZ(),supplyDefaults:$9e(),colorbar:t_(),formatLabels:pZ(),calc:rUe(),plot:cUe(),hoverPoints:vUe(),eventData:pUe(),getBelow:function(e,t){for(var r=t.getMapLayers(),i=0;i<r.length;i++){var n=r[i],a=n.id;if(n.type==="symbol"&&typeof a=="string"&&a.indexOf("plotly-")===-1)return a}},moduleType:"trace",name:"densitymapbox",basePlotModule:iF(),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}});var xUe=ie((Emr,mUe)=>{"use strict";mUe.exports=yUe()});var qZ=ie((kmr,TUe)=>{"use strict";var $Gt=Xs(),eYt=rs(),_Ue=Qu(),FZ=$b(),tYt=fl().attributes,bUe=Ba().hovertemplateAttrs,rYt=Ls(),nYt=ko().templatedArray,iYt=kl().descriptionOnlyNumbers,wUe=aa().extendFlat,aYt=Zs().overrideAll,oYt=TUe.exports=aYt({hoverinfo:wUe({},eYt.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:FZ.hoverlabel,domain:tYt({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:iYt("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:$Gt({autoShadowDflt:!0}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:_Ue.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:FZ.hoverlabel,hovertemplate:bUe({},{keys:["value","label"]}),align:{valType:"enumerated",values:["justify","left","right","center"],dflt:"justify"}},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},hovercolor:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:_Ue.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:FZ.hoverlabel,hovertemplate:bUe({},{keys:["value","label"]}),colorscales:nYt("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:wUe(rYt().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");oYt.transforms=void 0});var kUe=ie((Cmr,EUe)=>{"use strict";var gT=Zt(),sF=qZ(),sYt=_i(),AUe=Kf(),lYt=fl().defaults,MUe=GA(),SUe=ko(),uYt=dh();EUe.exports=function(t,r,i,n){function a(T,k){return gT.coerce(t,r,sF,T,k)}var o=gT.extendDeep(n.hoverlabel,t.hoverlabel),s=t.node,l=SUe.newContainer(r,"node");function u(T,k){return gT.coerce(s,l,sF.node,T,k)}u("label"),u("groups"),u("x"),u("y"),u("pad"),u("thickness"),u("line.color"),u("line.width"),u("hoverinfo",t.hoverinfo),MUe(s,l,u,o),u("hovertemplate"),u("align");var f=n.colorway,c=function(T){return f[T%f.length]};u("color",l.label.map(function(T,k){return sYt.addOpacity(c(k),.8)})),u("customdata");var h=t.link||{},v=SUe.newContainer(r,"link");function d(T,k){return gT.coerce(h,v,sF.link,T,k)}d("label"),d("arrowlen"),d("source"),d("target"),d("value"),d("line.color"),d("line.width"),d("hoverinfo",t.hoverinfo),MUe(h,v,d,o),d("hovertemplate");var x=AUe(n.paper_bgcolor).getLuminance()<.333,b=x?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)",p=d("color",b);function w(T){var k=AUe(T);if(!k.isValid())return T;var _=k.getAlpha();return _<=.8?k.setAlpha(_+.2):k=x?k.brighten():k.darken(),k.toRgbString()}d("hovercolor",Array.isArray(p)?p.map(w):w(p)),d("customdata"),uYt(h,v,{name:"colorscales",handleItemDefaults:fYt}),lYt(r,n,a),a("orientation"),a("valueformat"),a("valuesuffix");var A;l.x.length&&l.y.length&&(A="freeform"),a("arrangement",A),gT.coerceFont(a,"textfont",n.font,{autoShadowDflt:!0}),r._length=null};function fYt(e,t){function r(i,n){return gT.coerce(e,t,sF.link.colorscales,i,n)}r("label"),r("cmin"),r("cmax"),r("colorscale")}});var zZ=ie((Lmr,CUe)=>{"use strict";CUe.exports=cYt;function cYt(e){for(var t=e.length,r=new Array(t),i=new Array(t),n=new Array(t),a=new Array(t),o=new Array(t),s=new Array(t),l=0;l<t;++l)r[l]=-1,i[l]=0,n[l]=!1,a[l]=0,o[l]=-1,s[l]=[];var u=0,f=[],c=[];function h(b){var p=[b],w=[b];for(r[b]=i[b]=u,n[b]=!0,u+=1;w.length>0;){b=w[w.length-1];var A=e[b];if(a[b]<A.length){for(var T=a[b];T<A.length;++T){var k=A[T];if(r[k]<0){r[k]=i[k]=u,n[k]=!0,u+=1,p.push(k),w.push(k);break}else n[k]&&(i[b]=Math.min(i[b],i[k])|0);o[k]>=0&&s[b].push(o[k])}a[b]=T}else{if(i[b]===r[b]){for(var _=[],E=[],S=0,T=p.length-1;T>=0;--T){var g=p[T];if(n[g]=!1,_.push(g),E.push(s[g]),S+=s[g].length,o[g]=f.length,g===b){p.length=T;break}}f.push(_);for(var C=new Array(S),T=0;T<E.length;T++)for(var M=0;M<E[T].length;M++)C[--S]=E[T][M];c.push(C)}w.pop()}}}for(var l=0;l<t;++l)r[l]<0&&h(l);for(var v,l=0;l<c.length;l++){var d=c[l];if(d.length!==0){d.sort(function(p,w){return p-w}),v=[d[0]];for(var x=1;x<d.length;x++)d[x]!==d[x-1]&&v.push(d[x]);c[l]=v}}return{components:f,adjacencyList:c}}});var DUe=ie((Pmr,RUe)=>{"use strict";var hYt=zZ(),yT=Zt(),vYt=mg().wrap,z5=yT.isArrayOrTypedArray,LUe=yT.isIndex,PUe=ul();function dYt(e){var t=e.node,r=e.link,i=[],n=z5(r.color),a=z5(r.hovercolor),o=z5(r.customdata),s={},l={},u=r.colorscales.length,f;for(f=0;f<u;f++){var c=r.colorscales[f],h=PUe.extractScale(c,{cLetter:"c"}),v=PUe.makeColorScaleFunc(h);l[c.label]=v}var d=0;for(f=0;f<r.value.length;f++)r.source[f]>d&&(d=r.source[f]),r.target[f]>d&&(d=r.target[f]);var x=d+1;e.node._count=x;var b,p=e.node.groups,w={};for(f=0;f<p.length;f++){var A=p[f];for(b=0;b<A.length;b++){var T=A[b],k=x+f;w.hasOwnProperty(T)?yT.warn("Node "+T+" is already part of a group."):w[T]=k}}var _={source:[],target:[]};for(f=0;f<r.value.length;f++){var E=r.value[f],S=r.source[f],g=r.target[f];if(E>0&&LUe(S,x)&&LUe(g,x)&&!(w.hasOwnProperty(S)&&w.hasOwnProperty(g)&&w[S]===w[g])){w.hasOwnProperty(g)&&(g=w[g]),w.hasOwnProperty(S)&&(S=w[S]),S=+S,g=+g,s[S]=s[g]=!0;var C="";r.label&&r.label[f]&&(C=r.label[f]);var M=null;C&&l.hasOwnProperty(C)&&(M=l[C]),i.push({pointNumber:f,label:C,color:n?r.color[f]:r.color,hovercolor:a?r.hovercolor[f]:r.hovercolor,customdata:o?r.customdata[f]:r.customdata,concentrationscale:M,source:S,target:g,value:+E}),_.source.push(S),_.target.push(g)}}var P=x+p.length,D=z5(t.color),q=z5(t.customdata),O=[];for(f=0;f<P;f++)if(s[f]){var U=t.label[f];O.push({group:f>x-1,childrenNodes:[],pointNumber:f,label:U,color:D?t.color[f]:t.color,customdata:q?t.customdata[f]:t.customdata})}var B=!1;return pYt(P,_.source,_.target)&&(B=!0),{circular:B,links:i,nodes:O,groups:p,groupLookup:w}}function pYt(e,t,r){for(var i=yT.init2dArray(e,0),n=0;n<Math.min(t.length,r.length);n++)if(yT.isIndex(t[n],e)&&yT.isIndex(r[n],e)){if(t[n]===r[n])return!0;i[t[n]].push(r[n])}var a=hYt(i);return a.components.some(function(o){return o.length>1})}RUe.exports=function(t,r){var i=dYt(r);return vYt({circular:i.circular,_nodes:i.nodes,_links:i.links,_groups:i.groups,_groupLookup:i.groupLookup})}});var FUe=ie((lF,IUe)=>{(function(e,t){typeof lF=="object"&&typeof IUe!="undefined"?t(lF):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.d3=e.d3||{}))})(lF,function(e){"use strict";function t(E){var S=+this._x.call(null,E),g=+this._y.call(null,E);return r(this.cover(S,g),S,g,E)}function r(E,S,g,C){if(isNaN(S)||isNaN(g))return E;var M,P=E._root,D={data:C},q=E._x0,O=E._y0,U=E._x1,B=E._y1,F,N,X,K,ne,fe,ue,ee;if(!P)return E._root=D,E;for(;P.length;)if((ne=S>=(F=(q+U)/2))?q=F:U=F,(fe=g>=(N=(O+B)/2))?O=N:B=N,M=P,!(P=P[ue=fe<<1|ne]))return M[ue]=D,E;if(X=+E._x.call(null,P.data),K=+E._y.call(null,P.data),S===X&&g===K)return D.next=P,M?M[ue]=D:E._root=D,E;do M=M?M[ue]=new Array(4):E._root=new Array(4),(ne=S>=(F=(q+U)/2))?q=F:U=F,(fe=g>=(N=(O+B)/2))?O=N:B=N;while((ue=fe<<1|ne)===(ee=(K>=N)<<1|X>=F));return M[ee]=P,M[ue]=D,E}function i(E){var S,g,C=E.length,M,P,D=new Array(C),q=new Array(C),O=1/0,U=1/0,B=-1/0,F=-1/0;for(g=0;g<C;++g)isNaN(M=+this._x.call(null,S=E[g]))||isNaN(P=+this._y.call(null,S))||(D[g]=M,q[g]=P,M<O&&(O=M),M>B&&(B=M),P<U&&(U=P),P>F&&(F=P));if(O>B||U>F)return this;for(this.cover(O,U).cover(B,F),g=0;g<C;++g)r(this,D[g],q[g],E[g]);return this}function n(E,S){if(isNaN(E=+E)||isNaN(S=+S))return this;var g=this._x0,C=this._y0,M=this._x1,P=this._y1;if(isNaN(g))M=(g=Math.floor(E))+1,P=(C=Math.floor(S))+1;else{for(var D=M-g,q=this._root,O,U;g>E||E>=M||C>S||S>=P;)switch(U=(S<C)<<1|E<g,O=new Array(4),O[U]=q,q=O,D*=2,U){case 0:M=g+D,P=C+D;break;case 1:g=M-D,P=C+D;break;case 2:M=g+D,C=P-D;break;case 3:g=M-D,C=P-D;break}this._root&&this._root.length&&(this._root=q)}return this._x0=g,this._y0=C,this._x1=M,this._y1=P,this}function a(){var E=[];return this.visit(function(S){if(!S.length)do E.push(S.data);while(S=S.next)}),E}function o(E){return arguments.length?this.cover(+E[0][0],+E[0][1]).cover(+E[1][0],+E[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function s(E,S,g,C,M){this.node=E,this.x0=S,this.y0=g,this.x1=C,this.y1=M}function l(E,S,g){var C,M=this._x0,P=this._y0,D,q,O,U,B=this._x1,F=this._y1,N=[],X=this._root,K,ne;for(X&&N.push(new s(X,M,P,B,F)),g==null?g=1/0:(M=E-g,P=S-g,B=E+g,F=S+g,g*=g);K=N.pop();)if(!(!(X=K.node)||(D=K.x0)>B||(q=K.y0)>F||(O=K.x1)<M||(U=K.y1)<P))if(X.length){var fe=(D+O)/2,ue=(q+U)/2;N.push(new s(X[3],fe,ue,O,U),new s(X[2],D,ue,fe,U),new s(X[1],fe,q,O,ue),new s(X[0],D,q,fe,ue)),(ne=(S>=ue)<<1|E>=fe)&&(K=N[N.length-1],N[N.length-1]=N[N.length-1-ne],N[N.length-1-ne]=K)}else{var ee=E-+this._x.call(null,X.data),Z=S-+this._y.call(null,X.data),oe=ee*ee+Z*Z;if(oe<g){var ce=Math.sqrt(g=oe);M=E-ce,P=S-ce,B=E+ce,F=S+ce,C=X.data}}return C}function u(E){if(isNaN(B=+this._x.call(null,E))||isNaN(F=+this._y.call(null,E)))return this;var S,g=this._root,C,M,P,D=this._x0,q=this._y0,O=this._x1,U=this._y1,B,F,N,X,K,ne,fe,ue;if(!g)return this;if(g.length)for(;;){if((K=B>=(N=(D+O)/2))?D=N:O=N,(ne=F>=(X=(q+U)/2))?q=X:U=X,S=g,!(g=g[fe=ne<<1|K]))return this;if(!g.length)break;(S[fe+1&3]||S[fe+2&3]||S[fe+3&3])&&(C=S,ue=fe)}for(;g.data!==E;)if(M=g,!(g=g.next))return this;return(P=g.next)&&delete g.next,M?(P?M.next=P:delete M.next,this):S?(P?S[fe]=P:delete S[fe],(g=S[0]||S[1]||S[2]||S[3])&&g===(S[3]||S[2]||S[1]||S[0])&&!g.length&&(C?C[ue]=g:this._root=g),this):(this._root=P,this)}function f(E){for(var S=0,g=E.length;S<g;++S)this.remove(E[S]);return this}function c(){return this._root}function h(){var E=0;return this.visit(function(S){if(!S.length)do++E;while(S=S.next)}),E}function v(E){var S=[],g,C=this._root,M,P,D,q,O;for(C&&S.push(new s(C,this._x0,this._y0,this._x1,this._y1));g=S.pop();)if(!E(C=g.node,P=g.x0,D=g.y0,q=g.x1,O=g.y1)&&C.length){var U=(P+q)/2,B=(D+O)/2;(M=C[3])&&S.push(new s(M,U,B,q,O)),(M=C[2])&&S.push(new s(M,P,B,U,O)),(M=C[1])&&S.push(new s(M,U,D,q,B)),(M=C[0])&&S.push(new s(M,P,D,U,B))}return this}function d(E){var S=[],g=[],C;for(this._root&&S.push(new s(this._root,this._x0,this._y0,this._x1,this._y1));C=S.pop();){var M=C.node;if(M.length){var P,D=C.x0,q=C.y0,O=C.x1,U=C.y1,B=(D+O)/2,F=(q+U)/2;(P=M[0])&&S.push(new s(P,D,q,B,F)),(P=M[1])&&S.push(new s(P,B,q,O,F)),(P=M[2])&&S.push(new s(P,D,F,B,U)),(P=M[3])&&S.push(new s(P,B,F,O,U))}g.push(C)}for(;C=g.pop();)E(C.node,C.x0,C.y0,C.x1,C.y1);return this}function x(E){return E[0]}function b(E){return arguments.length?(this._x=E,this):this._x}function p(E){return E[1]}function w(E){return arguments.length?(this._y=E,this):this._y}function A(E,S,g){var C=new T(S==null?x:S,g==null?p:g,NaN,NaN,NaN,NaN);return E==null?C:C.addAll(E)}function T(E,S,g,C,M,P){this._x=E,this._y=S,this._x0=g,this._y0=C,this._x1=M,this._y1=P,this._root=void 0}function k(E){for(var S={data:E.data},g=S;E=E.next;)g=g.next={data:E.data};return S}var _=A.prototype=T.prototype;_.copy=function(){var E=new T(this._x,this._y,this._x0,this._y0,this._x1,this._y1),S=this._root,g,C;if(!S)return E;if(!S.length)return E._root=k(S),E;for(g=[{source:S,target:E._root=new Array(4)}];S=g.pop();)for(var M=0;M<4;++M)(C=S.source[M])&&(C.length?g.push({source:C,target:S.target[M]=new Array(4)}):S.target[M]=k(C));return E},_.add=t,_.addAll=i,_.cover=n,_.data=a,_.extent=o,_.find=l,_.remove=u,_.removeAll=f,_.root=c,_.size=h,_.visit=v,_.visitAfter=d,_.x=b,_.y=w,e.quadtree=A,Object.defineProperty(e,"__esModule",{value:!0})})});var fF=ie((uF,qUe)=>{(function(e,t){typeof uF=="object"&&typeof qUe!="undefined"?t(uF):typeof define=="function"&&define.amd?define(["exports"],t):t(e.d3=e.d3||{})})(uF,function(e){"use strict";var t="$";function r(){}r.prototype=i.prototype={constructor:r,has:function(x){return t+x in this},get:function(x){return this[t+x]},set:function(x,b){return this[t+x]=b,this},remove:function(x){var b=t+x;return b in this&&delete this[b]},clear:function(){for(var x in this)x[0]===t&&delete this[x]},keys:function(){var x=[];for(var b in this)b[0]===t&&x.push(b.slice(1));return x},values:function(){var x=[];for(var b in this)b[0]===t&&x.push(this[b]);return x},entries:function(){var x=[];for(var b in this)b[0]===t&&x.push({key:b.slice(1),value:this[b]});return x},size:function(){var x=0;for(var b in this)b[0]===t&&++x;return x},empty:function(){for(var x in this)if(x[0]===t)return!1;return!0},each:function(x){for(var b in this)b[0]===t&&x(this[b],b.slice(1),this)}};function i(x,b){var p=new r;if(x instanceof r)x.each(function(_,E){p.set(E,_)});else if(Array.isArray(x)){var w=-1,A=x.length,T;if(b==null)for(;++w<A;)p.set(w,x[w]);else for(;++w<A;)p.set(b(T=x[w],w,x),T)}else if(x)for(var k in x)p.set(k,x[k]);return p}function n(){var x=[],b=[],p,w,A;function T(_,E,S,g){if(E>=x.length)return p!=null&&_.sort(p),w!=null?w(_):_;for(var C=-1,M=_.length,P=x[E++],D,q,O=i(),U,B=S();++C<M;)(U=O.get(D=P(q=_[C])+""))?U.push(q):O.set(D,[q]);return O.each(function(F,N){g(B,N,T(F,E,S,g))}),B}function k(_,E){if(++E>x.length)return _;var S,g=b[E-1];return w!=null&&E>=x.length?S=_.entries():(S=[],_.each(function(C,M){S.push({key:M,values:k(C,E)})})),g!=null?S.sort(function(C,M){return g(C.key,M.key)}):S}return A={object:function(_){return T(_,0,a,o)},map:function(_){return T(_,0,s,l)},entries:function(_){return k(T(_,0,s,l),0)},key:function(_){return x.push(_),A},sortKeys:function(_){return b[x.length-1]=_,A},sortValues:function(_){return p=_,A},rollup:function(_){return w=_,A}}}function a(){return{}}function o(x,b,p){x[b]=p}function s(){return i()}function l(x,b,p){x.set(b,p)}function u(){}var f=i.prototype;u.prototype=c.prototype={constructor:u,has:f.has,add:function(x){return x+="",this[t+x]=x,this},remove:f.remove,clear:f.clear,values:f.keys,size:f.size,empty:f.empty,each:f.each};function c(x,b){var p=new u;if(x instanceof u)x.each(function(T){p.add(T)});else if(x){var w=-1,A=x.length;if(b==null)for(;++w<A;)p.add(x[w]);else for(;++w<A;)p.add(b(x[w],w,x))}return p}function h(x){var b=[];for(var p in x)b.push(p);return b}function v(x){var b=[];for(var p in x)b.push(x[p]);return b}function d(x){var b=[];for(var p in x)b.push({key:p,value:x[p]});return b}e.nest=n,e.set=c,e.map=i,e.keys=h,e.values=v,e.entries=d,Object.defineProperty(e,"__esModule",{value:!0})})});var OUe=ie((cF,zUe)=>{(function(e,t){typeof cF=="object"&&typeof zUe!="undefined"?t(cF):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.d3=e.d3||{}))})(cF,function(e){"use strict";var t={value:function(){}};function r(){for(var s=0,l=arguments.length,u={},f;s<l;++s){if(!(f=arguments[s]+"")||f in u||/[\s.]/.test(f))throw new Error("illegal type: "+f);u[f]=[]}return new i(u)}function i(s){this._=s}function n(s,l){return s.trim().split(/^|\s+/).map(function(u){var f="",c=u.indexOf(".");if(c>=0&&(f=u.slice(c+1),u=u.slice(0,c)),u&&!l.hasOwnProperty(u))throw new Error("unknown type: "+u);return{type:u,name:f}})}i.prototype=r.prototype={constructor:i,on:function(s,l){var u=this._,f=n(s+"",u),c,h=-1,v=f.length;if(arguments.length<2){for(;++h<v;)if((c=(s=f[h]).type)&&(c=a(u[c],s.name)))return c;return}if(l!=null&&typeof l!="function")throw new Error("invalid callback: "+l);for(;++h<v;)if(c=(s=f[h]).type)u[c]=o(u[c],s.name,l);else if(l==null)for(c in u)u[c]=o(u[c],s.name,null);return this},copy:function(){var s={},l=this._;for(var u in l)s[u]=l[u].slice();return new i(s)},call:function(s,l){if((c=arguments.length-2)>0)for(var u=new Array(c),f=0,c,h;f<c;++f)u[f]=arguments[f+2];if(!this._.hasOwnProperty(s))throw new Error("unknown type: "+s);for(h=this._[s],f=0,c=h.length;f<c;++f)h[f].value.apply(l,u)},apply:function(s,l,u){if(!this._.hasOwnProperty(s))throw new Error("unknown type: "+s);for(var f=this._[s],c=0,h=f.length;c<h;++c)f[c].value.apply(l,u)}};function a(s,l){for(var u=0,f=s.length,c;u<f;++u)if((c=s[u]).name===l)return c.value}function o(s,l,u){for(var f=0,c=s.length;f<c;++f)if(s[f].name===l){s[f]=t,s=s.slice(0,f).concat(s.slice(f+1));break}return u!=null&&s.push({name:l,value:u}),s}e.dispatch=r,Object.defineProperty(e,"__esModule",{value:!0})})});var NUe=ie((hF,BUe)=>{(function(e,t){typeof hF=="object"&&typeof BUe!="undefined"?t(hF):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.d3=e.d3||{}))})(hF,function(e){"use strict";var t=0,r=0,i=0,n=1e3,a,o,s=0,l=0,u=0,f=typeof performance=="object"&&performance.now?performance:Date,c=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(E){setTimeout(E,17)};function h(){return l||(c(v),l=f.now()+u)}function v(){l=0}function d(){this._call=this._time=this._next=null}d.prototype=x.prototype={constructor:d,restart:function(E,S,g){if(typeof E!="function")throw new TypeError("callback is not a function");g=(g==null?h():+g)+(S==null?0:+S),!this._next&&o!==this&&(o?o._next=this:a=this,o=this),this._call=E,this._time=g,T()},stop:function(){this._call&&(this._call=null,this._time=1/0,T())}};function x(E,S,g){var C=new d;return C.restart(E,S,g),C}function b(){h(),++t;for(var E=a,S;E;)(S=l-E._time)>=0&&E._call.call(null,S),E=E._next;--t}function p(){l=(s=f.now())+u,t=r=0;try{b()}finally{t=0,A(),l=0}}function w(){var E=f.now(),S=E-s;S>n&&(u-=S,s=E)}function A(){for(var E,S=a,g,C=1/0;S;)S._call?(C>S._time&&(C=S._time),E=S,S=S._next):(g=S._next,S._next=null,S=E?E._next=g:a=g);o=E,T(C)}function T(E){if(!t){r&&(r=clearTimeout(r));var S=E-l;S>24?(E<1/0&&(r=setTimeout(p,E-f.now()-u)),i&&(i=clearInterval(i))):(i||(s=f.now(),i=setInterval(w,n)),t=1,c(p))}}function k(E,S,g){var C=new d;return S=S==null?0:+S,C.restart(function(M){C.stop(),E(M+S)},S,g),C}function _(E,S,g){var C=new d,M=S;return S==null?(C.restart(E,S,g),C):(S=+S,g=g==null?h():+g,C.restart(function P(D){D+=M,C.restart(P,M+=S,g),E(D)},S,g),C)}e.interval=_,e.now=h,e.timeout=k,e.timer=x,e.timerFlush=b,Object.defineProperty(e,"__esModule",{value:!0})})});var VUe=ie((vF,UUe)=>{(function(e,t){typeof vF=="object"&&typeof UUe!="undefined"?t(vF,FUe(),fF(),OUe(),NUe()):typeof define=="function"&&define.amd?define(["exports","d3-quadtree","d3-collection","d3-dispatch","d3-timer"],t):t(e.d3=e.d3||{},e.d3,e.d3,e.d3,e.d3)})(vF,function(e,t,r,i,n){"use strict";function a(E,S){var g;E==null&&(E=0),S==null&&(S=0);function C(){var M,P=g.length,D,q=0,O=0;for(M=0;M<P;++M)D=g[M],q+=D.x,O+=D.y;for(q=q/P-E,O=O/P-S,M=0;M<P;++M)D=g[M],D.x-=q,D.y-=O}return C.initialize=function(M){g=M},C.x=function(M){return arguments.length?(E=+M,C):E},C.y=function(M){return arguments.length?(S=+M,C):S},C}function o(E){return function(){return E}}function s(){return(Math.random()-.5)*1e-6}function l(E){return E.x+E.vx}function u(E){return E.y+E.vy}function f(E){var S,g,C=1,M=1;typeof E!="function"&&(E=o(E==null?1:+E));function P(){for(var O,U=S.length,B,F,N,X,K,ne,fe=0;fe<M;++fe)for(B=t.quadtree(S,l,u).visitAfter(D),O=0;O<U;++O)F=S[O],K=g[F.index],ne=K*K,N=F.x+F.vx,X=F.y+F.vy,B.visit(ue);function ue(ee,Z,oe,ce,le){var me=ee.data,he=ee.r,te=K+he;if(me){if(me.index>F.index){var ge=N-me.x-me.vx,ae=X-me.y-me.vy,_e=ge*ge+ae*ae;_e<te*te&&(ge===0&&(ge=s(),_e+=ge*ge),ae===0&&(ae=s(),_e+=ae*ae),_e=(te-(_e=Math.sqrt(_e)))/_e*C,F.vx+=(ge*=_e)*(te=(he*=he)/(ne+he)),F.vy+=(ae*=_e)*te,me.vx-=ge*(te=1-te),me.vy-=ae*te)}return}return Z>N+te||ce<N-te||oe>X+te||le<X-te}}function D(O){if(O.data)return O.r=g[O.data.index];for(var U=O.r=0;U<4;++U)O[U]&&O[U].r>O.r&&(O.r=O[U].r)}function q(){if(S){var O,U=S.length,B;for(g=new Array(U),O=0;O<U;++O)B=S[O],g[B.index]=+E(B,O,S)}}return P.initialize=function(O){S=O,q()},P.iterations=function(O){return arguments.length?(M=+O,P):M},P.strength=function(O){return arguments.length?(C=+O,P):C},P.radius=function(O){return arguments.length?(E=typeof O=="function"?O:o(+O),q(),P):E},P}function c(E){return E.index}function h(E,S){var g=E.get(S);if(!g)throw new Error("missing: "+S);return g}function v(E){var S=c,g=B,C,M=o(30),P,D,q,O,U=1;E==null&&(E=[]);function B(ne){return 1/Math.min(q[ne.source.index],q[ne.target.index])}function F(ne){for(var fe=0,ue=E.length;fe<U;++fe)for(var ee=0,Z,oe,ce,le,me,he,te;ee<ue;++ee)Z=E[ee],oe=Z.source,ce=Z.target,le=ce.x+ce.vx-oe.x-oe.vx||s(),me=ce.y+ce.vy-oe.y-oe.vy||s(),he=Math.sqrt(le*le+me*me),he=(he-P[ee])/he*ne*C[ee],le*=he,me*=he,ce.vx-=le*(te=O[ee]),ce.vy-=me*te,oe.vx+=le*(te=1-te),oe.vy+=me*te}function N(){if(D){var ne,fe=D.length,ue=E.length,ee=r.map(D,S),Z;for(ne=0,q=new Array(fe);ne<ue;++ne)Z=E[ne],Z.index=ne,typeof Z.source!="object"&&(Z.source=h(ee,Z.source)),typeof Z.target!="object"&&(Z.target=h(ee,Z.target)),q[Z.source.index]=(q[Z.source.index]||0)+1,q[Z.target.index]=(q[Z.target.index]||0)+1;for(ne=0,O=new Array(ue);ne<ue;++ne)Z=E[ne],O[ne]=q[Z.source.index]/(q[Z.source.index]+q[Z.target.index]);C=new Array(ue),X(),P=new Array(ue),K()}}function X(){if(D)for(var ne=0,fe=E.length;ne<fe;++ne)C[ne]=+g(E[ne],ne,E)}function K(){if(D)for(var ne=0,fe=E.length;ne<fe;++ne)P[ne]=+M(E[ne],ne,E)}return F.initialize=function(ne){D=ne,N()},F.links=function(ne){return arguments.length?(E=ne,N(),F):E},F.id=function(ne){return arguments.length?(S=ne,F):S},F.iterations=function(ne){return arguments.length?(U=+ne,F):U},F.strength=function(ne){return arguments.length?(g=typeof ne=="function"?ne:o(+ne),X(),F):g},F.distance=function(ne){return arguments.length?(M=typeof ne=="function"?ne:o(+ne),K(),F):M},F}function d(E){return E.x}function x(E){return E.y}var b=10,p=Math.PI*(3-Math.sqrt(5));function w(E){var S,g=1,C=.001,M=1-Math.pow(C,1/300),P=0,D=.6,q=r.map(),O=n.timer(B),U=i.dispatch("tick","end");E==null&&(E=[]);function B(){F(),U.call("tick",S),g<C&&(O.stop(),U.call("end",S))}function F(K){var ne,fe=E.length,ue;K===void 0&&(K=1);for(var ee=0;ee<K;++ee)for(g+=(P-g)*M,q.each(function(Z){Z(g)}),ne=0;ne<fe;++ne)ue=E[ne],ue.fx==null?ue.x+=ue.vx*=D:(ue.x=ue.fx,ue.vx=0),ue.fy==null?ue.y+=ue.vy*=D:(ue.y=ue.fy,ue.vy=0);return S}function N(){for(var K=0,ne=E.length,fe;K<ne;++K){if(fe=E[K],fe.index=K,fe.fx!=null&&(fe.x=fe.fx),fe.fy!=null&&(fe.y=fe.fy),isNaN(fe.x)||isNaN(fe.y)){var ue=b*Math.sqrt(K),ee=K*p;fe.x=ue*Math.cos(ee),fe.y=ue*Math.sin(ee)}(isNaN(fe.vx)||isNaN(fe.vy))&&(fe.vx=fe.vy=0)}}function X(K){return K.initialize&&K.initialize(E),K}return N(),S={tick:F,restart:function(){return O.restart(B),S},stop:function(){return O.stop(),S},nodes:function(K){return arguments.length?(E=K,N(),q.each(X),S):E},alpha:function(K){return arguments.length?(g=+K,S):g},alphaMin:function(K){return arguments.length?(C=+K,S):C},alphaDecay:function(K){return arguments.length?(M=+K,S):+M},alphaTarget:function(K){return arguments.length?(P=+K,S):P},velocityDecay:function(K){return arguments.length?(D=1-K,S):1-D},force:function(K,ne){return arguments.length>1?(ne==null?q.remove(K):q.set(K,X(ne)),S):q.get(K)},find:function(K,ne,fe){var ue=0,ee=E.length,Z,oe,ce,le,me;for(fe==null?fe=1/0:fe*=fe,ue=0;ue<ee;++ue)le=E[ue],Z=K-le.x,oe=ne-le.y,ce=Z*Z+oe*oe,ce<fe&&(me=le,fe=ce);return me},on:function(K,ne){return arguments.length>1?(U.on(K,ne),S):U.on(K)}}}function A(){var E,S,g,C=o(-30),M,P=1,D=1/0,q=.81;function O(N){var X,K=E.length,ne=t.quadtree(E,d,x).visitAfter(B);for(g=N,X=0;X<K;++X)S=E[X],ne.visit(F)}function U(){if(E){var N,X=E.length,K;for(M=new Array(X),N=0;N<X;++N)K=E[N],M[K.index]=+C(K,N,E)}}function B(N){var X=0,K,ne,fe=0,ue,ee,Z;if(N.length){for(ue=ee=Z=0;Z<4;++Z)(K=N[Z])&&(ne=Math.abs(K.value))&&(X+=K.value,fe+=ne,ue+=ne*K.x,ee+=ne*K.y);N.x=ue/fe,N.y=ee/fe}else{K=N,K.x=K.data.x,K.y=K.data.y;do X+=M[K.data.index];while(K=K.next)}N.value=X}function F(N,X,K,ne){if(!N.value)return!0;var fe=N.x-S.x,ue=N.y-S.y,ee=ne-X,Z=fe*fe+ue*ue;if(ee*ee/q<Z)return Z<D&&(fe===0&&(fe=s(),Z+=fe*fe),ue===0&&(ue=s(),Z+=ue*ue),Z<P&&(Z=Math.sqrt(P*Z)),S.vx+=fe*N.value*g/Z,S.vy+=ue*N.value*g/Z),!0;if(N.length||Z>=D)return;(N.data!==S||N.next)&&(fe===0&&(fe=s(),Z+=fe*fe),ue===0&&(ue=s(),Z+=ue*ue),Z<P&&(Z=Math.sqrt(P*Z)));do N.data!==S&&(ee=M[N.data.index]*g/Z,S.vx+=fe*ee,S.vy+=ue*ee);while(N=N.next)}return O.initialize=function(N){E=N,U()},O.strength=function(N){return arguments.length?(C=typeof N=="function"?N:o(+N),U(),O):C},O.distanceMin=function(N){return arguments.length?(P=N*N,O):Math.sqrt(P)},O.distanceMax=function(N){return arguments.length?(D=N*N,O):Math.sqrt(D)},O.theta=function(N){return arguments.length?(q=N*N,O):Math.sqrt(q)},O}function T(E,S,g){var C,M=o(.1),P,D;typeof E!="function"&&(E=o(+E)),S==null&&(S=0),g==null&&(g=0);function q(U){for(var B=0,F=C.length;B<F;++B){var N=C[B],X=N.x-S||1e-6,K=N.y-g||1e-6,ne=Math.sqrt(X*X+K*K),fe=(D[B]-ne)*P[B]*U/ne;N.vx+=X*fe,N.vy+=K*fe}}function O(){if(C){var U,B=C.length;for(P=new Array(B),D=new Array(B),U=0;U<B;++U)D[U]=+E(C[U],U,C),P[U]=isNaN(D[U])?0:+M(C[U],U,C)}}return q.initialize=function(U){C=U,O()},q.strength=function(U){return arguments.length?(M=typeof U=="function"?U:o(+U),O(),q):M},q.radius=function(U){return arguments.length?(E=typeof U=="function"?U:o(+U),O(),q):E},q.x=function(U){return arguments.length?(S=+U,q):S},q.y=function(U){return arguments.length?(g=+U,q):g},q}function k(E){var S=o(.1),g,C,M;typeof E!="function"&&(E=o(E==null?0:+E));function P(q){for(var O=0,U=g.length,B;O<U;++O)B=g[O],B.vx+=(M[O]-B.x)*C[O]*q}function D(){if(g){var q,O=g.length;for(C=new Array(O),M=new Array(O),q=0;q<O;++q)C[q]=isNaN(M[q]=+E(g[q],q,g))?0:+S(g[q],q,g)}}return P.initialize=function(q){g=q,D()},P.strength=function(q){return arguments.length?(S=typeof q=="function"?q:o(+q),D(),P):S},P.x=function(q){return arguments.length?(E=typeof q=="function"?q:o(+q),D(),P):E},P}function _(E){var S=o(.1),g,C,M;typeof E!="function"&&(E=o(E==null?0:+E));function P(q){for(var O=0,U=g.length,B;O<U;++O)B=g[O],B.vy+=(M[O]-B.y)*C[O]*q}function D(){if(g){var q,O=g.length;for(C=new Array(O),M=new Array(O),q=0;q<O;++q)C[q]=isNaN(M[q]=+E(g[q],q,g))?0:+S(g[q],q,g)}}return P.initialize=function(q){g=q,D()},P.strength=function(q){return arguments.length?(S=typeof q=="function"?q:o(+q),D(),P):S},P.y=function(q){return arguments.length?(E=typeof q=="function"?q:o(+q),D(),P):E},P}e.forceCenter=a,e.forceCollide=f,e.forceLink=v,e.forceManyBody=A,e.forceRadial=T,e.forceSimulation=w,e.forceX=k,e.forceY=_,Object.defineProperty(e,"__esModule",{value:!0})})});var GUe=ie((dF,HUe)=>{(function(e,t){typeof dF=="object"&&typeof HUe!="undefined"?t(dF):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.d3=e.d3||{}))})(dF,function(e){"use strict";var t=Math.PI,r=2*t,i=1e-6,n=r-i;function a(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function o(){return new a}a.prototype=o.prototype={constructor:a,moveTo:function(s,l){this._+="M"+(this._x0=this._x1=+s)+","+(this._y0=this._y1=+l)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(s,l){this._+="L"+(this._x1=+s)+","+(this._y1=+l)},quadraticCurveTo:function(s,l,u,f){this._+="Q"+ +s+","+ +l+","+(this._x1=+u)+","+(this._y1=+f)},bezierCurveTo:function(s,l,u,f,c,h){this._+="C"+ +s+","+ +l+","+ +u+","+ +f+","+(this._x1=+c)+","+(this._y1=+h)},arcTo:function(s,l,u,f,c){s=+s,l=+l,u=+u,f=+f,c=+c;var h=this._x1,v=this._y1,d=u-s,x=f-l,b=h-s,p=v-l,w=b*b+p*p;if(c<0)throw new Error("negative radius: "+c);if(this._x1===null)this._+="M"+(this._x1=s)+","+(this._y1=l);else if(w>i)if(!(Math.abs(p*d-x*b)>i)||!c)this._+="L"+(this._x1=s)+","+(this._y1=l);else{var A=u-h,T=f-v,k=d*d+x*x,_=A*A+T*T,E=Math.sqrt(k),S=Math.sqrt(w),g=c*Math.tan((t-Math.acos((k+w-_)/(2*E*S)))/2),C=g/S,M=g/E;Math.abs(C-1)>i&&(this._+="L"+(s+C*b)+","+(l+C*p)),this._+="A"+c+","+c+",0,0,"+ +(p*A>b*T)+","+(this._x1=s+M*d)+","+(this._y1=l+M*x)}},arc:function(s,l,u,f,c,h){s=+s,l=+l,u=+u,h=!!h;var v=u*Math.cos(f),d=u*Math.sin(f),x=s+v,b=l+d,p=1^h,w=h?f-c:c-f;if(u<0)throw new Error("negative radius: "+u);this._x1===null?this._+="M"+x+","+b:(Math.abs(this._x1-x)>i||Math.abs(this._y1-b)>i)&&(this._+="L"+x+","+b),u&&(w<0&&(w=w%r+r),w>n?this._+="A"+u+","+u+",0,1,"+p+","+(s-v)+","+(l-d)+"A"+u+","+u+",0,1,"+p+","+(this._x1=x)+","+(this._y1=b):w>i&&(this._+="A"+u+","+u+",0,"+ +(w>=t)+","+p+","+(this._x1=s+u*Math.cos(c))+","+(this._y1=l+u*Math.sin(c))))},rect:function(s,l,u,f){this._+="M"+(this._x0=this._x1=+s)+","+(this._y0=this._y1=+l)+"h"+ +u+"v"+ +f+"h"+-u+"Z"},toString:function(){return this._}},e.path=o,Object.defineProperty(e,"__esModule",{value:!0})})});var OZ=ie((pF,YUe)=>{(function(e,t){typeof pF=="object"&&typeof YUe!="undefined"?t(pF,GUe()):typeof define=="function"&&define.amd?define(["exports","d3-path"],t):(e=e||self,t(e.d3=e.d3||{},e.d3))})(pF,function(e,t){"use strict";function r(je){return function(){return je}}var i=Math.abs,n=Math.atan2,a=Math.cos,o=Math.max,s=Math.min,l=Math.sin,u=Math.sqrt,f=1e-12,c=Math.PI,h=c/2,v=2*c;function d(je){return je>1?0:je<-1?c:Math.acos(je)}function x(je){return je>=1?h:je<=-1?-h:Math.asin(je)}function b(je){return je.innerRadius}function p(je){return je.outerRadius}function w(je){return je.startAngle}function A(je){return je.endAngle}function T(je){return je&&je.padAngle}function k(je,Bt,ur,br,Jr,ln,yn,Cr){var vn=ur-je,gi=br-Bt,Wn=yn-Jr,zi=Cr-ln,fa=zi*vn-Wn*gi;if(!(fa*fa<f))return fa=(Wn*(Bt-ln)-zi*(je-Jr))/fa,[je+fa*vn,Bt+fa*gi]}function _(je,Bt,ur,br,Jr,ln,yn){var Cr=je-ur,vn=Bt-br,gi=(yn?ln:-ln)/u(Cr*Cr+vn*vn),Wn=gi*vn,zi=-gi*Cr,fa=je+Wn,to=Bt+zi,ma=ur+Wn,uo=br+zi,Ka=(fa+ma)/2,jo=(to+uo)/2,Ho=ma-fa,xs=uo-to,ss=Ho*Ho+xs*xs,al=Jr-ln,so=fa*uo-ma*to,vs=(xs<0?-1:1)*u(o(0,al*al*ss-so*so)),Co=(so*xs-Ho*vs)/ss,ds=(-so*Ho-xs*vs)/ss,$o=(so*xs+Ho*vs)/ss,es=(-so*Ho+xs*vs)/ss,Oa=Co-Ka,vo=ds-jo,Al=$o-Ka,ru=es-jo;return Oa*Oa+vo*vo>Al*Al+ru*ru&&(Co=$o,ds=es),{cx:Co,cy:ds,x01:-Wn,y01:-zi,x11:Co*(Jr/al-1),y11:ds*(Jr/al-1)}}function E(){var je=b,Bt=p,ur=r(0),br=null,Jr=w,ln=A,yn=T,Cr=null;function vn(){var gi,Wn,zi=+je.apply(this,arguments),fa=+Bt.apply(this,arguments),to=Jr.apply(this,arguments)-h,ma=ln.apply(this,arguments)-h,uo=i(ma-to),Ka=ma>to;if(Cr||(Cr=gi=t.path()),fa<zi&&(Wn=fa,fa=zi,zi=Wn),!(fa>f))Cr.moveTo(0,0);else if(uo>v-f)Cr.moveTo(fa*a(to),fa*l(to)),Cr.arc(0,0,fa,to,ma,!Ka),zi>f&&(Cr.moveTo(zi*a(ma),zi*l(ma)),Cr.arc(0,0,zi,ma,to,Ka));else{var jo=to,Ho=ma,xs=to,ss=ma,al=uo,so=uo,vs=yn.apply(this,arguments)/2,Co=vs>f&&(br?+br.apply(this,arguments):u(zi*zi+fa*fa)),ds=s(i(fa-zi)/2,+ur.apply(this,arguments)),$o=ds,es=ds,Oa,vo;if(Co>f){var Al=x(Co/zi*l(vs)),ru=x(Co/fa*l(vs));(al-=Al*2)>f?(Al*=Ka?1:-1,xs+=Al,ss-=Al):(al=0,xs=ss=(to+ma)/2),(so-=ru*2)>f?(ru*=Ka?1:-1,jo+=ru,Ho-=ru):(so=0,jo=Ho=(to+ma)/2)}var Vu=fa*a(jo),ls=fa*l(jo),dn=zi*a(ss),wi=zi*l(ss);if(ds>f){var sc=fa*a(Ho),Pl=fa*l(Ho),us=zi*a(xs),dl=zi*l(xs),ts;if(uo<c&&(ts=k(Vu,ls,us,dl,sc,Pl,dn,wi))){var Rl=Vu-ts[0],wu=ls-ts[1],oi=sc-ts[0],Aa=Pl-ts[1],Ca=1/l(d((Rl*oi+wu*Aa)/(u(Rl*Rl+wu*wu)*u(oi*oi+Aa*Aa)))/2),Fs=u(ts[0]*ts[0]+ts[1]*ts[1]);$o=s(ds,(zi-Fs)/(Ca-1)),es=s(ds,(fa-Fs)/(Ca+1))}}so>f?es>f?(Oa=_(us,dl,Vu,ls,fa,es,Ka),vo=_(sc,Pl,dn,wi,fa,es,Ka),Cr.moveTo(Oa.cx+Oa.x01,Oa.cy+Oa.y01),es<ds?Cr.arc(Oa.cx,Oa.cy,es,n(Oa.y01,Oa.x01),n(vo.y01,vo.x01),!Ka):(Cr.arc(Oa.cx,Oa.cy,es,n(Oa.y01,Oa.x01),n(Oa.y11,Oa.x11),!Ka),Cr.arc(0,0,fa,n(Oa.cy+Oa.y11,Oa.cx+Oa.x11),n(vo.cy+vo.y11,vo.cx+vo.x11),!Ka),Cr.arc(vo.cx,vo.cy,es,n(vo.y11,vo.x11),n(vo.y01,vo.x01),!Ka))):(Cr.moveTo(Vu,ls),Cr.arc(0,0,fa,jo,Ho,!Ka)):Cr.moveTo(Vu,ls),!(zi>f)||!(al>f)?Cr.lineTo(dn,wi):$o>f?(Oa=_(dn,wi,sc,Pl,zi,-$o,Ka),vo=_(Vu,ls,us,dl,zi,-$o,Ka),Cr.lineTo(Oa.cx+Oa.x01,Oa.cy+Oa.y01),$o<ds?Cr.arc(Oa.cx,Oa.cy,$o,n(Oa.y01,Oa.x01),n(vo.y01,vo.x01),!Ka):(Cr.arc(Oa.cx,Oa.cy,$o,n(Oa.y01,Oa.x01),n(Oa.y11,Oa.x11),!Ka),Cr.arc(0,0,zi,n(Oa.cy+Oa.y11,Oa.cx+Oa.x11),n(vo.cy+vo.y11,vo.cx+vo.x11),Ka),Cr.arc(vo.cx,vo.cy,$o,n(vo.y11,vo.x11),n(vo.y01,vo.x01),!Ka))):Cr.arc(0,0,zi,ss,xs,Ka)}if(Cr.closePath(),gi)return Cr=null,gi+""||null}return vn.centroid=function(){var gi=(+je.apply(this,arguments)+ +Bt.apply(this,arguments))/2,Wn=(+Jr.apply(this,arguments)+ +ln.apply(this,arguments))/2-c/2;return[a(Wn)*gi,l(Wn)*gi]},vn.innerRadius=function(gi){return arguments.length?(je=typeof gi=="function"?gi:r(+gi),vn):je},vn.outerRadius=function(gi){return arguments.length?(Bt=typeof gi=="function"?gi:r(+gi),vn):Bt},vn.cornerRadius=function(gi){return arguments.length?(ur=typeof gi=="function"?gi:r(+gi),vn):ur},vn.padRadius=function(gi){return arguments.length?(br=gi==null?null:typeof gi=="function"?gi:r(+gi),vn):br},vn.startAngle=function(gi){return arguments.length?(Jr=typeof gi=="function"?gi:r(+gi),vn):Jr},vn.endAngle=function(gi){return arguments.length?(ln=typeof gi=="function"?gi:r(+gi),vn):ln},vn.padAngle=function(gi){return arguments.length?(yn=typeof gi=="function"?gi:r(+gi),vn):yn},vn.context=function(gi){return arguments.length?(Cr=gi==null?null:gi,vn):Cr},vn}function S(je){this._context=je}S.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(je,Bt){switch(je=+je,Bt=+Bt,this._point){case 0:this._point=1,this._line?this._context.lineTo(je,Bt):this._context.moveTo(je,Bt);break;case 1:this._point=2;default:this._context.lineTo(je,Bt);break}}};function g(je){return new S(je)}function C(je){return je[0]}function M(je){return je[1]}function P(){var je=C,Bt=M,ur=r(!0),br=null,Jr=g,ln=null;function yn(Cr){var vn,gi=Cr.length,Wn,zi=!1,fa;for(br==null&&(ln=Jr(fa=t.path())),vn=0;vn<=gi;++vn)!(vn<gi&&ur(Wn=Cr[vn],vn,Cr))===zi&&((zi=!zi)?ln.lineStart():ln.lineEnd()),zi&&ln.point(+je(Wn,vn,Cr),+Bt(Wn,vn,Cr));if(fa)return ln=null,fa+""||null}return yn.x=function(Cr){return arguments.length?(je=typeof Cr=="function"?Cr:r(+Cr),yn):je},yn.y=function(Cr){return arguments.length?(Bt=typeof Cr=="function"?Cr:r(+Cr),yn):Bt},yn.defined=function(Cr){return arguments.length?(ur=typeof Cr=="function"?Cr:r(!!Cr),yn):ur},yn.curve=function(Cr){return arguments.length?(Jr=Cr,br!=null&&(ln=Jr(br)),yn):Jr},yn.context=function(Cr){return arguments.length?(Cr==null?br=ln=null:ln=Jr(br=Cr),yn):br},yn}function D(){var je=C,Bt=null,ur=r(0),br=M,Jr=r(!0),ln=null,yn=g,Cr=null;function vn(Wn){var zi,fa,to,ma=Wn.length,uo,Ka=!1,jo,Ho=new Array(ma),xs=new Array(ma);for(ln==null&&(Cr=yn(jo=t.path())),zi=0;zi<=ma;++zi){if(!(zi<ma&&Jr(uo=Wn[zi],zi,Wn))===Ka)if(Ka=!Ka)fa=zi,Cr.areaStart(),Cr.lineStart();else{for(Cr.lineEnd(),Cr.lineStart(),to=zi-1;to>=fa;--to)Cr.point(Ho[to],xs[to]);Cr.lineEnd(),Cr.areaEnd()}Ka&&(Ho[zi]=+je(uo,zi,Wn),xs[zi]=+ur(uo,zi,Wn),Cr.point(Bt?+Bt(uo,zi,Wn):Ho[zi],br?+br(uo,zi,Wn):xs[zi]))}if(jo)return Cr=null,jo+""||null}function gi(){return P().defined(Jr).curve(yn).context(ln)}return vn.x=function(Wn){return arguments.length?(je=typeof Wn=="function"?Wn:r(+Wn),Bt=null,vn):je},vn.x0=function(Wn){return arguments.length?(je=typeof Wn=="function"?Wn:r(+Wn),vn):je},vn.x1=function(Wn){return arguments.length?(Bt=Wn==null?null:typeof Wn=="function"?Wn:r(+Wn),vn):Bt},vn.y=function(Wn){return arguments.length?(ur=typeof Wn=="function"?Wn:r(+Wn),br=null,vn):ur},vn.y0=function(Wn){return arguments.length?(ur=typeof Wn=="function"?Wn:r(+Wn),vn):ur},vn.y1=function(Wn){return arguments.length?(br=Wn==null?null:typeof Wn=="function"?Wn:r(+Wn),vn):br},vn.lineX0=vn.lineY0=function(){return gi().x(je).y(ur)},vn.lineY1=function(){return gi().x(je).y(br)},vn.lineX1=function(){return gi().x(Bt).y(ur)},vn.defined=function(Wn){return arguments.length?(Jr=typeof Wn=="function"?Wn:r(!!Wn),vn):Jr},vn.curve=function(Wn){return arguments.length?(yn=Wn,ln!=null&&(Cr=yn(ln)),vn):yn},vn.context=function(Wn){return arguments.length?(Wn==null?ln=Cr=null:Cr=yn(ln=Wn),vn):ln},vn}function q(je,Bt){return Bt<je?-1:Bt>je?1:Bt>=je?0:NaN}function O(je){return je}function U(){var je=O,Bt=q,ur=null,br=r(0),Jr=r(v),ln=r(0);function yn(Cr){var vn,gi=Cr.length,Wn,zi,fa=0,to=new Array(gi),ma=new Array(gi),uo=+br.apply(this,arguments),Ka=Math.min(v,Math.max(-v,Jr.apply(this,arguments)-uo)),jo,Ho=Math.min(Math.abs(Ka)/gi,ln.apply(this,arguments)),xs=Ho*(Ka<0?-1:1),ss;for(vn=0;vn<gi;++vn)(ss=ma[to[vn]=vn]=+je(Cr[vn],vn,Cr))>0&&(fa+=ss);for(Bt!=null?to.sort(function(al,so){return Bt(ma[al],ma[so])}):ur!=null&&to.sort(function(al,so){return ur(Cr[al],Cr[so])}),vn=0,zi=fa?(Ka-gi*xs)/fa:0;vn<gi;++vn,uo=jo)Wn=to[vn],ss=ma[Wn],jo=uo+(ss>0?ss*zi:0)+xs,ma[Wn]={data:Cr[Wn],index:vn,value:ss,startAngle:uo,endAngle:jo,padAngle:Ho};return ma}return yn.value=function(Cr){return arguments.length?(je=typeof Cr=="function"?Cr:r(+Cr),yn):je},yn.sortValues=function(Cr){return arguments.length?(Bt=Cr,ur=null,yn):Bt},yn.sort=function(Cr){return arguments.length?(ur=Cr,Bt=null,yn):ur},yn.startAngle=function(Cr){return arguments.length?(br=typeof Cr=="function"?Cr:r(+Cr),yn):br},yn.endAngle=function(Cr){return arguments.length?(Jr=typeof Cr=="function"?Cr:r(+Cr),yn):Jr},yn.padAngle=function(Cr){return arguments.length?(ln=typeof Cr=="function"?Cr:r(+Cr),yn):ln},yn}var B=N(g);function F(je){this._curve=je}F.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(je,Bt){this._curve.point(Bt*Math.sin(je),Bt*-Math.cos(je))}};function N(je){function Bt(ur){return new F(je(ur))}return Bt._curve=je,Bt}function X(je){var Bt=je.curve;return je.angle=je.x,delete je.x,je.radius=je.y,delete je.y,je.curve=function(ur){return arguments.length?Bt(N(ur)):Bt()._curve},je}function K(){return X(P().curve(B))}function ne(){var je=D().curve(B),Bt=je.curve,ur=je.lineX0,br=je.lineX1,Jr=je.lineY0,ln=je.lineY1;return je.angle=je.x,delete je.x,je.startAngle=je.x0,delete je.x0,je.endAngle=je.x1,delete je.x1,je.radius=je.y,delete je.y,je.innerRadius=je.y0,delete je.y0,je.outerRadius=je.y1,delete je.y1,je.lineStartAngle=function(){return X(ur())},delete je.lineX0,je.lineEndAngle=function(){return X(br())},delete je.lineX1,je.lineInnerRadius=function(){return X(Jr())},delete je.lineY0,je.lineOuterRadius=function(){return X(ln())},delete je.lineY1,je.curve=function(yn){return arguments.length?Bt(N(yn)):Bt()._curve},je}function fe(je,Bt){return[(Bt=+Bt)*Math.cos(je-=Math.PI/2),Bt*Math.sin(je)]}var ue=Array.prototype.slice;function ee(je){return je.source}function Z(je){return je.target}function oe(je){var Bt=ee,ur=Z,br=C,Jr=M,ln=null;function yn(){var Cr,vn=ue.call(arguments),gi=Bt.apply(this,vn),Wn=ur.apply(this,vn);if(ln||(ln=Cr=t.path()),je(ln,+br.apply(this,(vn[0]=gi,vn)),+Jr.apply(this,vn),+br.apply(this,(vn[0]=Wn,vn)),+Jr.apply(this,vn)),Cr)return ln=null,Cr+""||null}return yn.source=function(Cr){return arguments.length?(Bt=Cr,yn):Bt},yn.target=function(Cr){return arguments.length?(ur=Cr,yn):ur},yn.x=function(Cr){return arguments.length?(br=typeof Cr=="function"?Cr:r(+Cr),yn):br},yn.y=function(Cr){return arguments.length?(Jr=typeof Cr=="function"?Cr:r(+Cr),yn):Jr},yn.context=function(Cr){return arguments.length?(ln=Cr==null?null:Cr,yn):ln},yn}function ce(je,Bt,ur,br,Jr){je.moveTo(Bt,ur),je.bezierCurveTo(Bt=(Bt+br)/2,ur,Bt,Jr,br,Jr)}function le(je,Bt,ur,br,Jr){je.moveTo(Bt,ur),je.bezierCurveTo(Bt,ur=(ur+Jr)/2,br,ur,br,Jr)}function me(je,Bt,ur,br,Jr){var ln=fe(Bt,ur),yn=fe(Bt,ur=(ur+Jr)/2),Cr=fe(br,ur),vn=fe(br,Jr);je.moveTo(ln[0],ln[1]),je.bezierCurveTo(yn[0],yn[1],Cr[0],Cr[1],vn[0],vn[1])}function he(){return oe(ce)}function te(){return oe(le)}function ge(){var je=oe(me);return je.angle=je.x,delete je.x,je.radius=je.y,delete je.y,je}var ae={draw:function(je,Bt){var ur=Math.sqrt(Bt/c);je.moveTo(ur,0),je.arc(0,0,ur,0,v)}},_e={draw:function(je,Bt){var ur=Math.sqrt(Bt/5)/2;je.moveTo(-3*ur,-ur),je.lineTo(-ur,-ur),je.lineTo(-ur,-3*ur),je.lineTo(ur,-3*ur),je.lineTo(ur,-ur),je.lineTo(3*ur,-ur),je.lineTo(3*ur,ur),je.lineTo(ur,ur),je.lineTo(ur,3*ur),je.lineTo(-ur,3*ur),je.lineTo(-ur,ur),je.lineTo(-3*ur,ur),je.closePath()}},Ce=Math.sqrt(1/3),qe=Ce*2,rt={draw:function(je,Bt){var ur=Math.sqrt(Bt/qe),br=ur*Ce;je.moveTo(0,-ur),je.lineTo(br,0),je.lineTo(0,ur),je.lineTo(-br,0),je.closePath()}},Re=.8908130915292852,Ie=Math.sin(c/10)/Math.sin(7*c/10),ot=Math.sin(v/10)*Ie,lt=-Math.cos(v/10)*Ie,ht={draw:function(je,Bt){var ur=Math.sqrt(Bt*Re),br=ot*ur,Jr=lt*ur;je.moveTo(0,-ur),je.lineTo(br,Jr);for(var ln=1;ln<5;++ln){var yn=v*ln/5,Cr=Math.cos(yn),vn=Math.sin(yn);je.lineTo(vn*ur,-Cr*ur),je.lineTo(Cr*br-vn*Jr,vn*br+Cr*Jr)}je.closePath()}},xt={draw:function(je,Bt){var ur=Math.sqrt(Bt),br=-ur/2;je.rect(br,br,ur,ur)}},Vt=Math.sqrt(3),Ht={draw:function(je,Bt){var ur=-Math.sqrt(Bt/(Vt*3));je.moveTo(0,ur*2),je.lineTo(-Vt*ur,-ur),je.lineTo(Vt*ur,-ur),je.closePath()}},Me=-.5,Ke=Math.sqrt(3)/2,We=1/Math.sqrt(12),et=(We/2+1)*3,vt={draw:function(je,Bt){var ur=Math.sqrt(Bt/et),br=ur/2,Jr=ur*We,ln=br,yn=ur*We+ur,Cr=-ln,vn=yn;je.moveTo(br,Jr),je.lineTo(ln,yn),je.lineTo(Cr,vn),je.lineTo(Me*br-Ke*Jr,Ke*br+Me*Jr),je.lineTo(Me*ln-Ke*yn,Ke*ln+Me*yn),je.lineTo(Me*Cr-Ke*vn,Ke*Cr+Me*vn),je.lineTo(Me*br+Ke*Jr,Me*Jr-Ke*br),je.lineTo(Me*ln+Ke*yn,Me*yn-Ke*ln),je.lineTo(Me*Cr+Ke*vn,Me*vn-Ke*Cr),je.closePath()}},at=[ae,_e,rt,xt,ht,Ht,vt];function Xe(){var je=r(ae),Bt=r(64),ur=null;function br(){var Jr;if(ur||(ur=Jr=t.path()),je.apply(this,arguments).draw(ur,+Bt.apply(this,arguments)),Jr)return ur=null,Jr+""||null}return br.type=function(Jr){return arguments.length?(je=typeof Jr=="function"?Jr:r(Jr),br):je},br.size=function(Jr){return arguments.length?(Bt=typeof Jr=="function"?Jr:r(+Jr),br):Bt},br.context=function(Jr){return arguments.length?(ur=Jr==null?null:Jr,br):ur},br}function dt(){}function _t(je,Bt,ur){je._context.bezierCurveTo((2*je._x0+je._x1)/3,(2*je._y0+je._y1)/3,(je._x0+2*je._x1)/3,(je._y0+2*je._y1)/3,(je._x0+4*je._x1+Bt)/6,(je._y0+4*je._y1+ur)/6)}function $t(je){this._context=je}$t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:_t(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(je,Bt){switch(je=+je,Bt=+Bt,this._point){case 0:this._point=1,this._line?this._context.lineTo(je,Bt):this._context.moveTo(je,Bt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:_t(this,je,Bt);break}this._x0=this._x1,this._x1=je,this._y0=this._y1,this._y1=Bt}};function Ut(je){return new $t(je)}function fr(je){this._context=je}fr.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(je,Bt){switch(je=+je,Bt=+Bt,this._point){case 0:this._point=1,this._x2=je,this._y2=Bt;break;case 1:this._point=2,this._x3=je,this._y3=Bt;break;case 2:this._point=3,this._x4=je,this._y4=Bt,this._context.moveTo((this._x0+4*this._x1+je)/6,(this._y0+4*this._y1+Bt)/6);break;default:_t(this,je,Bt);break}this._x0=this._x1,this._x1=je,this._y0=this._y1,this._y1=Bt}};function ar(je){return new fr(je)}function cr(je){this._context=je}cr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(je,Bt){switch(je=+je,Bt=+Bt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var ur=(this._x0+4*this._x1+je)/6,br=(this._y0+4*this._y1+Bt)/6;this._line?this._context.lineTo(ur,br):this._context.moveTo(ur,br);break;case 3:this._point=4;default:_t(this,je,Bt);break}this._x0=this._x1,this._x1=je,this._y0=this._y1,this._y1=Bt}};function It(je){return new cr(je)}function gt(je,Bt){this._basis=new $t(je),this._beta=Bt}gt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var je=this._x,Bt=this._y,ur=je.length-1;if(ur>0)for(var br=je[0],Jr=Bt[0],ln=je[ur]-br,yn=Bt[ur]-Jr,Cr=-1,vn;++Cr<=ur;)vn=Cr/ur,this._basis.point(this._beta*je[Cr]+(1-this._beta)*(br+vn*ln),this._beta*Bt[Cr]+(1-this._beta)*(Jr+vn*yn));this._x=this._y=null,this._basis.lineEnd()},point:function(je,Bt){this._x.push(+je),this._y.push(+Bt)}};var kt=function je(Bt){function ur(br){return Bt===1?new $t(br):new gt(br,Bt)}return ur.beta=function(br){return je(+br)},ur}(.85);function Je(je,Bt,ur){je._context.bezierCurveTo(je._x1+je._k*(je._x2-je._x0),je._y1+je._k*(je._y2-je._y0),je._x2+je._k*(je._x1-Bt),je._y2+je._k*(je._y1-ur),je._x2,je._y2)}function Ze(je,Bt){this._context=je,this._k=(1-Bt)/6}Ze.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Je(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(je,Bt){switch(je=+je,Bt=+Bt,this._point){case 0:this._point=1,this._line?this._context.lineTo(je,Bt):this._context.moveTo(je,Bt);break;case 1:this._point=2,this._x1=je,this._y1=Bt;break;case 2:this._point=3;default:Je(this,je,Bt);break}this._x0=this._x1,this._x1=this._x2,this._x2=je,this._y0=this._y1,this._y1=this._y2,this._y2=Bt}};var At=function je(Bt){function ur(br){return new Ze(br,Bt)}return ur.tension=function(br){return je(+br)},ur}(0);function Se(je,Bt){this._context=je,this._k=(1-Bt)/6}Se.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(je,Bt){switch(je=+je,Bt=+Bt,this._point){case 0:this._point=1,this._x3=je,this._y3=Bt;break;case 1:this._point=2,this._context.moveTo(this._x4=je,this._y4=Bt);break;case 2:this._point=3,this._x5=je,this._y5=Bt;break;default:Je(this,je,Bt);break}this._x0=this._x1,this._x1=this._x2,this._x2=je,this._y0=this._y1,this._y1=this._y2,this._y2=Bt}};var pe=function je(Bt){function ur(br){return new Se(br,Bt)}return ur.tension=function(br){return je(+br)},ur}(0);function Te(je,Bt){this._context=je,this._k=(1-Bt)/6}Te.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(je,Bt){switch(je=+je,Bt=+Bt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Je(this,je,Bt);break}this._x0=this._x1,this._x1=this._x2,this._x2=je,this._y0=this._y1,this._y1=this._y2,this._y2=Bt}};var it=function je(Bt){function ur(br){return new Te(br,Bt)}return ur.tension=function(br){return je(+br)},ur}(0);function Dt(je,Bt,ur){var br=je._x1,Jr=je._y1,ln=je._x2,yn=je._y2;if(je._l01_a>f){var Cr=2*je._l01_2a+3*je._l01_a*je._l12_a+je._l12_2a,vn=3*je._l01_a*(je._l01_a+je._l12_a);br=(br*Cr-je._x0*je._l12_2a+je._x2*je._l01_2a)/vn,Jr=(Jr*Cr-je._y0*je._l12_2a+je._y2*je._l01_2a)/vn}if(je._l23_a>f){var gi=2*je._l23_2a+3*je._l23_a*je._l12_a+je._l12_2a,Wn=3*je._l23_a*(je._l23_a+je._l12_a);ln=(ln*gi+je._x1*je._l23_2a-Bt*je._l12_2a)/Wn,yn=(yn*gi+je._y1*je._l23_2a-ur*je._l12_2a)/Wn}je._context.bezierCurveTo(br,Jr,ln,yn,je._x2,je._y2)}function Wt(je,Bt){this._context=je,this._alpha=Bt}Wt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(je,Bt){if(je=+je,Bt=+Bt,this._point){var ur=this._x2-je,br=this._y2-Bt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(ur*ur+br*br,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(je,Bt):this._context.moveTo(je,Bt);break;case 1:this._point=2;break;case 2:this._point=3;default:Dt(this,je,Bt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=je,this._y0=this._y1,this._y1=this._y2,this._y2=Bt}};var er=function je(Bt){function ur(br){return Bt?new Wt(br,Bt):new Ze(br,0)}return ur.alpha=function(br){return je(+br)},ur}(.5);function qr(je,Bt){this._context=je,this._alpha=Bt}qr.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(je,Bt){if(je=+je,Bt=+Bt,this._point){var ur=this._x2-je,br=this._y2-Bt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(ur*ur+br*br,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=je,this._y3=Bt;break;case 1:this._point=2,this._context.moveTo(this._x4=je,this._y4=Bt);break;case 2:this._point=3,this._x5=je,this._y5=Bt;break;default:Dt(this,je,Bt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=je,this._y0=this._y1,this._y1=this._y2,this._y2=Bt}};var Vr=function je(Bt){function ur(br){return Bt?new qr(br,Bt):new Se(br,0)}return ur.alpha=function(br){return je(+br)},ur}(.5);function mr(je,Bt){this._context=je,this._alpha=Bt}mr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(je,Bt){if(je=+je,Bt=+Bt,this._point){var ur=this._x2-je,br=this._y2-Bt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(ur*ur+br*br,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Dt(this,je,Bt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=je,this._y0=this._y1,this._y1=this._y2,this._y2=Bt}};var Fr=function je(Bt){function ur(br){return Bt?new mr(br,Bt):new Te(br,0)}return ur.alpha=function(br){return je(+br)},ur}(.5);function nn(je){this._context=je}nn.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(je,Bt){je=+je,Bt=+Bt,this._point?this._context.lineTo(je,Bt):(this._point=1,this._context.moveTo(je,Bt))}};function jn(je){return new nn(je)}function xn(je){return je<0?-1:1}function pn(je,Bt,ur){var br=je._x1-je._x0,Jr=Bt-je._x1,ln=(je._y1-je._y0)/(br||Jr<0&&-0),yn=(ur-je._y1)/(Jr||br<0&&-0),Cr=(ln*Jr+yn*br)/(br+Jr);return(xn(ln)+xn(yn))*Math.min(Math.abs(ln),Math.abs(yn),.5*Math.abs(Cr))||0}function ki(je,Bt){var ur=je._x1-je._x0;return ur?(3*(je._y1-je._y0)/ur-Bt)/2:Bt}function qn(je,Bt,ur){var br=je._x0,Jr=je._y0,ln=je._x1,yn=je._y1,Cr=(ln-br)/3;je._context.bezierCurveTo(br+Cr,Jr+Cr*Bt,ln-Cr,yn-Cr*ur,ln,yn)}function bi(je){this._context=je}bi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:qn(this,this._t0,ki(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(je,Bt){var ur=NaN;if(je=+je,Bt=+Bt,!(je===this._x1&&Bt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(je,Bt):this._context.moveTo(je,Bt);break;case 1:this._point=2;break;case 2:this._point=3,qn(this,ki(this,ur=pn(this,je,Bt)),ur);break;default:qn(this,this._t0,ur=pn(this,je,Bt));break}this._x0=this._x1,this._x1=je,this._y0=this._y1,this._y1=Bt,this._t0=ur}}};function Si(je){this._context=new nt(je)}(Si.prototype=Object.create(bi.prototype)).point=function(je,Bt){bi.prototype.point.call(this,Bt,je)};function nt(je){this._context=je}nt.prototype={moveTo:function(je,Bt){this._context.moveTo(Bt,je)},closePath:function(){this._context.closePath()},lineTo:function(je,Bt){this._context.lineTo(Bt,je)},bezierCurveTo:function(je,Bt,ur,br,Jr,ln){this._context.bezierCurveTo(Bt,je,br,ur,ln,Jr)}};function ze(je){return new bi(je)}function ut(je){return new Si(je)}function mt(je){this._context=je}mt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var je=this._x,Bt=this._y,ur=je.length;if(ur)if(this._line?this._context.lineTo(je[0],Bt[0]):this._context.moveTo(je[0],Bt[0]),ur===2)this._context.lineTo(je[1],Bt[1]);else for(var br=Ot(je),Jr=Ot(Bt),ln=0,yn=1;yn<ur;++ln,++yn)this._context.bezierCurveTo(br[0][ln],Jr[0][ln],br[1][ln],Jr[1][ln],je[yn],Bt[yn]);(this._line||this._line!==0&&ur===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(je,Bt){this._x.push(+je),this._y.push(+Bt)}};function Ot(je){var Bt,ur=je.length-1,br,Jr=new Array(ur),ln=new Array(ur),yn=new Array(ur);for(Jr[0]=0,ln[0]=2,yn[0]=je[0]+2*je[1],Bt=1;Bt<ur-1;++Bt)Jr[Bt]=1,ln[Bt]=4,yn[Bt]=4*je[Bt]+2*je[Bt+1];for(Jr[ur-1]=2,ln[ur-1]=7,yn[ur-1]=8*je[ur-1]+je[ur],Bt=1;Bt<ur;++Bt)br=Jr[Bt]/ln[Bt-1],ln[Bt]-=br,yn[Bt]-=br*yn[Bt-1];for(Jr[ur-1]=yn[ur-1]/ln[ur-1],Bt=ur-2;Bt>=0;--Bt)Jr[Bt]=(yn[Bt]-Jr[Bt+1])/ln[Bt];for(ln[ur-1]=(je[ur]+Jr[ur-1])/2,Bt=0;Bt<ur-1;++Bt)ln[Bt]=2*je[Bt+1]-Jr[Bt+1];return[Jr,ln]}function nr(je){return new mt(je)}function yr(je,Bt){this._context=je,this._t=Bt}yr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(je,Bt){switch(je=+je,Bt=+Bt,this._point){case 0:this._point=1,this._line?this._context.lineTo(je,Bt):this._context.moveTo(je,Bt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,Bt),this._context.lineTo(je,Bt);else{var ur=this._x*(1-this._t)+je*this._t;this._context.lineTo(ur,this._y),this._context.lineTo(ur,Bt)}break}}this._x=je,this._y=Bt}};function vr(je){return new yr(je,.5)}function Rr(je){return new yr(je,0)}function Gr(je){return new yr(je,1)}function Yr(je,Bt){if((yn=je.length)>1)for(var ur=1,br,Jr,ln=je[Bt[0]],yn,Cr=ln.length;ur<yn;++ur)for(Jr=ln,ln=je[Bt[ur]],br=0;br<Cr;++br)ln[br][1]+=ln[br][0]=isNaN(Jr[br][1])?Jr[br][0]:Jr[br][1]}function Xr(je){for(var Bt=je.length,ur=new Array(Bt);--Bt>=0;)ur[Bt]=Bt;return ur}function on(je,Bt){return je[Bt]}function wn(){var je=r([]),Bt=Xr,ur=Yr,br=on;function Jr(ln){var yn=je.apply(this,arguments),Cr,vn=ln.length,gi=yn.length,Wn=new Array(gi),zi;for(Cr=0;Cr<gi;++Cr){for(var fa=yn[Cr],to=Wn[Cr]=new Array(vn),ma=0,uo;ma<vn;++ma)to[ma]=uo=[0,+br(ln[ma],fa,ma,ln)],uo.data=ln[ma];to.key=fa}for(Cr=0,zi=Bt(Wn);Cr<gi;++Cr)Wn[zi[Cr]].index=Cr;return ur(Wn,zi),Wn}return Jr.keys=function(ln){return arguments.length?(je=typeof ln=="function"?ln:r(ue.call(ln)),Jr):je},Jr.value=function(ln){return arguments.length?(br=typeof ln=="function"?ln:r(+ln),Jr):br},Jr.order=function(ln){return arguments.length?(Bt=ln==null?Xr:typeof ln=="function"?ln:r(ue.call(ln)),Jr):Bt},Jr.offset=function(ln){return arguments.length?(ur=ln==null?Yr:ln,Jr):ur},Jr}function Vi(je,Bt){if((br=je.length)>0){for(var ur,br,Jr=0,ln=je[0].length,yn;Jr<ln;++Jr){for(yn=ur=0;ur<br;++ur)yn+=je[ur][Jr][1]||0;if(yn)for(ur=0;ur<br;++ur)je[ur][Jr][1]/=yn}Yr(je,Bt)}}function vi(je,Bt){if((vn=je.length)>0)for(var ur,br=0,Jr,ln,yn,Cr,vn,gi=je[Bt[0]].length;br<gi;++br)for(yn=Cr=0,ur=0;ur<vn;++ur)(ln=(Jr=je[Bt[ur]][br])[1]-Jr[0])>0?(Jr[0]=yn,Jr[1]=yn+=ln):ln<0?(Jr[1]=Cr,Jr[0]=Cr+=ln):(Jr[0]=0,Jr[1]=ln)}function Zi(je,Bt){if((Jr=je.length)>0){for(var ur=0,br=je[Bt[0]],Jr,ln=br.length;ur<ln;++ur){for(var yn=0,Cr=0;yn<Jr;++yn)Cr+=je[yn][ur][1]||0;br[ur][1]+=br[ur][0]=-Cr/2}Yr(je,Bt)}}function Xi(je,Bt){if(!(!((yn=je.length)>0)||!((ln=(Jr=je[Bt[0]]).length)>0))){for(var ur=0,br=1,Jr,ln,yn;br<ln;++br){for(var Cr=0,vn=0,gi=0;Cr<yn;++Cr){for(var Wn=je[Bt[Cr]],zi=Wn[br][1]||0,fa=Wn[br-1][1]||0,to=(zi-fa)/2,ma=0;ma<Cr;++ma){var uo=je[Bt[ma]],Ka=uo[br][1]||0,jo=uo[br-1][1]||0;to+=Ka-jo}vn+=zi,gi+=to*zi}Jr[br-1][1]+=Jr[br-1][0]=ur,vn&&(ur-=gi/vn)}Jr[br-1][1]+=Jr[br-1][0]=ur,Yr(je,Bt)}}function ta(je){var Bt=je.map(Ya);return Xr(je).sort(function(ur,br){return Bt[ur]-Bt[br]})}function Ya(je){for(var Bt=-1,ur=0,br=je.length,Jr,ln=-1/0;++Bt<br;)(Jr=+je[Bt][1])>ln&&(ln=Jr,ur=Bt);return ur}function Pi(je){var Bt=je.map(Bn);return Xr(je).sort(function(ur,br){return Bt[ur]-Bt[br]})}function Bn(je){for(var Bt=0,ur=-1,br=je.length,Jr;++ur<br;)(Jr=+je[ur][1])&&(Bt+=Jr);return Bt}function Qi(je){return Pi(je).reverse()}function ya(je){var Bt=je.length,ur,br,Jr=je.map(Bn),ln=ta(je),yn=0,Cr=0,vn=[],gi=[];for(ur=0;ur<Bt;++ur)br=ln[ur],yn<Cr?(yn+=Jr[br],vn.push(br)):(Cr+=Jr[br],gi.push(br));return gi.reverse().concat(vn)}function Nn(je){return Xr(je).reverse()}e.arc=E,e.area=D,e.areaRadial=ne,e.curveBasis=Ut,e.curveBasisClosed=ar,e.curveBasisOpen=It,e.curveBundle=kt,e.curveCardinal=At,e.curveCardinalClosed=pe,e.curveCardinalOpen=it,e.curveCatmullRom=er,e.curveCatmullRomClosed=Vr,e.curveCatmullRomOpen=Fr,e.curveLinear=g,e.curveLinearClosed=jn,e.curveMonotoneX=ze,e.curveMonotoneY=ut,e.curveNatural=nr,e.curveStep=vr,e.curveStepAfter=Gr,e.curveStepBefore=Rr,e.line=P,e.lineRadial=K,e.linkHorizontal=he,e.linkRadial=ge,e.linkVertical=te,e.pie=U,e.pointRadial=fe,e.radialArea=ne,e.radialLine=K,e.stack=wn,e.stackOffsetDiverging=vi,e.stackOffsetExpand=Vi,e.stackOffsetNone=Yr,e.stackOffsetSilhouette=Zi,e.stackOffsetWiggle=Xi,e.stackOrderAppearance=ta,e.stackOrderAscending=Pi,e.stackOrderDescending=Qi,e.stackOrderInsideOut=ya,e.stackOrderNone=Xr,e.stackOrderReverse=Nn,e.symbol=Xe,e.symbolCircle=ae,e.symbolCross=_e,e.symbolDiamond=rt,e.symbolSquare=xt,e.symbolStar=ht,e.symbolTriangle=Ht,e.symbolWye=vt,e.symbols=at,Object.defineProperty(e,"__esModule",{value:!0})})});var XUe=ie((gF,WUe)=>{(function(e,t){typeof gF=="object"&&typeof WUe!="undefined"?t(gF,ZE(),fF(),OZ()):typeof define=="function"&&define.amd?define(["exports","d3-array","d3-collection","d3-shape"],t):t(e.d3=e.d3||{},e.d3,e.d3,e.d3)})(gF,function(e,t,r,i){"use strict";function n(g){return g.target.depth}function a(g){return g.depth}function o(g,C){return C-1-g.height}function s(g,C){return g.sourceLinks.length?g.depth:C-1}function l(g){return g.targetLinks.length?g.depth:g.sourceLinks.length?t.min(g.sourceLinks,n)-1:0}function u(g){return function(){return g}}function f(g,C){return h(g.source,C.source)||g.index-C.index}function c(g,C){return h(g.target,C.target)||g.index-C.index}function h(g,C){return g.y0-C.y0}function v(g){return g.value}function d(g){return(g.y0+g.y1)/2}function x(g){return d(g.source)*g.value}function b(g){return d(g.target)*g.value}function p(g){return g.index}function w(g){return g.nodes}function A(g){return g.links}function T(g,C){var M=g.get(C);if(!M)throw new Error("missing: "+C);return M}var k=function(){var g=0,C=0,M=1,P=1,D=24,q=8,O=p,U=s,B=w,F=A,N=32,X=2/3;function K(){var oe={nodes:B.apply(null,arguments),links:F.apply(null,arguments)};return ne(oe),fe(oe),ue(oe),ee(oe,N),Z(oe),oe}K.update=function(oe){return Z(oe),oe},K.nodeId=function(oe){return arguments.length?(O=typeof oe=="function"?oe:u(oe),K):O},K.nodeAlign=function(oe){return arguments.length?(U=typeof oe=="function"?oe:u(oe),K):U},K.nodeWidth=function(oe){return arguments.length?(D=+oe,K):D},K.nodePadding=function(oe){return arguments.length?(q=+oe,K):q},K.nodes=function(oe){return arguments.length?(B=typeof oe=="function"?oe:u(oe),K):B},K.links=function(oe){return arguments.length?(F=typeof oe=="function"?oe:u(oe),K):F},K.size=function(oe){return arguments.length?(g=C=0,M=+oe[0],P=+oe[1],K):[M-g,P-C]},K.extent=function(oe){return arguments.length?(g=+oe[0][0],M=+oe[1][0],C=+oe[0][1],P=+oe[1][1],K):[[g,C],[M,P]]},K.iterations=function(oe){return arguments.length?(N=+oe,K):N};function ne(oe){oe.nodes.forEach(function(le,me){le.index=me,le.sourceLinks=[],le.targetLinks=[]});var ce=r.map(oe.nodes,O);oe.links.forEach(function(le,me){le.index=me;var he=le.source,te=le.target;typeof he!="object"&&(he=le.source=T(ce,he)),typeof te!="object"&&(te=le.target=T(ce,te)),he.sourceLinks.push(le),te.targetLinks.push(le)})}function fe(oe){oe.nodes.forEach(function(ce){ce.value=Math.max(t.sum(ce.sourceLinks,v),t.sum(ce.targetLinks,v))})}function ue(oe){var ce,le,me;for(ce=oe.nodes,le=[],me=0;ce.length;++me,ce=le,le=[])ce.forEach(function(te){te.depth=me,te.sourceLinks.forEach(function(ge){le.indexOf(ge.target)<0&&le.push(ge.target)})});for(ce=oe.nodes,le=[],me=0;ce.length;++me,ce=le,le=[])ce.forEach(function(te){te.height=me,te.targetLinks.forEach(function(ge){le.indexOf(ge.source)<0&&le.push(ge.source)})});var he=(M-g-D)/(me-1);oe.nodes.forEach(function(te){te.x1=(te.x0=g+Math.max(0,Math.min(me-1,Math.floor(U.call(null,te,me))))*he)+D})}function ee(oe){var ce=r.nest().key(function(_e){return _e.x0}).sortKeys(t.ascending).entries(oe.nodes).map(function(_e){return _e.values});he(),ae();for(var le=1,me=N;me>0;--me)ge(le*=.99),ae(),te(le),ae();function he(){var _e=t.max(ce,function(rt){return rt.length}),Ce=X*(P-C)/(_e-1);q>Ce&&(q=Ce);var qe=t.min(ce,function(rt){return(P-C-(rt.length-1)*q)/t.sum(rt,v)});ce.forEach(function(rt){rt.forEach(function(Re,Ie){Re.y1=(Re.y0=Ie)+Re.value*qe})}),oe.links.forEach(function(rt){rt.width=rt.value*qe})}function te(_e){ce.forEach(function(Ce){Ce.forEach(function(qe){if(qe.targetLinks.length){var rt=(t.sum(qe.targetLinks,x)/t.sum(qe.targetLinks,v)-d(qe))*_e;qe.y0+=rt,qe.y1+=rt}})})}function ge(_e){ce.slice().reverse().forEach(function(Ce){Ce.forEach(function(qe){if(qe.sourceLinks.length){var rt=(t.sum(qe.sourceLinks,b)/t.sum(qe.sourceLinks,v)-d(qe))*_e;qe.y0+=rt,qe.y1+=rt}})})}function ae(){ce.forEach(function(_e){var Ce,qe,rt=C,Re=_e.length,Ie;for(_e.sort(h),Ie=0;Ie<Re;++Ie)Ce=_e[Ie],qe=rt-Ce.y0,qe>0&&(Ce.y0+=qe,Ce.y1+=qe),rt=Ce.y1+q;if(qe=rt-q-P,qe>0)for(rt=Ce.y0-=qe,Ce.y1-=qe,Ie=Re-2;Ie>=0;--Ie)Ce=_e[Ie],qe=Ce.y1+q-rt,qe>0&&(Ce.y0-=qe,Ce.y1-=qe),rt=Ce.y0})}}function Z(oe){oe.nodes.forEach(function(ce){ce.sourceLinks.sort(c),ce.targetLinks.sort(f)}),oe.nodes.forEach(function(ce){var le=ce.y0,me=le;ce.sourceLinks.forEach(function(he){he.y0=le+he.width/2,le+=he.width}),ce.targetLinks.forEach(function(he){he.y1=me+he.width/2,me+=he.width})})}return K};function _(g){return[g.source.x1,g.y0]}function E(g){return[g.target.x0,g.y1]}var S=function(){return i.linkHorizontal().source(_).target(E)};e.sankey=k,e.sankeyCenter=l,e.sankeyLeft=a,e.sankeyRight=o,e.sankeyJustify=s,e.sankeyLinkHorizontal=S,Object.defineProperty(e,"__esModule",{value:!0})})});var jUe=ie((Rmr,ZUe)=>{var gYt=zZ();ZUe.exports=function(t,r){var i=[],n=[],a=[],o={},s=[],l;function u(A){a[A]=!1,o.hasOwnProperty(A)&&Object.keys(o[A]).forEach(function(T){delete o[A][T],a[T]&&u(T)})}function f(A){var T=!1;n.push(A),a[A]=!0;var k,_;for(k=0;k<s[A].length;k++)_=s[A][k],_===l?(c(l,n),T=!0):a[_]||(T=f(_));if(T)u(A);else for(k=0;k<s[A].length;k++){_=s[A][k];var E=o[_];E||(E={},o[_]=E),E[_]=!0}return n.pop(),T}function c(A,T){var k=[].concat(T).concat(A);r?r(f):i.push(k)}function h(A){for(var T=0;T<t.length;T++)T<A&&(t[T]=[]),t[T]=t[T].filter(function(k){return k>=A})}function v(A){h(A);for(var T=t,k=gYt(T),_=k.components.filter(function(D){return D.length>1}),E=1/0,S,g=0;g<_.length;g++)for(var C=0;C<_[g].length;C++)_[g][C]<E&&(E=_[g][C],S=g);var M=_[S];if(!M)return!1;var P=t.map(function(D,q){return M.indexOf(q)===-1?[]:D.filter(function(O){return M.indexOf(O)!==-1})});return{leastVertex:E,adjList:P}}l=0;for(var d=t.length;l<d;){var x=v(l);if(l=x.leastVertex,s=x.adjList,s){for(var b=0;b<s.length;b++)for(var p=0;p<s[b].length;p++){var w=s[b][p];a[+w]=!1,o[w]={}}f(l),l=l+1}else l=d}if(!r)return i}});var JUe=ie((yF,KUe)=>{(function(e,t){typeof yF=="object"&&typeof KUe!="undefined"?t(yF,ZE(),fF(),OZ(),jUe()):typeof define=="function"&&define.amd?define(["exports","d3-array","d3-collection","d3-shape","elementary-circuits-directed-graph"],t):t(e.d3=e.d3||{},e.d3,e.d3,e.d3,null)})(yF,function(e,t,r,i,n){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n;function a(Re){return Re.target.depth}function o(Re){return Re.depth}function s(Re,Ie){return Ie-1-Re.height}function l(Re,Ie){return Re.sourceLinks.length?Re.depth:Ie-1}function u(Re){return Re.targetLinks.length?Re.depth:Re.sourceLinks.length?t.min(Re.sourceLinks,a)-1:0}function f(Re){return function(){return Re}}var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Re){return typeof Re}:function(Re){return Re&&typeof Symbol=="function"&&Re.constructor===Symbol&&Re!==Symbol.prototype?"symbol":typeof Re};function h(Re,Ie){return d(Re.source,Ie.source)||Re.index-Ie.index}function v(Re,Ie){return d(Re.target,Ie.target)||Re.index-Ie.index}function d(Re,Ie){return Re.partOfCycle===Ie.partOfCycle?Re.y0-Ie.y0:Re.circularLinkType==="top"||Ie.circularLinkType==="bottom"?-1:1}function x(Re){return Re.value}function b(Re){return(Re.y0+Re.y1)/2}function p(Re){return b(Re.source)}function w(Re){return b(Re.target)}function A(Re){return Re.index}function T(Re){return Re.nodes}function k(Re){return Re.links}function _(Re,Ie){var ot=Re.get(Ie);if(!ot)throw new Error("missing: "+Ie);return ot}function E(Re,Ie){return Ie(Re)}var S=25,g=10,C=.3;function M(){var Re=0,Ie=0,ot=1,lt=1,ht=24,xt,Vt=A,Ht=l,Me=T,Ke=k,We=32,et=2,vt,at=null;function Xe(){var It={nodes:Me.apply(null,arguments),links:Ke.apply(null,arguments)};dt(It),P(It,Vt,at),_t(It),fr(It),D(It,Vt),ar(It,We,Vt),cr(It);for(var gt=4,kt=0;kt<gt;kt++)ge(It,lt,Vt),ae(It,lt,Vt),me(It,Ie,lt,Vt),ge(It,lt,Vt),ae(It,lt,Vt);return rt(It,Ie,lt),N(It,et,lt,Vt),It}Xe.nodeId=function(It){return arguments.length?(Vt=typeof It=="function"?It:f(It),Xe):Vt},Xe.nodeAlign=function(It){return arguments.length?(Ht=typeof It=="function"?It:f(It),Xe):Ht},Xe.nodeWidth=function(It){return arguments.length?(ht=+It,Xe):ht},Xe.nodePadding=function(It){return arguments.length?(xt=+It,Xe):xt},Xe.nodes=function(It){return arguments.length?(Me=typeof It=="function"?It:f(It),Xe):Me},Xe.links=function(It){return arguments.length?(Ke=typeof It=="function"?It:f(It),Xe):Ke},Xe.size=function(It){return arguments.length?(Re=Ie=0,ot=+It[0],lt=+It[1],Xe):[ot-Re,lt-Ie]},Xe.extent=function(It){return arguments.length?(Re=+It[0][0],ot=+It[1][0],Ie=+It[0][1],lt=+It[1][1],Xe):[[Re,Ie],[ot,lt]]},Xe.iterations=function(It){return arguments.length?(We=+It,Xe):We},Xe.circularLinkGap=function(It){return arguments.length?(et=+It,Xe):et},Xe.nodePaddingRatio=function(It){return arguments.length?(vt=+It,Xe):vt},Xe.sortNodes=function(It){return arguments.length?(at=It,Xe):at},Xe.update=function(It){return D(It,Vt),cr(It),It.links.forEach(function(gt){gt.circular&&(gt.circularLinkType=gt.y0+gt.y1<lt?"top":"bottom",gt.source.circularLinkType=gt.circularLinkType,gt.target.circularLinkType=gt.circularLinkType)}),ge(It,lt,Vt,!1),ae(It,lt,Vt),N(It,et,lt,Vt),It};function dt(It){It.nodes.forEach(function(kt,Je){kt.index=Je,kt.sourceLinks=[],kt.targetLinks=[]});var gt=r.map(It.nodes,Vt);return It.links.forEach(function(kt,Je){kt.index=Je;var Ze=kt.source,At=kt.target;(typeof Ze=="undefined"?"undefined":c(Ze))!=="object"&&(Ze=kt.source=_(gt,Ze)),(typeof At=="undefined"?"undefined":c(At))!=="object"&&(At=kt.target=_(gt,At)),Ze.sourceLinks.push(kt),At.targetLinks.push(kt)}),It}function _t(It){It.nodes.forEach(function(gt){gt.partOfCycle=!1,gt.value=Math.max(t.sum(gt.sourceLinks,x),t.sum(gt.targetLinks,x)),gt.sourceLinks.forEach(function(kt){kt.circular&&(gt.partOfCycle=!0,gt.circularLinkType=kt.circularLinkType)}),gt.targetLinks.forEach(function(kt){kt.circular&&(gt.partOfCycle=!0,gt.circularLinkType=kt.circularLinkType)})})}function $t(It){var gt=0,kt=0,Je=0,Ze=0,At=t.max(It.nodes,function(Se){return Se.column});return It.links.forEach(function(Se){Se.circular&&(Se.circularLinkType=="top"?gt=gt+Se.width:kt=kt+Se.width,Se.target.column==0&&(Ze=Ze+Se.width),Se.source.column==At&&(Je=Je+Se.width))}),gt=gt>0?gt+S+g:gt,kt=kt>0?kt+S+g:kt,Je=Je>0?Je+S+g:Je,Ze=Ze>0?Ze+S+g:Ze,{top:gt,bottom:kt,left:Ze,right:Je}}function Ut(It,gt){var kt=t.max(It.nodes,function(it){return it.column}),Je=ot-Re,Ze=lt-Ie,At=Je+gt.right+gt.left,Se=Ze+gt.top+gt.bottom,pe=Je/At,Te=Ze/Se;return Re=Re*pe+gt.left,ot=gt.right==0?ot:ot*pe,Ie=Ie*Te+gt.top,lt=lt*Te,It.nodes.forEach(function(it){it.x0=Re+it.column*((ot-Re-ht)/kt),it.x1=it.x0+ht}),Te}function fr(It){var gt,kt,Je;for(gt=It.nodes,kt=[],Je=0;gt.length;++Je,gt=kt,kt=[])gt.forEach(function(Ze){Ze.depth=Je,Ze.sourceLinks.forEach(function(At){kt.indexOf(At.target)<0&&!At.circular&&kt.push(At.target)})});for(gt=It.nodes,kt=[],Je=0;gt.length;++Je,gt=kt,kt=[])gt.forEach(function(Ze){Ze.height=Je,Ze.targetLinks.forEach(function(At){kt.indexOf(At.source)<0&&!At.circular&&kt.push(At.source)})});It.nodes.forEach(function(Ze){Ze.column=Math.floor(Ht.call(null,Ze,Je))})}function ar(It,gt,kt){var Je=r.nest().key(function(it){return it.column}).sortKeys(t.ascending).entries(It.nodes).map(function(it){return it.values});Se(kt),Te();for(var Ze=1,At=gt;At>0;--At)pe(Ze*=.99,kt),Te();function Se(it){if(vt){var Dt=1/0;Je.forEach(function(Vr){var mr=lt*vt/(Vr.length+1);Dt=mr<Dt?mr:Dt}),xt=Dt}var Wt=t.min(Je,function(Vr){return(lt-Ie-(Vr.length-1)*xt)/t.sum(Vr,x)});Wt=Wt*C,It.links.forEach(function(Vr){Vr.width=Vr.value*Wt});var er=$t(It),qr=Ut(It,er);Wt=Wt*qr,It.links.forEach(function(Vr){Vr.width=Vr.value*Wt}),Je.forEach(function(Vr){var mr=Vr.length;Vr.forEach(function(Fr,nn){Fr.depth==Je.length-1&&mr==1||Fr.depth==0&&mr==1?(Fr.y0=lt/2-Fr.value*Wt,Fr.y1=Fr.y0+Fr.value*Wt):Fr.partOfCycle?U(Fr,it)==0?(Fr.y0=lt/2+nn,Fr.y1=Fr.y0+Fr.value*Wt):Fr.circularLinkType=="top"?(Fr.y0=Ie+nn,Fr.y1=Fr.y0+Fr.value*Wt):(Fr.y0=lt-Fr.value*Wt-nn,Fr.y1=Fr.y0+Fr.value*Wt):er.top==0||er.bottom==0?(Fr.y0=(lt-Ie)/mr*nn,Fr.y1=Fr.y0+Fr.value*Wt):(Fr.y0=(lt-Ie)/2-mr/2+nn,Fr.y1=Fr.y0+Fr.value*Wt)})})}function pe(it,Dt){var Wt=Je.length;Je.forEach(function(er){var qr=er.length,Vr=er[0].depth;er.forEach(function(mr){var Fr;if((mr.sourceLinks.length||mr.targetLinks.length)&&!(mr.partOfCycle&&U(mr,Dt)>0))if(Vr==0&&qr==1)Fr=mr.y1-mr.y0,mr.y0=lt/2-Fr/2,mr.y1=lt/2+Fr/2;else if(Vr==Wt-1&&qr==1)Fr=mr.y1-mr.y0,mr.y0=lt/2-Fr/2,mr.y1=lt/2+Fr/2;else{var nn=0,jn=t.mean(mr.sourceLinks,w),xn=t.mean(mr.targetLinks,p);jn&&xn?nn=(jn+xn)/2:nn=jn||xn;var pn=(nn-b(mr))*it;mr.y0+=pn,mr.y1+=pn}})})}function Te(){Je.forEach(function(it){var Dt,Wt,er=Ie,qr=it.length,Vr;for(it.sort(d),Vr=0;Vr<qr;++Vr)Dt=it[Vr],Wt=er-Dt.y0,Wt>0&&(Dt.y0+=Wt,Dt.y1+=Wt),er=Dt.y1+xt;if(Wt=er-xt-lt,Wt>0)for(er=Dt.y0-=Wt,Dt.y1-=Wt,Vr=qr-2;Vr>=0;--Vr)Dt=it[Vr],Wt=Dt.y1+xt-er,Wt>0&&(Dt.y0-=Wt,Dt.y1-=Wt),er=Dt.y0})}}function cr(It){It.nodes.forEach(function(gt){gt.sourceLinks.sort(v),gt.targetLinks.sort(h)}),It.nodes.forEach(function(gt){var kt=gt.y0,Je=kt,Ze=gt.y1,At=Ze;gt.sourceLinks.forEach(function(Se){Se.circular?(Se.y0=Ze-Se.width/2,Ze=Ze-Se.width):(Se.y0=kt+Se.width/2,kt+=Se.width)}),gt.targetLinks.forEach(function(Se){Se.circular?(Se.y1=At-Se.width/2,At=At-Se.width):(Se.y1=Je+Se.width/2,Je+=Se.width)})})}return Xe}function P(Re,Ie,ot){var lt=0;if(ot===null){for(var ht=[],xt=0;xt<Re.links.length;xt++){var Vt=Re.links[xt],Ht=Vt.source.index,Me=Vt.target.index;ht[Ht]||(ht[Ht]=[]),ht[Me]||(ht[Me]=[]),ht[Ht].indexOf(Me)===-1&&ht[Ht].push(Me)}var Ke=n(ht);Ke.sort(function(at,Xe){return at.length-Xe.length});var We={};for(xt=0;xt<Ke.length;xt++){var et=Ke[xt],vt=et.slice(-2);We[vt[0]]||(We[vt[0]]={}),We[vt[0]][vt[1]]=!0}Re.links.forEach(function(at){var Xe=at.target.index,dt=at.source.index;Xe===dt||We[dt]&&We[dt][Xe]?(at.circular=!0,at.circularLinkID=lt,lt=lt+1):at.circular=!1})}else Re.links.forEach(function(at){at.source[ot]<at.target[ot]?at.circular=!1:(at.circular=!0,at.circularLinkID=lt,lt=lt+1)})}function D(Re,Ie){var ot=0,lt=0;Re.links.forEach(function(ht){ht.circular&&(ht.source.circularLinkType||ht.target.circularLinkType?ht.circularLinkType=ht.source.circularLinkType?ht.source.circularLinkType:ht.target.circularLinkType:ht.circularLinkType=ot<lt?"top":"bottom",ht.circularLinkType=="top"?ot=ot+1:lt=lt+1,Re.nodes.forEach(function(xt){(E(xt,Ie)==E(ht.source,Ie)||E(xt,Ie)==E(ht.target,Ie))&&(xt.circularLinkType=ht.circularLinkType)}))}),Re.links.forEach(function(ht){ht.circular&&(ht.source.circularLinkType==ht.target.circularLinkType&&(ht.circularLinkType=ht.source.circularLinkType),qe(ht,Ie)&&(ht.circularLinkType=ht.source.circularLinkType))})}function q(Re){var Ie=Math.abs(Re.y1-Re.y0),ot=Math.abs(Re.target.x0-Re.source.x1);return Math.atan(ot/Ie)}function O(Re,Ie){return Re.source.column<Ie.target.column?!1:!(Re.target.column>Ie.source.column)}function U(Re,Ie){var ot=0;Re.sourceLinks.forEach(function(ht){ot=ht.circular&&!qe(ht,Ie)?ot+1:ot});var lt=0;return Re.targetLinks.forEach(function(ht){lt=ht.circular&&!qe(ht,Ie)?lt+1:lt}),ot+lt}function B(Re){var Ie=Re.source.sourceLinks,ot=0;Ie.forEach(function(xt){ot=xt.circular?ot+1:ot});var lt=Re.target.targetLinks,ht=0;return lt.forEach(function(xt){ht=xt.circular?ht+1:ht}),!(ot>1||ht>1)}function F(Re,Ie,ot){return Re.sort(K),Re.forEach(function(lt,ht){var xt=0;if(qe(lt,ot)&&B(lt))lt.circularPathData.verticalBuffer=xt+lt.width/2;else{var Vt=0;for(Vt;Vt<ht;Vt++)if(O(Re[ht],Re[Vt])){var Ht=Re[Vt].circularPathData.verticalBuffer+Re[Vt].width/2+Ie;xt=Ht>xt?Ht:xt}lt.circularPathData.verticalBuffer=xt+lt.width/2}}),Re}function N(Re,Ie,ot,lt){var ht=5,xt=t.min(Re.links,function(Me){return Me.source.y0});Re.links.forEach(function(Me){Me.circular&&(Me.circularPathData={})});var Vt=Re.links.filter(function(Me){return Me.circularLinkType=="top"});F(Vt,Ie,lt);var Ht=Re.links.filter(function(Me){return Me.circularLinkType=="bottom"});F(Ht,Ie,lt),Re.links.forEach(function(Me){if(Me.circular){if(Me.circularPathData.arcRadius=Me.width+g,Me.circularPathData.leftNodeBuffer=ht,Me.circularPathData.rightNodeBuffer=ht,Me.circularPathData.sourceWidth=Me.source.x1-Me.source.x0,Me.circularPathData.sourceX=Me.source.x0+Me.circularPathData.sourceWidth,Me.circularPathData.targetX=Me.target.x0,Me.circularPathData.sourceY=Me.y0,Me.circularPathData.targetY=Me.y1,qe(Me,lt)&&B(Me))Me.circularPathData.leftSmallArcRadius=g+Me.width/2,Me.circularPathData.leftLargeArcRadius=g+Me.width/2,Me.circularPathData.rightSmallArcRadius=g+Me.width/2,Me.circularPathData.rightLargeArcRadius=g+Me.width/2,Me.circularLinkType=="bottom"?(Me.circularPathData.verticalFullExtent=Me.source.y1+S+Me.circularPathData.verticalBuffer,Me.circularPathData.verticalLeftInnerExtent=Me.circularPathData.verticalFullExtent-Me.circularPathData.leftLargeArcRadius,Me.circularPathData.verticalRightInnerExtent=Me.circularPathData.verticalFullExtent-Me.circularPathData.rightLargeArcRadius):(Me.circularPathData.verticalFullExtent=Me.source.y0-S-Me.circularPathData.verticalBuffer,Me.circularPathData.verticalLeftInnerExtent=Me.circularPathData.verticalFullExtent+Me.circularPathData.leftLargeArcRadius,Me.circularPathData.verticalRightInnerExtent=Me.circularPathData.verticalFullExtent+Me.circularPathData.rightLargeArcRadius);else{var Ke=Me.source.column,We=Me.circularLinkType,et=Re.links.filter(function(Xe){return Xe.source.column==Ke&&Xe.circularLinkType==We});Me.circularLinkType=="bottom"?et.sort(fe):et.sort(ne);var vt=0;et.forEach(function(Xe,dt){Xe.circularLinkID==Me.circularLinkID&&(Me.circularPathData.leftSmallArcRadius=g+Me.width/2+vt,Me.circularPathData.leftLargeArcRadius=g+Me.width/2+dt*Ie+vt),vt=vt+Xe.width}),Ke=Me.target.column,et=Re.links.filter(function(Xe){return Xe.target.column==Ke&&Xe.circularLinkType==We}),Me.circularLinkType=="bottom"?et.sort(ee):et.sort(ue),vt=0,et.forEach(function(Xe,dt){Xe.circularLinkID==Me.circularLinkID&&(Me.circularPathData.rightSmallArcRadius=g+Me.width/2+vt,Me.circularPathData.rightLargeArcRadius=g+Me.width/2+dt*Ie+vt),vt=vt+Xe.width}),Me.circularLinkType=="bottom"?(Me.circularPathData.verticalFullExtent=Math.max(ot,Me.source.y1,Me.target.y1)+S+Me.circularPathData.verticalBuffer,Me.circularPathData.verticalLeftInnerExtent=Me.circularPathData.verticalFullExtent-Me.circularPathData.leftLargeArcRadius,Me.circularPathData.verticalRightInnerExtent=Me.circularPathData.verticalFullExtent-Me.circularPathData.rightLargeArcRadius):(Me.circularPathData.verticalFullExtent=xt-S-Me.circularPathData.verticalBuffer,Me.circularPathData.verticalLeftInnerExtent=Me.circularPathData.verticalFullExtent+Me.circularPathData.leftLargeArcRadius,Me.circularPathData.verticalRightInnerExtent=Me.circularPathData.verticalFullExtent+Me.circularPathData.rightLargeArcRadius)}Me.circularPathData.leftInnerExtent=Me.circularPathData.sourceX+Me.circularPathData.leftNodeBuffer,Me.circularPathData.rightInnerExtent=Me.circularPathData.targetX-Me.circularPathData.rightNodeBuffer,Me.circularPathData.leftFullExtent=Me.circularPathData.sourceX+Me.circularPathData.leftLargeArcRadius+Me.circularPathData.leftNodeBuffer,Me.circularPathData.rightFullExtent=Me.circularPathData.targetX-Me.circularPathData.rightLargeArcRadius-Me.circularPathData.rightNodeBuffer}if(Me.circular)Me.path=X(Me);else{var at=i.linkHorizontal().source(function(Xe){var dt=Xe.source.x0+(Xe.source.x1-Xe.source.x0),_t=Xe.y0;return[dt,_t]}).target(function(Xe){var dt=Xe.target.x0,_t=Xe.y1;return[dt,_t]});Me.path=at(Me)}})}function X(Re){var Ie="";return Re.circularLinkType=="top"?Ie="M"+Re.circularPathData.sourceX+" "+Re.circularPathData.sourceY+" L"+Re.circularPathData.leftInnerExtent+" "+Re.circularPathData.sourceY+" A"+Re.circularPathData.leftLargeArcRadius+" "+Re.circularPathData.leftSmallArcRadius+" 0 0 0 "+Re.circularPathData.leftFullExtent+" "+(Re.circularPathData.sourceY-Re.circularPathData.leftSmallArcRadius)+" L"+Re.circularPathData.leftFullExtent+" "+Re.circularPathData.verticalLeftInnerExtent+" A"+Re.circularPathData.leftLargeArcRadius+" "+Re.circularPathData.leftLargeArcRadius+" 0 0 0 "+Re.circularPathData.leftInnerExtent+" "+Re.circularPathData.verticalFullExtent+" L"+Re.circularPathData.rightInnerExtent+" "+Re.circularPathData.verticalFullExtent+" A"+Re.circularPathData.rightLargeArcRadius+" "+Re.circularPathData.rightLargeArcRadius+" 0 0 0 "+Re.circularPathData.rightFullExtent+" "+Re.circularPathData.verticalRightInnerExtent+" L"+Re.circularPathData.rightFullExtent+" "+(Re.circularPathData.targetY-Re.circularPathData.rightSmallArcRadius)+" A"+Re.circularPathData.rightLargeArcRadius+" "+Re.circularPathData.rightSmallArcRadius+" 0 0 0 "+Re.circularPathData.rightInnerExtent+" "+Re.circularPathData.targetY+" L"+Re.circularPathData.targetX+" "+Re.circularPathData.targetY:Ie="M"+Re.circularPathData.sourceX+" "+Re.circularPathData.sourceY+" L"+Re.circularPathData.leftInnerExtent+" "+Re.circularPathData.sourceY+" A"+Re.circularPathData.leftLargeArcRadius+" "+Re.circularPathData.leftSmallArcRadius+" 0 0 1 "+Re.circularPathData.leftFullExtent+" "+(Re.circularPathData.sourceY+Re.circularPathData.leftSmallArcRadius)+" L"+Re.circularPathData.leftFullExtent+" "+Re.circularPathData.verticalLeftInnerExtent+" A"+Re.circularPathData.leftLargeArcRadius+" "+Re.circularPathData.leftLargeArcRadius+" 0 0 1 "+Re.circularPathData.leftInnerExtent+" "+Re.circularPathData.verticalFullExtent+" L"+Re.circularPathData.rightInnerExtent+" "+Re.circularPathData.verticalFullExtent+" A"+Re.circularPathData.rightLargeArcRadius+" "+Re.circularPathData.rightLargeArcRadius+" 0 0 1 "+Re.circularPathData.rightFullExtent+" "+Re.circularPathData.verticalRightInnerExtent+" L"+Re.circularPathData.rightFullExtent+" "+(Re.circularPathData.targetY+Re.circularPathData.rightSmallArcRadius)+" A"+Re.circularPathData.rightLargeArcRadius+" "+Re.circularPathData.rightSmallArcRadius+" 0 0 1 "+Re.circularPathData.rightInnerExtent+" "+Re.circularPathData.targetY+" L"+Re.circularPathData.targetX+" "+Re.circularPathData.targetY,Ie}function K(Re,Ie){return Z(Re)==Z(Ie)?Re.circularLinkType=="bottom"?fe(Re,Ie):ne(Re,Ie):Z(Ie)-Z(Re)}function ne(Re,Ie){return Re.y0-Ie.y0}function fe(Re,Ie){return Ie.y0-Re.y0}function ue(Re,Ie){return Re.y1-Ie.y1}function ee(Re,Ie){return Ie.y1-Re.y1}function Z(Re){return Re.target.column-Re.source.column}function oe(Re){return Re.target.x0-Re.source.x1}function ce(Re,Ie){var ot=q(Re),lt=oe(Ie)/Math.tan(ot),ht=Ce(Re)=="up"?Re.y1+lt:Re.y1-lt;return ht}function le(Re,Ie){var ot=q(Re),lt=oe(Ie)/Math.tan(ot),ht=Ce(Re)=="up"?Re.y1-lt:Re.y1+lt;return ht}function me(Re,Ie,ot,lt){Re.links.forEach(function(ht){if(!ht.circular&&ht.target.column-ht.source.column>1){var xt=ht.source.column+1,Vt=ht.target.column-1,Ht=1,Me=Vt-xt+1;for(Ht=1;xt<=Vt;xt++,Ht++)Re.nodes.forEach(function(Ke){if(Ke.column==xt){var We=Ht/(Me+1),et=Math.pow(1-We,3),vt=3*We*Math.pow(1-We,2),at=3*Math.pow(We,2)*(1-We),Xe=Math.pow(We,3),dt=et*ht.y0+vt*ht.y0+at*ht.y1+Xe*ht.y1,_t=dt-ht.width/2,$t=dt+ht.width/2,Ut;_t>Ke.y0&&_t<Ke.y1?(Ut=Ke.y1-_t+10,Ut=Ke.circularLinkType=="bottom"?Ut:-Ut,Ke=te(Ke,Ut,Ie,ot),Re.nodes.forEach(function(fr){E(fr,lt)==E(Ke,lt)||fr.column!=Ke.column||he(Ke,fr)&&te(fr,Ut,Ie,ot)})):$t>Ke.y0&&$t<Ke.y1?(Ut=$t-Ke.y0+10,Ke=te(Ke,Ut,Ie,ot),Re.nodes.forEach(function(fr){E(fr,lt)==E(Ke,lt)||fr.column!=Ke.column||fr.y0<Ke.y1&&fr.y1>Ke.y1&&te(fr,Ut,Ie,ot)})):_t<Ke.y0&&$t>Ke.y1&&(Ut=$t-Ke.y0+10,Ke=te(Ke,Ut,Ie,ot),Re.nodes.forEach(function(fr){E(fr,lt)==E(Ke,lt)||fr.column!=Ke.column||fr.y0<Ke.y1&&fr.y1>Ke.y1&&te(fr,Ut,Ie,ot)}))}})}})}function he(Re,Ie){return Re.y0>Ie.y0&&Re.y0<Ie.y1||Re.y1>Ie.y0&&Re.y1<Ie.y1?!0:Re.y0<Ie.y0&&Re.y1>Ie.y1}function te(Re,Ie,ot,lt){return Re.y0+Ie>=ot&&Re.y1+Ie<=lt&&(Re.y0=Re.y0+Ie,Re.y1=Re.y1+Ie,Re.targetLinks.forEach(function(ht){ht.y1=ht.y1+Ie}),Re.sourceLinks.forEach(function(ht){ht.y0=ht.y0+Ie})),Re}function ge(Re,Ie,ot,lt){Re.nodes.forEach(function(ht){lt&&ht.y+(ht.y1-ht.y0)>Ie&&(ht.y=ht.y-(ht.y+(ht.y1-ht.y0)-Ie));var xt=Re.links.filter(function(Me){return E(Me.source,ot)==E(ht,ot)}),Vt=xt.length;Vt>1&&xt.sort(function(Me,Ke){if(!Me.circular&&!Ke.circular){if(Me.target.column==Ke.target.column)return Me.y1-Ke.y1;if(_e(Me,Ke)){if(Me.target.column>Ke.target.column){var We=le(Ke,Me);return Me.y1-We}if(Ke.target.column>Me.target.column){var et=le(Me,Ke);return et-Ke.y1}}else return Me.y1-Ke.y1}if(Me.circular&&!Ke.circular)return Me.circularLinkType=="top"?-1:1;if(Ke.circular&&!Me.circular)return Ke.circularLinkType=="top"?1:-1;if(Me.circular&&Ke.circular)return Me.circularLinkType===Ke.circularLinkType&&Me.circularLinkType=="top"?Me.target.column===Ke.target.column?Me.target.y1-Ke.target.y1:Ke.target.column-Me.target.column:Me.circularLinkType===Ke.circularLinkType&&Me.circularLinkType=="bottom"?Me.target.column===Ke.target.column?Ke.target.y1-Me.target.y1:Me.target.column-Ke.target.column:Me.circularLinkType=="top"?-1:1});var Ht=ht.y0;xt.forEach(function(Me){Me.y0=Ht+Me.width/2,Ht=Ht+Me.width}),xt.forEach(function(Me,Ke){if(Me.circularLinkType=="bottom"){var We=Ke+1,et=0;for(We;We<Vt;We++)et=et+xt[We].width;Me.y0=ht.y1-et-Me.width/2}})})}function ae(Re,Ie,ot){Re.nodes.forEach(function(lt){var ht=Re.links.filter(function(Ht){return E(Ht.target,ot)==E(lt,ot)}),xt=ht.length;xt>1&&ht.sort(function(Ht,Me){if(!Ht.circular&&!Me.circular){if(Ht.source.column==Me.source.column)return Ht.y0-Me.y0;if(_e(Ht,Me)){if(Me.source.column<Ht.source.column){var Ke=ce(Me,Ht);return Ht.y0-Ke}if(Ht.source.column<Me.source.column){var We=ce(Ht,Me);return We-Me.y0}}else return Ht.y0-Me.y0}if(Ht.circular&&!Me.circular)return Ht.circularLinkType=="top"?-1:1;if(Me.circular&&!Ht.circular)return Me.circularLinkType=="top"?1:-1;if(Ht.circular&&Me.circular)return Ht.circularLinkType===Me.circularLinkType&&Ht.circularLinkType=="top"?Ht.source.column===Me.source.column?Ht.source.y1-Me.source.y1:Ht.source.column-Me.source.column:Ht.circularLinkType===Me.circularLinkType&&Ht.circularLinkType=="bottom"?Ht.source.column===Me.source.column?Ht.source.y1-Me.source.y1:Me.source.column-Ht.source.column:Ht.circularLinkType=="top"?-1:1});var Vt=lt.y0;ht.forEach(function(Ht){Ht.y1=Vt+Ht.width/2,Vt=Vt+Ht.width}),ht.forEach(function(Ht,Me){if(Ht.circularLinkType=="bottom"){var Ke=Me+1,We=0;for(Ke;Ke<xt;Ke++)We=We+ht[Ke].width;Ht.y1=lt.y1-We-Ht.width/2}})})}function _e(Re,Ie){return Ce(Re)==Ce(Ie)}function Ce(Re){return Re.y0-Re.y1>0?"up":"down"}function qe(Re,Ie){return E(Re.source,Ie)==E(Re.target,Ie)}function rt(Re,Ie,ot){var lt=Re.nodes,ht=Re.links,xt=!1,Vt=!1;if(ht.forEach(function(vt){vt.circularLinkType=="top"?xt=!0:vt.circularLinkType=="bottom"&&(Vt=!0)}),xt==!1||Vt==!1){var Ht=t.min(lt,function(vt){return vt.y0}),Me=t.max(lt,function(vt){return vt.y1}),Ke=Me-Ht,We=ot-Ie,et=We/Ke;lt.forEach(function(vt){var at=(vt.y1-vt.y0)*et;vt.y0=(vt.y0-Ht)*et,vt.y1=vt.y0+at}),ht.forEach(function(vt){vt.y0=(vt.y0-Ht)*et,vt.y1=(vt.y1-Ht)*et,vt.width=vt.width*et})}}e.sankeyCircular=M,e.sankeyCenter=u,e.sankeyLeft=o,e.sankeyRight=s,e.sankeyJustify=l,Object.defineProperty(e,"__esModule",{value:!0})})});var BZ=ie((Dmr,QUe)=>{"use strict";QUe.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}});var cVe=ie((Imr,fVe)=>{"use strict";var $Ue=VUe(),yYt=(P_(),jb(L_)).interpolateNumber,mT=Mi(),O5=XUe(),mYt=JUe(),Ds=BZ(),xT=Kf(),tb=_i(),xYt=oa(),Py=Zt(),VZ=Py.strTranslate,_Yt=Py.strRotate,HZ=mg(),B5=HZ.keyFun,mF=HZ.repeat,aVe=HZ.unwrap,eVe=ks(),bYt=Ti(),oVe=Mf(),wYt=oVe.CAP_SHIFT,TYt=oVe.LINE_SPACING,AYt=3;function MYt(e,t,r){var i=aVe(t),n=i.trace,a=n.domain,o=n.orientation==="h",s=n.node.pad,l=n.node.thickness,u={justify:O5.sankeyJustify,left:O5.sankeyLeft,right:O5.sankeyRight,center:O5.sankeyCenter}[n.node.align],f=e.width*(a.x[1]-a.x[0]),c=e.height*(a.y[1]-a.y[0]),h=i._nodes,v=i._links,d=i.circular,x;d?x=mYt.sankeyCircular().circularLinkGap(0):x=O5.sankey(),x.iterations(Ds.sankeyIterations).size(o?[f,c]:[c,f]).nodeWidth(l).nodePadding(s).nodeId(function(q){return q.pointNumber}).nodeAlign(u).nodes(h).links(v);var b=x();x.nodePadding()<s&&Py.warn("node.pad was reduced to ",x.nodePadding()," to fit within the figure.");var p,w,A;for(var T in i._groupLookup){var k=parseInt(i._groupLookup[T]),_;for(p=0;p<b.nodes.length;p++)if(b.nodes[p].pointNumber===k){_=b.nodes[p];break}if(_){var E={pointNumber:parseInt(T),x0:_.x0,x1:_.x1,y0:_.y0,y1:_.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};b.nodes.unshift(E),_.childrenNodes.unshift(E)}}function S(){for(p=0;p<b.nodes.length;p++){var q=b.nodes[p],O={},U,B;for(w=0;w<q.targetLinks.length;w++)B=q.targetLinks[w],U=B.source.pointNumber+":"+B.target.pointNumber,O.hasOwnProperty(U)||(O[U]=[]),O[U].push(B);var F=Object.keys(O);for(w=0;w<F.length;w++){U=F[w];var N=O[U],X=0,K={};for(A=0;A<N.length;A++)B=N[A],K[B.label]||(K[B.label]=0),K[B.label]+=B.value,X+=B.value;for(A=0;A<N.length;A++)B=N[A],B.flow={value:X,labelConcentration:K[B.label]/X,concentration:B.value/X,links:N},B.concentrationscale&&(B.color=xT(B.concentrationscale(B.flow.labelConcentration)))}var ne=0;for(w=0;w<q.sourceLinks.length;w++)ne+=q.sourceLinks[w].value;for(w=0;w<q.sourceLinks.length;w++)B=q.sourceLinks[w],B.concentrationOut=B.value/ne;var fe=0;for(w=0;w<q.targetLinks.length;w++)fe+=q.targetLinks[w].value;for(w=0;w<q.targetLinks.length;w++)B=q.targetLinks[w],B.concenrationIn=B.value/fe}}S();function g(q){q.forEach(function(O){var U,B,F=0,N=O.length,X;for(O.sort(function(K,ne){return K.y0-ne.y0}),X=0;X<N;++X)U=O[X],U.y0>=F||(B=F-U.y0,B>1e-6&&(U.y0+=B,U.y1+=B)),F=U.y1+s})}function C(q){var O=q.map(function(ne,fe){return{x0:ne.x0,index:fe}}).sort(function(ne,fe){return ne.x0-fe.x0}),U=[],B=-1,F,N=-1/0,X;for(p=0;p<O.length;p++){var K=q[O[p].index];K.x0>N+l&&(B+=1,F=K.x0),N=K.x0,U[B]||(U[B]=[]),U[B].push(K),X=F-K.x0,K.x0+=X,K.x1+=X}return U}if(n.node.x.length&&n.node.y.length){for(p=0;p<Math.min(n.node.x.length,n.node.y.length,b.nodes.length);p++)if(n.node.x[p]&&n.node.y[p]){var M=[n.node.x[p]*f,n.node.y[p]*c];b.nodes[p].x0=M[0]-l/2,b.nodes[p].x1=M[0]+l/2;var P=b.nodes[p].y1-b.nodes[p].y0;b.nodes[p].y0=M[1]-P/2,b.nodes[p].y1=M[1]+P/2}if(n.arrangement==="snap"){h=b.nodes;var D=C(h);g(D)}x.update(b)}return{circular:d,key:r,trace:n,guid:Py.randstr(),horizontal:o,width:f,height:c,nodePad:n.node.pad,nodeLineColor:n.node.line.color,nodeLineWidth:n.node.line.width,linkLineColor:n.link.line.color,linkLineWidth:n.link.line.width,linkArrowLength:n.link.arrowlen,valueFormat:n.valueformat,valueSuffix:n.valuesuffix,textFont:n.textfont,translateX:a.x[0]*e.width+e.margin.l,translateY:e.height-a.y[1]*e.height+e.margin.t,dragParallel:o?c:f,dragPerpendicular:o?f:c,arrangement:n.arrangement,sankey:x,graph:b,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function SYt(e,t,r){var i=xT(t.color),n=xT(t.hovercolor),a=t.source.label+"|"+t.target.label,o=a+"__"+r;return t.trace=e.trace,t.curveNumber=e.trace.index,{circular:e.circular,key:o,traceId:e.key,pointNumber:t.pointNumber,link:t,tinyColorHue:tb.tinyRGB(i),tinyColorAlpha:i.getAlpha(),tinyColorHoverHue:tb.tinyRGB(n),tinyColorHoverAlpha:n.getAlpha(),linkPath:GZ,linkLineColor:e.linkLineColor,linkLineWidth:e.linkLineWidth,linkArrowLength:e.linkArrowLength,valueFormat:e.valueFormat,valueSuffix:e.valueSuffix,sankey:e.sankey,parent:e,interactionState:e.interactionState,flow:t.flow}}function EYt(e,t){var r="",i=e.width/2,n=e.circularPathData;return e.circularLinkType==="top"?r="M "+(n.targetX-t)+" "+(n.targetY+i)+" L"+(n.rightInnerExtent-t)+" "+(n.targetY+i)+"A"+(n.rightLargeArcRadius+i)+" "+(n.rightSmallArcRadius+i)+" 0 0 1 "+(n.rightFullExtent-i-t)+" "+(n.targetY-n.rightSmallArcRadius)+"L"+(n.rightFullExtent-i-t)+" "+n.verticalRightInnerExtent+"A"+(n.rightLargeArcRadius+i)+" "+(n.rightLargeArcRadius+i)+" 0 0 1 "+(n.rightInnerExtent-t)+" "+(n.verticalFullExtent-i)+"L"+n.leftInnerExtent+" "+(n.verticalFullExtent-i)+"A"+(n.leftLargeArcRadius+i)+" "+(n.leftLargeArcRadius+i)+" 0 0 1 "+(n.leftFullExtent+i)+" "+n.verticalLeftInnerExtent+"L"+(n.leftFullExtent+i)+" "+(n.sourceY-n.leftSmallArcRadius)+"A"+(n.leftLargeArcRadius+i)+" "+(n.leftSmallArcRadius+i)+" 0 0 1 "+n.leftInnerExtent+" "+(n.sourceY+i)+"L"+n.sourceX+" "+(n.sourceY+i)+"L"+n.sourceX+" "+(n.sourceY-i)+"L"+n.leftInnerExtent+" "+(n.sourceY-i)+"A"+(n.leftLargeArcRadius-i)+" "+(n.leftSmallArcRadius-i)+" 0 0 0 "+(n.leftFullExtent-i)+" "+(n.sourceY-n.leftSmallArcRadius)+"L"+(n.leftFullExtent-i)+" "+n.verticalLeftInnerExtent+"A"+(n.leftLargeArcRadius-i)+" "+(n.leftLargeArcRadius-i)+" 0 0 0 "+n.leftInnerExtent+" "+(n.verticalFullExtent+i)+"L"+(n.rightInnerExtent-t)+" "+(n.verticalFullExtent+i)+"A"+(n.rightLargeArcRadius-i)+" "+(n.rightLargeArcRadius-i)+" 0 0 0 "+(n.rightFullExtent+i-t)+" "+n.verticalRightInnerExtent+"L"+(n.rightFullExtent+i-t)+" "+(n.targetY-n.rightSmallArcRadius)+"A"+(n.rightLargeArcRadius-i)+" "+(n.rightSmallArcRadius-i)+" 0 0 0 "+(n.rightInnerExtent-t)+" "+(n.targetY-i)+"L"+(n.targetX-t)+" "+(n.targetY-i)+(t>0?"L"+n.targetX+" "+n.targetY:"")+"Z":r="M "+(n.targetX-t)+" "+(n.targetY-i)+" L"+(n.rightInnerExtent-t)+" "+(n.targetY-i)+"A"+(n.rightLargeArcRadius+i)+" "+(n.rightSmallArcRadius+i)+" 0 0 0 "+(n.rightFullExtent-i-t)+" "+(n.targetY+n.rightSmallArcRadius)+"L"+(n.rightFullExtent-i-t)+" "+n.verticalRightInnerExtent+"A"+(n.rightLargeArcRadius+i)+" "+(n.rightLargeArcRadius+i)+" 0 0 0 "+(n.rightInnerExtent-t)+" "+(n.verticalFullExtent+i)+"L"+n.leftInnerExtent+" "+(n.verticalFullExtent+i)+"A"+(n.leftLargeArcRadius+i)+" "+(n.leftLargeArcRadius+i)+" 0 0 0 "+(n.leftFullExtent+i)+" "+n.verticalLeftInnerExtent+"L"+(n.leftFullExtent+i)+" "+(n.sourceY+n.leftSmallArcRadius)+"A"+(n.leftLargeArcRadius+i)+" "+(n.leftSmallArcRadius+i)+" 0 0 0 "+n.leftInnerExtent+" "+(n.sourceY-i)+"L"+n.sourceX+" "+(n.sourceY-i)+"L"+n.sourceX+" "+(n.sourceY+i)+"L"+n.leftInnerExtent+" "+(n.sourceY+i)+"A"+(n.leftLargeArcRadius-i)+" "+(n.leftSmallArcRadius-i)+" 0 0 1 "+(n.leftFullExtent-i)+" "+(n.sourceY+n.leftSmallArcRadius)+"L"+(n.leftFullExtent-i)+" "+n.verticalLeftInnerExtent+"A"+(n.leftLargeArcRadius-i)+" "+(n.leftLargeArcRadius-i)+" 0 0 1 "+n.leftInnerExtent+" "+(n.verticalFullExtent-i)+"L"+(n.rightInnerExtent-t)+" "+(n.verticalFullExtent-i)+"A"+(n.rightLargeArcRadius-i)+" "+(n.rightLargeArcRadius-i)+" 0 0 1 "+(n.rightFullExtent+i-t)+" "+n.verticalRightInnerExtent+"L"+(n.rightFullExtent+i-t)+" "+(n.targetY+n.rightSmallArcRadius)+"A"+(n.rightLargeArcRadius-i)+" "+(n.rightSmallArcRadius-i)+" 0 0 1 "+(n.rightInnerExtent-t)+" "+(n.targetY+i)+"L"+(n.targetX-t)+" "+(n.targetY+i)+(t>0?"L"+n.targetX+" "+n.targetY:"")+"Z",r}function GZ(){var e=.5;function t(r){var i=r.linkArrowLength;if(r.link.circular)return EYt(r.link,i);var n=Math.abs((r.link.target.x0-r.link.source.x1)/2);i>n&&(i=n);var a=r.link.source.x1,o=r.link.target.x0-i,s=yYt(a,o),l=s(e),u=s(1-e),f=r.link.y0-r.link.width/2,c=r.link.y0+r.link.width/2,h=r.link.y1-r.link.width/2,v=r.link.y1+r.link.width/2,d="M"+a+","+f,x="C"+l+","+f+" "+u+","+h+" "+o+","+h,b="C"+u+","+v+" "+l+","+c+" "+a+","+c,p=i>0?"L"+(o+i)+","+(h+r.link.width/2):"";return p+="L"+o+","+v,d+x+p+b+"Z"}return t}function kYt(e,t){var r=xT(t.color),i=Ds.nodePadAcross,n=e.nodePad/2;t.dx=t.x1-t.x0,t.dy=t.y1-t.y0;var a=t.dx,o=Math.max(.5,t.dy),s="node_"+t.pointNumber;return t.group&&(s=Py.randstr()),t.trace=e.trace,t.curveNumber=e.trace.index,{index:t.pointNumber,key:s,partOfGroup:t.partOfGroup||!1,group:t.group,traceId:e.key,trace:e.trace,node:t,nodePad:e.nodePad,nodeLineColor:e.nodeLineColor,nodeLineWidth:e.nodeLineWidth,textFont:e.textFont,size:e.horizontal?e.height:e.width,visibleWidth:Math.ceil(a),visibleHeight:o,zoneX:-i,zoneY:-n,zoneWidth:a+2*i,zoneHeight:o+2*n,labelY:e.horizontal?t.dy/2+1:t.dx/2+1,left:t.originalLayer===1,sizeAcross:e.width,forceLayouts:e.forceLayouts,horizontal:e.horizontal,darkBackground:r.getBrightness()<=128,tinyColorHue:tb.tinyRGB(r),tinyColorAlpha:r.getAlpha(),valueFormat:e.valueFormat,valueSuffix:e.valueSuffix,sankey:e.sankey,graph:e.graph,arrangement:e.arrangement,uniqueNodeLabelPathId:[e.guid,e.key,s].join("_"),interactionState:e.interactionState,figure:e}}function UZ(e){e.attr("transform",function(t){return VZ(t.node.x0.toFixed(3),t.node.y0.toFixed(3))})}function CYt(e){e.call(UZ)}function sVe(e,t){e.call(CYt),t.attr("d",GZ())}function tVe(e){e.attr("width",function(t){return t.node.x1-t.node.x0}).attr("height",function(t){return t.visibleHeight})}function NZ(e){return e.link.width>1||e.linkLineWidth>0}function rVe(e){var t=VZ(e.translateX,e.translateY);return t+(e.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function nVe(e,t,r){e.on(".basic",null).on("mouseover.basic",function(i){!i.interactionState.dragInProgress&&!i.partOfGroup&&(r.hover(this,i,t),i.interactionState.hovered=[this,i])}).on("mousemove.basic",function(i){!i.interactionState.dragInProgress&&!i.partOfGroup&&(r.follow(this,i),i.interactionState.hovered=[this,i])}).on("mouseout.basic",function(i){!i.interactionState.dragInProgress&&!i.partOfGroup&&(r.unhover(this,i,t),i.interactionState.hovered=!1)}).on("click.basic",function(i){i.interactionState.hovered&&(r.unhover(this,i,t),i.interactionState.hovered=!1),!i.interactionState.dragInProgress&&!i.partOfGroup&&r.select(this,i,t)})}function LYt(e,t,r,i){var n=mT.behavior.drag().origin(function(a){return{x:a.node.x0+a.visibleWidth/2,y:a.node.y0+a.visibleHeight/2}}).on("dragstart",function(a){if(a.arrangement!=="fixed"&&(Py.ensureSingle(i._fullLayout._infolayer,"g","dragcover",function(s){i._fullLayout._dragCover=s}),Py.raiseToTop(this),a.interactionState.dragInProgress=a.node,iVe(a.node),a.interactionState.hovered&&(r.nodeEvents.unhover.apply(0,a.interactionState.hovered),a.interactionState.hovered=!1),a.arrangement==="snap")){var o=a.traceId+"|"+a.key;a.forceLayouts[o]?a.forceLayouts[o].alpha(1):PYt(e,o,a,i),RYt(e,t,a,o,i)}}).on("drag",function(a){if(a.arrangement!=="fixed"){var o=mT.event.x,s=mT.event.y;a.arrangement==="snap"?(a.node.x0=o-a.visibleWidth/2,a.node.x1=o+a.visibleWidth/2,a.node.y0=s-a.visibleHeight/2,a.node.y1=s+a.visibleHeight/2):(a.arrangement==="freeform"&&(a.node.x0=o-a.visibleWidth/2,a.node.x1=o+a.visibleWidth/2),s=Math.max(0,Math.min(a.size-a.visibleHeight/2,s)),a.node.y0=s-a.visibleHeight/2,a.node.y1=s+a.visibleHeight/2),iVe(a.node),a.arrangement!=="snap"&&(a.sankey.update(a.graph),sVe(e.filter(uVe(a)),t))}}).on("dragend",function(a){if(a.arrangement!=="fixed"){a.interactionState.dragInProgress=!1;for(var o=0;o<a.node.childrenNodes.length;o++)a.node.childrenNodes[o].x=a.node.x,a.node.childrenNodes[o].y=a.node.y;a.arrangement!=="snap"&&lVe(a,i)}});e.on(".drag",null).call(n)}function PYt(e,t,r,i){FYt(r.graph.nodes);var n=r.graph.nodes.filter(function(a){return a.originalX===r.node.originalX}).filter(function(a){return!a.partOfGroup});r.forceLayouts[t]=$Ue.forceSimulation(n).alphaDecay(0).force("collide",$Ue.forceCollide().radius(function(a){return a.dy/2+r.nodePad/2}).strength(1).iterations(Ds.forceIterations)).force("constrain",DYt(e,t,n,r,i)).stop()}function RYt(e,t,r,i,n){window.requestAnimationFrame(function a(){var o;for(o=0;o<Ds.forceTicksPerFrame;o++)r.forceLayouts[i].tick();var s=r.graph.nodes;if(qYt(s),r.sankey.update(r.graph),sVe(e.filter(uVe(r)),t),r.forceLayouts[i].alpha()>0)window.requestAnimationFrame(a);else{var l=r.node.originalX;r.node.x0=l-r.visibleWidth/2,r.node.x1=l+r.visibleWidth/2,lVe(r,n)}})}function DYt(e,t,r,i){return function(){for(var a=0,o=0;o<r.length;o++){var s=r[o];s===i.interactionState.dragInProgress?(s.x=s.lastDraggedX,s.y=s.lastDraggedY):(s.vx=(s.originalX-s.x)/Ds.forceTicksPerFrame,s.y=Math.min(i.size-s.dy/2,Math.max(s.dy/2,s.y))),a=Math.max(a,Math.abs(s.vx),Math.abs(s.vy))}!i.interactionState.dragInProgress&&a<.1&&i.forceLayouts[t].alpha()>0&&i.forceLayouts[t].alpha(0)}}function lVe(e,t){for(var r=[],i=[],n=0;n<e.graph.nodes.length;n++){var a=(e.graph.nodes[n].x0+e.graph.nodes[n].x1)/2,o=(e.graph.nodes[n].y0+e.graph.nodes[n].y1)/2;r.push(a/e.figure.width),i.push(o/e.figure.height)}bYt.call("_guiRestyle",t,{"node.x":[r],"node.y":[i]},e.trace.index).then(function(){t._fullLayout._dragCover&&t._fullLayout._dragCover.remove()})}function IYt(e){var t=[],r;for(r=0;r<e.length;r++)e[r].originalX=(e[r].x0+e[r].x1)/2,e[r].originalY=(e[r].y0+e[r].y1)/2,t.indexOf(e[r].originalX)===-1&&t.push(e[r].originalX);for(t.sort(function(i,n){return i-n}),r=0;r<e.length;r++)e[r].originalLayerIndex=t.indexOf(e[r].originalX),e[r].originalLayer=e[r].originalLayerIndex/(t.length-1)}function iVe(e){e.lastDraggedX=e.x0+e.dx/2,e.lastDraggedY=e.y0+e.dy/2}function uVe(e){return function(t){return t.node.originalX===e.node.originalX}}function FYt(e){for(var t=0;t<e.length;t++)e[t].y=(e[t].y0+e[t].y1)/2,e[t].x=(e[t].x0+e[t].x1)/2}function qYt(e){for(var t=0;t<e.length;t++)e[t].y0=e[t].y-e[t].dy/2,e[t].y1=e[t].y0+e[t].dy,e[t].x0=e[t].x-e[t].dx/2,e[t].x1=e[t].x0+e[t].dx}fVe.exports=function(e,t,r,i,n){var a=e._context.staticPlot,o=!1;Py.ensureSingle(e._fullLayout._infolayer,"g","first-render",function(){o=!0});var s=e._fullLayout._dragCover,l=r.filter(function(b){return aVe(b).trace.visible}).map(MYt.bind(null,i)),u=t.selectAll("."+Ds.cn.sankey).data(l,B5);u.exit().remove(),u.enter().append("g").classed(Ds.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",a?"none":"auto").attr("transform",rVe),u.each(function(b,p){e._fullData[p]._sankey=b;var w="bgsankey-"+b.trace.uid+"-"+p;Py.ensureSingle(e._fullLayout._draggers,"rect",w),e._fullData[p]._bgRect=mT.select("."+w),e._fullData[p]._bgRect.style("pointer-events",a?"none":"all").attr("width",b.width).attr("height",b.height).attr("x",b.translateX).attr("y",b.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),u.transition().ease(Ds.ease).duration(Ds.duration).attr("transform",rVe);var f=u.selectAll("."+Ds.cn.sankeyLinks).data(mF,B5);f.enter().append("g").classed(Ds.cn.sankeyLinks,!0).style("fill","none");var c=f.selectAll("."+Ds.cn.sankeyLink).data(function(b){var p=b.graph.links;return p.filter(function(w){return w.value}).map(SYt.bind(null,b))},B5);c.enter().append("path").classed(Ds.cn.sankeyLink,!0).call(nVe,u,n.linkEvents),c.style("stroke",function(b){return NZ(b)?tb.tinyRGB(xT(b.linkLineColor)):b.tinyColorHue}).style("stroke-opacity",function(b){return NZ(b)?tb.opacity(b.linkLineColor):b.tinyColorAlpha}).style("fill",function(b){return b.tinyColorHue}).style("fill-opacity",function(b){return b.tinyColorAlpha}).style("stroke-width",function(b){return NZ(b)?b.linkLineWidth:1}).attr("d",GZ()),c.style("opacity",function(){return e._context.staticPlot||o||s?1:0}).transition().ease(Ds.ease).duration(Ds.duration).style("opacity",1),c.exit().transition().ease(Ds.ease).duration(Ds.duration).style("opacity",0).remove();var h=u.selectAll("."+Ds.cn.sankeyNodeSet).data(mF,B5);h.enter().append("g").classed(Ds.cn.sankeyNodeSet,!0),h.style("cursor",function(b){switch(b.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var v=h.selectAll("."+Ds.cn.sankeyNode).data(function(b){var p=b.graph.nodes;return IYt(p),p.map(kYt.bind(null,b))},B5);v.enter().append("g").classed(Ds.cn.sankeyNode,!0).call(UZ).style("opacity",function(b){return(e._context.staticPlot||o)&&!b.partOfGroup?1:0}),v.call(nVe,u,n.nodeEvents).call(LYt,c,n,e),v.transition().ease(Ds.ease).duration(Ds.duration).call(UZ).style("opacity",function(b){return b.partOfGroup?0:1}),v.exit().transition().ease(Ds.ease).duration(Ds.duration).style("opacity",0).remove();var d=v.selectAll("."+Ds.cn.nodeRect).data(mF);d.enter().append("rect").classed(Ds.cn.nodeRect,!0).call(tVe),d.style("stroke-width",function(b){return b.nodeLineWidth}).style("stroke",function(b){return tb.tinyRGB(xT(b.nodeLineColor))}).style("stroke-opacity",function(b){return tb.opacity(b.nodeLineColor)}).style("fill",function(b){return b.tinyColorHue}).style("fill-opacity",function(b){return b.tinyColorAlpha}),d.transition().ease(Ds.ease).duration(Ds.duration).call(tVe);var x=v.selectAll("."+Ds.cn.nodeLabel).data(mF);x.enter().append("text").classed(Ds.cn.nodeLabel,!0).style("cursor","default"),x.attr("data-notex",1).text(function(b){return b.node.label}).each(function(b){var p=mT.select(this);xYt.font(p,b.textFont),eVe.convertToTspans(p,e)}).attr("text-anchor",function(b){return b.horizontal&&b.left?"end":"start"}).attr("transform",function(b){var p=mT.select(this),w=eVe.lineCount(p),A=b.textFont.size*((w-1)*TYt-wYt),T=b.nodeLineWidth/2+AYt,k=((b.horizontal?b.visibleHeight:b.visibleWidth)-A)/2;b.horizontal&&(b.left?T=-T:T+=b.visibleWidth);var _=b.horizontal?"":"scale(-1,1)"+_Yt(90);return VZ(b.horizontal?T:k,b.horizontal?k:T)+_}),x.transition().ease(Ds.ease).duration(Ds.duration)}});var XZ=ie((Fmr,_Ve)=>{"use strict";var iv=Mi(),WZ=Zt(),xF=WZ.numberFormat,zYt=cVe(),_T=Ol(),OYt=_i(),D1=BZ().cn,N5=WZ._;function hVe(e){return e!==""}function bT(e,t){return e.filter(function(r){return r.key===t.traceId})}function vVe(e,t){iv.select(e).select("path").style("fill-opacity",t),iv.select(e).select("rect").style("fill-opacity",t)}function dVe(e){iv.select(e).select("text.name").style("fill","black")}function pVe(e){return function(t){return e.node.sourceLinks.indexOf(t.link)!==-1||e.node.targetLinks.indexOf(t.link)!==-1}}function gVe(e){return function(t){return t.node.sourceLinks.indexOf(e.link)!==-1||t.node.targetLinks.indexOf(e.link)!==-1}}function yVe(e,t,r){t&&r&&bT(r,t).selectAll("."+D1.sankeyLink).filter(pVe(t)).call(mVe.bind(0,t,r,!1))}function YZ(e,t,r){t&&r&&bT(r,t).selectAll("."+D1.sankeyLink).filter(pVe(t)).call(xVe.bind(0,t,r,!1))}function mVe(e,t,r,i){i.style("fill",function(n){if(!n.link.concentrationscale)return n.tinyColorHoverHue}).style("fill-opacity",function(n){if(!n.link.concentrationscale)return n.tinyColorHoverAlpha}),i.each(function(n){var a=n.link.label;a!==""&&bT(t,e).selectAll("."+D1.sankeyLink).filter(function(o){return o.link.label===a}).style("fill",function(o){if(!o.link.concentrationscale)return o.tinyColorHoverHue}).style("fill-opacity",function(o){if(!o.link.concentrationscale)return o.tinyColorHoverAlpha})}),r&&bT(t,e).selectAll("."+D1.sankeyNode).filter(gVe(e)).call(yVe)}function xVe(e,t,r,i){i.style("fill",function(n){return n.tinyColorHue}).style("fill-opacity",function(n){return n.tinyColorAlpha}),i.each(function(n){var a=n.link.label;a!==""&&bT(t,e).selectAll("."+D1.sankeyLink).filter(function(o){return o.link.label===a}).style("fill",function(o){return o.tinyColorHue}).style("fill-opacity",function(o){return o.tinyColorAlpha})}),r&&bT(t,e).selectAll(D1.sankeyNode).filter(gVe(e)).call(YZ)}function Vl(e,t){var r=e.hoverlabel||{},i=WZ.nestedProperty(r,t).get();return Array.isArray(i)?!1:i}_Ve.exports=function(t,r){for(var i=t._fullLayout,n=i._paper,a=i._size,o=0;o<t._fullData.length;o++)if(t._fullData[o].visible&&t._fullData[o].type===D1.sankey&&!t._fullData[o]._viewInitial){var s=t._fullData[o].node;t._fullData[o]._viewInitial={node:{groups:s.groups.slice(),x:s.x.slice(),y:s.y.slice()}}}var l=function(k,_){var E=_.link;E.originalEvent=iv.event,t._hoverdata=[E],_T.click(t,{target:!0})},u=function(k,_,E){t._fullLayout.hovermode!==!1&&(iv.select(k).call(mVe.bind(0,_,E,!0)),_.link.trace.link.hoverinfo!=="skip"&&(_.link.fullData=_.link.trace,t.emit("plotly_hover",{event:iv.event,points:[_.link]})))},f=N5(t,"source:")+" ",c=N5(t,"target:")+" ",h=N5(t,"concentration:")+" ",v=N5(t,"incoming flow count:")+" ",d=N5(t,"outgoing flow count:")+" ",x=function(k,_){if(t._fullLayout.hovermode===!1)return;var E=_.link.trace.link;if(E.hoverinfo==="none"||E.hoverinfo==="skip")return;var S=[];function g(U){var B,F;U.circular?(B=(U.circularPathData.leftInnerExtent+U.circularPathData.rightInnerExtent)/2,F=U.circularPathData.verticalFullExtent):(B=(U.source.x1+U.target.x0)/2,F=(U.y0+U.y1)/2);var N=[B,F];return U.trace.orientation==="v"&&N.reverse(),N[0]+=_.parent.translateX,N[1]+=_.parent.translateY,N}for(var C=0,M=0;M<_.flow.links.length;M++){var P=_.flow.links[M];if(!(t._fullLayout.hovermode==="closest"&&_.link.pointNumber!==P.pointNumber)){_.link.pointNumber===P.pointNumber&&(C=M),P.fullData=P.trace,E=_.link.trace.link;var D=g(P),q={valueLabel:xF(_.valueFormat)(P.value)+_.valueSuffix};S.push({x:D[0],y:D[1],name:q.valueLabel,text:[P.label||"",f+P.source.label,c+P.target.label,P.concentrationscale?h+xF("%0.2f")(P.flow.labelConcentration):""].filter(hVe).join("<br>"),color:Vl(E,"bgcolor")||OYt.addOpacity(P.color,1),borderColor:Vl(E,"bordercolor"),fontFamily:Vl(E,"font.family"),fontSize:Vl(E,"font.size"),fontColor:Vl(E,"font.color"),fontWeight:Vl(E,"font.weight"),fontStyle:Vl(E,"font.style"),fontVariant:Vl(E,"font.variant"),fontTextcase:Vl(E,"font.textcase"),fontLineposition:Vl(E,"font.lineposition"),fontShadow:Vl(E,"font.shadow"),nameLength:Vl(E,"namelength"),textAlign:Vl(E,"align"),idealAlign:iv.event.x<D[0]?"right":"left",hovertemplate:E.hovertemplate,hovertemplateLabels:q,eventData:[P]})}}var O=_T.loneHover(S,{container:i._hoverlayer.node(),outerContainer:i._paper.node(),gd:t,anchorIndex:C});O.each(function(){var U=this;_.link.concentrationscale||vVe(U,.65),dVe(U)})},b=function(k,_,E){t._fullLayout.hovermode!==!1&&(iv.select(k).call(xVe.bind(0,_,E,!0)),_.link.trace.link.hoverinfo!=="skip"&&(_.link.fullData=_.link.trace,t.emit("plotly_unhover",{event:iv.event,points:[_.link]})),_T.loneUnhover(i._hoverlayer.node()))},p=function(k,_,E){var S=_.node;S.originalEvent=iv.event,t._hoverdata=[S],iv.select(k).call(YZ,_,E),_T.click(t,{target:!0})},w=function(k,_,E){t._fullLayout.hovermode!==!1&&(iv.select(k).call(yVe,_,E),_.node.trace.node.hoverinfo!=="skip"&&(_.node.fullData=_.node.trace,t.emit("plotly_hover",{event:iv.event,points:[_.node]})))},A=function(k,_){if(t._fullLayout.hovermode!==!1){var E=_.node.trace.node;if(!(E.hoverinfo==="none"||E.hoverinfo==="skip")){var S=iv.select(k).select("."+D1.nodeRect),g=t._fullLayout._paperdiv.node().getBoundingClientRect(),C=S.node().getBoundingClientRect(),M=C.left-2-g.left,P=C.right+2-g.left,D=C.top+C.height/4-g.top,q={valueLabel:xF(_.valueFormat)(_.node.value)+_.valueSuffix};_.node.fullData=_.node.trace,t._fullLayout._calcInverseTransform(t);var O=t._fullLayout._invScaleX,U=t._fullLayout._invScaleY,B=_T.loneHover({x0:O*M,x1:O*P,y:U*D,name:xF(_.valueFormat)(_.node.value)+_.valueSuffix,text:[_.node.label,v+_.node.targetLinks.length,d+_.node.sourceLinks.length].filter(hVe).join("<br>"),color:Vl(E,"bgcolor")||_.tinyColorHue,borderColor:Vl(E,"bordercolor"),fontFamily:Vl(E,"font.family"),fontSize:Vl(E,"font.size"),fontColor:Vl(E,"font.color"),fontWeight:Vl(E,"font.weight"),fontStyle:Vl(E,"font.style"),fontVariant:Vl(E,"font.variant"),fontTextcase:Vl(E,"font.textcase"),fontLineposition:Vl(E,"font.lineposition"),fontShadow:Vl(E,"font.shadow"),nameLength:Vl(E,"namelength"),textAlign:Vl(E,"align"),idealAlign:"left",hovertemplate:E.hovertemplate,hovertemplateLabels:q,eventData:[_.node]},{container:i._hoverlayer.node(),outerContainer:i._paper.node(),gd:t});vVe(B,.85),dVe(B)}}},T=function(k,_,E){t._fullLayout.hovermode!==!1&&(iv.select(k).call(YZ,_,E),_.node.trace.node.hoverinfo!=="skip"&&(_.node.fullData=_.node.trace,t.emit("plotly_unhover",{event:iv.event,points:[_.node]})),_T.loneUnhover(i._hoverlayer.node()))};zYt(t,n,r,{width:a.w,height:a.h,margin:{t:a.t,r:a.r,b:a.b,l:a.l}},{linkEvents:{hover:u,follow:x,unhover:b,select:l},nodeEvents:{hover:w,follow:A,unhover:T,select:p}})}});var bVe=ie(rb=>{"use strict";var BYt=Zs().overrideAll,NYt=pc().getModuleCalcData,UYt=XZ(),VYt=Dg(),HYt=t0(),GYt=Yh(),YYt=Ef().prepSelect,ZZ=Zt(),WYt=Ti(),_F="sankey";rb.name=_F;rb.baseLayoutAttrOverrides=BYt({hoverlabel:VYt.hoverlabel},"plot","nested");rb.plot=function(e){var t=NYt(e.calcdata,_F)[0];UYt(e,t),rb.updateFx(e)};rb.clean=function(e,t,r,i){var n=i._has&&i._has(_F),a=t._has&&t._has(_F);n&&!a&&(i._paperdiv.selectAll(".sankey").remove(),i._paperdiv.selectAll(".bgsankey").remove())};rb.updateFx=function(e){for(var t=0;t<e._fullData.length;t++)XYt(e,t)};function XYt(e,t){var r=e._fullData[t],i=e._fullLayout,n=i.dragmode,a=i.dragmode==="pan"?"move":"crosshair",o=r._bgRect;if(o&&!(n==="pan"||n==="zoom")){HYt(o,a);var s={_id:"x",c2p:ZZ.identity,_offset:r._sankey.translateX,_length:r._sankey.width},l={_id:"y",c2p:ZZ.identity,_offset:r._sankey.translateY,_length:r._sankey.height},u={gd:e,element:o.node(),plotinfo:{id:t,xaxis:s,yaxis:l,fillRangeItems:ZZ.noop},subplot:t,xaxes:[s],yaxes:[l],doneFnCompleted:function(f){var c=e._fullData[t],h,v=c.node.groups.slice(),d=[];function x(A){for(var T=c._sankey.graph.nodes,k=0;k<T.length;k++)if(T[k].pointNumber===A)return T[k]}for(var b=0;b<f.length;b++){var p=x(f[b].pointNumber);if(p)if(p.group){for(var w=0;w<p.childrenNodes.length;w++)d.push(p.childrenNodes[w].pointNumber);v[p.pointNumber-c.node._count]=!1}else d.push(p.pointNumber)}h=v.filter(Boolean).concat([d]),WYt.call("_guiRestyle",e,{"node.groups":[h]},t)}};u.prepFn=function(f,c,h){YYt(f,c,h,u,n)},GYt.init(u)}}});var TVe=ie((zmr,wVe)=>{"use strict";wVe.exports=function(t,r){for(var i=t.cd,n=[],a=i[0].trace,o=a._sankey.graph.nodes,s=0;s<o.length;s++){var l=o[s];if(!l.partOfGroup){var u=[(l.x0+l.x1)/2,(l.y0+l.y1)/2];a.orientation==="v"&&u.reverse(),r&&r.contains(u,!1,s,t)&&n.push({pointNumber:l.pointNumber})}}return n}});var MVe=ie((Omr,AVe)=>{"use strict";AVe.exports={attributes:qZ(),supplyDefaults:kUe(),calc:DUe(),plot:XZ(),moduleType:"trace",name:"sankey",basePlotModule:bVe(),selectPoints:TVe(),categories:["noOpacity"],meta:{}}});var EVe=ie((Bmr,SVe)=>{"use strict";SVe.exports=MVe()});var CVe=ie(wT=>{"use strict";var kVe=js();wT.name="indicator";wT.plot=function(e,t,r,i){kVe.plotBasePlot(wT.name,e,t,r,i)};wT.clean=function(e,t,r,i){kVe.cleanBasePlot(wT.name,e,t,r,i)}});var KZ=ie((Umr,FVe)=>{"use strict";var I1=aa().extendFlat,PVe=aa().extendDeep,ZYt=Zs().overrideAll,RVe=Xs(),DVe=Qu(),jYt=fl().attributes,eu=gc(),KYt=ko().templatedArray,bF=Dw(),LVe=kl().descriptionOnlyNumbers,jZ=RVe({editType:"plot",colorEditType:"plot"}),U5={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:DVe.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},IVe={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},JYt=KYt("step",PVe({},U5,{range:IVe}));FVe.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:jYt({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:I1({},jZ,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:LVe("value")},font:I1({},jZ,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:LVe("value")},increasing:{symbol:{valType:"string",dflt:bF.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:bF.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:bF.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:bF.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:I1({},jZ,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:PVe({},U5,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:DVe.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:ZYt({range:IVe,visible:I1({},eu.visible,{dflt:!0}),tickmode:eu.minor.tickmode,nticks:eu.nticks,tick0:eu.tick0,dtick:eu.dtick,tickvals:eu.tickvals,ticktext:eu.ticktext,ticks:I1({},eu.ticks,{dflt:"outside"}),ticklen:eu.ticklen,tickwidth:eu.tickwidth,tickcolor:eu.tickcolor,ticklabelstep:eu.ticklabelstep,showticklabels:eu.showticklabels,labelalias:eu.labelalias,tickfont:RVe({}),tickangle:eu.tickangle,tickformat:eu.tickformat,tickformatstops:eu.tickformatstops,tickprefix:eu.tickprefix,showtickprefix:eu.showtickprefix,ticksuffix:eu.ticksuffix,showticksuffix:eu.showticksuffix,separatethousands:eu.separatethousands,exponentformat:eu.exponentformat,minexponent:eu.minexponent,showexponent:eu.showexponent,editType:"plot"},"plot"),steps:JYt,threshold:{line:{color:I1({},U5.line.color,{}),width:I1({},U5.line.width,{dflt:1}),editType:"plot"},thickness:I1({},U5.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}});var JZ=ie((Vmr,qVe)=>{"use strict";qVe.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}});var BVe=ie((Hmr,OVe)=>{"use strict";var Tg=Zt(),TF=KZ(),QYt=fl().defaults,zVe=ko(),$Yt=dh(),wF=JZ(),eWt=yx(),tWt=y2(),rWt=fm(),nWt=cm();function iWt(e,t,r,i){function n(_,E){return Tg.coerce(e,t,TF,_,E)}QYt(t,i,n),n("mode"),t._hasNumber=t.mode.indexOf("number")!==-1,t._hasDelta=t.mode.indexOf("delta")!==-1,t._hasGauge=t.mode.indexOf("gauge")!==-1;var a=n("value");t._range=[0,typeof a=="number"?1.5*a:1];var o=new Array(2),s;if(t._hasNumber){n("number.valueformat");var l=Tg.extendFlat({},i.font);l.size=void 0,Tg.coerceFont(n,"number.font",l),t.number.font.size===void 0&&(t.number.font.size=wF.defaultNumberFontSize,o[0]=!0),n("number.prefix"),n("number.suffix"),s=t.number.font.size}var u;if(t._hasDelta){var f=Tg.extendFlat({},i.font);f.size=void 0,Tg.coerceFont(n,"delta.font",f),t.delta.font.size===void 0&&(t.delta.font.size=(t._hasNumber?.5:1)*(s||wF.defaultNumberFontSize),o[1]=!0),n("delta.reference",t.value),n("delta.relative"),n("delta.valueformat",t.delta.relative?"2%":""),n("delta.increasing.symbol"),n("delta.increasing.color"),n("delta.decreasing.symbol"),n("delta.decreasing.color"),n("delta.position"),n("delta.prefix"),n("delta.suffix"),u=t.delta.font.size}t._scaleNumbers=(!t._hasNumber||o[0])&&(!t._hasDelta||o[1])||!1;var c=Tg.extendFlat({},i.font);c.size=.25*(s||u||wF.defaultNumberFontSize),Tg.coerceFont(n,"title.font",c),n("title.text");var h,v,d,x;function b(_,E){return Tg.coerce(h,v,TF.gauge,_,E)}function p(_,E){return Tg.coerce(d,x,TF.gauge.axis,_,E)}if(t._hasGauge){h=e.gauge,h||(h={}),v=zVe.newContainer(t,"gauge"),b("shape");var w=t._isBullet=t.gauge.shape==="bullet";w||n("title.align","center");var A=t._isAngular=t.gauge.shape==="angular";A||n("align","center"),b("bgcolor",i.paper_bgcolor),b("borderwidth"),b("bordercolor"),b("bar.color"),b("bar.line.color"),b("bar.line.width");var T=wF.valueThickness*(t.gauge.shape==="bullet"?.5:1);b("bar.thickness",T),$Yt(h,v,{name:"steps",handleItemDefaults:aWt}),b("threshold.value"),b("threshold.thickness"),b("threshold.line.width"),b("threshold.line.color"),d={},h&&(d=h.axis||{}),x=zVe.newContainer(v,"axis"),p("visible"),t._range=p("range",t._range);var k={font:i.font,noAutotickangles:!0,outerTicks:!0};eWt(d,x,p,"linear"),nWt(d,x,p,"linear",k),rWt(d,x,p,"linear",k),tWt(d,x,p,k)}else n("title.align","center"),n("align","center"),t._isAngular=t._isBullet=!1;t._length=null}function aWt(e,t){function r(i,n){return Tg.coerce(e,t,TF.gauge.steps,i,n)}r("color"),r("line.color"),r("line.width"),r("range"),r("thickness")}OVe.exports={supplyDefaults:iWt}});var UVe=ie((Gmr,NVe)=>{"use strict";function oWt(e,t){var r=[],i=t.value;typeof t._lastValue!="number"&&(t._lastValue=t.value);var n=t._lastValue,a=n;return t._hasDelta&&typeof t.delta.reference=="number"&&(a=t.delta.reference),r[0]={y:i,lastY:n,delta:i-a,relativeDelta:(i-a)/a},r}NVe.exports={calc:oWt}});var XVe=ie((Ymr,WVe)=>{"use strict";var sb=Mi(),sWt=(P_(),jb(L_)).interpolate,VVe=(P_(),jb(L_)).interpolateNumber,F1=Zt(),lWt=F1.strScale,H5=F1.strTranslate,uWt=F1.rad2deg,fWt=Mf().MID_SHIFT,ob=oa(),nb=JZ(),MF=ks(),Zc=Wi(),cWt=qM(),hWt=_L(),vWt=gc(),TT=_i(),QZ={left:"start",center:"middle",right:"end"},ib={left:0,center:.5,right:1},HVe=/[yzafpnµmkMGTPEZY]/;function G5(e){return e&&e.duration>0}WVe.exports=function(t,r,i,n){var a=t._fullLayout,o;G5(i)&&n&&(o=n()),F1.makeTraceGroups(a._indicatorlayer,r,"trace").each(function(s){var l=s[0],u=l.trace,f=sb.select(this),c=u._hasGauge,h=u._isAngular,v=u._isBullet,d=u.domain,x={w:a._size.w*(d.x[1]-d.x[0]),h:a._size.h*(d.y[1]-d.y[0]),l:a._size.l+a._size.w*d.x[0],r:a._size.r+a._size.w*(1-d.x[1]),t:a._size.t+a._size.h*(1-d.y[1]),b:a._size.b+a._size.h*d.y[0]},b=x.l+x.w/2,p=x.t+x.h/2,w=Math.min(x.w/2,x.h),A=nb.innerRadius*w,T,k,_,E=u.align||"center";if(k=p,!c)T=x.l+ib[E]*x.w,_=function(B){return GVe(B,x.w,x.h)};else if(h&&(T=b,k=p+w/2,_=function(B){return mWt(B,.9*A)}),v){var S=nb.bulletPadding,g=1-nb.bulletNumberDomainSize+S;T=x.l+(g+(1-g)*ib[E])*x.w,_=function(B){return GVe(B,(nb.bulletNumberDomainSize-S)*x.w,x.h)}}gWt(t,f,s,{numbersX:T,numbersY:k,numbersScaler:_,transitionOpts:i,onComplete:o});var C,M;c&&(C={range:u.gauge.axis.range,color:u.gauge.bgcolor,line:{color:u.gauge.bordercolor,width:0},thickness:1},M={range:u.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:u.gauge.bordercolor,width:u.gauge.borderwidth},thickness:1});var P=f.selectAll("g.angular").data(h?s:[]);P.exit().remove();var D=f.selectAll("g.angularaxis").data(h?s:[]);D.exit().remove(),h&&pWt(t,f,s,{radius:w,innerRadius:A,gauge:P,layer:D,size:x,gaugeBg:C,gaugeOutline:M,transitionOpts:i,onComplete:o});var q=f.selectAll("g.bullet").data(v?s:[]);q.exit().remove();var O=f.selectAll("g.bulletaxis").data(v?s:[]);O.exit().remove(),v&&dWt(t,f,s,{gauge:q,layer:O,size:x,gaugeBg:C,gaugeOutline:M,transitionOpts:i,onComplete:o});var U=f.selectAll("text.title").data(s);U.exit().remove(),U.enter().append("text").classed("title",!0),U.attr("text-anchor",function(){return v?QZ.right:QZ[u.title.align]}).text(u.title.text).call(ob.font,u.title.font).call(MF.convertToTspans,t),U.attr("transform",function(){var B=x.l+x.w*ib[u.title.align],F,N=nb.titlePadding,X=ob.bBox(U.node());if(c){if(h)if(u.gauge.axis.visible){var K=ob.bBox(D.node());F=K.top-N-X.bottom}else F=x.t+x.h/2-w/2-X.bottom-N;v&&(F=k-(X.top+X.bottom)/2,B=x.l-nb.bulletPadding*x.w)}else F=u._numbersTop-N-X.bottom;return H5(B,F)})})};function dWt(e,t,r,i){var n=r[0].trace,a=i.gauge,o=i.layer,s=i.gaugeBg,l=i.gaugeOutline,u=i.size,f=n.domain,c=i.transitionOpts,h=i.onComplete,v,d,x,b,p;a.enter().append("g").classed("bullet",!0),a.attr("transform",H5(u.l,u.t)),o.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),o.selectAll("g.xbulletaxistick,path,text").remove();var w=u.h,A=n.gauge.bar.thickness*w,T=f.x[0],k=f.x[0]+(f.x[1]-f.x[0])*(n._hasNumber||n._hasDelta?1-nb.bulletNumberDomainSize:1);v=V5(e,n.gauge.axis),v._id="xbulletaxis",v.domain=[T,k],v.setScale(),d=Zc.calcTicks(v),x=Zc.makeTransTickFn(v),b=Zc.getTickSigns(v)[2],p=u.t+u.h,v.visible&&(Zc.drawTicks(e,v,{vals:v.ticks==="inside"?Zc.clipEnds(v,d):d,layer:o,path:Zc.makeTickPath(v,p,b),transFn:x}),Zc.drawLabels(e,v,{vals:d,layer:o,transFn:x,labelFns:Zc.makeLabelFns(v,p)}));function _(D){D.attr("width",function(q){return Math.max(0,v.c2p(q.range[1])-v.c2p(q.range[0]))}).attr("x",function(q){return v.c2p(q.range[0])}).attr("y",function(q){return .5*(1-q.thickness)*w}).attr("height",function(q){return q.thickness*w})}var E=[s].concat(n.gauge.steps),S=a.selectAll("g.bg-bullet").data(E);S.enter().append("g").classed("bg-bullet",!0).append("rect"),S.select("rect").call(_).call(ab),S.exit().remove();var g=a.selectAll("g.value-bullet").data([n.gauge.bar]);g.enter().append("g").classed("value-bullet",!0).append("rect"),g.select("rect").attr("height",A).attr("y",(w-A)/2).call(ab),G5(c)?g.select("rect").transition().duration(c.duration).ease(c.easing).each("end",function(){h&&h()}).each("interrupt",function(){h&&h()}).attr("width",Math.max(0,v.c2p(Math.min(n.gauge.axis.range[1],r[0].y)))):g.select("rect").attr("width",typeof r[0].y=="number"?Math.max(0,v.c2p(Math.min(n.gauge.axis.range[1],r[0].y))):0),g.exit().remove();var C=r.filter(function(){return n.gauge.threshold.value||n.gauge.threshold.value===0}),M=a.selectAll("g.threshold-bullet").data(C);M.enter().append("g").classed("threshold-bullet",!0).append("line"),M.select("line").attr("x1",v.c2p(n.gauge.threshold.value)).attr("x2",v.c2p(n.gauge.threshold.value)).attr("y1",(1-n.gauge.threshold.thickness)/2*w).attr("y2",(1-(1-n.gauge.threshold.thickness)/2)*w).call(TT.stroke,n.gauge.threshold.line.color).style("stroke-width",n.gauge.threshold.line.width),M.exit().remove();var P=a.selectAll("g.gauge-outline").data([l]);P.enter().append("g").classed("gauge-outline",!0).append("rect"),P.select("rect").call(_).call(ab),P.exit().remove()}function pWt(e,t,r,i){var n=r[0].trace,a=i.size,o=i.radius,s=i.innerRadius,l=i.gaugeBg,u=i.gaugeOutline,f=[a.l+a.w/2,a.t+a.h/2+o/2],c=i.gauge,h=i.layer,v=i.transitionOpts,d=i.onComplete,x=Math.PI/2;function b(ne){var fe=n.gauge.axis.range[0],ue=n.gauge.axis.range[1],ee=(ne-fe)/(ue-fe)*Math.PI-x;return ee<-x?-x:ee>x?x:ee}function p(ne){return sb.svg.arc().innerRadius((s+o)/2-ne/2*(o-s)).outerRadius((s+o)/2+ne/2*(o-s)).startAngle(-x)}function w(ne){ne.attr("d",function(fe){return p(fe.thickness).startAngle(b(fe.range[0])).endAngle(b(fe.range[1]))()})}var A,T,k,_;c.enter().append("g").classed("angular",!0),c.attr("transform",H5(f[0],f[1])),h.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),h.selectAll("g.xangularaxistick,path,text").remove(),A=V5(e,n.gauge.axis),A.type="linear",A.range=n.gauge.axis.range,A._id="xangularaxis",A.ticklabeloverflow="allow",A.setScale();var E=function(ne){return(A.range[0]-ne.x)/(A.range[1]-A.range[0])*Math.PI+Math.PI},S={},g=Zc.makeLabelFns(A,0),C=g.labelStandoff;S.xFn=function(ne){var fe=E(ne);return Math.cos(fe)*C},S.yFn=function(ne){var fe=E(ne),ue=Math.sin(fe)>0?.2:1;return-Math.sin(fe)*(C+ne.fontSize*ue)+Math.abs(Math.cos(fe))*(ne.fontSize*fWt)},S.anchorFn=function(ne){var fe=E(ne),ue=Math.cos(fe);return Math.abs(ue)<.1?"middle":ue>0?"start":"end"},S.heightFn=function(ne,fe,ue){var ee=E(ne);return-.5*(1+Math.sin(ee))*ue};var M=function(ne){return H5(f[0]+o*Math.cos(ne),f[1]-o*Math.sin(ne))};k=function(ne){return M(E(ne))};var P=function(ne){var fe=E(ne);return M(fe)+"rotate("+-uWt(fe)+")"};if(T=Zc.calcTicks(A),_=Zc.getTickSigns(A)[2],A.visible){_=A.ticks==="inside"?-1:1;var D=(A.linewidth||1)/2;Zc.drawTicks(e,A,{vals:T,layer:h,path:"M"+_*D+",0h"+_*A.ticklen,transFn:P}),Zc.drawLabels(e,A,{vals:T,layer:h,transFn:k,labelFns:S})}var q=[l].concat(n.gauge.steps),O=c.selectAll("g.bg-arc").data(q);O.enter().append("g").classed("bg-arc",!0).append("path"),O.select("path").call(w).call(ab),O.exit().remove();var U=p(n.gauge.bar.thickness),B=c.selectAll("g.value-arc").data([n.gauge.bar]);B.enter().append("g").classed("value-arc",!0).append("path");var F=B.select("path");G5(v)?(F.transition().duration(v.duration).ease(v.easing).each("end",function(){d&&d()}).each("interrupt",function(){d&&d()}).attrTween("d",yWt(U,b(r[0].lastY),b(r[0].y))),n._lastValue=r[0].y):F.attr("d",typeof r[0].y=="number"?U.endAngle(b(r[0].y)):"M0,0Z"),F.call(ab),B.exit().remove(),q=[];var N=n.gauge.threshold.value;(N||N===0)&&q.push({range:[N,N],color:n.gauge.threshold.color,line:{color:n.gauge.threshold.line.color,width:n.gauge.threshold.line.width},thickness:n.gauge.threshold.thickness});var X=c.selectAll("g.threshold-arc").data(q);X.enter().append("g").classed("threshold-arc",!0).append("path"),X.select("path").call(w).call(ab),X.exit().remove();var K=c.selectAll("g.gauge-outline").data([u]);K.enter().append("g").classed("gauge-outline",!0).append("path"),K.select("path").call(w).call(ab),K.exit().remove()}function gWt(e,t,r,i){var n=r[0].trace,a=i.numbersX,o=i.numbersY,s=n.align||"center",l=QZ[s],u=i.transitionOpts,f=i.onComplete,c=F1.ensureSingle(t,"g","numbers"),h,v,d,x=[];n._hasNumber&&x.push("number"),n._hasDelta&&(x.push("delta"),n.delta.position==="left"&&x.reverse());var b=c.selectAll("text").data(x);b.enter().append("text"),b.attr("text-anchor",function(){return l}).attr("class",function(M){return M}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),b.exit().remove();function p(M,P,D,q){if(M.match("s")&&D>=0!=q>=0&&!P(D).slice(-1).match(HVe)&&!P(q).slice(-1).match(HVe)){var O=M.slice().replace("s","f").replace(/\d+/,function(B){return parseInt(B)-1}),U=V5(e,{tickformat:O});return function(B){return Math.abs(B)<1?Zc.tickText(U,B).text:P(B)}}else return P}function w(){var M=V5(e,{tickformat:n.number.valueformat},n._range);M.setScale(),Zc.prepTicks(M);var P=function(B){return Zc.tickText(M,B).text},D=n.number.suffix,q=n.number.prefix,O=c.select("text.number");function U(){var B=typeof r[0].y=="number"?q+P(r[0].y)+D:"-";O.text(B).call(ob.font,n.number.font).call(MF.convertToTspans,e)}return G5(u)?O.transition().duration(u.duration).ease(u.easing).each("end",function(){U(),f&&f()}).each("interrupt",function(){U(),f&&f()}).attrTween("text",function(){var B=sb.select(this),F=VVe(r[0].lastY,r[0].y);n._lastValue=r[0].y;var N=p(n.number.valueformat,P,r[0].lastY,r[0].y);return function(X){B.text(q+N(F(X))+D)}}):U(),h=YVe(q+P(r[0].y)+D,n.number.font,l,e),O}function A(){var M=V5(e,{tickformat:n.delta.valueformat},n._range);M.setScale(),Zc.prepTicks(M);var P=function(X){return Zc.tickText(M,X).text},D=n.delta.suffix,q=n.delta.prefix,O=function(X){var K=n.delta.relative?X.relativeDelta:X.delta;return K},U=function(X,K){return X===0||typeof X!="number"||isNaN(X)?"-":(X>0?n.delta.increasing.symbol:n.delta.decreasing.symbol)+q+K(X)+D},B=function(X){return X.delta>=0?n.delta.increasing.color:n.delta.decreasing.color};n._deltaLastValue===void 0&&(n._deltaLastValue=O(r[0]));var F=c.select("text.delta");F.call(ob.font,n.delta.font).call(TT.fill,B({delta:n._deltaLastValue}));function N(){F.text(U(O(r[0]),P)).call(TT.fill,B(r[0])).call(MF.convertToTspans,e)}return G5(u)?F.transition().duration(u.duration).ease(u.easing).tween("text",function(){var X=sb.select(this),K=O(r[0]),ne=n._deltaLastValue,fe=p(n.delta.valueformat,P,ne,K),ue=VVe(ne,K);return n._deltaLastValue=K,function(ee){X.text(U(ue(ee),fe)),X.call(TT.fill,B({delta:ue(ee)}))}}).each("end",function(){N(),f&&f()}).each("interrupt",function(){N(),f&&f()}):N(),v=YVe(U(O(r[0]),P),n.delta.font,l,e),F}var T=n.mode+n.align,k;if(n._hasDelta&&(k=A(),T+=n.delta.position+n.delta.font.size+n.delta.font.family+n.delta.valueformat,T+=n.delta.increasing.symbol+n.delta.decreasing.symbol,d=v),n._hasNumber&&(w(),T+=n.number.font.size+n.number.font.family+n.number.valueformat+n.number.suffix+n.number.prefix,d=h),n._hasDelta&&n._hasNumber){var _=[(h.left+h.right)/2,(h.top+h.bottom)/2],E=[(v.left+v.right)/2,(v.top+v.bottom)/2],S,g,C=.75*n.delta.font.size;n.delta.position==="left"&&(S=AF(n,"deltaPos",0,-1*(h.width*ib[n.align]+v.width*(1-ib[n.align])+C),T,Math.min),g=_[1]-E[1],d={width:h.width+v.width+C,height:Math.max(h.height,v.height),left:v.left+S,right:h.right,top:Math.min(h.top,v.top+g),bottom:Math.max(h.bottom,v.bottom+g)}),n.delta.position==="right"&&(S=AF(n,"deltaPos",0,h.width*(1-ib[n.align])+v.width*ib[n.align]+C,T,Math.max),g=_[1]-E[1],d={width:h.width+v.width+C,height:Math.max(h.height,v.height),left:h.left,right:v.right+S,top:Math.min(h.top,v.top+g),bottom:Math.max(h.bottom,v.bottom+g)}),n.delta.position==="bottom"&&(S=null,g=v.height,d={width:Math.max(h.width,v.width),height:h.height+v.height,left:Math.min(h.left,v.left),right:Math.max(h.right,v.right),top:h.bottom-h.height,bottom:h.bottom+v.height}),n.delta.position==="top"&&(S=null,g=h.top,d={width:Math.max(h.width,v.width),height:h.height+v.height,left:Math.min(h.left,v.left),right:Math.max(h.right,v.right),top:h.bottom-h.height-v.height,bottom:h.bottom}),k.attr({dx:S,dy:g})}(n._hasNumber||n._hasDelta)&&c.attr("transform",function(){var M=i.numbersScaler(d);T+=M[2];var P=AF(n,"numbersScale",1,M[0],T,Math.min),D;n._scaleNumbers||(P=1),n._isAngular?D=o-P*d.bottom:D=o-P*(d.top+d.bottom)/2,n._numbersTop=P*d.top+D;var q=d[s];s==="center"&&(q=(d.left+d.right)/2);var O=a-P*q;return O=AF(n,"numbersTranslate",0,O,T,Math.max),H5(O,D)+lWt(P)})}function ab(e){e.each(function(t){TT.stroke(sb.select(this),t.line.color)}).each(function(t){TT.fill(sb.select(this),t.color)}).style("stroke-width",function(t){return t.line.width})}function yWt(e,t,r){return function(){var i=sWt(t,r);return function(n){return e.endAngle(i(n))()}}}function V5(e,t,r){var i=e._fullLayout,n=F1.extendFlat({type:"linear",ticks:"outside",range:r,showline:!0},t),a={type:"linear",_id:"x"+t._id},o={letter:"x",font:i.font,noAutotickangles:!0,noHover:!0,noTickson:!0};function s(l,u){return F1.coerce(n,a,vWt,l,u)}return cWt(n,a,s,o,i),hWt(n,a,s,o),a}function GVe(e,t,r){var i=Math.min(t/e.width,r/e.height);return[i,e,t+"x"+r]}function mWt(e,t){var r=Math.sqrt(e.width/2*(e.width/2)+e.height*e.height),i=t/r;return[i,e,t]}function YVe(e,t,r,i){var n=document.createElementNS("http://www.w3.org/2000/svg","text"),a=sb.select(n);return a.text(e).attr("x",0).attr("y",0).attr("text-anchor",r).attr("data-unformatted",e).call(MF.convertToTspans,i).call(ob.font,t),ob.bBox(a.node())}function AF(e,t,r,i,n,a){var o="_cache"+t;e[o]&&e[o].key===n||(e[o]={key:n,value:r});var s=F1.aggNums(a,null,[e[o].value,i],2);return e[o].value=s,s}});var jVe=ie((Wmr,ZVe)=>{"use strict";ZVe.exports={moduleType:"trace",name:"indicator",basePlotModule:CVe(),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:KZ(),supplyDefaults:BVe().supplyDefaults,calc:UVe().calc,plot:XVe(),meta:{}}});var JVe=ie((Xmr,KVe)=>{"use strict";KVe.exports=jVe()});var $Z=ie((Zmr,tHe)=>{"use strict";var QVe=qx(),SF=aa().extendFlat,xWt=Zs().overrideAll,$Ve=Xs(),_Wt=fl().attributes,eHe=kl().descriptionOnlyNumbers,bWt=tHe.exports=xWt({domain:_Wt({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:eHe("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:SF({},QVe.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:SF({},$Ve({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:eHe("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:SF({},QVe.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:SF({},$Ve({arrayOk:!0}))}},"calc","from-root");bWt.transforms=void 0});var nHe=ie((jmr,rHe)=>{"use strict";var ej=Zt(),wWt=$Z(),TWt=fl().defaults;function AWt(e,t){for(var r=e.columnorder||[],i=e.header.values.length,n=r.slice(0,i),a=n.slice().sort(function(l,u){return l-u}),o=n.map(function(l){return a.indexOf(l)}),s=o.length;s<i;s++)o.push(s);t("columnorder",o)}rHe.exports=function(t,r,i,n){function a(o,s){return ej.coerce(t,r,wWt,o,s)}TWt(r,n,a),a("columnwidth"),a("header.values"),a("header.format"),a("header.align"),a("header.prefix"),a("header.suffix"),a("header.height"),a("header.line.width"),a("header.line.color"),a("header.fill.color"),ej.coerceFont(a,"header.font",n.font),AWt(r,a),a("cells.values"),a("cells.format"),a("cells.align"),a("cells.prefix"),a("cells.suffix"),a("cells.height"),a("cells.line.width"),a("cells.line.color"),a("cells.fill.color"),ej.coerceFont(a,"cells.font",n.font),r._length=null}});var aHe=ie((Kmr,iHe)=>{"use strict";var MWt=mg().wrap;iHe.exports=function(){return MWt({})}});var tj=ie((Jmr,oHe)=>{"use strict";oHe.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}});var pHe=ie((Qmr,dHe)=>{"use strict";var sHe=tj(),nj=aa().extendFlat,SWt=la(),EWt=hh().isTypedArray,EF=hh().isArrayOrTypedArray;dHe.exports=function(t,r){var i=rj(r.cells.values),n=function(g){return g.slice(r.header.values.length,g.length)},a=rj(r.header.values);a.length&&!a[0].length&&(a[0]=[""],a=rj(a));var o=a.concat(n(i).map(function(){return vHe((a[0]||[""]).length)})),s=r.domain,l=Math.floor(t._fullLayout._size.w*(s.x[1]-s.x[0])),u=Math.floor(t._fullLayout._size.h*(s.y[1]-s.y[0])),f=r.header.values.length?o[0].map(function(){return r.header.height}):[sHe.emptyHeaderHeight],c=i.length?i[0].map(function(){return r.cells.height}):[],h=f.reduce(lHe,0),v=u-h,d=v+sHe.uplift,x=cHe(c,d),b=cHe(f,h),p=fHe(b,[]),w=fHe(x,p),A={},T=r._fullInput.columnorder;EF(T)&&(T=Array.from(T)),T=T.concat(n(i.map(function(g,C){return C})));var k=o.map(function(g,C){var M=EF(r.columnwidth)?r.columnwidth[Math.min(C,r.columnwidth.length-1)]:r.columnwidth;return SWt(M)?Number(M):1}),_=k.reduce(lHe,0);k=k.map(function(g){return g/_*l});var E=Math.max(ij(r.header.line.width),ij(r.cells.line.width)),S={key:r.uid+t._context.staticPlot,translateX:s.x[0]*t._fullLayout._size.w,translateY:t._fullLayout._size.h*(1-s.y[1]),size:t._fullLayout._size,width:l,maxLineWidth:E,height:u,columnOrder:T,groupHeight:u,rowBlocks:w,headerRowBlocks:p,scrollY:0,cells:nj({},r.cells,{values:i}),headerCells:nj({},r.header,{values:o}),gdColumns:o.map(function(g){return g[0]}),gdColumnsOriginalOrder:o.map(function(g){return g[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:o.map(function(g,C){var M=A[g];A[g]=(M||0)+1;var P=g+"__"+A[g];return{key:P,label:g,specIndex:C,xIndex:T[C],xScale:uHe,x:void 0,calcdata:void 0,columnWidth:k[C]}})};return S.columns.forEach(function(g){g.calcdata=S,g.x=uHe(g)}),S};function ij(e){if(EF(e)){for(var t=0,r=0;r<e.length;r++)t=Math.max(t,ij(e[r]));return t}return e}function lHe(e,t){return e+t}function rj(e){var t=e.slice(),r=1/0,i=0,n;for(n=0;n<t.length;n++)EWt(t[n])?t[n]=Array.from(t[n]):EF(t[n])||(t[n]=[t[n]]),r=Math.min(r,t[n].length),i=Math.max(i,t[n].length);if(r!==i)for(n=0;n<t.length;n++){var a=i-t[n].length;a&&(t[n]=t[n].concat(vHe(a)))}return t}function vHe(e){for(var t=new Array(e),r=0;r<e;r++)t[r]="";return t}function uHe(e){return e.calcdata.columns.reduce(function(t,r){return r.xIndex<e.xIndex?t+r.columnWidth:t},0)}function fHe(e,t){var r=Object.keys(e);return r.map(function(i){return nj({},e[i],{auxiliaryBlocks:t})})}function cHe(e,t){for(var r={},i,n=0,a=0,o=hHe(),s=0,l=0,u=0;u<e.length;u++)i=e[u],o.rows.push({rowIndex:u,rowHeight:i}),a+=i,(a>=t||u===e.length-1)&&(r[n]=o,o.key=l++,o.firstRowIndex=s,o.lastRowIndex=u,o=hHe(),n+=a,s=u+1,a=0);return r}function hHe(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}});var gHe=ie(aj=>{"use strict";var kF=aa().extendFlat;aj.splitToPanels=function(e){var t=[0,0],r=kF({},e,{key:"header",type:"header",page:0,prevPages:t,currentRepaint:[null,null],dragHandle:!0,values:e.calcdata.headerCells.values[e.specIndex],rowBlocks:e.calcdata.headerRowBlocks,calcdata:kF({},e.calcdata,{cells:e.calcdata.headerCells})}),i=kF({},e,{key:"cells1",type:"cells",page:0,prevPages:t,currentRepaint:[null,null],dragHandle:!1,values:e.calcdata.cells.values[e.specIndex],rowBlocks:e.calcdata.rowBlocks}),n=kF({},e,{key:"cells2",type:"cells",page:1,prevPages:t,currentRepaint:[null,null],dragHandle:!1,values:e.calcdata.cells.values[e.specIndex],rowBlocks:e.calcdata.rowBlocks});return[i,n,r]};aj.splitToCells=function(e){var t=kWt(e);return(e.values||[]).slice(t[0],t[1]).map(function(r,i){var n=typeof r=="string"&&r.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:i+n,key:t[0]+i,column:e,calcdata:e.calcdata,page:e.page,rowBlocks:e.rowBlocks,value:r}})};function kWt(e){var t=e.rowBlocks[e.page],r=t?t.rows[0].rowIndex:0,i=t?r+t.rows.length:0;return[r,i]}});var pj=ie((e1r,EHe)=>{"use strict";var Ii=tj(),Tl=Mi(),oj=Zt(),CWt=oj.numberFormat,Is=mg(),sj=oa(),LWt=ks(),PWt=Zt().raiseToTop,Hp=Zt().strTranslate,RWt=Zt().cancelTransition,DWt=pHe(),THe=gHe(),yHe=_i();EHe.exports=function(t,r){var i=!t._context.staticPlot,n=t._fullLayout._paper.selectAll("."+Ii.cn.table).data(r.map(function(w){var A=Is.unwrap(w),T=A.trace;return DWt(t,T)}),Is.keyFun);n.exit().remove(),n.enter().append("g").classed(Ii.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),n.attr("width",function(w){return w.width+w.size.l+w.size.r}).attr("height",function(w){return w.height+w.size.t+w.size.b}).attr("transform",function(w){return Hp(w.translateX,w.translateY)});var a=n.selectAll("."+Ii.cn.tableControlView).data(Is.repeat,Is.keyFun),o=a.enter().append("g").classed(Ii.cn.tableControlView,!0).style("box-sizing","content-box");if(i){var s="onwheel"in document?"wheel":"mousewheel";o.on("mousemove",function(w){a.filter(function(A){return w===A}).call(Y5,t)}).on(s,function(w){if(!w.scrollbarState.wheeling){w.scrollbarState.wheeling=!0;var A=w.scrollY+Tl.event.deltaY,T=LF(t,a,null,A)(w);T||(Tl.event.stopPropagation(),Tl.event.preventDefault()),w.scrollbarState.wheeling=!1}}).call(Y5,t,!0)}a.attr("transform",function(w){return Hp(w.size.l,w.size.t)});var l=a.selectAll("."+Ii.cn.scrollBackground).data(Is.repeat,Is.keyFun);l.enter().append("rect").classed(Ii.cn.scrollBackground,!0).attr("fill","none"),l.attr("width",function(w){return w.width}).attr("height",function(w){return w.height}),a.each(function(w){sj.setClipUrl(Tl.select(this),mHe(t,w),t)});var u=a.selectAll("."+Ii.cn.yColumn).data(function(w){return w.columns},Is.keyFun);u.enter().append("g").classed(Ii.cn.yColumn,!0),u.exit().remove(),u.attr("transform",function(w){return Hp(w.x,0)}),i&&u.call(Tl.behavior.drag().origin(function(w){var A=Tl.select(this);return bHe(A,w,-Ii.uplift),PWt(this),w.calcdata.columnDragInProgress=!0,Y5(a.filter(function(T){return w.calcdata.key===T.key}),t),w}).on("drag",function(w){var A=Tl.select(this),T=function(E){return(w===E?Tl.event.x:E.x)+E.columnWidth/2};w.x=Math.max(-Ii.overdrag,Math.min(w.calcdata.width+Ii.overdrag-w.columnWidth,Tl.event.x));var k=AHe(u).filter(function(E){return E.calcdata.key===w.calcdata.key}),_=k.sort(function(E,S){return T(E)-T(S)});_.forEach(function(E,S){E.xIndex=S,E.x=w===E?E.x:E.xScale(E)}),u.filter(function(E){return w!==E}).transition().ease(Ii.transitionEase).duration(Ii.transitionDuration).attr("transform",function(E){return Hp(E.x,0)}),A.call(RWt).attr("transform",Hp(w.x,-Ii.uplift))}).on("dragend",function(w){var A=Tl.select(this),T=w.calcdata;w.x=w.xScale(w),w.calcdata.columnDragInProgress=!1,bHe(A,w,0),HWt(t,T,T.columns.map(function(k){return k.xIndex}))})),u.each(function(w){sj.setClipUrl(Tl.select(this),xHe(t,w),t)});var f=u.selectAll("."+Ii.cn.columnBlock).data(THe.splitToPanels,Is.keyFun);f.enter().append("g").classed(Ii.cn.columnBlock,!0).attr("id",function(w){return w.key}),f.style("cursor",function(w){return w.dragHandle?"ew-resize":w.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var c=f.filter(GWt),h=f.filter(hj);i&&h.call(Tl.behavior.drag().origin(function(w){return Tl.event.stopPropagation(),w}).on("drag",LF(t,a,-1)).on("dragend",function(){})),lj(t,a,c,f),lj(t,a,h,f);var v=a.selectAll("."+Ii.cn.scrollAreaClip).data(Is.repeat,Is.keyFun);v.enter().append("clipPath").classed(Ii.cn.scrollAreaClip,!0).attr("id",function(w){return mHe(t,w)});var d=v.selectAll("."+Ii.cn.scrollAreaClipRect).data(Is.repeat,Is.keyFun);d.enter().append("rect").classed(Ii.cn.scrollAreaClipRect,!0).attr("x",-Ii.overdrag).attr("y",-Ii.uplift).attr("fill","none"),d.attr("width",function(w){return w.width+2*Ii.overdrag}).attr("height",function(w){return w.height+Ii.uplift});var x=u.selectAll("."+Ii.cn.columnBoundary).data(Is.repeat,Is.keyFun);x.enter().append("g").classed(Ii.cn.columnBoundary,!0);var b=u.selectAll("."+Ii.cn.columnBoundaryClippath).data(Is.repeat,Is.keyFun);b.enter().append("clipPath").classed(Ii.cn.columnBoundaryClippath,!0),b.attr("id",function(w){return xHe(t,w)});var p=b.selectAll("."+Ii.cn.columnBoundaryRect).data(Is.repeat,Is.keyFun);p.enter().append("rect").classed(Ii.cn.columnBoundaryRect,!0).attr("fill","none"),p.attr("width",function(w){return w.columnWidth+2*CF(w)}).attr("height",function(w){return w.calcdata.height+2*CF(w)+Ii.uplift}).attr("x",function(w){return-CF(w)}).attr("y",function(w){return-CF(w)}),vj(null,h,a)};function CF(e){return Math.ceil(e.calcdata.maxLineWidth/2)}function mHe(e,t){return"clip"+e._fullLayout._uid+"_scrollAreaBottomClip_"+t.key}function xHe(e,t){return"clip"+e._fullLayout._uid+"_columnBoundaryClippath_"+t.calcdata.key+"_"+t.specIndex}function AHe(e){return[].concat.apply([],e.map(function(t){return t})).map(function(t){return t.__data__})}function Y5(e,t,r){function i(u){var f=u.rowBlocks;return fj(f,f.length-1)+(f.length?PF(f[f.length-1],1/0):1)}var n=e.selectAll("."+Ii.cn.scrollbarKit).data(Is.repeat,Is.keyFun);n.enter().append("g").classed(Ii.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),n.each(function(u){var f=u.scrollbarState;f.totalHeight=i(u),f.scrollableAreaHeight=u.groupHeight-uj(u),f.currentlyVisibleHeight=Math.min(f.totalHeight,f.scrollableAreaHeight),f.ratio=f.currentlyVisibleHeight/f.totalHeight,f.barLength=Math.max(f.ratio*f.currentlyVisibleHeight,Ii.goldenRatio*Ii.scrollbarWidth),f.barWiggleRoom=f.currentlyVisibleHeight-f.barLength,f.wiggleRoom=Math.max(0,f.totalHeight-f.scrollableAreaHeight),f.topY=f.barWiggleRoom===0?0:u.scrollY/f.wiggleRoom*f.barWiggleRoom,f.bottomY=f.topY+f.barLength,f.dragMultiplier=f.wiggleRoom/f.barWiggleRoom}).attr("transform",function(u){var f=u.width+Ii.scrollbarWidth/2+Ii.scrollbarOffset;return Hp(f,uj(u))});var a=n.selectAll("."+Ii.cn.scrollbar).data(Is.repeat,Is.keyFun);a.enter().append("g").classed(Ii.cn.scrollbar,!0);var o=a.selectAll("."+Ii.cn.scrollbarSlider).data(Is.repeat,Is.keyFun);o.enter().append("g").classed(Ii.cn.scrollbarSlider,!0),o.attr("transform",function(u){return Hp(0,u.scrollbarState.topY||0)});var s=o.selectAll("."+Ii.cn.scrollbarGlyph).data(Is.repeat,Is.keyFun);s.enter().append("line").classed(Ii.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",Ii.scrollbarWidth).attr("stroke-linecap","round").attr("y1",Ii.scrollbarWidth/2),s.attr("y2",function(u){return u.scrollbarState.barLength-Ii.scrollbarWidth/2}).attr("stroke-opacity",function(u){return u.columnDragInProgress||!u.scrollbarState.barWiggleRoom||r?0:.4}),s.transition().delay(0).duration(0),s.transition().delay(Ii.scrollbarHideDelay).duration(Ii.scrollbarHideDuration).attr("stroke-opacity",0);var l=a.selectAll("."+Ii.cn.scrollbarCaptureZone).data(Is.repeat,Is.keyFun);l.enter().append("line").classed(Ii.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",Ii.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(u){var f=Tl.event.y,c=this.getBoundingClientRect(),h=u.scrollbarState,v=f-c.top,d=Tl.scale.linear().domain([0,h.scrollableAreaHeight]).range([0,h.totalHeight]).clamp(!0);h.topY<=v&&v<=h.bottomY||LF(t,e,null,d(v-h.barLength/2))(u)}).call(Tl.behavior.drag().origin(function(u){return Tl.event.stopPropagation(),u.scrollbarState.scrollbarScrollInProgress=!0,u}).on("drag",LF(t,e)).on("dragend",function(){})),l.attr("y2",function(u){return u.scrollbarState.scrollableAreaHeight}),t._context.staticPlot&&(s.remove(),l.remove())}function lj(e,t,r,i){var n=IWt(r),a=FWt(n);BWt(a);var o=qWt(a);UWt(o);var s=OWt(a),l=zWt(s);NWt(l),MHe(l,t,i,e),dj(a)}function IWt(e){var t=e.selectAll("."+Ii.cn.columnCells).data(Is.repeat,Is.keyFun);return t.enter().append("g").classed(Ii.cn.columnCells,!0),t.exit().remove(),t}function FWt(e){var t=e.selectAll("."+Ii.cn.columnCell).data(THe.splitToCells,function(r){return r.keyWithinBlock});return t.enter().append("g").classed(Ii.cn.columnCell,!0),t.exit().remove(),t}function qWt(e){var t=e.selectAll("."+Ii.cn.cellRect).data(Is.repeat,function(r){return r.keyWithinBlock});return t.enter().append("rect").classed(Ii.cn.cellRect,!0),t}function zWt(e){var t=e.selectAll("."+Ii.cn.cellText).data(Is.repeat,function(r){return r.keyWithinBlock});return t.enter().append("text").classed(Ii.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){Tl.event.stopPropagation()}),t}function OWt(e){var t=e.selectAll("."+Ii.cn.cellTextHolder).data(Is.repeat,function(r){return r.keyWithinBlock});return t.enter().append("g").classed(Ii.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),t}function BWt(e){e.each(function(t,r){var i=t.calcdata.cells.font,n=t.column.specIndex,a={size:av(i.size,n,r),color:av(i.color,n,r),family:av(i.family,n,r),weight:av(i.weight,n,r),style:av(i.style,n,r),variant:av(i.variant,n,r),textcase:av(i.textcase,n,r),lineposition:av(i.lineposition,n,r),shadow:av(i.shadow,n,r)};t.rowNumber=t.key,t.align=av(t.calcdata.cells.align,n,r),t.cellBorderWidth=av(t.calcdata.cells.line.width,n,r),t.font=a})}function NWt(e){e.each(function(t){sj.font(Tl.select(this),t.font)})}function UWt(e){e.attr("width",function(t){return t.column.columnWidth}).attr("stroke-width",function(t){return t.cellBorderWidth}).each(function(t){var r=Tl.select(this);yHe.stroke(r,av(t.calcdata.cells.line.color,t.column.specIndex,t.rowNumber)),yHe.fill(r,av(t.calcdata.cells.fill.color,t.column.specIndex,t.rowNumber))})}function MHe(e,t,r,i){e.text(function(n){var a=n.column.specIndex,o=n.rowNumber,s=n.value,l=typeof s=="string",u=l&&s.match(/<br>/i),f=!l||u;n.mayHaveMarkup=l&&s.match(/[<&>]/);var c=VWt(s);n.latex=c;var h=c?"":av(n.calcdata.cells.prefix,a,o)||"",v=c?"":av(n.calcdata.cells.suffix,a,o)||"",d=c?null:av(n.calcdata.cells.format,a,o)||null,x=h+(d?CWt(d)(n.value):n.value)+v,b;n.wrappingNeeded=!n.wrapped&&!f&&!c&&(b=_He(x)),n.cellHeightMayIncrease=u||c||n.mayHaveMarkup||(b===void 0?_He(x):b),n.needsConvertToTspans=n.mayHaveMarkup||n.wrappingNeeded||n.latex;var p;if(n.wrappingNeeded){var w=Ii.wrapSplitCharacter===" "?x.replace(/<a href=/ig,"<a_href="):x,A=w.split(Ii.wrapSplitCharacter),T=Ii.wrapSplitCharacter===" "?A.map(function(k){return k.replace(/<a_href=/ig,"<a href=")}):A;n.fragments=T.map(function(k){return{text:k,width:null}}),n.fragments.push({fragment:Ii.wrapSpacer,width:null}),p=T.join(Ii.lineBreaker)+Ii.lineBreaker+Ii.wrapSpacer}else delete n.fragments,p=x;return p}).attr("dy",function(n){return n.needsConvertToTspans?0:"0.75em"}).each(function(n){var a=this,o=Tl.select(a),s=n.wrappingNeeded?WWt:XWt;n.needsConvertToTspans?LWt.convertToTspans(o,i,s(r,a,t,i,n)):Tl.select(a.parentNode).attr("transform",function(l){return Hp(SHe(l),Ii.cellPad)}).attr("text-anchor",function(l){return{left:"start",center:"middle",right:"end"}[l.align]})})}function VWt(e){return typeof e=="string"&&e.match(Ii.latexCheck)}function _He(e){return e.indexOf(Ii.wrapSplitCharacter)!==-1}function HWt(e,t,r){var i=t.gdColumnsOriginalOrder;t.gdColumns.sort(function(n,a){return r[i.indexOf(n)]-r[i.indexOf(a)]}),t.columnorder=r,e.emit("plotly_restyle")}function av(e,t,r){if(oj.isArrayOrTypedArray(e)){var i=e[Math.min(t,e.length-1)];return oj.isArrayOrTypedArray(i)?i[Math.min(r,i.length-1)]:i}else return e}function bHe(e,t,r){e.transition().ease(Ii.releaseTransitionEase).duration(Ii.releaseTransitionDuration).attr("transform",Hp(t.x,r))}function hj(e){return e.type==="cells"}function GWt(e){return e.type==="header"}function uj(e){var t=e.rowBlocks.length?e.rowBlocks[0].auxiliaryBlocks:[];return t.reduce(function(r,i){return r+PF(i,1/0)},0)}function YWt(e,t,r){for(var i=[],n=0,a=0;a<e.length;a++){for(var o=e[a],s=o.rows,l=0,u=0;u<s.length;u++)l+=s[u].rowHeight;o.allRowsHeight=l;var f=n+l,c=t,h=c+r;c<f&&h>n&&i.push(a),n+=l}return i}function vj(e,t,r){var i=AHe(t)[0];if(i!==void 0){var n=i.rowBlocks,a=i.calcdata,o=fj(n,n.length),s=i.calcdata.groupHeight-uj(i),l=a.scrollY=Math.max(0,Math.min(o-s,a.scrollY)),u=YWt(n,l,s);u.length===1&&(u[0]===n.length-1?u.unshift(u[0]-1):u.push(u[0]+1)),u[0]%2&&u.reverse(),t.each(function(f,c){f.page=u[c],f.scrollY=l}),t.attr("transform",function(f){var c=fj(f.rowBlocks,f.page)-f.scrollY;return Hp(0,c)}),e&&(wHe(e,r,t,u,i.prevPages,i,0),wHe(e,r,t,u,i.prevPages,i,1),Y5(r,e))}}function LF(e,t,r,i){return function(a){var o=a.calcdata?a.calcdata:a,s=t.filter(function(c){return o.key===c.key}),l=r||o.scrollbarState.dragMultiplier,u=o.scrollY;o.scrollY=i===void 0?o.scrollY+l*Tl.event.dy:i;var f=s.selectAll("."+Ii.cn.yColumn).selectAll("."+Ii.cn.columnBlock).filter(hj);return vj(e,f,s),o.scrollY===u}}function wHe(e,t,r,i,n,a,o){var s=i[o]!==n[o];s&&(clearTimeout(a.currentRepaint[o]),a.currentRepaint[o]=setTimeout(function(){var l=r.filter(function(u,f){return f===o&&i[f]!==n[f]});lj(e,t,l,r),n[o]=i[o]}))}function WWt(e,t,r,i){return function(){var a=Tl.select(t.parentNode);a.each(function(o){var s=o.fragments;a.selectAll("tspan.line").each(function(x,b){s[b].width=this.getComputedTextLength()});var l=s[s.length-1].width,u=s.slice(0,-1),f=[],c,h,v=0,d=o.column.columnWidth-2*Ii.cellPad;for(o.value="";u.length;)c=u.shift(),h=c.width+l,v+h>d&&(o.value+=f.join(Ii.wrapSpacer)+Ii.lineBreaker,f=[],v=0),f.push(c.text),v+=h;v&&(o.value+=f.join(Ii.wrapSpacer)),o.wrapped=!0}),a.selectAll("tspan.line").remove(),MHe(a.select("."+Ii.cn.cellText),r,e,i),Tl.select(t.parentNode.parentNode).call(dj)}}function XWt(e,t,r,i,n){return function(){if(!n.settledY){var o=Tl.select(t.parentNode),s=cj(n),l=n.key-s.firstRowIndex,u=s.rows[l].rowHeight,f=n.cellHeightMayIncrease?t.parentNode.getBoundingClientRect().height+2*Ii.cellPad:u,c=Math.max(f,u),h=c-s.rows[l].rowHeight;h&&(s.rows[l].rowHeight=c,e.selectAll("."+Ii.cn.columnCell).call(dj),vj(null,e.filter(hj),0),Y5(r,i,!0)),o.attr("transform",function(){var v=this,d=v.parentNode,x=d.getBoundingClientRect(),b=Tl.select(v.parentNode).select("."+Ii.cn.cellRect).node().getBoundingClientRect(),p=v.transform.baseVal.consolidate(),w=b.top-x.top+(p?p.matrix.f:Ii.cellPad);return Hp(SHe(n,Tl.select(v.parentNode).select("."+Ii.cn.cellTextHolder).node().getBoundingClientRect().width),w)}),n.settledY=!0}}}function SHe(e,t){switch(e.align){case"left":return Ii.cellPad;case"right":return e.column.columnWidth-(t||0)-Ii.cellPad;case"center":return(e.column.columnWidth-(t||0))/2;default:return Ii.cellPad}}function dj(e){e.attr("transform",function(t){var r=t.rowBlocks[0].auxiliaryBlocks.reduce(function(o,s){return o+PF(s,1/0)},0),i=cj(t),n=PF(i,t.key),a=n+r;return Hp(0,a)}).selectAll("."+Ii.cn.cellRect).attr("height",function(t){return jWt(cj(t),t.key).rowHeight})}function fj(e,t){for(var r=0,i=t-1;i>=0;i--)r+=ZWt(e[i]);return r}function PF(e,t){for(var r=0,i=0;i<e.rows.length&&e.rows[i].rowIndex<t;i++)r+=e.rows[i].rowHeight;return r}function ZWt(e){var t=e.allRowsHeight;if(t!==void 0)return t;for(var r=0,i=0;i<e.rows.length;i++)r+=e.rows[i].rowHeight;return e.allRowsHeight=r,r}function cj(e){return e.rowBlocks[e.page]}function jWt(e,t){return e.rows[t-e.firstRowIndex]}});var kHe=ie(DF=>{"use strict";var KWt=pc().getModuleCalcData,JWt=pj(),RF="table";DF.name=RF;DF.plot=function(e){var t=KWt(e.calcdata,RF)[0];t.length&&JWt(e,t)};DF.clean=function(e,t,r,i){var n=i._has&&i._has(RF),a=t._has&&t._has(RF);n&&!a&&i._paperdiv.selectAll(".table").remove()}});var LHe=ie((r1r,CHe)=>{"use strict";CHe.exports={attributes:$Z(),supplyDefaults:nHe(),calc:aHe(),plot:pj(),moduleType:"trace",name:"table",basePlotModule:kHe(),categories:["noOpacity"],meta:{}}});var RHe=ie((n1r,PHe)=>{"use strict";PHe.exports=LHe()});var qHe=ie((i1r,FHe)=>{"use strict";var gj=Xs(),DHe=Qu(),yj=gc(),QWt=kl().descriptionWithDates,$Wt=Zs().overrideAll,IHe=dc().dash,mj=aa().extendFlat;FHe.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:gj({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:yj.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:mj({},yj.labelalias,{editType:"calc"}),tickfont:gj({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:QWt("tick label")},tickformatstops:$Wt(yj.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:DHe.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:mj({},IHe,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:mj({},IHe,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:DHe.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:gj({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}});var FF=ie((a1r,BHe)=>{"use strict";var eXt=Xs(),zHe=qHe(),OHe=Qu(),IF=eXt({editType:"calc"}),tXt=Bl().zorder;IF.family.dflt='"Open Sans", verdana, arial, sans-serif';IF.size.dflt=12;IF.color.dflt=OHe.defaultLine;BHe.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:zHe,baxis:zHe,font:IF,color:{valType:"color",dflt:OHe.defaultLine,editType:"plot"},transforms:void 0,zorder:tXt}});var VHe=ie((o1r,UHe)=>{"use strict";var NHe=Zt().isArray1D;UHe.exports=function(t,r,i){var n=i("x"),a=n&&n.length,o=i("y"),s=o&&o.length;if(!a&&!s)return!1;if(r._cheater=!n,(!a||NHe(n))&&(!s||NHe(o))){var l=a?n.length:1/0;s&&(l=Math.min(l,o.length)),r.a&&r.a.length&&(l=Math.min(l,r.a.length)),r.b&&r.b.length&&(l=Math.min(l,r.b.length)),r._length=l}else r._length=null;return!0}});var YHe=ie((s1r,GHe)=>{"use strict";var rXt=FF(),HHe=_i().addOpacity,nXt=Ti(),W5=Zt(),iXt=yx(),aXt=fm(),oXt=cm(),sXt=yL(),lXt=N0(),uXt=w2();GHe.exports=function(t,r,i){var n=i.letter,a=i.font||{},o=rXt[n+"axis"];function s(g,C){return W5.coerce(t,r,o,g,C)}function l(g,C){return W5.coerce2(t,r,o,g,C)}i.name&&(r._name=i.name,r._id=i.name),s("autotypenumbers",i.autotypenumbersDflt);var u=s("type");if(u==="-"&&(i.data&&fXt(r,i.data),r.type==="-"?r.type="linear":u=t.type=r.type),s("smoothing"),s("cheatertype"),s("showticklabels"),s("labelprefix",n+" = "),s("labelsuffix"),s("showtickprefix"),s("showticksuffix"),s("separatethousands"),s("tickformat"),s("exponentformat"),s("minexponent"),s("showexponent"),s("categoryorder"),s("tickmode"),s("tickvals"),s("ticktext"),s("tick0"),s("dtick"),r.tickmode==="array"&&(s("arraytick0"),s("arraydtick")),s("labelpadding"),r._hovertitle=n,u==="date"){var f=nXt.getComponentMethod("calendars","handleDefaults");f(t,r,"calendar",i.calendar)}lXt(r,i.fullLayout),r.c2p=W5.identity;var c=s("color",i.dfltColor),h=c===t.color?c:a.color,v=s("title.text");v&&(W5.coerceFont(s,"title.font",a,{overrideDflt:{size:W5.bigFont(a.size),color:h}}),s("title.offset")),s("tickangle");var d=s("autorange",!r.isValidRange(t.range));d&&s("rangemode"),s("range"),r.cleanRange(),s("fixedrange"),iXt(t,r,s,u),oXt(t,r,s,u,i),aXt(t,r,s,u,i),sXt(t,r,s,{data:i.data,dataAttr:n});var x=l("gridcolor",HHe(c,.3)),b=l("gridwidth"),p=l("griddash"),w=s("showgrid");w||(delete r.gridcolor,delete r.gridwidth,delete r.griddash);var A=l("startlinecolor",c),T=l("startlinewidth",b),k=s("startline",r.showgrid||!!A||!!T);k||(delete r.startlinecolor,delete r.startlinewidth);var _=l("endlinecolor",c),E=l("endlinewidth",b),S=s("endline",r.showgrid||!!_||!!E);return S||(delete r.endlinecolor,delete r.endlinewidth),w?(s("minorgridcount"),s("minorgridwidth",b),s("minorgriddash",p),s("minorgridcolor",HHe(x,.06)),r.minorgridcount||(delete r.minorgridwidth,delete r.minorgriddash,delete r.minorgridcolor)):(delete r.gridcolor,delete r.gridwidth,delete r.griddash),r.showticklabels==="none"&&(delete r.tickfont,delete r.tickangle,delete r.showexponent,delete r.exponentformat,delete r.minexponent,delete r.tickformat,delete r.showticksuffix,delete r.showtickprefix),r.showticksuffix||delete r.ticksuffix,r.showtickprefix||delete r.tickprefix,s("tickmode"),r};function fXt(e,t){if(e.type==="-"){var r=e._id,i=r.charAt(0),n=i+"calendar",a=e[n];e.type=uXt(t,a,{autotypenumbers:e.autotypenumbers})}}});var XHe=ie((l1r,WHe)=>{"use strict";var cXt=YHe(),hXt=ko();WHe.exports=function(t,r,i,n,a){var o=n("a");o||(n("da"),n("a0"));var s=n("b");s||(n("db"),n("b0")),vXt(t,r,i,a)};function vXt(e,t,r,i){var n=["aaxis","baxis"];n.forEach(function(a){var o=a.charAt(0),s=e[a]||{},l=hXt.newContainer(t,a),u={noAutotickangles:!0,noTicklabelstep:!0,tickfont:"x",id:o+"axis",letter:o,font:t.font,name:a,data:e[o],calendar:t.calendar,dfltColor:i,bgColor:r.paper_bgcolor,autotypenumbersDflt:r.autotypenumbers,fullLayout:r};cXt(s,l,u),l._categories=l._categories||[],!e[a]&&s.type!=="-"&&(e[a]={type:s.type})})}});var KHe=ie((u1r,jHe)=>{"use strict";var ZHe=Zt(),dXt=VHe(),pXt=XHe(),gXt=FF(),yXt=Qu();jHe.exports=function(t,r,i,n){function a(l,u){return ZHe.coerce(t,r,gXt,l,u)}r._clipPathId="clip"+r.uid+"carpet";var o=a("color",yXt.defaultLine);if(ZHe.coerceFont(a,"font",n.font),a("carpet"),pXt(t,r,n,a,o),!r.a||!r.b){r.visible=!1;return}r.a.length<3&&(r.aaxis.smoothing=0),r.b.length<3&&(r.baxis.smoothing=0);var s=dXt(t,r,a);s||(r.visible=!1),r._cheater&&a("cheaterslope"),a("zorder")}});var xj=ie((f1r,JHe)=>{"use strict";var mXt=Zt().isArrayOrTypedArray;JHe.exports=function(t,r,i){var n;for(mXt(t)?t.length>r.length&&(t=t.slice(0,r.length)):t=[],n=0;n<r.length;n++)t[n]=i(r[n]);return t}});var _j=ie((c1r,QHe)=>{"use strict";QHe.exports=function(t,r,i){if(t.length===0)return"";var n,a=[],o=i?3:1;for(n=0;n<t.length;n+=o)a.push(t[n]+","+r[n]),i&&n<t.length-o&&(a.push("C"),a.push([t[n+1]+","+r[n+1],t[n+2]+","+r[n+2]+" "].join(" ")));return a.join(i?"":"L")}});var eGe=ie((h1r,$He)=>{"use strict";$He.exports=function(t,r,i,n,a,o){var s=a[0]*t.dpdx(r),l=a[1]*t.dpdy(i),u=1,f=1;if(o){var c=Math.sqrt(a[0]*a[0]+a[1]*a[1]),h=Math.sqrt(o[0]*o[0]+o[1]*o[1]),v=(a[0]*o[0]+a[1]*o[1])/c/h;f=Math.max(0,v)}var d=Math.atan2(l,s)*180/Math.PI;return d<-90?(d+=180,u=-u):d>90&&(d-=180,u=-u),{angle:d,flip:u,p:t.c2p(n,r,i),offsetMultplier:f}}});var lGe=ie((v1r,sGe)=>{"use strict";var BF=Mi(),qF=oa(),zF=xj(),nGe=_j(),X5=eGe(),bj=ks(),xd=Zt(),iGe=xd.strRotate,OF=xd.strTranslate,aGe=Mf();sGe.exports=function(t,r,i,n){var a=t._context.staticPlot,o=r.xaxis,s=r.yaxis,l=t._fullLayout,u=l._clips;xd.makeTraceGroups(n,i,"trace").each(function(f){var c=BF.select(this),h=f[0],v=h.trace,d=v.aaxis,x=v.baxis,b=xd.ensureSingle(c,"g","minorlayer"),p=xd.ensureSingle(c,"g","majorlayer"),w=xd.ensureSingle(c,"g","boundarylayer"),A=xd.ensureSingle(c,"g","labellayer");c.style("opacity",v.opacity),AT(o,s,p,d,"a",d._gridlines,!0,a),AT(o,s,p,x,"b",x._gridlines,!0,a),AT(o,s,b,d,"a",d._minorgridlines,!0,a),AT(o,s,b,x,"b",x._minorgridlines,!0,a),AT(o,s,w,d,"a-boundary",d._boundarylines,a),AT(o,s,w,x,"b-boundary",x._boundarylines,a);var T=tGe(t,o,s,v,h,A,d._labels,"a-label"),k=tGe(t,o,s,v,h,A,x._labels,"b-label");_Xt(t,A,v,h,o,s,T,k),xXt(v,h,u,o,s)})};function xXt(e,t,r,i,n){var a,o,s,l,u=r.select("#"+e._clipPathId);u.size()||(u=r.append("clipPath").classed("carpetclip",!0));var f=xd.ensureSingle(u,"path","carpetboundary"),c=t.clipsegments,h=[];for(l=0;l<c.length;l++)a=c[l],o=zF([],a.x,i.c2p),s=zF([],a.y,n.c2p),h.push(nGe(o,s,a.bicubic));var v="M"+h.join("L")+"Z";u.attr("id",e._clipPathId),f.attr("d",v)}function AT(e,t,r,i,n,a,o){var s="const-"+n+"-lines",l=r.selectAll("."+s).data(a);l.enter().append("path").classed(s,!0).style("vector-effect",o?"none":"non-scaling-stroke"),l.each(function(u){var f=u,c=f.x,h=f.y,v=zF([],c,e.c2p),d=zF([],h,t.c2p),x="M"+nGe(v,d,f.smoothing),b=BF.select(this);b.attr("d",x).style("stroke-width",f.width).style("stroke",f.color).style("stroke-dasharray",qF.dashStyle(f.dash,f.width)).style("fill","none")}),l.exit().remove()}function tGe(e,t,r,i,n,a,o,s){var l=a.selectAll("text."+s).data(o);l.enter().append("text").classed(s,!0);var u=0,f={};return l.each(function(c,h){var v;if(c.axis.tickangle==="auto")v=X5(i,t,r,c.xy,c.dxy);else{var d=(c.axis.tickangle+180)*Math.PI/180;v=X5(i,t,r,c.xy,[Math.cos(d),Math.sin(d)])}h||(f={angle:v.angle,flip:v.flip});var x=(c.endAnchor?-1:1)*v.flip,b=BF.select(this).attr({"text-anchor":x>0?"start":"end","data-notex":1}).call(qF.font,c.font).text(c.text).call(bj.convertToTspans,e),p=qF.bBox(this);b.attr("transform",OF(v.p[0],v.p[1])+iGe(v.angle)+OF(c.axis.labelpadding*x,p.height*.3)),u=Math.max(u,p.width+c.axis.labelpadding)}),l.exit().remove(),f.maxExtent=u,f}function _Xt(e,t,r,i,n,a,o,s){var l,u,f,c,h=xd.aggNums(Math.min,null,r.a),v=xd.aggNums(Math.max,null,r.a),d=xd.aggNums(Math.min,null,r.b),x=xd.aggNums(Math.max,null,r.b);l=.5*(h+v),u=d,f=r.ab2xy(l,u,!0),c=r.dxyda_rough(l,u),o.angle===void 0&&xd.extendFlat(o,X5(r,n,a,f,r.dxydb_rough(l,u))),rGe(e,t,r,i,f,c,r.aaxis,n,a,o,"a-title"),l=h,u=.5*(d+x),f=r.ab2xy(l,u,!0),c=r.dxydb_rough(l,u),s.angle===void 0&&xd.extendFlat(s,X5(r,n,a,f,r.dxyda_rough(l,u))),rGe(e,t,r,i,f,c,r.baxis,n,a,s,"b-title")}var oGe=aGe.LINE_SPACING,bXt=(1-aGe.MID_SHIFT)/oGe+1;function rGe(e,t,r,i,n,a,o,s,l,u,f){var c=[];o.title.text&&c.push(o.title.text);var h=t.selectAll("text."+f).data(c),v=u.maxExtent;h.enter().append("text").classed(f,!0),h.each(function(){var d=X5(r,s,l,n,a);["start","both"].indexOf(o.showticklabels)===-1&&(v=0);var x=o.title.font.size;v+=x+o.title.offset;var b=u.angle+(u.flip<0?180:0),p=(b-d.angle+450)%360,w=p>90&&p<270,A=BF.select(this);A.text(o.title.text).call(bj.convertToTspans,e),w&&(v=(-bj.lineCount(A)+bXt)*oGe*x-v),A.attr("transform",OF(d.p[0],d.p[1])+iGe(d.angle)+OF(0,v)).attr("text-anchor","middle").call(qF.font,o.title.font)}),h.exit().remove()}});var fGe=ie((d1r,uGe)=>{"use strict";var NF=Zt().isArrayOrTypedArray;uGe.exports=function(e,t,r){var i,n,a,o,s,l,u=[],f=NF(e)?e.length:e,c=NF(t)?t.length:t,h=NF(e)?e:null,v=NF(t)?t:null;h&&(a=(h.length-1)/(h[h.length-1]-h[0])/(f-1)),v&&(o=(v.length-1)/(v[v.length-1]-v[0])/(c-1));var d,x=1/0,b=-1/0;for(n=0;n<c;n++)for(u[n]=[],l=v?(v[n]-v[0])*o:n/(c-1),i=0;i<f;i++)s=h?(h[i]-h[0])*a:i/(f-1),d=s-l*r,x=Math.min(d,x),b=Math.max(d,b),u[n][i]=d;var p=1/(b-x),w=-x*p;for(n=0;n<c;n++)for(i=0;i<f;i++)u[n][i]=p*u[n][i]+w;return u}});var dGe=ie((p1r,vGe)=>{"use strict";var cGe=Zt().isArrayOrTypedArray;vGe.exports=function(e){return hGe(e,0)};function hGe(e,t){if(!cGe(e)||t>=10)return null;for(var r=1/0,i=-1/0,n=e.length,a=0;a<n;a++){var o=e[a];if(cGe(o)){var s=hGe(o,t+1);s&&(r=Math.min(s[0],r),i=Math.max(s[1],i))}else r=Math.min(o,r),i=Math.max(o,i)}return[r,i]}});var gGe=ie((g1r,pGe)=>{"use strict";var wXt=Wi(),q1=aa().extendFlat;pGe.exports=function(t,r,i){var n,a,o,s,l,u,f,c,h,v,d,x,b,p,w=t["_"+r],A=t[r+"axis"],T=A._gridlines=[],k=A._minorgridlines=[],_=A._boundarylines=[],E=t["_"+i],S=t[i+"axis"];A.tickmode==="array"&&(A.tickvals=w.slice());var g=t._xctrl,C=t._yctrl,M=g[0].length,P=g.length,D=t._a.length,q=t._b.length;wXt.prepTicks(A),A.tickmode==="array"&&delete A.tickvals;var O=A.smoothing?3:1;function U(F){var N,X,K,ne,fe,ue,ee,Z,oe,ce,le,me,he=[],te=[],ge={};if(r==="b")for(X=t.b2j(F),K=Math.floor(Math.max(0,Math.min(q-2,X))),ne=X-K,ge.length=q,ge.crossLength=D,ge.xy=function(ae){return t.evalxy([],ae,X)},ge.dxy=function(ae,_e){return t.dxydi([],ae,K,_e,ne)},N=0;N<D;N++)ue=Math.min(D-2,N),ee=N-ue,Z=t.evalxy([],N,X),S.smoothing&&N>0&&(oe=t.dxydi([],N-1,K,0,ne),he.push(fe[0]+oe[0]/3),te.push(fe[1]+oe[1]/3),ce=t.dxydi([],N-1,K,1,ne),he.push(Z[0]-ce[0]/3),te.push(Z[1]-ce[1]/3)),he.push(Z[0]),te.push(Z[1]),fe=Z;else for(N=t.a2i(F),ue=Math.floor(Math.max(0,Math.min(D-2,N))),ee=N-ue,ge.length=D,ge.crossLength=q,ge.xy=function(ae){return t.evalxy([],N,ae)},ge.dxy=function(ae,_e){return t.dxydj([],ue,ae,ee,_e)},X=0;X<q;X++)K=Math.min(q-2,X),ne=X-K,Z=t.evalxy([],N,X),S.smoothing&&X>0&&(le=t.dxydj([],ue,X-1,ee,0),he.push(fe[0]+le[0]/3),te.push(fe[1]+le[1]/3),me=t.dxydj([],ue,X-1,ee,1),he.push(Z[0]-me[0]/3),te.push(Z[1]-me[1]/3)),he.push(Z[0]),te.push(Z[1]),fe=Z;return ge.axisLetter=r,ge.axis=A,ge.crossAxis=S,ge.value=F,ge.constvar=i,ge.index=c,ge.x=he,ge.y=te,ge.smoothing=S.smoothing,ge}function B(F){var N,X,K,ne,fe,ue=[],ee=[],Z={};if(Z.length=w.length,Z.crossLength=E.length,r==="b")for(K=Math.max(0,Math.min(q-2,F)),fe=Math.min(1,Math.max(0,F-K)),Z.xy=function(oe){return t.evalxy([],oe,F)},Z.dxy=function(oe,ce){return t.dxydi([],oe,K,ce,fe)},N=0;N<M;N++)ue[N]=g[F*O][N],ee[N]=C[F*O][N];else for(X=Math.max(0,Math.min(D-2,F)),ne=Math.min(1,Math.max(0,F-X)),Z.xy=function(oe){return t.evalxy([],F,oe)},Z.dxy=function(oe,ce){return t.dxydj([],X,oe,ne,ce)},N=0;N<P;N++)ue[N]=g[N][F*O],ee[N]=C[N][F*O];return Z.axisLetter=r,Z.axis=A,Z.crossAxis=S,Z.value=w[F],Z.constvar=i,Z.index=F,Z.x=ue,Z.y=ee,Z.smoothing=S.smoothing,Z}if(A.tickmode==="array"){for(s=5e-15,l=[Math.floor((w.length-1-A.arraytick0)/A.arraydtick*(1+s)),Math.ceil(-A.arraytick0/A.arraydtick/(1+s))].sort(function(F,N){return F-N}),u=l[0]-1,f=l[1]+1,c=u;c<f;c++)a=A.arraytick0+A.arraydtick*c,!(a<0||a>w.length-1)&&T.push(q1(B(a),{color:A.gridcolor,width:A.gridwidth,dash:A.griddash}));for(c=u;c<f;c++)if(o=A.arraytick0+A.arraydtick*c,d=Math.min(o+A.arraydtick,w.length-1),!(o<0||o>w.length-1)&&!(d<0||d>w.length-1))for(x=w[o],b=w[d],n=0;n<A.minorgridcount;n++)p=d-o,!(p<=0)&&(v=x+(b-x)*(n+1)/(A.minorgridcount+1)*(A.arraydtick/p),!(v<w[0]||v>w[w.length-1])&&k.push(q1(U(v),{color:A.minorgridcolor,width:A.minorgridwidth,dash:A.minorgriddash})));A.startline&&_.push(q1(B(0),{color:A.startlinecolor,width:A.startlinewidth})),A.endline&&_.push(q1(B(w.length-1),{color:A.endlinecolor,width:A.endlinewidth}))}else{for(s=5e-15,l=[Math.floor((w[w.length-1]-A.tick0)/A.dtick*(1+s)),Math.ceil((w[0]-A.tick0)/A.dtick/(1+s))].sort(function(F,N){return F-N}),u=l[0],f=l[1],c=u;c<=f;c++)h=A.tick0+A.dtick*c,T.push(q1(U(h),{color:A.gridcolor,width:A.gridwidth,dash:A.griddash}));for(c=u-1;c<f+1;c++)for(h=A.tick0+A.dtick*c,n=0;n<A.minorgridcount;n++)v=h+A.dtick*(n+1)/(A.minorgridcount+1),!(v<w[0]||v>w[w.length-1])&&k.push(q1(U(v),{color:A.minorgridcolor,width:A.minorgridwidth,dash:A.minorgriddash}));A.startline&&_.push(q1(U(w[0]),{color:A.startlinecolor,width:A.startlinewidth})),A.endline&&_.push(q1(U(w[w.length-1]),{color:A.endlinecolor,width:A.endlinewidth}))}}});var _Ge=ie((y1r,xGe)=>{"use strict";var yGe=Wi(),mGe=aa().extendFlat;xGe.exports=function(t,r){var i,n,a,o,s,l=r._labels=[],u=r._gridlines;for(i=0;i<u.length;i++)s=u[i],["start","both"].indexOf(r.showticklabels)!==-1&&(n=yGe.tickText(r,s.value),mGe(n,{prefix:a,suffix:o,endAnchor:!0,xy:s.xy(0),dxy:s.dxy(0,0),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:i===0,isLast:i===u.length-1}),l.push(n)),["end","both"].indexOf(r.showticklabels)!==-1&&(n=yGe.tickText(r,s.value),mGe(n,{endAnchor:!1,xy:s.xy(s.crossLength-1),dxy:s.dxy(s.crossLength-2,1),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:i===0,isLast:i===u.length-1}),l.push(n))}});var wGe=ie((m1r,bGe)=>{"use strict";bGe.exports=function(t,r,i,n){var a,o,s,l=[],u=!!i.smoothing,f=!!n.smoothing,c=t[0].length-1,h=t.length-1;for(a=0,o=[],s=[];a<=c;a++)o[a]=t[0][a],s[a]=r[0][a];for(l.push({x:o,y:s,bicubic:u}),a=0,o=[],s=[];a<=h;a++)o[a]=t[a][c],s[a]=r[a][c];for(l.push({x:o,y:s,bicubic:f}),a=c,o=[],s=[];a>=0;a--)o[c-a]=t[h][a],s[c-a]=r[h][a];for(l.push({x:o,y:s,bicubic:u}),a=h,o=[],s=[];a>=0;a--)o[h-a]=t[a][0],s[h-a]=r[a][0];return l.push({x:o,y:s,bicubic:f}),l}});var AGe=ie((x1r,TGe)=>{"use strict";var TXt=Zt();TGe.exports=function(t,r,i){var n,a,o,s=[],l=[],u=t[0].length,f=t.length;function c(K,ne){var fe=0,ue,ee=0;return K>0&&(ue=t[ne][K-1])!==void 0&&(ee++,fe+=ue),K<u-1&&(ue=t[ne][K+1])!==void 0&&(ee++,fe+=ue),ne>0&&(ue=t[ne-1][K])!==void 0&&(ee++,fe+=ue),ne<f-1&&(ue=t[ne+1][K])!==void 0&&(ee++,fe+=ue),fe/Math.max(1,ee)}var h=0;for(n=0;n<u;n++)for(a=0;a<f;a++)t[a][n]===void 0&&(s.push(n),l.push(a),t[a][n]=c(n,a)),h=Math.max(h,Math.abs(t[a][n]));if(!s.length)return t;var v,d,x,b,p,w,A,T,k,_,E,S=1e-5,g=0,C=100,M=0,P=s.length;do{for(g=0,o=0;o<P;o++){n=s[o],a=l[o];var D=0,q=0,O,U,B,F,N,X;n===0?(N=Math.min(u-1,2),B=r[N],F=r[1],O=t[a][N],U=t[a][1],q+=U+(U-O)*(r[0]-F)/(F-B),D++):n===u-1&&(N=Math.max(0,u-3),B=r[N],F=r[u-2],O=t[a][N],U=t[a][u-2],q+=U+(U-O)*(r[u-1]-F)/(F-B),D++),(n===0||n===u-1)&&a>0&&a<f-1&&(v=i[a+1]-i[a],d=i[a]-i[a-1],q+=(d*t[a+1][n]+v*t[a-1][n])/(d+v),D++),a===0?(X=Math.min(f-1,2),B=i[X],F=i[1],O=t[X][n],U=t[1][n],q+=U+(U-O)*(i[0]-F)/(F-B),D++):a===f-1&&(X=Math.max(0,f-3),B=i[X],F=i[f-2],O=t[X][n],U=t[f-2][n],q+=U+(U-O)*(i[f-1]-F)/(F-B),D++),(a===0||a===f-1)&&n>0&&n<u-1&&(v=r[n+1]-r[n],d=r[n]-r[n-1],q+=(d*t[a][n+1]+v*t[a][n-1])/(d+v),D++),D?q/=D:(x=r[n+1]-r[n],b=r[n]-r[n-1],p=i[a+1]-i[a],w=i[a]-i[a-1],A=x*b*(x+b),T=p*w*(p+w),q=(A*(w*t[a+1][n]+p*t[a-1][n])+T*(b*t[a][n+1]+x*t[a][n-1]))/(T*(b+x)+A*(w+p))),k=q-t[a][n],_=k/h,g+=_*_,E=D?0:.85,t[a][n]+=k*(1+E)}g=Math.sqrt(g)}while(M++<C&&g>S);return TXt.log("Smoother converged to",g,"after",M,"iterations"),t}});var SGe=ie((_1r,MGe)=>{"use strict";MGe.exports={RELATIVE_CULL_TOLERANCE:1e-6}});var CGe=ie((b1r,kGe)=>{"use strict";var EGe=.5;kGe.exports=function(t,r,i,n){var a=t[0]-r[0],o=t[1]-r[1],s=i[0]-r[0],l=i[1]-r[1],u=Math.pow(a*a+o*o,EGe/2),f=Math.pow(s*s+l*l,EGe/2),c=(f*f*a-u*u*s)*n,h=(f*f*o-u*u*l)*n,v=f*(u+f)*3,d=u*(u+f)*3;return[[r[0]+(v&&c/v),r[1]+(v&&h/v)],[r[0]-(d&&c/d),r[1]-(d&&h/d)]]}});var PGe=ie((w1r,LGe)=>{"use strict";var wj=CGe(),UF=Zt().ensureArray;function MT(e,t,r){var i=-.5*r[0]+1.5*t[0],n=-.5*r[1]+1.5*t[1];return[(2*i+e[0])/3,(2*n+e[1])/3]}LGe.exports=function(t,r,i,n,a,o){var s,l,u,f,c,h,v,d,x,b,p=i[0].length,w=i.length,A=a?3*p-2:p,T=o?3*w-2:w;for(t=UF(t,T),r=UF(r,T),u=0;u<T;u++)t[u]=UF(t[u],A),r[u]=UF(r[u],A);for(l=0,f=0;l<w;l++,f+=o?3:1)for(c=t[f],h=r[f],v=i[l],d=n[l],s=0,u=0;s<p;s++,u+=a?3:1)c[u]=v[s],h[u]=d[s];if(a)for(l=0,f=0;l<w;l++,f+=o?3:1){for(s=1,u=3;s<p-1;s++,u+=3)x=wj([i[l][s-1],n[l][s-1]],[i[l][s],n[l][s]],[i[l][s+1],n[l][s+1]],a),t[f][u-1]=x[0][0],r[f][u-1]=x[0][1],t[f][u+1]=x[1][0],r[f][u+1]=x[1][1];b=MT([t[f][0],r[f][0]],[t[f][2],r[f][2]],[t[f][3],r[f][3]]),t[f][1]=b[0],r[f][1]=b[1],b=MT([t[f][A-1],r[f][A-1]],[t[f][A-3],r[f][A-3]],[t[f][A-4],r[f][A-4]]),t[f][A-2]=b[0],r[f][A-2]=b[1]}if(o)for(u=0;u<A;u++){for(f=3;f<T-3;f+=3)x=wj([t[f-3][u],r[f-3][u]],[t[f][u],r[f][u]],[t[f+3][u],r[f+3][u]],o),t[f-1][u]=x[0][0],r[f-1][u]=x[0][1],t[f+1][u]=x[1][0],r[f+1][u]=x[1][1];b=MT([t[0][u],r[0][u]],[t[2][u],r[2][u]],[t[3][u],r[3][u]]),t[1][u]=b[0],r[1][u]=b[1],b=MT([t[T-1][u],r[T-1][u]],[t[T-3][u],r[T-3][u]],[t[T-4][u],r[T-4][u]]),t[T-2][u]=b[0],r[T-2][u]=b[1]}if(a&&o)for(f=1;f<T;f+=(f+1)%3===0?2:1){for(u=3;u<A-3;u+=3)x=wj([t[f][u-3],r[f][u-3]],[t[f][u],r[f][u]],[t[f][u+3],r[f][u+3]],a),t[f][u-1]=.5*(t[f][u-1]+x[0][0]),r[f][u-1]=.5*(r[f][u-1]+x[0][1]),t[f][u+1]=.5*(t[f][u+1]+x[1][0]),r[f][u+1]=.5*(r[f][u+1]+x[1][1]);b=MT([t[f][0],r[f][0]],[t[f][2],r[f][2]],[t[f][3],r[f][3]]),t[f][1]=.5*(t[f][1]+b[0]),r[f][1]=.5*(r[f][1]+b[1]),b=MT([t[f][A-1],r[f][A-1]],[t[f][A-3],r[f][A-3]],[t[f][A-4],r[f][A-4]]),t[f][A-2]=.5*(t[f][A-2]+b[0]),r[f][A-2]=.5*(r[f][A-2]+b[1])}return[t,r]}});var DGe=ie((T1r,RGe)=>{"use strict";RGe.exports=function(e,t,r,i,n){var a=t-2,o=r-2;return i&&n?function(s,l,u){s||(s=[]);var f,c,h,v,d,x,b=Math.max(0,Math.min(Math.floor(l),a)),p=Math.max(0,Math.min(Math.floor(u),o)),w=Math.max(0,Math.min(1,l-b)),A=Math.max(0,Math.min(1,u-p));b*=3,p*=3;var T=w*w,k=T*w,_=1-w,E=_*_,S=E*_,g=A*A,C=g*A,M=1-A,P=M*M,D=P*M;for(x=0;x<e.length;x++)d=e[x],f=S*d[p][b]+3*(E*w*d[p][b+1]+_*T*d[p][b+2])+k*d[p][b+3],c=S*d[p+1][b]+3*(E*w*d[p+1][b+1]+_*T*d[p+1][b+2])+k*d[p+1][b+3],h=S*d[p+2][b]+3*(E*w*d[p+2][b+1]+_*T*d[p+2][b+2])+k*d[p+2][b+3],v=S*d[p+3][b]+3*(E*w*d[p+3][b+1]+_*T*d[p+3][b+2])+k*d[p+3][b+3],s[x]=D*f+3*(P*A*c+M*g*h)+C*v;return s}:i?function(s,l,u){s||(s=[]);var f=Math.max(0,Math.min(Math.floor(l),a)),c=Math.max(0,Math.min(Math.floor(u),o)),h=Math.max(0,Math.min(1,l-f)),v=Math.max(0,Math.min(1,u-c)),d,x,b,p,w,A;f*=3;var T=h*h,k=T*h,_=1-h,E=_*_,S=E*_,g=1-v;for(w=0;w<e.length;w++)A=e[w],d=g*A[c][f]+v*A[c+1][f],x=g*A[c][f+1]+v*A[c+1][f+1],b=g*A[c][f+2]+v*A[c+1][f+1],p=g*A[c][f+3]+v*A[c+1][f+1],s[w]=S*d+3*(E*h*x+_*T*b)+k*p;return s}:n?function(s,l,u){s||(s=[]);var f=Math.max(0,Math.min(Math.floor(l),a)),c=Math.max(0,Math.min(Math.floor(u),o)),h=Math.max(0,Math.min(1,l-f)),v=Math.max(0,Math.min(1,u-c)),d,x,b,p,w,A;c*=3;var T=v*v,k=T*v,_=1-v,E=_*_,S=E*_,g=1-h;for(w=0;w<e.length;w++)A=e[w],d=g*A[c][f]+h*A[c][f+1],x=g*A[c+1][f]+h*A[c+1][f+1],b=g*A[c+2][f]+h*A[c+2][f+1],p=g*A[c+3][f]+h*A[c+3][f+1],s[w]=S*d+3*(E*v*x+_*T*b)+k*p;return s}:function(s,l,u){s||(s=[]);var f=Math.max(0,Math.min(Math.floor(l),a)),c=Math.max(0,Math.min(Math.floor(u),o)),h=Math.max(0,Math.min(1,l-f)),v=Math.max(0,Math.min(1,u-c)),d,x,b,p,w=1-v,A=1-h;for(b=0;b<e.length;b++)p=e[b],d=A*p[c][f]+h*p[c][f+1],x=A*p[c+1][f]+h*p[c+1][f+1],s[b]=w*d+v*x;return s}}});var FGe=ie((A1r,IGe)=>{"use strict";IGe.exports=function(e,t,r){return t&&r?function(i,n,a,o,s){i||(i=[]);var l,u,f,c,h,v;n*=3,a*=3;var d=o*o,x=1-o,b=x*x,p=x*o*2,w=-3*b,A=3*(b-p),T=3*(p-d),k=3*d,_=s*s,E=_*s,S=1-s,g=S*S,C=g*S;for(v=0;v<e.length;v++)h=e[v],l=w*h[a][n]+A*h[a][n+1]+T*h[a][n+2]+k*h[a][n+3],u=w*h[a+1][n]+A*h[a+1][n+1]+T*h[a+1][n+2]+k*h[a+1][n+3],f=w*h[a+2][n]+A*h[a+2][n+1]+T*h[a+2][n+2]+k*h[a+2][n+3],c=w*h[a+3][n]+A*h[a+3][n+1]+T*h[a+3][n+2]+k*h[a+3][n+3],i[v]=C*l+3*(g*s*u+S*_*f)+E*c;return i}:t?function(i,n,a,o,s){i||(i=[]);var l,u,f,c;n*=3;var h=o*o,v=1-o,d=v*v,x=v*o*2,b=-3*d,p=3*(d-x),w=3*(x-h),A=3*h,T=1-s;for(f=0;f<e.length;f++)c=e[f],l=b*c[a][n]+p*c[a][n+1]+w*c[a][n+2]+A*c[a][n+3],u=b*c[a+1][n]+p*c[a+1][n+1]+w*c[a+1][n+2]+A*c[a+1][n+3],i[f]=T*l+s*u;return i}:r?function(i,n,a,o,s){i||(i=[]);var l,u,f,c,h,v;a*=3;var d=s*s,x=d*s,b=1-s,p=b*b,w=p*b;for(h=0;h<e.length;h++)v=e[h],l=v[a][n+1]-v[a][n],u=v[a+1][n+1]-v[a+1][n],f=v[a+2][n+1]-v[a+2][n],c=v[a+3][n+1]-v[a+3][n],i[h]=w*l+3*(p*s*u+b*d*f)+x*c;return i}:function(i,n,a,o,s){i||(i=[]);var l,u,f,c,h=1-s;for(f=0;f<e.length;f++)c=e[f],l=c[a][n+1]-c[a][n],u=c[a+1][n+1]-c[a+1][n],i[f]=h*l+s*u;return i}}});var zGe=ie((M1r,qGe)=>{"use strict";qGe.exports=function(e,t,r){return t&&r?function(i,n,a,o,s){i||(i=[]);var l,u,f,c,h,v;n*=3,a*=3;var d=o*o,x=d*o,b=1-o,p=b*b,w=p*b,A=s*s,T=1-s,k=T*T,_=T*s*2,E=-3*k,S=3*(k-_),g=3*(_-A),C=3*A;for(v=0;v<e.length;v++)h=e[v],l=E*h[a][n]+S*h[a+1][n]+g*h[a+2][n]+C*h[a+3][n],u=E*h[a][n+1]+S*h[a+1][n+1]+g*h[a+2][n+1]+C*h[a+3][n+1],f=E*h[a][n+2]+S*h[a+1][n+2]+g*h[a+2][n+2]+C*h[a+3][n+2],c=E*h[a][n+3]+S*h[a+1][n+3]+g*h[a+2][n+3]+C*h[a+3][n+3],i[v]=w*l+3*(p*o*u+b*d*f)+x*c;return i}:t?function(i,n,a,o,s){i||(i=[]);var l,u,f,c,h,v;n*=3;var d=s*s,x=d*s,b=1-s,p=b*b,w=p*b;for(h=0;h<e.length;h++)v=e[h],l=v[a+1][n]-v[a][n],u=v[a+1][n+1]-v[a][n+1],f=v[a+1][n+2]-v[a][n+2],c=v[a+1][n+3]-v[a][n+3],i[h]=w*l+3*(p*s*u+b*d*f)+x*c;return i}:r?function(i,n,a,o,s){i||(i=[]);var l,u,f,c;a*=3;var h=1-o,v=s*s,d=1-s,x=d*d,b=d*s*2,p=-3*x,w=3*(x-b),A=3*(b-v),T=3*v;for(f=0;f<e.length;f++)c=e[f],l=p*c[a][n]+w*c[a+1][n]+A*c[a+2][n]+T*c[a+3][n],u=p*c[a][n+1]+w*c[a+1][n+1]+A*c[a+2][n+1]+T*c[a+3][n+1],i[f]=h*l+o*u;return i}:function(i,n,a,o,s){i||(i=[]);var l,u,f,c,h=1-o;for(f=0;f<e.length;f++)c=e[f],l=c[a+1][n]-c[a][n],u=c[a+1][n+1]-c[a][n+1],i[f]=h*l+o*u;return i}}});var UGe=ie((S1r,NGe)=>{"use strict";var OGe=SGe(),BGe=eC().findBin,AXt=PGe(),MXt=DGe(),SXt=FGe(),EXt=zGe();NGe.exports=function(t){var r=t._a,i=t._b,n=r.length,a=i.length,o=t.aaxis,s=t.baxis,l=r[0],u=r[n-1],f=i[0],c=i[a-1],h=r[r.length-1]-r[0],v=i[i.length-1]-i[0],d=h*OGe.RELATIVE_CULL_TOLERANCE,x=v*OGe.RELATIVE_CULL_TOLERANCE;l-=d,u+=d,f-=x,c+=x,t.isVisible=function(b,p){return b>l&&b<u&&p>f&&p<c},t.isOccluded=function(b,p){return b<l||b>u||p<f||p>c},t.setScale=function(){var b=t._x,p=t._y,w=AXt(t._xctrl,t._yctrl,b,p,o.smoothing,s.smoothing);t._xctrl=w[0],t._yctrl=w[1],t.evalxy=MXt([t._xctrl,t._yctrl],n,a,o.smoothing,s.smoothing),t.dxydi=SXt([t._xctrl,t._yctrl],o.smoothing,s.smoothing),t.dxydj=EXt([t._xctrl,t._yctrl],o.smoothing,s.smoothing)},t.i2a=function(b){var p=Math.max(0,Math.floor(b[0]),n-2),w=b[0]-p;return(1-w)*r[p]+w*r[p+1]},t.j2b=function(b){var p=Math.max(0,Math.floor(b[1]),n-2),w=b[1]-p;return(1-w)*i[p]+w*i[p+1]},t.ij2ab=function(b){return[t.i2a(b[0]),t.j2b(b[1])]},t.a2i=function(b){var p=Math.max(0,Math.min(BGe(b,r),n-2)),w=r[p],A=r[p+1];return Math.max(0,Math.min(n-1,p+(b-w)/(A-w)))},t.b2j=function(b){var p=Math.max(0,Math.min(BGe(b,i),a-2)),w=i[p],A=i[p+1];return Math.max(0,Math.min(a-1,p+(b-w)/(A-w)))},t.ab2ij=function(b){return[t.a2i(b[0]),t.b2j(b[1])]},t.i2c=function(b,p){return t.evalxy([],b,p)},t.ab2xy=function(b,p,w){if(!w&&(b<r[0]||b>r[n-1]|p<i[0]||p>i[a-1]))return[!1,!1];var A=t.a2i(b),T=t.b2j(p),k=t.evalxy([],A,T);if(w){var _=0,E=0,S=[],g,C,M,P;b<r[0]?(g=0,C=0,_=(b-r[0])/(r[1]-r[0])):b>r[n-1]?(g=n-2,C=1,_=(b-r[n-1])/(r[n-1]-r[n-2])):(g=Math.max(0,Math.min(n-2,Math.floor(A))),C=A-g),p<i[0]?(M=0,P=0,E=(p-i[0])/(i[1]-i[0])):p>i[a-1]?(M=a-2,P=1,E=(p-i[a-1])/(i[a-1]-i[a-2])):(M=Math.max(0,Math.min(a-2,Math.floor(T))),P=T-M),_&&(t.dxydi(S,g,M,C,P),k[0]+=S[0]*_,k[1]+=S[1]*_),E&&(t.dxydj(S,g,M,C,P),k[0]+=S[0]*E,k[1]+=S[1]*E)}return k},t.c2p=function(b,p,w){return[p.c2p(b[0]),w.c2p(b[1])]},t.p2x=function(b,p,w){return[p.p2c(b[0]),w.p2c(b[1])]},t.dadi=function(b){var p=Math.max(0,Math.min(r.length-2,b));return r[p+1]-r[p]},t.dbdj=function(b){var p=Math.max(0,Math.min(i.length-2,b));return i[p+1]-i[p]},t.dxyda=function(b,p,w,A){var T=t.dxydi(null,b,p,w,A),k=t.dadi(b,w);return[T[0]/k,T[1]/k]},t.dxydb=function(b,p,w,A){var T=t.dxydj(null,b,p,w,A),k=t.dbdj(p,A);return[T[0]/k,T[1]/k]},t.dxyda_rough=function(b,p,w){var A=h*(w||.1),T=t.ab2xy(b+A,p,!0),k=t.ab2xy(b-A,p,!0);return[(T[0]-k[0])*.5/A,(T[1]-k[1])*.5/A]},t.dxydb_rough=function(b,p,w){var A=v*(w||.1),T=t.ab2xy(b,p+A,!0),k=t.ab2xy(b,p-A,!0);return[(T[0]-k[0])*.5/A,(T[1]-k[1])*.5/A]},t.dpdx=function(b){return b._m},t.dpdy=function(b){return b._m}}});var jGe=ie((E1r,ZGe)=>{"use strict";var VF=Wi(),VGe=Zt().isArray1D,kXt=fGe(),HGe=dGe(),GGe=gGe(),YGe=_Ge(),CXt=wGe(),WGe=dP(),XGe=AGe(),LXt=hP(),PXt=UGe();ZGe.exports=function(t,r){var i=VF.getFromId(t,r.xaxis),n=VF.getFromId(t,r.yaxis),a=r.aaxis,o=r.baxis,s=r.x,l=r.y,u=[];s&&VGe(s)&&u.push("x"),l&&VGe(l)&&u.push("y"),u.length&&LXt(r,a,o,"a","b",u);var f=r._a=r._a||r.a,c=r._b=r._b||r.b;s=r._x||r.x,l=r._y||r.y;var h={};if(r._cheater){var v=a.cheatertype==="index"?f.length:f,d=o.cheatertype==="index"?c.length:c;s=kXt(v,d,r.cheaterslope)}r._x=s=WGe(s),r._y=l=WGe(l),XGe(s,f,c),XGe(l,f,c),PXt(r),r.setScale();var x=HGe(s),b=HGe(l),p=.5*(x[1]-x[0]),w=.5*(x[1]+x[0]),A=.5*(b[1]-b[0]),T=.5*(b[1]+b[0]),k=1.3;return x=[w-p*k,w+p*k],b=[T-A*k,T+A*k],r._extremes[i._id]=VF.findExtremes(i,x,{padded:!0}),r._extremes[n._id]=VF.findExtremes(n,b,{padded:!0}),GGe(r,"a","b"),GGe(r,"b","a"),YGe(r,a),YGe(r,o),h.clipsegments=CXt(r._xctrl,r._yctrl,a,o),h.x=s,h.y=l,h.a=f,h.b=c,[h]}});var JGe=ie((k1r,KGe)=>{"use strict";KGe.exports={attributes:FF(),supplyDefaults:KHe(),plot:lGe(),calc:jGe(),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:yu(),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}});var $Ge=ie((C1r,QGe)=>{"use strict";QGe.exports=JGe()});var Tj=ie((L1r,tYe)=>{"use strict";var RXt=X0(),Hd=Bl(),DXt=rs(),IXt=Ba().hovertemplateAttrs,FXt=Ba().texttemplateAttrs,eYe=Ls(),z1=aa().extendFlat,Gp=Hd.marker,ST=Hd.line,qXt=Gp.line;tYe.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:z1({},Hd.mode,{dflt:"markers"}),text:z1({},Hd.text,{}),texttemplate:FXt({editType:"plot"},{keys:["a","b","text"]}),hovertext:z1({},Hd.hovertext,{}),line:{color:ST.color,width:ST.width,dash:ST.dash,backoff:ST.backoff,shape:z1({},ST.shape,{values:["linear","spline"]}),smoothing:ST.smoothing,editType:"calc"},connectgaps:Hd.connectgaps,fill:z1({},Hd.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:RXt(),marker:z1({symbol:Gp.symbol,opacity:Gp.opacity,maxdisplayed:Gp.maxdisplayed,angle:Gp.angle,angleref:Gp.angleref,standoff:Gp.standoff,size:Gp.size,sizeref:Gp.sizeref,sizemin:Gp.sizemin,sizemode:Gp.sizemode,line:z1({width:qXt.width,editType:"calc"},eYe("marker.line")),gradient:Gp.gradient,editType:"calc"},eYe("marker")),textfont:Hd.textfont,textposition:Hd.textposition,selected:Hd.selected,unselected:Hd.unselected,hoverinfo:z1({},DXt.hoverinfo,{flags:["a","b","text","name"]}),hoveron:Hd.hoveron,hovertemplate:IXt(),zorder:Hd.zorder}});var aYe=ie((P1r,iYe)=>{"use strict";var rYe=Zt(),zXt=W0(),ET=Ks(),OXt=xp(),BXt=l0(),nYe=V2(),NXt=u0(),UXt=j0(),VXt=Tj();iYe.exports=function(t,r,i,n){function a(h,v){return rYe.coerce(t,r,VXt,h,v)}a("carpet"),r.xaxis="x",r.yaxis="y";var o=a("a"),s=a("b"),l=Math.min(o.length,s.length);if(!l){r.visible=!1;return}r._length=l,a("text"),a("texttemplate"),a("hovertext");var u=l<zXt.PTS_LINESONLY?"lines+markers":"lines";a("mode",u),ET.hasMarkers(r)&&OXt(t,r,i,n,a,{gradient:!0}),ET.hasLines(r)&&(BXt(t,r,i,n,a,{backoff:!0}),nYe(t,r,a),a("connectgaps")),ET.hasText(r)&&NXt(t,r,n,a);var f=[];(ET.hasMarkers(r)||ET.hasText(r))&&(a("marker.maxdisplayed"),f.push("points")),a("fill"),r.fill!=="none"&&(UXt(t,r,i,a),ET.hasLines(r)||nYe(t,r,a)),(r.fill==="tonext"||r.fill==="toself")&&f.push("fills");var c=a("hoveron",f.join("+")||"points");c!=="fills"&&a("hovertemplate"),a("zorder"),rYe.coerceSelectionMarkerOpacity(r,a)}});var sYe=ie((R1r,oYe)=>{"use strict";oYe.exports=function(t,r){var i={},n=r._carpet,a=n.ab2ij([t.a,t.b]),o=Math.floor(a[0]),s=a[0]-o,l=Math.floor(a[1]),u=a[1]-l,f=n.evalxy([],o,l,s,u);return i.yLabel=f[1].toFixed(3),i}});var HF=ie((D1r,lYe)=>{"use strict";lYe.exports=function(e,t){for(var r=e._fullData.length,i,n=0;n<r;n++){var a=e._fullData[n];if(a.index!==t.index&&a.type==="carpet"&&(i||(i=a),a.carpet===t.carpet))return a}return i}});var cYe=ie((I1r,fYe)=>{"use strict";var uYe=la(),HXt=_p(),GXt=K0(),YXt=bp(),WXt=wp().calcMarkerSize,XXt=HF();fYe.exports=function(t,r){var i=r._carpetTrace=XXt(t,r);if(!(!i||!i.visible||i.visible==="legendonly")){var n;r.xaxis=i.xaxis,r.yaxis=i.yaxis;var a=r._length,o=new Array(a),s,l,u=!1;for(n=0;n<a;n++)if(s=r.a[n],l=r.b[n],uYe(s)&&uYe(l)){var f=i.ab2xy(+s,+l,!0),c=i.isVisible(+s,+l);c||(u=!0),o[n]={x:f[0],y:f[1],a:s,b:l,vis:c}}else o[n]={x:!1,y:!1};return r._needsCull=u,o[0].carpet=i,o[0].trace=r,WXt(r,a),HXt(t,r),GXt(o,r),YXt(o,r),o}}});var dYe=ie((F1r,vYe)=>{"use strict";var ZXt=Z2(),hYe=Wi(),jXt=oa();vYe.exports=function(t,r,i,n){var a,o,s,l=i[0][0].carpet,u=hYe.getFromId(t,l.xaxis||"x"),f=hYe.getFromId(t,l.yaxis||"y"),c={xaxis:u,yaxis:f,plot:r.plot};for(a=0;a<i.length;a++)o=i[a][0].trace,o._xA=u,o._yA=f;for(ZXt(t,c,i,n),a=0;a<i.length;a++)o=i[a][0].trace,s=n.selectAll("g.trace"+o.uid+" .js-line"),jXt.setClipUrl(s,i[a][0].carpet._clipPathId,t)}});var gYe=ie((q1r,pYe)=>{"use strict";var KXt=Q2(),JXt=Zt().fillText;pYe.exports=function(t,r,i,n){var a=KXt(t,r,i,n);if(!a||a[0].index===!1)return;var o=a[0];if(o.index===void 0){var s=1-o.y0/t.ya._length,l=t.xa._length,u=l*s/2,f=l-u;return o.x0=Math.max(Math.min(o.x0,f),u),o.x1=Math.max(Math.min(o.x1,f),u),a}var c=o.cd[o.index];o.a=c.a,o.b=c.b,o.xLabelVal=void 0,o.yLabelVal=void 0;var h=o.trace,v=h._carpet,d=h._module.formatLabels(c,h);o.yLabel=d.yLabel,delete o.text;var x=[];function b(A,T){var k;A.labelprefix&&A.labelprefix.length>0?k=A.labelprefix.replace(/ = $/,""):k=A._hovertitle,x.push(k+": "+T.toFixed(3)+A.labelsuffix)}if(!h.hovertemplate){var p=c.hi||h.hoverinfo,w=p.split("+");w.indexOf("all")!==-1&&(w=["a","b","text"]),w.indexOf("a")!==-1&&b(v.aaxis,c.a),w.indexOf("b")!==-1&&b(v.baxis,c.b),x.push("y: "+o.yLabel),w.indexOf("text")!==-1&&JXt(c,h,x),o.extraText=x.join("<br>")}return a}});var mYe=ie((z1r,yYe)=>{"use strict";yYe.exports=function(t,r,i,n,a){var o=n[a];return t.a=o.a,t.b=o.b,t.y=o.y,t}});var _Ye=ie((O1r,xYe)=>{"use strict";xYe.exports={attributes:Tj(),supplyDefaults:aYe(),colorbar:yh(),formatLabels:sYe(),calc:cYe(),plot:dYe(),style:Sv().style,styleOnSelect:Sv().styleOnSelect,hoverPoints:gYe(),selectPoints:$2(),eventData:mYe(),moduleType:"trace",name:"scattercarpet",basePlotModule:yu(),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}});var wYe=ie((B1r,bYe)=>{"use strict";bYe.exports=_Ye()});var Aj=ie((N1r,TYe)=>{"use strict";var Yp=$x(),Ry=vS(),QXt=Ls(),$Xt=aa().extendFlat,Ag=Ry.contours;TYe.exports=$Xt({carpet:{valType:"string",editType:"calc"},z:Yp.z,a:Yp.x,a0:Yp.x0,da:Yp.dx,b:Yp.y,b0:Yp.y0,db:Yp.dy,text:Yp.text,hovertext:Yp.hovertext,transpose:Yp.transpose,atype:Yp.xtype,btype:Yp.ytype,fillcolor:Ry.fillcolor,autocontour:Ry.autocontour,ncontours:Ry.ncontours,contours:{type:Ag.type,start:Ag.start,end:Ag.end,size:Ag.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:Ag.showlines,showlabels:Ag.showlabels,labelfont:Ag.labelfont,labelformat:Ag.labelformat,operation:Ag.operation,value:Ag.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:Ry.line.color,width:Ry.line.width,dash:Ry.line.dash,smoothing:Ry.line.smoothing,editType:"plot"},zorder:Ry.zorder,transforms:void 0},QXt("",{cLetter:"z",autoColorDflt:!1}))});var Mj=ie((U1r,SYe)=>{"use strict";var AYe=Zt(),eZt=aS(),MYe=Aj(),tZt=x9(),rZt=PP(),nZt=RP();SYe.exports=function(t,r,i,n){function a(u,f){return AYe.coerce(t,r,MYe,u,f)}function o(u){return AYe.coerce2(t,r,MYe,u)}if(a("carpet"),t.a&&t.b){var s=eZt(t,r,a,n,"a","b");if(!s){r.visible=!1;return}a("text");var l=a("contours.type")==="constraint";l?tZt(t,r,a,n,i,{hasHover:!1}):(rZt(t,r,a,o),nZt(t,r,a,n,{hasHover:!1}))}else r._defaultColor=i,r._length=null;a("zorder")}});var LYe=ie((V1r,CYe)=>{"use strict";var iZt=xv(),EYe=Zt(),aZt=hP(),oZt=dP(),sZt=pP(),lZt=gP(),kYe=UN(),uZt=Mj(),fZt=HF(),cZt=s9();CYe.exports=function(t,r){var i=r._carpetTrace=fZt(t,r);if(!(!i||!i.visible||i.visible==="legendonly")){if(!r.a||!r.b){var n=t.data[i.index],a=t.data[r.index];a.a||(a.a=n.a),a.b||(a.b=n.b),uZt(a,r,r._defaultColor,t._fullLayout)}var o=hZt(t,r);return cZt(r,r._z),o}};function hZt(e,t){var r=t._carpetTrace,i=r.aaxis,n=r.baxis,a,o,s,l,u,f,c;i._minDtick=0,n._minDtick=0,EYe.isArray1D(t.z)&&aZt(t,i,n,"a","b",["z"]),a=t._a=t._a||t.a,l=t._b=t._b||t.b,a=a?i.makeCalcdata(t,"_a"):[],l=l?n.makeCalcdata(t,"_b"):[],o=t.a0||0,s=t.da||1,u=t.b0||0,f=t.db||1,c=t._z=oZt(t._z||t.z,t.transpose),t._emptypoints=lZt(c),sZt(c,t._emptypoints);var h=EYe.maxRowLength(c),v=t.xtype==="scaled"?"":a,d=kYe(t,v,o,s,h,i),x=t.ytype==="scaled"?"":l,b=kYe(t,x,u,f,c.length,n),p={a:d,b,z:c};return t.contours.type==="levels"&&t.contours.coloring!=="none"&&iZt(e,t,{vals:c,containerStr:"",cLetter:"z"}),[p]}});var RYe=ie((H1r,PYe)=>{"use strict";var vZt=Zt().isArrayOrTypedArray;PYe.exports=function(e,t,r,i){var n,a,o,s,l,u,f,c,h,v,d,x,b,p=vZt(r)?"a":"b",w=p==="a"?e.aaxis:e.baxis,A=w.smoothing,T=p==="a"?e.a2i:e.b2j,k=p==="a"?r:i,_=p==="a"?i:r,E=p==="a"?t.a.length:t.b.length,S=p==="a"?t.b.length:t.a.length,g=Math.floor(p==="a"?e.b2j(_):e.a2i(_)),C=p==="a"?function(ne){return e.evalxy([],ne,g)}:function(ne){return e.evalxy([],g,ne)};A&&(o=Math.max(0,Math.min(S-2,g)),s=g-o,a=p==="a"?function(ne,fe){return e.dxydi([],ne,o,fe,s)}:function(ne,fe){return e.dxydj([],o,ne,s,fe)});var M=T(k[0]),P=T(k[1]),D=M<P?1:-1,q=(P-M)*1e-8,O=D>0?Math.floor:Math.ceil,U=D>0?Math.ceil:Math.floor,B=D>0?Math.min:Math.max,F=D>0?Math.max:Math.min,N=O(M+q),X=U(P-q);f=C(M);var K=[[f]];for(n=N;n*D<X*D;n+=D)l=[],d=F(M,n),x=B(P,n+D),b=x-d,u=Math.max(0,Math.min(E-2,Math.floor(.5*(d+x)))),c=C(x),A&&(h=a(u,d-u),v=a(u,x-u),l.push([f[0]+h[0]/3*b,f[1]+h[1]/3*b]),l.push([c[0]-v[0]/3*b,c[1]-v[1]/3*b])),l.push(c),K.push(l),f=c;return K}});var BYe=ie((G1r,OYe)=>{"use strict";var YF=Mi(),WF=xj(),zYe=_j(),Z5=oa(),Dy=Zt(),dZt=u9(),pZt=f9(),lb=FP(),GF=pS(),gZt=d9(),yZt=v9(),mZt=p9(),xZt=HF(),DYe=RYe();OYe.exports=function(t,r,i,n){var a=r.xaxis,o=r.yaxis;Dy.makeTraceGroups(n,i,"contour").each(function(s){var l=YF.select(this),u=s[0],f=u.trace,c=f._carpetTrace=xZt(t,f),h=t.calcdata[c.index][0];if(!c.visible||c.visible==="legendonly")return;var v=u.a,d=u.b,x=f.contours,b=yZt(x,r,u),p=x.type==="constraint",w=x._operation,A=p?w==="="?"lines":"fill":x.coloring;function T(O){var U=c.ab2xy(O[0],O[1],!0);return[a.c2p(U[0]),o.c2p(U[1])]}var k=[[v[0],d[d.length-1]],[v[v.length-1],d[d.length-1]],[v[v.length-1],d[0]],[v[0],d[0]]];dZt(b);var _=(v[v.length-1]-v[0])*1e-8,E=(d[d.length-1]-d[0])*1e-8;pZt(b,_,E);var S=b;x.type==="constraint"&&(S=gZt(b,w)),_Zt(b,T);var g,C,M,P,D=[];for(P=h.clipsegments.length-1;P>=0;P--)g=h.clipsegments[P],C=WF([],g.x,a.c2p),M=WF([],g.y,o.c2p),C.reverse(),M.reverse(),D.push(zYe(C,M,g.bicubic));var q="M"+D.join("L")+"Z";TZt(l,h.clipsegments,a,o,p,A),AZt(f,l,a,o,S,k,T,c,h,A,q),bZt(l,b,t,u,x,r,c),Z5.setClipUrl(l,c._clipPathId,t)})};function _Zt(e,t){var r,i,n,a,o,s,l,u,f;for(r=0;r<e.length;r++){for(a=e[r],o=a.pedgepaths=[],s=a.ppaths=[],i=0;i<a.edgepaths.length;i++){for(f=a.edgepaths[i],l=[],n=0;n<f.length;n++)l[n]=t(f[n]);o.push(l)}for(i=0;i<a.paths.length;i++){for(f=a.paths[i],u=[],n=0;n<f.length;n++)u[n]=t(f[n]);s.push(u)}}}function bZt(e,t,r,i,n,a,o){var s=r._context.staticPlot,l=Dy.ensureSingle(e,"g","contourlines"),u=n.showlines!==!1,f=n.showlabels,c=u&&f,h=lb.createLines(l,u||f,t,s),v=lb.createLineClip(l,c,r,i.trace.uid),d=e.selectAll("g.contourlabels").data(f?[0]:[]);if(d.exit().remove(),d.enter().append("g").classed("contourlabels",!0),f){var x=a.xaxis,b=a.yaxis,p=x._length,w=b._length,A=[[[0,0],[p,0],[p,w],[0,w]]],T=[];Dy.clearLocationCache();var k=lb.labelFormatter(r,i),_=Z5.tester.append("text").attr("data-notex",1).call(Z5.font,n.labelfont),E={left:0,right:p,center:p/2,top:0,bottom:w,middle:w/2},S=Math.sqrt(p*p+w*w),g=GF.LABELDISTANCE*S/Math.max(1,t.length/GF.LABELINCREASE);h.each(function(C){var M=lb.calcTextOpts(C.level,k,_,r);YF.select(this).selectAll("path").each(function(P){var D=this,q=Dy.getVisibleSegment(D,E,M.height/2);if(q&&(wZt(D,P,C,q,o,M.height),!(q.len<(M.width+M.height)*GF.LABELMIN)))for(var O=Math.min(Math.ceil(q.len/g),GF.LABELMAX),U=0;U<O;U++){var B=lb.findBestTextLocation(D,q,M,T,E);if(!B)break;lb.addLabelData(B,M,T,A)}})}),_.remove(),lb.drawLabels(d,T,r,v,c?A:null)}f&&!u&&h.remove()}function wZt(e,t,r,i,n,a){for(var o,s=0;s<r.pedgepaths.length;s++)t===r.pedgepaths[s]&&(o=r.edgepaths[s]);if(!o)return;var l=n.a[0],u=n.a[n.a.length-1],f=n.b[0],c=n.b[n.b.length-1];function h(p,w){var A=0,T,k=.1;return(Math.abs(p[0]-l)<k||Math.abs(p[0]-u)<k)&&(T=FYe(n.dxydb_rough(p[0],p[1],k)),A=Math.max(A,a*qYe(w,T)/2)),(Math.abs(p[1]-f)<k||Math.abs(p[1]-c)<k)&&(T=FYe(n.dxyda_rough(p[0],p[1],k)),A=Math.max(A,a*qYe(w,T)/2)),A}var v=IYe(e,0,1),d=IYe(e,i.total,i.total-1),x=h(o[0],v),b=i.total-h(o[o.length-1],d);i.min<x&&(i.min=x),i.max>b&&(i.max=b),i.len=i.max-i.min}function IYe(e,t,r){var i=e.getPointAtLength(t),n=e.getPointAtLength(r),a=n.x-i.x,o=n.y-i.y,s=Math.sqrt(a*a+o*o);return[a/s,o/s]}function FYe(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return[e[0]/t,e[1]/t]}function qYe(e,t){var r=Math.abs(e[0]*t[0]+e[1]*t[1]),i=Math.sqrt(1-r*r);return i/r}function TZt(e,t,r,i,n,a){var o,s,l,u,f=Dy.ensureSingle(e,"g","contourbg"),c=f.selectAll("path").data(a==="fill"&&!n?[0]:[]);c.enter().append("path"),c.exit().remove();var h=[];for(u=0;u<t.length;u++)o=t[u],s=WF([],o.x,r.c2p),l=WF([],o.y,i.c2p),h.push(zYe(s,l,o.bicubic));c.attr("d","M"+h.join("L")+"Z").style("stroke","none")}function AZt(e,t,r,i,n,a,o,s,l,u,f){var c=u==="fill";c&&mZt(n,e.contours);var h=Dy.ensureSingle(t,"g","contourfill"),v=h.selectAll("path").data(c?n:[]);v.enter().append("path"),v.exit().remove(),v.each(function(d){var x=(d.prefixBoundary?f:"")+MZt(e,d,a,o,s,l,r,i);x?YF.select(this).attr("d",x).style("stroke","none"):YF.select(this).remove()})}function MZt(e,t,r,i,n,a,o,s){var l,u="",f=t.edgepaths.map(function(M,P){return P}),c=!0,h,v,d,x,b,p,w=Math.abs(r[0][0]-r[2][0])*1e-4,A=Math.abs(r[0][1]-r[2][1])*1e-4;function T(M){return Math.abs(M[1]-r[0][1])<A}function k(M){return Math.abs(M[1]-r[2][1])<A}function _(M){return Math.abs(M[0]-r[0][0])<w}function E(M){return Math.abs(M[0]-r[2][0])<w}function S(M,P){var D,q,O,U,B="";for(T(M)&&!E(M)||k(M)&&!_(M)?(U=n.aaxis,O=DYe(n,a,[M[0],P[0]],.5*(M[1]+P[1]))):(U=n.baxis,O=DYe(n,a,.5*(M[0]+P[0]),[M[1],P[1]])),D=1;D<O.length;D++)for(B+=U.smoothing?"C":"L",q=0;q<O[D].length;q++){var F=O[D][q];B+=[o.c2p(F[0]),s.c2p(F[1])]+" "}return B}for(l=0,h=null;f.length;){var g=t.edgepaths[l][0];for(h&&(u+=S(h,g)),p=Z5.smoothopen(t.edgepaths[l].map(i),t.smoothing),u+=c?p:p.replace(/^M/,"L"),f.splice(f.indexOf(l),1),h=t.edgepaths[l][t.edgepaths[l].length-1],x=-1,d=0;d<4;d++){if(!h){Dy.log("Missing end?",l,t);break}for(T(h)&&!E(h)?v=r[1]:_(h)?v=r[0]:k(h)?v=r[3]:E(h)&&(v=r[2]),b=0;b<t.edgepaths.length;b++){var C=t.edgepaths[b][0];Math.abs(h[0]-v[0])<w?Math.abs(h[0]-C[0])<w&&(C[1]-h[1])*(v[1]-C[1])>=0&&(v=C,x=b):Math.abs(h[1]-v[1])<A?Math.abs(h[1]-C[1])<A&&(C[0]-h[0])*(v[0]-C[0])>=0&&(v=C,x=b):Dy.log("endpt to newendpt is not vert. or horz.",h,v,C)}if(x>=0)break;u+=S(h,v),h=v}if(x===t.edgepaths.length){Dy.log("unclosed perimeter path");break}l=x,c=f.indexOf(l)===-1,c&&(l=f[0],u+=S(h,v)+"Z",h=null)}for(l=0;l<t.paths.length;l++)u+=Z5.smoothclosed(t.paths[l].map(i),t.smoothing);return u}});var UYe=ie((Y1r,NYe)=>{"use strict";NYe.exports={attributes:Aj(),supplyDefaults:Mj(),colorbar:OP(),calc:LYe(),plot:BYe(),style:zP(),moduleType:"trace",name:"contourcarpet",basePlotModule:yu(),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}});var HYe=ie((W1r,VYe)=>{"use strict";VYe.exports=UYe()});var ZF=ie((X1r,ZYe)=>{"use strict";var XF=Zt().extendFlat,j5=Bl(),GYe=kl().axisHoverFormat,WYe=dc().dash,SZt=$b(),XYe=Dw(),EZt=XYe.INCREASING.COLOR,kZt=XYe.DECREASING.COLOR,Sj=j5.line;function YYe(e){return{line:{color:XF({},Sj.color,{dflt:e}),width:Sj.width,dash:WYe,editType:"style"},editType:"style"}}ZYe.exports={xperiod:j5.xperiod,xperiod0:j5.xperiod0,xperiodalignment:j5.xperiodalignment,xhoverformat:GYe("x"),yhoverformat:GYe("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:XF({},Sj.width,{}),dash:XF({},WYe,{}),editType:"style"},increasing:YYe(EZt),decreasing:YYe(kZt),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:XF({},SZt.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}}),zorder:j5.zorder}});var Ej=ie((Z1r,jYe)=>{"use strict";var CZt=Ti(),LZt=Zt();jYe.exports=function(t,r,i,n){var a=i("x"),o=i("open"),s=i("high"),l=i("low"),u=i("close");i("hoverlabel.split");var f=CZt.getComponentMethod("calendars","handleTraceDefaults");if(f(t,r,["x"],n),!!(o&&s&&l&&u)){var c=Math.min(o.length,s.length,l.length,u.length);return a&&(c=Math.min(c,LZt.minRowLength(a))),r._length=c,c}}});var QYe=ie((j1r,JYe)=>{"use strict";var PZt=Zt(),RZt=Ej(),DZt=s0(),IZt=ZF();JYe.exports=function(t,r,i,n){function a(s,l){return PZt.coerce(t,r,IZt,s,l)}var o=RZt(t,r,a,n);if(!o){r.visible=!1;return}DZt(t,r,n,a,{x:!0}),a("xhoverformat"),a("yhoverformat"),a("line.width"),a("line.dash"),KYe(t,r,a,"increasing"),KYe(t,r,a,"decreasing"),a("text"),a("hovertext"),a("tickwidth"),n._requestRangeslider[r.xaxis]=!0,a("zorder")};function KYe(e,t,r,i){r(i+".line.color"),r(i+".line.width",t.line.width),r(i+".line.dash",t.line.dash)}});var kj=ie((K1r,eWe)=>{"use strict";var kT=Zt(),jF=kT._,KF=Wi(),FZt=f0(),K5=eo().BADNUM;function qZt(e,t){var r=KF.getFromId(e,t.xaxis),i=KF.getFromId(e,t.yaxis),n=OZt(e,r,t),a=t._minDiff;t._minDiff=null;var o=t._origX;t._origX=null;var s=t._xcalc;t._xcalc=null;var l=$Ye(e,t,o,s,i,zZt);return t._extremes[r._id]=KF.findExtremes(r,s,{vpad:a/2}),l.length?(kT.extendFlat(l[0].t,{wHover:a/2,tickLen:n}),l):[{t:{empty:!0}}]}function zZt(e,t,r,i){return{o:e,h:t,l:r,c:i}}function $Ye(e,t,r,i,n,a){for(var o=n.makeCalcdata(t,"open"),s=n.makeCalcdata(t,"high"),l=n.makeCalcdata(t,"low"),u=n.makeCalcdata(t,"close"),f=kT.isArrayOrTypedArray(t.text),c=kT.isArrayOrTypedArray(t.hovertext),h=!0,v=null,d=!!t.xperiodalignment,x=[],b=0;b<i.length;b++){var p=i[b],w=o[b],A=s[b],T=l[b],k=u[b];if(p!==K5&&w!==K5&&A!==K5&&T!==K5&&k!==K5){k===w?v!==null&&k!==v&&(h=k>v):h=k>w,v=k;var _=a(w,A,T,k);_.pos=p,_.yc=(w+k)/2,_.i=b,_.dir=h?"increasing":"decreasing",_.x=_.pos,_.y=[T,A],d&&(_.orig_p=r[b]),f&&(_.tx=t.text[b]),c&&(_.htx=t.hovertext[b]),x.push(_)}else x.push({pos:p,empty:!0})}return t._extremes[n._id]=KF.findExtremes(n,kT.concat(l,s),{padded:!0}),x.length&&(x[0].t={labels:{open:jF(e,"open:")+" ",high:jF(e,"high:")+" ",low:jF(e,"low:")+" ",close:jF(e,"close:")+" "}}),x}function OZt(e,t,r){var i=r._minDiff;if(!i){var n=e._fullData,a=[];i=1/0;var o;for(o=0;o<n.length;o++){var s=n[o];if(s.type==="ohlc"&&s.visible===!0&&s.xaxis===t._id){a.push(s);var l=t.makeCalcdata(s,"x");s._origX=l;var u=FZt(r,t,"x",l).vals;s._xcalc=u;var f=kT.distinctVals(u).minDiff;f&&isFinite(f)&&(i=Math.min(i,f))}}for(i===1/0&&(i=1),o=0;o<a.length;o++)a[o]._minDiff=i}return i*r.tickwidth}eWe.exports={calc:qZt,calcCommon:$Ye}});var nWe=ie((J1r,rWe)=>{"use strict";var BZt=Mi(),tWe=Zt();rWe.exports=function(t,r,i,n){var a=r.yaxis,o=r.xaxis,s=!!o.rangebreaks;tWe.makeTraceGroups(n,i,"trace ohlc").each(function(l){var u=BZt.select(this),f=l[0],c=f.t,h=f.trace;if(h.visible!==!0||c.empty){u.remove();return}var v=c.tickLen,d=u.selectAll("path").data(tWe.identity);d.enter().append("path"),d.exit().remove(),d.attr("d",function(x){if(x.empty)return"M0,0Z";var b=o.c2p(x.pos-v,!0),p=o.c2p(x.pos+v,!0),w=s?(b+p)/2:o.c2p(x.pos,!0),A=a.c2p(x.o,!0),T=a.c2p(x.h,!0),k=a.c2p(x.l,!0),_=a.c2p(x.c,!0);return"M"+b+","+A+"H"+w+"M"+w+","+T+"V"+k+"M"+p+","+_+"H"+w})})}});var aWe=ie((Q1r,iWe)=>{"use strict";var Cj=Mi(),NZt=oa(),UZt=_i();iWe.exports=function(t,r,i){var n=i||Cj.select(t).selectAll("g.ohlclayer").selectAll("g.trace");n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var o=a[0].trace;Cj.select(this).selectAll("path").each(function(s){if(!s.empty){var l=o[s.dir].line;Cj.select(this).style("fill","none").call(UZt.stroke,l.color).call(NZt.dashLine,l.dash,l.width).style("opacity",o.selectedpoints&&!s.selected?.3:1)}})})}});var Pj=ie(($1r,fWe)=>{"use strict";var Lj=Wi(),VZt=Zt(),JF=Ol(),HZt=_i(),GZt=Zt().fillText,oWe=Dw(),YZt={increasing:oWe.INCREASING.SYMBOL,decreasing:oWe.DECREASING.SYMBOL};function WZt(e,t,r,i){var n=e.cd,a=n[0].trace;return a.hoverlabel.split?lWe(e,t,r,i):uWe(e,t,r,i)}function sWe(e,t,r,i){var n=e.cd,a=e.xa,o=n[0].trace,s=n[0].t,l=o.type,u=l==="ohlc"?"l":"min",f=l==="ohlc"?"h":"max",c,h,v=s.bPos||0,d=function(C){return C.pos+v-t},x=s.bdPos||s.tickLen,b=s.wHover,p=Math.min(1,x/Math.abs(a.r2c(a.range[1])-a.r2c(a.range[0])));c=e.maxHoverDistance-p,h=e.maxSpikeDistance-p;function w(C){var M=d(C);return JF.inbox(M-b,M+b,c)}function A(C){var M=C[u],P=C[f];return M===P||JF.inbox(M-r,P-r,c)}function T(C){return(w(C)+A(C))/2}var k=JF.getDistanceFunction(i,w,A,T);if(JF.getClosest(n,k,e),e.index===!1)return null;var _=n[e.index];if(_.empty)return null;var E=_.dir,S=o[E],g=S.line.color;return HZt.opacity(g)&&S.line.width?e.color=g:e.color=S.fillcolor,e.x0=a.c2p(_.pos+v-x,!0),e.x1=a.c2p(_.pos+v+x,!0),e.xLabelVal=_.orig_p!==void 0?_.orig_p:_.pos,e.spikeDistance=T(_)*h/c,e.xSpike=a.c2p(_.pos,!0),e}function lWe(e,t,r,i){var n=e.cd,a=e.ya,o=n[0].trace,s=n[0].t,l=[],u=sWe(e,t,r,i);if(!u)return[];var f=u.index,c=n[f],h=c.hi||o.hoverinfo,v=h.split("+"),d=h==="all",x=d||v.indexOf("y")!==-1;if(!x)return[];for(var b=["high","open","close","low"],p={},w=0;w<b.length;w++){var A=b[w],T=o[A][u.index],k=a.c2p(T,!0),_;T in p?(_=p[T],_.yLabel+="<br>"+s.labels[A]+Lj.hoverLabelText(a,T,o.yhoverformat)):(_=VZt.extendFlat({},u),_.y0=_.y1=k,_.yLabelVal=T,_.yLabel=s.labels[A]+Lj.hoverLabelText(a,T,o.yhoverformat),_.name="",l.push(_),p[T]=_)}return l}function uWe(e,t,r,i){var n=e.cd,a=e.ya,o=n[0].trace,s=n[0].t,l=sWe(e,t,r,i);if(!l)return[];var u=l.index,f=n[u],c=l.index=f.i,h=f.dir;function v(T){return s.labels[T]+Lj.hoverLabelText(a,o[T][c],o.yhoverformat)}var d=f.hi||o.hoverinfo,x=d.split("+"),b=d==="all",p=b||x.indexOf("y")!==-1,w=b||x.indexOf("text")!==-1,A=p?[v("open"),v("high"),v("low"),v("close")+"  "+YZt[h]]:[];return w&&GZt(f,o,A),l.extraText=A.join("<br>"),l.y0=l.y1=a.c2p(f.yc,!0),[l]}fWe.exports={hoverPoints:WZt,hoverSplit:lWe,hoverOnPoints:uWe}});var Rj=ie((exr,cWe)=>{"use strict";cWe.exports=function(t,r){var i=t.cd,n=t.xaxis,a=t.yaxis,o=[],s,l=i[0].t.bPos||0;if(r===!1)for(s=0;s<i.length;s++)i[s].selected=0;else for(s=0;s<i.length;s++){var u=i[s];r.contains([n.c2p(u.pos+l),a.c2p(u.yc)],null,u.i,t)?(o.push({pointNumber:u.i,x:n.c2d(u.pos),y:a.c2d(u.yc)}),u.selected=1):u.selected=0}return o}});var vWe=ie((txr,hWe)=>{"use strict";hWe.exports={moduleType:"trace",name:"ohlc",basePlotModule:yu(),categories:["cartesian","svg","showLegend"],meta:{},attributes:ZF(),supplyDefaults:QYe(),calc:kj().calc,plot:nWe(),style:aWe(),hoverPoints:Pj().hoverPoints,selectPoints:Rj()}});var pWe=ie((rxr,dWe)=>{"use strict";dWe.exports=vWe()});var Ij=ie((nxr,mWe)=>{"use strict";var Dj=Zt().extendFlat,gWe=kl().axisHoverFormat,Gd=ZF(),CT=tS();function yWe(e){return{line:{color:Dj({},CT.line.color,{dflt:e}),width:CT.line.width,editType:"style"},fillcolor:CT.fillcolor,editType:"style"}}mWe.exports={xperiod:Gd.xperiod,xperiod0:Gd.xperiod0,xperiodalignment:Gd.xperiodalignment,xhoverformat:gWe("x"),yhoverformat:gWe("y"),x:Gd.x,open:Gd.open,high:Gd.high,low:Gd.low,close:Gd.close,line:{width:Dj({},CT.line.width,{}),editType:"style"},increasing:yWe(Gd.increasing.line.color.dflt),decreasing:yWe(Gd.decreasing.line.color.dflt),text:Gd.text,hovertext:Gd.hovertext,whiskerwidth:Dj({},CT.whiskerwidth,{dflt:0}),hoverlabel:Gd.hoverlabel,zorder:CT.zorder}});var bWe=ie((ixr,_We)=>{"use strict";var XZt=Zt(),ZZt=_i(),jZt=Ej(),KZt=s0(),JZt=Ij();_We.exports=function(t,r,i,n){function a(s,l){return XZt.coerce(t,r,JZt,s,l)}var o=jZt(t,r,a,n);if(!o){r.visible=!1;return}KZt(t,r,n,a,{x:!0}),a("xhoverformat"),a("yhoverformat"),a("line.width"),xWe(t,r,a,"increasing"),xWe(t,r,a,"decreasing"),a("text"),a("hovertext"),a("whiskerwidth"),n._requestRangeslider[r.xaxis]=!0,a("zorder")};function xWe(e,t,r,i){var n=r(i+".line.color");r(i+".line.width",t.line.width),r(i+".fillcolor",ZZt.addOpacity(n,.5))}});var MWe=ie((axr,AWe)=>{"use strict";var wWe=Zt(),TWe=Wi(),QZt=f0(),$Zt=kj().calcCommon;AWe.exports=function(e,t){var r=e._fullLayout,i=TWe.getFromId(e,t.xaxis),n=TWe.getFromId(e,t.yaxis),a=i.makeCalcdata(t,"x"),o=QZt(t,i,"x",a).vals,s=$Zt(e,t,a,o,n,ejt);return s.length?(wWe.extendFlat(s[0].t,{num:r._numBoxes,dPos:wWe.distinctVals(o).minDiff/2,posLetter:"x",valLetter:"y"}),r._numBoxes++,s):[{t:{empty:!0}}]};function ejt(e,t,r,i){return{min:r,q1:Math.min(e,i),med:i,q3:Math.max(e,i),max:t}}});var EWe=ie((oxr,SWe)=>{"use strict";SWe.exports={moduleType:"trace",name:"candlestick",basePlotModule:yu(),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:Ij(),layoutAttributes:rS(),supplyLayoutDefaults:iP().supplyLayoutDefaults,crossTraceCalc:oP().crossTraceCalc,supplyDefaults:bWe(),calc:MWe(),plot:sP().plot,layerName:"boxlayer",style:lP().style,hoverPoints:Pj().hoverPoints,selectPoints:Rj()}});var CWe=ie((sxr,kWe)=>{"use strict";kWe.exports=EWe()});var qj=ie((lxr,LWe)=>{"use strict";var $F=Zt(),tjt=N0(),QF=$F.deg2rad,Fj=$F.rad2deg;LWe.exports=function(t,r,i){switch(tjt(t,i),t._id){case"x":case"radialaxis":rjt(t,r);break;case"angularaxis":ajt(t,r);break}};function rjt(e,t){var r=t._subplot;e.setGeometry=function(){var i=e._rl[0],n=e._rl[1],a=r.innerRadius,o=(r.radius-a)/(n-i),s=a/o,l=i>n?function(u){return u<=0}:function(u){return u>=0};e.c2g=function(u){var f=e.c2l(u)-i;return(l(f)?f:0)+s},e.g2c=function(u){return e.l2c(u+i-s)},e.g2p=function(u){return u*o},e.c2p=function(u){return e.g2p(e.c2g(u))}}}function njt(e,t){return t==="degrees"?QF(e):e}function ijt(e,t){return t==="degrees"?Fj(e):e}function ajt(e,t){var r=e.type;if(r==="linear"){var i=e.d2c,n=e.c2d;e.d2c=function(a,o){return njt(i(a),o)},e.c2d=function(a,o){return n(ijt(a,o))}}e.makeCalcdata=function(a,o){var s=a[o],l=a._length,u,f,c=function(b){return e.d2c(b,a.thetaunit)};if(s)for(u=new Array(l),f=0;f<l;f++)u[f]=c(s[f]);else{var h=o+"0",v="d"+o,d=h in a?c(a[h]):0,x=a[v]?c(a[v]):(e.period||2*Math.PI)/l;for(u=new Array(l),f=0;f<l;f++)u[f]=d+f*x}return u},e.setGeometry=function(){var a=t.sector,o=a.map(QF),s={clockwise:-1,counterclockwise:1}[e.direction],l=QF(e.rotation),u=function(p){return s*p+l},f=function(p){return(p-l)/s},c,h,v,d;switch(r){case"linear":h=c=$F.identity,d=QF,v=Fj,e.range=$F.isFullCircle(o)?[a[0],a[0]+360]:o.map(f).map(Fj);break;case"category":var x=e._categories.length,b=e.period?Math.max(e.period,x):x;b===0&&(b=1),h=d=function(p){return p*2*Math.PI/b},c=v=function(p){return p*b/Math.PI/2},e.range=[0,b];break}e.c2g=function(p){return u(h(p))},e.g2c=function(p){return c(f(p))},e.t2g=function(p){return u(d(p))},e.g2t=function(p){return v(f(p))}}}});var e8=ie((uxr,PWe)=>{"use strict";PWe.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}});var r8=ie((fxr,qWe)=>{"use strict";var ub=Zt(),RWe=aM().tester,zj=ub.findIndexOfMin,IWe=ub.isAngleInsideSector,ojt=ub.angleDelta,DWe=ub.angleDist;function sjt(e,t,r,i,n){if(!IWe(t,i))return!1;var a,o;r[0]<r[1]?(a=r[0],o=r[1]):(a=r[1],o=r[0]);var s=RWe(LT(a,i[0],i[1],n)),l=RWe(LT(o,i[0],i[1],n)),u=[e*Math.cos(t),e*Math.sin(t)];return l.contains(u)&&!s.contains(u)}function FWe(e,t,r,i){var n,a,o=i[0],s=i[1],l=t8(Math.sin(t)-Math.sin(e)),u=t8(Math.cos(t)-Math.cos(e)),f=Math.tan(r),c=t8(1/f),h=l/u,v=s-h*o;return c?l&&u?(n=v/(f-h),a=f*n):u?(n=s*c,a=s):(n=o,a=o*f):l&&u?(n=0,a=v):u?(n=0,a=s):n=a=NaN,[n,a]}function ljt(e,t,r,i){var n=-t*r,a=t*t+1,o=2*(t*n-r),s=n*n+r*r-e*e,l=Math.sqrt(o*o-4*a*s),u=(-o+l)/(2*a),f=(-o-l)/(2*a);return[[u,t*u+n+i],[f,t*f+n+i]]}function ujt(e,t){var r=t.length,i=new Array(r+1),n;for(n=0;n<r;n++){var a=t[n];i[n]=[e*Math.cos(a),e*Math.sin(a)]}return i[n]=i[0].slice(),i}function fjt(e,t,r,i){var n=i.length,a=[],o,s;function l(p){return[e*Math.cos(p),e*Math.sin(p)]}function u(p,w,A){return FWe(p,w,A,l(p))}function f(p){return ub.mod(p,n)}function c(p){return IWe(p,[t,r])}var h=zj(i,function(p){return c(p)?DWe(p,t):1/0}),v=u(i[h],i[f(h-1)],t);for(a.push(v),o=h,s=0;s<n;o++,s++){var d=i[f(o)];if(!c(d))break;a.push(l(d))}var x=zj(i,function(p){return c(p)?DWe(p,r):1/0}),b=u(i[x],i[f(x+1)],r);return a.push(b),a.push([0,0]),a.push(a[0].slice()),a}function LT(e,t,r,i){return ub.isFullCircle([t,r])?ujt(e,i):fjt(e,t,r,i)}function cjt(e,t,r,i){for(var n=1/0,a=1/0,o=LT(e,t,r,i),s=0;s<o.length;s++){var l=o[s];n=Math.min(n,l[0]),a=Math.min(a,-l[1])}return[n,a]}function hjt(e,t){var r=function(a){var o=ojt(a,e);return o>0?o:1/0},i=zj(t,r),n=ub.mod(i+1,t.length);return[t[i],t[n]]}function t8(e){return Math.abs(e)>1e-10?e:0}function Oj(e,t,r){t=t||0,r=r||0;for(var i=e.length,n=new Array(i),a=0;a<i;a++){var o=e[a];n[a]=[t+o[0],r-o[1]]}return n}function vjt(e,t,r,i,n,a){var o=LT(e,t,r,i);return"M"+Oj(o,n,a).join("L")}function djt(e,t,r,i,n,a,o){var s,l;e<t?(s=e,l=t):(s=t,l=e);var u=Oj(LT(s,r,i,n),a,o),f=Oj(LT(l,r,i,n),a,o);return"M"+f.reverse().join("L")+"M"+u.join("L")}qWe.exports={isPtInsidePolygon:sjt,findPolygonOffset:cjt,findEnclosingVertexAngles:hjt,findIntersectionXY:FWe,findXYatLength:ljt,clampTiny:t8,pathPolygon:vjt,pathPolygonAnnulus:djt}});var Bj=ie((cxr,BWe)=>{"use strict";function zWe(e){return e<0?-1:e>0?1:0}function PT(e){var t=e[0],r=e[1];if(!isFinite(t)||!isFinite(r))return[1,0];var i=(t+1)*(t+1)+r*r;return[(t*t+r*r-1)/i,2*r/i]}function RT(e,t){var r=t[0],i=t[1];return[r*e.radius+e.cx,-i*e.radius+e.cy]}function OWe(e,t){return t*e.radius}function pjt(e,t,r,i){var n=RT(e,PT([r,t])),a=n[0],o=n[1],s=RT(e,PT([i,t])),l=s[0],u=s[1];if(t===0)return["M"+a+","+o,"L"+l+","+u].join(" ");var f=OWe(e,1/Math.abs(t));return["M"+a+","+o,"A"+f+","+f+" 0 0,"+(t<0?1:0)+" "+l+","+u].join(" ")}function gjt(e,t,r,i){var n=OWe(e,1/(t+1)),a=RT(e,PT([t,r])),o=a[0],s=a[1],l=RT(e,PT([t,i])),u=l[0],f=l[1];if(zWe(r)!==zWe(i)){var c=RT(e,PT([t,0])),h=c[0],v=c[1];return["M"+o+","+s,"A"+n+","+n+" 0 0,"+(0<r?0:1)+" "+h+","+v,"A"+n+","+n+" 0 0,"+(i<0?0:1)+u+","+f].join(" ")}return["M"+o+","+s,"A"+n+","+n+" 0 0,"+(i<r?0:1)+" "+u+","+f].join(" ")}BWe.exports={smith:PT,reactanceArc:pjt,resistanceArc:gjt,smithTransform:RT}});var Vj=ie((hxr,ZWe)=>{"use strict";var fb=Mi(),yjt=Kf(),hb=Ti(),vl=Zt(),Mg=vl.strRotate,oc=vl.strTranslate,Nj=_i(),J5=oa(),mjt=js(),Fv=Wi(),xjt=N0(),_jt=qj(),bjt=Ld().doAutoRange,Iy=R7(),a8=Yh(),NWe=Ol(),wjt=wx(),Tjt=Ef().prepSelect,Ajt=Ef().selectOnClick,Uj=Ef().clearOutline,UWe=t0(),VWe=WA(),HWe=$A().redrawReglTraces,Mjt=Mf().MID_SHIFT,O1=e8(),Fy=r8(),o8=Bj(),n8=o8.smith,Sjt=o8.reactanceArc,Ejt=o8.resistanceArc,i8=o8.smithTransform,kjt=vl._,GWe=vl.mod,B1=vl.deg2rad,cb=vl.rad2deg;function YWe(e,t,r){this.isSmith=r||!1,this.id=t,this.gd=e,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var i=e._fullLayout,n="clip"+i._uid+t;this.clipIds.forTraces=n+"-for-traces",this.clipPaths.forTraces=i._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=i["_"+(r?"smith":"polar")+"layer"].append("g").attr("class",t),this.getHole=function(a){return this.isSmith?0:a.hole},this.getSector=function(a){return this.isSmith?[0,360]:a.sector},this.getRadial=function(a){return this.isSmith?a.realaxis:a.radialaxis},this.getAngular=function(a){return this.isSmith?a.imaginaryaxis:a.angularaxis},r||(this.radialTickLayout=null,this.angularTickLayout=null)}var Ac=YWe.prototype;ZWe.exports=function(t,r,i){return new YWe(t,r,i)};Ac.plot=function(e,t){for(var r=this,i=t[r.id],n=!1,a=0;a<e.length;a++){var o=e[a][0].trace;if(o.cliponaxis===!1){n=!0;break}}r._hasClipOnAxisFalse=n,r.updateLayers(t,i),r.updateLayout(t,i),mjt.generalUpdatePerTraceModule(r.gd,r,e,i),r.updateFx(t,i),r.isSmith&&(delete i.realaxis.range,delete i.imaginaryaxis.range)};Ac.updateLayers=function(e,t){var r=this,i=r.isSmith,n=r.layers,a=r.getRadial(t),o=r.getAngular(t),s=O1.layerNames,l=s.indexOf("frontplot"),u=s.slice(0,l),f=o.layer==="below traces",c=a.layer==="below traces";f&&u.push("angular-line"),c&&u.push("radial-line"),f&&u.push("angular-axis"),c&&u.push("radial-axis"),u.push("frontplot"),f||u.push("angular-line"),c||u.push("radial-line"),f||u.push("angular-axis"),c||u.push("radial-axis");var h=(i?"smith":"polar")+"sublayer",v=r.framework.selectAll("."+h).data(u,String);v.enter().append("g").attr("class",function(d){return h+" "+d}).each(function(d){var x=n[d]=fb.select(this);switch(d){case"frontplot":i||x.append("g").classed("barlayer",!0),x.append("g").classed("scatterlayer",!0);break;case"backplot":x.append("g").classed("maplayer",!0);break;case"plotbg":n.bg=x.append("path");break;case"radial-grid":x.style("fill","none");break;case"angular-grid":x.style("fill","none");break;case"radial-line":x.append("line").style("fill","none");break;case"angular-line":x.append("path").style("fill","none");break}}),v.order()};Ac.updateLayout=function(e,t){var r=this,i=r.layers,n=e._size,a=r.getRadial(t),o=r.getAngular(t),s=t.domain.x,l=t.domain.y;r.xOffset=n.l+n.w*s[0],r.yOffset=n.t+n.h*(1-l[1]);var u=r.xLength=n.w*(s[1]-s[0]),f=r.yLength=n.h*(l[1]-l[0]),c=r.getSector(t);r.sectorInRad=c.map(B1);var h=r.sectorBBox=Cjt(c),v=h[2]-h[0],d=h[3]-h[1],x=f/u,b=Math.abs(d/v),p,w,A,T,k;x>b?(p=u,w=u*b,k=(f-w)/n.h/2,A=[s[0],s[1]],T=[l[0]+k,l[1]-k]):(p=f/b,w=f,k=(u-p)/n.w/2,A=[s[0]+k,s[1]-k],T=[l[0],l[1]]),r.xLength2=p,r.yLength2=w,r.xDomain2=A,r.yDomain2=T;var _=r.xOffset2=n.l+n.w*A[0],E=r.yOffset2=n.t+n.h*(1-T[1]),S=r.radius=p/v,g=r.innerRadius=r.getHole(t)*S,C=r.cx=_-S*h[0],M=r.cy=E+S*h[3],P=r.cxx=C-_,D=r.cyy=M-E,q=a.side,O;q==="counterclockwise"?(O=q,q="top"):q==="clockwise"&&(O=q,q="bottom"),r.radialAxis=r.mockAxis(e,t,a,{_id:"x",side:q,_trueSide:O,domain:[g/n.w,S/n.w]}),r.angularAxis=r.mockAxis(e,t,o,{side:"right",domain:[0,Math.PI],autorange:!1}),r.doAutoRange(e,t),r.updateAngularAxis(e,t),r.updateRadialAxis(e,t),r.updateRadialAxisTitle(e,t),r.xaxis=r.mockCartesianAxis(e,t,{_id:"x",domain:A}),r.yaxis=r.mockCartesianAxis(e,t,{_id:"y",domain:T});var U=r.pathSubplot();r.clipPaths.forTraces.select("path").attr("d",U).attr("transform",oc(P,D)),i.frontplot.attr("transform",oc(_,E)).call(J5.setClipUrl,r._hasClipOnAxisFalse?null:r.clipIds.forTraces,r.gd),i.bg.attr("d",U).attr("transform",oc(C,M)).call(Nj.fill,t.bgcolor)};Ac.mockAxis=function(e,t,r,i){var n=vl.extendFlat({},r,i);return _jt(n,t,e),n};Ac.mockCartesianAxis=function(e,t,r){var i=this,n=i.isSmith,a=r._id,o=vl.extendFlat({type:"linear"},r);xjt(o,e);var s={x:[0,2],y:[1,3]};return o.setRange=function(){var l=i.sectorBBox,u=s[a],f=i.radialAxis._rl,c=(f[1]-f[0])/(1-i.getHole(t));o.range=[l[u[0]]*c,l[u[1]]*c]},o.isPtWithinRange=a==="x"&&!n?function(l){return i.isPtInside(l)}:function(){return!0},o.setRange(),o.setScale(),o};Ac.doAutoRange=function(e,t){var r=this,i=r.gd,n=r.radialAxis,a=r.getRadial(t);bjt(i,n);var o=n.range;if(a.range=o.slice(),a._input.range=o.slice(),n._rl=[n.r2l(o[0],null,"gregorian"),n.r2l(o[1],null,"gregorian")],n.minallowed!==void 0){var s=n.r2l(n.minallowed);n._rl[0]>n._rl[1]?n._rl[1]=Math.max(n._rl[1],s):n._rl[0]=Math.max(n._rl[0],s)}if(n.maxallowed!==void 0){var l=n.r2l(n.maxallowed);n._rl[0]<n._rl[1]?n._rl[1]=Math.min(n._rl[1],l):n._rl[0]=Math.min(n._rl[0],l)}};Ac.updateRadialAxis=function(e,t){var r=this,i=r.gd,n=r.layers,a=r.radius,o=r.innerRadius,s=r.cx,l=r.cy,u=r.getRadial(t),f=GWe(r.getSector(t)[0],360),c=r.radialAxis,h=o<a,v=r.isSmith;v||(r.fillViewInitialKey("radialaxis.angle",u.angle),r.fillViewInitialKey("radialaxis.range",c.range.slice()),c.setGeometry()),c.tickangle==="auto"&&f>90&&f<=270&&(c.tickangle=180);var d=v?function(S){var g=i8(r,n8([S.x,0]));return oc(g[0]-s,g[1]-l)}:function(S){return oc(c.l2p(S.x)+o,0)},x=v?function(S){return Ejt(r,S.x,-1/0,1/0)}:function(S){return r.pathArc(c.r2p(S.x)+o)},b=WWe(u);if(r.radialTickLayout!==b&&(n["radial-axis"].selectAll(".xtick").remove(),r.radialTickLayout=b),h){c.setScale();var p=0,w=v?(c.tickvals||[]).filter(function(S){return S>=0}).map(function(S){return Fv.tickText(c,S,!0,!1)}):Fv.calcTicks(c),A=v?w:Fv.clipEnds(c,w),T=Fv.getTickSigns(c)[2];v&&((c.ticks==="top"&&c.side==="bottom"||c.ticks==="bottom"&&c.side==="top")&&(T=-T),c.ticks==="top"&&c.side==="top"&&(p=-c.ticklen),c.ticks==="bottom"&&c.side==="bottom"&&(p=c.ticklen)),Fv.drawTicks(i,c,{vals:w,layer:n["radial-axis"],path:Fv.makeTickPath(c,0,T),transFn:d,crisp:!1}),Fv.drawGrid(i,c,{vals:A,layer:n["radial-grid"],path:x,transFn:vl.noop,crisp:!1}),Fv.drawLabels(i,c,{vals:w,layer:n["radial-axis"],transFn:d,labelFns:Fv.makeLabelFns(c,p)})}var k=r.radialAxisAngle=r.vangles?cb(XWe(B1(u.angle),r.vangles)):u.angle,_=oc(s,l),E=_+Mg(-k);Q5(n["radial-axis"],h&&(u.showticklabels||u.ticks),{transform:E}),Q5(n["radial-grid"],h&&u.showgrid,{transform:v?"":_}),Q5(n["radial-line"].select("line"),h&&u.showline,{x1:v?-a:o,y1:0,x2:a,y2:0,transform:E}).attr("stroke-width",u.linewidth).call(Nj.stroke,u.linecolor)};Ac.updateRadialAxisTitle=function(e,t,r){if(!this.isSmith){var i=this,n=i.gd,a=i.radius,o=i.cx,s=i.cy,l=i.getRadial(t),u=i.id+"title",f=0;if(l.title){var c=J5.bBox(i.layers["radial-axis"].node()).height,h=l.title.font.size,v=l.side;f=v==="top"?h:v==="counterclockwise"?-(c+h*.4):c+h*.8}var d=r!==void 0?r:i.radialAxisAngle,x=B1(d),b=Math.cos(x),p=Math.sin(x),w=o+a/2*b+f*p,A=s-a/2*p+f*b;i.layers["radial-axis-title"]=wjt.draw(n,u,{propContainer:l,propName:i.id+".radialaxis.title",placeholder:kjt(n,"Click to enter radial axis title"),attributes:{x:w,y:A,"text-anchor":"middle"},transform:{rotate:-d}})}};Ac.updateAngularAxis=function(e,t){var r=this,i=r.gd,n=r.layers,a=r.radius,o=r.innerRadius,s=r.cx,l=r.cy,u=r.getAngular(t),f=r.angularAxis,c=r.isSmith;c||(r.fillViewInitialKey("angularaxis.rotation",u.rotation),f.setGeometry(),f.setScale());var h=c?function(g){var C=i8(r,n8([0,g.x]));return Math.atan2(C[0]-s,C[1]-l)-Math.PI/2}:function(g){return f.t2g(g.x)};f.type==="linear"&&f.thetaunit==="radians"&&(f.tick0=cb(f.tick0),f.dtick=cb(f.dtick));var v=function(g){return oc(s+a*Math.cos(g),l-a*Math.sin(g))},d=c?function(g){var C=i8(r,n8([0,g.x]));return oc(C[0],C[1])}:function(g){return v(h(g))},x=c?function(g){var C=i8(r,n8([0,g.x])),M=Math.atan2(C[0]-s,C[1]-l)-Math.PI/2;return oc(C[0],C[1])+Mg(-cb(M))}:function(g){var C=h(g);return v(C)+Mg(-cb(C))},b=c?function(g){return Sjt(r,g.x,0,1/0)}:function(g){var C=h(g),M=Math.cos(C),P=Math.sin(C);return"M"+[s+o*M,l-o*P]+"L"+[s+a*M,l-a*P]},p=Fv.makeLabelFns(f,0),w=p.labelStandoff,A={};A.xFn=function(g){var C=h(g);return Math.cos(C)*w},A.yFn=function(g){var C=h(g),M=Math.sin(C)>0?.2:1;return-Math.sin(C)*(w+g.fontSize*M)+Math.abs(Math.cos(C))*(g.fontSize*Mjt)},A.anchorFn=function(g){var C=h(g),M=Math.cos(C);return Math.abs(M)<.1?"middle":M>0?"start":"end"},A.heightFn=function(g,C,M){var P=h(g);return-.5*(1+Math.sin(P))*M};var T=WWe(u);r.angularTickLayout!==T&&(n["angular-axis"].selectAll("."+f._id+"tick").remove(),r.angularTickLayout=T);var k=c?[1/0].concat(f.tickvals||[]).map(function(g){return Fv.tickText(f,g,!0,!1)}):Fv.calcTicks(f);c&&(k[0].text="\u221E",k[0].fontSize*=1.75);var _;if(t.gridshape==="linear"?(_=k.map(h),vl.angleDelta(_[0],_[1])<0&&(_=_.slice().reverse())):_=null,r.vangles=_,f.type==="category"&&(k=k.filter(function(g){return vl.isAngleInsideSector(h(g),r.sectorInRad)})),f.visible){var E=f.ticks==="inside"?-1:1,S=(f.linewidth||1)/2;Fv.drawTicks(i,f,{vals:k,layer:n["angular-axis"],path:"M"+E*S+",0h"+E*f.ticklen,transFn:x,crisp:!1}),Fv.drawGrid(i,f,{vals:k,layer:n["angular-grid"],path:b,transFn:vl.noop,crisp:!1}),Fv.drawLabels(i,f,{vals:k,layer:n["angular-axis"],repositionOnUpdate:!0,transFn:d,labelFns:A})}Q5(n["angular-line"].select("path"),u.showline,{d:r.pathSubplot(),transform:oc(s,l)}).attr("stroke-width",u.linewidth).call(Nj.stroke,u.linecolor)};Ac.updateFx=function(e,t){if(!this.gd._context.staticPlot){var r=!this.isSmith;r&&(this.updateAngularDrag(e),this.updateRadialDrag(e,t,0),this.updateRadialDrag(e,t,1)),this.updateHoverAndMainDrag(e)}};Ac.updateHoverAndMainDrag=function(e){var t=this,r=t.isSmith,i=t.gd,n=t.layers,a=e._zoomlayer,o=O1.MINZOOM,s=O1.OFFEDGE,l=t.radius,u=t.innerRadius,f=t.cx,c=t.cy,h=t.cxx,v=t.cyy,d=t.sectorInRad,x=t.vangles,b=t.radialAxis,p=Fy.clampTiny,w=Fy.findXYatLength,A=Fy.findEnclosingVertexAngles,T=O1.cornerHalfWidth,k=O1.cornerLen/2,_,E,S=Iy.makeDragger(n,"path","maindrag",e.dragmode===!1?"none":"crosshair");fb.select(S).attr("d",t.pathSubplot()).attr("transform",oc(f,c)),S.onmousemove=function(ae){NWe.hover(i,ae,t.id),i._fullLayout._lasthover=S,i._fullLayout._hoversubplot=t.id},S.onmouseout=function(ae){i._dragging||a8.unhover(i,ae)};var g={element:S,gd:i,subplot:t.id,plotinfo:{id:t.id,xaxis:t.xaxis,yaxis:t.yaxis},xaxes:[t.xaxis],yaxes:[t.yaxis]},C,M,P,D,q,O,U,B,F;function N(ae,_e){return Math.sqrt(ae*ae+_e*_e)}function X(ae,_e){return N(ae-h,_e-v)}function K(ae,_e){return Math.atan2(v-_e,ae-h)}function ne(ae,_e){return[ae*Math.cos(_e),ae*Math.sin(-_e)]}function fe(ae,_e){if(ae===0)return t.pathSector(2*T);var Ce=k/ae,qe=_e-Ce,rt=_e+Ce,Re=Math.max(0,Math.min(ae,l)),Ie=Re-T,ot=Re+T;return"M"+ne(Ie,qe)+"A"+[Ie,Ie]+" 0,0,0 "+ne(Ie,rt)+"L"+ne(ot,rt)+"A"+[ot,ot]+" 0,0,1 "+ne(ot,qe)+"Z"}function ue(ae,_e,Ce){if(ae===0)return t.pathSector(2*T);var qe=ne(ae,_e),rt=ne(ae,Ce),Re=p((qe[0]+rt[0])/2),Ie=p((qe[1]+rt[1])/2),ot,lt;if(Re&&Ie){var ht=Ie/Re,xt=-1/ht,Vt=w(T,ht,Re,Ie);ot=w(k,xt,Vt[0][0],Vt[0][1]),lt=w(k,xt,Vt[1][0],Vt[1][1])}else{var Ht,Me;Ie?(Ht=k,Me=T):(Ht=T,Me=k),ot=[[Re-Ht,Ie-Me],[Re+Ht,Ie-Me]],lt=[[Re-Ht,Ie+Me],[Re+Ht,Ie+Me]]}return"M"+ot.join("L")+"L"+lt.reverse().join("L")+"Z"}function ee(){P=null,D=null,q=t.pathSubplot(),O=!1;var ae=i._fullLayout[t.id];U=yjt(ae.bgcolor).getLuminance(),B=Iy.makeZoombox(a,U,f,c,q),B.attr("fill-rule","evenodd"),F=Iy.makeCorners(a,f,c),Uj(i)}function Z(ae,_e){return _e=Math.max(Math.min(_e,l),u),ae<s?ae=0:l-ae<s?ae=l:_e<s?_e=0:l-_e<s&&(_e=l),Math.abs(_e-ae)>o?(ae<_e?(P=ae,D=_e):(P=_e,D=ae),!0):(P=null,D=null,!1)}function oe(ae,_e){ae=ae||q,_e=_e||"M0,0Z",B.attr("d",ae),F.attr("d",_e),Iy.transitionZoombox(B,F,O,U),O=!0;var Ce={};te(Ce),i.emit("plotly_relayouting",Ce)}function ce(ae,_e){ae=ae*_,_e=_e*E;var Ce=C+ae,qe=M+_e,rt=X(C,M),Re=Math.min(X(Ce,qe),l),Ie=K(C,M),ot,lt;Z(rt,Re)&&(ot=q+t.pathSector(D),P&&(ot+=t.pathSector(P)),lt=fe(P,Ie)+fe(D,Ie)),oe(ot,lt)}function le(ae,_e,Ce,qe){var rt=Fy.findIntersectionXY(Ce,qe,Ce,[ae-h,v-_e]);return N(rt[0],rt[1])}function me(ae,_e){var Ce=C+ae,qe=M+_e,rt=K(C,M),Re=K(Ce,qe),Ie=A(rt,x),ot=A(Re,x),lt=le(C,M,Ie[0],Ie[1]),ht=Math.min(le(Ce,qe,ot[0],ot[1]),l),xt,Vt;Z(lt,ht)&&(xt=q+t.pathSector(D),P&&(xt+=t.pathSector(P)),Vt=[ue(P,Ie[0],Ie[1]),ue(D,Ie[0],Ie[1])].join(" ")),oe(xt,Vt)}function he(){if(Iy.removeZoombox(i),!(P===null||D===null)){var ae={};te(ae),Iy.showDoubleClickNotifier(i),hb.call("_guiRelayout",i,ae)}}function te(ae){var _e=b._rl,Ce=(_e[1]-_e[0])/(1-u/l)/l,qe=[_e[0]+(P-u)*Ce,_e[0]+(D-u)*Ce];ae[t.id+".radialaxis.range"]=qe}function ge(ae,_e){var Ce=i._fullLayout.clickmode;if(Iy.removeZoombox(i),ae===2){var qe={};for(var rt in t.viewInitial)qe[t.id+"."+rt]=t.viewInitial[rt];i.emit("plotly_doubleclick",null),hb.call("_guiRelayout",i,qe)}Ce.indexOf("select")>-1&&ae===1&&Ajt(_e,i,[t.xaxis],[t.yaxis],t.id,g),Ce.indexOf("event")>-1&&NWe.click(i,_e,t.id)}g.prepFn=function(ae,_e,Ce){var qe=i._fullLayout.dragmode,rt=S.getBoundingClientRect();i._fullLayout._calcInverseTransform(i);var Re=i._fullLayout._invTransform;_=i._fullLayout._invScaleX,E=i._fullLayout._invScaleY;var Ie=vl.apply3DTransform(Re)(_e-rt.left,Ce-rt.top);if(C=Ie[0],M=Ie[1],x){var ot=Fy.findPolygonOffset(l,d[0],d[1],x);C+=h+ot[0],M+=v+ot[1]}switch(qe){case"zoom":g.clickFn=ge,r||(x?g.moveFn=me:g.moveFn=ce,g.doneFn=he,ee(ae,_e,Ce));break;case"select":case"lasso":Tjt(ae,_e,Ce,g,qe);break}},a8.init(g)};Ac.updateRadialDrag=function(e,t,r){var i=this,n=i.gd,a=i.layers,o=i.radius,s=i.innerRadius,l=i.cx,u=i.cy,f=i.radialAxis,c=O1.radialDragBoxSize,h=c/2;if(!f.visible)return;var v=B1(i.radialAxisAngle),d=f._rl,x=d[0],b=d[1],p=d[r],w=.75*(d[1]-d[0])/(1-i.getHole(t))/o,A,T,k;r?(A=l+(o+h)*Math.cos(v),T=u-(o+h)*Math.sin(v),k="radialdrag"):(A=l+(s-h)*Math.cos(v),T=u-(s-h)*Math.sin(v),k="radialdrag-inner");var _=Iy.makeRectDragger(a,k,"crosshair",-h,-h,c,c),E={element:_,gd:n};e.dragmode===!1&&(E.dragmode=!1),Q5(fb.select(_),f.visible&&s<o,{transform:oc(A,T)});var S,g,C;function M(U,B){if(S)S(U,B);else{var F=[U,-B],N=[Math.cos(v),Math.sin(v)],X=Math.abs(vl.dot(F,N)/Math.sqrt(vl.dot(F,F)));isNaN(X)||(S=X<.5?q:O)}var K={};P(K),n.emit("plotly_relayouting",K)}function P(U){g!==null?U[i.id+".radialaxis.angle"]=g:C!==null&&(U[i.id+".radialaxis.range["+r+"]"]=C)}function D(){g!==null?hb.call("_guiRelayout",n,i.id+".radialaxis.angle",g):C!==null&&hb.call("_guiRelayout",n,i.id+".radialaxis.range["+r+"]",C)}function q(U,B){if(r!==0){var F=A+U,N=T+B;g=Math.atan2(u-N,F-l),i.vangles&&(g=XWe(g,i.vangles)),g=cb(g);var X=oc(l,u)+Mg(-g);a["radial-axis"].attr("transform",X),a["radial-line"].select("line").attr("transform",X);var K=i.gd._fullLayout,ne=K[i.id];i.updateRadialAxisTitle(K,ne,g)}}function O(U,B){var F=vl.dot([U,-B],[Math.cos(v),Math.sin(v)]);if(C=p-w*F,w>0!=(r?C>x:C<b)){C=null;return}var N=n._fullLayout,X=N[i.id];f.range[r]=C,f._rl[r]=C,i.updateRadialAxis(N,X),i.xaxis.setRange(),i.xaxis.setScale(),i.yaxis.setRange(),i.yaxis.setScale();var K=!1;for(var ne in i.traceHash){var fe=i.traceHash[ne],ue=vl.filterVisible(fe),ee=fe[0][0].trace._module;ee.plot(n,i,ue,X),hb.traceIs(ne,"gl")&&ue.length&&(K=!0)}K&&(VWe(n),HWe(n))}E.prepFn=function(){S=null,g=null,C=null,E.moveFn=M,E.doneFn=D,Uj(n)},E.clampFn=function(U,B){return Math.sqrt(U*U+B*B)<O1.MINDRAG&&(U=0,B=0),[U,B]},a8.init(E)};Ac.updateAngularDrag=function(e){var t=this,r=t.gd,i=t.layers,n=t.radius,a=t.angularAxis,o=t.cx,s=t.cy,l=t.cxx,u=t.cyy,f=O1.angularDragBoxSize,c=Iy.makeDragger(i,"path","angulardrag",e.dragmode===!1?"none":"move"),h={element:c,gd:r};e.dragmode===!1?h.dragmode=!1:fb.select(c).attr("d",t.pathAnnulus(n,n+f)).attr("transform",oc(o,s)).call(UWe,"move");function v(C,M){return Math.atan2(u+f-M,C-l-f)}var d=i.frontplot.select(".scatterlayer").selectAll(".trace"),x=d.selectAll(".point"),b=d.selectAll(".textpoint"),p,w,A,T,k,_;function E(C,M){var P=t.gd._fullLayout,D=P[t.id],q=p+C*e._invScaleX,O=w+M*e._invScaleY,U=v(q,O),B=cb(U-_);if(T=A+B,i.frontplot.attr("transform",oc(t.xOffset2,t.yOffset2)+Mg([-B,l,u])),t.vangles){k=t.radialAxisAngle+B;var F=oc(o,s)+Mg(-B),N=oc(o,s)+Mg(-k);i.bg.attr("transform",F),i["radial-grid"].attr("transform",F),i["radial-axis"].attr("transform",N),i["radial-line"].select("line").attr("transform",N),t.updateRadialAxisTitle(P,D,k)}else t.clipPaths.forTraces.select("path").attr("transform",oc(l,u)+Mg(B));x.each(function(){var Z=fb.select(this),oe=J5.getTranslate(Z);Z.attr("transform",oc(oe.x,oe.y)+Mg([B]))}),b.each(function(){var Z=fb.select(this),oe=Z.select("text"),ce=J5.getTranslate(Z);Z.attr("transform",Mg([B,oe.attr("x"),oe.attr("y")])+oc(ce.x,ce.y))}),a.rotation=vl.modHalf(T,360),t.updateAngularAxis(P,D),t._hasClipOnAxisFalse&&!vl.isFullCircle(t.sectorInRad)&&d.call(J5.hideOutsideRangePoints,t);var X=!1;for(var K in t.traceHash)if(hb.traceIs(K,"gl")){var ne=t.traceHash[K],fe=vl.filterVisible(ne),ue=ne[0][0].trace._module;ue.plot(r,t,fe,D),fe.length&&(X=!0)}X&&(VWe(r),HWe(r));var ee={};S(ee),r.emit("plotly_relayouting",ee)}function S(C){C[t.id+".angularaxis.rotation"]=T,t.vangles&&(C[t.id+".radialaxis.angle"]=k)}function g(){b.select("text").attr("transform",null);var C={};S(C),hb.call("_guiRelayout",r,C)}h.prepFn=function(C,M,P){var D=e[t.id];A=D.angularaxis.rotation;var q=c.getBoundingClientRect();p=M-q.left,w=P-q.top,r._fullLayout._calcInverseTransform(r);var O=vl.apply3DTransform(e._invTransform)(p,w);p=O[0],w=O[1],_=v(p,w),h.moveFn=E,h.doneFn=g,Uj(r)},t.vangles&&!vl.isFullCircle(t.sectorInRad)&&(h.prepFn=vl.noop,UWe(fb.select(c),null)),a8.init(h)};Ac.isPtInside=function(e){if(this.isSmith)return!0;var t=this.sectorInRad,r=this.vangles,i=this.angularAxis.c2g(e.theta),n=this.radialAxis,a=n.c2l(e.r),o=n._rl,s=r?Fy.isPtInsidePolygon:vl.isPtInsideSector;return s(a,i,o,t,r)};Ac.pathArc=function(e){var t=this.sectorInRad,r=this.vangles,i=r?Fy.pathPolygon:vl.pathArc;return i(e,t[0],t[1],r)};Ac.pathSector=function(e){var t=this.sectorInRad,r=this.vangles,i=r?Fy.pathPolygon:vl.pathSector;return i(e,t[0],t[1],r)};Ac.pathAnnulus=function(e,t){var r=this.sectorInRad,i=this.vangles,n=i?Fy.pathPolygonAnnulus:vl.pathAnnulus;return n(e,t,r[0],r[1],i)};Ac.pathSubplot=function(){var e=this.innerRadius,t=this.radius;return e?this.pathAnnulus(e,t):this.pathSector(t)};Ac.fillViewInitialKey=function(e,t){e in this.viewInitial||(this.viewInitial[e]=t)};function WWe(e){var t=e.ticks+String(e.ticklen)+String(e.showticklabels);return"side"in e&&(t+=e.side),t}function Cjt(e){var t=e[0],r=e[1],i=r-t,n=GWe(t,360),a=n+i,o=Math.cos(B1(n)),s=Math.sin(B1(n)),l=Math.cos(B1(a)),u=Math.sin(B1(a)),f,c,h,v;return n<=90&&a>=90||n>90&&a>=450?v=1:s<=0&&u<=0?v=0:v=Math.max(s,u),n<=180&&a>=180||n>180&&a>=540?f=-1:o>=0&&l>=0?f=0:f=Math.min(o,l),n<=270&&a>=270||n>270&&a>=630?c=-1:s>=0&&u>=0?c=0:c=Math.min(s,u),a>=360?h=1:o<=0&&l<=0?h=0:h=Math.max(o,l),[f,c,h,v]}function XWe(e,t){var r=function(n){return vl.angleDist(e,n)},i=vl.findIndexOfMin(t,r);return t[i]}function Q5(e,t,r){return t?(e.attr("display",null),e.attr(r)):e&&e.attr("display","none"),e}});var Hj=ie((vxr,eXe)=>{"use strict";var Ljt=Qu(),Fa=gc(),Pjt=fl().attributes,Yd=Zt().extendFlat,jWe=Zs().overrideAll,KWe=jWe({color:Fa.color,showline:Yd({},Fa.showline,{dflt:!0}),linecolor:Fa.linecolor,linewidth:Fa.linewidth,showgrid:Yd({},Fa.showgrid,{dflt:!0}),gridcolor:Fa.gridcolor,gridwidth:Fa.gridwidth,griddash:Fa.griddash},"plot","from-root"),JWe=jWe({tickmode:Fa.minor.tickmode,nticks:Fa.nticks,tick0:Fa.tick0,dtick:Fa.dtick,tickvals:Fa.tickvals,ticktext:Fa.ticktext,ticks:Fa.ticks,ticklen:Fa.ticklen,tickwidth:Fa.tickwidth,tickcolor:Fa.tickcolor,ticklabelstep:Fa.ticklabelstep,showticklabels:Fa.showticklabels,labelalias:Fa.labelalias,showtickprefix:Fa.showtickprefix,tickprefix:Fa.tickprefix,showticksuffix:Fa.showticksuffix,ticksuffix:Fa.ticksuffix,showexponent:Fa.showexponent,exponentformat:Fa.exponentformat,minexponent:Fa.minexponent,separatethousands:Fa.separatethousands,tickfont:Fa.tickfont,tickangle:Fa.tickangle,tickformat:Fa.tickformat,tickformatstops:Fa.tickformatstops,layer:Fa.layer},"plot","from-root"),QWe={visible:Yd({},Fa.visible,{dflt:!0}),type:Yd({},Fa.type,{values:["-","linear","log","date","category"]}),autotypenumbers:Fa.autotypenumbers,autorangeoptions:{minallowed:Fa.autorangeoptions.minallowed,maxallowed:Fa.autorangeoptions.maxallowed,clipmin:Fa.autorangeoptions.clipmin,clipmax:Fa.autorangeoptions.clipmax,include:Fa.autorangeoptions.include,editType:"plot"},autorange:Yd({},Fa.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:Yd({},Fa.minallowed,{editType:"plot"}),maxallowed:Yd({},Fa.maxallowed,{editType:"plot"}),range:Yd({},Fa.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:Fa.categoryorder,categoryarray:Fa.categoryarray,angle:{valType:"angle",editType:"plot"},autotickangles:Fa.autotickangles,side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:Yd({},Fa.title.text,{editType:"plot",dflt:""}),font:Yd({},Fa.title.font,{editType:"plot"}),editType:"plot"},hoverformat:Fa.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:Fa._deprecated.title,titlefont:Fa._deprecated.titlefont}};Yd(QWe,KWe,JWe);var $We={visible:Yd({},Fa.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:Fa.autotypenumbers,categoryorder:Fa.categoryorder,categoryarray:Fa.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:Fa.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};Yd($We,KWe,JWe);eXe.exports={domain:Pjt({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:Ljt.background},radialaxis:QWe,angularaxis:$We,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}});var iXe=ie((dxr,nXe)=>{"use strict";var s8=Zt(),Rjt=_i(),Djt=ko(),Ijt=r_(),Fjt=pc().getSubplotData,qjt=yx(),zjt=y2(),Ojt=fm(),Bjt=cm(),Njt=yL(),Ujt=IM(),Vjt=uO(),Hjt=w2(),rXe=Hj(),Gjt=qj(),l8=e8(),tXe=l8.axisNames;function Yjt(e,t,r,i){var n=r("bgcolor");i.bgColor=Rjt.combine(n,i.paper_bgcolor);var a=r("sector");r("hole");var o=Fjt(i.fullData,l8.name,i.id),s=i.layoutOut,l;function u(B,F){return r(l+"."+B,F)}for(var f=0;f<tXe.length;f++){l=tXe[f],s8.isPlainObject(e[l])||(e[l]={});var c=e[l],h=Djt.newContainer(t,l);h._id=h._name=l,h._attr=i.id+"."+l,h._traceIndices=o.map(function(B){return B._expandedIndex});var v=l8.axisName2dataArray[l],d=Wjt(c,h,u,o,v,i);Njt(c,h,u,{axData:o,dataAttr:v});var x=u("visible");switch(Gjt(h,t,s),u("uirevision",t.uirevision),h._m=1,l){case"radialaxis":u("minallowed"),u("maxallowed");var b=u("range"),p=h.getAutorangeDflt(b),w=u("autorange",p),A;b&&(b[0]===null&&b[1]===null||(b[0]===null||b[1]===null)&&(w==="reversed"||w===!0)||b[0]!==null&&(w==="min"||w==="max reversed")||b[1]!==null&&(w==="max"||w==="min reversed"))&&(b=void 0,delete h.range,h.autorange=!0,A=!0),A||(p=h.getAutorangeDflt(b),w=u("autorange",p)),c.autorange=w,w&&(Vjt(u,w,b),(d==="linear"||d==="-")&&u("rangemode"),h.isReversed()&&(h._m=-1)),h.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(d==="date"){s8.log("Polar plots do not support date angular axes yet.");for(var T=0;T<o.length;T++)o[T].visible=!1;d=c.type=h.type="linear"}u(d==="linear"?"thetaunit":"period");var k=u("direction");u("rotation",{counterclockwise:0,clockwise:90}[k]);break}if(Bjt(c,h,u,h.type,{tickSuffixDflt:h.thetaunit==="degrees"?"\xB0":void 0}),x){var _,E,S,g,C,M,P,D,q,O,U=i.font||{};_=u("color"),E=_===c.color?_:U.color,S=U.size,g=U.family,C=U.weight,M=U.style,P=U.variant,D=U.textcase,q=U.lineposition,O=U.shadow,qjt(c,h,u,h.type),Ojt(c,h,u,h.type,{font:{weight:C,style:M,variant:P,textcase:D,lineposition:q,shadow:O,color:E,size:S,family:g},noAutotickangles:l==="angularaxis"}),zjt(c,h,u,{outerTicks:!0}),Ujt(c,h,u,{dfltColor:_,bgColor:i.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:rXe[l]}),u("layer"),l==="radialaxis"&&(u("side"),u("angle",a[0]),u("title.text"),s8.coerceFont(u,"title.font",{weight:C,style:M,variant:P,textcase:D,lineposition:q,shadow:O,color:E,size:s8.bigFont(S),family:g}))}d!=="category"&&u("hoverformat"),h._input=c}t.angularaxis.type==="category"&&r("gridshape")}function Wjt(e,t,r,i,n,a){var o=r("autotypenumbers",a.autotypenumbersDflt),s=r("type");if(s==="-"){for(var l,u=0;u<i.length;u++)if(i[u].visible){l=i[u];break}l&&l[n]&&(t.type=Hjt(l[n],"gregorian",{noMultiCategory:!0,autotypenumbers:o})),t.type==="-"?t.type="linear":e.type=t.type}return t.type}nXe.exports=function(t,r,i){Ijt(t,r,i,{type:l8.name,attributes:rXe,handleDefaults:Yjt,font:r.font,autotypenumbersDflt:r.autotypenumbers,paper_bgcolor:r.paper_bgcolor,fullData:i,layoutOut:r})}});var u8=ie((pxr,uXe)=>{"use strict";var Xjt=pc().getSubplotCalcData,Zjt=Zt().counterRegex,jjt=Vj(),oXe=e8(),sXe=oXe.attr,vb=oXe.name,aXe=Zjt(vb),lXe={};lXe[sXe]={valType:"subplotid",dflt:vb,editType:"calc"};function Kjt(e){for(var t=e._fullLayout,r=e.calcdata,i=t._subplots[vb],n=0;n<i.length;n++){var a=i[n],o=Xjt(r,vb,a),s=t[a]._subplot;s||(s=jjt(e,a),t[a]._subplot=s),s.plot(o,t,e._promises)}}function Jjt(e,t,r,i){for(var n=i._subplots[vb]||[],a=i._has&&i._has("gl"),o=t._has&&t._has("gl"),s=a&&!o,l=0;l<n.length;l++){var u=n[l],f=i[u]._subplot;if(!t[u]&&f){f.framework.remove(),f.layers["radial-axis-title"].remove();for(var c in f.clipPaths)f.clipPaths[c].remove()}s&&f._scene&&(f._scene.destroy(),f._scene=null)}}uXe.exports={attr:sXe,name:vb,idRoot:vb,idRegex:aXe,attrRegex:aXe,attributes:lXe,layoutAttributes:Hj(),supplyLayoutDefaults:iXe(),plot:Kjt,clean:Jjt,toSVG:yu().toSVG}});var $5=ie((gxr,fXe)=>{"use strict";var Qjt=Ba().hovertemplateAttrs,$jt=Ba().texttemplateAttrs,f8=aa().extendFlat,eKt=X0(),Wd=Bl(),tKt=rs(),DT=Wd.line;fXe.exports={mode:Wd.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:Wd.text,texttemplate:$jt({editType:"plot"},{keys:["r","theta","text"]}),hovertext:Wd.hovertext,line:{color:DT.color,width:DT.width,dash:DT.dash,backoff:DT.backoff,shape:f8({},DT.shape,{values:["linear","spline"]}),smoothing:DT.smoothing,editType:"calc"},connectgaps:Wd.connectgaps,marker:Wd.marker,cliponaxis:f8({},Wd.cliponaxis,{dflt:!1}),textposition:Wd.textposition,textfont:Wd.textfont,fill:f8({},Wd.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:eKt(),hoverinfo:f8({},tKt.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:Wd.hoveron,hovertemplate:Qjt(),selected:Wd.selected,unselected:Wd.unselected}});var h8=ie((yxr,vXe)=>{"use strict";var c8=Zt(),IT=Ks(),rKt=xp(),nKt=l0(),cXe=V2(),iKt=u0(),aKt=j0(),oKt=W0().PTS_LINESONLY,sKt=$5();function lKt(e,t,r,i){function n(s,l){return c8.coerce(e,t,sKt,s,l)}var a=hXe(e,t,i,n);if(!a){t.visible=!1;return}n("thetaunit"),n("mode",a<oKt?"lines+markers":"lines"),n("text"),n("hovertext"),t.hoveron!=="fills"&&n("hovertemplate"),IT.hasMarkers(t)&&rKt(e,t,r,i,n,{gradient:!0}),IT.hasLines(t)&&(nKt(e,t,r,i,n,{backoff:!0}),cXe(e,t,n),n("connectgaps")),IT.hasText(t)&&(n("texttemplate"),iKt(e,t,i,n));var o=[];(IT.hasMarkers(t)||IT.hasText(t))&&(n("cliponaxis"),n("marker.maxdisplayed"),o.push("points")),n("fill"),t.fill!=="none"&&(aKt(e,t,r,n),IT.hasLines(t)||cXe(e,t,n)),(t.fill==="tonext"||t.fill==="toself")&&o.push("fills"),n("hoveron",o.join("+")||"points"),c8.coerceSelectionMarkerOpacity(t,n)}function hXe(e,t,r,i){var n=i("r"),a=i("theta");c8.isTypedArray(n)&&(t.r=n=Array.from(n)),c8.isTypedArray(a)&&(t.theta=a=Array.from(a));var o;if(n)a?o=Math.min(n.length,a.length):(o=n.length,i("theta0"),i("dtheta"));else{if(!a)return 0;o=t.theta.length,i("r0"),i("dr")}return t._length=o,o}vXe.exports={handleRThetaDefaults:hXe,supplyDefaults:lKt}});var v8=ie((mxr,pXe)=>{"use strict";var uKt=Zt(),dXe=Wi();pXe.exports=function(t,r,i){var n={},a=i[r.subplot]._subplot,o,s;a?(o=a.radialAxis,s=a.angularAxis):(a=i[r.subplot],o=a.radialaxis,s=a.angularaxis);var l=o.c2l(t.r);n.rLabel=dXe.tickText(o,l,!0).text;var u=s.thetaunit==="degrees"?uKt.rad2deg(t.theta):t.theta;return n.thetaLabel=dXe.tickText(s,u,!0).text,n}});var mXe=ie((xxr,yXe)=>{"use strict";var gXe=la(),fKt=eo().BADNUM,cKt=Wi(),hKt=_p(),vKt=K0(),dKt=bp(),pKt=wp().calcMarkerSize;yXe.exports=function(t,r){for(var i=t._fullLayout,n=r.subplot,a=i[n].radialaxis,o=i[n].angularaxis,s=a.makeCalcdata(r,"r"),l=o.makeCalcdata(r,"theta"),u=r._length,f=new Array(u),c=0;c<u;c++){var h=s[c],v=l[c],d=f[c]={};gXe(h)&&gXe(v)?(d.r=h,d.theta=v):d.r=fKt}var x=pKt(r,u);return r._extremes.x=cKt.findExtremes(a,s,{ppad:x}),hKt(t,r),vKt(f,r),dKt(f,r),f}});var bXe=ie((_xr,_Xe)=>{"use strict";var gKt=Z2(),xXe=eo().BADNUM;_Xe.exports=function(t,r,i){for(var n=r.layers.frontplot.select("g.scatterlayer"),a=r.xaxis,o=r.yaxis,s={xaxis:a,yaxis:o,plot:r.framework,layerClipId:r._hasClipOnAxisFalse?r.clipIds.forTraces:null},l=r.radialAxis,u=r.angularAxis,f=0;f<i.length;f++)for(var c=i[f],h=0;h<c.length;h++){h===0&&(c[0].trace._xA=a,c[0].trace._yA=o);var v=c[h],d=v.r;if(d===xXe)v.x=v.y=xXe;else{var x=l.c2g(d),b=u.c2g(v.theta);v.x=x*Math.cos(b),v.y=x*Math.sin(b)}}gKt(t,s,i,n)}});var d8=ie((bxr,TXe)=>{"use strict";var yKt=Q2();function mKt(e,t,r,i){var n=yKt(e,t,r,i);if(!(!n||n[0].index===!1)){var a=n[0];if(a.index===void 0)return n;var o=e.subplot,s=a.cd[a.index],l=a.trace;if(o.isPtInside(s))return a.xLabelVal=void 0,a.yLabelVal=void 0,wXe(s,l,o,a),a.hovertemplate=l.hovertemplate,n}}function wXe(e,t,r,i){var n=r.radialAxis,a=r.angularAxis;n._hovertitle="r",a._hovertitle="\u03B8";var o={};o[t.subplot]={_subplot:r};var s=t._module.formatLabels(e,t,o);i.rLabel=s.rLabel,i.thetaLabel=s.thetaLabel;var l=e.hi||t.hoverinfo,u=[];function f(h,v){u.push(h._hovertitle+": "+v)}if(!t.hovertemplate){var c=l.split("+");c.indexOf("all")!==-1&&(c=["r","theta","text"]),c.indexOf("r")!==-1&&f(n,i.rLabel),c.indexOf("theta")!==-1&&f(a,i.thetaLabel),c.indexOf("text")!==-1&&i.text&&(u.push(i.text),delete i.text),i.extraText=u.join("<br>")}}TXe.exports={hoverPoints:mKt,makeHoverPointText:wXe}});var MXe=ie((wxr,AXe)=>{"use strict";AXe.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:u8(),categories:["polar","symbols","showLegend","scatter-like"],attributes:$5(),supplyDefaults:h8().supplyDefaults,colorbar:yh(),formatLabels:v8(),calc:mXe(),plot:bXe(),style:Sv().style,styleOnSelect:Sv().styleOnSelect,hoverPoints:d8().hoverPoints,selectPoints:$2(),meta:{}}});var EXe=ie((Txr,SXe)=>{"use strict";SXe.exports=MXe()});var Gj=ie((Axr,kXe)=>{"use strict";var _d=$5(),qy=QE(),xKt=Ba().texttemplateAttrs;kXe.exports={mode:_d.mode,r:_d.r,theta:_d.theta,r0:_d.r0,dr:_d.dr,theta0:_d.theta0,dtheta:_d.dtheta,thetaunit:_d.thetaunit,text:_d.text,texttemplate:xKt({editType:"plot"},{keys:["r","theta","text"]}),hovertext:_d.hovertext,hovertemplate:_d.hovertemplate,line:{color:qy.line.color,width:qy.line.width,dash:qy.line.dash,editType:"calc"},connectgaps:qy.connectgaps,marker:qy.marker,fill:qy.fill,fillcolor:qy.fillcolor,textposition:qy.textposition,textfont:qy.textfont,hoverinfo:_d.hoverinfo,selected:_d.selected,unselected:_d.unselected}});var PXe=ie((Mxr,LXe)=>{"use strict";var CXe=Zt(),Yj=Ks(),_Kt=h8().handleRThetaDefaults,bKt=xp(),wKt=l0(),TKt=u0(),AKt=j0(),MKt=W0().PTS_LINESONLY,SKt=Gj();LXe.exports=function(t,r,i,n){function a(s,l){return CXe.coerce(t,r,SKt,s,l)}var o=_Kt(t,r,n,a);if(!o){r.visible=!1;return}a("thetaunit"),a("mode",o<MKt?"lines+markers":"lines"),a("text"),a("hovertext"),r.hoveron!=="fills"&&a("hovertemplate"),Yj.hasMarkers(r)&&bKt(t,r,i,n,a,{noAngleRef:!0,noStandOff:!0}),Yj.hasLines(r)&&(wKt(t,r,i,n,a),a("connectgaps")),Yj.hasText(r)&&(a("texttemplate"),TKt(t,r,n,a,{noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0})),a("fill"),r.fill!=="none"&&AKt(t,r,i,a),CXe.coerceSelectionMarkerOpacity(r,a)}});var DXe=ie((Sxr,RXe)=>{"use strict";var EKt=v8();RXe.exports=function(t,r,i){var n=t.i;return"r"in t||(t.r=r._r[n]),"theta"in t||(t.theta=r._theta[n]),EKt(t,r,i)}});var FXe=ie((Exr,IXe)=>{"use strict";var kKt=_p(),CKt=wp().calcMarkerSize,LKt=X_(),PKt=Wi(),RKt=y1().TOO_MANY_POINTS;IXe.exports=function(t,r){var i=t._fullLayout,n=r.subplot,a=i[n].radialaxis,o=i[n].angularaxis,s=r._r=a.makeCalcdata(r,"r"),l=r._theta=o.makeCalcdata(r,"theta"),u=r._length,f={};u<s.length&&(s=s.slice(0,u)),u<l.length&&(l=l.slice(0,u)),f.r=s,f.theta=l,kKt(t,r);var c=f.opts=LKt.style(t,r),h;return u<RKt?h=CKt(r,u):c.marker&&(h=2*(c.marker.sizeAvg||Math.max(c.marker.size,3))),r._extremes.x=PKt.findExtremes(a,s,{ppad:h}),[{x:!1,y:!1,t:f,trace:r}]}});var zXe=ie((kxr,qXe)=>{"use strict";var DKt=UD(),IKt=d8().makeHoverPointText;function FKt(e,t,r,i){var n=e.cd,a=n[0].t,o=a.r,s=a.theta,l=DKt.hoverPoints(e,t,r,i);if(!(!l||l[0].index===!1)){var u=l[0];if(u.index===void 0)return l;var f=e.subplot,c=u.cd[u.index],h=u.trace;if(c.r=o[u.index],c.theta=s[u.index],!!f.isPtInside(c))return u.xLabelVal=void 0,u.yLabelVal=void 0,IKt(c,h,f,u),l}}qXe.exports={hoverPoints:FKt}});var BXe=ie((Cxr,OXe)=>{"use strict";OXe.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:u8(),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:Gj(),supplyDefaults:PXe(),colorbar:yh(),formatLabels:DXe(),calc:FXe(),hoverPoints:zXe().hoverPoints,selectPoints:pW(),meta:{}}});var NXe=ie((Lxr,Wj)=>{"use strict";var qKt=GD(),zKt=la(),OKt=xX(),BKt=hW(),p8=X_(),g8=Zt(),NKt=y1().TOO_MANY_POINTS,UKt={};Wj.exports=function(t,r,i){if(i.length){var n=r.radialAxis,a=r.angularAxis,o=BKt(t,r);return i.forEach(function(s){if(!(!s||!s[0]||!s[0].trace)){var l=s[0],u=l.trace,f=l.t,c=u._length,h=f.r,v=f.theta,d=f.opts,x,b=h.slice(),p=v.slice();for(x=0;x<h.length;x++)r.isPtInside({r:h[x],theta:v[x]})||(b[x]=NaN,p[x]=NaN);var w=new Array(c*2),A=Array(c),T=Array(c);for(x=0;x<c;x++){var k=b[x],_,E;if(zKt(k)){var S=n.c2g(k),g=a.c2g(p[x],u.thetaunit);_=S*Math.cos(g),E=S*Math.sin(g)}else _=E=NaN;A[x]=w[x*2]=_,T[x]=w[x*2+1]=E}f.tree=qKt(w),d.marker&&c>=NKt&&(d.marker.cluster=f.tree),d.marker&&(d.markerSel.positions=d.markerUnsel.positions=d.marker.positions=w),d.line&&w.length>1&&g8.extendFlat(d.line,p8.linePositions(t,u,w)),d.text&&(g8.extendFlat(d.text,{positions:w},p8.textPosition(t,u,d.text,d.marker)),g8.extendFlat(d.textSel,{positions:w},p8.textPosition(t,u,d.text,d.markerSel)),g8.extendFlat(d.textUnsel,{positions:w},p8.textPosition(t,u,d.text,d.markerUnsel))),d.fill&&!o.fill2d&&(o.fill2d=!0),d.marker&&!o.scatter2d&&(o.scatter2d=!0),d.line&&!o.line2d&&(o.line2d=!0),d.text&&!o.glText&&(o.glText=!0),o.lineOptions.push(d.line),o.fillOptions.push(d.fill),o.markerOptions.push(d.marker),o.markerSelectedOptions.push(d.markerSel),o.markerUnselectedOptions.push(d.markerUnsel),o.textOptions.push(d.text),o.textSelectedOptions.push(d.textSel),o.textUnselectedOptions.push(d.textUnsel),o.selectBatch.push([]),o.unselectBatch.push([]),f.x=A,f.y=T,f.rawx=A,f.rawy=T,f.r=h,f.theta=v,f.positions=w,f._scene=o,f.index=o.count,o.count++}}),OKt(t,r,i)}};Wj.exports.reglPrecompiled=UKt});var HXe=ie((Pxr,VXe)=>{"use strict";var UXe=BXe();UXe.plot=NXe();VXe.exports=UXe});var YXe=ie((Rxr,GXe)=>{"use strict";GXe.exports=HXe()});var Xj=ie((Dxr,WXe)=>{"use strict";var VKt=Ba().hovertemplateAttrs,FT=aa().extendFlat,N1=$5(),U1=$0();WXe.exports={r:N1.r,theta:N1.theta,r0:N1.r0,dr:N1.dr,theta0:N1.theta0,dtheta:N1.dtheta,thetaunit:N1.thetaunit,base:FT({},U1.base,{}),offset:FT({},U1.offset,{}),width:FT({},U1.width,{}),text:FT({},U1.text,{}),hovertext:FT({},U1.hovertext,{}),marker:HKt(),hoverinfo:N1.hoverinfo,hovertemplate:VKt(),selected:U1.selected,unselected:U1.unselected};function HKt(){var e=FT({},U1.marker);return delete e.cornerradius,e}});var Zj=ie((Ixr,XXe)=>{"use strict";XXe.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}});var KXe=ie((Fxr,jXe)=>{"use strict";var ZXe=Zt(),GKt=h8().handleRThetaDefaults,YKt=QL(),WKt=Xj();jXe.exports=function(t,r,i,n){function a(s,l){return ZXe.coerce(t,r,WKt,s,l)}var o=GKt(t,r,n,a);if(!o){r.visible=!1;return}a("thetaunit"),a("base"),a("offset"),a("width"),a("text"),a("hovertext"),a("hovertemplate"),YKt(t,r,a,i,n),ZXe.coerceSelectionMarkerOpacity(r,a)}});var QXe=ie((qxr,JXe)=>{"use strict";var XKt=Zt(),ZKt=Zj();JXe.exports=function(e,t,r){var i={},n;function a(l,u){return XKt.coerce(e[n]||{},t[n],ZKt,l,u)}for(var o=0;o<r.length;o++){var s=r[o];s.type==="barpolar"&&s.visible===!0&&(n=s.subplot,i[n]||(a("barmode"),a("bargap"),i[n]=1))}}});var jj=ie((zxr,tZe)=>{"use strict";var $Xe=Hh().hasColorscale,eZe=xv(),jKt=Zt().isArrayOrTypedArray,KKt=JM(),JKt=Nx().setGroupPositions,QKt=bp(),$Kt=Ti().traceIs,eJt=Zt().extendFlat;function tJt(e,t){for(var r=e._fullLayout,i=t.subplot,n=r[i].radialaxis,a=r[i].angularaxis,o=n.makeCalcdata(t,"r"),s=a.makeCalcdata(t,"theta"),l=t._length,u=new Array(l),f=o,c=s,h=0;h<l;h++)u[h]={p:c[h],s:f[h]};function v(d){var x=t[d];x!==void 0&&(t["_"+d]=jKt(x)?a.makeCalcdata(t,d):a.d2c(x,t.thetaunit))}return a.type==="linear"&&(v("width"),v("offset")),$Xe(t,"marker")&&eZe(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),$Xe(t,"marker.line")&&eZe(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),KKt(u,t),QKt(u,t),u}function rJt(e,t,r){for(var i=e.calcdata,n=[],a=0;a<i.length;a++){var o=i[a],s=o[0].trace;s.visible===!0&&$Kt(s,"bar")&&s.subplot===r&&n.push(o)}var l=eJt({},t.radialaxis,{_id:"x"}),u=t.angularaxis;JKt(e,u,l,n,{mode:t.barmode,norm:t.barnorm,gap:t.bargap,groupgap:t.bargroupgap})}tZe.exports={calc:tJt,crossTraceCalc:rJt}});var iZe=ie((Oxr,nZe)=>{"use strict";var rZe=Mi(),y8=la(),qT=Zt(),nJt=oa(),Kj=r8();nZe.exports=function(t,r,i){var n=t._context.staticPlot,a=r.xaxis,o=r.yaxis,s=r.radialAxis,l=r.angularAxis,u=iJt(r),f=r.layers.frontplot.select("g.barlayer");qT.makeTraceGroups(f,i,"trace bars").each(function(){var c=rZe.select(this),h=qT.ensureSingle(c,"g","points"),v=h.selectAll("g.point").data(qT.identity);v.enter().append("g").style("vector-effect",n?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),v.exit().remove(),v.each(function(d){var x=rZe.select(this),b=d.rp0=s.c2p(d.s0),p=d.rp1=s.c2p(d.s1),w=d.thetag0=l.c2g(d.p0),A=d.thetag1=l.c2g(d.p1),T;if(!y8(b)||!y8(p)||!y8(w)||!y8(A)||b===p||w===A)T="M0,0Z";else{var k=s.c2g(d.s1),_=(w+A)/2;d.ct=[a.c2p(k*Math.cos(_)),o.c2p(k*Math.sin(_))],T=u(b,p,w,A)}qT.ensureSingle(x,"path").attr("d",T)}),nJt.setClipUrl(c,r._hasClipOnAxisFalse?r.clipIds.forTraces:null,t)})};function iJt(e){var t=e.cxx,r=e.cyy;return e.vangles?function(i,n,a,o){var s,l;qT.angleDelta(a,o)>0?(s=a,l=o):(s=o,l=a);var u=Kj.findEnclosingVertexAngles(s,e.vangles)[0],f=Kj.findEnclosingVertexAngles(l,e.vangles)[1],c=[u,(s+l)/2,f];return Kj.pathPolygonAnnulus(i,n,s,l,c,t,r)}:function(i,n,a,o){return qT.pathAnnulus(i,n,a,o,t,r)}}});var oZe=ie((Bxr,aZe)=>{"use strict";var aJt=Ol(),Jj=Zt(),oJt=dw().getTraceColor,sJt=Jj.fillText,lJt=d8().makeHoverPointText,uJt=r8().isPtInsidePolygon;aZe.exports=function(t,r,i){var n=t.cd,a=n[0].trace,o=t.subplot,s=o.radialAxis,l=o.angularAxis,u=o.vangles,f=u?uJt:Jj.isPtInsideSector,c=t.maxHoverDistance,h=l._period||2*Math.PI,v=Math.abs(s.g2p(Math.sqrt(r*r+i*i))),d=Math.atan2(i,r);s.range[0]>s.range[1]&&(d+=Math.PI);var x=function(A){return f(v,d,[A.rp0,A.rp1],[A.thetag0,A.thetag1],u)?c+Math.min(1,Math.abs(A.thetag1-A.thetag0)/h)-1+(A.rp1-v)/(A.rp1-A.rp0)-1:1/0};if(aJt.getClosest(n,x,t),t.index!==!1){var b=t.index,p=n[b];t.x0=t.x1=p.ct[0],t.y0=t.y1=p.ct[1];var w=Jj.extendFlat({},p,{r:p.s,theta:p.p});return sJt(p,a,t),lJt(w,a,o,t),t.hovertemplate=a.hovertemplate,t.color=oJt(a,p),t.xLabelVal=t.yLabelVal=void 0,p.s<0&&(t.idealAlign="left"),[t]}}});var lZe=ie((Nxr,sZe)=>{"use strict";sZe.exports={moduleType:"trace",name:"barpolar",basePlotModule:u8(),categories:["polar","bar","showLegend"],attributes:Xj(),layoutAttributes:Zj(),supplyDefaults:KXe(),supplyLayoutDefaults:QXe(),calc:jj().calc,crossTraceCalc:jj().crossTraceCalc,plot:iZe(),colorbar:yh(),formatLabels:v8(),style:Mp().style,styleOnSelect:Mp().styleOnSelect,hoverPoints:oZe(),selectPoints:pw(),meta:{}}});var fZe=ie((Uxr,uZe)=>{"use strict";uZe.exports=lZe()});var Qj=ie((Vxr,cZe)=>{"use strict";cZe.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}});var $j=ie((Hxr,pZe)=>{"use strict";var fJt=Qu(),tu=gc(),cJt=fl().attributes,V1=Zt().extendFlat,hZe=Zs().overrideAll,vZe=hZe({color:tu.color,showline:V1({},tu.showline,{dflt:!0}),linecolor:tu.linecolor,linewidth:tu.linewidth,showgrid:V1({},tu.showgrid,{dflt:!0}),gridcolor:tu.gridcolor,gridwidth:tu.gridwidth,griddash:tu.griddash},"plot","from-root"),dZe=hZe({ticklen:tu.ticklen,tickwidth:V1({},tu.tickwidth,{dflt:2}),tickcolor:tu.tickcolor,showticklabels:tu.showticklabels,labelalias:tu.labelalias,showtickprefix:tu.showtickprefix,tickprefix:tu.tickprefix,showticksuffix:tu.showticksuffix,ticksuffix:tu.ticksuffix,tickfont:tu.tickfont,tickformat:tu.tickformat,hoverformat:tu.hoverformat,layer:tu.layer},"plot","from-root"),hJt=V1({visible:V1({},tu.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:V1({},tu.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},vZe,dZe),vJt=V1({visible:V1({},tu.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:tu.ticks,editType:"calc"},vZe,dZe);pZe.exports={domain:cJt({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:fJt.background},realaxis:hJt,imaginaryaxis:vJt,editType:"calc"}});var mZe=ie((Gxr,yZe)=>{"use strict";var zT=Zt(),dJt=_i(),pJt=ko(),gJt=r_(),yJt=pc().getSubplotData,mJt=cm(),xJt=fm(),_Jt=IM(),bJt=N0(),OT=$j(),eK=Qj(),gZe=eK.axisNames,wJt=AJt(function(e){return zT.isTypedArray(e)&&(e=Array.from(e)),e.slice().reverse().map(function(t){return-t}).concat([0]).concat(e)},String);function TJt(e,t,r,i){var n=r("bgcolor");i.bgColor=dJt.combine(n,i.paper_bgcolor);var a=yJt(i.fullData,eK.name,i.id),o=i.layoutOut,s;function l(k,_){return r(s+"."+k,_)}for(var u=0;u<gZe.length;u++){s=gZe[u],zT.isPlainObject(e[s])||(e[s]={});var f=e[s],c=pJt.newContainer(t,s);c._id=c._name=s,c._attr=i.id+"."+s,c._traceIndices=a.map(function(k){return k._expandedIndex});var h=l("visible");if(c.type="linear",bJt(c,o),mJt(f,c,l,c.type),h){var v=s==="realaxis";if(v&&l("side"),v)l("tickvals");else{var d=wJt(t.realaxis.tickvals||OT.realaxis.tickvals.dflt);l("tickvals",d)}zT.isTypedArray(c.tickvals)&&(c.tickvals=Array.from(c.tickvals));var x,b,p,w,A=i.font||{};h&&(x=l("color"),b=x===f.color?x:A.color,p=A.size,w=A.family),xJt(f,c,l,c.type,{noAutotickangles:!0,noTicklabelstep:!0,noAng:!v,noExp:!0,font:{color:b,size:p,family:w}}),zT.coerce2(e,t,OT,s+".ticklen"),zT.coerce2(e,t,OT,s+".tickwidth"),zT.coerce2(e,t,OT,s+".tickcolor",t.color);var T=l("ticks");T||(delete t[s].ticklen,delete t[s].tickwidth,delete t[s].tickcolor),_Jt(f,c,l,{dfltColor:x,bgColor:i.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:OT[s]}),l("layer")}l("hoverformat"),delete c.type,c._input=f}}yZe.exports=function(t,r,i){gJt(t,r,i,{noUirevision:!0,type:eK.name,attributes:OT,handleDefaults:TJt,font:r.font,paper_bgcolor:r.paper_bgcolor,fullData:i,layoutOut:r})};function AJt(e,t){var r={};return function(i){var n=t?t(i):i;if(n in r)return r[n];var a=e(i);return r[n]=a,a}}});var AZe=ie((Yxr,TZe)=>{"use strict";var MJt=pc().getSubplotCalcData,SJt=Zt().counterRegex,EJt=Vj(),_Ze=Qj(),bZe=_Ze.attr,db=_Ze.name,xZe=SJt(db),wZe={};wZe[bZe]={valType:"subplotid",dflt:db,editType:"calc"};function kJt(e){for(var t=e._fullLayout,r=e.calcdata,i=t._subplots[db],n=0;n<i.length;n++){var a=i[n],o=MJt(r,db,a),s=t[a]._subplot;s||(s=EJt(e,a,!0),t[a]._subplot=s),s.plot(o,t,e._promises)}}function CJt(e,t,r,i){for(var n=i._subplots[db]||[],a=0;a<n.length;a++){var o=n[a],s=i[o]._subplot;if(!t[o]&&s){s.framework.remove();for(var l in s.clipPaths)s.clipPaths[l].remove()}}}TZe.exports={attr:bZe,name:db,idRoot:db,idRegex:xZe,attrRegex:xZe,attributes:wZe,layoutAttributes:$j(),supplyLayoutDefaults:mZe(),plot:kJt,clean:CJt,toSVG:yu().toSVG}});var tK=ie((Wxr,MZe)=>{"use strict";var LJt=Ba().hovertemplateAttrs,PJt=Ba().texttemplateAttrs,m8=aa().extendFlat,RJt=X0(),Xd=Bl(),DJt=rs(),BT=Xd.line;MZe.exports={mode:Xd.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:Xd.text,texttemplate:PJt({editType:"plot"},{keys:["real","imag","text"]}),hovertext:Xd.hovertext,line:{color:BT.color,width:BT.width,dash:BT.dash,backoff:BT.backoff,shape:m8({},BT.shape,{values:["linear","spline"]}),smoothing:BT.smoothing,editType:"calc"},connectgaps:Xd.connectgaps,marker:Xd.marker,cliponaxis:m8({},Xd.cliponaxis,{dflt:!1}),textposition:Xd.textposition,textfont:Xd.textfont,fill:m8({},Xd.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:RJt(),hoverinfo:m8({},DJt.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:Xd.hoveron,hovertemplate:LJt(),selected:Xd.selected,unselected:Xd.unselected}});var kZe=ie((Xxr,EZe)=>{"use strict";var x8=Zt(),NT=Ks(),IJt=xp(),FJt=l0(),SZe=V2(),qJt=u0(),zJt=j0(),OJt=W0().PTS_LINESONLY,BJt=tK();EZe.exports=function(t,r,i,n){function a(l,u){return x8.coerce(t,r,BJt,l,u)}var o=NJt(t,r,n,a);if(!o){r.visible=!1;return}a("mode",o<OJt?"lines+markers":"lines"),a("text"),a("hovertext"),r.hoveron!=="fills"&&a("hovertemplate"),NT.hasMarkers(r)&&IJt(t,r,i,n,a,{gradient:!0}),NT.hasLines(r)&&(FJt(t,r,i,n,a,{backoff:!0}),SZe(t,r,a),a("connectgaps")),NT.hasText(r)&&(a("texttemplate"),qJt(t,r,n,a));var s=[];(NT.hasMarkers(r)||NT.hasText(r))&&(a("cliponaxis"),a("marker.maxdisplayed"),s.push("points")),a("fill"),r.fill!=="none"&&(zJt(t,r,i,a),NT.hasLines(r)||SZe(t,r,a)),(r.fill==="tonext"||r.fill==="toself")&&s.push("fills"),a("hoveron",s.join("+")||"points"),x8.coerceSelectionMarkerOpacity(r,a)};function NJt(e,t,r,i){var n=i("real"),a=i("imag"),o;return n&&a&&(o=Math.min(n.length,a.length)),x8.isTypedArray(n)&&(t.real=n=Array.from(n)),x8.isTypedArray(a)&&(t.imag=a=Array.from(a)),t._length=o,o}});var PZe=ie((Zxr,LZe)=>{"use strict";var CZe=Wi();LZe.exports=function(t,r,i){var n={},a=i[r.subplot]._subplot;return n.realLabel=CZe.tickText(a.radialAxis,t.real,!0).text,n.imagLabel=CZe.tickText(a.angularAxis,t.imag,!0).text,n}});var IZe=ie((jxr,DZe)=>{"use strict";var RZe=la(),UJt=eo().BADNUM,VJt=_p(),HJt=K0(),GJt=bp(),YJt=wp().calcMarkerSize;DZe.exports=function(t,r){for(var i=t._fullLayout,n=r.subplot,a=i[n].realaxis,o=i[n].imaginaryaxis,s=a.makeCalcdata(r,"real"),l=o.makeCalcdata(r,"imag"),u=r._length,f=new Array(u),c=0;c<u;c++){var h=s[c],v=l[c],d=f[c]={};RZe(h)&&RZe(v)?(d.real=h,d.imag=v):d.real=UJt}return YJt(r,u),VJt(t,r),HJt(f,r),GJt(f,r),f}});var zZe=ie((Kxr,qZe)=>{"use strict";var WJt=Z2(),FZe=eo().BADNUM,XJt=Bj(),ZJt=XJt.smith;qZe.exports=function(t,r,i){for(var n=r.layers.frontplot.select("g.scatterlayer"),a=r.xaxis,o=r.yaxis,s={xaxis:a,yaxis:o,plot:r.framework,layerClipId:r._hasClipOnAxisFalse?r.clipIds.forTraces:null},l=0;l<i.length;l++)for(var u=i[l],f=0;f<u.length;f++){f===0&&(u[0].trace._xA=a,u[0].trace._yA=o);var c=u[f],h=c.real;if(h===FZe)c.x=c.y=FZe;else{var v=ZJt([h,c.imag]);c.x=v[0],c.y=v[1]}}WJt(t,s,i,n)}});var NZe=ie((Jxr,BZe)=>{"use strict";var jJt=Q2();function KJt(e,t,r,i){var n=jJt(e,t,r,i);if(!(!n||n[0].index===!1)){var a=n[0];if(a.index===void 0)return n;var o=e.subplot,s=a.cd[a.index],l=a.trace;if(o.isPtInside(s))return a.xLabelVal=void 0,a.yLabelVal=void 0,OZe(s,l,o,a),a.hovertemplate=l.hovertemplate,n}}function OZe(e,t,r,i){var n=r.radialAxis,a=r.angularAxis;n._hovertitle="real",a._hovertitle="imag";var o={};o[t.subplot]={_subplot:r};var s=t._module.formatLabels(e,t,o);i.realLabel=s.realLabel,i.imagLabel=s.imagLabel;var l=e.hi||t.hoverinfo,u=[];function f(h,v){u.push(h._hovertitle+": "+v)}if(!t.hovertemplate){var c=l.split("+");c.indexOf("all")!==-1&&(c=["real","imag","text"]),c.indexOf("real")!==-1&&f(n,i.realLabel),c.indexOf("imag")!==-1&&f(a,i.imagLabel),c.indexOf("text")!==-1&&i.text&&(u.push(i.text),delete i.text),i.extraText=u.join("<br>")}}BZe.exports={hoverPoints:KJt,makeHoverPointText:OZe}});var VZe=ie((Qxr,UZe)=>{"use strict";UZe.exports={moduleType:"trace",name:"scattersmith",basePlotModule:AZe(),categories:["smith","symbols","showLegend","scatter-like"],attributes:tK(),supplyDefaults:kZe(),colorbar:yh(),formatLabels:PZe(),calc:IZe(),plot:zZe(),style:Sv().style,styleOnSelect:Sv().styleOnSelect,hoverPoints:NZe().hoverPoints,selectPoints:$2(),meta:{}}});var GZe=ie(($xr,HZe)=>{"use strict";HZe.exports=VZe()});var ek=ie(YZe=>{"use strict";YZe.pointsAccessorFunction=function(e,t){for(var r,i,n=0;n<e.length&&(r=e[n],r!==t);n++)!r._indexToPoints||r.enabled===!1||(i=r._indexToPoints);var a=i?function(o){return i[o]}:function(o){return[o]};return a}});var jZe=ie(VT=>{"use strict";var JJt=Wi(),UT=Zt(),QJt=sm(),$Jt=ek().pointsAccessorFunction,bu=eo().BADNUM;VT.moduleType="transform";VT.name="aggregate";var ZZe=VT.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},WZe=ZZe.aggregations;VT.supplyDefaults=function(e,t){var r={},i;function n(b,p){return UT.coerce(e,r,ZZe,b,p)}var a=n("enabled");if(!a)return r;var o=QJt.findArrayAttributes(t),s={};for(i=0;i<o.length;i++)s[o[i]]=1;var l=n("groups");if(!Array.isArray(l)){if(!s[l])return r.enabled=!1,r;s[l]=0}var u=e.aggregations||[],f=r.aggregations=new Array(u.length),c;function h(b,p){return UT.coerce(u[i],c,WZe,b,p)}for(i=0;i<u.length;i++){c={_index:i};var v=h("target"),d=h("func"),x=h("enabled");x&&v&&(s[v]||d==="count"&&s[v]===void 0)?(d==="stddev"&&h("funcmode"),s[v]=0,f[i]=c):f[i]={enabled:!1,_index:i}}for(i=0;i<o.length;i++)s[o[i]]&&f.push({target:o[i],func:WZe.func.dflt,enabled:!0,_index:-1});return r};VT.calcTransform=function(e,t,r){if(r.enabled){var i=r.groups,n=UT.getTargetArray(t,{target:i});if(n){var a,o,s,l,u={},f={},c=[],h=$Jt(t.transforms,r),v=n.length;for(t._length&&(v=Math.min(v,t._length)),a=0;a<v;a++)o=n[a],s=u[o],s===void 0?(u[o]=c.length,l=[a],c.push(l),f[u[o]]=h(a)):(c[s].push(a),f[u[o]]=(f[u[o]]||[]).concat(h(a)));r._indexToPoints=f;var d=r.aggregations;for(a=0;a<d.length;a++)XZe(e,t,c,d[a]);typeof i=="string"&&XZe(e,t,c,{target:i,func:"first",enabled:!0}),t._length=c.length}}};function XZe(e,t,r,i){if(i.enabled){for(var n=i.target,a=UT.nestedProperty(t,n),o=a.get(),s=JJt.getDataConversions(e,t,n,o),l=eQt(i,s),u=new Array(r.length),f=0;f<r.length;f++)u[f]=l(o,r[f]);a.set(u),i.func==="count"&&UT.pushUnique(t._arrayAttrs,n)}}function eQt(e,t){var r=e.func,i=t.d2c,n=t.c2d;switch(r){case"count":return tQt;case"first":return rQt;case"last":return nQt;case"sum":return function(a,o){for(var s=0,l=0;l<o.length;l++){var u=i(a[o[l]]);u!==bu&&(s+=u)}return n(s)};case"avg":return function(a,o){for(var s=0,l=0,u=0;u<o.length;u++){var f=i(a[o[u]]);f!==bu&&(s+=f,l++)}return l?n(s/l):bu};case"min":return function(a,o){for(var s=1/0,l=0;l<o.length;l++){var u=i(a[o[l]]);u!==bu&&(s=Math.min(s,u))}return s===1/0?bu:n(s)};case"max":return function(a,o){for(var s=-1/0,l=0;l<o.length;l++){var u=i(a[o[l]]);u!==bu&&(s=Math.max(s,u))}return s===-1/0?bu:n(s)};case"range":return function(a,o){for(var s=1/0,l=-1/0,u=0;u<o.length;u++){var f=i(a[o[u]]);f!==bu&&(s=Math.min(s,f),l=Math.max(l,f))}return l===-1/0||s===1/0?bu:n(l-s)};case"change":return function(a,o){var s=i(a[o[0]]),l=i(a[o[o.length-1]]);return s===bu||l===bu?bu:n(l-s)};case"median":return function(a,o){for(var s=[],l=0;l<o.length;l++){var u=i(a[o[l]]);u!==bu&&s.push(u)}if(!s.length)return bu;s.sort(UT.sorterAsc);var f=(s.length-1)/2;return n((s[Math.floor(f)]+s[Math.ceil(f)])/2)};case"mode":return function(a,o){for(var s={},l=0,u=bu,f=0;f<o.length;f++){var c=i(a[o[f]]);if(c!==bu){var h=s[c]=(s[c]||0)+1;h>l&&(l=h,u=c)}}return l?n(u):bu};case"rms":return function(a,o){for(var s=0,l=0,u=0;u<o.length;u++){var f=i(a[o[u]]);f!==bu&&(s+=f*f,l++)}return l?n(Math.sqrt(s/l)):bu};case"stddev":return function(a,o){var s=0,l=0,u=1,f=bu,c;for(c=0;c<o.length&&f===bu;c++)f=i(a[o[c]]);if(f===bu)return bu;for(;c<o.length;c++){var h=i(a[o[c]]);if(h!==bu){var v=h-f;s+=v,l+=v*v,u++}}var d=e.funcmode==="sample"?u-1:u;return d?Math.sqrt((l-s*s/u)/d):0}}}function tQt(e,t){return t.length}function rQt(e,t){return e[t[0]]}function nQt(e,t){return e[t[t.length-1]]}});var JZe=ie((r_r,KZe)=>{"use strict";KZe.exports=jZe()});var tje=ie(pb=>{"use strict";var H1=Zt(),iQt=Ti(),aQt=Wi(),oQt=ek().pointsAccessorFunction,rK=hS(),QZe=rK.COMPARISON_OPS,$Ze=rK.INTERVAL_OPS,eje=rK.SET_OPS;pb.moduleType="transform";pb.name="filter";pb.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(QZe).concat($Ze).concat(eje),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"};pb.supplyDefaults=function(e){var t={};function r(o,s){return H1.coerce(e,t,pb.attributes,o,s)}var i=r("enabled");if(i){var n=r("target");if(H1.isArrayOrTypedArray(n)&&n.length===0)return t.enabled=!1,t;r("preservegaps"),r("operation"),r("value");var a=iQt.getComponentMethod("calendars","handleDefaults");a(e,t,"valuecalendar",null),a(e,t,"targetcalendar",null)}return t};pb.calcTransform=function(e,t,r){if(!r.enabled)return;var i=H1.getTargetArray(t,r);if(!i)return;var n=r.target,a=i.length;t._length&&(a=Math.min(a,t._length));var o=r.targetcalendar,s=t._arrayAttrs,l=r.preservegaps;if(typeof n=="string"){var u=H1.nestedProperty(t,n+"calendar").get();u&&(o=u)}var f=aQt.getDataToCoordFunc(e,t,n,i),c=sQt(r,f,o),h={},v={},d=0;function x(k,_){for(var E=0;E<s.length;E++){var S=H1.nestedProperty(t,s[E]);k(S,_)}}var b,p;l?(b=function(k){h[k.astr]=H1.extendDeep([],k.get()),k.set(new Array(a))},p=function(k,_){var E=h[k.astr][_];k.get()[_]=E}):(b=function(k){h[k.astr]=H1.extendDeep([],k.get()),k.set([])},p=function(k,_){var E=h[k.astr][_];k.get().push(E)}),x(b);for(var w=oQt(t.transforms,r),A=0;A<a;A++){var T=c(i[A]);T?(x(p,A),v[d++]=w(A)):l&&d++}r._indexToPoints=v,t._length=d};function sQt(e,t,r){var i=e.operation,n=e.value,a=H1.isArrayOrTypedArray(n);function o(f){return f.indexOf(i)!==-1}var s=function(f){return t(f,0,e.valuecalendar)},l=function(f){return t(f,0,r)},u;switch(o(QZe)?u=s(a?n[0]:n):o($Ze)?u=a?[s(n[0]),s(n[1])]:[s(n),s(n)]:o(eje)&&(u=a?n.map(s):[s(n)]),i){case"=":return function(f){return l(f)===u};case"!=":return function(f){return l(f)!==u};case"<":return function(f){return l(f)<u};case"<=":return function(f){return l(f)<=u};case">":return function(f){return l(f)>u};case">=":return function(f){return l(f)>=u};case"[]":return function(f){var c=l(f);return c>=u[0]&&c<=u[1]};case"()":return function(f){var c=l(f);return c>u[0]&&c<u[1]};case"[)":return function(f){var c=l(f);return c>=u[0]&&c<u[1]};case"(]":return function(f){var c=l(f);return c>u[0]&&c<=u[1]};case"][":return function(f){var c=l(f);return c<=u[0]||c>=u[1]};case")(":return function(f){var c=l(f);return c<u[0]||c>u[1]};case"](":return function(f){var c=l(f);return c<=u[0]||c>u[1]};case")[":return function(f){var c=l(f);return c<u[0]||c>=u[1]};case"{}":return function(f){return u.indexOf(l(f))!==-1};case"}{":return function(f){return u.indexOf(l(f))===-1}}}});var nje=ie((i_r,rje)=>{"use strict";rje.exports=tje()});var ije=ie(zy=>{"use strict";var qv=Zt(),lQt=sm(),uQt=js(),fQt=ek().pointsAccessorFunction;zy.moduleType="transform";zy.name="groupby";zy.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"};zy.supplyDefaults=function(e,t,r){var i,n={};function a(c,h){return qv.coerce(e,n,zy.attributes,c,h)}var o=a("enabled");if(!o)return n;a("groups"),a("nameformat",r._dataLength>1?"%{group} (%{trace})":"%{group}");var s=e.styles,l=n.styles=[];if(s)for(i=0;i<s.length;i++){var u=l[i]={};qv.coerce(s[i],l[i],zy.attributes.styles,"target");var f=qv.coerce(s[i],l[i],zy.attributes.styles,"value");qv.isPlainObject(f)?u.value=qv.extendDeep({},f):f&&delete u.value}return n};zy.transform=function(e,t){var r,i,n,a=[];for(i=0;i<e.length;i++)for(r=cQt(e[i],t),n=0;n<r.length;n++)a.push(r[n]);return a};function cQt(e,t){var r,i,n,a,o,s,l,u,f,c,h=t.transform,v=t.transformIndex,d=e.transforms[v].groups,x=fQt(e.transforms,h);if(!qv.isArrayOrTypedArray(d)||d.length===0)return[e];var b=qv.filterUnique(d),p=new Array(b.length),w=d.length,A=lQt.findArrayAttributes(e),T=h.styles||[],k={};for(r=0;r<T.length;r++)k[T[r].target]=T[r].value;h.styles&&(c=qv.keyedContainer(h,"styles","target","value.name"));var _={},E={};for(r=0;r<b.length;r++){s=b[r],_[s]=r,E[s]=0,l=p[r]=qv.extendDeepNoArrays({},e),l._group=s,l.transforms[v]._indexToPoints={};var S=null;for(c&&(S=c.get(s)),S||S===""?l.name=S:l.name=qv.templateString(h.nameformat,{trace:e.name,group:s}),u=l.transforms,l.transforms=[],i=0;i<u.length;i++)l.transforms[i]=qv.extendDeepNoArrays({},u[i]);for(i=0;i<A.length;i++)qv.nestedProperty(l,A[i]).set([])}for(n=0;n<A.length;n++){for(a=A[n],i=0,f=[];i<b.length;i++)f[i]=qv.nestedProperty(p[i],a).get();for(o=qv.nestedProperty(e,a).get(),i=0;i<w;i++)f[_[d[i]]].push(o[i])}for(i=0;i<w;i++){l=p[_[d[i]]];var g=l.transforms[v]._indexToPoints;g[E[d[i]]]=x(i),E[d[i]]++}for(r=0;r<b.length;r++)s=b[r],l=p[r],uQt.clearExpandedTraceDefaultColors(l),l=qv.extendDeepNoArrays(l,k[s]||{});return p}});var oje=ie((o_r,aje)=>{"use strict";aje.exports=ije()});var sje=ie(gb=>{"use strict";var nK=Zt(),hQt=Wi(),vQt=ek().pointsAccessorFunction,_8=eo().BADNUM;gb.moduleType="transform";gb.name="sort";gb.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"};gb.supplyDefaults=function(e){var t={};function r(n,a){return nK.coerce(e,t,gb.attributes,n,a)}var i=r("enabled");return i&&(r("target"),r("order")),t};gb.calcTransform=function(e,t,r){if(r.enabled){var i=nK.getTargetArray(t,r);if(i){var n=r.target,a=i.length;t._length&&(a=Math.min(a,t._length));var o=t._arrayAttrs,s=hQt.getDataToCoordFunc(e,t,n,i),l=dQt(r,i,s,a),u=vQt(t.transforms,r),f={},c,h;for(c=0;c<o.length;c++){var v=nK.nestedProperty(t,o[c]),d=v.get(),x=new Array(a);for(h=0;h<a;h++)x[h]=d[l[h]];v.set(x)}for(h=0;h<a;h++)f[h]=u(l[h]);r._indexToPoints=f,t._length=a}}};function dQt(e,t,r,i){var n=new Array(i),a=new Array(i),o;for(o=0;o<i;o++)n[o]={v:t[o],i:o};for(n.sort(pQt(e,r)),o=0;o<i;o++)a[o]=n[o].i;return a}function pQt(e,t){switch(e.order){case"ascending":return function(r,i){var n=t(r.v),a=t(i.v);return n===_8?1:a===_8?-1:n-a};case"descending":return function(r,i){var n=t(r.v),a=t(i.v);return n===_8?1:a===_8?-1:a-n}}}});var uje=ie((l_r,lje)=>{"use strict";lje.exports=sje()});var Mh=ie((u_r,cje)=>{var w8=lf();function fje(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}w8(fje.prototype,{instance:function(e,t){e=(e||"gregorian").toLowerCase(),t=t||"";var r=this._localCals[e+"-"+t];if(!r&&this.calendars[e]&&(r=new this.calendars[e](t),this._localCals[e+"-"+t]=r),!r)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e);return r},newDate:function(e,t,r,i,n){return i=(e!=null&&e.year?e.calendar():typeof i=="string"?this.instance(i,n):i)||this.instance(),i.newDate(e,t,r)},substituteDigits:function(e){return function(t){return(t+"").replace(/[0-9]/g,function(r){return e[r]})}},substituteChineseDigits:function(e,t){return function(r){for(var i="",n=0;r>0;){var a=r%10;i=(a===0?"":e[a]+t[n])+i,n++,r=Math.floor(r/10)}return i.indexOf(e[1]+t[1])===0&&(i=i.substr(1)),i||e[0]}}});function iK(e,t,r,i){if(this._calendar=e,this._year=t,this._month=r,this._day=i,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(ho.local.invalidDate||ho.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function b8(e,t){return e=""+e,"000000".substring(0,t-e.length)+e}w8(iK.prototype,{newDate:function(e,t,r){return this._calendar.newDate(e==null?this:e,t,r)},year:function(e){return arguments.length===0?this._year:this.set(e,"y")},month:function(e){return arguments.length===0?this._month:this.set(e,"m")},day:function(e){return arguments.length===0?this._day:this.set(e,"d")},date:function(e,t,r){if(!this._calendar.isValid(e,t,r))throw(ho.local.invalidDate||ho.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=e,this._month=t,this._day=r,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,t){return this._calendar.add(this,e,t)},set:function(e,t){return this._calendar.set(this,e,t)},compareTo:function(e){if(this._calendar.name!==e._calendar.name)throw(ho.local.differentCalendars||ho.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);var t=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return t===0?0:t<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+b8(Math.abs(this.year()),4)+"-"+b8(this.month(),2)+"-"+b8(this.day(),2)}});function aK(){this.shortYearCutoff="+10"}w8(aK.prototype,{_validateLevel:0,newDate:function(e,t,r){return e==null?this.today():(e.year&&(this._validate(e,t,r,ho.local.invalidDate||ho.regionalOptions[""].invalidDate),r=e.day(),t=e.month(),e=e.year()),new iK(this,e,t,r))},today:function(){return this.fromJSDate(new Date)},epoch:function(e){var t=this._validate(e,this.minMonth,this.minDay,ho.local.invalidYear||ho.regionalOptions[""].invalidYear);return t.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,ho.local.invalidYear||ho.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+b8(Math.abs(t.year()),4)},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,ho.local.invalidYear||ho.regionalOptions[""].invalidYear),12},monthOfYear:function(e,t){var r=this._validate(e,t,this.minDay,ho.local.invalidMonth||ho.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(e,t){var r=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;return this._validate(e,r,this.minDay,ho.local.invalidMonth||ho.regionalOptions[""].invalidMonth),r},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,ho.local.invalidYear||ho.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(e,t,r){var i=this._validate(e,t,r,ho.local.invalidDate||ho.regionalOptions[""].invalidDate);return i.toJD()-this.newDate(i.year(),this.fromMonthOfYear(i.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,t,r){var i=this._validate(e,t,r,ho.local.invalidDate||ho.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(i))+2)%this.daysInWeek()},extraInfo:function(e,t,r){return this._validate(e,t,r,ho.local.invalidDate||ho.regionalOptions[""].invalidDate),{}},add:function(e,t,r){return this._validate(e,this.minMonth,this.minDay,ho.local.invalidDate||ho.regionalOptions[""].invalidDate),this._correctAdd(e,this._add(e,t,r),t,r)},_add:function(e,t,r){if(this._validateLevel++,r==="d"||r==="w"){var i=e.toJD()+t*(r==="w"?this.daysInWeek():1),n=e.calendar().fromJD(i);return this._validateLevel--,[n.year(),n.month(),n.day()]}try{var a=e.year()+(r==="y"?t:0),o=e.monthOfYear()+(r==="m"?t:0),n=e.day(),s=function(f){for(;o<f.minMonth;)a--,o+=f.monthsInYear(a);for(var c=f.monthsInYear(a);o>c-1+f.minMonth;)a++,o-=c,c=f.monthsInYear(a)};r==="y"?(e.month()!==this.fromMonthOfYear(a,o)&&(o=this.newDate(a,e.month(),this.minDay).monthOfYear()),o=Math.min(o,this.monthsInYear(a)),n=Math.min(n,this.daysInMonth(a,this.fromMonthOfYear(a,o)))):r==="m"&&(s(this),n=Math.min(n,this.daysInMonth(a,this.fromMonthOfYear(a,o))));var l=[a,this.fromMonthOfYear(a,o),n];return this._validateLevel--,l}catch(u){throw this._validateLevel--,u}},_correctAdd:function(e,t,r,i){if(!this.hasYearZero&&(i==="y"||i==="m")&&(t[0]===0||e.year()>0!=t[0]>0)){var n={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[i],a=r<0?-1:1;t=this._add(e,r*n[0]+a*n[1],n[2])}return e.date(t[0],t[1],t[2])},set:function(e,t,r){this._validate(e,this.minMonth,this.minDay,ho.local.invalidDate||ho.regionalOptions[""].invalidDate);var i=r==="y"?t:e.year(),n=r==="m"?t:e.month(),a=r==="d"?t:e.day();return(r==="y"||r==="m")&&(a=Math.min(a,this.daysInMonth(i,n))),e.date(i,n,a)},isValid:function(e,t,r){this._validateLevel++;var i=this.hasYearZero||e!==0;if(i){var n=this.newDate(e,t,this.minDay);i=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(n)&&r>=this.minDay&&r-this.minDay<this.daysInMonth(n)}return this._validateLevel--,i},toJSDate:function(e,t,r){var i=this._validate(e,t,r,ho.local.invalidDate||ho.regionalOptions[""].invalidDate);return ho.instance().fromJD(this.toJD(i)).toJSDate()},fromJSDate:function(e){return this.fromJD(ho.instance().fromJSDate(e).toJD())},_validate:function(e,t,r,i){if(e.year){if(this._validateLevel===0&&this.name!==e.calendar().name)throw(ho.local.differentCalendars||ho.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(e,t,r))throw i.replace(/\{0\}/,this.local.name);var n=this.newDate(e,t,r);return this._validateLevel--,n}catch(a){throw this._validateLevel--,a}}});function oK(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}oK.prototype=new aK;w8(oK.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,ho.local.invalidYear||ho.regionalOptions[""].invalidYear),r=t.year()+(t.year()<0?1:0);return r%4===0&&(r%100!==0||r%400===0)},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,ho.local.invalidMonth||ho.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,t,r,ho.local.invalidDate||ho.regionalOptions[""].invalidDate);e=i.year(),t=i.month(),r=i.day(),e<0&&e++,t<3&&(t+=12,e--);var n=Math.floor(e/100),a=2-n+Math.floor(n/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+r+a-1524.5},fromJD:function(e){var t=Math.floor(e+.5),r=Math.floor((t-186721625e-2)/36524.25);r=t+1+r-Math.floor(r/4);var i=r+1524,n=Math.floor((i-122.1)/365.25),a=Math.floor(365.25*n),o=Math.floor((i-a)/30.6001),s=i-a-Math.floor(o*30.6001),l=o-(o>13.5?13:1),u=n-(l>2.5?4716:4715);return u<=0&&u--,this.newDate(u,l,s)},toJSDate:function(e,t,r){var i=this._validate(e,t,r,ho.local.invalidDate||ho.regionalOptions[""].invalidDate),n=new Date(i.year(),i.month()-1,i.day());return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.setHours(n.getHours()>12?n.getHours()+2:0),n},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var ho=cje.exports=new fje;ho.cdate=iK;ho.baseCalendar=aK;ho.calendars.gregorian=oK});var hje=ie(()=>{var sK=lf(),Mc=Mh();sK(Mc.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});Mc.local=Mc.regionalOptions[""];sK(Mc.cdate.prototype,{formatDate:function(e,t){return typeof e!="string"&&(t=e,e=""),this._calendar.formatDate(e||"",this,t)}});sK(Mc.baseCalendar.prototype,{UNIX_EPOCH:Mc.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:Mc.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(e,t,r){if(typeof e!="string"&&(r=t,t=e,e=""),!t)return"";if(t.calendar()!==this)throw Mc.local.invalidFormat||Mc.regionalOptions[""].invalidFormat;e=e||this.local.dateFormat,r=r||{};for(var i=r.dayNamesShort||this.local.dayNamesShort,n=r.dayNames||this.local.dayNames,a=r.monthNumbers||this.local.monthNumbers,o=r.monthNamesShort||this.local.monthNamesShort,s=r.monthNames||this.local.monthNames,l=r.calculateWeek||this.local.calculateWeek,u=function(T,k){for(var _=1;A+_<e.length&&e.charAt(A+_)===T;)_++;return A+=_-1,Math.floor(_/(k||1))>1},f=function(T,k,_,E){var S=""+k;if(u(T,E))for(;S.length<_;)S="0"+S;return S},c=function(T,k,_,E){return u(T)?E[k]:_[k]},h=this,v=function(T){return typeof a=="function"?a.call(h,T,u("m")):b(f("m",T.month(),2))},d=function(T,k){return k?typeof s=="function"?s.call(h,T):s[T.month()-h.minMonth]:typeof o=="function"?o.call(h,T):o[T.month()-h.minMonth]},x=this.local.digits,b=function(T){return r.localNumbers&&x?x(T):T},p="",w=!1,A=0;A<e.length;A++)if(w)e.charAt(A)==="'"&&!u("'")?w=!1:p+=e.charAt(A);else switch(e.charAt(A)){case"d":p+=b(f("d",t.day(),2));break;case"D":p+=c("D",t.dayOfWeek(),i,n);break;case"o":p+=f("o",t.dayOfYear(),3);break;case"w":p+=f("w",t.weekOfYear(),2);break;case"m":p+=v(t);break;case"M":p+=d(t,u("M"));break;case"y":p+=u("y",2)?t.year():(t.year()%100<10?"0":"")+t.year()%100;break;case"Y":u("Y",2),p+=t.formatYear();break;case"J":p+=t.toJD();break;case"@":p+=(t.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":p+=(t.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":u("'")?p+="'":w=!0;break;default:p+=e.charAt(A)}return p},parseDate:function(e,t,r){if(t==null)throw Mc.local.invalidArguments||Mc.regionalOptions[""].invalidArguments;if(t=typeof t=="object"?t.toString():t+"",t==="")return null;e=e||this.local.dateFormat,r=r||{};var i=r.shortYearCutoff||this.shortYearCutoff;i=typeof i!="string"?i:this.today().year()%100+parseInt(i,10);for(var n=r.dayNamesShort||this.local.dayNamesShort,a=r.dayNames||this.local.dayNames,o=r.parseMonth||this.local.parseMonth,s=r.monthNumbers||this.local.monthNumbers,l=r.monthNamesShort||this.local.monthNamesShort,u=r.monthNames||this.local.monthNames,f=-1,c=-1,h=-1,v=-1,d=-1,x=!1,b=!1,p=function(P,D){for(var q=1;g+q<e.length&&e.charAt(g+q)===P;)q++;return g+=q-1,Math.floor(q/(D||1))>1},w=function(P,D){var q=p(P,D),O=[2,3,q?4:2,q?4:2,10,11,20]["oyYJ@!".indexOf(P)+1],U=new RegExp("^-?\\d{1,"+O+"}"),B=t.substring(S).match(U);if(!B)throw(Mc.local.missingNumberAt||Mc.regionalOptions[""].missingNumberAt).replace(/\{0\}/,S);return S+=B[0].length,parseInt(B[0],10)},A=this,T=function(){if(typeof s=="function"){p("m");var P=s.call(A,t.substring(S));return S+=P.length,P}return w("m")},k=function(P,D,q,O){for(var U=p(P,O)?q:D,B=0;B<U.length;B++)if(t.substr(S,U[B].length).toLowerCase()===U[B].toLowerCase())return S+=U[B].length,B+A.minMonth;throw(Mc.local.unknownNameAt||Mc.regionalOptions[""].unknownNameAt).replace(/\{0\}/,S)},_=function(){if(typeof u=="function"){var P=p("M")?u.call(A,t.substring(S)):l.call(A,t.substring(S));return S+=P.length,P}return k("M",l,u)},E=function(){if(t.charAt(S)!==e.charAt(g))throw(Mc.local.unexpectedLiteralAt||Mc.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,S);S++},S=0,g=0;g<e.length;g++)if(b)e.charAt(g)==="'"&&!p("'")?b=!1:E();else switch(e.charAt(g)){case"d":v=w("d");break;case"D":k("D",n,a);break;case"o":d=w("o");break;case"w":w("w");break;case"m":h=T();break;case"M":h=_();break;case"y":var C=g;x=!p("y",2),g=C,c=w("y",2);break;case"Y":c=w("Y",2);break;case"J":f=w("J")+.5,t.charAt(S)==="."&&(S++,w("J"));break;case"@":f=w("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":f=w("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":S=t.length;break;case"'":p("'")?E():b=!0;break;default:E()}if(S<t.length)throw Mc.local.unexpectedText||Mc.regionalOptions[""].unexpectedText;if(c===-1?c=this.today().year():c<100&&x&&(c+=i===-1?1900:this.today().year()-this.today().year()%100-(c<=i?0:100)),typeof h=="string"&&(h=o.call(this,c,h)),d>-1){h=1,v=d;for(var M=this.daysInMonth(c,h);v>M;M=this.daysInMonth(c,h))h++,v-=M}return f>-1?this.fromJD(f):this.newDate(c,h,v)},determineDate:function(e,t,r,i,n){r&&typeof r!="object"&&(n=i,i=r,r=null),typeof i!="string"&&(n=i,i="");var a=this,o=function(s){try{return a.parseDate(i,s,n)}catch(c){}s=s.toLowerCase();for(var l=(s.match(/^c/)&&r?r.newDate():null)||a.today(),u=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,f=u.exec(s);f;)l.add(parseInt(f[1],10),f[2]||"d"),f=u.exec(s);return l};return t=t?t.newDate():null,e=e==null?t:typeof e=="string"?o(e):typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?t:a.today().add(e,"d"):a.newDate(e),e}})});var vje=ie(()=>{var G1=Mh(),gQt=lf(),lK=G1.instance();function T8(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}T8.prototype=new G1.baseCalendar;gQt(T8.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(e,t){if(typeof e=="string"){var r=e.match(mQt);return r?r[0]:""}var i=this._validateYear(e),n=e.month(),a=""+this.toChineseMonth(i,n);return t&&a.length<2&&(a="0"+a),this.isIntercalaryMonth(i,n)&&(a+="i"),a},monthNames:function(e){if(typeof e=="string"){var t=e.match(xQt);return t?t[0]:""}var r=this._validateYear(e),i=e.month(),n=this.toChineseMonth(r,i),a=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][n-1];return this.isIntercalaryMonth(r,i)&&(a="\u95F0"+a),a},monthNamesShort:function(e){if(typeof e=="string"){var t=e.match(_Qt);return t?t[0]:""}var r=this._validateYear(e),i=e.month(),n=this.toChineseMonth(r,i),a=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][n-1];return this.isIntercalaryMonth(r,i)&&(a="\u95F0"+a),a},parseMonth:function(e,t){e=this._validateYear(e);var r=parseInt(t),i;if(isNaN(r))t[0]==="\u95F0"&&(i=!0,t=t.substring(1)),t[t.length-1]==="\u6708"&&(t=t.substring(0,t.length-1)),r=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(t);else{var n=t[t.length-1];i=n==="i"||n==="I"}var a=this.toMonthIndex(e,r,i);return a},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(e,t){if(e.year&&(e=e.year()),typeof e!="number"||e<1888||e>2111)throw t.replace(/\{0\}/,this.local.name);return e},toMonthIndex:function(e,t,r){var i=this.intercalaryMonth(e),n=r&&t!==i;if(n||t<1||t>12)throw G1.local.invalidMonth.replace(/\{0\}/,this.local.name);var a;return i?!r&&t<=i?a=t-1:a=t:a=t-1,a},toChineseMonth:function(e,t){e.year&&(e=e.year(),t=e.month());var r=this.intercalaryMonth(e),i=r?12:11;if(t<0||t>i)throw G1.local.invalidMonth.replace(/\{0\}/,this.local.name);var n;return r?t<r?n=t+1:n=t:n=t+1,n},intercalaryMonth:function(e){e=this._validateYear(e);var t=Y1[e-Y1[0]],r=t>>13;return r},isIntercalaryMonth:function(e,t){e.year&&(e=e.year(),t=e.month());var r=this.intercalaryMonth(e);return!!r&&r===t},leapYear:function(e){return this.intercalaryMonth(e)!==0},weekOfYear:function(e,t,r){var i=this._validateYear(e,G1.local.invalidyear),n=W1[i-W1[0]],a=n>>9&4095,o=n>>5&15,s=n&31,l;l=lK.newDate(a,o,s),l.add(4-(l.dayOfWeek()||7),"d");var u=this.toJD(e,t,r)-l.toJD();return 1+Math.floor(u/7)},monthsInYear:function(e){return this.leapYear(e)?13:12},daysInMonth:function(e,t){e.year&&(t=e.month(),e=e.year()),e=this._validateYear(e);var r=Y1[e-Y1[0]],i=r>>13,n=i?12:11;if(t>n)throw G1.local.invalidMonth.replace(/\{0\}/,this.local.name);var a=r&1<<12-t?30:29;return a},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,a,r,G1.local.invalidDate);e=this._validateYear(i.year()),t=i.month(),r=i.day();var n=this.isIntercalaryMonth(e,t),a=this.toChineseMonth(e,t),o=wQt(e,a,r,n);return lK.toJD(o.year,o.month,o.day)},fromJD:function(e){var t=lK.fromJD(e),r=bQt(t.year(),t.month(),t.day()),i=this.toMonthIndex(r.year,r.month,r.isIntercalary);return this.newDate(r.year,i,r.day)},fromString:function(e){var t=e.match(yQt),r=this._validateYear(+t[1]),i=+t[2],n=!!t[3],a=this.toMonthIndex(r,i,n),o=+t[4];return this.newDate(r,a,o)},add:function(e,t,r){var i=e.year(),n=e.month(),a=this.isIntercalaryMonth(i,n),o=this.toChineseMonth(i,n),s=Object.getPrototypeOf(T8.prototype).add.call(this,e,t,r);if(r==="y"){var l=s.year(),u=s.month(),f=this.isIntercalaryMonth(l,o),c=a&&f?this.toMonthIndex(l,o,!0):this.toMonthIndex(l,o,!1);c!==u&&s.month(c)}return s}});var yQt=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,mQt=/^\d?\d[iI]?/m,xQt=/^闰?十?[一二三四五六七八九]?月/m,_Qt=/^闰?十?[一二三四五六七八九]?/m;G1.calendars.chinese=T8;var Y1=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],W1=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function bQt(e,t,r,i){var n,a;if(typeof e=="object")n=e,a=t||{};else{var o=typeof e=="number"&&e>=1888&&e<=2111;if(!o)throw new Error("Solar year outside range 1888-2111");var s=typeof t=="number"&&t>=1&&t<=12;if(!s)throw new Error("Solar month outside range 1 - 12");var l=typeof r=="number"&&r>=1&&r<=31;if(!l)throw new Error("Solar day outside range 1 - 31");n={year:e,month:t,day:r},a=i||{}}var u=W1[n.year-W1[0]],f=n.year<<9|n.month<<5|n.day;a.year=f>=u?n.year:n.year-1,u=W1[a.year-W1[0]];var c=u>>9&4095,h=u>>5&15,v=u&31,d,x=new Date(c,h-1,v),b=new Date(n.year,n.month-1,n.day);d=Math.round((b-x)/(24*3600*1e3));var p=Y1[a.year-Y1[0]],w;for(w=0;w<13;w++){var A=p&1<<12-w?30:29;if(d<A)break;d-=A}var T=p>>13;return!T||w<T?(a.isIntercalary=!1,a.month=1+w):w===T?(a.isIntercalary=!0,a.month=w):(a.isIntercalary=!1,a.month=w),a.day=1+d,a}function wQt(e,t,r,i,n){var a,o;if(typeof e=="object")o=e,a=t||{};else{var s=typeof e=="number"&&e>=1888&&e<=2111;if(!s)throw new Error("Lunar year outside range 1888-2111");var l=typeof t=="number"&&t>=1&&t<=12;if(!l)throw new Error("Lunar month outside range 1 - 12");var u=typeof r=="number"&&r>=1&&r<=30;if(!u)throw new Error("Lunar day outside range 1 - 30");var f;typeof i=="object"?(f=!1,a=i):(f=!!i,a=n||{}),o={year:e,month:t,day:r,isIntercalary:f}}var c;c=o.day-1;var h=Y1[o.year-Y1[0]],v=h>>13,d;v&&(o.month>v||o.isIntercalary)?d=o.month:d=o.month-1;for(var x=0;x<d;x++){var b=h&1<<12-x?30:29;c+=b}var p=W1[o.year-W1[0]],w=p>>9&4095,A=p>>5&15,T=p&31,k=new Date(w,A-1,T+c);return a.year=k.getFullYear(),a.month=1+k.getMonth(),a.day=k.getDate(),a}});var dje=ie(()=>{var yb=Mh(),TQt=lf();function uK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}uK.prototype=new yb.baseCalendar;TQt(uK.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,yb.local.invalidYear),r=t.year()+(t.year()<0?1:0);return r%4===3||r%4===-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,yb.local.invalidYear||yb.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,yb.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,t,r,yb.local.invalidDate);return e=i.year(),e<0&&e++,i.day()+(i.month()-1)*30+(e-1)*365+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,r=Math.floor((t-Math.floor((t+366)/1461))/365)+1;r<=0&&r--,t=Math.floor(e)+.5-this.newDate(r,1,1).toJD();var i=Math.floor(t/30)+1,n=t-(i-1)*30+1;return this.newDate(r,i,n)}});yb.calendars.coptic=uK});var pje=ie(()=>{var Oy=Mh(),AQt=lf();function fK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}fK.prototype=new Oy.baseCalendar;AQt(fK.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,Oy.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,Oy.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,Oy.local.invalidYear),400},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/8)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,Oy.local.invalidMonth);return this.daysPerMonth[r.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,t,r){var i=this._validate(e,t,r,Oy.local.invalidDate);return(i.day()+1)%8},weekDay:function(e,t,r){var i=this.dayOfWeek(e,t,r);return i>=2&&i<=6},extraInfo:function(e,t,r){var i=this._validate(e,t,r,Oy.local.invalidDate);return{century:MQt[Math.floor((i.year()-1)/100)+1]||""}},toJD:function(e,t,r){var i=this._validate(e,t,r,Oy.local.invalidDate);return e=i.year()+(i.year()<0?1:0),t=i.month(),r=i.day(),r+(t>1?16:0)+(t>2?(t-2)*32:0)+(e-1)*400+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var t=Math.floor(e/400)+1;e-=(t-1)*400,e+=e>15?16:0;var r=Math.floor(e/32)+1,i=e-(r-1)*32+1;return this.newDate(t<=0?t-1:t,r,i)}});var MQt={20:"Fruitbat",21:"Anchovy"};Oy.calendars.discworld=fK});var gje=ie(()=>{var mb=Mh(),SQt=lf();function cK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}cK.prototype=new mb.baseCalendar;SQt(cK.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,mb.local.invalidYear),r=t.year()+(t.year()<0?1:0);return r%4===3||r%4===-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,mb.local.invalidYear||mb.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,mb.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,t,r,mb.local.invalidDate);return e=i.year(),e<0&&e++,i.day()+(i.month()-1)*30+(e-1)*365+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,r=Math.floor((t-Math.floor((t+366)/1461))/365)+1;r<=0&&r--,t=Math.floor(e)+.5-this.newDate(r,1,1).toJD();var i=Math.floor(t/30)+1,n=t-(i-1)*30+1;return this.newDate(r,i,n)}});mb.calendars.ethiopian=cK});var yje=ie(()=>{var X1=Mh(),EQt=lf();function hK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}hK.prototype=new X1.baseCalendar;EQt(hK.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,X1.local.invalidYear);return this._leapYear(t.year())},_leapYear:function(e){return e=e<0?e+1:e,A8(e*7+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,X1.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,X1.local.invalidYear);return e=t.year(),this.toJD(e===-1?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,X1.local.invalidMonth),t===12&&this.leapYear(e)||t===8&&A8(this.daysInYear(e),10)===5?30:t===9&&A8(this.daysInYear(e),10)===3?29:this.daysPerMonth[t-1]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},extraInfo:function(e,t,r){var i=this._validate(e,t,r,X1.local.invalidDate);return{yearType:(this.leapYear(i)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(i)%10-3]}},toJD:function(e,t,r){var i=this._validate(e,t,r,X1.local.invalidDate);e=i.year(),t=i.month(),r=i.day();var n=e<=0?e+1:e,a=this.jdEpoch+this._delay1(n)+this._delay2(n)+r+1;if(t<7){for(var o=7;o<=this.monthsInYear(e);o++)a+=this.daysInMonth(e,o);for(var o=1;o<t;o++)a+=this.daysInMonth(e,o)}else for(var o=7;o<t;o++)a+=this.daysInMonth(e,o);return a},_delay1:function(e){var t=Math.floor((235*e-234)/19),r=12084+13753*t,i=t*29+Math.floor(r/25920);return A8(3*(i+1),7)<3&&i++,i},_delay2:function(e){var t=this._delay1(e-1),r=this._delay1(e),i=this._delay1(e+1);return i-r===356?2:r-t===382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var t=Math.floor((e-this.jdEpoch)*98496/35975351)-1;e>=this.toJD(t===-1?1:t+1,7,1);)t++;for(var r=e<this.toJD(t,1,1)?7:1;e>this.toJD(t,r,this.daysInMonth(t,r));)r++;var i=e-this.toJD(t,r,1)+1;return this.newDate(t,r,i)}});function A8(e,t){return e-t*Math.floor(e/t)}X1.calendars.hebrew=hK});var mje=ie(()=>{var tk=Mh(),kQt=lf();function vK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}vK.prototype=new tk.baseCalendar;kQt(vK.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,tk.local.invalidYear);return(t.year()*11+14)%30<11},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){return this.leapYear(e)?355:354},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,tk.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var i=this._validate(e,t,r,tk.local.invalidDate);return e=i.year(),t=i.month(),r=i.day(),e=e<=0?e+1:e,r+Math.ceil(29.5*(t-1))+(e-1)*354+Math.floor((3+11*e)/30)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=Math.floor((30*(e-this.jdEpoch)+10646)/10631);t=t<=0?t-1:t;var r=Math.min(12,Math.ceil((e-29-this.toJD(t,1,1))/29.5)+1),i=e-this.toJD(t,r,1)+1;return this.newDate(t,r,i)}});tk.calendars.islamic=vK});var xje=ie(()=>{var rk=Mh(),CQt=lf();function dK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}dK.prototype=new rk.baseCalendar;CQt(dK.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,rk.local.invalidYear),r=t.year()<0?t.year()+1:t.year();return r%4===0},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,rk.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,t,r,rk.local.invalidDate);return e=i.year(),t=i.month(),r=i.day(),e<0&&e++,t<=2&&(e--,t+=12),Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+r-1524.5},fromJD:function(e){var t=Math.floor(e+.5),r=t+1524,i=Math.floor((r-122.1)/365.25),n=Math.floor(365.25*i),a=Math.floor((r-n)/30.6001),o=a-Math.floor(a<14?1:13),s=i-Math.floor(o>2?4716:4715),l=r-n-Math.floor(30.6001*a);return s<=0&&s--,this.newDate(s,o,l)}});rk.calendars.julian=dK});var bje=ie(()=>{var Wp=Mh(),LQt=lf();function gK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}gK.prototype=new Wp.baseCalendar;LQt(gK.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,Wp.local.invalidYear),!1},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,Wp.local.invalidYear);e=t.year();var r=Math.floor(e/400);e=e%400,e+=e<0?400:0;var i=Math.floor(e/20);return r+"."+i+"."+e%20},forYear:function(e){if(e=e.split("."),e.length<3)throw"Invalid Mayan year";for(var t=0,r=0;r<e.length;r++){var i=parseInt(e[r],10);if(Math.abs(i)>19||r>0&&i<0)throw"Invalid Mayan year";t=t*20+i}return t},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,Wp.local.invalidYear),18},weekOfYear:function(e,t,r){return this._validate(e,t,r,Wp.local.invalidDate),0},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,Wp.local.invalidYear),360},daysInMonth:function(e,t){return this._validate(e,t,this.minDay,Wp.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(e,t,r){var i=this._validate(e,t,r,Wp.local.invalidDate);return i.day()},weekDay:function(e,t,r){return this._validate(e,t,r,Wp.local.invalidDate),!0},extraInfo:function(e,t,r){var i=this._validate(e,t,r,Wp.local.invalidDate),n=i.toJD(),a=this._toHaab(n),o=this._toTzolkin(n);return{haabMonthName:this.local.haabMonths[a[0]-1],haabMonth:a[0],haabDay:a[1],tzolkinDayName:this.local.tzolkinMonths[o[0]-1],tzolkinDay:o[0],tzolkinTrecena:o[1]}},_toHaab:function(e){e-=this.jdEpoch;var t=pK(e+8+17*20,365);return[Math.floor(t/20)+1,pK(t,20)]},_toTzolkin:function(e){return e-=this.jdEpoch,[_je(e+20,20),_je(e+4,13)]},toJD:function(e,t,r){var i=this._validate(e,t,r,Wp.local.invalidDate);return i.day()+i.month()*20+i.year()*360+this.jdEpoch},fromJD:function(e){e=Math.floor(e)+.5-this.jdEpoch;var t=Math.floor(e/360);e=e%360,e+=e<0?360:0;var r=Math.floor(e/20),i=e%20;return this.newDate(t,r,i)}});function pK(e,t){return e-t*Math.floor(e/t)}function _je(e,t){return pK(e-1,t)+1}Wp.calendars.mayan=gK});var Tje=ie(()=>{var xb=Mh(),PQt=lf();function yK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}yK.prototype=new xb.baseCalendar;var wje=xb.instance("gregorian");PQt(yK.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,xb.local.invalidYear||xb.regionalOptions[""].invalidYear);return wje.leapYear(t.year()+(t.year()<1?1:0)+1469)},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(1-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,xb.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(n,t,r){var i=this._validate(n,t,r,xb.local.invalidMonth),n=i.year();n<0&&n++;for(var a=i.day(),o=1;o<i.month();o++)a+=this.daysPerMonth[o-1];return a+wje.toJD(n+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var t=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(t+1,1,1);)t++;for(var r=e-Math.floor(this.toJD(t,1,1)+.5)+1,i=1;r>this.daysInMonth(t,i);)r-=this.daysInMonth(t,i),i++;return this.newDate(t,i,r)}});xb.calendars.nanakshahi=yK});var Aje=ie(()=>{var _b=Mh(),RQt=lf();function mK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}mK.prototype=new _b.baseCalendar;RQt(mK.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(e){return this.daysInYear(e)!==this.daysPerYear},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,_b.local.invalidYear);if(e=t.year(),typeof this.NEPALI_CALENDAR_DATA[e]=="undefined")return this.daysPerYear;for(var r=0,i=this.minMonth;i<=12;i++)r+=this.NEPALI_CALENDAR_DATA[e][i];return r},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,_b.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[e]=="undefined"?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[e][t]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},toJD:function(e,t,r){var i=this._validate(e,t,r,_b.local.invalidDate);e=i.year(),t=i.month(),r=i.day();var n=_b.instance(),a=0,o=t,s=e;this._createMissingCalendarData(e);var l=e-(o>9||o===9&&r>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);for(t!==9&&(a=r,o--);o!==9;)o<=0&&(o=12,s--),a+=this.NEPALI_CALENDAR_DATA[s][o],o--;return t===9?(a+=r-this.NEPALI_CALENDAR_DATA[s][0],a<0&&(a+=n.daysInYear(l))):a+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0],n.newDate(l,1,1).add(a,"d").toJD()},fromJD:function(e){var t=_b.instance(),r=t.fromJD(e),i=r.year(),n=r.dayOfYear(),a=i+56;this._createMissingCalendarData(a);for(var o=9,s=this.NEPALI_CALENDAR_DATA[a][0],l=this.NEPALI_CALENDAR_DATA[a][o]-s+1;n>l;)o++,o>12&&(o=1,a++),l+=this.NEPALI_CALENDAR_DATA[a][o];var u=this.NEPALI_CALENDAR_DATA[a][o]-(l-n);return this.newDate(a,o,u)},_createMissingCalendarData:function(e){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var r=e-1;r<e+2;r++)typeof this.NEPALI_CALENDAR_DATA[r]=="undefined"&&(this.NEPALI_CALENDAR_DATA[r]=t)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}});_b.calendars.nepali=mK});var Mje=ie(()=>{var HT=Mh(),DQt=lf();function M8(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M8.prototype=new HT.baseCalendar;DQt(M8.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,HT.local.invalidYear);return((t.year()-(t.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-((i.dayOfWeek()+1)%7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,HT.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var i=this._validate(e,t,r,HT.local.invalidDate);e=i.year(),t=i.month(),r=i.day();var n=e-(e>=0?474:473),a=474+xK(n,2820);return r+(t<=7?(t-1)*31:(t-1)*30+6)+Math.floor((a*682-110)/2816)+(a-1)*365+Math.floor(n/2820)*1029983+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=e-this.toJD(475,1,1),r=Math.floor(t/1029983),i=xK(t,1029983),n=2820;if(i!==1029982){var a=Math.floor(i/366),o=xK(i,366);n=Math.floor((2134*a+2816*o+2815)/1028522)+a+1}var s=n+2820*r+474;s=s<=0?s-1:s;var l=e-this.toJD(s,1,1)+1,u=l<=186?Math.ceil(l/31):Math.ceil((l-6)/30),f=e-this.toJD(s,u,1)+1;return this.newDate(s,u,f)}});function xK(e,t){return e-t*Math.floor(e/t)}HT.calendars.persian=M8;HT.calendars.jalali=M8});var Sje=ie(()=>{var bb=Mh(),IQt=lf(),S8=bb.instance();function _K(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}_K.prototype=new bb.baseCalendar;IQt(_K.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,bb.local.invalidYear),r=this._t2gYear(t.year());return S8.leapYear(r)},weekOfYear:function(n,t,r){var i=this._validate(n,this.minMonth,this.minDay,bb.local.invalidYear),n=this._t2gYear(i.year());return S8.weekOfYear(n,i.month(),i.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,bb.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(n,t,r){var i=this._validate(n,t,r,bb.local.invalidDate),n=this._t2gYear(i.year());return S8.toJD(n,i.month(),i.day())},fromJD:function(e){var t=S8.fromJD(e),r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}});bb.calendars.taiwan=_K});var Eje=ie(()=>{var wb=Mh(),FQt=lf(),E8=wb.instance();function bK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}bK.prototype=new wb.baseCalendar;FQt(bK.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,wb.local.invalidYear),r=this._t2gYear(t.year());return E8.leapYear(r)},weekOfYear:function(n,t,r){var i=this._validate(n,this.minMonth,this.minDay,wb.local.invalidYear),n=this._t2gYear(i.year());return E8.weekOfYear(n,i.month(),i.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,wb.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(n,t,r){var i=this._validate(n,t,r,wb.local.invalidDate),n=this._t2gYear(i.year());return E8.toJD(n,i.month(),i.day())},fromJD:function(e){var t=E8.fromJD(e),r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}});wb.calendars.thai=bK});var kje=ie(()=>{var Tb=Mh(),qQt=lf();function wK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}wK.prototype=new Tb.baseCalendar;qQt(wK.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,Tb.local.invalidYear);return this.daysInYear(t.year())===355},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var t=0,r=1;r<=12;r++)t+=this.daysInMonth(e,r);return t},daysInMonth:function(e,t){for(var r=this._validate(e,t,this.minDay,Tb.local.invalidMonth),i=r.toJD()-24e5+.5,n=0,a=0;a<Z1.length;a++){if(Z1[a]>i)return Z1[n]-Z1[n-1];n++}return 30},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var i=this._validate(e,t,r,Tb.local.invalidDate),n=12*(i.year()-1)+i.month()-15292,a=i.day()+Z1[n-1]-1;return a+24e5-.5},fromJD:function(e){for(var t=e-24e5+.5,r=0,i=0;i<Z1.length&&!(Z1[i]>t);i++)r++;var n=r+15292,a=Math.floor((n-1)/12),o=a+1,s=n-12*a,l=t-Z1[r-1]+1;return this.newDate(o,s,l)},isValid:function(e,t,r){var i=Tb.baseCalendar.prototype.isValid.apply(this,arguments);return i&&(e=e.year!=null?e.year:e,i=e>=1276&&e<=1500),i},_validate:function(e,t,r,i){var n=Tb.baseCalendar.prototype._validate.apply(this,arguments);if(n.year<1276||n.year>1500)throw i.replace(/\{0\}/,this.local.name);return n}});Tb.calendars.ummalqura=wK;var Z1=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]});var Lje=ie((N_r,Cje)=>{"use strict";Cje.exports=Mh();hje();vje();dje();pje();gje();yje();mje();xje();bje();Tje();Aje();Mje();Sje();Eje();kje()});var zje=ie((U_r,qje)=>{"use strict";var Rje=Lje(),nk=Zt(),Dje=eo(),zQt=Dje.EPOCHJD,OQt=Dje.ONEDAY,MK={valType:"enumerated",values:nk.sortObjectKeys(Rje.calendars),editType:"calc",dflt:"gregorian"},Ije=function(e,t,r,i){var n={};return n[r]=MK,nk.coerce(e,t,n,r,i)},BQt=function(e,t,r,i){for(var n=0;n<r.length;n++)Ije(e,t,r[n]+"calendar",i.calendar)},NQt={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},UQt={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},VQt={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},k8="##",HQt={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:k8,w:k8,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function GQt(e,t,r){for(var i=Math.floor((t+.05)/OQt)+zQt,n=Fje(r).fromJD(i),a=0,o,s,l,u,f;(a=e.indexOf("%",a))!==-1;)o=e.charAt(a+1),o==="0"||o==="-"||o==="_"?(l=3,s=e.charAt(a+2),o==="_"&&(o="-")):(s=o,o="0",l=2),u=HQt[s],u?(u===k8?f=k8:f=n.formatDate(u[o]),e=e.substr(0,a)+f+e.substr(a+l),a+=f.length):a+=l;return e}var Pje={};function Fje(e){var t=Pje[e];return t||(t=Pje[e]=Rje.instance(e),t)}function Ab(e){return nk.extendFlat({},MK,{description:e})}function SK(e){return"Sets the calendar system to use with `"+e+"` date data."}var AK={xcalendar:Ab(SK("x"))},Sg=nk.extendFlat({},AK,{ycalendar:Ab(SK("y"))}),TK=nk.extendFlat({},Sg,{zcalendar:Ab(SK("z"))}),GT=Ab(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));qje.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:Sg,bar:Sg,box:Sg,heatmap:Sg,contour:Sg,histogram:Sg,histogram2d:Sg,histogram2dcontour:Sg,scatter3d:TK,surface:TK,mesh3d:TK,scattergl:Sg,ohlc:AK,candlestick:AK},layout:{calendar:Ab(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:GT},yaxis:{calendar:GT},scene:{xaxis:{calendar:GT},yaxis:{calendar:GT},zaxis:{calendar:GT}},polar:{radialaxis:{calendar:GT}}},transforms:{filter:{valuecalendar:Ab(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:Ab(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:MK,handleDefaults:Ije,handleTraceDefaults:BQt,CANONICAL_SUNDAY:UQt,CANONICAL_TICK:NQt,DFLTRANGE:VQt,getCal:Fje,worldCalFmt:GQt}});var Bje=ie((V_r,Oje)=>{"use strict";Oje.exports=zje()});var Nje=_0e();Nje.register([wge(),uye(),mme(),Ome(),Jme(),X1e(),oxe(),Wxe(),b_e(),rbe(),Vbe(),tSe(),HSe(),D5e(),_ke(),Kke(),xCe(),Y4e(),fLe(),kLe(),NLe(),ePe(),pPe(),PPe(),MRe(),YRe(),aOe(),a7e(),N7e(),Q7e(),tNe(),SNe(),I9e(),j9e(),xUe(),EVe(),JVe(),RHe(),$Ge(),wYe(),HYe(),pWe(),CWe(),EXe(),YXe(),fZe(),GZe(),JZe(),nje(),oje(),uje(),Bje()]);module.exports=Nje;
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
 * pad-left <https://github.com/jonschlinkert/pad-left>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT license.
 */
/*!
 * repeat-string <https://github.com/jonschlinkert/repeat-string>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */
/*! Bundled license information:

native-promise-only/lib/npo.src.js:
  (*! Native Promise Only
      v0.8.1 (c) Kyle Simpson
      MIT License: http://getify.mit-license.org
  *)

polybooljs/index.js:
  (*
   * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
   * @license MIT
   * @preserve Project Home: https://github.com/voidqk/polybooljs
   *)

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

assert/build/internal/util/comparisons.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
   * @license  MIT
   *)

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)
*/
if (typeof module.exports == "object" && typeof exports == "object") {
  var __cp = (to, from, except, desc) => {
    if ((from && typeof from === "object") || typeof from === "function") {
      for (let key of Object.getOwnPropertyNames(from)) {
        if (!Object.prototype.hasOwnProperty.call(to, key) && key !== except)
        Object.defineProperty(to, key, {
          get: () => from[key],
          enumerable: !(desc = Object.getOwnPropertyDescriptor(from, key)) || desc.enumerable,
        });
      }
    }
    return to;
  };
  module.exports = __cp(module.exports, exports);
}
return module.exports;
}))
